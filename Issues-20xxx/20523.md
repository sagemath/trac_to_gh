# Issue 20523: Upgrade R to 3.3.3

archive/issues_020286.json:
```json
{
    "assignees": [],
    "body": "Usual reason...\n\nThis one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.\n\nOriginal tarballs :\n\n* [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)\n* [curl](https://curl.haxx.se/download/curl-7.53.1.tar.bz2)\n* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz)\n\nDepends on #21767\nDepends on #21770\n\nCC:  @tscrim @embray @sagetrac-gouezel @jpflori\n\nKeywords: **r-project, days85**\n\nBranch: **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**\n\nWork Issues: **curl openssl**\n\nReviewer: **Emmanuel Charpentier, Dima Pasechnik**\n\nAuthor: **Jean-Pierre Flori, Emmanuel Charpentier**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20523_\n\n",
    "closed_at": "2017-03-27T20:43:05Z",
    "created_at": "2016-04-30T09:48:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade R to 3.3.3",
    "type": "issue",
    "updated_at": "2018-09-14T11:32:30Z",
    "url": "https://github.com/sagemath/sage/issues/20523",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Usual reason...

This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.

Original tarballs :

* [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)
* [curl](https://curl.haxx.se/download/curl-7.53.1.tar.bz2)
* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz)

Depends on #21767
Depends on #21770

CC:  @tscrim @embray @sagetrac-gouezel @jpflori

Keywords: **r-project, days85**

Branch: **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**

Work Issues: **curl openssl**

Reviewer: **Emmanuel Charpentier, Dima Pasechnik**

Author: **Jean-Pierre Flori, Emmanuel Charpentier**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/20523_





---

archive/issue_events_286600.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-30T09:48:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286600"
}
```



---

archive/issue_events_286601.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-30T09:48:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286601"
}
```



---

archive/issue_events_286602.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-30T09:48:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286602"
}
```



---

archive/issue_events_286603.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-30T09:48:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286603"
}
```



---

archive/issue_comments_296229.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\ncc-ing the !Windows/Cygwin people.",
    "created_at": "2016-04-30T15:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296229",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

cc-ing the !Windows/Cygwin people.



---

archive/issue_comments_296230.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat is the best process for testing a new dependency update?",
    "created_at": "2016-05-02T09:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296230",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

What is the best process for testing a new dependency update?



---

archive/issue_comments_296231.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have to forfeit on this one, or at least delay for one eek minimum (RealLife overflow + ill health).\n\nBTW, it seems that *some * of our current patches were created only for cygwin environment : I am unable to retrieve their necessity. Could their authors mtell me if they encountered their use in a Unix (Linux) environment ?\n\nSorry...",
    "created_at": "2016-05-05T17:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296231",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:3" align="right">comment:3</div>

I have to forfeit on this one, or at least delay for one eek minimum (RealLife overflow + ill health).

BTW, it seems that *some * of our current patches were created only for cygwin environment : I am unable to retrieve their necessity. Could their authors mtell me if they encountered their use in a Unix (Linux) environment ?

Sorry...



---

archive/issue_comments_296232.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIt seems that only the `large_address_aware` patch is cygwin-only, upstream report:\n* https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15643\nThe other patches look general purpose.",
    "created_at": "2016-05-09T10:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296232",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

It seems that only the `large_address_aware` patch is cygwin-only, upstream report:
* https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15643
The other patches look general purpose.



---

archive/issue_comments_296233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,10 +2,4 @@\n \n This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.\n \n-Plan :\n-* Update to 3.3.0RC, test it on Linux.\n-* Mark it as \"needs review\", and specifically ask for review on a Windows (cygwin ?) system.\n-* Accounting for feedback about the Windows build, update to 3.3.0 (announced for May 3, 2016).\n-* Put that (definitive) version up for review.\n-\n-The RC version is [here](https://cran.r-project.org/src/base-prerelease/R-rc_2016-04-28_r70564.tar.gz).\n+The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.1.tar.gz)\n``````\n",
    "created_at": "2016-08-20T07:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296233",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,10 +2,4 @@
 
 This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.
 
-Plan :
-* Update to 3.3.0RC, test it on Linux.
-* Mark it as "needs review", and specifically ask for review on a Windows (cygwin ?) system.
-* Accounting for feedback about the Windows build, update to 3.3.0 (announced for May 3, 2016).
-* Put that (definitive) version up for review.
-
-The RC version is [here](https://cran.r-project.org/src/base-prerelease/R-rc_2016-04-28_r70564.tar.gz).
+The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.1.tar.gz)
``````




---

archive/issue_events_286604.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-08-20T07:28:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "title_is": "Upgrade R to 3.3.1",
    "title_was": "Upgrade R to 3.3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286604"
}
```



---

archive/issue_comments_296234.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI've got some nonmaskable RealLife interruptions, seriously interfering with my plans. Sorry for the delay.\n\nI updated the description to reflect the current plans.",
    "created_at": "2016-08-20T07:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296234",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:5" align="right">comment:5</div>

I've got some nonmaskable RealLife interruptions, seriously interfering with my plans. Sorry for the delay.

I updated the description to reflect the current plans.



---

archive/issue_comments_296235.json:
```json
{
    "body": "Branch: **[u/charpent/upgrade_r_to_3_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_3_1)**",
    "created_at": "2016-08-20T10:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296235",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Branch: **[u/charpent/upgrade_r_to_3_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_3_1)**



---

archive/issue_events_286605.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-08-20T11:07:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286605"
}
```



---

archive/issue_comments_296236.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe proposed patch seems valid on Linux : it passes ptestlong with errors in two doctests :\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long --warn-long 109.1 src/sage/misc/trace.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nwhich both pass when run standalone :\n\n```\ncharpent@asus16-ec:/usr/local/sage-7$ sage -t --long --warn-long 109.1 src/sage/misc/trace.py\nRunning doctests with ID 2016-08-20-12-45-47-583c0f71.\nGit branch: t/20523/upgrade_r_to_3_3_1\nUsing --optional=database_gap,mpir,python2,sage,sage_mode\nDoctesting 1 file.\nsage -t --long --warn-long 109.1 src/sage/misc/trace.py\n    [9 tests, 1.79 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 1.8 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 1.8 seconds\ncharpent@asus16-ec:/usr/local/sage-7$ sage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py\nRunning doctests with ID 2016-08-20-12-46-08-790dac8d.\nGit branch: t/20523/upgrade_r_to_3_3_1\nUsing --optional=database_gap,mpir,python2,sage,sage_mode\nDoctesting 1 file.\nsage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py\n    [588 tests, 6.39 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 6.5 seconds\n    cpu time: 3.0 seconds\n    cumulative wall time: 6.4 seconds\n```\n\nI have had this kind of hiccups since about 7.2 ; reports (on sage-release, mainly) did not alarm the release maintainers ; one of them has generated a tick.\n\nNote that the `large_address_aware` has been lost : R 3.3.1 no longer has cygwin-specific sections in configure.ac or Makefile.in (and therefore nothing to patch) ; maybe the cygwin-relevant problems have been fixed upstream ?\n\nI don't have a Windows machine to port Sage to ; I leave this problem to people better(?) equipped than me.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3\"><code>336ee16</code></a></td><td><code>Upgrade R to 3.3.1 (correct on Linux).</code></td></tr></table>\n",
    "created_at": "2016-08-20T11:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296236",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:7" align="right">comment:7</div>

The proposed patch seems valid on Linux : it passes ptestlong with errors in two doctests :

```
----------------------------------------------------------------------
sage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long --warn-long 109.1 src/sage/misc/trace.py  # 1 doctest failed
----------------------------------------------------------------------
```
which both pass when run standalone :

```
charpent@asus16-ec:/usr/local/sage-7$ sage -t --long --warn-long 109.1 src/sage/misc/trace.py
Running doctests with ID 2016-08-20-12-45-47-583c0f71.
Git branch: t/20523/upgrade_r_to_3_3_1
Using --optional=database_gap,mpir,python2,sage,sage_mode
Doctesting 1 file.
sage -t --long --warn-long 109.1 src/sage/misc/trace.py
    [9 tests, 1.79 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 1.8 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 1.8 seconds
charpent@asus16-ec:/usr/local/sage-7$ sage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py
Running doctests with ID 2016-08-20-12-46-08-790dac8d.
Git branch: t/20523/upgrade_r_to_3_3_1
Using --optional=database_gap,mpir,python2,sage,sage_mode
Doctesting 1 file.
sage -t --long --warn-long 109.1 src/sage/homology/simplicial_complex.py
    [588 tests, 6.39 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 6.5 seconds
    cpu time: 3.0 seconds
    cumulative wall time: 6.4 seconds
```

I have had this kind of hiccups since about 7.2 ; reports (on sage-release, mainly) did not alarm the release maintainers ; one of them has generated a tick.

Note that the `large_address_aware` has been lost : R 3.3.1 no longer has cygwin-specific sections in configure.ac or Makefile.in (and therefore nothing to patch) ; maybe the cygwin-relevant problems have been fixed upstream ?

I don't have a Windows machine to port Sage to ; I leave this problem to people better(?) equipped than me.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3"><code>336ee16</code></a></td><td><code>Upgrade R to 3.3.1 (correct on Linux).</code></td></tr></table>




---

archive/issue_comments_296237.json:
```json
{
    "body": "Commit: **[`336ee16`](https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3)**",
    "created_at": "2016-08-20T11:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296237",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Commit: **[`336ee16`](https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3)**



---

archive/issue_comments_296238.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOn the other hand, I found this in the current [R Installation and Administration Manual](https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Cygwin) :\n\n> C.8 Cygwin\n> \n> The 32-bit version has never worked well enough to pass R\u2019s make check, and residual support from\n> earlier experiments was removed in R 3.3.0.\n> \n> The 64-bit version is completely unsupported.\n\nMaybe we should consider to have rather an interface to system's R and make it an optional package ?\n\nI'll broach this subject open on sage-devel (not r-devel, as I wrote incorrectly the first time...).",
    "created_at": "2016-08-20T13:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296238",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

On the other hand, I found this in the current [R Installation and Administration Manual](https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Cygwin) :

> C.8 Cygwin
> 
> The 32-bit version has never worked well enough to pass R’s make check, and residual support from
> earlier experiments was removed in R 3.3.0.
> 
> The 64-bit version is completely unsupported.

Maybe we should consider to have rather an interface to system's R and make it an optional package ?

I'll broach this subject open on sage-devel (not r-devel, as I wrote incorrectly the first time...).



---

archive/issue_comments_296239.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI get a failure trying to install this on Cygwin32 with\n\n```\nchecking for lzma_version_number in -llzma... no\nconfigure: error: \"liblzma library and headers are required\"\nError configuring R.\n```\nwhich is the same failure I had on #20190.",
    "created_at": "2016-08-21T15:49:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296239",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

I get a failure trying to install this on Cygwin32 with

```
checking for lzma_version_number in -llzma... no
configure: error: "liblzma library and headers are required"
Error configuring R.
```
which is the same failure I had on #20190.



---

archive/issue_comments_296240.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@tscrim](#comment%3A9):\n> I get a failure trying to install this on Cygwin32 with\n> \n> ```\n> checking for lzma_version_number in -llzma... no\n> configure: error: \"liblzma library and headers are required\"\n> Error configuring R.\n> ```\n> which is the same failure I had on #20190.\n\nFrom [the R 3.3.0 release notes](https://cran.r-project.org/doc/manuals/r-release/NEWS.html) :\n\n>  The previously included versions of zlib, bzip2, xz and PCRE have been removed, so suitable external (usually system) versions are required (see the \u2018R Installation and Administration\u2019 manual).\n\nSo it's either :\n* add xz-tools (n\u00e9 lzma-utils) to the list of prerequisites for Sage (i. e. relying on system's liblzma) ;\n* adding xz-tools (at least the lzma library) to sage (cluttering it with yet one more library to maintain) ;\n* or relying on system's R through an interface that remains to be written...\n\nPick your poison...\n\nNB : I also post this on sage-devel in the recent R thread...",
    "created_at": "2016-08-22T10:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296240",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@tscrim](#comment%3A9):
> I get a failure trying to install this on Cygwin32 with
> 
> ```
> checking for lzma_version_number in -llzma... no
> configure: error: "liblzma library and headers are required"
> Error configuring R.
> ```
> which is the same failure I had on #20190.

From [the R 3.3.0 release notes](https://cran.r-project.org/doc/manuals/r-release/NEWS.html) :

>  The previously included versions of zlib, bzip2, xz and PCRE have been removed, so suitable external (usually system) versions are required (see the ‘R Installation and Administration’ manual).

So it's either :
* add xz-tools (né lzma-utils) to the list of prerequisites for Sage (i. e. relying on system's liblzma) ;
* adding xz-tools (at least the lzma library) to sage (cluttering it with yet one more library to maintain) ;
* or relying on system's R through an interface that remains to be written...

Pick your poison...

NB : I also post this on sage-devel in the recent R thread...



---

archive/issue_comments_296241.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOn Cygwin I needed to `apt-cyg install liblzma-devel` (if you have `apt-cyg`, otherwise use setup as normal).  Without the `-devel` package it doesn't install the import library, so `-llzma` doesn't work (`-llzma.dll` should though).",
    "created_at": "2016-08-22T10:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296241",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

On Cygwin I needed to `apt-cyg install liblzma-devel` (if you have `apt-cyg`, otherwise use setup as normal).  Without the `-devel` package it doesn't install the import library, so `-llzma` doesn't work (`-llzma.dll` should though).



---

archive/issue_comments_296242.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@embray](#comment%3A11):\n> On Cygwin I needed to `apt-cyg install liblzma-devel` (if you have `apt-cyg`, otherwise use setup as normal).  Without the `-devel` package it doesn't install the import library, so `-llzma` doesn't work (`-llzma.dll` should though).\n\nOkay. I just checked on my (Linux) system : xz is not installed in the $(SAGE_ROOT) tree, probably because I have it installed at system level and the build script detects that somehow. (BTW : it is an *optional* package.\n\nTherefore, what is needed is :\na. ensure that xz *and its development files* are installed, either in the system or in the Sage package) ;\nb. that this is done *before* the R installation begins ; and\nc. that R installation *depends* on xz being somehow available.\n\nThis can be simplified, at the expense of making xz a *standard* package, just by ensuring that xz is installed *before* R compilation.\n\nI have little idea on how to proceed, since the Sage build system is still a (large) bit obscure to me. What I need is a way to check in the Makefile that xz and its development files are available, install xz if not (can an optional package be installed before the compilation of standard packages is finished ?), and make the R compilation dependent on this target.\n\nAny ideas ?\n\n(BTW : Cc on the sage-devel thread for advice...)",
    "created_at": "2016-08-23T08:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296242",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@embray](#comment%3A11):
> On Cygwin I needed to `apt-cyg install liblzma-devel` (if you have `apt-cyg`, otherwise use setup as normal).  Without the `-devel` package it doesn't install the import library, so `-llzma` doesn't work (`-llzma.dll` should though).

Okay. I just checked on my (Linux) system : xz is not installed in the $(SAGE_ROOT) tree, probably because I have it installed at system level and the build script detects that somehow. (BTW : it is an *optional* package.

Therefore, what is needed is :
a. ensure that xz *and its development files* are installed, either in the system or in the Sage package) ;
b. that this is done *before* the R installation begins ; and
c. that R installation *depends* on xz being somehow available.

This can be simplified, at the expense of making xz a *standard* package, just by ensuring that xz is installed *before* R compilation.

I have little idea on how to proceed, since the Sage build system is still a (large) bit obscure to me. What I need is a way to check in the Makefile that xz and its development files are available, install xz if not (can an optional package be installed before the compilation of standard packages is finished ?), and make the R compilation dependent on this target.

Any ideas ?

(BTW : Cc on the sage-devel thread for advice...)



---

archive/issue_comments_296243.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYou IMHO shouldn't change patches which haven't changed at all, that's just confusing.  I wouldn't even touch patches where just the offset changed, not the context.",
    "created_at": "2016-08-23T23:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296243",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

You IMHO shouldn't change patches which haven't changed at all, that's just confusing.  I wouldn't even touch patches where just the offset changed, not the context.



---

archive/issue_comments_296244.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'm working on this, especially on Cygwin as I resetuped a Cygwin install for other tickets at SD75.",
    "created_at": "2016-08-24T07:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296244",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

I'm working on this, especially on Cygwin as I resetuped a Cygwin install for other tickets at SD75.



---

archive/issue_comments_296245.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPlease see [this post](https://groups.google.com/d/msg/sage-devel/KYq9AV5ZTUk/1gdvX33_BgAJ) on `sage-devel`'s discussion of this topic. I need comments from people not as concerned as we are by Sage's R's future...\n\nJean-Pierre : did you consider repackaging (bnew style) the old pcre package ?",
    "created_at": "2016-08-30T09:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296245",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:15" align="right">comment:15</div>

Please see [this post](https://groups.google.com/d/msg/sage-devel/KYq9AV5ZTUk/1gdvX33_BgAJ) on `sage-devel`'s discussion of this topic. I need comments from people not as concerned as we are by Sage's R's future...

Jean-Pierre : did you consider repackaging (bnew style) the old pcre package ?



---

archive/issue_comments_296246.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNope I did not yet.\nI mostly made a clean set of patches.",
    "created_at": "2016-08-30T15:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296246",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">comment:16</div>

Nope I did not yet.
I mostly made a clean set of patches.



---

archive/issue_comments_296247.json:
```json
{
    "body": "Changed branch from **[u/charpent/upgrade_r_to_3_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_3_1)** to **[public/r311](https://github.com/sagemath/sagetrac-mirror/tree/public/r311)**",
    "created_at": "2016-08-31T08:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296247",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/charpent/upgrade_r_to_3_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_3_1)** to **[public/r311](https://github.com/sagemath/sagetrac-mirror/tree/public/r311)**



---

archive/issue_comments_296248.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI updated the set of patches.\nI also slightly modiifed the options passed to `configure` in `spkg-install`.\n\nWe still need to deal with the new dependencies.\nIt seemed to me that on top of `libpcre`, `R` also depends on `libcurl`...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d\"><code>2b7f6f4</code></a></td><td><code>Update patches set for R upgrade.</code></td></tr></table>\n",
    "created_at": "2016-08-31T08:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296248",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

I updated the set of patches.
I also slightly modiifed the options passed to `configure` in `spkg-install`.

We still need to deal with the new dependencies.
It seemed to me that on top of `libpcre`, `R` also depends on `libcurl`...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d"><code>2b7f6f4</code></a></td><td><code>Update patches set for R upgrade.</code></td></tr></table>




---

archive/issue_comments_296249.json:
```json
{
    "body": "Changed commit from **[`336ee16`](https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3)** to **[`2b7f6f4`](https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d)**",
    "created_at": "2016-08-31T08:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296249",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`336ee16`](https://github.com/sagemath/sagetrac-mirror/commit/336ee16dba727bc77fe76ef924f085ecc3a8a2c3)** to **[`2b7f6f4`](https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d)**



---

archive/issue_comments_296250.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n`libcurl` is needed according to:\n* https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Essential-and-useful-other-programs-under-a-Unix_002dalike",
    "created_at": "2016-08-31T08:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296250",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

`libcurl` is needed according to:
* https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Essential-and-useful-other-programs-under-a-Unix_002dalike



---

archive/issue_comments_296251.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe Cygwin patches to `main/Makefile.in` as well as  `nmath/standalone/Makefile.in`, and `etc/Makeconf.in` have effects on non-Cygwin as well.\n\nIn the first two, the folder is changed unconditionally, the third may lead to overlinking on non-Cygwin.\n\nI also don't like removing the documentation from `SPKG.txt`; at the very least, the patch descriptions should get copied into the patches.  Renaming them IMHO isn't necessary either.\n\nThe patches have funny permissions; while you chmoded *some* a-x, the new ones again have u=rwx and go=rx.\n\nIn `spkg-install`, the lines with options to configure aren't consistently indented (in the diff at least => tabs vs. spaces used).",
    "created_at": "2016-08-31T12:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296251",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

The Cygwin patches to `main/Makefile.in` as well as  `nmath/standalone/Makefile.in`, and `etc/Makeconf.in` have effects on non-Cygwin as well.

In the first two, the folder is changed unconditionally, the third may lead to overlinking on non-Cygwin.

I also don't like removing the documentation from `SPKG.txt`; at the very least, the patch descriptions should get copied into the patches.  Renaming them IMHO isn't necessary either.

The patches have funny permissions; while you chmoded *some* a-x, the new ones again have u=rwx and go=rx.

In `spkg-install`, the lines with options to configure aren't consistently indented (in the diff at least => tabs vs. spaces used).



---

archive/issue_comments_296252.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nexttime](#comment%3A19):\n> In `spkg-install`, the lines with options to configure aren't consistently indented.\n\n... and `--enable-R-shlib` is redundant, as it has already been added to `R_CONFIGURE` a couple of lines above.",
    "created_at": "2016-08-31T12:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296252",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nexttime](#comment%3A19):
> In `spkg-install`, the lines with options to configure aren't consistently indented.

... and `--enable-R-shlib` is redundant, as it has already been added to `R_CONFIGURE` a couple of lines above.



---

archive/issue_comments_296253.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'll take your comments into account or gve some justification here.",
    "created_at": "2016-08-31T16:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296253",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:21" align="right">comment:21</div>

I'll take your comments into account or gve some justification here.



---

archive/issue_comments_296254.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nexttime](#comment%3A19):\n> The Cygwin patches to `main/Makefile.in` as well as  `nmath/standalone/Makefile.in`, and `etc/Makeconf.in` have effects on non-Cygwin as well.\n\n>\n\n \n> In the first two, the folder is changed unconditionally, the third may lead to overlinking on non-Cygwin.\n\nWell spotted, I did not pay attention on that part.\n\nFrom what I saw there was underlinking in all cases, I don't see how Cygwin or non-Cygwin can change anything but I'll double check.\n\nAnyway I'll only apply this two only coniditonally.\n> \n> I also don't like removing the documentation from `SPKG.txt`; at the very least, the patch descriptions should get copied into the patches.  Renaming them IMHO isn't necessary either.\n\nFrom what I remember there seemed to be a consensus on putting doc in patches themselves to modify a minimum set of files when adding/removing patches.\nAlthough each patch now has some info, I'll add more from what was removed from SPKG.txt.\n\n> \n> The patches have funny permissions; while you chmoded *some* a-x, the new ones again have u=rwx and go=rx.\n\nWindows funky choice, I'll fix it.\n> \n> In `spkg-install`, the lines with options to configure aren't consistently indented (in the diff at least => tabs vs. spaces used).\n\nI removed all tabs.",
    "created_at": "2016-09-01T07:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296254",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nexttime](#comment%3A19):
> The Cygwin patches to `main/Makefile.in` as well as  `nmath/standalone/Makefile.in`, and `etc/Makeconf.in` have effects on non-Cygwin as well.

>

 
> In the first two, the folder is changed unconditionally, the third may lead to overlinking on non-Cygwin.

Well spotted, I did not pay attention on that part.

From what I saw there was underlinking in all cases, I don't see how Cygwin or non-Cygwin can change anything but I'll double check.

Anyway I'll only apply this two only coniditonally.
> 
> I also don't like removing the documentation from `SPKG.txt`; at the very least, the patch descriptions should get copied into the patches.  Renaming them IMHO isn't necessary either.

From what I remember there seemed to be a consensus on putting doc in patches themselves to modify a minimum set of files when adding/removing patches.
Although each patch now has some info, I'll add more from what was removed from SPKG.txt.

> 
> The patches have funny permissions; while you chmoded *some* a-x, the new ones again have u=rwx and go=rx.

Windows funky choice, I'll fix it.
> 
> In `spkg-install`, the lines with options to configure aren't consistently indented (in the diff at least => tabs vs. spaces used).

I removed all tabs.



---

archive/issue_comments_296255.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/893d3cb0b95aa827c3ccf3f017e71979fe76d609\"><code>893d3cb</code></a></td><td><code>Remove duplicated \"--enable-R-shlib\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a79ccf18b8a464fa2d6fb56a9b71c0f79b0a35c3\"><code>a79ccf1</code></a></td><td><code>Replace tabs by spaces in R spkg-install.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f37aedca84191af83d7c3dea769572aab7f9107c\"><code>f37aedc</code></a></td><td><code>Apply some R patches only on Cygwin.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b797393b9ff009558541c7cb1b703b0761eebcf\"><code>0b79739</code></a></td><td><code>Fix permission of R patches.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11d338e19fa0bf7dad01508d9f7810ea30b4f38f\"><code>11d338e</code></a></td><td><code>Make description of patches more verbose.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68\"><code>c7f359e</code></a></td><td><code>Fix SAGE_BUILDING_R patch.</code></td></tr></table>\n",
    "created_at": "2016-09-01T08:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296255",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/893d3cb0b95aa827c3ccf3f017e71979fe76d609"><code>893d3cb</code></a></td><td><code>Remove duplicated "--enable-R-shlib".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a79ccf18b8a464fa2d6fb56a9b71c0f79b0a35c3"><code>a79ccf1</code></a></td><td><code>Replace tabs by spaces in R spkg-install.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f37aedca84191af83d7c3dea769572aab7f9107c"><code>f37aedc</code></a></td><td><code>Apply some R patches only on Cygwin.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b797393b9ff009558541c7cb1b703b0761eebcf"><code>0b79739</code></a></td><td><code>Fix permission of R patches.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11d338e19fa0bf7dad01508d9f7810ea30b4f38f"><code>11d338e</code></a></td><td><code>Make description of patches more verbose.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68"><code>c7f359e</code></a></td><td><code>Fix SAGE_BUILDING_R patch.</code></td></tr></table>




---

archive/issue_comments_296256.json:
```json
{
    "body": "Changed commit from **[`2b7f6f4`](https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d)** to **[`c7f359e`](https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68)**",
    "created_at": "2016-09-01T08:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b7f6f4`](https://github.com/sagemath/sagetrac-mirror/commit/2b7f6f41301b48d54d80975f617c9154d649070d)** to **[`c7f359e`](https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68)**



---

archive/issue_comments_296257.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOn top of 6.4beta6+#21622 (now necessary to build Sage on Debian), this patch passes `ptestlong` with two failures :\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 111.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long --warn-long 111.2 src/sage/libs/gap/assigned_names.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nBoth of them pass standalone. This kind of failure is a known, iterative (and annoying) problem, probably pertaining to the test infrastructure rather than to your patch.\n\nI am sorely tempted to set this to `positive_review`, but I think that thios must be tested by someone testing it on Cygwin, given the changes in the R toolset on Windows.\n\nLet me know if you think this is sufficient.",
    "created_at": "2016-10-02T15:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296257",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:24" align="right">comment:24</div>

On top of 6.4beta6+#21622 (now necessary to build Sage on Debian), this patch passes `ptestlong` with two failures :

```
----------------------------------------------------------------------
sage -t --long --warn-long 111.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long --warn-long 111.2 src/sage/libs/gap/assigned_names.py  # 1 doctest failed
----------------------------------------------------------------------
```

Both of them pass standalone. This kind of failure is a known, iterative (and annoying) problem, probably pertaining to the test infrastructure rather than to your patch.

I am sorely tempted to set this to `positive_review`, but I think that thios must be tested by someone testing it on Cygwin, given the changes in the R toolset on Windows.

Let me know if you think this is sufficient.



---

archive/issue_comments_296258.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A24):\n> On top of 6.4beta6+#21622 (now necessary to build Sage on Debian), this patch passes `ptestlong` with two failures :\n> \n> ```\n> ----------------------------------------------------------------------\n> sage -t --long --warn-long 111.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed\n> sage -t --long --warn-long 111.2 src/sage/libs/gap/assigned_names.py  # 1 doctest failed\n> ----------------------------------------------------------------------\n> ```\n> \n> Both of them pass standalone. This kind of failure is a known, iterative (and annoying) problem, probably pertaining to the test infrastructure rather than to your patch.\n> \n> I am sorely tempted to set this to `positive_review`, but I think that thios must be tested by someone testing it on Cygwin, given the changes in the R toolset on Windows.\n\nI tested that R with the patches shipped here buids on Cygwin, though not from a Sage env.\n> \n> Let me know if you think this is sufficient.\n\nIMHO this is largely sufficient as far as Cygwin is concerned.\nIf by any chance there are some residual side effects on Cygwin they be fixed on follow up tickets.\n\nMore of a concern is the dependency on new packages...\nCan we list them here and I can try to package them:\n* libpcre\n* libcurl\n* anything else?",
    "created_at": "2016-10-03T12:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296258",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@EmmanuelCharpentier](#comment%3A24):
> On top of 6.4beta6+#21622 (now necessary to build Sage on Debian), this patch passes `ptestlong` with two failures :
> 
> ```
> ----------------------------------------------------------------------
> sage -t --long --warn-long 111.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed
> sage -t --long --warn-long 111.2 src/sage/libs/gap/assigned_names.py  # 1 doctest failed
> ----------------------------------------------------------------------
> ```
> 
> Both of them pass standalone. This kind of failure is a known, iterative (and annoying) problem, probably pertaining to the test infrastructure rather than to your patch.
> 
> I am sorely tempted to set this to `positive_review`, but I think that thios must be tested by someone testing it on Cygwin, given the changes in the R toolset on Windows.

I tested that R with the patches shipped here buids on Cygwin, though not from a Sage env.
> 
> Let me know if you think this is sufficient.

IMHO this is largely sufficient as far as Cygwin is concerned.
If by any chance there are some residual side effects on Cygwin they be fixed on follow up tickets.

More of a concern is the dependency on new packages...
Can we list them here and I can try to package them:
* libpcre
* libcurl
* anything else?



---

archive/issue_events_286606.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-10-03T19:25:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286606"
}
```



---

archive/issue_events_286607.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-10-03T19:25:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286607"
}
```



---

archive/issue_comments_296259.json:
```json
{
    "body": "Changed author from **Emmanuel Charpentier** to **Jean-Pierre Flori, Emmanuel Charpentier**",
    "created_at": "2016-10-03T19:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296259",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed author from **Emmanuel Charpentier** to **Jean-Pierre Flori, Emmanuel Charpentier**



---

archive/issue_comments_296260.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier**",
    "created_at": "2016-10-03T19:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296260",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Reviewer: **Emmanuel Charpentier**



---

archive/issue_comments_296261.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jpflori](#comment%3A25):\n\n[ ... ]\n> IMHO this is largely sufficient as far as Cygwin is concerned.\n> If by any chance there are some residual side effects on Cygwin they be fixed on follow up tickets.\n\nOkay : `positive review`. BTW, I think that you are the main (first) author...\n\n> More of a concern is the dependency on new packages...\n> Can we list them here and I can try to package them:\n> * libpcre\n> * libcurl\n> * anything else?\n\n* xz-tools.\n\nPossible strategy :\n 1) For now, list them as supplementary dependencies in the main README.TXT.\n\n 2) Create a set of tickets to include them in Sage. These packages shuld test for existim system functionality and, if found, do nothong (how to achieve this in a Makefile ?)\n\n 3) When those tickets are tested and positively reviewed, make them standard packages, and prerequisites for R. This pulls them off the list of prerequisites.\n\nThis way, we can buy time...\n\nBTW : Curl and xz-tools are tools of sufficient \"general\" interest that we should package the whole things (i. e. binaries and docs (but maybe not test utilities ?)), not just the libraries. And add the binaries to the list of candidates for `small_scripts` making them accessible systemwide.",
    "created_at": "2016-10-03T19:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296261",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jpflori](#comment%3A25):

[ ... ]
> IMHO this is largely sufficient as far as Cygwin is concerned.
> If by any chance there are some residual side effects on Cygwin they be fixed on follow up tickets.

Okay : `positive review`. BTW, I think that you are the main (first) author...

> More of a concern is the dependency on new packages...
> Can we list them here and I can try to package them:
> * libpcre
> * libcurl
> * anything else?

* xz-tools.

Possible strategy :
 1) For now, list them as supplementary dependencies in the main README.TXT.

 2) Create a set of tickets to include them in Sage. These packages shuld test for existim system functionality and, if found, do nothong (how to achieve this in a Makefile ?)

 3) When those tickets are tested and positively reviewed, make them standard packages, and prerequisites for R. This pulls them off the list of prerequisites.

This way, we can buy time...

BTW : Curl and xz-tools are tools of sufficient "general" interest that we should package the whole things (i. e. binaries and docs (but maybe not test utilities ?)), not just the libraries. And add the binaries to the list of candidates for `small_scripts` making them accessible systemwide.



---

archive/issue_comments_296262.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHard dependency on lzma\n\n```\nchecking for lzma_version_number in -llzma... no\nconfigure: error: \"liblzma library and headers are required\"\nError configuring R.\n```",
    "created_at": "2016-10-22T19:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296262",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

Hard dependency on lzma

```
checking for lzma_version_number in -llzma... no
configure: error: "liblzma library and headers are required"
Error configuring R.
```



---

archive/issue_events_286608.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-22T19:52:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286608"
}
```



---

archive/issue_events_286609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-22T19:52:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286609"
}
```



---

archive/issue_comments_296263.json:
```json
{
    "body": "Dependencies: **#21744**",
    "created_at": "2016-10-23T06:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296263",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Dependencies: **#21744**



---

archive/issue_comments_296264.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n`lzma` is already available through the optional `xz` package. I opened #21744 to this order.\n\nTrivial patch to follow...",
    "created_at": "2016-10-23T06:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296264",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:28" align="right">comment:28</div>

`lzma` is already available through the optional `xz` package. I opened #21744 to this order.

Trivial patch to follow...



---

archive/issue_comments_296265.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300\"><code>2875b8b</code></a></td><td><code>Three-keystroke patch ; depend on xz.</code></td></tr></table>\n",
    "created_at": "2016-10-24T06:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296265",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300"><code>2875b8b</code></a></td><td><code>Three-keystroke patch ; depend on xz.</code></td></tr></table>




---

archive/issue_comments_296266.json:
```json
{
    "body": "Changed commit from **[`c7f359e`](https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68)** to **[`2875b8b`](https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300)**",
    "created_at": "2016-10-24T06:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296266",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7f359e`](https://github.com/sagemath/sagetrac-mirror/commit/c7f359ee01eee93900a8e309197bfcb65ae19b68)** to **[`2875b8b`](https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300)**



---

archive/issue_events_286610.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-10-24T07:43:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286610"
}
```



---

archive/issue_events_286611.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-10-24T07:43:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286611"
}
```



---

archive/issue_comments_296267.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n#20523 (present patch) + #21744 pass ptestlong successfully over both 7.4 and 7.5beta0.\n\n==>`needs_review`\n\nNote : I suspect that we may have to do likewise for `pcre ` and `curl`. I shall package them, and open tickets to get them included as standard packages as the need arises.",
    "created_at": "2016-10-24T07:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296267",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:30" align="right">comment:30</div>

#20523 (present patch) + #21744 pass ptestlong successfully over both 7.4 and 7.5beta0.

==>`needs_review`

Note : I suspect that we may have to do likewise for `pcre ` and `curl`. I shall package them, and open tickets to get them included as standard packages as the need arises.



---

archive/issue_comments_296268.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWe need to clarify the curl and openssl issues.",
    "created_at": "2016-10-27T10:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296268",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

We need to clarify the curl and openssl issues.



---

archive/issue_comments_296269.json:
```json
{
    "body": "Work Issues: **curl openssl**",
    "created_at": "2016-10-27T10:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296269",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **curl openssl**



---

archive/issue_events_286612.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-27T10:40:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286612"
}
```



---

archive/issue_events_286613.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-27T10:40:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286613"
}
```



---

archive/issue_comments_296270.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe good news is that R compiles against an ssl-free libcurl when configure is hacked.\nAnd it seems that nothing that fails in the test suite is related to this lacking feature.\n\nNot sure how it affects usability though.",
    "created_at": "2016-10-27T13:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296270",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

The good news is that R compiles against an ssl-free libcurl when configure is hacked.
And it seems that nothing that fails in the test suite is related to this lacking feature.

Not sure how it affects usability though.



---

archive/issue_comments_296271.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jpflori](#comment%3A32):\n\n> Not sure how it affects usability though.\n\nHah ! Most R repositories are switching to https:... addresses (this shown where trying to install a package without having defined a repository first : the graphical interface propose firs a list of repositories with https: addresses ; the only way to reach an http: repository is to click on the last item in that menu, which gives another list of http: repositories.\n\nThe move to such repositories parallels a similar move from various distros (starting with Debian...). I doubt that this will get reversed, and I think that, one way or another, Sage's R must keep the ability to use https:\n\nThis is true (with aggravation) of other uses of networking in applied statistics : access to remote databases is more and more frequent, and I do not see these uses accept insecure channels for a long time...",
    "created_at": "2016-10-27T15:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296271",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jpflori](#comment%3A32):

> Not sure how it affects usability though.

Hah ! Most R repositories are switching to https:... addresses (this shown where trying to install a package without having defined a repository first : the graphical interface propose firs a list of repositories with https: addresses ; the only way to reach an http: repository is to click on the last item in that menu, which gives another list of http: repositories.

The move to such repositories parallels a similar move from various distros (starting with Debian...). I doubt that this will get reversed, and I think that, one way or another, Sage's R must keep the ability to use https:

This is true (with aggravation) of other uses of networking in applied statistics : access to remote databases is more and more frequent, and I do not see these uses accept insecure channels for a long time...



---

archive/issue_comments_296272.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.\n \n-The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.1.tar.gz)\n+The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)\n``````\n",
    "created_at": "2016-11-29T18:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296272",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.
 
-The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.1.tar.gz)
+The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)
``````




---

archive/issue_events_286614.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-11-29T18:41:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "title_is": "Upgrade R to 3.3.2",
    "title_was": "Upgrade R to 3.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286614"
}
```



---

archive/issue_comments_296273.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nChanging target to 3.3.2. Meanwhile, experimenting.\n\nStill waiting for advice (see sage-devel's sagas)...",
    "created_at": "2016-11-29T18:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296273",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:34" align="right">comment:34</div>

Changing target to 3.3.2. Meanwhile, experimenting.

Still waiting for advice (see sage-devel's sagas)...



---

archive/issue_events_286615.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-11-29T18:41:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286615"
}
```



---

archive/issue_events_286616.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-11-29T18:41:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286616"
}
```



---

archive/issue_comments_296274.json:
```json
{
    "body": "Changed commit from **[`2875b8b`](https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300)** to **[`4c896a9`](https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1)**",
    "created_at": "2016-12-01T20:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296274",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2875b8b`](https://github.com/sagemath/sagetrac-mirror/commit/2875b8b62a813dc25b6ea23cd7af1012bd5e4300)** to **[`4c896a9`](https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1)**



---

archive/issue_comments_296275.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c197f600221e47c502e56d7c7949cb2835686a1\"><code>6c197f6</code></a></td><td><code>Updating R source to 3.3.2.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1\"><code>4c896a9</code></a></td><td><code>R's strig representation of source code has changed. Updated docstrings accordingly.</code></td></tr></table>\n",
    "created_at": "2016-12-01T20:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c197f600221e47c502e56d7c7949cb2835686a1"><code>6c197f6</code></a></td><td><code>Updating R source to 3.3.2.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1"><code>4c896a9</code></a></td><td><code>R's strig representation of source code has changed. Updated docstrings accordingly.</code></td></tr></table>




---

archive/issue_comments_296276.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nMinimal adjustments (package version + checksum) + fixed a couple of failing doctests due to R's change of representation of function source code.\n\nThese doctests might be usefully augmented by a doctest of a real R function. This doesn't seem to have ever been doctested. Advice ?\n\nThe resulting Sage (after merging with 7.5beta4) passes ptestlong with two transient failures (which pass with no errors when ran standalone).\n\nThe question of the new dependencies is still open (no answer to sage-devel's questions).",
    "created_at": "2016-12-01T21:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296276",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:36" align="right">comment:36</div>

Minimal adjustments (package version + checksum) + fixed a couple of failing doctests due to R's change of representation of function source code.

These doctests might be usefully augmented by a doctest of a real R function. This doesn't seem to have ever been doctested. Advice ?

The resulting Sage (after merging with 7.5beta4) passes ptestlong with two transient failures (which pass with no errors when ran standalone).

The question of the new dependencies is still open (no answer to sage-devel's questions).



---

archive/issue_comments_296277.json:
```json
{
    "body": "Changed commit from **[`4c896a9`](https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1)** to **[`8a05b10`](https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5)**",
    "created_at": "2017-02-18T17:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296277",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c896a9`](https://github.com/sagemath/sagetrac-mirror/commit/4c896a9920225e37c5aff5f12beb67d809df21d1)** to **[`8a05b10`](https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5)**



---

archive/issue_comments_296278.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5\"><code>8a05b10</code></a></td><td><code>Depend on PCRE</code></td></tr></table>\n",
    "created_at": "2017-02-18T17:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296278",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5"><code>8a05b10</code></a></td><td><code>Depend on PCRE</code></td></tr></table>




---

archive/issue_comments_296279.json:
```json
{
    "body": "Changed commit from **[`8a05b10`](https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5)** to **[`2568ce5`](https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34)**",
    "created_at": "2017-02-18T17:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8a05b10`](https://github.com/sagemath/sagetrac-mirror/commit/8a05b10b95ddf9a9e7edbf5ab45f77e1eecdf8c5)** to **[`2568ce5`](https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34)**



---

archive/issue_comments_296280.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34\"><code>2568ce5</code></a></td><td><code>Update spkg-install to conform to #20692.</code></td></tr></table>\n",
    "created_at": "2017-02-18T17:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34"><code>2568ce5</code></a></td><td><code>Update spkg-install to conform to #20692.</code></td></tr></table>




---

archive/issue_comments_296281.json:
```json
{
    "body": "Changed commit from **[`2568ce5`](https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34)** to **[`a06fc11`](https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087)**",
    "created_at": "2017-02-18T18:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296281",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2568ce5`](https://github.com/sagemath/sagetrac-mirror/commit/2568ce5a909b6eb8784277538f7e32f9ab5ccc34)** to **[`a06fc11`](https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087)**



---

archive/issue_comments_296282.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087\"><code>a06fc11</code></a></td><td><code>R-shlib is needed in configurefor the (standard) rpy2 package.</code></td></tr></table>\n",
    "created_at": "2017-02-18T18:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296282",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087"><code>a06fc11</code></a></td><td><code>R-shlib is needed in configurefor the (standard) rpy2 package.</code></td></tr></table>




---

archive/issue_comments_296283.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132\"><code>f0ab39e</code></a></td><td><code>Added curl to dependencies.</code></td></tr></table>\n",
    "created_at": "2017-02-18T22:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132"><code>f0ab39e</code></a></td><td><code>Added curl to dependencies.</code></td></tr></table>




---

archive/issue_comments_296284.json:
```json
{
    "body": "Changed commit from **[`a06fc11`](https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087)** to **[`f0ab39e`](https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132)**",
    "created_at": "2017-02-18T22:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a06fc11`](https://github.com/sagemath/sagetrac-mirror/commit/a06fc11b9ea201d9b057e4ae9e840f77ce906087)** to **[`f0ab39e`](https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132)**



---

archive/issue_comments_296285.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nSage-7.6.beta4 + #20523 (this patch) + #21767 + #21770 passes ptestlong witht two transient errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/homology/simplicial_set_morphism.py  # Bad exit: 2\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nBoth tests pass when run standalone.\n\nThis should close the R saga (for now) by allowing the current interfaces to work with R >= 3.3.x.\n\n==>`needs_review`",
    "created_at": "2017-02-19T04:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296285",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:41" align="right">comment:41</div>

Sage-7.6.beta4 + #20523 (this patch) + #21767 + #21770 passes ptestlong witht two transient errors :

```
----------------------------------------------------------------------
sage -t --long src/sage/homology/simplicial_set_morphism.py  # Bad exit: 2
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
----------------------------------------------------------------------
```
Both tests pass when run standalone.

This should close the R saga (for now) by allowing the current interfaces to work with R >= 3.3.x.

==>`needs_review`



---

archive/issue_comments_296286.json:
```json
{
    "body": "Changed dependencies from **#21744** to **#21744 #21767 #21770 #22189**",
    "created_at": "2017-02-19T04:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296286",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed dependencies from **#21744** to **#21744 #21767 #21770 #22189**



---

archive/issue_events_286617.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-19T04:48:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286617"
}
```



---

archive/issue_events_286618.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-19T04:48:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286618"
}
```



---

archive/issue_comments_296287.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nthe branch is red - you need a rebase or so...",
    "created_at": "2017-02-19T23:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296287",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

the branch is red - you need a rebase or so...



---

archive/issue_comments_296288.json:
```json
{
    "body": "Changed commit from **[`f0ab39e`](https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132)** to **[`d873670`](https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7)**",
    "created_at": "2017-02-20T09:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f0ab39e`](https://github.com/sagemath/sagetrac-mirror/commit/f0ab39e3ec0b615e2298abfd5dc08c774d532132)** to **[`d873670`](https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7)**



---

archive/issue_comments_296289.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1aba6f7b3e5ccd5dc30aaf68c8ebe4d85fa40bb\"><code>c1aba6f</code></a></td><td><code>Fix permission of R patches.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b05ec4b418325635374d2c95c9a2a7d15180790d\"><code>b05ec4b</code></a></td><td><code>Make description of patches more verbose.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b58ad092c8cfc9dda7a738d965f8e2ace753f4c\"><code>3b58ad0</code></a></td><td><code>Fix SAGE_BUILDING_R patch.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fecbfc003dab34596d7869bb25d03976519c2cf9\"><code>fecbfc0</code></a></td><td><code>Three-keystroke patch ; depend on xz.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a4eb9c923b5ab0edc4c9a297d91401da9e731c6\"><code>3a4eb9c</code></a></td><td><code>Updating R source to 3.3.2.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55a8aa40b5d85c54b0c325bf942734e337523e8b\"><code>55a8aa4</code></a></td><td><code>R's strig representation of source code has changed. Updated docstrings accordingly.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00fcc86787adbe81e7e000cd04ae1c7630ea9c94\"><code>00fcc86</code></a></td><td><code>Depend on PCRE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23f9471c1235759b4906361112f32cd179134a1b\"><code>23f9471</code></a></td><td><code>Update spkg-install to conform to #20692.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22974b8e19e5df9fb6a0fb402b220729dcd14477\"><code>22974b8</code></a></td><td><code>R-shlib is needed in configurefor the (standard) rpy2 package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7\"><code>d873670</code></a></td><td><code>Added curl to dependencies.</code></td></tr></table>\n",
    "created_at": "2017-02-20T09:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1aba6f7b3e5ccd5dc30aaf68c8ebe4d85fa40bb"><code>c1aba6f</code></a></td><td><code>Fix permission of R patches.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b05ec4b418325635374d2c95c9a2a7d15180790d"><code>b05ec4b</code></a></td><td><code>Make description of patches more verbose.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b58ad092c8cfc9dda7a738d965f8e2ace753f4c"><code>3b58ad0</code></a></td><td><code>Fix SAGE_BUILDING_R patch.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fecbfc003dab34596d7869bb25d03976519c2cf9"><code>fecbfc0</code></a></td><td><code>Three-keystroke patch ; depend on xz.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a4eb9c923b5ab0edc4c9a297d91401da9e731c6"><code>3a4eb9c</code></a></td><td><code>Updating R source to 3.3.2.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55a8aa40b5d85c54b0c325bf942734e337523e8b"><code>55a8aa4</code></a></td><td><code>R's strig representation of source code has changed. Updated docstrings accordingly.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00fcc86787adbe81e7e000cd04ae1c7630ea9c94"><code>00fcc86</code></a></td><td><code>Depend on PCRE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23f9471c1235759b4906361112f32cd179134a1b"><code>23f9471</code></a></td><td><code>Update spkg-install to conform to #20692.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22974b8e19e5df9fb6a0fb402b220729dcd14477"><code>22974b8</code></a></td><td><code>R-shlib is needed in configurefor the (standard) rpy2 package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7"><code>d873670</code></a></td><td><code>Added curl to dependencies.</code></td></tr></table>




---

archive/issue_comments_296290.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nRebased on develop at 7.6.beta4",
    "created_at": "2017-02-20T09:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296290",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:44" align="right">comment:44</div>

Rebased on develop at 7.6.beta4



---

archive/issue_comments_296291.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nA branch dependent on unmerged/under review tickets ought to include all of them, otherwise you leave it to the reviewer to do merges that might potentially be nontrivial.",
    "created_at": "2017-02-20T09:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296291",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

A branch dependent on unmerged/under review tickets ought to include all of them, otherwise you leave it to the reviewer to do merges that might potentially be nontrivial.



---

archive/issue_comments_296292.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@dimpase](#comment%3A45):\n> A branch dependent on unmerged/under review tickets ought to include all of them, otherwise you leave it to the reviewer to do merges that might potentially be nontrivial.\n\nIf I understand you correctly,we should either :\n\na. merge #21767 and #21770 into develop, **then** merge #20523 ; **OR**\nb. add the contents of #21767 an #21770 into #20523\n\n1. Is this correct ?\n2. What do you recommend ?",
    "created_at": "2017-02-20T09:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296292",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@dimpase](#comment%3A45):
> A branch dependent on unmerged/under review tickets ought to include all of them, otherwise you leave it to the reviewer to do merges that might potentially be nontrivial.

If I understand you correctly,we should either :

a. merge #21767 and #21770 into develop, **then** merge #20523 ; **OR**
b. add the contents of #21767 an #21770 into #20523

1. Is this correct ?
2. What do you recommend ?



---

archive/issue_comments_296293.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI don't see a difference. Essentially it is as follows.\n\n```\ngit checkout -b newrrr develop\ngit pull trac public/curl7510\ngit pull trac u/charpent/package_libpcre_as_a_standard_package\ngit pull trac public/r311\ngit push trac --set-upstream HEAD:public/r311\n```\n(not sure  if the last `push` needs `-f` or not).\n\nIt's also a question whether these 3 branches commute, so that these 3 `pull` all go through without manual intervention.",
    "created_at": "2017-02-20T09:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296293",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

I don't see a difference. Essentially it is as follows.

```
git checkout -b newrrr develop
git pull trac public/curl7510
git pull trac u/charpent/package_libpcre_as_a_standard_package
git pull trac public/r311
git push trac --set-upstream HEAD:public/r311
```
(not sure  if the last `push` needs `-f` or not).

It's also a question whether these 3 branches commute, so that these 3 `pull` all go through without manual intervention.



---

archive/issue_comments_296294.json:
```json
{
    "body": "Changed commit from **[`d873670`](https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7)** to **[`3b11753`](https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84)**",
    "created_at": "2017-02-20T12:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296294",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d873670`](https://github.com/sagemath/sagetrac-mirror/commit/d8736709ee4e7e914e4c289a885ad7abefa829b7)** to **[`3b11753`](https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84)**



---

archive/issue_comments_296295.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1588558c94c80f698b40a6033155ebf6d78e77e7\"><code>1588558</code></a></td><td><code>Packaging polish.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81e3341358690d10e8ec0d14e1d7e53b8b8bf16c\"><code>81e3341</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02cb61da261e9e9b5eb960eadeede6d034f2240\"><code>c02cb61</code></a></td><td><code>Update Curl to 7.51.0.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d31c5607d0f4cc3ebad13388fa9d6d630dd23c11\"><code>d31c560</code></a></td><td><code>Add a fat mode to curl.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4e56651e3252781f3eb04af00082f7c63be816b\"><code>e4e5665</code></a></td><td><code>Upgraded curl to 7.52.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43030c30f5b3e01f3eda83d5a4a17f28978aea0f\"><code>43030c3</code></a></td><td><code>Merge branch 'public/curl7510' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8d77b5c25a0f20c209f04c3a5377b673683cd6e\"><code>a8d77b5</code></a></td><td><code>Initial packaging of pcre : unconditionnal installation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21ce3e75574d3a08266324b7fac41e044e0ef280\"><code>21ce3e7</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb088b809befb685a5de8ba5978181585ded6900\"><code>fb088b8</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84\"><code>3b11753</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into newrrr</code></td></tr></table>\n",
    "created_at": "2017-02-20T12:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296295",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1588558c94c80f698b40a6033155ebf6d78e77e7"><code>1588558</code></a></td><td><code>Packaging polish.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81e3341358690d10e8ec0d14e1d7e53b8b8bf16c"><code>81e3341</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02cb61da261e9e9b5eb960eadeede6d034f2240"><code>c02cb61</code></a></td><td><code>Update Curl to 7.51.0.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d31c5607d0f4cc3ebad13388fa9d6d630dd23c11"><code>d31c560</code></a></td><td><code>Add a fat mode to curl.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4e56651e3252781f3eb04af00082f7c63be816b"><code>e4e5665</code></a></td><td><code>Upgraded curl to 7.52.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43030c30f5b3e01f3eda83d5a4a17f28978aea0f"><code>43030c3</code></a></td><td><code>Merge branch 'public/curl7510' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8d77b5c25a0f20c209f04c3a5377b673683cd6e"><code>a8d77b5</code></a></td><td><code>Initial packaging of pcre : unconditionnal installation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21ce3e75574d3a08266324b7fac41e044e0ef280"><code>21ce3e7</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb088b809befb685a5de8ba5978181585ded6900"><code>fb088b8</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84"><code>3b11753</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into newrrr</code></td></tr></table>




---

archive/issue_comments_296296.json:
```json
{
    "body": "Changed dependencies from **#21744 #21767 #21770 #22189** to **#21744 #22189**",
    "created_at": "2017-02-20T12:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296296",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed dependencies from **#21744 #21767 #21770 #22189** to **#21744 #22189**



---

archive/issue_comments_296297.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nDone. Added tarballs for curl and pcre, dropped the corresponding ticket dependencies.\n\n`ptestlong` running.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1588558c94c80f698b40a6033155ebf6d78e77e7\"><code>1588558</code></a></td><td><code>Packaging polish.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81e3341358690d10e8ec0d14e1d7e53b8b8bf16c\"><code>81e3341</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02cb61da261e9e9b5eb960eadeede6d034f2240\"><code>c02cb61</code></a></td><td><code>Update Curl to 7.51.0.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d31c5607d0f4cc3ebad13388fa9d6d630dd23c11\"><code>d31c560</code></a></td><td><code>Add a fat mode to curl.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4e56651e3252781f3eb04af00082f7c63be816b\"><code>e4e5665</code></a></td><td><code>Upgraded curl to 7.52.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43030c30f5b3e01f3eda83d5a4a17f28978aea0f\"><code>43030c3</code></a></td><td><code>Merge branch 'public/curl7510' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8d77b5c25a0f20c209f04c3a5377b673683cd6e\"><code>a8d77b5</code></a></td><td><code>Initial packaging of pcre : unconditionnal installation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21ce3e75574d3a08266324b7fac41e044e0ef280\"><code>21ce3e7</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb088b809befb685a5de8ba5978181585ded6900\"><code>fb088b8</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84\"><code>3b11753</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into newrrr</code></td></tr></table>\n",
    "created_at": "2017-02-20T12:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296297",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:49" align="right">comment:49</div>

Done. Added tarballs for curl and pcre, dropped the corresponding ticket dependencies.

`ptestlong` running.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1588558c94c80f698b40a6033155ebf6d78e77e7"><code>1588558</code></a></td><td><code>Packaging polish.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81e3341358690d10e8ec0d14e1d7e53b8b8bf16c"><code>81e3341</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02cb61da261e9e9b5eb960eadeede6d034f2240"><code>c02cb61</code></a></td><td><code>Update Curl to 7.51.0.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d31c5607d0f4cc3ebad13388fa9d6d630dd23c11"><code>d31c560</code></a></td><td><code>Add a fat mode to curl.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4e56651e3252781f3eb04af00082f7c63be816b"><code>e4e5665</code></a></td><td><code>Upgraded curl to 7.52.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43030c30f5b3e01f3eda83d5a4a17f28978aea0f"><code>43030c3</code></a></td><td><code>Merge branch 'public/curl7510' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8d77b5c25a0f20c209f04c3a5377b673683cd6e"><code>a8d77b5</code></a></td><td><code>Initial packaging of pcre : unconditionnal installation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21ce3e75574d3a08266324b7fac41e044e0ef280"><code>21ce3e7</code></a></td><td><code>Removed patches handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb088b809befb685a5de8ba5978181585ded6900"><code>fb088b8</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into newrrr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84"><code>3b11753</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into newrrr</code></td></tr></table>




---

archive/issue_comments_296298.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,8 @@\n \n This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.\n \n-The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)\n+Original tarballs :\n+\n+* [R](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)\n+* [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)\n+* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)\n``````\n",
    "created_at": "2017-02-20T12:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296298",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,8 @@
 
 This one is a bit more complicated than usual : the Windows toolchain has changed ; however, I do not have a Windows system to test this.
 
-The original tarball is [here](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)
+Original tarballs :
+
+* [R](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)
+* [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)
+* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)
``````




---

archive/issue_comments_296299.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nPasses `ptestlong` with the usual :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nwhich passes standalone.\n\n==> Still `needs_review`",
    "created_at": "2017-02-20T14:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296299",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:50" align="right">comment:50</div>

Passes `ptestlong` with the usual :

```
----------------------------------------------------------------------
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
----------------------------------------------------------------------
```

which passes standalone.

==> Still `needs_review`



---

archive/issue_comments_296300.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nWhy have you removed #21767 and #21770 from dependencies?\nYou have merged parts of them here, thus, certainly, they are dependencies, and should be reviewed before this one!",
    "created_at": "2017-02-20T18:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296300",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">comment:51</div>

Why have you removed #21767 and #21770 from dependencies?
You have merged parts of them here, thus, certainly, they are dependencies, and should be reviewed before this one!



---

archive/issue_comments_296301.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@dimpase](#comment%3A51):\n> Why have you removed #21767 and #21770 from dependencies?\n\nBecause any modification they bringed is made here.\n\n> You have merged parts\n\nParts ? I do not understand. Unless I'l seriously mistaken abut what git does, any modification resulting from these branches will be effected here.\n\n> of them here, thus, certainly, they are dependencies, and should be reviewed before this one!\n\nAgain, I do  not understand : if any part of them is defective, it should be fixed, and this fix re-merged here. What is the point ?\n\nThese questions are **not** rhetorical : I really do not understand your point.",
    "created_at": "2017-02-20T19:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296301",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@dimpase](#comment%3A51):
> Why have you removed #21767 and #21770 from dependencies?

Because any modification they bringed is made here.

> You have merged parts

Parts ? I do not understand. Unless I'l seriously mistaken abut what git does, any modification resulting from these branches will be effected here.

> of them here, thus, certainly, they are dependencies, and should be reviewed before this one!

Again, I do  not understand : if any part of them is defective, it should be fixed, and this fix re-merged here. What is the point ?

These questions are **not** rhetorical : I really do not understand your point.



---

archive/issue_comments_296302.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI have asked for invalidation of #21767 and #21770 n their respective tickets (can't do that myself...).",
    "created_at": "2017-02-20T19:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296302",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:53" align="right">comment:53</div>

I have asked for invalidation of #21767 and #21770 n their respective tickets (can't do that myself...).



---

archive/issue_comments_296303.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nThey can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.\n\n(PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)",
    "created_at": "2017-02-20T19:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296303",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:54" align="right">comment:54</div>

They can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.

(PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)



---

archive/issue_comments_296304.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@tscrim](#comment%3A54):\n> They can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.\n\n\n<Sigh> Why didn't you say so first ... </Sigh>\n\n> (PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)\n\nI tried to follow the guidelines of the Developer's guide that aim to break a large issue in smaller, independent ones. Merging one ticket into another implies review of the same patches *twice*.\n\nI didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?\n\nI'll wait for your answer before cancelling my invalidation requests and re-adding the dependencies. After all, these tickets were ready for reviews only four and three months ago...",
    "created_at": "2017-02-20T20:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296304",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@tscrim](#comment%3A54):
> They can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.


<Sigh> Why didn't you say so first ... </Sigh>

> (PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)

I tried to follow the guidelines of the Developer's guide that aim to break a large issue in smaller, independent ones. Merging one ticket into another implies review of the same patches *twice*.

I didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?

I'll wait for your answer before cancelling my invalidation requests and re-adding the dependencies. After all, these tickets were ready for reviews only four and three months ago...



---

archive/issue_comments_296305.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A55):\n> Replying to [@tscrim](#comment%3A54):\n> > They can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.\n\n> \n> \n> <Sigh> Why didn't you say so first ... </Sigh>\n\nSorry I didn't chime in sooner.\n\n> > (PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)\n\n> \n> I tried to follow the guidelines of the Developer's guide that aim to break a large issue in smaller, independent ones. Merging one ticket into another implies review of the same patches *twice*.\n> \n> I didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?\n\nIt won't be two reviews of the same code. Only the difference from this code and the dependencies will need to be reviewed.",
    "created_at": "2017-02-20T20:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296305",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@EmmanuelCharpentier](#comment%3A55):
> Replying to [@tscrim](#comment%3A54):
> > They can (and should) be considered separate/independent issues deserving their own tickets. So I would reinstate them as dependencies here because they need to be handled first.

> 
> 
> <Sigh> Why didn't you say so first ... </Sigh>

Sorry I didn't chime in sooner.

> > (PS: While I agree with Dima that it is a very good practice to merge in your dependencies, it is not strictly necessary.)

> 
> I tried to follow the guidelines of the Developer's guide that aim to break a large issue in smaller, independent ones. Merging one ticket into another implies review of the same patches *twice*.
> 
> I didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?

It won't be two reviews of the same code. Only the difference from this code and the dependencies will need to be reviewed.



---

archive/issue_comments_296306.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@tscrim](#comment%3A56):\n\n[ Snip... ]\n\n> > I didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?\n\n> \n> It won't be two reviews of the same code. Only the difference from this code and the dependencies will need to be reviewed.\n\nI'm not sure to understand this either....\n\nOkay. I'll reinstate dependencies, unmark my invalidation requests.\n\nAnd fix a possible issue I just spotted (patches on Cygwin).\n\nMarking this as `needs_work` for now.",
    "created_at": "2017-02-20T20:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296306",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@tscrim](#comment%3A56):

[ Snip... ]

> > I didn't see Dima's point but understood the aim of consistency. Now, I am lost. Do you really want two reviews of the same code ?

> 
> It won't be two reviews of the same code. Only the difference from this code and the dependencies will need to be reviewed.

I'm not sure to understand this either....

Okay. I'll reinstate dependencies, unmark my invalidation requests.

And fix a possible issue I just spotted (patches on Cygwin).

Marking this as `needs_work` for now.



---

archive/issue_events_286619.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-20T20:31:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286619"
}
```



---

archive/issue_events_286620.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-20T20:31:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286620"
}
```



---

archive/issue_comments_296307.json:
```json
{
    "body": "Changed commit from **[`3b11753`](https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84)** to **[`8e07611`](https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc)**",
    "created_at": "2017-02-20T20:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b11753`](https://github.com/sagemath/sagetrac-mirror/commit/3b1175391e19a01d40d2c114b706f0fe1751ac84)** to **[`8e07611`](https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc)**



---

archive/issue_comments_296308.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc\"><code>8e07611</code></a></td><td><code>Reinsert Cygwin-specific patches (lost in the mist of battle).</code></td></tr></table>\n",
    "created_at": "2017-02-20T20:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc"><code>8e07611</code></a></td><td><code>Reinsert Cygwin-specific patches (lost in the mist of battle).</code></td></tr></table>




---

archive/issue_events_286621.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-20T20:44:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286621"
}
```



---

archive/issue_events_286622.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-02-20T20:44:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286622"
}
```



---

archive/issue_comments_296309.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n`needs_review` again.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc\"><code>8e07611</code></a></td><td><code>Reinsert Cygwin-specific patches (lost in the mist of battle).</code></td></tr></table>\n",
    "created_at": "2017-02-20T20:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296309",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:59" align="right">comment:59</div>

`needs_review` again.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc"><code>8e07611</code></a></td><td><code>Reinsert Cygwin-specific patches (lost in the mist of battle).</code></td></tr></table>




---

archive/issue_comments_296310.json:
```json
{
    "body": "Changed dependencies from **#21744 #22189** to **#21744 #21767 #21770 #22189**",
    "created_at": "2017-02-20T20:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296310",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed dependencies from **#21744 #22189** to **#21744 #21767 #21770 #22189**



---

archive/issue_comments_296311.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nR 3.3.3 is out (and has been for one week...). I intend to update this ticket.\n\nThis shouldn't refrain potential reviewers to review #21767 an #21770, which do not seem to need an update.",
    "created_at": "2017-03-14T10:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296311",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:60" align="right">comment:60</div>

R 3.3.3 is out (and has been for one week...). I intend to update this ticket.

This shouldn't refrain potential reviewers to review #21767 an #21770, which do not seem to need an update.



---

archive/issue_events_286623.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-14T10:51:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286623"
}
```



---

archive/issue_events_286624.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-14T10:51:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286624"
}
```



---

archive/issue_comments_296312.json:
```json
{
    "body": "Changed commit from **[`8e07611`](https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc)** to **[`516f029`](https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8)**",
    "created_at": "2017-03-14T16:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296312",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8e07611`](https://github.com/sagemath/sagetrac-mirror/commit/8e0761131da60b81249e559694659c78ccfcf6cc)** to **[`516f029`](https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8)**



---

archive/issue_comments_296313.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8\"><code>516f029</code></a></td><td><code>Upgraded to R 3.3.3</code></td></tr></table>\n",
    "created_at": "2017-03-14T16:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296313",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8"><code>516f029</code></a></td><td><code>Upgraded to R 3.3.3</code></td></tr></table>




---

archive/issue_comments_296314.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nCompiles cleanly. Updated ticket title and tarball pointer.\n\nFormal tests to come (on a decent machine). Tonight ?",
    "created_at": "2017-03-14T16:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296314",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:62" align="right">comment:62</div>

Compiles cleanly. Updated ticket title and tarball pointer.

Formal tests to come (on a decent machine). Tonight ?



---

archive/issue_comments_296315.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n \n Original tarballs :\n \n-* [R](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)\n+* [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)\n * [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)\n * [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)\n``````\n",
    "created_at": "2017-03-14T16:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296315",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 
 Original tarballs :
 
-* [R](https://cran.r-project.org/src/base/R-3/R-3.3.2.tar.gz)
+* [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)
 * [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)
 * [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)
``````




---

archive/issue_events_286625.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-14T16:39:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "title_is": "Upgrade R to 3.3.3",
    "title_was": "Upgrade R to 3.3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286625"
}
```



---

archive/issue_events_286626.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-14T22:52:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286626"
}
```



---

archive/issue_events_286627.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-14T22:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286627"
}
```



---

archive/issue_comments_296316.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nThis version :\n* Compiles cleanly.\n* passes ptestlong with :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\nsage -t --long src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux_element.py  # Bad exit: 2\nsage -t --long src/sage/modular/arithgroup/arithgroup_generic.py  # Bad exit: 2\n----------------------------------------------------------------------\n```\n\nThe first one is a well-known difference of expression of the ideal of a multivariable polynopial, already subject of a ticket.\n\nThe last two are transient errors : these tests pass when ran standalone. Race conditions ?\n\n* Passes its own test suite.\n\n==>`needs_review`.",
    "created_at": "2017-03-14T22:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296316",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:63" align="right">comment:63</div>

This version :
* Compiles cleanly.
* passes ptestlong with :

```
----------------------------------------------------------------------
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
sage -t --long src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux_element.py  # Bad exit: 2
sage -t --long src/sage/modular/arithgroup/arithgroup_generic.py  # Bad exit: 2
----------------------------------------------------------------------
```

The first one is a well-known difference of expression of the ideal of a multivariable polynopial, already subject of a ticket.

The last two are transient errors : these tests pass when ran standalone. Race conditions ?

* Passes its own test suite.

==>`needs_review`.



---

archive/issue_comments_296317.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nhow does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)",
    "created_at": "2017-03-15T12:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296317",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)



---

archive/issue_comments_296318.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nsomething funny is going on on OSX here, it builds with `clang` (OSX's \"native\" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?",
    "created_at": "2017-03-15T13:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296318",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:65" align="right">comment:65</div>

something funny is going on on OSX here, it builds with `clang` (OSX's "native" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?



---

archive/issue_comments_296319.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@dimpase](#comment%3A64):\n> how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)\n\nas far as I understand, it's managed in R's main .configure script.",
    "created_at": "2017-03-15T13:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296319",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@dimpase](#comment%3A64):
> how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)

as far as I understand, it's managed in R's main .configure script.



---

archive/issue_comments_296320.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@dimpase](#comment%3A65):\n> something funny is going on on OSX here, it builds with `clang` (OSX's \"native\" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?\n\nI dunno. Being Macless, I can't test it. That may be under governance of R's configure.\n\nAs far as I understand, one might force CC to be Sage's gcc rather than the default clang (I do not know Macs enough to know if this is mandatory or even useful to run with Sage). If so, a Mac-specific patch to spkg-install should be (relatively) trivial.\n\nISTR that R has some Fortran libraries. What happens on Macs when clang is used ?\n\nHTH,",
    "created_at": "2017-03-15T14:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296320",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@dimpase](#comment%3A65):
> something funny is going on on OSX here, it builds with `clang` (OSX's "native" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?

I dunno. Being Macless, I can't test it. That may be under governance of R's configure.

As far as I understand, one might force CC to be Sage's gcc rather than the default clang (I do not know Macs enough to know if this is mandatory or even useful to run with Sage). If so, a Mac-specific patch to spkg-install should be (relatively) trivial.

ISTR that R has some Fortran libraries. What happens on Macs when clang is used ?

HTH,



---

archive/issue_comments_296321.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A66):\n> Replying to [@dimpase](#comment%3A64):\n> > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)\n\n> \n> as far as I understand, it's managed in R's main .configure script.\n\nmy question is rather how do I test that they work?",
    "created_at": "2017-03-15T14:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296321",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@EmmanuelCharpentier](#comment%3A66):
> Replying to [@dimpase](#comment%3A64):
> > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)

> 
> as far as I understand, it's managed in R's main .configure script.

my question is rather how do I test that they work?



---

archive/issue_comments_296322.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A67):\n> Replying to [@dimpase](#comment%3A65):\n> > something funny is going on on OSX here, it builds with `clang` (OSX's \"native\" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?\n\n> \n> I dunno. Being Macless, I can't test it. That may be under governance of R's configure.\n> \n> As far as I understand, one might force CC to be Sage's gcc rather than the default clang (I do not know Macs enough to know if this is mandatory or even useful to run with Sage). If so, a Mac-specific patch to spkg-install should be (relatively) trivial.\n\nI think this should be fixed.\n\nit might be problematic to use C++ libraries compiled with `gcc` with anything compiled with `clang`. While R itself does not need C++ for building, one can have an R extension that does, and this might lead to troubles...\n\n> \n> ISTR that R has some Fortran libraries. What happens on Macs when clang is used ?\n\nIt uses `gfortran` for Fortran, still.",
    "created_at": "2017-03-15T14:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296322",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@EmmanuelCharpentier](#comment%3A67):
> Replying to [@dimpase](#comment%3A65):
> > something funny is going on on OSX here, it builds with `clang` (OSX's "native" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?

> 
> I dunno. Being Macless, I can't test it. That may be under governance of R's configure.
> 
> As far as I understand, one might force CC to be Sage's gcc rather than the default clang (I do not know Macs enough to know if this is mandatory or even useful to run with Sage). If so, a Mac-specific patch to spkg-install should be (relatively) trivial.

I think this should be fixed.

it might be problematic to use C++ libraries compiled with `gcc` with anything compiled with `clang`. While R itself does not need C++ for building, one can have an R extension that does, and this might lead to troubles...

> 
> ISTR that R has some Fortran libraries. What happens on Macs when clang is used ?

It uses `gfortran` for Fortran, still.



---

archive/issue_comments_296323.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@dimpase](#comment%3A65):\n> something funny is going on on OSX here, it builds with `clang` (OSX's \"native\" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?\n\nFrom the `spkg-install` file:\n\n```\n    if [ $MACOSX_VERSION -ge 16 ]; then\n        echo \"OS X 10.$[$MACOSX_VERSION-4] Building with clang.\"\n        CC=clang\n    fi\n```\nThis is from #21567.",
    "created_at": "2017-03-15T15:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296323",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@dimpase](#comment%3A65):
> something funny is going on on OSX here, it builds with `clang` (OSX's "native" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?

From the `spkg-install` file:

```
    if [ $MACOSX_VERSION -ge 16 ]; then
        echo "OS X 10.$[$MACOSX_VERSION-4] Building with clang."
        CC=clang
    fi
```
This is from #21567.



---

archive/issue_comments_296324.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@jhpalmieri](#comment%3A70):\n> Replying to [@dimpase](#comment%3A65):\n> > something funny is going on on OSX here, it builds with `clang` (OSX's \"native\" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?\n\n> \n\n> This is from #21567.\n\nOK, I see. I didn't follow this closely enough. No issue then here.",
    "created_at": "2017-03-15T15:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296324",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@jhpalmieri](#comment%3A70):
> Replying to [@dimpase](#comment%3A65):
> > something funny is going on on OSX here, it builds with `clang` (OSX's "native" compiler) rather than with `gcc`. Is this a bug in our package, or this is on purpose?

> 

> This is from #21567.

OK, I see. I didn't follow this closely enough. No issue then here.



---

archive/issue_comments_296325.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@dimpase](#comment%3A68):\n> Replying to [@EmmanuelCharpentier](#comment%3A66):\n> > Replying to [@dimpase](#comment%3A64):\n> > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)\n\n> > \n> > as far as I understand, it's managed in R's main .configure script.\n\n> \n> my question is rather how do I test that they work?\n\nFrom R, trivially :\n* file.download(\"http://Url-of-soime-file-you-are-sure-in-exists\", method=\"curl\") ## libcurl\n* grep(\"Some.*funny.*pattern\", SomeCharVector, perl=TRUE) ## libpcre\n\nThis might be docscripted. Problems :\n* Find a file whose existence is certain\n* Mark the curl doctest as \"internet\", on order not to execute it in automated tests (that might run on an unconnected achine).\n* Find some nice pattern where the Perl-compatible matching *differs* from the standard one...\n\nHTH,",
    "created_at": "2017-03-15T15:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296325",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@dimpase](#comment%3A68):
> Replying to [@EmmanuelCharpentier](#comment%3A66):
> > Replying to [@dimpase](#comment%3A64):
> > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)

> > 
> > as far as I understand, it's managed in R's main .configure script.

> 
> my question is rather how do I test that they work?

From R, trivially :
* file.download("http://Url-of-soime-file-you-are-sure-in-exists", method="curl") ## libcurl
* grep("Some.*funny.*pattern", SomeCharVector, perl=TRUE) ## libpcre

This might be docscripted. Problems :
* Find a file whose existence is certain
* Mark the curl doctest as "internet", on order not to execute it in automated tests (that might run on an unconnected achine).
* Find some nice pattern where the Perl-compatible matching *differs* from the standard one...

HTH,



---

archive/issue_comments_296326.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A72):\n> Replying to [@dimpase](#comment%3A68):\n> > Replying to [@EmmanuelCharpentier](#comment%3A66):\n> > > Replying to [@dimpase](#comment%3A64):\n> > > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)\n\n> > > \n> > > as far as I understand, it's managed in R's main .configure script.\n\n> > \n> > my question is rather how do I test that they work?\n\n> \n> From R, trivially :\n> * `file.download(\"http://Url-of-soime-file-you-are-sure-in-exists\", method=\"curl\") ## libcurl`\n\nOK, I'll check this.\n\n> * `grep(\"Some.*funny.*pattern\", SomeCharVector, perl=TRUE) ## libpcre`\n\nI don't know R, so this one look too cryptic. Could you provide a concrete example?\n\n> \n> This might be docscripted. Problems :\n> * Find a file whose existence is certain\n\nhow about \n`http://www.sagemath.org/index.html` ?\n\n> * Mark the curl doctest as \"internet\", on order not to execute it in automated tests (that might run on an unconnected achine).\n> * Find some nice pattern where the Perl-compatible matching *differs* from the standard one...\n\nreally no idea what you mean here exactly...",
    "created_at": "2017-03-15T15:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296326",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@EmmanuelCharpentier](#comment%3A72):
> Replying to [@dimpase](#comment%3A68):
> > Replying to [@EmmanuelCharpentier](#comment%3A66):
> > > Replying to [@dimpase](#comment%3A64):
> > > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)

> > > 
> > > as far as I understand, it's managed in R's main .configure script.

> > 
> > my question is rather how do I test that they work?

> 
> From R, trivially :
> * `file.download("http://Url-of-soime-file-you-are-sure-in-exists", method="curl") ## libcurl`

OK, I'll check this.

> * `grep("Some.*funny.*pattern", SomeCharVector, perl=TRUE) ## libpcre`

I don't know R, so this one look too cryptic. Could you provide a concrete example?

> 
> This might be docscripted. Problems :
> * Find a file whose existence is certain

how about 
`http://www.sagemath.org/index.html` ?

> * Mark the curl doctest as "internet", on order not to execute it in automated tests (that might run on an unconnected achine).
> * Find some nice pattern where the Perl-compatible matching *differs* from the standard one...

really no idea what you mean here exactly...



---

archive/issue_comments_296327.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nI forgot the obvious :\n\n```\n> extSoftVersion()[\"PCRE\"]\n             PCRE \n\"8.39 2016-06-14\" \n> capabilities()[\"libcurl\"]\nlibcurl \n   TRUE \n```\n\nNot knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...",
    "created_at": "2017-03-15T16:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296327",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:74" align="right">comment:74</div>

I forgot the obvious :

```
> extSoftVersion()["PCRE"]
             PCRE 
"8.39 2016-06-14" 
> capabilities()["libcurl"]
libcurl 
   TRUE 
```

Not knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...



---

archive/issue_comments_296328.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A74):\n> I forgot the obvious :\n> \n> ```\n> > extSoftVersion()[\"PCRE\"]\n>              PCRE \n> \"8.39 2016-06-14\" \n> > capabilities()[\"libcurl\"]\n> libcurl \n>    TRUE \n> ```\n> \n\naren't these just perfect to make doctests?",
    "created_at": "2017-03-15T16:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296328",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@EmmanuelCharpentier](#comment%3A74):
> I forgot the obvious :
> 
> ```
> > extSoftVersion()["PCRE"]
>              PCRE 
> "8.39 2016-06-14" 
> > capabilities()["libcurl"]
> libcurl 
>    TRUE 
> ```
> 

aren't these just perfect to make doctests?



---

archive/issue_comments_296329.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A74):\n> I forgot the obvious :\n> \n> ```\n> > extSoftVersion()[\"PCRE\"]\n>              PCRE \n> \"8.39 2016-06-14\" \n> > capabilities()[\"libcurl\"]\n> libcurl \n>    TRUE \n> ```\n> \n\n> Not knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...\n\nTry that :\n\n```\n> gsub(\"abc([[:alpha:]]*)def\",\"\\\\U\\\\1\",\"abcxyzdef\")\n[1] \"Uxyz\"\n> gsub(\"abc([[:alpha:]]*)def\",\"\\\\U\\\\1\",\"abcxyzdef\",perl=TRUE)\n[1] \"XYZ\"\n```",
    "created_at": "2017-03-15T16:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296329",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@EmmanuelCharpentier](#comment%3A74):
> I forgot the obvious :
> 
> ```
> > extSoftVersion()["PCRE"]
>              PCRE 
> "8.39 2016-06-14" 
> > capabilities()["libcurl"]
> libcurl 
>    TRUE 
> ```
> 

> Not knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...

Try that :

```
> gsub("abc([[:alpha:]]*)def","\\U\\1","abcxyzdef")
[1] "Uxyz"
> gsub("abc([[:alpha:]]*)def","\\U\\1","abcxyzdef",perl=TRUE)
[1] "XYZ"
```



---

archive/issue_comments_296330.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@dimpase](#comment%3A75):\n> Replying to [@EmmanuelCharpentier](#comment%3A74):\n> > I forgot the obvious :\n> > \n> > ```\n> > > extSoftVersion()[\"PCRE\"]\n> >              PCRE \n> > \"8.39 2016-06-14\" \n> > > capabilities()[\"libcurl\"]\n> > libcurl \n> >    TRUE \n> > ```\n> > \n\n> aren't these just perfect to make doctests?\n\nNot really : these just test for the *presence* of the software. Downloading a *real* file, or the example I just cooked for PCRE, ensure that the software works *as expected*. Of course, I checked that these packages pass their own testsuite.\n\nNote : I'll have to learn how to make a doctest, somewhere in the Sages's \"r\" documentation. Later ? Now, I'm just a bit overwhelmed (RealLife(TM) is sometimes a bitch...).",
    "created_at": "2017-03-15T16:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296330",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@dimpase](#comment%3A75):
> Replying to [@EmmanuelCharpentier](#comment%3A74):
> > I forgot the obvious :
> > 
> > ```
> > > extSoftVersion()["PCRE"]
> >              PCRE 
> > "8.39 2016-06-14" 
> > > capabilities()["libcurl"]
> > libcurl 
> >    TRUE 
> > ```
> > 

> aren't these just perfect to make doctests?

Not really : these just test for the *presence* of the software. Downloading a *real* file, or the example I just cooked for PCRE, ensure that the software works *as expected*. Of course, I checked that these packages pass their own testsuite.

Note : I'll have to learn how to make a doctest, somewhere in the Sages's "r" documentation. Later ? Now, I'm just a bit overwhelmed (RealLife(TM) is sometimes a bitch...).



---

archive/issue_comments_296331.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\n* Passes its own testsuite.\n* (#21567 + #21770 + #20523 remerged with the two previous ones) passes ptestlong with two failures :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nThe first one is transient (passes when ran standalone) ; the second one is a well-documented, ticketed (#21884) and not yet fixed difference on the expression of the expected result.\n\nShould I upload my local branch for #20523 (this patch) ? I think so, and will do so unless someone stops me in the next half hour...",
    "created_at": "2017-03-15T17:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296331",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:78" align="right">comment:78</div>

* Passes its own testsuite.
* (#21567 + #21770 + #20523 remerged with the two previous ones) passes ptestlong with two failures :

```
----------------------------------------------------------------------
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
----------------------------------------------------------------------
```

The first one is transient (passes when ran standalone) ; the second one is a well-documented, ticketed (#21884) and not yet fixed difference on the expression of the expected result.

Should I upload my local branch for #20523 (this patch) ? I think so, and will do so unless someone stops me in the next half hour...



---

archive/issue_comments_296332.json:
```json
{
    "body": "Changed commit from **[`516f029`](https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8)** to **[`cbe9134`](https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696)**",
    "created_at": "2017-03-15T17:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296332",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`516f029`](https://github.com/sagemath/sagetrac-mirror/commit/516f0291f093af9415003b6b99c7d0ecb1ee8ac8)** to **[`cbe9134`](https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696)**



---

archive/issue_comments_296333.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e615c130c342dc69fc79f6dfa1fa13d3969d7a9\"><code>2e615c1</code></a></td><td><code>Merge branch 'public/curl7510' of trac.sagemath.org:sage into rupd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf54f54e895a416a21457e48067cb198ebae28cc\"><code>bf54f54</code></a></td><td><code>bumped up the version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfc26ef6badfd02ca88dcd69bd5e86684d1dce41\"><code>bfc26ef</code></a></td><td><code>Wups. chmod +x spkg-install...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef48f715189d6629f776b7a87334fc4da2e6219f\"><code>ef48f71</code></a></td><td><code>Upgraded to pcre 8.40</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c88cdc6fd7bb150928453d31f94dab8546d9a5b\"><code>1c88cdc</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into finalr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696\"><code>cbe9134</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into finalr</code></td></tr></table>\n",
    "created_at": "2017-03-15T17:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296333",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e615c130c342dc69fc79f6dfa1fa13d3969d7a9"><code>2e615c1</code></a></td><td><code>Merge branch 'public/curl7510' of trac.sagemath.org:sage into rupd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf54f54e895a416a21457e48067cb198ebae28cc"><code>bf54f54</code></a></td><td><code>bumped up the version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfc26ef6badfd02ca88dcd69bd5e86684d1dce41"><code>bfc26ef</code></a></td><td><code>Wups. chmod +x spkg-install...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef48f715189d6629f776b7a87334fc4da2e6219f"><code>ef48f71</code></a></td><td><code>Upgraded to pcre 8.40</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c88cdc6fd7bb150928453d31f94dab8546d9a5b"><code>1c88cdc</code></a></td><td><code>Merge branch 'u/charpent/package_libpcre_as_a_standard_package' of git://trac.sagemath.org/sage into finalr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696"><code>cbe9134</code></a></td><td><code>Merge branch 'public/r311' of git://trac.sagemath.org/sage into finalr</code></td></tr></table>




---

archive/issue_comments_296334.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@sagetrac-git](#comment%3A79):\n\n[ ... ]\n\n* Uploaded the merged result.\n* Updated tarballs\n\n==> `needs_review` for good.",
    "created_at": "2017-03-15T17:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296334",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@sagetrac-git](#comment%3A79):

[ ... ]

* Uploaded the merged result.
* Updated tarballs

==> `needs_review` for good.



---

archive/issue_comments_296335.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,5 @@\n Original tarballs :\n \n * [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)\n-* [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)\n-* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)\n+* [curl](https://curl.haxx.se/download/curl-7.53.1.tar.bz2)\n+* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz)\n``````\n",
    "created_at": "2017-03-15T17:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296335",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,5 @@
 Original tarballs :
 
 * [R](https://cran.r-project.org/src/base/R-3/R-3.3.3.tar.gz)
-* [curl](https://curl.haxx.se/download/curl-7.52.1.tar.bz2)
-* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz)
+* [curl](https://curl.haxx.se/download/curl-7.53.1.tar.bz2)
+* [pcre](https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz)
``````




---

archive/issue_comments_296336.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nI'm currently testing this on OS X.",
    "created_at": "2017-03-15T19:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296336",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:81" align="right">comment:81</div>

I'm currently testing this on OS X.



---

archive/issue_comments_296337.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\n\n```\nconfigure: error: libcurl >= 7.28.0 library and headers are required with support for https\nError configuring R.\n```",
    "created_at": "2017-03-15T19:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296337",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:82" align="right">comment:82</div>


```
configure: error: libcurl >= 7.28.0 library and headers are required with support for https
Error configuring R.
```



---

archive/issue_events_286628.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T19:31:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286628"
}
```



---

archive/issue_events_286629.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T19:31:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286629"
}
```



---

archive/issue_comments_296338.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nopenssl/OS X drama...",
    "created_at": "2017-03-15T19:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296338",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:83" align="right">comment:83</div>

openssl/OS X drama...



---

archive/issue_comments_296339.json:
```json
{
    "body": "Attachment: **[libcurl_https_support.patch.gz](https://github.com/sagemath/sage/files/ticket20523/libcurl_https_support.patch.gz)**\n\nRemove check for https support in curl.",
    "created_at": "2017-03-15T19:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296339",
    "user": "https://github.com/jpflori"
}
```

Attachment: **[libcurl_https_support.patch.gz](https://github.com/sagemath/sage/files/ticket20523/libcurl_https_support.patch.gz)**

Remove check for https support in curl.



---

archive/issue_comments_296340.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nFeel free to use the patch.",
    "created_at": "2017-03-15T19:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296340",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:84" align="right">comment:84</div>

Feel free to use the patch.



---

archive/issue_comments_296341.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nIt did build for me on OSX  (not the current branch, I didn't try it yet, the one around comment 70).",
    "created_at": "2017-03-15T19:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296341",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:85" align="right">comment:85</div>

It did build for me on OSX  (not the current branch, I didn't try it yet, the one around comment 70).



---

archive/issue_comments_296342.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nif we build this with `clang` on OSX anyway, can we build with OpenSSL support, no?",
    "created_at": "2017-03-15T19:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296342",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:86" align="right">comment:86</div>

if we build this with `clang` on OSX anyway, can we build with OpenSSL support, no?



---

archive/issue_comments_296343.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nR does not need OpenSSL directly.\nIt just wants curl to have been built with https support.",
    "created_at": "2017-03-15T20:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296343",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:87" align="right">comment:87</div>

R does not need OpenSSL directly.
It just wants curl to have been built with https support.



---

archive/issue_comments_296344.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@jpflori](#comment%3A87):\n> R does not need OpenSSL directly.\n> It just wants curl to have been built with https support.\n\nand is this possible to achieve without dirty hacks (i.e. not using ssl headers hidden deeply in Xcode in some location that is not stable) ?",
    "created_at": "2017-03-15T20:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296344",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@jpflori](#comment%3A87):
> R does not need OpenSSL directly.
> It just wants curl to have been built with https support.

and is this possible to achieve without dirty hacks (i.e. not using ssl headers hidden deeply in Xcode in some location that is not stable) ?



---

archive/issue_comments_296345.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nNot sure... and I'm not very inclined on working on this right now.\n\nBut if we were to include the patch removing the check we'll get a compiling though with less feature solution.\nIf you think that's a good idea, I can inlcude it in the branch.",
    "created_at": "2017-03-16T08:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296345",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:89" align="right">comment:89</div>

Not sure... and I'm not very inclined on working on this right now.

But if we were to include the patch removing the check we'll get a compiling though with less feature solution.
If you think that's a good idea, I can inlcude it in the branch.



---

archive/issue_comments_296346.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@jpflori](#comment%3A89):\n> Not sure... and I'm not very inclined on working on this right now.\n> \n> But if we were to include the patch removing the check we'll get a compiling though with less feature solution.\n> If you think that's a good idea, I can inlcude it in the branch.\n\nUsing `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this?",
    "created_at": "2017-03-16T09:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296346",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@jpflori](#comment%3A89):
> Not sure... and I'm not very inclined on working on this right now.
> 
> But if we were to include the patch removing the check we'll get a compiling though with less feature solution.
> If you think that's a good idea, I can inlcude it in the branch.

Using `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this?



---

archive/issue_comments_296347.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nGood idea as well.\n\nBut I still think we should include the patch to be able to build Sage without ssl.",
    "created_at": "2017-03-16T09:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296347",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:91" align="right">comment:91</div>

Good idea as well.

But I still think we should include the patch to be able to build Sage without ssl.



---

archive/issue_comments_296348.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\n@dimpase: can you open another ticket for building curl with clang and the right option on OS X?",
    "created_at": "2017-03-16T09:38:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296348",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:92" align="right">comment:92</div>

@dimpase: can you open another ticket for building curl with clang and the right option on OS X?



---

archive/issue_comments_296349.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@dimpase](#comment%3A90):\n> Replying to [@jpflori](#comment%3A89):\n> > Not sure... and I'm not very inclined on working on this right now.\n> > \n> > But if we were to include the patch removing the check we'll get a compiling though with less feature solution.\n> > If you think that's a good idea, I can inlcude it in the branch.\n\n> \n> Using `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this? \n\nBy all means, yes. Updating R is a matter of some urgency...\n\nPossible plan :\n* Dima : patch libcurl (#21767) to add this switch to its `spkg-install`. Check it. Push it to trac as `needs_review`.\n* Me : review it on Linux (with probably no effect at all) ==> re-mark #21767 as `positive review`\n* Me also : re-merge #21767 into #20523, re-test it, push it to trac as `needs_review`\n* Dima : re-test #20523 on a Mac, and possibly mark it as `poitive_review `.\n\nWhat do you think ?",
    "created_at": "2017-03-16T09:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296349",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@dimpase](#comment%3A90):
> Replying to [@jpflori](#comment%3A89):
> > Not sure... and I'm not very inclined on working on this right now.
> > 
> > But if we were to include the patch removing the check we'll get a compiling though with less feature solution.
> > If you think that's a good idea, I can inlcude it in the branch.

> 
> Using `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this? 

By all means, yes. Updating R is a matter of some urgency...

Possible plan :
* Dima : patch libcurl (#21767) to add this switch to its `spkg-install`. Check it. Push it to trac as `needs_review`.
* Me : review it on Linux (with probably no effect at all) ==> re-mark #21767 as `positive review`
* Me also : re-merge #21767 into #20523, re-test it, push it to trac as `needs_review`
* Dima : re-test #20523 on a Mac, and possibly mark it as `poitive_review `.

What do you think ?



---

archive/issue_comments_296350.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nJust open another ticket for the curl script modifs please.\nNo need to reopen #21767.",
    "created_at": "2017-03-16T09:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296350",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:94" align="right">comment:94</div>

Just open another ticket for the curl script modifs please.
No need to reopen #21767.



---

archive/issue_comments_296351.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@jpflori](#comment%3A89):\n> Not sure... and I'm not very inclined on working on this right now.\n> \n> But if we were to include the patch removing the check we'll get a compiling though with less feature solution.\n> If you think that's a good idea, I can inlcude it in the branch.\n\nI think that this should be a **separate** ticket. I have reservations about trestricting the abilities of the software it includes ; in R case, the loss of secure communications would be a big loss :\n* R repositories (> 10000 packages now) migrate towards https access. I doubt that they remain http-accessible for long.\n* Access to Web databases (important for many applied statisticians) often requires secure communications.\n\nSo, at the minimum, let it be a choice of the user, and not something imposed. (For similar reasons, I oppose Jeroen Demerey's position, which entails a non-functional pip : too big a loss of functionality to be imposed).\n\nAnd treat it as an ussue separate fron this gofddam R upgrade, which is 11 months late...",
    "created_at": "2017-03-16T09:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296351",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@jpflori](#comment%3A89):
> Not sure... and I'm not very inclined on working on this right now.
> 
> But if we were to include the patch removing the check we'll get a compiling though with less feature solution.
> If you think that's a good idea, I can inlcude it in the branch.

I think that this should be a **separate** ticket. I have reservations about trestricting the abilities of the software it includes ; in R case, the loss of secure communications would be a big loss :
* R repositories (> 10000 packages now) migrate towards https access. I doubt that they remain http-accessible for long.
* Access to Web databases (important for many applied statisticians) often requires secure communications.

So, at the minimum, let it be a choice of the user, and not something imposed. (For similar reasons, I oppose Jeroen Demerey's position, which entails a non-functional pip : too big a loss of functionality to be imposed).

And treat it as an ussue separate fron this gofddam R upgrade, which is 11 months late...



---

archive/issue_comments_296352.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@jpflori](#comment%3A94):\n> Just open another ticket for the curl script modifs please.\n> No need to reopen #21767.\n\nOK, Ill do that, but will have to add it to #20523 dependencies. And merge it afterwards...",
    "created_at": "2017-03-16T09:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296352",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@jpflori](#comment%3A94):
> Just open another ticket for the curl script modifs please.
> No need to reopen #21767.

OK, Ill do that, but will have to add it to #20523 dependencies. And merge it afterwards...



---

archive/issue_comments_296353.json:
```json
{
    "body": "Changed dependencies from **#21744 #21767 #21770 #22189** to **#21744 #21767 #21770 #22189 #22618**",
    "created_at": "2017-03-16T09:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296353",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed dependencies from **#21744 #21767 #21770 #22189** to **#21744 #21767 #21770 #22189 #22618**



---

archive/issue_comments_296354.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A96):\n> Replying to [@jpflori](#comment%3A94):\n> > Just open another ticket for the curl script modifs please.\n> > No need to reopen #21767.\n\n> \n> OK, Ill do that, but will have to add it to #20523 dependencies. And merge it afterwards...\n\nThat's now #22618 (added to dependencies).",
    "created_at": "2017-03-16T09:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296354",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@EmmanuelCharpentier](#comment%3A96):
> Replying to [@jpflori](#comment%3A94):
> > Just open another ticket for the curl script modifs please.
> > No need to reopen #21767.

> 
> OK, Ill do that, but will have to add it to #20523 dependencies. And merge it afterwards...

That's now #22618 (added to dependencies).



---

archive/issue_comments_296355.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@dimpase](#comment%3A90):\n> Using `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this?\n\nPerhaps, but that's orthogonal to this ticket. The OpenSSL dependency is not limited to OS X, so the solution to [comment:82] cannot be specific to OS X.",
    "created_at": "2017-03-16T10:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296355",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@dimpase](#comment%3A90):
> Using `clang`, `curl` can be built with `--with-darwinssl` on OSX. This does use Apple's replacement for `openssl`. (doesn't work with gcc as it needs support for Apple's blocks extension for C). Should we do this?

Perhaps, but that's orthogonal to this ticket. The OpenSSL dependency is not limited to OS X, so the solution to [comment:82] cannot be specific to OS X.



---

archive/issue_comments_296356.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nI agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.",
    "created_at": "2017-03-16T10:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296356",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

I agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.



---

archive/issue_comments_296357.json:
```json
{
    "body": "Changed dependencies from **#21744 #21767 #21770 #22189 #22618** to **#21767, #21770**",
    "created_at": "2017-03-16T10:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296357",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21744 #21767 #21770 #22189 #22618** to **#21767, #21770**



---

archive/issue_comments_296358.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A96):\n> Replying to [@jpflori](#comment%3A94):\n> > Just open another ticket for the curl script modifs please.\n> > No need to reopen #21767.\n\nwhy not, I can do this right now on #21767, it will be ready by lunchtime...",
    "created_at": "2017-03-16T10:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296358",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@EmmanuelCharpentier](#comment%3A96):
> Replying to [@jpflori](#comment%3A94):
> > Just open another ticket for the curl script modifs please.
> > No need to reopen #21767.

why not, I can do this right now on #21767, it will be ready by lunchtime...



---

archive/issue_comments_296359.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@jdemeyer](#comment%3A99):\n> I agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.\n\nWith that patch, will R use SSL when compiled on a system where OpenSSL or Gutls exist(s) ?",
    "created_at": "2017-03-16T10:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296359",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@jdemeyer](#comment%3A99):
> I agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.

With that patch, will R use SSL when compiled on a system where OpenSSL or Gutls exist(s) ?



---

archive/issue_comments_296360.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nYes it will.\n\nBut it will also allow to build Sage on systems without openssl.",
    "created_at": "2017-03-16T10:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296360",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:102" align="right">comment:102</div>

Yes it will.

But it will also allow to build Sage on systems without openssl.



---

archive/issue_comments_296361.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A101):\n> Replying to [@jdemeyer](#comment%3A99):\n> > I agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.\n\n> \n> With that patch, will R use SSL when compiled on a system where OpenSSL or Gutls exist(s) ?\n\nit will use Darwin's own ssl on new OSX systems, otherwise it will do the same as before; i.e. it's an OSX-only patch \nfor new OSX systems (only if `$MACOS_VERSION -ge 16` holds)",
    "created_at": "2017-03-16T10:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296361",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@EmmanuelCharpentier](#comment%3A101):
> Replying to [@jdemeyer](#comment%3A99):
> > I agree with jpflori. Let's include the R patch *and* also possibly fix building curl on OS X with OpenSSL.

> 
> With that patch, will R use SSL when compiled on a system where OpenSSL or Gutls exist(s) ?

it will use Darwin's own ssl on new OSX systems, otherwise it will do the same as before; i.e. it's an OSX-only patch 
for new OSX systems (only if `$MACOS_VERSION -ge 16` holds)



---

archive/issue_comments_296362.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A72):\n> Replying to [@dimpase](#comment%3A68):\n> > Replying to [@EmmanuelCharpentier](#comment%3A66):\n> > > Replying to [@dimpase](#comment%3A64):\n> > > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)\n\n> > > \n> > > as far as I understand, it's managed in R's main .configure script.\n\n> > \n> > my question is rather how do I test that they work?\n\n> \n> From R, trivially :\n> * file.download(\"http://Url-of-soime-file-you-are-sure-in-exists\", method=\"curl\") ## libcurl\n\nit is `download.file` :-)\n\nThe following works in R (run from `sage -sh` prompt) with clang-compiled curl on OSX:\n\n```\n> capabilities()[\"libcurl\"]\nlibcurl \n   TRUE \n> download.file(\"http://www.sagemath.org/index.html\", method=\"curl\",destfile=\"/tmp/bla.html\")\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 17758    0 17758    0     0  92938      0 --:--:-- --:--:-- --:--:--  110k\n> download.file(\"https://www.sagemath.org/index.html\", method=\"curl\",destfile=\"/tmp/sbla.html\")\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 17758    0 17758    0     0  67312      0 --:--:-- --:--:-- --:--:-- 68563\n> \n```\n(so both http and https work)",
    "created_at": "2017-03-16T11:34:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296362",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@EmmanuelCharpentier](#comment%3A72):
> Replying to [@dimpase](#comment%3A68):
> > Replying to [@EmmanuelCharpentier](#comment%3A66):
> > > Replying to [@dimpase](#comment%3A64):
> > > > how does one check that it can use pcre and curl ? is it in the tests? (I'd like to see this on OSX)

> > > 
> > > as far as I understand, it's managed in R's main .configure script.

> > 
> > my question is rather how do I test that they work?

> 
> From R, trivially :
> * file.download("http://Url-of-soime-file-you-are-sure-in-exists", method="curl") ## libcurl

it is `download.file` :-)

The following works in R (run from `sage -sh` prompt) with clang-compiled curl on OSX:

```
> capabilities()["libcurl"]
libcurl 
   TRUE 
> download.file("http://www.sagemath.org/index.html", method="curl",destfile="/tmp/bla.html")
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 17758    0 17758    0     0  92938      0 --:--:-- --:--:-- --:--:--  110k
> download.file("https://www.sagemath.org/index.html", method="curl",destfile="/tmp/sbla.html")
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 17758    0 17758    0     0  67312      0 --:--:-- --:--:-- --:--:-- 68563
> 
```
(so both http and https work)



---

archive/issue_comments_296363.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A76):\n> Replying to [@EmmanuelCharpentier](#comment%3A74):\n> > I forgot the obvious :\n> > \n> > ```\n> > > extSoftVersion()[\"PCRE\"]\n> >              PCRE \n> > \"8.39 2016-06-14\" \n> > > capabilities()[\"libcurl\"]\n> > libcurl \n> >    TRUE \n> > ```\n> > \n\n> \n> > Not knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...\n\n> \n> Try that :\n> \n> ```\n> > gsub(\"abc([[:alpha:]]*)def\",\"\\\\U\\\\1\",\"abcxyzdef\")\n> [1] \"Uxyz\"\n> > gsub(\"abc([[:alpha:]]*)def\",\"\\\\U\\\\1\",\"abcxyzdef\",perl=TRUE)\n> [1] \"XYZ\"\n> ```\n\nOK, these work on OSX, too.",
    "created_at": "2017-03-16T11:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296363",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@EmmanuelCharpentier](#comment%3A76):
> Replying to [@EmmanuelCharpentier](#comment%3A74):
> > I forgot the obvious :
> > 
> > ```
> > > extSoftVersion()["PCRE"]
> >              PCRE 
> > "8.39 2016-06-14" 
> > > capabilities()["libcurl"]
> > libcurl 
> >    TRUE 
> > ```
> > 

> 
> > Not knowing Perl-compatible regular expressin, I'll have to think a bit about a good example...

> 
> Try that :
> 
> ```
> > gsub("abc([[:alpha:]]*)def","\\U\\1","abcxyzdef")
> [1] "Uxyz"
> > gsub("abc([[:alpha:]]*)def","\\U\\1","abcxyzdef",perl=TRUE)
> [1] "XYZ"
> ```

OK, these work on OSX, too.



---

archive/issue_comments_296364.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@dimpase](#comment%3A104):\n\n[ Snip... ]\n\n> (so both http and https work)\n\nTo be fully paranoid, we should check that both downloads give the same file ;-). (I did that, but in a non-portable way).\n\nProbably not really useful.\n\nLet's start another ticket fo doctest it (and the PCRE test) in a future enhancement ?",
    "created_at": "2017-03-16T11:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296364",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@dimpase](#comment%3A104):

[ Snip... ]

> (so both http and https work)

To be fully paranoid, we should check that both downloads give the same file ;-). (I did that, but in a non-portable way).

Probably not really useful.

Let's start another ticket fo doctest it (and the PCRE test) in a future enhancement ?



---

archive/issue_comments_296365.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nas far as OSX is concerned, this looks done to me. Anything else that stops this ticket?",
    "created_at": "2017-03-16T11:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296365",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:107" align="right">comment:107</div>

as far as OSX is concerned, this looks done to me. Anything else that stops this ticket?



---

archive/issue_comments_296366.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nLGTM.\n\nWe should still open a followup ticket to include the openssl-less patch.",
    "created_at": "2017-03-16T12:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296366",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:108" align="right">comment:108</div>

LGTM.

We should still open a followup ticket to include the openssl-less patch.



---

archive/issue_events_286630.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-03-16T12:00:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286630"
}
```



---

archive/issue_events_286631.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-03-16T12:00:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286631"
}
```



---

archive/issue_comments_296367.json:
```json
{
    "body": "Changed reviewer from **Emmanuel Charpentier** to **Emmanuel Charpentier, Dima Pasechnik**",
    "created_at": "2017-03-16T12:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296367",
    "user": "https://github.com/jpflori"
}
```

Changed reviewer from **Emmanuel Charpentier** to **Emmanuel Charpentier, Dima Pasechnik**



---

archive/issue_comments_296368.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nPlease review #22619.",
    "created_at": "2017-03-16T12:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296368",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:109" align="right">comment:109</div>

Please review #22619.



---

archive/issue_comments_296369.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nReplying to [@jpflori](#comment%3A108):\n> LGTM.\n\nA big \"Thank you\" to all people having helped to close this 11 months gap !\n\n> We should still open a followup ticket to include the openssl-less patch.\n\nAgreed. I think that running an open system which needs communication (I just don't see applied statistics without communication as very practical) without means to have *secure* communication is dangerously silly, but I also agree that there might be an use for \"isolated\" systems, for which communication is baggage.\n\nBut this must be an *option*, not something forced on the user by a deficient implementation.",
    "created_at": "2017-03-16T12:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296369",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:110" align="right">comment:110</div>

Replying to [@jpflori](#comment%3A108):
> LGTM.

A big "Thank you" to all people having helped to close this 11 months gap !

> We should still open a followup ticket to include the openssl-less patch.

Agreed. I think that running an open system which needs communication (I just don't see applied statistics without communication as very practical) without means to have *secure* communication is dangerously silly, but I also agree that there might be an use for "isolated" systems, for which communication is baggage.

But this must be an *option*, not something forced on the user by a deficient implementation.



---

archive/issue_comments_296370.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nIt is an option: if you have openssl installed, you'll get https without any further action.",
    "created_at": "2017-03-16T12:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296370",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:111" align="right">comment:111</div>

It is an option: if you have openssl installed, you'll get https without any further action.



---

archive/issue_comments_296371.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\n[comment:82]",
    "created_at": "2017-03-16T12:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296371",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:112" align="right">comment:112</div>

[comment:82]



---

archive/issue_events_286632.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:20:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286632"
}
```



---

archive/issue_events_286633.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:20:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286633"
}
```



---

archive/issue_comments_296372.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@jdemeyer](#comment%3A112):\n> [comment:82]\n\nCompiles for me with #22619 merged in. `make ptestlong` running (needs about 1 hour). Would depending on #22619 be enough for you ?",
    "created_at": "2017-03-16T12:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296372",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@jdemeyer](#comment%3A112):
> [comment:82]

Compiles for me with #22619 merged in. `make ptestlong` running (needs about 1 hour). Would depending on #22619 be enough for you ?



---

archive/issue_comments_296373.json:
```json
{
    "body": "<div id=\"comment:114\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c\"><code>f029f66</code></a></td><td><code>This simple patch removes an overkill check in R's configure.</code></td></tr></table>\n",
    "created_at": "2017-03-16T12:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:114"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c"><code>f029f66</code></a></td><td><code>This simple patch removes an overkill check in R's configure.</code></td></tr></table>




---

archive/issue_comments_296374.json:
```json
{
    "body": "Changed commit from **[`cbe9134`](https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696)** to **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**",
    "created_at": "2017-03-16T12:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cbe9134`](https://github.com/sagemath/sagetrac-mirror/commit/cbe9134ad7aaf1b490ea424164ba1991d8440696)** to **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**



---

archive/issue_comments_296375.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nI think it's better to add the patch from #22619 to this ticket, which I just did.",
    "created_at": "2017-03-16T12:27:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296375",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:115" align="right">comment:115</div>

I think it's better to add the patch from #22619 to this ticket, which I just did.



---

archive/issue_events_286634.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:27:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286634"
}
```



---

archive/issue_events_286635.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:27:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286635"
}
```



---

archive/issue_events_286636.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286636"
}
```



---

archive/issue_events_286637.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-16T12:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286637"
}
```



---

archive/issue_comments_296376.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nJeroen, I presume #comment:82 has been fixed in #21767. Please check if it works for you.",
    "created_at": "2017-03-16T12:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296376",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:116" align="right">comment:116</div>

Jeroen, I presume #comment:82 has been fixed in #21767. Please check if it works for you.



---

archive/issue_events_286638.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-16T12:31:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286638"
}
```



---

archive/issue_events_286639.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-16T12:31:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286639"
}
```



---

archive/issue_comments_296377.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nalso, given how little in Sage actually depends on R, IMHO this can be added in 7.6, no need to wait for 8.0...",
    "created_at": "2017-03-16T12:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296377",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:117" align="right">comment:117</div>

also, given how little in Sage actually depends on R, IMHO this can be added in 7.6, no need to wait for 8.0...



---

archive/issue_comments_296378.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nReplying to [@dimpase](#comment%3A116):\n> Jeroen, I presume #comment:82 has been fixed in #21767.\n\nDepends what you mean. Yes, it's fixed on OS X. But there remains the issue that Sage (and therefore R) should not require OpenSSL.",
    "created_at": "2017-03-16T13:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296378",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:118" align="right">comment:118</div>

Replying to [@dimpase](#comment%3A116):
> Jeroen, I presume #comment:82 has been fixed in #21767.

Depends what you mean. Yes, it's fixed on OS X. But there remains the issue that Sage (and therefore R) should not require OpenSSL.



---

archive/issue_comments_296379.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@jdemeyer](#comment%3A118):\n> Replying to [@dimpase](#comment%3A116):\n> > Jeroen, I presume #comment:82 has been fixed in #21767.\n\n> \n> Depends what you mean. Yes, it's fixed on OS X. But there remains the issue that Sage (and therefore R) should not require OpenSSL.\n\nJeroen,\n\nSince 7.6.beta2 (IIRC), Sagemath [depends](https://trac.sagemath.org/ticket/22189) on some SSL implementation, and we recommend OpenSSL.\n\nBTW #20523 + #22619 passes ptestlong with the usual quirks (one transient error, one well-known, ticketed difference of expression) ; since I have OpenSSL installed systemwide, I can reach an https-accessible R repository.. Is that enough for you ? Or can you check that [your patch](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c) does what you so dearly desire ?\n\nBTW : setting the milestone at 7.6 : this upgrade is late enough.",
    "created_at": "2017-03-16T13:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296379",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@jdemeyer](#comment%3A118):
> Replying to [@dimpase](#comment%3A116):
> > Jeroen, I presume #comment:82 has been fixed in #21767.

> 
> Depends what you mean. Yes, it's fixed on OS X. But there remains the issue that Sage (and therefore R) should not require OpenSSL.

Jeroen,

Since 7.6.beta2 (IIRC), Sagemath [depends](https://trac.sagemath.org/ticket/22189) on some SSL implementation, and we recommend OpenSSL.

BTW #20523 + #22619 passes ptestlong with the usual quirks (one transient error, one well-known, ticketed difference of expression) ; since I have OpenSSL installed systemwide, I can reach an https-accessible R repository.. Is that enough for you ? Or can you check that [your patch](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c) does what you so dearly desire ?

BTW : setting the milestone at 7.6 : this upgrade is late enough.



---

archive/issue_events_286640.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-16T13:56:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286640"
}
```



---

archive/issue_events_286641.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-03-16T13:56:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286641"
}
```



---

archive/issue_comments_296380.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A119):\n> Since 7.6.beta2 (IIRC), Sagemath [depends](https://trac.sagemath.org/ticket/22189) on some SSL implementation, and we recommend OpenSSL.\n\nThat's a documentation bug, see #22620.",
    "created_at": "2017-03-16T14:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296380",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@EmmanuelCharpentier](#comment%3A119):
> Since 7.6.beta2 (IIRC), Sagemath [depends](https://trac.sagemath.org/ticket/22189) on some SSL implementation, and we recommend OpenSSL.

That's a documentation bug, see #22620.



---

archive/issue_comments_296381.json:
```json
{
    "body": "Changed keywords from **r-project** to **r-project, days85**",
    "created_at": "2017-03-16T16:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296381",
    "user": "https://github.com/jpflori"
}
```

Changed keywords from **r-project** to **r-project, days85**



---

archive/issue_events_286642.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-03-16T16:40:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286642"
}
```



---

archive/issue_events_286643.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-03-16T16:40:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286643"
}
```



---

archive/issue_comments_296382.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nthe following is, most probably, an R bug:\n\n```\n[r-3.3.3.p0] making tre-match-backtrack.d from tre-match-backtrack.c\n[r-3.3.3.p0] regerror.c:25:10: fatal error: 'libintl.h' file not found\n[r-3.3.3.p0] #include <libintl.h>\n[r-3.3.3.p0]          ^\n```\nwhich pops up if `libintl.h` is installed in `/usr/local/include/`.\nMaking a symbolic link to it in `SAGE_LOCAL/include` allows this to proceed.\n\nIt appears that the corresponding place in the R installation ignores CFLAGS, as\npassing CFLAGS='-I/usr/local/include' on the command line has no effect.",
    "created_at": "2017-03-27T11:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296382",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:122" align="right">comment:122</div>

the following is, most probably, an R bug:

```
[r-3.3.3.p0] making tre-match-backtrack.d from tre-match-backtrack.c
[r-3.3.3.p0] regerror.c:25:10: fatal error: 'libintl.h' file not found
[r-3.3.3.p0] #include <libintl.h>
[r-3.3.3.p0]          ^
```
which pops up if `libintl.h` is installed in `/usr/local/include/`.
Making a symbolic link to it in `SAGE_LOCAL/include` allows this to proceed.

It appears that the corresponding place in the R installation ignores CFLAGS, as
passing CFLAGS='-I/usr/local/include' on the command line has no effect.



---

archive/issue_comments_296383.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nThere appears to be a platform-dependent bug in how curl dependency is handled. With libcurl not installed in /usr/lib (resp. no libcurl headers in /usr/include) it does not build on a FreeBSD 11.0 system. I had to apply\n\n```\n--- a/build/pkgs/r/spkg-install\n+++ b/build/pkgs/r/spkg-install\n@@ -115,6 +115,11 @@ if [ \"$UNAME\" = \"CYGWIN\" ]; then\n     mv patches/cygwin/*.patch patches/\n fi\n \n+CURL_CPPFLAGS=\"-I/$SAGE_LOCAL/include\"\n+CURL_LIBS=\"-L/$SAGE_LOCAL/lib -lcurl\"\n+export CURL_CPPFLAGS\n+export CURL_LIBS\n+\n config()\n {\n     ./configure \\\n```",
    "created_at": "2017-03-27T13:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296383",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:123" align="right">comment:123</div>

There appears to be a platform-dependent bug in how curl dependency is handled. With libcurl not installed in /usr/lib (resp. no libcurl headers in /usr/include) it does not build on a FreeBSD 11.0 system. I had to apply

```
--- a/build/pkgs/r/spkg-install
+++ b/build/pkgs/r/spkg-install
@@ -115,6 +115,11 @@ if [ "$UNAME" = "CYGWIN" ]; then
     mv patches/cygwin/*.patch patches/
 fi
 
+CURL_CPPFLAGS="-I/$SAGE_LOCAL/include"
+CURL_LIBS="-L/$SAGE_LOCAL/lib -lcurl"
+export CURL_CPPFLAGS
+export CURL_LIBS
+
 config()
 {
     ./configure \
```



---

archive/issue_events_286644.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:43:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286644"
}
```



---

archive/issue_events_286645.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "397bda584b39b518ae277d440f593b62be6c3d1b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-03-27T20:43:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20523#event-286645"
}
```



---

archive/issue_comments_296384.json:
```json
{
    "body": "Changed branch from **[public/r311](https://github.com/sagemath/sagetrac-mirror/tree/public/r311)** to **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**",
    "created_at": "2017-03-27T20:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296384",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/r311](https://github.com/sagemath/sagetrac-mirror/tree/public/r311)** to **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)**



---

archive/issue_comments_296385.json:
```json
{
    "body": "Changed commit from **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)** to none",
    "created_at": "2018-09-14T11:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296385",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`f029f66`](https://github.com/sagemath/sagetrac-mirror/commit/f029f66bbf131eb7cdd4f8bfbe42d5c560baea1c)** to none



---

archive/issue_comments_296386.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@dimpase](#comment%3A122):\n> the following is, most probably, an R bug:\n> \n> ```\n> [r-3.3.3.p0] making tre-match-backtrack.d from tre-match-backtrack.c\n> [r-3.3.3.p0] regerror.c:25:10: fatal error: 'libintl.h' file not found\n> [r-3.3.3.p0] #include <libintl.h>\n> [r-3.3.3.p0]          ^\n> ```\n> which pops up if `libintl.h` is installed in `/usr/local/include/`.\n> Making a symbolic link to it in `SAGE_LOCAL/include` allows this to proceed.\n> \n> It appears that the corresponding place in the R installation ignores CFLAGS, as\n> passing CFLAGS='-I/usr/local/include' on the command line has no effect.\n> \n> \n> \n\nAs a matter of fact, one needs these `-I/...` added to `CPPFLAGS` as there is some pre-processing happening in the build here.",
    "created_at": "2018-09-14T11:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20523#issuecomment-296386",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@dimpase](#comment%3A122):
> the following is, most probably, an R bug:
> 
> ```
> [r-3.3.3.p0] making tre-match-backtrack.d from tre-match-backtrack.c
> [r-3.3.3.p0] regerror.c:25:10: fatal error: 'libintl.h' file not found
> [r-3.3.3.p0] #include <libintl.h>
> [r-3.3.3.p0]          ^
> ```
> which pops up if `libintl.h` is installed in `/usr/local/include/`.
> Making a symbolic link to it in `SAGE_LOCAL/include` allows this to proceed.
> 
> It appears that the corresponding place in the R installation ignores CFLAGS, as
> passing CFLAGS='-I/usr/local/include' on the command line has no effect.
> 
> 
> 

As a matter of fact, one needs these `-I/...` added to `CPPFLAGS` as there is some pre-processing happening in the build here.
