# Issue 20968: more Hadamard matrices with constant diagonal

archive/issues_020731.json:
```json
{
    "body": "Adding a construction by J.Wallis and A.L.Whiteman (1972).\nThis gives in particular RSHCD(676,1) and RSHCD(900,1), \nand corresponding strongly regular graphs.\n\n**CC:**  @videlec\n\n**Branch/Commit:** [7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/20968\n\n",
    "closed_at": "2016-08-07T20:01:21Z",
    "created_at": "2016-07-07T00:10:56Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "more Hadamard matrices with constant diagonal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20968",
    "user": "https://github.com/dimpase"
}
```
Adding a construction by J.Wallis and A.L.Whiteman (1972).
This gives in particular RSHCD(676,1) and RSHCD(900,1), 
and corresponding strongly regular graphs.

**CC:**  @videlec

**Branch/Commit:** [7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)

**Reviewer:** Vincent Delecroix

**Author:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/20968





---

archive/issue_comments_366938.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616\">324fb16</a></td><td><code>this works, and gives matrices/graphs on 676 and 900 vertices</code></td></tr></table>\n",
    "created_at": "2016-07-07T13:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616">324fb16</a></td><td><code>this works, and gives matrices/graphs on 676 and 900 vertices</code></td></tr></table>




---

archive/issue_comments_366939.json:
```json
{
    "body": "**Changing commit** from \"[d4aafc499fd9ba542055f0f6ec1175604ed44e7e](https://github.com/sagemath/sagetrac-mirror/commit/d4aafc499fd9ba542055f0f6ec1175604ed44e7e)\" to \"[324fb166fe9f21872b25c08e8dd8c3d740efd616](https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616)\".",
    "created_at": "2016-07-07T13:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d4aafc499fd9ba542055f0f6ec1175604ed44e7e](https://github.com/sagemath/sagetrac-mirror/commit/d4aafc499fd9ba542055f0f6ec1175604ed44e7e)" to "[324fb166fe9f21872b25c08e8dd8c3d740efd616](https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616)".



---

archive/issue_comments_366940.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-07-07T13:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366940",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_366941.json:
```json
{
    "body": "<a id='comment:3'></a>\nI wonder whether that small difference family (by Szekeres) here ought to be moved somewhere else.",
    "created_at": "2016-07-07T14:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366941",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
I wonder whether that small difference family (by Szekeres) here ought to be moved somewhere else.



---

archive/issue_comments_366942.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2016-07-07T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366942",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_366943.json:
```json
{
    "body": "<a id='comment:4'></a>\nTo get the squares in a finite field, there is better than\n\n```\nQ = filter(lambda a: a.is_square() and a.is_unit(), F)\n```\nSince you are using containment test later on I would even do\n\n```\nQ = set(a**2 for a in F)\nQ.remove(F.zero())\n```\n\nFor `szekeres_difference_set_pair`, it would be better to have the same variable name in the documentation description and in the function (currently `G` and `Q`).\n\nCould you remove the trailing whitespaces in the whole file?\n\nFor the ` szekeres_difference_set_pair` and `typeI_matrix_difference_set`, why not put it somewhere in `sage.combinat.designs.difference_family`?\n\nYou should add an example in `regular_symmetric_hadamard_matrix_with_constant_diagonal` where your new construction is actually used.",
    "created_at": "2016-07-07T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366943",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
To get the squares in a finite field, there is better than

```
Q = filter(lambda a: a.is_square() and a.is_unit(), F)
```
Since you are using containment test later on I would even do

```
Q = set(a**2 for a in F)
Q.remove(F.zero())
```

For `szekeres_difference_set_pair`, it would be better to have the same variable name in the documentation description and in the function (currently `G` and `Q`).

Could you remove the trailing whitespaces in the whole file?

For the ` szekeres_difference_set_pair` and `typeI_matrix_difference_set`, why not put it somewhere in `sage.combinat.designs.difference_family`?

You should add an example in `regular_symmetric_hadamard_matrix_with_constant_diagonal` where your new construction is actually used.



---

archive/issue_comments_366944.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-07-07T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366944",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_366945.json:
```json
{
    "body": "<a id='comment:8'></a>\n(testing whether an issue with the site is fixed; sorry for the noise)",
    "created_at": "2016-07-08T08:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366945",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
(testing whether an issue with the site is fixed; sorry for the noise)



---

archive/issue_comments_366946.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vdelecroix](#comment%3A4):\n> To get the squares in a finite field, there is better than\n> \n> ```\n> Q = filter(lambda a: a.is_square() and a.is_unit(), F)\n> ```\n> Since you are using containment test later on I would even do\n> \n> ```\n> Q = set(a**2 for a in F)\n> Q.remove(F.zero())\n> ```\n> \n> For `szekeres_difference_set_pair`, it would be better to have the same variable name in the documentation description and in the function (currently `G` and `Q`).\n> \n> Could you remove the trailing whitespaces in the whole file?\n\n\nyes, I'll do all of the above. I can do even better, as I know a generator for the multiplicative group of the field, thus I can list the squares explicitly\nwithout repetition...\n\n> \n> For the ` szekeres_difference_set_pair` and `typeI_matrix_difference_set`, why not put it somewhere in `sage.combinat.designs.difference_family`?\n\n\n`szekeres_difference_set_pair` does not return a group, it merely returns a list of group elements; in this form I don't think it should go there. In fact I do not know how to create, in Sage, a subgroup of the multiplicative group of a field in a natural way. Indeed:\n\n```\nsage: F=GF(27)\nsage: t=F.multiplicative_generator()\nsage: G=GL(1,F)\nsage: t in G\nTrue\nsage: G.subgroup([t^2])\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-58-d1ce805e8ed8> in <module>()\n----> 1 G.subgroup([t**Integer(2)])\n...\nAttributeError: 'sage.rings.finite_rings.element_givaro.FiniteField_givaroElement' object has no attribute 'gap'\n```\nThe problem here is that matrix groups in Sage are done via (lib)GAP, but \nthis is not compatible with the default way of creating GF in Sage. \nI don't see how to overcome this easily - would you mind if I keep it the way it is? \n\n> \n> You should add an example in `regular_symmetric_hadamard_matrix_with_constant_diagonal` where your new construction is actually used.\n\n\nright.",
    "created_at": "2016-07-08T10:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366946",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
Replying to [vdelecroix](#comment%3A4):
> To get the squares in a finite field, there is better than
> 
> ```
> Q = filter(lambda a: a.is_square() and a.is_unit(), F)
> ```
> Since you are using containment test later on I would even do
> 
> ```
> Q = set(a**2 for a in F)
> Q.remove(F.zero())
> ```
> 
> For `szekeres_difference_set_pair`, it would be better to have the same variable name in the documentation description and in the function (currently `G` and `Q`).
> 
> Could you remove the trailing whitespaces in the whole file?


yes, I'll do all of the above. I can do even better, as I know a generator for the multiplicative group of the field, thus I can list the squares explicitly
without repetition...

> 
> For the ` szekeres_difference_set_pair` and `typeI_matrix_difference_set`, why not put it somewhere in `sage.combinat.designs.difference_family`?


`szekeres_difference_set_pair` does not return a group, it merely returns a list of group elements; in this form I don't think it should go there. In fact I do not know how to create, in Sage, a subgroup of the multiplicative group of a field in a natural way. Indeed:

```
sage: F=GF(27)
sage: t=F.multiplicative_generator()
sage: G=GL(1,F)
sage: t in G
True
sage: G.subgroup([t^2])
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-58-d1ce805e8ed8> in <module>()
----> 1 G.subgroup([t**Integer(2)])
...
AttributeError: 'sage.rings.finite_rings.element_givaro.FiniteField_givaroElement' object has no attribute 'gap'
```
The problem here is that matrix groups in Sage are done via (lib)GAP, but 
this is not compatible with the default way of creating GF in Sage. 
I don't see how to overcome this easily - would you mind if I keep it the way it is? 

> 
> You should add an example in `regular_symmetric_hadamard_matrix_with_constant_diagonal` where your new construction is actually used.


right.



---

archive/issue_comments_366947.json:
```json
{
    "body": "**Changing commit** from \"[324fb166fe9f21872b25c08e8dd8c3d740efd616](https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616)\" to \"[ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf](https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf)\".",
    "created_at": "2016-07-08T15:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[324fb166fe9f21872b25c08e8dd8c3d740efd616](https://github.com/sagemath/sagetrac-mirror/commit/324fb166fe9f21872b25c08e8dd8c3d740efd616)" to "[ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf](https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf)".



---

archive/issue_comments_366948.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58c2999304b8f079eac00cac82bc66fb785b8fa1\">58c2999</a></td><td><code>Merge tag '7.3.beta7' into hadaconst</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf\">ed7e1f0</a></td><td><code>sped up squares computation, added example, renamed Q->G, removed EOL spaces</code></td></tr></table>\n",
    "created_at": "2016-07-08T15:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58c2999304b8f079eac00cac82bc66fb785b8fa1">58c2999</a></td><td><code>Merge tag '7.3.beta7' into hadaconst</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf">ed7e1f0</a></td><td><code>sped up squares computation, added example, renamed Q->G, removed EOL spaces</code></td></tr></table>




---

archive/issue_comments_366949.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-07-08T15:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366949",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_366950.json:
```json
{
    "body": "<a id='comment:11'></a>\nthe changes as you suggested and I proposed in the last comment to do.",
    "created_at": "2016-07-08T15:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366950",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
the changes as you suggested and I proposed in the last comment to do.



---

archive/issue_comments_366951.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe following\n\n```\nA = filter(lambda a: a-F.one() in G, G)\n```\nis quadratic time in the size of `G` (because `G` is a list). If it was a Python set then it would be linear in `G`.\n\nNote that a way to return a group together with subsets is to actually translate everything to the Abelian group `Z/(2m+1)Z` via the isomorphism `Z/(2m+1)Z -> G` that maps `i` to `x^i` where `x` is your generator. However, I am not sure it is a good idea.",
    "created_at": "2016-07-08T20:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366951",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
The following

```
A = filter(lambda a: a-F.one() in G, G)
```
is quadratic time in the size of `G` (because `G` is a list). If it was a Python set then it would be linear in `G`.

Note that a way to return a group together with subsets is to actually translate everything to the Abelian group `Z/(2m+1)Z` via the isomorphism `Z/(2m+1)Z -> G` that maps `i` to `x^i` where `x` is your generator. However, I am not sure it is a good idea.



---

archive/issue_comments_366952.json:
```json
{
    "body": "<a id='comment:13'></a>\nFor all the squaring buisness it is much faster to use the **methods** of Sage integers rather than the generic functions `is_square` and `sqrt`\n\n```\nsage: %timeit is_square(n)\n1000000 loops, best of 3: 698 ns per loop\nsage: %timeit n.is_square()\n1000000 loops, best of 3: 139 ns per loop\nsage: %timeit sqrt(n)\n1000000 loops, best of 3: 860 ns per loop\nsage: %timeit n.sqrtrem()\n1000000 loops, best of 3: 172 ns per loop\n```\n(though it does not import much since the time is not spent here anyway)",
    "created_at": "2016-07-08T20:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366952",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
For all the squaring buisness it is much faster to use the **methods** of Sage integers rather than the generic functions `is_square` and `sqrt`

```
sage: %timeit is_square(n)
1000000 loops, best of 3: 698 ns per loop
sage: %timeit n.is_square()
1000000 loops, best of 3: 139 ns per loop
sage: %timeit sqrt(n)
1000000 loops, best of 3: 860 ns per loop
sage: %timeit n.sqrtrem()
1000000 loops, best of 3: 172 ns per loop
```
(though it does not import much since the time is not spent here anyway)



---

archive/issue_comments_366953.json:
```json
{
    "body": "<a id='comment:14'></a>\nWhy this\n\n```\ntry:\n    m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)\nexcept ValueError:\n    raise\n```\nand not simply\n\n```\nm = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)\n```",
    "created_at": "2016-07-08T20:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366953",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>
Why this

```
try:
    m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)
except ValueError:
    raise
```
and not simply

```
m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)
```



---

archive/issue_comments_366954.json:
```json
{
    "body": "<a id='comment:15'></a>\nNote that for generating the squares you have a possible shortcut\n\n```\nsage: K = GF(19)\nsage: K.cyclotomic_cosets(K.multiplicative_generator()^2, cosets=[K.one()])\n[[1, 4, 5, 6, 7, 9, 11, 16, 17]]\n```\n(this function is used *a lot* in the code for difference families)",
    "created_at": "2016-07-08T20:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366954",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Note that for generating the squares you have a possible shortcut

```
sage: K = GF(19)
sage: K.cyclotomic_cosets(K.multiplicative_generator()^2, cosets=[K.one()])
[[1, 4, 5, 6, 7, 9, 11, 16, 17]]
```
(this function is used *a lot* in the code for difference families)



---

archive/issue_comments_366955.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A14):\n> Why this\n> \n> ```\n> try:\n>     m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)\n> except ValueError:\n>     raise\n> ```\n> and not simply\n> \n> ```\n> m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)\n> ```\n\n\nActually, it is `return` there, not `raise`. So this makes sense as it is.",
    "created_at": "2016-07-08T20:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366955",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A14):
> Why this
> 
> ```
> try:
>     m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)
> except ValueError:
>     raise
> ```
> and not simply
> 
> ```
> m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)
> ```


Actually, it is `return` there, not `raise`. So this makes sense as it is.



---

archive/issue_comments_366956.json:
```json
{
    "body": "<a id='comment:17'></a>\nFor python 3 compatibility, please use exact division `//` whenever possible.\n\n```\nm = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)\n```",
    "created_at": "2016-07-09T11:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366956",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
For python 3 compatibility, please use exact division `//` whenever possible.

```
m = srg(n-1,(n-2)/2,(n-6)/4,(n-2)/4)
```



---

archive/issue_comments_366957.json:
```json
{
    "body": "**Changing commit** from \"[ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf](https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf)\" to \"[a31ef91d77362c0c51951bfb652c3f935bd22607](https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607)\".",
    "created_at": "2016-07-09T15:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf](https://github.com/sagemath/sagetrac-mirror/commit/ed7e1f08f203c608c55ddf6fdb84c4f49705bfaf)" to "[a31ef91d77362c0c51951bfb652c3f935bd22607](https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607)".



---

archive/issue_comments_366958.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607\">a31ef91</a></td><td><code>use cyclotomic_cosets(), set(), and // instead of /</code></td></tr></table>\n",
    "created_at": "2016-07-09T15:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607">a31ef91</a></td><td><code>use cyclotomic_cosets(), set(), and // instead of /</code></td></tr></table>




---

archive/issue_comments_366959.json:
```json
{
    "body": "<a id='comment:19'></a>\nready for another round.",
    "created_at": "2016-07-09T15:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366959",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
ready for another round.



---

archive/issue_comments_366960.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-07-25T01:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366960",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_366961.json:
```json
{
    "body": "<a id='comment:20'></a>\ntypo `coneference` should be `conference`\n\nThis is not a sentence <code>Thus \\`C\\` we build ...</code>\n\nThe docstring of `typeI_matrix_difference_set` ends with {\"\"\"} without indentation.",
    "created_at": "2016-07-25T01:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366961",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'></a>
typo `coneference` should be `conference`

This is not a sentence <code>Thus \`C\` we build ...</code>

The docstring of `typeI_matrix_difference_set` ends with {"""} without indentation.



---

archive/issue_comments_366962.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bd03a9f55376450ff51953ed58811bb4b928d7e\">4bd03a9</a></td><td><code>Merge branch 'hadaconst' into rshcdbis</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222\">7509fc0</a></td><td><code>typos fixed</code></td></tr></table>\n",
    "created_at": "2016-07-26T12:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bd03a9f55376450ff51953ed58811bb4b928d7e">4bd03a9</a></td><td><code>Merge branch 'hadaconst' into rshcdbis</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222">7509fc0</a></td><td><code>typos fixed</code></td></tr></table>




---

archive/issue_comments_366963.json:
```json
{
    "body": "**Changing commit** from \"[a31ef91d77362c0c51951bfb652c3f935bd22607](https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607)\" to \"[7509fc0d47d720064a6a36dad342adee033a9222](https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222)\".",
    "created_at": "2016-07-26T12:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a31ef91d77362c0c51951bfb652c3f935bd22607](https://github.com/sagemath/sagetrac-mirror/commit/a31ef91d77362c0c51951bfb652c3f935bd22607)" to "[7509fc0d47d720064a6a36dad342adee033a9222](https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222)".



---

archive/issue_comments_366964.json:
```json
{
    "body": "<a id='comment:22'></a>\nOK, thanks, fixed these typos.",
    "created_at": "2016-07-26T12:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366964",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
OK, thanks, fixed these typos.



---

archive/issue_comments_366965.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-07-26T12:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366965",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_366966.json:
```json
{
    "body": "<a id='comment:23'></a>\nAssuming `is_square(n)` is `True`, checking `sqrt(n) % 4 == 2` is equivalent to `n % 8 in (2,6)`. That makes it a cheaper test (possibly to put *before* the square test).",
    "created_at": "2016-07-26T21:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366966",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Assuming `is_square(n)` is `True`, checking `sqrt(n) % 4 == 2` is equivalent to `n % 8 in (2,6)`. That makes it a cheaper test (possibly to put *before* the square test).



---

archive/issue_comments_366967.json:
```json
{
    "body": "<a id='comment:24'></a>\nIn `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.",
    "created_at": "2016-07-26T21:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366967",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
In `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.



---

archive/issue_comments_366968.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [vdelecroix](#comment%3A24):\n> In `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.\n\n\nit is actually even more than that; A has to be skew-symmetric and B has to be \nsymmetric (in terms of their  \"typeI matrices\"). But this, as well as the above, is\ntested indirectly, by building the corresponding Hadamard matrix.",
    "created_at": "2016-07-27T00:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366968",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
Replying to [vdelecroix](#comment%3A24):
> In `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.


it is actually even more than that; A has to be skew-symmetric and B has to be 
symmetric (in terms of their  "typeI matrices"). But this, as well as the above, is
tested indirectly, by building the corresponding Hadamard matrix.



---

archive/issue_comments_366969.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [dimpase](#comment%3A25):\n> Replying to [vdelecroix](#comment%3A24):\n> > In `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.\n\n> \n> it is actually even more than that; A has to be skew-symmetric and B has to be \n> symmetric (in terms of their  \"typeI matrices\"). But this, as well as the above, is\n> tested indirectly, by building the corresponding Hadamard matrix.\n> \n\nThese sets are not difference sets in the [classical sense](https://en.wikipedia.org/wiki/Difference_set). Indeed, \n\n```\nsage: szekeres_difference_set_pair(2)\n([1, 3, 4, 5, 9], [4, 5], [3, 4])\n```\nThat is you have v=5, k=2, and the standard equation k<sup>2</sup>-k=(v-1)l on the parameters (v,k,l) of a difference set implies l=1/2, which just cannot happen.\n\nWhat we have here is a difference family, with s=2, so you have s(k<sup>2</sup>-k)=(v-1)l, ie\n[the parameters of the family](https://en.wikipedia.org/wiki/Difference_set#Generalisations) are (v,k,l,s)=(2m+1,m,1,2). Note that in `designs.difference_family` the parameter s is not explicit (but can be computed as (v-1)l/(k<sup>2</sup>-k)).",
    "created_at": "2016-07-27T14:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366969",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
Replying to [dimpase](#comment%3A25):
> Replying to [vdelecroix](#comment%3A24):
> > In `szekeres_difference_set_pair` it would be better to actually check that the output is what you want. In other words check that `A` and `B` are difference sets and that there are complementary.

> 
> it is actually even more than that; A has to be skew-symmetric and B has to be 
> symmetric (in terms of their  "typeI matrices"). But this, as well as the above, is
> tested indirectly, by building the corresponding Hadamard matrix.
> 

These sets are not difference sets in the [classical sense](https://en.wikipedia.org/wiki/Difference_set). Indeed, 

```
sage: szekeres_difference_set_pair(2)
([1, 3, 4, 5, 9], [4, 5], [3, 4])
```
That is you have v=5, k=2, and the standard equation k<sup>2</sup>-k=(v-1)l on the parameters (v,k,l) of a difference set implies l=1/2, which just cannot happen.

What we have here is a difference family, with s=2, so you have s(k<sup>2</sup>-k)=(v-1)l, ie
[the parameters of the family](https://en.wikipedia.org/wiki/Difference_set#Generalisations) are (v,k,l,s)=(2m+1,m,1,2). Note that in `designs.difference_family` the parameter s is not explicit (but can be computed as (v-1)l/(k<sup>2</sup>-k)).



---

archive/issue_comments_366970.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-07-27T19:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366970",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_366971.json:
```json
{
    "body": "<a id='comment:27'></a>\nAll right. Let it go as it is now!",
    "created_at": "2016-07-27T19:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366971",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
All right. Let it go as it is now!



---

archive/issue_comments_366972.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b57ef186da456baf72287fa96fe6ac5f7ded0d96\">b57ef18</a></td><td><code>szekeres difference family checking</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8\">68ba282</a></td><td><code>compute sqrt(n) at most once</code></td></tr></table>\n",
    "created_at": "2016-07-27T19:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b57ef186da456baf72287fa96fe6ac5f7ded0d96">b57ef18</a></td><td><code>szekeres difference family checking</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8">68ba282</a></td><td><code>compute sqrt(n) at most once</code></td></tr></table>




---

archive/issue_comments_366973.json:
```json
{
    "body": "**Changing status** from positive_review to needs_review.",
    "created_at": "2016-07-27T19:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing status** from positive_review to needs_review.



---

archive/issue_comments_366974.json:
```json
{
    "body": "**Changing commit** from \"[7509fc0d47d720064a6a36dad342adee033a9222](https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222)\" to \"[68ba28264d2fea4a8d9f22676deb02000e7d12c8](https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8)\".",
    "created_at": "2016-07-27T19:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7509fc0d47d720064a6a36dad342adee033a9222](https://github.com/sagemath/sagetrac-mirror/commit/7509fc0d47d720064a6a36dad342adee033a9222)" to "[68ba28264d2fea4a8d9f22676deb02000e7d12c8](https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8)".



---

archive/issue_comments_366975.json:
```json
{
    "body": "<a id='comment:29'></a>\noops, I was just at it... Could you have a quick look again?\nThanks!",
    "created_at": "2016-07-27T19:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366975",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
oops, I was just at it... Could you have a quick look again?
Thanks!



---

archive/issue_comments_366976.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b\">7a0b905</a></td><td><code>doc typos fix</code></td></tr></table>\n",
    "created_at": "2016-07-27T20:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b">7a0b905</a></td><td><code>doc typos fix</code></td></tr></table>




---

archive/issue_comments_366977.json:
```json
{
    "body": "**Changing commit** from \"[68ba28264d2fea4a8d9f22676deb02000e7d12c8](https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8)\" to \"[7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)\".",
    "created_at": "2016-07-27T20:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[68ba28264d2fea4a8d9f22676deb02000e7d12c8](https://github.com/sagemath/sagetrac-mirror/commit/68ba28264d2fea4a8d9f22676deb02000e7d12c8)" to "[7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)".



---

archive/issue_comments_366978.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-07-30T02:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366978",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_366979.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/hadaconst](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/hadaconst)\" to \"[7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)\".",
    "created_at": "2016-08-07T20:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20968#issuecomment-366979",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/hadaconst](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/hadaconst)" to "[7a0b905ed35bf7d68ffae71f868de4a394dab44b](https://github.com/sagemath/sagetrac-mirror/commit/7a0b905ed35bf7d68ffae71f868de4a394dab44b)".



---

archive/issue_events_063404.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:01:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20968",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20968#event-63404"
}
```
