# Issue 20656: MixedIntegerLinearProgram: Remove _variables dictionary

archive/issues_020419.json:
```json
{
    "body": "The '_variables' attribute dictionary maps a \"variable\" (an \"element\" of a `MIPVariable` \"dictionary\") to an index in the backend. This is redundant because these \"variables\" are elements of type `LinearFunction`, and as such know their index in the backend already.\n\n```\nsage: p = MixedIntegerLinearProgram(solver='GLPK')\nsage: pv = p.new_variable(nonnegative=True)\nsage: pv[0]\nx_0\nsage: pv[77]\nx_1\nsage: pv[0].dict().keys()\n[0]\nsage: pv[77].dict().keys()\n[1]\n```\n\nSee also: #20461, #20602\n\nCC:  @nbruin @dimpase @videlec @jdemeyer @fchapoton @yuan-zhou\n\nKeywords: lp\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/mixedintegerlinearprogram__remove__variables_dictionary\n\nStatus: needs_info\n\nDependencies: #20461, #20462\n\nCommit: be0e0f0584e9cf78dc10f5a41917e760fc18139e\n\nIssue created by migration from https://trac.sagemath.org/ticket/20656\n\n",
    "created_at": "2016-05-23T09:38:12Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "MixedIntegerLinearProgram: Remove _variables dictionary",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20656",
    "user": "https://github.com/mkoeppe"
}
```
The '_variables' attribute dictionary maps a "variable" (an "element" of a `MIPVariable` "dictionary") to an index in the backend. This is redundant because these "variables" are elements of type `LinearFunction`, and as such know their index in the backend already.

```
sage: p = MixedIntegerLinearProgram(solver='GLPK')
sage: pv = p.new_variable(nonnegative=True)
sage: pv[0]
x_0
sage: pv[77]
x_1
sage: pv[0].dict().keys()
[0]
sage: pv[77].dict().keys()
[1]
```

See also: #20461, #20602

CC:  @nbruin @dimpase @videlec @jdemeyer @fchapoton @yuan-zhou

Keywords: lp

Author: Matthias Koeppe

Branch: u/mkoeppe/mixedintegerlinearprogram__remove__variables_dictionary

Status: needs_info

Dependencies: #20461, #20462

Commit: be0e0f0584e9cf78dc10f5a41917e760fc18139e

Issue created by migration from https://trac.sagemath.org/ticket/20656





---

archive/issue_comments_370602.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/mixedintegerlinearprogram__remove__variables_dictionary\"",
    "created_at": "2016-06-27T03:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370602",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/mixedintegerlinearprogram__remove__variables_dictionary"



---

archive/issue_comments_370603.json:
```json
{
    "body": "Changing commit from \"\" to \"b7906ffd31c2007d81cb556d23b8b814d2faaebb\"",
    "created_at": "2016-06-27T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370603",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "b7906ffd31c2007d81cb556d23b8b814d2faaebb"



---

archive/issue_comments_370604.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2016-06-27T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370604",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_370605.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[ca1298b](https://github.com/sagemath/sagetrac-mirror/commit/ca1298b4ec78844b4f5488978ef6e09e76af8ad1)|`MixedIntegerLinearProgram._linear_variable_index: New`|\n|[b7906ff](https://github.com/sagemath/sagetrac-mirror/commit/b7906ffd31c2007d81cb556d23b8b814d2faaebb)|`MixedIntegerLinearProgram: Remove _variables`|",
    "created_at": "2016-06-27T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370605",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[ca1298b](https://github.com/sagemath/sagetrac-mirror/commit/ca1298b4ec78844b4f5488978ef6e09e76af8ad1)|`MixedIntegerLinearProgram._linear_variable_index: New`|
|[b7906ff](https://github.com/sagemath/sagetrac-mirror/commit/b7906ffd31c2007d81cb556d23b8b814d2faaebb)|`MixedIntegerLinearProgram: Remove _variables`|



---

archive/issue_comments_370606.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-27T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370606",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370607.json:
```json
{
    "body": "<a id='comment:3'></a>\nNeeds a rebase. However, I'm worried this could cause a speed regression as a `dict` lookup is a system python call whereas you are now doing a number of python function calls. Also storing a (relatively?) small `dict` doesn't cost much memory I would think.",
    "created_at": "2017-04-24T18:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370607",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Needs a rebase. However, I'm worried this could cause a speed regression as a `dict` lookup is a system python call whereas you are now doing a number of python function calls. Also storing a (relatively?) small `dict` doesn't cost much memory I would think.



---

archive/issue_comments_370608.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-04-24T18:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370608",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_370609.json:
```json
{
    "body": "<a id='comment:4'></a>\nI haven't done any timings regarding this patch.",
    "created_at": "2017-04-28T00:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370609",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I haven't done any timings regarding this patch.



---

archive/issue_events_071030.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-28T17:55:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71030"
}
```



---

archive/issue_comments_370610.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[fe2a85f](https://github.com/sagemath/sagetrac-mirror/commit/fe2a85fd9869079fe93f6a6053f98205e9548d4a)|`MixedIntegerLinearProgram._linear_variable_index: New`|\n|[be0e0f0](https://github.com/sagemath/sagetrac-mirror/commit/be0e0f0584e9cf78dc10f5a41917e760fc18139e)|`MixedIntegerLinearProgram: Remove _variables`|",
    "created_at": "2021-04-29T03:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[fe2a85f](https://github.com/sagemath/sagetrac-mirror/commit/fe2a85fd9869079fe93f6a6053f98205e9548d4a)|`MixedIntegerLinearProgram._linear_variable_index: New`|
|[be0e0f0](https://github.com/sagemath/sagetrac-mirror/commit/be0e0f0584e9cf78dc10f5a41917e760fc18139e)|`MixedIntegerLinearProgram: Remove _variables`|



---

archive/issue_comments_370611.json:
```json
{
    "body": "Changing commit from \"b7906ffd31c2007d81cb556d23b8b814d2faaebb\" to \"be0e0f0584e9cf78dc10f5a41917e760fc18139e\"",
    "created_at": "2021-04-29T03:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b7906ffd31c2007d81cb556d23b8b814d2faaebb" to "be0e0f0584e9cf78dc10f5a41917e760fc18139e"



---

archive/issue_comments_370612.json:
```json
{
    "body": "<a id='comment:7'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20656#issuecomment-370612",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_071031.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71031"
}
```



---

archive/issue_events_071032.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71032"
}
```



---

archive/issue_events_071033.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71033"
}
```



---

archive/issue_events_071034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71034"
}
```



---

archive/issue_events_071035.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71035"
}
```



---

archive/issue_events_071036.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71036"
}
```



---

archive/issue_events_071037.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71037"
}
```



---

archive/issue_events_071038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20656",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20656#event-71038"
}
```
