# Issue 34118: avoid constructing list of all base-field elements in QuaternionAlgebra_ab.modp_splitting_data()

Issue created by migration from https://trac.sagemath.org/ticket/34355

Original creator: lorenz

Original creation time: 2022-08-13 14:40:13

CC:  slelievre tscrim

This patch is from RÃ©my Oudompheng:


```patch
diff --git a/src/sage/algebras/quatalg/quaternion_algebra.py b/src/sage/algebras/quatalg/quaternion_algebra.py
index 3bde7b2153..3e12785e14 100644
--- a/src/sage/algebras/quatalg/quaternion_algebra.py
+++ b/src/sage/algebras/quatalg/quaternion_algebra.py
@@ -1232,7 +1232,7 @@ class QuaternionAlgebra_ab(QuaternionAlgebra_abstract):
             raise NotImplementedError("algorithm for computing local splittings not implemented in general (currently require the first invariant to be coprime to p)")
         i2inv = ~i2
         a = None
-        for b in list(F):
+        for b in F:
             if not b:
                 continue
             c = j2 + i2inv * b*b
```


Obviously, constructing a list of all elements is a very bad idea for non-tiny base fields.


---

Comment by lorenz created at 2022-08-13 14:44:00

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-08-15 00:46:35

Indeed, indeed. LGTM.


---

Comment by tscrim created at 2022-08-15 00:46:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-08-30 06:51:17

Resolution: fixed
