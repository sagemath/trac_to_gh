# Issue 31792: Action of a sympy TensorSymmetry

Issue created by migration from https://trac.sagemath.org/ticket/32029

Original creator: mkoeppe

Original creation time: 2021-06-22 03:34:06

CC:  tscrim egourgoulhon dimpase @honglizhaobob @spaghettisalat

SymPy's `TensorSymmetry` (https://docs.sympy.org/latest/modules/tensor/tensor.html) uses a trick to represent tensor symmetries and antisymmetries as permutation groups: Two extra elements (in the example below, 3 and 4) keep track of the sign

```
sage: TensorSymmetry.fully_symmetric(3)                                                                                               
TensorSymmetry((0, 1), ((4)(0 1), (4)(1 2)))
sage: TensorSymmetry.fully_symmetric(-3)    # fully antisymmetric 3 indices                                                                                      
TensorSymmetry((0, 1), ((0 1)(3 4), (1 2)(3 4)))
```

The 2-cycle (3 4) represents the antisymmetry. What is displayed there is the "base and strong generating system".

This trick can of course be generalized to Mathematica's "phased permutation groups" (#30276) by using longer cycles.

We define a class `TensorSymmetryGroup`
- which can be initialized from `sage.tensor` `sym` and `antisym` lists
- can convert to/from `sympy.tensor.tensor.TensorSymmetry`
- defines `_get_action_` for acting on tensor modules


---

Comment by mkoeppe created at 2021-06-22 03:49:24

I'm thinking of putting this in `sage.groups.tensor.monoterm_symmetry`


---

Comment by dimpase created at 2021-06-22 09:49:25

the symmetry group there is an arbitrary permutation group, no? So sympy has an algorithm to find the autmorphism group of a weighted hypergraph?
----
New commits:


---

Comment by mkoeppe created at 2021-06-22 14:28:29

Replying to [comment:5 dimpase]:
> the symmetry group there is an arbitrary permutation group, no? So sympy has an algorithm to find the autmorphism group of a weighted hypergraph?

The automorphism group is the input, not the output. This code is for defining spaces of tensors with prescribed symmetries.


---

Comment by dimpase created at 2021-06-22 14:36:35

Your input is a bunch of permutations, not a group. Why do you force the user to figure them out?

I'd rather see it as a group, and yes, it's perfectly possible in Sage to compute a strong generating set and a base, given a permutation group.
E.g. one can use the corresponding GAP [functionality](https://www.gap-system.org/Manuals/doc/ref/chap43.html#X7C7EA55C80E457FA) via libgap.


---

Comment by mkoeppe created at 2021-06-22 14:50:51

Replying to [comment:7 dimpase]:
> Your input is a bunch of permutations, not a group. Why do you force the user to figure them out?

Sorry, what are you referring to?

The example lines on the ticket description using SymPy show the output of SymPy's `TensorSymmetry` constructor, which happens to show the BSGS.

In the branch attached here, the input is a symmetry specification in the style of `sage.tensor`.


---

Comment by dimpase created at 2021-06-22 15:00:02

All I can see is an example with `sym=(1, 2)` - it's totally unclear what kind of input is expected, due to lack of any documentation.


---

Comment by mkoeppe created at 2021-06-22 15:12:51

OK. I will adapt documentation `from sage.tensor.modules.comp`, where this input is documented.


---

Comment by git created at 2021-06-22 15:20:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2021-06-22 16:33:54


```
+        * ``sym = [(0,2), (1,3,4)]`` for a symmetry between the 1st and 3rd
+          indices and a symmetry between the 2nd, 4th and 5th indices.
```

is ambiguous. E.g. `sym = [(0,2), (1,3)]` might either mean one order 2 symmetry (i.e. group of symmetries of order 2), or
a list of generators for a group of order 4.
In the former can one should say something like ``a symmetry which acts as a permutation `(13)(24)`. In the latter, say they generate a group...
