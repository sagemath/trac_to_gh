# Issue 2059: bug in polybori -- lexLmDeg -- no such attribute

Issue created by migration from Trac.

Original creator: was

Original creation time: 2008-02-05 17:11:53

Assignee: malb

CC:  burcin

Hi,

I finally decided to play with PolyBoRi and found a bug in the Sage wrapper of it in about 20 seconds flat.  See below.  This is 


```
sage: B.<x,y,z> = BooleanPolynomialRing(3)
sage: B.ideal([x,y])
Ideal (x, y) of Boolean PolynomialRing in x, y, z
sage: B.ideal([x,y])^3
Ideal (x, x*y, x*y, x*y, x*y, x*y, x*y, y) of Boolean PolynomialRing in x, y, z
sage: B.ideal([x,y])^20
---------------------------------------------------------------------------
<type 'exceptions.AttributeError'>        Traceback (most recent call last)

/Users/was/<ipython console> in <module>()

/Users/was/element.pyx in sage.structure.element.MonoidElement.__pow__()

/Users/was/element.pyx in sage.structure.element.generic_power_c()

/Users/was/element.pyx in sage.structure.element.Element.__richcmp__()

/Users/was/element.pyx in sage.structure.element.Element._richcmp()

/Users/was/s/local/lib/python2.5/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py in __cmp__(self, other)
    235         #    return c
    236         l = self.groebner_basis()
--> 237         r = other.groebner_basis()
    238         return cmp(r,l)
    239 

/Users/was/pbori.pyx in sage.rings.polynomial.pbori.BooleanPolynomialIdeal.groebner_basis()

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in __call__(self, *args, **kwds)
    134         if heuristic:
    135             complete_dict=self.heuristicFunction(complete_dict)
--> 136         return self.f(**complete_dict)
    137     def __init__(self,f,heuristic_function):
    138         

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in wrapper(I, **kwds)
    184                        (I,state)=pre(I,option_set)
    185                
--> 186             res=f(I,**kwds)
    187             if option_set:
    188                 if post:

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in wrapper(I, **kwds)
    184                        (I,state)=pre(I,option_set)
    185                
--> 186             res=f(I,**kwds)
    187             if option_set:
    188                 if post:

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in wrapper(I, **kwds)
    184                        (I,state)=pre(I,option_set)
    185                
--> 186             res=f(I,**kwds)
    187             if option_set:
    188                 if post:

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in wrapper(I, **kwds)
    180                        print "preprocessing for option:", option
    181                    if not pass_option_set:
--> 182                        (I,state)=pre(I)
    183                    else:
    184                        (I,state)=pre(I,option_set)

/Users/was/s/local/share/polybori/pyroot/polybori/gbcore.py in llfirst_pre(I)
    216     
    217 def llfirst_pre(I):
--> 218     (eliminated,llnf, I)=eliminate(I,on_the_fly=False)
    219     return (I,eliminated)
    220 

/Users/was/s/local/share/polybori/pyroot/polybori/ll.py in eliminate(polys, on_the_fly)
     69       reductors=ll_encode(linear_leads)
     70   else:
---> 71       reductors=llredsb_Cudd_style(linear_leads)
     72       reductors=BooleSet(reductors.set())
     73   if on_the_fly:

/Users/was/s/local/share/polybori/pyroot/polybori/ll.py in llredsb_Cudd_style(polys)
      9   assert len(set([p.lexLead() for p in linear_lead]))==len(polys)
     10   assert len([p for p in polys if p.constant()])==0
---> 11   assert len([p for p in polys if p.lexLmDeg()==1])==len(polys)
     12   assert len(set([p.navigation().value() for p in polys]))==len(polys)
     13   counter=0

<type 'exceptions.AttributeError'>: 'sage.rings.polynomial.pbori.BooleanPolynomial' object has no attribute 'lexLmDeg'

```



---

Attachment

this fixes the attribute error but is not enough to make the calculation given above work


---

Comment by malb created at 2008-02-05 17:27:04

The attached patch `trac_2059_1.patch` fixes the attribute error, however now:


```
sage:  sage: B.<x,y,z> = BooleanPolynomialRing(3)
sage:  sage: B.ideal([x,y])
Ideal (x, y) of Boolean PolynomialRing in x, y, z
sage:  sage: B.ideal([x,y])^3
Ideal (x, x*y, x*y, x*y, x*y, x*y, x*y, y) of Boolean PolynomialRing in x, y, z
sage:  B.ideal([x,y])^20
...
<type 'exceptions.AttributeError'>: 'list' object has no attribute 'minimalizeAndTailReduce'
```


Burcin, any idea?


---

Comment by burcin created at 2008-02-06 11:06:29

The problem seen after applying attachment:trac_2059_1.patch is a bug in `PolyBoRi` itself. Trying to compute the Groebner basis of an ideal generated by [x,y] causes the heuristic function to blow up with the same problem in the ipython shell that comes with `PolyBoRi.` I will report this upstream.


---

Comment by burcin created at 2008-02-06 11:06:29

Changing assignee from malb to burcin.


---

Comment by burcin created at 2008-02-06 11:06:29

Changing status from new to assigned.


---

Comment by malb created at 2008-04-07 13:15:38

This seems to be fixed in PolyBoRi 0.3.1:

```
sage: B.<x,y,z> = BooleanPolynomialRing(3)
sage: B.ideal([x,y])
Ideal (x, y) of Boolean PolynomialRing in x, y, z
sage: B.ideal([x,y])^3
Ideal (x, x*y, x*y, x*y, x*y, x*y, x*y, y) of Boolean PolynomialRing in x, y, z
sage: B.ideal([x,y])^20
Ideal (x, y) of Boolean PolynomialRing in x, y, z
```



---

Comment by mabshoff created at 2008-04-07 13:41:58

Resolution: fixed


---

Comment by mabshoff created at 2008-04-07 13:41:58

Closed on recommendation of malb.
