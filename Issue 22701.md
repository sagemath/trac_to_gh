# Issue 22701: Polytopes normaliz backend doesn't handle a polytope with a trivial integral hull

Issue created by migration from https://trac.sagemath.org/ticket/22938

Original creator: tscrim

Original creation time: 2017-05-03 15:42:54

CC:  mkoeppe

Here is an example that is not handled properly:

```
sage: ieqs = [[1, 2, -1, 0], [0, -1, 2, -1], [0, 0, -1, 2], [0, -1, 0, 0], [0, 0, -1, 0], 
....: [0, 0, 0, -1], [-1, -1, -1, -1], [1, 1, 0, 0], [1, 0, 1, 0], [1, 0, 0, 1]]
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz')
sage: P.bounding_box()
((-3/4, -1/2, -1/4), (-1/2, -1/4, 0))
sage: P.bounding_box(integral_hull=True)
(None, None)
sage: P.integral_points()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-17-2abbf2adff15> in <module>()
----> 1 P.integral_points()

/home/travis/sage-build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/backend_normaliz.pyc in integral_points(self, threshold)
    568         if threshold > 1:
    569             box_min, box_max = self.bounding_box(integral_hull=True)
--> 570             box_points = prod(max_coord-min_coord+1 for min_coord, max_coord in zip(box_min, box_max))
    571             if  box_points<threshold:
    572                 from sage.geometry.integral_points import rectangular_box_points

TypeError: zip argument #1 must support iteration
```



---

Comment by tscrim created at 2017-05-03 15:49:20

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-05-03 15:49:20

New commits:


---

Comment by mkoeppe created at 2017-05-03 19:05:42

Thanks for fixing this.


---

Comment by mkoeppe created at 2017-05-03 19:05:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-08 21:18:40

Resolution: fixed
