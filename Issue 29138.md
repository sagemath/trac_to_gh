# Issue 29138: Clean up some _element_constructor_() methods

archive/issues_029138.json:
```json
{
    "body": "CC:  @tscrim\n\nThe coercion framework never calls `_element_constructor_()` methods without optional or keyword arguments on an input that is already in the correct parent.  This ticket removes some unnecessary checks for this case.\n\nI checked that (the branches of) the `if` statements removed by this ticket are never called by temporarily inserting `assert` statements.  In some other cases, I added doctests showing that the respective `if` statements cannot be removed (because the `_element_constructor_()` method has a optional or keyword arguments).\n\nThe deleted code in `multi_polynomial_libsingular` is no longer needed because these cases are handled by coercion maps from/via the base ring since #29247.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29375\n\n",
    "created_at": "2020-03-20T07:51:15Z",
    "labels": [
        "component: coercion",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Clean up some _element_constructor_() methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29138",
    "user": "https://github.com/pjbruin"
}
```
CC:  @tscrim

The coercion framework never calls `_element_constructor_()` methods without optional or keyword arguments on an input that is already in the correct parent.  This ticket removes some unnecessary checks for this case.

I checked that (the branches of) the `if` statements removed by this ticket are never called by temporarily inserting `assert` statements.  In some other cases, I added doctests showing that the respective `if` statements cannot be removed (because the `_element_constructor_()` method has a optional or keyword arguments).

The deleted code in `multi_polynomial_libsingular` is no longer needed because these cases are handled by coercion maps from/via the base ring since #29247.

Issue created by migration from https://trac.sagemath.org/ticket/29375





---

archive/issue_comments_412104.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-20T07:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412104",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412105.json:
```json
{
    "body": "would you please fix the pyflakes warning from patchbot report ?",
    "created_at": "2020-03-20T11:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412105",
    "user": "https://github.com/fchapoton"
}
```

would you please fix the pyflakes warning from patchbot report ?



---

archive/issue_comments_412106.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-20T12:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412107.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> would you please fix the pyflakes warning from patchbot report ?\nDone, thanks.",
    "created_at": "2020-03-20T12:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412107",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:2 chapoton]:
> would you please fix the pyflakes warning from patchbot report ?
Done, thanks.



---

archive/issue_comments_412108.json:
```json
{
    "body": "looks good to me, and the bot is fully green.\n\nMaybe Travis, who knows better the coercion framework, could give his word ?",
    "created_at": "2020-03-20T13:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412108",
    "user": "https://github.com/fchapoton"
}
```

looks good to me, and the bot is fully green.

Maybe Travis, who knows better the coercion framework, could give his word ?



---

archive/issue_comments_412109.json:
```json
{
    "body": "Replying to [comment:5 chapoton]:\n> Maybe Travis, who knows better the coercion framework, could give his word ?\n\nYes, what is in the ticket description is correct (it is faster to do it there because it is Cython too). So +1 for doing this.",
    "created_at": "2020-03-20T21:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412109",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:5 chapoton]:
> Maybe Travis, who knows better the coercion framework, could give his word ?

Yes, what is in the ticket description is correct (it is faster to do it there because it is Cython too). So +1 for doing this.



---

archive/issue_comments_412110.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412110",
    "user": "https://github.com/fchapoton"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_412111.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412111",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412112.json:
```json
{
    "body": "ok, then let it be.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412112",
    "user": "https://github.com/fchapoton"
}
```

ok, then let it be.



---

archive/issue_events_026929.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29138#event-26929"
}
```



---

archive/issue_comments_412113.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-25T22:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29138#issuecomment-412113",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
