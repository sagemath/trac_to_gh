# Issue 29138: Clean up some _element_constructor_() methods

Issue created by migration from https://trac.sagemath.org/ticket/29375

Original creator: pbruin

Original creation time: 2020-03-20 07:51:15

CC:  tscrim

The coercion framework never calls `_element_constructor_()` methods without optional or keyword arguments on an input that is already in the correct parent.  This ticket removes some unnecessary checks for this case.

I checked that (the branches of) the `if` statements removed by this ticket are never called by temporarily inserting `assert` statements.  In some other cases, I added doctests showing that the respective `if` statements cannot be removed (because the `_element_constructor_()` method has a optional or keyword arguments).

The deleted code in `multi_polynomial_libsingular` is no longer needed because these cases are handled by coercion maps from/via the base ring since #29247.


---

Comment by pbruin created at 2020-03-20 07:53:07

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-03-20 11:16:53

would you please fix the pyflakes warning from patchbot report ?


---

Comment by git created at 2020-03-20 12:19:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2020-03-20 12:20:14

Replying to [comment:2 chapoton]:
> would you please fix the pyflakes warning from patchbot report ?
Done, thanks.


---

Comment by chapoton created at 2020-03-20 13:26:42

looks good to me, and the bot is fully green.

Maybe Travis, who knows better the coercion framework, could give his word ?


---

Comment by tscrim created at 2020-03-20 21:36:02

Replying to [comment:5 chapoton]:
> Maybe Travis, who knows better the coercion framework, could give his word ?

Yes, what is in the ticket description is correct (it is faster to do it there because it is Cython too). So +1 for doing this.


---

Comment by chapoton created at 2020-03-21 07:40:37

Changing type from task to enhancement.


---

Comment by chapoton created at 2020-03-21 07:40:37

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-03-21 07:40:37

ok, then let it be.


---

Comment by chapoton created at 2020-03-21 07:40:37

Changing priority from minor to major.


---

Comment by vbraun created at 2020-03-25 22:48:33

Resolution: fixed
