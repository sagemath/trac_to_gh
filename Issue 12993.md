# Issue 12993: Error multiplying modular forms of level Gamma1

Issue created by migration from https://trac.sagemath.org/ticket/13165

Original creator: davidloeffler

Original creation time: 2012-06-26 08:52:53

Assignee: craigcitro

The following was reported by Nadim Restom on sage-support [here](https://groups.google.com/forum/?fromgroups#!topic/sage-support/c-wjnYxAcn8):

```
f = ModularForms(Gamma1(5),2).0
f*f

I am getting an error:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_5.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("Zipm"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/tmp/tmp9a_pAs/___code___.py", line 2, in <module>
    exec compile(u'f*f
  File "", line 1, in <module>
    
  File "/sagenb/sage_install/sage-5.0-boxen-x86_64-Linux/local/lib/python2.7/site-packages/sage/modular/modform/element.py", line 1034, in __mul__
    eps1 = self.character()
  File "/sagenb/sage_install/sage-5.0-boxen-x86_64-Linux/local/lib/python2.7/site-packages/sage/modular/modform/element.py", line 423, in character
    raise ValueError, "Form is not an eigenvector for <%s>" % g
ValueError: Form is not an eigenvector for <2>
```


Looks like line 1040 of sage/modular/modform/element.py is the culprit.


---

Comment by arminstraub created at 2012-06-26 14:46:11

Changing status from new to needs_review.


---

Comment by arminstraub created at 2012-06-26 14:46:11

The patch only changes line 1040, which David pointed out, so that a form without character doesn't stop multiplication.  Other than that, I only changed one example which appeared to have covered this case in an earlier version of Sage.

Please let me know if I misunderstood anything --- I'm just exploring the relevant code.


---

Comment by robertwb created at 2012-07-15 06:46:26

Please add this as a new example rather than removing the one that is already there.


---

Comment by robertwb created at 2012-07-15 06:46:26

Changing status from needs_review to needs_work.


---

Attachment

patchbot: apply trac_13165_modform_multiply_2.patch


---

Comment by arminstraub created at 2012-07-20 17:42:23

I just put the old example back in but moved it to the category "where the character is computed on-the-fly".


---

Comment by arminstraub created at 2012-07-20 17:42:23

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2012-07-27 20:43:09

Please fill in your real name as Author.


---

Comment by pbruin created at 2013-06-12 16:55:58

The patch applies to 5.10.rc1 and fixes the bug.  All tests pass and the documentation builds correctly.


---

Comment by pbruin created at 2013-06-12 16:55:58

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-06-14 06:56:28

Which patch(es) should be applied?


---

Comment by jdemeyer created at 2013-06-14 06:56:28

Changing status from positive_review to needs_info.


---

Comment by pbruin created at 2013-06-14 09:55:28

Changing status from needs_info to needs_review.


---

Comment by pbruin created at 2013-06-14 09:56:39

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2013-06-14 09:56:39

Apply: trac_13165_modform_multiply_2.patch


---

Comment by jdemeyer created at 2013-06-19 12:24:50

Resolution: fixed
