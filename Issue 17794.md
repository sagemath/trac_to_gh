# Issue 17794: Bug in saturation for elliptic curves over Q

archive/issues_017794.json:
```json
{
    "body": "Keywords: saturation\n\nA bug in eclib's saturation function is revealed here:\n\n```\nsage: E = EllipticCurve([0,-1,1,-266,968])\nsage: Q1 = E([-1995,3674,125])\nsage: Q2 = E([157,1950,1])\nsage: E.saturation([Q1,Q2])                                                                                     \n([(-399/25 : 3674/125 : 1), (157 : 1950 : 1)], 1, 7.21429780216482)\nsage: P1, P2 = E.gens()                                                                                         \nsage: E.regulator()\n0.801588644684980\nsage: E.regulator_of_points([Q1,Q2])\n7.21429780216482\n```\n\nThe points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.\n\nNote that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18031\n\n",
    "created_at": "2015-03-21T14:38:50Z",
    "labels": [
        "elliptic curves",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Bug in saturation for elliptic curves over Q",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17794",
    "user": "cremona"
}
```
Keywords: saturation

A bug in eclib's saturation function is revealed here:

```
sage: E = EllipticCurve([0,-1,1,-266,968])
sage: Q1 = E([-1995,3674,125])
sage: Q2 = E([157,1950,1])
sage: E.saturation([Q1,Q2])                                                                                     
([(-399/25 : 3674/125 : 1), (157 : 1950 : 1)], 1, 7.21429780216482)
sage: P1, P2 = E.gens()                                                                                         
sage: E.regulator()
0.801588644684980
sage: E.regulator_of_points([Q1,Q2])
7.21429780216482
```

The points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.

Note that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.

Issue created by migration from https://trac.sagemath.org/ticket/18031





---

archive/issue_comments_238470.json:
```json
{
    "body": "Bug in eclib fixed.  After testing, will update the upstream sources and the package information.",
    "created_at": "2015-03-21T17:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238470",
    "user": "cremona"
}
```

Bug in eclib fixed.  After testing, will update the upstream sources and the package information.



---

archive/issue_comments_238471.json:
```json
{
    "body": "With upstream eclib-20150323:\n\n```\nsage: E = EllipticCurve([0,-1,1,-266,968])\nsage: Q1 = E([-1995,3674,125])\nsage: Q2 = E([157,1950,1])\nsage: E.saturation([Q1,Q2])\n([(1 : -27 : 1), (157 : 1950 : 1)], 3, 0.801588644684981)\n```\n\nwhich will be put in as a doctest.",
    "created_at": "2015-03-23T21:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238471",
    "user": "cremona"
}
```

With upstream eclib-20150323:

```
sage: E = EllipticCurve([0,-1,1,-266,968])
sage: Q1 = E([-1995,3674,125])
sage: Q2 = E([157,1950,1])
sage: E.saturation([Q1,Q2])
([(1 : -27 : 1), (157 : 1950 : 1)], 3, 0.801588644684981)
```

which will be put in as a doctest.



---

archive/issue_comments_238472.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-03-23T21:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238472",
    "user": "cremona"
}
```

New commits:



---

archive/issue_comments_238473.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-23T21:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238473",
    "user": "cremona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_238474.json:
```json
{
    "body": "lgtm",
    "created_at": "2015-03-24T02:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238474",
    "user": "fbissey"
}
```

lgtm



---

archive/issue_comments_238475.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-24T02:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238475",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_238476.json:
```json
{
    "body": "Thanks!\n\nRelease manager -- compared to 20150228 which was already merged, this only changes one source file, there are no API changes so this is a minor bug-fix release.  Sorry it comes so soon after the previous one, but that's when I discovered the bug.",
    "created_at": "2015-03-24T12:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238476",
    "user": "cremona"
}
```

Thanks!

Release manager -- compared to 20150228 which was already merged, this only changes one source file, there are no API changes so this is a minor bug-fix release.  Sorry it comes so soon after the previous one, but that's when I discovered the bug.



---

archive/issue_comments_238477.json:
```json
{
    "body": "I am making this a blocker, that'll get Volker's attention.",
    "created_at": "2015-03-24T18:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238477",
    "user": "fbissey"
}
```

I am making this a blocker, that'll get Volker's attention.



---

archive/issue_comments_238478.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2015-03-24T18:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238478",
    "user": "fbissey"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_238479.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-25T00:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17794#issuecomment-238479",
    "user": "vbraun"
}
```

Resolution: fixed
