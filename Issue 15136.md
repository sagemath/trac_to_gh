# Issue 15136: Implement global_height for Integers

Issue created by migration from Trac.

Original creator: paulfili

Original creation time: 2013-11-07 21:14:02

Assignee: paulfili

Keywords: sage-dasy55

QQ(5).global_height() works but ZZ(5).global_height() does not.

Implement global_height for ZZ elements.


---

Comment by paulfili created at 2013-11-07 22:11:27

Changing status from new to needs_review.


---

Comment by paulfili created at 2013-11-07 22:49:24

Changing keywords from "sage-dasy55" to "sage-days55".


---

Comment by atowsley created at 2013-11-09 21:04:17

It passed the doc test and the long test.

Functionality still works.


---

Comment by atowsley created at 2013-11-09 21:04:17

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-11-10 00:07:37

Please change the commit message to something meaningful and fill in the Reviewer field with your real name.


---

Comment by jdemeyer created at 2013-11-10 00:07:37

Changing status from positive_review to needs_work.


---

Comment by paulfili created at 2013-11-10 15:40:36

Thanks, I have changed the commit message.


---

Comment by paulfili created at 2013-11-10 15:40:36

Changing status from needs_work to needs_review.


---

Comment by atowsley created at 2013-11-10 15:44:13

Everything still works.


---

Comment by atowsley created at 2013-11-10 15:44:13

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-11-10 23:00:42

The indentation of the documentation should be

```
"""
Documentation here
"""
```

without the extra indent.


---

Comment by jdemeyer created at 2013-11-10 23:00:42

Changing status from positive_review to needs_work.


---

Comment by paulfili created at 2013-11-12 00:42:04

I have fixed the indentation in the documentation.


---

Comment by paulfili created at 2013-11-12 00:42:04

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-11-12 15:30:10

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2013-11-12 15:30:10

The indentation is still wrong. It should be:

```
    def global_height(self, prec=None):
        r"""
        Returns the absolute logarithmic height of this rational integer.

        INPUT:

        - ``prec`` (int) -- desired floating point precision (default:
          default RealField precision).

        OUTPUT:

        (real) The absolute logarithmic height of this rational integer.

        ALGORITHM:

        The height of the integer `n` is `\log |n|`.

        EXAMPLES::

            sage: ZZ(5).global_height()
            1.60943791243410
            sage: ZZ(-5).global_height(prec=100)
            1.6094379124341003746007593332
            # This is log(5):
            sage: exp(_)
            5.0000000000000000000000000000
        """
```



---

Comment by paulfili created at 2013-11-12 16:04:59

Thanks for your patience. I've uploaded a new version with the indentation as you specified.


---

Comment by paulfili created at 2013-11-12 16:04:59

Changing status from needs_work to needs_review.


---

Comment by atowsley created at 2013-11-12 17:30:38

I get the following error with the patch...


```
sage -t --long integer.pyx
**********************************************************************
File "integer.pyx", line 4150, in sage.rings.integer.Integer.global_height
Failed example:
    ZZ(-5).global_height(prec=100)
Expected:
    1.6094379124341003746007593332
    # This is log(5):
Got:
    1.6094379124341003746007593332
**********************************************************************
1 item had failures:
   1 of   4 in sage.rings.integer.Integer.global_height
    [916 tests, 1 failure, 5.69 s]
----------------------------------------------------------------------
sage -t --long integer.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 6.0 seconds
    cpu time: 4.5 seconds
    cumulative wall time: 5.7 seconds
```


It's the only error I get, but I don't see why it appears. Since the two values it prints (expected and got) are the same.


---

Attachment

Patch that implements global_height for ZZ


---

Comment by paulfili created at 2013-11-12 18:00:56

Perhaps the comment on the next line threw it off. I've removed it and put a better example. Should work now.


---

Comment by atowsley created at 2013-11-12 18:34:54

Yes, that did it. Everything works now.


---

Comment by atowsley created at 2013-11-12 18:34:54

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-11-14 07:53:08

Resolution: fixed
