# Issue 29320: Add script package _recommended and generate "recommended system packages" info

Issue created by migration from https://trac.sagemath.org/ticket/29557

Original creator: mkoeppe

Original creation time: 2020-04-23 18:13:54

CC:  egourgoulhon dimpase fbissey mjo jhpalmieri vdelecroix kcrisman slelievre arojas @kliem @thierry-freebsd saraedum

Let's improve the installation-from-source documentation regarding the "recommended system packages" for 9.1.

- `build/pkgs/_recommended` - records additional recommended packages such as texlive-xetex (see https://wiki.sagemath.org/prerequisitesUbuntu)

(from #29124)


---

Comment by egourgoulhon created at 2020-04-23 18:59:39

New commits:


---

Comment by mkoeppe created at 2020-04-24 05:22:19

So far we only have the recommended packages for debian/ubuntu


---

Comment by git created at 2020-04-25 02:37:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-04-25 02:39:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-25 02:51:57

Would someone like to help with the list of packages on their favorite distribution?


---

Comment by jhpalmieri created at 2020-04-25 18:48:38

Here are a few suggestions for homebrew.
----
New commits:


---

Comment by git created at 2020-04-25 18:49:32

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-04-25 19:14:02

I don't think `gcc` needs to be added here - it's already listed in build/pkgs/gfortran/distros/homebrew.txt


---

Comment by git created at 2020-04-25 21:24:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2020-04-25 21:25:04

Okay, I took gcc out.


---

Comment by mkoeppe created at 2020-04-25 21:36:44

Thanks!


---

Comment by @kliem created at 2020-04-28 07:16:50

Typo in the ubuntu link:


```diff
+https://wiki.sagemath.org/prerequisites/Ubuntu
-https://wiki.sagemath.org/prerequisitesUbuntu
```



---

Comment by slelievre created at 2020-04-28 09:12:38

My fault: I recently moved that page from `prerequisitesUbuntu`
to `prerequisites/Ubuntu` to make it easier to find, better indexed,
and thinking we might have other `prerequisites/something`.


---

Comment by mkoeppe created at 2020-04-28 13:33:06

Replying to [comment:19 slelievre]:
> [...] thinking we might have other `prerequisites/something`.

Hopefully this won't be necessary and we can keep this information up to date in a single place - the install manual.


---

Comment by mkoeppe created at 2020-05-06 07:16:07

Fedora, Arch, anyone?


---

Comment by git created at 2020-05-07 00:45:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-07 00:45:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-05-28 00:20:51

Changing keywords from "" to "sd109".


---

Comment by git created at 2020-10-19 21:54:46

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-10-19 21:58:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-10-19 22:04:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2020-10-19 23:04:05

For homebrew, do we want to recommend any of:
- autoconf
- automake
- ffmpeg
- imagemagick
- pandoc
?

A related question: if we recommend pandoc (for instance) for debian, then for consistency, should we necessarily recommend it for homebrew?


---

Comment by mkoeppe created at 2020-10-19 23:17:19

Replying to [comment:36 jhpalmieri]:
> For homebrew, do we want to recommend any of:
> - autoconf
> - automake
> - ffmpeg
> - imagemagick
> - pandoc

autoconf/automake are already in homebrew-bootstrap.txt

The other, yes.

> A related question: if we recommend pandoc (for instance) for debian, then for consistency, should we necessarily recommend it for homebrew?

Ideally, yes, but getting a version of this ticket merged would be good even if it has not reached 100% consistency between distributions


---

Comment by jhpalmieri created at 2020-10-19 23:43:26

Hmm. I did `git trac pull 29557` and made some changes, but it won't let me do `git trac push ...`, saying `the remote contains work that you do not have locally`. Any objections if I do a forced push?


---

Comment by slelievre created at 2020-10-19 23:51:29

What commit are you working on top of?

What does `git log --oneline -20` say (or `-3` if it's enough)?


---

Comment by jhpalmieri created at 2020-10-19 23:56:04


```
6d5cc43d09 (HEAD -> t/29557/29557-recommended-packages) trac 29557: recommended packages for homebrew
d198e9c5b7 build/pkgs/_recommended/distros/debian.txt: Format change
fe9ba0b00c build/pkgs/_recommended/distros/homebrew.txt: New
ea5d610b21 src/doc/bootstrap: Generate debian-recommended.txt etc
2cd5ef99ee build/pkgs/_recommended: New
```



---

Comment by mkoeppe created at 2020-10-20 00:00:32

go for the force push. It's possible that you had a branch under your name previously that can't be fast-forwarded


---

Comment by jhpalmieri created at 2020-10-20 00:09:01

Replying to [comment:41 mkoeppe]:
> go for the force push. It's possible that you had a branch under your name previously that can't be fast-forwarded

Done
----
New commits:


---

Comment by mkoeppe created at 2020-10-20 00:27:54

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-10-20 00:30:08

We could update the installation manual, in `src/doc/en/installation/source.rst`, using the generated files, but probably it's best to leave this for another ticket.


---

Comment by jhpalmieri created at 2020-10-20 18:22:24

This looks good to me, although I can't really vouch for the recommendations on debian. It's certainly a good start, and people can supplement on later tickets.


---

Comment by mkoeppe created at 2020-10-20 18:52:17

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-10-31 18:08:09

Resolution: fixed


---

Comment by jhpalmieri created at 2020-11-01 19:27:46

On OS X, I see this:

```
configure:40015: notice: the following SPKGs did not find equivalent system packages: _recommended arb brial cbc cddlib cliquer cmake coxeter3 eclib ecm fflas_ffpack flint flintqs fplll gf2x gfan giac givaro gp2c iml lcalc libbraiding libsemigroups lrcalc m4ri m4rie ntl palp pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small perl_cpan_polymake_prereq perl_term_readline_gnu planarity rw symmetrica sympow tachyon zn_poly
configure:40017: checking for the package system in use
configure:40020: result: homebrew
configure:40029: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
configure:40031:   $ brew install pandoc ffmpeg imagemagick texinfo cmake
```

On a follow-up, we could improve this message. First, these recommended packages don't actually help to avoid building any of the listed SPKGs. Second, this message is printed regardless of whether `ffmpeg` et al. are installed. Third, I actually have pandoc installed, it is correctly detected by `./configure`, but it recommends installing it anyway.


---

Comment by mkoeppe created at 2020-11-01 19:39:37

Note there's also a separate `pandoc` script package


---

Comment by mkoeppe created at 2020-11-01 19:47:27

For improvements of this type, please see #29146, #29372


---

Comment by jhpalmieri created at 2020-11-02 00:30:40

Replying to [comment:52 mkoeppe]:
> Note there's also a separate `pandoc` script package

Right, and that correctly detects my `pandoc` installation, so it would be nice if the ending message took that into account. The ending message automatically prints every recommended external package, even those which are installed and have corresponding script packages.


---

Comment by slelievre created at 2020-11-02 14:47:49

Replying to [comment:51 jhpalmieri (comment 51)]:
>
> On a follow-up, we could improve this message. First, these recommended
> packages don't actually help to avoid building any of the listed SPKGs.
> Second, this message is printed regardless of whether ffmpeg et al.
> are installed. Third, I actually have pandoc installed, it is correctly
> detected by ./configure, but it recommends installing it anyway.

See:

- #30624: Improve configure's recommendation message


---

Comment by @tobiasdiez created at 2020-11-02 18:34:12

The package `texlive-generic-extra` doesn't exist for ubuntu 20.04, and on 18.04 it was already labeled as "transitional dummy package". I'm not sure what's the correct replacement, maybe simply "texlive"?


---

Comment by mkoeppe created at 2020-11-17 02:17:53

Follow-up regarding the package list at #30930
