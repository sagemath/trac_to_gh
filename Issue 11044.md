# Issue 11044: Metaticket - List of bugs needed to be resolved for Sage to build with gcc 4.6.0

Issue created by migration from Trac.

Original creator: drkirkby

Original creation time: 2011-04-19 02:56:18

Assignee: GeorgSWeber

CC:  gostrc leif

Sage will not build with gcc 4.6.0 due to a number of issues. These need to be resolved asap, as Fedora 15 will ship with gcc 4.6.0. 

At least some of the problems that prevent Sage building with gcc 4.6.0 are:

 * #10892 (lcalc)
 * #11083 (PolyBoRi)
 * #11084 (Singular)

There may be others on specific platforms. 

When all these issues are resolved, the "Install from Source Code" section of the Sage Installation Guide needs to be updated to remove the notes about Sage not building with gcc 4.6.0. Also the Wiki at http://wiki.sagemath.org/SupportedPlatforms needs to be updated, as that now mentions that Sage will not build with gcc 4.6.0.

The lcalc, Singular and PolyBoRi issues have all been reported upstream.


---

Comment by jdemeyer created at 2011-04-20 15:58:25

Changing type from enhancement to task.


---

Comment by jdemeyer created at 2011-04-25 09:55:40

Changing priority from critical to blocker.


---

Comment by jdemeyer created at 2011-04-25 09:55:40

Changing keywords from "" to "gcc".


---

Comment by mariah created at 2011-06-03 17:11:39

Changing status from new to needs_review.


---

Comment by mariah created at 2011-06-03 17:11:39

sage-4.7 was successfully built with gcc-4.6.0 on all the Linux machines on skynet.  I believe this ticket should be closed.


---

Comment by jdemeyer created at 2011-06-07 07:47:07

Replying to [comment:4 mariah]:
> sage-4.7 was successfully built with gcc-4.6.0 on all the Linux machines on skynet.  I believe this ticket should be closed.

I agree with you.  However, we have to undo some changes from #11159.  I propose to do that on this ticket.


---

Comment by jdemeyer created at 2011-06-07 07:47:07

Changing status from needs_review to needs_work.


---

Comment by mariah created at 2011-06-08 18:10:38

Changing status from needs_work to needs_review.


---

Attachment

I have updated the Wiki at  http://wiki.sagemath.org/SupportedPlatforms.  I believe the patch reverts the changes of #11159 that mention gcc-4.6.0.


---

Comment by jdemeyer created at 2011-06-15 15:23:40

Resolution: fixed


---

Comment by jdemeyer created at 2011-06-15 15:23:40

Looks good!


---

Comment by ryan created at 2011-06-15 15:58:26

sage-4.7.1-alpha4 still fails to build on archlinux with gcc-4.6.0


```
running build_ext
building 'Crypto.PublicKey._fastmath' extension
creating build/temp.linux-i686-2.6
creating build/temp.linux-i686-2.6/src
gcc -Wall -Wstrict-prototypes -I/opt/sage-build/sage-4.7.1.alpha4/local/include -L/opt/sage-build/sage-4.7.1.alpha4/local/lib -march=native -mtune=native -pipe -fomit-frame-pointer -fPIC -O3 -fomit-frame-pointer -Isrc/ -I/opt/sage-build/sage-4.7.1.alpha4/local/include/python2.6 -c src/_fastmath.c -o build/temp.linux-i686-2.6/src/_fastmath.o
/usr/lib/gcc/i686-pc-linux-gnu/4.6.0/cc1: symbol lookup error: /usr/lib/libppl_c.so.4: undefined symbol: _ZN23Parma_Polyhedra_Library13have_sse_unitE
error: command 'gcc' failed with exit status 1
Error installing PyCrypto... exiting

real	0m0.198s
user	0m0.117s
sys	0m0.060s
sage: An error occurred while installing pycrypto-2.1.0
Please email sage-devel http://groups.google.com/group/sage-devel
explaining the problem and send the relevant part of
of /opt/sage-build/sage-4.7.1.alpha4/install.log.  Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/opt/sage-build/sage-4.7.1.alpha4/spkg/build/pycrypto-2.1.0 and type 'make check' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
(cd '/opt/sage-build/sage-4.7.1.alpha4/spkg/build/pycrypto-2.1.0' && '/opt/sage-build/sage-4.7.1.alpha4/sage' -sh)
When you are done debugging, you can type "exit" to leave the
subshell.
make[1]: *** [installed/pycrypto-2.1.0] Error 1
make[1]: Leaving directory `/opt/sage-build/sage-4.7.1.alpha4/spkg'

real	119m10.612s
user	101m4.015s
sys	8m34.880s
Error building Sage.
```


I had the same issue when building sage-4.7.0 with gcc-4.6.0.
http://groups.google.com/group/sage-devel/browse_thread/thread/1fbbc05ae9837c96/80cd305a6e908bf9?lnk=raot&pli=1
https://groups.google.com/forum/#!topic/sage-devel/hLL02U1Q5zU


---

Comment by ryan created at 2011-06-15 16:08:22

The workaround that I used for sage-4.7.0 was to replace `$SAGE_ROOT/local/lib/libppl.so.9.0.0` with `/usr/lib/libppl.so.9.0.0`


---

Comment by ryan created at 2011-06-15 16:13:59

#11391


---

Comment by ryan created at 2011-06-15 16:15:10

Apparently it is only the 32-bit version of sage that fails to build with gcc-4.6 as noted in the ticket referenced above (#11391).
