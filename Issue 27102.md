# Issue 27102: Bug with DiGraph.edges()

Issue created by migration from https://trac.sagemath.org/ticket/27339

Original creator: mercatp

Original creation time: 2019-02-22 15:28:10

CC:  tscrim chapoton jhpalmieri jdemeyer

DiGraph.edges() fail for some examples because it try to sort but does not successed.
For example:

sage: g = DiGraph([(0,1,0),(0,1,'a')], multiedges=True)
sage: g.edges()

raise an errors.
I suggest to remove the default value sort=True for this method to avoid this problem.


---

Comment by dcoudert created at 2019-02-22 17:42:13

The problem is everywhere (I have edited the ticket description accordingly) and I'm surprised it has not been detected by any doctest...

It could be a side effect of recent changes in the coercion / richcmp model ?

I'm ccing many people because it seems a serious issue.


---

Comment by tscrim created at 2019-02-22 21:06:42

Yes, this looks like it is from #22029, which makes the behavior in Sage closer to that of Python3. So this is bringing more to the front the Python3 issues with graphs.


---

Comment by jdemeyer created at 2019-02-22 21:09:19

Duplicate of #22349.


---

Comment by jdemeyer created at 2019-02-22 21:09:19

Resolution: duplicate


---

Comment by jdemeyer created at 2019-02-22 21:12:03

Replying to [comment:3 dcoudert]:
> I'm surprised it has not been detected by any doctest...

Not many doctests mix types like that. The few ones that do apparently don't call `vertices()` or `edges()`.


---

Comment by dcoudert created at 2019-02-22 21:26:03

Sorry, but I don't see why this ticket is duplicate of #22349. For me we have a new bug with python2. It's independent of the will to stop sorting vertices/edges.


---

Comment by tscrim created at 2019-02-22 21:29:45

I agree with Jeroen, it is effectively the same issue as #22349 except for a smaller set of objects (Python2 still allows you to compare an `int` and `str`).


---

Comment by dcoudert created at 2019-02-22 21:38:33

> Not many doctests mix types like that. The few ones that do apparently don't call `vertices()` or `edges()`.
We changed many many doctests for py3, certainly hiding the issue.

> (Python2 still allows you to compare an int and str).
But now `.vertices()` and `.edges()` in Python2 don't...


---

Comment by tscrim created at 2019-02-22 21:44:25

At least the example in this ticket is an `Integer` (which is not an `int`) and a `str` comparison.
