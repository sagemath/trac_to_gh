# Issue 22858: autogen/interpreters does NOT work

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-05-29 12:39:18

CC:  embray jpflori

After making a minor change to `src/sage_setup/autogen/interpreters/generator.py`, the change did not take effect. I.e. the generated file `src/sage/ext/interpreters/wrapper_rdf.pyx` did _not_ change.

In particular, the following should cause an error while building the interpreters, but it did not:

```diff
diff --git a/src/sage_setup/autogen/interpreters/generator.py b/src/sage_setup/autogen/interpreters/generator.py
index 3af99b2..5a3bfbb 100644
--- a/src/sage_setup/autogen/interpreters/generator.py
+++ b/src/sage_setup/autogen/interpreters/generator.py
`@``@` -316,6 +316,8 `@``@` class InterpreterGenerator(object):
             sage: print(buff.getvalue())
             # Automatically generated by ...
         """
+        assert False
+
         s = self._spec
         w = write
         types = set()
```



---

Comment by embray created at 2017-05-29 13:08:54

I think at some earlier version of this (before it was merged) it did check all source files?  I don't know when it changed.


---

Comment by embray created at 2017-05-29 13:10:02

I think there was one point where it was `src_files` but in one of the last rebases it got messed up.


---

Comment by jdemeyer created at 2017-05-29 13:13:23

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-05-29 13:13:23

New commits:


---

Comment by embray created at 2017-05-29 13:18:22

Changing status from needs_review to needs_work.


---

Comment by embray created at 2017-05-29 13:18:22

I'm not sure why you're using `OSError` here.  ~~It doesn't really matter~~ (actually I'd say it does matter--I think a real OSError should be allowed to rise here, or at least be handled separately), but it looks odd.  If the point is just to catch some exception just a generic `Exception` would be fine.  Looks good to me otherwise; sorry for any inconvenience this might have caused.


---

Comment by jdemeyer created at 2017-05-29 14:58:02

At first, I created a separate exception class for this (say `class NeedToRebuild(Exception)`). But then I realized that it would be good to catch `OSError` too since there are various system calls in that block of code which could potentially `raise OSError`. Since this is only in determining whether to rebuild, I figured that it shouldn't be a fatal error.


---

Comment by embray created at 2017-05-29 16:05:01

I get that--I guess it doesn't need to be a fatal error then, but at least some more explanation surrounding an actual `OSError` would be good (just like "checking if rebuild needed failed: <actual error>").


---

Comment by git created at 2017-05-30 15:24:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-05-30 15:25:06

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-05-30 15:25:06

I don't want to make this more complicated than it needs to be. This is reverting to my original idea.


---

Comment by embray created at 2017-05-31 10:13:54

Changing status from needs_review to positive_review.


---

Comment by embray created at 2017-05-31 10:13:54

Okay, seems fine.


---

Comment by vbraun created at 2017-06-04 10:11:03

Resolution: fixed
