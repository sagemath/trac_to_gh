# Issue 25660: Incorrect Comparison of embedding index in projective_embedding

Issue created by migration from Trac.

Original creator: raghukul01

Original creation time: 2018-07-22 09:18:51

CC:  bhutz raghukul01

Keywords: gsoc2018

Consider this example:


```
sage: A.<x,y> = AffineSpace(ZZ, 2)
sage: A.projective_embedding(4)
      1 A = AffineSpace(ZZ, Integer(2), names=('x', 'y',)); (x, y,) = A._first_ngens(2)
----> 2 A.projective_embedding(Integer(3))

/home/raghukul/sage/sage/local/lib/python2.7/site-packages/sage/schemes/affine/affine_space.pyc in projective_embedding(self, i, PP)
    724         self.__projective_embedding[i] = phi
    725         #make affine patch and projective embedding match
--> 726         PP.affine_patch(i,self)
    727         return phi
    728 

/home/raghukul/sage/sage/local/lib/python2.7/site-packages/sage/schemes/projective/projective_space.pyc in affine_patch(self, i, AA)
    978         n = self.dimension_relative()
    979         if i < 0 or i > n:
--> 980             raise ValueError("argument i (= %s) must be between 0 and %s"%(i, n))
    981         try:
    982             A = self.__affine_patches[i]

ValueError: argument i (= 3) must be between 0 and 2
```


This however returns a `ValueError`, but only when the affine patch is generated for corresponding `ProjectiveSpace`. It simply skips the check for index in projective_embedding().

Following line in projective_embedding needs to be corrected:

```python
        if n < 0 or n >self.dimension_relative():
            raise ValueError("argument i (=%s) must be betwzzeen 0 and %s, inclusive"%(i,n))
```




---

Comment by raghukul01 created at 2018-07-22 09:27:48

New commits:


---

Comment by raghukul01 created at 2018-07-22 09:27:48

Changing status from new to needs_review.


---

Comment by bhutz created at 2018-07-23 17:17:36

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2018-07-23 17:17:36

You should add a doctest item under TESTS for that error message.


---

Comment by git created at 2018-07-23 17:30:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by raghukul01 created at 2018-07-23 17:32:09

Changing status from needs_work to needs_review.


---

Comment by raghukul01 created at 2018-07-23 17:32:09

Added `TESTS` block


---

Comment by bhutz created at 2018-07-23 17:38:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-05 08:15:46

Resolution: fixed
