# Issue 30315: display options for matrices

archive/issues_030315.json:
```json
{
    "body": "CC:  @videlec\n\nAs suggested in [This is the Trac macro *ticket:29203* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:29203-macro), this ticket adds `GlobalOptions` to control the display options of matrices. Currently, this only refactors the options to control the maximum number of rows and columns to display. New options will follow in separate tickets.\n\n```\nsage: matrix.options\nCurrent options for Matrix\n  - max_cols: 49\n  - max_rows: 19\nsage: matrix.options.max_cols = 6\nsage: matrix.options.max_rows = 3\nsage: matrix(ZZ, 3, 6)\n[0 0 0 0 0 0]\n[0 0 0 0 0 0]\n[0 0 0 0 0 0]\nsage: matrix(ZZ, 3, 7)\n3 x 7 dense matrix over Integer Ring (use the '.str()' method to see the entries)\n```\n\nThis also fixes an off-by-one error and deprecates the setters `set_max_rows`/`set_max_cols`.\n\nThe new code is placed in `sage.matrix.constructor`, since that is where `matrix`/`Matrix` is defined. The latter is not actually a class, so the `options` are attached via the ``@`matrix_method` decorator.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30552\n\n",
    "created_at": "2020-09-10T18:23:22Z",
    "labels": [
        "component: refactoring",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "display options for matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30315",
    "user": "https://github.com/mwageringel"
}
```
CC:  @videlec

As suggested in [This is the Trac macro *ticket:29203* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:29203-macro), this ticket adds `GlobalOptions` to control the display options of matrices. Currently, this only refactors the options to control the maximum number of rows and columns to display. New options will follow in separate tickets.

```
sage: matrix.options
Current options for Matrix
  - max_cols: 49
  - max_rows: 19
sage: matrix.options.max_cols = 6
sage: matrix.options.max_rows = 3
sage: matrix(ZZ, 3, 6)
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
sage: matrix(ZZ, 3, 7)
3 x 7 dense matrix over Integer Ring (use the '.str()' method to see the entries)
```

This also fixes an off-by-one error and deprecates the setters `set_max_rows`/`set_max_cols`.

The new code is placed in `sage.matrix.constructor`, since that is where `matrix`/`Matrix` is defined. The latter is not actually a class, so the `options` are attached via the ``@`matrix_method` decorator.


Issue created by migration from https://trac.sagemath.org/ticket/30552





---

archive/issue_comments_431959.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431959",
    "user": "https://github.com/mwageringel"
}
```

New commits:



---

archive/issue_comments_431960.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431960",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_431961.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-09-11T06:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_431962.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-10-11T13:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_431963.json:
```json
{
    "body": "Setting\n\n```\n+        sage: matrix.options.max_cols = 6\n+        sage: matrix.options.max_rows = 3\n```\nin a doctest might have side effects (ie not reset the values in further doctests). See eg the examples in `structure/global_options.py`. Could you reset the values at the end of the same example block (with `matrix.options._reset()`)?",
    "created_at": "2020-10-11T21:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431963",
    "user": "https://github.com/videlec"
}
```

Setting

```
+        sage: matrix.options.max_cols = 6
+        sage: matrix.options.max_rows = 3
```
in a doctest might have side effects (ie not reset the values in further doctests). See eg the examples in `structure/global_options.py`. Could you reset the values at the end of the same example block (with `matrix.options._reset()`)?



---

archive/issue_comments_431964.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-12T19:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431965.json:
```json
{
    "body": "Good point. I have updated the example as you suggested.",
    "created_at": "2020-10-12T19:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431965",
    "user": "https://github.com/mwageringel"
}
```

Good point. I have updated the example as you suggested.



---

archive/issue_comments_431966.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-12T20:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431966",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_431967.json:
```json
{
    "body": "Thank you.",
    "created_at": "2020-10-12T20:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431967",
    "user": "https://github.com/mwageringel"
}
```

Thank you.



---

archive/issue_events_079397.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T16:22:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30315#event-79397"
}
```



---

archive/issue_comments_431968.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-07T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-431968",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
