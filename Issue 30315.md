# Issue 30315: display options for matrices

Issue created by migration from https://trac.sagemath.org/ticket/30552

Original creator: @mwageringel

Original creation time: 2020-09-10 18:23:22

CC:  vdelecroix

As suggested in [This is the Trac macro *ticket:29203* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:29203-macro), this ticket adds `GlobalOptions` to control the display options of matrices. Currently, this only refactors the options to control the maximum number of rows and columns to display. New options will follow in separate tickets.


```
sage: matrix.options
Current options for Matrix
  - max_cols: 49
  - max_rows: 19
sage: matrix.options.max_cols = 6
sage: matrix.options.max_rows = 3
sage: matrix(ZZ, 3, 6)
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
sage: matrix(ZZ, 3, 7)
3 x 7 dense matrix over Integer Ring (use the '.str()' method to see the entries)
```


This also fixes an off-by-one error and deprecates the setters `set_max_rows`/`set_max_cols`.

The new code is placed in `sage.matrix.constructor`, since that is where `matrix`/`Matrix` is defined. The latter is not actually a class, so the `options` are attached via the ``@`matrix_method` decorator.



---

Comment by @mwageringel created at 2020-09-10 18:31:35

New commits:


---

Comment by @mwageringel created at 2020-09-10 18:31:35

Changing status from new to needs_review.


---

Comment by git created at 2020-09-11 06:55:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-10-11 13:17:46

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2020-10-11 21:11:30

Setting

```
+        sage: matrix.options.max_cols = 6
+        sage: matrix.options.max_rows = 3
```

in a doctest might have side effects (ie not reset the values in further doctests). See eg the examples in `structure/global_options.py`. Could you reset the values at the end of the same example block (with `matrix.options._reset()`)?


---

Comment by git created at 2020-10-12 19:07:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2020-10-12 19:10:21

Good point. I have updated the example as you suggested.


---

Comment by vdelecroix created at 2020-10-12 20:42:39

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2020-10-12 20:54:34

Thank you.


---

Comment by vbraun created at 2020-11-07 16:22:39

Resolution: fixed
