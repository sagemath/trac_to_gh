# Issue 22964: Hecke triangle group cusp form base ring

archive/issues_022964.json:
```json
{
    "body": "CC:  @jjermann\n\n\n```\nsage: from sage.modular.modform_hecketriangle.space import CuspForms\nsage: MF = CuspForms(n=infinity, k=16)\nsage: MF.category().base_ring()\nFraction Field of Univariate Polynomial Ring in d over Integer Ring\nsage: MF.base_ring()\nInteger Ring\n```\n\nThe fact that these are different causes trouble:\n\n```\nsage: MF in MF.category()\nFalse\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/23201\n\n",
    "created_at": "2017-06-09T17:00:23Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Hecke triangle group cusp form base ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22964",
    "user": "https://github.com/roed314"
}
```
CC:  @jjermann


```
sage: from sage.modular.modform_hecketriangle.space import CuspForms
sage: MF = CuspForms(n=infinity, k=16)
sage: MF.category().base_ring()
Fraction Field of Univariate Polynomial Ring in d over Integer Ring
sage: MF.base_ring()
Integer Ring
```

The fact that these are different causes trouble:

```
sage: MF in MF.category()
False
```


Issue created by migration from https://trac.sagemath.org/ticket/23201





---

archive/issue_comments_320916.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd86.5\".",
    "created_at": "2017-06-09T17:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320916",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "" to "sd86.5".



---

archive/issue_comments_320917.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-06-09T22:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320917",
    "user": "https://github.com/roed314"
}
```

New commits:



---

archive/issue_comments_320918.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-09T22:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_320919.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-09T22:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320919",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_320920.json:
```json
{
    "body": "FYI, I ran tests and all passed.",
    "created_at": "2017-06-09T22:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320920",
    "user": "https://github.com/roed314"
}
```

FYI, I ran tests and all passed.



---

archive/issue_comments_320921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-09T23:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320921",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_320922.json:
```json
{
    "body": "Hi\n\nI'm glad to see some interest in this. :-)\n\nJust as a **side note** (I think the change is fine):\n\nIf we consider it as a commutative algebra over Z instead of Z[d] then one wouldn't be able to multiply by \"d\" in a commutative algebra sense.\nThis is relevant for normalization (e.g. differently normalized Eisenstein series wouldn't be related over multiplication by Z) and also for the relations between the polynomial ring in x,y,z over R[d] and the commutative algebra...\n\nHowever that might be ok and in this case I assume it's mostly a practical change for the consistency of sage/category. Strictly speaking the base_ring should maybe also be R[d] and not R and we would need another name like \"other_base_ring\" for the previous base_ring (which is used in the construction logic e.g.). But if everything still works properly your solution is better :-).\n\n''Also if necessary \"d\" could always be considered as e.g. an element of R.\nOr one could just set \"d\"=1 and then remember to replace q by q/d in the end (and maybe add an appropriate power of d in front).''\n\nRegards\nJonas\n\nP.S. If there are questions about my implementation I offer my help. :-)",
    "created_at": "2017-06-10T10:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320922",
    "user": "https://github.com/jjermann"
}
```

Hi

I'm glad to see some interest in this. :-)

Just as a **side note** (I think the change is fine):

If we consider it as a commutative algebra over Z instead of Z[d] then one wouldn't be able to multiply by "d" in a commutative algebra sense.
This is relevant for normalization (e.g. differently normalized Eisenstein series wouldn't be related over multiplication by Z) and also for the relations between the polynomial ring in x,y,z over R[d] and the commutative algebra...

However that might be ok and in this case I assume it's mostly a practical change for the consistency of sage/category. Strictly speaking the base_ring should maybe also be R[d] and not R and we would need another name like "other_base_ring" for the previous base_ring (which is used in the construction logic e.g.). But if everything still works properly your solution is better :-).

''Also if necessary "d" could always be considered as e.g. an element of R.
Or one could just set "d"=1 and then remember to replace q by q/d in the end (and maybe add an appropriate power of d in front).''

Regards
Jonas

P.S. If there are questions about my implementation I offer my help. :-)



---

archive/issue_comments_320923.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-12T18:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22964#issuecomment-320923",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059885.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-12T18:01:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22964",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22964#event-59885"
}
```
