# Issue 12163: change "#optional - jones_database" to "#optional - database_jones_numfield"

Issue created by migration from Trac.

Original creator: was

Original creation time: 2012-01-21 20:55:35

Assignee: mvngu

The doctests in `devel/sage/sage/databases/jones.py` are marked "#optional - jones_database".  These test the optional package `database_jones_numfield-v4.spkg`, so they *should* be labeled "#optional - database_jones_numfield". 

For the record, this was my fault (William Stein) in #4588.  Sorry.


---

Comment by was created at 2012-01-21 21:04:28

Also, similarly rename stein_watkins_database:


```
databases/stein_watkins.py:51:    sage: C = d.next()                                   # optional - stein_watkins_database
databases/stein_watkins.py:52:    sage: C                                              # optional - stein_watkins_database
databases/stein_watkins.py:54:    sage: d.next()                                       # optional - stein_watkins_database
databases/stein_watkins.py:56:    sage: d.next()                                       # optional - stein_watkins_database
```



---

Comment by was created at 2012-01-21 21:29:31

Similar for Macaulay2, where the markings are all over the place!  It should be "# optional - macaulay2" everywhere, but M2, nothing, and macaulay2 appear in various places:

```
sage: search_src('macaulay2')                                                         
...
modules/free_module.py:1936:            sage: macaulay2(R) # optional
...
rings/polynomial/multi_polynomial_element.py:298:#            sage: macaulay2(R)                      # optional, requires M2
...
```



---

Comment by ddrake created at 2012-05-25 18:13:55

for databases


---

Comment by ddrake created at 2012-05-25 18:15:38

Changing status from new to needs_review.


---

Attachment

This fixes the Jones and Stein-Watkins files. I'll work on another patch for Macaulay2.


---

Comment by ddrake created at 2012-05-25 18:15:38

Changing keywords from "" to "sd40.5".


---

Comment by benjaminfjones created at 2012-05-25 20:03:24

For `sage/databases/jones.py` with the patch applied:

```
$ ../../sage -t -verbose sage/databases/jones.py
...
21 passed and 0 failed.

$ ../../sage -t -verbose -optional sage/databases/jones.py
...
35 passed and 0 failed.

$ ../../sage -t -verbose -only-optional=database_jones_numfield  sage/databases/jones.py
...
31 passed and 0 failed.
```


That looks correct to me. I'm testing the stein_watkins database now.


---

Comment by benjaminfjones created at 2012-05-25 20:20:55

For `sage/databases/stein_watkins.py` with the patch applied:

```
$ ../../sage -t -verbose sage/databases/stein_watkins.py
...
14 passed and 0 failed.
```


with `database_stein_watkins_mini.p0` optional package installed:


```
$ ../../sage -t -verbose -optional sage/databases/stein_watkins.py
...
37 passed and 0 failed.

$ ../../sage -t -verbose -only-optional=database_stein_watkins sage/databases/stein_watkins.py
...
28 passed and 0 failed.
```



---

Attachment


---

Comment by ddrake created at 2012-05-25 20:22:41

The Macaulay2 patch seems intimidating, but it should only change `#optional` doctest tags and delete trailing whitespace.


---

Comment by benjaminfjones created at 2012-05-25 20:42:04

The Macaulay2 patch is going to be tough (or impossible) to review until the macaulay spkg can be built. See #11710.


---

Comment by ddrake created at 2012-05-25 21:31:12

Replying to [comment:7 benjaminfjones]:
> The Macaulay2 patch is going to be tough (or impossible) to review until the macaulay spkg can be built. See #11710. 

In that case, let's ignore that patch. Apply only attachment:12335.patch and review that.


---

Comment by benjaminfjones created at 2012-05-25 21:45:07

In that case, positive review. Everything looks good.


---

Comment by benjaminfjones created at 2012-05-25 21:45:07

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-06-02 12:13:24

Resolution: fixed
