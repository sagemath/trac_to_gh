# Issue 27585: Update configure with checks for mpfr, mpc, and ntl

archive/issues_027585.json:
```json
{
    "body": "CC:  @dimpase\n\nKeywords: spkg-configure mpfr mpc ntl\n\nThis ticket bundles together #27258, #27259, and #27265 in such a way that the configure tarball is updated to contain the configure changes from each of those tickets.\n\nOnce all three have been merged (or at the same time) this ticket can also be merged to bump the configure version.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27822\n\n",
    "created_at": "2019-05-13T14:41:50Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Update configure with checks for mpfr, mpc, and ntl",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27585",
    "user": "@embray"
}
```
CC:  @dimpase

Keywords: spkg-configure mpfr mpc ntl

This ticket bundles together #27258, #27259, and #27265 in such a way that the configure tarball is updated to contain the configure changes from each of those tickets.

Once all three have been merged (or at the same time) this ticket can also be merged to bump the configure version.

Issue created by migration from https://trac.sagemath.org/ticket/27822





---

archive/issue_comments_389090.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-13T15:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389090",
    "user": "@embray"
}
```

New commits:



---

archive/issue_comments_389091.json:
```json
{
    "body": "It occurs to me actually that we probably *can't* merge any of #27258, #27259, #27265 without this ticket: Due to the changes in `src/bin/sage-env-config.in` Sage won't build properly anymore without an updated `configure` script that makes the necessary replacements in that file.\n\nTherefore, I believe the other tickets should just be closed, and only this one merged.",
    "created_at": "2019-05-13T15:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389091",
    "user": "@embray"
}
```

It occurs to me actually that we probably *can't* merge any of #27258, #27259, #27265 without this ticket: Due to the changes in `src/bin/sage-env-config.in` Sage won't build properly anymore without an updated `configure` script that makes the necessary replacements in that file.

Therefore, I believe the other tickets should just be closed, and only this one merged.



---

archive/issue_comments_389092.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-13T15:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389092",
    "user": "@embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389093.json:
```json
{
    "body": "please add the last commit on #27265 :\nhttps://git.sagemath.org/sage.git/commit/?id=e025f888872035a04bcdbd047409c0e99a92dd14",
    "created_at": "2019-05-13T16:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389093",
    "user": "@dimpase"
}
```

please add the last commit on #27265 :
https://git.sagemath.org/sage.git/commit/?id=e025f888872035a04bcdbd047409c0e99a92dd14



---

archive/issue_comments_389094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-17T12:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389094",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_389095.json:
```json
{
    "body": "Updated configure",
    "created_at": "2019-05-17T12:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389095",
    "user": "@embray"
}
```

Updated configure



---

archive/issue_comments_389096.json:
```json
{
    "body": "Attachment [configure-319.tar.gz](tarball://root/attachments/some-uuid/ticket27822/configure-319.tar.gz) by @embray created at 2019-05-17 12:04:34\n\nRebased again on #27265 and updated the configure tarball.  Please double-check I didn't make any mistakes.",
    "created_at": "2019-05-17T12:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389096",
    "user": "@embray"
}
```

Attachment [configure-319.tar.gz](tarball://root/attachments/some-uuid/ticket27822/configure-319.tar.gz) by @embray created at 2019-05-17 12:04:34

Rebased again on #27265 and updated the configure tarball.  Please double-check I didn't make any mistakes.



---

archive/issue_comments_389097.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-17T15:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389097",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389098.json:
```json
{
    "body": "this appears to be good.",
    "created_at": "2019-05-17T15:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389098",
    "user": "@dimpase"
}
```

this appears to be good.



---

archive/issue_comments_389099.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-05-18T18:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389099",
    "user": "@dimpase"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_389100.json:
```json
{
    "body": "here one has to cherry pick the last commit from public/packages/ntlconf - the one\nthat adds missing quotes, namely\n\n```\n892143a2d89591044dc20a3c87ecccaffdd46dd7\n```\n\nand redo the configure tarball dance...",
    "created_at": "2019-05-18T18:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389100",
    "user": "@dimpase"
}
```

here one has to cherry pick the last commit from public/packages/ntlconf - the one
that adds missing quotes, namely

```
892143a2d89591044dc20a3c87ecccaffdd46dd7
```

and redo the configure tarball dance...



---

archive/issue_comments_389101.json:
```json
{
    "body": "configure-319 is the current confball, you always need to increment it",
    "created_at": "2019-05-20T18:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389101",
    "user": "@vbraun"
}
```

configure-319 is the current confball, you always need to increment it



---

archive/issue_comments_389102.json:
```json
{
    "body": "Please do a full rebuild BEFORE you set any of #27258, #27259, #27265, #27822 back to positive review.",
    "created_at": "2019-05-20T18:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389102",
    "user": "@vbraun"
}
```

Please do a full rebuild BEFORE you set any of #27258, #27259, #27265, #27822 back to positive review.



---

archive/issue_comments_389103.json:
```json
{
    "body": "I've rebuilt these tickets dozens of times, it's never clear w.r.t. the release process whether they will be picked in 10 minutes after they are set to positive review, or sit idle for weeks, bit-rotting.",
    "created_at": "2019-05-20T18:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389103",
    "user": "@dimpase"
}
```

I've rebuilt these tickets dozens of times, it's never clear w.r.t. the release process whether they will be picked in 10 minutes after they are set to positive review, or sit idle for weeks, bit-rotting.



---

archive/issue_comments_389104.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-20T23:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389104",
    "user": "@dimpase"
}
```

New commits:



---

archive/issue_comments_389105.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-21T07:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389105",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389106.json:
```json
{
    "body": "320 is used for 8.8.beta6, can you resolve the merge conflict and make a v321",
    "created_at": "2019-05-22T17:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389106",
    "user": "@vbraun"
}
```

320 is used for 8.8.beta6, can you resolve the merge conflict and make a v321



---

archive/issue_comments_389107.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-05-22T17:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389107",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_389108.json:
```json
{
    "body": "sure, as soon as there is a public 8.8.beta6 branch available (nether trac nor github have it)",
    "created_at": "2019-05-22T18:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389108",
    "user": "@dimpase"
}
```

sure, as soon as there is a public 8.8.beta6 branch available (nether trac nor github have it)



---

archive/issue_comments_389109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-22T18:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389109",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_389110.json:
```json
{
    "body": "rebased over 8.8.beta6, new config tarball (version 321)",
    "created_at": "2019-05-22T19:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389110",
    "user": "@dimpase"
}
```

rebased over 8.8.beta6, new config tarball (version 321)



---

archive/issue_comments_389111.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-22T19:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389111",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_389112.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-22T22:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389112",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389113.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-25T08:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27585#issuecomment-389113",
    "user": "@vbraun"
}
```

Resolution: fixed
