# Issue 21116: get rid of guess_category

archive/issues_021116.json:
```json
{
    "body": "CC:  @tscrim @nthiery simonking @mkoeppe\n\nWe remove the quite fragile `guess_category` from `sage.structure.category_object.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21353\n\n",
    "created_at": "2016-08-26T22:39:43Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "get rid of guess_category",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21116",
    "user": "https://github.com/videlec"
}
```
CC:  @tscrim @nthiery simonking @mkoeppe

We remove the quite fragile `guess_category` from `sage.structure.category_object.

Issue created by migration from https://trac.sagemath.org/ticket/21353





---

archive/issue_comments_292215.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-26T22:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292215",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_292216.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-26T22:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292216",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_292217.json:
```json
{
    "body": "+1 on getting rid of this kludge if we finally can!\n\nAbout the change `Parent.__init__` -> `Ring.__init__`: if this does not induce complications, I would tend to use the occasion to not have `InfinityRing` inherit from `Ring` and instead pass `category=Rings()` to `Parent.__init__`.\n\nI don't expect a need for pure speed for this parent, right? Of course the elements could still belong to `RingElement`.",
    "created_at": "2016-08-27T05:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292217",
    "user": "https://github.com/nthiery"
}
```

+1 on getting rid of this kludge if we finally can!

About the change `Parent.__init__` -> `Ring.__init__`: if this does not induce complications, I would tend to use the occasion to not have `InfinityRing` inherit from `Ring` and instead pass `category=Rings()` to `Parent.__init__`.

I don't expect a need for pure speed for this parent, right? Of course the elements could still belong to `RingElement`.



---

archive/issue_comments_292218.json:
```json
{
    "body": "Replying to [comment:4 nthiery]:\n> About the change `Parent.__init__` -> `Ring.__init__`: if this does not induce complications, I would tend to use the occasion to not have `InfinityRing` inherit from `Ring` and instead pass `category=Rings()` to `Parent.__init__`.\n\n\nDoing that change would remove some functionality from `InfinityRing` (although I highly, highly doubt anyone is creating things like ideals of the infinity ring). Although that would be something\n\n> I don't expect a need for pure speed for this parent, right? Of course the elements could still belong to `RingElement`. \n\n\nI believe we have this parent (essentially) nailed in memory at startup because of `oo`. So I don't think this is an issue at the end of the day.",
    "created_at": "2016-08-27T15:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292218",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:4 nthiery]:
> About the change `Parent.__init__` -> `Ring.__init__`: if this does not induce complications, I would tend to use the occasion to not have `InfinityRing` inherit from `Ring` and instead pass `category=Rings()` to `Parent.__init__`.


Doing that change would remove some functionality from `InfinityRing` (although I highly, highly doubt anyone is creating things like ideals of the infinity ring). Although that would be something

> I don't expect a need for pure speed for this parent, right? Of course the elements could still belong to `RingElement`. 


I believe we have this parent (essentially) nailed in memory at startup because of `oo`. So I don't think this is an issue at the end of the day.



---

archive/issue_comments_292219.json:
```json
{
    "body": "It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.",
    "created_at": "2016-08-27T22:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292219",
    "user": "https://github.com/videlec"
}
```

It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.



---

archive/issue_comments_292220.json:
```json
{
    "body": "Replying to [comment:6 vdelecroix]:\n> It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.\n\n\nAh, shoot. That would be easy to fix by moving up those methods to\n`Rings`, which anyway we want to do at some point. But then that's\nstarting to shift beyond the scope of this ticket.\n\nAs an intermediate step, one could keep for now the inheritance from\n`Ring`, and pass a `category=Rings()` argument to `Parent`.\n\nAs you feel like guys!",
    "created_at": "2016-08-28T06:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292220",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:6 vdelecroix]:
> It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.


Ah, shoot. That would be easy to fix by moving up those methods to
`Rings`, which anyway we want to do at some point. But then that's
starting to shift beyond the scope of this ticket.

As an intermediate step, one could keep for now the inheritance from
`Ring`, and pass a `category=Rings()` argument to `Parent`.

As you feel like guys!



---

archive/issue_comments_292221.json:
```json
{
    "body": "I am setting #20686 as a dependency since it is very likely to create merge failures.\n\nReplying to [comment:7 nthiery]:\n> Replying to [comment:6 vdelecroix]:\n> > It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.\n\n> \n> Ah, shoot. That would be easy to fix by moving up those methods to\n> `Rings`, which anyway we want to do at some point. But then that's\n> starting to shift beyond the scope of this ticket.\n\n\nIf you do open a ticket for that, I would be happy to review.\n\n> As an intermediate step, one could keep for now the inheritance from\n> `Ring`, and pass a `category=Rings()` argument to `Parent`.\n\n\nWell be better to get rid of `sage.structure.rings.Ring` in one step.",
    "created_at": "2016-08-31T14:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292221",
    "user": "https://github.com/videlec"
}
```

I am setting #20686 as a dependency since it is very likely to create merge failures.

Replying to [comment:7 nthiery]:
> Replying to [comment:6 vdelecroix]:
> > It does introduce complications: removing the inheritance from `Ring` causes error due to the absence of methods `is_integral_domain` and `is_field`. Some doctests are creating vector/matrices over the infinity ring.

> 
> Ah, shoot. That would be easy to fix by moving up those methods to
> `Rings`, which anyway we want to do at some point. But then that's
> starting to shift beyond the scope of this ticket.


If you do open a ticket for that, I would be happy to review.

> As an intermediate step, one could keep for now the inheritance from
> `Ring`, and pass a `category=Rings()` argument to `Parent`.


Well be better to get rid of `sage.structure.rings.Ring` in one step.



---

archive/issue_comments_292222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-09-19T05:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_292223.json:
```json
{
    "body": "rebased",
    "created_at": "2016-09-19T06:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292223",
    "user": "https://github.com/videlec"
}
```

rebased



---

archive/issue_comments_292224.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-19T16:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292224",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292225.json:
```json
{
    "body": "Replying to [comment:10 vdelecroix]:\n> rebased\n\n...on an old version of Sage.\n\nStill needs rebase.",
    "created_at": "2016-09-19T16:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292225",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:10 vdelecroix]:
> rebased

...on an old version of Sage.

Still needs rebase.



---

archive/issue_comments_292226.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-10-13T13:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_292227.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-13T13:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292227",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292228.json:
```json
{
    "body": "rebased on rc1",
    "created_at": "2016-10-13T13:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292228",
    "user": "https://github.com/videlec"
}
```

rebased on rc1



---

archive/issue_comments_292229.json:
```json
{
    "body": "If this passes doctests, I have no objections. Nicolas?",
    "created_at": "2016-10-13T13:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292229",
    "user": "https://github.com/jdemeyer"
}
```

If this passes doctests, I have no objections. Nicolas?



---

archive/issue_comments_292230.json:
```json
{
    "body": "Maybe two details: we should add a check like\n\n```\nif not isinstance(category, Category)\n    raise TypeError(f\"invalid category {category} for {self}\")\n```\n(or at least check that `category is not None`)\n\nAnd remove the \"or None\" from the documentation line\n\n```\n- ``category`` -- a category, or list or tuple thereof, or ``None``\n```",
    "created_at": "2016-10-13T13:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292230",
    "user": "https://github.com/jdemeyer"
}
```

Maybe two details: we should add a check like

```
if not isinstance(category, Category)
    raise TypeError(f"invalid category {category} for {self}")
```
(or at least check that `category is not None`)

And remove the "or None" from the documentation line

```
- ``category`` -- a category, or list or tuple thereof, or ``None``
```



---

archive/issue_comments_292231.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-13T13:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292231",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292232.json:
```json
{
    "body": "This modification makes Sage crash on startup...\n\n```\nTypeError: invalid category None for Parent of MIPVariables\n```",
    "created_at": "2016-10-13T13:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292232",
    "user": "https://github.com/videlec"
}
```

This modification makes Sage crash on startup...

```
TypeError: invalid category None for Parent of MIPVariables
```



---

archive/issue_comments_292233.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-13T13:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292233",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292234.json:
```json
{
    "body": "Perhaps we should raise a warning? Also, I agree that we should remove `None` from the doc because we should not initialize parents without categories, or have the default be `Sets()`.",
    "created_at": "2016-10-13T13:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292234",
    "user": "https://github.com/tscrim"
}
```

Perhaps we should raise a warning? Also, I agree that we should remove `None` from the doc because we should not initialize parents without categories, or have the default be `Sets()`.



---

archive/issue_comments_292235.json:
```json
{
    "body": "Replying to [comment:18 vdelecroix]:\n> This modification makes Sage crash on startup...\n> \n> ```\n> TypeError: invalid category None for Parent of MIPVariables\n> ```\n\n\nThat shows to me that this ticket isn't ready. I think we should only remove `guess_category` when everything is actually initialized with a category.",
    "created_at": "2016-10-17T07:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292235",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:18 vdelecroix]:
> This modification makes Sage crash on startup...
> 
> ```
> TypeError: invalid category None for Parent of MIPVariables
> ```


That shows to me that this ticket isn't ready. I think we should only remove `guess_category` when everything is actually initialized with a category.



---

archive/issue_comments_292236.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-17T07:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292236",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292237.json:
```json
{
    "body": "Matthias, do you know if `MIPVariables` needs to be a parent, and if so, could the category for that parent be simply changed to `Sets`?",
    "created_at": "2016-10-17T14:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292237",
    "user": "https://github.com/tscrim"
}
```

Matthias, do you know if `MIPVariables` needs to be a parent, and if so, could the category for that parent be simply changed to `Sets`?



---

archive/issue_comments_292238.json:
```json
{
    "body": "Replying to [comment:22 tscrim]:\n> Matthias, do you know if `MIPVariables` needs to be a parent\n\n\nA Sage `Element` class requires a `Parent` class so I guess the answer is \"yes\" here.\n\n> could the category for that parent be simply changed to `Sets`?\n\n\nProbably also \"yes\".",
    "created_at": "2016-10-17T15:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292238",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:22 tscrim]:
> Matthias, do you know if `MIPVariables` needs to be a parent


A Sage `Element` class requires a `Parent` class so I guess the answer is "yes" here.

> could the category for that parent be simply changed to `Sets`?


Probably also "yes".



---

archive/issue_comments_292239.json:
```json
{
    "body": "So, if I explicit pass `Sets` as the category for that, make `set_generic` have a default category of `Sets`, I still have a can of worms between changing the doctests (trivial) to the more non-trivial parent of interfaces, e.g., I get:\n\n```\nTypeError: invalid category None for C library interface to GAP\n```\n\nWhat are people's thoughts on making the default category for `Parent` be `Sets`. At least this seemed to generate less individual issues...",
    "created_at": "2016-10-17T18:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292239",
    "user": "https://github.com/tscrim"
}
```

So, if I explicit pass `Sets` as the category for that, make `set_generic` have a default category of `Sets`, I still have a can of worms between changing the doctests (trivial) to the more non-trivial parent of interfaces, e.g., I get:

```
TypeError: invalid category None for C library interface to GAP
```

What are people's thoughts on making the default category for `Parent` be `Sets`. At least this seemed to generate less individual issues...



---

archive/issue_comments_292240.json:
```json
{
    "body": "Replying to [comment:22 tscrim]:\n> Matthias, do you know if `MIPVariables` needs to be a parent, and if so, could the category for that parent be simply changed to `Sets`?\n\nA `MIPVariable` is a strange thing at the moment. In particular it is mutable. Currently there is a parent class called `MIPVariableParent`. Not sure where it fits with regards to categories.",
    "created_at": "2016-10-17T20:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292240",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:22 tscrim]:
> Matthias, do you know if `MIPVariables` needs to be a parent, and if so, could the category for that parent be simply changed to `Sets`?

A `MIPVariable` is a strange thing at the moment. In particular it is mutable. Currently there is a parent class called `MIPVariableParent`. Not sure where it fits with regards to categories.



---

archive/issue_comments_292241.json:
```json
{
    "body": "As far as I understand, the only reason why `MIPVariables` is a parent is because it benefits from coercion (like scalar multiplication). And as far as I know, the only way to use coercion is to use the `Category`/`Parent`/`Element` framework.",
    "created_at": "2016-10-17T21:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292241",
    "user": "https://github.com/videlec"
}
```

As far as I understand, the only reason why `MIPVariables` is a parent is because it benefits from coercion (like scalar multiplication). And as far as I know, the only way to use coercion is to use the `Category`/`Parent`/`Element` framework.



---

archive/issue_comments_292242.json:
```json
{
    "body": "Replying to [comment:26 vdelecroix]:\n> As far as I understand, the only reason why `MIPVariables` is a parent is because it benefits from coercion (like scalar multiplication). And as far as I know, the only way to use coercion is to use the `Category`/`Parent`/`Element` framework.\n\n\nI think we could just lift the necessary parts directly into `MIPVariables` as it is an action, and IIRC, the coercion framework has some support for things that are not parents (e.g., python `int`). That would make a good follow-up ticket.",
    "created_at": "2016-10-17T21:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292242",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:26 vdelecroix]:
> As far as I understand, the only reason why `MIPVariables` is a parent is because it benefits from coercion (like scalar multiplication). And as far as I know, the only way to use coercion is to use the `Category`/`Parent`/`Element` framework.


I think we could just lift the necessary parts directly into `MIPVariables` as it is an action, and IIRC, the coercion framework has some support for things that are not parents (e.g., python `int`). That would make a good follow-up ticket.



---

archive/issue_comments_292243.json:
```json
{
    "body": "I have no idea why, but it seems that the problems on this ticket no longer occur. I am deprecating `guess_category` on #24109, so this ticket can be closed as duplicate.",
    "created_at": "2017-10-26T11:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292243",
    "user": "https://github.com/jdemeyer"
}
```

I have no idea why, but it seems that the problems on this ticket no longer occur. I am deprecating `guess_category` on #24109, so this ticket can be closed as duplicate.



---

archive/issue_comments_292244.json:
```json
{
    "body": "Replying to [comment:28 jdemeyer]:\n> so this ticket can be closed as duplicate.\n\n\n...unless you want to keep some of the other changes that you did on this ticket.",
    "created_at": "2017-10-26T12:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292244",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:28 jdemeyer]:
> so this ticket can be closed as duplicate.


...unless you want to keep some of the other changes that you did on this ticket.



---

archive/issue_comments_292245.json:
```json
{
    "body": "The only current changes I'd really want to keep are in `rings/infinity.py` so infinity rings properly declare their categories.\n\nAlso, from looking at the code for `MIPVariables`, the parent probably should be removed and instead `MIPVariable` just implemented as `__mul__` and `__rmul__` as a subclass of `SageObject`.\n\nWant me to do both of those things here on this ticket and make this independent of #24109?",
    "created_at": "2017-10-27T04:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292245",
    "user": "https://github.com/tscrim"
}
```

The only current changes I'd really want to keep are in `rings/infinity.py` so infinity rings properly declare their categories.

Also, from looking at the code for `MIPVariables`, the parent probably should be removed and instead `MIPVariable` just implemented as `__mul__` and `__rmul__` as a subclass of `SageObject`.

Want me to do both of those things here on this ticket and make this independent of #24109?



---

archive/issue_comments_292246.json:
```json
{
    "body": "Replying to [comment:30 tscrim]:\n> Want me to do both of those things here on this ticket and make this independent of #24109?\n\n\nI don't know who you are asking...\n\nI would say: feel free to do that or to close this ticket.",
    "created_at": "2017-10-27T10:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292246",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:30 tscrim]:
> Want me to do both of those things here on this ticket and make this independent of #24109?


I don't know who you are asking...

I would say: feel free to do that or to close this ticket.



---

archive/issue_comments_292247.json:
```json
{
    "body": "Replying to [comment:31 jdemeyer]:\n> Replying to [comment:30 tscrim]:\n> > Want me to do both of those things here on this ticket and make this independent of #24109?\n\n> \n> I don't know who you are asking...\n\n\nMore to you since you did #24109.\n\n> I would say: feel free to do that or to close this ticket.\n\n\nI will go ahead and do that tomorrow (I am now on Australia time) at some point.",
    "created_at": "2017-10-27T13:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292247",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:31 jdemeyer]:
> Replying to [comment:30 tscrim]:
> > Want me to do both of those things here on this ticket and make this independent of #24109?

> 
> I don't know who you are asking...


More to you since you did #24109.

> I would say: feel free to do that or to close this ticket.


I will go ahead and do that tomorrow (I am now on Australia time) at some point.



---

archive/issue_comments_292248.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-29T07:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292248",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_056814.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-29T07:13:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21116#event-56814"
}
```



---

archive/issue_comments_292249.json:
```json
{
    "body": "New branch that removes the parent for MIP variables and does the `Ring.__init__` for initializing the category of infinity rings.\n\n---\nNew commits:",
    "created_at": "2017-10-29T07:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292249",
    "user": "https://github.com/tscrim"
}
```

New branch that removes the parent for MIP variables and does the `Ring.__init__` for initializing the category of infinity rings.

---
New commits:



---

archive/issue_comments_292250.json:
```json
{
    "body": "`return NotImplemented` instead of `raise TypeError`. Also I would avoid the name `self` in arithmetic slot functions: use `left` and `right` instead of `self` and `m`.",
    "created_at": "2017-10-29T07:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292250",
    "user": "https://github.com/jdemeyer"
}
```

`return NotImplemented` instead of `raise TypeError`. Also I would avoid the name `self` in arithmetic slot functions: use `left` and `right` instead of `self` and `m`.



---

archive/issue_comments_292251.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-29T08:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292251",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292252.json:
```json
{
    "body": "Both good points. Changed.",
    "created_at": "2017-10-29T08:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292252",
    "user": "https://github.com/tscrim"
}
```

Both good points. Changed.



---

archive/issue_comments_292253.json:
```json
{
    "body": "Don't use `from sage.matrix.matrix import is_Matrix`. Import it from `sage.structure.element` instead. See #24096",
    "created_at": "2017-10-30T15:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292253",
    "user": "https://github.com/jdemeyer"
}
```

Don't use `from sage.matrix.matrix import is_Matrix`. Import it from `sage.structure.element` instead. See #24096



---

archive/issue_comments_292254.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-30T16:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292254",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292255.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-30T22:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292256.json:
```json
{
    "body": "Right...somehow I should put 2 and 2 together and get 4, Sage tells me that is true. :P",
    "created_at": "2017-10-30T22:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292256",
    "user": "https://github.com/tscrim"
}
```

Right...somehow I should put 2 and 2 together and get 4, Sage tells me that is true. :P



---

archive/issue_comments_292257.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-30T22:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292257",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292258.json:
```json
{
    "body": "I didn't say that this has to depend on #24096. I only asked to write it in such a way that it doesn't conflict with #24096.",
    "created_at": "2017-10-31T08:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292258",
    "user": "https://github.com/jdemeyer"
}
```

I didn't say that this has to depend on #24096. I only asked to write it in such a way that it doesn't conflict with #24096.



---

archive/issue_comments_292259.json:
```json
{
    "body": "I didn't see how that was possible because this moves two calls to `is_Matrix` and their imports (even if it was not consolidated into 1 top-level import). Really #24096 is positively reviewed, so it's not a big deal.",
    "created_at": "2017-10-31T08:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292259",
    "user": "https://github.com/tscrim"
}
```

I didn't see how that was possible because this moves two calls to `is_Matrix` and their imports (even if it was not consolidated into 1 top-level import). Really #24096 is positively reviewed, so it's not a big deal.



---

archive/issue_comments_292260.json:
```json
{
    "body": "Replying to [comment:42 tscrim]:\n> I didn't see how that was possible because this moves two calls to `is_Matrix` and their imports\n\n\nOK, I thought that you only *added* imports in this patch, but you did indeed *move* an import.",
    "created_at": "2017-10-31T08:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292260",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:42 tscrim]:
> I didn't see how that was possible because this moves two calls to `is_Matrix` and their imports


OK, I thought that you only *added* imports in this patch, but you did indeed *move* an import.



---

archive/issue_comments_292261.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-28T13:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292261",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292262.json:
```json
{
    "body": "Merge conflict. Note that you may want to wait until the next beta when #24096 is merged.",
    "created_at": "2017-11-28T13:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292262",
    "user": "https://github.com/jdemeyer"
}
```

Merge conflict. Note that you may want to wait until the next beta when #24096 is merged.



---

archive/issue_comments_292263.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-30T02:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292264.json:
```json
{
    "body": "Rebased",
    "created_at": "2017-12-30T02:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292264",
    "user": "https://github.com/tscrim"
}
```

Rebased



---

archive/issue_events_056815.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-30T02:38:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21116#event-56815"
}
```



---

archive/issue_events_056816.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-30T02:38:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21116#event-56816"
}
```



---

archive/issue_comments_292265.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-30T02:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292265",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-30T10:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292267.json:
```json
{
    "body": "Added an extra doctest for checking about the base ring being taken into account.\n\nI am happy with the current version.",
    "created_at": "2017-12-30T10:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292267",
    "user": "https://github.com/videlec"
}
```

Added an extra doctest for checking about the base ring being taken into account.

I am happy with the current version.



---

archive/issue_comments_292268.json:
```json
{
    "body": "LGTM, thanks.",
    "created_at": "2017-12-30T21:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292268",
    "user": "https://github.com/tscrim"
}
```

LGTM, thanks.



---

archive/issue_comments_292269.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-12-30T21:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292269",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_056817.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-01T14:20:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21116#event-56817"
}
```



---

archive/issue_comments_292270.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-01T14:20:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21116#issuecomment-292270",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
