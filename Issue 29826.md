# Issue 29826: Upgrade Maxima to 5.44.0

archive/issues_029826.json:
```json
{
    "body": "CC:  dimpase fbissey @timokau saraedum slelievre arojas kcrisman nbruin paulmasson\n\nUpstream tarball can be downloaded via https://sourceforge.net/projects/maxima/files/Maxima-source/5.44.0-source/\n\nIssue created by migration from https://trac.sagemath.org/ticket/30063\n\n",
    "created_at": "2020-07-04T11:18:41Z",
    "labels": [
        "packages: standard",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Upgrade Maxima to 5.44.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29826",
    "user": "pbruin"
}
```
CC:  dimpase fbissey @timokau saraedum slelievre arojas kcrisman nbruin paulmasson

Upstream tarball can be downloaded via https://sourceforge.net/projects/maxima/files/Maxima-source/5.44.0-source/

Issue created by migration from https://trac.sagemath.org/ticket/30063





---

archive/issue_comments_423677.json:
```json
{
    "body": "Patches need to be removed or updated.\n----\nLast 10 new commits:",
    "created_at": "2020-07-06T00:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423677",
    "user": "mkoeppe"
}
```

Patches need to be removed or updated.
----
Last 10 new commits:



---

archive/issue_comments_423678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-07-19T06:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423678",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_423679.json:
```json
{
    "body": "Removing `bugfix3629.patch`, which is in 5.44.0\n\n`0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch` does not apply. 5.44.0 has a different (simpler) change in this code.",
    "created_at": "2020-07-19T06:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423679",
    "user": "mkoeppe"
}
```

Removing `bugfix3629.patch`, which is in 5.44.0

`0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch` does not apply. 5.44.0 has a different (simpler) change in this code.



---

archive/issue_comments_423680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-19T06:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423681.json:
```json
{
    "body": "On macOS,\n\n```\n[maxima-5.44.0] /bin/bash /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/local/var/tmp/sage/build/maxima-5.44.0/src/missing makeinfo --html -c TEXI2HTML=1 --split=chapter --document-lang=en --output=. --css-include=../../../doc/info/manual.css --init-file  ../../../doc/info/texi2html.init  xmaxima.texi\n[maxima-5.44.0] makeinfo: invalid option -- c\n[maxima-5.44.0] Try `makeinfo --help' for more information.\n```\n",
    "created_at": "2020-07-19T06:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423681",
    "user": "mkoeppe"
}
```

On macOS,

```
[maxima-5.44.0] /bin/bash /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/local/var/tmp/sage/build/maxima-5.44.0/src/missing makeinfo --html -c TEXI2HTML=1 --split=chapter --document-lang=en --output=. --css-include=../../../doc/info/manual.css --init-file  ../../../doc/info/texi2html.init  xmaxima.texi
[maxima-5.44.0] makeinfo: invalid option -- c
[maxima-5.44.0] Try `makeinfo --help' for more information.
```




---

archive/issue_comments_423682.json:
```json
{
    "body": "This is `/usr/bin/makeinfo`\n\n```\n$ makeinfo --version\nmakeinfo (GNU texinfo) 4.8\n\nCopyright (C) 2004 Free Software Foundation, Inc.\n```\n",
    "created_at": "2020-07-19T06:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423682",
    "user": "mkoeppe"
}
```

This is `/usr/bin/makeinfo`

```
$ makeinfo --version
makeinfo (GNU texinfo) 4.8

Copyright (C) 2004 Free Software Foundation, Inc.
```




---

archive/issue_comments_423683.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-19T07:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423683",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423684.json:
```json
{
    "body": "Builds OK now on macOS. Haven't tested anything else",
    "created_at": "2020-07-19T07:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423684",
    "user": "mkoeppe"
}
```

Builds OK now on macOS. Haven't tested anything else



---

archive/issue_comments_423685.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/174422230",
    "created_at": "2020-07-19T07:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423685",
    "user": "mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/174422230



---

archive/issue_comments_423686.json:
```json
{
    "body": "Replying to [comment:12 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[07aa2f9](https://git.sagemath.org/sage.git/commit/?id=07aa2f93345d2cecee75e074dc9bbcb22074129c)||`build/pkgs/maxima/spkg-install.in: New workaround for makeinfo trouble`||\n\ndon't  they have an option not to build docs?",
    "created_at": "2020-07-19T07:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423686",
    "user": "dimpase"
}
```

Replying to [comment:12 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[07aa2f9](https://git.sagemath.org/sage.git/commit/?id=07aa2f93345d2cecee75e074dc9bbcb22074129c)||`build/pkgs/maxima/spkg-install.in: New workaround for makeinfo trouble`||

don't  they have an option not to build docs?



---

archive/issue_comments_423687.json:
```json
{
    "body": "Unfortunately they don't.",
    "created_at": "2020-07-19T14:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423687",
    "user": "mkoeppe"
}
```

Unfortunately they don't.



---

archive/issue_comments_423688.json:
```json
{
    "body": "These are the test failures I get downstream (using system maxima):\n\n\n```\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py\", line 225, in sage.interfaces.maxima_abstract.MaximaAbstract.example\nFailed example:\n    maxima.example('arrays')\nExpected:\n    a[n]:=n*a[n-1]\n                                    a  := n a\n                                     n       n - 1\n    a[0]:1\n    a[5]\n                                          120\n    a[n]:=n\n    a[6]\n                                           6\n    a[4]\n                                          24\n                                         done\nGot:\n                                     n       n - 1\n    a[0]:1\n    a[5]\n                                          120\n    a[n]:=n\n    a[6]\n                                           6\n    a[4]\n                                          24\n                                         done\n    <BLANKLINE>\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py\", line 283, in sage.interfaces.maxima_abstract.MaximaAbstract.completions\nFailed example:\n    sorted(maxima.completions('gc', verbose=False))\nExpected:\n    ['gcd', 'gcdex', 'gcfactor', 'gctime']\nGot:\n    ['gcd', 'gcd\\\\-impl', 'gcdex', 'gcfactor', 'gcfactor\\\\-impl', 'gctime']\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx\", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric\nFailed example:\n    hypergeometric_M(1, 3, x).simplify_hypergeometric()\nExpected:\n    -2*(x - e^x + 1)/x^2\nGot:\n    2*e^x*gamma_incomplete_lower(2, x)/x^2\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/symbolic/integration/integral.py\", line 864, in sage.symbolic.integration.integral.integrate\nFailed example:\n    a = integral(log(cot(x) - 1), x, 0, pi/4); a  # long time (about 6 s)\nExpected:\n    -1/4*pi*log(2) - 1/2*I*dilog(I + 1) + 1/2*I*dilog(-I + 1) + 1/2*I*dilog(1/2*I + 1/2) - 1/2*I*dilog(-1/2*I + 1/2)\nGot:\n    1/4*pi*(I*pi + log(2)) - 1/2*pi*log(2) - 1/2*I*dilog(I + 1) + 1/2*I*dilog(-I + 1) + 1/2*I*dilog(1/2*I + 1/2) - 1/2*I*dilog(-1/2*I + 1/2)\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/symbolic/integration/integral.py\", line 866, in sage.symbolic.integration.integral.integrate\nFailed example:\n    abs(N(a - pi*log(2)/8)) < 1e-15  # long time\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\n\n\nThe first one needs a readjustment of the number of removed lines in https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/interfaces/maxima_abstract.py#n183\n\nThe ones in `integration/integral.py` are a known upstream issue since 5.43. The corresponding tests in maxima are disabled as known to fail, so maybe they can be tagged as known bug here.\n\nThe other two seem harmless.",
    "created_at": "2020-07-19T16:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423688",
    "user": "arojas"
}
```

These are the test failures I get downstream (using system maxima):


```
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py", line 225, in sage.interfaces.maxima_abstract.MaximaAbstract.example
Failed example:
    maxima.example('arrays')
Expected:
    a[n]:=n*a[n-1]
                                    a  := n a
                                     n       n - 1
    a[0]:1
    a[5]
                                          120
    a[n]:=n
    a[6]
                                           6
    a[4]
                                          24
                                         done
Got:
                                     n       n - 1
    a[0]:1
    a[5]
                                          120
    a[n]:=n
    a[6]
                                           6
    a[4]
                                          24
                                         done
    <BLANKLINE>
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py", line 283, in sage.interfaces.maxima_abstract.MaximaAbstract.completions
Failed example:
    sorted(maxima.completions('gc', verbose=False))
Expected:
    ['gcd', 'gcdex', 'gcfactor', 'gctime']
Got:
    ['gcd', 'gcd\\-impl', 'gcdex', 'gcfactor', 'gcfactor\\-impl', 'gctime']
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric
Failed example:
    hypergeometric_M(1, 3, x).simplify_hypergeometric()
Expected:
    -2*(x - e^x + 1)/x^2
Got:
    2*e^x*gamma_incomplete_lower(2, x)/x^2
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/symbolic/integration/integral.py", line 864, in sage.symbolic.integration.integral.integrate
Failed example:
    a = integral(log(cot(x) - 1), x, 0, pi/4); a  # long time (about 6 s)
Expected:
    -1/4*pi*log(2) - 1/2*I*dilog(I + 1) + 1/2*I*dilog(-I + 1) + 1/2*I*dilog(1/2*I + 1/2) - 1/2*I*dilog(-1/2*I + 1/2)
Got:
    1/4*pi*(I*pi + log(2)) - 1/2*pi*log(2) - 1/2*I*dilog(I + 1) + 1/2*I*dilog(-I + 1) + 1/2*I*dilog(1/2*I + 1/2) - 1/2*I*dilog(-1/2*I + 1/2)
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/symbolic/integration/integral.py", line 866, in sage.symbolic.integration.integral.integrate
Failed example:
    abs(N(a - pi*log(2)/8)) < 1e-15  # long time
Expected:
    True
Got:
    False
**********************************************************************
```


The first one needs a readjustment of the number of removed lines in https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/interfaces/maxima_abstract.py#n183

The ones in `integration/integral.py` are a known upstream issue since 5.43. The corresponding tests in maxima are disabled as known to fail, so maybe they can be tagged as known bug here.

The other two seem harmless.



---

archive/issue_comments_423689.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-20T03:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423689",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423690.json:
```json
{
    "body": "Replying to [comment:17 arojas]:\n> The first one needs a readjustment of the number of removed lines in https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/interfaces/maxima_abstract.py#n183\n\nI have fixed the first one by a method that I hope to be more robust.",
    "created_at": "2020-07-20T03:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423690",
    "user": "mkoeppe"
}
```

Replying to [comment:17 arojas]:
> The first one needs a readjustment of the number of removed lines in https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/interfaces/maxima_abstract.py#n183

I have fixed the first one by a method that I hope to be more robust.



---

archive/issue_comments_423691.json:
```json
{
    "body": "Replying to [comment:17 arojas]:\n> These are the test failures I get downstream (using system maxima):\n> \n> {{{\n> **********************************************************************\n> File \"/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py\", line 283, in sage.interfaces.maxima_abstract.MaximaAbstract.completions\n> Failed example:\n>     sorted(maxima.completions('gc', verbose=False))\n> Expected:\n>     ['gcd', 'gcdex', 'gcfactor', 'gctime']\n> Got:\n>     ['gcd', 'gcd\\\\-impl', 'gcdex', 'gcfactor', 'gcfactor\\\\-impl', 'gctime']\n> **********************************************************************\n> }}}\n\nThis is now https://sourceforge.net/p/maxima/bugs/3643/",
    "created_at": "2020-07-20T04:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423691",
    "user": "mkoeppe"
}
```

Replying to [comment:17 arojas]:
> These are the test failures I get downstream (using system maxima):
> 
> {{{
> **********************************************************************
> File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py", line 283, in sage.interfaces.maxima_abstract.MaximaAbstract.completions
> Failed example:
>     sorted(maxima.completions('gc', verbose=False))
> Expected:
>     ['gcd', 'gcdex', 'gcfactor', 'gctime']
> Got:
>     ['gcd', 'gcd\\-impl', 'gcdex', 'gcfactor', 'gcfactor\\-impl', 'gctime']
> **********************************************************************
> }}}

This is now https://sourceforge.net/p/maxima/bugs/3643/



---

archive/issue_comments_423692.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-20T04:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423692",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423693.json:
```json
{
    "body": "Replying to [comment:17 arojas]:\n> These are the test failures I get downstream (using system maxima):\n> \n> {{{\n> **********************************************************************\n> File \"/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx\", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric\n> Failed example:\n>     hypergeometric_M(1, 3, x).simplify_hypergeometric()\n> Expected:\n>     -2*(x - e^x + 1)/x^2\n> Got:\n>     2*e^x*gamma_incomplete_lower(2, x)/x^2\n> }}}\n\nFor this one I hope we can enroll the help of some symbolics experts. A related older ticket: #16697",
    "created_at": "2020-07-20T04:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423693",
    "user": "mkoeppe"
}
```

Replying to [comment:17 arojas]:
> These are the test failures I get downstream (using system maxima):
> 
> {{{
> **********************************************************************
> File "/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric
> Failed example:
>     hypergeometric_M(1, 3, x).simplify_hypergeometric()
> Expected:
>     -2*(x - e^x + 1)/x^2
> Got:
>     2*e^x*gamma_incomplete_lower(2, x)/x^2
> }}}

For this one I hope we can enroll the help of some symbolics experts. A related older ticket: #16697



---

archive/issue_comments_423694.json:
```json
{
    "body": "Replying to [comment:22 mkoeppe]:\n> Replying to [comment:17 arojas]:\n> > These are the test failures I get downstream (using system maxima):\n> > \n> > {{{\n> > **********************************************************************\n> > File \"/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx\", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric\n> > Failed example:\n> >     hypergeometric_M(1, 3, x).simplify_hypergeometric()\n> > Expected:\n> >     -2*(x - e^x + 1)/x^2\n> > Got:\n> >     2*e^x*gamma_incomplete_lower(2, x)/x^2\n> > }}}\n> \n> For this one I hope we can enroll the help of some symbolics experts. A related older ticket: #16697\n> \nM(1,3,x) = 1F1(1,3,x) - a.k.a Kummer function, whereas lower incomplete gamma is\ngamma(a,x)=x<sup>a</sup>/a 1F1(a,a+1,-x), a=2, i.e.\nthe claim is that 1F1(1,3,x)=-exp(x) 1F1(2,3,-x).\nSo this seems to be Kummer transform from https://en.wikipedia.org/wiki/Confluent_hypergeometric_function#Kummer's_transformation \n\nbut with a wrong sign (modulo typos...)\n\nsee also https://dlmf.nist.gov/13.6#E5",
    "created_at": "2020-07-20T10:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423694",
    "user": "dimpase"
}
```

Replying to [comment:22 mkoeppe]:
> Replying to [comment:17 arojas]:
> > These are the test failures I get downstream (using system maxima):
> > 
> > {{{
> > **********************************************************************
> > File "/usr/lib/python3.8/site-packages/sage/symbolic/expression.pyx", line 10031, in sage.symbolic.expression.Expression.simplify_hypergeometric
> > Failed example:
> >     hypergeometric_M(1, 3, x).simplify_hypergeometric()
> > Expected:
> >     -2*(x - e^x + 1)/x^2
> > Got:
> >     2*e^x*gamma_incomplete_lower(2, x)/x^2
> > }}}
> 
> For this one I hope we can enroll the help of some symbolics experts. A related older ticket: #16697
> 
M(1,3,x) = 1F1(1,3,x) - a.k.a Kummer function, whereas lower incomplete gamma is
gamma(a,x)=x<sup>a</sup>/a 1F1(a,a+1,-x), a=2, i.e.
the claim is that 1F1(1,3,x)=-exp(x) 1F1(2,3,-x).
So this seems to be Kummer transform from https://en.wikipedia.org/wiki/Confluent_hypergeometric_function#Kummer's_transformation 

but with a wrong sign (modulo typos...)

see also https://dlmf.nist.gov/13.6#E5



---

archive/issue_comments_423695.json:
```json
{
    "body": "From the maxima 5.43 change log:\n\n* series expansion for expintegral_si and gamma_incomplete; breaks\n  some existing tests, see commit 47a6afd.\n\nFrom the maxima 5.44 change log:\n\n* gamma_incomplete_lower is now returned in the noun form in many places\n* Taylor expansion for gamma_incomplete_lower(1/2,z) now works\n* gamma_incomplete_lower now respects gamma_expand\n\nI note the following:\n\n```\nsage: hypergeometric_M(1, 3, 1).n()\n1.43656365691809\nsage: hypergeometric_M(1, 3, 1).simplify_hypergeometric()\n2*e*gamma_incomplete_lower(2, 1)\nsage: hypergeometric_M(1, 3, 1).simplify_hypergeometric().n()\nTypeError: cannot evaluate symbolic expression numerically\n```\n",
    "created_at": "2020-07-20T15:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423695",
    "user": "mkoeppe"
}
```

From the maxima 5.43 change log:

* series expansion for expintegral_si and gamma_incomplete; breaks
  some existing tests, see commit 47a6afd.

From the maxima 5.44 change log:

* gamma_incomplete_lower is now returned in the noun form in many places
* Taylor expansion for gamma_incomplete_lower(1/2,z) now works
* gamma_incomplete_lower now respects gamma_expand

I note the following:

```
sage: hypergeometric_M(1, 3, 1).n()
1.43656365691809
sage: hypergeometric_M(1, 3, 1).simplify_hypergeometric()
2*e*gamma_incomplete_lower(2, 1)
sage: hypergeometric_M(1, 3, 1).simplify_hypergeometric().n()
TypeError: cannot evaluate symbolic expression numerically
```




---

archive/issue_comments_423696.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2020-07-26T05:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423696",
    "user": "mkoeppe"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_423697.json:
```json
{
    "body": "For the problem in comment:22 I recommend doing as Nils mentions in the recent sage-devel discussion around a Maxima infinite recursion error, and isolate which Maxima commands do this.   I believe `simplify_hypergeometric` is a Maxima command wrapper, so it should be completely replicated in Maxima.  By the way, in diagnosing this, a a few things to note.\n\n```\nsage: hypergeometric_M(1, 3, x)\nhypergeometric_M(1, 3, x)\nsage: maxima_calculus(hypergeometric_M(1,3,x))\nkummer_m(1,3,_SAGE_VAR_x)\n```\n\nbut\n\n```\nsage: B = hypergeometric_M(1, 3, x)\nsage: B.generalized()\nhypergeometric((1,), (3,), x)\nsage: maxima_calculus(B.generalized())\nhypergeometric([1],[3],_SAGE_VAR_x)\n```\n\nand also don't forget\n\n```\nsage: B.simplify_hypergeometric(algorithm='sage')\n-2*(x - e^x + 1)/x^2\n```\n\nUnfortunately I don't have a chance to check out this update in order to diagnose the problem further.  I do note that the `hgfred` uses `maxima` and not `maxima_calculus`, though perhaps it is imported as such earlier in the file.",
    "created_at": "2020-07-30T13:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423697",
    "user": "kcrisman"
}
```

For the problem in comment:22 I recommend doing as Nils mentions in the recent sage-devel discussion around a Maxima infinite recursion error, and isolate which Maxima commands do this.   I believe `simplify_hypergeometric` is a Maxima command wrapper, so it should be completely replicated in Maxima.  By the way, in diagnosing this, a a few things to note.

```
sage: hypergeometric_M(1, 3, x)
hypergeometric_M(1, 3, x)
sage: maxima_calculus(hypergeometric_M(1,3,x))
kummer_m(1,3,_SAGE_VAR_x)
```

but

```
sage: B = hypergeometric_M(1, 3, x)
sage: B.generalized()
hypergeometric((1,), (3,), x)
sage: maxima_calculus(B.generalized())
hypergeometric([1],[3],_SAGE_VAR_x)
```

and also don't forget

```
sage: B.simplify_hypergeometric(algorithm='sage')
-2*(x - e^x + 1)/x^2
```

Unfortunately I don't have a chance to check out this update in order to diagnose the problem further.  I do note that the `hgfred` uses `maxima` and not `maxima_calculus`, though perhaps it is imported as such earlier in the file.



---

archive/issue_comments_423698.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-14T09:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423698",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423699.json:
```json
{
    "body": "I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.\n\nI also marked the intergration regression as known bug.\n\nI think it is ready for review now.",
    "created_at": "2020-08-14T09:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423699",
    "user": "tmonteil"
}
```

I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.

I also marked the intergration regression as known bug.

I think it is ready for review now.



---

archive/issue_comments_423700.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-08-14T09:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423700",
    "user": "tmonteil"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_423701.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2020-08-14T09:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423701",
    "user": "tmonteil"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_423702.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2020-08-14T09:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423702",
    "user": "tmonteil"
}
```

Changing priority from minor to major.



---

archive/issue_comments_423703.json:
```json
{
    "body": "I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).\n\nWTF ?",
    "created_at": "2020-08-14T09:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423703",
    "user": "charpent"
}
```

I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).

WTF ?



---

archive/issue_comments_423704.json:
```json
{
    "body": "Replying to [comment:31 charpent]:\n> I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).\n> \n> WTF ?\n>  \n\nThis is probably because #29674 has been merged. Is it not related to the current ticket.",
    "created_at": "2020-08-14T10:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423704",
    "user": "tmonteil"
}
```

Replying to [comment:31 charpent]:
> I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).
> 
> WTF ?
>  

This is probably because #29674 has been merged. Is it not related to the current ticket.



---

archive/issue_comments_423705.json:
```json
{
    "body": "Replying to [comment:32 tmonteil]:\n> Replying to [comment:31 charpent]:\n> > I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).\n> > \n> > WTF ?\n> >  \n> \n> This is probably because #29674 has been merged. Is it not related to the current ticket.\n\nThat was merged three months ago. I have rebuild and|or ipgraded my `sage` installation a few times since, and this never happened.\n\nFurthermore, I tried reconfiguring with `./configure CC=gcc-9 CXX=g++-9 FC=gfortran-9 --enable-download-from-upstream-url` ; `configure` now wants to install a bunch of system packages that //were// accepted before. Its answers :\n\n```\nconfigure: notice: the following SPKGs did not find equivalent system packages: cbc coxeter3 fflas_ffpack gfortran gsl iml openblas r suitesparse\nchecking for the package system in use... debian\nconfigure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:\nconfigure:   $ sudo apt-get update \n  $ sudo apt-get install coinor-cbc coinor-libcbc-dev fflas-ffpack gfortran libgsl-dev libiml-dev libopenblas-dev r-base-dev r-cran-lattice libsuitesparse-dev\nconfigure: After installation, re-run configure using:\nconfigure:   $ ./config.status --recheck && ./config.status\n```\n\n\nAttempting a (simulated) installation tells me that all those packages are already at their latest versions... and the check fails again.\n\nI'm afraid to be stuck...",
    "created_at": "2020-08-14T10:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423705",
    "user": "charpent"
}
```

Replying to [comment:32 tmonteil]:
> Replying to [comment:31 charpent]:
> > I'm trying to test this one. `make` started to get`gcc 9.2.0` (whereas the system's `gcc` is at `10.1.0`).
> > 
> > WTF ?
> >  
> 
> This is probably because #29674 has been merged. Is it not related to the current ticket.

That was merged three months ago. I have rebuild and|or ipgraded my `sage` installation a few times since, and this never happened.

Furthermore, I tried reconfiguring with `./configure CC=gcc-9 CXX=g++-9 FC=gfortran-9 --enable-download-from-upstream-url` ; `configure` now wants to install a bunch of system packages that //were// accepted before. Its answers :

```
configure: notice: the following SPKGs did not find equivalent system packages: cbc coxeter3 fflas_ffpack gfortran gsl iml openblas r suitesparse
checking for the package system in use... debian
configure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
configure:   $ sudo apt-get update 
  $ sudo apt-get install coinor-cbc coinor-libcbc-dev fflas-ffpack gfortran libgsl-dev libiml-dev libopenblas-dev r-base-dev r-cran-lattice libsuitesparse-dev
configure: After installation, re-run configure using:
configure:   $ ./config.status --recheck && ./config.status
```


Attempting a (simulated) installation tells me that all those packages are already at their latest versions... and the check fails again.

I'm afraid to be stuck...



---

archive/issue_comments_423706.json:
```json
{
    "body": "Replying to [comment:33 charpent]:\n\n[ Snip... ]\n\n> I'm afraid to be stuck...\n\nRe-reading my terminal I may have typed a small but devastating typo. I cleaned up and retried, and things seem to be OK for now.\n\n//Deeply// sorry for the noise...",
    "created_at": "2020-08-14T10:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423706",
    "user": "charpent"
}
```

Replying to [comment:33 charpent]:

[ Snip... ]

> I'm afraid to be stuck...

Re-reading my terminal I may have typed a small but devastating typo. I cleaned up and retried, and things seem to be OK for now.

//Deeply// sorry for the noise...



---

archive/issue_comments_423707.json:
```json
{
    "body": "Replying to [comment:30 tmonteil]:\n> I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.\n> \n> I also marked the intergration regression as known bug.\n> \n> I think it is ready for review now.\n\nThanks for working on this! \n\nDo we actually know whether this new Maxima version brings any improvements that are relevant for us -- given that there is this regression?",
    "created_at": "2020-08-14T11:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423707",
    "user": "mkoeppe"
}
```

Replying to [comment:30 tmonteil]:
> I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.
> 
> I also marked the intergration regression as known bug.
> 
> I think it is ready for review now.

Thanks for working on this! 

Do we actually know whether this new Maxima version brings any improvements that are relevant for us -- given that there is this regression?



---

archive/issue_comments_423708.json:
```json
{
    "body": "Replying to [comment:35 mkoeppe]:\n> Do we actually know whether this new Maxima version brings any improvements that are relevant for us -- given that there is this regression?\n\nOK, I see, #28538",
    "created_at": "2020-08-14T11:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423708",
    "user": "mkoeppe"
}
```

Replying to [comment:35 mkoeppe]:
> Do we actually know whether this new Maxima version brings any improvements that are relevant for us -- given that there is this regression?

OK, I see, #28538



---

archive/issue_comments_423709.json:
```json
{
    "body": "Dima had a concern about a possible sign error in comment 23 above - could someone double check?",
    "created_at": "2020-08-14T11:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423709",
    "user": "mkoeppe"
}
```

Dima had a concern about a possible sign error in comment 23 above - could someone double check?



---

archive/issue_comments_423710.json:
```json
{
    "body": "Tickets with this ticket as a dependency:\n\n- https://trac.sagemath.org/query?dependencies=~30063&desc=1&order=id",
    "created_at": "2020-08-14T12:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423710",
    "user": "slelievre"
}
```

Tickets with this ticket as a dependency:

- https://trac.sagemath.org/query?dependencies=~30063&desc=1&order=id



---

archive/issue_comments_423711.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-14T12:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423711",
    "user": "charpent"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423712.json:
```json
{
    "body": "Okay. `ptestlong` gives me the same (unrelated) failures as what I have already reported since `9.2.beta3` (IIRC).\n\nConcerning comment 23 :\n\n```\nsage: hypergeometric_M(1, 3, x).simplify_hypergeometric()                       \n-2*((x + 1)*e^(-x) - 1)*e^x/x^2\nsage: hypergeometric_M(1, 3, x).simplify_hypergeometric().factor()              \n-2*(x - e^x + 1)/x^2\n```\n\n\nwhich seems kosher :\n\n```\nsage: mathematica.FullSimplify(hypergeometric_M(1, 3, x)).sage().factor()       \n-2*(x - e^x + 1)/x^2\n```\n\n\n==> (tentative) `positive_review`.\n\nAs always, cross-checks on various platforms are more than useful.\n\n[ Only incidentally related... ] : I **//sternuously//** object to have to retain obsolete versions of the compilers in order to be able to compile //without being told so//. This problem, which appears only in //some// platforms, should be documented in the `README.md` ; furthermore, `./configure` should :\n* suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**\n* suggest reconfiguring with the relevant arguments.\n\nWhere should this rant be //usefully// posted ? I am aware of too much tickets related to system configuration and options, and am a bit lost...",
    "created_at": "2020-08-14T12:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423712",
    "user": "charpent"
}
```

Okay. `ptestlong` gives me the same (unrelated) failures as what I have already reported since `9.2.beta3` (IIRC).

Concerning comment 23 :

```
sage: hypergeometric_M(1, 3, x).simplify_hypergeometric()                       
-2*((x + 1)*e^(-x) - 1)*e^x/x^2
sage: hypergeometric_M(1, 3, x).simplify_hypergeometric().factor()              
-2*(x - e^x + 1)/x^2
```


which seems kosher :

```
sage: mathematica.FullSimplify(hypergeometric_M(1, 3, x)).sage().factor()       
-2*(x - e^x + 1)/x^2
```


==> (tentative) `positive_review`.

As always, cross-checks on various platforms are more than useful.

[ Only incidentally related... ] : I **//sternuously//** object to have to retain obsolete versions of the compilers in order to be able to compile //without being told so//. This problem, which appears only in //some// platforms, should be documented in the `README.md` ; furthermore, `./configure` should :
* suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**
* suggest reconfiguring with the relevant arguments.

Where should this rant be //usefully// posted ? I am aware of too much tickets related to system configuration and options, and am a bit lost...



---

archive/issue_comments_423713.json:
```json
{
    "body": "Reviewer name is missing, I am changing to needs work before the release manager needs to do it.",
    "created_at": "2020-08-14T14:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423713",
    "user": "slabbe"
}
```

Reviewer name is missing, I am changing to needs work before the release manager needs to do it.



---

archive/issue_comments_423714.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-14T14:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423714",
    "user": "slabbe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_423715.json:
```json
{
    "body": "Also, this ticket should undergo portability testing before it should be set to \"positive review\".",
    "created_at": "2020-08-14T15:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423715",
    "user": "mkoeppe"
}
```

Also, this ticket should undergo portability testing before it should be set to "positive review".



---

archive/issue_comments_423716.json:
```json
{
    "body": "Replying to [comment:39 charpent]:\n>  `./configure` should :\n>     * suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**\n>     * suggest reconfiguring with the relevant arguments.\n> \n> Where should this ... be //usefully// posted ?\n\nTry #29586 (Improve `configure`'s recommendations). It would be helpful to include the messages that `configure` prints on your system, and to explain what is missing.",
    "created_at": "2020-08-14T15:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423716",
    "user": "mkoeppe"
}
```

Replying to [comment:39 charpent]:
>  `./configure` should :
>     * suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**
>     * suggest reconfiguring with the relevant arguments.
> 
> Where should this ... be //usefully// posted ?

Try #29586 (Improve `configure`'s recommendations). It would be helpful to include the messages that `configure` prints on your system, and to explain what is missing.



---

archive/issue_comments_423717.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-14T15:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423717",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423718.json:
```json
{
    "body": "Adding my name (as I should have initially...), but keeping it at `needs_review`.",
    "created_at": "2020-08-14T15:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423718",
    "user": "charpent"
}
```

Adding my name (as I should have initially...), but keeping it at `needs_review`.



---

archive/issue_comments_423719.json:
```json
{
    "body": "Replying to [comment:41 mkoeppe]:\n> Also, this ticket should undergo portability testing before it should be set to \"positive review\". \n\nI agree. But `trac` lacks a state of `tentative_positive_review`, which should be useful in similar situations (i. e. code changes with (known|potential) platform issues...).",
    "created_at": "2020-08-14T15:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423719",
    "user": "charpent"
}
```

Replying to [comment:41 mkoeppe]:
> Also, this ticket should undergo portability testing before it should be set to "positive review". 

I agree. But `trac` lacks a state of `tentative_positive_review`, which should be useful in similar situations (i. e. code changes with (known|potential) platform issues...).



---

archive/issue_comments_423720.json:
```json
{
    "body": "Replying to [comment:40 slabbe]:\n> Reviewer name is missing, I am changing to needs work before the release manager needs to do it.\n\nDamn ! I keep forgetting this. Old age ? Incipient Alzheimer's ?\n\nDone, anyway.",
    "created_at": "2020-08-14T15:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423720",
    "user": "charpent"
}
```

Replying to [comment:40 slabbe]:
> Reviewer name is missing, I am changing to needs work before the release manager needs to do it.

Damn ! I keep forgetting this. Old age ? Incipient Alzheimer's ?

Done, anyway.



---

archive/issue_comments_423721.json:
```json
{
    "body": "All clean on debian and ubuntu, waiting for more results",
    "created_at": "2020-08-15T00:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423721",
    "user": "mkoeppe"
}
```

All clean on debian and ubuntu, waiting for more results



---

archive/issue_comments_423722.json:
```json
{
    "body": "Replying to [comment:30 tmonteil]:\n> I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.\nNice solution!\n> I also marked the intergration regression as known bug.\nWould it be worth finding out when this regression was introduced in Maxima and try to add a patch to fix it?",
    "created_at": "2020-08-15T06:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423722",
    "user": "pbruin"
}
```

Replying to [comment:30 tmonteil]:
> I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.
Nice solution!
> I also marked the intergration regression as known bug.
Would it be worth finding out when this regression was introduced in Maxima and try to add a patch to fix it?



---

archive/issue_comments_423723.json:
```json
{
    "body": "Replying to [comment:42 mkoeppe]:\n> Replying to [comment:39 charpent]:\n> >  `./configure` should :\n> >     * suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**\n> >     * suggest reconfiguring with the relevant arguments.\n> > \n> > Where should this ... be //usefully// posted ?\n> \n> Try #29586 (Improve `configure`'s recommendations). It would be helpful to include the messages that `configure` prints on your system, and to explain what is missing.\n\nI would change the default ./configure outcomes of not finding gcc, gfortran, gmp, etc to Error.\n(which can be overridden by specifying  explicit options)",
    "created_at": "2020-08-15T07:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423723",
    "user": "dimpase"
}
```

Replying to [comment:42 mkoeppe]:
> Replying to [comment:39 charpent]:
> >  `./configure` should :
> >     * suggest the installation of the relevant packages for older versions (recompiling the `gcc` smalah takes a geological age or two...), **and**
> >     * suggest reconfiguring with the relevant arguments.
> > 
> > Where should this ... be //usefully// posted ?
> 
> Try #29586 (Improve `configure`'s recommendations). It would be helpful to include the messages that `configure` prints on your system, and to explain what is missing.

I would change the default ./configure outcomes of not finding gcc, gfortran, gmp, etc to Error.
(which can be overridden by specifying  explicit options)



---

archive/issue_comments_423724.json:
```json
{
    "body": "Replying to [comment:49 pbruin]:\n> Replying to [comment:30 tmonteil]:\n> > I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.\n> Nice solution!\n> > I also marked the intergration regression as known bug.\n> Would it be worth finding out when this regression was introduced in Maxima and try to add a patch to fix it?\n\nIt goes far beyond my skills, as i never wrote a single line of lisp.\n\nThe best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.",
    "created_at": "2020-08-19T11:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423724",
    "user": "tmonteil"
}
```

Replying to [comment:49 pbruin]:
> Replying to [comment:30 tmonteil]:
> > I was working on upgrading Maxima too (as i did not see that ticket), so while i am not a symbolics expert, i fixed the `gamma_incomplete_lower` issue: that function was called `gamma_greek` by Maxima before.
> Nice solution!
> > I also marked the intergration regression as known bug.
> Would it be worth finding out when this regression was introduced in Maxima and try to add a patch to fix it?

It goes far beyond my skills, as i never wrote a single line of lisp.

The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.



---

archive/issue_comments_423725.json:
```json
{
    "body": "> The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.\n\nYou can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the \"known bug\" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.",
    "created_at": "2020-08-19T12:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423725",
    "user": "kcrisman"
}
```

> The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.

You can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the "known bug" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.



---

archive/issue_comments_423726.json:
```json
{
    "body": "Replying to [comment:52 kcrisman]:\n> > The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.\n> \n> You can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the \"known bug\" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.\n\nFollow-up for tracking this issue: #30389",
    "created_at": "2020-08-19T12:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423726",
    "user": "tmonteil"
}
```

Replying to [comment:52 kcrisman]:
> > The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.
> 
> You can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the "known bug" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.

Follow-up for tracking this issue: #30389



---

archive/issue_comments_423727.json:
```json
{
    "body": "Replying to [comment:52 kcrisman]:\n> > The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.\n> \n> You can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the \"known bug\" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.\n\nPossibly related : #30379 and the fossil tickets mentioned therein...",
    "created_at": "2020-08-19T12:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423727",
    "user": "charpent"
}
```

Replying to [comment:52 kcrisman]:
> > The best i can do is to [report the regression upstream](https://sourceforge.net/p/maxima/bugs/3649/) and follow its evolution to untag the corresponding doctest once it is fixed. I am not sure this regression should prevent us to update Maxima.
> 
> You can also open a new ticket for tracking that upstream report so we don't lose it (as opposed to only noticing the doctest change if Maxima fixes this, if anyone even tests the "known bug" doctests much).  I agree that if there is significant improvement introduced, then in practice we have often upgraded on a utilitarian view of things.

Possibly related : #30379 and the fossil tickets mentioned therein...



---

archive/issue_comments_423728.json:
```json
{
    "body": "Replying to [comment:48 mkoeppe]:\n> All clean on debian and ubuntu, waiting for more results\n\nFWIW, worked again in upgrading to 9.2.beta9.",
    "created_at": "2020-08-19T13:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423728",
    "user": "charpent"
}
```

Replying to [comment:48 mkoeppe]:
> All clean on debian and ubuntu, waiting for more results

FWIW, worked again in upgrading to 9.2.beta9.



---

archive/issue_comments_423729.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-19T17:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423729",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423730.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, maxima\".",
    "created_at": "2020-08-19T23:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423730",
    "user": "slelievre"
}
```

Changing keywords from "" to "upgrade, maxima".



---

archive/issue_comments_423731.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-20T22:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29826#issuecomment-423731",
    "user": "vbraun"
}
```

Resolution: fixed
