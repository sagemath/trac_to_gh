# Issue 10492: Add the outer product of two vectors

archive/issues_010492.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  @jhpalmieri\n\nTitle pretty much says it all.  Students frequently can't tell an inner product from an outer product (probably not too careful about where a transpose is).  Maybe this will help.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10545\n\n",
    "created_at": "2011-01-02T06:51:34Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Add the outer product of two vectors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10492",
    "user": "https://github.com/rbeezer"
}
```
Assignee: jason, was

CC:  @jhpalmieri

Title pretty much says it all.  Students frequently can't tell an inner product from an outer product (probably not too careful about where a transpose is).  Maybe this will help.

Issue created by migration from https://trac.sagemath.org/ticket/10545





---

archive/issue_comments_109192.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-02T07:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109192",
    "user": "https://github.com/rbeezer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_109193.json:
```json
{
    "body": "For anybody trying this out, it really only needs the row/column patch on #10541.  You will get one documentation error, but that is fixed on the other half of #10541.\n\nPatchbot:\n\nDepends on #10541",
    "created_at": "2011-01-02T07:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109193",
    "user": "https://github.com/rbeezer"
}
```

For anybody trying this out, it really only needs the row/column patch on #10541.  You will get one documentation error, but that is fixed on the other half of #10541.

Patchbot:

Depends on #10541



---

archive/issue_comments_109194.json:
```json
{
    "body": "I didn't know that is sometimes used as a definition of \"outer product\", but Wikipedia backs you up on it.\n\nIn other languages, \"exterior product\" translates to the same word as \"outer product\", so a -1 from me for having this definition of outer product. I think this term will be a source of confusion.\n\nIf someone needs the tensor product, it is easy enough to get via the one-liner\n\n```\nlambda v,w: matrix(len(v),len(w),[a*b for a in v for b in w])\n```\n\n\n(given Sage's preference for row vectors versus the preference of most LA texts for column vectors, I expect that relating inner/outer products to a question of where to put the transpose is only going to cause *more* confusion in students, by the way)",
    "created_at": "2011-01-03T20:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109194",
    "user": "https://github.com/nbruin"
}
```

I didn't know that is sometimes used as a definition of "outer product", but Wikipedia backs you up on it.

In other languages, "exterior product" translates to the same word as "outer product", so a -1 from me for having this definition of outer product. I think this term will be a source of confusion.

If someone needs the tensor product, it is easy enough to get via the one-liner

```
lambda v,w: matrix(len(v),len(w),[a*b for a in v for b in w])
```


(given Sage's preference for row vectors versus the preference of most LA texts for column vectors, I expect that relating inner/outer products to a question of where to put the transpose is only going to cause *more* confusion in students, by the way)



---

archive/issue_comments_109195.json:
```json
{
    "body": "Hi Nils,\n\nThanks for the comments.  Since vectors are neither rows nor columns in Sage, any notion of a transpose is irrelevant.  The outer product just is what it is.  I could delete the mention of the transpose in the mathematical description in the docstring.\n\n\"Someone\" are 19-year-old students, who shouldn't need to understand a lambda function to learn linear algebra.\n\nSage can work well with a column-oriented approach - it just needs a few things.  Check out:\n\nhttp://wiki.sagemath.org/devel/LatexToWorksheet\n\nhttp://linear.ups.edu  \n\nRob\n\nReplying to [comment:2 nbruin]:\n> I didn't know that is sometimes used as a definition of \"outer product\", but Wikipedia backs you up on it.\n> \n> In other languages, \"exterior product\" translates to the same word as \"outer product\", so a -1 from me for having this definition of outer product. I think this term will be a source of confusion.\n> \n> If someone needs the tensor product, it is easy enough to get via the one-liner\n> {{{\n> lambda v,w: matrix(len(v),len(w),[a*b for a in v for b in w])\n> }}}\n> \n> (given Sage's preference for row vectors versus the preference of most LA texts for column vectors, I expect that relating inner/outer products to a question of where to put the transpose is only going to cause *more* confusion in students, by the way)",
    "created_at": "2011-01-03T22:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109195",
    "user": "https://github.com/rbeezer"
}
```

Hi Nils,

Thanks for the comments.  Since vectors are neither rows nor columns in Sage, any notion of a transpose is irrelevant.  The outer product just is what it is.  I could delete the mention of the transpose in the mathematical description in the docstring.

"Someone" are 19-year-old students, who shouldn't need to understand a lambda function to learn linear algebra.

Sage can work well with a column-oriented approach - it just needs a few things.  Check out:

http://wiki.sagemath.org/devel/LatexToWorksheet

http://linear.ups.edu  

Rob

Replying to [comment:2 nbruin]:
> I didn't know that is sometimes used as a definition of "outer product", but Wikipedia backs you up on it.
> 
> In other languages, "exterior product" translates to the same word as "outer product", so a -1 from me for having this definition of outer product. I think this term will be a source of confusion.
> 
> If someone needs the tensor product, it is easy enough to get via the one-liner
> {{{
> lambda v,w: matrix(len(v),len(w),[a*b for a in v for b in w])
> }}}
> 
> (given Sage's preference for row vectors versus the preference of most LA texts for column vectors, I expect that relating inner/outer products to a question of where to put the transpose is only going to cause *more* confusion in students, by the way)



---

archive/issue_comments_109196.json:
```json
{
    "body": "> \"Someone\" are 19-year-old students, who shouldn't need to understand a lambda function to learn linear algebra.\n\nSlightly off-topic: If you don't want lambda and v,w are the vectors you want to take the kronecker product of:\n\n```\nmatrix([[a*b for b in w] for a in v])\n```\n\n(to avoid depending on the order in which python iterates through a multiple \"for\")\n\nOn-topic: In Dutch \"uitprodukt\" and in German \"auseres produkt\" is \"exterior product\" (as in \"wedge product\" or \"cross product\"). These terms literally translate to \"outer product\". I don't know about french. That's why I think \"outer product\" is better avoided, because it likely causes confusion.\n\n(truly off-topic: Do you think you are doing 19-year olds a service by teaching them kronecker products of column x row vectors? Cross products of 3-dim vectors are probably much more useful for them and having to juggle 3 (instead of 2) ways of taking products of vectors is probably more confusing for them)",
    "created_at": "2011-01-04T00:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109196",
    "user": "https://github.com/nbruin"
}
```

> "Someone" are 19-year-old students, who shouldn't need to understand a lambda function to learn linear algebra.

Slightly off-topic: If you don't want lambda and v,w are the vectors you want to take the kronecker product of:

```
matrix([[a*b for b in w] for a in v])
```

(to avoid depending on the order in which python iterates through a multiple "for")

On-topic: In Dutch "uitprodukt" and in German "auseres produkt" is "exterior product" (as in "wedge product" or "cross product"). These terms literally translate to "outer product". I don't know about french. That's why I think "outer product" is better avoided, because it likely causes confusion.

(truly off-topic: Do you think you are doing 19-year olds a service by teaching them kronecker products of column x row vectors? Cross products of 3-dim vectors are probably much more useful for them and having to juggle 3 (instead of 2) ways of taking products of vectors is probably more confusing for them)



---

archive/issue_comments_109197.json:
```json
{
    "body": "`NumPy` calls it the outer product.\n\nhttp://docs.scipy.org/doc/numpy/reference/generated/numpy.outer.html#numpy.outer",
    "created_at": "2011-01-30T03:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109197",
    "user": "https://github.com/rbeezer"
}
```

`NumPy` calls it the outer product.

http://docs.scipy.org/doc/numpy/reference/generated/numpy.outer.html#numpy.outer



---

archive/issue_comments_109198.json:
```json
{
    "body": "This definition of outer product was what I was taught, and it seems to be the standard terminology.\n\nThe code works and passes long doctests, and is well documented.  Positive review.",
    "created_at": "2011-03-10T07:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109198",
    "user": "https://trac.sagemath.org/admin/accounts/users/flawrence"
}
```

This definition of outer product was what I was taught, and it seems to be the standard terminology.

The code works and passes long doctests, and is well documented.  Positive review.



---

archive/issue_comments_109199.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-10T07:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109199",
    "user": "https://trac.sagemath.org/admin/accounts/users/flawrence"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_109200.json:
```json
{
    "body": "The ticket number in the commit message is wrong.",
    "created_at": "2011-03-23T13:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109200",
    "user": "https://github.com/jdemeyer"
}
```

The ticket number in the commit message is wrong.



---

archive/issue_comments_109201.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-03-23T13:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109201",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_109202.json:
```json
{
    "body": "Attachment [trac_10545-vector-outer-product.patch](tarball://root/attachments/some-uuid/ticket10545/trac_10545-vector-outer-product.patch) by @rbeezer created at 2011-03-23 15:29:05\n\nJeroen - sorry for the trouble.  Patch replaced with a fixed one.",
    "created_at": "2011-03-23T15:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109202",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10545-vector-outer-product.patch](tarball://root/attachments/some-uuid/ticket10545/trac_10545-vector-outer-product.patch) by @rbeezer created at 2011-03-23 15:29:05

Jeroen - sorry for the trouble.  Patch replaced with a fixed one.



---

archive/issue_comments_109203.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-03-23T15:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109203",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_109204.json:
```json
{
    "body": "During a trial merge of sage-4.7.alpha3, I get the following doctest error:\n\n```\nsage -t  -force_lib devel/sage/sage/modules/free_module_element.pyx\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/devel/sage-main/sage/modules/free_module_element.pyx\", line 2292:\n    sage: z = w.outer_product(v)\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: unsupported operand parent(s) for '*': 'Full MatrixSpace of 2 by 1 dense matrices over Rational Field' and 'Full MatrixSpac\ne of 1 by 4 dense matrices over Finite Field of size 7'\nGot:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_57[27]>\", line 1, in <module>\n        z = w.outer_product(v)###line 2292:\n    sage: z = w.outer_product(v)\n      File \"free_module_element.pyx\", line 2307, in sage.modules.free_module_element.FreeModuleElement.outer_product (sage/modules/free_mo\ndule_element.c:12527)\n        return self.column()*right.row()\n      File \"element.pyx\", line 2282, in sage.structure.element.Matrix.__mul__ (sage/structure/element.c:15874)\n      File \"coerce.pyx\", line 709, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6368)\n      File \"action.pyx\", line 139, in sage.matrix.action.MatrixMatrixAction._call_ (sage/matrix/action.c:2742)\n      File \"matrix_rational_dense.pyx\", line 1331, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.change_ring (sage/matrix/mat\nrix_rational_dense.c:13867)\n      File \"element.pyx\", line 1551, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:12720)\n      File \"coerce.pyx\", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6426)\n      File \"element.pyx\", line 1549, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:12694)\n      File \"integer_mod.pyx\", line 2223, in sage.rings.finite_rings.integer_mod.IntegerMod_int._div_ (sage/rings/finite_rings/integer_mod.\nc:19384)\n    ZeroDivisionError: Inverse does not exist.\n**********************************************************************\n```\n",
    "created_at": "2011-03-23T18:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109204",
    "user": "https://github.com/jdemeyer"
}
```

During a trial merge of sage-4.7.alpha3, I get the following doctest error:

```
sage -t  -force_lib devel/sage/sage/modules/free_module_element.pyx
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/devel/sage-main/sage/modules/free_module_element.pyx", line 2292:
    sage: z = w.outer_product(v)
Expected:
    Traceback (most recent call last):
    ...
    TypeError: unsupported operand parent(s) for '*': 'Full MatrixSpace of 2 by 1 dense matrices over Rational Field' and 'Full MatrixSpac
e of 1 by 4 dense matrices over Finite Field of size 7'
Got:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_57[27]>", line 1, in <module>
        z = w.outer_product(v)###line 2292:
    sage: z = w.outer_product(v)
      File "free_module_element.pyx", line 2307, in sage.modules.free_module_element.FreeModuleElement.outer_product (sage/modules/free_mo
dule_element.c:12527)
        return self.column()*right.row()
      File "element.pyx", line 2282, in sage.structure.element.Matrix.__mul__ (sage/structure/element.c:15874)
      File "coerce.pyx", line 709, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6368)
      File "action.pyx", line 139, in sage.matrix.action.MatrixMatrixAction._call_ (sage/matrix/action.c:2742)
      File "matrix_rational_dense.pyx", line 1331, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.change_ring (sage/matrix/mat
rix_rational_dense.c:13867)
      File "element.pyx", line 1551, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:12720)
      File "coerce.pyx", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6426)
      File "element.pyx", line 1549, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:12694)
      File "integer_mod.pyx", line 2223, in sage.rings.finite_rings.integer_mod.IntegerMod_int._div_ (sage/rings/finite_rings/integer_mod.
c:19384)
    ZeroDivisionError: Inverse does not exist.
**********************************************************************
```




---

archive/issue_comments_109205.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-03-23T18:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109205",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_109206.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-23T22:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109206",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_109207.json:
```json
{
    "body": "Thanks, Jeroen.  Coercion/error-trapping got changed somehow, and I've asked about it on sage-devel.  New patch just adjusts the doctest to a pair of rings that behave better and make the same point, and this is really a matrix multiplication error message anyway.\n\nI'll see if I can get a review here at Sage Days 29.  ;-)\n\nRob",
    "created_at": "2011-03-23T22:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109207",
    "user": "https://github.com/rbeezer"
}
```

Thanks, Jeroen.  Coercion/error-trapping got changed somehow, and I've asked about it on sage-devel.  New patch just adjusts the doctest to a pair of rings that behave better and make the same point, and this is really a matrix multiplication error message anyway.

I'll see if I can get a review here at Sage Days 29.  ;-)

Rob



---

archive/issue_comments_109208.json:
```json
{
    "body": "Should this be compared with the \"tensor_product\" method of matrices?  Should \"outer_product\" have \"tensor_product\" as a synonym? (According to wikipedia, it should.) For reasons I don't understand, the tensor product of matrices comes equipped with subdivisions, but other than that, \n\n```\nsage: v.outer_product(w)\n```\n\nand \n\n```\nsage: m1 = matrix(v).transpose()\nsage: m2 = matrix(w)\nsage: m1.tensor_product(m2)\n```\n\nshould produce the same thing.",
    "created_at": "2011-03-23T22:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109208",
    "user": "https://github.com/jhpalmieri"
}
```

Should this be compared with the "tensor_product" method of matrices?  Should "outer_product" have "tensor_product" as a synonym? (According to wikipedia, it should.) For reasons I don't understand, the tensor product of matrices comes equipped with subdivisions, but other than that, 

```
sage: v.outer_product(w)
```

and 

```
sage: m1 = matrix(v).transpose()
sage: m2 = matrix(w)
sage: m1.tensor_product(m2)
```

should produce the same thing.



---

archive/issue_comments_109209.json:
```json
{
    "body": "Attachment [trac_10545-vector-outer-product-doc.patch](tarball://root/attachments/some-uuid/ticket10545/trac_10545-vector-outer-product-doc.patch) by @rbeezer created at 2011-03-23 23:12:31\n\nReplacement \"doc\" patch is still almost all documentation, but now includes a \"tensor_product\" synonym as suggested.\n\nNew doctest compares it with the matrix version of a tensor product.",
    "created_at": "2011-03-23T23:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109209",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10545-vector-outer-product-doc.patch](tarball://root/attachments/some-uuid/ticket10545/trac_10545-vector-outer-product-doc.patch) by @rbeezer created at 2011-03-23 23:12:31

Replacement "doc" patch is still almost all documentation, but now includes a "tensor_product" synonym as suggested.

New doctest compares it with the matrix version of a tensor product.



---

archive/issue_comments_109210.json:
```json
{
    "body": "Latest addition passes all long tests, so is ready for review.",
    "created_at": "2011-03-23T23:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109210",
    "user": "https://github.com/rbeezer"
}
```

Latest addition passes all long tests, so is ready for review.



---

archive/issue_comments_109211.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-25T12:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109211",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_109212.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-26T19:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10492#issuecomment-109212",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_010620.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-26T19:45:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10492",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10492#event-10620"
}
```
