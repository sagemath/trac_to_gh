# Issue 28928: Preparsing of sage file can lead to weird and inconsistent behavior

Issue created by migration from https://trac.sagemath.org/ticket/29165

Original creator: bouvier

Original creation time: 2020-02-07 10:57:04

Keywords: preparse preparser runfile

If one execute the following script in Sage interpreter:

```
2 = 3
print (2)
```

one will get a exception

```
ValueError: The name "2" is not a valid Python identifier.
```

which is expected.

But if one execute it from a file with `sage file.sage` or in the interpreter with `%runfile file.sage`, one does not get an error and the script simply prints `3`.

This is due to the fact that Sage preparse the file before running it; if one looks into the generated `file.sage.py`, one can see that the integers are replaced by `_sage_const_nnn`, **even when the integer is on the left-hand-side of an equality**. As it is a valid python identifier, there is no error anymore and its value can be modified.


---

Comment by nbruin created at 2020-02-07 18:00:20

This has definitely been noted before, e.g. [sage-devel thread](https://groups.google.com/d/msg/sage-devel/AtELRFggSMQ/7O42PnOrjhMJ).


---

Comment by nbruin created at 2020-02-08 18:22:37

Changing status from new to needs_review.


---

Comment by nbruin created at 2020-02-08 18:22:37

duplicate of #11542?


---

Comment by vdelecroix created at 2020-02-09 14:53:07

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2020-02-09 14:53:07

agreed


---

Comment by vdelecroix created at 2020-02-09 14:53:26

Resolution: duplicate
