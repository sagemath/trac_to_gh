# Issue 10805: Add support for keep_labels in Digraph.strongly_connected_components_digraph

Issue created by migration from https://trac.sagemath.org/ticket/10874

Original creator: nthiery

Original creation time: 2011-03-04 14:15:12

Assignee: jason, ncohen, rlm

CC:  ncohen

Keywords: strongly connected components

With keep_labels=True, the method Digraph.strongly_connected_components_digraph keeps the label on edges when contracting strongly connected components, and returns a multi-digraph::

```
            sage: g = DiGraph({0:{1:"0-12", 2: "0-12", 3: "0-3"}, 1: {2: "1-2", 3: "1-3"}, 2:{1: "2-1", 3: "2-3"}})
            sage: scc_digraph = g.strongly_connected_components_digraph(keep_labels = True)
            sage: scc_digraph.edges()
            [({0}, {3}, "0-3"), ({0}, {1, 2}, '0-12'),
             ({1, 2}, {3}, '1-3'), ({1, 2}, {3}, '2-3'),
             ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]
```



---

Comment by nthiery created at 2011-03-04 14:18:43

Changing status from new to needs_review.


---

Comment by ncohen created at 2011-03-04 14:44:38

What about avoiding to test "keep_labels" twice ? `:-)`

Here is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to "positive review" if you agree with my modifications, and also if you don't for some reason (please update the "apply" section in this case) `:-)`

Nathann


---

Attachment


---

Comment by nthiery created at 2011-03-04 15:02:04

Hi Nathann,

Wow, that was a quick review! This patch has been basically ready in the queue since last July; it was time for me to post in on trac :-)

Thanks!

Replying to [comment:2 ncohen]:
> What about avoiding to test "keep_labels" twice ? `:-)`

That was to avoid having ``g.add_vertices(scc_set)`` twice :-)
But it's probably more readable as you did it.

> Here is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to "positive review" if you agree with my modifications, and also if you don't for some reason (please update the "apply" section in this case) `:-)`

Positive review it is (assuming of course the patch bot confirms that everything is good; it should).


---

Comment by nthiery created at 2011-03-04 15:02:04

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-03-26 15:46:01

Please change the commit message of [attachment:trac_10874-graph-strongly_connected_componnents-nt.patch] to something human-readable (make sure to include the ticket number of the first line).


---

Comment by nthiery created at 2011-03-26 18:12:21

Oops; I need to recheck my workflow; I forgot this way too many times lately. Sorry!

While I was at it, I folded the two patches together. No other changes.

trac_10874-reviewer.patch can now be deleted from trac.

Cheers,
                    Nicolas


---

Comment by nthiery created at 2011-03-26 18:20:06

Changing status from positive_review to needs_work.


---

Comment by nthiery created at 2011-03-26 18:20:06

Ah, Nathann, sorry, while looking back to the patch, I could not resist making the setting of the multiedges option more consistent. Please have a quick check.


---

Comment by nthiery created at 2011-03-26 18:20:44

Changing status from needs_work to needs_review.


---

Comment by nthiery created at 2011-03-26 18:22:37

Apply only this patch


---

Attachment

Good to go !

Nathann


---

Comment by ncohen created at 2011-03-27 07:27:52

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-03-28 07:18:25

Resolution: fixed


---

Comment by jdemeyer created at 2015-02-21 17:44:11

Hi, is this a typo?

```
g = DiGraph({0:{1:"01", 2: "02", 3: 03}, 1: {2: "12"}, 2:{1: "21", 3: "23"}})
```

Note the missing quotes around `03`, which is therefore interpreted as the octal number 3.
