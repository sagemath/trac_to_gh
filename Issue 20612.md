# Issue 20612: Improved grs.py documentation

archive/issues_020612.json:
```json
{
    "body": "CC:  @johanrosenkilde\n\nSome doctests in grs.py are quite unhelpful, and some classes description do not explain at all how\nthe class works (especially for the encoders).\n\nThis ticket fixes that.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20849\n\n",
    "created_at": "2016-06-20T07:44:13Z",
    "labels": [
        "coding theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Improved grs.py documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20612",
    "user": "dlucas"
}
```
CC:  @johanrosenkilde

Some doctests in grs.py are quite unhelpful, and some classes description do not explain at all how
the class works (especially for the encoders).

This ticket fixes that.

Issue created by migration from https://trac.sagemath.org/ticket/20849





---

archive/issue_comments_284548.json:
```json
{
    "body": "I pushed my branch, this is now open for review.\n----\nNew commits:",
    "created_at": "2016-06-20T07:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284548",
    "user": "dlucas"
}
```

I pushed my branch, this is now open for review.
----
New commits:



---

archive/issue_comments_284549.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-20T07:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284549",
    "user": "dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_284550.json:
```json
{
    "body": "Hi David,\n\ntypos:\n\n- scalaers\n\nremarks and suggestions:\n\n- `minimum_distance` the new doc string is less clear than previous one. The notion of minimum distance is clear in coding theory, no need to be explicit. If you really want to explicit it, change the sentence of the new docstring to `Returns the minimum distance between any two words in ``self``.`\n\n- `column_multipliers`, `parity_column_multipliers`:  the new doc strings speaks about positions scalars, while these methods deal with multipliers.\n\n- `weight_enumerator`: it would be better to say \"the polynomial whose coefficient of degree is [...]\" to avoid naming the variable 'x'\n\n- (several places) the framework for describing the encoding could be made a bit more clear, using the terms \"message\" and \"encoding\" more explicitly. Instead of\n\n\n```\nLet `m = (m_1, \\dots, m_k)` a vector over F.\n[...]\nThe corresponding codeword is the following vector:\n```\n\nwhat about \n\n```\nlet `m=[...]` a vector over F be the message:\n[...]\nthe encoding of `m` will be the following codeword:\n```\n\n- `class GRSErrorErasureDecoder(Decoder)` it would be better to say : floor((d-1)/2 instead of \"decoding radius\". Also the input to the decode method should be a `word_and_erasure` vector, not a vector `y`.\n\nDaniel",
    "created_at": "2016-08-25T10:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284550",
    "user": "danielaugot"
}
```

Hi David,

typos:

- scalaers

remarks and suggestions:

- `minimum_distance` the new doc string is less clear than previous one. The notion of minimum distance is clear in coding theory, no need to be explicit. If you really want to explicit it, change the sentence of the new docstring to `Returns the minimum distance between any two words in ``self``.`

- `column_multipliers`, `parity_column_multipliers`:  the new doc strings speaks about positions scalars, while these methods deal with multipliers.

- `weight_enumerator`: it would be better to say "the polynomial whose coefficient of degree is [...]" to avoid naming the variable 'x'

- (several places) the framework for describing the encoding could be made a bit more clear, using the terms "message" and "encoding" more explicitly. Instead of


```
Let `m = (m_1, \dots, m_k)` a vector over F.
[...]
The corresponding codeword is the following vector:
```

what about 

```
let `m=[...]` a vector over F be the message:
[...]
the encoding of `m` will be the following codeword:
```

- `class GRSErrorErasureDecoder(Decoder)` it would be better to say : floor((d-1)/2 instead of "decoding radius". Also the input to the decode method should be a `word_and_erasure` vector, not a vector `y`.

Daniel



---

archive/issue_comments_284551.json:
```json
{
    "body": "needs rebase.\n\nalso:\n\n* typo: `scalaers`",
    "created_at": "2016-10-21T11:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284551",
    "user": "ylchapuy"
}
```

needs rebase.

also:

* typo: `scalaers`



---

archive/issue_comments_284552.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-21T11:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284552",
    "user": "ylchapuy"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_284553.json:
```json
{
    "body": "Rebased and fixed the `scalaers` typo. Other remarks by danielaugot still need to be adressed. \n----\nNew commits:",
    "created_at": "2017-02-07T17:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284553",
    "user": "@ClementPernet"
}
```

Rebased and fixed the `scalaers` typo. Other remarks by danielaugot still need to be adressed. 
----
New commits:



---

archive/issue_comments_284554.json:
```json
{
    "body": "Changing keywords from \"\" to \"rd3\".",
    "created_at": "2017-02-08T08:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284554",
    "user": "@ClementPernet"
}
```

Changing keywords from "" to "rd3".



---

archive/issue_comments_284555.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T15:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284555",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284556.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-09T15:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284556",
    "user": "@ClementPernet"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_284557.json:
```json
{
    "body": "I fixed the merge conflict and all outstanding remarks by danielaugot.\nI also took this opportunity to turn the verbs to imperative at the beginning of almost each docstring.\nReady for review",
    "created_at": "2017-02-09T15:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284557",
    "user": "@ClementPernet"
}
```

I fixed the merge conflict and all outstanding remarks by danielaugot.
I also took this opportunity to turn the verbs to imperative at the beginning of almost each docstring.
Ready for review



---

archive/issue_comments_284558.json:
```json
{
    "body": "A very small typo with maths in the docstring of `GRSErrorErasureDecoder`. The `hamming_weight` gives a bad rendering in math mode, just fix the \"`_`\" in\n\n```\n    - Create a new GRS code of length `n-hamming_weight(e)`, dimension `k`.\n```\n\ndocstring.",
    "created_at": "2017-02-09T17:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284558",
    "user": "danielaugot"
}
```

A very small typo with maths in the docstring of `GRSErrorErasureDecoder`. The `hamming_weight` gives a bad rendering in math mode, just fix the "`_`" in

```
    - Create a new GRS code of length `n-hamming_weight(e)`, dimension `k`.
```

docstring.



---

archive/issue_comments_284559.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T21:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284559",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284560.json:
```json
{
    "body": "Typesetting updated.",
    "created_at": "2017-02-09T21:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284560",
    "user": "@ClementPernet"
}
```

Typesetting updated.



---

archive/issue_comments_284561.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-10T08:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284561",
    "user": "danielaugot"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284562.json:
```json
{
    "body": "PDF docs don't build\n\n```\n[docpdf] l.7167 ...code of length \\(n-\\text{hamming_weight}\n177318[docpdf]                                                   (e)\\), dimension \\(k\\).\n177319[docpdf] !  ==> Fatal error occurred, no output PDF file produced!\n```\n",
    "created_at": "2017-02-11T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284562",
    "user": "@vbraun"
}
```

PDF docs don't build

```
[docpdf] l.7167 ...code of length \(n-\text{hamming_weight}
177318[docpdf]                                                   (e)\), dimension \(k\).
177319[docpdf] !  ==> Fatal error occurred, no output PDF file produced!
```




---

archive/issue_comments_284563.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-02-11T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284563",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_284564.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-13T08:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284564",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284565.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-13T08:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284565",
    "user": "@ClementPernet"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_284566.json:
```json
{
    "body": "Fixed. Ready for a (trivial) review.",
    "created_at": "2017-02-13T08:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284566",
    "user": "@ClementPernet"
}
```

Fixed. Ready for a (trivial) review.



---

archive/issue_comments_284567.json:
```json
{
    "body": "On my fedora laptop, `make doc-pdf` fails. It also fails  on branch `develop`, even with a fresh `git clone`. Someone else than me, with a different distro, is needed to positively review the ticket.",
    "created_at": "2017-02-14T15:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284567",
    "user": "danielaugot"
}
```

On my fedora laptop, `make doc-pdf` fails. It also fails  on branch `develop`, even with a fresh `git clone`. Someone else than me, with a different distro, is needed to positively review the ticket.



---

archive/issue_comments_284568.json:
```json
{
    "body": "I did a refined test. The following builds nicely the coding pdf doc.\n\n```\n./sage -b\n./sage --docbuild reference/coding pdf\n```\n\nand `evince ./local/share/doc/sage/pdf/en/reference/coding/coding.pdf` shows a correct pdf.",
    "created_at": "2017-02-14T15:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284568",
    "user": "danielaugot"
}
```

I did a refined test. The following builds nicely the coding pdf doc.

```
./sage -b
./sage --docbuild reference/coding pdf
```

and `evince ./local/share/doc/sage/pdf/en/reference/coding/coding.pdf` shows a correct pdf.



---

archive/issue_comments_284569.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-14T15:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284569",
    "user": "danielaugot"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284570.json:
```json
{
    "body": "I've pushed a branch to `u/tscrim/improve_grs-20849` that does a little bit more cleanup of the doc (including some of the parts added here) and of the file itself. If you want to review that here, then go ahead and do so, but feel free to use that as a branch for a followup ticket too.",
    "created_at": "2017-02-14T17:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284570",
    "user": "@tscrim"
}
```

I've pushed a branch to `u/tscrim/improve_grs-20849` that does a little bit more cleanup of the doc (including some of the parts added here) and of the file itself. If you want to review that here, then go ahead and do so, but feel free to use that as a branch for a followup ticket too.



---

archive/issue_comments_284571.json:
```json
{
    "body": "Travis. Thanks for your follow-up corrections. Please push your branch to this ticket, as it is based on the latest commit of mine.\nI am willing to positive review all of your changes except the following ones:\n- in several place, you added a line break before a \\textnormal{ Reed Solomon Code over }...\n  there is an extra space identation in each of these which I think should be removed.\n- You replaced `a new GRS code of length `n-hamming\\_weight(e)`` by \n`a new GRS code of length equal to the `n`-hamming weight of `e``.\nThis sentence does not make sense. Maybe change it to `a new GRS code of length equal to `n` minus the Hamming weight of `e`` (move `the` and capitalize `Hamming`)\n\n\nHence I put the ticket in needs-work status again.",
    "created_at": "2017-02-15T08:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284571",
    "user": "@ClementPernet"
}
```

Travis. Thanks for your follow-up corrections. Please push your branch to this ticket, as it is based on the latest commit of mine.
I am willing to positive review all of your changes except the following ones:
- in several place, you added a line break before a \textnormal{ Reed Solomon Code over }...
  there is an extra space identation in each of these which I think should be removed.
- You replaced `a new GRS code of length `n-hamming\_weight(e)`` by 
`a new GRS code of length equal to the `n`-hamming weight of `e``.
This sentence does not make sense. Maybe change it to `a new GRS code of length equal to `n` minus the Hamming weight of `e`` (move `the` and capitalize `Hamming`)


Hence I put the ticket in needs-work status again.



---

archive/issue_comments_284572.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-02-15T08:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284572",
    "user": "@ClementPernet"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_284573.json:
```json
{
    "body": "Also can you fix line 957:\n`an polynomial` to `a polynomial`",
    "created_at": "2017-02-15T08:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284573",
    "user": "@ClementPernet"
}
```

Also can you fix line 957:
`an polynomial` to `a polynomial`



---

archive/issue_comments_284574.json:
```json
{
    "body": "Replying to [comment:22 cpernet]:\n> Travis. Thanks for your follow-up corrections. Please push your branch to this ticket, as it is based on the latest commit of mine.\n> I am willing to positive review all of your changes except the following ones:\n>  - in several place, you added a line break before a \\textnormal{ Reed Solomon Code over }...\n>    there is an extra space identation in each of these which I think should be removed.\n\nAt the risk of bikeshedding, the spaces are there in order to show that the line came from a line break in the output. This is used in a number of other places in Sage too. IMO it builds a better association to the line above it, but I don't have a strong opinion on this.\n\n>  - You replaced `a new GRS code of length `n-hamming\\_weight(e)`` by \n> `a new GRS code of length equal to the `n`-hamming weight of `e``.\n> This sentence does not make sense. Maybe change it to `a new GRS code of length equal to `n` minus the Hamming weight of `e`` (move `the` and capitalize `Hamming`)\n\nAh, I mis-parsed that sentence. I was wondering what the `n`-Hamming weight was and why I couldn't find a definition. Fixed.\n----\nNew commits:",
    "created_at": "2017-02-15T15:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284574",
    "user": "@tscrim"
}
```

Replying to [comment:22 cpernet]:
> Travis. Thanks for your follow-up corrections. Please push your branch to this ticket, as it is based on the latest commit of mine.
> I am willing to positive review all of your changes except the following ones:
>  - in several place, you added a line break before a \textnormal{ Reed Solomon Code over }...
>    there is an extra space identation in each of these which I think should be removed.

At the risk of bikeshedding, the spaces are there in order to show that the line came from a line break in the output. This is used in a number of other places in Sage too. IMO it builds a better association to the line above it, but I don't have a strong opinion on this.

>  - You replaced `a new GRS code of length `n-hamming\_weight(e)`` by 
> `a new GRS code of length equal to the `n`-hamming weight of `e``.
> This sentence does not make sense. Maybe change it to `a new GRS code of length equal to `n` minus the Hamming weight of `e`` (move `the` and capitalize `Hamming`)

Ah, I mis-parsed that sentence. I was wondering what the `n`-Hamming weight was and why I couldn't find a definition. Fixed.
----
New commits:



---

archive/issue_comments_284575.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-15T15:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284575",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_284576.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-18T17:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284576",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284577.json:
```json
{
    "body": "ping",
    "created_at": "2017-02-22T15:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284577",
    "user": "@tscrim"
}
```

ping



---

archive/issue_comments_284578.json:
```json
{
    "body": "Positive review to all recent commits by Travis. I also pushed a minor edit, replacing `H(e)` by the standard notation `w(e)`.\nTravis, can you please just review this last edit and were fine.\n----\nNew commits:",
    "created_at": "2017-02-28T10:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284578",
    "user": "@ClementPernet"
}
```

Positive review to all recent commits by Travis. I also pushed a minor edit, replacing `H(e)` by the standard notation `w(e)`.
Travis, can you please just review this last edit and were fine.
----
New commits:



---

archive/issue_comments_284579.json:
```json
{
    "body": "LGTM. Sorry, I didn't know standard notation and just took a guess.",
    "created_at": "2017-02-28T13:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284579",
    "user": "@tscrim"
}
```

LGTM. Sorry, I didn't know standard notation and just took a guess.



---

archive/issue_comments_284580.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-28T13:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284580",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284581.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-01T18:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20612#issuecomment-284581",
    "user": "@vbraun"
}
```

Resolution: fixed
