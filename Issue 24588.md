# Issue 24588: py3: fix sage.misc.banner

Issue created by migration from https://trac.sagemath.org/ticket/24825

Original creator: embray

Original creation time: 2018-02-23 11:00:23

Also fixes an only slightly related test (in that it does involve printing the banner) which I noticed was broken while making this change.


---

Comment by git created at 2018-02-23 11:32:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-02-23 11:34:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2018-02-23 11:41:21

Changing status from new to needs_review.


---

Comment by embray created at 2018-02-23 11:41:21

New commits:


---

Comment by jdemeyer created at 2018-02-23 14:27:57

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2018-02-23 14:27:57

positive review if tests pass.


---

Comment by vbraun created at 2018-02-25 18:44:17

Resolution: fixed


---

Comment by vbraun created at 2018-03-03 00:44:40

Resolution changed from fixed to 


---

Comment by vbraun created at 2018-03-03 00:44:40

Changing status from closed to new.


---

Comment by vbraun created at 2018-03-03 00:44:40


```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/banner.py", line 113, in banner
    print(banner_text(full=full))
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-69: ordinal not in range(128)
Traceback (most recent call last):
  File "/mnt/disk/home/release/opt/bin/git-releasemgr", line 19, in <module>
    cmdline.launch()
  File "/mnt/disk/home/release/opt/git-trac-command/git_trac/releasemgr/cmdline.py", line 164, in launch
    app.release(args.version, check=args.check)
  File "/mnt/disk/home/release/opt/git-trac-command/git_trac/releasemgr/app.py", line 302, in release
    update_version(version)
  File "/mnt/disk/home/release/opt/git-trac-command/git_trac/releasemgr/make_release.py", line 12, in update_version
    check_call(['sage', '-sh', '-c', 'sage-update-version {0}'.format(version)])
  File "/usr/lib64/python2.7/subprocess.py", line 186, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['sage', '-sh', '-c', 'sage-update-version 8.2.beta7']' returned non-zero exit status 1
```



---

Comment by embray created at 2018-03-05 11:27:55

IDGI.  Does this mean needs work?


---

Comment by embray created at 2018-03-05 11:34:06

Is this being run in a non-unicode environment?  What is LC_CTYPE?  What does `sys.stdout.encoding` show?


---

Comment by embray created at 2018-03-05 11:42:53

Changing status from new to needs_review.


---

Comment by embray created at 2018-03-05 11:42:53

I guess this should fix it.
----
New commits:


---

Comment by chapoton created at 2018-03-15 08:10:12

So let us try again


---

Comment by chapoton created at 2018-03-15 08:10:12

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-03-22 19:22:49

Resolution: fixed
