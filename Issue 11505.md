# Issue 11505: Polygon fill doesn't work

Issue created by migration from https://trac.sagemath.org/ticket/11677

Original creator: kcrisman

Original creation time: 2011-08-11 01:21:50

Assignee: jason, was

CC:  jason

From [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/ad4f646974dbc847):

----

Hello, 

```
------- ----------- 
P = polygon([[1,2], [5,6], [5,0]], fill = False, color='red') 
P 
------- ----------- 
```

still fills the polygon, is there another way to turn off color fill. 
Thanks. 
-Giri 

----
The fix is to add

```
         z = int(options.pop('zorder', 1))
         p.set_alpha(a)
+        f = options.pop('fill', False)
+        p.set_fill(f)
         c = to_mpl_color(options['rgbcolor'])
         p.set_edgecolor(c)
```

in `Polygon._render_on_subplot` in sage/plot/polygon.py.


Notice that this means to actually _get_ such a polygon, you would need to set the thickness.  Is that a bug?  We do intentionally have the thickness 0 in the ``@`options`.

```
sage: P = polygon([[1,2], [5,6], [5,0]], fill = False, thickness=1) ; P
sage: P = polygon([[1,2], [5,6], [5,0]], fill = False) ; P
```



---

Comment by kcrisman created at 2011-08-11 01:24:19

Might be worth looking at this file a little more too.  There are lots of interesting mpl options like hash one could set, and there is at least one typo:

```

    EXAMPLES:
        
    Note this should normally be used indirectly via ``circle``::
        
        sage: from sage.plot.polygon import Polygon   
```

which I thought had another ticket, but maybe it doesn't...


---

Comment by kcrisman created at 2012-01-10 16:54:07

Nope, turned out that was #10965.   Let's make fill work here too, saving other options for another ticket.


---

Comment by kcrisman created at 2012-01-10 16:54:07

Changing keywords from "" to "beginner".


---

Comment by kcrisman created at 2012-01-10 19:00:20

Oops!  The default fill should be True, of course.


---

Comment by peter.story created at 2012-01-10 22:16:48

Changing status from new to needs_review.


---

Attachment

The 'fill' argument now works.
Also, by default, 'thickness' is 0. However, if you specify fill=false, 'thickness' will default to 1.


---

Comment by kcrisman created at 2012-01-11 20:32:51

See also #12297.


---

Comment by kcrisman created at 2012-01-11 22:01:25

Okay, this looks good, and doesn't seem to have any bugs that weren't already there (see #12297).   I've attached a reviewer patch  which adds some doctests. 

I'm going to consider that Peter and Kenneth verified my original two-liner, and I give positive review to the rest.


---

Comment by kcrisman created at 2012-01-11 22:01:25

Changing status from needs_review to positive_review.


---

Attachment

apply after fix fill patch


---

Comment by kcrisman created at 2012-01-11 22:03:36

Apply [attachment:trac_11677_fillFixes.patch] and [attachment:trac_11677-reviewer.patch].


---

Comment by ksmith created at 2012-01-11 22:05:59

Changing keywords from "beginner" to "beginner sd35.5".


---

Comment by jdemeyer created at 2012-01-18 11:35:46

This should be rebased to sage-4.8.rc0:

```
jdemeyer@sage:/scratch/jdemeyer/merger/sage-4.8.rc0/devel/sage$ hg qimport -P http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11677/trac_11677_fillFixes.patch
adding trac_11677_fillFixes.patch to series file
applying trac_11677_fillFixes.patch
patching file sage/plot/polygon.py
Hunk #3 FAILED at 271
1 out of 4 hunks FAILED -- saving rejects to file sage/plot/polygon.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_11677_fillFixes.patch
```



---

Comment by jdemeyer created at 2012-01-18 11:35:46

Changing status from positive_review to needs_work.


---

Attachment

Rebased to sage-5.0.beta1, apply only this


---

Comment by jdemeyer created at 2012-01-24 09:12:43

Changing status from needs_work to positive_review.


---

Comment by kcrisman created at 2012-01-24 13:51:38

Thanks, Jeroen!  My students have started classes now, so I didn't think they'd have time to get to it for a while, but this is welcome assistance.


---

Comment by jdemeyer created at 2012-01-29 11:17:46

Resolution: fixed
