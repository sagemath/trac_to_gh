# Issue 31808: sage.env: Deprecate SAGE_ETC, SAGE_INC

Issue created by migration from https://trac.sagemath.org/ticket/32045

Original creator: mkoeppe

Original creation time: 2021-06-23 18:25:22

CC:  jhpalmieri fbissey @kliem dimpase

These variables are unused (and do not have a legitimate use any more), but there might be user packages around that use it.


---

Comment by mkoeppe created at 2021-06-23 18:25:55

I don't know how to deprecate global variables, so help is welcome.


---

Comment by @kliem created at 2021-06-23 19:47:42

Basically `lazy_import` would work. However, it isn't allowed in there. So we basically need to copy it to create a small `deprecated_string_class`. All the special methods need to be copied, which is annoying but trivial.

What do you think about this solution?


---

Comment by mkoeppe created at 2021-06-23 20:41:51

Probably not worth doing this. Let's just document it as deprecated.


---

Comment by fbissey created at 2021-06-23 22:45:04

I thought I was (ab)using `SAGE_ETC` but it looks like it do go when I abandoned `sage-env` in sage-on-gentoo.


---

Comment by @kliem created at 2021-06-24 07:36:32

Do you think people will catch on? Then again, they will catch on, once it's gone and then they can look up the release notes. So maybe just document it.


---

Comment by fbissey created at 2021-06-24 08:31:35

I don't really think anyone will notice

```
fbissey@tarazed ~/sandbox/git-personal/sage $ grep -rI SAGE_ETC src/
src/bin/sage-env:    export SAGE_ETC="$SAGE_LOCAL/etc"
src/sage/env.py:SAGE_ETC = var("SAGE_ETC", join(SAGE_LOCAL, "etc"))
fbissey@tarazed ~/sandbox/git-personal/sage $ grep -rI SAGE_INC src/
src/sage/env.py:SAGE_INC = var("SAGE_INC", join(SAGE_LOCAL, "include"))
```

OK, there is one thing that need attention

```
build/pkgs/notebook/spkg-install.in:ETC_JUPYTER="$SAGE_ETC"/jupyter
```


But `SAGE_INC` can disappear now and no-one will miss it.


---

Comment by mkoeppe created at 2021-06-24 18:50:28

I originally just meant that we should deprecate the Python variables in `sage.env`. 
Things in `build` that use environment variables set by `sage-env` are unaffected by that.

But we could, of course, also just remove the environment variables, too. Any user package that uses them should certainly be updated anyway to become properly pip-installable.


---

Comment by mkoeppe created at 2021-06-24 19:03:00

New commits:


---

Comment by mkoeppe created at 2021-06-24 19:03:00

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2021-06-24 21:46:30

This looks okay to me. `@`fbissey, how about you?


---

Comment by fbissey created at 2021-06-24 21:55:48

Replying to [comment:11 jhpalmieri]:
> This looks okay to me. `@`fbissey, how about you?

Yes, it looks perfectly fine to me. We are cutting dead branches really.


---

Comment by jhpalmieri created at 2021-06-24 23:44:39

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-06-25 00:34:37

Thanks!


---

Comment by vbraun created at 2021-07-06 21:29:16

Resolution: fixed
