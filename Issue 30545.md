# Issue 30545: Compilation error in sagelib-9.1 / ppl-1.2 with clang 11

Issue created by migration from https://trac.sagemath.org/ticket/30782

Original creator: @thierry-FreeBSD

Original creation time: 2020-10-17 16:34:23

Keywords: ppl; FreeBSD

When built with clang version 11.0.0, the compilation of sagelib 9.1 fails with the following message:



```
[sagelib-9.1] [179/510] cc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -O2 -pipe -fstack-protector-strong -fno-strict-aliasing -O2 -pipe -DLIBICONV_PLUG -fstack-protector-strong -isystem /usr/local/include -fno-strict-aliasing -DLIBICONV_PLUG -I/usr/local/include -isystem /usr/local/include -fPIC -Isage/libs -I./sage/libs/ntl -I./sage/cpython -I/usr/local/lib/python3.7/site-packages/cysignals -I/wrkdirs/usr/ports/math/sage/work/build/usr/local/include -I/wrkdirs/usr/ports/math/sage/work/sage-9.1/src -I/wrkdirs/usr/ports/math/sage/work/sage-9.1/src/sage/ext -I/usr/local/include/python3.7m -I/usr/local/lib/python3.7/site-packages/numpy/core/include -Ibuild/cythonized -I/wrkdirs/usr/ports/math/sage/work/build/usr/local/include -I/usr/local/include/python3.7m -c build/cythonized/sage/libs/ppl.cpp -o build/temp.freebsd-13.0-CURRENT-amd64-3.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c++11
[sagelib-9.1] build/cythonized/sage/libs/ppl.cpp:13974:46: error: cannot initialize a parameter of type 'bool' with an rvalue of type 'nullptr_t'
[sagelib-9.1]   __pyx_v_result = __pyx_v_self->thisptr->OK(NULL);
[sagelib-9.1]                                              ^~~~
[sagelib-9.1] /usr/include/sys/_null.h:37:14: note: expanded from macro 'NULL'
[sagelib-9.1] #define NULL    nullptr
[sagelib-9.1]                 ^~~~~~~
[sagelib-9.1] /usr/local/include/ppl.hh:48056:16: note: passing argument to parameter 'check_not_empty' here
[sagelib-9.1]   bool OK(bool check_not_empty = false) const;
[sagelib-9.1]                ^
[sagelib-9.1] 1 error generated.
```


Note: this is on FreeBSD with external ppl-1.2 / pplpy-0.8.4.

I have not found other report of this; is it specific to FreeBSD?


---

Comment by dimpase created at 2020-10-22 18:03:00

ought to be reported on https://gitlab.com/videlec/pplpy - but indeed, clang 11 is sort of rare. Perhaps this problem was fixed in the ongoing work on sage 9.2, where one has to deal with clang 12 from Apple (but it's Apple, so all bets are off)


---

Comment by chapoton created at 2022-05-24 18:49:28

should we close as obsolete or just change the milestone to 9.7 ?


---

Comment by mkoeppe created at 2022-05-24 18:50:49

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-05-24 18:50:49

We can close it.


---

Comment by chapoton created at 2022-05-24 18:51:20

Resolution: invalid
