# Issue 20390: Flask-Babel 0.10.0 breaks sagenb

Issue created by migration from https://trac.sagemath.org/ticket/20627

Original creator: vbraun

Original creation time: 2016-05-19 07:28:47

CC:  fbissey @timokau

Breaks sagenb with RuntimeError: working outside of application context

```
sage -t --long local/lib/python2.7/site-packages/sagenb/notebook/cell.py  # 2 doctests failed
sage -t --long local/lib/python2.7/site-packages/sagenb/notebook/worksheet.py  # 2 doctests failed
sage -t --long local/lib/python2.7/site-packages/sagenb/notebook/notebook.py  # 8 doctests failed
sage -t --long local/lib/python2.7/site-packages/sagenb/notebook/challenge.py  # 13 doctests failed
sage -t --long local/lib/python2.7/site-packages/sagenb/notebook/template.py  # 4 doctests failed
```



---

Comment by strogdon created at 2016-06-26 23:50:52

I also see things like

```
 AttributeError: '_AppCtxGlobals' object has no attribute 'notebook'
```

when doctesting the `sagenb/notebook` folder. I first saw this with `sage-on-gentoo` and the subject `Flask-Babel`


---

Comment by chapoton created at 2018-01-24 07:23:24

see #20922


---

Comment by chapoton created at 2018-07-12 12:03:49

see https://github.com/sagemath/sagenb/pull/450


---

Comment by chapoton created at 2018-07-12 12:52:45

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-07-12 12:52:45

Pull request has been merged upstream.

I suggest now to close this ticket and concentrate on #20922.


---

Comment by chapoton created at 2018-07-18 06:43:46

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-02-26 13:58:00

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.


---

Comment by embray created at 2019-02-26 13:58:00

Resolution: invalid
