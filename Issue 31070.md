# Issue 31070: interactive_simplex_method: Add static methods "random_element" to LPDictionary, InteractiveLPProblemStandardForm

Issue created by migration from https://trac.sagemath.org/ticket/31307

Original creator: mkoeppe

Original creation time: 2021-01-30 20:45:06

CC:  yzh novoselt

`random_element` is the standard method that Sage parents provide to produce a random element.

As the objects in `interactive_simplex_method` do not use the parent/element framework, we just make it a static method of the class.

The existing function `random_dictionary` is kept as an alias.


---

Comment by mkoeppe created at 2021-01-30 20:47:19

New commits:


---

Comment by mkoeppe created at 2021-01-30 20:47:19

Changing status from new to needs_review.


---

Comment by yzh created at 2021-01-31 01:43:52

patchbot fails?


---

Comment by mkoeppe created at 2021-01-31 02:27:33

Looks like this branch forgot to actually remove the original code.


---

Comment by git created at 2021-01-31 02:30:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by yzh created at 2021-01-31 04:05:53

I don't quite understand what the argument `special_probability` means (in both methods). 

I thought that in order to meet the claimed probability, one has to scale the value `special_probability` using the other variables `m`,`n` and `bound` in 

```
if special_probability < random():
```



---

Comment by yzh created at 2021-01-31 04:20:28

Does it make sense to include those optional arguments such as `problem_type` in the `random_element` generator?


---

Comment by mkoeppe created at 2021-01-31 04:45:47

Good idea.


---

Comment by git created at 2021-01-31 04:50:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-01-31 04:55:09

Replying to [comment:6 yzh]:
> I don't quite understand what the argument `special_probability` means (in both methods). 

I agree that it's not very clearly explained.  The docstrings make the words "is allowed to be" and "potentially" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.


---

Comment by yzh created at 2021-01-31 05:46:21

Replying to [comment:10 mkoeppe]:
> I agree that it's not very clearly explained.  The docstrings make the words "is allowed to be" and "potentially" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.

Yes, I seem to understand the code, and I agree with this simple design of randomness.

The probability `p*(1-1/2^m)` of getting infeasible dictionary and the probability `p+(1-p)/2^n` of getting dual feasible dictionary are actually close to `p` when `n,m` are large. However, the probability of getting optimal dictionary is quite off. I guess it's the hidden meaning of "potentially" that I didn't understand.


---

Comment by git created at 2021-01-31 07:01:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-31 07:03:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-31 08:02:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-01-31 08:05:39

Avoiding keyword-only arguments to work around the bug reported in #31309


---

Comment by yzh created at 2021-01-31 08:41:33

Changing status from needs_review to positive_review.


---

Comment by yzh created at 2021-01-31 08:41:33

All looks good to me on this ticket.


---

Comment by mkoeppe created at 2021-01-31 08:53:18

Thanks for reviewing!


---

Comment by vbraun created at 2021-03-07 21:38:48

Merge conflict


---

Comment by vbraun created at 2021-03-07 21:38:48

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-03-07 22:37:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-03-07 22:38:13

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2021-03-08 14:39:08

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2021-03-08 14:39:08


```
**********************************************************************
File "src/sage/numerical/interactive_simplex_method.py", line 2040, in sage.numerical.interactive_simplex_method.InteractiveLPProblemStandardForm.?
Failed example:
    InteractiveLPProblemStandardForm.random_element(3, 4)
Expected:
    LP problem (use typeset mode to see details)
Got:
    LP problem (use 'view(...)' or '%display typeset' for details)
**********************************************************************
File "src/sage/numerical/interactive_simplex_method.py", line 3932, in sage.numerical.interactive_simplex_method.LPDictionary.random_element
Failed example:
    random_dictionary(3, 4)  # indirect doctest
Expected:
    LP problem dictionary (use typeset mode to see details)
Got:
    LP problem dictionary (use 'view(...)' or '%display typeset' for details)
**********************************************************************
```



---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by git created at 2021-03-25 19:49:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-03-25 22:55:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-03-25 22:58:04

Changing status from needs_work to needs_review.


---

Comment by yzh created at 2021-04-08 05:44:19

All tests passed!


---

Comment by yzh created at 2021-04-08 05:44:19

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-04-08 16:31:15

Thanks!


---

Comment by vbraun created at 2021-05-27 20:29:58

Resolution: fixed
