# Issue 31070: interactive_simplex_method: Add static methods "random_element" to LPDictionary, InteractiveLPProblemStandardForm

archive/issues_031070.json:
```json
{
    "body": "CC:  @yuan-zhou @novoselt\n\n`random_element` is the standard method that Sage parents provide to produce a random element.\n\nAs the objects in `interactive_simplex_method` do not use the parent/element framework, we just make it a static method of the class.\n\nThe existing function `random_dictionary` is kept as an alias.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31307\n\n",
    "created_at": "2021-01-30T20:45:06Z",
    "labels": [
        "component: linear programming"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "interactive_simplex_method: Add static methods \"random_element\" to LPDictionary, InteractiveLPProblemStandardForm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31070",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @yuan-zhou @novoselt

`random_element` is the standard method that Sage parents provide to produce a random element.

As the objects in `interactive_simplex_method` do not use the parent/element framework, we just make it a static method of the class.

The existing function `random_dictionary` is kept as an alias.

Issue created by migration from https://trac.sagemath.org/ticket/31307





---

archive/issue_comments_443246.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-30T20:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443246",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_443247.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-30T20:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443247",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443248.json:
```json
{
    "body": "patchbot fails?",
    "created_at": "2021-01-31T01:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443248",
    "user": "https://github.com/yuan-zhou"
}
```

patchbot fails?



---

archive/issue_comments_443249.json:
```json
{
    "body": "Looks like this branch forgot to actually remove the original code.",
    "created_at": "2021-01-31T02:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443249",
    "user": "https://github.com/mkoeppe"
}
```

Looks like this branch forgot to actually remove the original code.



---

archive/issue_comments_443250.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T02:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443251.json:
```json
{
    "body": "I don't quite understand what the argument `special_probability` means (in both methods). \n\nI thought that in order to meet the claimed probability, one has to scale the value `special_probability` using the other variables `m`,`n` and `bound` in \n\n```\nif special_probability < random():\n```\n",
    "created_at": "2021-01-31T04:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443251",
    "user": "https://github.com/yuan-zhou"
}
```

I don't quite understand what the argument `special_probability` means (in both methods). 

I thought that in order to meet the claimed probability, one has to scale the value `special_probability` using the other variables `m`,`n` and `bound` in 

```
if special_probability < random():
```




---

archive/issue_comments_443252.json:
```json
{
    "body": "Does it make sense to include those optional arguments such as `problem_type` in the `random_element` generator?",
    "created_at": "2021-01-31T04:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443252",
    "user": "https://github.com/yuan-zhou"
}
```

Does it make sense to include those optional arguments such as `problem_type` in the `random_element` generator?



---

archive/issue_comments_443253.json:
```json
{
    "body": "Good idea.",
    "created_at": "2021-01-31T04:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443253",
    "user": "https://github.com/mkoeppe"
}
```

Good idea.



---

archive/issue_comments_443254.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T04:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443255.json:
```json
{
    "body": "Replying to [comment:6 yzh]:\n> I don't quite understand what the argument `special_probability` means (in both methods). \n\nI agree that it's not very clearly explained.  The docstrings make the words \"is allowed to be\" and \"potentially\" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.",
    "created_at": "2021-01-31T04:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443255",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:6 yzh]:
> I don't quite understand what the argument `special_probability` means (in both methods). 

I agree that it's not very clearly explained.  The docstrings make the words "is allowed to be" and "potentially" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.



---

archive/issue_comments_443256.json:
```json
{
    "body": "Replying to [comment:10 mkoeppe]:\n> I agree that it's not very clearly explained.  The docstrings make the words \"is allowed to be\" and \"potentially\" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.\n\nYes, I seem to understand the code, and I agree with this simple design of randomness.\n\nThe probability `p*(1-1/2^m)` of getting infeasible dictionary and the probability `p+(1-p)/2^n` of getting dual feasible dictionary are actually close to `p` when `n,m` are large. However, the probability of getting optimal dictionary is quite off. I guess it's the hidden meaning of \"potentially\" that I didn't understand.",
    "created_at": "2021-01-31T05:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443256",
    "user": "https://github.com/yuan-zhou"
}
```

Replying to [comment:10 mkoeppe]:
> I agree that it's not very clearly explained.  The docstrings make the words "is allowed to be" and "potentially" do a lot of work here.  As you can see in the code, with this probability it will allow negative lower bounds for the random b; and again (independently), with this probability it will allow positive upper bounds for the random c.

Yes, I seem to understand the code, and I agree with this simple design of randomness.

The probability `p*(1-1/2^m)` of getting infeasible dictionary and the probability `p+(1-p)/2^n` of getting dual feasible dictionary are actually close to `p` when `n,m` are large. However, the probability of getting optimal dictionary is quite off. I guess it's the hidden meaning of "potentially" that I didn't understand.



---

archive/issue_comments_443257.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T07:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443258.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T07:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443259.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T08:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443260.json:
```json
{
    "body": "Avoiding keyword-only arguments to work around the bug reported in #31309",
    "created_at": "2021-01-31T08:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443260",
    "user": "https://github.com/mkoeppe"
}
```

Avoiding keyword-only arguments to work around the bug reported in #31309



---

archive/issue_comments_443261.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-31T08:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443261",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443262.json:
```json
{
    "body": "All looks good to me on this ticket.",
    "created_at": "2021-01-31T08:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443262",
    "user": "https://github.com/yuan-zhou"
}
```

All looks good to me on this ticket.



---

archive/issue_comments_443263.json:
```json
{
    "body": "Thanks for reviewing!",
    "created_at": "2021-01-31T08:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443263",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for reviewing!



---

archive/issue_comments_443264.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-03-07T21:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443264",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_443265.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-03-07T21:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443265",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_443266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-07T22:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443267.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-03-07T22:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443267",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_443268.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-03-08T14:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443268",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_443269.json:
```json
{
    "body": "\n```\n**********************************************************************\nFile \"src/sage/numerical/interactive_simplex_method.py\", line 2040, in sage.numerical.interactive_simplex_method.InteractiveLPProblemStandardForm.?\nFailed example:\n    InteractiveLPProblemStandardForm.random_element(3, 4)\nExpected:\n    LP problem (use typeset mode to see details)\nGot:\n    LP problem (use 'view(...)' or '%display typeset' for details)\n**********************************************************************\nFile \"src/sage/numerical/interactive_simplex_method.py\", line 3932, in sage.numerical.interactive_simplex_method.LPDictionary.random_element\nFailed example:\n    random_dictionary(3, 4)  # indirect doctest\nExpected:\n    LP problem dictionary (use typeset mode to see details)\nGot:\n    LP problem dictionary (use 'view(...)' or '%display typeset' for details)\n**********************************************************************\n```\n",
    "created_at": "2021-03-08T14:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443269",
    "user": "https://github.com/vbraun"
}
```


```
**********************************************************************
File "src/sage/numerical/interactive_simplex_method.py", line 2040, in sage.numerical.interactive_simplex_method.InteractiveLPProblemStandardForm.?
Failed example:
    InteractiveLPProblemStandardForm.random_element(3, 4)
Expected:
    LP problem (use typeset mode to see details)
Got:
    LP problem (use 'view(...)' or '%display typeset' for details)
**********************************************************************
File "src/sage/numerical/interactive_simplex_method.py", line 3932, in sage.numerical.interactive_simplex_method.LPDictionary.random_element
Failed example:
    random_dictionary(3, 4)  # indirect doctest
Expected:
    LP problem dictionary (use typeset mode to see details)
Got:
    LP problem dictionary (use 'view(...)' or '%display typeset' for details)
**********************************************************************
```




---

archive/issue_comments_443270.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443270",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_443271.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-25T19:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-25T22:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443273.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-25T22:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443273",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443274.json:
```json
{
    "body": "All tests passed!",
    "created_at": "2021-04-08T05:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443274",
    "user": "https://github.com/yuan-zhou"
}
```

All tests passed!



---

archive/issue_comments_443275.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-08T05:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443275",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443276.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-04-08T16:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443276",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_443277.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-05-27T20:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31070#issuecomment-443277",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_028463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-27T20:29:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31070",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31070#event-28463"
}
```
