# Issue 19540: Three new SRGs and db update

archive/issues_019540.json:
```json
{
    "body": "CC:  @dimpase\n\nAndries Brouwer's database has been updated, and this ticket forwards the changes to Sage's copy of it.\n\n4 graphs have been added to it, 3 of which are built from 2-intersection codes. The last one comes from a reference I haven't been able to find yet.\n\nNathann\n\nhttp://www.steinertriples.fr/ncohen/tmp/graphs-20151224.tar.bz2\n\nIssue created by migration from https://trac.sagemath.org/ticket/19777\n\n",
    "created_at": "2015-12-24T12:43:13Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "Three new SRGs and db update",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19540",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @dimpase

Andries Brouwer's database has been updated, and this ticket forwards the changes to Sage's copy of it.

4 graphs have been added to it, 3 of which are built from 2-intersection codes. The last one comes from a reference I haven't been able to find yet.

Nathann

http://www.steinertriples.fr/ncohen/tmp/graphs-20151224.tar.bz2

Issue created by migration from https://trac.sagemath.org/ticket/19777





---

archive/issue_comments_268107.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-24T12:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268107",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_268108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-24T12:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268108",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268109.json:
```json
{
    "body": "I think I already mentioned on another ticket that 2-intersection codes and 2-distance codes are (almost) the same thing. Why don't you add these 2-intersection codes to the corr. db, instead of hardcoding them into strongly_regular_graphs_db?",
    "created_at": "2015-12-24T14:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268109",
    "user": "https://github.com/dimpase"
}
```

I think I already mentioned on another ticket that 2-intersection codes and 2-distance codes are (almost) the same thing. Why don't you add these 2-intersection codes to the corr. db, instead of hardcoding them into strongly_regular_graphs_db?



---

archive/issue_comments_268110.json:
```json
{
    "body": "a 2-intersection code is a projective 2-weight code:\ne.g. take L from `SRG_1024_363_122_132()` and do\n\n```\nsage: K = GF(2**2,'x')\nsage: x = K.gens()[0]\nsage: L = [map({'0':0,'1':1,'a':x,'b':x**2}.get,xx) for xx in L]\nsage: L = Matrix(K,map(list,L)).transpose()\nsage: c = LinearCode(L); c\nLinear code of length 121, dimension 5 over Finite Field in x of size 2^2\nsage: [w for w,f in enumerate(c.weight_distribution()) if w and f]\n[88, 96]\nsage: c.weight_enumerator()\nx^121 + 660*x^33*y^88 + 363*x^25*y^96\n```\nso you have 0 word, 660 words of weight 88, and 363 of weight 96.",
    "created_at": "2015-12-24T15:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268110",
    "user": "https://github.com/dimpase"
}
```

a 2-intersection code is a projective 2-weight code:
e.g. take L from `SRG_1024_363_122_132()` and do

```
sage: K = GF(2**2,'x')
sage: x = K.gens()[0]
sage: L = [map({'0':0,'1':1,'a':x,'b':x**2}.get,xx) for xx in L]
sage: L = Matrix(K,map(list,L)).transpose()
sage: c = LinearCode(L); c
Linear code of length 121, dimension 5 over Finite Field in x of size 2^2
sage: [w for w,f in enumerate(c.weight_distribution()) if w and f]
[88, 96]
sage: c.weight_enumerator()
x^121 + 660*x^33*y^88 + 363*x^25*y^96
```
so you have 0 word, 660 words of weight 88, and 363 of weight 96.



---

archive/issue_comments_268111.json:
```json
{
    "body": "Hmmmm.. I used your code and generated the graph from the two weights code. For some reason it takes infinitely more time.\n\n```\nsage: %time strongly_regular_from_two_weight_code(c)\nCPU times: user 19 s, sys: 104 ms, total: 19.1 s\nWall time: 18.5 s\nGraph on 1024 vertices\n```",
    "created_at": "2015-12-24T16:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268111",
    "user": "https://github.com/nathanncohen"
}
```

Hmmmm.. I used your code and generated the graph from the two weights code. For some reason it takes infinitely more time.

```
sage: %time strongly_regular_from_two_weight_code(c)
CPU times: user 19 s, sys: 104 ms, total: 19.1 s
Wall time: 18.5 s
Graph on 1024 vertices
```



---

archive/issue_comments_268112.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Hmmmm.. I used your code and generated the graph from the two weights code. For some reason it takes infinitely more time.\n\n\nwell, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...",
    "created_at": "2015-12-24T16:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268112",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 ncohen]:
> Hmmmm.. I used your code and generated the graph from the two weights code. For some reason it takes infinitely more time.


well, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...



---

archive/issue_comments_268113.json:
```json
{
    "body": "> well, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...\n\n\nI understand, yet what you ask represents a big amount of work if you insist to make me do all of it.",
    "created_at": "2015-12-24T16:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268113",
    "user": "https://github.com/nathanncohen"
}
```

> well, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...


I understand, yet what you ask represents a big amount of work if you insist to make me do all of it.



---

archive/issue_comments_268114.json:
```json
{
    "body": "Replying to [comment:7 ncohen]:\n> > well, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...\n\n> \n> I understand, yet what you ask represents a big amount of work if you insist to make me do all of it.\n\n\nI can do the work, it's not a problem (although I currently have keyboard/mouse elbow, and should not do much typing for a while), but do you agree that by right this data must be in the `coding/` ?",
    "created_at": "2015-12-24T16:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268114",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:7 ncohen]:
> > well, all I am saying is that these matrices etc should go into the database; it's another story how to use them - nothing prevents you from calling the faster function on them...

> 
> I understand, yet what you ask represents a big amount of work if you insist to make me do all of it.


I can do the work, it's not a problem (although I currently have keyboard/mouse elbow, and should not do much typing for a while), but do you agree that by right this data must be in the `coding/` ?



---

archive/issue_comments_268115.json:
```json
{
    "body": "> I can do the work, it's not a problem (although I currently have keyboard/mouse elbow, and should not do much typing for a while), but do you agree that by right this data must be in the `coding/` ?\n\n\nYeah yeah that's where it should be. At the moment I am trying to figure out what exactly needs to be done, and how. Turns out that the difference between a two-weight code and a two intersection set is merely a matrix transposition, is it?\n\nNathann",
    "created_at": "2015-12-24T16:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268115",
    "user": "https://github.com/nathanncohen"
}
```

> I can do the work, it's not a problem (although I currently have keyboard/mouse elbow, and should not do much typing for a while), but do you agree that by right this data must be in the `coding/` ?


Yeah yeah that's where it should be. At the moment I am trying to figure out what exactly needs to be done, and how. Turns out that the difference between a two-weight code and a two intersection set is merely a matrix transposition, is it?

Nathann



---

archive/issue_comments_268116.json:
```json
{
    "body": "```\nsage: from sage.coding.two_weight_db import data\nsage: %time strongly_regular_from_two_intersection_set(data[-1]['M'].transpose())\nCPU times: user 452 ms, sys: 24 ms, total: 476 ms\nWall time: 436 ms\nGraph on 625 vertices\nsage: %time strongly_regular_from_two_weight_code(data[-1]['M'])\nCPU times: user 1.68 s, sys: 16 ms, total: 1.7 s\nWall time: 1.67 s\nGraph on 625 vertices\n```",
    "created_at": "2015-12-24T16:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268116",
    "user": "https://github.com/nathanncohen"
}
```

```
sage: from sage.coding.two_weight_db import data
sage: %time strongly_regular_from_two_intersection_set(data[-1]['M'].transpose())
CPU times: user 452 ms, sys: 24 ms, total: 476 ms
Wall time: 436 ms
Graph on 625 vertices
sage: %time strongly_regular_from_two_weight_code(data[-1]['M'])
CPU times: user 1.68 s, sys: 16 ms, total: 1.7 s
Wall time: 1.67 s
Graph on 625 vertices
```



---

archive/issue_comments_268117.json:
```json
{
    "body": "Okay, everything looks fairly straightforward. The only problem is with the SRG parameter 'guessing' from the two_weight codes. If we do the operation through the matrix's transpose I have no idea what parameters we end up with.\n\nNathann",
    "created_at": "2015-12-24T16:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268117",
    "user": "https://github.com/nathanncohen"
}
```

Okay, everything looks fairly straightforward. The only problem is with the SRG parameter 'guessing' from the two_weight codes. If we do the operation through the matrix's transpose I have no idea what parameters we end up with.

Nathann



---

archive/issue_comments_268118.json:
```json
{
    "body": "Replying to [comment:11 ncohen]:\n> Okay, everything looks fairly straightforward. The only problem is with the SRG parameter 'guessing' from the two_weight codes. If we do the operation through the matrix's transpose I have no idea what parameters we end up with.\n\n\nIt seems that k will be one of eigenvalue multiplicities of the \"usual\" graph. I.e. often the same, e.g. for data on this ticket they are the same, but not always --- that's where formulae on Chen's page go wrong. One of these f, g:\n\n```\n    # multiplicity of eigenvalues 'r,s' (f=lambda_r, g=lambda_s)\n    #\n    # They are integers (checked by the 'integrality condition').\n    f = -k*(s+1)*(k-s)/((k+r*s)*(r-s))\n    g =  k*(r+1)*(k-r)/((k+r*s)*(r-s))\n```\nDetails are in http://pages.uoregon.edu/kantor/PAPERS/2-WeightCodes.pdf.",
    "created_at": "2015-12-24T16:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268118",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:11 ncohen]:
> Okay, everything looks fairly straightforward. The only problem is with the SRG parameter 'guessing' from the two_weight codes. If we do the operation through the matrix's transpose I have no idea what parameters we end up with.


It seems that k will be one of eigenvalue multiplicities of the "usual" graph. I.e. often the same, e.g. for data on this ticket they are the same, but not always --- that's where formulae on Chen's page go wrong. One of these f, g:

```
    # multiplicity of eigenvalues 'r,s' (f=lambda_r, g=lambda_s)
    #
    # They are integers (checked by the 'integrality condition').
    f = -k*(s+1)*(k-s)/((k+r*s)*(r-s))
    g =  k*(r+1)*(k-r)/((k+r*s)*(r-s))
```
Details are in http://pages.uoregon.edu/kantor/PAPERS/2-WeightCodes.pdf.



---

archive/issue_comments_268119.json:
```json
{
    "body": "I still don't see a way to do the job cleanly.",
    "created_at": "2015-12-24T17:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268119",
    "user": "https://github.com/nathanncohen"
}
```

I still don't see a way to do the job cleanly.



---

archive/issue_comments_268120.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> I still don't see a way to do the job cleanly.\n\nDo you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?\n \nAnyway, a part of the job is to move these L's and the related info into the two-weight code database.",
    "created_at": "2015-12-24T18:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268120",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:13 ncohen]:
> I still don't see a way to do the job cleanly.

Do you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?
 
Anyway, a part of the job is to move these L's and the related info into the two-weight code database.



---

archive/issue_comments_268121.json:
```json
{
    "body": "> Do you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?\n\n\nI mean a way to use the \"SRG from 2 intersection\" routine on the two-weight code instead of the current function we use. It's much faster, but if we do that we don't know how to predict which parameters we will end up with.\n\n> Anyway, a part of the job is to move these L's and the related info into the two-weight code database.\n\n\nTrue but that leaves an unpleasant feeling of just not doing what needs to be done.\n\nNathann",
    "created_at": "2015-12-24T18:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268121",
    "user": "https://github.com/nathanncohen"
}
```

> Do you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?


I mean a way to use the "SRG from 2 intersection" routine on the two-weight code instead of the current function we use. It's much faster, but if we do that we don't know how to predict which parameters we will end up with.

> Anyway, a part of the job is to move these L's and the related info into the two-weight code database.


True but that leaves an unpleasant feeling of just not doing what needs to be done.

Nathann



---

archive/issue_comments_268122.json:
```json
{
    "body": "Replying to [comment:15 ncohen]:\n> > Do you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?\n\n> \n> I mean a way to use the \"SRG from 2 intersection\" routine on the two-weight code instead of the current function we use. It's much faster, but if we do that we don't know how to predict which parameters we will end up with.\n\n\nI thought we don't have this implemented for the  two-weight code graph on its words, do we?\n\nHere we are in a better shape: there are formulas from Cor.3.7 of Calderbank-Kantor, written also on on Eric Chen's pages.\nMy understanding is that they give the parameters of  \"SRG from 2 intersection\".\n(or perhaps its complement - this is easy to figure out).\nThis will answer the question \n\n\"is there a 2-intersection proj. set giving (v,k,l,mu)-SRG\".   **(A)**\n\n---\n\nTo get the parameters of the graph of codewords of the corresponding 2-weight code, one needs the duality of assoc. schemes (Thm 5.7 and the discussion after it in Calderbank-Kantor). \nIt is easy to compute them directly from graph parameters (via eigenvalues etc).\nI'd be happy to provide an implementation of it.\nThus, to answer the question \n\n\"is there a 2-weight code giving (v,k,l,mu)-SRG\"  **(B)**, \n\none will compute the parameters (v,k',l',mu') of the dual (note that A==dual(dual(A)), and answer **(A)** for (v,k',l',mu'). Then use Thm 3.1 (p.100, same text), which tells one how to switch between (n,k,h_1,h_2) and parameters of the corresponding 2-weight code.\n\n> \n> > Anyway, a part of the job is to move these L's and the related info into the two-weight code database.\n\n> \n> True but that leaves an unpleasant feeling of just not doing what needs to be done.\n\n\nabove is the plan, what do you think about it?\n\nDima",
    "created_at": "2015-12-24T19:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268122",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:15 ncohen]:
> > Do you mean a procedure to give possible parameters of a projective 2-weight code from (v,k,l,mu)?

> 
> I mean a way to use the "SRG from 2 intersection" routine on the two-weight code instead of the current function we use. It's much faster, but if we do that we don't know how to predict which parameters we will end up with.


I thought we don't have this implemented for the  two-weight code graph on its words, do we?

Here we are in a better shape: there are formulas from Cor.3.7 of Calderbank-Kantor, written also on on Eric Chen's pages.
My understanding is that they give the parameters of  "SRG from 2 intersection".
(or perhaps its complement - this is easy to figure out).
This will answer the question 

"is there a 2-intersection proj. set giving (v,k,l,mu)-SRG".   **(A)**

---

To get the parameters of the graph of codewords of the corresponding 2-weight code, one needs the duality of assoc. schemes (Thm 5.7 and the discussion after it in Calderbank-Kantor). 
It is easy to compute them directly from graph parameters (via eigenvalues etc).
I'd be happy to provide an implementation of it.
Thus, to answer the question 

"is there a 2-weight code giving (v,k,l,mu)-SRG"  **(B)**, 

one will compute the parameters (v,k',l',mu') of the dual (note that A==dual(dual(A)), and answer **(A)** for (v,k',l',mu'). Then use Thm 3.1 (p.100, same text), which tells one how to switch between (n,k,h_1,h_2) and parameters of the corresponding 2-weight code.

> 
> > Anyway, a part of the job is to move these L's and the related info into the two-weight code database.

> 
> True but that leaves an unpleasant feeling of just not doing what needs to be done.


above is the plan, what do you think about it?

Dima



---

archive/issue_comments_268123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-24T22:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_268124.json:
```json
{
    "body": "> above is the plan, what do you think about it?\n\n\nHere is my answer, as an admittedly cleaner commit.\n\nIf you know how to find your way in order to make `strongly_regular_from_two_weight_code(L)` as fast as `strongly_regular_from_two_intersection_set(L.transpose())`, we will definitely have gained something `O_o`\n\nNathann",
    "created_at": "2015-12-24T22:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268124",
    "user": "https://github.com/nathanncohen"
}
```

> above is the plan, what do you think about it?


Here is my answer, as an admittedly cleaner commit.

If you know how to find your way in order to make `strongly_regular_from_two_weight_code(L)` as fast as `strongly_regular_from_two_intersection_set(L.transpose())`, we will definitely have gained something `O_o`

Nathann



---

archive/issue_comments_268125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-25T13:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268126.json:
```json
{
    "body": "I converted the old SRG from Disset into a code too. Cleaner. Slower, but cleaner.",
    "created_at": "2015-12-25T14:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268126",
    "user": "https://github.com/nathanncohen"
}
```

I converted the old SRG from Disset into a code too. Cleaner. Slower, but cleaner.



---

archive/issue_comments_268127.json:
```json
{
    "body": "Replying to [comment:20 ncohen]:\n> I converted the old SRG from Disset into a code too. Cleaner. Slower, but cleaner.\n\n \nWhy has it got slower? I don't follow you here, sorry.",
    "created_at": "2015-12-25T16:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268127",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:20 ncohen]:
> I converted the old SRG from Disset into a code too. Cleaner. Slower, but cleaner.

 
Why has it got slower? I don't follow you here, sorry.



---

archive/issue_comments_268128.json:
```json
{
    "body": "> Why has it got slower? I don't follow you here, sorry.\n\n\nBecause building a graph using the matrix takes a different time if you go through a two-weigth code of through the equivalent 2-intersection set. That's what I was saying in [comment:18] and in [comment:10].\n\nThat's the thing that disturbs me. If we can make one function as fast as the other, then everything is fine.\n\nNathann",
    "created_at": "2015-12-25T16:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268128",
    "user": "https://github.com/nathanncohen"
}
```

> Why has it got slower? I don't follow you here, sorry.


Because building a graph using the matrix takes a different time if you go through a two-weigth code of through the equivalent 2-intersection set. That's what I was saying in [comment:18] and in [comment:10].

That's the thing that disturbs me. If we can make one function as fast as the other, then everything is fine.

Nathann



---

archive/issue_comments_268129.json:
```json
{
    "body": "(and the time differences increases quickly with the size of the graph you build)",
    "created_at": "2015-12-25T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268129",
    "user": "https://github.com/nathanncohen"
}
```

(and the time differences increases quickly with the size of the graph you build)



---

archive/issue_comments_268130.json:
```json
{
    "body": "Replying to [comment:22 ncohen]:\n> > Why has it got slower? I don't follow you here, sorry.\n\n> \n> Because building a graph using the matrix takes a different time if you go through a two-weigth code of through the equivalent 2-intersection set. That's what I was saying in [comment:18] and in [comment:10].\n> \n> That's the thing that disturbs me. If we can make one function as fast as the other, then everything is fine.\n\n\nbut why do you build it via a slower function, despite a faster function being available?",
    "created_at": "2015-12-25T16:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268130",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:22 ncohen]:
> > Why has it got slower? I don't follow you here, sorry.

> 
> Because building a graph using the matrix takes a different time if you go through a two-weigth code of through the equivalent 2-intersection set. That's what I was saying in [comment:18] and in [comment:10].
> 
> That's the thing that disturbs me. If we can make one function as fast as the other, then everything is fine.


but why do you build it via a slower function, despite a faster function being available?



---

archive/issue_comments_268131.json:
```json
{
    "body": "............. because you made me do it ?..",
    "created_at": "2015-12-25T17:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268131",
    "user": "https://github.com/nathanncohen"
}
```

............. because you made me do it ?..



---

archive/issue_comments_268132.json:
```json
{
    "body": "What the hell man, I had those four functions in the strongly_regular_db file and you asked me to add them inside of the two-weight database. Now they are in he two-weight database and the SRG that correspond are built as they always were, through the \"SRG from 2-weight code\" function. \n\nI thought that you said you knew how to guess the parameters of the SRG that would be obtained when using the \"SRG from 2-intersection code\". Because that's the problem, in case it needs be said again: I cannot replace the first function by the other, for I don't know what exactly the parameters of the SRG will be. Will I get what I expect or its complement?\n\nIf you can guess that then you can use the faster of the two functions.\n\nNathann",
    "created_at": "2015-12-25T17:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268132",
    "user": "https://github.com/nathanncohen"
}
```

What the hell man, I had those four functions in the strongly_regular_db file and you asked me to add them inside of the two-weight database. Now they are in he two-weight database and the SRG that correspond are built as they always were, through the "SRG from 2-weight code" function. 

I thought that you said you knew how to guess the parameters of the SRG that would be obtained when using the "SRG from 2-intersection code". Because that's the problem, in case it needs be said again: I cannot replace the first function by the other, for I don't know what exactly the parameters of the SRG will be. Will I get what I expect or its complement?

If you can guess that then you can use the faster of the two functions.

Nathann



---

archive/issue_comments_268133.json:
```json
{
    "body": "Replying to [comment:26 ncohen]:\n> What the hell man, I had those four functions in the strongly_regular_db file and you asked me to add them inside of the two-weight database. Now they are in he two-weight database and the SRG that correspond are built as they always were, through the \"SRG from 2-weight code\" function. \n\n\nSorry, I forgot that that DB gets processed a _build_small_srg_database() in its entirety. \nNow I looked at the code ans see that this is the case.\n\nOK, I will speed it up. Where is the main slowness - is it in `strongly_regular_from_two_weight_code`, or in the main body of `_build_small_srg_database()` ?\n\nThe computations in the latter can be replaced by what I explained in comment 16.\nI don't know how to speed up `strongly_regular_from_two_weight_code`, but in most \ncases (in particular for v=1024) it can be replaced by `strongly_regular_from_two_intersection_set`.\n\nDima",
    "created_at": "2015-12-25T18:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268133",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:26 ncohen]:
> What the hell man, I had those four functions in the strongly_regular_db file and you asked me to add them inside of the two-weight database. Now they are in he two-weight database and the SRG that correspond are built as they always were, through the "SRG from 2-weight code" function. 


Sorry, I forgot that that DB gets processed a _build_small_srg_database() in its entirety. 
Now I looked at the code ans see that this is the case.

OK, I will speed it up. Where is the main slowness - is it in `strongly_regular_from_two_weight_code`, or in the main body of `_build_small_srg_database()` ?

The computations in the latter can be replaced by what I explained in comment 16.
I don't know how to speed up `strongly_regular_from_two_weight_code`, but in most 
cases (in particular for v=1024) it can be replaced by `strongly_regular_from_two_intersection_set`.

Dima



---

archive/issue_comments_268134.json:
```json
{
    "body": "> OK, I will speed it up. Where is the main slowness - is it in `strongly_regular_from_two_weight_code`, or in the main body of `_build_small_srg_database()` ?\n\n\nIn `strongly_regular_from_two_weight_code`, for it performs a compuation on every pair of points in the code. It is not the case for `strongly_regular_from_two_intersection_set`, as you can see from its code.\n\n> The computations in the latter can be replaced by what I explained in comment 16.\n> I don't know how to speed up `strongly_regular_from_two_weight_code`, but in most \n> cases (in particular for v=1024) it can be replaced by `strongly_regular_from_two_intersection_set`.\n\n\nI do not mind if all that is being done is replacing the first function by the other. Actually I wouldn't mind if that were the case, the only problem is with the graph's parameters.\n\nOr perhaps we can build one, and if it does not match return its complement. Dirty, but operationnal.\n\nNathann",
    "created_at": "2015-12-25T18:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268134",
    "user": "https://github.com/nathanncohen"
}
```

> OK, I will speed it up. Where is the main slowness - is it in `strongly_regular_from_two_weight_code`, or in the main body of `_build_small_srg_database()` ?


In `strongly_regular_from_two_weight_code`, for it performs a compuation on every pair of points in the code. It is not the case for `strongly_regular_from_two_intersection_set`, as you can see from its code.

> The computations in the latter can be replaced by what I explained in comment 16.
> I don't know how to speed up `strongly_regular_from_two_weight_code`, but in most 
> cases (in particular for v=1024) it can be replaced by `strongly_regular_from_two_intersection_set`.


I do not mind if all that is being done is replacing the first function by the other. Actually I wouldn't mind if that were the case, the only problem is with the graph's parameters.

Or perhaps we can build one, and if it does not match return its complement. Dirty, but operationnal.

Nathann



---

archive/issue_comments_268135.json:
```json
{
    "body": "I did checks, and out of 22 entries in the 2-weight codes db, 18 are self-dual, that is\none can use `strongly_regular_from_two_intersection_set` on the transpose of their matrices\n(more precisely, `strongly_regular_from_two_intersection_set` builds the complement of the graph,\nbut this is fine (we'd adjust doctests).\n\nFor the remaining 4 cases, I checked what one gets by using `strongly_regular_from_two_intersection_set` on the transpose of their matrices.\n\n2-wt code of (512, 315, 202, 180)  gives the graph of GQ(7,9).\n\n2-wt code of (512, 219, 106, 84)  gives (512, 73, 10, 12)\nand correspondingly \n2-wt code of (512, 73, 12, 10)   gives  (512, 219, 106, 84)\n(that is, it suffices to use just one of these 2-wt codes to get graphs)\n\n2-wt code of (243, 220, 199, 200)  gives (243, 110, 37, 60)\n(that is, `SRG_243_110_37_60()` can be removed, or not just used...)",
    "created_at": "2015-12-25T22:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268135",
    "user": "https://github.com/dimpase"
}
```

I did checks, and out of 22 entries in the 2-weight codes db, 18 are self-dual, that is
one can use `strongly_regular_from_two_intersection_set` on the transpose of their matrices
(more precisely, `strongly_regular_from_two_intersection_set` builds the complement of the graph,
but this is fine (we'd adjust doctests).

For the remaining 4 cases, I checked what one gets by using `strongly_regular_from_two_intersection_set` on the transpose of their matrices.

2-wt code of (512, 315, 202, 180)  gives the graph of GQ(7,9).

2-wt code of (512, 219, 106, 84)  gives (512, 73, 10, 12)
and correspondingly 
2-wt code of (512, 73, 12, 10)   gives  (512, 219, 106, 84)
(that is, it suffices to use just one of these 2-wt codes to get graphs)

2-wt code of (243, 220, 199, 200)  gives (243, 110, 37, 60)
(that is, `SRG_243_110_37_60()` can be removed, or not just used...)



---

archive/issue_comments_268136.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-26T00:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268137.json:
```json
{
    "body": "this will need a bit more work --- not 100% ready for review yet. One part of it works more by an accident than due to theory.",
    "created_at": "2015-12-26T08:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268137",
    "user": "https://github.com/dimpase"
}
```

this will need a bit more work --- not 100% ready for review yet. One part of it works more by an accident than due to theory.



---

archive/issue_comments_268138.json:
```json
{
    "body": "Yooooooo !\n\nDo you mind if we move your last commit -- and the optimization issue -- to another ticket ? It would be cool to have those new srg, and the update of the db as well, in Sage asap.\n\nI can split it myself if you prefer.\n\nThanks,\n\nNathann",
    "created_at": "2015-12-26T08:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268138",
    "user": "https://github.com/nathanncohen"
}
```

Yooooooo !

Do you mind if we move your last commit -- and the optimization issue -- to another ticket ? It would be cool to have those new srg, and the update of the db as well, in Sage asap.

I can split it myself if you prefer.

Thanks,

Nathann



---

archive/issue_comments_268139.json:
```json
{
    "body": "Replying to [comment:32 ncohen]:\n> Do you mind if we move your last commit -- and the optimization issue -- to another ticket ? It would be cool to have those new srg, and the update of the db as well, in Sage asap.\n\n\nwe are travelling today back to Oxford, and I know what I want to change.\nI think it should be ready tomorrow morning or earlier.",
    "created_at": "2015-12-26T12:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268139",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:32 ncohen]:
> Do you mind if we move your last commit -- and the optimization issue -- to another ticket ? It would be cool to have those new srg, and the update of the db as well, in Sage asap.


we are travelling today back to Oxford, and I know what I want to change.
I think it should be ready tomorrow morning or earlier.



---

archive/issue_comments_268140.json:
```json
{
    "body": "Okay then,\n\nNathann",
    "created_at": "2015-12-26T12:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268140",
    "user": "https://github.com/nathanncohen"
}
```

Okay then,

Nathann



---

archive/issue_comments_268141.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-26T22:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268142.json:
```json
{
    "body": "OK, ready now :-)",
    "created_at": "2015-12-26T22:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268142",
    "user": "https://github.com/dimpase"
}
```

OK, ready now :-)



---

archive/issue_comments_268143.json:
```json
{
    "body": "PS. (for a follow-up ticket?) I don't see why the 2-wt codes database does not store the complete weight enumerator, but\ncomputes it all the time from scratch. As well, one should be aware of the corr. function:\n\n```\nsage: L=LinearCode(M); L\nLinear code of length 65, dimension 4 over Finite Field of size 5\nsage: e=L.weight_enumerator(); e\nx^65 + 364*x^15*y^50 + 260*x^10*y^55\n```\nallows one to get all the needed info without going through the code explicitly:\n\n```\nsage: e.substitute(x=1)\n260*y^55 + 364*y^50 + 1\nsage: e.substitute(x=1).coefficients()\n[260, 364, 1]\nsage: map(lambda x:x[1], e.substitute(x=1).exponents())\n[55, 50, 0]\n```",
    "created_at": "2015-12-27T09:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268143",
    "user": "https://github.com/dimpase"
}
```

PS. (for a follow-up ticket?) I don't see why the 2-wt codes database does not store the complete weight enumerator, but
computes it all the time from scratch. As well, one should be aware of the corr. function:

```
sage: L=LinearCode(M); L
Linear code of length 65, dimension 4 over Finite Field of size 5
sage: e=L.weight_enumerator(); e
x^65 + 364*x^15*y^50 + 260*x^10*y^55
```
allows one to get all the needed info without going through the code explicitly:

```
sage: e.substitute(x=1)
260*y^55 + 364*y^50 + 1
sage: e.substitute(x=1).coefficients()
[260, 364, 1]
sage: map(lambda x:x[1], e.substitute(x=1).exponents())
[55, 50, 0]
```



---

archive/issue_comments_268144.json:
```json
{
    "body": "> OK, ready now :-)\n\n\nCould you:\n\n1) Define what the '1s eigenmatrix' is, or point toward somewhere which defines it?\n\n2) This function has no reason to be a 'cdef' function, given that it calls high-level functions like 'matrix'. You don't save anything with the 'cdef', and removing it will enable you to add doctests.\n\n3) Why should we keep `SRG_243_110_37_60` if you say that we don't use it, and that we obtain the same graph by another way?\n\n4) Could you add in the code an indication/reference for this new filter:\n\n```\nif 1+f+g != v: # the only other eigenvalue, k, has multiplicity 1'\n```\n\nAll other filters should already have such a reference\n\n5) I'm a bit worried about this new filter: does it discard any new entry? I thought that the filters we had already matched Andries Brouwer's database.\n\n6) Instead of `[function, M.transpose()]` could you use `[lambda x:function(x.transpose()), M]` ? The difference is that the first computes the transpose when it is run, while the other only does it when it is called.\n\nThanks,\n\nNathann\n\nP.S.: I rebased the branch atop of the latest release, and merged your two commits",
    "created_at": "2015-12-27T10:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268144",
    "user": "https://github.com/nathanncohen"
}
```

> OK, ready now :-)


Could you:

1) Define what the '1s eigenmatrix' is, or point toward somewhere which defines it?

2) This function has no reason to be a 'cdef' function, given that it calls high-level functions like 'matrix'. You don't save anything with the 'cdef', and removing it will enable you to add doctests.

3) Why should we keep `SRG_243_110_37_60` if you say that we don't use it, and that we obtain the same graph by another way?

4) Could you add in the code an indication/reference for this new filter:

```
if 1+f+g != v: # the only other eigenvalue, k, has multiplicity 1'
```

All other filters should already have such a reference

5) I'm a bit worried about this new filter: does it discard any new entry? I thought that the filters we had already matched Andries Brouwer's database.

6) Instead of `[function, M.transpose()]` could you use `[lambda x:function(x.transpose()), M]` ? The difference is that the first computes the transpose when it is run, while the other only does it when it is called.

Thanks,

Nathann

P.S.: I rebased the branch atop of the latest release, and merged your two commits



---

archive/issue_comments_268145.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-12-27T10:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268145",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_268146.json:
```json
{
    "body": "It seems that those two codes generate the very same two graphs\n\n```\n{'q': 2, 'n': 73, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 40, 'w1': 32, 'k': 9}\n{'q': 2, 'n': 219, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 112, 'w1': 96, 'k': 9}\n```",
    "created_at": "2015-12-27T10:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268146",
    "user": "https://github.com/nathanncohen"
}
```

It seems that those two codes generate the very same two graphs

```
{'q': 2, 'n': 73, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 40, 'w1': 32, 'k': 9}
{'q': 2, 'n': 219, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 112, 'w1': 96, 'k': 9}
```



---

archive/issue_comments_268147.json:
```json
{
    "body": "Replying to [comment:40 ncohen]:\n> It seems that those two codes generate the very same two graphs\n> \n> ```\n> {'q': 2, 'n': 73, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 40, 'w1': 32, 'k': 9}\n> {'q': 2, 'n': 219, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 112, 'w1': 96, 'k': 9}\n> ```\n\nI suppose these are ones I mentioned in comment 29:\n\n>> 2-wt code of (512, 219, 106, 84) gives (512, 73, 10, 12)\n>> and correspondingly\n>> 2-wt code of (512, 73, 12, 10) gives (512, 219, 106, 84)\n>> (that is, it suffices to use just one of these 2-wt codes to get graphs)",
    "created_at": "2015-12-27T14:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268147",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:40 ncohen]:
> It seems that those two codes generate the very same two graphs
> 
> ```
> {'q': 2, 'n': 73, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 40, 'w1': 32, 'k': 9}
> {'q': 2, 'n': 219, 'source': 'Shared by Eric Chen [ChenDB]_.', 'w2': 112, 'w1': 96, 'k': 9}
> ```

I suppose these are ones I mentioned in comment 29:

>> 2-wt code of (512, 219, 106, 84) gives (512, 73, 10, 12)
>> and correspondingly
>> 2-wt code of (512, 73, 12, 10) gives (512, 219, 106, 84)
>> (that is, it suffices to use just one of these 2-wt codes to get graphs)



---

archive/issue_comments_268148.json:
```json
{
    "body": "Replying to [comment:38 ncohen]:\n> > OK, ready now :-)\n\n> \n> Could you:\n\n\n> \n> 3) Why should we keep `SRG_243_110_37_60` if you say that we don't use it, and that we obtain the same graph by another way?\n\n\nwell, it's a seemingly different construction; should we move it into `smallgraphs`?\n\n> 4) Could you add in the code an indication/reference for this new filter:\n> \n> \n> ```\n> if 1+f+g != v: # the only other eigenvalue, k, has multiplicity 1'\n> ```\n> \n> All other filters should already have such a reference\n\n\nwell, it is just common sense; the adjacency matrix has 3 different eigenvalues, one of which is\nk, of multiplicity 1 (and this is a classical fact about eigenvalues of nonnegative matrices), \nand the other two are r and s, with multiplicities f and g. Naturally, one must have 1+f+g=v.\n\nBy the way, the reference for 'Integrality condition' (integrality of f) is very vague - I don't know whether it is meant to be [BCN89]_, and if yes, then where this is mentioned.\nAnd why only f is checked, but not g?\n  \n> \n> 5) I'm a bit worried about this new filter: does it discard any new entry? I thought that the filters we had already matched Andries Brouwer's database.\n\n\nperhaps it does not, but it is certainly correct, and takes care of integrality of g.\n\n\n> \n> P.S.: I rebased the branch atop of the latest release, and merged your two commits\n\n\ndo you want me to keep working on the branch currently on the ticket?",
    "created_at": "2015-12-27T15:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268148",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:38 ncohen]:
> > OK, ready now :-)

> 
> Could you:


> 
> 3) Why should we keep `SRG_243_110_37_60` if you say that we don't use it, and that we obtain the same graph by another way?


well, it's a seemingly different construction; should we move it into `smallgraphs`?

> 4) Could you add in the code an indication/reference for this new filter:
> 
> 
> ```
> if 1+f+g != v: # the only other eigenvalue, k, has multiplicity 1'
> ```
> 
> All other filters should already have such a reference


well, it is just common sense; the adjacency matrix has 3 different eigenvalues, one of which is
k, of multiplicity 1 (and this is a classical fact about eigenvalues of nonnegative matrices), 
and the other two are r and s, with multiplicities f and g. Naturally, one must have 1+f+g=v.

By the way, the reference for 'Integrality condition' (integrality of f) is very vague - I don't know whether it is meant to be [BCN89]_, and if yes, then where this is mentioned.
And why only f is checked, but not g?
  
> 
> 5) I'm a bit worried about this new filter: does it discard any new entry? I thought that the filters we had already matched Andries Brouwer's database.


perhaps it does not, but it is certainly correct, and takes care of integrality of g.


> 
> P.S.: I rebased the branch atop of the latest release, and merged your two commits


do you want me to keep working on the branch currently on the ticket?



---

archive/issue_comments_268149.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-27T15:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268149",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_268150.json:
```json
{
    "body": "> well, it's a seemingly different construction; should we move it into `smallgraphs`?\n\n\nArgggggg, no please not in smallgraphs.. Let's keep it where the others are.\n\nI guess it's fine to keep it if you want: I keep forgetting that you have this idea in your head of having \"several instances per set of parameters\", while I'm just trying to 'save' Andries Brouwer's database.\n\n> well, it is just common sense; the adjacency matrix has 3 different eigenvalues, one of which is\n> k, of multiplicity 1 (and this is a classical fact about eigenvalues of nonnegative matrices), \n> and the other two are r and s, with multiplicities f and g. Naturally, one must have 1+f+g=v.\n\n\nCould you add a '# multiplicities of eigenvalues' somewhere ? `:-P`\n\nOnly because I am an illiterate idiot `:-P`\n\n> By the way, the reference for 'Integrality condition' (integrality of f) is very vague - I don't know whether it is meant to be [BCN89]_, and if yes, then where this is mentioned.\n> And why only f is checked, but not g?\n\n\nIf that bothers you, then surely you understand why I prefer to have clear references for those filters `:-P`\n\n> perhaps it does not, but it is certainly correct, and takes care of integrality of g.\n\n\nOkay okay. For the sake of symmetry.\n\n> do you want me to keep working on the branch currently on the ticket?\n\n\nI am a dangerous and forgetful idiot, and I forgot to push the branch. It is done, sorry for the delay and if you have anything tricky to rebase because of it please give me the branch's name and I will do it for you.\n\nNathann",
    "created_at": "2015-12-27T15:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268150",
    "user": "https://github.com/nathanncohen"
}
```

> well, it's a seemingly different construction; should we move it into `smallgraphs`?


Argggggg, no please not in smallgraphs.. Let's keep it where the others are.

I guess it's fine to keep it if you want: I keep forgetting that you have this idea in your head of having "several instances per set of parameters", while I'm just trying to 'save' Andries Brouwer's database.

> well, it is just common sense; the adjacency matrix has 3 different eigenvalues, one of which is
> k, of multiplicity 1 (and this is a classical fact about eigenvalues of nonnegative matrices), 
> and the other two are r and s, with multiplicities f and g. Naturally, one must have 1+f+g=v.


Could you add a '# multiplicities of eigenvalues' somewhere ? `:-P`

Only because I am an illiterate idiot `:-P`

> By the way, the reference for 'Integrality condition' (integrality of f) is very vague - I don't know whether it is meant to be [BCN89]_, and if yes, then where this is mentioned.
> And why only f is checked, but not g?


If that bothers you, then surely you understand why I prefer to have clear references for those filters `:-P`

> perhaps it does not, but it is certainly correct, and takes care of integrality of g.


Okay okay. For the sake of symmetry.

> do you want me to keep working on the branch currently on the ticket?


I am a dangerous and forgetful idiot, and I forgot to push the branch. It is done, sorry for the delay and if you have anything tricky to rebase because of it please give me the branch's name and I will do it for you.

Nathann



---

archive/issue_comments_268151.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-27T19:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268152.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-27T19:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268152",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_268153.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-28T14:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268154.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-28T14:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_268155.json:
```json
{
    "body": "Seems that I am growing more incompetent with git every day. Sorry for the mess. I cleaned it and rebased the branch again `:-/`\n\nNathann",
    "created_at": "2015-12-28T14:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268155",
    "user": "https://github.com/nathanncohen"
}
```

Seems that I am growing more incompetent with git every day. Sorry for the mess. I cleaned it and rebased the branch again `:-/`

Nathann



---

archive/issue_comments_268156.json:
```json
{
    "body": "Some remarks about your commit:\n\n1) Thank you for the added info in the docstring of 'eigenmatrix'. I won't lie and say that I get all of it, but I know that the fault lies in my restricted knowledge and not in the doc. I really should hit those books `:-/`\n\n2) replacement `k+r*s==mu` -- is that true in general? Is it checked anywhere in the code, and should we check it?\n\n3) I am not sure that I understand how exactly this second eigenmatrix works. If `em==cinv*emi*cinv`, are you sure that there exists a strongly regular graph whose eigenmatrix is `vP^(-1)`? Or is it only because we are obtaining this SRG from a 2-intersection set? In general, when are you sure that the other strongly regular graph exists from only looking at the value of `vP^(-1)`? I wonder how general this thing is, and if it is specific to two-weight codes or if it belongs somewhere else.\n\nThanks,\n\nNathann",
    "created_at": "2015-12-28T14:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268156",
    "user": "https://github.com/nathanncohen"
}
```

Some remarks about your commit:

1) Thank you for the added info in the docstring of 'eigenmatrix'. I won't lie and say that I get all of it, but I know that the fault lies in my restricted knowledge and not in the doc. I really should hit those books `:-/`

2) replacement `k+r*s==mu` -- is that true in general? Is it checked anywhere in the code, and should we check it?

3) I am not sure that I understand how exactly this second eigenmatrix works. If `em==cinv*emi*cinv`, are you sure that there exists a strongly regular graph whose eigenmatrix is `vP^(-1)`? Or is it only because we are obtaining this SRG from a 2-intersection set? In general, when are you sure that the other strongly regular graph exists from only looking at the value of `vP^(-1)`? I wonder how general this thing is, and if it is specific to two-weight codes or if it belongs somewhere else.

Thanks,

Nathann



---

archive/issue_comments_268157.json:
```json
{
    "body": "4) What would you think of leaving the `SRG_` function in the index, even if that construction is overwritten by the 2-weight code one? I don't think that it hurt, and at least from the point of view of the code this list is still an index of all `SRG_*` functions.",
    "created_at": "2015-12-28T14:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268157",
    "user": "https://github.com/nathanncohen"
}
```

4) What would you think of leaving the `SRG_` function in the index, even if that construction is overwritten by the 2-weight code one? I don't think that it hurt, and at least from the point of view of the code this list is still an index of all `SRG_*` functions.



---

archive/issue_comments_268158.json:
```json
{
    "body": "Replying to [comment:50 ncohen]:\n\n> \n> 2) replacement `k+r*s==mu` -- is that true in general? Is it checked anywhere in the code, and should we check it?\n\n\nThm 9.1.3(ii) in [BH12]_ tells you how to get mu and  l from r and s. In particular indeed `k+r*s==mu`. It is basically a consequence of the fact that r and s are roots of a quadratic equation, with coefficients being linear functions of l and m (and then the coefficients are symmetric -- see, swapping s and r doesn't change things here -- functions of the roots, as every algebraist since Galois knows...)\n\n\n> \n> 3) I am not sure that I understand how exactly this second eigenmatrix works. If `em==cinv*emi*cinv`, are you sure that there exists a strongly regular graph whose eigenmatrix is `vP^(-1)`? \n\n\nin this case `vP^(-1)` corresponds to the complement of the original graph.\nAs the original graph exists, its complement exists, too...\n\n> Or is it only because we are obtaining this SRG from a 2-intersection set? In general, when are you sure that the other strongly regular graph exists from only looking at the value of `vP^(-1)`? \n\n\nIt does exist if the graph has a regular group of automorphisms (in particular for graphs from\n2-wt codes/projective 2-intersection sets this is the case). Then the dual graph comes from taking elements of this group as vertices, and some nontrivial way to define adjacency among them...\n\n> I wonder how general this thing is, and if it is specific to two-weight codes or if it belongs somewhere else.\n\n\nwell, yes, it is more general, but not by too much...",
    "created_at": "2015-12-28T15:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268158",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:50 ncohen]:

> 
> 2) replacement `k+r*s==mu` -- is that true in general? Is it checked anywhere in the code, and should we check it?


Thm 9.1.3(ii) in [BH12]_ tells you how to get mu and  l from r and s. In particular indeed `k+r*s==mu`. It is basically a consequence of the fact that r and s are roots of a quadratic equation, with coefficients being linear functions of l and m (and then the coefficients are symmetric -- see, swapping s and r doesn't change things here -- functions of the roots, as every algebraist since Galois knows...)


> 
> 3) I am not sure that I understand how exactly this second eigenmatrix works. If `em==cinv*emi*cinv`, are you sure that there exists a strongly regular graph whose eigenmatrix is `vP^(-1)`? 


in this case `vP^(-1)` corresponds to the complement of the original graph.
As the original graph exists, its complement exists, too...

> Or is it only because we are obtaining this SRG from a 2-intersection set? In general, when are you sure that the other strongly regular graph exists from only looking at the value of `vP^(-1)`? 


It does exist if the graph has a regular group of automorphisms (in particular for graphs from
2-wt codes/projective 2-intersection sets this is the case). Then the dual graph comes from taking elements of this group as vertices, and some nontrivial way to define adjacency among them...

> I wonder how general this thing is, and if it is specific to two-weight codes or if it belongs somewhere else.


well, yes, it is more general, but not by too much...



---

archive/issue_comments_268159.json:
```json
{
    "body": "Replying to [comment:51 ncohen]:\n> 4) What would you think of leaving the `SRG_` function in the index, even if that construction is overwritten by the 2-weight code one? I don't think that it hurt, and at least from the point of view of the code this list is still an index of all `SRG_*` functions.\n\n\nas you like...",
    "created_at": "2015-12-28T15:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268159",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:51 ncohen]:
> 4) What would you think of leaving the `SRG_` function in the index, even if that construction is overwritten by the 2-weight code one? I don't think that it hurt, and at least from the point of view of the code this list is still an index of all `SRG_*` functions.


as you like...



---

archive/issue_comments_268160.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-29T16:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268161.json:
```json
{
    "body": "Okayyyyyyyy... Good to go? `:-)`\n\nNathann",
    "created_at": "2015-12-29T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268161",
    "user": "https://github.com/nathanncohen"
}
```

Okayyyyyyyy... Good to go? `:-)`

Nathann



---

archive/issue_comments_268162.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-30T21:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268162",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_268163.json:
```json
{
    "body": "good :-)",
    "created_at": "2015-12-30T21:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268163",
    "user": "https://github.com/dimpase"
}
```

good :-)



---

archive/issue_comments_268164.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-31T14:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19540#issuecomment-268164",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054169.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-31T14:08:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19540",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19540#event-54169"
}
```
