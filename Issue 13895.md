# Issue 13895: Adding Method for testing avoidance in posets

archive/issues_013895.json:
```json
{
    "body": "Assignee: rowland\n\nCC:  chrisjamesberg ahmorales @saliola @nathanncohen @nthiery @hivert\n\nKeywords: posets\n\nThis is a test for finite posets to check if the do not have induced posets each of which isomorphic to two disjoint chains. Example 3+1 free, 2+2 free.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14099\n\n",
    "created_at": "2013-02-12T01:43:51Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Adding Method for testing avoidance in posets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13895",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```
Assignee: rowland

CC:  chrisjamesberg ahmorales @saliola @nathanncohen @nthiery @hivert

Keywords: posets

This is a test for finite posets to check if the do not have induced posets each of which isomorphic to two disjoint chains. Example 3+1 free, 2+2 free.

Issue created by migration from https://trac.sagemath.org/ticket/14099





---

archive/issue_comments_172743.json:
```json
{
    "body": "Could you be interested in running this method on the transitive closure of your poset ? \n\nhttp://www.sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.subgraph_search\n\nNathann",
    "created_at": "2013-02-13T12:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172743",
    "user": "https://github.com/nathanncohen"
}
```

Could you be interested in running this method on the transitive closure of your poset ? 

http://www.sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.subgraph_search

Nathann



---

archive/issue_comments_172744.json:
```json
{
    "body": "apply: poset_functionality_14099_er.patch",
    "created_at": "2013-02-13T15:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172744",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```

apply: poset_functionality_14099_er.patch



---

archive/issue_comments_172745.json:
```json
{
    "body": "Is the transitive closure + subgraph_search fast enough to make it worthwhile?",
    "created_at": "2013-02-13T16:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172745",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Is the transitive closure + subgraph_search fast enough to make it worthwhile?



---

archive/issue_comments_172746.json:
```json
{
    "body": "> Is the transitive closure + subgraph_search fast enough to make it worthwhile?\n\n\nWell... It is sligthly smarter than what you do (it would not enumerate all chains of length 'n' beginning with an element v, if this element v is comparable with an element of the chain of length 'm' you already picked) and it is implemented in Cython.\n\nI'd say that it's definitely worth a try.\n\nNathann",
    "created_at": "2013-02-13T16:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172746",
    "user": "https://github.com/nathanncohen"
}
```

> Is the transitive closure + subgraph_search fast enough to make it worthwhile?


Well... It is sligthly smarter than what you do (it would not enumerate all chains of length 'n' beginning with an element v, if this element v is comparable with an element of the chain of length 'm' you already picked) and it is implemented in Cython.

I'd say that it's definitely worth a try.

Nathann



---

archive/issue_comments_172747.json:
```json
{
    "body": "apply: poset_functionality_14099_er.patch",
    "created_at": "2013-02-13T20:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172747",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

apply: poset_functionality_14099_er.patch



---

archive/issue_comments_172748.json:
```json
{
    "body": "I don't think subgraph_search answers the same question....\n\nUsing induced=True results in the poset Poset({0 : [], 1 : [2], 2 : [3]}) which is 3+1 being (3+1)-free:\n\n```\n# g is the transitive closure\nsage: g = DiGraph({0 : [], 1 : [2, 3], 2 : [3]})\nsage: g.subgraph_search(DiGraph({0 : [1], 1 : [2]}) + DiGraph({0 : []}), induced=True)\n```\n\nUsing induced=False results in the poset Poset({0 : [1, 2], 2 : [3]}) which is (3+1)-free containing (3+1):\n\n```\n# g is the transitive closure\nsage: g = DiGraph({0 : [1, 2, 3], 2 : [3]})\nsage: g.subgraph_search(DiGraph({0 : [1], 1 : [2]}) + DiGraph({0 : []}), induced=False)\nSubgraph of (): Digraph on 4 vertices\n```",
    "created_at": "2013-02-14T01:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172748",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

I don't think subgraph_search answers the same question....

Using induced=True results in the poset Poset({0 : [], 1 : [2], 2 : [3]}) which is 3+1 being (3+1)-free:

```
# g is the transitive closure
sage: g = DiGraph({0 : [], 1 : [2, 3], 2 : [3]})
sage: g.subgraph_search(DiGraph({0 : [1], 1 : [2]}) + DiGraph({0 : []}), induced=True)
```

Using induced=False results in the poset Poset({0 : [1, 2], 2 : [3]}) which is (3+1)-free containing (3+1):

```
# g is the transitive closure
sage: g = DiGraph({0 : [1, 2, 3], 2 : [3]})
sage: g.subgraph_search(DiGraph({0 : [1], 1 : [2]}) + DiGraph({0 : []}), induced=False)
Subgraph of (): Digraph on 4 vertices
```



---

archive/issue_comments_172749.json:
```json
{
    "body": "you definitely need to use `induced = True`, but not on the digraphs. As I said you need to work on their transitive closure :\n\n```\ndef test(g,n,m):\n    n = 3\n    m = 1\n    pattern = digraphs.Circuit(n+1); pattern.delete_vertex(n)\n    pattern += digraphs.Circuit(m+1); pattern.delete_vertex(n+m-1)\n    c = g.transitive_closure().subgraph_search(pattern.transitive_closure(), induced = True)\n    if c:\n      print \"Pattern found with chains\", c.connected_components()\n    else:\n      print \"No pattern in this graph\"\n\ng = DiGraph({0 : [], 1 : [2, 3], 2 : [3]})\ntest(g,3,1)\n```\n\nNathann",
    "created_at": "2013-02-14T08:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172749",
    "user": "https://github.com/nathanncohen"
}
```

you definitely need to use `induced = True`, but not on the digraphs. As I said you need to work on their transitive closure :

```
def test(g,n,m):
    n = 3
    m = 1
    pattern = digraphs.Circuit(n+1); pattern.delete_vertex(n)
    pattern += digraphs.Circuit(m+1); pattern.delete_vertex(n+m-1)
    c = g.transitive_closure().subgraph_search(pattern.transitive_closure(), induced = True)
    if c:
      print "Pattern found with chains", c.connected_components()
    else:
      print "No pattern in this graph"

g = DiGraph({0 : [], 1 : [2, 3], 2 : [3]})
test(g,3,1)
```

Nathann



---

archive/issue_comments_172750.json:
```json
{
    "body": "Yes, you are right; it seems to work.  It doesn't seem to be any faster for posets on 7 elements, but perhaps it's worth having both options available.\n\n```\nsage: def test1(poset, m, n):\n....:     for mchain in poset.chains().elements_of_depth_iterator(m):\n....:         for nchain in poset.chains().elements_of_depth_iterator(n):\n....:             if all(poset.compare_elements(x, y) is None for x in mchain for y in nchain):\n....:                 return False\n....:     return True\n....: \nsage: %time len([p for p in Posets(7) if test1(p, 3, 1)])\nCPU times: user 22.46 s, sys: 0.03 s, total: 22.49 s\nWall time: 22.49 s\n639\n```\n\n```\nsage: def test2(poset, m, n):\n....:     relations = poset.relations()\n....:     g = DiGraph([rel for rel in relations if rel[0] != rel[1]])\n....:     g.add_vertices([rel[0] for rel in relations if rel[0] == rel[1]])\n....:     mchain = digraphs.Circuit(m+1)\n....:     mchain.delete_vertex(m)\n....:     nchain = digraphs.Circuit(n+1)\n....:     nchain.delete_vertex(n)\n....:     return g.transitive_closure().subgraph_search((mchain + nchain).transitive_closure(), induced = True) is None\n....: \nsage: %time len([p for p in Posets(7) if test2(p, 3, 1)])\nCPU times: user 23.47 s, sys: 0.01 s, total: 23.48 s\nWall time: 23.48 s\n639\n```",
    "created_at": "2013-02-14T16:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172750",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Yes, you are right; it seems to work.  It doesn't seem to be any faster for posets on 7 elements, but perhaps it's worth having both options available.

```
sage: def test1(poset, m, n):
....:     for mchain in poset.chains().elements_of_depth_iterator(m):
....:         for nchain in poset.chains().elements_of_depth_iterator(n):
....:             if all(poset.compare_elements(x, y) is None for x in mchain for y in nchain):
....:                 return False
....:     return True
....: 
sage: %time len([p for p in Posets(7) if test1(p, 3, 1)])
CPU times: user 22.46 s, sys: 0.03 s, total: 22.49 s
Wall time: 22.49 s
639
```

```
sage: def test2(poset, m, n):
....:     relations = poset.relations()
....:     g = DiGraph([rel for rel in relations if rel[0] != rel[1]])
....:     g.add_vertices([rel[0] for rel in relations if rel[0] == rel[1]])
....:     mchain = digraphs.Circuit(m+1)
....:     mchain.delete_vertex(m)
....:     nchain = digraphs.Circuit(n+1)
....:     nchain.delete_vertex(n)
....:     return g.transitive_closure().subgraph_search((mchain + nchain).transitive_closure(), induced = True) is None
....: 
sage: %time len([p for p in Posets(7) if test2(p, 3, 1)])
CPU times: user 23.47 s, sys: 0.01 s, total: 23.48 s
Wall time: 23.48 s
639
```



---

archive/issue_comments_172751.json:
```json
{
    "body": "On the other hand, for larger posets using the graph search does much better:\n\n```\nsage: posets = [Posets.RandomPoset(30, .5) for x in range(10)]\nsage: %time len([p for p in posets if test1(p, 3, 1)])\nCPU times: user 20.69 s, sys: 0.00 s, total: 20.69 s\nWall time: 20.69 s\n6\nsage: %time len([p for p in posets if test2(p, 3, 1)])\nCPU times: user 0.19 s, sys: 0.00 s, total: 0.19 s\nWall time: 0.19 s\n6\n```",
    "created_at": "2013-02-14T16:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172751",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

On the other hand, for larger posets using the graph search does much better:

```
sage: posets = [Posets.RandomPoset(30, .5) for x in range(10)]
sage: %time len([p for p in posets if test1(p, 3, 1)])
CPU times: user 20.69 s, sys: 0.00 s, total: 20.69 s
Wall time: 20.69 s
6
sage: %time len([p for p in posets if test2(p, 3, 1)])
CPU times: user 0.19 s, sys: 0.00 s, total: 0.19 s
Wall time: 0.19 s
6
```



---

archive/issue_comments_172752.json:
```json
{
    "body": "Changing keywords from \"posets\" to \"posets, days45\".",
    "created_at": "2013-02-14T16:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172752",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing keywords from "posets" to "posets, days45".



---

archive/issue_comments_172753.json:
```json
{
    "body": "I just created ticket #14122 because of this ticket.\n\nWith that ticket, the following code \n\n```\nmchain = digraphs.Circuit(m+1)\nmchain.delete_vertex(m)\nnchain = digraphs.Circuit(n+1)\nnchain.delete_vertex(n)\nreturn g.transitive_closure().subgraph_search((mchain + nchain).transitive_closure(), induced = True) is None\n```\ncan be replaced by \n\n```\ntwochains = digraphs.Tournament(n) + digraphs.Tournament(m)\nreturn g.transitive_closure().subgraph_search(twochains, induced = True) is None\n```\n\nNathann",
    "created_at": "2013-02-14T19:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172753",
    "user": "https://github.com/nathanncohen"
}
```

I just created ticket #14122 because of this ticket.

With that ticket, the following code 

```
mchain = digraphs.Circuit(m+1)
mchain.delete_vertex(m)
nchain = digraphs.Circuit(n+1)
nchain.delete_vertex(n)
return g.transitive_closure().subgraph_search((mchain + nchain).transitive_closure(), induced = True) is None
```
can be replaced by 

```
twochains = digraphs.Tournament(n) + digraphs.Tournament(m)
return g.transitive_closure().subgraph_search(twochains, induced = True) is None
```

Nathann



---

archive/issue_comments_172754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-14T22:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172754",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172755.json:
```json
{
    "body": "Attachment [poset_functionality_14099_er.patch](tarball://root/attachments/some-uuid/ticket14099/poset_functionality_14099_er.patch) by rowland created at 2013-02-14 22:29:21",
    "created_at": "2013-02-14T22:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172755",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Attachment [poset_functionality_14099_er.patch](tarball://root/attachments/some-uuid/ticket14099/poset_functionality_14099_er.patch) by rowland created at 2013-02-14 22:29:21



---

archive/issue_comments_172756.json:
```json
{
    "body": "As #14122 just got reviewed, could you rebase your patch on top of it and use the Tournament cnstructor ? `:-)`\n\nBy the way, could your merge your two functions into only one ? It would accept a list as a parameter and run the \"real code\" if the list has length one, and call itself on each pair of the list when it has a larger length.\n\n\nNathann",
    "created_at": "2013-02-15T09:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172756",
    "user": "https://github.com/nathanncohen"
}
```

As #14122 just got reviewed, could you rebase your patch on top of it and use the Tournament cnstructor ? `:-)`

By the way, could your merge your two functions into only one ? It would accept a list as a parameter and run the "real code" if the list has length one, and call itself on each pair of the list when it has a larger length.


Nathann



---

archive/issue_comments_172757.json:
```json
{
    "body": "What is the advantage of merging them into one?  The disadvantage is a decrease in clarity.",
    "created_at": "2013-02-15T14:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172757",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

What is the advantage of merging them into one?  The disadvantage is a decrease in clarity.



---

archive/issue_comments_172758.json:
```json
{
    "body": "> What is the advantage of merging them into one?  The disadvantage is a decrease in clarity.\n\n\nOne advantage is that you only have to write documentation and doctests for only one function instead of two, and documentation and doctests are actually the largest part of this patch. Then 50% of the actual code is only there to deal with the input and not actual computations. If you want to improve clarity, you can also dramatically decrease the tests you do at the beginning. Something like that :\n\n```\ndef i_take_lists_of_pairs_or_just_a_pair_as_input(u,v=None):\n    if v is None:\n        return all(i_take_lists_of_pairs_or_just_a_pair_as_input(*x) for x in u)\n    u,v = Integer(u), Integer(v)\n    if u<0 or v<0:\n        raise ValueError(\"Both elements of a pair must be positive integers\") \n    # No I can do some actual computations\n    print u,v\n    return True\n```\n\nBut honestly I think that only one method (taking a pair as input) should exist in Sage. To me the rest is \"personal code\".\n\nNathann",
    "created_at": "2013-02-15T14:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172758",
    "user": "https://github.com/nathanncohen"
}
```

> What is the advantage of merging them into one?  The disadvantage is a decrease in clarity.


One advantage is that you only have to write documentation and doctests for only one function instead of two, and documentation and doctests are actually the largest part of this patch. Then 50% of the actual code is only there to deal with the input and not actual computations. If you want to improve clarity, you can also dramatically decrease the tests you do at the beginning. Something like that :

```
def i_take_lists_of_pairs_or_just_a_pair_as_input(u,v=None):
    if v is None:
        return all(i_take_lists_of_pairs_or_just_a_pair_as_input(*x) for x in u)
    u,v = Integer(u), Integer(v)
    if u<0 or v<0:
        raise ValueError("Both elements of a pair must be positive integers") 
    # No I can do some actual computations
    print u,v
    return True
```

But honestly I think that only one method (taking a pair as input) should exist in Sage. To me the rest is "personal code".

Nathann



---

archive/issue_comments_172759.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-24T16:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172759",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_172760.json:
```json
{
    "body": "#14122 has been merged into beta1.\n\nNathann",
    "created_at": "2013-02-24T16:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172760",
    "user": "https://github.com/nathanncohen"
}
```

#14122 has been merged into beta1.

Nathann



---

archive/issue_comments_172761.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-29T20:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172761",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172762.json:
```json
{
    "body": "instruction for the bot:\n\nApply poset_functionality_14099-er.patch",
    "created_at": "2013-05-31T18:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172762",
    "user": "https://github.com/fchapoton"
}
```

instruction for the bot:

Apply poset_functionality_14099-er.patch



---

archive/issue_comments_172763.json:
```json
{
    "body": "I also think that only the method taking a pair of numbers should go into sage.\n\nYou can now use the TransitiveTournament method, it works for n=1.",
    "created_at": "2013-05-31T19:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172763",
    "user": "https://github.com/fchapoton"
}
```

I also think that only the method taking a pair of numbers should go into sage.

You can now use the TransitiveTournament method, it works for n=1.



---

archive/issue_comments_172764.json:
```json
{
    "body": "This is now rebased on #14536.\n\nAwaiting review.",
    "created_at": "2013-06-17T08:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172764",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

This is now rebased on #14536.

Awaiting review.



---

archive/issue_comments_172765.json:
```json
{
    "body": "Changing keywords from \"posets, days45\" to \"posets, days45, days49\".",
    "created_at": "2013-06-17T15:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172765",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing keywords from "posets, days45" to "posets, days45, days49".



---

archive/issue_comments_172766.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-19T07:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172766",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_172767.json:
```json
{
    "body": "Helloooooooooooooooooooooo !!\n\n* Could you add your new method to the index of methods at the top of the file ? This way we have a nice list of everything that the posets can do\n  http://www.sagemath.org/doc/reference/combinat/sage/combinat/posets/posets.html\n* Could you rewrite your reference so that Sphinx understands it ? You have an example there :\n  {{{\n  sage: Graph.average_distance??\n  }}}\n* Why do you build the digraph from the relations, instead of using the Hasse Diagram ? I thought that this is how it was done in an earlier version of the patch `O_o`\n\nNathann",
    "created_at": "2013-06-19T07:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172767",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooooooooooooooo !!

* Could you add your new method to the index of methods at the top of the file ? This way we have a nice list of everything that the posets can do
  http://www.sagemath.org/doc/reference/combinat/sage/combinat/posets/posets.html
* Could you rewrite your reference so that Sphinx understands it ? You have an example there :
  {{{
  sage: Graph.average_distance??
  }}}
* Why do you build the digraph from the relations, instead of using the Hasse Diagram ? I thought that this is how it was done in an earlier version of the patch `O_o`

Nathann



---

archive/issue_comments_172768.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-19T09:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172768",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172769.json:
```json
{
    "body": "I have no idea what Sphinx is.",
    "created_at": "2013-06-19T09:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172769",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

I have no idea what Sphinx is.



---

archive/issue_comments_172770.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-19T09:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172770",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_172771.json:
```json
{
    "body": "It is the piece of code that generates the html documentation of Sage.\n\n```\nsage -b && sage -docbuild reference/combinat html\n```\n\nNathann",
    "created_at": "2013-06-19T09:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172771",
    "user": "https://github.com/nathanncohen"
}
```

It is the piece of code that generates the html documentation of Sage.

```
sage -b && sage -docbuild reference/combinat html
```

Nathann



---

archive/issue_comments_172772.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-19T10:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172772",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172773.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-19T10:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172773",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172774.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-06-19T12:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172774",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_172775.json:
```json
{
    "body": "`O_o`\n\nNathann",
    "created_at": "2013-06-19T12:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172775",
    "user": "https://github.com/nathanncohen"
}
```

`O_o`

Nathann



---

archive/issue_comments_172776.json:
```json
{
    "body": "Could you please rewrite the reference to `[Stanley, Enumerative Combinatorics Volume 1, 2nd edition]` in the usual Sphinx format, or explain why you think that it is a bad idea ?\n\nNathann",
    "created_at": "2013-06-19T12:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172776",
    "user": "https://github.com/nathanncohen"
}
```

Could you please rewrite the reference to `[Stanley, Enumerative Combinatorics Volume 1, 2nd edition]` in the usual Sphinx format, or explain why you think that it is a bad idea ?

Nathann



---

archive/issue_comments_172777.json:
```json
{
    "body": "Anything else?",
    "created_at": "2013-06-19T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172777",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Anything else?



---

archive/issue_comments_172778.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-19T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172778",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172779.json:
```json
{
    "body": "`O_O`",
    "created_at": "2013-06-19T14:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172779",
    "user": "https://github.com/nathanncohen"
}
```

`O_O`



---

archive/issue_comments_172780.json:
```json
{
    "body": "Okayyyyyyyyyyyyyyyyyyyyyyyy I see ......",
    "created_at": "2013-06-19T14:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172780",
    "user": "https://github.com/nathanncohen"
}
```

Okayyyyyyyyyyyyyyyyyyyyyyyy I see ......



---

archive/issue_comments_172781.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-19T14:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172781",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172782.json:
```json
{
    "body": "No way.",
    "created_at": "2013-06-19T14:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172782",
    "user": "https://github.com/nathanncohen"
}
```

No way.



---

archive/issue_comments_172783.json:
```json
{
    "body": "I am currently writing an additional patch for this bibliographical reference.\n\nI will upload it shortly.\n\nNathann",
    "created_at": "2013-06-19T14:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172783",
    "user": "https://github.com/nathanncohen"
}
```

I am currently writing an additional patch for this bibliographical reference.

I will upload it shortly.

Nathann



---

archive/issue_comments_172784.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-06-19T14:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172784",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_172785.json:
```json
{
    "body": "Here is a patch that rewrites the reference to Stanley's book as we usually do in Sphinx, and as it is done in ``Graph.average_distance??`` and other functions.\n\nI don't know why you set the ticket to `positive_review` twice even though the guy who was doing the review (=me) never said that he agreed with it. I don't get why Chris set it to positive review while there was a comment which had not been fixed either. Anyway, I think that this small [attachment:trac_14099-rev.patch] patch has to be added to this ticket too, unless you can explain why you prefer it to be left out.\n\nNathann",
    "created_at": "2013-06-19T14:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172785",
    "user": "https://github.com/nathanncohen"
}
```

Here is a patch that rewrites the reference to Stanley's book as we usually do in Sphinx, and as it is done in ``Graph.average_distance??`` and other functions.

I don't know why you set the ticket to `positive_review` twice even though the guy who was doing the review (=me) never said that he agreed with it. I don't get why Chris set it to positive review while there was a comment which had not been fixed either. Anyway, I think that this small [attachment:trac_14099-rev.patch] patch has to be added to this ticket too, unless you can explain why you prefer it to be left out.

Nathann



---

archive/issue_comments_172786.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-19T14:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172786",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172787.json:
```json
{
    "body": "I set the ticket to positive review, once, after I asked if there was anything else and you said \"Okayyyyyyyyyyyyyyyyyyyyyyyy I see ......\" which I took to mean that everything was okay.\n\nChris set it to positive review after I addressed your latest comment, which was not specific at all.  I improved the typesetting of the variables.  Apparently this was not what you had in mind, but you hadn't said that.\n\nYou need to be more clear in your communication with people who are learning how to contribute.  At this point I am tired of making point modifications every time you think something should be changed, so please just finish the patch up yourself as you want it.",
    "created_at": "2013-06-19T14:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172787",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

I set the ticket to positive review, once, after I asked if there was anything else and you said "Okayyyyyyyyyyyyyyyyyyyyyyyy I see ......" which I took to mean that everything was okay.

Chris set it to positive review after I addressed your latest comment, which was not specific at all.  I improved the typesetting of the variables.  Apparently this was not what you had in mind, but you hadn't said that.

You need to be more clear in your communication with people who are learning how to contribute.  At this point I am tired of making point modifications every time you think something should be changed, so please just finish the patch up yourself as you want it.



---

archive/issue_comments_172788.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-20T12:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172788",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172789.json:
```json
{
    "body": "The patches need proper commit messages (use `hg qrefresh -e` for that).",
    "created_at": "2013-06-20T14:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172789",
    "user": "https://github.com/jdemeyer"
}
```

The patches need proper commit messages (use `hg qrefresh -e` for that).



---

archive/issue_comments_172790.json:
```json
{
    "body": "Attachment [poset_functionality_14099-er.patch](tarball://root/attachments/some-uuid/ticket14099/poset_functionality_14099-er.patch) by rowland created at 2013-06-20 15:15:08",
    "created_at": "2013-06-20T15:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172790",
    "user": "https://trac.sagemath.org/admin/accounts/users/rowland"
}
```

Attachment [poset_functionality_14099-er.patch](tarball://root/attachments/some-uuid/ticket14099/poset_functionality_14099-er.patch) by rowland created at 2013-06-20 15:15:08



---

archive/issue_comments_172791.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-07-24T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172791",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_172792.json:
```json
{
    "body": "The reviewer patch needs a proper commit message, use `hg qrefresh -e` for this.",
    "created_at": "2013-07-24T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172792",
    "user": "https://github.com/jdemeyer"
}
```

The reviewer patch needs a proper commit message, use `hg qrefresh -e` for this.



---

archive/issue_comments_172793.json:
```json
{
    "body": "Attachment [trac_14099-rev.patch](tarball://root/attachments/some-uuid/ticket14099/trac_14099-rev.patch) by @nathanncohen created at 2013-07-24 07:39:04",
    "created_at": "2013-07-24T07:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172793",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_14099-rev.patch](tarball://root/attachments/some-uuid/ticket14099/trac_14099-rev.patch) by @nathanncohen created at 2013-07-24 07:39:04



---

archive/issue_comments_172794.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-07-24T07:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172794",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_039719.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-31T12:54:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13895#event-39719"
}
```



---

archive/issue_comments_172795.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-07-31T12:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13895",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13895#issuecomment-172795",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
