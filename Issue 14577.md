# Issue 14577: untracked files in spkgs should all be under src

archive/issues_014577.json:
```json
{
    "body": "Assignee: jdemeyer\n\nCC:  jdemeyer\n\nThis is a requirement for making minimal changes to the build system for the git transition. The alternatives all would require expanding the functionality of the git build system, further differentiating it from the current one.\n\nThe standard spkgs that currently violate this assumption:\n\n1. atlas-3.10.x (autotools output and lapack tarball)\n2. mpfr (upstream patches)\n3. singular (shared directory)\n4. ntl (custom libtool)\n5. cliquer (some of the patch files)\n\nThe proposed solution is to track all patches, and for directories/tarballs, move `src` to `src/pkgname` down one layer and move the extra directories/tarballs to be under `src`.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14781\n\n",
    "created_at": "2013-06-20T01:02:57Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "title": "untracked files in spkgs should all be under src",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14577",
    "user": "ohanar"
}
```
Assignee: jdemeyer

CC:  jdemeyer

This is a requirement for making minimal changes to the build system for the git transition. The alternatives all would require expanding the functionality of the git build system, further differentiating it from the current one.

The standard spkgs that currently violate this assumption:

1. atlas-3.10.x (autotools output and lapack tarball)
2. mpfr (upstream patches)
3. singular (shared directory)
4. ntl (custom libtool)
5. cliquer (some of the patch files)

The proposed solution is to track all patches, and for directories/tarballs, move `src` to `src/pkgname` down one layer and move the extra directories/tarballs to be under `src`.



Issue created by migration from https://trac.sagemath.org/ticket/14781





---

archive/issue_comments_185193.json:
```json
{
    "body": "OMG...",
    "created_at": "2013-06-20T05:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185193",
    "user": "leif"
}
```

OMG...



---

archive/issue_comments_185194.json:
```json
{
    "body": "Doesn't git support untracked files? :-)",
    "created_at": "2013-06-20T06:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185194",
    "user": "jdemeyer"
}
```

Doesn't git support untracked files? :-)



---

archive/issue_comments_185195.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> Doesn't git support untracked files? :-)\nSure and you are welcome to work on extending the build system to handle all these inconsistent untracked files that are hidden behind the archiving process in the current structure (but which is gone in the unified git repository). I just have no interest in continuing to extend the (IMO) very hackish current build system in such ways when it can easily be resolved using a simpler hack.",
    "created_at": "2013-06-20T07:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185195",
    "user": "ohanar"
}
```

Replying to [comment:2 jdemeyer]:
> Doesn't git support untracked files? :-)
Sure and you are welcome to work on extending the build system to handle all these inconsistent untracked files that are hidden behind the archiving process in the current structure (but which is gone in the unified git repository). I just have no interest in continuing to extend the (IMO) very hackish current build system in such ways when it can easily be resolved using a simpler hack.



---

archive/issue_comments_185196.json:
```json
{
    "body": "So just to be clear, the proposed solution is to \n1. move all non-patch files into `src/` \n2. tar the resulting `src` directory up as our \"source tarball\" \n3. postpone any further work on the build system until after the git transition\nThat sounds reasonable to me.",
    "created_at": "2013-06-26T01:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185196",
    "user": "vbraun"
}
```

So just to be clear, the proposed solution is to 
1. move all non-patch files into `src/` 
2. tar the resulting `src` directory up as our "source tarball" 
3. postpone any further work on the build system until after the git transition
That sounds reasonable to me.



---

archive/issue_comments_185197.json:
```json
{
    "body": "Yes, with the slight modification\n\n1. for each un-tracked file, either begin tracking it, or move it into `src/`\n\nThere are two packages (cliquer and mpfr) that have untracked patch files, which also cause issue.",
    "created_at": "2013-06-28T19:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185197",
    "user": "ohanar"
}
```

Yes, with the slight modification

1. for each un-tracked file, either begin tracking it, or move it into `src/`

There are two packages (cliquer and mpfr) that have untracked patch files, which also cause issue.



---

archive/issue_comments_185198.json:
```json
{
    "body": "I've modified the ATLAS spkg along these lines on #14754",
    "created_at": "2013-07-07T14:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185198",
    "user": "vbraun"
}
```

I've modified the ATLAS spkg along these lines on #14754



---

archive/issue_comments_185199.json:
```json
{
    "body": "I've made #14869 to deal with MPFR, and cliquer will be fixed at #14349",
    "created_at": "2013-07-08T21:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185199",
    "user": "vbraun"
}
```

I've made #14869 to deal with MPFR, and cliquer will be fixed at #14349



---

archive/issue_comments_185200.json:
```json
{
    "body": "NTL is at #14876",
    "created_at": "2013-07-10T14:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185200",
    "user": "vbraun"
}
```

NTL is at #14876



---

archive/issue_comments_185201.json:
```json
{
    "body": "The NTL fix is at #14692. The version bump to ntl-6.0.0 will be dealt with at #14876",
    "created_at": "2013-07-10T18:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185201",
    "user": "vbraun"
}
```

The NTL fix is at #14692. The version bump to ntl-6.0.0 will be dealt with at #14876



---

archive/issue_comments_185202.json:
```json
{
    "body": "Singular fix is at #14737",
    "created_at": "2013-07-10T19:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185202",
    "user": "vbraun"
}
```

Singular fix is at #14737



---

archive/issue_comments_185203.json:
```json
{
    "body": "I've decided to split the \"fix everything that is wrong with cliquer\" ticket, all we need for the git transition is #14892",
    "created_at": "2013-07-15T04:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185203",
    "user": "vbraun"
}
```

I've decided to split the "fix everything that is wrong with cliquer" ticket, all we need for the git transition is #14892



---

archive/issue_comments_185204.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2013-07-15T04:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185204",
    "user": "vbraun"
}
```

Changing type from defect to task.



---

archive/issue_comments_185205.json:
```json
{
    "body": "Task has been completed ;-)",
    "created_at": "2013-07-18T18:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185205",
    "user": "vbraun"
}
```

Task has been completed ;-)



---

archive/issue_comments_185206.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-18T18:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185206",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_185207.json:
```json
{
    "body": "Thanks for looking into this.\n\nReview in progress :)",
    "created_at": "2013-07-18T23:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185207",
    "user": "ohanar"
}
```

Thanks for looking into this.

Review in progress :)



---

archive/issue_comments_185208.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-19T13:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185208",
    "user": "ohanar"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185209.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-16T21:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14577#issuecomment-185209",
    "user": "jdemeyer"
}
```

Resolution: fixed
