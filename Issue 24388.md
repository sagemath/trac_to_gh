# Issue 24388: Some small improvements to polynomial_complex_arb

archive/issues_024388.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/24625\n\n",
    "created_at": "2018-01-31T16:34:28Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Some small improvements to polynomial_complex_arb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24388",
    "user": "@mezzarobba"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/24625





---

archive/issue_comments_341640.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-31T16:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341640",
    "user": "@mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_341641.json:
```json
{
    "body": "A few things:\n\n- You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n- The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n- The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).\n- For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.",
    "created_at": "2018-01-31T17:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341641",
    "user": "@tscrim"
}
```

A few things:

- You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.
- The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?
- The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).
- For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.



---

archive/issue_comments_341642.json:
```json
{
    "body": "Thanks for your comments!\n\nReplying to [comment:2 tscrim]:\n> - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n\nI thought the coercion system took care of that?\n\n> - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n\nIt depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.\n\n> - The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).\n> - For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.\n\nThanks, I'll fix that.",
    "created_at": "2018-01-31T18:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341642",
    "user": "@mezzarobba"
}
```

Thanks for your comments!

Replying to [comment:2 tscrim]:
> - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.

I thought the coercion system took care of that?

> - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?

It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.

> - The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).
> - For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.

Thanks, I'll fix that.



---

archive/issue_comments_341643.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-31T18:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341643",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341644.json:
```json
{
    "body": "Replying to [comment:3 mmezzarobba]:\n> Thanks for your comments!\n> \n> Replying to [comment:2 tscrim]:\n> > - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n> \n> I thought the coercion system took care of that?\n\nI am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)\n\n> > - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n> \n> It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.\n\nSo there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)",
    "created_at": "2018-01-31T18:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341644",
    "user": "@tscrim"
}
```

Replying to [comment:3 mmezzarobba]:
> Thanks for your comments!
> 
> Replying to [comment:2 tscrim]:
> > - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.
> 
> I thought the coercion system took care of that?

I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)

> > - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?
> 
> It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.

So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)



---

archive/issue_comments_341645.json:
```json
{
    "body": "Replying to [comment:5 tscrim]:\n> I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)\n\nFine :-)\n\n> So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)\n\nSorry if my answer was not clear. It *is* a limitation if we want the result to be a power series (which I'd say we do, in this context), but not if we allow for more general series expansions.",
    "created_at": "2018-01-31T19:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341645",
    "user": "@mezzarobba"
}
```

Replying to [comment:5 tscrim]:
> I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)

Fine :-)

> So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)

Sorry if my answer was not clear. It *is* a limitation if we want the result to be a power series (which I'd say we do, in this context), but not if we allow for more general series expansions.



---

archive/issue_comments_341646.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-31T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341646",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341647.json:
```json
{
    "body": "Okay, thank you for the explanations and updates. If you could just add something like\n\n```\nraise NotImplementedError(\"only implemented for certain base rings\")\n```\n\nand add a doctest showing the error is properly raised, then this is a positive review.",
    "created_at": "2018-01-31T19:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341647",
    "user": "@tscrim"
}
```

Okay, thank you for the explanations and updates. If you could just add something like

```
raise NotImplementedError("only implemented for certain base rings")
```

and add a doctest showing the error is properly raised, then this is a positive review.



---

archive/issue_comments_341648.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-31T19:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341648",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341649.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Okay, thank you for the explanations and updates. If you could just add something like\n> {{{\n> raise NotImplementedError(\"only implemented for certain base rings\")\n> }}}\n> and add a doctest showing the error is properly raised, then this is a positive review.\n\nDone, thanks a lot for the quick review!\n----\nNew commits:\n----\nNew commits:",
    "created_at": "2018-01-31T19:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341649",
    "user": "@mezzarobba"
}
```

Replying to [comment:8 tscrim]:
> Okay, thank you for the explanations and updates. If you could just add something like
> {{{
> raise NotImplementedError("only implemented for certain base rings")
> }}}
> and add a doctest showing the error is properly raised, then this is a positive review.

Done, thanks a lot for the quick review!
----
New commits:
----
New commits:



---

archive/issue_comments_341650.json:
```json
{
    "body": "No problem.",
    "created_at": "2018-01-31T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341650",
    "user": "@tscrim"
}
```

No problem.



---

archive/issue_comments_341651.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-31T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341651",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_341652.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-02T12:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24388#issuecomment-341652",
    "user": "@vbraun"
}
```

Resolution: fixed
