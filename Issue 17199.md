# Issue 17199: fix bug with leading zeros in Necklaces

archive/issues_017199.json:
```json
{
    "body": "CC:  tscrim\n\nKeywords: necklace, Lyndon words\n\nLeading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.\n\nThe documentation in necklace.py should also be cleaned up to current standards.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17436\n\n",
    "created_at": "2014-12-03T02:06:35Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "fix bug with leading zeros in Necklaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17199",
    "user": "zabrocki"
}
```
CC:  tscrim

Keywords: necklace, Lyndon words

Leading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.

The documentation in necklace.py should also be cleaned up to current standards.

Issue created by migration from https://trac.sagemath.org/ticket/17436





---

archive/issue_comments_228756.json:
```json
{
    "body": "There seem to be minor bugs that one would not necessarily pick up on except by reading the code closely.  For example:\n\n```\nsage: Necklaces([1,0,1]).list()[0]\n[1, 3]\nsage: Necklaces([1,1]).list()[0] in Necklaces([1,1])\nTrue\nsage: Necklaces([1,0,1]).list()[0] in Necklaces([1,0,1])\nFalse\n```\n\nThe reason is that implicitly the code is assuming that there are no zeros in the content/evaluation vector and it checks if the value of the entries in the necklace smaller or equal to the size of the necklace.  If that check fails it returns False.",
    "created_at": "2014-12-03T02:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228756",
    "user": "zabrocki"
}
```

There seem to be minor bugs that one would not necessarily pick up on except by reading the code closely.  For example:

```
sage: Necklaces([1,0,1]).list()[0]
[1, 3]
sage: Necklaces([1,1]).list()[0] in Necklaces([1,1])
True
sage: Necklaces([1,0,1]).list()[0] in Necklaces([1,0,1])
False
```

The reason is that implicitly the code is assuming that there are no zeros in the content/evaluation vector and it checks if the value of the entries in the necklace smaller or equal to the size of the necklace.  If that check fails it returns False.



---

archive/issue_comments_228757.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-03T15:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228757",
    "user": "zabrocki"
}
```

New commits:



---

archive/issue_comments_228758.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-03T15:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228758",
    "user": "zabrocki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_228759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-03T15:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228760.json:
```json
{
    "body": "Looks good overall. I made some additional doc tweaks and some (micro-)optimizations:\n\n```\nsage: x = 0\nsage: %timeit if not x: pass\n10000000 loops, best of 3: 105 ns per loop\nsage: %timeit if x: pass\n10000000 loops, best of 3: 89.7 ns per loop\nsage: %timeit if x == 0: pass\n1000000 loops, best of 3: 429 ns per loop\nsage: %timeit if x != 0: pass\n1000000 loops, best of 3: 418 ns per loop\nsage: x = int(0)\nsage: %timeit if not x: pass\n10000000 loops, best of 3: 105 ns per loop\nsage: %timeit if x: pass\n10000000 loops, best of 3: 89.7 ns per loop\nsage: y = int(0)\nsage: %timeit if x != y: pass\n10000000 loops, best of 3: 141 ns per loop\nsage: %timeit if x == y: pass\n10000000 loops, best of 3: 158 ns per loop\n```\n\n(similar timings for the list comparisons). Most importantly, I deprecated the `e` attribute and changed `content` into a method calling `_content` attribute (since it is suppose to be immutable). If you're happy with my changes, then positive review.\n----\nNew commits:",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228760",
    "user": "tscrim"
}
```

Looks good overall. I made some additional doc tweaks and some (micro-)optimizations:

```
sage: x = 0
sage: %timeit if not x: pass
10000000 loops, best of 3: 105 ns per loop
sage: %timeit if x: pass
10000000 loops, best of 3: 89.7 ns per loop
sage: %timeit if x == 0: pass
1000000 loops, best of 3: 429 ns per loop
sage: %timeit if x != 0: pass
1000000 loops, best of 3: 418 ns per loop
sage: x = int(0)
sage: %timeit if not x: pass
10000000 loops, best of 3: 105 ns per loop
sage: %timeit if x: pass
10000000 loops, best of 3: 89.7 ns per loop
sage: y = int(0)
sage: %timeit if x != y: pass
10000000 loops, best of 3: 141 ns per loop
sage: %timeit if x == y: pass
10000000 loops, best of 3: 158 ns per loop
```

(similar timings for the list comparisons). Most importantly, I deprecated the `e` attribute and changed `content` into a method calling `_content` attribute (since it is suppose to be immutable). If you're happy with my changes, then positive review.
----
New commits:



---

archive/issue_comments_228761.json:
```json
{
    "body": "I didn't even think of deprecating `e`.  Thats covering your bases.  I think your changes look great.  Thanks for the review/cleanup.",
    "created_at": "2014-12-04T00:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228761",
    "user": "zabrocki"
}
```

I didn't even think of deprecating `e`.  Thats covering your bases.  I think your changes look great.  Thanks for the review/cleanup.



---

archive/issue_comments_228762.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-04T00:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228762",
    "user": "zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_228763.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-04T16:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17199",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17199#issuecomment-228763",
    "user": "vbraun"
}
```

Resolution: fixed
