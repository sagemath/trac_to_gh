# Issue 28761: Add script-type check_dependencies package that installs tox, mock, pytest etc.

archive/issues_028761.json:
```json
{
    "body": "CC:  @vbraun @jdemeyer @kiwifb\n\nFollowing a suggestion by vbraun in #19680, this ticket adds a \n`check_dependencies` package (`type`=`script`) that \n- installs the Python packages`tox`, `mock`, `pytest` via `pip` if `SAGE_CHECK=true` \n- does nothing otherwise.\n\nThe package `check_dependencies` can be added as a dependency of Python packages that use this standard testing infrastructure, for testing them if `SAGE_CHECK=true`.\n\nThe branch demonstrates this on the package `pygments` by adding an `spkg-check`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28998\n\n",
    "created_at": "2020-01-13T00:21:39Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Add script-type check_dependencies package that installs tox, mock, pytest etc.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28761",
    "user": "@mkoeppe"
}
```
CC:  @vbraun @jdemeyer @kiwifb

Following a suggestion by vbraun in #19680, this ticket adds a 
`check_dependencies` package (`type`=`script`) that 
- installs the Python packages`tox`, `mock`, `pytest` via `pip` if `SAGE_CHECK=true` 
- does nothing otherwise.

The package `check_dependencies` can be added as a dependency of Python packages that use this standard testing infrastructure, for testing them if `SAGE_CHECK=true`.

The branch demonstrates this on the package `pygments` by adding an `spkg-check`.

Issue created by migration from https://trac.sagemath.org/ticket/28998





---

archive/issue_comments_406148.json:
```json
{
    "body": "On this branch, handling of `sage -c` does not work yet.\nContributions welcome.\n----\nNew commits:",
    "created_at": "2020-01-13T00:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406148",
    "user": "@mkoeppe"
}
```

On this branch, handling of `sage -c` does not work yet.
Contributions welcome.
----
New commits:



---

archive/issue_comments_406149.json:
```json
{
    "body": "pushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406149",
    "user": "@mkoeppe"
}
```

pushing these forward to 9.2



---

archive/issue_comments_406150.json:
```json
{
    "body": "A simpler version, just for `pytest`, is in #29813, used in #29766 for `networkx`",
    "created_at": "2020-06-06T05:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406150",
    "user": "@mkoeppe"
}
```

A simpler version, just for `pytest`, is in #29813, used in #29766 for `networkx`



---

archive/issue_comments_406151.json:
```json
{
    "body": "`tox` in #29909",
    "created_at": "2020-06-20T00:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406151",
    "user": "@mkoeppe"
}
```

`tox` in #29909



---

archive/issue_comments_406152.json:
```json
{
    "body": "#30066: `build/pkgs/mock`: Downgrade from source=normal to pip, conditionalize dependencies",
    "created_at": "2020-07-04T21:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406152",
    "user": "@mkoeppe"
}
```

#30066: `build/pkgs/mock`: Downgrade from source=normal to pip, conditionalize dependencies



---

archive/issue_comments_406153.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406153",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_406154.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-02T19:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406154",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_406155.json:
```json
{
    "body": "Outdated, can close",
    "created_at": "2022-01-02T19:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406155",
    "user": "@mkoeppe"
}
```

Outdated, can close



---

archive/issue_comments_406156.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-03T14:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28761#issuecomment-406156",
    "user": "@slel"
}
```

Resolution: fixed
