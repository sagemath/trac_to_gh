# Issue 28761: Add script-type check_dependencies package that installs tox, mock, pytest etc.

Issue created by migration from https://trac.sagemath.org/ticket/28998

Original creator: mkoeppe

Original creation time: 2020-01-13 00:21:39

CC:  vbraun jdemeyer fbissey

Following a suggestion by vbraun in #19680, this ticket adds a 
`check_dependencies` package (`type`=`script`) that 
- installs the Python packages`tox`, `mock`, `pytest` via `pip` if `SAGE_CHECK=true` 
- does nothing otherwise.

The package `check_dependencies` can be added as a dependency of Python packages that use this standard testing infrastructure, for testing them if `SAGE_CHECK=true`.

The branch demonstrates this on the package `pygments` by adding an `spkg-check`.


---

Comment by mkoeppe created at 2020-01-13 00:50:00

On this branch, handling of `sage -c` does not work yet.
Contributions welcome.
----
New commits:


---

Comment by mkoeppe created at 2020-04-14 06:38:06

pushing these forward to 9.2


---

Comment by mkoeppe created at 2020-06-06 05:16:42

A simpler version, just for `pytest`, is in #29813, used in #29766 for `networkx`


---

Comment by mkoeppe created at 2020-06-20 00:34:23

`tox` in #29909


---

Comment by mkoeppe created at 2020-07-04 21:06:10

#30066: `build/pkgs/mock`: Downgrade from source=normal to pip, conditionalize dependencies


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2022-01-02 19:59:59

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-01-02 19:59:59

Outdated, can close


---

Comment by slelievre created at 2022-01-03 14:50:38

Resolution: fixed
