# Issue 12802: make Graphics class inheritable and some clean ups

archive/issues_012802.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  jason\n\nThe first patch makes all the `.__attribute` into `._attribute` so that the `Graphics` class can be inherited in the future. This is desirable since all the important functions are present in this class. One will not lose anything in terms of existing functionality.\n\nThe second patch does more cleanups, whitespace removal, and refactoring of one big bunch of code which is present twice in `Graphics().matplotlib()`.\n\nPasses all doctests in `devel/sage/sage/plot`. (The patches are created using 5.0-rc0)\n----\n\nIssue created by migration from https://trac.sagemath.org/ticket/12974\n\n",
    "created_at": "2012-05-19T12:43:15Z",
    "labels": [
        "graphics",
        "major",
        "enhancement"
    ],
    "title": "make Graphics class inheritable and some clean ups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12802",
    "user": "ppurka"
}
```
Assignee: jason, was

CC:  jason

The first patch makes all the `.__attribute` into `._attribute` so that the `Graphics` class can be inherited in the future. This is desirable since all the important functions are present in this class. One will not lose anything in terms of existing functionality.

The second patch does more cleanups, whitespace removal, and refactoring of one big bunch of code which is present twice in `Graphics().matplotlib()`.

Passes all doctests in `devel/sage/sage/plot`. (The patches are created using 5.0-rc0)
----

Issue created by migration from https://trac.sagemath.org/ticket/12974





---

archive/issue_comments_153742.json:
```json
{
    "body": "Attachment [trac_12974-fix_graphics_attributes_and_reorder_args.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes_and_reorder_args.patch) by ppurka created at 2012-05-19 12:49:50\n\napply this first to devel/sage",
    "created_at": "2012-05-19T12:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153742",
    "user": "ppurka"
}
```

Attachment [trac_12974-fix_graphics_attributes_and_reorder_args.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes_and_reorder_args.patch) by ppurka created at 2012-05-19 12:49:50

apply this first to devel/sage



---

archive/issue_comments_153743.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-19T12:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153743",
    "user": "ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153744.json:
```json
{
    "body": "In general this looks pretty good, good work on underscores and the refactor looks ok.  The Sage Days 40.5 crowd says \"yes!\" to making double underscores single underscores.\n\n* Minor but should be done: get rid of backslashes ending lines.  Suggestion is to just enclose things in parentheses for splitting lines.\n* You need to doctest your new matplotlib tick formatter.\n* I'm not sure why you alphabetized some of the keywords in various places.  It might make more sense to keep ones together that are related - e.g., `vgridlinesstyle` and `hgridlinesstyle` should be next to each other.  I don't think this was an optimal change.",
    "created_at": "2012-05-25T00:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153744",
    "user": "kcrisman"
}
```

In general this looks pretty good, good work on underscores and the refactor looks ok.  The Sage Days 40.5 crowd says "yes!" to making double underscores single underscores.

* Minor but should be done: get rid of backslashes ending lines.  Suggestion is to just enclose things in parentheses for splitting lines.
* You need to doctest your new matplotlib tick formatter.
* I'm not sure why you alphabetized some of the keywords in various places.  It might make more sense to keep ones together that are related - e.g., `vgridlinesstyle` and `hgridlinesstyle` should be next to each other.  I don't think this was an optimal change.



---

archive/issue_comments_153745.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-25T00:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153745",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153746.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd40.5\".",
    "created_at": "2012-05-25T00:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153746",
    "user": "kcrisman"
}
```

Changing keywords from "" to "sd40.5".



---

archive/issue_comments_153747.json:
```json
{
    "body": "Apply this first to devel/sage",
    "created_at": "2012-05-25T09:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153747",
    "user": "ppurka"
}
```

Apply this first to devel/sage



---

archive/issue_comments_153748.json:
```json
{
    "body": "Attachment [trac_12974-fix_graphics_attributes.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes.patch) by ppurka created at 2012-05-25 09:54:12\n\nnext, apply this to devel/sage",
    "created_at": "2012-05-25T09:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153748",
    "user": "ppurka"
}
```

Attachment [trac_12974-fix_graphics_attributes.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes.patch) by ppurka created at 2012-05-25 09:54:12

next, apply this to devel/sage



---

archive/issue_comments_153749.json:
```json
{
    "body": "Attachment [trac_12974-refactor_and_whitespace_cleanups.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-refactor_and_whitespace_cleanups.patch) by ppurka created at 2012-05-25 10:02:09\n\n1. I added the new file, where I don't reorder the arguments. Also, I ran the following sed expression (in zsh) to cleanup trailing whitespaces from `sage/plot`\n\n```\n....rc0/devel/sage/sage/plot\u00bb for i in **/*.py; do\n sed -i -e 's/[[:space:]]\\+$//' \"$i\";\ndone\n```\n\n\n2. I removed the backslash and replaced it with simple brackets\n3. I had also doctested the new matplotlib function, but it seems that went into the log plot code. Sorry for the mixup. The updated patch (the second patch) contains the doctest now.\n4. From the doctests in #4529, I found that there were other functions outside of `sage/plot` that were using attributes of `Graphics` as `_Graphics__object`, etc. All these are fixed now (in the first patch).",
    "created_at": "2012-05-25T10:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153749",
    "user": "ppurka"
}
```

Attachment [trac_12974-refactor_and_whitespace_cleanups.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-refactor_and_whitespace_cleanups.patch) by ppurka created at 2012-05-25 10:02:09

1. I added the new file, where I don't reorder the arguments. Also, I ran the following sed expression (in zsh) to cleanup trailing whitespaces from `sage/plot`

```
....rc0/devel/sage/sage/plotÂ» for i in **/*.py; do
 sed -i -e 's/[[:space:]]\+$//' "$i";
done
```


2. I removed the backslash and replaced it with simple brackets
3. I had also doctested the new matplotlib function, but it seems that went into the log plot code. Sorry for the mixup. The updated patch (the second patch) contains the doctest now.
4. From the doctests in #4529, I found that there were other functions outside of `sage/plot` that were using attributes of `Graphics` as `_Graphics__object`, etc. All these are fixed now (in the first patch).



---

archive/issue_comments_153750.json:
```json
{
    "body": "Added a third patch which reorders the arguments, but keeps them grouped.",
    "created_at": "2012-05-25T10:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153750",
    "user": "ppurka"
}
```

Added a third patch which reorders the arguments, but keeps them grouped.



---

archive/issue_comments_153751.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-25T10:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153751",
    "user": "ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153752.json:
```json
{
    "body": "I like all of this (obviously only did a spot-check of the whitespace file but it seems fine.  I do think that we can't reorder the arguments to the *function/method* `matplotlib`, as that would be a change in the API.  The other order changes don't matter because they are dicts or just initialization, but this one I don't think we can change, even with the relatively slight possibility that someone actually relies on the keyword order.\n\nBut I think you can still do the same idea of putting the comments for clarity - I like very much what you did with this overall.  Fix the `matplotlib` thing, and in the meantime I'll run doctests and look at some of the plots.",
    "created_at": "2012-05-25T14:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153752",
    "user": "kcrisman"
}
```

I like all of this (obviously only did a spot-check of the whitespace file but it seems fine.  I do think that we can't reorder the arguments to the *function/method* `matplotlib`, as that would be a change in the API.  The other order changes don't matter because they are dicts or just initialization, but this one I don't think we can change, even with the relatively slight possibility that someone actually relies on the keyword order.

But I think you can still do the same idea of putting the comments for clarity - I like very much what you did with this overall.  Fix the `matplotlib` thing, and in the meantime I'll run doctests and look at some of the plots.



---

archive/issue_comments_153753.json:
```json
{
    "body": "I think positive review to the changes in the first and second patch.   It would have been really helpful not to put the matplotlib refactoring in the same patch as the whitespace, because Trac won't preview it, and that means a lot of tedious searching.  But I think that's ok now.",
    "created_at": "2012-05-25T14:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153753",
    "user": "kcrisman"
}
```

I think positive review to the changes in the first and second patch.   It would have been really helpful not to put the matplotlib refactoring in the same patch as the whitespace, because Trac won't preview it, and that means a lot of tedious searching.  But I think that's ok now.



---

archive/issue_comments_153754.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-25T14:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153754",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153755.json:
```json
{
    "body": "Attachment [trac_12974-refactor.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-refactor.patch) by ppurka created at 2012-05-25 18:26:46",
    "created_at": "2012-05-25T18:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153755",
    "user": "ppurka"
}
```

Attachment [trac_12974-refactor.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-refactor.patch) by ppurka created at 2012-05-25 18:26:46



---

archive/issue_comments_153756.json:
```json
{
    "body": "Attachment [trac_12974-reorder_some_arguments.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-reorder_some_arguments.patch) by ppurka created at 2012-05-25 18:27:05\n\nthird patch which reorders some arguments",
    "created_at": "2012-05-25T18:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153756",
    "user": "ppurka"
}
```

Attachment [trac_12974-reorder_some_arguments.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-reorder_some_arguments.patch) by ppurka created at 2012-05-25 18:27:05

third patch which reorders some arguments



---

archive/issue_comments_153757.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-25T18:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153757",
    "user": "ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153758.json:
```json
{
    "body": "Attachment [trac_12974-whitespace_cleanup.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-whitespace_cleanup.patch) by ppurka created at 2012-05-25 18:36:18\n\nSorry for the mixup of the whitespace and refactoring patches - I wasn't thinking clearly. I have uploaded the new patches. The whitespace one is completely on its own now. The patches are\n1. [attachment:trac_12974-fix_graphics_attributes.patch] - makes the change .__ to ._\n2. [attachment:trac_12974-refactor.patch] - refactoring the tick formatter in Graphics.matplotlib\n3. [attachment:trac_12974-reorder_some_arguments.patch] - does the reordering of the arguments in the dicts. matplotlib is untouched now.\n4. [attachment:trac_12974-whitespace_cleanup.patch] - does the whitespace cleanup via the sed function mentioned in comment:4",
    "created_at": "2012-05-25T18:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153758",
    "user": "ppurka"
}
```

Attachment [trac_12974-whitespace_cleanup.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-whitespace_cleanup.patch) by ppurka created at 2012-05-25 18:36:18

Sorry for the mixup of the whitespace and refactoring patches - I wasn't thinking clearly. I have uploaded the new patches. The whitespace one is completely on its own now. The patches are
1. [attachment:trac_12974-fix_graphics_attributes.patch] - makes the change .__ to ._
2. [attachment:trac_12974-refactor.patch] - refactoring the tick formatter in Graphics.matplotlib
3. [attachment:trac_12974-reorder_some_arguments.patch] - does the reordering of the arguments in the dicts. matplotlib is untouched now.
4. [attachment:trac_12974-whitespace_cleanup.patch] - does the whitespace cleanup via the sed function mentioned in comment:4



---

archive/issue_comments_153759.json:
```json
{
    "body": "patchbot: apply [attachment:trac_12974-fix_graphics_attributes.patch] [attachment:trac_12974-refactor.patch] [attachment:trac_12974-reorder_some_arguments.patch] [attachment:trac_12974-whitespace_cleanup.patch]",
    "created_at": "2012-05-26T03:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153759",
    "user": "ppurka"
}
```

patchbot: apply [attachment:trac_12974-fix_graphics_attributes.patch] [attachment:trac_12974-refactor.patch] [attachment:trac_12974-reorder_some_arguments.patch] [attachment:trac_12974-whitespace_cleanup.patch]



---

archive/issue_comments_153760.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-26T04:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153760",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153761.json:
```json
{
    "body": "This seems to still be fine.  Positive review.\n\nNote to release manager - the whitespace cleanup patch might cause some other stuff touched during SD 40.5 to not apply (? I haven't tried) so just don't apply that if it causes problems.  I'm sure ppurka won't mind apply his sed script to things after the workshop :)",
    "created_at": "2012-05-26T04:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153761",
    "user": "kcrisman"
}
```

This seems to still be fine.  Positive review.

Note to release manager - the whitespace cleanup patch might cause some other stuff touched during SD 40.5 to not apply (? I haven't tried) so just don't apply that if it causes problems.  I'm sure ppurka won't mind apply his sed script to things after the workshop :)



---

archive/issue_comments_153762.json:
```json
{
    "body": "Patchbot, listen up! Apply trac_12974-fix_graphics_attributes.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace_cleanup.patch !!!",
    "created_at": "2012-05-30T02:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153762",
    "user": "kini"
}
```

Patchbot, listen up! Apply trac_12974-fix_graphics_attributes.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace_cleanup.patch !!!



---

archive/issue_comments_153763.json:
```json
{
    "body": "What is this problem with fft in the patch   bot output? These patches don't even have the string fft!!",
    "created_at": "2012-05-30T03:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153763",
    "user": "ppurka"
}
```

What is this problem with fft in the patch   bot output? These patches don't even have the string fft!!



---

archive/issue_comments_153764.json:
```json
{
    "body": "That patchbot is on the fritz, I guess... wait for arando to get to it, it's running 5.1.beta1 already and so should supersede all other patchbot verdicts 8)",
    "created_at": "2012-05-30T03:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153764",
    "user": "kini"
}
```

That patchbot is on the fritz, I guess... wait for arando to get to it, it's running 5.1.beta1 already and so should supersede all other patchbot verdicts 8)



---

archive/issue_comments_153765.json:
```json
{
    "body": "Not really worried about patchbot, to be honest.  \n\nGuess you must have made it home... my flight is delayed by a half hour, so I might as well start rebasing all the stuff I reviewed to 5.1.beta1...",
    "created_at": "2012-05-30T03:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153765",
    "user": "kcrisman"
}
```

Not really worried about patchbot, to be honest.  

Guess you must have made it home... my flight is delayed by a half hour, so I might as well start rebasing all the stuff I reviewed to 5.1.beta1...



---

archive/issue_comments_153766.json:
```json
{
    "body": "Well, it would be nice to at least have people pay *some* attention to the patchbot. If everyone says \"ehh, I don't care what the patchbot says\", then what's the point of having it?\n\nYes, I made it back, and David and Doug too, but Jeroen missed his flight, unfortunately - we had a flat tire on the way to the airport and spent almost an hour fixing it for various reasons.",
    "created_at": "2012-05-30T04:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153766",
    "user": "kini"
}
```

Well, it would be nice to at least have people pay *some* attention to the patchbot. If everyone says "ehh, I don't care what the patchbot says", then what's the point of having it?

Yes, I made it back, and David and Doug too, but Jeroen missed his flight, unfortunately - we had a flat tire on the way to the airport and spent almost an hour fixing it for various reasons.



---

archive/issue_comments_153767.json:
```json
{
    "body": "Attachment [trac_12974-whitespace-rebased.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-whitespace-rebased.patch) by kcrisman created at 2012-05-30 04:24:20",
    "created_at": "2012-05-30T04:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153767",
    "user": "kcrisman"
}
```

Attachment [trac_12974-whitespace-rebased.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-whitespace-rebased.patch) by kcrisman created at 2012-05-30 04:24:20



---

archive/issue_comments_153768.json:
```json
{
    "body": "Attachment [trac_12974-fix_graphics_attributes-rebase.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes-rebase.patch) by kcrisman created at 2012-05-30 04:25:07",
    "created_at": "2012-05-30T04:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153768",
    "user": "kcrisman"
}
```

Attachment [trac_12974-fix_graphics_attributes-rebase.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes-rebase.patch) by kcrisman created at 2012-05-30 04:25:07



---

archive/issue_comments_153769.json:
```json
{
    "body": "Okay, this is now \"rebased\" to depend on #12810 and #12605 (in that order) so that we don't get more messages from the release manager.  At least I hope I did this right.  Then I'll try to rebase #4529 to that.  Not much else to do until the plane gets here...\n\n\nApply patches in this order to `devel/sage` trac_12974-fix_graphics_attributes-rebase.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace-rebased.patch",
    "created_at": "2012-05-30T04:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153769",
    "user": "kcrisman"
}
```

Okay, this is now "rebased" to depend on #12810 and #12605 (in that order) so that we don't get more messages from the release manager.  At least I hope I did this right.  Then I'll try to rebase #4529 to that.  Not much else to do until the plane gets here...


Apply patches in this order to `devel/sage` trac_12974-fix_graphics_attributes-rebase.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace-rebased.patch



---

archive/issue_comments_153770.json:
```json
{
    "body": "Attachment [trac_12974-fix_graphics_attributes-rebase.2.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes-rebase.2.patch) by ppurka created at 2012-05-30 10:45:12",
    "created_at": "2012-05-30T10:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153770",
    "user": "ppurka"
}
```

Attachment [trac_12974-fix_graphics_attributes-rebase.2.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-fix_graphics_attributes-rebase.2.patch) by ppurka created at 2012-05-30 10:45:12



---

archive/issue_comments_153771.json:
```json
{
    "body": "updated fix attributes patch to address new code in sage-5.1beta1. Changes to the previous patch [can be viewed here](https://github.com/ppurka/sage-patches/commit/ddc446af0985cc8d64f0484182432debb5da1427).\n\npatchbot apply: trac_12974-fix_graphics_attributes-rebase.2.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace-rebased.patch\n\n(Also ran a `make ptestlong` with #4529, #12974, #12810, #12605 and all tests pass).",
    "created_at": "2012-05-30T10:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153771",
    "user": "ppurka"
}
```

updated fix attributes patch to address new code in sage-5.1beta1. Changes to the previous patch [can be viewed here](https://github.com/ppurka/sage-patches/commit/ddc446af0985cc8d64f0484182432debb5da1427).

patchbot apply: trac_12974-fix_graphics_attributes-rebase.2.patch trac_12974-refactor.patch trac_12974-reorder_some_arguments.patch trac_12974-whitespace-rebased.patch

(Also ran a `make ptestlong` with #4529, #12974, #12810, #12605 and all tests pass).



---

archive/issue_comments_153772.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-28T08:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153772",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_153773.json:
```json
{
    "body": "Replying to [comment:4 ppurka]:\n> Also, I ran the following sed expression (in zsh) to cleanup trailing whitespaces from `sage/plot`\nPlease don't do this, it can only lead to merge conflicts.  Removing whitespace from parts of the code which you edit is fine (even encouraged), but don't just remove all whitespace shotgun-style.\n\nThis needs to be rebased anyway, I'm going to add a new patch.",
    "created_at": "2012-06-28T08:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153773",
    "user": "jdemeyer"
}
```

Replying to [comment:4 ppurka]:
> Also, I ran the following sed expression (in zsh) to cleanup trailing whitespaces from `sage/plot`
Please don't do this, it can only lead to merge conflicts.  Removing whitespace from parts of the code which you edit is fine (even encouraged), but don't just remove all whitespace shotgun-style.

This needs to be rebased anyway, I'm going to add a new patch.



---

archive/issue_comments_153774.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-28T08:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153774",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153775.json:
```json
{
    "body": "First three patches put in one big patch, the whitespace patch removed.",
    "created_at": "2012-06-28T08:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153775",
    "user": "jdemeyer"
}
```

First three patches put in one big patch, the whitespace patch removed.



---

archive/issue_comments_153776.json:
```json
{
    "body": "Attachment [12974_flat.patch](tarball://root/attachments/some-uuid/ticket12974/12974_flat.patch) by jdemeyer created at 2012-06-28 08:53:12",
    "created_at": "2012-06-28T08:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153776",
    "user": "jdemeyer"
}
```

Attachment [12974_flat.patch](tarball://root/attachments/some-uuid/ticket12974/12974_flat.patch) by jdemeyer created at 2012-06-28 08:53:12



---

archive/issue_comments_153777.json:
```json
{
    "body": "I tried it on beta5 but it failed a couple of doctests. I will try again in a few days. I am traveling in a couple of hours so I can't install and test on beta6.\n\n```\nThe following tests failed:\n\n        sage -t  devel/sage-main/sage/plot/plot3d/base.pyx # 4 doctests failed\n        sage -t  devel/sage-main/sage/plot/plot3d/texture.py # 2 doctests faile\n        sage -t  devel/sage-main/sage/plot/colors.py # 12 doctests failed\n----------------------------------------------------------------------\nTimings have been updated.\nTotal time for all tests: 232.5 seconds\n```\n",
    "created_at": "2012-06-28T10:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153777",
    "user": "ppurka"
}
```

I tried it on beta5 but it failed a couple of doctests. I will try again in a few days. I am traveling in a couple of hours so I can't install and test on beta6.

```
The following tests failed:

        sage -t  devel/sage-main/sage/plot/plot3d/base.pyx # 4 doctests failed
        sage -t  devel/sage-main/sage/plot/plot3d/texture.py # 2 doctests faile
        sage -t  devel/sage-main/sage/plot/colors.py # 12 doctests failed
----------------------------------------------------------------------
Timings have been updated.
Total time for all tests: 232.5 seconds
```




---

archive/issue_comments_153778.json:
```json
{
    "body": "+1 to not having the whitespace patch.  There are already huge conflicts with this and the loglog plotting patch, and I think the whitespace patch greatly exaggerates the conflicts.",
    "created_at": "2012-06-28T12:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153778",
    "user": "jason"
}
```

+1 to not having the whitespace patch.  There are already huge conflicts with this and the loglog plotting patch, and I think the whitespace patch greatly exaggerates the conflicts.



---

archive/issue_comments_153779.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-28T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153779",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153780.json:
```json
{
    "body": "Ok, these are *all* manifestations of the same thing, exactly.\n\n```\n      File \"/Users/.../sage-5.1.beta6/local/lib/python/site-packages/sage/plot/colors.py\", line 509, in __eq__\n        return self.__rgb == right.__rgb\n    AttributeError: 'Color' object has no attribute '_Color__rgb'\n```\n\nSo there was one other \"name-mangling\" thing that didn't get picked up, I guess.  I'll see if I can track this down fairly easily.",
    "created_at": "2012-06-28T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153780",
    "user": "kcrisman"
}
```

Ok, these are *all* manifestations of the same thing, exactly.

```
      File "/Users/.../sage-5.1.beta6/local/lib/python/site-packages/sage/plot/colors.py", line 509, in __eq__
        return self.__rgb == right.__rgb
    AttributeError: 'Color' object has no attribute '_Color__rgb'
```

So there was one other "name-mangling" thing that didn't get picked up, I guess.  I'll see if I can track this down fairly easily.



---

archive/issue_comments_153781.json:
```json
{
    "body": "Ok, positive review on the flattened patch and its few additions.  Now I'll look at the colors thing.\n\nYup, this is all fallout from #11383 and #12999, which didn't know about this patch.  The patch is a three-character change, coming up.",
    "created_at": "2012-06-28T14:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153781",
    "user": "kcrisman"
}
```

Ok, positive review on the flattened patch and its few additions.  Now I'll look at the colors thing.

Yup, this is all fallout from #11383 and #12999, which didn't know about this patch.  The patch is a three-character change, coming up.



---

archive/issue_comments_153782.json:
```json
{
    "body": "Attachment [trac_12974-colorfix.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-colorfix.patch) by kcrisman created at 2012-06-28 14:55:09",
    "created_at": "2012-06-28T14:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153782",
    "user": "kcrisman"
}
```

Attachment [trac_12974-colorfix.patch](tarball://root/attachments/some-uuid/ticket12974/trac_12974-colorfix.patch) by kcrisman created at 2012-06-28 14:55:09



---

archive/issue_comments_153783.json:
```json
{
    "body": "Patchbot:\n\n**Apply** [attachment:12974_flat.patch] and [attachment:trac_12974-colorfix.patch].",
    "created_at": "2012-06-28T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153783",
    "user": "kcrisman"
}
```

Patchbot:

**Apply** [attachment:12974_flat.patch] and [attachment:trac_12974-colorfix.patch].



---

archive/issue_comments_153784.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-28T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153784",
    "user": "kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153785.json:
```json
{
    "body": "This passes all tests in plot.  I'm still going to run full doctests in case we get another thing like the padic one Jeroen caught, but hopefully this is now ready.",
    "created_at": "2012-06-28T14:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153785",
    "user": "kcrisman"
}
```

This passes all tests in plot.  I'm still going to run full doctests in case we get another thing like the padic one Jeroen caught, but hopefully this is now ready.



---

archive/issue_comments_153786.json:
```json
{
    "body": "Okay, all is well!  Reinstating positive review.",
    "created_at": "2012-06-28T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153786",
    "user": "kcrisman"
}
```

Okay, all is well!  Reinstating positive review.



---

archive/issue_comments_153787.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-28T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153787",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153788.json:
```json
{
    "body": "By the way, only downside here is that now Jeroen looks like the author of the patch in the history :)",
    "created_at": "2012-06-28T18:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153788",
    "user": "kcrisman"
}
```

By the way, only downside here is that now Jeroen looks like the author of the patch in the history :)



---

archive/issue_comments_153789.json:
```json
{
    "body": "Replying to [comment:29 kcrisman]:\n> By the way, only downside here is that now Jeroen looks like the author of the patch in the history :)\n\nWhich wouldn't be a problem if we used git and pull requests (unless Jeroen rebased the branch...) :)",
    "created_at": "2012-06-28T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153789",
    "user": "jason"
}
```

Replying to [comment:29 kcrisman]:
> By the way, only downside here is that now Jeroen looks like the author of the patch in the history :)

Which wouldn't be a problem if we used git and pull requests (unless Jeroen rebased the branch...) :)



---

archive/issue_comments_153790.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-02T15:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12802#issuecomment-153790",
    "user": "jdemeyer"
}
```

Resolution: fixed
