# Issue 27561: Add `backend` option to associahedron and flow polytope

archive/issues_027561.json:
```json
{
    "body": "CC:  jipilab\n\nThe option `backend` was missing for `polytopes.associahedron` and `polytopes.flow_polytopes`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27798\n\n",
    "created_at": "2019-05-08T08:38:59Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "title": "Add `backend` option to associahedron and flow polytope",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27561",
    "user": "@kliem"
}
```
CC:  jipilab

The option `backend` was missing for `polytopes.associahedron` and `polytopes.flow_polytopes`.

Issue created by migration from https://trac.sagemath.org/ticket/27798





---

archive/issue_comments_388829.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-08T08:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388829",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_388830.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T08:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388830",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388831.json:
```json
{
    "body": "The doc should include in the description of backend input of both functions: \n\n```\nIf ``None`` then ``backend='ppl'`` is used.\n```\n",
    "created_at": "2019-05-08T08:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388831",
    "user": "slabbe"
}
```

The doc should include in the description of backend input of both functions: 

```
If ``None`` then ``backend='ppl'`` is used.
```




---

archive/issue_comments_388832.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T08:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388832",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388833.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-08T08:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388833",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_388834.json:
```json
{
    "body": "Changing keywords from \"\" to \"polytopes, associahedron, flow polytopes, backend, normaliz\".",
    "created_at": "2019-05-08T08:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388834",
    "user": "@kliem"
}
```

Changing keywords from "" to "polytopes, associahedron, flow polytopes, backend, normaliz".



---

archive/issue_comments_388835.json:
```json
{
    "body": "Replying to [comment:3 slabbe]:\n> The doc should include in the description of backend input of both functions: \n> {{{\n> If ``None`` then ``backend='ppl'`` is used.\n> }}}\n\nThanks for remarking that.\nIs the current even a good way of doing it?\nMaybe I should just have `'ppl'` instead of `None` (but this somehow looks more written in stone, does it)?\nIn this ticket I didn't want any changes to the default option.",
    "created_at": "2019-05-08T11:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388835",
    "user": "@kliem"
}
```

Replying to [comment:3 slabbe]:
> The doc should include in the description of backend input of both functions: 
> {{{
> If ``None`` then ``backend='ppl'`` is used.
> }}}

Thanks for remarking that.
Is the current even a good way of doing it?
Maybe I should just have `'ppl'` instead of `None` (but this somehow looks more written in stone, does it)?
In this ticket I didn't want any changes to the default option.



---

archive/issue_comments_388836.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-05-08T11:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388836",
    "user": "@kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_388837.json:
```json
{
    "body": "Actually, I don't think the construction with associahedron works. The `._backend` string is correct, but the object does not have e.g. `normaliz` functionality.",
    "created_at": "2019-05-08T11:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388837",
    "user": "@kliem"
}
```

Actually, I don't think the construction with associahedron works. The `._backend` string is correct, but the object does not have e.g. `normaliz` functionality.



---

archive/issue_comments_388838.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T19:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388838",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388839.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-08T19:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388839",
    "user": "@kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_388840.json:
```json
{
    "body": "Seems to work now. Flow polytope anyway and also the associahedron. E.g. I can construct an associahedron with `backend='normaliz'` and access (and use) the underlying normaliz cone.",
    "created_at": "2019-05-08T19:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388840",
    "user": "@kliem"
}
```

Seems to work now. Flow polytope anyway and also the associahedron. E.g. I can construct an associahedron with `backend='normaliz'` and access (and use) the underlying normaliz cone.



---

archive/issue_comments_388841.json:
```json
{
    "body": "Three little comments from a quick look:\n\nYour `INPUT:` block is over-indented.\n\nIt is better to have new-style classes:\n\n```diff\n-class Associahedron_class_base():\n+class Associahedron_class_base(object):\n```\n\n\n```diff\n-class Associahedra_base:\n+class Associahedra_base(object):\n```\n\n\nI do not see why the `_poly_super` is needed. You could just look at the MRO or have the `Polyhedra_*` class be a class-level attribute (similar to `Element`). Are you also sure that this doesn't work:\n\n```\nassociahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])\n```\n\nas my understanding is that it goes to the next class up in the MRO after `Associahedra_base`, which should be the `Polyhedra_*` class.",
    "created_at": "2019-05-09T03:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388841",
    "user": "tscrim"
}
```

Three little comments from a quick look:

Your `INPUT:` block is over-indented.

It is better to have new-style classes:

```diff
-class Associahedron_class_base():
+class Associahedron_class_base(object):
```


```diff
-class Associahedra_base:
+class Associahedra_base(object):
```


I do not see why the `_poly_super` is needed. You could just look at the MRO or have the `Polyhedra_*` class be a class-level attribute (similar to `Element`). Are you also sure that this doesn't work:

```
associahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])
```

as my understanding is that it goes to the next class up in the MRO after `Associahedra_base`, which should be the `Polyhedra_*` class.



---

archive/issue_comments_388842.json:
```json
{
    "body": "> {{{\n> associahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])\n> }}}\n(with self and Associahedra_base interchanged) lead to\n\n```\nTypeError: super() argument 1 must be type, not classobj\n```\n\nHowever, this seems to be solved by inheriting from `object`.\n\n\nReplying to [comment:10 tscrim]:\n> Three little comments from a quick look:\n> \n> Your `INPUT:` block is over-indented.\n> \n> It is better to have new-style classes:\n> {{{#!diff\n> -class Associahedron_class_base():\n> +class Associahedron_class_base(object):\n> }}}\n> {{{#!diff\n> -class Associahedra_base:\n> +class Associahedra_base(object):\n> }}}\n> \n> I do not see why the `_poly_super` is needed. You could just look at the MRO or have the `Polyhedra_*` class be a class-level attribute (similar to `Element`). Are you also sure that this doesn't work:\n> {{{\n> associahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])\n> }}}\n> as my understanding is that it goes to the next class up in the MRO after `Associahedra_base`, which should be the `Polyhedra_*` class.",
    "created_at": "2019-05-09T11:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388842",
    "user": "@kliem"
}
```

> {{{
> associahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])
> }}}
(with self and Associahedra_base interchanged) lead to

```
TypeError: super() argument 1 must be type, not classobj
```

However, this seems to be solved by inheriting from `object`.


Replying to [comment:10 tscrim]:
> Three little comments from a quick look:
> 
> Your `INPUT:` block is over-indented.
> 
> It is better to have new-style classes:
> {{{#!diff
> -class Associahedron_class_base():
> +class Associahedron_class_base(object):
> }}}
> {{{#!diff
> -class Associahedra_base:
> +class Associahedra_base(object):
> }}}
> 
> I do not see why the `_poly_super` is needed. You could just look at the MRO or have the `Polyhedra_*` class be a class-level attribute (similar to `Element`). Are you also sure that this doesn't work:
> {{{
> associahedron = super(self, Associahedra_base)._element_constructor_(None, [inequalities, []])
> }}}
> as my understanding is that it goes to the next class up in the MRO after `Associahedra_base`, which should be the `Polyhedra_*` class.



---

archive/issue_comments_388843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-09T13:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388843",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388844.json:
```json
{
    "body": "You may want to have a look at #25183 while you are playing around with the associahedron.",
    "created_at": "2019-05-10T05:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388844",
    "user": "jipilab"
}
```

You may want to have a look at #25183 while you are playing around with the associahedron.



---

archive/issue_comments_388845.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-10T09:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388845",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388846.json:
```json
{
    "body": "please fix the pyflakes warning:\n\n```\n+src/sage/combinat/root_system/associahedron.py:28:\n 'sage.geometry.polyhedron.base.Polyhedron_base' imported but unused\n```\n",
    "created_at": "2019-05-12T11:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388846",
    "user": "chapoton"
}
```

please fix the pyflakes warning:

```
+src/sage/combinat/root_system/associahedron.py:28:
 'sage.geometry.polyhedron.base.Polyhedron_base' imported but unused
```




---

archive/issue_comments_388847.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-12T17:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388847",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388848.json:
```json
{
    "body": "I don't really like this solution with `__new__`; it is a bit too much of a hack IMO and seems like a (relatively) very slow thing to check. You also would not receive any benefits from the category framework (as you do not seem to be using the `Parent.element_class`). Perhaps I am not quite understanding things. Could you explain a bit how you arrived at this?",
    "created_at": "2019-05-14T01:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388848",
    "user": "tscrim"
}
```

I don't really like this solution with `__new__`; it is a bit too much of a hack IMO and seems like a (relatively) very slow thing to check. You also would not receive any benefits from the category framework (as you do not seem to be using the `Parent.element_class`). Perhaps I am not quite understanding things. Could you explain a bit how you arrived at this?



---

archive/issue_comments_388849.json:
```json
{
    "body": "JP asked me to also fix #25183. So I did.\n\nWhen a polyhedral face of an associahedron is constructed, I need to somehow make sure that `__new__` does not return a child of `Associahedron_base` (when the argument `cartan_type` is missing). This is the solution I came up with.\n\nI have no clue how to use `Parent.element_class`.\n\nReplying to [comment:17 tscrim]:\n> I don't really like this solution with `__new__`; it is a bit too much of a hack IMO and seems like a (relatively) very slow thing to check. You also would not receive any benefits from the category framework (as you do not seem to be using the `Parent.element_class`). Perhaps I am not quite understanding things. Could you explain a bit how you arrived at this?",
    "created_at": "2019-05-14T04:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388849",
    "user": "@kliem"
}
```

JP asked me to also fix #25183. So I did.

When a polyhedral face of an associahedron is constructed, I need to somehow make sure that `__new__` does not return a child of `Associahedron_base` (when the argument `cartan_type` is missing). This is the solution I came up with.

I have no clue how to use `Parent.element_class`.

Replying to [comment:17 tscrim]:
> I don't really like this solution with `__new__`; it is a bit too much of a hack IMO and seems like a (relatively) very slow thing to check. You also would not receive any benefits from the category framework (as you do not seem to be using the `Parent.element_class`). Perhaps I am not quite understanding things. Could you explain a bit how you arrived at this?



---

archive/issue_comments_388850.json:
```json
{
    "body": "Replying to [comment:18 gh-kliem]:\n> JP asked me to also fix #25183. So I did.\n> \n\nHave a look at it... If the bug is related or not.",
    "created_at": "2019-05-14T14:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388850",
    "user": "jipilab"
}
```

Replying to [comment:18 gh-kliem]:
> JP asked me to also fix #25183. So I did.
> 

Have a look at it... If the bug is related or not.



---

archive/issue_comments_388851.json:
```json
{
    "body": "Replying to [comment:19 jipilab]:\n> Replying to [comment:18 gh-kliem]:\n> > JP asked me to also fix #25183. So I did.\n> > \n> \n> Have a look at it... If the bug is related or not.\n\n... and the bug located at #25183 should be fixed on #25183 if it is not related to the present one ... The associahedron has the category framework behind it, this is why I thought it might be a related thing. If not, then not.",
    "created_at": "2019-05-14T14:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388851",
    "user": "jipilab"
}
```

Replying to [comment:19 jipilab]:
> Replying to [comment:18 gh-kliem]:
> > JP asked me to also fix #25183. So I did.
> > 
> 
> Have a look at it... If the bug is related or not.

... and the bug located at #25183 should be fixed on #25183 if it is not related to the present one ... The associahedron has the category framework behind it, this is why I thought it might be a related thing. If not, then not.



---

archive/issue_comments_388852.json:
```json
{
    "body": "I misunderstood. From my understanding #25183 should be fixed with redefining `__new__` or with changing the construction of `as_polyhedron`.\n\nEither way, I think initialization of associahedron should ask for `cartan_type`, as an argument. From my understanding an object should be valid upon construction.\n\nAnyway, I could move my suggestions for #25183 to a new branch public/25183 as a suggestion for this (other) ticket. Then this (this) ticket would be cleaned up from this discussion.\n\nReplying to [comment:20 jipilab]:\n> Replying to [comment:19 jipilab]:\n> > Replying to [comment:18 gh-kliem]:\n> > > JP asked me to also fix #25183. So I did.\n> > > \n> > \n> > Have a look at it... If the bug is related or not.\n> \n> ... and the bug located at #25183 should be fixed on #25183 if it is not related to the present one ... The associahedron has the category framework behind it, this is why I thought it might be a related thing. If not, then not.",
    "created_at": "2019-05-14T18:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388852",
    "user": "@kliem"
}
```

I misunderstood. From my understanding #25183 should be fixed with redefining `__new__` or with changing the construction of `as_polyhedron`.

Either way, I think initialization of associahedron should ask for `cartan_type`, as an argument. From my understanding an object should be valid upon construction.

Anyway, I could move my suggestions for #25183 to a new branch public/25183 as a suggestion for this (other) ticket. Then this (this) ticket would be cleaned up from this discussion.

Replying to [comment:20 jipilab]:
> Replying to [comment:19 jipilab]:
> > Replying to [comment:18 gh-kliem]:
> > > JP asked me to also fix #25183. So I did.
> > > 
> > 
> > Have a look at it... If the bug is related or not.
> 
> ... and the bug located at #25183 should be fixed on #25183 if it is not related to the present one ... The associahedron has the category framework behind it, this is why I thought it might be a related thing. If not, then not.



---

archive/issue_comments_388853.json:
```json
{
    "body": "I think it is better to have that discussion on #25183 as it is a separate issue.",
    "created_at": "2019-05-14T23:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388853",
    "user": "tscrim"
}
```

I think it is better to have that discussion on #25183 as it is a separate issue.



---

archive/issue_comments_388854.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-16T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388854",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_388855.json:
```json
{
    "body": "Ok, I moved the corresponding part to #25183.",
    "created_at": "2019-05-16T13:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388855",
    "user": "@kliem"
}
```

Ok, I moved the corresponding part to #25183.



---

archive/issue_comments_388856.json:
```json
{
    "body": "Is there anything left to take care of?",
    "created_at": "2019-07-05T07:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388856",
    "user": "@kliem"
}
```

Is there anything left to take care of?



---

archive/issue_comments_388857.json:
```json
{
    "body": "> The doc should include in the description of backend input of both functions: \n> {{{\n> If ``None`` then ``backend='ppl'`` is used.\n> }}}\n\nAdd the period at the end of the sentence.\n\nWhy is the only allowed base ring `QQ`? Am I missing something?",
    "created_at": "2019-07-23T14:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388857",
    "user": "jipilab"
}
```

> The doc should include in the description of backend input of both functions: 
> {{{
> If ``None`` then ``backend='ppl'`` is used.
> }}}

Add the period at the end of the sentence.

Why is the only allowed base ring `QQ`? Am I missing something?



---

archive/issue_comments_388858.json:
```json
{
    "body": "Replying to [comment:27 jipilab]:\n> \n> > The doc should include in the description of backend input of both functions: \n> > {{{\n> > If ``None`` then ``backend='ppl'`` is used.\n> > }}}\n> \n> Add the period at the end of the sentence.\nA semicolon would probably fit better.\nI learnt that INPUT does not stop with period.\n> \n> Why is the only allowed base ring `QQ`? Am I missing something?\n\nAs for the flow polytope, one can add an argument `base_ring` later.\n\nAs for the Associahedron, one would need one class for each combination of `base_ring` and `backend` (for each child of `Polyhedron_base`).\nIs it worth it?\nI don't see a great need for a different base ring.\n(Contrary, constructing an associahedron with normaliz right away, saves a lot of time.)\n\nAnyway, the goal of this ticket was to add a backend option.\nSo I never minded the base ring.",
    "created_at": "2019-07-23T15:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388858",
    "user": "@kliem"
}
```

Replying to [comment:27 jipilab]:
> 
> > The doc should include in the description of backend input of both functions: 
> > {{{
> > If ``None`` then ``backend='ppl'`` is used.
> > }}}
> 
> Add the period at the end of the sentence.
A semicolon would probably fit better.
I learnt that INPUT does not stop with period.
> 
> Why is the only allowed base ring `QQ`? Am I missing something?

As for the flow polytope, one can add an argument `base_ring` later.

As for the Associahedron, one would need one class for each combination of `base_ring` and `backend` (for each child of `Polyhedron_base`).
Is it worth it?
I don't see a great need for a different base ring.
(Contrary, constructing an associahedron with normaliz right away, saves a lot of time.)

Anyway, the goal of this ticket was to add a backend option.
So I never minded the base ring.



---

archive/issue_comments_388859.json:
```json
{
    "body": "Replying to [comment:28 gh-kliem]:\n> Replying to [comment:27 jipilab]:\n> > \n> > > The doc should include in the description of backend input of both functions: \n> > > {{{\n> > > If ``None`` then ``backend='ppl'`` is used.\n> > > }}}\n> > \n> > Add the period at the end of the sentence.\n> A semicolon would probably fit better.\n> I learnt that INPUT does not stop with period.\n\nThat's correct. In this case, it is a sentence with a noun, a verb and and complement. Thus it requires a period. Usually it is not a sentence.......................\n\n> > Why is the only allowed base ring `QQ`? Am I missing something?\n> \n> As for the flow polytope, one can add an argument `base_ring` later.\n> \n> As for the Associahedron, one would need one class for each combination of `base_ring` and `backend` (for each child of `Polyhedron_base`).\n> Is it worth it?\n> I don't see a great need for a different base ring.\n> (Contrary, constructing an associahedron with normaliz right away, saves a lot of time.)\n> \n> Anyway, the goal of this ticket was to add a backend option.\n> So I never minded the base ring.\n\nOk, fine.",
    "created_at": "2019-07-23T20:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388859",
    "user": "jipilab"
}
```

Replying to [comment:28 gh-kliem]:
> Replying to [comment:27 jipilab]:
> > 
> > > The doc should include in the description of backend input of both functions: 
> > > {{{
> > > If ``None`` then ``backend='ppl'`` is used.
> > > }}}
> > 
> > Add the period at the end of the sentence.
> A semicolon would probably fit better.
> I learnt that INPUT does not stop with period.

That's correct. In this case, it is a sentence with a noun, a verb and and complement. Thus it requires a period. Usually it is not a sentence.......................

> > Why is the only allowed base ring `QQ`? Am I missing something?
> 
> As for the flow polytope, one can add an argument `base_ring` later.
> 
> As for the Associahedron, one would need one class for each combination of `base_ring` and `backend` (for each child of `Polyhedron_base`).
> Is it worth it?
> I don't see a great need for a different base ring.
> (Contrary, constructing an associahedron with normaliz right away, saves a lot of time.)
> 
> Anyway, the goal of this ticket was to add a backend option.
> So I never minded the base ring.

Ok, fine.



---

archive/issue_comments_388860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-28T07:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388860",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388861.json:
```json
{
    "body": "Replying to [comment:30 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[d9a7e6b](https://git.sagemath.org/sage.git/commit/?id=d9a7e6b76dfad44bb6951099ae068c5dd0c0de6d)||`periods to ends of sentences`||\n\nTook care of the periods.",
    "created_at": "2019-07-28T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388861",
    "user": "@kliem"
}
```

Replying to [comment:30 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[d9a7e6b](https://git.sagemath.org/sage.git/commit/?id=d9a7e6b76dfad44bb6951099ae068c5dd0c0de6d)||`periods to ends of sentences`||

Took care of the periods.



---

archive/issue_comments_388862.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-08-27T18:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388862",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_388863.json:
```json
{
    "body": "red branch, meaning that it needs to be rebased on the latest beta",
    "created_at": "2019-08-27T18:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388863",
    "user": "chapoton"
}
```

red branch, meaning that it needs to be rebased on the latest beta



---

archive/issue_comments_388864.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-27T20:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388864",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388865.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-08-27T20:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388865",
    "user": "@kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_388866.json:
```json
{
    "body": "It seems like you have some extra stuff in `digraph` that has snuck in with the `all_paths_iterator`.",
    "created_at": "2019-08-28T00:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388866",
    "user": "tscrim"
}
```

It seems like you have some extra stuff in `digraph` that has snuck in with the `all_paths_iterator`.



---

archive/issue_comments_388867.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-08-28T05:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388867",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_388868.json:
```json
{
    "body": "Replying to [comment:35 tscrim]:\n> It seems like you have some extra stuff in `digraph` that has snuck in with the `all_paths_iterator`.\n\nDone.",
    "created_at": "2019-08-28T05:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388868",
    "user": "@kliem"
}
```

Replying to [comment:35 tscrim]:
> It seems like you have some extra stuff in `digraph` that has snuck in with the `all_paths_iterator`.

Done.



---

archive/issue_comments_388869.json:
```json
{
    "body": "Okay, I am pretty sure you now break `Associahedra` when the backend is not specified. I also do not see why you need this in `Associahedron`:\n\n```\n    if backend is None:\n        backend = 'ppl'\n```\n\nJust set `backend='ppl'` as the default argument instead of `None`.\nYou should also update the documentation there too:\n\n```\n    - ``backend`` -- string (``'ppl'``); the backend to use;\n      see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`\n```\n\n\nAlso, in `flow_polytope`:\n\n```\n        - ``backend`` -- string or ``None`` (default); the backend to use;\n          see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`\n```\n\n\n(By convention in Sage, the `INPUT:` block points are not considered to be full sentences, so no period/full-stop.)",
    "created_at": "2019-08-28T06:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388869",
    "user": "tscrim"
}
```

Okay, I am pretty sure you now break `Associahedra` when the backend is not specified. I also do not see why you need this in `Associahedron`:

```
    if backend is None:
        backend = 'ppl'
```

Just set `backend='ppl'` as the default argument instead of `None`.
You should also update the documentation there too:

```
    - ``backend`` -- string (``'ppl'``); the backend to use;
      see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`
```


Also, in `flow_polytope`:

```
        - ``backend`` -- string or ``None`` (default); the backend to use;
          see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`
```


(By convention in Sage, the `INPUT:` block points are not considered to be full sentences, so no period/full-stop.)



---

archive/issue_comments_388870.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-08-28T06:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388870",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_388871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-28T06:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388871",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388872.json:
```json
{
    "body": "Replying to [comment:38 tscrim]:\n> You should also update the documentation there too:\n> {{{\n>     - ``backend`` -- string (``'ppl'``); the backend to use;\n>       see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`\n> }}}\n> \n> Also, in `flow_polytope`:\n> {{{\n>         - ``backend`` -- string or ``None`` (default); the backend to use;\n>           see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`\n> }}}\n> \n> (By convention in Sage, the `INPUT:` block points are not considered to be full sentences, so no period/full-stop.)\n\nWe had the discussion before. I guess its fine now, as we got rid of the complete sentences.\n\nBtw, in many (if not all) polytopes in the library the `INPUT:` block is a complete sentence with period/full-stop.",
    "created_at": "2019-08-28T06:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388872",
    "user": "@kliem"
}
```

Replying to [comment:38 tscrim]:
> You should also update the documentation there too:
> {{{
>     - ``backend`` -- string (``'ppl'``); the backend to use;
>       see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`
> }}}
> 
> Also, in `flow_polytope`:
> {{{
>         - ``backend`` -- string or ``None`` (default); the backend to use;
>           see :meth:`sage.geometry.polyhedron.constructor.Polyhedron`
> }}}
> 
> (By convention in Sage, the `INPUT:` block points are not considered to be full sentences, so no period/full-stop.)

We had the discussion before. I guess its fine now, as we got rid of the complete sentences.

Btw, in many (if not all) polytopes in the library the `INPUT:` block is a complete sentence with period/full-stop.



---

archive/issue_comments_388873.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-08-28T06:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388873",
    "user": "@kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_388874.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-28T07:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388874",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_388875.json:
```json
{
    "body": "Thank you. Yea, well, there have been some fairly inconsistent things done with the documentation over the years. `:/` I am at least trying to move towards what the [standard in the dev guide](https://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)",
    "created_at": "2019-08-28T07:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388875",
    "user": "tscrim"
}
```

Thank you. Yea, well, there have been some fairly inconsistent things done with the documentation over the years. `:/` I am at least trying to move towards what the [standard in the dev guide](https://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)



---

archive/issue_comments_388876.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-02T21:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27561#issuecomment-388876",
    "user": "vbraun"
}
```

Resolution: fixed
