# Issue 11854: root finding misses a root over QQbar

Issue created by migration from https://trac.sagemath.org/ticket/12026

Original creator: was

Original creation time: 2011-11-14 02:18:37

Assignee: AlexGhitza


```
sage: A = matrix(QQ, 8, lambda i, j: 1/(i + j + 1))
sage: f = A.charpoly()
sage: f.degree()
8
sage: f.is_squarefree()   # so f must have 8 roots over the algebraic closure.
True
sage: len(f.roots(QQbar))      # VERY BAD
7
```

At least the roots that are found are really roots:

```
sage: [f(a[0])==0 for a in f.roots(QQbar)]
[True, True, True, True, True, True, True]
```



---

Comment by dsm created at 2011-11-14 02:30:43

See also trac #10803.


---

Comment by was created at 2011-11-14 02:33:27

Changing status from new to needs_review.


---

Attachment


---

Comment by kini created at 2011-11-14 13:02:08

Changing status from needs_review to positive_review.


---

Comment by kini created at 2011-11-14 13:02:08

Patch looks good. `make ptestlong` passes on sage.math. Positive review from me.


---

Comment by jdemeyer created at 2011-11-14 21:57:34

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-11-14 21:57:34

William, correct syntax is

```
TESTS:

Verify that trac 12026 is fixed:: 
```


Note the _single_ colon after `TESTS` because it is not followed by Sage commands but by a textual comment.


---

Comment by was created at 2011-11-15 00:31:05

Replying to [comment:4 jdemeyer]:
> William, correct syntax is
> {{{
> TESTS:
> 
> Verify that trac 12026 is fixed:: 
> }}}
> 
> Note the _single_ colon after `TESTS` because it is not followed by Sage commands but by a textual comment.

I prefer to put two colons for several reasons:  (1) consistency, (2) if somebody adds a new example above mine with just an example (and no text) it will just work, and (3) it works just fine as I did it -- see http://wstein.org/home/wstein/tmp/a.png


---

Comment by was created at 2011-11-15 00:31:05

Changing status from needs_work to needs_review.


---

Comment by kini created at 2011-11-15 04:46:19

Jeroen has a good point - this is technically incorrect ReST:


```
fs@zhenghe /tmp $ cat test.rst
Check out this literal block::

Ha, gotcha
fs@zhenghe /tmp $ python -c "from docutils.core import publish_string ; print publish_string(open('test.rst').read())"
<string>:3: (WARNING/2) Literal block expected; none found.
<document source="<string>">
    <paragraph>
        Check out this literal block:
    <system_message level="2" line="3" source="<string>" type="WARNING">
        <paragraph>
            Literal block expected; none found.
    <paragraph>
        Ha, gotcha

fs@zhenghe /tmp $ 
```


This brings (3) into question. I don't see what you mean by (1). (2) is certainly true but that's not a good reason to use incorrect syntax, IMO. I'll attach a reviewer patch.


---

Comment by kini created at 2011-11-15 04:49:28

apply to $SAGE_ROOT/devel/sage


---

Comment by kini created at 2011-11-15 04:51:48

Changing status from needs_review to positive_review.


---

Attachment


---

Comment by jdemeyer created at 2011-11-15 08:37:02

Replying to [comment:5 was]:
> (3) it works just fine as I did it -- see http://wstein.org/home/wstein/tmp/a.png

kini is right, this is not correct syntax.  I agree that Sphinx only gives a WARNING (not an ERROR) but I reject all such patches.


---

Comment by jdemeyer created at 2011-11-16 13:46:12

Resolution: fixed
