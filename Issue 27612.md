# Issue 27612: allow some conversion of trig functions to universal cyclotomic field

Issue created by migration from https://trac.sagemath.org/ticket/27849

Original creator: chapoton

Original creation time: 2019-05-19 09:33:50

CC:  tscrim vdelecroix




---

Comment by chapoton created at 2019-05-19 09:34:57

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-05-19 09:34:57

this may cause a slowing of startup..
----
New commits:


---

Comment by vdelecroix created at 2019-05-19 13:23:01

Why not a `try/except` here

```
+        if hasattr(elt, '_algebraic_'):
+            return elt._algebraic_(self)
```



---

Comment by vdelecroix created at 2019-05-19 13:26:33

Why would you expect some slowdown on startup? `libgap` is only loaded at the time the `UniversalCyclotomicField` is built.


---

Comment by vdelecroix created at 2019-05-19 13:29:09

This is failing

```
sage: UCF(cos(pi/4))
Traceback (most recent call last):
...
TypeError: unable to convert 1/2*sqrt(2) to Universal Cyclotomic Field
```


EDIT: I just saw in your examples that is written with `hold=True` hack. Not very nice for end users. What about providing conversion for `sqrt(D)` (special case of Kronecker-Weber: it is always contained in `UCF`)?


---

Comment by vdelecroix created at 2019-05-19 13:29:09

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2019-05-19 13:35:09

The howto of Kronecker-Weber for square root is nicely explained in marlu's answer to [this post on stackexchange](https://math.stackexchange.com/questions/282757/square-roots-of-integers-and-cyclotomic-fields).


---

Comment by chapoton created at 2019-05-19 14:42:04

I would rather keep any further improvement for another ticket.


---

Comment by vdelecroix created at 2019-05-19 16:02:09

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2019-05-24 18:29:50

Resolution: fixed
