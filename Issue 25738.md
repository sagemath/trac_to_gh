# Issue 25738: py3: small fix for Lfunction names

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-07-30 13:21:19

This is a smidge ugly I think, but it works consistently across Python 2 and 3 with no changes to the API.


---

Comment by embray created at 2018-07-30 13:27:15

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-07-30 22:17:42

Bikeshedding: I don't see the point of having the variable `_name`. Otherwise LGTM.


---

Comment by embray created at 2018-07-31 14:06:28

You need it, because it's exposing the buffer of a `bytes` object as a `char *`, so you need to keep a reference to that `bytes` object around as long as its buffer is being used by external C code.

Cython can usually detect this and will actually refuse to compile if you don't handle it properly, though I'm not completely positive if it would have complained in this case or not.  Sometimes it's also clever enough to create a temporary reference to the object itself, but I haven't worked out exactly when it does or doesn't do that.


---

Comment by embray created at 2018-07-31 14:06:28

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-09 21:27:44

Resolution: fixed
