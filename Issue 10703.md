# Issue 10703: Fractional ideals intersection gives wrong awnsers in some cases.

Issue created by migration from Trac.

Original creator: mderickx

Original creation time: 2011-02-10 14:16:59

Assignee: was

CC:  jdemeyer leif cremona

Here is an explicit example:


```
sage: var('x') 
sage: K=QQ.extension(x,'x') 
sage: (K*(1/4)).intersection(K*(1/4)) 
Fractional ideal (1/16) 
```



---

Comment by johanbosman created at 2011-04-28 10:14:17

This seems to be a bug in Pari:
 {{{
           GP/PARI CALCULATOR Version 2.4.3 (development svn-12623)
          i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version
            compiled: Mar  4 2011, gcc-4.2.1 (Apple Inc. build 5664)
                 (readline v6.1 enabled, extended help enabled)

                     Copyright (C) 2000-2008 The PARI Group

PARI/GP is free software, covered by the GNU General Public License, and comes 
WITHOUT ANY WARRANTY WHATSOEVER.

Type ? for help, \q to quit.
Type ?12 for how to get moral (and possibly technical) support.

parisize = 8000000, primelimit = 500509
? K = nfinit(x^2-2)
%1 = [x^2 - 2, [2, 0], 8, 1, [[1, -1.4142135623730950488016887242096980786; 1, 1.4142135623730950488016887242096980786], [1, -1.4142135623730950488016887242096980786; 1, 1.4142135623730950488016887242096980786], [1, -1; 1, 1], [2, 0; 0, 4], [4, 0; 0, 2], [2, 0; 0, 1], [2, [0, 2; 1, 0]]], [-1.4142135623730950488016887242096980786, 1.4142135623730950488016887242096980786], [1, x], [1, 0; 0, 1], [1, 0, 0, 2; 0, 1, 1, 0]]
? a = idealhnf(K, 1/2)
%2 = 
[1/2 0]

[0 1/2]

? idealintersect(K, a, a)
%3 = 
[1/4 0]

[0 1/4]
}}}


---

Comment by johanbosman created at 2011-04-28 10:24:05

I've reported it to Pari.


---

Comment by mderickx created at 2011-04-28 11:07:07

I saw it indeed: http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1192


---

Comment by johanbosman created at 2011-04-29 11:07:36

It's been fixed in Pari, so updating Pari would most likely fix this bug.


---

Comment by jdemeyer created at 2011-04-29 12:12:46

The new PARI spkg at #11130 should fix this.

Please add a doctest here to ensure the problem is fixed.


---

Comment by jdemeyer created at 2011-04-29 12:22:50

Changing status from new to needs_review.


---

Attachment


---

Comment by jdemeyer created at 2011-09-27 09:42:45

Could anybody please review the fact that #11130 fixes this problem and that the doctest is good?


---

Comment by cremona created at 2011-09-27 10:29:09

Replying to [comment:7 jdemeyer]:
> Could anybody please review the fact that #11130 fixes this problem and that the doctest is good?

I will, since I have a working build of 4.7.2.alpha2 + #11130 to hand.


---

Comment by cremona created at 2011-09-27 10:38:25

Changing status from needs_review to positive_review.


---

Comment by cremona created at 2011-09-27 10:38:25

Patch applies fine to 4.7.2.alpha2 + patches from #11130, and successfully demonstrates that the bug no longer exists.


---

Comment by leif created at 2011-09-27 14:37:11

Changing keywords from "" to "PARI".


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted


---

Comment by jdemeyer created at 2011-11-07 10:11:26

Resolution: fixed
