# Issue 20934: Tachyon patches fail on ARM

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2016-08-04 22:35:27

CC:  embray

Some fallout from #20933:

```
Found local metadata for tachyon-0.98.9.p5
Using cached file /home/buildbot/slave/sage_git/build/upstream/tachyon-0.98.9.tar.bz2
tachyon-0.98.9.p5
====================================================
Setting up build directory for tachyon-0.98.9.p5
Finished extraction
****************************************************
Host system:
Linux node3eth0 3.5.0-51-highbank #76-Ubuntu SMP Thu May 15 22:16:59 UTC 2014 armv7l armv7l armv7l GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/home/buildbot/slave/sage_git/build/local/libexec/gcc/armv7l-unknown-linux-gnueabihf/4.9.3/lto-wrapper
Target: armv7l-unknown-linux-gnueabihf
Configured with: ../src/configure --prefix=/home/buildbot/slave/sage_git/build/local --with-local-prefix=/home/buildbot/slave/sage_git/build/local --with-gmp=/home/buildbot/slave/sage_git/build/local --with-mpfr=/home/buildbot/slave/sage_git/build/local --with-mpc=/home/buildbot/slave/sage_git/build/local --with-system-zlib --disable-multilib --disable-nls --enable-languages=c,c++,fortran --disable-libitm --with-arch=armv7-a --with-fpu=vfpv3-d16 --with-float=hard  
Thread model: posix
gcc version 4.9.3 (GCC) 
****************************************************
Applying ../patches/Make-arch.patch
patching file unix/Make-arch
Applying ../patches/Make-config.patch
patching file unix/Make-config
Applying ../patches/main.c.patch
patching file demosrc/main.c
sed: can't read ../../patches/Make-arch: No such file or directory
make[3]: Entering directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/tachyon-0.98.9.p5/src/unix'
make[3]: *** No rule to make target `linux-thr'.
make[3]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/tachyon-0.98.9.p5/src/unix'
Error building Tachyon Ray Tracer.

real	0m0.154s
user	0m0.020s
sys	0m0.000s
************************************************************************
Error installing package tachyon-0.98.9.p5
************************************************************************
```



---

Comment by embray created at 2016-08-05 09:18:18

I see.  That's due to this: https://git.sagemath.org/sage.git/tree/build/pkgs/tachyon/spkg-install?h=86279c4146a13f060f3ce05017478c499860ed59&id=c863b90459a0e57eab1c2641646237e2774f246f#n89

Instead, it could either `sed` the file in-place, or perhaps better have a platform-specific patch.


---

Comment by vbraun created at 2016-08-05 23:01:27

I'd go with a platform-specific patch ...


---

Comment by Konrad127123 created at 2017-03-28 09:50:23

Changing status from new to needs_review.


---

Comment by Konrad127123 created at 2017-03-28 09:50:23

I've done a platform-specific patch. I've tested on ARM (raspbian) and tachyon compiles with this patch.
----
New commits:


---

Comment by jdemeyer created at 2017-03-28 10:11:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-03-28 10:11:39

Author name please....


---

Comment by vbraun created at 2017-03-30 22:34:55

Resolution: fixed
