# Issue 16609: a difference_matrices module

archive/issues_016609.json:
```json
{
    "body": "CC:  vdelecroix\n\nThis commit creates a `difference_matrices` module which does not do much at the moment: it can creates DM for prime powers, and return DM from the database.\n\nIn the database, however, a lot changes as many OA were actually difference matrices. The constructors are turned into difference matrices constructors, and `orthogonal_array` now calls `difference_matrix` to get them.\n\nAll in all what this patch does is mostly code administration, but well, that's the way to go ...\n\nQuasi-difference matrices will be handled later as there are some problems with them, in particular in the way `orthogonal_array` will query the future `quasi_difference_matrix` constructor.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/16846\n\n",
    "created_at": "2014-08-17T14:59:25Z",
    "labels": [
        "combinatorial designs",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "a difference_matrices module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16609",
    "user": "ncohen"
}
```
CC:  vdelecroix

This commit creates a `difference_matrices` module which does not do much at the moment: it can creates DM for prime powers, and return DM from the database.

In the database, however, a lot changes as many OA were actually difference matrices. The constructors are turned into difference matrices constructors, and `orthogonal_array` now calls `difference_matrix` to get them.

All in all what this patch does is mostly code administration, but well, that's the way to go ...

Quasi-difference matrices will be handled later as there are some problems with them, in particular in the way `orthogonal_array` will query the future `quasi_difference_matrix` constructor.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/16846





---

archive/issue_comments_218978.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-17T14:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218978",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_218979.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-17T15:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218979",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218980.json:
```json
{
    "body": "Sorry for the diff in the database file, it's a bit hard to review with everything being mixed up by the diff algorithm... `:-/`\n\nWhat happens there is simple: some `DM_*` functions are removed and replaced by their `DM_*` counterpart. No new constructor is added, it's only a rephrase of that code.\n\nNathann",
    "created_at": "2014-08-17T15:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218980",
    "user": "ncohen"
}
```

Sorry for the diff in the database file, it's a bit hard to review with everything being mixed up by the diff algorithm... `:-/`

What happens there is simple: some `DM_*` functions are removed and replaced by their `DM_*` counterpart. No new constructor is added, it's only a rephrase of that code.

Nathann



---

archive/issue_comments_218981.json:
```json
{
    "body": "Hi Nathann,\n\nVery nice that you did that!\n\nI guess that difference matrices are interesting only over Abelian groups. Is that true? It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...\n\nVincent",
    "created_at": "2014-08-17T18:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218981",
    "user": "vdelecroix"
}
```

Hi Nathann,

Very nice that you did that!

I guess that difference matrices are interesting only over Abelian groups. Is that true? It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...

Vincent



---

archive/issue_comments_218982.json:
```json
{
    "body": "Yo !\n\n> I guess that difference matrices are interesting only over Abelian groups. Is that true?\n\nI have no idea about that, but all examples I saw were on abelian groups indeed.\n\n> It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...\n\nHmmmmm... So a structure like that ?\n\n```\nDM_constructions = {\n   order_of_the_group : {\n     signature_of_the_abelian_group: [\n         (k1,matrix_constructor1),\n         (k2,matrix_constructor2)\n         ]\n     }\n}\n```\n\n\nHaving several difference families/matrices or OA and stuff is a hobby of yours, you know ? To me it's just not the interesting direction `:-P`\n\nIt can be done anyway but we have to do that later, this heap of patches is really getting dangerous. Plus Travis wrote a patch that is totally incompatible with this one, and there are like 10 tickets in linear order an `needs_review` at the moment `:-P`\n\nNathann",
    "created_at": "2014-08-17T18:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218982",
    "user": "ncohen"
}
```

Yo !

> I guess that difference matrices are interesting only over Abelian groups. Is that true?

I have no idea about that, but all examples I saw were on abelian groups indeed.

> It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...

Hmmmmm... So a structure like that ?

```
DM_constructions = {
   order_of_the_group : {
     signature_of_the_abelian_group: [
         (k1,matrix_constructor1),
         (k2,matrix_constructor2)
         ]
     }
}
```


Having several difference families/matrices or OA and stuff is a hobby of yours, you know ? To me it's just not the interesting direction `:-P`

It can be done anyway but we have to do that later, this heap of patches is really getting dangerous. Plus Travis wrote a patch that is totally incompatible with this one, and there are like 10 tickets in linear order an `needs_review` at the moment `:-P`

Nathann



---

archive/issue_comments_218983.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Yo !\n> \n> > I guess that difference matrices are interesting only over Abelian groups. Is that true?\n> \n> I have no idea about that, but all examples I saw were on abelian groups indeed.\n\nBecause you can not develop a difference matrix to get an OA if the group is non Abelian. But perhaps, difference matrices can be used for other purposes.\n\n> > It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...\n> \n> Hmmmmm... So a structure like that ?\n> {{{\n> DM_constructions = {\n>    order_of_the_group : {\n>      signature_of_the_abelian_group: [\n>          (k1,matrix_constructor1),\n>          (k2,matrix_constructor2)\n>          ]\n>      }\n> }\n> }}}\n\nMight be better than what I did... I used ` {signature: DF} `\n\n> Having several difference families/matrices or OA and stuff is a hobby of yours, you know ? To me it's just not the interesting direction `:-P`\n\nSometimes it is very important that your group is cyclic (for difference families or difference matrix)... so you want to be able to ask a given difference X over a cyclic group only.\n\n> It can be done anyway but we have to do that later, this heap of patches is really getting dangerous. Plus Travis wrote a patch that is totally incompatible with this one, and there are like 10 tickets in linear order an `needs_review` at the moment `:-P`\n\n+1\n\nVincent",
    "created_at": "2014-08-17T19:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218983",
    "user": "vdelecroix"
}
```

Replying to [comment:5 ncohen]:
> Yo !
> 
> > I guess that difference matrices are interesting only over Abelian groups. Is that true?
> 
> I have no idea about that, but all examples I saw were on abelian groups indeed.

Because you can not develop a difference matrix to get an OA if the group is non Abelian. But perhaps, difference matrices can be used for other purposes.

> > It would be nice to coordinate with difference families for input/output. For example, in #16802, in the database, you can ask a difference family with a given group and not only a fixed cardinality. It is not perfect, but I tried to start involving the group...
> 
> Hmmmmm... So a structure like that ?
> {{{
> DM_constructions = {
>    order_of_the_group : {
>      signature_of_the_abelian_group: [
>          (k1,matrix_constructor1),
>          (k2,matrix_constructor2)
>          ]
>      }
> }
> }}}

Might be better than what I did... I used ` {signature: DF} `

> Having several difference families/matrices or OA and stuff is a hobby of yours, you know ? To me it's just not the interesting direction `:-P`

Sometimes it is very important that your group is cyclic (for difference families or difference matrix)... so you want to be able to ask a given difference X over a cyclic group only.

> It can be done anyway but we have to do that later, this heap of patches is really getting dangerous. Plus Travis wrote a patch that is totally incompatible with this one, and there are like 10 tickets in linear order an `needs_review` at the moment `:-P`

+1

Vincent



---

archive/issue_comments_218984.json:
```json
{
    "body": "> Might be better than what I did... I used ` {signature: DF} `\n\nIf you just want a difference family to exist in order to build a BIBD but don't know the exact decomposition you need to list everything `:-/` \n\nNathann",
    "created_at": "2014-08-17T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218984",
    "user": "ncohen"
}
```

> Might be better than what I did... I used ` {signature: DF} `

If you just want a difference family to exist in order to build a BIBD but don't know the exact decomposition you need to list everything `:-/` 

Nathann



---

archive/issue_comments_218985.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-08-22T11:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218985",
    "user": "ncohen"
}
```

Last 10 new commits:



---

archive/issue_comments_218986.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-08-22T12:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218986",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_218987.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-22T14:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218987",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218988.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-22T15:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218988",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218989.json:
```json
{
    "body": "I did\n- removed `TD_6_12`\n- `OA_7_39` -> `DM_39_6_1`\n\nAs a consequence, doc builds... and test still pass.\n\nIf you like it, set to positive review.\n\nVincent",
    "created_at": "2014-08-22T15:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218989",
    "user": "vdelecroix"
}
```

I did
- removed `TD_6_12`
- `OA_7_39` -> `DM_39_6_1`

As a consequence, doc builds... and test still pass.

If you like it, set to positive review.

Vincent



---

archive/issue_comments_218990.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-22T15:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218990",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218991.json:
```json
{
    "body": "The doc builds, and doctests pass. Thank you very much for this last review ! `:-D`\n\nNathann",
    "created_at": "2014-08-22T15:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218991",
    "user": "ncohen"
}
```

The doc builds, and doctests pass. Thank you very much for this last review ! `:-D`

Nathann



---

archive/issue_comments_218992.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-24T17:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-218992",
    "user": "vbraun"
}
```

Resolution: fixed
