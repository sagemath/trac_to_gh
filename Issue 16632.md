# Issue 16632: faster prime_powers

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2014-08-22 20:55:36

CC:  ncohen

The function `prime_powers` in `sage.rings.arith` was using the symbolic ring... it would be faster to use a `sleep(10)` and avoid it.


---

Comment by vdelecroix created at 2014-08-22 20:57:59

New commits:


---

Comment by vdelecroix created at 2014-08-22 20:57:59

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2014-08-22 21:06:42

Old timings

```
sage: timeit("prime_powers(1000)")
125 loops, best of 3: 6.13 ms per loop
sage: timeit("prime_powers(5000)")
25 loops, best of 3: 9.43 ms per loop
sage: timeit("prime_powers(10000)")   # oh yeah! 10000 is a square!
625 loops, best of 3: 282 µs per loop
sage: timeit("prime_powers(10001)")
25 loops, best of 3: 12.7 ms per loop
```


new timings

```
sage: timeit("prime_powers(1000)")
625 loops, best of 3: 91.4 µs per loop
sage: timeit("prime_powers(5000)")
625 loops, best of 3: 282 µs per loop
sage: timeit("prime_powers(10000)")
625 loops, best of 3: 518 µs per loop
sage: timeit("prime_powers(10001)")
625 loops, best of 3: 500 µs per loop
```


It seems that using twice `prime_range` is not a so good idea.

Vincent


---

Comment by git created at 2014-08-22 21:17:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-08-22 21:29:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-08-22 21:34:40

Gooooooooooooooood to go !

Nathann


---

Comment by ncohen created at 2014-08-22 21:34:40

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2014-08-22 21:35:27

Cool! Thanks!

Vincent


---

Comment by vbraun created at 2014-08-22 21:40:51

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-08-22 21:40:51

author name can't be reviewer name ;-)


---

Comment by vdelecroix created at 2014-08-22 21:41:21

Changing status from needs_work to positive_review.


---

Comment by vdelecroix created at 2014-08-22 21:41:43

Replying to [comment:7 vbraun]:
> author name can't be reviewer name ;-)

Never happy ;-)


---

Comment by ncohen created at 2014-08-22 22:04:15

Soorrryyyyyyyyyyyyyyyyyyyyyyyyyyy

Nathann


---

Comment by vbraun created at 2014-08-23 13:24:20

Resolution: fixed
