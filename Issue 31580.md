# Issue 31580: looking for a sane installation process

Issue created by migration from https://trac.sagemath.org/ticket/31817

Original creator: @themaddoctor

Original creation time: 2021-05-12 03:27:57

CC:  slelievre

I'm looking for a sane installation process. We have a linux system that
already has python2, python3, pkgconf, gcc, gdb, openblas, scipy,...., yet
the sage source code insists on downloading and compiling what amounts
to an entire new linux system. Is there not a sane installation process that
builds against the libraries that already exist on the system and uses
the compilation tools that already exist?

I'm going to leave the priority at "major" because this blocks us from
producing a package for this linux distribution.



---

Comment by mkoeppe created at 2021-05-12 04:03:33

Try with reading the README first.


---

Comment by @sheerluck created at 2021-05-12 07:56:10

Take a look at Gentoo Linux: `emerge sage` literally builds against the libraries that already exist on the system and uses the compilation tools that already exist


---

Comment by slelievre created at 2021-05-12 08:11:32

> Is there not a sane installation process that
> builds against the libraries that already exist
> on the system and uses the compilation tools
> that already exist?

There is. Follow the instructions in the README:

- https://github.com/sagemath/sage/blob/master/README.md

In particular, the output of the `./configure` step
ends with recommendations of system packages to install
to ensure Sage installs as few components as possible.

This works for many distributions (Arch Linux, Conda,
Cygwin, Debian, Fedora, FreeBSD, Gentoo, Homebrew, . Yours might
be supported; you only mention "a linux system".

For many packages, an `spkg-configure.m4` script detects
whether that package is already present system-wide
so Sage will use it instead of building its own.

Progress of this "spkg-configure" effort is tracked at

- #27330: Meta-ticket: spkg-configure: Try to use as many system packages as possible


---

Comment by slelievre created at 2021-05-12 08:58:53

Changing component from PLEASE CHANGE to build: configure.


---

Comment by slelievre created at 2021-05-12 08:58:53

Marking as duplicate as improving the installation
process is tracked elsewhere.

When you say

> this blocks us from producing a package
> for this linux distribution

does it blocks installing Sage, or does it block
producing another package that depends on it?


---

Comment by slelievre created at 2021-05-12 08:58:53

Changing status from new to needs_review.


---

Comment by slelievre created at 2021-05-12 08:58:53

Changing type from PLEASE CHANGE to enhancement.


---

Comment by dimpase created at 2021-06-03 21:23:15

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-06-23 15:47:30

Resolution: invalid
