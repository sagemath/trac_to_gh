# Issue 10258: success error code returned when spkg install fails

Issue created by migration from https://trac.sagemath.org/ticket/10259

Original creator: robertwb

Original creation time: 2010-11-13 21:37:21

Assignee: GeorgSWeber

For example, try out the (failing) spkg at https://sage.math.washington.edu:8091/hudson/job/sage-build/303/artifact/cython-devel.spkg


---

Comment by robertwb created at 2010-11-13 21:40:52

Spkg failing to install.


---

Attachment


```
$ ./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
Attempting to download package bad
>>> Downloading bad.spkg.
[.]
bad
====================================================
Extracting package /Users/karl.crisman/Downloads/sage-5.9.rc0/spkg/optional/bad.spkg
<snip>
Thread model: posix
gcc version 4.7.2 (GCC) 
****************************************************

real	0m0.001s
user	0m0.000s
sys	0m0.000s
************************************************************************
Error installing package bad
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
<snip>
```

This was on OS X.  Same result on boxes.math.  And if I write a script that checks the exit code

```
echo "Trying stuff"
./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
if [ $? -ne 0 ]; then
    echo "it failed"
fi
```

works as expected.  I believe we can close this, then?


---

Comment by kcrisman created at 2013-04-26 01:41:06

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-04-26 12:40:05

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-04-26 12:40:05

Worked for me on Ubuntu as well. I think this can be closed.


---

Comment by jdemeyer created at 2013-04-28 12:46:56

Resolution: worksforme


---

Comment by SimonKing created at 2013-04-29 11:48:01

See #14492: I still observe those wrong success reports. This is on an `openSuse` laptop,

```
> uname -a
Linux linux-sqwp.site 3.1.10-1.19-desktop #1 SMP PREEMPT Mon Feb 25 10:32:50 UTC 2013 (f0b13a3) x86_64 x86_64 x86_64 GNU/Linux
> cat /etc/issue
Welcome to openSUSE 12.1 "Asparagus" - Kernel \r (\l).
```



---

Comment by SimonKing created at 2013-04-29 11:51:16

The spkg from here fails to install (as it should). But when I insert an unknown identifier into some Cython file in my group cohomology spkg, then sage-5.9.rc0 reports success, even though of course compilation fails.

So, shall one re-open this ticket?


---

Comment by jdemeyer created at 2013-04-29 11:53:39

This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.


---

Comment by SimonKing created at 2013-04-29 11:57:17

Replying to [comment:7 jdemeyer]:
> This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.

Volker, for one, says that my spkg-install is fine. So, I'd rather assume that it is a problem with building Cython code in an spkg.

So, I'll try to create a new bad.spkg.
