# Issue 10258: success error code returned when spkg install fails

archive/issues_010258.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nFor example, try out the (failing) spkg at https://sage.math.washington.edu:8091/hudson/job/sage-build/303/artifact/cython-devel.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/10259\n\n",
    "created_at": "2010-11-13T21:37:21Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "success error code returned when spkg install fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10258",
    "user": "https://github.com/robertwb"
}
```
Assignee: GeorgSWeber

For example, try out the (failing) spkg at https://sage.math.washington.edu:8091/hudson/job/sage-build/303/artifact/cython-devel.spkg

Issue created by migration from https://trac.sagemath.org/ticket/10259





---

archive/issue_comments_104522.json:
```json
{
    "body": "Spkg failing to install.",
    "created_at": "2010-11-13T21:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104522",
    "user": "https://github.com/robertwb"
}
```

Spkg failing to install.



---

archive/issue_comments_104523.json:
```json
{
    "body": "Attachment [bad.spkg](tarball://root/attachments/some-uuid/ticket10259/bad.spkg) by @kcrisman created at 2013-04-26 01:41:06\n\n\n```\n$ ./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg\nAttempting to download package bad\n>>> Downloading bad.spkg.\n[.]\nbad\n====================================================\nExtracting package /Users/karl.crisman/Downloads/sage-5.9.rc0/spkg/optional/bad.spkg\n<snip>\nThread model: posix\ngcc version 4.7.2 (GCC) \n****************************************************\n\nreal\t0m0.001s\nuser\t0m0.000s\nsys\t0m0.000s\n************************************************************************\nError installing package bad\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\n<snip>\n```\n\nThis was on OS X.  Same result on boxes.math.  And if I write a script that checks the exit code\n\n```\necho \"Trying stuff\"\n./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg\nif [ $? -ne 0 ]; then\n    echo \"it failed\"\nfi\n```\n\nworks as expected.  I believe we can close this, then?",
    "created_at": "2013-04-26T01:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104523",
    "user": "https://github.com/kcrisman"
}
```

Attachment [bad.spkg](tarball://root/attachments/some-uuid/ticket10259/bad.spkg) by @kcrisman created at 2013-04-26 01:41:06


```
$ ./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
Attempting to download package bad
>>> Downloading bad.spkg.
[.]
bad
====================================================
Extracting package /Users/karl.crisman/Downloads/sage-5.9.rc0/spkg/optional/bad.spkg
<snip>
Thread model: posix
gcc version 4.7.2 (GCC) 
****************************************************

real	0m0.001s
user	0m0.000s
sys	0m0.000s
************************************************************************
Error installing package bad
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
<snip>
```

This was on OS X.  Same result on boxes.math.  And if I write a script that checks the exit code

```
echo "Trying stuff"
./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
if [ $? -ne 0 ]; then
    echo "it failed"
fi
```

works as expected.  I believe we can close this, then?



---

archive/issue_comments_104524.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-26T01:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104524",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_104525.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-26T12:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104525",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_104526.json:
```json
{
    "body": "Worked for me on Ubuntu as well. I think this can be closed.",
    "created_at": "2013-04-26T12:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104526",
    "user": "https://github.com/tscrim"
}
```

Worked for me on Ubuntu as well. I think this can be closed.



---

archive/issue_comments_104527.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2013-04-28T12:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104527",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: worksforme



---

archive/issue_comments_104528.json:
```json
{
    "body": "See #14492: I still observe those wrong success reports. This is on an `openSuse` laptop,\n\n```\n> uname -a\nLinux linux-sqwp.site 3.1.10-1.19-desktop #1 SMP PREEMPT Mon Feb 25 10:32:50 UTC 2013 (f0b13a3) x86_64 x86_64 x86_64 GNU/Linux\n> cat /etc/issue\nWelcome to openSUSE 12.1 \"Asparagus\" - Kernel \\r (\\l).\n```\n",
    "created_at": "2013-04-29T11:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104528",
    "user": "https://github.com/simon-king-jena"
}
```

See #14492: I still observe those wrong success reports. This is on an `openSuse` laptop,

```
> uname -a
Linux linux-sqwp.site 3.1.10-1.19-desktop #1 SMP PREEMPT Mon Feb 25 10:32:50 UTC 2013 (f0b13a3) x86_64 x86_64 x86_64 GNU/Linux
> cat /etc/issue
Welcome to openSUSE 12.1 "Asparagus" - Kernel \r (\l).
```




---

archive/issue_comments_104529.json:
```json
{
    "body": "The spkg from here fails to install (as it should). But when I insert an unknown identifier into some Cython file in my group cohomology spkg, then sage-5.9.rc0 reports success, even though of course compilation fails.\n\nSo, shall one re-open this ticket?",
    "created_at": "2013-04-29T11:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104529",
    "user": "https://github.com/simon-king-jena"
}
```

The spkg from here fails to install (as it should). But when I insert an unknown identifier into some Cython file in my group cohomology spkg, then sage-5.9.rc0 reports success, even though of course compilation fails.

So, shall one re-open this ticket?



---

archive/issue_comments_104530.json:
```json
{
    "body": "This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.",
    "created_at": "2013-04-29T11:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104530",
    "user": "https://github.com/jdemeyer"
}
```

This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.



---

archive/issue_comments_104531.json:
```json
{
    "body": "Replying to [comment:7 jdemeyer]:\n> This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.\n\nVolker, for one, says that my spkg-install is fine. So, I'd rather assume that it is a problem with building Cython code in an spkg.\n\nSo, I'll try to create a new bad.spkg.",
    "created_at": "2013-04-29T11:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10258#issuecomment-104531",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:7 jdemeyer]:
> This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.

Volker, for one, says that my spkg-install is fine. So, I'd rather assume that it is a problem with building Cython code in an spkg.

So, I'll try to create a new bad.spkg.
