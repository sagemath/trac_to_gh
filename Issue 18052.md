# Issue 18052: Faster output for large graphs

archive/issues_018052.json:
```json
{
    "body": "CC:  ncohen dcoudert\n\nRich output for graphs can be very slow. Suggestion: implement a size cutoff (#of vertices/edges) above which no graphics is produced, or a different kind of graphics than the usual spring-layout graph.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18289\n\n",
    "created_at": "2015-04-23T13:15:29Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Faster output for large graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18052",
    "user": "vbraun"
}
```
CC:  ncohen dcoudert

Rich output for graphs can be very slow. Suggestion: implement a size cutoff (#of vertices/edges) above which no graphics is produced, or a different kind of graphics than the usual spring-layout graph.

Issue created by migration from https://trac.sagemath.org/ticket/18289





---

archive/issue_comments_242989.json:
```json
{
    "body": "Note that `__repr__` did not change:\n\n```\nsage: repr(graphs.RandomGNP(500,.2))\n'RandomGNP(500,0.200000000000000): Graph on 500 vertices'\n```\n\nThis is only about rich output, which is different from the standard `repr`.\n\nIf you want rich output of graphs to be just text then thats fine with me, but show() and pretty_print() will then also just be text.",
    "created_at": "2015-04-23T13:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242989",
    "user": "vbraun"
}
```

Note that `__repr__` did not change:

```
sage: repr(graphs.RandomGNP(500,.2))
'RandomGNP(500,0.200000000000000): Graph on 500 vertices'
```

This is only about rich output, which is different from the standard `repr`.

If you want rich output of graphs to be just text then thats fine with me, but show() and pretty_print() will then also just be text.



---

archive/issue_comments_242990.json:
```json
{
    "body": "I want the graphs to be printed as they were before. If you want to change the behaviour of .show() that will be a one-year deprecation warning, as usual. Please. You are making things very complicated for whoever uses graphs.\n\nNathann",
    "created_at": "2015-04-23T13:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242990",
    "user": "ncohen"
}
```

I want the graphs to be printed as they were before. If you want to change the behaviour of .show() that will be a one-year deprecation warning, as usual. Please. You are making things very complicated for whoever uses graphs.

Nathann



---

archive/issue_comments_242991.json:
```json
{
    "body": "We don't need deprecation for bugs. show() behaving different for graphs than for everything else is a bug.\n\nYou can still get graphical output, you'll just have to call graph.plot() instead of show(graph).",
    "created_at": "2015-04-23T13:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242991",
    "user": "vbraun"
}
```

We don't need deprecation for bugs. show() behaving different for graphs than for everything else is a bug.

You can still get graphical output, you'll just have to call graph.plot() instead of show(graph).



---

archive/issue_comments_242992.json:
```json
{
    "body": "I am not here to discuss whether `show` is implemented as it should, Volker. You changed the default output to plot graphs instead of displaying text, and I ask you to please revert that. It is very impractical for us. Please.\n\nNathann",
    "created_at": "2015-04-23T13:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242992",
    "user": "ncohen"
}
```

I am not here to discuss whether `show` is implemented as it should, Volker. You changed the default output to plot graphs instead of displaying text, and I ask you to please revert that. It is very impractical for us. Please.

Nathann



---

archive/issue_comments_242993.json:
```json
{
    "body": "I said already that I'm happy to do that if thats what you really want.",
    "created_at": "2015-04-23T13:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242993",
    "user": "vbraun"
}
```

I said already that I'm happy to do that if thats what you really want.



---

archive/issue_comments_242994.json:
```json
{
    "body": "I do not remember your saying that you would agree to *revert* those changes. If you did please excuse me, and please do that. Thank you,\n\nNathann",
    "created_at": "2015-04-23T13:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242994",
    "user": "ncohen"
}
```

I do not remember your saying that you would agree to *revert* those changes. If you did please excuse me, and please do that. Thank you,

Nathann



---

archive/issue_comments_242995.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-23T13:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242995",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_242996.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-23T13:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242996",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_242997.json:
```json
{
    "body": "Thanks,\n\nNathann",
    "created_at": "2015-04-23T13:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242997",
    "user": "ncohen"
}
```

Thanks,

Nathann



---

archive/issue_comments_242998.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-23T13:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242998",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_242999.json:
```json
{
    "body": "> This is only about rich output, which is different from the standard repr.\n\nFor the record, I think that most users will not understand this subtle difference.  I know that I don't.  What is \"rich output\", anyway?\n\nThat said, if you think it's a pretty nasty bug that `show` has different results for different object types, that could be worth discussing on sage-devel.  I guess for most non-plot objects I can think of, `show` does some LaTeXing, right?  And it seems reasonable to me to have different default outputs for\n\n```\nsage: Obj\n```\n\nfor different kinds of objects - a plot should be shown, a symbolic expression should just be printed, a matrix should be printed unless it's too big, etc., while\n\n```\nsage: Obj.show()\n```\n\nshould \"show\" the object in some meaningful way.  But maybe that's related to the `pretty_print`, which I never really used but maybe is becoming more important?\n\nSorry for this postscript, I just feel like there are some hairs being split here that are perhaps overly infinitesimally split already.",
    "created_at": "2015-04-23T14:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-242999",
    "user": "kcrisman"
}
```

> This is only about rich output, which is different from the standard repr.

For the record, I think that most users will not understand this subtle difference.  I know that I don't.  What is "rich output", anyway?

That said, if you think it's a pretty nasty bug that `show` has different results for different object types, that could be worth discussing on sage-devel.  I guess for most non-plot objects I can think of, `show` does some LaTeXing, right?  And it seems reasonable to me to have different default outputs for

```
sage: Obj
```

for different kinds of objects - a plot should be shown, a symbolic expression should just be printed, a matrix should be printed unless it's too big, etc., while

```
sage: Obj.show()
```

should "show" the object in some meaningful way.  But maybe that's related to the `pretty_print`, which I never really used but maybe is becoming more important?

Sorry for this postscript, I just feel like there are some hairs being split here that are perhaps overly infinitesimally split already.



---

archive/issue_comments_243000.json:
```json
{
    "body": "Rich output (`_rich_repr_`) is a hook for an object to provide more than just text output to the UI. \n\nThe functions show and pretty_print display the rich output immediately (like print), without waiting for the current computation to finish.\n\nThe `graph.show()` method does its own thing, though the graph plotting (wtf is `GraphPlot`) reinvents the wheel in slightly less round ways so often that I have lost count.",
    "created_at": "2015-04-23T14:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243000",
    "user": "vbraun"
}
```

Rich output (`_rich_repr_`) is a hook for an object to provide more than just text output to the UI. 

The functions show and pretty_print display the rich output immediately (like print), without waiting for the current computation to finish.

The `graph.show()` method does its own thing, though the graph plotting (wtf is `GraphPlot`) reinvents the wheel in slightly less round ways so often that I have lost count.



---

archive/issue_comments_243001.json:
```json
{
    "body": "> The `graph.show()` method does its own thing, though the graph plotting (wtf is `GraphPlot`) reinvents the wheel in slightly less round ways so often that I have lost count.\n\nI barely ever touched the file, except to add some doc and handle default options somewhat correctly. If you think that we can do without it by using some more general code I really have no objection to make.\n\nAbout the difference between show/pretty_print/repr, I have to agree with Karl-Dieter that I find the differences rather thin. Maybe `_rich_repr_` makes sense for latex output which would look better in the notebook, and would be impossible to read in the console? For graphs, however, there is no general way to have a 'readable/enlightenning' plot, so the best is probably to not represent it graphically unless requested explicitly.\n\nNathann",
    "created_at": "2015-04-23T14:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243001",
    "user": "ncohen"
}
```

> The `graph.show()` method does its own thing, though the graph plotting (wtf is `GraphPlot`) reinvents the wheel in slightly less round ways so often that I have lost count.

I barely ever touched the file, except to add some doc and handle default options somewhat correctly. If you think that we can do without it by using some more general code I really have no objection to make.

About the difference between show/pretty_print/repr, I have to agree with Karl-Dieter that I find the differences rather thin. Maybe `_rich_repr_` makes sense for latex output which would look better in the notebook, and would be impossible to read in the console? For graphs, however, there is no general way to have a 'readable/enlightenning' plot, so the best is probably to not represent it graphically unless requested explicitly.

Nathann



---

archive/issue_comments_243002.json:
```json
{
    "body": "Anyway, I don't have any skin in this game but just wanted to figure out what the game was even about.",
    "created_at": "2015-04-23T14:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243002",
    "user": "kcrisman"
}
```

Anyway, I don't have any skin in this game but just wanted to figure out what the game was even about.



---

archive/issue_comments_243003.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-04-23T14:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243003",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_243004.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-04-23T14:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243004",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_243005.json:
```json
{
    "body": "Hello,\n\nI arrive after the battle in this ticket since it took me some time to compile beta2. For some unknown reason, `make` results in the construction of `a tout of sage` in all languages. A bit too much. I should learn how to use it to speed up compilation.\n\nI'm happy that the automatic show this behavior has been removed. I'm playing with many graphs with (tens of) thousands of nodes, most of the times remotely on a server, and it is very annoying (and long) when the server tries to display an image...\n\nDavid.",
    "created_at": "2015-04-23T14:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243005",
    "user": "dcoudert"
}
```

Hello,

I arrive after the battle in this ticket since it took me some time to compile beta2. For some unknown reason, `make` results in the construction of `a tout of sage` in all languages. A bit too much. I should learn how to use it to speed up compilation.

I'm happy that the automatic show this behavior has been removed. I'm playing with many graphs with (tens of) thousands of nodes, most of the times remotely on a server, and it is very annoying (and long) when the server tries to display an image...

David.



---

archive/issue_comments_243006.json:
```json
{
    "body": "Thats why I proposed a size cutoff. IMHO it is truly helpful to students to see graphics if the graph is small. But then I don't really care that much.",
    "created_at": "2015-04-23T14:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243006",
    "user": "vbraun"
}
```

Thats why I proposed a size cutoff. IMHO it is truly helpful to students to see graphics if the graph is small. But then I don't really care that much.



---

archive/issue_comments_243007.json:
```json
{
    "body": "Here size does not matter. When you are like me working remotely, even small graphs could be a problem. I just had problems to close my ssh connection (from a standard mac book air with yosemite to a linux server). I had to kill it. I don't know what's going on, and I'm not sure I want to know...\n \nI understand that this behavior could be interesting for students working on the notebook, but not at all for me (working only in console mode).\nSo I'm glad it is removed.\n\nDavid.",
    "created_at": "2015-04-23T14:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243007",
    "user": "dcoudert"
}
```

Here size does not matter. When you are like me working remotely, even small graphs could be a problem. I just had problems to close my ssh connection (from a standard mac book air with yosemite to a linux server). I had to kill it. I don't know what's going on, and I'm not sure I want to know...
 
I understand that this behavior could be interesting for students working on the notebook, but not at all for me (working only in console mode).
So I'm glad it is removed.

David.



---

archive/issue_comments_243008.json:
```json
{
    "body": "Maybe you just want to turn graphics off (`%display graphics disable`) instead of making your ssh-over-300-baud-modem workflow the model for how a modern UI should operate.",
    "created_at": "2015-04-23T14:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243008",
    "user": "vbraun"
}
```

Maybe you just want to turn graphics off (`%display graphics disable`) instead of making your ssh-over-300-baud-modem workflow the model for how a modern UI should operate.



---

archive/issue_comments_243009.json:
```json
{
    "body": "> Thats why I proposed a size cutoff. IMHO it is truly helpful to students to see graphics if the graph is small. But then I don't really care that much.\n\nHMmmmmm... Well, I know that in the SMC, William changed the behavior of view(g) so that it is an alias of `g.show(method=\"js\")`. So somehow it is a bit easier to view graphs.\n\nNathann",
    "created_at": "2015-04-23T14:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243009",
    "user": "ncohen"
}
```

> Thats why I proposed a size cutoff. IMHO it is truly helpful to students to see graphics if the graph is small. But then I don't really care that much.

HMmmmmm... Well, I know that in the SMC, William changed the behavior of view(g) so that it is an alias of `g.show(method="js")`. So somehow it is a bit easier to view graphs.

Nathann



---

archive/issue_comments_243010.json:
```json
{
    "body": "Replying to [comment:19 vbraun]:\n> Maybe you just want to turn graphics off (`%display graphics disable`) instead of making your ssh-over-300-baud-modem workflow the model for how a modern UI should operate.\n\nSorry for being old-style, but it is very convenient for me to launch computations on a server remotely (ssh and screen), some of them lasting for days. I would really appreciate not to be forced to type extra commands at run time.\n\nDavid.",
    "created_at": "2015-04-23T15:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243010",
    "user": "dcoudert"
}
```

Replying to [comment:19 vbraun]:
> Maybe you just want to turn graphics off (`%display graphics disable`) instead of making your ssh-over-300-baud-modem workflow the model for how a modern UI should operate.

Sorry for being old-style, but it is very convenient for me to launch computations on a server remotely (ssh and screen), some of them lasting for days. I would really appreciate not to be forced to type extra commands at run time.

David.



---

archive/issue_comments_243011.json:
```json
{
    "body": "I think part of the problem is with putting potentially difficult things into magic methods, which to some extent is fixed for matrices. Rather than having `_latex_` and `_repr_` produce code for accurate representations, they should call some other method for doing it in simple cases and otherwise return a sensible summary about size/structure. Those who really want to typeset big objects can call those non-magic methods directly.\n\nAs for extra commands for researches vs. extra commands for students (and teachers who deal with these students!), I'd say that students are at least as big a target for Sage and the choice is not at all clear. Except that it tends to be way easier to teach extra commands to researches...",
    "created_at": "2015-04-23T15:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243011",
    "user": "novoselt"
}
```

I think part of the problem is with putting potentially difficult things into magic methods, which to some extent is fixed for matrices. Rather than having `_latex_` and `_repr_` produce code for accurate representations, they should call some other method for doing it in simple cases and otherwise return a sensible summary about size/structure. Those who really want to typeset big objects can call those non-magic methods directly.

As for extra commands for researches vs. extra commands for students (and teachers who deal with these students!), I'd say that students are at least as big a target for Sage and the choice is not at all clear. Except that it tends to be way easier to teach extra commands to researches...



---

archive/issue_comments_243012.json:
```json
{
    "body": "Replying to [comment:21 dcoudert]:\n> Sorry for being old-style, but it is very convenient for me to launch computations on a server remotely (ssh and screen), some of them lasting for days. I would really appreciate not to be forced to type extra commands at run time.\n\nTough, but IMHO that is not a use case that we should optimize the Sage user interface for at the expense of making it harder to use for novices.",
    "created_at": "2015-04-23T15:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243012",
    "user": "vbraun"
}
```

Replying to [comment:21 dcoudert]:
> Sorry for being old-style, but it is very convenient for me to launch computations on a server remotely (ssh and screen), some of them lasting for days. I would really appreciate not to be forced to type extra commands at run time.

Tough, but IMHO that is not a use case that we should optimize the Sage user interface for at the expense of making it harder to use for novices.



---

archive/issue_comments_243013.json:
```json
{
    "body": "> Tough, but IMHO that is not a use case that we should optimize the Sage user interface for at the expense of making it harder to use for novices.\n\nHey Hey... It is not exactly 'hard to use for novices'. We get a plot of a graph with `g.plot()`, `g.show()`, `plot(g)` and `show(g)`. It is not exactly like we go out of our way to hide stuff `:-P`\n\nNathann\n\nedit: show(g) actually prints some LaTeX code. I can't say that I see the point of that, and the choice of 'show' for such a thing is a bit mysterious to me.",
    "created_at": "2015-04-23T15:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243013",
    "user": "ncohen"
}
```

> Tough, but IMHO that is not a use case that we should optimize the Sage user interface for at the expense of making it harder to use for novices.

Hey Hey... It is not exactly 'hard to use for novices'. We get a plot of a graph with `g.plot()`, `g.show()`, `plot(g)` and `show(g)`. It is not exactly like we go out of our way to hide stuff `:-P`

Nathann

edit: show(g) actually prints some LaTeX code. I can't say that I see the point of that, and the choice of 'show' for such a thing is a bit mysterious to me.



---

archive/issue_comments_243014.json:
```json
{
    "body": "Note that the picture for\n\n```\nsage: Graph()\n```\n\nwas especially helpful! I am glad this gets reverted.\n\nVincent",
    "created_at": "2015-04-23T15:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243014",
    "user": "vdelecroix"
}
```

Note that the picture for

```
sage: Graph()
```

was especially helpful! I am glad this gets reverted.

Vincent



---

archive/issue_comments_243015.json:
```json
{
    "body": "Maybe you also want to complain about `Graphics()` being useless output?",
    "created_at": "2015-04-23T15:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243015",
    "user": "vbraun"
}
```

Maybe you also want to complain about `Graphics()` being useless output?



---

archive/issue_comments_243016.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> edit: show(g) actually prints some LaTeX code. I can't say that I see the point of that, and the choice of 'show' for such a thing is a bit mysterious to me.\n\nThe show() function prints latex for objects that do not define rich output, under the assumption that you didn't want text output since you could have had that without show().",
    "created_at": "2015-04-23T15:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243016",
    "user": "vbraun"
}
```

Replying to [comment:24 ncohen]:
> edit: show(g) actually prints some LaTeX code. I can't say that I see the point of that, and the choice of 'show' for such a thing is a bit mysterious to me.

The show() function prints latex for objects that do not define rich output, under the assumption that you didn't want text output since you could have had that without show().



---

archive/issue_comments_243017.json:
```json
{
    "body": "> The show() function prints latex for objects that do not define rich output, under the assumption that you didn't want text output since you could have had that without show().\n\nIs it a good idea? I mean, having `show(<something>)` output LaTeX code? We have a `latex(<something>)` already. Also, 'show me a graph' is probably better answered with a picture than with code that you have to copy/paste in a file, before compiling it.",
    "created_at": "2015-04-23T16:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243017",
    "user": "ncohen"
}
```

> The show() function prints latex for objects that do not define rich output, under the assumption that you didn't want text output since you could have had that without show().

Is it a good idea? I mean, having `show(<something>)` output LaTeX code? We have a `latex(<something>)` already. Also, 'show me a graph' is probably better answered with a picture than with code that you have to copy/paste in a file, before compiling it.



---

archive/issue_comments_243018.json:
```json
{
    "body": "> Maybe you also want to complain about `Graphics()` being useless output?\n\nNaturally that is sarcastic, but one can point out that it's hard to imagine someone wanting non-graphical output for a graphic, while for a graph it's not really clear one wants a picture of the graph.  I also like\n\n```\nsage: Graphics().show(xmin=-20,xmax=20)\n```\n\n\n> s it a good idea? I mean, having show(<something>) output LaTeX code?\n\nI think it outputs LaTeXed output, not the actual code for the LaTeX, just to be clear.",
    "created_at": "2015-04-23T16:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243018",
    "user": "kcrisman"
}
```

> Maybe you also want to complain about `Graphics()` being useless output?

Naturally that is sarcastic, but one can point out that it's hard to imagine someone wanting non-graphical output for a graphic, while for a graph it's not really clear one wants a picture of the graph.  I also like

```
sage: Graphics().show(xmin=-20,xmax=20)
```


> s it a good idea? I mean, having show(<something>) output LaTeX code?

I think it outputs LaTeXed output, not the actual code for the LaTeX, just to be clear.



---

archive/issue_comments_243019.json:
```json
{
    "body": "Replying to [comment:28 ncohen]:\n> Is it a good idea? I mean, having `show(<something>)` output LaTeX code?\n\nAs I said, its IMHO not a good idea to not make use of the rich output for graphs. But apparently we can't agree on the time of the day here. Meanwhile, William can make SMC user-friendly. Maybe we should just send all new users there and not have them download free software to their own computers.",
    "created_at": "2015-04-23T16:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243019",
    "user": "vbraun"
}
```

Replying to [comment:28 ncohen]:
> Is it a good idea? I mean, having `show(<something>)` output LaTeX code?

As I said, its IMHO not a good idea to not make use of the rich output for graphs. But apparently we can't agree on the time of the day here. Meanwhile, William can make SMC user-friendly. Maybe we should just send all new users there and not have them download free software to their own computers.



---

archive/issue_comments_243020.json:
```json
{
    "body": "> As I said, its IMHO not a good idea to not make use of the rich output for graphs. But apparently we can't agree on the time of the day here.\n\nIt is very easy to get a graphical representation of a graph in Sage. This being said, we also need the basic feature of \"typing the name of an object in order to see what exactly it is\". And for this a string description (possibly indicating the name of the graph) is a good thing.\n\n> Meanwhile, William can make SMC user-friendly. Maybe we should just send all new users there and not have them download free software to their own computers.\n\nWilliam's work these days is apparently totally dedicated to the user interface problems. He  tries to gather money to this aim, tries to hire people to do that, while we implement new mathematical features, fix the bugs, i.e. make this thing good and reliable for what we need. I regret it very often that he takes whatever he needs from us, improves what he likes for his own ends and does not contribute *back* to the project. He must have found thousands of bugs, imperfections and inconsistencies.",
    "created_at": "2015-04-23T16:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243020",
    "user": "ncohen"
}
```

> As I said, its IMHO not a good idea to not make use of the rich output for graphs. But apparently we can't agree on the time of the day here.

It is very easy to get a graphical representation of a graph in Sage. This being said, we also need the basic feature of "typing the name of an object in order to see what exactly it is". And for this a string description (possibly indicating the name of the graph) is a good thing.

> Meanwhile, William can make SMC user-friendly. Maybe we should just send all new users there and not have them download free software to their own computers.

William's work these days is apparently totally dedicated to the user interface problems. He  tries to gather money to this aim, tries to hire people to do that, while we implement new mathematical features, fix the bugs, i.e. make this thing good and reliable for what we need. I regret it very often that he takes whatever he needs from us, improves what he likes for his own ends and does not contribute *back* to the project. He must have found thousands of bugs, imperfections and inconsistencies.



---

archive/issue_comments_243021.json:
```json
{
    "body": "P.S.: Apparently `show(graphs.PetersenGraph())` does not always produce the same output: Karl-Dieter sees a png picture, and I only see LaTeX code being printed in the console. Same version of Sage. He runs mac, I run debian.",
    "created_at": "2015-04-23T16:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243021",
    "user": "ncohen"
}
```

P.S.: Apparently `show(graphs.PetersenGraph())` does not always produce the same output: Karl-Dieter sees a png picture, and I only see LaTeX code being printed in the console. Same version of Sage. He runs mac, I run debian.



---

archive/issue_comments_243022.json:
```json
{
    "body": "Without this branch, `show(graphs.PetersenGraph())` displays a picture on sage-6.7.beta2. With it there is no picture.",
    "created_at": "2015-04-23T17:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243022",
    "user": "vbraun"
}
```

Without this branch, `show(graphs.PetersenGraph())` displays a picture on sage-6.7.beta2. With it there is no picture.



---

archive/issue_comments_243023.json:
```json
{
    "body": "Replying to [comment:31 ncohen]:\n> I regret it very often that he takes whatever he needs from us, improves what he likes for his own ends and does not contribute *back* to the project.\n\nDid it ever occur to you that he can't do that because whenever one tries to improve output somebody starts a week-long email thread because they don't like more verbose  output / it doesn't fit into their workflow of using sage over a super-slow network connection and they can't be bothered to turn graphics off?",
    "created_at": "2015-04-23T17:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243023",
    "user": "vbraun"
}
```

Replying to [comment:31 ncohen]:
> I regret it very often that he takes whatever he needs from us, improves what he likes for his own ends and does not contribute *back* to the project.

Did it ever occur to you that he can't do that because whenever one tries to improve output somebody starts a week-long email thread because they don't like more verbose  output / it doesn't fit into their workflow of using sage over a super-slow network connection and they can't be bothered to turn graphics off?



---

archive/issue_comments_243024.json:
```json
{
    "body": "> Without this branch, `show(graphs.PetersenGraph())` displays a picture on sage-6.7.beta2. With it there is no picture.\nJust confirming that I get a graph in 6.5 and 6.7.beta2; I haven't tried this one.  Is it possibly platform-dependent, or perhaps dependent upon some env var about how to automatically display pngs or something?",
    "created_at": "2015-04-23T17:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243024",
    "user": "kcrisman"
}
```

> Without this branch, `show(graphs.PetersenGraph())` displays a picture on sage-6.7.beta2. With it there is no picture.
Just confirming that I get a graph in 6.5 and 6.7.beta2; I haven't tried this one.  Is it possibly platform-dependent, or perhaps dependent upon some env var about how to automatically display pngs or something?



---

archive/issue_comments_243025.json:
```json
{
    "body": "Volker, if this branch indeed makes `show(g)` output LaTeX code, then could you revert this change too? It is a regression.",
    "created_at": "2015-04-24T06:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243025",
    "user": "ncohen"
}
```

Volker, if this branch indeed makes `show(g)` output LaTeX code, then could you revert this change too? It is a regression.



---

archive/issue_comments_243026.json:
```json
{
    "body": "Replying to [comment:34 vbraun]:\n> Did it ever occur to you that he can't do that because whenever one tries to improve output somebody starts a week-long email thread because they don't like more verbose  output / it doesn't fit into their workflow of using sage over a super-slow network connection and they can't be bothered to turn graphics off?\n\nI didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?\nAlso, when you travel, you frequently have to use super-slow connections or connections with volume constraints (e.g. a few MB per day). You then try to limit the amount of data you transmit. It happens to me last week in Chile, and now I hate automatic system updates.",
    "created_at": "2015-04-24T08:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243026",
    "user": "dcoudert"
}
```

Replying to [comment:34 vbraun]:
> Did it ever occur to you that he can't do that because whenever one tries to improve output somebody starts a week-long email thread because they don't like more verbose  output / it doesn't fit into their workflow of using sage over a super-slow network connection and they can't be bothered to turn graphics off?

I didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?
Also, when you travel, you frequently have to use super-slow connections or connections with volume constraints (e.g. a few MB per day). You then try to limit the amount of data you transmit. It happens to me last week in Chile, and now I hate automatic system updates.



---

archive/issue_comments_243027.json:
```json
{
    "body": "https://groups.google.com/d/msg/sage-release/C0bw1IA7g58/rqWiN_LdysQJ",
    "created_at": "2015-04-24T09:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243027",
    "user": "ncohen"
}
```

https://groups.google.com/d/msg/sage-release/C0bw1IA7g58/rqWiN_LdysQJ



---

archive/issue_comments_243028.json:
```json
{
    "body": "Replying to [comment:37 dcoudert]:\n> I didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?\n\nSage loads `~/.sage/init.sage` on startup, so you just have to put `%display graphics disable` in there to turn it off by default.",
    "created_at": "2015-04-24T22:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243028",
    "user": "vbraun"
}
```

Replying to [comment:37 dcoudert]:
> I didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?

Sage loads `~/.sage/init.sage` on startup, so you just have to put `%display graphics disable` in there to turn it off by default.



---

archive/issue_comments_243029.json:
```json
{
    "body": "About the speed of plots for graphs: after some profiling it seems that the computation of positions is not at fault. All I see for the moment is that the time is taken by the matplotlib primitives. I'll continue looking.\n\nVolker, could you fix this regression?\n\nNathann",
    "created_at": "2015-04-25T06:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243029",
    "user": "ncohen"
}
```

About the speed of plots for graphs: after some profiling it seems that the computation of positions is not at fault. All I see for the moment is that the time is taken by the matplotlib primitives. I'll continue looking.

Volker, could you fix this regression?

Nathann



---

archive/issue_comments_243030.json:
```json
{
    "body": "So whats the preferred behavior:\n* Show graphs as picture (if the graph is small)\n* Do not participate in rich output, graphs cannot be shown as picture (unless you plot them)\n* Keep the inconsistent behavior bug-for-bug where `show(graph)` does something different than the displayhook, and leave graphs as the only object in Sage that does not work.",
    "created_at": "2015-04-25T12:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243030",
    "user": "vbraun"
}
```

So whats the preferred behavior:
* Show graphs as picture (if the graph is small)
* Do not participate in rich output, graphs cannot be shown as picture (unless you plot them)
* Keep the inconsistent behavior bug-for-bug where `show(graph)` does something different than the displayhook, and leave graphs as the only object in Sage that does not work.



---

archive/issue_comments_243031.json:
```json
{
    "body": "> So whats the preferred behavior:\n> * Show graphs as picture (if the graph is small)\n> * Do not participate in rich output, graphs cannot be shown as picture (unless you plot them)\n> * Keep the inconsistent behavior bug-for-bug where `show(graph)` does something different than the displayhook, and leave graphs as the only object in Sage that does not work.\n\nWithout addressing the actual implementation, it seems rather clear to me that whoever types `show(a_graph)` wants a picture of it.\n\nThe problem with graphs is that it is potentially very slow to plot them (apparently because of matplotlib), but in general there is not \"one good drawing\" of a graph. Moreover, at the moment the default plotting algorithm will give you a different drawing every time you call it.\n\nHaving a different behaviour depending on the size of the graph does not look good to me either, for it is not like for matrices where you see the whole matrix or just a one-line description: indeed, for graphs it would open a new windows (with a picture) in some cases or print a line of text.\n\nAll in all, having `show(a_graph)` display the TikZ/LaTeX code of the graph is definitely not what we would expect from the command.\n\nNathann",
    "created_at": "2015-04-25T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243031",
    "user": "ncohen"
}
```

> So whats the preferred behavior:
> * Show graphs as picture (if the graph is small)
> * Do not participate in rich output, graphs cannot be shown as picture (unless you plot them)
> * Keep the inconsistent behavior bug-for-bug where `show(graph)` does something different than the displayhook, and leave graphs as the only object in Sage that does not work.

Without addressing the actual implementation, it seems rather clear to me that whoever types `show(a_graph)` wants a picture of it.

The problem with graphs is that it is potentially very slow to plot them (apparently because of matplotlib), but in general there is not "one good drawing" of a graph. Moreover, at the moment the default plotting algorithm will give you a different drawing every time you call it.

Having a different behaviour depending on the size of the graph does not look good to me either, for it is not like for matrices where you see the whole matrix or just a one-line description: indeed, for graphs it would open a new windows (with a picture) in some cases or print a line of text.

All in all, having `show(a_graph)` display the TikZ/LaTeX code of the graph is definitely not what we would expect from the command.

Nathann



---

archive/issue_comments_243032.json:
```json
{
    "body": "But when the user types\n\n```\nsage: g = compute_some_graph()\nsage: g\n```\n\nthen they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.\n\nUnrelated to this ticket, but I agree that we don't want huge tikz output. Maybe the `._latex_()` method isn't the right place to spit that out anyways. E.g. open the SageNB notebook, tick the \"typeset\" checkbox, and then run `graphs.RandomGNP(500,.2)`. Bonus points if you can guess correctly what happens without trying it out (I could not)",
    "created_at": "2015-04-25T13:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243032",
    "user": "vbraun"
}
```

But when the user types

```
sage: g = compute_some_graph()
sage: g
```

then they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.

Unrelated to this ticket, but I agree that we don't want huge tikz output. Maybe the `._latex_()` method isn't the right place to spit that out anyways. E.g. open the SageNB notebook, tick the "typeset" checkbox, and then run `graphs.RandomGNP(500,.2)`. Bonus points if you can guess correctly what happens without trying it out (I could not)



---

archive/issue_comments_243033.json:
```json
{
    "body": "Replying to [comment:43 vbraun]:\n> But when the user types\n> {{{\n> sage: g = compute_some_graph()\n> sage: g\n> }}}\n> then they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.\n\nI would say:\n- always no in the console\n- yes in a notebook iff the graph is not empty and have less than 20 vertices",
    "created_at": "2015-04-25T13:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243033",
    "user": "vdelecroix"
}
```

Replying to [comment:43 vbraun]:
> But when the user types
> {{{
> sage: g = compute_some_graph()
> sage: g
> }}}
> then they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.

I would say:
- always no in the console
- yes in a notebook iff the graph is not empty and have less than 20 vertices



---

archive/issue_comments_243034.json:
```json
{
    "body": "> But when the user types\n> {{{\n> sage: g = compute_some_graph()\n> sage: g\n> }}}\n> then they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.\n\nA plot is just 'one representation' of a graph. Like for posets, for matrices (they have a .plot too). I type 'g' very often just to see whether this variable that is named 'g' in indeed a graph (as you would for any other Python object), but also because it tells me whether that graph allows multiple edges or loops.\n\nThis being said, like Vincent I expect that the expected behaviour is different in the notebook. If you want to improve that side of the interface, however, I believe that it might be better to output *both* in the notebook:\n- The one-line description that we have in the console\n- A drawing\n\nOf course, not being able to plot large graphs is a problem. So like for matrices, perhaps a size limit may be good.. But really, most graphs do *NOT* look good when you plot them, and the result may appear very very very unprofessional, which is probably something you want to avoid:\n\n\n```\nsage: graphs.RandomGNP(50,.5).show()\n```\n\n\nPerhaps the default layout can be slightly improved, but I have no idea how to solve the performance problem with matplotlib.\n\n> Unrelated to this ticket, but I agree that we don't want huge tikz output.\n\nWhy is that unrelated to this ticket? Didn't you say that this change (from picture to latex output) had been made by #17821?\n\n> Bonus points if you can guess correctly what happens without trying it out (I could not)\n\nWith this branch applied it gives me the latex code `O_o`\n\nNathann",
    "created_at": "2015-04-25T13:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243034",
    "user": "ncohen"
}
```

> But when the user types
> {{{
> sage: g = compute_some_graph()
> sage: g
> }}}
> then they do not want a picture? The displayhook is just an implicit way of telling the UI to show something.

A plot is just 'one representation' of a graph. Like for posets, for matrices (they have a .plot too). I type 'g' very often just to see whether this variable that is named 'g' in indeed a graph (as you would for any other Python object), but also because it tells me whether that graph allows multiple edges or loops.

This being said, like Vincent I expect that the expected behaviour is different in the notebook. If you want to improve that side of the interface, however, I believe that it might be better to output *both* in the notebook:
- The one-line description that we have in the console
- A drawing

Of course, not being able to plot large graphs is a problem. So like for matrices, perhaps a size limit may be good.. But really, most graphs do *NOT* look good when you plot them, and the result may appear very very very unprofessional, which is probably something you want to avoid:


```
sage: graphs.RandomGNP(50,.5).show()
```


Perhaps the default layout can be slightly improved, but I have no idea how to solve the performance problem with matplotlib.

> Unrelated to this ticket, but I agree that we don't want huge tikz output.

Why is that unrelated to this ticket? Didn't you say that this change (from picture to latex output) had been made by #17821?

> Bonus points if you can guess correctly what happens without trying it out (I could not)

With this branch applied it gives me the latex code `O_o`

Nathann



---

archive/issue_comments_243035.json:
```json
{
    "body": "Replying to [comment:39 vbraun]:\n> Replying to [comment:37 dcoudert]:\n> > I didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?\n> \n> Sage loads `~/.sage/init.sage` on startup, so you just have to put `%display graphics disable` in there to turn it off by default.\n\nThanks a lot!",
    "created_at": "2015-04-25T13:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243035",
    "user": "dcoudert"
}
```

Replying to [comment:39 vbraun]:
> Replying to [comment:37 dcoudert]:
> > I didn't know that it was possible to turn graphics off. Is there a way to turn it off by default?
> 
> Sage loads `~/.sage/init.sage` on startup, so you just have to put `%display graphics disable` in there to turn it off by default.

Thanks a lot!



---

archive/issue_comments_243036.json:
```json
{
    "body": "Replying to [comment:45 ncohen]:\n> Why is that unrelated to this ticket? Didn't you say that this change (from picture to latex output) had been made by #17821?\n\nWith this branch you actually notice that the latex output is unwieldy. But SageNB + typeset checked has suffered from that for a long time, and that is not related to this ticket or the rich output framework.",
    "created_at": "2015-04-25T13:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243036",
    "user": "vbraun"
}
```

Replying to [comment:45 ncohen]:
> Why is that unrelated to this ticket? Didn't you say that this change (from picture to latex output) had been made by #17821?

With this branch you actually notice that the latex output is unwieldy. But SageNB + typeset checked has suffered from that for a long time, and that is not related to this ticket or the rich output framework.



---

archive/issue_comments_243037.json:
```json
{
    "body": "> With this branch you actually notice that the latex output is unwieldy. But SageNB + typeset checked has suffered from that for a long time, and that is not related to this ticket or the rich output framework.\n\nI do not understand: before #17821 the syntax `show(a_graph)` worked fine in the console, and now it print latex code to the screen. Surely you will agree that this is a regression that must be fixed?",
    "created_at": "2015-04-25T14:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243037",
    "user": "ncohen"
}
```

> With this branch you actually notice that the latex output is unwieldy. But SageNB + typeset checked has suffered from that for a long time, and that is not related to this ticket or the rich output framework.

I do not understand: before #17821 the syntax `show(a_graph)` worked fine in the console, and now it print latex code to the screen. Surely you will agree that this is a regression that must be fixed?



---

archive/issue_comments_243038.json:
```json
{
    "body": "I disagree that it \"worked fine\", showing a graph explicitly (immediately) and via the displayhook resulted in two different behaviors. In particular you couldn't output the displayhook format programmatically, for example in `@`interact. Of course one could get text output but not in a uniform way that would also work with other Sage objects.",
    "created_at": "2015-04-25T14:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243038",
    "user": "vbraun"
}
```

I disagree that it "worked fine", showing a graph explicitly (immediately) and via the displayhook resulted in two different behaviors. In particular you couldn't output the displayhook format programmatically, for example in `@`interact. Of course one could get text output but not in a uniform way that would also work with other Sage objects.



---

archive/issue_comments_243039.json:
```json
{
    "body": "Before #17821 typing `show(a_graph)` in the console displayed a picture. Now it fills your screen with latex code. You broke it, so now please fix it.",
    "created_at": "2015-04-25T14:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243039",
    "user": "ncohen"
}
```

Before #17821 typing `show(a_graph)` in the console displayed a picture. Now it fills your screen with latex code. You broke it, so now please fix it.



---

archive/issue_comments_243040.json:
```json
{
    "body": "> Now it fills your screen with latex code. You broke it, so now please fix it.\n(Pretty please with sugar on top, right?)",
    "created_at": "2015-04-25T15:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243040",
    "user": "kcrisman"
}
```

> Now it fills your screen with latex code. You broke it, so now please fix it.
(Pretty please with sugar on top, right?)



---

archive/issue_comments_243041.json:
```json
{
    "body": "As I said before, the fact that `graph._latex_()` spews endless tikz code (that often fails to compile, breaking SageNB) is an unrelated bug. It should output something like $G_{123}$ that actually can be displayed for reasonably large graphs.\n\nAs for things that are actually on-topic, I suggest we make a new display preference `plot_graphs` with values `yes`, `no`, `cutoff` (feel free to suggest other names). Then graphs and other graph-like objects (e.g. posets) can use that to decide how to show themselves. The commandline would default to `no`, others to `cutoff`.",
    "created_at": "2015-04-25T16:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243041",
    "user": "vbraun"
}
```

As I said before, the fact that `graph._latex_()` spews endless tikz code (that often fails to compile, breaking SageNB) is an unrelated bug. It should output something like $G_{123}$ that actually can be displayed for reasonably large graphs.

As for things that are actually on-topic, I suggest we make a new display preference `plot_graphs` with values `yes`, `no`, `cutoff` (feel free to suggest other names). Then graphs and other graph-like objects (e.g. posets) can use that to decide how to show themselves. The commandline would default to `no`, others to `cutoff`.



---

archive/issue_comments_243042.json:
```json
{
    "body": "Here is a branch which implements a vertex cut off and \n\n```\nsage: %display plot_graphs never\n```\n\nwhich is the default on the commandline and doctests. \n----\nNew commits:",
    "created_at": "2015-04-26T00:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243042",
    "user": "vbraun"
}
```

Here is a branch which implements a vertex cut off and 

```
sage: %display plot_graphs never
```

which is the default on the commandline and doctests. 
----
New commits:



---

archive/issue_comments_243043.json:
```json
{
    "body": "I've opened #18302 to deprecate (or warn against) the `show()` function",
    "created_at": "2015-04-26T01:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243043",
    "user": "vbraun"
}
```

I've opened #18302 to deprecate (or warn against) the `show()` function



---

archive/issue_comments_243044.json:
```json
{
    "body": "Replying to [comment:52 vbraun]:\n> As I said before, the fact that `graph._latex_()` spews endless tikz code (that often fails to compile, breaking SageNB) is an unrelated bug. It should output something like $G_{123}$ that actually can be displayed for reasonably large graphs.\n\nI might be completely misunderstanding things, but would like to make sure: easy access to the tikz code is very very very important to me.  Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.",
    "created_at": "2015-04-26T06:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243044",
    "user": "mantepse"
}
```

Replying to [comment:52 vbraun]:
> As I said before, the fact that `graph._latex_()` spews endless tikz code (that often fails to compile, breaking SageNB) is an unrelated bug. It should output something like $G_{123}$ that actually can be displayed for reasonably large graphs.

I might be completely misunderstanding things, but would like to make sure: easy access to the tikz code is very very very important to me.  Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.



---

archive/issue_comments_243045.json:
```json
{
    "body": "> I might be completely misunderstanding things, but would like to make sure: easy access to the tikz code is very very very important to me.  Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.\n\nThe key to the non-discussion above is this:\n\n\n```\nsage: show is pretty_print\nTrue\n```\n\n\nThat `show` is an alias for `pretty_print` is a problem here, for `show(g)` seems to indicate a plot while `pretty_print(g)` seems to indicate the kind of latex representation that Volker wants.\n\nEven though `show(g)` is indeed used frequently (Volker removes those doctests in this branch), it is definitely hard to do anything coherent when two functions with such different meanings are aliases of each other.\n\nSoooooooo well. If we can solve the problem by deprecating the `show` alias, and if in the meantime it still displays a plot for graphs while hinting at `Graph.show` or `Graph.plot`, then nobody will be lost. What do you think?\n\nNathann",
    "created_at": "2015-04-26T06:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243045",
    "user": "ncohen"
}
```

> I might be completely misunderstanding things, but would like to make sure: easy access to the tikz code is very very very important to me.  Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.

The key to the non-discussion above is this:


```
sage: show is pretty_print
True
```


That `show` is an alias for `pretty_print` is a problem here, for `show(g)` seems to indicate a plot while `pretty_print(g)` seems to indicate the kind of latex representation that Volker wants.

Even though `show(g)` is indeed used frequently (Volker removes those doctests in this branch), it is definitely hard to do anything coherent when two functions with such different meanings are aliases of each other.

Soooooooo well. If we can solve the problem by deprecating the `show` alias, and if in the meantime it still displays a plot for graphs while hinting at `Graph.show` or `Graph.plot`, then nobody will be lost. What do you think?

Nathann



---

archive/issue_comments_243046.json:
```json
{
    "body": "I don't understand.  On my sage, I have\n\n\n```\nsage: show is pretty_print\nFalse\n```\n\nand I do not really see a reason why `show` should be `pretty_print`.  I would expect (depending on the situation) different things from these two commands.\n\nPlease enlighten me, if you still have hope for me :-)",
    "created_at": "2015-04-26T18:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243046",
    "user": "mantepse"
}
```

I don't understand.  On my sage, I have


```
sage: show is pretty_print
False
```

and I do not really see a reason why `show` should be `pretty_print`.  I would expect (depending on the situation) different things from these two commands.

Please enlighten me, if you still have hope for me :-)



---

archive/issue_comments_243047.json:
```json
{
    "body": "Replying to [comment:58 mantepse]:\n> I don't understand.  On my sage, I have\n> \n> {{{\n> sage: show is pretty_print\n> False\n> }}}\n> and I do not really see a reason why `show` should be `pretty_print`.  I would expect (depending on the situation) different things from these two commands.\n> \n> Please enlighten me, if you still have hope for me :-)\n\nWhich version are you running? In sage-6.7.beta2 (console) I got `True` as well.\n\nVincent",
    "created_at": "2015-04-26T18:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243047",
    "user": "vdelecroix"
}
```

Replying to [comment:58 mantepse]:
> I don't understand.  On my sage, I have
> 
> {{{
> sage: show is pretty_print
> False
> }}}
> and I do not really see a reason why `show` should be `pretty_print`.  I would expect (depending on the situation) different things from these two commands.
> 
> Please enlighten me, if you still have hope for me :-)

Which version are you running? In sage-6.7.beta2 (console) I got `True` as well.

Vincent



---

archive/issue_comments_243048.json:
```json
{
    "body": "sage-6.5.  OK, it's a recent change, that's why I didn't understand.  Sorry about that, I only saw understood what #17821 does now.  I guess it's too late now to complain :-)\n\n(In case it clarifies - my expectations would be:\n\n* `show`: open an external viewer if sensible, i.e., for graphs, posets, graphics, etc.\n* `pretty_print`: try to print as nicely as possible in the current environment.  I guess that this function should depend on context.  I exclusively use emacs in which case I'd expect it to use ascii-art when available.\n* `latex`: return a latex string that I can copy-paste into a paper.\n\n(I think that `plot` is not really a good name for showing a graph in an external viewer.  I never plot graphs :-)",
    "created_at": "2015-04-26T18:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243048",
    "user": "mantepse"
}
```

sage-6.5.  OK, it's a recent change, that's why I didn't understand.  Sorry about that, I only saw understood what #17821 does now.  I guess it's too late now to complain :-)

(In case it clarifies - my expectations would be:

* `show`: open an external viewer if sensible, i.e., for graphs, posets, graphics, etc.
* `pretty_print`: try to print as nicely as possible in the current environment.  I guess that this function should depend on context.  I exclusively use emacs in which case I'd expect it to use ascii-art when available.
* `latex`: return a latex string that I can copy-paste into a paper.

(I think that `plot` is not really a good name for showing a graph in an external viewer.  I never plot graphs :-)



---

archive/issue_comments_243049.json:
```json
{
    "body": "Well thats certainly yet another variant of the difference between show and pretty_print. I don't understand how the name `show` suggests that it has something to do with whether an external viewer is launched. Also, in the notebook there are no external viewers yet `show` and `pretty_print` still were subtly different (not in useful or predictable ways, though)\n\nOne of the meanings of \"plot\" is: a plan, map, diagram, or other graphic representation, as of land, a building, etc. Doesn't sound like such a bad fit to me. Though feel free to suggest a better name.",
    "created_at": "2015-04-26T23:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243049",
    "user": "vbraun"
}
```

Well thats certainly yet another variant of the difference between show and pretty_print. I don't understand how the name `show` suggests that it has something to do with whether an external viewer is launched. Also, in the notebook there are no external viewers yet `show` and `pretty_print` still were subtly different (not in useful or predictable ways, though)

One of the meanings of "plot" is: a plan, map, diagram, or other graphic representation, as of land, a building, etc. Doesn't sound like such a bad fit to me. Though feel free to suggest a better name.



---

archive/issue_comments_243050.json:
```json
{
    "body": "Replying to [comment:56 mantepse]:\n> Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.\n\n* `latex(g)` just calls `g._latex_()`, so they are equivalent\n* We should certainly have a way to get the tikz code. \n* The problem is that if you click the \"typeset\" checkbox in SageNB then it calls `latex()` for every output. But typesetting tikz often fails, resulting in a quite broken notebook. For large-ish graphs we shouldn't go that route in the displayhook.\n\nThe two logical options are either \n* move the tikz output, something like `graph.plot(format='tikz')`, or\n* not call `graph._latex_()` when typesetting output, for example implementing a different latex view it in `graph._rich_repr_()`",
    "created_at": "2015-04-27T00:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243050",
    "user": "vbraun"
}
```

Replying to [comment:56 mantepse]:
> Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.

* `latex(g)` just calls `g._latex_()`, so they are equivalent
* We should certainly have a way to get the tikz code. 
* The problem is that if you click the "typeset" checkbox in SageNB then it calls `latex()` for every output. But typesetting tikz often fails, resulting in a quite broken notebook. For large-ish graphs we shouldn't go that route in the displayhook.

The two logical options are either 
* move the tikz output, something like `graph.plot(format='tikz')`, or
* not call `graph._latex_()` when typesetting output, for example implementing a different latex view it in `graph._rich_repr_()`



---

archive/issue_comments_243051.json:
```json
{
    "body": "With the addition of `_rich_repr_`, perhaps we should have in the guidelines that `_latex_` and `_plot_` always produce \"full object\" no matter how likely it is to be useful, while `_rich_repr_` makes a decision about truncating large objects and picking graphics over formula or returning some incomplete description like latexed count of vertices and edges. There have to be, of course, some easy way to programmatically force calls of `_latex_` or `_plot_` without direct use of underscore methods. I guess with the new system we get `pretty_print(latex(x))` and `pretty_print(plot(x))`.\n\nAnd I have to admit that `show(latex(x))` and `show(plot(x))` are more natural - perhaps we can have new function `show` that will do what it says - show a given LaTeX, graphics, or HTML expression, without trying to decide what to do with other types. `display` is another suitable name that will match dispayhook terminology nicely.",
    "created_at": "2015-04-27T00:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243051",
    "user": "novoselt"
}
```

With the addition of `_rich_repr_`, perhaps we should have in the guidelines that `_latex_` and `_plot_` always produce "full object" no matter how likely it is to be useful, while `_rich_repr_` makes a decision about truncating large objects and picking graphics over formula or returning some incomplete description like latexed count of vertices and edges. There have to be, of course, some easy way to programmatically force calls of `_latex_` or `_plot_` without direct use of underscore methods. I guess with the new system we get `pretty_print(latex(x))` and `pretty_print(plot(x))`.

And I have to admit that `show(latex(x))` and `show(plot(x))` are more natural - perhaps we can have new function `show` that will do what it says - show a given LaTeX, graphics, or HTML expression, without trying to decide what to do with other types. `display` is another suitable name that will match dispayhook terminology nicely.



---

archive/issue_comments_243052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-27T01:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243053.json:
```json
{
    "body": "In the last commit I special-cased latex rich output. Now at least the notebook is usable with `%display latex` turned on...",
    "created_at": "2015-04-27T01:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243053",
    "user": "vbraun"
}
```

In the last commit I special-cased latex rich output. Now at least the notebook is usable with `%display latex` turned on...



---

archive/issue_comments_243054.json:
```json
{
    "body": "Hello Volker,\n\nThis ticket is about reverting the changes from #17821, and your last commits are adding customization to the 'pretty_print' output. Could we stick to the subject, and could you add this (deprecated) show function which behaves like `show(a_graph)` used to behave (with a deprecation of course)?\n\nThanks,\n\nNathann",
    "created_at": "2015-04-27T06:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243054",
    "user": "ncohen"
}
```

Hello Volker,

This ticket is about reverting the changes from #17821, and your last commits are adding customization to the 'pretty_print' output. Could we stick to the subject, and could you add this (deprecated) show function which behaves like `show(a_graph)` used to behave (with a deprecation of course)?

Thanks,

Nathann



---

archive/issue_comments_243055.json:
```json
{
    "body": "Replying to [comment:62 vbraun]:\n> Replying to [comment:56 mantepse]:\n> > Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.\n> \n> * `latex(g)` just calls `g._latex_()`, so they are equivalent\n> * We should certainly have a way to get the tikz code. \n> * The problem is that if you click the \"typeset\" checkbox in SageNB then it calls `latex()` for every output. But typesetting tikz often fails, resulting in a quite broken notebook. For large-ish graphs we shouldn't go that route in the displayhook.\n> \n> The two logical options are either \n> * move the tikz output, something like `graph.plot(format='tikz')`, or\n> * not call `graph._latex_()` when typesetting output, for example implementing a different latex view it in `graph._rich_repr_()`\n\nSince a SageNB user will hardly type `latex` by hand (I'm not using the notebook, so I'm guessing), why should `latex` print anything but code useful for inclusion in a paper?\n\nI think it's hardly possible to reuse output functionality too much, since the use cases are quite diverse.  So, if I understand you correctly, I would very much prefer the second solution.  It would be a shame if I can use `latex(matrix)` and `latex(symbolic_expression)` but not `latex(graph)`.",
    "created_at": "2015-04-27T07:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243055",
    "user": "mantepse"
}
```

Replying to [comment:62 vbraun]:
> Replying to [comment:56 mantepse]:
> > Is there a difference between `latex(g)` and `g.__latex__`?  What would be the point of having $G_{123}$ as output?  At least for me it would be completely useless.
> 
> * `latex(g)` just calls `g._latex_()`, so they are equivalent
> * We should certainly have a way to get the tikz code. 
> * The problem is that if you click the "typeset" checkbox in SageNB then it calls `latex()` for every output. But typesetting tikz often fails, resulting in a quite broken notebook. For large-ish graphs we shouldn't go that route in the displayhook.
> 
> The two logical options are either 
> * move the tikz output, something like `graph.plot(format='tikz')`, or
> * not call `graph._latex_()` when typesetting output, for example implementing a different latex view it in `graph._rich_repr_()`

Since a SageNB user will hardly type `latex` by hand (I'm not using the notebook, so I'm guessing), why should `latex` print anything but code useful for inclusion in a paper?

I think it's hardly possible to reuse output functionality too much, since the use cases are quite diverse.  So, if I understand you correctly, I would very much prefer the second solution.  It would be a shame if I can use `latex(matrix)` and `latex(symbolic_expression)` but not `latex(graph)`.



---

archive/issue_comments_243056.json:
```json
{
    "body": "Replying to [comment:61 vbraun]:\n\n> One of the meanings of \"plot\" is: a plan, map, diagram, or other graphic representation, as of land, a building, etc. Doesn't sound like such a bad fit to me. Though feel free to suggest a better name.\n\nI have not yet encountered this meaning in the context of computer graphics.  Wikipedia doesn't have it either, see http://en.wikipedia.org/wiki/Plot_%28graphics%29, vs. http://en.wikipedia.org/wiki/Graph_drawing.\n\nAlthough I don't use it, there is currently a distinction between `show` and `plot` for matrices, and I'd say it matches what I expect.  `plot` tries to interpret the matrix as  something like a contour plot, whereas `show` opens an external viewer to see a big matrix in all detail.",
    "created_at": "2015-04-27T07:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243056",
    "user": "mantepse"
}
```

Replying to [comment:61 vbraun]:

> One of the meanings of "plot" is: a plan, map, diagram, or other graphic representation, as of land, a building, etc. Doesn't sound like such a bad fit to me. Though feel free to suggest a better name.

I have not yet encountered this meaning in the context of computer graphics.  Wikipedia doesn't have it either, see http://en.wikipedia.org/wiki/Plot_%28graphics%29, vs. http://en.wikipedia.org/wiki/Graph_drawing.

Although I don't use it, there is currently a distinction between `show` and `plot` for matrices, and I'd say it matches what I expect.  `plot` tries to interpret the matrix as  something like a contour plot, whereas `show` opens an external viewer to see a big matrix in all detail.



---

archive/issue_comments_243057.json:
```json
{
    "body": "A plotter is a type of printer for diagrams, that is certainly well-established in computer graphics circles.\n\n`show()` only opens an external viewer on the ipython commandline. We need to think bigger than in terms of a single UI here.",
    "created_at": "2015-04-28T15:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243057",
    "user": "vbraun"
}
```

A plotter is a type of printer for diagrams, that is certainly well-established in computer graphics circles.

`show()` only opens an external viewer on the ipython commandline. We need to think bigger than in terms of a single UI here.



---

archive/issue_comments_243058.json:
```json
{
    "body": "> `show()` only opens an external viewer on the ipython commandline.\n\nIn Sage, once this branch is applied we get this:\n\n\n```\nsage: show(graphs.PetersenGraph())\nG_{10}\n```\n\n\nCould you change this branch so that `show(graphs.PetersenGraph())` opens a window and displays a graph, as it has been the case for years?\n\nThanks,\n\nNathann",
    "created_at": "2015-04-28T15:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243058",
    "user": "ncohen"
}
```

> `show()` only opens an external viewer on the ipython commandline.

In Sage, once this branch is applied we get this:


```
sage: show(graphs.PetersenGraph())
G_{10}
```


Could you change this branch so that `show(graphs.PetersenGraph())` opens a window and displays a graph, as it has been the case for years?

Thanks,

Nathann



---

archive/issue_comments_243059.json:
```json
{
    "body": "It does that without this branch. I'm happy with that if you are. I'm only against show() returning something else than the displayhook.",
    "created_at": "2015-04-28T15:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243059",
    "user": "vbraun"
}
```

It does that without this branch. I'm happy with that if you are. I'm only against show() returning something else than the displayhook.



---

archive/issue_comments_243060.json:
```json
{
    "body": "> It does that without this branch.\n\nWithout this branch (i.e. with beta3) this command opens a window with a plot:\n\n\n```\nsage: show(graphs.PetersenGraph())\n```\n\n\n> I'm happy with that if you are.\n\nI am not. `G_{10}` means nothing to somebody in the graph world, and the previous output was way more informative:\n\n\n```\nsage: Graph(4,loops=True,multiedges=True)\nLooped multi-graph on 4 vertices\n```\n\n\n> I'm only against show() returning something else than the displayhook.\n\nI am against 'show()' returning anything else than what it has been returning for the last 5 years. You can add a deprecation warning if you plan to remove 'show()' (I would agree with it), but anything else would be problematic: you cannot expect `show(g)` to be different from `g.show()`.\n\nIn the meantime, as per our deprecation policy, the result should still be the same for one year.\n\nThere is no reason to consider `show(a_graph) # opens a window` as a bug either. I consider it as a feature, as do most of the people I talk with.\n\nNathann",
    "created_at": "2015-04-28T16:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243060",
    "user": "ncohen"
}
```

> It does that without this branch.

Without this branch (i.e. with beta3) this command opens a window with a plot:


```
sage: show(graphs.PetersenGraph())
```


> I'm happy with that if you are.

I am not. `G_{10}` means nothing to somebody in the graph world, and the previous output was way more informative:


```
sage: Graph(4,loops=True,multiedges=True)
Looped multi-graph on 4 vertices
```


> I'm only against show() returning something else than the displayhook.

I am against 'show()' returning anything else than what it has been returning for the last 5 years. You can add a deprecation warning if you plan to remove 'show()' (I would agree with it), but anything else would be problematic: you cannot expect `show(g)` to be different from `g.show()`.

In the meantime, as per our deprecation policy, the result should still be the same for one year.

There is no reason to consider `show(a_graph) # opens a window` as a bug either. I consider it as a feature, as do most of the people I talk with.

Nathann



---

archive/issue_comments_243061.json:
```json
{
    "body": "Replying to [comment:72 ncohen]:\n> I am not. `G_{10}` means nothing to somebody in the graph world, and the previous output was way more informative:\n\nWell do you have any way of using latex to improve on the plain text output? I just put that there to avoid calling `_latex_()` in SageNB. We can also return `\\verb{Looped multi-graph on 4 vertices}`, though that is kind of lame. \n\nThis is related to why I said on sage-devel that the commandline backend shouldn't claim to support latex output, printing the latex version just makes it worse.\n\n> There is no reason to consider `show(a_graph) # opens a window` as a bug either. \n\nIt doesn't do that (or, rather, it only does that in the commandline ui). Do you really think that the SageNB behavior where show switches from tkz graphics to matplotlib graphics is a feature?",
    "created_at": "2015-04-28T16:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243061",
    "user": "vbraun"
}
```

Replying to [comment:72 ncohen]:
> I am not. `G_{10}` means nothing to somebody in the graph world, and the previous output was way more informative:

Well do you have any way of using latex to improve on the plain text output? I just put that there to avoid calling `_latex_()` in SageNB. We can also return `\verb{Looped multi-graph on 4 vertices}`, though that is kind of lame. 

This is related to why I said on sage-devel that the commandline backend shouldn't claim to support latex output, printing the latex version just makes it worse.

> There is no reason to consider `show(a_graph) # opens a window` as a bug either. 

It doesn't do that (or, rather, it only does that in the commandline ui). Do you really think that the SageNB behavior where show switches from tkz graphics to matplotlib graphics is a feature?



---

archive/issue_comments_243062.json:
```json
{
    "body": "> Well do you have any way of using latex to improve on the plain text output?\n\nWhat is wrong with displaying plain text?\n\n> It doesn't do that (or, rather, it only does that in the commandline ui). Do you really think that the SageNB behavior where show switches from tkz graphics to matplotlib graphics is a feature?\n\nWhy do you keep bringing the notebook up? I never mentionned anything related to the notebook. I do not use it, I am just barely aware that it exists and is simultaneously being replaced by Jupyter and SMC.\n\nAll I ask is for you to revert the changes you made that break several things I (and others) work with. Namely:\n\n- `show(graphs.PetersenGraph())` used to open a window and plot the graph\n- `graphs.PetersenGraph()` used to display `Petersen graph: Graph on 10 vertices`\n\nIf, additionally, you want to deprecate 'show' (in another ticket) I have absolutely nothing against that. The semantics of `show` and `pretty_print` are very different, and since you made one an alias of the other we have been discussing the problems it caused.\n\nNathann",
    "created_at": "2015-04-28T16:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243062",
    "user": "ncohen"
}
```

> Well do you have any way of using latex to improve on the plain text output?

What is wrong with displaying plain text?

> It doesn't do that (or, rather, it only does that in the commandline ui). Do you really think that the SageNB behavior where show switches from tkz graphics to matplotlib graphics is a feature?

Why do you keep bringing the notebook up? I never mentionned anything related to the notebook. I do not use it, I am just barely aware that it exists and is simultaneously being replaced by Jupyter and SMC.

All I ask is for you to revert the changes you made that break several things I (and others) work with. Namely:

- `show(graphs.PetersenGraph())` used to open a window and plot the graph
- `graphs.PetersenGraph()` used to display `Petersen graph: Graph on 10 vertices`

If, additionally, you want to deprecate 'show' (in another ticket) I have absolutely nothing against that. The semantics of `show` and `pretty_print` are very different, and since you made one an alias of the other we have been discussing the problems it caused.

Nathann



---

archive/issue_comments_243063.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-29T01:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243063",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243064.json:
```json
{
    "body": "Replying to [comment:74 ncohen]:\n> > Well do you have any way of using latex to improve on the plain text output?\n> What is wrong with displaying plain text?\n\nSeems like we are missing an opportunity. But if graph theory is the only field of mathematics that doesn't benefit from Latex's typesetting capabilities then thats fine with me...\n\n\n> Why do you keep bringing the notebook up? I never mentionned anything related to the notebook. I do not use it, I am just barely aware that it exists and is simultaneously being replaced by Jupyter and SMC.\n\nNone of the three has a notion of exec'ing an external viewer, so if you prefer you can just replace SageNB with one of the other browser-based notebook. And I keep bringing this shit up precisely because I want the IPython notebook to work without having to maintain a fork like SMC. You can't define behavior in terms of \"I want/don't want an external viewer launched\", that is crap. It arguably was crap 10 years ago, but nowadays the technical debt of that simplistic view is really catching up with us.",
    "created_at": "2015-04-29T01:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243064",
    "user": "vbraun"
}
```

Replying to [comment:74 ncohen]:
> > Well do you have any way of using latex to improve on the plain text output?
> What is wrong with displaying plain text?

Seems like we are missing an opportunity. But if graph theory is the only field of mathematics that doesn't benefit from Latex's typesetting capabilities then thats fine with me...


> Why do you keep bringing the notebook up? I never mentionned anything related to the notebook. I do not use it, I am just barely aware that it exists and is simultaneously being replaced by Jupyter and SMC.

None of the three has a notion of exec'ing an external viewer, so if you prefer you can just replace SageNB with one of the other browser-based notebook. And I keep bringing this shit up precisely because I want the IPython notebook to work without having to maintain a fork like SMC. You can't define behavior in terms of "I want/don't want an external viewer launched", that is crap. It arguably was crap 10 years ago, but nowadays the technical debt of that simplistic view is really catching up with us.



---

archive/issue_comments_243065.json:
```json
{
    "body": "From a point of view of developmental transparency, it seems to me that the right thing would be to just back out #17821 and then put up another patch in another ticket that could be reviewed, rather than to try to combine the reversion with further changes. Currently things are broken, so there is an urgency to getting things fixed.\n\n```\nsage: CartanMatrix(\"E8~\").dynkin_diagram()\nLaunched png viewer for         O 2\n\t|\n        |\nO---O---O---O---O---O---O---O\n1   3   4   5   6   7   8   0\nE8~\n```\n",
    "created_at": "2015-04-29T03:14:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243065",
    "user": "bump"
}
```

From a point of view of developmental transparency, it seems to me that the right thing would be to just back out #17821 and then put up another patch in another ticket that could be reviewed, rather than to try to combine the reversion with further changes. Currently things are broken, so there is an urgency to getting things fixed.

```
sage: CartanMatrix("E8~").dynkin_diagram()
Launched png viewer for         O 2
	|
        |
O---O---O---O---O---O---O---O
1   3   4   5   6   7   8   0
E8~
```




---

archive/issue_comments_243066.json:
```json
{
    "body": "On the other hand, if we would always unmerge tickets because of a real or preceived regression then we would spend our entire time unmerging. Really, that is what beta releases are for.\n\nAs for the Cartan matrix, its the same as\n\n```\nsage: pi.n(100), CartanMatrix(\"E8~\").dynkin_diagram()\n(3.1415926535897932384626433833,         O 2\n         |\n         |\n O---O---O---O---O---O---O---O\n 1   3   4   5   6   7   8   0   \n E8~)\n```\n\nTo avoid that, we need a way to distinguish ascii art from composable strings. We do have a mechanism for that, namely `_ascii_art_` vs. plain `_repr_`. I've made #18328 for that.\n\nThe attached branch now doesn't display graphs pictorially on the command line, so at least it doesn't trigger your particular ascii art problem any more.",
    "created_at": "2015-04-29T04:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243066",
    "user": "vbraun"
}
```

On the other hand, if we would always unmerge tickets because of a real or preceived regression then we would spend our entire time unmerging. Really, that is what beta releases are for.

As for the Cartan matrix, its the same as

```
sage: pi.n(100), CartanMatrix("E8~").dynkin_diagram()
(3.1415926535897932384626433833,         O 2
         |
         |
 O---O---O---O---O---O---O---O
 1   3   4   5   6   7   8   0   
 E8~)
```

To avoid that, we need a way to distinguish ascii art from composable strings. We do have a mechanism for that, namely `_ascii_art_` vs. plain `_repr_`. I've made #18328 for that.

The attached branch now doesn't display graphs pictorially on the command line, so at least it doesn't trigger your particular ascii art problem any more.



---

archive/issue_comments_243067.json:
```json
{
    "body": "> On the other hand, if we would always unmerge tickets because of a real or preceived regression then we would spend our entire time unmerging.\n\nI am also against this ticket that you merged, I also believe that it created a lot of mess, and I also believe that it should be unmerged. Stop forcing your changes on us.\n\nWe do NOT like this change. How many tickets have you already created to fix th problems it caused? Please *REVERT* it.\n\nYou just renamed this ticket from \"revert the changes\" to \"make graph display configurable\": I do not want to be forced to agree with changes that do not concern me (for example in the notebook) in order for graphs to be fixed. Please rename this ticket to its old name, and fix what you broke. And *only that*. \n\nOr more simply, please revert #17821 and redo things without breaking anything.\n\nNathann",
    "created_at": "2015-04-29T06:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243067",
    "user": "ncohen"
}
```

> On the other hand, if we would always unmerge tickets because of a real or preceived regression then we would spend our entire time unmerging.

I am also against this ticket that you merged, I also believe that it created a lot of mess, and I also believe that it should be unmerged. Stop forcing your changes on us.

We do NOT like this change. How many tickets have you already created to fix th problems it caused? Please *REVERT* it.

You just renamed this ticket from "revert the changes" to "make graph display configurable": I do not want to be forced to agree with changes that do not concern me (for example in the notebook) in order for graphs to be fixed. Please rename this ticket to its old name, and fix what you broke. And *only that*. 

Or more simply, please revert #17821 and redo things without breaking anything.

Nathann



---

archive/issue_comments_243068.json:
```json
{
    "body": "We LOVE the changes that Volker has done to the display system - while there is some dust in the process (and he pointed out that beta releases are there to allow cleaning up), it actually makes sense now to have Sage as math software and multiple interfaces to it that don't have to be adjusted with every new version of Sage, potentially breaking more and more things that are very hard to test automatically. This certainly was the case with SageMathCell and I am pretty sure with SageNB, since each version of the latter required changes to Sage beyond just bumping version numbers.\n\nI also get the impression that graphs are the only things \"heavily broken\" by recent changes, which suggests that the problems are with the way how graphs are set up. Or maybe I am wrong and Sage is only used for graphs, that's why there are few complains for other areas.",
    "created_at": "2015-04-29T06:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243068",
    "user": "novoselt"
}
```

We LOVE the changes that Volker has done to the display system - while there is some dust in the process (and he pointed out that beta releases are there to allow cleaning up), it actually makes sense now to have Sage as math software and multiple interfaces to it that don't have to be adjusted with every new version of Sage, potentially breaking more and more things that are very hard to test automatically. This certainly was the case with SageMathCell and I am pretty sure with SageNB, since each version of the latter required changes to Sage beyond just bumping version numbers.

I also get the impression that graphs are the only things "heavily broken" by recent changes, which suggests that the problems are with the way how graphs are set up. Or maybe I am wrong and Sage is only used for graphs, that's why there are few complains for other areas.



---

archive/issue_comments_243069.json:
```json
{
    "body": "> We LOVE the changes that Volker has done to the display system - while there is some dust in the process\n\nIf the original ticket had been better advertised, and if there were doctests for what was broken this ticket would have been set to `needs_work`. When developing in Sage that's how it works: we don't just write code that breaks things that other persons use and \"fix them later\", beta or no beta. It is in `needs_work` until there is no problem with it, and then it gets merged. Whatever this ticket does, it was definitely not ready.\n\nSo please undo the changes first, and reimplement what you want to properly.\n\nNathann",
    "created_at": "2015-04-29T07:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243069",
    "user": "ncohen"
}
```

> We LOVE the changes that Volker has done to the display system - while there is some dust in the process

If the original ticket had been better advertised, and if there were doctests for what was broken this ticket would have been set to `needs_work`. When developing in Sage that's how it works: we don't just write code that breaks things that other persons use and "fix them later", beta or no beta. It is in `needs_work` until there is no problem with it, and then it gets merged. Whatever this ticket does, it was definitely not ready.

So please undo the changes first, and reimplement what you want to properly.

Nathann



---

archive/issue_comments_243070.json:
```json
{
    "body": "> I also get the impression that graphs are the only things \"heavily broken\" by recent changes, which suggests that the problems are with the way how graphs are set up.\n\nPossibly because some of the changes in #17821 are graph-specific? Try it in beta3:\n\n\n```\nsage: graphs.PetersenGraph() # plots a picture\nsage: posets.ChainPoset(4) # does not plot a picture\n```\n\n\nIf everything that *can* be plotted *was* plotted you would hear a lot more noise. But no, #17821 did this for graphs in particular. This inconsistency must be reverted too.\n\nNathann",
    "created_at": "2015-04-29T07:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243070",
    "user": "ncohen"
}
```

> I also get the impression that graphs are the only things "heavily broken" by recent changes, which suggests that the problems are with the way how graphs are set up.

Possibly because some of the changes in #17821 are graph-specific? Try it in beta3:


```
sage: graphs.PetersenGraph() # plots a picture
sage: posets.ChainPoset(4) # does not plot a picture
```


If everything that *can* be plotted *was* plotted you would hear a lot more noise. But no, #17821 did this for graphs in particular. This inconsistency must be reverted too.

Nathann



---

archive/issue_comments_243071.json:
```json
{
    "body": "Replying to [comment:80 ncohen]:\n> You just renamed this ticket from \"revert the changes\" to \"make graph display configurable\"\n\nYou renamed my ticket to \"revert the changes\", I just reverted your renaming of my ticket. If you don't agree feel free to open your own ticket, or air your grievances on sage-devel. Or we can move on and do something constructive.\n\nI added pictorial representation to graphs because somebody went through a lot of trouble to hack that as a special case into `show(graph)` (but not for posets). I never wanted everything to be plotted that has a plot method. I thought it would be appreciated if I replace said kludge with always showing graphs as pictures. Ok, now I know you actually don't want graphs shown as pictures, except in `show(graph)` to preserve the inconsistency until we can deprecate it. Fine with me. The attached branch now implements this.",
    "created_at": "2015-04-29T11:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243071",
    "user": "vbraun"
}
```

Replying to [comment:80 ncohen]:
> You just renamed this ticket from "revert the changes" to "make graph display configurable"

You renamed my ticket to "revert the changes", I just reverted your renaming of my ticket. If you don't agree feel free to open your own ticket, or air your grievances on sage-devel. Or we can move on and do something constructive.

I added pictorial representation to graphs because somebody went through a lot of trouble to hack that as a special case into `show(graph)` (but not for posets). I never wanted everything to be plotted that has a plot method. I thought it would be appreciated if I replace said kludge with always showing graphs as pictures. Ok, now I know you actually don't want graphs shown as pictures, except in `show(graph)` to preserve the inconsistency until we can deprecate it. Fine with me. The attached branch now implements this.



---

archive/issue_comments_243072.json:
```json
{
    "body": "Hello,\n\nPerhaps it would be cool to first decide once for all the semantic of all our display functions and methods in sage? There was a thread open for that purpose in Sage. I guess we could open a ticket only for deciding what should we do with `show`, `plot`, `pretty_print` `print`, etc.\n\nConcerning the current branch, I would prefer that the\n\n```\nis_small = (0 < self.num_verts() < 20)\nplot_graph = display_manager.preferences.plot_graphs != 'never' and \\\n  (display_manager.preferences.plot_graphs == 'always' or is_small)\n```\n\nactually belongs to the display manager itself. People implenting classes should not have to worry about the display manager preferences. Don't you think? I would separate:\n\n- which methods the class could possibly implement (e.g. `_latex_`, `_rich_latex_`, `_ascii_art_`, `plot`)\n- and let the display manager decide when we do things like `object`, `plot(object)` or `latex(object)`\n\nVincent",
    "created_at": "2015-04-29T11:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243072",
    "user": "vdelecroix"
}
```

Hello,

Perhaps it would be cool to first decide once for all the semantic of all our display functions and methods in sage? There was a thread open for that purpose in Sage. I guess we could open a ticket only for deciding what should we do with `show`, `plot`, `pretty_print` `print`, etc.

Concerning the current branch, I would prefer that the

```
is_small = (0 < self.num_verts() < 20)
plot_graph = display_manager.preferences.plot_graphs != 'never' and \
  (display_manager.preferences.plot_graphs == 'always' or is_small)
```

actually belongs to the display manager itself. People implenting classes should not have to worry about the display manager preferences. Don't you think? I would separate:

- which methods the class could possibly implement (e.g. `_latex_`, `_rich_latex_`, `_ascii_art_`, `plot`)
- and let the display manager decide when we do things like `object`, `plot(object)` or `latex(object)`

Vincent



---

archive/issue_comments_243073.json:
```json
{
    "body": "Yo,\n\n> I added pictorial representation to graphs because somebody went through a lot of trouble to hack that as a special case into `show(graph)` (but not for posets). I never wanted everything to be plotted that has a plot method. I thought it would be appreciated if I replace said kludge with always showing graphs as pictures. Ok, now I know you actually don't want graphs shown as pictures, except in `show(graph)` to preserve the inconsistency until we can deprecate it. Fine with me. \n\nWow. And it only took a week of posts. How constructive can we get?\n\n> The attached branch now implements this.\n\nAnd much more. Here is a first-pass review:\n\n- Thanks for fixing the command-line usage\n\n- With your modifications, the notebook displays a picture of the graph when it\n  has order 0<..<20. Notebook users, who may be beginners, could get used to\n  graphs that are displayed so easily, and not know what do to when, by adding a\n  vertex to their graph, they can't obtain a plot anymore. When the graphs is\n  *not* plotted because it is too large, it may be good to hint at how they\n  could get a plot, a bit like what happens for matrices:\n\n  {{{\n  sage: identity_matrix(100)\n  100 x 100 dense matrix over Integer Ring (use the '.str()' method to see the entries)\n  }}}\n\n  What would you think of returning a string similar to that in the notebook\n  when the graph is too big to be automatically plotted?\n\n  {{{\n  Petersen graph: Graph on 10 vertices (use the '.show()' method to see the graph)\n  }}}\n\n- The one-line description, and the information we get from it, is not provided\n  by the drawing only. What would you think, when in the notebook, to do both at\n  once: print the string *AND* plot the graph? Users would get (strictly) more than what\n  they get in the command-line interface because their UI has more capacities.\n\n  The useful information is especially the number of vertices and whether the\n  graph allows loops/multiple edges.\n\n  I also thought of adding the number of edges there, eventually: this\n  information will be useful to both kind of users.\n\n- Could you explain this part of the code?\n  {{{\n  output = self.plot(**kwds)._rich_repr_(display_manager)\n  if output is not None:\n      return output\n  }}}\n  In which case would this call return a \"None\"?\n\n- About other graph-like objects\n  {{{\n  Whether to graphically display graphs, posets, and other\n  graph-like objects. When not specified small objects are show\n  graphically and large objects as textual overview.\n  }}}\n  Posets do not inherit from graphs. Neither do automata, crystals, and many of\n  the things that you may want to be plotted. Thus, currently this piece of\n  documentation is incorrect (for posets), but we may also want to add\n  others. Otherwise, graphs will just be an oddity in the notebook.\n\n- Do you still plan to deprecate show in #18302?\n\n- About the backend `default_preferences` functions that you add: right now they\n  build an object (containing the preferences) that they return, but in order to\n  change one specific preference one needs to overwrite the function with a new\n  one. What would you think of having a `DisplayPreferences` object in each of\n  those backends files? This way we would be able to change their settings in a\n  `~/.sage/sage.init` file with just a line, i.e. something like:\n  {{{\n  sage.repl.rich_output.backend_ipython.display_preferences[\"figsize\"]=10000\n  }}}\n\nNathann",
    "created_at": "2015-04-29T11:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243073",
    "user": "ncohen"
}
```

Yo,

> I added pictorial representation to graphs because somebody went through a lot of trouble to hack that as a special case into `show(graph)` (but not for posets). I never wanted everything to be plotted that has a plot method. I thought it would be appreciated if I replace said kludge with always showing graphs as pictures. Ok, now I know you actually don't want graphs shown as pictures, except in `show(graph)` to preserve the inconsistency until we can deprecate it. Fine with me. 

Wow. And it only took a week of posts. How constructive can we get?

> The attached branch now implements this.

And much more. Here is a first-pass review:

- Thanks for fixing the command-line usage

- With your modifications, the notebook displays a picture of the graph when it
  has order 0<..<20. Notebook users, who may be beginners, could get used to
  graphs that are displayed so easily, and not know what do to when, by adding a
  vertex to their graph, they can't obtain a plot anymore. When the graphs is
  *not* plotted because it is too large, it may be good to hint at how they
  could get a plot, a bit like what happens for matrices:

  {{{
  sage: identity_matrix(100)
  100 x 100 dense matrix over Integer Ring (use the '.str()' method to see the entries)
  }}}

  What would you think of returning a string similar to that in the notebook
  when the graph is too big to be automatically plotted?

  {{{
  Petersen graph: Graph on 10 vertices (use the '.show()' method to see the graph)
  }}}

- The one-line description, and the information we get from it, is not provided
  by the drawing only. What would you think, when in the notebook, to do both at
  once: print the string *AND* plot the graph? Users would get (strictly) more than what
  they get in the command-line interface because their UI has more capacities.

  The useful information is especially the number of vertices and whether the
  graph allows loops/multiple edges.

  I also thought of adding the number of edges there, eventually: this
  information will be useful to both kind of users.

- Could you explain this part of the code?
  {{{
  output = self.plot(**kwds)._rich_repr_(display_manager)
  if output is not None:
      return output
  }}}
  In which case would this call return a "None"?

- About other graph-like objects
  {{{
  Whether to graphically display graphs, posets, and other
  graph-like objects. When not specified small objects are show
  graphically and large objects as textual overview.
  }}}
  Posets do not inherit from graphs. Neither do automata, crystals, and many of
  the things that you may want to be plotted. Thus, currently this piece of
  documentation is incorrect (for posets), but we may also want to add
  others. Otherwise, graphs will just be an oddity in the notebook.

- Do you still plan to deprecate show in #18302?

- About the backend `default_preferences` functions that you add: right now they
  build an object (containing the preferences) that they return, but in order to
  change one specific preference one needs to overwrite the function with a new
  one. What would you think of having a `DisplayPreferences` object in each of
  those backends files? This way we would be able to change their settings in a
  `~/.sage/sage.init` file with just a line, i.e. something like:
  {{{
  sage.repl.rich_output.backend_ipython.display_preferences["figsize"]=10000
  }}}

Nathann



---

archive/issue_comments_243074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-29T14:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243074",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243075.json:
```json
{
    "body": "Replying to [comment:86 ncohen]:\n>   What would you think of returning a string similar to that in the notebook\n>   when the graph is too big to be automatically plotted?\n\nSounds good, done\n\n> - What would you think, when in the notebook, to do both at\n>   once: print the string *AND* plot the graph? \n\nSounds good, but will have to think about the proper implementation first. Right now there are only rich output containers for a particular type. So we either \n* render the text inside the image (meh)\n* add an optional caption to all image output types (maybe), or\n* add a rich output type that is a container of other rich output types (probably want this for other purposes, too)\nI'd say that is material for another ticket.\n\n> - Could you explain this part of the code?\n>   {{{\n>   output = self.plot(**kwds)._rich_repr_(display_manager)\n>   if output is not None:\n>       return output\n>   }}}\n>   In which case would this call return a \"None\"?\n\nBy convention, the `_rich_repr_` method can just return `None` to indicate that there is no rich output, e.g. because the desired output types is not supported. The display framework then falls back to `_repr_`.\n\n> - About other graph-like objects\n\nI've adjusted the docstring. I don't have any immediate plans to switch other objects to graphical output, though we should think about that when the dust has settled...\n\n> - Do you still plan to deprecate show in #18302?\n\nyes\n\n> - What would you think of having a `DisplayPreferences` object in each of\n>   those backends files?\n\nSounds good, though I wanted to revisit the preferences system to make it more general and make them more like google app engine ndb models. IMHO we need an easy-to-use validating(!) option system for graphics options and the like. The display preferences are just a quick implementation that I needed. It is better than dumb dictionaries, but not as good as it can be.",
    "created_at": "2015-04-29T15:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243075",
    "user": "vbraun"
}
```

Replying to [comment:86 ncohen]:
>   What would you think of returning a string similar to that in the notebook
>   when the graph is too big to be automatically plotted?

Sounds good, done

> - What would you think, when in the notebook, to do both at
>   once: print the string *AND* plot the graph? 

Sounds good, but will have to think about the proper implementation first. Right now there are only rich output containers for a particular type. So we either 
* render the text inside the image (meh)
* add an optional caption to all image output types (maybe), or
* add a rich output type that is a container of other rich output types (probably want this for other purposes, too)
I'd say that is material for another ticket.

> - Could you explain this part of the code?
>   {{{
>   output = self.plot(**kwds)._rich_repr_(display_manager)
>   if output is not None:
>       return output
>   }}}
>   In which case would this call return a "None"?

By convention, the `_rich_repr_` method can just return `None` to indicate that there is no rich output, e.g. because the desired output types is not supported. The display framework then falls back to `_repr_`.

> - About other graph-like objects

I've adjusted the docstring. I don't have any immediate plans to switch other objects to graphical output, though we should think about that when the dust has settled...

> - Do you still plan to deprecate show in #18302?

yes

> - What would you think of having a `DisplayPreferences` object in each of
>   those backends files?

Sounds good, though I wanted to revisit the preferences system to make it more general and make them more like google app engine ndb models. IMHO we need an easy-to-use validating(!) option system for graphics options and the like. The display preferences are just a quick implementation that I needed. It is better than dumb dictionaries, but not as good as it can be.



---

archive/issue_comments_243076.json:
```json
{
    "body": "Hello,\n\n> Sounds good, but will have to think about the proper implementation first. Right now there are only rich output containers for a particular type. So we either \n> * render the text inside the image (meh)\n> * add an optional caption to all image output types (maybe), or\n> * add a rich output type that is a container of other rich output types (probably want this for other purposes, too)\n> I'd say that is material for another ticket.\n\nI agree that the 1) is a bit 'meh' (as you say), but what about doing this for the moment, knowing that it will be improved later? It is the cheapest thing that we can do for the moment.\n\n> By convention, the `_rich_repr_` method can just return `None` to indicate that there is no rich output, e.g. because the desired output types is not supported. The display framework then falls back to `_repr_`.\n\nOkayyy, thanks !\n\n> > - About other graph-like objects\n> \n> I've adjusted the docstring. I don't have any immediate plans to switch other objects to graphical output, though we should think about that when the dust has settled...\n\nOh. Well, I was sending this when you posted your message:\nhttps://groups.google.com/d/topic/sage-devel/2dBo6Cm-sIc/discussion\n\nLet's see what happens.\n\n> > - Do you still plan to deprecate show in #18302?\n> \n> yes\nGreat!\n\n> Sounds good, though I wanted to revisit the preferences system to make it more general and make them more like google app engine ndb models. IMHO we need an easy-to-use validating(!) option system for graphics options and the like.\n\nCouldn't agree more. I recently had to review some code which dealt with an awful lot of options, and screens of code were only there to check that.\n\n> The display preferences are just a quick implementation that I needed. It is better than dumb dictionaries, but not as good as it can be.\n\nGreat idea. We should have some \"check_type\" module with functions like that:\n\n\n```\n    sage: check_nonnegative_value(-2,\"x\") # exception if the value is negative or not in RR\n    ...\n    ValueError: 'x' (=-2) must be a nonnegative value\n\n    check_allowed_value('d',\"x\",[\"A\",\"B\",\"C\"]) # exception if x is not allowed\n    ...\n    ValueError: 'x' (='d') must be equal to one of \"A\",\"B\",\"C\"\n\n    check_list_of_integers([1,2,3,\"a\",9]) # raise exception if not a list, or contains non-integers\n    ...\n    ValueError: \"a\" is not an integer\n```\n\n\nThen perhaps `DisplayPreferences` could just be a dictionary with a modified `__setitem__`?\n\nNathann",
    "created_at": "2015-04-29T15:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243076",
    "user": "ncohen"
}
```

Hello,

> Sounds good, but will have to think about the proper implementation first. Right now there are only rich output containers for a particular type. So we either 
> * render the text inside the image (meh)
> * add an optional caption to all image output types (maybe), or
> * add a rich output type that is a container of other rich output types (probably want this for other purposes, too)
> I'd say that is material for another ticket.

I agree that the 1) is a bit 'meh' (as you say), but what about doing this for the moment, knowing that it will be improved later? It is the cheapest thing that we can do for the moment.

> By convention, the `_rich_repr_` method can just return `None` to indicate that there is no rich output, e.g. because the desired output types is not supported. The display framework then falls back to `_repr_`.

Okayyy, thanks !

> > - About other graph-like objects
> 
> I've adjusted the docstring. I don't have any immediate plans to switch other objects to graphical output, though we should think about that when the dust has settled...

Oh. Well, I was sending this when you posted your message:
https://groups.google.com/d/topic/sage-devel/2dBo6Cm-sIc/discussion

Let's see what happens.

> > - Do you still plan to deprecate show in #18302?
> 
> yes
Great!

> Sounds good, though I wanted to revisit the preferences system to make it more general and make them more like google app engine ndb models. IMHO we need an easy-to-use validating(!) option system for graphics options and the like.

Couldn't agree more. I recently had to review some code which dealt with an awful lot of options, and screens of code were only there to check that.

> The display preferences are just a quick implementation that I needed. It is better than dumb dictionaries, but not as good as it can be.

Great idea. We should have some "check_type" module with functions like that:


```
    sage: check_nonnegative_value(-2,"x") # exception if the value is negative or not in RR
    ...
    ValueError: 'x' (=-2) must be a nonnegative value

    check_allowed_value('d',"x",["A","B","C"]) # exception if x is not allowed
    ...
    ValueError: 'x' (='d') must be equal to one of "A","B","C"

    check_list_of_integers([1,2,3,"a",9]) # raise exception if not a list, or contains non-integers
    ...
    ValueError: "a" is not an integer
```


Then perhaps `DisplayPreferences` could just be a dictionary with a modified `__setitem__`?

Nathann



---

archive/issue_comments_243077.json:
```json
{
    "body": "The `DisplayPreferences` right now does the following:\n\n```\nsage: prefs = DisplayPreferences()\nsage: prefs.text = 'ascii_art'  # dot-notation for tab completion\nsage: prefs                     # nice output\nDisplay preferences:\n* graphics is not specified\n* text = ascii_art\nsage: prefs.text?               # help documents setting and lists allowed values\nsage: prefs.text = 'foo'        # validates\nTraceback (most recent call last)\n...\nValueError: value must be unset (None) or one of ('plain', 'ascii_art', 'latex'), got foo\n```\n\nWhat is IMHO missing is a nice syntax to declare your own preferences and validation for anything that is not a choice out of a finite list of strings. I'd rather have tab-completion and built-in help with `?` than dictionary notation.",
    "created_at": "2015-04-30T03:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243077",
    "user": "vbraun"
}
```

The `DisplayPreferences` right now does the following:

```
sage: prefs = DisplayPreferences()
sage: prefs.text = 'ascii_art'  # dot-notation for tab completion
sage: prefs                     # nice output
Display preferences:
* graphics is not specified
* text = ascii_art
sage: prefs.text?               # help documents setting and lists allowed values
sage: prefs.text = 'foo'        # validates
Traceback (most recent call last)
...
ValueError: value must be unset (None) or one of ('plain', 'ascii_art', 'latex'), got foo
```

What is IMHO missing is a nice syntax to declare your own preferences and validation for anything that is not a choice out of a finite list of strings. I'd rather have tab-completion and built-in help with `?` than dictionary notation.



---

archive/issue_comments_243078.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-30T21:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243078",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243079.json:
```json
{
    "body": "The graph repr string is now used as title if there is not one already.",
    "created_at": "2015-04-30T21:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243079",
    "user": "vbraun"
}
```

The graph repr string is now used as title if there is not one already.



---

archive/issue_comments_243080.json:
```json
{
    "body": "What do we do about this branch ? The guys on sage-devel did not seem overly enthusiastic.\n\nhttps://groups.google.com/d/msg/sage-devel/2dBo6Cm-sIc/oaq-DUZ8utkJ\nhttps://groups.google.com/d/msg/sage-devel/2dBo6Cm-sIc/57KPWJQ2K3gJ\n\nAs I mentionned on that thread, I don't object to this modification (in the notebook only) provided that graphs are not the only things that are automatically displayed.\n\nNathann",
    "created_at": "2015-05-01T11:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243080",
    "user": "ncohen"
}
```

What do we do about this branch ? The guys on sage-devel did not seem overly enthusiastic.

https://groups.google.com/d/msg/sage-devel/2dBo6Cm-sIc/oaq-DUZ8utkJ
https://groups.google.com/d/msg/sage-devel/2dBo6Cm-sIc/57KPWJQ2K3gJ

As I mentionned on that thread, I don't object to this modification (in the notebook only) provided that graphs are not the only things that are automatically displayed.

Nathann



---

archive/issue_comments_243081.json:
```json
{
    "body": "You can't just ask customers what they want and then try to give that to them (Steve Jobs)",
    "created_at": "2015-05-02T03:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243081",
    "user": "vbraun"
}
```

You can't just ask customers what they want and then try to give that to them (Steve Jobs)



---

archive/issue_comments_243082.json:
```json
{
    "body": "> You can't just ask customers what they want and then try to give that to them (Steve Jobs)\n\nIf you want, in this ticket we can finalize the implementation of this gadget of yours, only it will not be the default. If so, what about the list of things that are automatically plotted \"when the flag is enabled\"?\n\nThe mechanism of `DiplayPreferences` for ech backend isn't bad really. Even though I am not a big fan of automatic pictures either.\n\nNathann",
    "created_at": "2015-05-02T05:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243082",
    "user": "ncohen"
}
```

> You can't just ask customers what they want and then try to give that to them (Steve Jobs)

If you want, in this ticket we can finalize the implementation of this gadget of yours, only it will not be the default. If so, what about the list of things that are automatically plotted "when the flag is enabled"?

The mechanism of `DiplayPreferences` for ech backend isn't bad really. Even though I am not a big fan of automatic pictures either.

Nathann



---

archive/issue_comments_243083.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-03T16:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243083",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243084.json:
```json
{
    "body": "Here is a list of objects that IMHO should be plotted by default if the object is simple enough and if the graphics can be displayed inline:\n* braids and knots\n* polygons, fans (2d only)\n* audio files (sage.media.wav)\n* time-series finance data\n* posets\n* quivers\n* certain game configurations, knutson-tao, others?\nIn addition, wrapped graphics in some interfaces should be drawn graphically by default, e.g. the gnuplot interface. Though I think its premature to make a final decision, there are still some bits missing like javascript interactive output. Also, we need a better framework for supplementing plain text with graphics vs. only showing graphics. The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.\n\nI've added a workaround for dynkin diagrams until we get to #18328. IMHO this is enough for one ticket.",
    "created_at": "2015-05-03T16:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243084",
    "user": "vbraun"
}
```

Here is a list of objects that IMHO should be plotted by default if the object is simple enough and if the graphics can be displayed inline:
* braids and knots
* polygons, fans (2d only)
* audio files (sage.media.wav)
* time-series finance data
* posets
* quivers
* certain game configurations, knutson-tao, others?
In addition, wrapped graphics in some interfaces should be drawn graphically by default, e.g. the gnuplot interface. Though I think its premature to make a final decision, there are still some bits missing like javascript interactive output. Also, we need a better framework for supplementing plain text with graphics vs. only showing graphics. The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.

I've added a workaround for dynkin diagrams until we get to #18328. IMHO this is enough for one ticket.



---

archive/issue_comments_243085.json:
```json
{
    "body": "A more general name for the option might be `extra_graphics` instead of `plot_graphs`. Or maybe `supplemental_graphics`?",
    "created_at": "2015-05-03T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243085",
    "user": "vbraun"
}
```

A more general name for the option might be `extra_graphics` instead of `plot_graphs`. Or maybe `supplemental_graphics`?



---

archive/issue_comments_243086.json:
```json
{
    "body": "Hellooooooooooooooooooo,\n\n> Here is a list of objects that IMHO should be plotted by default if the object is simple enough and if the graphics can be displayed inline:\n\nSounds good. Why do you think we should *not* render small 3D objects too?\n\n> The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.\n\nHmmmmm. I am afraid that such decisions could have to be made locally, for each specific object `:-/`\n\n> I've added a workaround for dynkin diagrams until we get to #18328. IMHO this is enough for one ticket.\n\nI would like the graphs to not be the only objects that are automatically plotted. I will write a commit for `Posets`, `Quivers` and `Polygons`. Perhaps Braids and Knots too, if I figure out how it works inside.\n\n> A more general name for the option might be `extra_graphics` instead of `plot_graphs`. Or maybe `supplemental_graphics`?\n\nWhat about `draw_graphics` or `plot_graphics` ?\n\nNathann",
    "created_at": "2015-05-03T16:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243086",
    "user": "ncohen"
}
```

Hellooooooooooooooooooo,

> Here is a list of objects that IMHO should be plotted by default if the object is simple enough and if the graphics can be displayed inline:

Sounds good. Why do you think we should *not* render small 3D objects too?

> The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.

Hmmmmm. I am afraid that such decisions could have to be made locally, for each specific object `:-/`

> I've added a workaround for dynkin diagrams until we get to #18328. IMHO this is enough for one ticket.

I would like the graphs to not be the only objects that are automatically plotted. I will write a commit for `Posets`, `Quivers` and `Polygons`. Perhaps Braids and Knots too, if I figure out how it works inside.

> A more general name for the option might be `extra_graphics` instead of `plot_graphs`. Or maybe `supplemental_graphics`?

What about `draw_graphics` or `plot_graphics` ?

Nathann



---

archive/issue_comments_243087.json:
```json
{
    "body": "Oh. And also, plotting should *not* be the default in the notebook either, considering the latest posts on sage-devel. I have no strong objection myself, but please convince them first before doing that.",
    "created_at": "2015-05-03T17:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243087",
    "user": "ncohen"
}
```

Oh. And also, plotting should *not* be the default in the notebook either, considering the latest posts on sage-devel. I have no strong objection myself, but please convince them first before doing that.



---

archive/issue_comments_243088.json:
```json
{
    "body": "Plotting graphs was the default in SageNB, its also the default in Mathematica (https://reference.wolfram.com/language/ref/Graph.html). Nobody objected to plotting graphs in the notebook, they all mistakenly assumed that you were talking about the commandline interface.",
    "created_at": "2015-05-03T17:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243088",
    "user": "vbraun"
}
```

Plotting graphs was the default in SageNB, its also the default in Mathematica (https://reference.wolfram.com/language/ref/Graph.html). Nobody objected to plotting graphs in the notebook, they all mistakenly assumed that you were talking about the commandline interface.



---

archive/issue_comments_243089.json:
```json
{
    "body": "Replying to [comment:99 ncohen]:\n> Sounds good. Why do you think we should *not* render small 3D objects too?\n\nBasically because our 3d graphics sucks too hard right now.\n\n\n> > The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.\n> Hmmmmm. I am afraid that such decisions could have to be made locally, for each specific object `:-/`\n\nYes, but that is a feature. The object itself knows best how to display itself.\n\n> What about `draw_graphics` or `plot_graphics`?\n\nThe names don't capture the behavior of \"graphics if it can be displayed unobtrusively\"",
    "created_at": "2015-05-03T17:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243089",
    "user": "vbraun"
}
```

Replying to [comment:99 ncohen]:
> Sounds good. Why do you think we should *not* render small 3D objects too?

Basically because our 3d graphics sucks too hard right now.


> > The rich output should probably in general have a flag to show rich output in addition to plain text vs. only show the rich output.
> Hmmmmm. I am afraid that such decisions could have to be made locally, for each specific object `:-/`

Yes, but that is a feature. The object itself knows best how to display itself.

> What about `draw_graphics` or `plot_graphics`?

The names don't capture the behavior of "graphics if it can be displayed unobtrusively"



---

archive/issue_comments_243090.json:
```json
{
    "body": "Helloooooooo,\n\n> Basically because our 3d graphics sucks too hard right now.\n\nOh.\n\n> The names don't capture the behavior of \"graphics if it can be displayed unobtrusively\"\n\nShould the name of the parameter capture it? Right now it can be set to 'always'. It is the value that `plot_graphs` takes that should carry the meaning of \"if it is small\".\n\nWhat about renaming the parameter to `graphical_rich_repr`, taking values like `never`, `always`, `when_unobtrusive` (I am not a smart man\u2122). I also believe that it would be better to work with `if value == 'always' or value == 'when_unobtrusive'` rather than `if value != 'never'`. We don't know what will happen with this parameter.\n\n> Plotting graphs was the default in SageNB, its\n> also the default in Mathematica \n> (\u200bhttps://reference.wolfram.com/language/ref/Graph.html).\n\nWell, this branch is not about SageNB but about the notebook, and the notebook behaves like Sage does on this respect.\n\n> Nobody objected to plotting graphs in the notebook, \n> they all mistakenly assumed that you were talking about the\n> commandline interface.\n\nEven if that were true, that would not mean that their 'no' should be taken as a \"yes, let the notebook plot small objects automatically\". If you think that they don't mind this change, mail to sage-devel and ask them again. \n\nI just don't want to give a positive review to a change when a question was asked and people said \"don't do it\". That's all.\n\nI added a small commit at public/18289 for a `_rich_repr_` in Posets and Polyhedra. I was not able to find the Quiver class [1]. It is mostly a copy/paste of your code for graphs.\n\nNathann\n\n[1] By the way what is this?\nhttp://www.sagemath.org/doc/reference/quivers/index.html\nhttp://www.sagemath.org/doc/reference/combinat/sage/combinat/cluster_algebra_quiver/quiver.html",
    "created_at": "2015-05-03T17:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243090",
    "user": "ncohen"
}
```

Helloooooooo,

> Basically because our 3d graphics sucks too hard right now.

Oh.

> The names don't capture the behavior of "graphics if it can be displayed unobtrusively"

Should the name of the parameter capture it? Right now it can be set to 'always'. It is the value that `plot_graphs` takes that should carry the meaning of "if it is small".

What about renaming the parameter to `graphical_rich_repr`, taking values like `never`, `always`, `when_unobtrusive` (I am not a smart man™). I also believe that it would be better to work with `if value == 'always' or value == 'when_unobtrusive'` rather than `if value != 'never'`. We don't know what will happen with this parameter.

> Plotting graphs was the default in SageNB, its
> also the default in Mathematica 
> (​https://reference.wolfram.com/language/ref/Graph.html).

Well, this branch is not about SageNB but about the notebook, and the notebook behaves like Sage does on this respect.

> Nobody objected to plotting graphs in the notebook, 
> they all mistakenly assumed that you were talking about the
> commandline interface.

Even if that were true, that would not mean that their 'no' should be taken as a "yes, let the notebook plot small objects automatically". If you think that they don't mind this change, mail to sage-devel and ask them again. 

I just don't want to give a positive review to a change when a question was asked and people said "don't do it". That's all.

I added a small commit at public/18289 for a `_rich_repr_` in Posets and Polyhedra. I was not able to find the Quiver class [1]. It is mostly a copy/paste of your code for graphs.

Nathann

[1] By the way what is this?
http://www.sagemath.org/doc/reference/quivers/index.html
http://www.sagemath.org/doc/reference/combinat/sage/combinat/cluster_algebra_quiver/quiver.html



---

archive/issue_comments_243091.json:
```json
{
    "body": "Replying to [comment:103 ncohen]:\n> Should the name of the parameter capture it? Right now it can be set to 'always'. It is the value that `plot_graphs` takes that should carry the meaning of \"if it is small\".\n\nPreferences have a default behavior. In this case the default is to let the object decide, which is useful for most user interfaces. The commandline is a special case in that it is a non-graphical UI.\n\n> What about renaming the parameter to `graphical_rich_repr`\n\nNo ;-) For starters, that sounds like it would apply to plots.\n\nI think the case where you want to display plain text + graphics is precisely where you don't want the graphics if it cannot be displayed inline. So rename `plot_graphs` to `supplemental_graphics`, and enhance the rich output system to have a flag for replacing text vs. supplementing text (ideally in another ticket)\n\n> > Plotting graphs was the default in SageNB, its\n> > also the default in Mathematica \n> > (\u200bhttps://reference.wolfram.com/language/ref/Graph.html).\n> \n> Well, this branch is not about SageNB but about the notebook, and the notebook behaves like Sage does on this respect.\n\nTHE notebook is still SageNB, which is the default for `sage --notebook`. The IPython notebook is still work in progress, in part because the rich output system is not finished. Any previous behavior of the IPython notebook is a bug unless noted otherwise. The IPython notebook is finished when it becomes the default.\n\n> [1] By the way what is this?\n> http://www.sagemath.org/doc/reference/quivers/index.html\n> http://www.sagemath.org/doc/reference/combinat/sage/combinat/cluster_algebra_quiver/quiver.html\n\nThats what I meant. Simon also has a ticket with more quiver stuff somewhere on trac.",
    "created_at": "2015-05-03T18:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243091",
    "user": "vbraun"
}
```

Replying to [comment:103 ncohen]:
> Should the name of the parameter capture it? Right now it can be set to 'always'. It is the value that `plot_graphs` takes that should carry the meaning of "if it is small".

Preferences have a default behavior. In this case the default is to let the object decide, which is useful for most user interfaces. The commandline is a special case in that it is a non-graphical UI.

> What about renaming the parameter to `graphical_rich_repr`

No ;-) For starters, that sounds like it would apply to plots.

I think the case where you want to display plain text + graphics is precisely where you don't want the graphics if it cannot be displayed inline. So rename `plot_graphs` to `supplemental_graphics`, and enhance the rich output system to have a flag for replacing text vs. supplementing text (ideally in another ticket)

> > Plotting graphs was the default in SageNB, its
> > also the default in Mathematica 
> > (​https://reference.wolfram.com/language/ref/Graph.html).
> 
> Well, this branch is not about SageNB but about the notebook, and the notebook behaves like Sage does on this respect.

THE notebook is still SageNB, which is the default for `sage --notebook`. The IPython notebook is still work in progress, in part because the rich output system is not finished. Any previous behavior of the IPython notebook is a bug unless noted otherwise. The IPython notebook is finished when it becomes the default.

> [1] By the way what is this?
> http://www.sagemath.org/doc/reference/quivers/index.html
> http://www.sagemath.org/doc/reference/combinat/sage/combinat/cluster_algebra_quiver/quiver.html

Thats what I meant. Simon also has a ticket with more quiver stuff somewhere on trac.



---

archive/issue_comments_243092.json:
```json
{
    "body": "Probably better name: `supplemental_plot` to clarify that we are talking about plotting...",
    "created_at": "2015-05-03T18:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243092",
    "user": "vbraun"
}
```

Probably better name: `supplemental_plot` to clarify that we are talking about plotting...



---

archive/issue_comments_243093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-04T15:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243093",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243094.json:
```json
{
    "body": "Yoooooooo !\n\nDo you plan to add more `_rich_repr_` functions in this ticket?",
    "created_at": "2015-05-04T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243094",
    "user": "ncohen"
}
```

Yoooooooo !

Do you plan to add more `_rich_repr_` functions in this ticket?



---

archive/issue_comments_243095.json:
```json
{
    "body": "No. I'll work on unrelated build system stuff in the next couple of days.",
    "created_at": "2015-05-04T15:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243095",
    "user": "vbraun"
}
```

No. I'll work on unrelated build system stuff in the next couple of days.



---

archive/issue_comments_243096.json:
```json
{
    "body": "Okay. So can I (or you) set 'supplemental_plot' to 'never' everywhere so that this branch can be merged?",
    "created_at": "2015-05-04T15:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243096",
    "user": "ncohen"
}
```

Okay. So can I (or you) set 'supplemental_plot' to 'never' everywhere so that this branch can be merged?



---

archive/issue_comments_243097.json:
```json
{
    "body": "How about a one-year deprecation before we change the behavior away from the current SageNB feature of pictorially displaying a graph?",
    "created_at": "2015-05-04T16:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243097",
    "user": "vbraun"
}
```

How about a one-year deprecation before we change the behavior away from the current SageNB feature of pictorially displaying a graph?



---

archive/issue_comments_243098.json:
```json
{
    "body": "At the most I'd be OK with making \"never\" the default everywhere except the IPython notebook.",
    "created_at": "2015-05-04T16:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243098",
    "user": "vbraun"
}
```

At the most I'd be OK with making "never" the default everywhere except the IPython notebook.



---

archive/issue_comments_243099.json:
```json
{
    "body": "> How about a one-year deprecation before we change the behavior away from the current SageNB feature of pictorially displaying a graph?\n\nYou have been hinting at this several times but I do not understand: if you type `graphs.PetersenGraph()` in a notebook running a release which is not beta3, you will *not* get a picture, will you? So what would there be to deprecate?\n\nNathann",
    "created_at": "2015-05-04T16:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243099",
    "user": "ncohen"
}
```

> How about a one-year deprecation before we change the behavior away from the current SageNB feature of pictorially displaying a graph?

You have been hinting at this several times but I do not understand: if you type `graphs.PetersenGraph()` in a notebook running a release which is not beta3, you will *not* get a picture, will you? So what would there be to deprecate?

Nathann



---

archive/issue_comments_243100.json:
```json
{
    "body": "You do get a picture (if the \"typeset\" checkbox is checked)",
    "created_at": "2015-05-04T16:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243100",
    "user": "vbraun"
}
```

You do get a picture (if the "typeset" checkbox is checked)



---

archive/issue_comments_243101.json:
```json
{
    "body": "> You do get a picture (if the \"typeset\" checkbox is checked)\n\nOh. The LaTeX picture I expect? This picture is totally different from the one you get when you run `.plot()`. The 'typeset' checkbox is unchecked by default, isn't it?",
    "created_at": "2015-05-04T16:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243101",
    "user": "ncohen"
}
```

> You do get a picture (if the "typeset" checkbox is checked)

Oh. The LaTeX picture I expect? This picture is totally different from the one you get when you run `.plot()`. The 'typeset' checkbox is unchecked by default, isn't it?



---

archive/issue_comments_243102.json:
```json
{
    "body": "Replying to [comment:111 vbraun]:\n> At the most I'd be OK with making \"never\" the default everywhere except the IPython notebook. \n\nLet's please keep defaults in different notebooks as close to each other as it is feasible...",
    "created_at": "2015-05-04T16:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243102",
    "user": "novoselt"
}
```

Replying to [comment:111 vbraun]:
> At the most I'd be OK with making "never" the default everywhere except the IPython notebook. 

Let's please keep defaults in different notebooks as close to each other as it is feasible...



---

archive/issue_comments_243103.json:
```json
{
    "body": "Replying to [comment:114 ncohen]:\n> The LaTeX picture I expect?\n\nYes. Its perhaps ill-advised that it used the latex picture unconditionally (fixed in this ticket) but its a picture nevertheless.",
    "created_at": "2015-05-04T16:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243103",
    "user": "vbraun"
}
```

Replying to [comment:114 ncohen]:
> The LaTeX picture I expect?

Yes. Its perhaps ill-advised that it used the latex picture unconditionally (fixed in this ticket) but its a picture nevertheless.



---

archive/issue_comments_243104.json:
```json
{
    "body": "> > The LaTeX picture I expect?\n> \n> Yes. Its perhaps ill-advised that it used the latex picture unconditionally (fixed in this ticket) but its a picture nevertheless.\n\nIt is a picture indeed. The default behaviour, however, is to not display any. That is also consistent with Sage in command-line, and with Sage Math Cloud. So what about not changing that with this branch?\n\nLet us set this this 'supplemental_plot' variable to 'never' everywhere, and if you want to change this eventually please ask on sage-devel first.\n\nNathann",
    "created_at": "2015-05-04T16:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243104",
    "user": "ncohen"
}
```

> > The LaTeX picture I expect?
> 
> Yes. Its perhaps ill-advised that it used the latex picture unconditionally (fixed in this ticket) but its a picture nevertheless.

It is a picture indeed. The default behaviour, however, is to not display any. That is also consistent with Sage in command-line, and with Sage Math Cloud. So what about not changing that with this branch?

Let us set this this 'supplemental_plot' variable to 'never' everywhere, and if you want to change this eventually please ask on sage-devel first.

Nathann



---

archive/issue_comments_243105.json:
```json
{
    "body": "I disagree, a user interface that is less inviting than Mathematica to newcomers directly violates our mission statement.",
    "created_at": "2015-05-04T16:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243105",
    "user": "vbraun"
}
```

I disagree, a user interface that is less inviting than Mathematica to newcomers directly violates our mission statement.



---

archive/issue_comments_243106.json:
```json
{
    "body": "Poll at https://groups.google.com/forum/#!topic/sage-devel/GkG3SXXFKRQ",
    "created_at": "2015-05-04T16:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243106",
    "user": "vbraun"
}
```

Poll at https://groups.google.com/forum/#!topic/sage-devel/GkG3SXXFKRQ



---

archive/issue_comments_243107.json:
```json
{
    "body": "Excellent!",
    "created_at": "2015-05-04T18:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243107",
    "user": "ncohen"
}
```

Excellent!



---

archive/issue_comments_243108.json:
```json
{
    "body": "... though you could have easily been a bit less partial in the question `:-PPPP`",
    "created_at": "2015-05-04T18:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243108",
    "user": "ncohen"
}
```

... though you could have easily been a bit less partial in the question `:-PPPP`



---

archive/issue_comments_243109.json:
```json
{
    "body": "Okay, looks like everybody who has an opinion votes for it. Soooooo what do we do? Make it the default for Sage notebook+IPython notebook?\n\nNathann",
    "created_at": "2015-05-05T07:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243109",
    "user": "ncohen"
}
```

Okay, looks like everybody who has an opinion votes for it. Soooooo what do we do? Make it the default for Sage notebook+IPython notebook?

Nathann



---

archive/issue_comments_243110.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-05-06T09:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243110",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_243111.json:
```json
{
    "body": "Yes. Just as in the attached branch",
    "created_at": "2015-05-08T22:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243111",
    "user": "vbraun"
}
```

Yes. Just as in the attached branch



---

archive/issue_comments_243112.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-08T22:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243112",
    "user": "vbraun"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_243113.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-09T06:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243113",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_243114.json:
```json
{
    "body": "Oh. I expected to see a trace of it in some `backend_sagenb` file, but you apparently decided that the \"default interface\" for Sage was the notebook, and that all other interfaces (i.e. the comand line) was the one that had to be specified explicitly.\n\nI only hope that the command line will not silently 'inherit' in the future some of the notebook's behaviour.\n\nNathann",
    "created_at": "2015-05-09T06:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243114",
    "user": "ncohen"
}
```

Oh. I expected to see a trace of it in some `backend_sagenb` file, but you apparently decided that the "default interface" for Sage was the notebook, and that all other interfaces (i.e. the comand line) was the one that had to be specified explicitly.

I only hope that the command line will not silently 'inherit' in the future some of the notebook's behaviour.

Nathann



---

archive/issue_comments_243115.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-09T23:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18052#issuecomment-243115",
    "user": "vbraun"
}
```

Resolution: fixed
