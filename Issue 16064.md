# Issue 16064: bug in quotient() over integer coefficient ring

archive/issues_016064.json:
```json
{
    "body": "Keywords: bug quotient integer\n\nHello,\n\nthere is a bug in `quotient()` over integer coefficient ring.\nHere is an example:\n\n```\n R.<x,y,z>= ZZ[]\n I = Ideal( R(2), x*y, x*z + x)\n eD = Ideal( x, z^2-1)\n I.quotient(eD) //=0 , sage 6.2.rc1, Release Date: 2014-04-30\n // correct result: 2, x*z + x, x*y\n```\n\nThis is caused by a bug in Singular. It's probably already fixed in the inofficial(?) release \n(https://github.com/Singular/Sources/releases). \n\nBut there are other major bugs in Singular over integer coefficient ring (e.g. http://www.singular.uni-kl.de:8002/trac/ticket/540) which are only fixed in the recent development version.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16301\n\n",
    "created_at": "2014-05-07T09:46:55Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "bug in quotient() over integer coefficient ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16064",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```
Keywords: bug quotient integer

Hello,

there is a bug in `quotient()` over integer coefficient ring.
Here is an example:

```
 R.<x,y,z>= ZZ[]
 I = Ideal( R(2), x*y, x*z + x)
 eD = Ideal( x, z^2-1)
 I.quotient(eD) //=0 , sage 6.2.rc1, Release Date: 2014-04-30
 // correct result: 2, x*z + x, x*y
```

This is caused by a bug in Singular. It's probably already fixed in the inofficial(?) release 
(https://github.com/Singular/Sources/releases). 

But there are other major bugs in Singular over integer coefficient ring (e.g. http://www.singular.uni-kl.de:8002/trac/ticket/540) which are only fixed in the recent development version.

Issue created by migration from https://trac.sagemath.org/ticket/16301





---

archive/issue_comments_208874.json:
```json
{
    "body": "Changing keywords from \"bug quotient integer\" to \"bug quotient integer, singular\".",
    "created_at": "2014-05-10T09:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208874",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "bug quotient integer" to "bug quotient integer, singular".



---

archive/issue_events_048047.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-48047"
}
```



---

archive/issue_comments_208875.json:
```json
{
    "body": "It seems that the fix went downstream !\n\n```\nsage: R.<x,y,z>= ZZ[]\nsage: I = Ideal( R(2), x*y, x*z + x)\nsage: eD = Ideal( x, z^2-1)\nsage: I.quotient(eD)\nIdeal (2, x*z + x, x*y) of Multivariate Polynomial Ring in x, y, z over Integer Ring\n```\n\nSo let us add this as a test to ensure it will not reappear silently.\n\n`@`jakobkroeker do you want to make a patch or should i write it ?",
    "created_at": "2014-11-29T03:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208875",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

It seems that the fix went downstream !

```
sage: R.<x,y,z>= ZZ[]
sage: I = Ideal( R(2), x*y, x*z + x)
sage: eD = Ideal( x, z^2-1)
sage: I.quotient(eD)
Ideal (2, x*z + x, x*y) of Multivariate Polynomial Ring in x, y, z over Integer Ring
```

So let us add this as a test to ensure it will not reappear silently.

`@`jakobkroeker do you want to make a patch or should i write it ?



---

archive/issue_comments_208876.json:
```json
{
    "body": "> So let us add this as a test to ensure it will not reappear silently.\n> It seems that the fix went downstream !\n\n\nsage  updated to Singular 3.1.7 (recent version is 4.0.1) and it seems that this bug is fixed in 3.1.7. But there are many other bugs in functions for polynomial rings over integers, even in Singular 4.0.1.\n\n>`@`jakobkroeker do you want to make a patch or should i write it ? \n\n\n`@`tmonteil\n\nadded a test;\n\nIn general if everything was done properly, there should be tests in Singular,\nso sage could theoretically just run all Singular tests(how?) and see if something fails?",
    "created_at": "2014-12-09T19:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208876",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

> So let us add this as a test to ensure it will not reappear silently.
> It seems that the fix went downstream !


sage  updated to Singular 3.1.7 (recent version is 4.0.1) and it seems that this bug is fixed in 3.1.7. But there are many other bugs in functions for polynomial rings over integers, even in Singular 4.0.1.

>`@`jakobkroeker do you want to make a patch or should i write it ? 


`@`tmonteil

added a test;

In general if everything was done properly, there should be tests in Singular,
so sage could theoretically just run all Singular tests(how?) and see if something fails?



---

archive/issue_comments_208877.json:
```json
{
    "body": "This looks pretty good, i would add two coding convention advices:\n\n- There is a space before and after `=`, so just write `R.<x,y,z> = ZZ[]`\n- There is no space after `Ideal(`, so just write `I = Ideal(R(2), x*y, x*z + x)` and `eD = Ideal(x, z^2-1)`\n\nAlso, your patch should be based on the `develop` branch (currently `develop.6.5.beta2`, not `6.3`), so that we can see whether it works with the current code and so that the reviewer will not have to recompile a huge part of Sage twice to test the patch and go back to the `develop` branch ;)\n\nMoreover, with this patch applied, the test does not pass (look at the `sage -t` command) since on `6.3` the version of singular was buggy with respect to this test.",
    "created_at": "2014-12-09T22:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208877",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

This looks pretty good, i would add two coding convention advices:

- There is a space before and after `=`, so just write `R.<x,y,z> = ZZ[]`
- There is no space after `Ideal(`, so just write `I = Ideal(R(2), x*y, x*z + x)` and `eD = Ideal(x, z^2-1)`

Also, your patch should be based on the `develop` branch (currently `develop.6.5.beta2`, not `6.3`), so that we can see whether it works with the current code and so that the reviewer will not have to recompile a huge part of Sage twice to test the patch and go back to the `develop` branch ;)

Moreover, with this patch applied, the test does not pass (look at the `sage -t` command) since on `6.3` the version of singular was buggy with respect to this test.



---

archive/issue_comments_208878.json:
```json
{
    "body": "Replying to [comment:6 jakobkroeker]:\n> In general if everything was done properly, there should be tests in Singular,\n> so sage could theoretically just run all Singular tests(how?) and see if something fails?\n\n\nThere are two different things here.\n\nThis test is about Sage (which uses singular for that computation), and should remain valid if at some point another back end is used for that computation, so it is legitimate within Sage source code.\n\nThat said, Singular seems indeed to have its own tests, hence there should be a `spkg-check` script within `$SAGE_ROOT/build/pkgs/singular` directory that runs those tests (which seems currently not the case). See http://www.sagemath.org/doc/developer/packaging.html#self-tests for more details.",
    "created_at": "2014-12-09T22:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208878",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:6 jakobkroeker]:
> In general if everything was done properly, there should be tests in Singular,
> so sage could theoretically just run all Singular tests(how?) and see if something fails?


There are two different things here.

This test is about Sage (which uses singular for that computation), and should remain valid if at some point another back end is used for that computation, so it is legitimate within Sage source code.

That said, Singular seems indeed to have its own tests, hence there should be a `spkg-check` script within `$SAGE_ROOT/build/pkgs/singular` directory that runs those tests (which seems currently not the case). See http://www.sagemath.org/doc/developer/packaging.html#self-tests for more details.



---

archive/issue_comments_208879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-10T11:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208880.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-10T11:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208881.json:
```json
{
    "body": "`@`monteil\n\n> Also, your patch should be based on the develop branch (currently develop.6.5.beta2, not 6.3)\n\n\nHave no clue, why this happened  (initially I did a 'git checkout develop; git pull; make build;'\nthen i checked out the ticket using the dev scripts './sage --dev checkout --ticket=16301' and\n./sage showed me at start 'Sage Version 6.5.beta2', but indeed 'git diff develop' shows a lot of diffs.\n\nFixed with a git rebase and a forced push.",
    "created_at": "2014-12-10T11:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208881",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

`@`monteil

> Also, your patch should be based on the develop branch (currently develop.6.5.beta2, not 6.3)


Have no clue, why this happened  (initially I did a 'git checkout develop; git pull; make build;'
then i checked out the ticket using the dev scripts './sage --dev checkout --ticket=16301' and
./sage showed me at start 'Sage Version 6.5.beta2', but indeed 'git diff develop' shows a lot of diffs.

Fixed with a git rebase and a forced push.



---

archive/issue_comments_208882.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-10T15:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208882",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208883.json:
```json
{
    "body": "Everything looks good now, both tests and documentation display pass. I added what i guess is your full name on the \"Authors\" field (it is required to have the ticket merged), please change it if it not correct. You can also add yourself on the trac main page : http://trac.sagemath.org/",
    "created_at": "2014-12-10T15:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208883",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Everything looks good now, both tests and documentation display pass. I added what i guess is your full name on the "Authors" field (it is required to have the ticket merged), please change it if it not correct. You can also add yourself on the trac main page : http://trac.sagemath.org/



---

archive/issue_comments_208884.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-10T15:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208884",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_208885.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-12T12:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-208885",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048048.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-12T12:29:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-48048"
}
```
