# Issue 13053: Check if lattices are upper/lower-semimodular and modular

Issue created by migration from https://trac.sagemath.org/ticket/13225

Original creator: csar

Original creation time: 2012-07-10 23:37:08

Assignee: sage-combinat

Keywords: sd40

Add is_upper_semimodular, is_lower_semimodular and is_modular to FiniteLatticePoset class.


---

Comment by csar created at 2012-07-13 19:01:25

Changing status from new to needs_review.


---

Comment by chapoton created at 2012-11-05 12:58:32

apply trac_13225-add_upper_lower_semimodular_and_modular_for_lattices-csar.patch


---

Comment by chapoton created at 2012-12-18 20:54:24

Could you explain what you did in the hasse_diagram file ? What was the bug that you claim to correct ?


---

Comment by csar created at 2012-12-19 00:24:12

The issue in hasse_diagram was that taking the dual of the lattice somehow created a situation where the dual poset would attempt to take a join, but joins wouldn't be defined. 

For example, 


```
L = LatticePoset({0:[1,2,3],1:[4],2:[4],3:[4]})
P=L.dual()
x=P.random_element()
y=P.random_element()
P.join(x,y)
```


produces 


```
/Applications/sage-5.3/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in join(self, x, y)
    268         """
    269         i, j = map(self._element_to_vertex,(x,y))
--> 270         return self._vertex_to_element(self._hasse_diagram._join[i,j])
    271 
    272 ####################################################################################

AttributeError: 'HasseDiagram' object has no attribute '_join'
```


I must admit I no longer see why the code currently in sage fails to create ` _join ` when it's needed. (I realise I produced the example using 5.3, not 5.4. I don't have 5.4 to hand at the moment.)


---

Comment by chapoton created at 2012-12-19 19:21:32

Your example has the same behavior in 5.5.rc0.

You should add this example as a doctest, to check that this is no longer the case with the patch.


---

Comment by chapoton created at 2013-03-28 20:41:33

here is a rebased patch on 5.9.beta0

for the bot:

apply trac_13225-add_upper_lower_semimodular_and_modular_for_lattices-csar-v2.patch


---

Comment by chapoton created at 2013-03-29 08:33:15

One question :

are the two lines

```
if q==r: 
    continue 
```

(in the is_upper_semimodular method) really needed ?


---

Attachment

Ok, here is a new patch, with small changes and more doc.

It seems to be good to go, but let us first wait for the bot report.

apply trac_13225-add_upper_lower_semimodular_and_modular_for_lattices-csar-v2.patch


---

Comment by chapoton created at 2013-05-10 20:29:55

ok, positive review


---

Comment by chapoton created at 2013-05-10 20:29:55

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-05-13 13:25:38

Resolution: fixed
