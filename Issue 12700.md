# Issue 12700: A show method for permutations

Issue created by migration from https://trac.sagemath.org/ticket/12872

Original creator: ncohen

Original creation time: 2012-04-24 10:30:34

Assignee: sage-combinat

CC:  wdj fhivert sage-combinat

Following the discussion that took place there [1], this patch adds a .show() method to the Permutation class, to obtain drawings like the own we can see on the top-right corner of this page [2].

Nathann

[1] https://groups.google.com/d/topic/sage-combinat-devel/vdfE7iaJTxs/discussion
[2]


---

Comment by ncohen created at 2012-04-24 10:50:41

Now needs a review ! And comments too, if you do not agree with the patch `:-)`

Nathann


---

Comment by ncohen created at 2012-04-24 10:50:41

Changing status from new to needs_review.


---

Comment by wdj created at 2012-04-24 12:20:47

Testing now, but some comments:

(1) I don't understand the line 1166 (inversion_list = []). Am I missing something?

(2) In the examples, there is only one:-) What do you think of 
the following idea: In the examples, compare your graph with 
what you get using show BipartiteGraph, as below? Note the difference
in the orientation of the graph. (I prefer the orientation in the
bipartite graph plot personally.) Just food for thought. I'm attaching two plots, one is your plot, re-oriented to match the graph plot, and the other is the graph plot.


```
sage: p = Permutations(10).random_element(); p
[5, 10, 4, 8, 3, 1, 9, 6, 2, 7]
sage: E = [(i, 10+p(i)) for i in range(1,11)] 
sage: G = BipartiteGraph(E); G.show()         
sage: p.show()
sage: G = BipartiteGraph(E); G.show()
sage: p.show()     
```



---

Comment by wdj created at 2012-04-24 12:21:42

reoriented diagram plot


---

Attachment

bipartite example plot (same permutation as other plot)


---

Comment by ncohen created at 2012-04-24 12:33:35

> (1) I don't understand the line 1166 (inversion_list = []). Am I missing something?

*Sigh*

No, you are right `:-)`

> (2) In the examples, there is only one:-) What do you think of 
> the following idea: 

Right ! What do you think of this patch ? `:-)`

Nathann


---

Comment by ncohen created at 2012-04-24 12:41:24

Here it is !


---

Comment by wdj created at 2012-04-24 13:57:33

Replying to [comment:6 ncohen]:
> Here it is !

Thanks very much!
However, the labels (0-9) do not match the permutation set (1-10). Shouldn't they match?


---

Comment by ncohen created at 2012-04-24 13:59:36

Well, for me the problems is that permutations do not match the natural choice, which is 0-9 `:-P`

But you are right of course, and it is now fixed.

Nathann


---

Comment by hivert created at 2012-04-24 15:11:48

Hi Nathann,

Your drawing are very cool ! I'm not completely sure this is what I expected by typing `p.show()`. Maybe, it's worth asking on sage-combinat-devel for a better name. 

Florent


---

Comment by ncohen created at 2012-04-24 15:16:21

Well, I am not sure either and perhaps you have in mind another representation that would fit well in Permutation.show. What I know though, is that the drawing we have now would *NEVER* be found by an interested user unless it can be reached by Permutation.show (I do not even know if this drawing has a name, Jason says that the name he uses is non-standard, ...), and so the best for me is to have some arguments in Permutation.show() that would yield different kinds of drawings.

Do we get this patch inside of Sage while we wait for another type of drawing to be added ? I'm writing to sage-combinat-devel in the meantime !

Nathann


---

Attachment


---

Attachment


---

Attachment


---

Attachment

This last patch passed all tests on 5.0.b10. I like the drawings now:-)


---

Comment by dcoudert created at 2012-04-28 08:13:58

Hello,

I'm able to install the patch on 5.0.beta14, but shouldn't you had some tests to the function?

Also:

 * paralell -> parallel
 * why are you using "chord-diagram" instead of "circular"?
 * You could use capitalize() in tests to ease usage.


---

Comment by ncohen created at 2012-04-28 08:34:28

Hellooooooooo !!!

> but shouldn't you had some tests to the function?
Well, there are 4 ! Of course the image are not "checked", but the code is run anyway and nothing crashes.. That's more or less all we can do with the docstring system :-/

>  * paralell -> parallel

Arggggggggggggggggggggg !!!

>  * why are you using "chord-diagram" instead of "circular"?

Oh. Well, because it is the word that the guys from Sage-combinat picked the most naturally. I like permutations but that's their stuff much more than mine, so that they hold for True is true for me `:-D`

>  * You could use capitalize() in tests to ease usage.

Hmmmm. Well, I think that it had some meaning to do this for our LP solvers because we never know which letters should be upper case and which one are not (Gurobi or GUROBI ? Cplex or CPLEX), but let's not add a layer of administration to *all* the functions that take a parameter like that. I added a "else" statement though, so that there is an exception raised if the given string does not match any of the good ones. These arguments are always lower-case anyway.

Patch updated !

Nathann


---

Comment by dcoudert created at 2012-04-28 09:27:36

OK (install, tests, docbuild, etc.), so it remains to wait for answers from sage-combinat.


---

Comment by ncohen created at 2012-04-28 09:34:53

? To what do you expect answers ?


---

Comment by dcoudert created at 2012-04-28 09:36:36

It's written above: "Do we get this patch inside of Sage while we wait for another type of drawing to be added ? I'm writing to sage-combinat-devel in the meantime ! "

So what's the feedback?


---

Comment by ncohen created at 2012-04-28 10:03:15

Oh, sorry. Of course when you re-upload a patch all the previous times when you uploaded it disappear. Actually, in this patch there was at first only the "braid" drawing, and people on sage-combinat said that the most natural was to plot th disjoint union of circuits, and also the chord-diagram. So I updated my patch like that and the default drawing is now the circuit thing, with the braid only as an option. The braid was the only one implemented at first, and the only one I was personally interested in having `:-)`

Nathann


---

Comment by dcoudert created at 2012-04-28 10:15:00

I was about to give positive review when I saw line 1169 "orizontally". Please add an 'h' ;-)


---

Comment by ncohen created at 2012-04-28 10:16:58

Done !


---

Comment by dcoudert created at 2012-04-28 10:20:05

No!


---

Comment by ncohen created at 2012-04-28 10:21:32

Right... qrefresh `:-P`


---

Attachment


---

Comment by dcoudert created at 2012-04-28 10:23:55

Nice. For me the patch is OK, so I give positive review.
D.


---

Comment by dcoudert created at 2012-04-28 10:23:55

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2012-04-28 10:30:12

Thaaaaaaaaaaanks !!!

Nathann


---

Comment by stumpc5 created at 2012-05-01 09:55:24

Hi Natann,

thanks for working on that! Here are some further comments:

1. for the braid representation: I would think of options for orientation being X-to-Y for X,Y being top,bottom or bottom,top or left-right or right-left. Also, I think of a braid in a different way: order the inversions in some order (say lex) and then swap two strings at a time. This produces pictures like on the wiki page for the braid group, http://en.wikipedia.org/wiki/Braid_group.

2. A second way of drawing the chord diagram is by having two vertices (i,"in") and (i,"out") for each letter. The pic then becomes a matching of 2n points placed on a circle.

3. do you think of implementing the Rothe (or inversion) diagram Florent mentioned?

4. The one-line notation is also nice when just drawing arcs between points.

Maybe at least points 3 and 4 might only be worth implementing when doing it in latex/tikz - but this might also apply to 1.

Feel free to say that you don't want to do it, I might then start looking at it one day...

Best, Christian


---

Comment by ncohen created at 2012-05-02 09:41:08

Hellooooooo Christian !!

> 1. for the braid representation: I would think of options for orientation being X-to-Y for X,Y being top,bottom or bottom,top or left-right or right-left. Also, I think of a braid in a different way: order the inversions in some order (say lex) and then swap two strings at a time. This produces pictures like on the wiki page for the braid group, http://en.wikipedia.org/wiki/Braid_group.

You mean the kind of drawings produced by my patch on pseudolines (#12090) ? `:-P`

I will not code that twice, but that feature of pseudolines can be exposed in the .show method of course ! 

> 2. A second way of drawing the chord diagram is by having two vertices (i,"in") and (i,"out") for each letter. The pic then becomes a matching of 2n points placed on a circle.
> 
> 3. do you think of implementing the Rothe (or inversion) diagram Florent mentioned?
>
> 4. The one-line notation is also nice when just drawing arcs between points.

Actually I only needed to plot permutations as done by the initial patch, that is the ``algorithm="braid"`` version of the current patch. I implemented others because it did not seem to be the universal way to draw them but besides that I will stay as clear from graphical codes as I can `:-P`

Have fuuuuuuuuuuuuuuuuuuuuuuuuuuuun !!!

Nathann


---

Comment by jdemeyer created at 2012-05-06 12:20:08

Resolution: fixed
