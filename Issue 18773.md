# Issue 18773: Can't multiply an element of a group with an element of a subgroup

archive/issues_018773.json:
```json
{
    "body": "CC:  vittucek travis\n\nThis should work:\n\n\n```\nsage: G = WeylGroup(['B',3])\nsage: H = G.subgroup([G[14], G[17]])\nsage: H[0] * G[0]\nTraceback (most recent call last):\n...\nTypeError: unsupported operand parent(s) for '*': 'Matrix group over Rational Field with 2 generators (\n[ 0  0  1]  [ 0 -1  0]\n[-1  0  0]  [ 0  0 -1]\n[ 0  1  0], [ 1  0  0]\n)' and 'Weyl Group of type ['B', 3] (as a matrix group acting on the ambient space)'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19010\n\n",
    "created_at": "2015-08-10T18:33:07Z",
    "labels": [
        "group theory",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Can't multiply an element of a group with an element of a subgroup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18773",
    "user": "slabbe"
}
```
CC:  vittucek travis

This should work:


```
sage: G = WeylGroup(['B',3])
sage: H = G.subgroup([G[14], G[17]])
sage: H[0] * G[0]
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for '*': 'Matrix group over Rational Field with 2 generators (
[ 0  0  1]  [ 0 -1  0]
[-1  0  0]  [ 0  0 -1]
[ 0  1  0], [ 1  0  0]
)' and 'Weyl Group of type ['B', 3] (as a matrix group acting on the ambient space)'
```


Issue created by migration from https://trac.sagemath.org/ticket/19010





---

archive/issue_comments_256425.json:
```json
{
    "body": "Can you check if #24612 fixes your problem?",
    "created_at": "2018-07-05T08:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256425",
    "user": "jdemeyer"
}
```

Can you check if #24612 fixes your problem?



---

archive/issue_comments_256426.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> Can you check if #24612 fixes your problem?\n\nNope, it's still not working.\n\n\n```sage\nsage: sage: G = WeylGroup(['B',3])\n....: sage: H = G.subgroup([G[14], G[17]])\n....: sage: H[0] * G[0]\n....: \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-e452966a6c00> in <module>()\n      1 G = WeylGroup(['B',Integer(3)])\n      2 H = G.subgroup([G[Integer(14)], G[Integer(17)]])\n----> 3 H[Integer(0)] * G[Integer(0)]\n\n/home/vit/src/sage/local/lib/python2.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12224)()\n   1532             return (<Element>left)._mul_(right)\n   1533         if BOTH_ARE_ELEMENT(cl):\n-> 1534             return coercion_model.bin_op(left, right, mul)\n   1535 \n   1536         cdef long value\n\n/home/vit/src/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10875)()\n   1225         # We should really include the underlying error.\n   1226         # This causes so much headache.\n-> 1227         raise bin_op_exception(op, x, y)\n   1228 \n   1229     cpdef canonical_coercion(self, x, y):\n\nTypeError: unsupported operand parent(s) for *: 'Matrix group over Rational Field with 2 generators (\n[ 0  0  1]  [ 0 -1  0]\n[-1  0  0]  [ 0  0 -1]\n[ 0  1  0], [ 1  0  0]\n)' and 'Weyl Group of type ['B', 3] (as a matrix group acting on the ambient space)'\n\n```\n",
    "created_at": "2018-07-05T09:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256426",
    "user": "vittucek"
}
```

Replying to [comment:2 jdemeyer]:
> Can you check if #24612 fixes your problem?

Nope, it's still not working.


```sage
sage: sage: G = WeylGroup(['B',3])
....: sage: H = G.subgroup([G[14], G[17]])
....: sage: H[0] * G[0]
....: 
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-e452966a6c00> in <module>()
      1 G = WeylGroup(['B',Integer(3)])
      2 H = G.subgroup([G[Integer(14)], G[Integer(17)]])
----> 3 H[Integer(0)] * G[Integer(0)]

/home/vit/src/sage/local/lib/python2.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12224)()
   1532             return (<Element>left)._mul_(right)
   1533         if BOTH_ARE_ELEMENT(cl):
-> 1534             return coercion_model.bin_op(left, right, mul)
   1535 
   1536         cdef long value

/home/vit/src/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10875)()
   1225         # We should really include the underlying error.
   1226         # This causes so much headache.
-> 1227         raise bin_op_exception(op, x, y)
   1228 
   1229     cpdef canonical_coercion(self, x, y):

TypeError: unsupported operand parent(s) for *: 'Matrix group over Rational Field with 2 generators (
[ 0  0  1]  [ 0 -1  0]
[-1  0  0]  [ 0  0 -1]
[ 0  1  0], [ 1  0  0]
)' and 'Weyl Group of type ['B', 3] (as a matrix group acting on the ambient space)'

```




---

archive/issue_comments_256427.json:
```json
{
    "body": "OK, this is because they are matrix groups, while #24612 deals only with permutation groups.",
    "created_at": "2018-07-05T09:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256427",
    "user": "jdemeyer"
}
```

OK, this is because they are matrix groups, while #24612 deals only with permutation groups.



---

archive/issue_comments_256428.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-10T03:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256428",
    "user": "@DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_256429.json:
```json
{
    "body": "Testing on `CoCalc` shows that this was fixed in 8.8.  The PR just adds a doctest.\n----\nNew commits:",
    "created_at": "2020-05-10T03:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256429",
    "user": "@DaveWitteMorris"
}
```

Testing on `CoCalc` shows that this was fixed in 8.8.  The PR just adds a doctest.
----
New commits:



---

archive/issue_comments_256430.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-05-10T03:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256430",
    "user": "@DaveWitteMorris"
}
```

Changing priority from major to minor.



---

archive/issue_comments_256431.json:
```json
{
    "body": "please rather use\n\n```\nall(g*h in G and h*g in G for g in G for h in H)\n```\n",
    "created_at": "2020-05-10T07:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256431",
    "user": "chapoton"
}
```

please rather use

```
all(g*h in G and h*g in G for g in G for h in H)
```




---

archive/issue_comments_256432.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-10T08:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256432",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_256433.json:
```json
{
    "body": "Thanks. I'm not sufficiently fluent in python to write code like that on my own yet.",
    "created_at": "2020-05-10T08:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256433",
    "user": "@DaveWitteMorris"
}
```

Thanks. I'm not sufficiently fluent in python to write code like that on my own yet.



---

archive/issue_comments_256434.json:
```json
{
    "body": "Great! Someone knows in which ticket this was fixed?",
    "created_at": "2020-05-10T09:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256434",
    "user": "slabbe"
}
```

Great! Someone knows in which ticket this was fixed?



---

archive/issue_comments_256435.json:
```json
{
    "body": "After a bit of searching, I discovered that ticket:27468#comment:5 says \"This fixes #19010 as well\". Feel free to edit the comment in my PR to mention #27468, or tell me what should be done.",
    "created_at": "2020-05-10T16:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256435",
    "user": "@DaveWitteMorris"
}
```

After a bit of searching, I discovered that ticket:27468#comment:5 says "This fixes #19010 as well". Feel free to edit the comment in my PR to mention #27468, or tell me what should be done.



---

archive/issue_comments_256436.json:
```json
{
    "body": "nothing needs to be done. Good to go.",
    "created_at": "2020-05-10T18:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256436",
    "user": "chapoton"
}
```

nothing needs to be done. Good to go.



---

archive/issue_comments_256437.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-10T18:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256437",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_256438.json:
```json
{
    "body": "Replying to [comment:12 gh-DaveWitteMorris]:\n> After a bit of searching, I discovered that ticket:27468#comment:5 says \"This fixes #19010 as well\". Feel free to edit the comment in my PR to mention #27468, or tell me what should be done.\n\nThanks, I was simply curious. Nothing to do.",
    "created_at": "2020-05-11T18:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256438",
    "user": "slabbe"
}
```

Replying to [comment:12 gh-DaveWitteMorris]:
> After a bit of searching, I discovered that ticket:27468#comment:5 says "This fixes #19010 as well". Feel free to edit the comment in my PR to mention #27468, or tell me what should be done.

Thanks, I was simply curious. Nothing to do.



---

archive/issue_comments_256439.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-31T08:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18773#issuecomment-256439",
    "user": "vbraun"
}
```

Resolution: fixed
