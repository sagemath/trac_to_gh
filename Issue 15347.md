# Issue 15347: Some more affine crystals

archive/issues_015347.json:
```json
{
    "body": "CC:  sage-combinat aschilling bsalisbury1 andrew.mathas\n\nFor type A<sub>n</sub><sup>(1)</sup>. Implements:\n\n- the multipartition model for `B(\\lambda)` (Kleshchev multipartitions)\n- the BZ multisegment model for `B(\\infty)`\n- the affinization crystal of a U_q' crystal.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15584\n\n",
    "created_at": "2013-12-25T02:56:10Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "Some more affine crystals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15347",
    "user": "tscrim"
}
```
CC:  sage-combinat aschilling bsalisbury1 andrew.mathas

For type A<sub>n</sub><sup>(1)</sup>. Implements:

- the multipartition model for `B(\lambda)` (Kleshchev multipartitions)
- the BZ multisegment model for `B(\infty)`
- the affinization crystal of a U_q' crystal.

Issue created by migration from https://trac.sagemath.org/ticket/15584





---

archive/issue_comments_197745.json:
```json
{
    "body": "Set assignee to sage-combinat.",
    "created_at": "2013-12-25T02:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197745",
    "user": "tscrim"
}
```

Set assignee to sage-combinat.



---

archive/issue_comments_197746.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-28T04:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197746",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_197747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-04T18:15:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197747",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197748.json:
```json
{
    "body": "(must be adapted to #15882)\n\nNathann",
    "created_at": "2014-03-20T14:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197748",
    "user": "ncohen"
}
```

(must be adapted to #15882)

Nathann



---

archive/issue_comments_197749.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-16T01:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197749",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197750.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-16T01:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197750",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197751.json:
```json
{
    "body": "patchbot:\n\n```\nsage -t --long src/sage/combinat/rigged_configurations/kr_tableaux.py  # 1 doctest failed\nsage -t --long src/sage/combinat/crystals/affinization.py  # 1 doctest failed\nsage -t --long src/sage/schemes/plane_conics/con_rational_field.py  # Timed out\nlong time: 7 seconds ## line 148 ##\n```\n\nSuggest to set \"long\" for the last one.",
    "created_at": "2014-05-14T13:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197751",
    "user": "rws"
}
```

patchbot:

```
sage -t --long src/sage/combinat/rigged_configurations/kr_tableaux.py  # 1 doctest failed
sage -t --long src/sage/combinat/crystals/affinization.py  # 1 doctest failed
sage -t --long src/sage/schemes/plane_conics/con_rational_field.py  # Timed out
long time: 7 seconds ## line 148 ##
```

Suggest to set "long" for the last one.



---

archive/issue_comments_197752.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-14T13:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197752",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_197753.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-15T05:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197753",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197754.json:
```json
{
    "body": "This ticket has nothing to do with schemes and no bearing on that last doctest.",
    "created_at": "2014-05-15T05:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197754",
    "user": "tscrim"
}
```

This ticket has nothing to do with schemes and no bearing on that last doctest.



---

archive/issue_comments_197755.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-15T05:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197755",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_197756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-06T13:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197756",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197757.json:
```json
{
    "body": "Doesn't merge (note: I don't care about this ticket)",
    "created_at": "2014-10-01T08:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197757",
    "user": "jdemeyer"
}
```

Doesn't merge (note: I don't care about this ticket)



---

archive/issue_comments_197758.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-01T08:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197758",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_197759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-05T23:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197760.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-23T01:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197760",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197761.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-23T01:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197761",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_197762.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-23T20:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197762",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_197763.json:
```json
{
    "body": "Hi Travis,\n\nThere are still some things that need to be changed with the multipartition model and the multisegment model. Some highlights:\n\n- The Kleschev multipartition model and the JMMO multipartition model are closely related; perhaps both should be on the same ticket.  Moreover, the display of these partitions should include the residues in cells of the partitions so that the charge of the partition is clear to the user (though maybe you have added this already after we talked a while back).\n\n- There are two well-known crystal structures on multisegments, and they are related by the star-crystal operators.  The convention being used should be clear and probably even the star-crystal operators should be added.  In particular, see the 2009 paper by Jacon and Lecouvey in Pac. J. Math.  It is my personal opinion that the notation and structure of that paper is the one that should be followed for the implementation, including changing the data structure of the multisegments to use dictionaries of the form `{(interval) : coefficient}`.  \n\nI vaguely remember there being some additional changes, too, but I can't be more specific until I have time to delve deeper into the patch.\n\nBest,\nBen",
    "created_at": "2015-06-23T20:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197763",
    "user": "bsalisbury1"
}
```

Hi Travis,

There are still some things that need to be changed with the multipartition model and the multisegment model. Some highlights:

- The Kleschev multipartition model and the JMMO multipartition model are closely related; perhaps both should be on the same ticket.  Moreover, the display of these partitions should include the residues in cells of the partitions so that the charge of the partition is clear to the user (though maybe you have added this already after we talked a while back).

- There are two well-known crystal structures on multisegments, and they are related by the star-crystal operators.  The convention being used should be clear and probably even the star-crystal operators should be added.  In particular, see the 2009 paper by Jacon and Lecouvey in Pac. J. Math.  It is my personal opinion that the notation and structure of that paper is the one that should be followed for the implementation, including changing the data structure of the multisegments to use dictionaries of the form `{(interval) : coefficient}`.  

I vaguely remember there being some additional changes, too, but I can't be more specific until I have time to delve deeper into the patch.

Best,
Ben



---

archive/issue_comments_197764.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-04T03:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197764",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197765.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-04T14:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197765",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197766.json:
```json
{
    "body": "I have combined the Kleshchev partition crystal in with #20564.",
    "created_at": "2016-05-27T13:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197766",
    "user": "tscrim"
}
```

I have combined the Kleshchev partition crystal in with #20564.



---

archive/issue_comments_197767.json:
```json
{
    "body": "Changing keywords from \"\" to \"crystals, multisegments\".",
    "created_at": "2016-05-27T13:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197767",
    "user": "tscrim"
}
```

Changing keywords from "" to "crystals, multisegments".



---

archive/issue_comments_197768.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-17T18:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197768",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197769.json:
```json
{
    "body": "need to change the sort to use a sorting key",
    "created_at": "2017-04-17T18:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197769",
    "user": "chapoton"
}
```

need to change the sort to use a sorting key



---

archive/issue_comments_197770.json:
```json
{
    "body": "Done. I also removed `kleshchev.py` as that is now done in #15508.\n----\nNew commits:",
    "created_at": "2017-04-17T19:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197770",
    "user": "tscrim"
}
```

Done. I also removed `kleshchev.py` as that is now done in #15508.
----
New commits:



---

archive/issue_comments_197771.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-17T19:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197771",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_197772.json:
```json
{
    "body": "typo here:\n\n```\nCrystal of Bernstien-Zelevinsky\n```\n",
    "created_at": "2017-04-17T19:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197772",
    "user": "chapoton"
}
```

typo here:

```
Crystal of Bernstien-Zelevinsky
```




---

archive/issue_comments_197773.json:
```json
{
    "body": "otherwise, looks good. Once corrected, you can set to positive if a patchbot comes back green.",
    "created_at": "2017-04-17T19:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197773",
    "user": "chapoton"
}
```

otherwise, looks good. Once corrected, you can set to positive if a patchbot comes back green.



---

archive/issue_comments_197774.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-04-17T20:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197774",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_197775.json:
```json
{
    "body": "Ben and I are doing a little bit more work on this right now.",
    "created_at": "2017-04-17T20:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197775",
    "user": "tscrim"
}
```

Ben and I are doing a little bit more work on this right now.



---

archive/issue_comments_197776.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-17T20:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197776",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_197777.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-17T22:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197777",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197778.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-17T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197778",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_197779.json:
```json
{
    "body": "Ben, I've decided to keep the original data structure because it is easier to work with and less manipulations are needed to pass around the data (and maybe because I'm just lazy too). This is probably faster too because we don't have to sort on every crystal operator (and new objects should be relatively quick to sort because they started nearly sorted).\n\nI've made a few small tweaks to Ben's expanded documentation, beyond changing the repr/latex to use linear combinations (this was the last big thing Ben wanted). So only my few changes left to check.",
    "created_at": "2017-04-17T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197779",
    "user": "tscrim"
}
```

Ben, I've decided to keep the original data structure because it is easier to work with and less manipulations are needed to pass around the data (and maybe because I'm just lazy too). This is probably faster too because we don't have to sort on every crystal operator (and new objects should be relatively quick to sort because they started nearly sorted).

I've made a few small tweaks to Ben's expanded documentation, beyond changing the repr/latex to use linear combinations (this was the last big thing Ben wanted). So only my few changes left to check.



---

archive/issue_comments_197780.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-17T23:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197780",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197781.json:
```json
{
    "body": "The weight function was missing a negative sign and there was a doctest failure in `highest_weight_crystals`.  Both are fixed now.\n\nThanks, Travis, for getting this finished!",
    "created_at": "2017-04-17T23:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197781",
    "user": "bsalisbury1"
}
```

The weight function was missing a negative sign and there was a doctest failure in `highest_weight_crystals`.  Both are fixed now.

Thanks, Travis, for getting this finished!



---

archive/issue_comments_197782.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-17T23:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197782",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197783.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-17T23:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197783",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_197784.json:
```json
{
    "body": "Thank you both for doing the review.",
    "created_at": "2017-04-18T00:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197784",
    "user": "tscrim"
}
```

Thank you both for doing the review.



---

archive/issue_comments_197785.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15347#issuecomment-197785",
    "user": "vbraun"
}
```

Resolution: fixed
