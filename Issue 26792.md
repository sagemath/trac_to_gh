# Issue 26792: Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()

Issue created by migration from https://trac.sagemath.org/ticket/27029

Original creator: jdemeyer

Original creation time: 2019-01-07 15:50:49

CC:  dcoudert




---

Comment by jdemeyer created at 2019-01-07 16:00:52

New commits:


---

Comment by jdemeyer created at 2019-01-07 16:00:52

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-01-07 18:04:15

This breaks stuff in root systems:

```
sage -t --long src/sage/combinat/root_system/extended_affine_weyl_group.py  # 404 doctests failed
sage -t --long src/sage/combinat/root_system/cartan_type.py  # 6 doctests failed
sage -t --long src/sage/categories/magmas.py  # 3 doctests failed
sage -t --long src/sage/combinat/root_system/fundamental_group.py  # 118 doctests failed
sage -t --long src/doc/en/thematic_tutorials/lie/affine.rst  # 1 doctest failed
```

It looks like it has to do with computing the orbit of `0` in the Dynkin diagram (think special edge-labeled directed graphs) and the `DynkinDiagram.relabel` method must take one parameter.


---

Comment by tscrim created at 2019-01-07 18:04:28

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2019-01-08 09:40:43

The problem is that `DynkinDiagram_class` decided to provide a `relabel()` method with a different interface than the base graph class.


---

Comment by jdemeyer created at 2019-01-08 11:14:41

Changing status from needs_work to needs_review.


---

Comment by git created at 2019-01-08 11:17:00

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-08 15:39:43

Green patchbot!


---

Comment by tscrim created at 2019-01-08 17:53:38

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-01-08 17:53:38

LGTM (assuming any further changes on #27033 do not affect this ticket).


---

Comment by git created at 2019-01-11 08:12:18

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-01-11 08:12:18

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-11 08:13:39

I removed the commit #27033 from this ticket because that will likely change. But the dependency is still here, so it won't be merged before #27033.


---

Comment by jdemeyer created at 2019-01-11 08:13:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2019-01-11 10:41:56

Let's wait until #27033 has positive review.


---

Comment by jdemeyer created at 2019-01-11 10:41:56

Changing status from positive_review to needs_info.


---

Comment by git created at 2019-01-14 16:50:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-14 17:10:31

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2019-01-14 19:18:01

LGTM. Thanks.


---

Comment by tscrim created at 2019-01-14 19:18:01

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-01-15 18:16:10

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.


---

Comment by jdemeyer created at 2019-01-25 16:42:55

Changing status from positive_review to needs_work.


---

Comment by git created at 2019-01-28 09:08:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-28 09:13:01

New attempt. The code is now closer to what it used to be: whenever the set of vertices (in any order) equals `range(G.order())`, I don't relabel. I also added a comment why:

```
    # Do not relabel if the set of vertices is equal to the set
    # range(n). This helps to ensure that *equal* graphs on range(n)
    # yield *equal* (not just isomorphic) canonical labelings. This
    # is just a convenience, there is no mathematical meaning.
```



---

Comment by jdemeyer created at 2019-01-28 09:13:01

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-01-29 01:02:22

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-01-29 01:02:22

Works for me.


---

Comment by vbraun created at 2019-02-04 23:02:32

Resolution: fixed
