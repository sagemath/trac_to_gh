# Issue 25997: Run new SPKG builds in CI

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-09-10 16:20:47

CC:  saraedum slelievre vbraun jdemeyer

I think we've mentioned this before but there wasn't a ticket for it.  In the new CI builds, builds that add a new SPKG will fail because the source tarball won't be found on any of the Sage mirrors.  See e.g. https://gitlab.com/sagemath/dev/trac/-/jobs/96277880

I'm not wild about this system in general--I think there should be an alternate download link in the package's metadata for the upstream sources that we can fall back on if a file is not found on any Sage mirrors.

But regardless how the problem is solved, it should be solved.  The Sage Patchbot actually has some bits for checking whether an SPKG is updated, and also reading the relevant Trac ticket to determine the upstream tarball URL.  We could adapt these bits to the CI scripts, maybe, though I'm not sure how they would get the right ticket number.


---

Comment by slelievre created at 2018-09-11 11:41:45

Cc-ing current release manager and his predecessor.


---

Comment by mkoeppe created at 2021-08-26 03:54:14

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-08-26 03:54:14

outdated, should close


---

Comment by slelievre created at 2021-08-26 10:04:11

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-08-26 10:04:11

Ok. Pushing a tag to a fork on GitHub launches GitHub Actions
which uses the `--enable-download-from-upstream-url` configure
flag and can therefore test package upgrades.


---

Comment by mkoeppe created at 2021-09-02 18:48:47

Resolution: invalid
