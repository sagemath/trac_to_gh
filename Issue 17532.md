# Issue 17532: sage -n ipython broken

archive/issues_017532.json:
```json
{
    "body": "CC:  fbissey rbeezer\n\nKeywords: notebook\n\nFrom 6.5.rc0 on,\n\n```\t\n    sage -n ipython\n```\n\ndoes no longer work, it starts the sagenb notebook with directory `ipython.sagenb`.\n\nUntil 6.5.beta6, this opened the ipython notebook.\n\n`sage -n -h` says:\n\n```\n   --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                        The notebook to run [one of: default, ipython,\n                        sagenb]. Default is sagenb\n```\n\n`sage -h` says\n\n```\n  -n, --notebook      -- shortcut for --notebook=default\n```\n\n\nSo these two bits of documentation contradict each other and we have a change of\nbehaviour.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17769\n\n",
    "created_at": "2015-02-11T13:40:18Z",
    "labels": [
        "scripts",
        "blocker",
        "PLEASE CHANGE"
    ],
    "title": "sage -n ipython broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17532",
    "user": "cheuberg"
}
```
CC:  fbissey rbeezer

Keywords: notebook

From 6.5.rc0 on,

```	
    sage -n ipython
```

does no longer work, it starts the sagenb notebook with directory `ipython.sagenb`.

Until 6.5.beta6, this opened the ipython notebook.

`sage -n -h` says:

```
   --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, ipython,
                        sagenb]. Default is sagenb
```

`sage -h` says

```
  -n, --notebook      -- shortcut for --notebook=default
```


So these two bits of documentation contradict each other and we have a change of
behaviour.

Issue created by migration from https://trac.sagemath.org/ticket/17769





---

archive/issue_comments_234069.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2015-02-11T13:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234069",
    "user": "cheuberg"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_234070.json:
```json
{
    "body": "I do not know whether this is intentional, especially after the discussions in #17280\nwhere we broke old behaviour already once.\n\nI guess that this has been introduced in #17685",
    "created_at": "2015-02-11T13:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234070",
    "user": "cheuberg"
}
```

I do not know whether this is intentional, especially after the discussions in #17280
where we broke old behaviour already once.

I guess that this has been introduced in #17685



---

archive/issue_comments_234071.json:
```json
{
    "body": "Replying to [comment:1 cheuberg]:\n> I guess that this has been introduced in #17685\n\nNo, the changes made here only concern the `-n=blah` calls, you can still do ` sage -n=ipython`.",
    "created_at": "2015-02-11T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234071",
    "user": "tmonteil"
}
```

Replying to [comment:1 cheuberg]:
> I guess that this has been introduced in #17685

No, the changes made here only concern the `-n=blah` calls, you can still do ` sage -n=ipython`.



---

archive/issue_comments_234072.json:
```json
{
    "body": "More precisely, the problem is here\n\n\n```\nif [ \"$1\" = \"-notebook\" -o \"$1\" = '--notebook' -o \"$1\" = '-n' ]; then\n    shift\n    sage-cleaner >/dev/null 2>&1 &\n    exec sage-notebook --notebook=default \"$@\"\nfi\n```\n\n\nIt was introduced in http://git.sagemath.org/sage.git/commit/?id=487807cdaaa32f8cf8090fa2271d8c5ac762252e\n\nAs you can see, the 'default' notebook is explicitly called (consistently with `sage -h`).\n\nCiao,\nThierry",
    "created_at": "2015-02-11T17:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234072",
    "user": "tmonteil"
}
```

More precisely, the problem is here


```
if [ "$1" = "-notebook" -o "$1" = '--notebook' -o "$1" = '-n' ]; then
    shift
    sage-cleaner >/dev/null 2>&1 &
    exec sage-notebook --notebook=default "$@"
fi
```


It was introduced in http://git.sagemath.org/sage.git/commit/?id=487807cdaaa32f8cf8090fa2271d8c5ac762252e

As you can see, the 'default' notebook is explicitly called (consistently with `sage -h`).

Ciao,
Thierry



---

archive/issue_comments_234073.json:
```json
{
    "body": "The previous if clause triggered before #17685, so it is technically caused by that ticket.\n\n----\nNew commits:",
    "created_at": "2015-02-11T21:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234073",
    "user": "vbraun"
}
```

The previous if clause triggered before #17685, so it is technically caused by that ticket.

----
New commits:



---

archive/issue_comments_234074.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-11T21:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234074",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_234075.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-11T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234075",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_234076.json:
```json
{
    "body": "After inspection of what sage-notebook can parse, it looks good to me.",
    "created_at": "2015-02-11T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234076",
    "user": "fbissey"
}
```

After inspection of what sage-notebook can parse, it looks good to me.



---

archive/issue_comments_234077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-13T01:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17532#issuecomment-234077",
    "user": "vbraun"
}
```

Resolution: fixed
