# Issue 17532: sage -n ipython broken

Issue created by migration from Trac.

Original creator: cheuberg

Original creation time: 2015-02-11 13:40:18

CC:  fbissey rbeezer

Keywords: notebook

From 6.5.rc0 on,
{{{	
    sage -n ipython
}}}
does no longer work, it starts the sagenb notebook with directory `ipython.sagenb`.

Until 6.5.beta6, this opened the ipython notebook.

`sage -n -h` says:

```
   --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, ipython,
                        sagenb]. Default is sagenb
```

`sage -h` says

```
  -n, --notebook      -- shortcut for --notebook=default
```


So these two bits of documentation contradict each other and we have a change of
behaviour.


---

Comment by cheuberg created at 2015-02-11 13:40:45

Changing type from PLEASE CHANGE to defect.


---

Comment by cheuberg created at 2015-02-11 13:40:45

I do not know whether this is intentional, especially after the discussions in #17280
where we broke old behaviour already once.

I guess that this has been introduced in #17685


---

Comment by tmonteil created at 2015-02-11 17:03:44

Replying to [comment:1 cheuberg]:
> I guess that this has been introduced in #17685

No, the changes made here only concern the `-n=blah` calls, you can still do ` sage -n=ipython`.


---

Comment by tmonteil created at 2015-02-11 17:22:40

More precisely, the problem is here


```
if [ "$1" = "-notebook" -o "$1" = '--notebook' -o "$1" = '-n' ]; then
    shift
    sage-cleaner >/dev/null 2>&1 &
    exec sage-notebook --notebook=default "$`@`"
fi
```


It was introduced in http://git.sagemath.org/sage.git/commit/?id=487807cdaaa32f8cf8090fa2271d8c5ac762252e

As you can see, the 'default' notebook is explicitly called (consistently with `sage -h`).

Ciao,
Thierry


---

Comment by vbraun created at 2015-02-11 21:15:04

The previous if clause triggered before #17685, so it is technically caused by that ticket.

----
New commits:


---

Comment by vbraun created at 2015-02-11 21:15:16

Changing status from new to needs_review.


---

Comment by fbissey created at 2015-02-11 21:29:26

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2015-02-11 21:29:26

After inspection of what sage-notebook can parse, it looks good to me.


---

Comment by vbraun created at 2015-02-13 01:08:22

Resolution: fixed
