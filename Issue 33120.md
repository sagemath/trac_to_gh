# Issue 33120: Random set partition with fixed block sizes does not respect the constraint

Issue created by migration from https://trac.sagemath.org/ticket/33357

Original creator: tscrim

Original creation time: 2022-02-16 03:03:35

CC:  chapoton darij mantepse

We have

```
sage: SP = SetPartitions(10, [4,3,2,1])
sage: SP.random_element()
{{1, 2, 4, 5, 7, 8}, {3, 6}, {9}, {10}}
```

This should not be the case.


---

Comment by tscrim created at 2022-02-16 03:50:57

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-02-16 03:50:57

Changing keywords from "" to "set partitions".


---

Comment by tscrim created at 2022-02-16 03:50:57

New commits:


---

Comment by mantepse created at 2022-02-16 07:09:04

Excellent, thank you!

I am split on the issue whether `SetPartitions` should sort its `part` argument, so let it be.


---

Comment by tscrim created at 2022-02-16 07:13:20

Replying to [comment:2 mantepse]:
> Excellent, thank you!
> 
> I am split on the issue whether `SetPartitions` should sort its `part` argument, so let it be.

I thought about this for a bit too. I don't see any harm in it, and it will likely improve the usability (or at least remove a surprise for a more casual user). I couldn't quite think of a reasonable scenario when passing things out of order would be considered a typo-type bug (if I have understood your comment correctly on sage-devel).


---

Comment by tscrim created at 2022-02-16 07:13:41

Also, green bot (morally). Should I interpret comment:2 as a positive review?


---

Comment by mantepse created at 2022-02-16 07:24:48

Changing status from needs_review to needs_work.


---

Comment by mantepse created at 2022-02-16 07:25:17

(I tested uniformity experimentally, just to make sure)


---

Comment by mantepse created at 2022-02-16 07:25:39

Changing status from needs_work to positive_review.


---

Comment by mantepse created at 2022-02-16 07:25:57

sorry, misclicked.  LGTM, you'd say :-)


---

Comment by tscrim created at 2022-02-16 07:26:58

Ah, okay. I was a bit confused if you had possibly instead meant "let it be" as "don't change it." `:)` Thank you for the review!


---

Comment by vbraun created at 2022-02-21 21:55:41

Resolution: fixed
