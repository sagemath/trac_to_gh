# Issue 18241: Fix comparison of equal newforms in different parents

Issue created by migration from Trac.

Original creator: pbruin

Original creation time: 2015-05-23 06:31:01

CC:  vdelecroix davidloeffler

Keywords: newform comparison

Two newforms that are identical but live in different parents (spaces of cusp forms for `Gamma0` versus `Gamma1`, or with versus without character) should be regarded as equal, but currently are not:

```
sage: f = Newforms(Gamma1(11), 2)[0]; f
q - 2*q^2 - q^3 + 2*q^4 + q^5 + O(q^6)
sage: g = Newforms(Gamma0(11), 2)[0]; g
q - 2*q^2 - q^3 + 2*q^4 + q^5 + O(q^6)
sage: f == g
False
```


```
sage: f = Newforms(DirichletGroup(4)[1], 5)[0]; f
q - 4*q^2 + 16*q^4 - 14*q^5 + O(q^6)
sage: g = Newforms(Gamma1(4), 5)[0]; g
q - 4*q^2 + 16*q^4 - 14*q^5 + O(q^6)
sage: f == g
False
```

This came up in comment:15:ticket:18061.  The current version of the `__eq__` method was written in #18068; I did not know about this bug then.

Comparison of modular forms of type `ModularFormElement` living in different parents is broken as well (see e.g. comment:9:ticket:18068), but this should probably dealt with on a different ticket, by properly implementing coercion for modular forms.


---

Comment by pbruin created at 2015-05-23 06:51:18

Changing status from new to needs_review.


---

Comment by davidloeffler created at 2015-06-09 13:15:55

Looks good to me.


---

Comment by davidloeffler created at 2015-06-09 13:15:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-06-11 13:50:45

Resolution: fixed
