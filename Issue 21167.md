# Issue 21167: Replace PyString_* by PyBytes_*

Issue created by migration from https://trac.sagemath.org/ticket/21404

Original creator: aapitzsch

Original creation time: 2016-09-02 21:41:08

CC:  chapoton

Functions are aliased in Python2 to help porting.

https://docs.python.org/2.7/c-api/string.html


---

Comment by aapitzsch created at 2016-09-02 21:59:38

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2016-09-02 21:59:38

New commits:


---

Comment by jdemeyer created at 2016-09-04 09:39:24

I'm not sure that replacing `str` by `bytes` is the right thing to do in general. Just one example:

```
cdef char *t_str = PyBytes_AsString(py_str)
```

are you sure that `py_str` will be of type `bytes` in Python 3?


---

Comment by jdemeyer created at 2016-09-04 09:44:44

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-09-04 09:44:44

And as you probably know, I prefer to consider this on a case-by-case basis instead of doing mass replacements.


---

Comment by aapitzsch created at 2016-09-12 13:37:05

New commits:


---

Comment by aapitzsch created at 2016-09-12 13:37:05

Changing status from needs_work to needs_review.


---

Comment by git created at 2016-09-12 14:20:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-09-12 14:40:31

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-09-12 14:40:31

Why not simply

```
cdef object dummy_object = "dummy"
```



---

Comment by jdemeyer created at 2016-09-12 14:49:21

Right, it is explained by the comment above.


---

Comment by jdemeyer created at 2016-09-12 14:49:21

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2016-09-16 06:55:17

Resolution: fixed
