# Issue 29360: Don't override LDFLAGS in m4rie

Issue created by migration from https://trac.sagemath.org/ticket/29597

Original creator: isuruf

Original creation time: 2020-04-27 03:51:36

CC:  mkoeppe

https://bitbucket.org/malb/m4rie/pull-requests/4/do-not-interfere-with-ldflags-while


---

Comment by isuruf created at 2020-04-27 03:51:44

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-04-27 03:53:47

This one won't work as is - need to patch Makefile.in as well


---

Comment by git created at 2020-04-27 04:15:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-27 04:24:45

Thanks!


---

Comment by mkoeppe created at 2020-04-27 14:41:31

This seems to break other platforms - https://github.com/mkoeppe/sage/actions/runs/88768093


---

Comment by mkoeppe created at 2020-04-27 14:41:31

Changing status from needs_review to needs_work.


---

Comment by isuruf created at 2020-04-27 14:48:51

Looks like the patch failed to apply


---

Comment by git created at 2020-04-27 14:55:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by isuruf created at 2020-04-27 14:56:11

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-04-27 17:46:10

Let me try


---

Comment by mkoeppe created at 2020-04-27 19:20:50

Hm... doesn't the release that we use already have this patch in?


---

Comment by mkoeppe created at 2020-04-27 19:21:50

https://github.com/mkoeppe/sage/runs/623414296

```
m4rie-20200115
====================================================
Setting up build directory for m4rie-20200115
Finished extraction
Applying patches from ../patches...
Applying ../patches/use_AM_LDLFAGS.patch
patching file Makefile.am
Hunk #1 FAILED at 2.
1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej
patching file Makefile.in
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
2 out of 2 hunks ignored -- saving rejects to file Makefile.in.rej
Error applying '../patches/use_AM_LDLFAGS.patch'
************************************************************************
```



---

Comment by mkoeppe created at 2020-04-28 03:15:49

Something indeed needs fixing


---

Comment by mkoeppe created at 2020-04-28 03:15:49

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-04-28 03:38:34

Squashed


---

Comment by git created at 2020-04-28 03:49:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-28 03:50:10

OK now it works!


---

Comment by mkoeppe created at 2020-04-28 03:50:18

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-04-29 04:25:23

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-05-01 05:51:48

Changing priority from major to critical.


---

Comment by vbraun created at 2020-05-04 06:41:21

Resolution: fixed
