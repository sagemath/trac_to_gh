# Issue 29360: Don't override LDFLAGS in m4rie

archive/issues_029360.json:
```json
{
    "body": "CC:  @mkoeppe\n\nhttps://bitbucket.org/malb/m4rie/pull-requests/4/do-not-interfere-with-ldflags-while\n\nIssue created by migration from https://trac.sagemath.org/ticket/29597\n\n",
    "created_at": "2020-04-27T03:51:36Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Don't override LDFLAGS in m4rie",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29360",
    "user": "https://github.com/isuruf"
}
```
CC:  @mkoeppe

https://bitbucket.org/malb/m4rie/pull-requests/4/do-not-interfere-with-ldflags-while

Issue created by migration from https://trac.sagemath.org/ticket/29597





---

archive/issue_comments_415892.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-27T03:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415892",
    "user": "https://github.com/isuruf"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_415893.json:
```json
{
    "body": "This one won't work as is - need to patch Makefile.in as well",
    "created_at": "2020-04-27T03:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415893",
    "user": "https://github.com/mkoeppe"
}
```

This one won't work as is - need to patch Makefile.in as well



---

archive/issue_comments_415894.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-27T04:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415895.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-04-27T04:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415895",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_415896.json:
```json
{
    "body": "This seems to break other platforms - https://github.com/mkoeppe/sage/actions/runs/88768093",
    "created_at": "2020-04-27T14:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415896",
    "user": "https://github.com/mkoeppe"
}
```

This seems to break other platforms - https://github.com/mkoeppe/sage/actions/runs/88768093



---

archive/issue_comments_415897.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-27T14:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415897",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_415898.json:
```json
{
    "body": "Looks like the patch failed to apply",
    "created_at": "2020-04-27T14:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415898",
    "user": "https://github.com/isuruf"
}
```

Looks like the patch failed to apply



---

archive/issue_comments_415899.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-27T14:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415900.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-27T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415900",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_415901.json:
```json
{
    "body": "Let me try",
    "created_at": "2020-04-27T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415901",
    "user": "https://github.com/mkoeppe"
}
```

Let me try



---

archive/issue_comments_415902.json:
```json
{
    "body": "Hm... doesn't the release that we use already have this patch in?",
    "created_at": "2020-04-27T19:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415902",
    "user": "https://github.com/mkoeppe"
}
```

Hm... doesn't the release that we use already have this patch in?



---

archive/issue_comments_415903.json:
```json
{
    "body": "https://github.com/mkoeppe/sage/runs/623414296\n\n```\nm4rie-20200115\n====================================================\nSetting up build directory for m4rie-20200115\nFinished extraction\nApplying patches from ../patches...\nApplying ../patches/use_AM_LDLFAGS.patch\npatching file Makefile.am\nHunk #1 FAILED at 2.\n1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej\npatching file Makefile.in\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n2 out of 2 hunks ignored -- saving rejects to file Makefile.in.rej\nError applying '../patches/use_AM_LDLFAGS.patch'\n************************************************************************\n```\n",
    "created_at": "2020-04-27T19:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415903",
    "user": "https://github.com/mkoeppe"
}
```

https://github.com/mkoeppe/sage/runs/623414296

```
m4rie-20200115
====================================================
Setting up build directory for m4rie-20200115
Finished extraction
Applying patches from ../patches...
Applying ../patches/use_AM_LDLFAGS.patch
patching file Makefile.am
Hunk #1 FAILED at 2.
1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej
patching file Makefile.in
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
2 out of 2 hunks ignored -- saving rejects to file Makefile.in.rej
Error applying '../patches/use_AM_LDLFAGS.patch'
************************************************************************
```




---

archive/issue_comments_415904.json:
```json
{
    "body": "Something indeed needs fixing",
    "created_at": "2020-04-28T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415904",
    "user": "https://github.com/mkoeppe"
}
```

Something indeed needs fixing



---

archive/issue_comments_415905.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-28T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415905",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_415906.json:
```json
{
    "body": "Squashed",
    "created_at": "2020-04-28T03:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415906",
    "user": "https://github.com/mkoeppe"
}
```

Squashed



---

archive/issue_comments_415907.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-28T03:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415908.json:
```json
{
    "body": "OK now it works!",
    "created_at": "2020-04-28T03:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415908",
    "user": "https://github.com/mkoeppe"
}
```

OK now it works!



---

archive/issue_comments_415909.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-28T03:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415909",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_415910.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-29T04:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415910",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415911.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-05-01T05:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415911",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_events_027126.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2020-05-04T06:41:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29360#event-27126"
}
```



---

archive/issue_comments_415912.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-04T06:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29360#issuecomment-415912",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
