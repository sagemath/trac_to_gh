# Issue 14401: Fix thread related ATLAS problems

Issue created by migration from https://trac.sagemath.org/ticket/14605

Original creator: jpflori

Original creation time: 2013-05-17 16:22:10

Assignee: jdemeyer

CC:  leif

Keywords: atlas threads

See lots of rants in #10508.


---

Comment by jpflori created at 2013-05-17 16:38:28

Preliminary spkg, please torture it but nothing is commited or documented, I'll try to do that over the week end but as it may not happen here is some stuff to test.

In particular it should (not tested!) work:
* for non-threaded libraries anywhere, especially on computers with a single threaded unique core,
* threaded on debian/sparc,
* threaded on debian/powerpc,
whereas it used not to before.
(I just remembered that "-t 0" is passed to configure in spkg-install so threads will always be disabled unless you change that.)


---

Comment by vbraun created at 2013-05-18 10:57:15

I fixed your url

Disabling threading unconditionally sucks big time on all modern hardware.


---

Comment by jpflori created at 2013-05-18 11:04:17

Thanks!
I really uploaded that in a hurry.
And it's not intended to always disable threading all the time in the final version.
It is just what I was testing and forgot to comment again the "-t 0" line before uploading...


---

Comment by jpflori created at 2013-05-18 11:12:06

Should be fixed now.


---

Comment by jpflori created at 2013-05-21 08:55:55

Everything is commited now.
If p0 of #10508 is integrated upstream and tagged in between, this might need a slight rebase.


---

Comment by jpflori created at 2013-05-21 08:55:55

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-05-21 08:56:11

Or we could just skip #10508...


---

Comment by jpflori created at 2013-05-21 08:57:15

nah, there are patches to the Sage library on #10508 so it's a bad idea to go too fast.


---

Comment by jpflori created at 2013-05-21 08:59:03

And the new detect.patch did not get included in my latest spkg. Groumpf.


---

Comment by jpflori created at 2013-05-21 08:59:03

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2013-05-21 10:04:51

Should be ok now.


---

Comment by jpflori created at 2013-05-21 10:04:51

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-05-21 16:51:33

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2013-05-21 16:51:33

This still does not correctly detect cpu speed on debian sparc.


---

Comment by jpflori created at 2013-05-21 19:13:33

Ok, got it, my hex reading functions are broken.


---

Comment by jpflori created at 2013-05-21 20:25:22

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-05-21 20:25:22

Should be fixed now.


---

Attachment

Spkg diff, for review only.


---

Comment by jpflori created at 2013-05-25 13:31:38

All is reported upstream at https://sourceforge.net/p/math-atlas/support-requests/895/


---

Comment by jpflori created at 2013-06-06 22:22:46

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2013-11-07 16:39:29

Should be rebased on top of #14410.
Also note that the most important patch from here was already merged into our spkg by Volker at some point IIRC.


---

Comment by jpflori created at 2014-02-10 14:35:27

New commits:


---

Comment by jpflori created at 2014-02-10 14:35:27

Changing keywords from "atlas threads" to "atlas".


---

Comment by jpflori created at 2014-02-10 14:35:27

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-02-20 09:04:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-04-07 22:45:18

Changing keywords from "atlas" to "atlas, days57".


---

Comment by vbraun created at 2014-04-07 22:47:06

lgtm


---

Comment by vbraun created at 2014-04-07 22:47:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-08 10:17:33

Resolution: fixed
