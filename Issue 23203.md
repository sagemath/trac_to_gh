# Issue 23203: Various Cython fixes to IndexedFreeModuleElement

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-07-15 09:08:16

CC:  tscrim nthiery

1. `__div__ = __truediv__` is a bad idea for extension types because it acts on the _Python_ method level and not on the _slot_ level:

```
sage: F = CombinatorialFreeModule(QQ, [1,2,3]); B = F.basis(); f = 2*B[2] + 4*B[3]
sage: op = operator.truediv; timeit('op(f, 2)', repeat=100000, number=20)
20 loops, best of 100000: 4.99 µs per loop
sage: op = operator.div; timeit('op(f, 2)', repeat=100000, number=20)
20 loops, best of 100000: 5.45 µs per loop
```


2. `IndexedFreeModuleElement` and `LieAlgebraElement` implement arithmetic methods as `cdef _add_` while every other class in Sage uses `cpdef _add_`.


---

Comment by jdemeyer created at 2017-07-17 14:29:59

New commits:


---

Comment by jdemeyer created at 2017-07-17 14:29:59

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-07-18 12:55:37

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-07-18 12:55:37

LGTM. Thank you for cleaning it up. The last part is also useful for #22591 (although I think there is more of a shortcomming of `*ModuleAction` in play, but this works around the problem).


---

Comment by vbraun created at 2017-07-26 22:11:51

Resolution: fixed
