# Issue 33489: get rid of some iteritems

Issue created by migration from https://trac.sagemath.org/ticket/33726

Original creator: chapoton

Original creation time: 2022-04-18 10:59:34

CC:  tscrim

in two py files where this makes no sense

also in one pyx file

Note that in pyx files, with python3, items is the same as iteritems


---

Comment by chapoton created at 2022-04-18 11:00:19

New commits:


---

Comment by chapoton created at 2022-04-18 11:00:19

Changing status from new to needs_review.


---

Comment by klee created at 2022-04-19 04:07:12

> in two py files where this makes no sense

What do you mean? You only replaced `iteritems` with `items` (of python3).


---

Comment by klee created at 2022-04-19 04:08:43

While we are at it, why not change `for t,g in ...` to `for t, g in ...`?


---

Comment by git created at 2022-04-19 07:19:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-04-19 07:24:24

Replying to [comment:2 klee]:
> > in two py files where this makes no sense
> 
> What do you mean? You only replaced `iteritems` with `items` (of python3).

Well, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.

The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.


---

Comment by klee created at 2022-04-19 07:54:36

Changing status from needs_review to positive_review.


---

Comment by klee created at 2022-04-19 07:54:36

Replying to [comment:5 chapoton]:
> Replying to [comment:2 klee]:
> > > in two py files where this makes no sense
> > 
> > What do you mean? You only replaced `iteritems` with `items` (of python3).
> 
> Well, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.

Right.
 
> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.

Okay.


---

Comment by klee created at 2022-04-19 07:54:36

Changing priority from major to minor.


---

Comment by vbraun created at 2022-05-24 22:44:15

Resolution: fixed


---

Comment by slelievre created at 2022-05-31 16:16:02

This change missed one of the `iteritems`:


```diff
-        for t,g in self._t_dict.iteritems():
-            for k,c in g.monomial_coefficients(copy=False).iteritems():
+        for t, g in self._t_dict.items():
+            for k, c in g.monomial_coefficients(copy=False).iteritems():
```



---

Comment by mkoeppe created at 2022-09-03 21:57:38

Replying to [comment:5 Frédéric Chapoton]:
> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.

I've opened #34488 for this
