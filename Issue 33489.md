# Issue 33489: get rid of some iteritems

archive/issues_033489.json:
```json
{
    "body": "CC:  tscrim\n\nin two py files where this makes no sense\n\nalso in one pyx file\n\nNote that in pyx files, with python3, items is the same as iteritems\n\nIssue created by migration from https://trac.sagemath.org/ticket/33726\n\n",
    "created_at": "2022-04-18T10:59:34Z",
    "labels": [
        "refactoring",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "get rid of some iteritems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33489",
    "user": "chapoton"
}
```
CC:  tscrim

in two py files where this makes no sense

also in one pyx file

Note that in pyx files, with python3, items is the same as iteritems

Issue created by migration from https://trac.sagemath.org/ticket/33726





---

archive/issue_comments_476814.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-18T11:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476814",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_476815.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-18T11:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476815",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_476816.json:
```json
{
    "body": "> in two py files where this makes no sense\n\nWhat do you mean? You only replaced `iteritems` with `items` (of python3).",
    "created_at": "2022-04-19T04:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476816",
    "user": "klee"
}
```

> in two py files where this makes no sense

What do you mean? You only replaced `iteritems` with `items` (of python3).



---

archive/issue_comments_476817.json:
```json
{
    "body": "While we are at it, why not change `for t,g in ...` to `for t, g in ...`?",
    "created_at": "2022-04-19T04:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476817",
    "user": "klee"
}
```

While we are at it, why not change `for t,g in ...` to `for t, g in ...`?



---

archive/issue_comments_476818.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-19T07:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476818",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_476819.json:
```json
{
    "body": "Replying to [comment:2 klee]:\n> > in two py files where this makes no sense\n> \n> What do you mean? You only replaced `iteritems` with `items` (of python3).\n\nWell, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.\n\nThe only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.",
    "created_at": "2022-04-19T07:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476819",
    "user": "chapoton"
}
```

Replying to [comment:2 klee]:
> > in two py files where this makes no sense
> 
> What do you mean? You only replaced `iteritems` with `items` (of python3).

Well, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.

The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.



---

archive/issue_comments_476820.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-19T07:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476820",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_476821.json:
```json
{
    "body": "Replying to [comment:5 chapoton]:\n> Replying to [comment:2 klee]:\n> > > in two py files where this makes no sense\n> > \n> > What do you mean? You only replaced `iteritems` with `items` (of python3).\n> \n> Well, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.\n\nRight.\n \n> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.\n\nOkay.",
    "created_at": "2022-04-19T07:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476821",
    "user": "klee"
}
```

Replying to [comment:5 chapoton]:
> Replying to [comment:2 klee]:
> > > in two py files where this makes no sense
> > 
> > What do you mean? You only replaced `iteritems` with `items` (of python3).
> 
> Well, I suspect that this part of the code is never doctested. In python3, dictionaries no longer have an iteritems method.

Right.
 
> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.

Okay.



---

archive/issue_comments_476822.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2022-04-19T07:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476822",
    "user": "klee"
}
```

Changing priority from major to minor.



---

archive/issue_comments_476823.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-24T22:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476823",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_476824.json:
```json
{
    "body": "This change missed one of the `iteritems`:\n\n\n```diff\n-        for t,g in self._t_dict.iteritems():\n-            for k,c in g.monomial_coefficients(copy=False).iteritems():\n+        for t, g in self._t_dict.items():\n+            for k, c in g.monomial_coefficients(copy=False).iteritems():\n```\n",
    "created_at": "2022-05-31T16:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476824",
    "user": "slelievre"
}
```

This change missed one of the `iteritems`:


```diff
-        for t,g in self._t_dict.iteritems():
-            for k,c in g.monomial_coefficients(copy=False).iteritems():
+        for t, g in self._t_dict.items():
+            for k, c in g.monomial_coefficients(copy=False).iteritems():
```




---

archive/issue_comments_476825.json:
```json
{
    "body": "Replying to [comment:5 Fr\u00e9d\u00e9ric Chapoton]:\n> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.\n\nI've opened #34488 for this",
    "created_at": "2022-09-03T21:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33489#issuecomment-476825",
    "user": "mkoeppe"
}
```

Replying to [comment:5 Frédéric Chapoton]:
> The only thing that still have an iteritems method are sage own's weak dictionaries. We should switch this method's name to items, but not in this ticket.

I've opened #34488 for this
