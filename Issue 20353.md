# Issue 20353: Update NTL to version 9.8.1

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2016-05-11 15:26:26

CC:  jdemeyer fbissey

Lots of speed, threading, and other improvements.
Upstream tarball (not to be used directly):
* http://shoup.net/ntl/ntl-9.8.1.tar.gz


---

Comment by fbissey created at 2016-05-11 21:03:26

Looks like I missed the announcement for 9.8.1 I am still at 9.8.0. Unfortunately we cannot take advantage of the threading until a number of things are resolved. Threading requires C++11 and a number of packages are behind the curve.
We need #17635 so `givaro`, `fflas-ffpack` and `linbox` will be using C++11, I have a PR with `eclib` that John is ready to merge and then a new release needs to be cut. Finally `singular` and `flint` will need to be hacked. I have a proof of concept for those in sage-on-gentoo.

Do you want to go ahead with the upgrade and do the threading later?


---

Comment by jpflori created at 2016-05-11 22:26:38

Yes, let's just upgrade and go with threading later on.
In mainstream Sage we are quite late regarding version number anyway.


---

Comment by jpflori created at 2016-05-11 22:29:33

Did not run `make ptestlong` yet but it builds fine.
----
New commits:


---

Comment by jpflori created at 2016-05-11 22:29:33

Changing status from new to needs_review.


---

Comment by fbissey created at 2016-05-11 22:30:46

OK it should just be straight forward with the exception of disabling cpu specific instructions for binary build. Since I think 9.6.0 `ntl` does some automatic detection for avx and fma stuff and we will want to turn that off for binary build. The option to pass is `NATIVE=off`.

Tests pass here with 9.8.0 I cannot imagine 9.8.1 would break anything.


---

Comment by fbissey created at 2016-05-11 22:33:34

Sorry for the mess, I put the branch back.
----
New commits:


---

Comment by fbissey created at 2016-05-11 23:38:08

New commits:


---

Comment by git created at 2016-05-11 23:40:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-05-12 02:13:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2016-05-12 08:49:53

Thanks Fran√ßois!
I guess we are good to go here.


---

Comment by jpflori created at 2016-05-12 08:49:53

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2016-05-12 08:54:32

I just checked, my own doctest run didn't produce any errors. We are ready for early inclusion in 7.3.


---

Comment by vbraun created at 2016-05-21 09:37:03

Resolution: fixed
