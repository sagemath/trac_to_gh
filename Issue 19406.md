# Issue 19406: BRiAl not building on cygwin

Issue created by migration from https://trac.sagemath.org/ticket/19643

Original creator: gouezel

Original creation time: 2015-11-29 16:57:52

CC:  jpflori ohanar

Missing -no-undefined in BRiAl, preventing the build on cygwin:


```
/bin/sh ./libtool  --tag=CC   --mode=link gcc  -g -O2   -o libpolybori.la -rpath /home/Sebastien/sage19/sage/local/lib  Cudd/cudd/libcudd.la libpolybori/src/libpolybori_base.la 
libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
```



---

Comment by gouezel created at 2015-12-03 10:32:39

Changing status from new to needs_review.


---

Comment by gouezel created at 2015-12-03 10:32:39

New commits:


---

Comment by tscrim created at 2015-12-07 19:12:06

This did allow BRiAl to build for my on Cygwin32, but I would prefer someone who has a bit more experience than me in these things (JP) to check to make sure this is the right fix.


---

Comment by jpflori created at 2015-12-07 21:24:42

This looks ok.
Actually better would be to only add `-no-undefined` on Cygwin.
But that should not hurt anywhere alse (except in rare situations where undefined symbol are wanted at link time, that should not be the case here).
Did someone reported it upstream?


---

Comment by gouezel created at 2015-12-07 21:36:24

I did not report it upstream because the status of upstream is not clear: https://github.com/BRiAl/BRiAl only mentions polybori, and polybori maintainers. Let me cc ohanar, as he created the brial ticket in #18437.

Sure, adding -no-undefined only on cygwin would be better, but I do not see how it could hurt in any case.


---

Comment by jpflori created at 2015-12-07 21:39:32

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2015-12-07 21:39:32

I agree it's maybe not worth the pain specializing for Cygwin.
I still do remember a ticket where compilation failed on OS X for an obscure package (Singular maybe...) because on OS X you needed undefined stuff.
But here I'll live without it.


---

Comment by ohanar created at 2015-12-07 21:43:49

Feel free to submit a pull request 'upstream'. I have had no time to do things there (and have even less time at the moment), but when I do get some time I'll try to look through any pull requests there. If anyone wants to help out with managing BRiAl (even just with making bug fix releases like this), send me an email and I'll add you to the organization.


---

Comment by vbraun created at 2015-12-09 17:54:48

Resolution: fixed
