# Issue 25771: Upgrade setuptools and pip

Issue created by migration from https://trac.sagemath.org/ticket/26008

Original creator: jdemeyer

Original creation time: 2018-08-06 08:05:30

CC:  embray




---

Comment by jdemeyer created at 2018-08-06 08:22:42

I have the impression that `--no-deps` is broken:

```
$ pip install --no-dependencies --ignore-installed --verbose --no-index .                                     
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /tmp/pip-ephem-wheel-cache-gW21cZ
Created temporary directory: /tmp/pip-req-tracker-HVBi2r
Created requirements tracker '/tmp/pip-req-tracker-HVBi2r'
Created temporary directory: /tmp/pip-install-7uRcZ3
Processing /usr/local/src/sage-config/local/var/tmp/sage/build/pip-18.0/src
  Created temporary directory: /tmp/pip-req-build-qTWIJh
  Added file:///usr/local/src/sage-config/local/var/tmp/sage/build/pip-18.0/src to build tracker '/tmp/pip-req-tracker-HVBi2r'
  Created temporary directory: /tmp/pip-build-env-6hNQx4
  Installing build dependencies ...   Running command /usr/local/src/sage-config/local/bin/python -m pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-6hNQx4 --no-warn-script-location -v --no-binary :none: --only-binary :none: --no-index -- setuptools wheel
  Ignoring indexes: https://pypi.org/simple
  Created temporary directory: /tmp/pip-ephem-wheel-cache-8G7iyn
  Re-using requirements tracker '/tmp/pip-req-tracker-HVBi2r'
  Created temporary directory: /tmp/pip-install-hWMV5g
  Collecting setuptools
    0 location(s) to search for versions of setuptools:
    Could not find a version that satisfies the requirement setuptools (from versions: )
  Cleaning up...
  Cleaned build tracker '/tmp/pip-req-tracker-HVBi2r'
  No matching distribution found for setuptools
  Exception information:
  Traceback (most recent call last):
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/basecommand.py", line 141, in main
      status = self.run(options, args)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/commands/install.py", line 299, in run
      resolver.resolve(requirement_set)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 102, in resolve
      self._resolve_one(requirement_set, req)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 256, in _resolve_one
      abstract_dist = self._get_abstract_dist_for(req_to_install)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 209, in _get_abstract_dist_for
      self.require_hashes
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py", line 218, in prepare_linked_requirement
      req.populate_link(finder, upgrade_allowed, require_hashes)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py", line 308, in populate_link
      self.link = finder.find_requirement(self, upgrade)
    File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/pip/_internal/index.py", line 543, in find_requirement
      'No matching distribution found for %s' % req
  DistributionNotFound: No matching distribution found for setuptools
```



---

Comment by jdemeyer created at 2018-08-06 08:36:25

Or maybe `--no-index` is broken. In any case, I reported https://github.com/pypa/pip/issues/5696


---

Comment by git created at 2018-08-07 08:12:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-08-07 12:02:41

Changing status from new to needs_review.


---

Comment by saraedum created at 2018-08-07 16:47:26

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-08-08 12:59:20

lgtm; too bad about the pip annoyances


---

Comment by vbraun created at 2018-08-09 21:27:35

Resolution: fixed
