# Issue 14083: Split _test_elements_eq

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2013-03-17 02:39:00

Assignee: nthiery

CC:  roed

Currently ``_test_elements_eq`` tests for reflexivity, symmetry, and transitivity. However, transitivity does not hold in padic rings. This tickets splits ``_test_elements_eq`` into these three subtests, so they that we can override the transitivity test for padic implementations.


---

Comment by saraedum created at 2013-03-17 03:46:32

Changing status from new to needs_review.


---

Comment by saraedum created at 2013-03-18 05:49:11

apply trac_14287.patch 14287_review_58rc0.patch


---

Comment by saraedum created at 2013-03-18 07:01:12

apply trac_14287.patch 14287_review_58rc0.patch


---

Comment by saraedum created at 2013-03-18 08:48:43

apply trac_14287.patch 14287_review.patch


---

Comment by roed created at 2013-03-18 18:56:37

Tests pass; looks good.


---

Comment by roed created at 2013-03-18 18:56:37

Changing status from needs_review to positive_review.


---

Comment by nthiery created at 2013-03-21 13:26:28

Just a micro comment about the use of this ticket; not its
implementation.

``However, transitivity does not hold in padic rings''

Sounds scary! Well, as long as you know what you are doing :-)

``so they that we can override the transitivity test for padic
implementations''

I am not sure what's your plan for this; just in case, and unless this
becomes too cumbersome, I prefer writing explicitly each time:

```
    sage: TestSuite(...).run(skip="....transitivity")
```


rather than systematically disabling the transitivity test. First,
that's the occasion to warn the user about an atypical behavior.  And
to get more people to thing about creative ways of fixing that.
Second, the test might actually pass in certain cases, and it's a
useful information to record.

Cheers,
                         Nicolas


---

Comment by saraedum created at 2013-03-22 02:08:02

I see your point. However, these tests will not pass and there is no way to avoid this (other than disabling `==` completely). It's an intrinsic problem with padics (or anything that is stored to different precision).

I agree that we could use a `skip` to warn the user but on the other hand it is probably more confusing...


---

Comment by jdemeyer created at 2013-03-26 23:23:06

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-03-26 23:23:06

None of the review patches applies properly for me.


---

Comment by tscrim created at 2013-04-05 15:23:36

I've uploaded a rebased patch to at least `5.9.beta1` and has the review patch folded in. Since this touches a lot of files, I'd like someone with a more recent beta version to make sure it applies before setting this back to positive review.

For patchbot:

Apply: trac_14287-rebased.patch


---

Comment by tscrim created at 2013-04-05 15:23:36

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-04-05 16:15:08

Doesn't apply for me. Did you keep in mind the dependency #14284?


---

Comment by tscrim created at 2013-04-05 19:14:11

No, I forgot to check when that was merged. Updated.


---

Comment by jdemeyer created at 2013-04-08 07:02:55

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-04-08 07:02:55

The patch finally applies now...


---

Comment by tscrim created at 2013-04-08 12:42:45

Thank you for checking Jeroen. I appreciate it.


---

Comment by jdemeyer created at 2013-04-09 06:34:12

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-04-09 06:34:12


```
sage -t --long devel/sage/doc/en/thematic_tutorials/coercion_and_categories.rst  # 5 doctests failed
```



---

Comment by jdemeyer created at 2013-04-09 06:37:01

And also:

```
sage -t --long devel/sage/sage/categories/classical_crystals.py  # 1 doctest failed
```



---

Comment by tscrim created at 2013-04-09 21:25:49

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2013-04-09 21:25:49

Fixed.


---

Comment by jdemeyer created at 2013-04-10 07:35:57

I think this change should be reviewed.


---

Comment by jdemeyer created at 2013-04-10 07:35:57

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-04-10 07:36:16

Changing status from needs_work to needs_review.


---

Comment by roed created at 2013-04-10 18:24:32

The last hunk of `classical_crystals.py` removes a newline before a `::`.  Otherwise the changes are good.


---

Comment by roed created at 2013-04-10 18:24:32

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2013-04-10 19:48:37

Fixed.


---

Comment by tscrim created at 2013-04-10 19:48:37

Changing status from needs_work to needs_review.


---

Comment by roed created at 2013-04-10 21:05:03

Changing status from needs_review to positive_review.


---

Comment by roed created at 2013-04-10 21:05:03

Looks good.


---

Comment by tscrim created at 2013-04-10 22:06:19

Thanks for re-reviewing the changes.


---

Comment by jdemeyer created at 2013-04-11 09:37:48

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-04-11 09:37:48

Should be rebased to sage-5.9.beta4.


---

Attachment

Rebased patch on `5.9.beta5`.


---

Comment by tscrim created at 2013-04-15 00:40:42

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-04-23 09:43:02

Resolution: fixed
