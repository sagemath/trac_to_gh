# Issue 16953: Error in conversion from RR['x,y'] to RR['x']

Issue created by migration from Trac.

Original creator: defeo

Original creation time: 2014-10-21 16:05:59

Keywords: polynomials RR

Conversion of univariate polynomials from the bivariate ring `RR['x,y']` fails:

```
sage: RR['x'](RR['x,y'].0)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: max() arg is an empty sequence
```

This does not seem to affect other rings:

```
sage: QQ['x'](QQ['x,y'].0)
x
sage: CC['x'](CC['x,y'].0)
x
sage: RDF['x'](RDF['x,y'].0)
x
```


---

Comment by bruno created at 2015-09-25 14:05:18

Changing status from new to needs_review.


---

Comment by bruno created at 2015-09-25 14:05:18

~~**[EDIT]** As one can notice, I messed up the history with some completely unrelated commits. I am trying to undo this... The relevant code is the latest commit only! **![/EDIT]**~~ Should be OK now!

The problem was not in conversion, but rather in initialization of univariate polynomials over `RR`, with an empty dictionary.  
Before:

```python
sage: RR['x']({})
Traceback (most recent call last):
...
ValueError: max() arg is an empty sequence
```

After:

```python
sage: RR['x']({})
0
```


As a result, we also have:

```python
sage: RR['x'](RR['x,y'].0)
x
```


## Details

In the initialization of a polynomial over `RR`, if the "data" is given as a dictionary, this dictionary is converted to a list. Before the patch, there was an attempt to compute `max(x.keys())` where `x` is the dictionary. If `x` is empty, this yields an error. To correct the error, I could have add a test. Yet, a function is already specifically defined in the class `Polynomial` to perform this conversion `dict -> list`. The new code just uses this function. 

Note that I corrected some slight formatting issues in the docstring in other (unrelated) parts of the same file `src/sage/rings/polynomials/polynomial_real_mpfr_dense.pyx`.
----
New commits: (**Note:** Irrelevant commits. The only correct commit is in comment:5 below)


---

Comment by git created at 2015-09-25 14:14:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2015-09-25 14:26:16

LGTM modulo adding a blank line here:

```diff
         Check that :trac:`17190` is fixed::
+
             sage: RR['x']({})
             0
```

Once you make this change, you can set a positive review on my behalf. (Also, could you edit you post above to show the result is 0?)


---

Comment by git created at 2015-09-25 14:30:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bruno created at 2015-09-25 14:31:50

Changing status from needs_review to positive_review.


---

Comment by bruno created at 2015-09-25 14:31:50

Replying to [comment:6 tscrim]:
> LGTM modulo adding a blank line here:
> {{{#!diff
>          Check that :trac:`17190` is fixed::
> +
>              sage: RR['x']({})
>              0
> }}}
> Once you make this change, you can set a positive review on my behalf. (Also, could you edit you post above to show the result is 0?)

Thanks for the quick review! (I edited my post to make it correct...)


---

Comment by vbraun created at 2015-10-12 07:16:44

Resolution: fixed
