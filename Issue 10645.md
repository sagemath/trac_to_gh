# Issue 10645: unpickle_all called twice in a row = boom!

archive/issues_010645.json:
```json
{
    "body": "Assignee: @williamstein\n\nCalling twice in a row the function `unpickle_all` breaks sage:\n\n\n```\nsage: sage.structure.sage_object.unpickle_all()\nx...\nSuccessfully unpickled 586 objects.\nFailed to unpickle 0 objects.\nsage: sage.structure.sage_object.unpickle_all()\n/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  \n7292 Abort trap              sage-ipython \"$@\" -i\n$\n```\n\n\nDoing some `print i, A` inside the loop of the function `unpickle_all` shows that the process stop on the 170th :\n\n\n```\nsage: sage.structure.sage_object.unpickle_all()\n...\n163 _class__sage_combinat_sf_homogeneous_SymmetricFunctionAlgebra_homogeneous__.sobj\n164 _class__sage_combinat_sf_jack_JackPolynomials_j__.sobj\n165 _class__sage_combinat_sf_jack_JackPolynomials_p__.sobj\n166 _class__sage_combinat_sf_jack_JackPolynomials_q__.sobj\n167 _class__sage_combinat_sf_kschur_kSchurFunctions_t__.sobj\n168 _class__sage_combinat_sf_llt_LLT_cospin__.sobj\n169 _class__sage_combinat_sf_llt_LLT_spin__.sobj\n170 _class__sage_combinat_sf_macdonald_MacdonaldPolynomials_h__.sobj\n/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  \n6926 Abort trap              sage-ipython \"$@\" -i\n $ \n```\n\n\nIf a solution needs to change the `pickle_jar`, be aware, because it may\nresults in conflicts because I am actually changing it at #10354.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10705\n\n",
    "created_at": "2011-01-28T20:43:32Z",
    "labels": [
        "component: pickling",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "unpickle_all called twice in a row = boom!",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10645",
    "user": "https://github.com/seblabbe"
}
```
Assignee: @williamstein

Calling twice in a row the function `unpickle_all` breaks sage:


```
sage: sage.structure.sage_object.unpickle_all()
x...
Successfully unpickled 586 objects.
Failed to unpickle 0 objects.
sage: sage.structure.sage_object.unpickle_all()
/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  
7292 Abort trap              sage-ipython "$@" -i
$
```


Doing some `print i, A` inside the loop of the function `unpickle_all` shows that the process stop on the 170th :


```
sage: sage.structure.sage_object.unpickle_all()
...
163 _class__sage_combinat_sf_homogeneous_SymmetricFunctionAlgebra_homogeneous__.sobj
164 _class__sage_combinat_sf_jack_JackPolynomials_j__.sobj
165 _class__sage_combinat_sf_jack_JackPolynomials_p__.sobj
166 _class__sage_combinat_sf_jack_JackPolynomials_q__.sobj
167 _class__sage_combinat_sf_kschur_kSchurFunctions_t__.sobj
168 _class__sage_combinat_sf_llt_LLT_cospin__.sobj
169 _class__sage_combinat_sf_llt_LLT_spin__.sobj
170 _class__sage_combinat_sf_macdonald_MacdonaldPolynomials_h__.sobj
/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  
6926 Abort trap              sage-ipython "$@" -i
 $ 
```


If a solution needs to change the `pickle_jar`, be aware, because it may
results in conflicts because I am actually changing it at #10354.

Issue created by migration from https://trac.sagemath.org/ticket/10705





---

archive/issue_comments_111552.json:
```json
{
    "body": "See #13636 for another seg fault associated with unpickle_all.",
    "created_at": "2013-01-25T00:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111552",
    "user": "https://github.com/AndrewAtLarge"
}
```

See #13636 for another seg fault associated with unpickle_all.



---

archive/issue_events_027563.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27563"
}
```



---

archive/issue_events_027564.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27564"
}
```



---

archive/issue_events_027565.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27565"
}
```



---

archive/issue_events_027566.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27566"
}
```



---

archive/issue_events_027567.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27567"
}
```



---

archive/issue_events_027568.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27568"
}
```



---

archive/issue_events_027569.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27569"
}
```



---

archive/issue_comments_111553.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-19T12:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111553",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_events_027570.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27570"
}
```



---

archive/issue_events_027571.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27571"
}
```



---

archive/issue_comments_111554.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-19T12:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111554",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_111555.json:
```json
{
    "body": "This is not a problem anymore on 8.0.rc0.",
    "created_at": "2017-07-19T12:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111555",
    "user": "https://github.com/seblabbe"
}
```

This is not a problem anymore on 8.0.rc0.



---

archive/issue_events_027572.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2017-08-04T12:46:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27572"
}
```



---

archive/issue_events_027573.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2017-08-04T12:46:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27573"
}
```



---

archive/issue_comments_111556.json:
```json
{
    "body": "A doctest to check that this is fixed was added in #5838.",
    "created_at": "2017-08-04T12:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111556",
    "user": "https://github.com/pjbruin"
}
```

A doctest to check that this is fixed was added in #5838.



---

archive/issue_events_027574.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10645#event-27574"
}
```



---

archive/issue_comments_111557.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2017-12-12T08:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10645#issuecomment-111557",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
