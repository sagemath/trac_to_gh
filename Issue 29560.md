# Issue 29560: sage.misc.defaults.variable_names return tuple in all cases

archive/issues_029560.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/29797\n\n",
    "created_at": "2020-06-04T21:29:25Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "sage.misc.defaults.variable_names return tuple in all cases",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29560",
    "user": "@heluani"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/29797





---

archive/issue_comments_419822.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419822",
    "user": "@heluani"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_419823.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419823",
    "user": "@heluani"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_419824.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to misc.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419824",
    "user": "@heluani"
}
```

Changing component from PLEASE CHANGE to misc.



---

archive/issue_comments_419825.json:
```json
{
    "body": "For safety:\n\n```diff\n def latex_variable_names(n, name=None):\n-    \"\"\"\n+    r\"\"\"\n     Converts a root string into a tuple of variable names by adding \n     numbers in sequence.\n```\n\n\nAlso, minor nitpick with the doc formatting:\n\n```diff\n-    - ``n`` a non-negative Integer. The number of variable names to \n-       output.\n-    - ``names`` a string (Default: ``None``); The root of the variable\n-      name. \n+    - ``n`` a non-negative Integer; the number of variable names to \n+       output\n+    - ``names`` a string (default: ``None``); the root of the variable\n+      name.\n```\n\nOnce changed, you can set a positive review on my behalf.",
    "created_at": "2020-06-05T00:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419825",
    "user": "@tscrim"
}
```

For safety:

```diff
 def latex_variable_names(n, name=None):
-    """
+    r"""
     Converts a root string into a tuple of variable names by adding 
     numbers in sequence.
```


Also, minor nitpick with the doc formatting:

```diff
-    - ``n`` a non-negative Integer. The number of variable names to 
-       output.
-    - ``names`` a string (Default: ``None``); The root of the variable
-      name. 
+    - ``n`` a non-negative Integer; the number of variable names to 
+       output
+    - ``names`` a string (default: ``None``); the root of the variable
+      name.
```

Once changed, you can set a positive review on my behalf.



---

archive/issue_comments_419826.json:
```json
{
    "body": "Thanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.",
    "created_at": "2020-06-05T01:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419826",
    "user": "@DaveWitteMorris"
}
```

Thanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.



---

archive/issue_comments_419827.json:
```json
{
    "body": "Replying to [comment:4 gh-DaveWitteMorris]:\n> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.\n\nI am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.",
    "created_at": "2020-06-05T01:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419827",
    "user": "@tscrim"
}
```

Replying to [comment:4 gh-DaveWitteMorris]:
> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.

I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.



---

archive/issue_comments_419828.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-05T02:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419828",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_419829.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> \n> Once changed, you can set a positive review on my behalf.\nWas I suppose to make this change to 'positive review'?",
    "created_at": "2020-06-05T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419829",
    "user": "@heluani"
}
```

Replying to [comment:3 tscrim]:
> 
> Once changed, you can set a positive review on my behalf.
Was I suppose to make this change to 'positive review'?



---

archive/issue_comments_419830.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-05T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419830",
    "user": "@heluani"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_419831.json:
```json
{
    "body": "Replying to [comment:5 tscrim]:\n> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.\n\nIndeed! There's no \"tuple comprehension\" in python; just the possibility to make a tuple from an iterator. You can save the \"tuple\" by writing\n\n```\n(*[...],)\n```\n\nbut as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.",
    "created_at": "2020-06-05T03:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419831",
    "user": "@nbruin"
}
```

Replying to [comment:5 tscrim]:
> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.

Indeed! There's no "tuple comprehension" in python; just the possibility to make a tuple from an iterator. You can save the "tuple" by writing

```
(*[...],)
```

but as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.



---

archive/issue_comments_419832.json:
```json
{
    "body": "OK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)",
    "created_at": "2020-06-05T03:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419832",
    "user": "@DaveWitteMorris"
}
```

OK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)



---

archive/issue_comments_419833.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-27T09:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29560#issuecomment-419833",
    "user": "@vbraun"
}
```

Resolution: fixed
