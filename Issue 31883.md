# Issue 31883: Chart-wise assumptions

archive/issues_031883.json:
```json
{
    "body": "CC:  egourgoulhon @mjungmath\n\n(from #31901#comment:19)\n\nThe assumptions should not be global but chart-wise.\n\nThere is already a context manager `assuming`. We could create it at initialization and invoke it using `with` whenever computations are done with this chart.\n\nWe go through a new method `assuming` of `CalculusMethod` that dispatches in the same way as the `simplify` method does.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32120\n\n",
    "created_at": "2021-07-04T00:01:13Z",
    "labels": [
        "manifolds",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Chart-wise assumptions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31883",
    "user": "mkoeppe"
}
```
CC:  egourgoulhon @mjungmath

(from #31901#comment:19)

The assumptions should not be global but chart-wise.

There is already a context manager `assuming`. We could create it at initialization and invoke it using `with` whenever computations are done with this chart.

We go through a new method `assuming` of `CalculusMethod` that dispatches in the same way as the `simplify` method does.

Issue created by migration from https://trac.sagemath.org/ticket/32120





---

archive/issue_comments_455626.json:
```json
{
    "body": "Another way could be to write a own class for the variables of a chart instead of seeing them as pure symbolic expressions. That could also solve the problem described in #30232.",
    "created_at": "2021-07-25T00:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31883#issuecomment-455626",
    "user": "@mjungmath"
}
```

Another way could be to write a own class for the variables of a chart instead of seeing them as pure symbolic expressions. That could also solve the problem described in #30232.



---

archive/issue_comments_455627.json:
```json
{
    "body": "I don't think that would help - assumptions are really per chart, not per variable; and in the end, they do need to be communicated to the symbolic engine.",
    "created_at": "2021-07-25T04:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31883#issuecomment-455627",
    "user": "mkoeppe"
}
```

I don't think that would help - assumptions are really per chart, not per variable; and in the end, they do need to be communicated to the symbolic engine.



---

archive/issue_comments_455628.json:
```json
{
    "body": "Replying to [comment:5 mkoeppe]:\n> not per variable; and in the end, they do need to be communicated to the symbolic engine.\n\nThat is indeed true.",
    "created_at": "2021-07-25T08:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31883#issuecomment-455628",
    "user": "@mjungmath"
}
```

Replying to [comment:5 mkoeppe]:
> not per variable; and in the end, they do need to be communicated to the symbolic engine.

That is indeed true.



---

archive/issue_comments_455629.json:
```json
{
    "body": "Related to the discussion in #30232, perhaps it makes sense to introduce rings of expressions under symbolic assumptions. Simplifying an expression using an additional assumption would then be a coercion!",
    "created_at": "2021-07-25T21:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31883#issuecomment-455629",
    "user": "mkoeppe"
}
```

Related to the discussion in #30232, perhaps it makes sense to introduce rings of expressions under symbolic assumptions. Simplifying an expression using an additional assumption would then be a coercion!



---

archive/issue_comments_455630.json:
```json
{
    "body": "(This is now #32276.)",
    "created_at": "2021-07-25T21:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31883#issuecomment-455630",
    "user": "mkoeppe"
}
```

(This is now #32276.)
