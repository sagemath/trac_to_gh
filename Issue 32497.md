# Issue 32497: Remove .all import of infinity

Issue created by migration from https://trac.sagemath.org/ticket/32734

Original creator: mkoeppe

Original creation time: 2021-10-21 05:28:38




---

Comment by mkoeppe created at 2021-10-21 05:30:55

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-10-21 05:30:55

New commits:


---

Comment by git created at 2021-10-21 06:01:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-10-21 16:52:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-10-21 16:55:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-21 20:54:48

The failure in `src/sage/rings/integer.pyx` is not from this ticket.


---

Comment by klee created at 2021-10-28 04:12:28

What is the new policy? Do we intend to remove all `all.py` eventually? If not, what should(can) remain in `all.py`? Or this is determined by how we split sage library? The last case is not good, I think... 

Or there won't be no change in `all.py` but we stop importing things from it in Sage library?


---

Comment by mkoeppe created at 2021-10-28 04:16:27

All `all.py` are kept, for the purpose of populating the global interactive environment (`sage.all`).

We are just getting rid of imports from `sage.PAC.KAGE.all` within the Sage library. In particular, the imports from those packages `sage.PAC.KAGE` that become namespace packages, i.e., filled with modules from several distributions.


---

Comment by klee created at 2021-10-28 04:21:15

I am asking because you keep lines like

`from sage.rings.all import AA, QQbar, CC`


---

Comment by mkoeppe created at 2021-10-28 04:22:25

Just because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.


---

Comment by mkoeppe created at 2021-10-28 04:23:53

`CC`, for example, is subject of #30741


---

Comment by klee created at 2021-10-28 04:27:32

Replying to [comment:10 mkoeppe]:
> Just because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.

Okay.

May I understand the new policy as that we never import from `.all` within the Sage library?


---

Comment by mkoeppe created at 2021-10-28 04:31:41

That would be a safe and easy to understand way to phrase a new policy.

But that policy would be broader than what is technically needed. For example, I have no plans to split up `sage.plot` into several distributions (`sage.plot` will remain an ordinary package with `__init__.py`). So it does not matter whether library code imports from `sage.plot.all` or `sage.plot.plot`.


---

Comment by klee created at 2021-10-28 04:50:34

These changes seem to increase startup time slightly. But I think we can allow this.


---

Comment by klee created at 2021-10-28 04:50:34

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-28 05:00:10

Thanks for reviewing!


---

Comment by vbraun created at 2021-10-31 22:20:59

Resolution: fixed
