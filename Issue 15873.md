# Issue 15873: Parallelogram Polyomino

Issue created by migration from Trac.

Original creator: boussica

Original creation time: 2014-04-09 10:01:34

Assignee: boussica

Keywords: Parallelogram polyomino

Implementation of the Parallelogram Polyominoes


---

Comment by git created at 2014-04-10 00:15:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-10 12:57:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-10 20:19:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2014-04-10 23:37:20

Changing keywords from "Parallelogram polyomino" to "Parallelogram polyomino, days57".


---

Comment by git created at 2014-04-11 12:52:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-18 21:42:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-20 15:53:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-07-19 18:59:19

New commits:


---

Comment by git created at 2014-07-20 19:24:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-10-19 15:30:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-10-23 21:35:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-10-31 15:21:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-01-12 20:05:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-03-17 20:22:34

I have made a standalone branch available as u/chapoton/16110

Of course, it still depends on set factories, but not *in the branch*.


---

Comment by chapoton created at 2015-08-06 07:53:21

here is a branch that applies, your was not applying anymore.

Adrien, is this "needs review" ?


---

Comment by chapoton created at 2015-09-13 16:08:19

Changing status from new to needs_review.


---

Comment by chapoton created at 2015-09-13 16:08:19

Well, I allow myself to put this into needs review..


---

Comment by vdelecroix created at 2015-09-13 17:47:22

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-09-13 17:47:22

Bonjour Ã  tous,

Sage does not start with the branch applied.

```
--> 173 class ParallelogramPolyomino(ClonableList):
        global ParallelogramPolyomino = undefined
        global ClonableList = None
    174     r"""
    175     The class of Parallelogram Polyominoes
    176     """
    177     __metaclass__ = ClasscallMetaclass
...
TypeError: Error when calling the metaclass bases
    metaclass conflict: the metaclass of a derived class must be
    a (non-strict) subclass of the metaclasses of all its bases
```


Vincent


---

Comment by git created at 2015-09-13 18:38:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-09-13 18:40:03

New commits:


---

Comment by boussica created at 2015-10-22 17:34:08

To solve some merge/rebase difficulties. I create a new branch with all the
code present in the branch (e467677f92400e46cb27142e0623e693aa5db2ac).

I add the parallelogram polyominoe in the documentation.


---

Comment by git created at 2015-10-22 18:48:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-23 20:58:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-26 09:49:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-28 08:24:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-06-30 23:21:46

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2016-06-30 23:48:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-07-01 16:26:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-07-01 16:53:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-07-01 21:16:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-07-01 21:59:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-07-01 22:42:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-07-05 19:48:41

Still need more doc, every function must be documented:

```
combinat/parallelogram_polyomino.py: 80.9% (72 of 89)
```


Some error in doc formatting:

```
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/parallelogram_polyomino.py:docstring of sage.combinat.parallelogram_polyomino.default_tikz_options:10: ERROR: Unexpected indentation.
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/parallelogram_polyomino.py:docstring of sage.combinat.parallelogram_polyomino.default_tikz_options:15: ERROR: Unexpected indentation.
```


The function "breadth_node_paths_generator" has been given another name in #16204. So doctests here do not pass.


---

Comment by chapoton created at 2016-07-30 13:25:39

I have made a refreshed branch. There still remains 

1) to have full and clean documentation

2) to adapt to the new standard of global options introduced by #18555
----
New commits:


---

Comment by git created at 2016-11-22 20:12:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-22 20:14:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 11:44:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by patxiku created at 2016-11-23 12:38:41

Changing keywords from "Parallelogram polyomino, days57" to "Parallelogram polyomino, days57, days79".


---

Comment by git created at 2016-11-23 12:46:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 12:59:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 15:00:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 15:36:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-11-23 19:11:11

you should not use xrange but range

you should use python3 syntax for print, namely print("stuff")

see patchbot report


---

Comment by git created at 2016-11-23 21:56:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 21:58:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 22:11:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-23 23:04:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-11-27 10:36:04

once again:

you should not use xrange but range

you should use python3 syntax for print, namely print("stuff")

see patchbot report


---

Comment by git created at 2016-12-04 21:04:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-01 15:18:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-06-01 20:35:37

see patchbot report for many problems (doc does not build, among others)


---

Comment by git created at 2017-06-02 09:38:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-02 19:13:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-06-06 09:58:49

Not full-coverage:

```
+combinat/parallelogram_polyomino.py: 93.8% (90 of 96)
```

And also should be lazy-imported.


---

Comment by git created at 2017-06-06 10:02:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2017-06-06 12:14:50

Thank you, i will work on that Ticket Thursday.
We have, now, a working group : https://wiki.sagemath.org/thursdaysbdx.

I think, i will finish this ticket thursday.


---

Comment by git created at 2017-06-08 19:16:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-13 13:47:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2017-06-15 12:21:48

Two small comments to start:

1. I would change `to_parallelogram_polyomino_Boussicault_Socci` to `_to_parallelogram_polyomino_Boussicault_Socci` since it is available through the method `to_parallelogram_polyomino`.

2. I suggest to support Python 3 syntax as most as possible for any new module to get into sage for example by adding the following line at the top of the module:

```
# Support of Python 3
from __future__ import division, absolute_import, print_function, unicode_literals
```



---

Comment by slabbe created at 2017-06-15 12:53:49

Some more comments (just looking at the code, no test done yet):

3. `_get_path_in_pair_of_tree_from_box` similar methods do not have doctests.

4. (many occurrences) References format do not follow the conventions:


```
+        By default, we use the bijection from the following article :
+            Ref. Delest, M.-P. and Viennot, G.
+            "Algebraic Languages and Polyominoes Enumeration."
+            Theoret. Comput. Sci. 34, 169-206, 1984.
+            (the bijection is described in the previous article on page 179 
+            and 180. An example is given in Figure 6)
```


See [this page of the developper's manual](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings):


```
All bibliographical references should be stored in the master bibliography file,
 SAGE_ROOT/src/doc/en/reference/references/index.rst, in the format [...]
```


5. Out of curiosity, why does the `class _polyomino_row:` needs to be inside the class instead of simply in the module?

6. The class


```
class _drawing_tool:
    r"""
    Technical class to produce TIKZ drawing.
```


is of larger interest than just the parallelogram polyominoes (I often need such thing). But I think it is anormal to


```
sage: from sage.combinat.parallelogram_polyomino import _drawing_tool
```


I think you should rather create a new module:


```
sage: from sage.misc.tikz import DrawingTool
```


I have the idea of geting my module [TikzPicture](https://github.com/seblabbe/slabbe/blob/develop/slabbe/tikz_picture.py) into sage in the future. The class `DrawingTool` and `TikzPicture` could go in the same module. I let you create that module first into Sage.

For example if you install my package with `sage -pip install slabbe`, you may do:


```
sage: L = [[0,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,1,0,0]]
sage: pp = ParallelogramPolyomino(L)
sage: from slabbe import TikzPicture
sage: TikzPicture(latex(pp)).pdf()
'[...]/62669/tikz_mZXN3H.pdf'
```



---

Comment by slabbe created at 2017-06-15 13:33:15

7. `bounce` and `bounce_path` methods have no `INPUT` block.

8. Use one line instead of three in the example of `area`, `bounce` and `bounce_path` methods (other occurrences?):


```
sage: pp = ParallelogramPolyomino(
....:     [[0, 1], [1, 0]]
....: )
sage: pp.area()
1

sage: pp = ParallelogramPolyomino(
....:     [[1], [1]]
....: )
```


9. bad REST formatting in method `box_is_root` (missing :: maybe)

10. In `from_dyck_word`, add ```` around the string `'Delest-Viennot'`

11. In `from_dyck_word`, it says the default is foo, but it is `None`.

12. In `get_node_position_from_box`, mention the default value:


```
nb_crossed_nodes â a list containg just one integer.
```


13. INPUT block is missing in `is_k_directed`.

14. In `to_binary_tree` and `to_dyck_word` and `to_ordered_tree`, documentation does not follow the convention:


```
!diff
-- ``bijection`` â None (default) The name of bijection to use for 
-  the convertion. The possible value are, âAval-Boussicaultâ.
+- ``bijection`` -- string or ``None`` (default: ``None``) The name of bijection to use for 
+  the convertion. The possible value are ``None`` or ``'Aval-Boussicault'``.
```


15. The string starting with `This global option contains all the data needed by the Parallelogram classes to draw, display in ASCII, compile in latex a parallelogram polyomino.` should contain an `EXAMPLE::` block. Similarly with the string starting with `    This is the default TIKZ options. This option is used to configurate element of a drawing to allow TIKZ code generation.`.


---

Comment by slabbe created at 2017-06-15 13:35:30

16. coverage is still not 100%:

```
$ sage -coverage src/sage/combinat/parallelogram_polyomino.py 
------------------------------------------------------------------------
SCORE src/sage/combinat/parallelogram_polyomino.py: 93.8% (90 of 96)
```



---

Comment by slabbe created at 2017-06-15 13:41:00

17. (this is a preference of myself, you may prefer to ignore it if you want). I prefer

this

```
sage: L = [[0,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,1,0,0]]
sage: pp=ParallelogramPolyomino(L)
```

or

```
sage: A = [0,0,0,1,1,0,1,0,0,1,1,1]
sage: B = [1,1,1,0,0,1,1,0,0,1,0,0]
sage: pp=ParallelogramPolyomino([A, B])
```

to

```
sage: pp=ParallelogramPolyomino(
....:     [[0,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,1,0,0]]
....: )
```


18. Also, the Python convention says to add space here:

```diff
-sage: pp=ParallelogramPolyomino(L)
+sage: pp = ParallelogramPolyomino(L)
```



---

Comment by slabbe created at 2017-06-15 13:49:10

19. `sage: ParallelogramPolyominoes?` should mention in the INPUT and EXAMPLES blocks the case `size=None`.


---

Comment by slabbe created at 2017-06-15 13:50:39

20. This is strange:


```
sage: P = ParallelogramPolyominoes()
sage: P.is_finite()
True
```


21. This does not work (but maybe it is okay to not work):


```
sage: P = ParallelogramPolyominoes()
sage: len(list(P.some_elements()))    # this works
100
sage: P.random_element()
...
TypeError: int() argument must be a string or a number, not 'PlusInfinity'
```



---

Comment by slabbe created at 2017-06-15 13:56:29

Changing the status to needs work (oups, it was already!).

Other than that, I get

```
sage -t --long src/sage/combinat/parallelogram_polyomino.py
    [484 tests, 3.09 s]
----------------------------------------------------------------------
All tests passed!
```

Tell me when it needs a next round of review.


---

Comment by slabbe created at 2017-06-15 13:57:38

Changing keywords from "Parallelogram polyomino, days57, days79" to "Parallelogram polyomino, days57, days79, thursdaysbdx".


---

Comment by boussica created at 2017-06-15 15:14:57

Replying to [comment:74 slabbe]:
> 20. This is strange:
> 
> {{{
> sage: P = ParallelogramPolyominoes()
> sage: P.is_finite()
> True
> }}}
> 
> 21. This does not work (but maybe it is okay to not work):
> 
> {{{
> sage: P = ParallelogramPolyominoes()
> sage: len(list(P.some_elements()))    # this works
> 100
> sage: P.random_element()
> ...
> TypeError: int() argument must be a string or a number, not 'PlusInfinity'
> }}}

In think it is a bug of set_factories. 
This example show the problem : 


```
sage: from sage.structure.set_factories import *
sage: from sage.structure.set_factories_example import *
sage: XYPairs()
AllPairs
sage: APS = XYPairs()
sage: APS.is_finite()
True
```


I will report that bug.


---

Comment by git created at 2017-06-15 15:18:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2017-06-15 15:23:20

Replying to [comment:71 slabbe]:
> 16. coverage is still not 100%:
> {{{
> $ sage -coverage src/sage/combinat/parallelogram_polyomino.py 
> ------------------------------------------------------------------------
> SCORE src/sage/combinat/parallelogram_polyomino.py: 93.8% (90 of 96)
> }}}

Now we have 100% of coverage.

In ParallelogramPolyominoesFactory, I have commented the function add_constraint() that become nonImplemented, because i don't use them in the set_factory. I don't know if it is a good way to solve the problem, but I don't use that function, so, I don't know how to test it.


---

Comment by chapoton created at 2017-06-15 19:56:37

This is not correct :

```
+            EXAMPLES::
+
+            sage: PP=ParallelogramPolyomino
```

because you must indent the test lines by 4 spaces.

This is not correct :

```
+        EXAMPLES::
+            sage: pp = ParallelogramPolyomino(
```

because you must have an empty line after `EXAMPLES::`

This is not a correct way to add a doctest :

```
         Return a default policy.
+
+        sage: ParallelogramPolyominoes._default_policy
```

because you have forgotten `EXAMPLES::`

You can just remove "add_constraints(self, cons, args_opts):", I think.


---

Comment by git created at 2017-11-21 07:43:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-11-21 07:43:59

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-11-24 15:05:03

bot is now green, so that we can start discuss the code


---

Comment by mantepse created at 2017-12-26 16:48:42

I would like to see this merged!  Here are a few comments concerning docstrings:

* the error messages in `check` need spell- and semantic checking :-)

* the references should be moved to `sage-develop/src/doc/en/reference/references/index.rst`

* I do not understand the docstring in lines 819-821:

```
    `@`staticmethod
    def __classcall_private__(cls, *args, **opts):
        r"""
        Ensure that parallelogram polyominoes created by the enumerated sets
        and directly are the same and that they are instances of
        :class:`ParallelogramPolyomino`.
```


* docstrings of `widths` (line 1702) and `heights` (line 1843) should begin with imperative.

* concerning `val` (line 1976): this looks like a useful function, why not make it public?  It's docstring should be `Determine whether the cell at the given position is inside the parallelogram polyomino.`

* docstring of `_polyomino_row` could be `This is an internal class representing a single row of a parallelogram polyomino.`

* `diagramme` in line 2434 should be `diagram`.


---

Comment by git created at 2018-01-03 20:42:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2018-01-10 07:49:52

SÃ©bastien, can we merge this?  You can set it to positive review on my behalf, in case you are happy with it.


---

Comment by slabbe created at 2018-01-12 12:58:06

Changing status from needs_review to needs_work.


---

Comment by slabbe created at 2018-01-12 12:58:06

Well, not all of the 21 comments I gave have been fixed. And I think all of them do not take much long to fix.


---

Comment by git created at 2018-01-12 19:57:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2018-04-25 11:25:26

ping?


---

Comment by slabbe created at 2018-05-01 08:31:04

Adrien, I suggest you come at https://wiki.sagemath.org/thursdaysbdx
this following Thursday and we finish this:)


---

Comment by mantepse created at 2018-06-22 18:13:02

ping?


---

Comment by boussica created at 2018-10-04 08:08:23

Replying to [comment:92 mantepse]:
> ping?
pong, i will finish this task now. I have now some time to do this.


---

Comment by mantepse created at 2018-10-04 08:21:11

wonderful!


---

Comment by git created at 2018-10-04 09:18:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2018-10-04 10:00:51


```
Les p be the bounce path of the parallelogram
polyomino (:meth:`bounce_path`).
```

should be 

```
Let `p` be the bounce path of the parallelogram
polyomino (:meth:`bounce_path`).
```



```
     def _repr_(self):
       r"""
        Return the string representation of the set of
        parallelogram polyominoes
```

should be

```
     def _repr_(self):
       r"""
        Return the string representation of the set of
        parallelogram polyominoes.
```



---

Comment by boussica created at 2018-10-11 09:38:51

There is no particular reason. Just to highlight that this class is a small tool dedicated to ParallelogramPolyominoe.


Replying to [comment:69 slabbe]:
> Some more comments (just looking at the code, no test done yet):
> 
> 5. Out of curiosity, why does the `class _polyomino_row:` needs to be inside the class instead of simply in the module?


---

Comment by boussica created at 2018-10-19 12:57:42

Merging All Drawing Tools coming from you tikz package and the drawing tools of ParallelogramPolyomino is a big work : 
 - we need to list all the needed functionality
 - we need to merge the ParallelogramPolyomino codes and the code of your package
 - we need to integrate the result on sage
 - we need to make tests and documentation

I think its better to open a new ticket in order to close this one.
We will treat that new ticket after this one.

I opened that new ticket : ticket #26508

Replying to [comment:69 slabbe]:

> 6. The class
> 
> {{{
> class _drawing_tool:
>     r"""
>     Technical class to produce TIKZ drawing.
> }}}
> 
> is of larger interest than just the parallelogram polyominoes (I often need such thing). But I think it is anormal to
> 
> {{{
> sage: from sage.combinat.parallelogram_polyomino import _drawing_tool
> }}}
> 
> I think you should rather create a new module:
> 
> {{{
> sage: from sage.misc.tikz import DrawingTool
> }}}
> 
> I have the idea of geting my module [TikzPicture](https://github.com/seblabbe/slabbe/blob/develop/slabbe/tikz_picture.py) into sage in the future. The class `DrawingTool` and `TikzPicture` could go in the same module. I let you create that module first into Sage.
> 
> For example if you install my package with `sage -pip install slabbe`, you may do:
> 
> {{{
> sage: L = [[0,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,1,0,0]]
> sage: pp = ParallelogramPolyomino(L)
> sage: from slabbe import TikzPicture
> sage: TikzPicture(latex(pp)).pdf()
> '[...]/62669/tikz_mZXN3H.pdf'
> }}}


---

Comment by git created at 2018-10-19 14:37:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2018-10-19 14:42:23

I don't find what is the problem. Can you expand on that remark ?

Replying to [comment:70 slabbe]:
> 9. bad REST formatting in method `box_is_root` (missing :: maybe)


---

Comment by git created at 2018-10-19 15:43:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-08 09:13:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-08 09:56:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2018-11-08 10:02:11

Review - Commment 71 .16 - coverage is done.
Review - Comment 72 .18 - This is done by commit 74c2291


---

Comment by git created at 2018-11-08 11:10:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-08 11:10:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2018-11-08 11:14:11

All the corrections of comment 85 was done.

The function __classcall_private__ needs to be implemented to work with SetFactory.
With that function, the parent method will work correctly. 


Replying to [comment:85 mantepse]:
> I would like to see this merged!  Here are a few comments concerning docstrings:
> 
> * the error messages in `check` need spell- and semantic checking :-)
> 
> * the references should be moved to `sage-develop/src/doc/en/reference/references/index.rst`
> 
> * I do not understand the docstring in lines 819-821:
> {{{
>     `@`staticmethod
>     def __classcall_private__(cls, *args, **opts):
>         r"""
>         Ensure that parallelogram polyominoes created by the enumerated sets
>         and directly are the same and that they are instances of
>         :class:`ParallelogramPolyomino`.
> }}}
> 
> * docstrings of `widths` (line 1702) and `heights` (line 1843) should begin with imperative.
> 
> * concerning `val` (line 1976): this looks like a useful function, why not make it public?  It's docstring should be `Determine whether the cell at the given position is inside the parallelogram polyomino.`
> 
> * docstring of `_polyomino_row` could be `This is an internal class representing a single row of a parallelogram polyomino.`
> 
> * `diagramme` in line 2434 should be `diagram`.
----
New commits:


---

Comment by git created at 2018-11-15 10:22:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-15 10:49:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by boussica created at 2018-11-15 10:53:35

Changing status from needs_work to needs_review.


---

Comment by git created at 2018-11-29 14:23:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2018-11-29 14:31:01

1. I just reviewed the code. Looks good to me. I did some trivial modifications while I was looking at it. I allowed myself to push a commit on top of the public branch.

2. Using Sage with Python 3, I get 3 failures (see below). So I change the status to needs work because of that:


```
sage -t --long src/sage/combinat/parallelogram_polyomino.py
**********************************************************************
File "src/sage/combinat/parallelogram_polyomino.py", line 238, in sage.combinat.parallelogram_polyomino.LocalOptions.__setitem__
Failed example:
    o["display"]="?"
Expected:
    Current value : diagram
    {'default': 'list', 'values':
    {'diagram': 'diagram representation',
    'list': 'list representation'}}
Got:
    Current value : diagram
    {'default': 'list', 'values': {'list': 'list representation', 'diagram': 'diagram representation'}}
**********************************************************************
File "src/sage/combinat/parallelogram_polyomino.py", line 304, in sage.combinat.parallelogram_polyomino.LocalOptions.__call__
Failed example:
    o(display="?")
Expected:
    Current value : diagram
    {'default': 'list', 'values':
    {'diagram': 'diagram representation',
    'list': 'list representation'}}
Got:
    Current value : diagram
    {'default': 'list', 'values': {'list': 'list representation', 'diagram': 'diagram representation'}}
**********************************************************************
File "src/sage/combinat/parallelogram_polyomino.py", line 1538, in sage.combinat.parallelogram_polyomino.ParallelogramPolyomino.get_options
Failed example:
    pp.get_options()
Expected:
    Current options for ParallelogramPolyominoes_size
      - display:            list
      - drawing_components: {'diagram': True, 'bounce_1': False,
    'tree': False, 'bounce_0': False}
      - latex:              drawing
      - tikz_options:       {'color_bounce_1': u'blue',
    'color_bounce_0': u'red', 'point_size': 3.5, 'line_size': 1,
    'color_line': u'black', 'color_point': u'black', 'scale': 1,
    'mirror': None, 'rotation': 0, 'translation': [0, 0]}
Got:
    Current options for ParallelogramPolyominoes_size
      - display:            list
      - drawing_components: {'diagram': True, 'tree': False, 'bounce_0': False, 'bounce_1': False}
      - latex:              drawing
      - tikz_options:       {'scale': 1, 'line_size': 1, 'point_size': 3.5, 'color_line': 'black', 'color_point': 'black', 'color_bounce_0': 'red', 'color_bounce_1': 'blue', 'translation': [0, 0], 'rotation': 0, 'mirror': None}
**********************************************************************
3 items had failures:
   1 of   7 in sage.combinat.parallelogram_polyomino.LocalOptions.__call__
   1 of  11 in sage.combinat.parallelogram_polyomino.LocalOptions.__setitem__
   1 of   3 in sage.combinat.parallelogram_polyomino.ParallelogramPolyomino.get_options
    [554 tests, 3 failures, 0.26 s]
----------------------------------------------------------------------
sage -t --long src/sage/combinat/parallelogram_polyomino.py  # 3 doctests failed
----------------------------------------------------------------------
```


3. The branch now contains more than 70 commits including lots of merge with the most recent develop branch of Sage. I would suggest to rebase the branch on top of the most recent develop version of sage so that the history tree do not get to dirty because of this ticket. You may try `git rebase -i HEAD~3` to rebase the last 3 commits for instance (this is usually what I do). Of course, rebasing the branch will change the hash of all involved commits. So this is okay only if nobody have code depending on that branch.


---

Comment by slabbe created at 2018-11-29 14:31:14

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-12-06 11:28:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2018-12-06 11:30:34

Replying to [comment:112 slabbe]:

> 2. Using Sage with Python 3, I get 3 failures (see below). So I change the status to needs work because of that:

Python3 errors fixed


---

Comment by slabbe created at 2018-12-12 20:06:46

Changing status from needs_work to positive_review.


---

Comment by slabbe created at 2018-12-12 20:06:46

I now get

```
sage -t --long src/sage/combinat/parallelogram_polyomino.py
    [554 tests, 0.28 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```

both in Python 2 and 3. Documentation builds fine. Positive review.


---

Comment by vbraun created at 2018-12-23 23:39:19

Resolution: fixed


---

Comment by embray created at 2018-12-28 14:06:38

This tickets were closed as fixed after the Sage 8.5 release.
