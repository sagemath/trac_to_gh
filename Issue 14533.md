# Issue 14533: Fragile GMP header hack in Singular

Issue created by migration from https://trac.sagemath.org/ticket/14737

Original creator: leif

Original creation time: 2013-06-13 14:16:29

Assignee: jdemeyer

CC:  mmezzarobba

Keywords: cf_gmp.h bits/c++config.h spkg

This is still present in SIngular 3-1-6.


---

Comment by leif created at 2013-06-13 14:23:56

(More to come...)


---

Comment by leif created at 2013-06-13 14:23:56

Changing keywords from "cf_gmp.h bits/c++config.h spkg" to "cf_gmp.h bits/c++config.h spkg factory build error".


---

Comment by leif created at 2013-06-13 14:58:43

Changing assignee from jdemeyer to leif.


---

Comment by leif created at 2013-06-14 20:09:50

For the impatient:

An initial fixed spkg can be found [here](http://boxen.math.washington.edu/home/leif/Sage/spkgs/singular-3-1-5.p8.spkg).  (Currently just adds a patch to `src/factory/GNUmakefile.in`, also simplifying the header generation a bit.)


---

Comment by leif created at 2013-06-23 13:11:34

Changing keywords from "cf_gmp.h bits/c++config.h spkg factory build error" to "cf_gmp.h bits/c++config.h spkg factory build error Arch Linux Slackware".


---

Comment by mmezzarobba created at 2013-06-24 19:41:07

I used the patch to build sage 5.11β3 on a system that used to be affected by this bug (debian sid, gcc 4.8). It works for me.


---

Comment by leif created at 2013-06-24 19:47:27

Replying to [comment:8 mmezzarobba]:
> I used the patch to build sage 5.11β3 on a system that used to be affected by this bug (debian sid, gcc 4.8). It works for me.

Someone else just reported the same error for Debian testing... :-)


---

Comment by leif created at 2013-06-24 22:00:49

Slightly changed the spkg; patch now removes unneeded files as well.


---

Attachment

Proposed patch to upstream (included in the `.p8` spkg).  For reference / review.


---

Comment by vbraun created at 2013-06-26 13:30:10

Changing priority from major to critical.


---

Comment by ncohen created at 2013-07-02 09:58:48

This spkg fixed the problem for me too ! And I also run debian sid. Thank you very much ! `;-)`

Nathann


---

Comment by vbraun created at 2013-07-06 13:14:04

Leif, are you still working on the patch or is this ready for review?


---

Comment by vbraun created at 2013-07-10 19:53:52

The GMP header patch looks good to me (positive review)

Somebody needs to review the sage-src script and then we are ready.


---

Comment by vbraun created at 2013-07-10 19:53:52

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-07-10 19:53:52

Changing keywords from "cf_gmp.h bits/c++config.h spkg factory build error Arch Linux Slackware" to "git cf_gmp.h bits/c++config.h spkg factory build error Arch Linux Slackware".


---

Comment by jpflori created at 2013-07-11 21:55:15

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2013-07-11 21:55:15

I'm ok with spkg-src.


---

Comment by jdemeyer created at 2013-08-02 14:19:05

Resolution: fixed
