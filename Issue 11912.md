# Issue 11912: Restores a test in sage/tests/french_book/number_theory.py

archive/issues_011912.json:
```json
{
    "body": "Assignee: @aghitza\n\nCC:  @zimmermann6\n\nTicket #8334 inappropriately changed the following test in `sage/tests/french_book/number_theory.py`:\n\n```\nsage: R = GF(9,name='x'); R\nFinite Field in x of size 3^2\nsage: Q.<x> = PolynomialRing(GF(3))\nsage: R2 = GF(9,name='x',modulus=x^2+1); R2\nFinite Field in x of size 3^2\nsage: p = R(x+1); R2(p)\nTraceback (most recent call last):\n...\nTypeError: unable to coerce from a finite field other than the prime subfield\n```\n\nto instead raise a `NotImplementedError`.  The original behavior was restored in #8335, but that ticket has stagnated.\n\nWe add a patch to restore the original error message and type.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12084\n\n",
    "created_at": "2011-11-25T21:09:11Z",
    "labels": [
        "component: basic arithmetic",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Restores a test in sage/tests/french_book/number_theory.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11912",
    "user": "https://github.com/roed314"
}
```
Assignee: @aghitza

CC:  @zimmermann6

Ticket #8334 inappropriately changed the following test in `sage/tests/french_book/number_theory.py`:

```
sage: R = GF(9,name='x'); R
Finite Field in x of size 3^2
sage: Q.<x> = PolynomialRing(GF(3))
sage: R2 = GF(9,name='x',modulus=x^2+1); R2
Finite Field in x of size 3^2
sage: p = R(x+1); R2(p)
Traceback (most recent call last):
...
TypeError: unable to coerce from a finite field other than the prime subfield
```

to instead raise a `NotImplementedError`.  The original behavior was restored in #8335, but that ticket has stagnated.

We add a patch to restore the original error message and type.

Issue created by migration from https://trac.sagemath.org/ticket/12084





---

archive/issue_comments_136328.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-25T21:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136328",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_136329.json:
```json
{
    "body": "thank you David. I will review that ticket during the Sage-Flint days, unless someone beats me.\n\nPaul\n\nPS: btw, please use different tickets to solve different issues",
    "created_at": "2011-11-26T07:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136329",
    "user": "https://github.com/zimmermann6"
}
```

thank you David. I will review that ticket during the Sage-Flint days, unless someone beats me.

Paul

PS: btw, please use different tickets to solve different issues



---

archive/issue_comments_136330.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-31T15:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136330",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_136331.json:
```json
{
    "body": "\n```\nFile \"/storage/masiao/sage-4.8.alpha5/devel/sage-testing/sage/rings/finite_rings/finite_field_givaro.py\", line 327:\n    sage: F81(F9.gen())\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError\nGot:\n    Traceback (most recent call last):\n      File \"/storage/masiao/sage-4.8.alpha5/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/storage/masiao/sage-4.8.alpha5/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/storage/masiao/sage-4.8.alpha5/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[50]>\", line 1, in <module>\n        F81(F9.gen())###line 327:\n    sage: F81(F9.gen())\n      File \"parent.pyx\", line 984, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7320)\n      File \"parent.pyx\", line 2149, in sage.structure.parent.Parent.convert_map_from (sage/structure/parent.c:14043)\n      File \"parent.pyx\", line 2156, in sage.structure.parent.Parent.discover_convert_map_from (sage/structure/parent.c:14194)\n      File \"parent.pyx\", line 2013, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:12824)\n      File \"parent.pyx\", line 2064, in sage.structure.parent.Parent.discover_coerce_map_from (sage/structure/parent.c:13220)\n      File \"parent_old.pyx\", line 501, in sage.structure.parent_old.Parent._coerce_map_from_ (sage/structure/parent_old.c:6047)\n      File \"/storage/masiao/sage-4.8.alpha5/local/lib/python/site-packages/sage/rings/finite_rings/finite_field_givaro.py\", line 357, in _coerce_map_from_\n        raise TypeError, \"unable to coerce from a finite field other than the prime subfield\"\n    TypeError: unable to coerce from a finite field other than the prime subfield\n```\n",
    "created_at": "2011-12-31T15:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136331",
    "user": "https://github.com/loefflerd"
}
```


```
File "/storage/masiao/sage-4.8.alpha5/devel/sage-testing/sage/rings/finite_rings/finite_field_givaro.py", line 327:
    sage: F81(F9.gen())
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError
Got:
    Traceback (most recent call last):
      File "/storage/masiao/sage-4.8.alpha5/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/storage/masiao/sage-4.8.alpha5/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/storage/masiao/sage-4.8.alpha5/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[50]>", line 1, in <module>
        F81(F9.gen())###line 327:
    sage: F81(F9.gen())
      File "parent.pyx", line 984, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7320)
      File "parent.pyx", line 2149, in sage.structure.parent.Parent.convert_map_from (sage/structure/parent.c:14043)
      File "parent.pyx", line 2156, in sage.structure.parent.Parent.discover_convert_map_from (sage/structure/parent.c:14194)
      File "parent.pyx", line 2013, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:12824)
      File "parent.pyx", line 2064, in sage.structure.parent.Parent.discover_coerce_map_from (sage/structure/parent.c:13220)
      File "parent_old.pyx", line 501, in sage.structure.parent_old.Parent._coerce_map_from_ (sage/structure/parent_old.c:6047)
      File "/storage/masiao/sage-4.8.alpha5/local/lib/python/site-packages/sage/rings/finite_rings/finite_field_givaro.py", line 357, in _coerce_map_from_
        raise TypeError, "unable to coerce from a finite field other than the prime subfield"
    TypeError: unable to coerce from a finite field other than the prime subfield
```




---

archive/issue_comments_136332.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2012-01-03T20:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136332",
    "user": "https://github.com/zimmermann6"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_136333.json:
```json
{
    "body": "David, on top of 4.7.2 it works for me:\n\n```\n[zimmerma@coing finite_rings]$ sage -t finite_field_givaro.py\nsage -t  \"devel/sage-12084/sage/rings/finite_rings/finite_field_givaro.py\"\n         [4.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 4.8 seconds\n```\n\nDid you apply another patch which would be in conflict with that one?\n\nPaul",
    "created_at": "2012-01-03T20:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136333",
    "user": "https://github.com/zimmermann6"
}
```

David, on top of 4.7.2 it works for me:

```
[zimmerma@coing finite_rings]$ sage -t finite_field_givaro.py
sage -t  "devel/sage-12084/sage/rings/finite_rings/finite_field_givaro.py"
         [4.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 4.8 seconds
```

Did you apply another patch which would be in conflict with that one?

Paul



---

archive/issue_comments_136334.json:
```json
{
    "body": "No, this is in a fresh build of 4.8.alpha5 with no patches applied. Moreover I can't see how it *can* work, in any version, since #8334 added a doctest to finite_field_givaro which expects the NotImplementedError, and the patch here changes the NotImplementedError back to a TypeError but does not change this doctest.",
    "created_at": "2012-01-03T22:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136334",
    "user": "https://github.com/loefflerd"
}
```

No, this is in a fresh build of 4.8.alpha5 with no patches applied. Moreover I can't see how it *can* work, in any version, since #8334 added a doctest to finite_field_givaro which expects the NotImplementedError, and the patch here changes the NotImplementedError back to a TypeError but does not change this doctest.



---

archive/issue_comments_136335.json:
```json
{
    "body": "Attachment [12084.patch](tarball://root/attachments/some-uuid/ticket12084/12084.patch) by @roed314 created at 2012-01-04 11:42:45\n\nI've updated the patch to change that doctest.",
    "created_at": "2012-01-04T11:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136335",
    "user": "https://github.com/roed314"
}
```

Attachment [12084.patch](tarball://root/attachments/some-uuid/ticket12084/12084.patch) by @roed314 created at 2012-01-04 11:42:45

I've updated the patch to change that doctest.



---

archive/issue_comments_136336.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-01-04T11:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136336",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_136337.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-04T12:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136337",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_011964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:57:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11912#event-11964"
}
```



---

archive/issue_comments_136338.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-15T21:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11912#issuecomment-136338",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
