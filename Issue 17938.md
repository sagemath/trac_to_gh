# Issue 17938: Implement categories for topological and metric spaces and related categories

archive/issues_017938.json:
```json
{
    "body": "Assignee: @tscrim\n\nCC:  @nthiery @egourgoulhon\n\nKeywords: geometry, topology\n\nAfter a discussion at Sage Days 64, we decided to implement a variety of categories pertaining to geometry and topology to lend assistance to [SageManifolds](http://sagemanifolds.obspm.fr) (#14865) and to generalize idioms in the hyperbolic geometry (#9439). This implements the following categories:\n\n- topological spaces\n- metric spaces\n- manifolds\n- CW complexes\n- simplicial complexes (which has been needed, see #10667, #6099)\n- Lie groups\n\nand axioms:\n\n- complex\n- compact\n- differentiable\n- smooth\n\nIssue created by migration from https://trac.sagemath.org/ticket/18175\n\n",
    "created_at": "2015-04-12T21:41:46Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Implement categories for topological and metric spaces and related categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17938",
    "user": "https://github.com/tscrim"
}
```
Assignee: @tscrim

CC:  @nthiery @egourgoulhon

Keywords: geometry, topology

After a discussion at Sage Days 64, we decided to implement a variety of categories pertaining to geometry and topology to lend assistance to [SageManifolds](http://sagemanifolds.obspm.fr) (#14865) and to generalize idioms in the hyperbolic geometry (#9439). This implements the following categories:

- topological spaces
- metric spaces
- manifolds
- CW complexes
- simplicial complexes (which has been needed, see #10667, #6099)
- Lie groups

and axioms:

- complex
- compact
- differentiable
- smooth

Issue created by migration from https://trac.sagemath.org/ticket/18175





---

archive/issue_comments_240598.json:
```json
{
    "body": "I've implemented a bunch of stub categories as an overall layout guide. My method stubs and documentation will need to be expanded upon, including adding (more) tests, along with lifting methods from the hyperbolic geometry module. There is currently an abuse of `Finite` for CW complexes as they are not typically finite as sets (in fact, the only finite CW complexes are a finite collection of 0-cells), but the terminology is finite CW complex meaning a finite number of cells.\n\nEric, hopefully this is enough to get you started on what you'd want/need for SageManifolds. I probably won't work much more on this for a while.\n\n---\nNew commits:",
    "created_at": "2015-04-13T00:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240598",
    "user": "https://github.com/tscrim"
}
```

I've implemented a bunch of stub categories as an overall layout guide. My method stubs and documentation will need to be expanded upon, including adding (more) tests, along with lifting methods from the hyperbolic geometry module. There is currently an abuse of `Finite` for CW complexes as they are not typically finite as sets (in fact, the only finite CW complexes are a finite collection of 0-cells), but the terminology is finite CW complex meaning a finite number of cells.

Eric, hopefully this is enough to get you started on what you'd want/need for SageManifolds. I probably won't work much more on this for a while.

---
New commits:



---

archive/issue_comments_240599.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-04-13T00:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_240600.json:
```json
{
    "body": "Handled conflicts with #17160.",
    "created_at": "2015-04-13T00:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240600",
    "user": "https://github.com/tscrim"
}
```

Handled conflicts with #17160.



---

archive/issue_comments_240601.json:
```json
{
    "body": "Hi Travis,\n\nReplying to [comment:1 tscrim]:\n> \n> Eric, hopefully this is enough to get you started on what you'd want/need for SageManifolds. I probably won't work much more on this for a while.\n\n\nThat's great! Many thanks for implementing this. In a week or two, I'll start to split SageManifolds in small tickets and will of course use your category framework.\n\nEric.",
    "created_at": "2015-04-13T08:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240601",
    "user": "https://github.com/egourgoulhon"
}
```

Hi Travis,

Replying to [comment:1 tscrim]:
> 
> Eric, hopefully this is enough to get you started on what you'd want/need for SageManifolds. I probably won't work much more on this for a while.


That's great! Many thanks for implementing this. In a week or two, I'll start to split SageManifolds in small tickets and will of course use your category framework.

Eric.



---

archive/issue_comments_240602.json:
```json
{
    "body": "Changing keywords from \"geometry, topology\" to \"geometry, topology, sd67\".",
    "created_at": "2015-04-13T16:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240602",
    "user": "https://github.com/nthiery"
}
```

Changing keywords from "geometry, topology" to "geometry, topology, sd67".



---

archive/issue_comments_240603.json:
```json
{
    "body": "Hi Travis,\n\nI gave a look at the category `Manifolds`; it looks nice and I have the following comments:\n\n- the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?\n- in the docstring of `Manifolds`, I think the phrase \"such that the neighborhood of any point `x \\in M` is homeomorphic to `k^d`\" should be changed to something like \"such that any point `x\\in M` admits a neighborhood homeomorphic to `k^d`\"\n\nEric.",
    "created_at": "2015-04-15T09:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240603",
    "user": "https://github.com/egourgoulhon"
}
```

Hi Travis,

I gave a look at the category `Manifolds`; it looks nice and I have the following comments:

- the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?
- in the docstring of `Manifolds`, I think the phrase "such that the neighborhood of any point `x \in M` is homeomorphic to `k^d`" should be changed to something like "such that any point `x\in M` admits a neighborhood homeomorphic to `k^d`"

Eric.



---

archive/issue_comments_240604.json:
```json
{
    "body": "Replying to [comment:7 egourgoulhon]:\n> - the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?\n\n\nI wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.\n\n> - in the docstring of `Manifolds`, I think the phrase \"such that the neighborhood of any point `x \\in M` is homeomorphic to `k^d`\" should be changed to something like \"such that any point `x\\in M` admits a neighborhood homeomorphic to `k^d`\"\n\n\nFeel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.",
    "created_at": "2015-04-20T07:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240604",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:7 egourgoulhon]:
> - the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?


I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.

> - in the docstring of `Manifolds`, I think the phrase "such that the neighborhood of any point `x \in M` is homeomorphic to `k^d`" should be changed to something like "such that any point `x\in M` admits a neighborhood homeomorphic to `k^d`"


Feel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.



---

archive/issue_comments_240605.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Replying to [comment:7 egourgoulhon]:\n> > - the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?\n \n> \n> I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.\n\n\nFor all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. \n\n> \n> > - in the docstring of `Manifolds`, I think the phrase \"such that the neighborhood of any point `x \\in M` is homeomorphic to `k^d`\" should be changed to something like \"such that any point `x\\in M` admits a neighborhood homeomorphic to `k^d`\"\n \n> \n> Feel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.\n\n\nApart from the dimension issue discussed above, the current categories seems fine to rebase SageManifolds on them, thanks. I'll try soon and let you know.",
    "created_at": "2015-04-20T11:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240605",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:8 tscrim]:
> Replying to [comment:7 egourgoulhon]:
> > - the methods `dimension()` and `FiniteDimensional()`, and well as the class `FiniteDimensional`, are defined only at the level of `Connected`; shouldn't they be at the level of `Manifolds` itself ?
 
> 
> I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.


For all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. 

> 
> > - in the docstring of `Manifolds`, I think the phrase "such that the neighborhood of any point `x \in M` is homeomorphic to `k^d`" should be changed to something like "such that any point `x\in M` admits a neighborhood homeomorphic to `k^d`"
 
> 
> Feel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.


Apart from the dimension issue discussed above, the current categories seems fine to rebase SageManifolds on them, thanks. I'll try soon and let you know.



---

archive/issue_comments_240606.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-10T01:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240607.json:
```json
{
    "body": "Replying to [comment:9 egourgoulhon]:\n> Replying to [comment:8 tscrim]:\n> > I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.\n\n> \n> For all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. \n\n\nI split the difference in that I kept a more general definition, but I had dimension be the maximum of the dimensions of each connected component so you don't necessarily have to specify connected.\n\n> > > - in the docstring of `Manifolds`, I think the phrase \"such that the neighborhood of any point `x \\in M` is homeomorphic to `k^d`\" should be changed to something like \"such that any point `x\\in M` admits a neighborhood homeomorphic to `k^d`\"\n \n> > \n> > Feel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.\n\n> \n> Apart from the dimension issue discussed above, the current categories seems fine to rebase SageManifolds on them, thanks. I'll try soon and let you know.\n\n\nI made some fixes, specifically I stopped an infinite recursion with metric spaces caused by some of my last-minute refactoring. I forgot to make the other change to the manifold's doc, but I want to make sure you're okay with my definition of a manifold before I keep changing it. This is almost ready for review up to some methods not containing doctests.",
    "created_at": "2015-05-10T01:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240607",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:9 egourgoulhon]:
> Replying to [comment:8 tscrim]:
> > I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.

> 
> For all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. 


I split the difference in that I kept a more general definition, but I had dimension be the maximum of the dimensions of each connected component so you don't necessarily have to specify connected.

> > > - in the docstring of `Manifolds`, I think the phrase "such that the neighborhood of any point `x \in M` is homeomorphic to `k^d`" should be changed to something like "such that any point `x\in M` admits a neighborhood homeomorphic to `k^d`"
 
> > 
> > Feel free to change the docstrings and categories as much as you want. However if you just want to get these category stubs into Sage as a smaller step, we can do that too.

> 
> Apart from the dimension issue discussed above, the current categories seems fine to rebase SageManifolds on them, thanks. I'll try soon and let you know.


I made some fixes, specifically I stopped an infinite recursion with metric spaces caused by some of my last-minute refactoring. I forgot to make the other change to the manifold's doc, but I want to make sure you're okay with my definition of a manifold before I keep changing it. This is almost ready for review up to some methods not containing doctests.



---

archive/issue_comments_240608.json:
```json
{
    "body": "Replying to [comment:11 tscrim]:\n> Replying to [comment:9 egourgoulhon]:\n> > Replying to [comment:8 tscrim]:\n> > > I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.\n\n> > \n> > For all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. \n\n> \n> I split the difference in that I kept a more general definition, but I had dimension be the maximum of the dimensions of each connected component so you don't necessarily have to specify connected.\n\n\nDo you have a reference for such a definition of a manifold ? It seems non-standard (*) to me, but I might be wrong.\n(*) the standard being that the dimension is the same for all the connected components.",
    "created_at": "2015-05-19T19:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240608",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:11 tscrim]:
> Replying to [comment:9 egourgoulhon]:
> > Replying to [comment:8 tscrim]:
> > > I wasn't sure about the dimension making sense for manifolds unless they are connected as far as my definition. Mainly do we want the disjoint union of a 1-sphere and 2-sphere be a manifold? (Current definition is yes). If so, then is the dimension the maximal dimension of each component? I will leave the decision up to you.

> > 
> > For all the textbook definitions I am aware of, the disjoint union of a 1-sphere and a 2-sphere is *not* a manifold. In other words, the dimension is unique among all the connected components of the manifold. So I think the dimension should be at the level of `Manifolds`. 

> 
> I split the difference in that I kept a more general definition, but I had dimension be the maximum of the dimensions of each connected component so you don't necessarily have to specify connected.


Do you have a reference for such a definition of a manifold ? It seems non-standard (*) to me, but I might be wrong.
(*) the standard being that the dimension is the same for all the connected components.



---

archive/issue_comments_240609.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-29T14:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_051420.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-05-29T14:19:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17938#event-51420"
}
```



---

archive/issue_comments_240610.json:
```json
{
    "body": "On Wikipedia (http://en.wikipedia.org/wiki/Dimension), they are careful to say a connected manifold. I do agree with you that the standard definition, but the usual case only considers connected manifolds. I did find some papers which don't assume each component has the same dimension, but I can't find them in minute I have to write this. I will look later though. For this, I wanted to be general and consistent with CW complexes. I think SageManifolds can create connected components with different dimension, but I haven't tried.",
    "created_at": "2015-05-29T14:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240610",
    "user": "https://github.com/tscrim"
}
```

On Wikipedia (http://en.wikipedia.org/wiki/Dimension), they are careful to say a connected manifold. I do agree with you that the standard definition, but the usual case only considers connected manifolds. I did find some papers which don't assume each component has the same dimension, but I can't find them in minute I have to write this. I will look later though. For this, I wanted to be general and consistent with CW complexes. I think SageManifolds can create connected components with different dimension, but I haven't tried.



---

archive/issue_comments_240611.json:
```json
{
    "body": "Replying to [comment:14 tscrim]:\n> On Wikipedia (http://en.wikipedia.org/wiki/Dimension), they are careful to say a connected manifold.\n\n\nYes. I've looked a little further and found that some authors do allow for different dimensions on different connected components; they then define a *pure manifold* as a manifold for which the dimension is the same among all connected components. On the other side, other authors refuse to do this: for instance, J.M. Lee, in his Introduction to Topological Manifolds (2nd ed., 2011) says on p. 39: *\"the first remark is that the definition of a manifold requires that every manifold have a specific, well-defined dimension. This rules out, for example, spaces such as a disjoint union of a line and a plane in R<sup>3</sup> \".*\nSince there is no consensus in the literature, it's fine to take either definition, as long as it is clearly stated. I therefore agree with your definition, especially since it is consistent with CW complexes.",
    "created_at": "2015-05-29T21:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240611",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:14 tscrim]:
> On Wikipedia (http://en.wikipedia.org/wiki/Dimension), they are careful to say a connected manifold.


Yes. I've looked a little further and found that some authors do allow for different dimensions on different connected components; they then define a *pure manifold* as a manifold for which the dimension is the same among all connected components. On the other side, other authors refuse to do this: for instance, J.M. Lee, in his Introduction to Topological Manifolds (2nd ed., 2011) says on p. 39: *"the first remark is that the definition of a manifold requires that every manifold have a specific, well-defined dimension. This rules out, for example, spaces such as a disjoint union of a line and a plane in R<sup>3</sup> ".*
Since there is no consensus in the literature, it's fine to take either definition, as long as it is clearly stated. I therefore agree with your definition, especially since it is consistent with CW complexes.



---

archive/issue_comments_240612.json:
```json
{
    "body": "My professional opinion as a topologist is that a manifold should have a well-defined dimension *n*, and every point of that manifold should have a neighborhood homeomorphic to **R**<sup>*n*</sup>. So even if it's not connected, the different components should have the same dimension.\n\nI think that more people would be unpleasantly surprised if we allowed different components to have different dimensions than if we had the more relaxed version. (There is no similar discomfort for CW complexes or simplicial complexes: topologists are perfectly happy having a CW complex with maximal cells of different dimensions.)",
    "created_at": "2015-05-29T23:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240612",
    "user": "https://github.com/jhpalmieri"
}
```

My professional opinion as a topologist is that a manifold should have a well-defined dimension *n*, and every point of that manifold should have a neighborhood homeomorphic to **R**<sup>*n*</sup>. So even if it's not connected, the different components should have the same dimension.

I think that more people would be unpleasantly surprised if we allowed different components to have different dimensions than if we had the more relaxed version. (There is no similar discomfort for CW complexes or simplicial complexes: topologists are perfectly happy having a CW complex with maximal cells of different dimensions.)



---

archive/issue_comments_240613.json:
```json
{
    "body": "I don't really hold a strong opinion on the definition of a manifold, so perhaps for the sake of clarity, we'll make this be local homeomorphic to **k**<sup>n</sup>, where **k** is a topological field.\n\nHowever this brings up another point in the design for manifolds. When I first wrote this category, I was thinking all manifolds would be real and a subcategory for those who allow carry a complex structure. The reason for this is I was thinking of complex Lie groups, which can behave differently than their real/rational/positive-char counterparts. Yet I'm wondering if we should instead just parameterize the category and this gives a more consistent interface (and if we need a special complex subcategory, we still might want that parameterized by the complex field).\n\nA more concrete (better) question is what do you want a complex manifold to be? Wikipedia says it is a manifold with holomorphic transition maps. Or should this be a smooth manifold over the complex numbers? In other words, should the notion of differentiability be inherent in the base field?\n\nThoughts?",
    "created_at": "2015-05-30T06:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240613",
    "user": "https://github.com/tscrim"
}
```

I don't really hold a strong opinion on the definition of a manifold, so perhaps for the sake of clarity, we'll make this be local homeomorphic to **k**<sup>n</sup>, where **k** is a topological field.

However this brings up another point in the design for manifolds. When I first wrote this category, I was thinking all manifolds would be real and a subcategory for those who allow carry a complex structure. The reason for this is I was thinking of complex Lie groups, which can behave differently than their real/rational/positive-char counterparts. Yet I'm wondering if we should instead just parameterize the category and this gives a more consistent interface (and if we need a special complex subcategory, we still might want that parameterized by the complex field).

A more concrete (better) question is what do you want a complex manifold to be? Wikipedia says it is a manifold with holomorphic transition maps. Or should this be a smooth manifold over the complex numbers? In other words, should the notion of differentiability be inherent in the base field?

Thoughts?



---

archive/issue_comments_240614.json:
```json
{
    "body": "IMHO, a complex manifold should be a topological manifold over **C** (i.e. locally homeomorphic to **C**<sup>n</sup>) with holomorphic transition maps. In the refactoring/split of SageManifolds I am preparing in #18528, I have relaxed the assumption of real manifolds used up to now and have introduced topological manifolds over a generic topological field, having in mind complex manifolds, in addition to real ones. In the implementation, each object of the class `ComplexManifold` could have an attribute which is an almost complex manifold. The latter would be a real smooth manifold of dimension 2n with an almost complex structure and would be implemented as a subclass of `SmoothManifold`. \nI have the impression that the category `Manifolds` that you are introducing in the current ticket is sufficient for this, i.e. it can be used for any topological manifold over a topological field. I plan to set the `TopManifold` objects of #18529 in this category. Then, the class `ComplexManifold` would inherit from `TopManifold` and would be set in the category `Manifolds.Complex()`.",
    "created_at": "2015-05-30T07:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240614",
    "user": "https://github.com/egourgoulhon"
}
```

IMHO, a complex manifold should be a topological manifold over **C** (i.e. locally homeomorphic to **C**<sup>n</sup>) with holomorphic transition maps. In the refactoring/split of SageManifolds I am preparing in #18528, I have relaxed the assumption of real manifolds used up to now and have introduced topological manifolds over a generic topological field, having in mind complex manifolds, in addition to real ones. In the implementation, each object of the class `ComplexManifold` could have an attribute which is an almost complex manifold. The latter would be a real smooth manifold of dimension 2n with an almost complex structure and would be implemented as a subclass of `SmoothManifold`. 
I have the impression that the category `Manifolds` that you are introducing in the current ticket is sufficient for this, i.e. it can be used for any topological manifold over a topological field. I plan to set the `TopManifold` objects of #18529 in this category. Then, the class `ComplexManifold` would inherit from `TopManifold` and would be set in the category `Manifolds.Complex()`.



---

archive/issue_comments_240615.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-31T05:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240616.json:
```json
{
    "body": "It still seems like we are having an assumption that all manifolds can inherently be realized over **R**. This was my initial assumption too, and so manifolds that could be locally homoemorphic to **C**<sup>d</sup> were a special case.\n\nHowever I feel like it would be best for `Manifolds` to be over an arbitrary topological field (which will require some very mild changes). So then the heirarchy for manifolds would be:\n\n```\n     Manifolds\n        |\n  Differentiable\n        |\n      Smooth\n   /         \\\nAnalytic    AlmostComplex\n                |\n             Complex\n```\nDo you think this what we want?\n\nAlso do we think we should add a stub category for PL and/or (pseudo) Riemannian manifolds? How about `ManifoldsWithBoundary` as a supercategory of `Manifolds` (and how many of these extra structures lift to the boundary)?\n\nA question for CW complexes, should the elements of a CW complex be the cells or the points of the topological space? Right now, I'm taking the former approach, but I feel this might be an abuse as these should be subobjects of the category (Nicolas, any wisdom to impart on this?). If this seems like a non-trivial issue, I can split this ticket into 2 parts; one for the manifolds and one for the CW complexes.",
    "created_at": "2015-05-31T06:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240616",
    "user": "https://github.com/tscrim"
}
```

It still seems like we are having an assumption that all manifolds can inherently be realized over **R**. This was my initial assumption too, and so manifolds that could be locally homoemorphic to **C**<sup>d</sup> were a special case.

However I feel like it would be best for `Manifolds` to be over an arbitrary topological field (which will require some very mild changes). So then the heirarchy for manifolds would be:

```
     Manifolds
        |
  Differentiable
        |
      Smooth
   /         \
Analytic    AlmostComplex
                |
             Complex
```
Do you think this what we want?

Also do we think we should add a stub category for PL and/or (pseudo) Riemannian manifolds? How about `ManifoldsWithBoundary` as a supercategory of `Manifolds` (and how many of these extra structures lift to the boundary)?

A question for CW complexes, should the elements of a CW complex be the cells or the points of the topological space? Right now, I'm taking the former approach, but I feel this might be an abuse as these should be subobjects of the category (Nicolas, any wisdom to impart on this?). If this seems like a non-trivial issue, I can split this ticket into 2 parts; one for the manifolds and one for the CW complexes.



---

archive/issue_comments_240617.json:
```json
{
    "body": "Replying to [comment:20 tscrim]:\n\n> \n> However I feel like it would be best for `Manifolds` to be over an arbitrary topological field (which will require some very mild changes). So then the heirarchy for manifolds would be:\n> \n> ```\n>      Manifolds\n>         |\n>   Differentiable\n>         |\n>       Smooth\n>    /         \\\n> Analytic    AlmostComplex\n>                 |\n>              Complex\n> ```\n> Do you think this what we want?\n\n\nIf manifolds are distinguished by their base field (after all, this is the base field that defines the dimension), an alternative hierarchy would be\n\n```\n            Manifolds\n             /    \\\n        Complex  Differentiable\n                       |\n                     Smooth\n                    /      \\\n                Analytic  AlmostComplex\n```\nwith the understanding that \n- `Manifolds`: topological manifolds over a topological field K\n- `Complex`: topological manifolds over K=**C** with a holomorphic atlas\n- `Differentiable`: topological manifolds over K=**R** with a differentiable atlas\n- `Smooth`: topological manifolds over K=**R** with a C<sup>oo</sup> atlas\n- `Analytic`: topological manifolds over K=**R** with an analytic atlas\n- `AlmostComplex`: smooth manifolds with an almost complex structure\nIn particular, it seems to me that in the literature, \"differentiable manifold\" and \"smooth manifold\" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.\n\n\n> \n> Also do we think we should add a stub category for PL and/or (pseudo) Riemannian manifolds? How about `ManifoldsWithBoundary` as a supercategory of `Manifolds` (and how many of these extra structures lift to the boundary)?\n\n\nProbably at some point, `ManifoldsWithBoundary` will be necessary, but this could be left for a second stage...",
    "created_at": "2015-05-31T10:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240617",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:20 tscrim]:

> 
> However I feel like it would be best for `Manifolds` to be over an arbitrary topological field (which will require some very mild changes). So then the heirarchy for manifolds would be:
> 
> ```
>      Manifolds
>         |
>   Differentiable
>         |
>       Smooth
>    /         \
> Analytic    AlmostComplex
>                 |
>              Complex
> ```
> Do you think this what we want?


If manifolds are distinguished by their base field (after all, this is the base field that defines the dimension), an alternative hierarchy would be

```
            Manifolds
             /    \
        Complex  Differentiable
                       |
                     Smooth
                    /      \
                Analytic  AlmostComplex
```
with the understanding that 
- `Manifolds`: topological manifolds over a topological field K
- `Complex`: topological manifolds over K=**C** with a holomorphic atlas
- `Differentiable`: topological manifolds over K=**R** with a differentiable atlas
- `Smooth`: topological manifolds over K=**R** with a C<sup>oo</sup> atlas
- `Analytic`: topological manifolds over K=**R** with an analytic atlas
- `AlmostComplex`: smooth manifolds with an almost complex structure
In particular, it seems to me that in the literature, "differentiable manifold" and "smooth manifold" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.


> 
> Also do we think we should add a stub category for PL and/or (pseudo) Riemannian manifolds? How about `ManifoldsWithBoundary` as a supercategory of `Manifolds` (and how many of these extra structures lift to the boundary)?


Probably at some point, `ManifoldsWithBoundary` will be necessary, but this could be left for a second stage...



---

archive/issue_comments_240618.json:
```json
{
    "body": "Replying to [comment:21 egourgoulhon]:\n\n> - `Manifolds`: topological manifolds over a topological field K\n> - `Complex`: topological manifolds over K=**C** with a holomorphic atlas\n> - `Differentiable`: topological manifolds over K=**R** with a differentiable atlas\n> - `Smooth`: topological manifolds over K=**R** with a C<sup>oo</sup> atlas\n> - `Analytic`: topological manifolds over K=**R** with an analytic atlas\n> - `AlmostComplex`: smooth manifolds with an almost complex structure\n\n\nHowever, I don't think we should impose the restriction for differentiable/smooth/analytic as being over **R**. See for instance http://www.iecn.u-nancy.fr/~bertram/simfin.pdf. Specifically, it would allow us to work over **Q**, where arithmetic is exact.\n\n> In particular, it seems to me that in the literature, \"differentiable manifold\" and \"smooth manifold\" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.\n\n\nThis says that complex should be a subcategory of almost complex. However by parameterizing the manifolds category by the base field (like, e.g., `Algebras`), there will be no danger of ambiguity of considering an almost complex manifold as being over **C** or over **R**. This also means we could do the hierarchy I previously suggested (with a minor adjustment):\n\n```\n      Manifolds\n          |\n    Differentiable\n          |\n        Smooth\n       /      \\\n  Analytic   AlmostComplex\n       \\      /\n        Complex\n```\nIn particular, this would allow us to consider a manifold over **R** that supports a complex structure (for instance, **C** considered as a 2-dim real manifold). Thus natural identifications could be given by functors.",
    "created_at": "2015-05-31T18:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240618",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:21 egourgoulhon]:

> - `Manifolds`: topological manifolds over a topological field K
> - `Complex`: topological manifolds over K=**C** with a holomorphic atlas
> - `Differentiable`: topological manifolds over K=**R** with a differentiable atlas
> - `Smooth`: topological manifolds over K=**R** with a C<sup>oo</sup> atlas
> - `Analytic`: topological manifolds over K=**R** with an analytic atlas
> - `AlmostComplex`: smooth manifolds with an almost complex structure


However, I don't think we should impose the restriction for differentiable/smooth/analytic as being over **R**. See for instance http://www.iecn.u-nancy.fr/~bertram/simfin.pdf. Specifically, it would allow us to work over **Q**, where arithmetic is exact.

> In particular, it seems to me that in the literature, "differentiable manifold" and "smooth manifold" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.


This says that complex should be a subcategory of almost complex. However by parameterizing the manifolds category by the base field (like, e.g., `Algebras`), there will be no danger of ambiguity of considering an almost complex manifold as being over **C** or over **R**. This also means we could do the hierarchy I previously suggested (with a minor adjustment):

```
      Manifolds
          |
    Differentiable
          |
        Smooth
       /      \
  Analytic   AlmostComplex
       \      /
        Complex
```
In particular, this would allow us to consider a manifold over **R** that supports a complex structure (for instance, **C** considered as a 2-dim real manifold). Thus natural identifications could be given by functors.



---

archive/issue_comments_240619.json:
```json
{
    "body": "Replying to [comment:22 tscrim]:\n> \n> However, I don't think we should impose the restriction for differentiable/smooth/analytic as being over **R**. See for instance http://www.iecn.u-nancy.fr/~bertram/simfin.pdf.\n\n\nIf we can reach this level of generality, why not? I guess that when defining new categories for Sage, it's better to be as general as possible. \n\n> Specifically, it would allow us to work over **Q**, where arithmetic is exact.\n> \n> > In particular, it seems to me that in the literature, \"differentiable manifold\" and \"smooth manifold\" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.\n\n> \n> This says that complex should be a subcategory of almost complex. However by parameterizing the manifolds category by the base field (like, e.g., `Algebras`), there will be no danger of ambiguity of considering an almost complex manifold as being over **C** or over **R**. This also means we could do the hierarchy I previously suggested (with a minor adjustment):\n> \n> ```\n>       Manifolds\n>           |\n>     Differentiable\n>           |\n>         Smooth\n>        /      \\\n>   Analytic   AlmostComplex\n>        \\      /\n>         Complex\n> ```\n> In particular, this would allow us to consider a manifold over **R** that supports a complex structure (for instance, **C** considered as a 2-dim real manifold). Thus natural identifications could be given by functors.\n\n\nOK. I realize that my concern was more about the implementation of the Parent classes than about the categories: a priori, a complex manifold class cannot inherit from an almost complex class (despite of the name!) because it probably does not have any vanishing *complex* Nijenhuis tensor (although it has a vanishing *real* one), does it?\nBTW what is the opinion of John Palmieri about all this?",
    "created_at": "2015-06-01T06:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240619",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:22 tscrim]:
> 
> However, I don't think we should impose the restriction for differentiable/smooth/analytic as being over **R**. See for instance http://www.iecn.u-nancy.fr/~bertram/simfin.pdf.


If we can reach this level of generality, why not? I guess that when defining new categories for Sage, it's better to be as general as possible. 

> Specifically, it would allow us to work over **Q**, where arithmetic is exact.
> 
> > In particular, it seems to me that in the literature, "differentiable manifold" and "smooth manifold" always mean a real manifold. As mentionned in comment:18, in the implementation a complex manifold of dimension n would be canonically associated to an almost complex manifold of dimension 2n.

> 
> This says that complex should be a subcategory of almost complex. However by parameterizing the manifolds category by the base field (like, e.g., `Algebras`), there will be no danger of ambiguity of considering an almost complex manifold as being over **C** or over **R**. This also means we could do the hierarchy I previously suggested (with a minor adjustment):
> 
> ```
>       Manifolds
>           |
>     Differentiable
>           |
>         Smooth
>        /      \
>   Analytic   AlmostComplex
>        \      /
>         Complex
> ```
> In particular, this would allow us to consider a manifold over **R** that supports a complex structure (for instance, **C** considered as a 2-dim real manifold). Thus natural identifications could be given by functors.


OK. I realize that my concern was more about the implementation of the Parent classes than about the categories: a priori, a complex manifold class cannot inherit from an almost complex class (despite of the name!) because it probably does not have any vanishing *complex* Nijenhuis tensor (although it has a vanishing *real* one), does it?
BTW what is the opinion of John Palmieri about all this?



---

archive/issue_comments_240620.json:
```json
{
    "body": "Hi,\n\nI believe Almost Complex manifolds are real manifolds with *added structure* (namely a [1,1]-tensor), meanwhile complex manifolds can either be seen as\n* (a) Almost Complex manifold *satisfying further axioms* (integrability)\n* (b) Manifolds (over **C**) *satisfying axioms* (holomorphic transition)\nThe definitions (a) and (b) are equivalent, but the transition from (b) to (a) is easy meanwhile the transition (a) to (b) is given by the Newlander Nirenberg theorem and involves solving complicated PDEs which cannot be made automatic. Therefore, it should be implemented as different objects, because we cannot get complex coordinates from the knowledge of a vanishing Nijenhuis tensor.\n\nAnother consequence : Complex manifolds must have complex holomorphic coordinates hence it inherits from the analytic category. But should its coordinates seen as real analytic or complex analytic ?\n* It cannot be complex analytic since complex analytic manifolds are tautologically complex manifolds.\n* But, it should not be real analytic because from the same almost complex manifold with real analytic coordinates it may be impossible to get our complex manifold back. Moreover it makes no sense to consider complex coordinates which are real analytic (for example $\\bar{z}$ as a coordinate on **C**) because it does not preserve the complex structure on **C** but only preserves the structure of **R^2**.\n\nI don't really know anything about manifolds over **Q**, but I fear transitions maps should also satisfy some *rationality conditions*, and more generally over any field, one have to take the good functions. Hence making the category looks like `Algebra` might be more difficult.\nAnother example : over the \"ring\" of quaternions, what would be the good functions ? Actually, there are several definitions possible each yielding different theories.\n\nBasile",
    "created_at": "2015-06-01T09:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240620",
    "user": "https://trac.sagemath.org/admin/accounts/users/bpillet"
}
```

Hi,

I believe Almost Complex manifolds are real manifolds with *added structure* (namely a [1,1]-tensor), meanwhile complex manifolds can either be seen as
* (a) Almost Complex manifold *satisfying further axioms* (integrability)
* (b) Manifolds (over **C**) *satisfying axioms* (holomorphic transition)
The definitions (a) and (b) are equivalent, but the transition from (b) to (a) is easy meanwhile the transition (a) to (b) is given by the Newlander Nirenberg theorem and involves solving complicated PDEs which cannot be made automatic. Therefore, it should be implemented as different objects, because we cannot get complex coordinates from the knowledge of a vanishing Nijenhuis tensor.

Another consequence : Complex manifolds must have complex holomorphic coordinates hence it inherits from the analytic category. But should its coordinates seen as real analytic or complex analytic ?
* It cannot be complex analytic since complex analytic manifolds are tautologically complex manifolds.
* But, it should not be real analytic because from the same almost complex manifold with real analytic coordinates it may be impossible to get our complex manifold back. Moreover it makes no sense to consider complex coordinates which are real analytic (for example $\bar{z}$ as a coordinate on **C**) because it does not preserve the complex structure on **C** but only preserves the structure of **R^2**.

I don't really know anything about manifolds over **Q**, but I fear transitions maps should also satisfy some *rationality conditions*, and more generally over any field, one have to take the good functions. Hence making the category looks like `Algebra` might be more difficult.
Another example : over the "ring" of quaternions, what would be the good functions ? Actually, there are several definitions possible each yielding different theories.

Basile



---

archive/issue_comments_240621.json:
```json
{
    "body": "Hey Basile,\n\nI'm not quite sure what you're proposing we should do for organizing the manifolds category. For the (a) <=> (b) condition, we aren't doing any sort of checking. By a user constructing a object (parent) in a category, the user is simply promising that it carries that structure.\n\nWe could make it so there is no parameterization of the categories (on the underlying field), but instead have the condition for objects to be in the category that their base field be **R** or **C** as appropriate. However I think this leads to ambiguity of dimension (e.g., for complex manifolds, do you want the real or complex dimension?) and what you want your charts to be.\n\nI think for fields like **Q**, the metric gives a good notation of convergence, limits, and hence differential calculus. So, e.g., for smooth manifolds, the transition maps would still be smooth maps (just now in terms of **Q** calculus instead of **R** calculus).\n\nAre you perhaps suggesting we should do something like the digram in comment:21?",
    "created_at": "2015-06-03T21:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240621",
    "user": "https://github.com/tscrim"
}
```

Hey Basile,

I'm not quite sure what you're proposing we should do for organizing the manifolds category. For the (a) <=> (b) condition, we aren't doing any sort of checking. By a user constructing a object (parent) in a category, the user is simply promising that it carries that structure.

We could make it so there is no parameterization of the categories (on the underlying field), but instead have the condition for objects to be in the category that their base field be **R** or **C** as appropriate. However I think this leads to ambiguity of dimension (e.g., for complex manifolds, do you want the real or complex dimension?) and what you want your charts to be.

I think for fields like **Q**, the metric gives a good notation of convergence, limits, and hence differential calculus. So, e.g., for smooth manifolds, the transition maps would still be smooth maps (just now in terms of **Q** calculus instead of **R** calculus).

Are you perhaps suggesting we should do something like the digram in comment:21?



---

archive/issue_comments_240622.json:
```json
{
    "body": "Replying to [comment:25 tscrim]:\n> Hey Basile,\n\n\nHi,\n\n> \n> I'm not quite sure what you're proposing we should do for organizing the manifolds category. For the (a) <=> (b) condition, we aren't doing any sort of checking. By a user constructing a object (parent) in a category, the user is simply promising that it carries that structure.\n> \n> We could make it so there is no parameterization of the categories (on the underlying field), but instead have the condition for objects to be in the category that their base field be **R** or **C** as appropriate. However I think this leads to ambiguity of dimension (e.g., for complex manifolds, do you want the real or complex dimension?) and what you want your charts to be.\n\n\nI'm sorry I was not very clear. In my opinion it is important to distinguish manifolds over **R** and over **C**. `AlmostComplex` should be seen as manifolds over **R** enriched, but `ComplexManifold` should not inherit from `AlmostComplex`. At least so that dimension or charts would be unambiguous.\n(There would still exist a coercion from `ComplexManifold` to `AlmostComplex` but not coming from class heritage).\n\n> Are you perhaps suggesting we should do something like the digram in comment:21?\n\n\nYes actually. Because in the following diagram where everything is parametrised on the underlying field, the case **F**=**C** makes no sense. Indeed `Differentiable/C` cannot exist since usual differentiable maps are not **C**-linear. Or else if you define it to be **C**-differentiable then it is the same as `Smooth/C` and `Analytic/C`\n\n```\n   Manifolds/F\n       |  \nDifferentiable/F\n       |\n    Smooth/F\n       |\n   Analytic/F\n```\nI'm not sure, where, in the implementation the issue may appear...\nFor example, in the case of finite fields : x --> x<sup>p</sup> is not smooth on F_p but it is analytic, which contradicts the heritage.\n\nBasile",
    "created_at": "2015-06-04T14:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240622",
    "user": "https://trac.sagemath.org/admin/accounts/users/bpillet"
}
```

Replying to [comment:25 tscrim]:
> Hey Basile,


Hi,

> 
> I'm not quite sure what you're proposing we should do for organizing the manifolds category. For the (a) <=> (b) condition, we aren't doing any sort of checking. By a user constructing a object (parent) in a category, the user is simply promising that it carries that structure.
> 
> We could make it so there is no parameterization of the categories (on the underlying field), but instead have the condition for objects to be in the category that their base field be **R** or **C** as appropriate. However I think this leads to ambiguity of dimension (e.g., for complex manifolds, do you want the real or complex dimension?) and what you want your charts to be.


I'm sorry I was not very clear. In my opinion it is important to distinguish manifolds over **R** and over **C**. `AlmostComplex` should be seen as manifolds over **R** enriched, but `ComplexManifold` should not inherit from `AlmostComplex`. At least so that dimension or charts would be unambiguous.
(There would still exist a coercion from `ComplexManifold` to `AlmostComplex` but not coming from class heritage).

> Are you perhaps suggesting we should do something like the digram in comment:21?


Yes actually. Because in the following diagram where everything is parametrised on the underlying field, the case **F**=**C** makes no sense. Indeed `Differentiable/C` cannot exist since usual differentiable maps are not **C**-linear. Or else if you define it to be **C**-differentiable then it is the same as `Smooth/C` and `Analytic/C`

```
   Manifolds/F
       |  
Differentiable/F
       |
    Smooth/F
       |
   Analytic/F
```
I'm not sure, where, in the implementation the issue may appear...
For example, in the case of finite fields : x --> x<sup>p</sup> is not smooth on F_p but it is analytic, which contradicts the heritage.

Basile



---

archive/issue_comments_240623.json:
```json
{
    "body": "For the record, I'm not much of an expert in manifolds; most of my knowledge comes from reading wikipedia.\n\nSo you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from  **C** to **R** (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.\n\nFor the example with finite fields, do they have a reasonable topology and could that define a transition map? If so, then I think we should enforce differentiable as being over **R**.",
    "created_at": "2015-06-04T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240623",
    "user": "https://github.com/tscrim"
}
```

For the record, I'm not much of an expert in manifolds; most of my knowledge comes from reading wikipedia.

So you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from  **C** to **R** (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.

For the example with finite fields, do they have a reasonable topology and could that define a transition map? If so, then I think we should enforce differentiable as being over **R**.



---

archive/issue_comments_240624.json:
```json
{
    "body": "Replying to [comment:27 tscrim]:\n\n> So you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from  **C** to **R** (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.\n\n\nThis seems also the best to me.\n\n> \n> For the example with finite fields, do they have a reasonable topology and could that define a transition map? If so, then I think we should enforce differentiable as being over **R**.\n\nIf we enforce this, then we are back to the diagram of comment:21. But I wonder now if a best strategy would be to leave instead the base field generic, with the understanding that *differentiable* means **K**-*differentiable*, where **K** stands for the base field. Then the diagram becomes\n\n```\n            Manifolds\n               |\n         Differentiable\n               |\n            Smooth\n           /      \\\n      Analytic   AlmostComplex\n         |\n      Complex\n```\nwith\n- `Manifolds`: topological manifolds over a topological field **K**\n- `Differentiable`: topological manifolds over **K** with a **K**-differentiable atlas\n- `Smooth`: topological manifolds over **K** with a **K**-infinitely differentiable atlas\n- `Analytic`: topological manifolds over **K** with a **K**-analytic atlas\n- `AlmostComplex`: smooth manifolds over **K**=**R** with an almost complex structure\n- `Complex`: **C**-analytic manifolds over **K**=**C**",
    "created_at": "2015-06-05T09:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240624",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:27 tscrim]:

> So you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from  **C** to **R** (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.


This seems also the best to me.

> 
> For the example with finite fields, do they have a reasonable topology and could that define a transition map? If so, then I think we should enforce differentiable as being over **R**.

If we enforce this, then we are back to the diagram of comment:21. But I wonder now if a best strategy would be to leave instead the base field generic, with the understanding that *differentiable* means **K**-*differentiable*, where **K** stands for the base field. Then the diagram becomes

```
            Manifolds
               |
         Differentiable
               |
            Smooth
           /      \
      Analytic   AlmostComplex
         |
      Complex
```
with
- `Manifolds`: topological manifolds over a topological field **K**
- `Differentiable`: topological manifolds over **K** with a **K**-differentiable atlas
- `Smooth`: topological manifolds over **K** with a **K**-infinitely differentiable atlas
- `Analytic`: topological manifolds over **K** with a **K**-analytic atlas
- `AlmostComplex`: smooth manifolds over **K**=**R** with an almost complex structure
- `Complex`: **C**-analytic manifolds over **K**=**C**



---

archive/issue_comments_240625.json:
```json
{
    "body": "Hi Eric,\n\nReplying to [comment:28 egourgoulhon]:\n> [...] I wonder now if a best strategy would be to leave instead the base field generic, with the understanding that *differentiable* means **K**-*differentiable*, where **K** stands for the base field.\n\n\nAs I said, there are case for some fields **K** where **K**-analytic is weaker than expected : For example I can make a change of charts x --> x<sup>p</sup> over F_p which is actually invertible since x<sup>p</sup> is the identity on F_p but when computing its differential it vanishes identically since px<sup>p-1</sup> = 0 in caracteristic p.\n\nIn my opinion (which is strongly disputable as I don't have a very wide knowledge of the existing theories) differential geometry is meant for **R** and **C** (or maybe in extremal cases over p-adic fields) but over other field the right way of doing geometry is through algebraic geometry : Manifolds or varieties are no longer given by charts but by equations.\n\nHowever, there is still hope of having **K**-manifolds : The essential piece of information on a scheme (the algebraic geometry object generalising manifolds) is the *seaf of functions*. But we do have, within Sage Manifolds, a similar object : The set of `ScalarFields` over an open domain. The rest is just algebra over that (sheaf of) ring.\nYet I don't have any idea whether it is actually possible to implement algebraic geometry, and if there would be any use of such (gigantic) work. \n\nReplying to [comment:27 tscrim]:\n> So you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from C to R (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.\n\n\nYes and actually this is easy :\nTake a complex manifold with chart over U given by complex valued functions z<sup>k</sup> and let x<sup>k</sup> + i y<sup>k</sup> their decompositions into real and imaginary parts. Then (x<sup>1</sup>,y<sup>1</sup>, ... , x<sup>n</sup>,y<sup>n</sup>) is a chart over U of the underlying real manifold. On which we get an almost complex structure for free, given by J \\partial_{x<sup>k</sup>} = \\partial_{y<sup>k</sup>}\n(Structure recalling which coordinate x and y are to be glued together to make complex coordinates)\n\nThis can be seen at the level of the most elementary examples :\nThe class `Manifold` has a single object subclass : `RealLine` (of dimension 1) which encodes the manifold **R**.\nFor the complex there should be 2 cases :\n* `ComplexLine` (single object subclass of `ComplexManifolds`) of dimension 1 (over **C**) with canonical chart (**C**,z)\n* `ComplexPlane`(single object subclass of `AlmostComplexManifolds`) of dimension 2 (over **R**) with canonical chart (**C**,(x,y)) and complex structure given by J_0 \\partial_x = \\partial_y\n\nThe functor applied to `ComplexLine` would yield the `ComplexPlane`.",
    "created_at": "2015-06-05T12:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240625",
    "user": "https://trac.sagemath.org/admin/accounts/users/bpillet"
}
```

Hi Eric,

Replying to [comment:28 egourgoulhon]:
> [...] I wonder now if a best strategy would be to leave instead the base field generic, with the understanding that *differentiable* means **K**-*differentiable*, where **K** stands for the base field.


As I said, there are case for some fields **K** where **K**-analytic is weaker than expected : For example I can make a change of charts x --> x<sup>p</sup> over F_p which is actually invertible since x<sup>p</sup> is the identity on F_p but when computing its differential it vanishes identically since px<sup>p-1</sup> = 0 in caracteristic p.

In my opinion (which is strongly disputable as I don't have a very wide knowledge of the existing theories) differential geometry is meant for **R** and **C** (or maybe in extremal cases over p-adic fields) but over other field the right way of doing geometry is through algebraic geometry : Manifolds or varieties are no longer given by charts but by equations.

However, there is still hope of having **K**-manifolds : The essential piece of information on a scheme (the algebraic geometry object generalising manifolds) is the *seaf of functions*. But we do have, within Sage Manifolds, a similar object : The set of `ScalarFields` over an open domain. The rest is just algebra over that (sheaf of) ring.
Yet I don't have any idea whether it is actually possible to implement algebraic geometry, and if there would be any use of such (gigantic) work. 

Replying to [comment:27 tscrim]:
> So you're saying there should be a canonical functor from complex manifolds to almost complex manifolds given by changing the base field from C to R (as opposed to it being a subcategory)? From what you said, this seems to be the best course of action.


Yes and actually this is easy :
Take a complex manifold with chart over U given by complex valued functions z<sup>k</sup> and let x<sup>k</sup> + i y<sup>k</sup> their decompositions into real and imaginary parts. Then (x<sup>1</sup>,y<sup>1</sup>, ... , x<sup>n</sup>,y<sup>n</sup>) is a chart over U of the underlying real manifold. On which we get an almost complex structure for free, given by J \partial_{x<sup>k</sup>} = \partial_{y<sup>k</sup>}
(Structure recalling which coordinate x and y are to be glued together to make complex coordinates)

This can be seen at the level of the most elementary examples :
The class `Manifold` has a single object subclass : `RealLine` (of dimension 1) which encodes the manifold **R**.
For the complex there should be 2 cases :
* `ComplexLine` (single object subclass of `ComplexManifolds`) of dimension 1 (over **C**) with canonical chart (**C**,z)
* `ComplexPlane`(single object subclass of `AlmostComplexManifolds`) of dimension 2 (over **R**) with canonical chart (**C**,(x,y)) and complex structure given by J_0 \partial_x = \partial_y

The functor applied to `ComplexLine` would yield the `ComplexPlane`.



---

archive/issue_comments_240626.json:
```json
{
    "body": "Hi Basile, \n\nReplying to [comment:29 bpillet]:\n>\n> \n> As I said, there are case for some fields **K** where **K**-analytic is weaker than expected : For example I can make a change of charts x --> x<sup>p</sup> over F_p which is actually invertible since x<sup>p</sup> is the identity on F_p but when computing its differential it vanishes identically since px<sup>p-1</sup> = 0 in caracteristic p.\n\n\nThanks for this example!\n\n> In my opinion (which is strongly disputable as I don't have a very wide knowledge of the existing theories) differential geometry is meant for **R** and **C** (or maybe in extremal cases over p-adic fields) but over other field the right way of doing geometry is through algebraic geometry : Manifolds or varieties are no longer given by charts but by equations.\n\n\nYes, you are right, for differentiable manifolds, we should probably limit ourselves to **K**=**C** or **K**=**R** (at least in a first stage). In the refactoring of SageManifolds I am preparing for #18528, I leave the base field generic anyway. In the documentation of class `TopManifold` in #18529, you can see already an example with **K**=**C** (the Riemann sphere as a topological manifold of dimension 1 over **C**).",
    "created_at": "2015-06-05T13:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240626",
    "user": "https://github.com/egourgoulhon"
}
```

Hi Basile, 

Replying to [comment:29 bpillet]:
>
> 
> As I said, there are case for some fields **K** where **K**-analytic is weaker than expected : For example I can make a change of charts x --> x<sup>p</sup> over F_p which is actually invertible since x<sup>p</sup> is the identity on F_p but when computing its differential it vanishes identically since px<sup>p-1</sup> = 0 in caracteristic p.


Thanks for this example!

> In my opinion (which is strongly disputable as I don't have a very wide knowledge of the existing theories) differential geometry is meant for **R** and **C** (or maybe in extremal cases over p-adic fields) but over other field the right way of doing geometry is through algebraic geometry : Manifolds or varieties are no longer given by charts but by equations.


Yes, you are right, for differentiable manifolds, we should probably limit ourselves to **K**=**C** or **K**=**R** (at least in a first stage). In the refactoring of SageManifolds I am preparing for #18528, I leave the base field generic anyway. In the documentation of class `TopManifold` in #18529, you can see already an example with **K**=**C** (the Riemann sphere as a topological manifold of dimension 1 over **C**).



---

archive/issue_comments_240627.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-25T18:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240628.json:
```json
{
    "body": "Given our discussion, I have reorganized the manifolds category as:\n\n```\n        Manifolds\n         /    \\\n    Complex   Real\n               |\n          Differentiable\n               |\n             Smooth\n            /      \\\n       Analytic  AlmostComplex\n```\nI've added full doctest coverage and some examples. So ready for proper review.\n\nPS - Sorry it took so long to get back to this.",
    "created_at": "2015-06-25T18:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240628",
    "user": "https://github.com/tscrim"
}
```

Given our discussion, I have reorganized the manifolds category as:

```
        Manifolds
         /    \
    Complex   Real
               |
          Differentiable
               |
             Smooth
            /      \
       Analytic  AlmostComplex
```
I've added full doctest coverage and some examples. So ready for proper review.

PS - Sorry it took so long to get back to this.



---

archive/issue_comments_240629.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-25T18:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240629",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_240630.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-25T18:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240631.json:
```json
{
    "body": "Nicolas, question for you. I'm not sure that the subcategories of Manifolds should be subclasses of `CategoryWithAxiom`. In particular, the `Complex` and `Real` and if they should be axioms. Would they still work with `FiniteDimensional` and `Connected` axioms?",
    "created_at": "2015-06-25T18:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240631",
    "user": "https://github.com/tscrim"
}
```

Nicolas, question for you. I'm not sure that the subcategories of Manifolds should be subclasses of `CategoryWithAxiom`. In particular, the `Complex` and `Real` and if they should be axioms. Would they still work with `FiniteDimensional` and `Connected` axioms?



---

archive/issue_comments_240632.json:
```json
{
    "body": "Hi Travis,\n\nReplying to [comment:33 tscrim]:\n> Given our discussion, I have reorganized the manifolds category as:\n> \n> ```\n>         Manifolds\n>          /    \\\n>     Complex   Real\n>                |\n>           Differentiable\n>                |\n>              Smooth\n>             /      \\\n>        Analytic  AlmostComplex\n> ```\n\n\nIt seems to me that `Real` should not be atop `Differentiable` in this hierarchy. Indeed, there exist differentiable manifolds over fields other than **R** or **C**:  for instance differentiable manifolds over the field of p-adic numbers, **Q**_p: see e.g. Part II of J.-P. Serre's book *Lie Algebras and Lie Groups* (1992), where differentiable (actually analytic) manifolds over **Q**_p are introduced. For this reason, in the refactoring of SageManifolds I am preparing in #18783, I have left the base field generic (notice that we do have the fields of p-adic numbers in Sage). So it would be nice to be able to set the category to `Manifolds().Differentiable()` without having to assume that the base field is **R**. Similarly, I think that `Complex` should be a subcategory of `Analytic`. As you suggest in comment:35, maybe `Complex` and `Real` should be axioms, rather than appearing in the above hierarchy...\n\n> I've added full doctest coverage and some examples. So ready for proper review.\n> \n> PS - Sorry it took so long to get back to this.\n\n\nThank you for working on this!",
    "created_at": "2015-06-25T20:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240632",
    "user": "https://github.com/egourgoulhon"
}
```

Hi Travis,

Replying to [comment:33 tscrim]:
> Given our discussion, I have reorganized the manifolds category as:
> 
> ```
>         Manifolds
>          /    \
>     Complex   Real
>                |
>           Differentiable
>                |
>              Smooth
>             /      \
>        Analytic  AlmostComplex
> ```


It seems to me that `Real` should not be atop `Differentiable` in this hierarchy. Indeed, there exist differentiable manifolds over fields other than **R** or **C**:  for instance differentiable manifolds over the field of p-adic numbers, **Q**_p: see e.g. Part II of J.-P. Serre's book *Lie Algebras and Lie Groups* (1992), where differentiable (actually analytic) manifolds over **Q**_p are introduced. For this reason, in the refactoring of SageManifolds I am preparing in #18783, I have left the base field generic (notice that we do have the fields of p-adic numbers in Sage). So it would be nice to be able to set the category to `Manifolds().Differentiable()` without having to assume that the base field is **R**. Similarly, I think that `Complex` should be a subcategory of `Analytic`. As you suggest in comment:35, maybe `Complex` and `Real` should be axioms, rather than appearing in the above hierarchy...

> I've added full doctest coverage and some examples. So ready for proper review.
> 
> PS - Sorry it took so long to get back to this.


Thank you for working on this!



---

archive/issue_comments_240633.json:
```json
{
    "body": "So then you'd do the diagram in comment:28, in contrast to your statement in comment:30? Or did you mean something different in comment:30? I can also make it so the hierarchy is dynamic, in that if **k** has characteristic p, then analytic does not imply smooth. The category hierarchy does not have to be static (for the record, these are not subclasses, but subcategories in the mathematical sense).\n\nI don't really care what the final hierarchy looks like, but I want it to be as mathematically correct as possible and you (and Michal) and Basile agree. (Although I do have a bias towards making things as general as possible.)\n\nAs far as making them be axioms vs singleton categories, this is more of an implementation detail.",
    "created_at": "2015-06-26T15:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240633",
    "user": "https://github.com/tscrim"
}
```

So then you'd do the diagram in comment:28, in contrast to your statement in comment:30? Or did you mean something different in comment:30? I can also make it so the hierarchy is dynamic, in that if **k** has characteristic p, then analytic does not imply smooth. The category hierarchy does not have to be static (for the record, these are not subclasses, but subcategories in the mathematical sense).

I don't really care what the final hierarchy looks like, but I want it to be as mathematically correct as possible and you (and Michal) and Basile agree. (Although I do have a bias towards making things as general as possible.)

As far as making them be axioms vs singleton categories, this is more of an implementation detail.



---

archive/issue_comments_240634.json:
```json
{
    "body": "Replying to [comment:37 tscrim]:\n> So then you'd do the diagram in comment:28, in contrast to your statement in comment:30? \n\n\nYes this is more or less what I mean. Sorry for the confusion... Actually in preparing the code for differentiable manifolds in #18783, I realize that (i) we can allow very easily for a base field different from **R** or **C** and (ii) differentiable manifolds over fields different from **R** or **C** are not so uncommon in the literature, in particular manifolds over **Q**_p. Basically the topological field has to be a complete metric space (as **Q**_p is), so that the notion of differentiability makes sense.",
    "created_at": "2015-06-26T16:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240634",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:37 tscrim]:
> So then you'd do the diagram in comment:28, in contrast to your statement in comment:30? 


Yes this is more or less what I mean. Sorry for the confusion... Actually in preparing the code for differentiable manifolds in #18783, I realize that (i) we can allow very easily for a base field different from **R** or **C** and (ii) differentiable manifolds over fields different from **R** or **C** are not so uncommon in the literature, in particular manifolds over **Q**_p. Basically the topological field has to be a complete metric space (as **Q**_p is), so that the notion of differentiability makes sense.



---

archive/issue_comments_240635.json:
```json
{
    "body": "So it seems like I should add an additional axiom \"complete\" and have it apply to metric spaces and then check that the field passed to `Manifolds` should be a complete metric space. On a followup ticket, we will change the category of those fields which are (models for) complete metric spaces, such as **R** variants like `RealField`.",
    "created_at": "2015-06-26T17:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240635",
    "user": "https://github.com/tscrim"
}
```

So it seems like I should add an additional axiom "complete" and have it apply to metric spaces and then check that the field passed to `Manifolds` should be a complete metric space. On a followup ticket, we will change the category of those fields which are (models for) complete metric spaces, such as **R** variants like `RealField`.



---

archive/issue_comments_240636.json:
```json
{
    "body": "Just to make sure, so should we only allow complete metric fields as input for differentiable manifolds? The alternative seems to be we allow more general topological fields with perhaps some machinery to make analytic manifolds over finite fields be non-smooth. Let me know what you think is best.",
    "created_at": "2015-06-27T05:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240636",
    "user": "https://github.com/tscrim"
}
```

Just to make sure, so should we only allow complete metric fields as input for differentiable manifolds? The alternative seems to be we allow more general topological fields with perhaps some machinery to make analytic manifolds over finite fields be non-smooth. Let me know what you think is best.



---

archive/issue_comments_240637.json:
```json
{
    "body": "Replying to [comment:40 tscrim]:\n> Just to make sure, so should we only allow complete metric fields as input for differentiable manifolds? The alternative seems to be we allow more general topological fields with perhaps some machinery to make analytic manifolds over finite fields be non-smooth. Let me know what you think is best.\n\n\nI would favor the second alternative, i.e. not to restrict to complete metric fields. In particular, there are some attempts to define differentiable manifolds over general topological fields, see e.g. [math/0502168](http://arxiv.org/abs/math/0502168). Basile, John, Nicolas, do you agree ?\n\nPS: even if we don't demand that the base fields for differentiable manifolds are complete metric spaces, it would be nice to have an axiom \"complete\" for the category of metric spaces, as you suggest in comment:39.",
    "created_at": "2015-06-27T14:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240637",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:40 tscrim]:
> Just to make sure, so should we only allow complete metric fields as input for differentiable manifolds? The alternative seems to be we allow more general topological fields with perhaps some machinery to make analytic manifolds over finite fields be non-smooth. Let me know what you think is best.


I would favor the second alternative, i.e. not to restrict to complete metric fields. In particular, there are some attempts to define differentiable manifolds over general topological fields, see e.g. [math/0502168](http://arxiv.org/abs/math/0502168). Basile, John, Nicolas, do you agree ?

PS: even if we don't demand that the base fields for differentiable manifolds are complete metric spaces, it would be nice to have an axiom "complete" for the category of metric spaces, as you suggest in comment:39.



---

archive/issue_comments_240638.json:
```json
{
    "body": "**ping**\n\nFor the record, I'm okay with general topological fields.",
    "created_at": "2015-08-24T00:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240638",
    "user": "https://github.com/tscrim"
}
```

**ping**

For the record, I'm okay with general topological fields.



---

archive/issue_comments_240639.json:
```json
{
    "body": "Hi Travis,\nSorry for the delay. If you agree with general topological fields (non-discrete to define differentiable manifolds, I guess), then the hierarchy should be similar to that suggested in comment:28, namely:\n\n```\n   Manifolds\n      | \n Differentiable\n      |\n    Smooth\n      |\n   Analytic\n```\nleaving the base field generic. Then `Real` or `Complex` could be added at any level (as axioms ?) (actually for complex, differentiable implies analytic). What do you think?",
    "created_at": "2015-08-24T09:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240639",
    "user": "https://github.com/egourgoulhon"
}
```

Hi Travis,
Sorry for the delay. If you agree with general topological fields (non-discrete to define differentiable manifolds, I guess), then the hierarchy should be similar to that suggested in comment:28, namely:

```
   Manifolds
      | 
 Differentiable
      |
    Smooth
      |
   Analytic
```
leaving the base field generic. Then `Real` or `Complex` could be added at any level (as axioms ?) (actually for complex, differentiable implies analytic). What do you think?



---

archive/issue_comments_240640.json:
```json
{
    "body": "Sounds good to me. I will play around with the `Real`/`Complex` axioms and things to get something reasonable.\n\nI will take objections and alternative ideas at any point forward too.",
    "created_at": "2015-08-27T01:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240640",
    "user": "https://github.com/tscrim"
}
```

Sounds good to me. I will play around with the `Real`/`Complex` axioms and things to get something reasonable.

I will take objections and alternative ideas at any point forward too.



---

archive/issue_comments_240641.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-29T06:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240642.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-15T22:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240643.json:
```json
{
    "body": "After much debate with myself, I ended up making the following:\n\n```\n   Manifolds\n      | \n Differentiable\n      |\n    Smooth\n      |\n   Analytic\n  /        \\\nAlmost     Complex\n```\nwhere `Complex` includes the holomorphic condition. I also added \"complete\" as an axiom and made some rings/fields into the finer categories they belong to (mainly `ZZ`, `QQ`, `RR`, `CC` into metric spaces, since they have a well-established distinguished natural metric); this allows the fields to work as the base of the manifold. If everyone can live with the current setup for now, then a quick check of my changes should yield a positive review (I hope).",
    "created_at": "2015-10-15T22:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240643",
    "user": "https://github.com/tscrim"
}
```

After much debate with myself, I ended up making the following:

```
   Manifolds
      | 
 Differentiable
      |
    Smooth
      |
   Analytic
  /        \
Almost     Complex
```
where `Complex` includes the holomorphic condition. I also added "complete" as an axiom and made some rings/fields into the finer categories they belong to (mainly `ZZ`, `QQ`, `RR`, `CC` into metric spaces, since they have a well-established distinguished natural metric); this allows the fields to work as the base of the manifold. If everyone can live with the current setup for now, then a quick check of my changes should yield a positive review (I hope).



---

archive/issue_comments_240644.json:
```json
{
    "body": "Thank you for this new setting of the manifold categories, very timely regarding #18528 !\nA first quick remark: `Almost` should be under `Smooth` since analyticity is not requirred for an almost complex manifold; see e.g. https://en.wikipedia.org/wiki/Almost_complex_manifold.",
    "created_at": "2015-10-16T06:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240644",
    "user": "https://github.com/egourgoulhon"
}
```

Thank you for this new setting of the manifold categories, very timely regarding #18528 !
A first quick remark: `Almost` should be under `Smooth` since analyticity is not requirred for an almost complex manifold; see e.g. https://en.wikipedia.org/wiki/Almost_complex_manifold.



---

archive/issue_comments_240645.json:
```json
{
    "body": "I gave a first look at the code; it looks good, but some doctests failed:\nrunning \n./sage -t --long src/sage/categories/\nwith sage 6.10.beta0 results in\nsage -t --long src/sage/categories/map.pyx  # 2 doctests failed\nsage -t --long src/sage/categories/category_types.py  # 3 doctests failed\nsage -t --long src/sage/categories/primer.py  # 2 doctests failed\nsage -t --long src/sage/categories/morphism.pyx  # 1 doctest failed\nsage -t --long src/sage/categories/category.py  # 11 doctests failed\nsage -t --long src/sage/categories/bimodules.py  # 3 doctests failed\nsage -t --long src/sage/categories/homset.py  # 3 doctests failed\nsage -t --long src/sage/categories/lie_groups.py  # 5 doctests failed",
    "created_at": "2015-10-16T15:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240645",
    "user": "https://github.com/egourgoulhon"
}
```

I gave a first look at the code; it looks good, but some doctests failed:
running 
./sage -t --long src/sage/categories/
with sage 6.10.beta0 results in
sage -t --long src/sage/categories/map.pyx  # 2 doctests failed
sage -t --long src/sage/categories/category_types.py  # 3 doctests failed
sage -t --long src/sage/categories/primer.py  # 2 doctests failed
sage -t --long src/sage/categories/morphism.pyx  # 1 doctest failed
sage -t --long src/sage/categories/category.py  # 11 doctests failed
sage -t --long src/sage/categories/bimodules.py  # 3 doctests failed
sage -t --long src/sage/categories/homset.py  # 3 doctests failed
sage -t --long src/sage/categories/lie_groups.py  # 5 doctests failed



---

archive/issue_comments_240646.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-16T15:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240646",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_240647.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-16T15:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240648.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-16T15:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240648",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_240649.json:
```json
{
    "body": "I made a mistake in my diagram. In the code, almost complex manifolds only imply smooth, not analytic.\n\nI also noticed the test failures and have just pushed changes. Almost all were trivial doctest failures. I also made a few other variants of `\\RR` and `\\CC` know that they are also metric spaces.\n\n`@`nthiery Note that I had to make a change to the French Sage book's test.",
    "created_at": "2015-10-16T15:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240649",
    "user": "https://github.com/tscrim"
}
```

I made a mistake in my diagram. In the code, almost complex manifolds only imply smooth, not analytic.

I also noticed the test failures and have just pushed changes. Almost all were trivial doctest failures. I also made a few other variants of `\RR` and `\CC` know that they are also metric spaces.

`@`nthiery Note that I had to make a change to the French Sage book's test.



---

archive/issue_events_051421.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T15:56:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17938#event-51421"
}
```



---

archive/issue_events_051422.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T15:56:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17938#event-51422"
}
```



---

archive/issue_comments_240650.json:
```json
{
    "body": "Some doctests are still failing:\nsage -t --long src/sage/categories/morphism.pyx  # 1 doctest failed\nsage -t --long src/sage/rings/rational_field.py  # 1 doctest failed\nsage -t --long src/sage/misc/functional.py  # 1 doctest failed\nsage -t --long src/sage/algebras/clifford_algebra.py  # 1 doctest failed",
    "created_at": "2015-10-16T19:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240650",
    "user": "https://github.com/egourgoulhon"
}
```

Some doctests are still failing:
sage -t --long src/sage/categories/morphism.pyx  # 1 doctest failed
sage -t --long src/sage/rings/rational_field.py  # 1 doctest failed
sage -t --long src/sage/misc/functional.py  # 1 doctest failed
sage -t --long src/sage/algebras/clifford_algebra.py  # 1 doctest failed



---

archive/issue_comments_240651.json:
```json
{
    "body": "Replying to [comment:52 tscrim]:\n> `@`nthiery Note that I had to make a change to the French Sage book's test.\n\n\nI double checked it, and it's fine with me!",
    "created_at": "2015-10-16T22:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240651",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:52 tscrim]:
> `@`nthiery Note that I had to make a change to the French Sage book's test.


I double checked it, and it's fine with me!



---

archive/issue_comments_240652.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T01:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240653.json:
```json
{
    "body": "Thanks for the new version. Two remarks:\n\n1/ The new categories do not appear in the reference manual, in the section \"Individual Categories\". Shouldn't they ?\n\n2/ The p-adic fields implemented in Sage seems not to have been taken into account:\n\n```\nsage: Qp(5) in Fields().Topological()\nFalse\nsage: Qp(5) in Fields().Metric()\nFalse\n```\n\nOne should actually have\n\n```\nsage: Qp(5) in Fields().Metric().Complete()\nTrue\n```\n\nThere could be other metric fields in Sage, or more generally topological rings, that should be included. But maybe this is too much work for this ticket and should be delayed to some subsequent ticket ?",
    "created_at": "2015-10-17T12:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240653",
    "user": "https://github.com/egourgoulhon"
}
```

Thanks for the new version. Two remarks:

1/ The new categories do not appear in the reference manual, in the section "Individual Categories". Shouldn't they ?

2/ The p-adic fields implemented in Sage seems not to have been taken into account:

```
sage: Qp(5) in Fields().Topological()
False
sage: Qp(5) in Fields().Metric()
False
```

One should actually have

```
sage: Qp(5) in Fields().Metric().Complete()
True
```

There could be other metric fields in Sage, or more generally topological rings, that should be included. But maybe this is too much work for this ticket and should be delayed to some subsequent ticket ?



---

archive/issue_comments_240654.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T14:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240655.json:
```json
{
    "body": "Replying to [comment:56 egourgoulhon]:\n> 1/ The new categories do not appear in the reference manual, in the section \"Individual Categories\". Shouldn't they ?\n\n\nYes they should and now they do.\n\n> 2/ The p-adic fields implemented in Sage seems not to have been taken into account:\n> \n> \n> ```\n> sage: Qp(5) in Fields().Topological()\n> False\n> sage: Qp(5) in Fields().Metric()\n> False\n> ```\n> \n> One should actually have\n> \n> \n> ```\n> sage: Qp(5) in Fields().Metric().Complete()\n> True\n> ```\n> \n> There could be other metric fields in Sage, or more generally topological rings, that should be included. But maybe this is too much work for this ticket and should be delayed to some subsequent ticket ?\n\n\nI've added them in and I reworked the default `dist` to use the `abs` method of the elements. I also made it so that there is a call loop `P.metric -> E.dist -> P.dist -> E.abs -> P.metric` so one just needs to implement one of these methods (`P` is the parent and `E` is the element). This is a slight abuse as not all metric spaces have a `0` (more generally a distinguished base point), nor implement subtraction. I think this is something we can live with for now and on a followup ticket better refine the categories for these generic metrics as most parents who additive groups (well, this might be a stronger condition than needed, but I'm not worrying about that now). I also really don't want to go back through Sage and make all those trivial category changes again...",
    "created_at": "2015-10-17T15:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240655",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:56 egourgoulhon]:
> 1/ The new categories do not appear in the reference manual, in the section "Individual Categories". Shouldn't they ?


Yes they should and now they do.

> 2/ The p-adic fields implemented in Sage seems not to have been taken into account:
> 
> 
> ```
> sage: Qp(5) in Fields().Topological()
> False
> sage: Qp(5) in Fields().Metric()
> False
> ```
> 
> One should actually have
> 
> 
> ```
> sage: Qp(5) in Fields().Metric().Complete()
> True
> ```
> 
> There could be other metric fields in Sage, or more generally topological rings, that should be included. But maybe this is too much work for this ticket and should be delayed to some subsequent ticket ?


I've added them in and I reworked the default `dist` to use the `abs` method of the elements. I also made it so that there is a call loop `P.metric -> E.dist -> P.dist -> E.abs -> P.metric` so one just needs to implement one of these methods (`P` is the parent and `E` is the element). This is a slight abuse as not all metric spaces have a `0` (more generally a distinguished base point), nor implement subtraction. I think this is something we can live with for now and on a followup ticket better refine the categories for these generic metrics as most parents who additive groups (well, this might be a stronger condition than needed, but I'm not worrying about that now). I also really don't want to go back through Sage and make all those trivial category changes again...



---

archive/issue_comments_240656.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T15:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240657.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T15:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240658.json:
```json
{
    "body": "Replying to [comment:58 tscrim]:\n> Replying to [comment:56 egourgoulhon]:\n> > 1/ The new categories do not appear in the reference manual, in the section \"Individual Categories\". Shouldn't they ?\n\n> \n> Yes they should and now they do.\n\n\nVery good. \n\n> \n> I've added them in and I reworked the default `dist` to use the `abs` method of the elements. I also made it so that there is a call loop `P.metric -> E.dist -> P.dist -> E.abs -> P.metric` so one just needs to implement one of these methods (`P` is the parent and `E` is the element). This is a slight abuse as not all metric spaces have a `0` (more generally a distinguished base point), nor implement subtraction. I think this is something we can live with for now and on a followup ticket better refine the categories for these generic metrics as most parents who additive groups (well, this might be a stronger condition than needed, but I'm not worrying about that now).\n\n\nThe default `dist` using `abs` seems reasonable at this stage. Thanks for having added the p-adic fields. \n\nI've merged the last commit of this ticket in all the tickets of #18528, replacing the `Sets()` category by `Manifolds(K)`, `Manifolds(K).Differentiable()` or `Manifolds(K).Smooth()`, with `K`=`RR`, `QQ`, `Qp(5)` or `CC`. Everything works well!\n\nI've just one last question:\n\nIn the examples (in `src/sage/categories/examples/manifolds.py` and `src/sage/categories/examples/cw_complexes.py`), the parents implement the method `an_element` and not `_an_element_` (as advised in the Parent section of the reference manual). Is there any reason for this? \n\nand three suggestions of typo corrections:\n\n- in `src/sage/categories/manifolds.py`, line 70: replace \n  \"a morphism of metric spaces between manifolds is a manifold morphism\" by\n  \"a morphism of topological spaces between manifolds is a manifold morphism\"\n- in `src/sage/categories/metric_spaces.py`, line 48: replace \"is simultaneously a \n  topological group by itself, and a topogological space\"\n  by \"is simultaneously a topological group by itself, and a metric space\"\n- in `src/sage/categories/topological_spaces.py`, there seems to be an unnecessary import:\n  `from sage.misc.lazy_attribute import lazy_class_attribute`",
    "created_at": "2015-10-19T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240658",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:58 tscrim]:
> Replying to [comment:56 egourgoulhon]:
> > 1/ The new categories do not appear in the reference manual, in the section "Individual Categories". Shouldn't they ?

> 
> Yes they should and now they do.


Very good. 

> 
> I've added them in and I reworked the default `dist` to use the `abs` method of the elements. I also made it so that there is a call loop `P.metric -> E.dist -> P.dist -> E.abs -> P.metric` so one just needs to implement one of these methods (`P` is the parent and `E` is the element). This is a slight abuse as not all metric spaces have a `0` (more generally a distinguished base point), nor implement subtraction. I think this is something we can live with for now and on a followup ticket better refine the categories for these generic metrics as most parents who additive groups (well, this might be a stronger condition than needed, but I'm not worrying about that now).


The default `dist` using `abs` seems reasonable at this stage. Thanks for having added the p-adic fields. 

I've merged the last commit of this ticket in all the tickets of #18528, replacing the `Sets()` category by `Manifolds(K)`, `Manifolds(K).Differentiable()` or `Manifolds(K).Smooth()`, with `K`=`RR`, `QQ`, `Qp(5)` or `CC`. Everything works well!

I've just one last question:

In the examples (in `src/sage/categories/examples/manifolds.py` and `src/sage/categories/examples/cw_complexes.py`), the parents implement the method `an_element` and not `_an_element_` (as advised in the Parent section of the reference manual). Is there any reason for this? 

and three suggestions of typo corrections:

- in `src/sage/categories/manifolds.py`, line 70: replace 
  "a morphism of metric spaces between manifolds is a manifold morphism" by
  "a morphism of topological spaces between manifolds is a manifold morphism"
- in `src/sage/categories/metric_spaces.py`, line 48: replace "is simultaneously a 
  topological group by itself, and a topogological space"
  by "is simultaneously a topological group by itself, and a metric space"
- in `src/sage/categories/topological_spaces.py`, there seems to be an unnecessary import:
  `from sage.misc.lazy_attribute import lazy_class_attribute`



---

archive/issue_comments_240659.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-19T16:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_240660.json:
```json
{
    "body": "Replying to [comment:61 egourgoulhon]:\n> I've merged the last commit of this ticket in all the tickets of #18528, replacing the `Sets()` category by `Manifolds(K)`, `Manifolds(K).Differentiable()` or `Manifolds(K).Smooth()`, with `K`=`RR`, `QQ`, `Qp(5)` or `CC`. Everything works well!\n\n\nThat's very good to hear!\n\n> I've just one last question:\n> \n> In the examples (in `src/sage/categories/examples/manifolds.py` and `src/sage/categories/examples/cw_complexes.py`), the parents implement the method `an_element` and not `_an_element_` (as advised in the Parent section of the reference manual). Is there any reason for this? \n\n\nThe reason we have `_an_element_` was for caching before there was an ``@`cached_method`. It is sufficient to implement `an_element`, especially for example classes. However, I can change if it you feel I should.\n\n> and three suggestions of typo corrections\n\n\nAll done (and some other pyflakes cleanup).",
    "created_at": "2015-10-19T16:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240660",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:61 egourgoulhon]:
> I've merged the last commit of this ticket in all the tickets of #18528, replacing the `Sets()` category by `Manifolds(K)`, `Manifolds(K).Differentiable()` or `Manifolds(K).Smooth()`, with `K`=`RR`, `QQ`, `Qp(5)` or `CC`. Everything works well!


That's very good to hear!

> I've just one last question:
> 
> In the examples (in `src/sage/categories/examples/manifolds.py` and `src/sage/categories/examples/cw_complexes.py`), the parents implement the method `an_element` and not `_an_element_` (as advised in the Parent section of the reference manual). Is there any reason for this? 


The reason we have `_an_element_` was for caching before there was an ``@`cached_method`. It is sufficient to implement `an_element`, especially for example classes. However, I can change if it you feel I should.

> and three suggestions of typo corrections


All done (and some other pyflakes cleanup).



---

archive/issue_comments_240661.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-19T19:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240661",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_240662.json:
```json
{
    "body": "Replying to [comment:63 tscrim]:\n> \n> The reason we have `_an_element_` was for caching before there was an ``@`cached_method`. It is sufficient to implement `an_element`, especially for example classes. However, I can change if it you feel I should.\n\n\nNo not at all; I was just curious. Thanks for the explanation.\n> \n> > and three suggestions of typo corrections\n\n> \n> All done (and some other pyflakes cleanup).\n\n\nThank you for your work ! It's nice to have these categories.",
    "created_at": "2015-10-19T19:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240662",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:63 tscrim]:
> 
> The reason we have `_an_element_` was for caching before there was an ``@`cached_method`. It is sufficient to implement `an_element`, especially for example classes. However, I can change if it you feel I should.


No not at all; I was just curious. Thanks for the explanation.
> 
> > and three suggestions of typo corrections

> 
> All done (and some other pyflakes cleanup).


Thank you for your work ! It's nice to have these categories.



---

archive/issue_comments_240663.json:
```json
{
    "body": "Thanks for doing the review.",
    "created_at": "2015-10-19T23:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240663",
    "user": "https://github.com/tscrim"
}
```

Thanks for doing the review.



---

archive/issue_events_051423.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-20T22:32:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17938#event-51423"
}
```



---

archive/issue_comments_240664.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-20T22:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17938#issuecomment-240664",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
