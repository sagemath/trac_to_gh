# Issue 23760: installed_packages(False) gives wrong version for Python packages with patches

Issue created by migration from https://trac.sagemath.org/ticket/23997

Original creator: jdemeyer

Original creation time: 2017-10-09 12:33:33

CC:  mderickx

Sage uses a convention to append `.pNUM` to indicate patched or updated packages. However, because of the logic in `installed_packages(False)`, the version number returned by `installed_packages(False)` is the version given by `pip` instead of the Sage version number.

This causes in particular that optional doctests are not run for such packages.


---

Comment by jdemeyer created at 2017-10-09 13:53:35

New commits:


---

Comment by jdemeyer created at 2017-10-09 13:53:35

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-10-09 15:15:21

Makes sense to me.


---

Comment by tscrim created at 2017-10-09 15:15:21

Changing status from needs_review to positive_review.


---

Comment by git created at 2017-10-09 19:23:21

Changing status from positive_review to needs_review.


---

Comment by git created at 2017-10-09 19:23:21

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2017-10-09 19:24:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-10-09 19:25:06

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-10-09 19:25:06

Accidentally committed on the wrong branch. Fixed it.


---

Comment by vbraun created at 2017-10-15 09:22:03

Resolution: fixed
