# Issue 31991: Move examples from sage.geometry.riemannian_manifolds to sage.manifolds

Issue created by migration from https://trac.sagemath.org/ticket/32228

Original creator: mkoeppe

Original creation time: 2021-07-17 23:53:11

CC:  egourgoulhon @mjungmath vdelecroix

... with deprecation


---

Comment by git created at 2021-07-18 02:08:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-18 02:28:59

The next step would be to deprecate most of the methods


---

Comment by git created at 2021-09-14 00:36:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-09-14 00:36:23

Changing status from new to needs_review.


---

Comment by @mjungmath created at 2021-09-14 07:46:18

Do we want to fix the syntax-block errors and unused import in this ticket?

Coverage is likely more for another ticket.


---

Comment by egourgoulhon created at 2021-09-14 20:26:19

Thanks for this first move. 
However it is quite incomplete at this stage. Indeed, it makes `ParametrizedSurface3D` a derived class of `PseudoRiemannianSubmanifold`, which is very natural. But many of the methods, like `first_fundamental_form`, `second_fundamental_form`, `point`, `plot`, `tangent_vector`, etc. have their code left in place, so that they appear redefined with respect to the corresponding `PseudoRiemannianSubmanifold` methods with very different 
inputs and outputs. For instance, `ParametrizedSurface3D.tangent_vector` takes a tuple of coordinates and returns a tuple of vector components, while `PseudoRiemannianSubmanifold.tangent_vector` takes a manifold point and returns an element of the tangent space at that point. It would be quite disturbing for the end user that `manifolds.Ellipsoid()` behaves so differently from `manifolds.Sphere(2)`. At first glance, all the methods implemented in `ParametrizedSurface3D` have their equivalent in `PseudoRiemannianSubmanifold`, but it requires some work to implement things properly. I guess the question is then: shall this be done in this ticket? 

Also what about the deprecation? If we change the behavior of most methods to make them coincide with the manifold framework, we should leave the old code in `src/sage/geometry/riemannian_manifolds` (with a deprecation warning), shouldn't we? In doing so, during the deprecation period, we would have:

```
sage: C1 = manifolds.Catenoid()  # returns a manifold-type object
sage: C2 = surfaces.Catenoid()    # returns a (deprecated) old type of object
```


I am adding Vincent to Cc, since he took part in the initial implementation of `ParametrizedSurface3D` in #10132.


---

Comment by vdelecroix created at 2021-09-14 20:35:33

If all methods from `ParametrizedSurface3D` have equivalent functionalities in `PseudoRiemannianSubmanifold` I would say that deprecation of the class makes sense. However, this could potentially breaks a lot of code in the future. For that reason, I would suggest to carefully document the "new way of doing". That is to say
- in each method of `ParametrizedSurface3D` there should be an explanation of the equivalent `PseudoRiemannianSubmanifold` way of doing
- for each relevant doctest in `ParametrizedSurface3D`, the same computation should be reproduced with a `PseudoRiemannianSubmanifold` object.

This is just my way of thinking. I will not work on the ticket and you are definitely free to take any decision you would find more appropriate.


---

Comment by mkoeppe created at 2021-09-14 21:26:15

Changing status from needs_review to needs_work.


---

Comment by egourgoulhon created at 2021-09-15 09:02:16

Replying to [comment:11 vdelecroix]:
> This is just my way of thinking. I will not work on the ticket and you are definitely free to take any decision you would find more appropriate.

Thanks for your feedback! On my side, this project is on my todo list, but with a zillion of other things. I hope to do it relatively soon, unless someone do it before.
