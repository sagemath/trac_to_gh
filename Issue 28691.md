# Issue 28691: Fix failure in sageinspect.py

Issue created by migration from https://trac.sagemath.org/ticket/28928

Original creator: slelievre

Original creation time: 2019-12-30 17:07:52

CC:  simonking strogdon

See report at

https://groups.google.com/d/msg/sage-release/B8dQGh5-Zz8/Kh2Gxj5HBgAJ


---

Comment by SimonKing created at 2020-01-03 10:05:31

Samuel, I'm puzzled. On the one hand, you say that your Sage is build with Python 2. On the other hand, I see this:
> {{{
>       File "/Users/lelievre/s/sage2gcc/local/lib/python3.7/site-packages/sage/misc/cython.py",
> line 524, in cython_import_all
>         m = cython_import(filename, **kwds)
>       File "/Users/lelievre/s/sage2gcc/local/lib/python3.7/site-packages/sage/misc/cython.py",
> }}}

So, it is `$SAGE_LOCAL/lib/python3.7`, not `python2.7`. Is it perhaps the case that you upgraded from an old python-2 version to a python-3 version and didn't do `make distclean`?


---

Comment by embray created at 2020-01-06 14:10:03

Ticket retargeted after milestone closed


---

Comment by embray created at 2020-01-06 14:24:56

Changing type from enhancement to defect.


---

Comment by embray created at 2020-01-06 14:24:56

Changing status from new to needs_info.


---

Comment by embray created at 2020-01-06 14:24:56

This isn't anything to do with sageinspect.py.  It's a failure with the `cython()` function which happens to be used in a few of the doctests in sageinspect.py.  The problem occurs when trying to import the compiled Python module from the tempfile, which is either not found, or is not compiled or linked properly.  The problem does not have to do with introspection.  As I wrote on the mailing list, is it possible to reproduce this failure outside the doctests? 

Ditto's Simon's confusion about the build.


---

Comment by mkoeppe created at 2020-05-01 04:28:42

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.


---

Comment by mkoeppe created at 2021-04-10 22:47:05

Changing status from needs_info to needs_review.


---

Comment by mkoeppe created at 2021-04-10 22:47:05

We can close this ticket as outdated. An almost identical failure has been reported in #31626


---

Comment by strogdon created at 2021-04-11 03:35:47

Good, I'm glad this was found.


---

Comment by strogdon created at 2021-04-11 03:35:47

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-04-14 17:36:30

Sorry for a confusing ticket description mentioning Python 2
but including a Python 3 traceback.

Let's close this and focus on #31626.


---

Comment by slelievre created at 2021-04-14 17:36:30

Resolution: duplicate
