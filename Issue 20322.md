# Issue 20322: InteractiveLPProblem, dictionaries: add_constraint / add_row methods

archive/issues_020322.json:
```json
{
    "body": "CC:  @novoselt pjxiao\n\nThis ticket adds `add_constraint` and `add_row` methods. \nFollowing the suggestion at \nhttp://trac.sagemath.org/ticket/18805#comment:27\nthese methods create new problems / dictionaries, leaving the original ones unmodified.\n\n(Split out from the larger ticket #18805.)\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20559\n\n",
    "created_at": "2016-05-04T22:20:22Z",
    "labels": [
        "component: linear programming"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "InteractiveLPProblem, dictionaries: add_constraint / add_row methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20322",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @novoselt pjxiao

This ticket adds `add_constraint` and `add_row` methods. 
Following the suggestion at 
http://trac.sagemath.org/ticket/18805#comment:27
these methods create new problems / dictionaries, leaving the original ones unmodified.

(Split out from the larger ticket #18805.)


Issue created by migration from https://trac.sagemath.org/ticket/20559





---

archive/issue_comments_279842.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-05-05T00:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279842",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_279843.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-05T00:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279843",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_279844.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-08T01:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279845.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-08T01:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279846.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-21T22:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279846",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_279847.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-05-23T15:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_279848.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-23T15:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279848",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_279849.json:
```json
{
    "body": "Rebased on 7.3.beta0",
    "created_at": "2016-05-23T15:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279849",
    "user": "https://github.com/mkoeppe"
}
```

Rebased on 7.3.beta0



---

archive/issue_comments_279850.json:
```json
{
    "body": "ping?",
    "created_at": "2016-06-02T13:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279850",
    "user": "https://github.com/mkoeppe"
}
```

ping?



---

archive/issue_comments_279851.json:
```json
{
    "body": "1. \"a 1 by n matrix of the new constraint coefficients\" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just \"coefficients of the new constraint\"\n2. `new_row` does not reflect very well the meaning, how about `coefficients`?..\n3. I think the method for adding constraints should not do input check that can be done by the problem constructor - it will reduce code duplication and lead to more uniform error messages.\n4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!\n5. It should not be necessary to explicitly name a new slack variable.\n6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\n7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.",
    "created_at": "2016-06-10T04:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279851",
    "user": "https://github.com/novoselt"
}
```

1. "a 1 by n matrix of the new constraint coefficients" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just "coefficients of the new constraint"
2. `new_row` does not reflect very well the meaning, how about `coefficients`?..
3. I think the method for adding constraints should not do input check that can be done by the problem constructor - it will reduce code duplication and lead to more uniform error messages.
4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!
5. It should not be necessary to explicitly name a new slack variable.
6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.
7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.



---

archive/issue_comments_279852.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-06-10T04:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279852",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_279853.json:
```json
{
    "body": "Just a quick reply to point 7:\n\nReplying to [comment:10 novoselt]:\n> 7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.\n\nNo, no, it's crucial that `add_row` is supported by abstract dictionaries. \nThe whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\nIn the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)",
    "created_at": "2016-06-10T05:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279853",
    "user": "https://github.com/mkoeppe"
}
```

Just a quick reply to point 7:

Replying to [comment:10 novoselt]:
> 7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.

No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)



---

archive/issue_comments_279854.json:
```json
{
    "body": "Replying to [comment:10 novoselt]:\n> 5. It should not be necessary to explicitly name a new slack variable.\n\nAgreed, this argument should be optional; and a name should be generated if it is not provided.",
    "created_at": "2016-06-10T16:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279854",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:10 novoselt]:
> 5. It should not be necessary to explicitly name a new slack variable.

Agreed, this argument should be optional; and a name should be generated if it is not provided.



---

archive/issue_comments_279855.json:
```json
{
    "body": "Replying to [comment:10 novoselt]:\n> 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\nWhat do you mean by \"where variables leave\"?",
    "created_at": "2016-06-10T16:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279855",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:10 novoselt]:
> 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.
What do you mean by "where variables leave"?



---

archive/issue_comments_279856.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-12T00:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279857.json:
```json
{
    "body": "I fixed the problems your comments 1, 2, 4, and 5. \n\nReplying to [comment:10 novoselt]:\n> 1. \"a 1 by n matrix of the new constraint coefficients\" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just \"coefficients of the new constraint\"\n> 2. `new_row` does not reflect very well the meaning, how about `coefficients`?..\n> ...\n> 4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!\n> 5. It should not be necessary to explicitly name a new slack variable.\n\n\nPlease take a look at the last three commits listed in comment:15.\n\nThanks!",
    "created_at": "2016-06-12T00:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279857",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

I fixed the problems your comments 1, 2, 4, and 5. 

Replying to [comment:10 novoselt]:
> 1. "a 1 by n matrix of the new constraint coefficients" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just "coefficients of the new constraint"
> 2. `new_row` does not reflect very well the meaning, how about `coefficients`?..
> ...
> 4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!
> 5. It should not be necessary to explicitly name a new slack variable.


Please take a look at the last three commits listed in comment:15.

Thanks!



---

archive/issue_comments_279858.json:
```json
{
    "body": "Replying to [comment:11 mkoeppe]:\n> No, no, it's crucial that `add_row` is supported by abstract dictionaries. \n> The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\n> In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)\n\nOK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.",
    "created_at": "2016-06-12T05:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279858",
    "user": "https://github.com/novoselt"
}
```

Replying to [comment:11 mkoeppe]:
> No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
> The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
> In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)

OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.



---

archive/issue_comments_279859.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> Replying to [comment:10 novoselt]:\n> > 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\n> What do you mean by \"where variables leave\"?\n\nSorry, I meant \"where variables live\" - I am not a native speaker ;-)",
    "created_at": "2016-06-12T05:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279859",
    "user": "https://github.com/novoselt"
}
```

Replying to [comment:13 mkoeppe]:
> Replying to [comment:10 novoselt]:
> > 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.
> What do you mean by "where variables leave"?

Sorry, I meant "where variables live" - I am not a native speaker ;-)



---

archive/issue_comments_279860.json:
```json
{
    "body": "I can no longer see cumulative changes, please rebase!",
    "created_at": "2016-06-12T05:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279860",
    "user": "https://github.com/novoselt"
}
```

I can no longer see cumulative changes, please rebase!



---

archive/issue_comments_279861.json:
```json
{
    "body": "rebased on 7.2.beta3\n----\nNew commits:",
    "created_at": "2016-06-12T05:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279861",
    "user": "https://github.com/mkoeppe"
}
```

rebased on 7.2.beta3
----
New commits:



---

archive/issue_comments_279862.json:
```json
{
    "body": "Replying to [comment:17 novoselt]:\n> Replying to [comment:11 mkoeppe]:\n> > No, no, it's crucial that `add_row` is supported by abstract dictionaries. \n> > The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\n> > In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)\n> \n> OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.\n\n\"add_relation\" wouldn't express the operation well; because we're not just adding a relation but also a new basic variable. \nI've never heard anyone call this operation other than \"adding a row\" (whether it's a textbook dictionary or a revised dictionary). \nAlso note that \"row\" matches the method `row_coefficients`.",
    "created_at": "2016-06-12T06:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279862",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:17 novoselt]:
> Replying to [comment:11 mkoeppe]:
> > No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
> > The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
> > In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)
> 
> OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.

"add_relation" wouldn't express the operation well; because we're not just adding a relation but also a new basic variable. 
I've never heard anyone call this operation other than "adding a row" (whether it's a textbook dictionary or a revised dictionary). 
Also note that "row" matches the method `row_coefficients`.



---

archive/issue_comments_279863.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-06-13T17:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279863",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

New commits:



---

archive/issue_comments_279864.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-06-18T17:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279864",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

New commits:



---

archive/issue_comments_279865.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-18T17:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279865",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_279866.json:
```json
{
    "body": "7 is retracted, 3 and 6 still stand. And I wanted to look closer and do some changes but was not able to checkout due to trac problems...",
    "created_at": "2016-06-20T02:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279866",
    "user": "https://github.com/novoselt"
}
```

7 is retracted, 3 and 6 still stand. And I wanted to look closer and do some changes but was not able to checkout due to trac problems...



---

archive/issue_comments_279867.json:
```json
{
    "body": "I've made some changes that address points 3 and 6.\nAlso rebased on latest beta.\nReady for review.\n----\nNew commits:",
    "created_at": "2016-06-24T21:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279867",
    "user": "https://github.com/mkoeppe"
}
```

I've made some changes that address points 3 and 6.
Also rebased on latest beta.
Ready for review.
----
New commits:



---

archive/issue_comments_279868.json:
```json
{
    "body": "Going carefully doing some tweaks, not done yet, but have to stop for the moment.\n\n- I thought it is clear that if `new_` prefix is not great for one argument, it is not great for another ;-)\n- There were still some data of problems not preserved, I think everything that can be preserved should be.\n- `a number of the constant term for the new row`?..\n- Explicit hard-coded ring `LPDictionary(matrix(QQ, A)`?!?!?!\n----\nNew commits:",
    "created_at": "2016-06-26T05:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279868",
    "user": "https://github.com/novoselt"
}
```

Going carefully doing some tweaks, not done yet, but have to stop for the moment.

- I thought it is clear that if `new_` prefix is not great for one argument, it is not great for another ;-)
- There were still some data of problems not preserved, I think everything that can be preserved should be.
- `a number of the constant term for the new row`?..
- Explicit hard-coded ring `LPDictionary(matrix(QQ, A)`?!?!?!
----
New commits:



---

archive/issue_comments_279869.json:
```json
{
    "body": "Thanks for fixing these.",
    "created_at": "2016-06-26T21:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279869",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for fixing these.



---

archive/issue_comments_279870.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-19T03:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279871.json:
```json
{
    "body": "With all due respect the old code for `add_row` for revised dictionaries was incomprehensible and extremely unnecessary complicated.\n\nThe current code will probably break on a dictionary for an auxiliary problem - is there any point in properly supporting these or there is never a need to add rows there and we can just throw an exception?\n\nDocumentation of `add_row` and `row_coefficients` needs some clarification with respect to signs (since I got confused and presumably some poor students may get as well). How about something like `These are the coefficients with which nonbasic variables are subtracted in the relation of this basic variable.` ?",
    "created_at": "2016-07-19T03:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279871",
    "user": "https://github.com/novoselt"
}
```

With all due respect the old code for `add_row` for revised dictionaries was incomprehensible and extremely unnecessary complicated.

The current code will probably break on a dictionary for an auxiliary problem - is there any point in properly supporting these or there is never a need to add rows there and we can just throw an exception?

Documentation of `add_row` and `row_coefficients` needs some clarification with respect to signs (since I got confused and presumably some poor students may get as well). How about something like `These are the coefficients with which nonbasic variables are subtracted in the relation of this basic variable.` ?



---

archive/issue_comments_279872.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-20T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279873.json:
```json
{
    "body": "After some more thinking, it is perfectly fine to add rows to auxiliary problems with this code, but there is a constraint on input.\n\nIf you are OK with my changes, set to positive review.",
    "created_at": "2016-07-20T00:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279873",
    "user": "https://github.com/novoselt"
}
```

After some more thinking, it is perfectly fine to add rows to auxiliary problems with this code, but there is a constraint on input.

If you are OK with my changes, set to positive review.



---

archive/issue_comments_279874.json:
```json
{
    "body": "Thank you for your work! They look fine.",
    "created_at": "2016-07-22T00:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279874",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

Thank you for your work! They look fine.



---

archive/issue_comments_279875.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-22T00:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279875",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_019298.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2016-07-23T18:41:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20322#event-19298"
}
```



---

archive/issue_comments_279876.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-23T18:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20322#issuecomment-279876",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
