# Issue 21971: Allow immediate coercion from SR to Gaussian?

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2017-01-19 14:12:14

CC:  slelievre

I'm not sure if this is kosher, but I would like 

```
sage: G = GaussianIntegers()
sage: G(2+I)  
```

to "just work".  This does

```
sage: G.<I> = GaussianIntegers()
sage: G(2+I)
I + 2
```

but has the somewhat unintuitive (and very hard to find via web search, I know where to look) bracket syntax involved.  Ideas?


---

Comment by rws created at 2017-01-19 14:50:33

Looks like a conversion as in `symbolic/expression_conversions.py` should do the trick.


---

Comment by nbruin created at 2017-01-19 22:32:21

This could help: #18036


---

Comment by kcrisman created at 2017-01-20 01:55:34

> This could help: #18036
Haha, I was sure that one had been merged by others long ago!  I'll at least put a xref to this one there.


---

Comment by jdemeyer created at 2017-02-20 07:34:37

Resolution: duplicate


---

Comment by slelievre created at 2017-03-10 19:03:48

Note that the following also works (in Sage 7.5.1).


```
sage: G = GaussianIntegers()
sage: G('2 + I')
I + 2
```



---

Comment by jdemeyer created at 2017-06-26 12:06:04

Changing status from closed to new.


---

Comment by jdemeyer created at 2017-06-26 12:06:04

Resolution changed from duplicate to 


---

Comment by jdemeyer created at 2017-06-26 12:09:38

I'm reopening this because there are two ways to interpret this ticket:

1. Allow `G(2 + I)` to just work, using the symbol `I`.

2. Allow `G(expr)` to work, where `expr` is some symbolic expression representing a number field element.

Only the first one would be fixed by #18036.


---

Comment by jdemeyer created at 2017-06-26 13:11:23

New commits:


---

Comment by jdemeyer created at 2017-06-26 13:11:23

Changing status from new to needs_review.


---

Comment by rws created at 2017-06-27 05:43:53

Can you be more specific than `except Exception`?


---

Comment by jdemeyer created at 2017-06-27 09:40:43

I'll try to just drop the `except Exception` completely.


---

Comment by git created at 2017-06-27 10:35:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-06-27 10:36:26

In the end, I did some more refactoring, including removing some duplicate code.


---

Comment by rws created at 2017-07-01 14:36:41

Sorry, to much algebra, cannot review.


---

Comment by kcrisman created at 2017-07-01 20:11:34

> Sorry, to much algebra, cannot review.

Most of the algebra is just cutting and pasting some examples, though, so those wouldn't need explicit review ...


---

Comment by tscrim created at 2017-07-02 00:46:14

I double-checked, and the algebra LGTM. I do have one minor docstring fix:

```diff
         """
-        Convert a non-number field element x into this number field.
+        Convert a non-number field element ``x`` into this number field.
 
         INPUT:
 
-        - ``x`` -- a non number field element x, e.g., a list, integer,
-          rational, or polynomial.
+        - ``x`` -- a non number field element, e.g., a list, integer,
+          rational, or polynomial
```

Once that is done, you can set a positive review on my behalf.


---

Comment by git created at 2017-07-03 08:14:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-07-03 08:17:36

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-07-31 20:22:17

Merge conflict


---

Comment by vbraun created at 2017-07-31 20:22:17

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-08-01 11:01:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-08-01 11:02:40

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-08-03 22:11:42

Resolution: fixed
