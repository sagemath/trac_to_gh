# Issue 30253: Reduce doctesting time for polyhedra

archive/issues_030253.json:
```json
{
    "body": "CC:  @mkoeppe\n\nEven with #30489 I still get the following times:\n\n```\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polytope.py\n    [175 tests, 15.29 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/plot.py\n    [220 tests, 11.19 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx\n    [61 tests, 34.44 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_normaliz.py\n    [341 tests, 14.82 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/parent.py\n    [155 tests, 8.00 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_field.py\n    [63 tests, 5.57 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/polyhedron_face_lattice.pyx\n    [36 tests, 8.64 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base_ZZ.py\n    [107 tests, 4.99 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_cdd.py\n    [67 tests, 5.22 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx\n    [44 tests, 4.33 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polygon.py\n    [81 tests, 3.31 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base.py\n    [1620 tests, 70.78 s]\nsage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/library.py\n    [409 tests, 158.71 s]\n```\n\nThis ticket tries to reduce this time somewhat by removing super long doctest.\n\nE.g.\n\n```\nsage: P = polytopes.cross_polytope(6, backend='field')                                                                                                                                                                                                                                                                                                                     \nsage: %time TestSuite(P).run()                                                                                                                                                                                                                                                                                                                                             \nCPU times: user 9.59 s, sys: 31.8 ms, total: 9.62 s\nWall time: 9.64 s\n```\n\nCan we remove some of the tests run for large examples like this?\nDo we expect to hit any corner cases by running it on the `6`-dimensional cross-polytope with backend `field`?\n\nIssue created by migration from https://trac.sagemath.org/ticket/30490\n\n",
    "created_at": "2020-09-02T07:48:45Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Reduce doctesting time for polyhedra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30253",
    "user": "https://github.com/kliem"
}
```
CC:  @mkoeppe

Even with #30489 I still get the following times:

```
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polytope.py
    [175 tests, 15.29 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/plot.py
    [220 tests, 11.19 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx
    [61 tests, 34.44 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_normaliz.py
    [341 tests, 14.82 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/parent.py
    [155 tests, 8.00 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_field.py
    [63 tests, 5.57 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/polyhedron_face_lattice.pyx
    [36 tests, 8.64 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base_ZZ.py
    [107 tests, 4.99 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_cdd.py
    [67 tests, 5.22 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx
    [44 tests, 4.33 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polygon.py
    [81 tests, 3.31 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base.py
    [1620 tests, 70.78 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/library.py
    [409 tests, 158.71 s]
```

This ticket tries to reduce this time somewhat by removing super long doctest.

E.g.

```
sage: P = polytopes.cross_polytope(6, backend='field')                                                                                                                                                                                                                                                                                                                     
sage: %time TestSuite(P).run()                                                                                                                                                                                                                                                                                                                                             
CPU times: user 9.59 s, sys: 31.8 ms, total: 9.62 s
Wall time: 9.64 s
```

Can we remove some of the tests run for large examples like this?
Do we expect to hit any corner cases by running it on the `6`-dimensional cross-polytope with backend `field`?

Issue created by migration from https://trac.sagemath.org/ticket/30490





---

archive/issue_comments_430854.json:
```json
{
    "body": "`src/sage/geometry/polyhedron/ppl_lattice_polytope.py`\n\ncontains benchmarking. This is pointless as an doctest (unless you want to prove that you can run this thing multiple times without throwing an error) and it's better to provide the reader with the information which method works fastest.",
    "created_at": "2020-09-02T12:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430854",
    "user": "https://github.com/kliem"
}
```

`src/sage/geometry/polyhedron/ppl_lattice_polytope.py`

contains benchmarking. This is pointless as an doctest (unless you want to prove that you can run this thing multiple times without throwing an error) and it's better to provide the reader with the information which method works fastest.



---

archive/issue_comments_430855.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-02T14:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430855",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_430856.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-09-02T14:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430856",
    "user": "https://github.com/kliem"
}
```

New commits:



---

archive/issue_comments_430857.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-02T16:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430857",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_430858.json:
```json
{
    "body": "Thank you.",
    "created_at": "2020-09-02T16:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430858",
    "user": "https://github.com/kliem"
}
```

Thank you.



---

archive/issue_comments_430859.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-06T21:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30253#issuecomment-430859",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-06T21:51:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30253",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30253#event-79184"
}
```
