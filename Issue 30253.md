# Issue 30253: Reduce doctesting time for polyhedra

Issue created by migration from https://trac.sagemath.org/ticket/30490

Original creator: @kliem

Original creation time: 2020-09-02 07:48:45

CC:  mkoeppe

Even with #30489 I still get the following times:


```
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polytope.py
    [175 tests, 15.29 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/plot.py
    [220 tests, 11.19 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx
    [61 tests, 34.44 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_normaliz.py
    [341 tests, 14.82 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/parent.py
    [155 tests, 8.00 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_field.py
    [63 tests, 5.57 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/polyhedron_face_lattice.pyx
    [36 tests, 8.64 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base_ZZ.py
    [107 tests, 4.99 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/backend_cdd.py
    [67 tests, 5.22 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx
    [44 tests, 4.33 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/ppl_lattice_polygon.py
    [81 tests, 3.31 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/base.py
    [1620 tests, 70.78 s]
sage -t --long --warn-long 88.3 --random-seed=0 src/sage/geometry/polyhedron/library.py
    [409 tests, 158.71 s]
```


This ticket tries to reduce this time somewhat by removing super long doctest.

E.g.


```
sage: P = polytopes.cross_polytope(6, backend='field')                                                                                                                                                                                                                                                                                                                     
sage: %time TestSuite(P).run()                                                                                                                                                                                                                                                                                                                                             
CPU times: user 9.59 s, sys: 31.8 ms, total: 9.62 s
Wall time: 9.64 s
```


Can we remove some of the tests run for large examples like this?
Do we expect to hit any corner cases by running it on the `6`-dimensional cross-polytope with backend `field`?


---

Comment by @kliem created at 2020-09-02 12:54:49

`src/sage/geometry/polyhedron/ppl_lattice_polytope.py`

contains benchmarking. This is pointless as an doctest (unless you want to prove that you can run this thing multiple times without throwing an error) and it's better to provide the reader with the information which method works fastest.


---

Comment by @kliem created at 2020-09-02 14:35:11

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-09-02 14:35:11

New commits:


---

Comment by mkoeppe created at 2020-09-02 16:25:00

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2020-09-02 16:36:05

Thank you.


---

Comment by vbraun created at 2020-09-06 21:51:15

Resolution: fixed
