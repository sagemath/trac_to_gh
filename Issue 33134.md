# Issue 33134: Remove sage-location and NEW_SAGE_ROOT code

Issue created by migration from https://trac.sagemath.org/ticket/33371

Original creator: mkoeppe

Original creation time: 2022-02-17 19:51:21

CC:  jhpalmieri




---

Comment by git created at 2022-02-17 20:00:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-17 22:57:42

Are there some corresponding changes that need to be made in the Sage binary distribution repo? On rare occasions when I've installed a binary, it has run a script to hardcode various library locations, and I wonder if it uses `sage-location`. (To be honest, I don't know the status of binary distributions of Sage anymore.)


---

Comment by mkoeppe created at 2022-02-17 23:00:03

Replying to [comment:4 jhpalmieri]:
> Are there some corresponding changes that need to be made in the Sage binary distribution repo?
No, this mechanism is completely unrelated.


---

Comment by git created at 2022-02-19 22:54:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-02-19 22:59:05

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-02-21 05:49:36

When you have a chance, could you please update with the latest branches from the dependency tickets?


---

Comment by git created at 2022-02-21 05:56:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2022-02-22 23:15:23

This isn't working for me as an incremental upgrade. After building Sage 9.6.beta2, I checked out this branch and ran `make`. It failed almost immediately, complaining that 

```
[sagelib-9.6.beta2] error: file '.../sage-9.6.beta2/pkgs/sagemath-standard/bin/sage-location' does not exist
```



---

Comment by mkoeppe created at 2022-02-22 23:20:29

You'll have to run `./bootstrap`


---

Comment by jhpalmieri created at 2022-02-22 23:55:32

Is there any way to take care of that for all of the people who want to try out new releases but will not know this?


---

Comment by mkoeppe created at 2022-02-22 23:58:14

Running `bootstrap` is only needed before a ticket is merged into the next beta


---

Comment by jhpalmieri created at 2022-02-23 19:03:21

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2022-02-23 19:03:21

Thanks. This looks good to me, and I don't see any changes in behavior: before this branch Sage failed ungracefully if you moved its location, and it still fails ungracefully.

(Does anyone use the script `sage-update-src`? Maybe that should go next.)


---

Comment by mkoeppe created at 2022-02-23 20:00:05

Thank you!


---

Comment by mkoeppe created at 2022-02-23 20:01:26

Replying to [comment:14 jhpalmieri]:
> (Does anyone use the script `sage-update-src`? Maybe that should go next.)

+1 on getting rid of it in another ticket


---

Comment by jhpalmieri created at 2022-02-23 20:49:04

Replying to [comment:16 mkoeppe]:
> Replying to [comment:14 jhpalmieri]:
> > (Does anyone use the script `sage-update-src`? Maybe that should go next.)
> 
> +1 on getting rid of it in another ticket

I opened #33412.


---

Comment by vbraun created at 2022-02-27 22:00:21

Resolution: fixed
