# Issue 14477: dumps doesn't save immutability for Matrix_mod2_dense

Issue created by migration from Trac.

Original creator: matthew.weippert

Original creation time: 2013-06-03 16:30:58

Assignee: jason, was

CC:  tscrim

Keywords: immutable hashable matrix GF(2)

Dumps doesn't save immutability for matrices over GF(2).

Simple example:

```
z = zero_matrix(GF(2), 3)
z.set_immutable()
print z.is_immutable()
zstr = z.dumps()
z2 = loads(zstr)
print z2.is_immutable()
```


This affects saving matrices and in particular raises `TypeError('mutable matrices are unhashable',)` when these matrices are used in hashed collections (set/dict etc):

```
z = zero_matrix(GF(2), 3)
z.set_immutable()
s = set()
s.add(z)
sstr = dumps(s)
s2 = loads(sstr)
```


*Work Around for saving:*
Saving lists of matrices works just fine, so if you need to save a set or dictionary, convert to/from a list on before/after save.


---

Comment by mkoeppe created at 2021-09-10 06:37:57

outdated, works ok in 9.5.beta0


---

Comment by mkoeppe created at 2021-09-10 06:37:57

Changing status from new to needs_review.


---

Comment by klee created at 2021-09-10 11:16:33

Changing status from needs_review to positive_review.


---

Comment by klee created at 2021-09-10 11:16:33

Non-existent issue now.


---

Comment by mkoeppe created at 2021-09-10 17:33:19

Resolution: invalid
