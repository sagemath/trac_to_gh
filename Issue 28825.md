# Issue 28825: build/pkgs/python3/spkg-install: Install valgrind-python.supp in $SAGE_LOCAL, not in $SAGE_SRC

archive/issues_028825.json:
```json
{
    "body": "CC:  @dimpase @embray @rwst @jhpalmieri @jdemeyer @vbraun\n\n`valgrind-python.supp` is supplied by the Python source code tarball.\n\nIn preparation for #27824 - spkg-configure.m4 for python3:\n- we install this file in $SAGE_LOCAL/lib/valgrind/ instead. \n- make `sage -valgrind` more flexible in how it accesses the file.\n\nThis change also has the side effect of removing a peculiar use of `SAGE_EXTCODE` during building: Without this ticket, `python.supp` is first installed in the source directory (`$SAGE_SRC/ext`), and then from there in `$SAGE_LOCAL`. This simplifies #21785.\n\n-------\n\nRelated old tickets:\n- #19398 (Be more verbose when running valgrind)\n- #17139 (Installing local/share/sage/ext/valgrind/python.supp fails)\n- #11918 (Sage should ship its Valgrind suppressions file, or not insist on its presence)\n\nIssue created by migration from https://trac.sagemath.org/ticket/29062\n\n",
    "created_at": "2020-01-21T18:31:27Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "build/pkgs/python3/spkg-install: Install valgrind-python.supp in $SAGE_LOCAL, not in $SAGE_SRC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28825",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @embray @rwst @jhpalmieri @jdemeyer @vbraun

`valgrind-python.supp` is supplied by the Python source code tarball.

In preparation for #27824 - spkg-configure.m4 for python3:
- we install this file in $SAGE_LOCAL/lib/valgrind/ instead. 
- make `sage -valgrind` more flexible in how it accesses the file.

This change also has the side effect of removing a peculiar use of `SAGE_EXTCODE` during building: Without this ticket, `python.supp` is first installed in the source directory (`$SAGE_SRC/ext`), and then from there in `$SAGE_LOCAL`. This simplifies #21785.

-------

Related old tickets:
- #19398 (Be more verbose when running valgrind)
- #17139 (Installing local/share/sage/ext/valgrind/python.supp fails)
- #11918 (Sage should ship its Valgrind suppressions file, or not insist on its presence)

Issue created by migration from https://trac.sagemath.org/ticket/29062





---

archive/issue_comments_407109.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-21T19:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407109",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_407110.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-01-21T19:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407110",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_407111.json:
```json
{
    "body": "Makes sense to me, although I don't know about adding the Debian-specific paths.  How standard is `<prefix>/lib/valgrind/` on other distros?  Perhaps the script could just take an optional path to the suppressions file as command-line argument, or have the ability to pass additional command-line arguments directly to valgrind?",
    "created_at": "2020-01-22T10:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407111",
    "user": "https://github.com/embray"
}
```

Makes sense to me, although I don't know about adding the Debian-specific paths.  How standard is `<prefix>/lib/valgrind/` on other distros?  Perhaps the script could just take an optional path to the suppressions file as command-line argument, or have the ability to pass additional command-line arguments directly to valgrind?



---

archive/issue_comments_407112.json:
```json
{
    "body": "my Fedora box has `/usr/lib64/valgrind/`",
    "created_at": "2020-01-22T11:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407112",
    "user": "https://github.com/dimpase"
}
```

my Fedora box has `/usr/lib64/valgrind/`



---

archive/issue_comments_407113.json:
```json
{
    "body": "Replying to [comment:4 dimpase]:\n> my Fedora box has `/usr/lib64/valgrind/`\nOK I'll add that.",
    "created_at": "2020-01-22T13:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407113",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:4 dimpase]:
> my Fedora box has `/usr/lib64/valgrind/`
OK I'll add that.



---

archive/issue_comments_407114.json:
```json
{
    "body": "Replying to [comment:3 embray]:\n> Makes sense to me, although I don't know about adding the Debian-specific paths.  How standard is `<prefix>/lib/valgrind/` on other distros?  \n\nAs far as I can see, `<prefix>/lib/valgrind/` is the install location of upstream valgrind. It has the default suppression file. It's a natural place for distros to install additional things into.\n\n> Perhaps the script could just take an optional path to the suppressions file as command-line argument, or have the ability to pass additional command-line arguments directly to valgrind?\n\nA follow-up ticket.",
    "created_at": "2020-01-22T13:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407114",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:3 embray]:
> Makes sense to me, although I don't know about adding the Debian-specific paths.  How standard is `<prefix>/lib/valgrind/` on other distros?  

As far as I can see, `<prefix>/lib/valgrind/` is the install location of upstream valgrind. It has the default suppression file. It's a natural place for distros to install additional things into.

> Perhaps the script could just take an optional path to the suppressions file as command-line argument, or have the ability to pass additional command-line arguments directly to valgrind?

A follow-up ticket.



---

archive/issue_comments_407115.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-22T16:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407116.json:
```json
{
    "body": "Ready for review",
    "created_at": "2020-01-24T16:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407116",
    "user": "https://github.com/mkoeppe"
}
```

Ready for review



---

archive/issue_comments_407117.json:
```json
{
    "body": "Replying to [comment:5 mkoeppe]:\n> Replying to [comment:4 dimpase]:\n> > my Fedora box has `/usr/lib64/valgrind/`\n> OK I'll add that.\nThis is added and the ticket is waiting for review...",
    "created_at": "2020-01-28T18:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407117",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 mkoeppe]:
> Replying to [comment:4 dimpase]:
> > my Fedora box has `/usr/lib64/valgrind/`
> OK I'll add that.
This is added and the ticket is waiting for review...



---

archive/issue_comments_407118.json:
```json
{
    "body": "How can this be tested?",
    "created_at": "2020-01-29T13:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407118",
    "user": "https://github.com/dimpase"
}
```

How can this be tested?



---

archive/issue_comments_407119.json:
```json
{
    "body": "Check that sage-valgrind works without error in a fresh build from a distclean source, both in a python2 and python3 build.",
    "created_at": "2020-01-29T14:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407119",
    "user": "https://github.com/mkoeppe"
}
```

Check that sage-valgrind works without error in a fresh build from a distclean source, both in a python2 and python3 build.



---

archive/issue_comments_407120.json:
```json
{
    "body": "this is what I see on py3 on Debian 10\n\n```\n(sage-sh) dimpase@penguin:sage-src$ sage-valgrind \nUsing default flags: --leak-resolution=high --leak-check=full --num-callers=25  --suppressions=/usr/lib/valgrind/python3.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/pyalloc.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/sage.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/sage-additional.supp\n==17460== Memcheck, a memory error detector\n==17460== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==17460== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info\n==17460== Command: /home/dimpase/sage-src/src/bin/sage-ipython -i\n==17460== \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.1.beta2, Release Date: 2020-01-26               \u2502\n\u2502 Using Python 3.7.3. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: 2+2\n4\nsage:                                                                                                                                                                                     \nExiting Sage (CPU time 0m0.17s, Wall time 2m5.33s).\n(sage-sh) dimpase@penguin:sage-src$ \n```\n\nIs this what's expected?\n\nPS. `sage --valgrind` produces the same output.",
    "created_at": "2020-01-31T18:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407120",
    "user": "https://github.com/dimpase"
}
```

this is what I see on py3 on Debian 10

```
(sage-sh) dimpase@penguin:sage-src$ sage-valgrind 
Using default flags: --leak-resolution=high --leak-check=full --num-callers=25  --suppressions=/usr/lib/valgrind/python3.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/pyalloc.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/sage.supp --suppressions=/home/dimpase/sage-src/local/share/sage/ext/valgrind/sage-additional.supp
==17460== Memcheck, a memory error detector
==17460== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==17460== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info
==17460== Command: /home/dimpase/sage-src/src/bin/sage-ipython -i
==17460== 
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.1.beta2, Release Date: 2020-01-26               │
│ Using Python 3.7.3. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: 2+2
4
sage:                                                                                                                                                                                     
Exiting Sage (CPU time 0m0.17s, Wall time 2m5.33s).
(sage-sh) dimpase@penguin:sage-src$ 
```

Is this what's expected?

PS. `sage --valgrind` produces the same output.



---

archive/issue_comments_407121.json:
```json
{
    "body": "Yes, looks right.",
    "created_at": "2020-01-31T20:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407121",
    "user": "https://github.com/mkoeppe"
}
```

Yes, looks right.



---

archive/issue_comments_407122.json:
```json
{
    "body": "I'll run a whole build of this branch on py2, just to be sure.",
    "created_at": "2020-01-31T21:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407122",
    "user": "https://github.com/dimpase"
}
```

I'll run a whole build of this branch on py2, just to be sure.



---

archive/issue_comments_407123.json:
```json
{
    "body": "On py2 it does not seem to get installed in the right place:\n\n```\n$ ./sage --valgrind\nPython suppressions not found (not installed?), skipping\nUsing default flags: --leak-resolution=high --leak-check=full --num-callers=25  --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/pyalloc.supp --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/sage.supp --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/sage-additional.supp\n==21807== Memcheck, a memory error detector\n==21807== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==21807== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==21807== Command: /home/scratch2/dimpase/sage/sage-clang/src/bin/sage-ipython -i\n==21807== \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.1.beta2, Release Date: 2020-01-26               \u2502\n\u2502 Using Python 2.7.15. Type \"help()\" for help.                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: 2+2\n4\nsage: exit\nExiting Sage (CPU time 0m0.11s, Wall time 0m5.92s).\n```\n\n\nIn install log I see\n\n```\ncp <SAGEROOT>/src/ext/valgrind/sage.supp <SAGEROOT>/local/share/sage/ext/valgrind/sage.supp\n```\n\nand the same with files `pyalloc.supp`, `sage-additional.supp`.\n\nAnd then\n\n```\n[python2-2.7.15.p1] Installing valgrind suppression file...\n[python2-2.7.15.p1] Misc/valgrind-python.supp -> <SAGELOCAL>/var/tmp/sage/build/python2-2.7.15.p1/inst/home/scratch2/dimpase/sage/sage-clang/local/var/tmp/sage/build/python2-2.7.15.p1/inst/home/scratch2/dimpase/sage/sage-clang/local/lib/valgrind/python.supp\n```\n\n\nIs this branch missing needed py2 changes?",
    "created_at": "2020-01-31T23:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407123",
    "user": "https://github.com/dimpase"
}
```

On py2 it does not seem to get installed in the right place:

```
$ ./sage --valgrind
Python suppressions not found (not installed?), skipping
Using default flags: --leak-resolution=high --leak-check=full --num-callers=25  --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/pyalloc.supp --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/sage.supp --suppressions=/home/scratch2/dimpase/sage/sage-clang/local/share/sage/ext/valgrind/sage-additional.supp
==21807== Memcheck, a memory error detector
==21807== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==21807== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==21807== Command: /home/scratch2/dimpase/sage/sage-clang/src/bin/sage-ipython -i
==21807== 
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.1.beta2, Release Date: 2020-01-26               │
│ Using Python 2.7.15. Type "help()" for help.                       │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: 2+2
4
sage: exit
Exiting Sage (CPU time 0m0.11s, Wall time 0m5.92s).
```


In install log I see

```
cp <SAGEROOT>/src/ext/valgrind/sage.supp <SAGEROOT>/local/share/sage/ext/valgrind/sage.supp
```

and the same with files `pyalloc.supp`, `sage-additional.supp`.

And then

```
[python2-2.7.15.p1] Installing valgrind suppression file...
[python2-2.7.15.p1] Misc/valgrind-python.supp -> <SAGELOCAL>/var/tmp/sage/build/python2-2.7.15.p1/inst/home/scratch2/dimpase/sage/sage-clang/local/var/tmp/sage/build/python2-2.7.15.p1/inst/home/scratch2/dimpase/sage/sage-clang/local/lib/valgrind/python.supp
```


Is this branch missing needed py2 changes?



---

archive/issue_comments_407124.json:
```json
{
    "body": "This all looks fine... Are you using `sage -valgrind` or are you trying to execute the `sage-valgrind` script directly?",
    "created_at": "2020-01-31T23:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407124",
    "user": "https://github.com/mkoeppe"
}
```

This all looks fine... Are you using `sage -valgrind` or are you trying to execute the `sage-valgrind` script directly?



---

archive/issue_comments_407125.json:
```json
{
    "body": "Does the `local/lib/valgrind/python.supp` file exist after installation?",
    "created_at": "2020-01-31T23:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407125",
    "user": "https://github.com/mkoeppe"
}
```

Does the `local/lib/valgrind/python.supp` file exist after installation?



---

archive/issue_comments_407126.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> Does the `local/lib/valgrind/python.supp` file exist after installation?\nno.",
    "created_at": "2020-02-01T00:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407126",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:19 mkoeppe]:
> Does the `local/lib/valgrind/python.supp` file exist after installation?
no.



---

archive/issue_comments_407127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-02-01T00:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407128.json:
```json
{
    "body": "Thanks for catching this.",
    "created_at": "2020-02-01T00:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407128",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for catching this.



---

archive/issue_comments_407129.json:
```json
{
    "body": "have you fixed the problem? I only see a change in \n`build/pkgs/python3/spkg-install` - should not be relevant for the py2",
    "created_at": "2020-02-01T00:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407129",
    "user": "https://github.com/dimpase"
}
```

have you fixed the problem? I only see a change in 
`build/pkgs/python3/spkg-install` - should not be relevant for the py2



---

archive/issue_comments_407130.json:
```json
{
    "body": "Py2 has a symlink to the same script",
    "created_at": "2020-02-01T00:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407130",
    "user": "https://github.com/mkoeppe"
}
```

Py2 has a symlink to the same script



---

archive/issue_comments_407131.json:
```json
{
    "body": "Replying to [comment:24 mkoeppe]:\n> Py2 has a symlink to the same script\nthis is evil :-)",
    "created_at": "2020-02-01T00:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407131",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:24 mkoeppe]:
> Py2 has a symlink to the same script
this is evil :-)



---

archive/issue_comments_407132.json:
```json
{
    "body": "Wasn't me :)",
    "created_at": "2020-02-01T00:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407132",
    "user": "https://github.com/mkoeppe"
}
```

Wasn't me :)



---

archive/issue_comments_407133.json:
```json
{
    "body": "OK, good, this works for py2. \n\nI'll double-check for py3 - the previous check might have been faulty due to incomplete cleaning...",
    "created_at": "2020-02-01T01:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407133",
    "user": "https://github.com/dimpase"
}
```

OK, good, this works for py2. 

I'll double-check for py3 - the previous check might have been faulty due to incomplete cleaning...



---

archive/issue_comments_407134.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-02-01T01:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407134",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_407135.json:
```json
{
    "body": "looks good.",
    "created_at": "2020-02-01T08:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407135",
    "user": "https://github.com/dimpase"
}
```

looks good.



---

archive/issue_comments_407136.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-01T08:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407136",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407137.json:
```json
{
    "body": "Thanks for reviewing!",
    "created_at": "2020-02-01T13:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407137",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for reviewing!



---

archive/issue_events_026660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-10T20:05:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28825#event-26660"
}
```



---

archive/issue_comments_407138.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-02-10T20:05:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28825#issuecomment-407138",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
