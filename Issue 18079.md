# Issue 18079: Lcalc fails to build with GCC 5.x (C++ issue)

Issue created by migration from Trac.

Original creator: leif

Original creation time: 2015-04-27 17:12:44

Assignee: leif

Keywords: default parameters definition -fpermissive g++

GCC 5.1 (i.e., `g++`) again got stricter with respect to C++ conformance, and hence another piece of the changes necessary to let Lcalc build with Clang (cf. #12437) is needed for `g++` as well, namely forbidden default parameters in function _definitions_ ("Part II").

This also affects the Sage library, i.e., extension modules using Lcalc's headers won't build either (but fixing the Lcalc package also fixes that).  Note that distutils ignore `CXXFLAGS`, so `-fpermissive` has to be passed *in `CFLAGS`* (for these modules) until Lcalc gets fixed.

The patch is trivial though.



---

Comment by leif created at 2015-04-27 17:32:24

New commits:


---

Comment by leif created at 2015-04-27 17:32:24

Changing status from new to needs_review.


---

Comment by leif created at 2015-04-27 18:00:09

P.S.:  The _declarations_ of the functions (still) contain exactly the same default parameters, so omitting them in their definitions doesn't break any code using the headers.


---

Comment by jdemeyer created at 2015-04-27 19:03:49

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-04-27 19:03:49

I think the patchlevel of the `lcalc` package needs to be increased (in case somebody upgrades GCC, you really want `lcalc` to be rebuilt).


---

Comment by git created at 2015-04-28 01:37:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by leif created at 2015-04-28 01:47:37

Changing status from needs_work to needs_review.


---

Comment by leif created at 2015-04-28 01:47:37

Replying to [comment:3 jdemeyer]:
> I think the patchlevel of the `lcalc` package needs to be increased

Amen.  (`$OTHERS` don't care much with the _new workflow<sup>TM</sup>_.)

> (in case somebody upgrades GCC, you really want `lcalc` to be rebuilt).

Not me, but probably `$SOMEBODY`.


---

Comment by jdemeyer created at 2015-04-28 06:07:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-29 03:13:48

Resolution: fixed
