# Issue 17728: Uniformization of the API to compute the inverse of an element.

archive/issues_017728.json:
```json
{
    "body": "CC:  saliola vdelecroix simonking slelievre tscrim\n\nSome classes in Sage implement the inverse of an element through the\ninverse method:\n\n```\nmistral-/opt/sage/src/sage>grep \"def inverse(\" **/*.py\nalgebras/finite_dimensional_algebras/finite_dimensional_algebra_element.py:    def inverse(self):\nalgebras/iwahori_hecke_algebra.py:            def inverse(self):\ncategories/coxeter_groups.py:        def inverse(self):\ncombinat/affine_permutation.py:    def inverse(self):\ncombinat/permutation.py:    def inverse(self):\ncombinat/tableau_tuple.py:    def inverse(self,k):\ncrypto/classical_cipher.py:    def inverse(self):\ncrypto/classical_cipher.py:    def inverse(self):\ncrypto/classical_cipher.py:    def inverse(self):\ncrypto/classical_cipher.py:    def inverse(self):\ndynamics/interval_exchanges/iet.py:    def inverse(self):\ngroups/abelian_gps/element_base.py:    def inverse(self):\ngroups/abelian_gps/values.py:    def inverse(self):\ngroups/affine_gps/group_element.py:    def inverse(self):\nmodules/matrix_morphism.py:    def inverse(self):\nrings/number_field/class_group.py:    def inverse(self):\nrings/universal_cyclotomic_field/universal_cyclotomic_field.py:        def inverse(self):\nschemes/elliptic_curves/formal_group.py:    def inverse(self, prec=20):\nschemes/elliptic_curves/weierstrass_transform.py:    def inverse(self):\n```\n\n\nSome other through the ``__invert__`` method:\n\n```\nmistral-/opt/sage/src/sage>grep \"def __invert__(\" **/*.py \ncategories/algebras_with_basis.py:        def __invert__(self):\ncategories/magmas.py:                def __invert__(self):\ncategories/modules_with_basis.py:    def __invert__(self):\ncategories/modules_with_basis.py:    def __invert__(self):\ncombinat/combinatorial_algebra.py:    def __invert__(self):\ncombinat/sf/dual.py:        def __invert__(self):\ncombinat/species/generating_series.py:    def __invert__(self):\ngroups/indexed_free_group.py:        def __invert__(self):\ngroups/indexed_free_group.py:        def __invert__(self):\ngroups/matrix_gps/group_element.py:    def __invert__(self):\ngroups/raag.py:        def __invert__(self):\nlibs/coxeter3/coxeter_group.py:        def __invert__(self):\nlogic/boolformula.py:    def __invert__(self):\nmisc/sage_input.py:    def __invert__(self):\nmodular/dirichlet.py:    def __invert__(self):\nmodular/local_comp/smoothchar.py:    def __invert__(self):\nmodules/matrix_morphism.py:    def __invert__(self):\nrings/continued_fraction.py:    def __invert__(self):\nrings/finite_rings/element_ext_pari.py:    def __invert__(self):\nrings/function_field/function_field_ideal.py:    def __invert__(self):\nrings/infinity.py:    def __invert__(self):\nrings/multi_power_series_ring_element.py:    def __invert__(self):\nrings/number_field/morphism.py:    def __invert__(self):\nrings/number_field/number_field_ideal.py:    def __invert__(self):\nrings/number_field/number_field_ideal_rel.py:    def __invert__(self):\nrings/pari_ring.py:    def __invert__(self):\nrings/polynomial/polynomial_quotient_ring_element.py:    def __invert__(self):\nrings/qqbar.py:    def __invert__(self):\nrings/quotient_ring_element.py:    def __invert__(self):\nrings/universal_cyclotomic_field/universal_cyclotomic_field.py:        def __invert__(self):\nsandpiles/sandpile.py:    def __invert__(self):\nschemes/elliptic_curves/heegner.py:    def __invert__(self):\nschemes/elliptic_curves/height.py:    def __invert__(self):\nschemes/elliptic_curves/weierstrass_morphism.py:    def __invert__(self):\nschemes/elliptic_curves/weierstrass_morphism.py:    def __invert__(self):\nschemes/hyperelliptic_curves/monsky_washnitzer.py:    def __invert__(self):\nstructure/factorization.py:    def __invert__(self):\n```\n\n\nUsually they provide a crosslink so that ``__invert__`` and\n``inverse`` are equivalent, but this is done on a case by case bases,\nso of course such links are missing here and there:\n\n```\nsage: ~AA(sqrt(~2))\n1.414213562373095?\nsage: AA(sqrt(~2)).inverse()\n...\nAttributeError: 'AlgebraicReal' object has no attribute 'inverse'\n```\n\n\n\n```\nsage: R.<u,v,w> = QQ[]\nsage: f = EllipticCurve_from_cubic(u^3 + v^3 + w^3, [1,-1,0], morphism=True)\nsage: f.inverse()\nScheme morphism:\n...\nsage: ~f\n...\nTypeError: bad operand type for unary ~: 'WeierstrassTransformationWithInverse_class'\n```\n\n\n\nShall we change the code to systematically implement ``__invert__`` as\nper Python's convention, and then implement the cross link ``inverse``\n-> ``__invert__`` once for all high up in the class hierarchy,\ntypically in Magmas.ElementMethods?\n\nCaveat: this won't cover all cases since we have invertible elements\nthat don't belong to a magma; e.g. a isomorphisms between two\ndifferent parents; so it will still be necessary to handle a couple\nspecial cases by hand.\n\nSee also comment about ``__inverse__`` in\nsage.categories.coxeter_groups.py around line 699.\n\nNote: the default implementation ~f = 1/f provided by Element should\nprobably be implemented in Monoids.ElementMethods; see also #17692.\n\nNote: the qqbar classes also implement an \"invert\" method, but that's\nfor a slightly different use case. So we may, or not, want to make\nthis uniform too. `invert` does not fit Sage's usual verb/noun\nconvention since it's a verb while it is not inplace.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17965\n\n",
    "created_at": "2015-03-16T17:41:01Z",
    "labels": [
        "categories",
        "major",
        "bug"
    ],
    "title": "Uniformization of the API to compute the inverse of an element.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17728",
    "user": "nthiery"
}
```
CC:  saliola vdelecroix simonking slelievre tscrim

Some classes in Sage implement the inverse of an element through the
inverse method:

```
mistral-/opt/sage/src/sage>grep "def inverse(" **/*.py
algebras/finite_dimensional_algebras/finite_dimensional_algebra_element.py:    def inverse(self):
algebras/iwahori_hecke_algebra.py:            def inverse(self):
categories/coxeter_groups.py:        def inverse(self):
combinat/affine_permutation.py:    def inverse(self):
combinat/permutation.py:    def inverse(self):
combinat/tableau_tuple.py:    def inverse(self,k):
crypto/classical_cipher.py:    def inverse(self):
crypto/classical_cipher.py:    def inverse(self):
crypto/classical_cipher.py:    def inverse(self):
crypto/classical_cipher.py:    def inverse(self):
dynamics/interval_exchanges/iet.py:    def inverse(self):
groups/abelian_gps/element_base.py:    def inverse(self):
groups/abelian_gps/values.py:    def inverse(self):
groups/affine_gps/group_element.py:    def inverse(self):
modules/matrix_morphism.py:    def inverse(self):
rings/number_field/class_group.py:    def inverse(self):
rings/universal_cyclotomic_field/universal_cyclotomic_field.py:        def inverse(self):
schemes/elliptic_curves/formal_group.py:    def inverse(self, prec=20):
schemes/elliptic_curves/weierstrass_transform.py:    def inverse(self):
```


Some other through the ``__invert__`` method:

```
mistral-/opt/sage/src/sage>grep "def __invert__(" **/*.py 
categories/algebras_with_basis.py:        def __invert__(self):
categories/magmas.py:                def __invert__(self):
categories/modules_with_basis.py:    def __invert__(self):
categories/modules_with_basis.py:    def __invert__(self):
combinat/combinatorial_algebra.py:    def __invert__(self):
combinat/sf/dual.py:        def __invert__(self):
combinat/species/generating_series.py:    def __invert__(self):
groups/indexed_free_group.py:        def __invert__(self):
groups/indexed_free_group.py:        def __invert__(self):
groups/matrix_gps/group_element.py:    def __invert__(self):
groups/raag.py:        def __invert__(self):
libs/coxeter3/coxeter_group.py:        def __invert__(self):
logic/boolformula.py:    def __invert__(self):
misc/sage_input.py:    def __invert__(self):
modular/dirichlet.py:    def __invert__(self):
modular/local_comp/smoothchar.py:    def __invert__(self):
modules/matrix_morphism.py:    def __invert__(self):
rings/continued_fraction.py:    def __invert__(self):
rings/finite_rings/element_ext_pari.py:    def __invert__(self):
rings/function_field/function_field_ideal.py:    def __invert__(self):
rings/infinity.py:    def __invert__(self):
rings/multi_power_series_ring_element.py:    def __invert__(self):
rings/number_field/morphism.py:    def __invert__(self):
rings/number_field/number_field_ideal.py:    def __invert__(self):
rings/number_field/number_field_ideal_rel.py:    def __invert__(self):
rings/pari_ring.py:    def __invert__(self):
rings/polynomial/polynomial_quotient_ring_element.py:    def __invert__(self):
rings/qqbar.py:    def __invert__(self):
rings/quotient_ring_element.py:    def __invert__(self):
rings/universal_cyclotomic_field/universal_cyclotomic_field.py:        def __invert__(self):
sandpiles/sandpile.py:    def __invert__(self):
schemes/elliptic_curves/heegner.py:    def __invert__(self):
schemes/elliptic_curves/height.py:    def __invert__(self):
schemes/elliptic_curves/weierstrass_morphism.py:    def __invert__(self):
schemes/elliptic_curves/weierstrass_morphism.py:    def __invert__(self):
schemes/hyperelliptic_curves/monsky_washnitzer.py:    def __invert__(self):
structure/factorization.py:    def __invert__(self):
```


Usually they provide a crosslink so that ``__invert__`` and
``inverse`` are equivalent, but this is done on a case by case bases,
so of course such links are missing here and there:

```
sage: ~AA(sqrt(~2))
1.414213562373095?
sage: AA(sqrt(~2)).inverse()
...
AttributeError: 'AlgebraicReal' object has no attribute 'inverse'
```



```
sage: R.<u,v,w> = QQ[]
sage: f = EllipticCurve_from_cubic(u^3 + v^3 + w^3, [1,-1,0], morphism=True)
sage: f.inverse()
Scheme morphism:
...
sage: ~f
...
TypeError: bad operand type for unary ~: 'WeierstrassTransformationWithInverse_class'
```



Shall we change the code to systematically implement ``__invert__`` as
per Python's convention, and then implement the cross link ``inverse``
-> ``__invert__`` once for all high up in the class hierarchy,
typically in Magmas.ElementMethods?

Caveat: this won't cover all cases since we have invertible elements
that don't belong to a magma; e.g. a isomorphisms between two
different parents; so it will still be necessary to handle a couple
special cases by hand.

See also comment about ``__inverse__`` in
sage.categories.coxeter_groups.py around line 699.

Note: the default implementation ~f = 1/f provided by Element should
probably be implemented in Monoids.ElementMethods; see also #17692.

Note: the qqbar classes also implement an "invert" method, but that's
for a slightly different use case. So we may, or not, want to make
this uniform too. `invert` does not fit Sage's usual verb/noun
convention since it's a verb while it is not inplace.

Issue created by migration from https://trac.sagemath.org/ticket/17965





---

archive/issue_comments_237031.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-07T14:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237031",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_237032.json:
```json
{
    "body": "Here is a first attempt. Opinions ?\n----\nNew commits:",
    "created_at": "2020-07-07T14:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237032",
    "user": "chapoton"
}
```

Here is a first attempt. Opinions ?
----
New commits:



---

archive/issue_comments_237033.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-07T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237033",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237034.json:
```json
{
    "body": "In general I think unifying this is a good idea. Something to keep in mind is that `__invert__` will not show up in the documentation, by default. If in some cases there are extensive examples, it could be added to the documentation using `automethod`, though. Probably this is not needed for most of the elements, but in #29723 (inverses of ring homomorphisms) this is the reason why I linked `__invert__` to `inverse`.",
    "created_at": "2020-07-07T19:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237034",
    "user": "@mwageringel"
}
```

In general I think unifying this is a good idea. Something to keep in mind is that `__invert__` will not show up in the documentation, by default. If in some cases there are extensive examples, it could be added to the documentation using `automethod`, though. Probably this is not needed for most of the elements, but in #29723 (inverses of ring homomorphisms) this is the reason why I linked `__invert__` to `inverse`.



---

archive/issue_comments_237035.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-07T19:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237035",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-08T06:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237036",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237037.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-08T06:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237037",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237038.json:
```json
{
    "body": "oh, boy, now with an infinite loop in\n\n```\nsage -t --long --warn-long 61.5 src/sage/monoids/free_monoid_element.py\n```\n",
    "created_at": "2020-07-08T06:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237038",
    "user": "chapoton"
}
```

oh, boy, now with an infinite loop in

```
sage -t --long --warn-long 61.5 src/sage/monoids/free_monoid_element.py
```




---

archive/issue_comments_237039.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-13T07:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237039",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_237040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T08:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237040",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-01T12:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237041",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-08T09:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237043.json:
```json
{
    "body": "I am thinking to move the \"Inverse\" axioms from magmas to monoids. \n\nBecause the notion of inverse does not really make sense in magmas, where left and right inverses can be different.\n\n\n```\nsrc/sage/categories/magmas.py:        class Inverse(CategoryWithAxiom):\n```\n",
    "created_at": "2020-11-08T09:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237043",
    "user": "chapoton"
}
```

I am thinking to move the "Inverse" axioms from magmas to monoids. 

Because the notion of inverse does not really make sense in magmas, where left and right inverses can be different.


```
src/sage/categories/magmas.py:        class Inverse(CategoryWithAxiom):
```




---

archive/issue_comments_237044.json:
```json
{
    "body": "We may eventually need to have weaker axioms LeftInverses and RightInverses.\nBut is there an inconvenient in having an axiom that states the existence\nof both a left and right inverse that co\u00efncide?",
    "created_at": "2020-11-08T13:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237044",
    "user": "nthiery"
}
```

We may eventually need to have weaker axioms LeftInverses and RightInverses.
But is there an inconvenient in having an axiom that states the existence
of both a left and right inverse that coïncide?



---

archive/issue_comments_237045.json:
```json
{
    "body": "H\u00e9, salut. J'essaye juste de d\u00e9meler la situation, et j'ai une boucle infinie magma->monoid->magma etc etc",
    "created_at": "2020-11-08T13:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237045",
    "user": "chapoton"
}
```

Hé, salut. J'essaye juste de démeler la situation, et j'ai une boucle infinie magma->monoid->magma etc etc



---

archive/issue_comments_237046.json:
```json
{
    "body": "Salut Fr\u00e9d\u00e9ric :-)\n\nAh I see; things like this indeed happen, though hopefully there is a way out.\nIf it can help, we could have a live chat about it, though not before Tuesday.\n\nAmiti\u00e9s,",
    "created_at": "2020-11-08T13:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237046",
    "user": "nthiery"
}
```

Salut Frédéric :-)

Ah I see; things like this indeed happen, though hopefully there is a way out.
If it can help, we could have a live chat about it, though not before Tuesday.

Amitiés,



---

archive/issue_comments_237047.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237047",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_237048.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237048",
    "user": "mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_237049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-23T18:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237049",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237050.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-24T07:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237050",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-27T06:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237051",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-07T08:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-07T10:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237053",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237054.json:
```json
{
    "body": "almost ready to go. I hope that somebody will accept to review this long-awaited ticket.",
    "created_at": "2022-09-07T10:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237054",
    "user": "chapoton"
}
```

almost ready to go. I hope that somebody will accept to review this long-awaited ticket.



---

archive/issue_comments_237055.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-07T12:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237055",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237056.json:
```json
{
    "body": "and the patchbot is now green ! comments welcome",
    "created_at": "2022-09-07T15:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237056",
    "user": "chapoton"
}
```

and the patchbot is now green ! comments welcome



---

archive/issue_comments_237057.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-09-07T15:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237057",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_237058.json:
```json
{
    "body": "\n```\n+        def inverse(self):\n+            \"\"\"\n+            Return the inverse of ``self``.\n+\n+            This an alias for inversion, defined in ``__invert__``.\n+\n```\n\n\"is\" is missing",
    "created_at": "2022-09-07T15:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237058",
    "user": "mkoeppe"
}
```


```
+        def inverse(self):
+            """
+            Return the inverse of ``self``.
+
+            This an alias for inversion, defined in ``__invert__``.
+
```

"is" is missing



---

archive/issue_comments_237059.json:
```json
{
    "body": "Do you want to address comment:4 and add some `automethod`?",
    "created_at": "2022-09-07T15:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237059",
    "user": "mkoeppe"
}
```

Do you want to address comment:4 and add some `automethod`?



---

archive/issue_comments_237060.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-07T16:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237060",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237061.json:
```json
{
    "body": "I am not so sure about this question about documentation. It is true that the doc inside `__invert__` will be hidden from view.",
    "created_at": "2022-09-07T16:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237061",
    "user": "chapoton"
}
```

I am not so sure about this question about documentation. It is true that the doc inside `__invert__` will be hidden from view.



---

archive/issue_comments_237062.json:
```json
{
    "body": "I don't think too many people are going to be looking at the documentation of `__invert__` or `inverse()` as that is generally pretty clear.\n\nThat being said, I am not really a fan of putting technical implementation details in public documentation:\n\n```diff\n-            This is an alias for inversion, defined in ``__invert__``.\n+            This is an alias for inversion, which can be invoked by ``~x``\n+            for an instance ``x``.\n-\n-            Element classes should implement ``__invert__`` only.\n```\n\nI would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.\n\nWhat about for additive monoids? Perhaps we need to add \"multiplicative\" to the documentation above.\n\nI am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?",
    "created_at": "2022-09-07T23:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237062",
    "user": "tscrim"
}
```

I don't think too many people are going to be looking at the documentation of `__invert__` or `inverse()` as that is generally pretty clear.

That being said, I am not really a fan of putting technical implementation details in public documentation:

```diff
-            This is an alias for inversion, defined in ``__invert__``.
+            This is an alias for inversion, which can be invoked by ``~x``
+            for an instance ``x``.
-
-            Element classes should implement ``__invert__`` only.
```

I would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.

What about for additive monoids? Perhaps we need to add "multiplicative" to the documentation above.

I am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?



---

archive/issue_comments_237063.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-08T07:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237063",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237064.json:
```json
{
    "body": "Replying to [comment:36 Travis Scrimshaw]:\n> I don't think too many people are going to be looking at the documentation of `__invert__` or `inverse()` as that is generally pretty clear.\n\nI agree on that point.\n \n> That being said, I am not really a fan of putting technical implementation details in public documentation:\n> {{{#!diff\n> -            This is an alias for inversion, defined in ``__invert__``.\n> +            This is an alias for inversion, which can be invoked by ``~x``\n> +            for an instance ``x``.\n> -\n> -            Element classes should implement ``__invert__`` only.\n> }}}\n> I would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.\n\nI have changed that according to your suggestion. Implementation detail is now a comment in the code.\n\n> What about for additive monoids? Perhaps we need to add \"multiplicative\" to the documentation above.\n\nI have no idea. I thought that there was another category for additive monoids ?\n\n> I am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?\n\nThis is indeed a delicate point. Having both that and the division defined using product by the inverse easily leads to infinite loops. It seems safer to break the possibility of this kind of loop.",
    "created_at": "2022-09-08T07:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237064",
    "user": "chapoton"
}
```

Replying to [comment:36 Travis Scrimshaw]:
> I don't think too many people are going to be looking at the documentation of `__invert__` or `inverse()` as that is generally pretty clear.

I agree on that point.
 
> That being said, I am not really a fan of putting technical implementation details in public documentation:
> {{{#!diff
> -            This is an alias for inversion, defined in ``__invert__``.
> +            This is an alias for inversion, which can be invoked by ``~x``
> +            for an instance ``x``.
> -
> -            Element classes should implement ``__invert__`` only.
> }}}
> I would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.

I have changed that according to your suggestion. Implementation detail is now a comment in the code.

> What about for additive monoids? Perhaps we need to add "multiplicative" to the documentation above.

I have no idea. I thought that there was another category for additive monoids ?

> I am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?

This is indeed a delicate point. Having both that and the division defined using product by the inverse easily leads to infinite loops. It seems safer to break the possibility of this kind of loop.



---

archive/issue_comments_237065.json:
```json
{
    "body": "Replying to [comment:38 Fr\u00e9d\u00e9ric Chapoton]:\n> Replying to [comment:36 Travis Scrimshaw]:\n> > That being said, I am not really a fan of putting technical implementation details in public documentation:\n> > {{{#!diff\n> > -            This is an alias for inversion, defined in ``__invert__``.\n> > +            This is an alias for inversion, which can be invoked by ``~x``\n> > +            for an instance ``x``.\n> > -\n> > -            Element classes should implement ``__invert__`` only.\n> > }}}\n> > I would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.\n> \n> I have changed that according to your suggestion. Implementation detail is now a comment in the code.\n\nThank you.\n\n> > What about for additive monoids? Perhaps we need to add \"multiplicative\" to the documentation above.\n> \n> I have no idea. I thought that there was another category for additive monoids ?\n\nThere is, but we try to keep the two somewhat consistent. There is also the join category, where \"inverse\" becomes slightly vague.\n\n> > I am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?\n> \n> This is indeed a delicate point. Having both that and the division defined using product by the inverse easily leads to infinite loops. It seems safer to break the possibility of this kind of loop.\n\nI would rather have the infinite loop (which there are protections against) and leave the choice of implementation to the developer. If it does go into an infinite loop, it is indicating that something needs to be implemented (unfortunately, I don't know a good mechanism for checking this). At the very least it is a backwards incompatible change.",
    "created_at": "2022-09-08T08:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237065",
    "user": "tscrim"
}
```

Replying to [comment:38 Frédéric Chapoton]:
> Replying to [comment:36 Travis Scrimshaw]:
> > That being said, I am not really a fan of putting technical implementation details in public documentation:
> > {{{#!diff
> > -            This is an alias for inversion, defined in ``__invert__``.
> > +            This is an alias for inversion, which can be invoked by ``~x``
> > +            for an instance ``x``.
> > -
> > -            Element classes should implement ``__invert__`` only.
> > }}}
> > I would probably put the last part as a code comment. However, in this case, because it is specifications for implementors, it could be okay. The change in the first part is to indicate how a more casual user can use this.
> 
> I have changed that according to your suggestion. Implementation detail is now a comment in the code.

Thank you.

> > What about for additive monoids? Perhaps we need to add "multiplicative" to the documentation above.
> 
> I have no idea. I thought that there was another category for additive monoids ?

There is, but we try to keep the two somewhat consistent. There is also the join category, where "inverse" becomes slightly vague.

> > I am not sure how I feel about removing the generic `1 / self` for inverse in `Element`. Is that implemented in one of the categories? Should we be worried about a slowdown with it no longer being Cython?
> 
> This is indeed a delicate point. Having both that and the division defined using product by the inverse easily leads to infinite loops. It seems safer to break the possibility of this kind of loop.

I would rather have the infinite loop (which there are protections against) and leave the choice of implementation to the developer. If it does go into an infinite loop, it is indicating that something needs to be implemented (unfortunately, I don't know a good mechanism for checking this). At the very least it is a backwards incompatible change.



---

archive/issue_comments_237066.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-08T09:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237066",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237067.json:
```json
{
    "body": "I see no way out other than removing the ``__invert__`` in element.pyx. It is not a cdef method there, by the way. I agree that this is rather backward-incompatible..",
    "created_at": "2022-09-08T09:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237067",
    "user": "chapoton"
}
```

I see no way out other than removing the ``__invert__`` in element.pyx. It is not a cdef method there, by the way. I agree that this is rather backward-incompatible..



---

archive/issue_comments_237068.json:
```json
{
    "body": "But basically you want to remove the `1 / self` default implementation to never have an infinite loop? In particular, if we had some sort of ``@`implement_this_or_that` type decorator, you would be fine with it? Or is there a technical issue with having it defined in the category?\n\nI am particularly worried about someone could have implemented an algebraic structure just through `_div_`, and there are things in Sage that use `~x` that are subsequently being called with this algebraic structure. I could imagine something like this for polynomials (without going to the fraction field).",
    "created_at": "2022-09-08T10:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237068",
    "user": "tscrim"
}
```

But basically you want to remove the `1 / self` default implementation to never have an infinite loop? In particular, if we had some sort of ``@`implement_this_or_that` type decorator, you would be fine with it? Or is there a technical issue with having it defined in the category?

I am particularly worried about someone could have implemented an algebraic structure just through `_div_`, and there are things in Sage that use `~x` that are subsequently being called with this algebraic structure. I could imagine something like this for polynomials (without going to the fraction field).



---

archive/issue_comments_237069.json:
```json
{
    "body": "here is an experimental branch with the default inverse re-activated, let us see what happens.\n----\nNew commits:",
    "created_at": "2022-09-08T11:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237069",
    "user": "chapoton"
}
```

here is an experimental branch with the default inverse re-activated, let us see what happens.
----
New commits:



---

archive/issue_comments_237070.json:
```json
{
    "body": "well, this seems to be almost green..",
    "created_at": "2022-09-08T19:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237070",
    "user": "chapoton"
}
```

well, this seems to be almost green..



---

archive/issue_comments_237071.json:
```json
{
    "body": "It seems like that is unrelated. Have you tested locally?",
    "created_at": "2022-09-09T01:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237071",
    "user": "tscrim"
}
```

It seems like that is unrelated. Have you tested locally?



---

archive/issue_comments_237072.json:
```json
{
    "body": "the failure is #33161 ; the tests in this file pass with other random seeds",
    "created_at": "2022-09-09T07:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237072",
    "user": "chapoton"
}
```

the failure is #33161 ; the tests in this file pass with other random seeds



---

archive/issue_comments_237073.json:
```json
{
    "body": "I am basically ready to flip the switch. The last thing I probably would like (although not fully convinced) is to have an alias `inverse = __invert__` in the classes that implemented an `inverse` in order to keep the documentation there visible.",
    "created_at": "2022-09-10T00:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237073",
    "user": "tscrim"
}
```

I am basically ready to flip the switch. The last thing I probably would like (although not fully convinced) is to have an alias `inverse = __invert__` in the classes that implemented an `inverse` in order to keep the documentation there visible.



---

archive/issue_comments_237074.json:
```json
{
    "body": "But this would basically contradict the fact that there is a unique global alias that maps `inverse` to `__invert__` ?",
    "created_at": "2022-09-10T07:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237074",
    "user": "chapoton"
}
```

But this would basically contradict the fact that there is a unique global alias that maps `inverse` to `__invert__` ?



---

archive/issue_comments_237075.json:
```json
{
    "body": "It isn't an alias in the Python sense. However, I didn't think your proposal said there should be a unique such redirect.\n\nI don't see any advantages of trying to impose that (it isn't really enforceable either). I think if we are consistent about using `__invert__`, then we won't get a user saying \"I get to chose which one I want to do\" (not to mention generic division would not work). On the other hand, I don't think this documentation is generally useful though, and not having it would mean that there is a near 0% chance of confusion.",
    "created_at": "2022-09-10T07:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237075",
    "user": "tscrim"
}
```

It isn't an alias in the Python sense. However, I didn't think your proposal said there should be a unique such redirect.

I don't see any advantages of trying to impose that (it isn't really enforceable either). I think if we are consistent about using `__invert__`, then we won't get a user saying "I get to chose which one I want to do" (not to mention generic division would not work). On the other hand, I don't think this documentation is generally useful though, and not having it would mean that there is a near 0% chance of confusion.



---

archive/issue_comments_237076.json:
```json
{
    "body": "Sorry, I am now confused and not sure what you would like me to change.",
    "created_at": "2022-09-10T08:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237076",
    "user": "chapoton"
}
```

Sorry, I am now confused and not sure what you would like me to change.



---

archive/issue_comments_237077.json:
```json
{
    "body": "For example, in `algebras/hecke_algebras/ariki_koike_algebra.py`, you are removing the `inverse` function. So it will no longer appear in the documentation and `x.inverse?` will be the generic documentation. I am think is adding a\n\n```python\ninverse = __invert__\n```\n\nalias there so the documentation won't change.\n\nAnyways, it sounds like you don't really like it and I wasn't convinced of how useful it would be, so we can move on.",
    "created_at": "2022-09-10T08:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237077",
    "user": "tscrim"
}
```

For example, in `algebras/hecke_algebras/ariki_koike_algebra.py`, you are removing the `inverse` function. So it will no longer appear in the documentation and `x.inverse?` will be the generic documentation. I am think is adding a

```python
inverse = __invert__
```

alias there so the documentation won't change.

Anyways, it sounds like you don't really like it and I wasn't convinced of how useful it would be, so we can move on.



---

archive/issue_comments_237078.json:
```json
{
    "body": "So, is this a positive review ?",
    "created_at": "2022-09-16T12:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237078",
    "user": "chapoton"
}
```

So, is this a positive review ?



---

archive/issue_comments_237079.json:
```json
{
    "body": "Yes.",
    "created_at": "2022-09-16T12:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237079",
    "user": "tscrim"
}
```

Yes.



---

archive/issue_comments_237080.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-16T12:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237080",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_237081.json:
```json
{
    "body": "After these changes, is ticket #17692 still relevant?",
    "created_at": "2022-09-17T16:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237081",
    "user": "mkoeppe"
}
```

After these changes, is ticket #17692 still relevant?



---

archive/issue_comments_237082.json:
```json
{
    "body": "#17692 is independent of these changes (and the main proposal has already been done somewhere else).\n\nThe issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change (other than it might be slightly more work to make such a change, but it is now at least applied uniformly, so it is less likely we miss something IMO).",
    "created_at": "2022-09-17T22:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237082",
    "user": "tscrim"
}
```

#17692 is independent of these changes (and the main proposal has already been done somewhere else).

The issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change (other than it might be slightly more work to make such a change, but it is now at least applied uniformly, so it is less likely we miss something IMO).



---

archive/issue_comments_237083.json:
```json
{
    "body": "Replying to [comment:55 Travis Scrimshaw]:\n> #17692 is independent of these changes (and the main proposal has already been done somewhere else).\n> \n> The issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change\n\nNo, the bitwise complement question is not the topic of #17692 (it is only mentioned in the very last comment)",
    "created_at": "2022-09-18T01:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237083",
    "user": "mkoeppe"
}
```

Replying to [comment:55 Travis Scrimshaw]:
> #17692 is independent of these changes (and the main proposal has already been done somewhere else).
> 
> The issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change

No, the bitwise complement question is not the topic of #17692 (it is only mentioned in the very last comment)



---

archive/issue_comments_237084.json:
```json
{
    "body": "Replying to [comment:56 Matthias K\u00f6ppe]:\n> Replying to [comment:55 Travis Scrimshaw]:\n> > #17692 is independent of these changes (and the main proposal has already been done somewhere else).\n> > \n> > The issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change\n> \n> No, the bitwise complement question is not the topic of #17692 (it is only mentioned in the very last comment)\n\nEither way, #17692 is independent of this ticket. (It probably should be closed (again, the main change has been implemented elsewhere) or converted into a bitwise issue ticket.)",
    "created_at": "2022-09-18T01:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237084",
    "user": "tscrim"
}
```

Replying to [comment:56 Matthias Köppe]:
> Replying to [comment:55 Travis Scrimshaw]:
> > #17692 is independent of these changes (and the main proposal has already been done somewhere else).
> > 
> > The issue of whether `__invert__` and the (very embedded) `~x` should not be bitwise inverse (compare `~int(5)` to `~Integer(5)`) is not impacted by this change
> 
> No, the bitwise complement question is not the topic of #17692 (it is only mentioned in the very last comment)

Either way, #17692 is independent of this ticket. (It probably should be closed (again, the main change has been implemented elsewhere) or converted into a bitwise issue ticket.)



---

archive/issue_comments_237085.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-20T20:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17728#issuecomment-237085",
    "user": "vbraun"
}
```

Resolution: fixed
