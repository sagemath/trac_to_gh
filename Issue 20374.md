# Issue 20374: More functionalities on mq.SBox

Issue created by migration from Trac.

Original creator: ruhm

Original creation time: 2016-05-15 11:34:15

CC:  malb




---

Comment by ruhm created at 2016-07-12 18:49:03

Changing type from PLEASE CHANGE to enhancement.


---

Comment by ruhm created at 2016-07-12 18:49:03

Changing component from PLEASE CHANGE to cryptography.


---

Comment by ylchapuy created at 2016-07-12 20:00:49

Hi,\\
You might want to use more pythonic syntax e.g.



```python
def substitute(x):
    mask = (1 << b) - 1
    xl = (x >> b) & mask
    xr = x & mask
    for sb in sboxes:
        xl, xr = sb(xl) ^ xr, xl
    return (xl << b) | xr
```


also in my opinion `is_bent` should return `False` instead of raising `ValueError`.
----
New commits:


---

Comment by git created at 2016-07-13 09:12:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ruhm created at 2016-07-13 09:16:05

Hi,

Thanks for looking at the code. I have applied your suggestion on both is_bent() and is_almost_bent(). Btw, can you review this ticket ? 

Replying to [comment:4 ylchapuy]:
> Hi,\\
> You might want to use more pythonic syntax e.g.
> 
> 
> {{{#!python
> def substitute(x):
>     mask = (1 << b) - 1
>     xl = (x >> b) & mask
>     xr = x & mask
>     for sb in sboxes:
>         xl, xr = sb(xl) ^ xr, xl
>     return (xl << b) | xr
> }}}
> 
> also in my opinion `is_bent` should return `False` instead of raising `ValueError`.
> ----
> New commits:
> ||[5ed03fa](https://git.sagemath.org/sage.git/commit?id=5ed03fa7ae556771adb834714b864d6c2c64c0bd)||`initial commit`||
> ||[96832f7](https://git.sagemath.org/sage.git/commit?id=96832f793fec97e01c56948c8f288753b5fe3c56)||`merge develop with t/20611/improved_sbox`||


---

Comment by ruhm created at 2016-07-13 09:16:37

Changing status from new to needs_review.


---

Comment by malb created at 2016-07-17 11:17:20

- You sometimes write "Return True" and sometimes write "Return ``True``"
- "a list/tuple of mq.SBox object" objects
- "if not isinstance(sboxes, (list, tuple)):" why hardcode types instead of trying to iterate over the input. That'd be more pythonic


---

Comment by malb created at 2016-07-17 11:17:30

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-07-18 12:56:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ruhm created at 2016-07-18 13:07:54

Changing status from needs_work to needs_review.


---

Comment by malb created at 2016-07-19 14:19:35

Looks good except for 

> You sometimes write "Return True" and sometimes write "Return `True`"

I'm happy to give this a positive review after this is fixed. Sorry for being nitpicky, but these things hardly get fixed afterwards.


---

Comment by ruhm created at 2016-07-19 14:23:10

Hi Martin,

Thanks for looking at this. I should have asked this before, but can you point out at which lines you see such issue ? This makes me a bit confuse before.

Thanks,

Replying to [comment:14 malb]:
> Looks good except for 
> 
> > You sometimes write "Return True" and sometimes write "Return `True`"
> 
> I'm happy to give this a positive review after this is fixed. Sorry for being nitpicky, but these things hardly get fixed afterwards.


---

Comment by malb created at 2016-07-19 15:14:52

Hi, sorry for not being explicit: in `is_plateaued` of `BooleanFunction` vs. `SBox`.


---

Comment by git created at 2016-07-19 16:47:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ruhm created at 2016-07-19 16:48:48

Done!

Replying to [comment:16 malb]:
> Hi, sorry for not being explicit: in `is_plateaued` of `BooleanFunction` vs. `SBox`.


---

Comment by malb created at 2016-07-19 20:05:49

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-19 23:13:46

Author name?


---

Comment by vbraun created at 2016-07-19 23:13:46

Changing status from positive_review to needs_work.


---

Comment by ruhm created at 2016-07-19 23:20:14

Replying to [comment:20 vbraun]:
> Author name?

Its already filled now


---

Comment by ruhm created at 2016-07-19 23:24:32

Changing status from needs_work to needs_review.


---

Comment by malb created at 2016-07-20 08:53:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-21 16:51:54

Resolution: fixed
