# Issue 12466: Work-around GCC bug in PARI package

Issue created by migration from https://trac.sagemath.org/ticket/12638

Original creator: jdemeyer

Original creation time: 2012-03-07 09:31:26

Assignee: tbd

GCC 4.6.3 miscompiles `src/language/init.c` on OS X 10.4 PPC (32-bit), because of a problem with pointer arithmetic in `stack_base()` called in `pari_init_functions()`.

This is upstream bug [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=49330](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=49330)

There is an easy work-around by reordering some code.

*spkg*: []


---

Comment by jdemeyer created at 2012-03-07 10:04:32

Built successfully with `SAGE_CHECK=yes` using gcc-4.6.3 on OS X 10.4 PPC, a system where it failed before.


---

Comment by jdemeyer created at 2012-03-07 10:04:32

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-03-13 07:34:15

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-03-13 14:37:21

Changing status from needs_work to needs_review.


---

Comment by johanbosman created at 2012-03-20 13:14:58

There's another Pari issue: #12636.  Should that be mentioned in this ticket also?


---

Comment by jdemeyer created at 2012-03-20 13:23:25

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-03-20 13:28:08

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2012-03-20 13:53:12

Diff for the PARI spkg (p0->p3). For review only


---

Attachment

All test pass, including the ones in the pari spkg.  I haven't checked it on an OS X 10.4 PPC though, but I trust that you did that yourself.  The code looks okay, and the fix resolves the issues 2 and 3.


---

Comment by johanbosman created at 2012-03-30 23:08:25

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-31 20:43:15

Thank you for the review.


---

Comment by jdemeyer created at 2012-04-02 15:23:39

Resolution: fixed
