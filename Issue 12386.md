# Issue 12386: Numerical noise in hmm.pyx

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2012-02-22 04:56:50

Assignee: mvngu

CC:  mhampton jdemeyer

Keywords: hidden markov model

I found some more numerical noise in this doctest in the hidden markov model stuff:

```
File "/home/vbraun/tesla/sage-5.0.beta4/devel/sage/sage/stats/hmm/hmm.pyx", line 281:
    sage: m
Expected:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.0134345614...e-70               1.0]
    [              1.0 3.99743527136e-19]
    Emission matrix:
    [7.3802215662...e-54               1.0]
    [              1.0  3.9974352626e-19]
    Initial probabilities: [0.0000, 1.0000]
Got:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.01343456147e-70               1.0]
    [              1.0 3.99743527135e-19]
    Emission matrix:
    [7.38022156625e-54               1.0]
    [              1.0  3.9974352626e-19]
    Initial probabilities: [0.0000, 1.0000]
```



---

Comment by vbraun created at 2012-02-22 05:04:20

Initial patch


---

Attachment


---

Comment by vbraun created at 2012-02-22 05:05:56

Changing status from new to needs_review.


---

Comment by vbraun created at 2012-02-22 05:05:56

Changing priority from major to blocker.


---

Comment by jdemeyer created at 2012-02-22 08:58:18

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-22 08:58:18

Could you state on which system this happens?  The patch obviously looks good.


---

Comment by vbraun created at 2012-02-22 19:26:08

This is on a i7-920, 12GB ram, Tesla GPGPU card (of course not used in the doctest), running Ubuntu 11.10 i386(!). Taking the less beaten path with a 32-bit OS (don't ask).


---

Comment by jdemeyer created at 2012-02-23 10:18:00

Replying to [comment:3 vbraun]:
> Tesla GPGPU card (of course not used in the doctest)
would be Ã¼ber-cool though...

> running Ubuntu 11.10 i386(!). Taking the less beaten path with a 32-bit OS (don't ask).
Interesting that I haven't seen this failure on Skynet cicero (Fedora 15 i386, Pentium 4).


---

Comment by vbraun created at 2012-02-23 17:49:15

Cicero is running Fedora 16, for the record.

The i7 has more SSE ops, if the compiler used those instead of FPU then that would easily explain the slightly different precision. GCC on tesla is 4.6.1.


---

Comment by jdemeyer created at 2012-02-27 11:23:32

Resolution: fixed
