# Issue 15626: 32-bit hash fix for Cython update

Issue created by migration from https://trac.sagemath.org/ticket/15863

Original creator: vbraun

Original creation time: 2014-02-26 10:36:17

CC:  ohanar jpflori

This fixes a hash failure due to the Cython upgrade #15755


---

Comment by vbraun created at 2014-02-26 10:46:31

Changing priority from major to blocker.


---

Comment by vbraun created at 2014-02-26 10:46:31

Changing status from new to needs_review.


---

Comment by vbraun created at 2014-02-26 10:46:31

New commits:


---

Comment by jdemeyer created at 2014-03-01 10:28:56

As you sure 32-bit doctest pass?


---

Comment by jdemeyer created at 2014-03-01 10:35:12

Normally, this should be fixed by #15755, hashes should never return a Python `long`. Proposal: close as invalid.


---

Comment by vbraun created at 2014-03-01 11:15:56

This is caused by #15755. Also, there is nothing wrong with returning `long` for hashes on obsolete platforms imho. In this particular case Polybori returns the hash as `size_t`.


---

Comment by jdemeyer created at 2014-03-01 11:58:22

Replying to [comment:8 vbraun]:
> This is caused by #15755.
Can you confirm then that doctests do not pass with #15755 and they do pass with #15863?

> Also, there is nothing wrong with returning `long` for hashes on obsolete platforms imho.
Who says it only happens on "obsolete" platforms?


---

Comment by vbraun created at 2014-03-01 13:28:55

Replying to [comment:10 jdemeyer]:
> Can you confirm then that doctests do not pass with #15755 and they do pass with #15863?

Yes.

> Who says it only happens on "obsolete" platforms?

It works on LP64. Nobody in their right mind is going to use 32-bit or Windows 64 for scientific computations nowadays.


---

Comment by jdemeyer created at 2014-03-01 16:55:46

Replying to [comment:11 vbraun]:
> It works on LP64.
Why are you sure?


---

Comment by vbraun created at 2014-03-01 18:58:31

I've already tested #15755 and this ticket on the buildbot. On LP64 both `size_t` and C `long` have the same size, so it obviously works. With #15755 and 32-bit `size_t` now converts to a Python (arbitrary precision) long, but that is fine too as long as the doctest is fixed.


---

Comment by vbraun created at 2014-03-01 22:51:35

I didn't pull the added commits to #15755, trying again...


---

Comment by vbraun created at 2014-03-02 16:16:36

Resolution: invalid


---

Comment by vbraun created at 2014-03-02 16:16:36

Ok, works. Sorry for the noise...
