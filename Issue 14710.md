# Issue 14710: Stuffle algebra

Issue created by migration from https://trac.sagemath.org/ticket/14914

Original creator: deneufchatel

Original creation time: 2013-07-21 13:55:41

Assignee: Matthieu Deneufch√¢tel

The stuffle (or quasi shuffle) algebra with counit and coproduct.


---

Attachment

here is a first review patch, cleaning up and making sure that all tests pass

(check using sage -bt stuffle_algebra.py)

some somments:

TAB characters are forbidden in python, you should use 4 spaces. More generally one should avoid whitespaces at the end of the lines (trailing whitespaces) (check your text editor configuration)

the examples section should look like that:

```
EXAMPLES::

    sage: 2+2
    4
```

namely, with a shift of 4 spaces

If you want to work further on this ticket now, you should rather use a third patch on top of the two existing ones.


---

Comment by tscrim created at 2013-08-03 11:25:03

Hey Matthieu,

Is this patch ready for review (i.e. does it do everything you want it to)?

Best,

Travis


---

Comment by deneufchatel created at 2013-08-10 14:45:52

Changing status from new to needs_review.


---

Attachment


---

Comment by chapoton created at 2015-02-18 09:12:02

Changing keywords from "" to "stuffle quasi shuffle".


---

Comment by chapoton created at 2015-02-18 09:12:02

turned into a git branch
----
New commits:


---

Attachment


---

Comment by vdelecroix created at 2015-11-28 14:59:52

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-11-28 14:59:52

The latex command `\stuffle` is not interpreted in the reference manual.

The `(see above)` is not appropriate. In this case it makes reference to another function. And indeed, in the reference manual, the class appears first. You can use the syntax `:func:`the_name_of_my_function`` to refer to a function. But in that case I would actually move the definition from the function to the class (since the entry point for the users is the class).

The first line of `stuffle` is `W = Words(indexed_letters(40, names))`. Why the hardcoded 40? Whatever number you put it will fail for some input! What you actually want to do is to work over the infinite alphabet `a1, a2, ...`. You can find a draft of the kind of set you want in the attached file [indexed_alphabet.py](http://trac.sagemath.org/attachment/ticket/14914/indexed_alphabet.py). With it you have

```
sage: A = IndexedAlphabet('a', 0, Infinity)
sage: A
Indexed alphabet {a0, a1, a2...}
sage: A[19]
'a19'
sage: A.cardinality()
+Infinity
sage: W = Words(A)
sage: W(['a0','a1','a19'])
word: a0,a1,a19
```

Once the above integrated, there is no need for an argument `names` in the function stuffle.

To test emptyness of a word you can do faster

```
sage: w = Word()
sage: if not w: print "I am empty"
I am empty
```

