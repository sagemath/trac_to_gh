# Issue 29527: Symbolic Expression: coefficient doesn't do collect before execute and returns incorrect data

Issue created by migration from https://trac.sagemath.org/ticket/29764

Original creator: @petRUShka

Original creation time: 2020-05-30 14:33:52

Keywords: coefficient, collect, symbolic ring

Lets consider following code


```
t, u = var('t,u')
f = u^2 + (t^3 + t^2 + 1)*u - t^2 - t
f = f.subs(u=u -1/2*(t^3 + t^2 + 1))
```


and lets try to get coefficient near `u` which should be zero after substitution:


```
f.coefficient(u, 1)
# => t^3 + t^2 + 1
```


There is no reason why it should be the return of `coefficient`.

Whereas if you `collect` before call `coefficient` it works as expected:


```
f.collect(u).coefficient(u, 1)
# => 0
```



---

Comment by @DaveWitteMorris created at 2020-05-30 18:54:38

One sentence in the docstring for `f.coefficient` says:

```
Sometimes it may be necessary to expand or factor first, since this
is not done automatically.
```

Therefore, the function seems to be behaving as described, so I think this is enhancement request, rather than a bug.


---

Comment by @DaveWitteMorris created at 2020-05-30 18:54:38

Changing type from defect to enhancement.


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.


---

Comment by @DaveWitteMorris created at 2022-06-22 01:31:31

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2022-06-22 01:31:31

Duplicate of #20824.
