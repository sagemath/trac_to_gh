# Issue 32803: Update matplotlib to 3.5

archive/issues_032803.json:
```json
{
    "body": "CC:  @dimpase @kiwifb @antonio-rojas @tornaria\n\nPrevious update: #31580\n\nIssue created by migration from https://trac.sagemath.org/ticket/33040\n\n",
    "closed_at": "2021-12-28T21:15:38Z",
    "created_at": "2021-12-17T16:56:49Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Update matplotlib to 3.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32803",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @kiwifb @antonio-rojas @tornaria

Previous update: #31580

Issue created by migration from https://trac.sagemath.org/ticket/33040





---

archive/issue_comments_467182.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467182",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_467183.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467183",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_467184.json:
```json
{
    "body": "According to the gentoo ebuild for 3.5.1 there should be another new runtime dependency https://pypi.org/project/fonttools/ although it may work without it for all I know.",
    "created_at": "2021-12-18T03:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467184",
    "user": "https://github.com/kiwifb"
}
```

According to the gentoo ebuild for 3.5.1 there should be another new runtime dependency https://pypi.org/project/fonttools/ although it may work without it for all I know.



---

archive/issue_comments_467185.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-18T20:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467186.json:
```json
{
    "body": "Looks good to me, and it solves the issue with deprecated distutils and python 3.10.",
    "created_at": "2021-12-19T21:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467186",
    "user": "https://github.com/tornaria"
}
```

Looks good to me, and it solves the issue with deprecated distutils and python 3.10.



---

archive/issue_comments_467187.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-12-19T22:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467187",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_467188.json:
```json
{
    "body": "My changes to qhull in #31580 need to be merged here.",
    "created_at": "2021-12-20T01:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467188",
    "user": "https://github.com/kiwifb"
}
```

My changes to qhull in #31580 need to be merged here.



---

archive/issue_comments_467189.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-20T03:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467190.json:
```json
{
    "body": "LGTM",
    "created_at": "2021-12-20T20:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467190",
    "user": "https://github.com/kiwifb"
}
```

LGTM



---

archive/issue_comments_467191.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-20T20:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467191",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_467192.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-12-20T20:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467192",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_467193.json:
```json
{
    "body": "Just to tell that I've tested the update on a few notebooks involving various matplotlib plots, either via Sage graphics or via direct use of matplotlib. Everything is OK. Thanks for the update!",
    "created_at": "2021-12-21T16:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467193",
    "user": "https://github.com/egourgoulhon"
}
```

Just to tell that I've tested the update on a few notebooks involving various matplotlib plots, either via Sage graphics or via direct use of matplotlib. Everything is OK. Thanks for the update!



---

archive/issue_comments_467194.json:
```json
{
    "body": "Thanks for testing!",
    "created_at": "2021-12-21T16:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467194",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for testing!



---

archive/issue_events_087305.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-28T21:15:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32803#event-87305"
}
```



---

archive/issue_comments_467195.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-28T21:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467195",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_467196.json:
```json
{
    "body": "New warning after this upgrade (or possibly that to\u00a03.4?):\n\n```\nsage: list_plot([0], marker='x')\n/home/marc/co/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/plot/point.py:288: UserWarning: You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.\n  subplot.scatter(self.xdata, self.ydata, s=s, c=c, alpha=a, zorder=z,\n```",
    "created_at": "2022-01-13T10:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32803#issuecomment-467196",
    "user": "https://github.com/mezzarobba"
}
```

New warning after this upgrade (or possibly that toÂ 3.4?):

```
sage: list_plot([0], marker='x')
/home/marc/co/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/plot/point.py:288: UserWarning: You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.
  subplot.scatter(self.xdata, self.ydata, s=s, c=c, alpha=a, zorder=z,
```
