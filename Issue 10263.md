# Issue 10263: Doctest for r.chdir() should use realpath

archive/issues_010263.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  mpatel\n\nThis breaks when `/tmp` is a symbolic link:\n\n```\n        EXAMPLES::\n\n            sage: import tempfile\n            sage: tmpdir = tempfile.mkdtemp()\n            sage: r.chdir(tmpdir)\n\n        On Linux, we could use ``tmpdir == sageobj(r.getwd())``\n        to test this, but Mac prepends ``/private/`` to such\n        directories, so we check that the directory name string\n        is in the working directory string instead::\n\n            sage: tmpdir in sageobj(r.getwd())\n            True\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10264\n\n",
    "created_at": "2010-11-14T15:31:55Z",
    "labels": [
        "doctest coverage",
        "critical",
        "bug"
    ],
    "title": "Doctest for r.chdir() should use realpath",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10263",
    "user": "jdemeyer"
}
```
Assignee: mvngu

CC:  mpatel

This breaks when `/tmp` is a symbolic link:

```
        EXAMPLES::

            sage: import tempfile
            sage: tmpdir = tempfile.mkdtemp()
            sage: r.chdir(tmpdir)

        On Linux, we could use ``tmpdir == sageobj(r.getwd())``
        to test this, but Mac prepends ``/private/`` to such
        directories, so we check that the directory name string
        is in the working directory string instead::

            sage: tmpdir in sageobj(r.getwd())
            True
```


Issue created by migration from https://trac.sagemath.org/ticket/10264





---

archive/issue_comments_104745.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-11-14T15:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104745",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_104746.json:
```json
{
    "body": "Tested on Linux with\n\n```\n$ sudo ln -s /tmp /special\n$ env TMPDIR=/special sage -t sage/interfaces/r.py\n```\n\n\nTested on OS X 10.4 (where `/tmp` is a symlink to `/private/tmp`) with\n\n```\n$ sage -t sage/interfaces/r.py\n```\n",
    "created_at": "2010-11-14T15:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104746",
    "user": "jdemeyer"
}
```

Tested on Linux with

```
$ sudo ln -s /tmp /special
$ env TMPDIR=/special sage -t sage/interfaces/r.py
```


Tested on OS X 10.4 (where `/tmp` is a symlink to `/private/tmp`) with

```
$ sage -t sage/interfaces/r.py
```




---

archive/issue_comments_104747.json:
```json
{
    "body": "Attachment",
    "created_at": "2010-11-14T15:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104747",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_104748.json:
```json
{
    "body": "Ticket #9970 is a duplicate, I think.",
    "created_at": "2010-11-15T09:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104748",
    "user": "mpatel"
}
```

Ticket #9970 is a duplicate, I think.



---

archive/issue_comments_104749.json:
```json
{
    "body": "Replying to [comment:3 mpatel]:\n> Ticket #9970 is a duplicate, I think.\n\nOr a different problem with the same doctest.",
    "created_at": "2010-11-15T09:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104749",
    "user": "mpatel"
}
```

Replying to [comment:3 mpatel]:
> Ticket #9970 is a duplicate, I think.

Or a different problem with the same doctest.



---

archive/issue_comments_104750.json:
```json
{
    "body": "Mitesh, can you review this?",
    "created_at": "2010-11-16T18:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104750",
    "user": "jdemeyer"
}
```

Mitesh, can you review this?



---

archive/issue_comments_104751.json:
```json
{
    "body": "The patch looks good.  I tested it successfully on bsd.math (OS X 10.6), sage.math (Ubuntu 8.04.4 LTS), and fulvia.skynet (SunOS 5.10) with `TMPDIR` unset, set to a path with no symbolic links, and set to a path with a link.",
    "created_at": "2010-11-17T07:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104751",
    "user": "mpatel"
}
```

The patch looks good.  I tested it successfully on bsd.math (OS X 10.6), sage.math (Ubuntu 8.04.4 LTS), and fulvia.skynet (SunOS 5.10) with `TMPDIR` unset, set to a path with no symbolic links, and set to a path with a link.



---

archive/issue_comments_104752.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-11-17T07:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104752",
    "user": "mpatel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_104753.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-11-17T08:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10263#issuecomment-104753",
    "user": "jdemeyer"
}
```

Resolution: fixed
