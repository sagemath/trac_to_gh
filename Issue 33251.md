# Issue 33251: Error building Sage. -- Package failed to build.

archive/issues_033251.json:
```json
{
    "body": "CC:  @slel\n\nHello!\nI have encountered an error while building Sage. HEre is  my OS info:\nDebian testing (bookworm)\nSage-9.6.beta4\npackage sagemath_doc_html-none\nI ran make a few times and the package continually failed to build. I expected this to build, but now I can not run the sage command. Sage is broken. I m not sure what happened here but please let me know what I can do next. I have attached the log files for you and a snippet of the last few lines of my terminal.\nsagemath_doc_html-none] ImportError: /home/linethan0322/sage-9.5.rc4/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/matrix/matrix_mod2_dense.cpython-39-x86_64-linux-gnu.so: file too short\n[sagemath_doc_html-none] Error: './sage --docbuild --all-documents' failed\n[sagemath_doc_html-none] make[5]: *** [Makefile:33: doc-inventory-reference] Error 1\nmake[4]: *** [Makefile:2900: sagemath_doc_html-SAGE_DOCS-no-deps] Error 2\nmake[3]: *** [Makefile:2900: /home/linethan0322/sage-9.5.rc4/local/var/lib/sage/installed/sagemath_doc_html-none] Error 2\nmake[2]: *** [Makefile:2461: all-start] Error 2\n\nreal    2m34.616s\nuser    1m18.953s\nsys     0m37.263s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all-start'):\n\n* package:         sagemath_doc_html-none\n  last build time: Mar 9 12:40\n  log file:        /home/linethan0322/sage-9.5.rc4/logs/pkgs/sagemath_doc_html-none.log\n\nIssue created by migration from https://trac.sagemath.org/ticket/33488\n\n",
    "created_at": "2022-03-09T18:04:52Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Error building Sage. -- Package failed to build.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33251",
    "user": "https://github.com/WindowsSystemAdmin"
}
```
CC:  @slel

Hello!
I have encountered an error while building Sage. HEre is  my OS info:
Debian testing (bookworm)
Sage-9.6.beta4
package sagemath_doc_html-none
I ran make a few times and the package continually failed to build. I expected this to build, but now I can not run the sage command. Sage is broken. I m not sure what happened here but please let me know what I can do next. I have attached the log files for you and a snippet of the last few lines of my terminal.
sagemath_doc_html-none] ImportError: /home/linethan0322/sage-9.5.rc4/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/matrix/matrix_mod2_dense.cpython-39-x86_64-linux-gnu.so: file too short
[sagemath_doc_html-none] Error: './sage --docbuild --all-documents' failed
[sagemath_doc_html-none] make[5]: *** [Makefile:33: doc-inventory-reference] Error 1
make[4]: *** [Makefile:2900: sagemath_doc_html-SAGE_DOCS-no-deps] Error 2
make[3]: *** [Makefile:2900: /home/linethan0322/sage-9.5.rc4/local/var/lib/sage/installed/sagemath_doc_html-none] Error 2
make[2]: *** [Makefile:2461: all-start] Error 2

real    2m34.616s
user    1m18.953s
sys     0m37.263s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all-start'):

* package:         sagemath_doc_html-none
  last build time: Mar 9 12:40
  log file:        /home/linethan0322/sage-9.5.rc4/logs/pkgs/sagemath_doc_html-none.log

Issue created by migration from https://trac.sagemath.org/ticket/33488





---

archive/issue_comments_472863.json:
```json
{
    "body": "Log file of the package sagemath_html-none",
    "created_at": "2022-03-09T18:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472863",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

Log file of the package sagemath_html-none



---

archive/issue_comments_472864.json:
```json
{
    "body": "Attachment [config.log](tarball://root/attachments/some-uuid/ticket33488/config.log) by @WindowsSystemAdmin created at 2022-03-09 18:06:18\n\nMy config log",
    "created_at": "2022-03-09T18:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472864",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

Attachment [config.log](tarball://root/attachments/some-uuid/ticket33488/config.log) by @WindowsSystemAdmin created at 2022-03-09 18:06:18

My config log



---

archive/issue_comments_472865.json:
```json
{
    "body": "Changing keywords from \"\" to \"bug, development, make\".",
    "created_at": "2022-03-09T18:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472865",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

Changing keywords from "" to "bug, development, make".



---

archive/issue_comments_472866.json:
```json
{
    "body": "Changing keywords from \"bug, development, make\" to \"bug, sagemath, html, broken, make\".",
    "created_at": "2022-03-09T20:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472866",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

Changing keywords from "bug, development, make" to "bug, sagemath, html, broken, make".



---

archive/issue_comments_472867.json:
```json
{
    "body": "Changing keywords from \"bug, sagemath, html, broken, make\" to \"bug, sagemath, docs, broken, make, package\".",
    "created_at": "2022-03-09T20:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472867",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

Changing keywords from "bug, sagemath, html, broken, make" to "bug, sagemath, docs, broken, make, package".



---

archive/issue_comments_472868.json:
```json
{
    "body": "Errors building `sagemath_doc_html` have been frequent recently.\n\nOn Linux and macOS, it seems this usually solves it:\n\n```\n$ make -s V=0 doc-clean doc-uninstall && make -s V=0\n```\n\n\nFailing that, this has also worked for some:\n\n```\n$ make -s V=0 distclean && make -s V=0\n```\n\n\nOn Cygwin, none of these helped for me.",
    "created_at": "2022-03-10T04:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472868",
    "user": "https://github.com/slel"
}
```

Errors building `sagemath_doc_html` have been frequent recently.

On Linux and macOS, it seems this usually solves it:

```
$ make -s V=0 doc-clean doc-uninstall && make -s V=0
```


Failing that, this has also worked for some:

```
$ make -s V=0 distclean && make -s V=0
```


On Cygwin, none of these helped for me.



---

archive/issue_comments_472869.json:
```json
{
    "body": "The above didn't work for me either.. I'm on a Debian machine",
    "created_at": "2022-03-10T17:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472869",
    "user": "https://github.com/WindowsSystemAdmin"
}
```

The above didn't work for me either.. I'm on a Debian machine



---

archive/issue_comments_472870.json:
```json
{
    "body": "Let's close it as outdated",
    "created_at": "2022-07-09T19:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472870",
    "user": "https://github.com/mkoeppe"
}
```

Let's close it as outdated



---

archive/issue_comments_472871.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-09T19:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472871",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_472872.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-16T11:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472872",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_472873.json:
```json
{
    "body": "I agree. The issue is not clear.",
    "created_at": "2022-07-16T11:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472873",
    "user": "https://github.com/kwankyu"
}
```

I agree. The issue is not clear.



---

archive/issue_comments_472874.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-08-02T06:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33251#issuecomment-472874",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
