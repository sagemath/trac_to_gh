# Issue 22502: Background image for .app.dmg disappears under Mac OS Sierra

Issue created by migration from Trac.

Original creator: mgoerner

Original creation time: 2017-04-01 16:39:48

CC:  kcrisman vbraun iandrus

Apple has changed the .DS_Store file format and now the background image of the Mac installer (see ticket 20119) disappeared.

I am working on a change that uses AppleScript to set the background image.


---

Comment by mgoerner created at 2017-04-02 01:02:00

Changing type from PLEASE CHANGE to defect.


---

Comment by mgoerner created at 2017-04-02 01:02:00

Set assignee to mgoerner.


---

Comment by git created at 2017-04-02 01:02:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mgoerner created at 2017-04-02 01:05:30

Changing status from new to needs_review.


---

Comment by kcrisman created at 2017-04-02 01:28:49

Backwards compatible, or Sierra only?  (Also, to test this would one need Sierra?)


---

Comment by mgoerner created at 2017-04-02 02:11:28

I expect this to be backwards and forwards compatible in the sense that building the .app.dmg should work on old and new Mac OS X versions and the resulting .app.dmg should show the correct background image in both old and new Mac OS X versions (whether it was build on old or new Mac OS X version). Here old means several versions ago.

It is, so to speak, strictly better than how I previously was generating the .DS_Store. The downside, however, is that building the .app.dmg takes a minute or so longer and there is an intermediate file of several Gb around.

I should say though that I have only tested this on Sierra so far.

But to backup my claim: it seems that AppleScript has supported setting the position of icons and the background image since ancient times. It also seems that there was a change to the .DS_Store format (concerning the background image) several Mac OS X versions back and a transition period over several years, Sierra finally phased out the old format.


---

Comment by mgoerner created at 2017-05-18 04:08:04

It has been seven weeks since I posted the change. Who can review this?


---

Comment by vbraun created at 2017-05-18 07:01:05

author name is missing


---

Comment by vbraun created at 2017-05-18 07:01:05

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-18 07:01:18

New commits:


---

Comment by kcrisman created at 2017-05-18 13:30:32

Does this conflict with #22821?  Edit: doesn't look like it, awesome.


---

Comment by vbraun created at 2017-05-19 22:10:28

Resolution: fixed


---

Comment by vbraun created at 2017-07-13 20:49:31

Fails on the buildbot: #23426
