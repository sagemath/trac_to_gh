# Issue 15310: Dimension of a projection of a polyhedron

archive/issues_015310.json:
```json
{
    "body": "Keywords: tikz, projection\n\nUsing the new tikz feature, (see http://trac.sagemath.org/ticket/12083) there is a problem when drawing polygons embedded in 3d. The error can be reproduced:\n\n```\n    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])\n    sage: P.ambient_dim()\n    3\n    sage: P.dim()\n    2\n    sage: PProj = P.projection()\n    sage: PProj.polyhedron_ambient_dim\n    3\n    sage: PProj.dimension\n    3\n```\n\nI believe PProj.dimension should be 2, not 3. Because of this, the tikz method misbehaves.\n\nIn this case, the function _init_from_3d(self, polyhedron) used for projection contains:\n\n```\n    assert polyhedron.ambient_dim() == 3, \"Requires polyhedron in 3d\"\n    self.dimension = 3\n    self._init_points(polyhedron)\n```\n\nI believe one should replace the second line by\n\n```\n    self.dimension = polyhedron.dim()\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/15547\n\n",
    "created_at": "2013-12-19T13:11:01Z",
    "labels": [
        "component: geometry",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Dimension of a projection of a polyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15310",
    "user": "https://github.com/jplab"
}
```
Keywords: tikz, projection

Using the new tikz feature, (see http://trac.sagemath.org/ticket/12083) there is a problem when drawing polygons embedded in 3d. The error can be reproduced:

```
    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])
    sage: P.ambient_dim()
    3
    sage: P.dim()
    2
    sage: PProj = P.projection()
    sage: PProj.polyhedron_ambient_dim
    3
    sage: PProj.dimension
    3
```

I believe PProj.dimension should be 2, not 3. Because of this, the tikz method misbehaves.

In this case, the function _init_from_3d(self, polyhedron) used for projection contains:

```
    assert polyhedron.ambient_dim() == 3, "Requires polyhedron in 3d"
    self.dimension = 3
    self._init_points(polyhedron)
```

I believe one should replace the second line by

```
    self.dimension = polyhedron.dim()
```

Issue created by migration from https://trac.sagemath.org/ticket/15547





---

archive/issue_events_045440.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15310#event-45440"
}
```



---

archive/issue_comments_196716.json:
```json
{
    "body": "I uploaded a patch.\n\nThe problem is now solved and I added two examples to test the bug on back edges of 3d polytopes and the drawing of 2d-polytopes embedded in 3d.\n\nOn this patch, the examples of projections have to be solved... (tests do not pass)\n\n---\nNew commits:",
    "created_at": "2014-06-03T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196716",
    "user": "https://github.com/jplab"
}
```

I uploaded a patch.

The problem is now solved and I added two examples to test the bug on back edges of 3d polytopes and the drawing of 2d-polytopes embedded in 3d.

On this patch, the examples of projections have to be solved... (tests do not pass)

---
New commits:



---

archive/issue_comments_196717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-03T20:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196718.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-03T20:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196718",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196719.json:
```json
{
    "body": "Humm, looks good enough to me, but you have not solved the issue raised in the description of the ticket. Maybe you could just change this description, and maybe also add a little more doc to `_init_from_2d` and `_init_from_3d` (explaining that the first one takes 2d-polygons in 2d as input and the second one only takes 3d-polytopes in 3d as input ; and also that no check is done that the dimension of the input is correct)",
    "created_at": "2014-06-06T08:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196719",
    "user": "https://github.com/fchapoton"
}
```

Humm, looks good enough to me, but you have not solved the issue raised in the description of the ticket. Maybe you could just change this description, and maybe also add a little more doc to `_init_from_2d` and `_init_from_3d` (explaining that the first one takes 2d-polygons in 2d as input and the second one only takes 3d-polytopes in 3d as input ; and also that no check is done that the dimension of the input is correct)



---

archive/issue_comments_196720.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-06T09:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196720",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196721.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196722.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-06T10:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196722",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_196723.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196724.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196725.json:
```json
{
    "body": "Looks good to me. Are you finished editing? ;-)",
    "created_at": "2014-06-06T11:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196725",
    "user": "https://github.com/vbraun"
}
```

Looks good to me. Are you finished editing? ;-)



---

archive/issue_comments_196726.json:
```json
{
    "body": "Yes! Finally!! :-)",
    "created_at": "2014-06-06T11:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196726",
    "user": "https://github.com/jplab"
}
```

Yes! Finally!! :-)



---

archive/issue_comments_196727.json:
```json
{
    "body": "\"Author\" trac field must be full name, for the record",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196727",
    "user": "https://github.com/vbraun"
}
```

"Author" trac field must be full name, for the record



---

archive/issue_comments_196728.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196728",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_045441.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-08T12:09:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15310#event-45441"
}
```



---

archive/issue_comments_196729.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-08T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15310#issuecomment-196729",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
