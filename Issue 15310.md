# Issue 15310: Dimension of a projection of a polyhedron

Issue created by migration from Trac.

Original creator: jipilab

Original creation time: 2013-12-19 13:11:01

Keywords: tikz, projection

Using the new tikz feature, (see http://trac.sagemath.org/ticket/12083) there is a problem when drawing polygons embedded in 3d. The error can be reproduced:


```
    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])
    sage: P.ambient_dim()
    3
    sage: P.dim()
    2
    sage: PProj = P.projection()
    sage: PProj.polyhedron_ambient_dim
    3
    sage: PProj.dimension
    3
```


I believe PProj.dimension should be 2, not 3. Because of this, the tikz method misbehaves.

In this case, the function _init_from_3d(self, polyhedron) used for projection contains:


```
    assert polyhedron.ambient_dim() == 3, "Requires polyhedron in 3d"
    self.dimension = 3
    self._init_points(polyhedron)
```


I believe one should replace the second line by


```
    self.dimension = polyhedron.dim()
```



---

Comment by jipilab created at 2014-06-03 19:59:29

I uploaded a patch.

The problem is now solved and I added two examples to test the bug on back edges of 3d polytopes and the drawing of 2d-polytopes embedded in 3d.

On this patch, the examples of projections have to be solved... (tests do not pass)
----
New commits:


---

Comment by git created at 2014-06-03 20:20:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2014-06-03 20:23:43

Changing status from new to needs_review.


---

Comment by jipilab created at 2014-06-03 20:39:50

Changing priority from minor to major.


---

Comment by chapoton created at 2014-06-06 08:25:49

Humm, looks good enough to me, but you have not solved the issue raised in the description of the ticket. Maybe you could just change this description, and maybe also add a little more doc to `_init_from_2d` and `_init_from_3d` (explaining that the first one takes 2d-polygons in 2d as input and the second one only takes 3d-polytopes in 3d as input ; and also that no check is done that the dimension of the input is correct)


---

Comment by jipilab created at 2014-06-06 09:34:43

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-06-06 10:12:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2014-06-06 10:14:55

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-06-06 10:18:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-06-06 10:20:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-06-06 11:03:35

Looks good to me. Are you finished editing? ;-)


---

Comment by jipilab created at 2014-06-06 11:27:08

Yes! Finally!! :-)


---

Comment by vbraun created at 2014-06-06 12:17:23

"Author" trac field must be full name, for the record


---

Comment by vbraun created at 2014-06-06 12:17:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-06-08 12:09:06

Resolution: fixed
