# Issue 21604: Don't install sage_setup by default; move more stuff from setup.py into sage_setup

archive/issues_021604.json:
```json
{
    "body": "CC:  @jdemeyer @mkoeppe @fchapoton @slel\n\nAs Jeroen described it in [ticket:21821:15], the `sage_setup` package is best conceived of as a collection of utilities extending the `setup.py`.  To that end, it doesn't make much sense to *install* it from the `setup.py`, at least not by default, since it shouldn't be used outside the context of running `setup.py` anyways.\n\nIf there is functionality in `sage_setup` that does make sense to run in other contexts, at runtime (`sage_setup.docbuild` might count) it should either be moved into the `sage` package itself, or a separate package that is installed, and that is explicitly designed to work outside the sage source tree.\n\nMeanwhile everything in `sage_setup` should be explicitly designed to *only* work in the sage source tree (for the most part this just means making assumptions about paths relative to the source tree).\n\nIssue created by migration from https://trac.sagemath.org/ticket/21841\n\n",
    "created_at": "2016-11-08T15:05:28Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Don't install sage_setup by default; move more stuff from setup.py into sage_setup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21604",
    "user": "https://github.com/embray"
}
```
CC:  @jdemeyer @mkoeppe @fchapoton @slel

As Jeroen described it in [ticket:21821:15], the `sage_setup` package is best conceived of as a collection of utilities extending the `setup.py`.  To that end, it doesn't make much sense to *install* it from the `setup.py`, at least not by default, since it shouldn't be used outside the context of running `setup.py` anyways.

If there is functionality in `sage_setup` that does make sense to run in other contexts, at runtime (`sage_setup.docbuild` might count) it should either be moved into the `sage` package itself, or a separate package that is installed, and that is explicitly designed to work outside the sage source tree.

Meanwhile everything in `sage_setup` should be explicitly designed to *only* work in the sage source tree (for the most part this just means making assumptions about paths relative to the source tree).

Issue created by migration from https://trac.sagemath.org/ticket/21841





---

archive/issue_comments_299574.json:
```json
{
    "body": "I see now that even `sage_setup.docbuild` doesn't make much sense outside the sage source tree, right now.  I think that may be a mistake though.  It would be nice if it could be used also for building docs in third-party packages that are not developed directly in the sage source tree.  There are currently many barriers to doing that, and the fact that the docbuilder makes assumptions about what docs it is building is part of the problem.  So maybe that issue should be addressed as well...",
    "created_at": "2016-11-08T15:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299574",
    "user": "https://github.com/embray"
}
```

I see now that even `sage_setup.docbuild` doesn't make much sense outside the sage source tree, right now.  I think that may be a mistake though.  It would be nice if it could be used also for building docs in third-party packages that are not developed directly in the sage source tree.  There are currently many barriers to doing that, and the fact that the docbuilder makes assumptions about what docs it is building is part of the problem.  So maybe that issue should be addressed as well...



---

archive/issue_comments_299575.json:
```json
{
    "body": "yes, see #6389",
    "created_at": "2016-11-10T07:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299575",
    "user": "https://github.com/mkoeppe"
}
```

yes, see #6389



---

archive/issue_comments_299576.json:
```json
{
    "body": "See #29702: Move all code from src/setup.py, src/fpickle_setup.py to sage_setup",
    "created_at": "2020-06-02T06:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299576",
    "user": "https://github.com/mkoeppe"
}
```

See #29702: Move all code from src/setup.py, src/fpickle_setup.py to sage_setup



---

archive/issue_comments_299577.json:
```json
{
    "body": "This has been done in #29702, so this ticket can be closed.",
    "created_at": "2020-08-17T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299577",
    "user": "https://github.com/mkoeppe"
}
```

This has been done in #29702, so this ticket can be closed.



---

archive/issue_comments_299578.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-17T03:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299578",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_events_057719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T03:09:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21604#event-57719"
}
```



---

archive/issue_comments_299579.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-19T22:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299579",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299580.json:
```json
{
    "body": "Ok.",
    "created_at": "2021-08-19T22:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299580",
    "user": "https://github.com/slel"
}
```

Ok.



---

archive/issue_comments_299581.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-08-26T02:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21604#issuecomment-299581",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_057720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21604",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21604#event-57720"
}
```
