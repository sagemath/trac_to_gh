# Issue 23419: better normalize for Gamma_h congruence subgroups

Issue created by migration from https://trac.sagemath.org/ticket/23656

Original creator: chapoton

Original creation time: 2017-08-20 08:25:49

CC:  mderickx cremona roed

namely, do not use an element and its inverse as generators


---

Comment by chapoton created at 2017-08-20 08:26:40

New commits:


---

Comment by chapoton created at 2017-08-20 08:26:40

Changing status from new to needs_review.


---

Comment by git created at 2017-08-21 18:26:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-22 13:24:28

bot is morally green, please review


---

Comment by chapoton created at 2017-08-25 07:28:47

green bot, please review (easy)


---

Comment by vdelecroix created at 2017-08-25 21:49:37

From an aesthetic point of view the following is ugly

```
sage: GammaH(11,[4])
Congruence Subgroup Gamma_H(11) with H generated by [3]
```

Could you change the 4 to the 3?


---

Comment by vdelecroix created at 2017-08-25 21:52:06

For `(~Zm(h)).lift()` you have `inverse_mod`

```
sage: 10.inverse_mod(7)
5
sage: (~Zmod(7)(10)).lift()
5
```



---

Comment by vdelecroix created at 2017-08-25 21:52:59

(though there is optimized code paths for small `Zm` but I don't think it matters here)


---

Comment by vdelecroix created at 2017-08-25 21:53:29

(you can basically get rid of `Zm` in your code)


---

Comment by vdelecroix created at 2017-08-25 21:53:56

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-08-26 06:26:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-26 06:26:30

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-08-26 06:26:30

Done, thanks for the review
----
New commits:


---

Comment by vdelecroix created at 2017-08-26 14:31:07


```
    final_H = []
    ...
    sorted(set(final_H))
```

Why don't you use a set from the begining `final_H = set()`?


---

Comment by git created at 2017-08-26 17:49:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-26 17:49:36

done, thanks


---

Comment by vdelecroix created at 2017-08-27 00:46:03

Changing status from needs_review to positive_review.


---

Comment by mderickx created at 2017-08-30 15:46:54

p.s. just in case people here are interested, there is now also a patch at #15341 that completely fixes the hashing problem and it now needs review


---

Comment by vbraun created at 2017-09-04 06:10:36

Resolution: fixed
