# Issue 10511: bug in symbolic sums

Issue created by migration from Trac.

Original creator: zimmerma

Original creation time: 2011-01-06 20:58:28

Assignee: burcin

CC:  jpflori

This was reported by Alexandre Casamayou:

```
sage: var('n')
n
sage: sum (n^3 * x^n, n, 0, infinity)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: unable to make sense of Maxima expression '(limit(x^?g3641*(x^4-3*x^3+3*x^2-x)*?g3641^3+x^?g3641*(-3*x^3+6*x^2-3*x)*?g3641^2+x^?g3641*(3*x^3-3*x)*?g3641+x^3+x^?g3641*(-x^3-4*x^2-x)+4*x^2+x,?g3641,inf))/(x^4-4*x^3+6*x^2-4*x+1)' in Sage
```



---

Comment by jpflori created at 2011-01-17 11:31:11

This seem to have been fixed between Sage 4.6.0 and Sage 4.6.1 (Maxima was updated meanwhile)

On 4.6.0 I've got a similar problem, but everything is fine on 4.6.1:


```
sage: var('n')
n
sage: sum (n^3 * x^n, n, 0, infinity)
-(x^3 + 4*x^2 + x)/(-x^4 + 4*x^3 - 6*x^2 + 4*x - 1)

```

If someone could confirm that, I guess the ticket can be closed.


---

Comment by aapitzsch created at 2011-01-17 12:05:25

I can confirm that, tested on 4.6.2.alpha0. So ticket can be closed.


---

Comment by zimmerma created at 2011-01-17 12:13:50

I would like a non-regression test to be added before the ticket is closed.

Paul


---

Comment by jpflori created at 2011-01-17 14:02:38

I just added a minimal patch to perform such a test.

Feel free to review it.


---

Comment by jpflori created at 2011-01-17 14:02:38

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2011-01-17 14:13:05

Tested on 4.6.2.alpha0.

```
File "/scratch/sage-4.6.1/devel/sage/sage/calculus/calculus.py", line 513:
    sage: sum (n^3 * x^n, n, 0, infinity)
Expected:
    -(x^3 + 4*x^2 + x)/(-x^4 + 4*x^3 - 6*x^2 + 4*x - 1)
Got:
    (x^3 + 4*x^2 + x)/(x^4 - 4*x^3 + 6*x^2 - 4*x + 1)
```



---

Comment by jpflori created at 2011-01-17 15:35:51

Replying to [comment:5 aapitzsch]:

> Tested on 4.6.2.alpha0. ` File "/scratch/sage-4.6.1/devel/sage/sage/calculus/calculus.py", line 513: sage: sum (n^3 * x^n, n, 0, infinity) Expected: -(x^3 + 4*x^2 + x)/(-x^4 + 4*x^3 - 6*x^2 + 4*x - 1) Got: (x^3 + 4*x^2 + x)/(x^4 - 4*x^3 + 6*x^2 - 4*x + 1) `^^ ^^

Oops, my patch is indeed wrong because I use a modified version of pynac.

I just checked with the standard spkg and got the same result as you.

So you got the correct expression and I'll attach a correct patch right now.


---

Comment by aapitzsch created at 2011-01-25 14:13:41


```
sage -t -long "devel/sage/sage/calculus/calculus.py"
******************************************************
Error: TAB character found.
```



---

Comment by aapitzsch created at 2011-01-25 14:13:41

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2011-01-25 14:45:28

Removed TAB character:


```
[jp`@`napoleon]% ./sage -t -long "devel/sage/sage/calculus/calculus.py"                             ~/boulot/sage/sage-current
sage -t -long "devel/sage/sage/calculus/calculus.py"        
         [18.6 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 18.6 seconds
```



---

Comment by jpflori created at 2011-01-25 14:48:25

Removed TAB character


---

Attachment


---

Comment by aapitzsch created at 2011-01-25 15:33:40

Changing status from needs_work to positive_review.


---

Comment by zimmerma created at 2011-01-25 21:12:50

thank you Jean-Pierre for the non-regression test.

Paul


---

Comment by jdemeyer created at 2011-01-27 13:15:12

Resolution: fixed
