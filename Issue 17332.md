# Issue 17332: Allow creating finite fields without a variable name

Issue created by migration from https://trac.sagemath.org/ticket/17569

Original creator: pbruin

Original creation time: 2014-12-30 14:28:59

CC:  ncohen vdelecroix jpflori dimpase bruno jdemeyer vbraun

It should be possible to use `FiniteField(p^n)` (or `FiniteField(p, n)`, see #17568) without a `name` argument to create the subfield of `FiniteField(p).algebraic_closure()` of cardinality `p^n`.  This would mean

```
GF(p, n) = GF(p^n) = GF(p).algebraic_closure().subfield(n)[0]
```


Discussion on sage-devel: https://groups.google.com/forum/#!topic/sage-devel/LlstHp950uo


---

Comment by roed created at 2016-01-22 06:14:11

Changing status from new to needs_review.


---

Comment by roed created at 2016-01-22 06:14:11

New commits:


---

Comment by jdemeyer created at 2016-01-22 08:26:24

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-01-22 08:26:24

Why did you remove the whole `# The following is a temporary solution...` block? Do you want `conway` and `prefix` to continue to be supported?

1. If no => deprecate it.
2. If yes => document it properly (i.e. move the comment you just removed to the actual docstring) and add some doctests like

```
sage: GF(3^10, conway=True, prefix='z') is GF(3^10)
sage: GF(3^10, conway=True, prefix='foo')
```



---

Comment by ncohen created at 2016-01-22 10:48:14

Hello !

I am affraid that I am not sufficiently skilled to review this branch, but I added a small commit at public/17569 which fixes a couple of typos and adds a link.

Nathann


---

Comment by roed created at 2016-01-22 17:29:02

Replying to [comment:4 ncohen]:
> Hello !
> 
> I am affraid that I am not sufficiently skilled to review this branch, but I added a small commit at public/17569 which fixes a couple of typos and adds a link.

Great.  I have to go teach now, but I'll take a look in the next day or so.
> 
> Nathann


---

Comment by git created at 2016-01-23 04:27:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2016-01-23 04:28:26

Changing status from needs_work to needs_review.


---

Comment by roed created at 2016-01-23 04:28:26

Okay, I've added some documentation about how the conway and prefix keywords are handled.


---

Comment by jdemeyer created at 2016-01-23 09:48:39

What's the point?
> This keyword argument is now silently ignored.

Sounds like it should be deprecated...


---

Comment by roed created at 2016-01-24 05:42:33

Currently, you can feed random keyword arguments to most (all?) of the finite field constructors and they'll have no effect.

```
sage: GF(27,'a',blah=True)
Finite Field in a of size 3^3
```

I don't see a problem in having `conway` behave in the same manner.  Why raise a deprecation warning when the code can just keep working without any change?


---

Comment by dimpase created at 2016-01-24 08:33:26

Replying to [comment:9 roed]:
> Currently, you can feed random keyword arguments to most (all?) of the finite field constructors and they'll have no effect.
> {{{
> sage: GF(27,'a',blah=True)
> Finite Field in a of size 3^3
> }}}
> I don't see a problem in having `conway` behave in the same manner.  Why raise a deprecation warning when the code can just keep working without any change?

You are effecting a change in the behaviour of the code. E.g.
`sage: GF(27,'a',conway=True)` currently throws an exception, and this is will no longer be the case. (Perhaps one can come up with a more interesting example, but that's beside the point).


---

Comment by ncohen created at 2016-01-24 08:46:59

Replying to [comment:9 roed]:
> Currently, you can feed random keyword arguments to most (all?) of the finite field constructors and they'll have no effect.

These useless-but-accepted arguments are a plague. There was a wealth of them in many 'plot' functions at a time: you tried to give a color to something, the argument 'color="red"' was accepted but nothing happened.

The most common way in which they are a pain are typos:


```
sage: GF(16,'x',checkirreducible=True)
Finite Field in x of size 2^4
```


The side-effect of not having a '_' in `check_irreducible` is that... It is ignored. And of course no exception to tell you.

About having an effect, here is one (thanks to `UniqueRepresentation`, I expect)


```
sage: GF(27,'a') == GF(27,'a')
True
sage: GF(27,'a',whatever=158) == GF(27,'a')
False
sage: GF(27,'a')(1) + GF(27,'a')(1)
2
sage: GF(27,'a',whatever=158)(1) + GF(27,'a')(1)
TypeError: unsupported operand parent(s) for '+': 'Finite Field in a of size 3^3' and 'Finite Field in a of size 3^3'
```


Nathann


---

Comment by jdemeyer created at 2016-01-24 09:28:39

Replying to [comment:9 roed]:
> Currently, you can feed random keyword arguments to most (all?) of the finite field constructors and they'll have no effect.

That's certainly a serious bug, but outside the scope of this ticket.

Still, I think that `conway` needs to be deprecated because it used to do something. Users should be made aware that the `conway` argument is no longer needed. Something like this should work:

```python
if 'conway' in kwds:
    del kwds['conway']
    from sage.misc.superseded import deprecation
    deprecation(17569, "the 'conway' argument is deprecated, pseudo-conway polynomials are now used by default if no variable name is given") 
```



---

Comment by jdemeyer created at 2016-01-25 11:29:02

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-02-16 23:36:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2016-02-16 23:57:48

Conflict due to #19941.  Thanks Nathann.


---

Comment by ncohen created at 2016-02-17 08:57:26

Oh true, the rebase. Right. Give me a second.


---

Comment by ncohen created at 2016-02-17 09:27:33

Helloooooo !

As expected, it was a nightmare `:-P`

You will find the rebased branch at `u/ncohen/17569`.

Nathann


---

Comment by roed created at 2016-02-17 16:47:34

Cool.  Thanks for the rebase.


---

Comment by roed created at 2016-02-17 16:47:34

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2016-02-17 16:53:56

It was just the worst amount of 'bad'. Too bad to be 'easy', and not sufficiently bad to force me to learn how to merge two branches which work on a renamed file, in general.

Well. Next time `:-P`


---

Comment by vbraun created at 2016-02-23 22:34:27

New commits:


---

Comment by vbraun created at 2016-02-23 22:34:27

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-02-24 08:39:30

Resolution: fixed


---

Comment by slelievre created at 2021-02-26 14:26:46

Using a pseudo-conway modulus by default means the function
can be very slow when using a random irreducible polynomial
as the modulus would make it very fast.

Changing the default is discussed at #31434 if anybody who
participated in this ticket wants to chime in.
