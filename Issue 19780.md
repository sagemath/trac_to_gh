# Issue 19780: implement cos and sin of power series

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2016-02-05 20:20:44

As we already have exp and log.


---

Comment by chapoton created at 2016-02-05 20:22:24

This has been extracted from #14878.
----
New commits:


---

Comment by chapoton created at 2016-02-05 20:22:24

Changing status from new to needs_review.


---

Comment by rws created at 2016-02-15 07:27:12

You're practically substituting into the series for `x`. This is fast for small order but may not be optimal for say 1000 coefficients.

You may be interested in general in a timing comparison. For Symengine there is a benchmark to compute `sin(x+x<sup>2)*cos(x+x</sup>2)` to order 1000 which needs 120ms using the Flint implementation on my machine. Your branch at the moment takes 2.1s which is not too bad.


---

Comment by rws created at 2016-02-15 07:35:52

Changing status from needs_review to positive_review.


---

Comment by rws created at 2016-02-15 07:35:52

Apart from the not optimal performance at higher order this looks good. Please cc me with any further tickets like this.


```
sage: R.set_default_prec(100)
sage: time _ = sin(x*exp(x))
CPU times: user 44 ms, sys: 0 ns, total: 44 ms
Wall time: 44.7 ms
sage: R.set_default_prec(200)
sage: time _ = sin(x*exp(x))
CPU times: user 216 ms, sys: 0 ns, total: 216 ms
Wall time: 214 ms
sage: R.set_default_prec(300)
sage: time _ = sin(x*exp(x))
CPU times: user 660 ms, sys: 8 ms, total: 668 ms
Wall time: 667 ms
sage: R.set_default_prec(400)
sage: time _ = sin(x*exp(x))
CPU times: user 1.61 s, sys: 4 ms, total: 1.62 s
Wall time: 1.61 s
sage: R.set_default_prec(500)
sage: time _ = sin(x*exp(x))
CPU times: user 3.19 s, sys: 4 ms, total: 3.2 s
Wall time: 3.19 s
```



---

Comment by vbraun created at 2016-02-16 17:05:53

Resolution: fixed


---

Comment by rws created at 2016-10-15 14:49:49

The cases in comment:3 are computed about 10x faster by pynac-0.7.0.
