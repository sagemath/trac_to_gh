# Issue 19780: implement cos and sin of power series

archive/issues_019780.json:
```json
{
    "body": "As we already have exp and log.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20017\n\n",
    "created_at": "2016-02-05T20:20:44Z",
    "labels": [
        "calculus",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "implement cos and sin of power series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19780",
    "user": "chapoton"
}
```
As we already have exp and log.

Issue created by migration from https://trac.sagemath.org/ticket/20017





---

archive/issue_comments_271818.json:
```json
{
    "body": "This has been extracted from #14878.\n----\nNew commits:",
    "created_at": "2016-02-05T20:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271818",
    "user": "chapoton"
}
```

This has been extracted from #14878.
----
New commits:



---

archive/issue_comments_271819.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-05T20:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271819",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271820.json:
```json
{
    "body": "You're practically substituting into the series for `x`. This is fast for small order but may not be optimal for say 1000 coefficients.\n\nYou may be interested in general in a timing comparison. For Symengine there is a benchmark to compute `sin(x+x<sup>2)*cos(x+x</sup>2)` to order 1000 which needs 120ms using the Flint implementation on my machine. Your branch at the moment takes 2.1s which is not too bad.",
    "created_at": "2016-02-15T07:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271820",
    "user": "rws"
}
```

You're practically substituting into the series for `x`. This is fast for small order but may not be optimal for say 1000 coefficients.

You may be interested in general in a timing comparison. For Symengine there is a benchmark to compute `sin(x+x<sup>2)*cos(x+x</sup>2)` to order 1000 which needs 120ms using the Flint implementation on my machine. Your branch at the moment takes 2.1s which is not too bad.



---

archive/issue_comments_271821.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-15T07:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271821",
    "user": "rws"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271822.json:
```json
{
    "body": "Apart from the not optimal performance at higher order this looks good. Please cc me with any further tickets like this.\n\n\n```\nsage: R.set_default_prec(100)\nsage: time _ = sin(x*exp(x))\nCPU times: user 44 ms, sys: 0 ns, total: 44 ms\nWall time: 44.7 ms\nsage: R.set_default_prec(200)\nsage: time _ = sin(x*exp(x))\nCPU times: user 216 ms, sys: 0 ns, total: 216 ms\nWall time: 214 ms\nsage: R.set_default_prec(300)\nsage: time _ = sin(x*exp(x))\nCPU times: user 660 ms, sys: 8 ms, total: 668 ms\nWall time: 667 ms\nsage: R.set_default_prec(400)\nsage: time _ = sin(x*exp(x))\nCPU times: user 1.61 s, sys: 4 ms, total: 1.62 s\nWall time: 1.61 s\nsage: R.set_default_prec(500)\nsage: time _ = sin(x*exp(x))\nCPU times: user 3.19 s, sys: 4 ms, total: 3.2 s\nWall time: 3.19 s\n```\n",
    "created_at": "2016-02-15T07:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271822",
    "user": "rws"
}
```

Apart from the not optimal performance at higher order this looks good. Please cc me with any further tickets like this.


```
sage: R.set_default_prec(100)
sage: time _ = sin(x*exp(x))
CPU times: user 44 ms, sys: 0 ns, total: 44 ms
Wall time: 44.7 ms
sage: R.set_default_prec(200)
sage: time _ = sin(x*exp(x))
CPU times: user 216 ms, sys: 0 ns, total: 216 ms
Wall time: 214 ms
sage: R.set_default_prec(300)
sage: time _ = sin(x*exp(x))
CPU times: user 660 ms, sys: 8 ms, total: 668 ms
Wall time: 667 ms
sage: R.set_default_prec(400)
sage: time _ = sin(x*exp(x))
CPU times: user 1.61 s, sys: 4 ms, total: 1.62 s
Wall time: 1.61 s
sage: R.set_default_prec(500)
sage: time _ = sin(x*exp(x))
CPU times: user 3.19 s, sys: 4 ms, total: 3.2 s
Wall time: 3.19 s
```




---

archive/issue_comments_271823.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-16T17:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271823",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_271824.json:
```json
{
    "body": "The cases in comment:3 are computed about 10x faster by pynac-0.7.0.",
    "created_at": "2016-10-15T14:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19780#issuecomment-271824",
    "user": "rws"
}
```

The cases in comment:3 are computed about 10x faster by pynac-0.7.0.
