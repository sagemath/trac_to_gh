# Issue 23088: Upgrade to Pynac-0.7.9

archive/issues_023088.json:
```json
{
    "body": "CC:  @kiwifb\n\nIn the new version:\n* remove static PyObjects; (#23134)\n* (real<sup>m)</sup>(1/n) --> abs(real)^(m/n), m even, m/n integer (#14305)\n* fix `add::conjugate()` (#23135)\n* fix `is_real(zeta(real))`\n* negative symbolic domain from assume(sym<0) (#21973)\n* add missing calls to `set_domain` in symbol constructors (#23138)\n* implement `add.info(negative)`\n* exact comparison of `overall_coefficient`s\n* fast internal in-place arithmetic operators\n* obsolete some internal usages of Python\n\nhttps://github.com/pynac/pynac/releases/download/pynac-0.7.9/pynac-0.7.9.tar.bz2\n\nIssue created by migration from https://trac.sagemath.org/ticket/23325\n\n",
    "created_at": "2017-06-26T07:40:53Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Upgrade to Pynac-0.7.9",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23088",
    "user": "https://github.com/rwst"
}
```
CC:  @kiwifb

In the new version:
* remove static PyObjects; (#23134)
* (real<sup>m)</sup>(1/n) --> abs(real)^(m/n), m even, m/n integer (#14305)
* fix `add::conjugate()` (#23135)
* fix `is_real(zeta(real))`
* negative symbolic domain from assume(sym<0) (#21973)
* add missing calls to `set_domain` in symbol constructors (#23138)
* implement `add.info(negative)`
* exact comparison of `overall_coefficient`s
* fast internal in-place arithmetic operators
* obsolete some internal usages of Python

https://github.com/pynac/pynac/releases/download/pynac-0.7.9/pynac-0.7.9.tar.bz2

Issue created by migration from https://trac.sagemath.org/ticket/23325





---

archive/issue_comments_322440.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-06-26T07:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322440",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_322441.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-26T07:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322441",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_322442.json:
```json
{
    "body": "I don't agree with the change to `py_get_parent_char`: why assume characteristic zero if the parent cannot decide?",
    "created_at": "2017-06-26T13:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322442",
    "user": "https://github.com/jdemeyer"
}
```

I don't agree with the change to `py_get_parent_char`: why assume characteristic zero if the parent cannot decide?



---

archive/issue_comments_322443.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-26T13:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322443",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_322444.json:
```json
{
    "body": "If you revert the change to `py_get_parent_char` and all doctests pass, you can set this to positive review.",
    "created_at": "2017-06-26T13:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322444",
    "user": "https://github.com/jdemeyer"
}
```

If you revert the change to `py_get_parent_char` and all doctests pass, you can set this to positive review.



---

archive/issue_comments_322445.json:
```json
{
    "body": "That's a no, because this then needs investigation (doctest fail at src/sage/manifolds/differentiable/diff_form.py:796):\n\n```\nsage: M = Manifold(3, 'R3', '\\RR^3', start_index=1)\nsage: c_cart.<x,y,z> = M.chart()\nsage: eps = M.diff_form(3, 'epsilon', r'\\epsilon')\nsage: eps[1,2,3] = 1\nsage: a = M.one_form('A')\nsage: a[:] = (x*y*z, -z*x, y*z)\nsage: b = M.one_form('B')\nsage: b[:] = (cos(z), sin(x), cos(y))\nsage: ab = a.wedge(b)\nsage: dab = ab.exterior_derivative()\nsage: dab[[1,2,3]]/eps[[1,2,3]]\n...\n/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17655)()\n   2453         return l\n   2454 \n-> 2455     cpdef _div_(self, other):\n   2456         \"\"\"\n   2457         Default implementation of division using the fraction field.\n\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/manifolds/coord_func_symb.pyc in _div_(self, other)\n    947         if other._express.is_zero():\n    948             raise ZeroDivisionError(\"division of a coordinate function by zero\")\n--> 949         res = self._simplify(self._express / SR(other))\n    950         if res.is_trivial_zero():  # NB: \"if res == 0\" would be too\n    951                                    # expensive (cf. #22859)\n\n/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__div__ (build/cythonized/sage/structure/element.c:12950)()\n   1638         cdef int cl = classify_elements(left, right)\n   1639         if HAVE_SAME_PARENT(cl):\n-> 1640             return (<Element>left)._div_(right)\n   1641         if BOTH_ARE_ELEMENT(cl):\n   1642             return coercion_model.bin_op(left, right, div)\n\n/home/ralf/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._div_ (build/cythonized/sage/symbolic/expression.cpp:24795)()\n   3445                 raise ZeroDivisionError(\"Symbolic division by zero\")\n   3446             else:\n-> 3447                 raise\n   3448         finally:\n   3449             sig_off()\n\n/home/ralf/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._div_ (build/cythonized/sage/symbolic/expression.cpp:24684)()\n   3437                                o)\n   3438             else:\n-> 3439                 x = left._gobj / _right._gobj\n   3440             return new_Expression_from_GEx(left._parent, x)\n   3441         except Exception as msg:\n\n/home/ralf/sage/src/sage/libs/pynac/pynac.pyx in sage.libs.pynac.pynac.py_get_parent_char (build/cythonized/sage/libs/pynac/pynac.cpp:9942)()\n    818         return 0\n    819 \n--> 820     c = (<Element>o)._parent.characteristic()\n    821 \n    822     # Pynac only differentiates between\n\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/categories/rings.pyc in characteristic(self)\n    461             from sage.rings.infinity import infinity\n    462             from sage.rings.integer_ring import ZZ\n--> 463             order_1 = self.one().additive_order()\n    464             return ZZ.zero() if order_1 is infinity else order_1\n    465 \n\n/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.RingElement.additive_order (build/cythonized/sage/structure/element.c:18049)()\n   2470         Return the additive order of ``self``.\n   2471         \"\"\"\n-> 2472         raise NotImplementedError\n   2473 \n   2474     def multiplicative_order(self):\n\nNotImplementedError: \n\nsage: dab[[1,2,3]]\nScalar field on the 3-dimensional differentiable manifold R3\nsage: type(_)\n<class 'sage.manifolds.differentiable.scalarfield_algebra.DiffScalarFieldAlgebra_with_category.element_class'>\nsage: eps[[1,2,3]]\nScalar field on the 3-dimensional differentiable manifold R3\nsage: type(_)\n<class 'sage.manifolds.differentiable.scalarfield_algebra.DiffScalarFieldAlgebra_with_category.element_class'>\n\nsage: parent(dab[[1,2,3]])\nAlgebra of differentiable scalar fields on the 3-dimensional differentiable manifold R3\nsage: parent(eps[[1,2,3]])\nAlgebra of differentiable scalar fields on the 3-dimensional differentiable manifold R3\n```\n\nWhile this is triggered by changes in Pynac that should be addressed it's not clear to me why the division of two scalar fields must go through `SR` at all.",
    "created_at": "2017-06-27T06:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322445",
    "user": "https://github.com/rwst"
}
```

That's a no, because this then needs investigation (doctest fail at src/sage/manifolds/differentiable/diff_form.py:796):

```
sage: M = Manifold(3, 'R3', '\RR^3', start_index=1)
sage: c_cart.<x,y,z> = M.chart()
sage: eps = M.diff_form(3, 'epsilon', r'\epsilon')
sage: eps[1,2,3] = 1
sage: a = M.one_form('A')
sage: a[:] = (x*y*z, -z*x, y*z)
sage: b = M.one_form('B')
sage: b[:] = (cos(z), sin(x), cos(y))
sage: ab = a.wedge(b)
sage: dab = ab.exterior_derivative()
sage: dab[[1,2,3]]/eps[[1,2,3]]
...
/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17655)()
   2453         return l
   2454 
-> 2455     cpdef _div_(self, other):
   2456         """
   2457         Default implementation of division using the fraction field.

/home/ralf/sage/local/lib/python2.7/site-packages/sage/manifolds/coord_func_symb.pyc in _div_(self, other)
    947         if other._express.is_zero():
    948             raise ZeroDivisionError("division of a coordinate function by zero")
--> 949         res = self._simplify(self._express / SR(other))
    950         if res.is_trivial_zero():  # NB: "if res == 0" would be too
    951                                    # expensive (cf. #22859)

/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__div__ (build/cythonized/sage/structure/element.c:12950)()
   1638         cdef int cl = classify_elements(left, right)
   1639         if HAVE_SAME_PARENT(cl):
-> 1640             return (<Element>left)._div_(right)
   1641         if BOTH_ARE_ELEMENT(cl):
   1642             return coercion_model.bin_op(left, right, div)

/home/ralf/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._div_ (build/cythonized/sage/symbolic/expression.cpp:24795)()
   3445                 raise ZeroDivisionError("Symbolic division by zero")
   3446             else:
-> 3447                 raise
   3448         finally:
   3449             sig_off()

/home/ralf/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._div_ (build/cythonized/sage/symbolic/expression.cpp:24684)()
   3437                                o)
   3438             else:
-> 3439                 x = left._gobj / _right._gobj
   3440             return new_Expression_from_GEx(left._parent, x)
   3441         except Exception as msg:

/home/ralf/sage/src/sage/libs/pynac/pynac.pyx in sage.libs.pynac.pynac.py_get_parent_char (build/cythonized/sage/libs/pynac/pynac.cpp:9942)()
    818         return 0
    819 
--> 820     c = (<Element>o)._parent.characteristic()
    821 
    822     # Pynac only differentiates between

/home/ralf/sage/local/lib/python2.7/site-packages/sage/categories/rings.pyc in characteristic(self)
    461             from sage.rings.infinity import infinity
    462             from sage.rings.integer_ring import ZZ
--> 463             order_1 = self.one().additive_order()
    464             return ZZ.zero() if order_1 is infinity else order_1
    465 

/home/ralf/sage/src/sage/structure/element.pyx in sage.structure.element.RingElement.additive_order (build/cythonized/sage/structure/element.c:18049)()
   2470         Return the additive order of ``self``.
   2471         """
-> 2472         raise NotImplementedError
   2473 
   2474     def multiplicative_order(self):

NotImplementedError: 

sage: dab[[1,2,3]]
Scalar field on the 3-dimensional differentiable manifold R3
sage: type(_)
<class 'sage.manifolds.differentiable.scalarfield_algebra.DiffScalarFieldAlgebra_with_category.element_class'>
sage: eps[[1,2,3]]
Scalar field on the 3-dimensional differentiable manifold R3
sage: type(_)
<class 'sage.manifolds.differentiable.scalarfield_algebra.DiffScalarFieldAlgebra_with_category.element_class'>

sage: parent(dab[[1,2,3]])
Algebra of differentiable scalar fields on the 3-dimensional differentiable manifold R3
sage: parent(eps[[1,2,3]])
Algebra of differentiable scalar fields on the 3-dimensional differentiable manifold R3
```

While this is triggered by changes in Pynac that should be addressed it's not clear to me why the division of two scalar fields must go through `SR` at all.



---

archive/issue_comments_322446.json:
```json
{
    "body": "I will have a look.",
    "created_at": "2017-06-27T08:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322446",
    "user": "https://github.com/jdemeyer"
}
```

I will have a look.



---

archive/issue_comments_322447.json:
```json
{
    "body": "The reason why this is now failing is that the quotient here, which is `1` but not integer, is now recognized as `is_one` and triggers the `...pos_char` call.\n\nhttps://github.com/pynac/pynac/blob/master/ginac/mul.cpp#L702\n\nRemoving the call altogether in preliminary testing only fails one doctest involving `Mod` and, frankly, I could care less. Full testing now.",
    "created_at": "2017-06-27T08:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322447",
    "user": "https://github.com/rwst"
}
```

The reason why this is now failing is that the quotient here, which is `1` but not integer, is now recognized as `is_one` and triggers the `...pos_char` call.

https://github.com/pynac/pynac/blob/master/ginac/mul.cpp#L702

Removing the call altogether in preliminary testing only fails one doctest involving `Mod` and, frankly, I could care less. Full testing now.



---

archive/issue_comments_322448.json:
```json
{
    "body": "I think the best solution here is simply to implement `characteric` for the \"Ring of coordinate functions\".",
    "created_at": "2017-06-27T08:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322448",
    "user": "https://github.com/jdemeyer"
}
```

I think the best solution here is simply to implement `characteric` for the "Ring of coordinate functions".



---

archive/issue_comments_322449.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-27T12:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322450.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-04T14:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322451.json:
```json
{
    "body": "Correct is 0.7.10 not 2.7.10.",
    "created_at": "2017-08-04T14:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322451",
    "user": "https://github.com/rwst"
}
```

Correct is 0.7.10 not 2.7.10.



---

archive/issue_comments_322452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-05T07:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322453.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-06T07:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322454.json:
```json
{
    "body": "May we please change the .configure line in spkg-install to\n\n```\n    ./configure --disable-static --prefix=${SAGE_LOCAL} --with-giac=no --libdir=\n\"$SAGE_LOCAL/lib\" PYTHON=sage-python23\n```\n\nto ensure compatibility with python3 ?",
    "created_at": "2017-08-06T08:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322454",
    "user": "https://github.com/fchapoton"
}
```

May we please change the .configure line in spkg-install to

```
    ./configure --disable-static --prefix=${SAGE_LOCAL} --with-giac=no --libdir=
"$SAGE_LOCAL/lib" PYTHON=sage-python23
```

to ensure compatibility with python3 ?



---

archive/issue_comments_322455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-06T12:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322456.json:
```json
{
    "body": "If you looked at the doctest changes you probably have noticed natural simplifications where quadratic numeric factors inside `sqrt` are drawn out of the root. I will have to revert this behaviour, unfortunately. There is code in the Sage code base that relies on that root content is not changed, because it allows manipulations leading to expressions that can later be better simplified by Maxima's simplification functions. Apparently none of these functions is able to normalize root content in complicated expressions. I will maybe implement it separately, similar to `gamma_normalize`, for inclusion in `simplify_full` but releasing pynac-0.7.10 is more urgent.",
    "created_at": "2017-08-06T14:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322456",
    "user": "https://github.com/rwst"
}
```

If you looked at the doctest changes you probably have noticed natural simplifications where quadratic numeric factors inside `sqrt` are drawn out of the root. I will have to revert this behaviour, unfortunately. There is code in the Sage code base that relies on that root content is not changed, because it allows manipulations leading to expressions that can later be better simplified by Maxima's simplification functions. Apparently none of these functions is able to normalize root content in complicated expressions. I will maybe implement it separately, similar to `gamma_normalize`, for inclusion in `simplify_full` but releasing pynac-0.7.10 is more urgent.



---

archive/issue_comments_322457.json:
```json
{
    "body": "I made a new branch. Please review.\n----\nNew commits:",
    "created_at": "2017-08-09T06:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322457",
    "user": "https://github.com/rwst"
}
```

I made a new branch. Please review.
----
New commits:



---

archive/issue_comments_322458.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-09T06:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322458",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_322459.json:
```json
{
    "body": "For ease of reviewing, I would prefer to wait until the dependencies have been merged.",
    "created_at": "2017-08-09T10:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322459",
    "user": "https://github.com/jdemeyer"
}
```

For ease of reviewing, I would prefer to wait until the dependencies have been merged.



---

archive/issue_comments_322460.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-10T07:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322461.json:
```json
{
    "body": "I don't think this is a valid way to revert a merge. Either you really revert the merge (by rewriting git history as if the merge never happened), or you keep the dependency on #23582.",
    "created_at": "2017-08-10T11:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322461",
    "user": "https://github.com/jdemeyer"
}
```

I don't think this is a valid way to revert a merge. Either you really revert the merge (by rewriting git history as if the merge never happened), or you keep the dependency on #23582.



---

archive/issue_comments_322462.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-10T11:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322462",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_322463.json:
```json
{
    "body": "Nice opportunity for the rarely used `git rebase -i`.\n----\nNew commits:",
    "created_at": "2017-08-10T12:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322463",
    "user": "https://github.com/rwst"
}
```

Nice opportunity for the rarely used `git rebase -i`.
----
New commits:



---

archive/issue_comments_322464.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-10T12:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322464",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_322465.json:
```json
{
    "body": "Replying to [comment:31 rws]:\n> Nice opportunity for the rarely used `git rebase -i`.\n\nI use that all the time...",
    "created_at": "2017-08-11T07:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322465",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:31 rws]:
> Nice opportunity for the rarely used `git rebase -i`.

I use that all the time...



---

archive/issue_comments_322466.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-11T11:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322466",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_322467.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-11T11:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322467",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_322468.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-13T09:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322468",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_021675.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-08-13T09:45:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23088#event-21675"
}
```



---

archive/issue_comments_322469.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2017-08-13T18:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322469",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_322470.json:
```json
{
    "body": "Fails on 32-bit Linux\n\n```\n**********************************************************************\nFile \"src/doc/de/thematische_anleitungen/sage_gymnasium.rst\", line 191, in doc.de.thematische_anleitungen.sage_gymnasium\nFailed example:\n    sqrt(18)\nExpected:\n    3*sqrt(2)\nGot:\n    sqrt(18)\n**********************************************************************\n1 item had failures:\n   1 of 294 in doc.de.thematische_anleitungen.sage_gymnasium\n    [207 tests, 1 failure, 5.39 s]\n**********************************************************************\nFile \"src/sage/functions/orthogonal_polys.py\", line 1668, in sage.functions.orthogonal_polys.Func_assoc_legendre_Q._eval_\nFailed example:\n    gen_legendre_Q(2,1,3)\nExpected:\n    -1/4*sqrt(-2)*(-36*I*pi + 36*log(4) - 36*log(2) - 25)\nGot:\n    -1/8*sqrt(-8)*(-36*I*pi + 36*log(4) - 36*log(2) - 25)\n**********************************************************************\n1 item had failures:\n   1 of   2 in sage.functions.orthogonal_polys.Func_assoc_legendre_Q._eval_\n    [378 tests, 1 failure, 7.79 s]\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_base.pyx\", line 219, in sage.rings.number_field.number_field_base.NumberField.minkowski_bound\nFailed example:\n    B = K.minkowski_bound(); B\nExpected:\n    16/3*sqrt(3)/pi\nGot:\n    8/9*sqrt(108)/pi\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_base.pyx\", line 230, in sage.rings.number_field.number_field_base.NumberField.minkowski_bound\nFailed example:\n    B = K.minkowski_bound(); B\nExpected:\n    sqrt(10)\nGot:\n    1/2*sqrt(40)\n**********************************************************************\n1 item had failures:\n   2 of  19 in sage.rings.number_field.number_field_base.NumberField.minkowski_bound\n    [74 tests, 2 failures, 2.09 s]\n**********************************************************************\nFile \"src/sage/rings/real_mpfr.pyx\", line 3961, in sage.rings.real_mpfr.RealNumber.sqrt\nFailed example:\n    r.sqrt()\nExpected:\n    2*sqrt(1086)\nGot:\n    sqrt(4344)\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.rings.real_mpfr.RealNumber.sqrt\n    [1000 tests, 1 failure, 3.14 s]\n```\n",
    "created_at": "2017-08-13T18:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322470",
    "user": "https://github.com/vbraun"
}
```

Fails on 32-bit Linux

```
**********************************************************************
File "src/doc/de/thematische_anleitungen/sage_gymnasium.rst", line 191, in doc.de.thematische_anleitungen.sage_gymnasium
Failed example:
    sqrt(18)
Expected:
    3*sqrt(2)
Got:
    sqrt(18)
**********************************************************************
1 item had failures:
   1 of 294 in doc.de.thematische_anleitungen.sage_gymnasium
    [207 tests, 1 failure, 5.39 s]
**********************************************************************
File "src/sage/functions/orthogonal_polys.py", line 1668, in sage.functions.orthogonal_polys.Func_assoc_legendre_Q._eval_
Failed example:
    gen_legendre_Q(2,1,3)
Expected:
    -1/4*sqrt(-2)*(-36*I*pi + 36*log(4) - 36*log(2) - 25)
Got:
    -1/8*sqrt(-8)*(-36*I*pi + 36*log(4) - 36*log(2) - 25)
**********************************************************************
1 item had failures:
   1 of   2 in sage.functions.orthogonal_polys.Func_assoc_legendre_Q._eval_
    [378 tests, 1 failure, 7.79 s]
**********************************************************************
File "src/sage/rings/number_field/number_field_base.pyx", line 219, in sage.rings.number_field.number_field_base.NumberField.minkowski_bound
Failed example:
    B = K.minkowski_bound(); B
Expected:
    16/3*sqrt(3)/pi
Got:
    8/9*sqrt(108)/pi
**********************************************************************
File "src/sage/rings/number_field/number_field_base.pyx", line 230, in sage.rings.number_field.number_field_base.NumberField.minkowski_bound
Failed example:
    B = K.minkowski_bound(); B
Expected:
    sqrt(10)
Got:
    1/2*sqrt(40)
**********************************************************************
1 item had failures:
   2 of  19 in sage.rings.number_field.number_field_base.NumberField.minkowski_bound
    [74 tests, 2 failures, 2.09 s]
**********************************************************************
File "src/sage/rings/real_mpfr.pyx", line 3961, in sage.rings.real_mpfr.RealNumber.sqrt
Failed example:
    r.sqrt()
Expected:
    2*sqrt(1086)
Got:
    sqrt(4344)
**********************************************************************
1 item had failures:
   1 of  13 in sage.rings.real_mpfr.RealNumber.sqrt
    [1000 tests, 1 failure, 3.14 s]
```




---

archive/issue_comments_322471.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2017-08-13T18:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322471",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_021676.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-08-13T18:29:18Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23088#event-21676"
}
```



---

archive/issue_comments_322472.json:
```json
{
    "body": "Okay, I'm installing virtualization (a first) and Ubuntu 32-bit to get the ability to test on 32-bit.",
    "created_at": "2017-08-16T08:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322472",
    "user": "https://github.com/rwst"
}
```

Okay, I'm installing virtualization (a first) and Ubuntu 32-bit to get the ability to test on 32-bit.



---

archive/issue_comments_322473.json:
```json
{
    "body": "STDERR: error: Server does not allow request for unadvertised object b54f51bab33a602448c1b3e2f719fb375661aac3\n\nSo I'll push to my previous branch `u/rws/23325-1` (including Jeroen's fix) in the hope you can pick up its last commit, which contains a last-minute fix.",
    "created_at": "2017-08-19T06:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322473",
    "user": "https://github.com/rwst"
}
```

STDERR: error: Server does not allow request for unadvertised object b54f51bab33a602448c1b3e2f719fb375661aac3

So I'll push to my previous branch `u/rws/23325-1` (including Jeroen's fix) in the hope you can pick up its last commit, which contains a last-minute fix.



---

archive/issue_comments_322474.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-19T06:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322474",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_322475.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-19T06:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322475",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_322476.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-22T22:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322476",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_322477.json:
```json
{
    "body": "I think it can just be put back to positive review. Especially if the last fix is the stuff for 32bits problems.",
    "created_at": "2017-08-22T22:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322477",
    "user": "https://github.com/kiwifb"
}
```

I think it can just be put back to positive review. Especially if the last fix is the stuff for 32bits problems.



---

archive/issue_events_021677.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-08-29T19:51:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23088#event-21677"
}
```



---

archive/issue_comments_322478.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-29T19:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23088#issuecomment-322478",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
