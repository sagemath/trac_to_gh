# Issue 22286: Symbolic power of a matrix

archive/issues_022286.json:
```json
{
    "body": "CC:  tmonteil\n\nKeywords: days84\n\nCompute the k-th power of a matrix, where k is a symbolic variable.\n\nSee [this question](https://ask.sagemath.org/question/35658/general-power-of-a-matrix/#35666).\n\nIssue created by migration from https://trac.sagemath.org/ticket/22523\n\n",
    "created_at": "2017-03-06T00:44:16Z",
    "labels": [
        "linear algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Symbolic power of a matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22286",
    "user": "@mforets"
}
```
CC:  tmonteil

Keywords: days84

Compute the k-th power of a matrix, where k is a symbolic variable.

See [this question](https://ask.sagemath.org/question/35658/general-power-of-a-matrix/#35666).

Issue created by migration from https://trac.sagemath.org/ticket/22523





---

archive/issue_comments_309814.json:
```json
{
    "body": "this patch is broken:\n\n\n```\nsage: A = random_matrix(RDF, 2)\nsage: A\n\n[-0.9428173549065391  -0.301642050267529]\n[ 0.6212822063471177 -0.9690284523509545]\nsage: A^x\n...\nAttributeError: 'sage.matrix.matrix_real_double_dense.Matrix_real_double_dense' object has no attribute '_matrix_power_symbolic'\n```\n\n\njust adding the new `_matrix_power_symbolic` and updating the generic ` __pow__` doesn't seem to be correct. some hints?\n----\nNew commits:",
    "created_at": "2017-03-10T19:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309814",
    "user": "@mforets"
}
```

this patch is broken:


```
sage: A = random_matrix(RDF, 2)
sage: A

[-0.9428173549065391  -0.301642050267529]
[ 0.6212822063471177 -0.9690284523509545]
sage: A^x
...
AttributeError: 'sage.matrix.matrix_real_double_dense.Matrix_real_double_dense' object has no attribute '_matrix_power_symbolic'
```


just adding the new `_matrix_power_symbolic` and updating the generic ` __pow__` doesn't seem to be correct. some hints?
----
New commits:



---

archive/issue_comments_309815.json:
```json
{
    "body": "Either `_matrix_power_symbolic` is a function and then you should call `_matrix_power_symbolic(self, n)`, or `_matrix_power_symbolic` is a method (of a generic matrix class), and then you should call `self._matrix_power_symbolic(n)`. Here, you seem to mix both points by calling `self._matrix_power_symbolic(self, n)` (so that `self` is used for the two arguments of `_matrix_power_symbolic`).",
    "created_at": "2017-03-10T19:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309815",
    "user": "tmonteil"
}
```

Either `_matrix_power_symbolic` is a function and then you should call `_matrix_power_symbolic(self, n)`, or `_matrix_power_symbolic` is a method (of a generic matrix class), and then you should call `self._matrix_power_symbolic(n)`. Here, you seem to mix both points by calling `self._matrix_power_symbolic(self, n)` (so that `self` is used for the two arguments of `_matrix_power_symbolic`).



---

archive/issue_comments_309816.json:
```json
{
    "body": "Replying to [comment:3 tmonteil]:\n> Either `_matrix_power_symbolic` is a function and then you should call `_matrix_power_symbolic(self, n)`, or `_matrix_power_symbolic` is a method (of a generic matrix class), and then you should call `self._matrix_power_symbolic(n)`. Here, you seem to mix both points by calling `self._matrix_power_symbolic(self, n)` (so that `self` is used for the first two arguments of `_matrix_power_symbolic`). \n>",
    "created_at": "2017-03-10T19:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309816",
    "user": "tmonteil"
}
```

Replying to [comment:3 tmonteil]:
> Either `_matrix_power_symbolic` is a function and then you should call `_matrix_power_symbolic(self, n)`, or `_matrix_power_symbolic` is a method (of a generic matrix class), and then you should call `self._matrix_power_symbolic(n)`. Here, you seem to mix both points by calling `self._matrix_power_symbolic(self, n)` (so that `self` is used for the first two arguments of `_matrix_power_symbolic`). 
>



---

archive/issue_comments_309817.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-11T13:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309817",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309818.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-11T13:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309818",
    "user": "@mforets"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_309819.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-11T19:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309819",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309820.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-12T15:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309820",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309821.json:
```json
{
    "body": "also related, this other [ask.sagemath question](https://ask.sagemath.org/question/8280/an-nvarn/)",
    "created_at": "2017-04-10T07:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309821",
    "user": "@mforets"
}
```

also related, this other [ask.sagemath question](https://ask.sagemath.org/question/8280/an-nvarn/)



---

archive/issue_comments_309822.json:
```json
{
    "body": "the patchbot is complaining about:\n\n\n```\nsage -t --long src/doc/en/reference/references/index.rst\n    Error: TAB character found at line 797\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nsage -t --long src/doc/en/reference/references/index.rst  # Tab character found\n----------------------------------------------------------------------\n```\n\n\ni'll try to fix this.",
    "created_at": "2017-04-10T07:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309822",
    "user": "@mforets"
}
```

the patchbot is complaining about:


```
sage -t --long src/doc/en/reference/references/index.rst
    Error: TAB character found at line 797
    [0 tests, 0.00 s]
----------------------------------------------------------------------
sage -t --long src/doc/en/reference/references/index.rst  # Tab character found
----------------------------------------------------------------------
```


i'll try to fix this.



---

archive/issue_comments_309823.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-11T08:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309823",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309824.json:
```json
{
    "body": "Some quick comments:\n\n- Use `Jk[i,i]` instead of `Jk[i][i]` as the latter creates a temporary `vector` object. However, I would do\n  {{{#!python\n            Jk_ii = Jk[i,i]\n            if hasattr(Jk_ii, 'radical_expression'):\n                Jk_ii = Jk_ii.radical_expression()\n  }}}\n- Use ``` instead of `$` for latex formatting in docstrings.\n- In the `INPUT:` block: `- ``A`` -- a square matrix over an exact field` Note the removal of the period too.\n- Make `A` and `A^n` in latex.\n- Is there some reason why the function is not a `cdef` function?\n- I don't understand why you try to change the base ring to `QQbar`. Could you justify this?\n- This seems strange: `vector(SR, i).list()`. Why not `[SR.zero()]*i`?\n- I would use a call to `binomial` instead of `(factorial_n/(factorial(n-i)*factorial(i))` because it probably requires less operations when `n` is big. Perhaps some testing is needed here.\n- How many of those imports are needed in the function? Having them there slows the function down.\n- I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed).",
    "created_at": "2017-04-11T16:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309824",
    "user": "@tscrim"
}
```

Some quick comments:

- Use `Jk[i,i]` instead of `Jk[i][i]` as the latter creates a temporary `vector` object. However, I would do
  {{{#!python
            Jk_ii = Jk[i,i]
            if hasattr(Jk_ii, 'radical_expression'):
                Jk_ii = Jk_ii.radical_expression()
  }}}
- Use ``` instead of `$` for latex formatting in docstrings.
- In the `INPUT:` block: `- ``A`` -- a square matrix over an exact field` Note the removal of the period too.
- Make `A` and `A^n` in latex.
- Is there some reason why the function is not a `cdef` function?
- I don't understand why you try to change the base ring to `QQbar`. Could you justify this?
- This seems strange: `vector(SR, i).list()`. Why not `[SR.zero()]*i`?
- I would use a call to `binomial` instead of `(factorial_n/(factorial(n-i)*factorial(i))` because it probably requires less operations when `n` is big. Perhaps some testing is needed here.
- How many of those imports are needed in the function? Having them there slows the function down.
- I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed).



---

archive/issue_comments_309825.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-11T18:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309825",
    "user": "@mforets"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_309826.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-12T19:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309826",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309827.json:
```json
{
    "body": "`@`tscrim : thanks for the feedback, i've tried to correct the formatting issues.\n\nsome testing for the algorithm before changes (before 32e7cf9):\n\nTest in the rationals, two-dimensional:\n\n\n```\n    sage: k = var('k')\n    sage: A = matrix(QQ, 2, [1/2, -1, 2, 0])\n    sage: timeit('A^k')\n    5 loops, best of 3: 105 ms per loop\n```\n\n\nTest of the [stochastic matrix](https://en.wikipedia.org/wiki/Stochastic_matrix) in wikipedia:\n\n\n```\n    sage: A = matrix([[0, 0, 1/2, 0, 1/2], [0, 0, 1, 0, 0], [1/4, 1/4, 0, 1/4, 1/4], [0, 0, 1/2, 0, 1/2], [0, 0, 0, 0, 1]])\n    sage: timeit('A^k')\n    5 loops, best of 3: 192 ms per loop\n```\n\n\nTest in the symbolic ring:\n\n\n```\n    sage: n = var('n')\n    sage: A = matrix([[pi, e],[0, -2*I]])\n    sage: timeit('A^n')\n    25 loops, best of 3: 26 ms per loop\n```\n\n\nhere are some partial answers:\n\n> - Use `Jk[i,i]` instead of `Jk[i][i]` as the latter creates a temporary `vector` object. However, I would do\n>   {{{#!python\n>             Jk_ii = Jk[i,i]\n>             if hasattr(Jk_ii, 'radical_expression'):\n>                 Jk_ii = Jk_ii.radical_expression()\n>   }}}\n\nyes, it is better that way. it didn't have an impact in the timing of my quick examples above, though (+- 10ms)\n\n> - I don't understand why you try to change the base ring to `QQbar`. Could you justify this?\n\nthis is to cover the cases where the eigenvalues do not belong to the same ring as the given matrix. in general the `jordan_form` method breaks with the message `RuntimeError: Some eigenvalue does not exist in Rational Field.` \n\nFor example consider taking the jordan form of `A = matrix(2, [1, 2, 1, -2])`. \n\nOn the other hand, the example `A = matrix([[pi, e],[0, -2*I]])` tests the case when it is not possible to transform to QQbar (it would break with ``TypeError: Illegal initializer for algebraic number``). \n\n> - This seems strange: `vector(SR, i).list()`. Why not `[SR.zero()]*i`?\n\nsure, i'm used to thinking in matrices/vectors in the 1st place, rather than lists :) \n\ndone in the new commit, for the record it didn't have an impact on timeit for the 3 examples above (+- 5..10ms)\n\n> - I would use a call to `binomial` instead of `(factorial_n/(factorial(n-i)*factorial(i))` because it probably requires less operations when `n` is big. Perhaps some testing is needed here.\n\nright, at least with the binomial method the code is more clear.\n\nmore generally, i'm not confident that jordanization will be useful at all for \n'big' n, since this operation is very costly. however if the matrix is very sparse then maybe it works, i didn't try any of that.\n\n> - How many of those imports are needed in the function? Having them there slows the function down.\n\nwell yes, i was able to get rid of importing vector, based on the suggestion of above.",
    "created_at": "2017-04-12T19:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309827",
    "user": "@mforets"
}
```

`@`tscrim : thanks for the feedback, i've tried to correct the formatting issues.

some testing for the algorithm before changes (before 32e7cf9):

Test in the rationals, two-dimensional:


```
    sage: k = var('k')
    sage: A = matrix(QQ, 2, [1/2, -1, 2, 0])
    sage: timeit('A^k')
    5 loops, best of 3: 105 ms per loop
```


Test of the [stochastic matrix](https://en.wikipedia.org/wiki/Stochastic_matrix) in wikipedia:


```
    sage: A = matrix([[0, 0, 1/2, 0, 1/2], [0, 0, 1, 0, 0], [1/4, 1/4, 0, 1/4, 1/4], [0, 0, 1/2, 0, 1/2], [0, 0, 0, 0, 1]])
    sage: timeit('A^k')
    5 loops, best of 3: 192 ms per loop
```


Test in the symbolic ring:


```
    sage: n = var('n')
    sage: A = matrix([[pi, e],[0, -2*I]])
    sage: timeit('A^n')
    25 loops, best of 3: 26 ms per loop
```


here are some partial answers:

> - Use `Jk[i,i]` instead of `Jk[i][i]` as the latter creates a temporary `vector` object. However, I would do
>   {{{#!python
>             Jk_ii = Jk[i,i]
>             if hasattr(Jk_ii, 'radical_expression'):
>                 Jk_ii = Jk_ii.radical_expression()
>   }}}

yes, it is better that way. it didn't have an impact in the timing of my quick examples above, though (+- 10ms)

> - I don't understand why you try to change the base ring to `QQbar`. Could you justify this?

this is to cover the cases where the eigenvalues do not belong to the same ring as the given matrix. in general the `jordan_form` method breaks with the message `RuntimeError: Some eigenvalue does not exist in Rational Field.` 

For example consider taking the jordan form of `A = matrix(2, [1, 2, 1, -2])`. 

On the other hand, the example `A = matrix([[pi, e],[0, -2*I]])` tests the case when it is not possible to transform to QQbar (it would break with ``TypeError: Illegal initializer for algebraic number``). 

> - This seems strange: `vector(SR, i).list()`. Why not `[SR.zero()]*i`?

sure, i'm used to thinking in matrices/vectors in the 1st place, rather than lists :) 

done in the new commit, for the record it didn't have an impact on timeit for the 3 examples above (+- 5..10ms)

> - I would use a call to `binomial` instead of `(factorial_n/(factorial(n-i)*factorial(i))` because it probably requires less operations when `n` is big. Perhaps some testing is needed here.

right, at least with the binomial method the code is more clear.

more generally, i'm not confident that jordanization will be useful at all for 
'big' n, since this operation is very costly. however if the matrix is very sparse then maybe it works, i didn't try any of that.

> - How many of those imports are needed in the function? Having them there slows the function down.

well yes, i was able to get rid of importing vector, based on the suggestion of above.



---

archive/issue_comments_309828.json:
```json
{
    "body": "> Is there some reason why the function is not a cdef function? \n\ni tried `def` -> `cdef` in the function's definition, but this breaks many things (compilation). where can i learn more about using cdef in Sage library code? thanks\n\n> I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed). \n\nhmm i would normally use the same matrix to store partial computations (instead of creating a new one, say). are you suggesting that it's preferable to do differently like what, use lists? \n\nin this particular case, there are `FJ_k.set_row(i, Jk_row_i)` and `FJ.set_block(k, k, FJ_k)` inside a loop. yes, the matrix `FJ` is needed afterwards to do the computation `P * FJ * Pinv`.",
    "created_at": "2017-04-13T13:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309828",
    "user": "@mforets"
}
```

> Is there some reason why the function is not a cdef function? 

i tried `def` -> `cdef` in the function's definition, but this breaks many things (compilation). where can i learn more about using cdef in Sage library code? thanks

> I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed). 

hmm i would normally use the same matrix to store partial computations (instead of creating a new one, say). are you suggesting that it's preferable to do differently like what, use lists? 

in this particular case, there are `FJ_k.set_row(i, Jk_row_i)` and `FJ.set_block(k, k, FJ_k)` inside a loop. yes, the matrix `FJ` is needed afterwards to do the computation `P * FJ * Pinv`.



---

archive/issue_comments_309829.json:
```json
{
    "body": "Replying to [comment:16 mforets]:\n> > Is there some reason why the function is not a cdef function? \n> \n> i tried `def` -> `cdef` in the function's definition, but this breaks many things (compilation). where can i learn more about using cdef in Sage library code? thanks\n\nHmm...interesting. I will try this and see what I can do. To learn about `cdef`, you should probably go to Cython's docs. The error messages on these failures can be helpful sometimes to fix things.\n\n> > I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed). \n> \n> hmm i would normally use the same matrix to store partial computations (instead of creating a new one, say). are you suggesting that it's preferable to do differently like what, use lists? \n\nIdeally you would use a single list, but a list of lists also works. At least for dense matrices. If the matrix was expected to be sparse, then a dict is good. The issue is more of that element creation is a relatively heavy operation compared to creating lists. Although I would directly modify the matrix `FJ`.\n\n> in this particular case, there are `FJ_k.set_row(i, Jk_row_i)` and `FJ.set_block(k, k, FJ_k)` inside a loop. yes, the matrix `FJ` is needed afterwards to do the computation `P * FJ * Pinv`.\n\nHowever, `FJ_k` is not. I would just like to modify `FJ` since the intermediate matrix `FJ_k` doesn't really need to be there.",
    "created_at": "2017-04-15T04:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309829",
    "user": "@tscrim"
}
```

Replying to [comment:16 mforets]:
> > Is there some reason why the function is not a cdef function? 
> 
> i tried `def` -> `cdef` in the function's definition, but this breaks many things (compilation). where can i learn more about using cdef in Sage library code? thanks

Hmm...interesting. I will try this and see what I can do. To learn about `cdef`, you should probably go to Cython's docs. The error messages on these failures can be helpful sometimes to fix things.

> > I'm not completely sure about creating the blank (dense) matrix and then filling it in afterwards. I feel like a better solution would be to just construct the data for the matrix and then construct the matrix from that (if this is even needed). 
> 
> hmm i would normally use the same matrix to store partial computations (instead of creating a new one, say). are you suggesting that it's preferable to do differently like what, use lists? 

Ideally you would use a single list, but a list of lists also works. At least for dense matrices. If the matrix was expected to be sparse, then a dict is good. The issue is more of that element creation is a relatively heavy operation compared to creating lists. Although I would directly modify the matrix `FJ`.

> in this particular case, there are `FJ_k.set_row(i, Jk_row_i)` and `FJ.set_block(k, k, FJ_k)` inside a loop. yes, the matrix `FJ` is needed afterwards to do the computation `P * FJ * Pinv`.

However, `FJ_k` is not. I would just like to modify `FJ` since the intermediate matrix `FJ_k` doesn't really need to be there.



---

archive/issue_comments_309830.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-17T22:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309830",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309831.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-17T22:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309831",
    "user": "@mforets"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309832.json:
```json
{
    "body": "for the 2x2 case there is a simple closed formula by [K. S. Williams](http://people.math.carleton.ca/~williams/papers/pdf/175.pdf). since it does not require the jordan form, it can also be used with an inexact ring, and maybe it's faster (i don't plan to try it, just a comment.)",
    "created_at": "2017-04-17T22:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309832",
    "user": "@mforets"
}
```

for the 2x2 case there is a simple closed formula by [K. S. Williams](http://people.math.carleton.ca/~williams/papers/pdf/175.pdf). since it does not require the jordan form, it can also be used with an inexact ring, and maybe it's faster (i don't plan to try it, just a comment.)



---

archive/issue_comments_309833.json:
```json
{
    "body": "Let's get this into Sage. Positive review.",
    "created_at": "2017-04-17T23:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309833",
    "user": "@tscrim"
}
```

Let's get this into Sage. Positive review.



---

archive/issue_comments_309834.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-17T23:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309834",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309835.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309835",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_309836.json:
```json
{
    "body": "Follow-up at #25028 after a bug was reported (and a fix found) at\n[Ask Sage question 41622](https://ask.sagemath.org/question/41622/bug-in-general-power-of-a-matrix).",
    "created_at": "2018-04-02T18:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22286#issuecomment-309836",
    "user": "@slel"
}
```

Follow-up at #25028 after a bug was reported (and a fix found) at
[Ask Sage question 41622](https://ask.sagemath.org/question/41622/bug-in-general-power-of-a-matrix).
