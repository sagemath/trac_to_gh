# Issue 15693: CartanType hangs on bad input

Issue created by migration from https://trac.sagemath.org/ticket/15930

Original creator: mshimo

Original creation time: 2014-03-13 14:21:58

CC:  tscrim jakobkroeker

` sage: CartanType(ZZ) ` 

hangs.

I suggest creating a new sage category for Cartan types
so that there is a graceful way to "type check"
something that should be a Cartan type.
Within this framework one could more explicitly codify "direct product",
"dual", "relabelled" Cartan types.



---

Comment by jakobkroeker created at 2017-03-03 23:58:02

Seems fixed now (sage 7.6 beta 4). Needs a test?
Then needs review.


---

Comment by chapoton created at 2022-02-24 16:18:27

I propose to close this one as "garbage in, garbage out".


---

Comment by chapoton created at 2022-02-24 16:18:27

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-02-24 23:35:33

I actually get a now:

```
sage: CartanType(ZZ)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-10-4167abd6d9c5> in <module>
----> 1 CartanType(ZZ)

~/sage-build/local/lib/python3.9/site-packages/sage/combinat/root_system/cartan_type.py in __call__(self, *args)
    588             return t.cartan_type()
    589 
--> 590         if len(t) == 1: # Fix for trac #13774
    591             t = t[0]
    592 

~/sage-build/local/lib/python3.9/site-packages/sage/rings/ring.pyx in sage.rings.ring.Ring.__len__ (build/cythonized/sage/rings/ring.c:3344)()
    236         if self.is_finite():
    237             return self.cardinality()
--> 238         raise NotImplementedError('len() of an infinite set')
    239 
    240     def __xor__(self, n):

NotImplementedError: len() of an infinite set
```

However, it is more of a fluke because `ZZ` has a well-defined `len` that doesn't just iterate over the object. However, I agree on the general premise; it is necessarily the job of the constructor to police every type of input.


---

Comment by tscrim created at 2022-02-24 23:35:33

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2022-02-25 07:13:43

Resolution: invalid
