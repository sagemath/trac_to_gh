# Issue 32390: Expose backend of ring extension

archive/issues_032390.json:
```json
{
    "body": "CC:  caruso jsrn roed saraedum\n\nWe add `backend_morphism` and `top` to expose the backend defining a ring extension. So we can\n\n\n```sage\nsage: F = GF(5^2)\nsage: K = GF(5^4).over(F)\nsage: K.backend_morphism()\nRing morphism:\n  From: Finite Field in z2 of size 5^2\n  To:   Finite Field in z4 of size 5^4\n  Defn: z2 |--> z4^3 + z4^2 + z4 + 3\nsage: K.top() == GF(5^4)\nTrue\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32627\n\n",
    "created_at": "2021-10-05T02:41:30Z",
    "labels": [
        "algebra",
        "minor",
        "enhancement"
    ],
    "title": "Expose backend of ring extension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32390",
    "user": "klee"
}
```
CC:  caruso jsrn roed saraedum

We add `backend_morphism` and `top` to expose the backend defining a ring extension. So we can


```sage
sage: F = GF(5^2)
sage: K = GF(5^4).over(F)
sage: K.backend_morphism()
Ring morphism:
  From: Finite Field in z2 of size 5^2
  To:   Finite Field in z4 of size 5^4
  Defn: z2 |--> z4^3 + z4^2 + z4 + 3
sage: K.top() == GF(5^4)
True
```


Issue created by migration from https://trac.sagemath.org/ticket/32627





---

archive/issue_comments_462101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-05T02:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462102.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-07T03:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462102",
    "user": "klee"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462103.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462103",
    "user": "mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_462104.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-12-24T04:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462104",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_462105.json:
```json
{
    "body": "Is the name \"backend morphism\" standard? I would probably call this `.base_change()` or `.base_change_morphism()`, `.embedding()` or `.embedding_morphism()` (assuming these maps are supposed to be injective as the name \"extension\" suggests), or even just `.morphism()`.",
    "created_at": "2021-12-28T08:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462105",
    "user": "lorenz"
}
```

Is the name "backend morphism" standard? I would probably call this `.base_change()` or `.base_change_morphism()`, `.embedding()` or `.embedding_morphism()` (assuming these maps are supposed to be injective as the name "extension" suggests), or even just `.morphism()`.



---

archive/issue_comments_462106.json:
```json
{
    "body": "Replying to [comment:8 lorenz]:\n> Is the name \"backend morphism\" standard?\n\nNo. It is not a mathematical term. It means the morphism at backend of (defining) the ring extension. \n\nI named it so since the method just returns `self._backend_defining_morphism`. The latter was named by the authors of ring extensions in Sage.   \n\n> I would probably call this `.base_change()` or `.base_change_morphism()`, `.embedding()` or `.embedding_morphism()` (assuming these maps are supposed to be injective as the name \"extension\" suggests), or even just `.morphism()`.\n\nI am okay with the last one `.morphism()`.",
    "created_at": "2021-12-28T09:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462106",
    "user": "klee"
}
```

Replying to [comment:8 lorenz]:
> Is the name "backend morphism" standard?

No. It is not a mathematical term. It means the morphism at backend of (defining) the ring extension. 

I named it so since the method just returns `self._backend_defining_morphism`. The latter was named by the authors of ring extensions in Sage.   

> I would probably call this `.base_change()` or `.base_change_morphism()`, `.embedding()` or `.embedding_morphism()` (assuming these maps are supposed to be injective as the name "extension" suggests), or even just `.morphism()`.

I am okay with the last one `.morphism()`.



---

archive/issue_comments_462107.json:
```json
{
    "body": "Or `.defining_morphism()`?",
    "created_at": "2021-12-28T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462107",
    "user": "klee"
}
```

Or `.defining_morphism()`?



---

archive/issue_comments_462108.json:
```json
{
    "body": "Replying to [comment:10 klee]:\n> Or `.defining_morphism()`?\n\nSounds good to me.",
    "created_at": "2021-12-28T09:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462108",
    "user": "lorenz"
}
```

Replying to [comment:10 klee]:
> Or `.defining_morphism()`?

Sounds good to me.



---

archive/issue_comments_462109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-28T10:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462109",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-28T10:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462111.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-28T10:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462111",
    "user": "klee"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_462112.json:
```json
{
    "body": "I forgot that the name `.defining_morphism()` is already taken.\n\n```sage\nsage: F = GF(5^2)\nsage: K = GF(5^4).over(F)\nsage: K.defining_morphism()\nRing morphism:\n  From: Finite Field in z2 of size 5^2\n  To:   Field in z4 with defining polynomial x^2 + (4*z2 + 3)*x + z2 over its base\n  Defn: z2 |--> z2\nsage: K.backend_morphism()\nRing morphism:\n  From: Finite Field in z2 of size 5^2\n  To:   Finite Field in z4 of size 5^4\n  Defn: z2 |--> z4^3 + z4^2 + z4 + 3\n```\n",
    "created_at": "2021-12-28T10:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462112",
    "user": "klee"
}
```

I forgot that the name `.defining_morphism()` is already taken.

```sage
sage: F = GF(5^2)
sage: K = GF(5^4).over(F)
sage: K.defining_morphism()
Ring morphism:
  From: Finite Field in z2 of size 5^2
  To:   Field in z4 with defining polynomial x^2 + (4*z2 + 3)*x + z2 over its base
  Defn: z2 |--> z2
sage: K.backend_morphism()
Ring morphism:
  From: Finite Field in z2 of size 5^2
  To:   Finite Field in z4 of size 5^4
  Defn: z2 |--> z4^3 + z4^2 + z4 + 3
```




---

archive/issue_comments_462113.json:
```json
{
    "body": "Then `.backend_morphism()` again seems the best option...",
    "created_at": "2021-12-28T10:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462113",
    "user": "klee"
}
```

Then `.backend_morphism()` again seems the best option...



---

archive/issue_comments_462114.json:
```json
{
    "body": "I think `.backend_morphism()` is a less-than-optimal name because (1) it means nothing to mathematicians unaware of Sage internals, (2) it bakes an implementation detail into the interface, (3) the current documentation fails to explain what a backend morphism *is*.\n\nWhat this means is that this method will only be useful to people who are familiar with the internals of this class, and such people can already simply access the `_backend_defining_morphism` attribute. Hence, in my opinion *something* should be changed: (a) rename to something clearer and more mathematically meaningful; (b) expose this via an optional argument to `.defining_morphism()` (perhaps named `flatten` or `flatten_codomain`); (c) keep the name but clarify in the documentation what the returned object actually is?",
    "created_at": "2021-12-28T14:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462114",
    "user": "lorenz"
}
```

I think `.backend_morphism()` is a less-than-optimal name because (1) it means nothing to mathematicians unaware of Sage internals, (2) it bakes an implementation detail into the interface, (3) the current documentation fails to explain what a backend morphism *is*.

What this means is that this method will only be useful to people who are familiar with the internals of this class, and such people can already simply access the `_backend_defining_morphism` attribute. Hence, in my opinion *something* should be changed: (a) rename to something clearer and more mathematically meaningful; (b) expose this via an optional argument to `.defining_morphism()` (perhaps named `flatten` or `flatten_codomain`); (c) keep the name but clarify in the documentation what the returned object actually is?



---

archive/issue_comments_462115.json:
```json
{
    "body": "I agree with your arguments. But I also want to avoid difficult names for simple things.\n\nIn the previous example, let us call the first map by (a) and the second map by (b). I think there are two ways to proceed.\n\n(1) \".defining_morphism()\" returns (b); the map (a) is registered as coercion map. This would break the design choices made by the original authors. Hence I am not sure if this would work out well.\n\n(2) \".defining_morphism()\" returns (a) (as it does now); \".morphism()\" returns (b). This is of course an easy solution. \n\nWhich do you prefer? I prefer (1) but I am also okay with (2).",
    "created_at": "2021-12-28T15:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462115",
    "user": "klee"
}
```

I agree with your arguments. But I also want to avoid difficult names for simple things.

In the previous example, let us call the first map by (a) and the second map by (b). I think there are two ways to proceed.

(1) ".defining_morphism()" returns (b); the map (a) is registered as coercion map. This would break the design choices made by the original authors. Hence I am not sure if this would work out well.

(2) ".defining_morphism()" returns (a) (as it does now); ".morphism()" returns (b). This is of course an easy solution. 

Which do you prefer? I prefer (1) but I am also okay with (2).



---

archive/issue_comments_462116.json:
```json
{
    "body": "Replying to [comment:17 lorenz]:\n> ... What this means is that this method will only be useful to people who are familiar with the internals of this class, and such people can already simply access the `_backend_defining_morphism` attribute. \n\nThey cannot because that attribute is defined in a cython module. Maybe this was the reason I introduced `.backend_morphism()` method in the first place.",
    "created_at": "2021-12-29T06:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462116",
    "user": "klee"
}
```

Replying to [comment:17 lorenz]:
> ... What this means is that this method will only be useful to people who are familiar with the internals of this class, and such people can already simply access the `_backend_defining_morphism` attribute. 

They cannot because that attribute is defined in a cython module. Maybe this was the reason I introduced `.backend_morphism()` method in the first place.



---

archive/issue_comments_462117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-12-29T06:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_462118.json:
```json
{
    "body": "The last commit is my attempt to implement something close to (1). If we decide to go this way, then I need to add deprecation warnings of course.",
    "created_at": "2021-12-29T06:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462118",
    "user": "klee"
}
```

The last commit is my attempt to implement something close to (1). If we decide to go this way, then I need to add deprecation warnings of course.



---

archive/issue_comments_462119.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-29T06:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462119",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_462120.json:
```json
{
    "body": "Let's see how much this renaming of `.defining_morphism()` breaks sage.",
    "created_at": "2021-12-29T06:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462120",
    "user": "klee"
}
```

Let's see how much this renaming of `.defining_morphism()` breaks sage.



---

archive/issue_comments_462121.json:
```json
{
    "body": "With the current branch, \n\n```sage\nsage: F = GF(5^2)\nsage: K = GF(5^4).over(F)\nsage: K.morphism_from_base()\nRing morphism:\n  From: Finite Field in z2 of size 5^2\n  To:   Field in z4 with defining polynomial x^2 + (4*z2 + 3)*x + z2 over its base\n  Defn: z2 |--> z2\nsage: K.defining_morphism()\nRing morphism:\n  From: Finite Field in z2 of size 5^2\n  To:   Finite Field in z4 of size 5^4\n  Defn: z2 |--> z4^3 + z4^2 + z4 + 3\nsage: K.top()\nFinite Field in z4 of size 5^4\nsage: K.base()\nFinite Field in z2 of size 5^2\n```\n",
    "created_at": "2021-12-29T06:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462121",
    "user": "klee"
}
```

With the current branch, 

```sage
sage: F = GF(5^2)
sage: K = GF(5^4).over(F)
sage: K.morphism_from_base()
Ring morphism:
  From: Finite Field in z2 of size 5^2
  To:   Field in z4 with defining polynomial x^2 + (4*z2 + 3)*x + z2 over its base
  Defn: z2 |--> z2
sage: K.defining_morphism()
Ring morphism:
  From: Finite Field in z2 of size 5^2
  To:   Finite Field in z4 of size 5^4
  Defn: z2 |--> z4^3 + z4^2 + z4 + 3
sage: K.top()
Finite Field in z4 of size 5^4
sage: K.base()
Finite Field in z2 of size 5^2
```




---

archive/issue_comments_462122.json:
```json
{
    "body": "cc roed and saraedum who contributed to the writing of the class `RingExtension`.\n\nWhen I designed ticket #21413, this idea was to keep the backend morphism private. The point behind this was the following: the backend ring/morphism reflects how things are implemented internally while the ring extension itself is the mathematical object the user is supposed to work with.\n\nFor instance, if I do some complicated construction but the software understands by itself than the top ring is something simple and/or already efficiently implemented, then it can switch silently (magically) to this implementation. The basic example is the creation of towers of extensions (of finite fields, number fields, p-adic fields...) where it's convenient to flatten extensions to improve performances but where the user would certainly like to keep track of the intermediate fields. This philosophy is actually already more or less implemented for number fields; my motivation was to design a general framework to handle this.\n\nFor this reason, I'm really in favor to expose the backend ring/morphism to the user, but I can change my mind if you have good arguments. Why do you need this?\n\nBesides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the defition of `defining_morphism` would break this so again, I'm not really enthousiastic.",
    "created_at": "2021-12-29T09:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462122",
    "user": "caruso"
}
```

cc roed and saraedum who contributed to the writing of the class `RingExtension`.

When I designed ticket #21413, this idea was to keep the backend morphism private. The point behind this was the following: the backend ring/morphism reflects how things are implemented internally while the ring extension itself is the mathematical object the user is supposed to work with.

For instance, if I do some complicated construction but the software understands by itself than the top ring is something simple and/or already efficiently implemented, then it can switch silently (magically) to this implementation. The basic example is the creation of towers of extensions (of finite fields, number fields, p-adic fields...) where it's convenient to flatten extensions to improve performances but where the user would certainly like to keep track of the intermediate fields. This philosophy is actually already more or less implemented for number fields; my motivation was to design a general framework to handle this.

For this reason, I'm really in favor to expose the backend ring/morphism to the user, but I can change my mind if you have good arguments. Why do you need this?

Besides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the defition of `defining_morphism` would break this so again, I'm not really enthousiastic.



---

archive/issue_comments_462123.json:
```json
{
    "body": "Thank you for comments.\n\n> For this reason, I'm really in favor to expose the backend ring/morphism to the user, \n\nYou mean \"not to expose\"?\n\n> but I can change my mind if you have good arguments. Why do you need this?\n\nI want to recover the morphism defining the extension when I am only given a ring extension. I think this is a natural need.\n \n> Besides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the definition of `defining_morphism` would break this so again, I'm not really enthousiastic.\n\nThe present definition of `defining_morphism` is not what one(mathematician) would naturally expect. A ring extension R over S is defined by a morphism from S to R. \n\nIt seems `defining_morphism` is not yet used elsewhere in Sage library. So it seems quite safe to change the name. The new name `morphism_from_base` seems in good match with the definition. No?\n\nBut I do not insist to change the present definition if it is only me who finds the definition unnatural.",
    "created_at": "2021-12-29T11:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462123",
    "user": "klee"
}
```

Thank you for comments.

> For this reason, I'm really in favor to expose the backend ring/morphism to the user, 

You mean "not to expose"?

> but I can change my mind if you have good arguments. Why do you need this?

I want to recover the morphism defining the extension when I am only given a ring extension. I think this is a natural need.
 
> Besides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the definition of `defining_morphism` would break this so again, I'm not really enthousiastic.

The present definition of `defining_morphism` is not what one(mathematician) would naturally expect. A ring extension R over S is defined by a morphism from S to R. 

It seems `defining_morphism` is not yet used elsewhere in Sage library. So it seems quite safe to change the name. The new name `morphism_from_base` seems in good match with the definition. No?

But I do not insist to change the present definition if it is only me who finds the definition unnatural.



---

archive/issue_comments_462124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-30T00:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462124",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462125.json:
```json
{
    "body": "Replying to [comment:24 caruso]:\n> For instance, if I do some complicated construction but the software understands by itself than the top ring is something simple and/or already efficiently implemented, then it can switch silently (magically) to this implementation. The basic example is the creation of towers of extensions (of finite fields, number fields, p-adic fields...) where it's convenient to flatten extensions to improve performances but where the user would certainly like to keep track of the intermediate fields. This philosophy is actually already more or less implemented for number fields; my motivation was to design a general framework to handle this.\n\nI understand the motivation. But I do not see why this is the reason not to expose the defining morphism (in my sense) and the top ring from the ring extension.",
    "created_at": "2021-12-30T00:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462125",
    "user": "klee"
}
```

Replying to [comment:24 caruso]:
> For instance, if I do some complicated construction but the software understands by itself than the top ring is something simple and/or already efficiently implemented, then it can switch silently (magically) to this implementation. The basic example is the creation of towers of extensions (of finite fields, number fields, p-adic fields...) where it's convenient to flatten extensions to improve performances but where the user would certainly like to keep track of the intermediate fields. This philosophy is actually already more or less implemented for number fields; my motivation was to design a general framework to handle this.

I understand the motivation. But I do not see why this is the reason not to expose the defining morphism (in my sense) and the top ring from the ring extension.



---

archive/issue_comments_462126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-31T00:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462127.json:
```json
{
    "body": "Replying to [comment:24 caruso]:\n\n> For this reason, I'm really in favor to expose the backend ring/morphism to the user, but I can change my mind if you have good arguments. Why do you need this?\n\nI needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write\n\n```python\nfrom sage.rings.ring_extension_conversion import backend_morphism\n\nembedF = backend_morphism(self.defining_morphism())\n```\n\n\nto obtain the defining morphism from the ring extension `self`. Is there a simple solution?\n\n> Besides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the defition of `defining_morphism` would break this so again.\n\nWhat is broken? There is no change in the coercion model.",
    "created_at": "2022-01-01T03:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462127",
    "user": "klee"
}
```

Replying to [comment:24 caruso]:

> For this reason, I'm really in favor to expose the backend ring/morphism to the user, but I can change my mind if you have good arguments. Why do you need this?

I needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write

```python
from sage.rings.ring_extension_conversion import backend_morphism

embedF = backend_morphism(self.defining_morphism())
```


to obtain the defining morphism from the ring extension `self`. Is there a simple solution?

> Besides, I thought a long time (and changed my mind several times) to the coersion model and I came with something which, I think, was satisfying. Changing the defition of `defining_morphism` would break this so again.

What is broken? There is no change in the coercion model.



---

archive/issue_comments_462128.json:
```json
{
    "body": "Replying to [comment:31 klee]:\n\n> I needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write\n> {{{#!python\n> from sage.rings.ring_extension_conversion import backend_morphism\n> embedF = backend_morphism(self.defining_morphism())\n> }}}\n> \n> to obtain the defining morphism from the ring extension `self`. Is there a simple solution?\n\nThanks! I think that it's indeed the simplest solution.\n\nHowever, I continue claiming that if you want to use the `over` constructor, you should consider to option to always work with `L/K` in place of `L`.",
    "created_at": "2022-01-02T11:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462128",
    "user": "caruso"
}
```

Replying to [comment:31 klee]:

> I needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write
> {{{#!python
> from sage.rings.ring_extension_conversion import backend_morphism
> embedF = backend_morphism(self.defining_morphism())
> }}}
> 
> to obtain the defining morphism from the ring extension `self`. Is there a simple solution?

Thanks! I think that it's indeed the simplest solution.

However, I continue claiming that if you want to use the `over` constructor, you should consider to option to always work with `L/K` in place of `L`.



---

archive/issue_comments_462129.json:
```json
{
    "body": "Replying to [comment:32 caruso]:\n> Replying to [comment:31 klee]:\n> \n> > I needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write\n> > {{{#!python\n> > from sage.rings.ring_extension_conversion import backend_morphism\n> > embedF = backend_morphism(self.defining_morphism())\n> > }}}\n> > \n> > to obtain the defining morphism from the ring extension `self`. Is there a simple solution?\n> \n> Thanks! I think that it's indeed the simplest solution.\n\nFor #33075, I found that even this `embedF = self.defining_morphism()` works, perhaps because of the coercion from the extension to the top ring. This is even compatible with this ticket.\n\n> However, I continue claiming that if you want to use the `over` constructor, you should consider to option to always work with `L/K` in place of `L`.\n\nI don't get this. Real users choose to use whatever of `L/K` and `L` because they have access to both naturally. But for code in Sage library, it is presently inconvenient to get access to `L` (the defining morphism from `K` to `L`) from `L/K`. They are not implementation details but mathematically related objects.\n\nThe present definition of `defining_morphism()` is strange in that the object(the extension) appears as the codomain of the morphism that defines the object. I think there is no `defining_xxx()` method that has this cyclicity in Sage.",
    "created_at": "2022-01-03T02:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32390#issuecomment-462129",
    "user": "klee"
}
```

Replying to [comment:32 caruso]:
> Replying to [comment:31 klee]:
> 
> > I needed this ticket for #33075. But now I have made #33075 independent from this ticket. To do that, I was forced to write
> > {{{#!python
> > from sage.rings.ring_extension_conversion import backend_morphism
> > embedF = backend_morphism(self.defining_morphism())
> > }}}
> > 
> > to obtain the defining morphism from the ring extension `self`. Is there a simple solution?
> 
> Thanks! I think that it's indeed the simplest solution.

For #33075, I found that even this `embedF = self.defining_morphism()` works, perhaps because of the coercion from the extension to the top ring. This is even compatible with this ticket.

> However, I continue claiming that if you want to use the `over` constructor, you should consider to option to always work with `L/K` in place of `L`.

I don't get this. Real users choose to use whatever of `L/K` and `L` because they have access to both naturally. But for code in Sage library, it is presently inconvenient to get access to `L` (the defining morphism from `K` to `L`) from `L/K`. They are not implementation details but mathematically related objects.

The present definition of `defining_morphism()` is strange in that the object(the extension) appears as the codomain of the morphism that defines the object. I think there is no `defining_xxx()` method that has this cyclicity in Sage.
