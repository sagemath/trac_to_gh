# Issue 34452: make Compositions() an additive monoid

Issue created by migration from https://trac.sagemath.org/ticket/34689

Original creator: chapoton

Original creation time: 2022-10-23 18:29:16

CC:  tscrim mkoeppe klee slelievre

and also forbid compositions containing zeroes


---

Comment by chapoton created at 2022-10-23 18:30:13

Changing status from new to needs_review.


---

Comment by chapoton created at 2022-10-23 18:30:13

not sure if I should change `__add__` to `_add_` or not
----
New commits:


---

Comment by chapoton created at 2022-10-24 08:10:45

This has amusing side effects on `ncsf.py`, for example


```
File "sage/combinat/ncsf_qsym/ncsf.py", line 1686, in sage.combinat.ncsf_qsym.ncsf.NonCommutativeSymmetricFunctions.Bases.ElementMethods.to_symmetric_function
3250
Failed example:
3251
    x = R.an_element(); x
3252
Expected:
3253
    2*R[] + 2*R[1] + 3*R[1, 1]
3254
Got:
3255
    R[] + R['_', 'a', 'n', '_', 'e', 'l', 'e', 'm', 'e', 'n', 't', '_'] + 2*R[1] + 3*R[1, 1]

```



---

Comment by git created at 2022-10-24 08:30:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-24 18:16:31

lights are morally green, so please review


---

Comment by tscrim created at 2022-10-25 04:38:57

LGTM modulo that

```diff
-Preferably consider using ``IntegerVectors`` instead::
+Instead you must use ``IntegerVectors`` instead::
```

since it is no longer a preference.


---

Comment by git created at 2022-10-25 06:19:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-25 06:19:44

thanks, done


---

Comment by tscrim created at 2022-10-25 07:45:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-11-07 20:26:11

Resolution: fixed
