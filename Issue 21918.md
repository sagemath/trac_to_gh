# Issue 21918: Add more logic flags to more functions

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2017-01-08 13:48:10

CC:  vdelecroix

Some functions are handled with some flags in https://github.com/pynac/pynac/blob/master/ginac/function.cpp#L1581

This should be extended (in Pynac) and doctests added (here). This ticket should list which questions can be answered definitely to the positive. To start:

 - f(real).is_real() for f in sin/cos/tan/cot/sec/csc


---

Comment by vdelecroix created at 2017-01-08 14:20:55

The gamma function

```
sage: gamma(pi).is_real()
False
```


You might also want to deal with `is_positive` which would be easily handled for analytic functions whose power series have non-negative coefficients.

Are there flags in ginac for properties like: "power series with non-negative coefficients", "power series with integer coefficients", etc?


---

Comment by vdelecroix created at 2017-01-08 14:26:25

Hyperbolic trigonometric functions `cosh/sinh/tanh` and inverses `arccosh/arcsinh/arctanh`

```
sage: cosh(-3).is_real()
False
sage: cosh(-3).is_positive()
False
```



---

Comment by vdelecroix created at 2017-01-08 14:28:50

But instead of hardcoding all these informations in functions, it would be better to actually deduce it from some other properties (like Taylor series as I suggested before).


---

Comment by vdelecroix created at 2017-01-08 14:29:28

Will this approach be recursive, namely `cos(exp(-3) + log(2)).is_real()`?


---

Comment by rws created at 2017-01-08 14:53:09

Replying to [comment:5 vdelecroix]:
> it would be better to actually deduce it from some other properties (like Taylor series as I suggested before).

Not possible. Taylor series are determined in general by differentiation. There is no builtin formula which we can inspect.

> Will this approach be recursive, namely `cos(exp(-3) + log(2)).is_real()`?

Yes.


---

Comment by dimpase created at 2017-01-09 17:07:30

as discussed on sage-develop, the best way IMHO would be to be able to return
"Unknown" instead of false "False"...


---

Comment by rws created at 2017-01-10 06:54:10

Replying to [comment:7 dimpase]:
> as discussed on sage-develop, the best way IMHO would be to be able to return
> "Unknown" instead of false "False"...

See #22162.


---

Comment by rws created at 2017-01-11 08:00:35

Improvements in https://github.com/pynac/pynac/commit/acec86167e7a200a383199d0e23e1eea07ae634f


---

Comment by vdelecroix created at 2017-01-11 14:14:58

Nice! Could you add doctest to check

1) compatibility with assumptions

```
sage: x = SR.var('x')
sage: assume(x, 'real')
sage: cos(x).is_real()
```


2) complex stuff is actually `False`

```
cos(I).is_real()
sin(2 - I).is_real()
etc
```


3) What is the current status of?

```
sage: x = SR.var('x')
sage: assume(x, 'real')
sage: (cos(x) + 1).is_positive()
```

----
New commits:


---

Comment by git created at 2017-01-12 07:24:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2017-01-12 07:29:49

Replying to [comment:11 vdelecroix]:
> 3) What is the current status of?
> {{{
> sage: x = SR.var('x')
> sage: assume(x, 'real')
> sage: (cos(x) + 1).is_positive()
> }}}

Not possible using current machinery. Note the information kept is boolean (or maybe tri-state in the future) for speed reasons, as it is routinely used with manipulation of expressions. Any slowdown like numeric computations that are potentially calling !Python/Cython code from C++ should be avoided.


---

Comment by vdelecroix created at 2017-01-12 08:45:55

What does mean "dependencies  pynac-0.7.4"?


---

Comment by rws created at 2017-01-12 08:57:29

There is no ticket atm for the 0.7.4 upgrade. When there is I'll replace that with the ticket number.


---

Comment by git created at 2017-06-05 08:05:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2017-06-05 08:08:46

Changing status from new to needs_review.


---

Comment by rws created at 2017-08-24 14:09:36

Two failing doctests.


---

Comment by rws created at 2017-08-24 14:09:36

Changing status from needs_review to needs_work.


---

Comment by rws created at 2017-08-24 14:20:59

Actually the doctests were wrong: `real`<sup>`positive`</sup> is not real but `positve`<sup>`positive`</sup> is. Also `(cos(exp(real) + log(pos))<sup>pos</sup>)` is not real if the log argument is less than one. I replace the second pos with `8`. Sage teaches me math!


---

Comment by git created at 2017-08-24 14:24:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2017-08-24 14:24:52

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2017-08-26 14:36:12

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-09-02 09:34:12

Resolution: fixed
