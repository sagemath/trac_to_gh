# Issue 23893: Reverse plane partitions and Hillman-Grassl

archive/issues_023893.json:
```json
{
    "body": "CC:  troby tscrim jpswanson aschilling zhamaker mariamonks\n\nKeywords: IMA coding sprint, reverse plane partitions, tableaux\n\nLong ago I planned to build a class for reverse plane partitions once the tableaux class was overhauled (#17983). But the overhaul project never got finished, and I will probably not have much to add to it in foreseeable time.\n\nThe purpose of this ticket is to create a bare-bones class for reverse plane partitions (output is highly encouraged about what this class should be able to do and what it should inherit from!). Then, we want to implement the Hillman-Grassl correspondence and Sulzgruber's alternative bijection (arXiv:1612.03922v2).\n\nIssue created by migration from https://trac.sagemath.org/ticket/24130\n\n",
    "created_at": "2017-10-31T02:38:17Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "Reverse plane partitions and Hillman-Grassl",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23893",
    "user": "darij"
}
```
CC:  troby tscrim jpswanson aschilling zhamaker mariamonks

Keywords: IMA coding sprint, reverse plane partitions, tableaux

Long ago I planned to build a class for reverse plane partitions once the tableaux class was overhauled (#17983). But the overhaul project never got finished, and I will probably not have much to add to it in foreseeable time.

The purpose of this ticket is to create a bare-bones class for reverse plane partitions (output is highly encouraged about what this class should be able to do and what it should inherit from!). Then, we want to implement the Hillman-Grassl correspondence and Sulzgruber's alternative bijection (arXiv:1612.03922v2).

Issue created by migration from https://trac.sagemath.org/ticket/24130





---

archive/issue_comments_334938.json:
```json
{
    "body": "Other papers that might be of interest:\n\n- https://arxiv.org/abs/1501.00051 -- In particular, I would very much want to get the crystal structure added. I can do that once you have the basic parents.\n- https://arxiv.org/abs/1710.09695",
    "created_at": "2017-10-31T07:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334938",
    "user": "tscrim"
}
```

Other papers that might be of interest:

- https://arxiv.org/abs/1501.00051 -- In particular, I would very much want to get the crystal structure added. I can do that once you have the basic parents.
- https://arxiv.org/abs/1710.09695



---

archive/issue_comments_334939.json:
```json
{
    "body": "We've implemented the Hillman-Grassl correspondence and its inverse. So far this is separate from the class hierarchy and just a bunch of functions. We are also lacking Sulzgruber's, Pak's and Hopkins's variants.\n\nHow would you embed this into the classes? Or wait until Tableaux have been refactored?\n\nAlso, I have no idea if the doc works...\n----\nNew commits:",
    "created_at": "2018-04-01T18:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334939",
    "user": "darij"
}
```

We've implemented the Hillman-Grassl correspondence and its inverse. So far this is separate from the class hierarchy and just a bunch of functions. We are also lacking Sulzgruber's, Pak's and Hopkins's variants.

How would you embed this into the classes? Or wait until Tableaux have been refactored?

Also, I have no idea if the doc works...
----
New commits:



---

archive/issue_comments_334940.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T18:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334940",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T19:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334941",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334942.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T19:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334942",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334943.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T19:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334943",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T20:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334944",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334945.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T20:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334945",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334946.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T05:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334946",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T08:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334947",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T18:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334948",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334949.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T18:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334949",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334950.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-03T18:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334950",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334951.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-03T18:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334951",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334952.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-03T22:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334952",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334953.json:
```json
{
    "body": "Finished apart from the definitions of Pak and Salzgruber, which I'm not sure whether belong into the doc (I know for sure that Hopkins's paper defines them well; the other two don't look bad either, so it's not exactly a gap in the literature).\n\nTravis, can you look at the OOP? I've been mostly monkeying around here.",
    "created_at": "2018-04-03T22:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334953",
    "user": "darij"
}
```

Finished apart from the definitions of Pak and Salzgruber, which I'm not sure whether belong into the doc (I know for sure that Hopkins's paper defines them well; the other two don't look bad either, so it's not exactly a gap in the literature).

Travis, can you look at the OOP? I've been mostly monkeying around here.



---

archive/issue_comments_334954.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-03T22:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334954",
    "user": "darij"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334955.json:
```json
{
    "body": "You do not need the `WeakRPPs.__classcall_private__` as it just calls the \"base\" method (in the classcall sense).\n\nSome other comments:\n\n- It is not good to use abbreviations in class names: `RPP` -> `ReversePlanePartitions`.\n- For the qualifier \"weak\", do you expect there to be a good use for \"strong\" RPPs? If not, then I think we should keep it simple and remove \"weak\".\n- lazy import things:\n  {{{#!diff\nfrom .hillman_grassl import WeakRPP, WeakRPPs, hillman_grassl, hillman_grassl_inverse, pak_correspondence, sulzgruber_correspondence\nlazy_import(\"sage.combinat.hillman_grassl\", [\"WeakRPP\", \"WeakRPPs\", \"hillman_grassl\", \"hillman_grassl_inverse\", \"pak_correspondence\", \"sulzgruber_correspondence\"]\n  }}}\n- I do not see any benefit to adding the bijections to the global namespace since they are accessible via `Tableau` and `WeakRPP`, which are their only input formats. They are also too specialized IMO to be added to the global namespace. There's a bit of a case to be made for Pak/Sulzgruber, but at this point, I am not certain it is for the best to have them as global functions.\n- Having the module level explanations of everything means you cannot see the definitions in the interactive doc (i.e., via `?`), plus it looses some granularity (c.f., you added section headers). I think it would be more useful to have this in each user entry point, e.g., in `Tableau.hillman_grassl()`.\n- Paranoia: I would raw-string `r\"\"\"` the new methods to `Tableau`.\n- Micro-optimization: Faster to do `if not M:` than `if len(M) == 0:`.",
    "created_at": "2018-04-04T01:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334955",
    "user": "tscrim"
}
```

You do not need the `WeakRPPs.__classcall_private__` as it just calls the "base" method (in the classcall sense).

Some other comments:

- It is not good to use abbreviations in class names: `RPP` -> `ReversePlanePartitions`.
- For the qualifier "weak", do you expect there to be a good use for "strong" RPPs? If not, then I think we should keep it simple and remove "weak".
- lazy import things:
  {{{#!diff
from .hillman_grassl import WeakRPP, WeakRPPs, hillman_grassl, hillman_grassl_inverse, pak_correspondence, sulzgruber_correspondence
lazy_import("sage.combinat.hillman_grassl", ["WeakRPP", "WeakRPPs", "hillman_grassl", "hillman_grassl_inverse", "pak_correspondence", "sulzgruber_correspondence"]
  }}}
- I do not see any benefit to adding the bijections to the global namespace since they are accessible via `Tableau` and `WeakRPP`, which are their only input formats. They are also too specialized IMO to be added to the global namespace. There's a bit of a case to be made for Pak/Sulzgruber, but at this point, I am not certain it is for the best to have them as global functions.
- Having the module level explanations of everything means you cannot see the definitions in the interactive doc (i.e., via `?`), plus it looses some granularity (c.f., you added section headers). I think it would be more useful to have this in each user entry point, e.g., in `Tableau.hillman_grassl()`.
- Paranoia: I would raw-string `r"""` the new methods to `Tableau`.
- Micro-optimization: Faster to do `if not M:` than `if len(M) == 0:`.



---

archive/issue_comments_334956.json:
```json
{
    "body": "Made all the changes except for moving the doc into the methods. I'm not sure about the latter: should it be in the methods or in the functions? Should the definition of a \\lambda-array and of an rpp be included in it? If not, then are we really gaining much?",
    "created_at": "2018-04-04T15:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334956",
    "user": "darij"
}
```

Made all the changes except for moving the doc into the methods. I'm not sure about the latter: should it be in the methods or in the functions? Should the definition of a \lambda-array and of an rpp be included in it? If not, then are we really gaining much?



---

archive/issue_comments_334957.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-04T15:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334957",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334958.json:
```json
{
    "body": "Replying to [comment:18 darij]:\n> Made all the changes except for moving the doc into the methods. I'm not sure about the latter: should it be in the methods or in the functions? Should the definition of a \\lambda-array and of an rpp be included in it? If not, then are we really gaining much?\n\nIt should be in the main place you expect users to enter. For example, for Hillman-Grassl it would be in the `Tableau.hillman_grassl()` method because you do not import the (internal) function `hillman_grassl()`. Since you have a class for RPPs (and the main entry point is via RPPs), you don't need the definition of an RPP. It might be worthwhile to talk about the `\\lambda`-array definition in one place.\n\nIMO what you are gaining is ease of use for people who are discovering things in Sage via tab-completion and `?`, which is how I recommend people explore Sage (and is usually how I first try to learn what a method does).",
    "created_at": "2018-04-04T23:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334958",
    "user": "tscrim"
}
```

Replying to [comment:18 darij]:
> Made all the changes except for moving the doc into the methods. I'm not sure about the latter: should it be in the methods or in the functions? Should the definition of a \lambda-array and of an rpp be included in it? If not, then are we really gaining much?

It should be in the main place you expect users to enter. For example, for Hillman-Grassl it would be in the `Tableau.hillman_grassl()` method because you do not import the (internal) function `hillman_grassl()`. Since you have a class for RPPs (and the main entry point is via RPPs), you don't need the definition of an RPP. It might be worthwhile to talk about the `\lambda`-array definition in one place.

IMO what you are gaining is ease of use for people who are discovering things in Sage via tab-completion and `?`, which is how I recommend people explore Sage (and is usually how I first try to learn what a method does).



---

archive/issue_comments_334959.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T20:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334959",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334960.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-05T20:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334960",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334961.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T21:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334961",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334962.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-05T21:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334962",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334963.json:
```json
{
    "body": "All done.\n\nIn other news, this ticket spawned an MO discussion: https://mathoverflow.net/questions/297015/is-the-ford-fulkerson-algorithm-a-tropical-rational-function",
    "created_at": "2018-04-05T21:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334963",
    "user": "darij"
}
```

All done.

In other news, this ticket spawned an MO discussion: https://mathoverflow.net/questions/297015/is-the-ford-fulkerson-algorithm-a-tropical-rational-function



---

archive/issue_comments_334964.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-10T23:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334964",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334965.json:
```json
{
    "body": "I made some trivial reviewer changes. If my changes look good, then positive review.",
    "created_at": "2018-04-10T23:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334965",
    "user": "tscrim"
}
```

I made some trivial reviewer changes. If my changes look good, then positive review.



---

archive/issue_comments_334966.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-10T23:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334966",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334967.json:
```json
{
    "body": "Thank you!!",
    "created_at": "2018-04-10T23:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334967",
    "user": "darij"
}
```

Thank you!!



---

archive/issue_comments_334968.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-04-25T22:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334968",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_334969.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-04-25T22:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334969",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_334970.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-25T22:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334970",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334971.json:
```json
{
    "body": "The failing doctests were because of a change in __repr__. Fixed.",
    "created_at": "2018-04-25T22:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334971",
    "user": "darij"
}
```

The failing doctests were because of a change in __repr__. Fixed.



---

archive/issue_comments_334972.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23893#issuecomment-334972",
    "user": "vbraun"
}
```

Resolution: fixed
