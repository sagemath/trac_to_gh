# Issue 22640: atan2 of complex arguments inconsistencies

Issue created by migration from https://trac.sagemath.org/ticket/22877

Original creator: rws

Original creation time: 2017-04-26 14:42:26


```
sage: atan2(CC(I), CC(I+1))
0.615479708670387
sage: atan2(I, I+1)
arctan2(I, I + 1)
sage: atan2(CBF(I), CBF(I+1))
...
/home/ralf/sage/src/sage/libs/pynac/pynac.pyx in sage.libs.pynac.pynac.py_atan2 (build/cythonized/sage/libs/pynac/pynac.cpp:21132)()
   1798         P = RR
   1799     if y != 0:
-> 1800         if x > 0:
   1801             res = py_atan(abs(y/x))
   1802         elif x < 0:
...
TypeError: No order is defined for ComplexBalls.
```

To clarify, `atan2(I, I+1)` should give `atan(sqrt(1/2))` and `atan2(CBF(I), CBF(I+1))` should yield `[0.615479708670387 +/- 4.46e-16]`.


---

Comment by rws created at 2017-05-02 15:30:06

New commits:


---

Comment by rws created at 2017-05-02 15:30:06

Changing status from new to needs_review.


---

Comment by rws created at 2017-05-02 15:30:52

Changing component from symbolics to calculus.


---

Comment by tscrim created at 2017-05-03 03:23:14

LGTM.


---

Comment by tscrim created at 2017-05-03 03:23:14

Changing status from needs_review to positive_review.


---

Comment by rws created at 2017-05-03 05:36:18

Thanks.


---

Comment by vbraun created at 2017-05-05 20:31:31

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-05-05 20:31:31


```
[sagelib-8.0.beta5]     if P in (float, RR, RBF):
[sagelib-8.0.beta5]                           ^
[sagelib-8.0.beta5] ------------------------------------------------------------
[sagelib-8.0.beta5] 
[sagelib-8.0.beta5] sage/libs/pynac/pynac.pyx:1807:27: undeclared name not builtin: RBF
```



---

Comment by git created at 2017-05-06 06:00:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2017-05-06 06:01:18

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-05-06 15:56:26

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-11 21:58:41

Resolution: fixed
