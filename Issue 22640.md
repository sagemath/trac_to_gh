# Issue 22640: atan2 of complex arguments inconsistencies

archive/issues_022640.json:
```json
{
    "body": "\n```\nsage: atan2(CC(I), CC(I+1))\n0.615479708670387\nsage: atan2(I, I+1)\narctan2(I, I + 1)\nsage: atan2(CBF(I), CBF(I+1))\n...\n/home/ralf/sage/src/sage/libs/pynac/pynac.pyx in sage.libs.pynac.pynac.py_atan2 (build/cythonized/sage/libs/pynac/pynac.cpp:21132)()\n   1798         P = RR\n   1799     if y != 0:\n-> 1800         if x > 0:\n   1801             res = py_atan(abs(y/x))\n   1802         elif x < 0:\n...\nTypeError: No order is defined for ComplexBalls.\n```\n\nTo clarify, `atan2(I, I+1)` should give `atan(sqrt(1/2))` and `atan2(CBF(I), CBF(I+1))` should yield `[0.615479708670387 +/- 4.46e-16]`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22877\n\n",
    "created_at": "2017-04-26T14:42:26Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "atan2 of complex arguments inconsistencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22640",
    "user": "https://github.com/rwst"
}
```

```
sage: atan2(CC(I), CC(I+1))
0.615479708670387
sage: atan2(I, I+1)
arctan2(I, I + 1)
sage: atan2(CBF(I), CBF(I+1))
...
/home/ralf/sage/src/sage/libs/pynac/pynac.pyx in sage.libs.pynac.pynac.py_atan2 (build/cythonized/sage/libs/pynac/pynac.cpp:21132)()
   1798         P = RR
   1799     if y != 0:
-> 1800         if x > 0:
   1801             res = py_atan(abs(y/x))
   1802         elif x < 0:
...
TypeError: No order is defined for ComplexBalls.
```

To clarify, `atan2(I, I+1)` should give `atan(sqrt(1/2))` and `atan2(CBF(I), CBF(I+1))` should yield `[0.615479708670387 +/- 4.46e-16]`.

Issue created by migration from https://trac.sagemath.org/ticket/22877





---

archive/issue_comments_315501.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-05-02T15:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315501",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_315502.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-02T15:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315502",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_315503.json:
```json
{
    "body": "Changing component from symbolics to calculus.",
    "created_at": "2017-05-02T15:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315503",
    "user": "https://github.com/rwst"
}
```

Changing component from symbolics to calculus.



---

archive/issue_comments_315504.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-05-03T03:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315504",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_315505.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-03T03:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315505",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_315506.json:
```json
{
    "body": "Thanks.",
    "created_at": "2017-05-03T05:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315506",
    "user": "https://github.com/rwst"
}
```

Thanks.



---

archive/issue_comments_315507.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-05T20:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315507",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_315508.json:
```json
{
    "body": "\n```\n[sagelib-8.0.beta5]     if P in (float, RR, RBF):\n[sagelib-8.0.beta5]                           ^\n[sagelib-8.0.beta5] ------------------------------------------------------------\n[sagelib-8.0.beta5] \n[sagelib-8.0.beta5] sage/libs/pynac/pynac.pyx:1807:27: undeclared name not builtin: RBF\n```\n",
    "created_at": "2017-05-05T20:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315508",
    "user": "https://github.com/vbraun"
}
```


```
[sagelib-8.0.beta5]     if P in (float, RR, RBF):
[sagelib-8.0.beta5]                           ^
[sagelib-8.0.beta5] ------------------------------------------------------------
[sagelib-8.0.beta5] 
[sagelib-8.0.beta5] sage/libs/pynac/pynac.pyx:1807:27: undeclared name not builtin: RBF
```




---

archive/issue_comments_315509.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-06T06:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315510.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-06T06:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315510",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_315511.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-06T15:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315511",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_059419.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-11T21:58:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22640#event-59419"
}
```



---

archive/issue_comments_315512.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-11T21:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22640#issuecomment-315512",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
