# Issue 23835: Segfault when multiplication between symbolic expr. and non-monic poly over finite field

Issue created by migration from Trac.

Original creator: bruno

Original creation time: 2017-10-20 07:09:04

Keywords: polynomial

As reported on [Ask](https://ask.sagemath.org/question/39204/segmentation-fault-when-multiplying-by-variable/), the following provokes a segmentation fault:


```python
sage: P.<x> = GF(3)[]
sage: a = var('a')
sage: sigma = 2*x + 1
sage: a * sigma
segmentation fault
```


My investigation gives the following conditions for the segfault:
* Multiplication between an element of `SR` and `GF(p)['x']` ;
* The polynomial is non monic, and has at least two nonzero terms.

Note that converting the polynomial to `SR` beforehand yields the same error.


---

Comment by dimpase created at 2017-10-20 08:31:57

The real bug is that `SR(sigma)` succeeds (and returns something broken).
It should just fail, and then `*` will fail too, as it should.


---

Comment by vdelecroix created at 2017-10-20 19:18:58

Changing keywords from "polynomial" to "polynomial, symbolics".


---

Comment by vdelecroix created at 2017-10-21 09:31:52

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2017-10-21 09:31:52

A branch where SR does not accept anymore positive characteristic... let see what the patchbot has to say.
----
New commits:


---

Comment by git created at 2017-10-21 11:34:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2017-10-21 11:37:06

I think I fixed all doctests!


---

Comment by rws created at 2017-10-21 13:56:45

What a relief, thanks for your work.


---

Comment by rws created at 2017-10-21 13:56:45

Changing status from needs_review to positive_review.


---

Comment by git created at 2017-10-21 15:48:21

Changing status from positive_review to needs_review.


---

Comment by git created at 2017-10-21 15:48:21

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by vdelecroix created at 2017-10-21 15:49:38

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2017-10-21 15:49:38

A tiny change for py3 syntax (patchbot complaint). Setting back to positive review...


---

Comment by dimpase created at 2017-10-21 17:10:07

Does this mean that #21391 can now be closed as duplicate?


---

Comment by vbraun created at 2017-10-21 19:05:12

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-10-21 19:05:12

Merge conflict


---

Comment by vdelecroix created at 2017-10-21 20:24:38

Volker, can you provide more information?


---

Comment by dimpase created at 2017-10-21 20:37:06

Hmm, I guess, look at https://github.com/vbraun/sage/tree/develop ?


---

Comment by git created at 2017-10-22 18:24:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-10-22 18:25:13

rebased on 8.1.beta9


---

Comment by vdelecroix created at 2017-10-22 18:25:13

Changing status from needs_work to needs_review.


---

Comment by git created at 2017-10-22 18:27:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-10-23 19:56:52

ping?


---

Comment by tscrim created at 2017-10-23 22:24:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-10-29 10:32:22

Resolution: fixed
