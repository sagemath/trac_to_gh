# Issue 14973: Fix latex for operation tables

Issue created by migration from https://trac.sagemath.org/ticket/15210

Original creator: nthiery

Original creation time: 2013-09-18 11:39:36

CC:  rbeezer


```
    sage: from sage.matrix.operation_table import OperationTable
    sage: R=Integers(2)
    sage: T=OperationTable(R, operation=operator.mul)
    sage: view(T)
    *** boom ***
```

And indeed, there is a spurious \ in 2\ex in the latex output:

```
    sage: T._latex_()
    '{\\setlength{\\arraycolsep}{2\ex}\n\\begin{array}{r|*{2}{r}}\n\\multicolumn{1}{c|}{\\ast}&a&b\\\\\\hline\n{}a&a&a\\\\\n{}b&a&b\\\\\n\\end{array}}'
```


Reported by Nicolas Martin and LoÃ¯c Devilliers



---

Comment by nthiery created at 2013-09-18 11:44:20

I am wondering if we should not actualy run latex whenever we doctest a latex method. That is include something like

```
    sage: view(T, viewer=None)
```

Or just

```
    sage: view(T)
```

If we configure `view` to not actually run the viewer when in doctest mode.


---

Comment by nthiery created at 2013-11-02 07:45:41

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-11-02 22:44:01

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-11-02 22:44:01

Replying to [comment:1 nthiery]:
> I am wondering if we should not actualy run latex whenever we doctest a latex method.

Remember that LaTeX isn't a prerequisite of Sage, so we could only do that as optional doctest.

The patch obviously fixes the bug.


---

Comment by jdemeyer created at 2013-11-04 07:12:05


```
sage -t devel/sage/sage/matrix/operation_table.py
**********************************************************************
File "devel/sage/sage/matrix/operation_table.py", line 280, in sage.matrix.operation_table.OperationTable
Failed example:
    T._latex_()
Expected:
    '{\\setlength{\\arraycolsep}{2\\ex}\n\\begin{array}{r|*{0}{r}}\n\\multicolumn{1}{c|}{\\ast}\\\\\\hline\n\\end{array}}'
Got:
    '{\\setlength{\\arraycolsep}{2ex}\n\\begin{array}{r|*{0}{r}}\n\\multicolumn{1}{c|}{\\ast}\\\\\\hline\n\\end{array}}'
**********************************************************************
File "devel/sage/sage/matrix/operation_table.py", line 675, in sage.matrix.operation_table.OperationTable.set_print_symbols
Failed example:
    T._latex_()
Expected:
    '{\\setlength{\\arraycolsep}{2\\ex}\n\\begin{array}{r|*{3}{r}}\n\\multicolumn{1}{c|}{\\times}&a&b&c\\\\\\hline\n{}a&a&b&c\\\\\n{}b&b&c&a\\\\\n{}c&c&a&b\\\\\n\\end{a
rray}}'
Got:
    '{\\setlength{\\arraycolsep}{2ex}\n\\begin{array}{r|*{3}{r}}\n\\multicolumn{1}{c|}{\\times}&a&b&c\\\\\\hline\n{}a&a&b&c\\\\\n{}b&b&c&a\\\\\n{}c&c&a&b\\\\\n\\end{arr
ay}}'
**********************************************************************
```



---

Comment by jdemeyer created at 2013-11-04 07:12:05

Changing status from positive_review to needs_work.


---

Attachment

Oops, how did I missed this??? Thanks for the report ... Fixed in the updated patch.


---

Comment by nthiery created at 2013-11-05 14:06:32

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-11-08 10:02:15

Resolution: fixed
