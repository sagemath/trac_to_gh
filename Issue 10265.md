# Issue 10265: Add sum of digits of a sequence to the word constructor

Issue created by migration from https://trac.sagemath.org/ticket/10266

Original creator: slabbe

Original creation time: 2010-11-14 18:39:34

Assignee: slabbe

CC:  abmasse

Add a word constructor that returns the sequence of the sum mod `m` of the digits written in base ``base`` of the integer sequence ``seq``.

For example, the sum of digits modulo 2 of the prime numbers written in base 2::


```
sage: words.SumDigits(primes(1000))
word: 1001110100111010111011001011101110011011...
```



---

Comment by slabbe created at 2010-11-14 18:41:27

Changing status from new to needs_review.


---

Comment by slabbe created at 2010-11-14 18:41:27

Needs review!


---

Comment by abmasse created at 2010-11-15 02:05:50

Hi Sébastien!

Some remarks

  1. I'm not sure that this generator should be placed here. It sounds a lot like the `delta` and `partial_sums` functions for the infinite words class. Shouldn't it be placed there along with these functions? Another argument in that direction: to be more coherent with the object-oriented approach, it seems to me that the parameter `seq` should be `self`, i.e. the function should belong to the word/sequence `seq`.
  1. If you don't agree with the first comment, I suggest to name the function `SumDigitsWord`.
  1. One of the parameter is `m`, I suggest replacing it with `mod` which is more significant.
  1. Is there any reason why the `m` parameter allows one to relabel the word with new letters? I don't think the function `SumDigits` should be taking care of that translation.
  1. For the Thue-Morse word example, I would add a line that checks if the first, say 500 letters, are indeed the same.
  1. Very minor remark, but in the first sentence of the docstring, I would replace "mod" with "modulo". 

That's it for now!


---

Comment by abmasse created at 2010-11-15 02:05:50

Changing status from needs_review to needs_work.


---

Attachment

Applies over sage-4.6


---

Comment by slabbe created at 2010-11-19 20:15:23

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2010-11-19 20:15:23

Thanks for the good review Alexandre. I followed all of your suggestions and I just reuploaded the patch.

Needs review!


---

Comment by abmasse created at 2010-11-26 19:19:20

Hi, Sébastien !

Thank you for the modifications. There is one last thing that need to be corrected. When I create a word with a negative value, there is an infinite loop


```
sage: w = Word([-1,0,1,2,3,4,5])
sage: w.sum_digits() # infinite loop

```


Except that, everything else seems fine.


---

Comment by abmasse created at 2010-11-26 19:19:20

Changing status from needs_review to needs_work.


---

Comment by slabbe created at 2010-11-26 22:46:47

I just uploaded a patch which fixes the problem found by Alexandre.


---

Comment by slabbe created at 2010-11-26 22:46:47

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2010-11-26 22:47:10

Applies over the precedent patch


---

Attachment

I just finished testing the two patches. Everything builds fine, all tests pass (except for one that is not related). All my recommendations have been followed. Positive review.


---

Comment by abmasse created at 2010-12-03 22:00:55

Changing priority from major to minor.


---

Comment by abmasse created at 2010-12-03 22:00:55

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-01-12 06:34:04

Resolution: fixed
