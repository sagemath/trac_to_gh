# Issue 12724: make coverageall print the number of untested functions

archive/issues_012724.json:
```json
{
    "body": "Assignee: mvngu\n\nKeywords: coverageall\n\nThe upcoming patch adds a line to the output of `sage -coverageall`, with the number of untested functions.  It also fixes a plural.  Here is an example of the new output:\n\n\n```\n[aghitza@cerelia sage-5.0.beta13]$ ./sage -coverageall devel/sage/sage/coding\nag_code.py: 100% (1 of 1)\nbinary_code.pyx: 91% (41 of 45)\ncode_bounds.py: 100% (17 of 17)\ncode_constructions.py: 96% (25 of 26)\ndecoder.py: 100% (3 of 3)\nguava.py: 100% (3 of 3)\nlinear_code.py: 82% (52 of 63)\nsd_codes.py: 20% (1 of 5)\nsource_coding/huffman.py: 100% (9 of 9)\n\nOverall weighted coverage score:  88.1%\nTotal number of functions:  172\nNumber of untested functions:  20\nWe need    3 more function(s) to get to 90% coverage.\nWe need   11 more function(s) to get to 95% coverage.\nWe need   18 more function(s) to get to 99% coverage.\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12896\n\n",
    "created_at": "2012-05-01T22:02:28Z",
    "labels": [
        "documentation",
        "minor",
        "enhancement"
    ],
    "title": "make coverageall print the number of untested functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12724",
    "user": "AlexGhitza"
}
```
Assignee: mvngu

Keywords: coverageall

The upcoming patch adds a line to the output of `sage -coverageall`, with the number of untested functions.  It also fixes a plural.  Here is an example of the new output:


```
[aghitza@cerelia sage-5.0.beta13]$ ./sage -coverageall devel/sage/sage/coding
ag_code.py: 100% (1 of 1)
binary_code.pyx: 91% (41 of 45)
code_bounds.py: 100% (17 of 17)
code_constructions.py: 96% (25 of 26)
decoder.py: 100% (3 of 3)
guava.py: 100% (3 of 3)
linear_code.py: 82% (52 of 63)
sd_codes.py: 20% (1 of 5)
source_coding/huffman.py: 100% (9 of 9)

Overall weighted coverage score:  88.1%
Total number of functions:  172
Number of untested functions:  20
We need    3 more function(s) to get to 90% coverage.
We need   11 more function(s) to get to 95% coverage.
We need   18 more function(s) to get to 99% coverage.
```


Issue created by migration from https://trac.sagemath.org/ticket/12896





---

archive/issue_comments_152425.json:
```json
{
    "body": "scripts repo",
    "created_at": "2012-05-01T22:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12724#issuecomment-152425",
    "user": "AlexGhitza"
}
```

scripts repo



---

archive/issue_comments_152426.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-05-01T22:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12724#issuecomment-152426",
    "user": "AlexGhitza"
}
```

Attachment



---

archive/issue_comments_152427.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-01T22:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12724#issuecomment-152427",
    "user": "AlexGhitza"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152428.json:
```json
{
    "body": "With the exact number of untested functions we don't have to estimate `scr` by\n\n```\nscr = 0\n```\n\n\n```\ni = y.rfind(':')\nj = y.rfind('%')\nscr += int(y[i+1:j]) * float(n)\n```\n\nand should use\n\n```\nscr = (total - untested) * 100\n```\n\ninstead.\n\nAlso take note of #5859.",
    "created_at": "2012-05-03T18:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12724#issuecomment-152428",
    "user": "aapitzsch"
}
```

With the exact number of untested functions we don't have to estimate `scr` by

```
scr = 0
```


```
i = y.rfind(':')
j = y.rfind('%')
scr += int(y[i+1:j]) * float(n)
```

and should use

```
scr = (total - untested) * 100
```

instead.

Also take note of #5859.



---

archive/issue_comments_152429.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-03T18:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12724#issuecomment-152429",
    "user": "aapitzsch"
}
```

Changing status from needs_review to needs_work.
