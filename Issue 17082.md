# Issue 17082: Add a powers() method to monoid elements

Issue created by migration from https://trac.sagemath.org/ticket/17319

Original creator: pbruin

Original creation time: 2014-11-12 10:49:20

Keywords: power

The purpose of this ticket is to add a `powers()` method to `MonoidElement` and `RingElement` such that `x.powers(n)` returns `[x^0, x^1, ..., x^(n-1)]`.  This only needs _n_ - 1 multiplications and hence is more efficient than calling `[x^i for i in xrange(n)]`. Examples:

```
sage: G = SymmetricGroup(4)
sage: g = G([2,3,4,1])
sage: g.powers(4)
[(), (1,2,3,4), (1,3)(2,4), (1,4,3,2)]
sage: 5.powers(3)
[1, 5, 25]
```

Inspired by the `powers()` function that was recently added to PARI.


---

Comment by pbruin created at 2014-11-12 10:52:08

The method needs to be added twice because `RingElement` does not inherit from `MonoidElement`.  I tried the alternative of adding it to `Monoids.ElementMethods`, but this is much slower.


---

Comment by pbruin created at 2014-11-12 10:52:08

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-11-12 15:21:28

I'm going to be (extremely) paranoid and ask to rewrite `x *= self` as `x = x * self` in case something happens to get done in place. Otherwise LGTM.

Edit - Actually could you also add it to `Monoids.ElementMethods` for monoids whose elements don't inherit from `MonoidElement`?


---

Comment by git created at 2014-11-12 15:40:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-11-12 15:43:12

Replying to [comment:2 tscrim]:
> I'm going to be (extremely) paranoid and ask to rewrite `x *= self` as `x = x * self` in case something happens to get done in place. Otherwise LGTM.
Good point, done.
> Edit - Actually could you also add it to `Monoids.ElementMethods` for monoids whose elements don't inherit from `MonoidElement`?
Also done; matrices are an example of this.


---

Comment by tscrim created at 2014-11-12 15:48:38

Thanks!


---

Comment by tscrim created at 2014-11-12 15:48:38

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-11-12 18:51:49

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-11-12 18:51:49

Changing status from positive_review to needs_review.


---

Comment by pbruin created at 2014-11-12 18:52:54

The last addition made two doctests fail, this commit fixes them.


---

Comment by pbruin created at 2014-11-12 18:52:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-15 16:16:00

Resolution: fixed
