# Issue 24469: py3: create a "make test-python3" target

archive/issues_024469.json:
```json
{
    "body": "CC:  embray jdemeyer tscrim fbissey vbraun\n\nto test things that should work already on py3. Then set up a buildbot to monitor regressions....\n\nIssue created by migration from https://trac.sagemath.org/ticket/24706\n\n",
    "created_at": "2018-02-10T19:34:23Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "title": "py3: create a \"make test-python3\" target",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24469",
    "user": "chapoton"
}
```
CC:  embray jdemeyer tscrim fbissey vbraun

to test things that should work already on py3. Then set up a buildbot to monitor regressions....

Issue created by migration from https://trac.sagemath.org/ticket/24706





---

archive/issue_comments_343295.json:
```json
{
    "body": "Here is my naive attempt. Help from experts is badly required..\n----\nNew commits:",
    "created_at": "2018-02-10T19:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343295",
    "user": "chapoton"
}
```

Here is my naive attempt. Help from experts is badly required..
----
New commits:



---

archive/issue_comments_343296.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2018-02-10T19:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343296",
    "user": "chapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_343297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-11T07:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343297",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_343298.json:
```json
{
    "body": "Obviously, does not work\n\n```\nchapoton@icj-laptop:~/sage3$ make testpython3\nexport SAGE_PYTHON3=yes && \\\nbuild\n/bin/sh: 2: build: not found\nMakefile:129\u00a0: la recette pour la cible \u00ab\u00a0testpython3\u00a0\u00bb a \u00e9chou\u00e9e\nmake: *** [testpython3] Erreur 127\n```\n",
    "created_at": "2018-02-11T08:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343298",
    "user": "chapoton"
}
```

Obviously, does not work

```
chapoton@icj-laptop:~/sage3$ make testpython3
export SAGE_PYTHON3=yes && \
build
/bin/sh: 2: build: not found
Makefile:129 : la recette pour la cible « testpython3 » a échouée
make: *** [testpython3] Erreur 127
```




---

archive/issue_comments_343299.json:
```json
{
    "body": "Replying to [ticket:24706 chapoton]:\n> to test things that should work already on py3.\n\nPlease elaborate. Exactly what should `make testpython3` do?",
    "created_at": "2018-02-11T08:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343299",
    "user": "jdemeyer"
}
```

Replying to [ticket:24706 chapoton]:
> to test things that should work already on py3.

Please elaborate. Exactly what should `make testpython3` do?



---

archive/issue_comments_343300.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> Obviously, does not work\n\nDid you mean `$(MAKE) build`?",
    "created_at": "2018-02-11T08:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343300",
    "user": "jdemeyer"
}
```

Replying to [comment:4 chapoton]:
> Obviously, does not work

Did you mean `$(MAKE) build`?



---

archive/issue_comments_343301.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-11T10:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343301",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_343302.json:
```json
{
    "body": "Volker has asked (several times in sage-devel) that one creates such a make target to monitor progress on python3 sage.\n\nFor the moment, on vanilla-sage, only \"make build\" will work. Maybe one day one will add the html documentation construction and then also the tests..",
    "created_at": "2018-02-11T10:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343302",
    "user": "chapoton"
}
```

Volker has asked (several times in sage-devel) that one creates such a make target to monitor progress on python3 sage.

For the moment, on vanilla-sage, only "make build" will work. Maybe one day one will add the html documentation construction and then also the tests..



---

archive/issue_comments_343303.json:
```json
{
    "body": "If this is really meant only for the buildbot, can we make that explicit? For example, by using `buildbot-py3` as target name.",
    "created_at": "2018-02-11T20:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343303",
    "user": "jdemeyer"
}
```

If this is really meant only for the buildbot, can we make that explicit? For example, by using `buildbot-py3` as target name.



---

archive/issue_comments_343304.json:
```json
{
    "body": "This does not build the doc. Is that intentional?",
    "created_at": "2018-02-11T20:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343304",
    "user": "jdemeyer"
}
```

This does not build the doc. Is that intentional?



---

archive/issue_comments_343305.json:
```json
{
    "body": "ok for changing the name of the target, sure.\n\nAs far as I can tell, html-doc does not build. Only Erik knows if we are close or not to \nachieve that.",
    "created_at": "2018-02-11T20:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343305",
    "user": "chapoton"
}
```

ok for changing the name of the target, sure.

As far as I can tell, html-doc does not build. Only Erik knows if we are close or not to 
achieve that.



---

archive/issue_comments_343306.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-11T20:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343306",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_343307.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-02-12T07:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343307",
    "user": "chapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_343308.json:
```json
{
    "body": "Bikeshed: it looks a bit strange to put it in between the various test targets. positive_review if you move it to a more logical place inside the `Makefile` and you fill in the \"Author\" field on Trac.",
    "created_at": "2018-02-12T09:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343308",
    "user": "jdemeyer"
}
```

Bikeshed: it looks a bit strange to put it in between the various test targets. positive_review if you move it to a more logical place inside the `Makefile` and you fill in the "Author" field on Trac.



---

archive/issue_comments_343309.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-12T09:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343309",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_343310.json:
```json
{
    "body": "like that ?",
    "created_at": "2018-02-12T09:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343310",
    "user": "chapoton"
}
```

like that ?



---

archive/issue_comments_343311.json:
```json
{
    "body": "Replying to [comment:11 chapoton]:\n> ok for changing the name of the target, sure.\n> \n> As far as I can tell, html-doc does not build. Only Erik knows if we are close or not to \n> achieve that.\n\nActually I don't know off the top of my head.  I don't think I've even tried :)",
    "created_at": "2018-02-12T10:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343311",
    "user": "embray"
}
```

Replying to [comment:11 chapoton]:
> ok for changing the name of the target, sure.
> 
> As far as I can tell, html-doc does not build. Only Erik knows if we are close or not to 
> achieve that.

Actually I don't know off the top of my head.  I don't think I've even tried :)



---

archive/issue_comments_343312.json:
```json
{
    "body": "If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.",
    "created_at": "2018-02-12T10:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343312",
    "user": "fbissey"
}
```

If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.



---

archive/issue_comments_343313.json:
```json
{
    "body": "Replying to [comment:18 fbissey]:\n> If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.\n\nin which ticket, this libsingular issue ?",
    "created_at": "2018-02-12T12:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343313",
    "user": "chapoton"
}
```

Replying to [comment:18 fbissey]:
> If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.

in which ticket, this libsingular issue ?



---

archive/issue_comments_343314.json:
```json
{
    "body": "Replying to [comment:18 fbissey]:\n> If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.\n\nWhat do you mean by \"no go\" ? It think it is rather important to prevent regression in the build process. This has just happened with subprocess32.",
    "created_at": "2018-02-12T13:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343314",
    "user": "chapoton"
}
```

Replying to [comment:18 fbissey]:
> If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.

What do you mean by "no go" ? It think it is rather important to prevent regression in the build process. This has just happened with subprocess32.



---

archive/issue_comments_343315.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-12T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343315",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_343316.json:
```json
{
    "body": "In `.PHONY`, it looks like you are using spaces instead of a TAB.",
    "created_at": "2018-02-12T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343316",
    "user": "jdemeyer"
}
```

In `.PHONY`, it looks like you are using spaces instead of a TAB.



---

archive/issue_comments_343317.json:
```json
{
    "body": "Replying to [comment:21 jdemeyer]:\n> In `.PHONY`, it looks like you are using spaces instead of a TAB.\n\nThanks. But I have no idea of the syntax of makefiles. Would you please correct it ?",
    "created_at": "2018-02-12T13:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343317",
    "user": "chapoton"
}
```

Replying to [comment:21 jdemeyer]:
> In `.PHONY`, it looks like you are using spaces instead of a TAB.

Thanks. But I have no idea of the syntax of makefiles. Would you please correct it ?



---

archive/issue_comments_343318.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-12T20:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343318",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_343319.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-12T20:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343319",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_343320.json:
```json
{
    "body": "ok, Done. I hope.",
    "created_at": "2018-02-12T20:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343320",
    "user": "chapoton"
}
```

ok, Done. I hope.



---

archive/issue_comments_343321.json:
```json
{
    "body": "Replying to [comment:20 chapoton]:\n> Replying to [comment:18 fbissey]:\n> > If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.\n> \n> What do you mean by \"no go\" ? It think it is rather important to prevent regression in the build process. This has just happened with subprocess32. \n\nThat was meant as an answer to question of building the doc. sage-on-gentoo does build with python3.6 routinely, it is part of my testing. So long as I cannot start a sage build with python3 there is no point in trying to build the doc. It will fail.",
    "created_at": "2018-02-12T20:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343321",
    "user": "fbissey"
}
```

Replying to [comment:20 chapoton]:
> Replying to [comment:18 fbissey]:
> > If sage doesn't start, it is no go anyway. I am still waiting for the fix to load libsingular properly to get in to see what breaks next.
> 
> What do you mean by "no go" ? It think it is rather important to prevent regression in the build process. This has just happened with subprocess32. 

That was meant as an answer to question of building the doc. sage-on-gentoo does build with python3.6 routinely, it is part of my testing. So long as I cannot start a sage build with python3 there is no point in trying to build the doc. It will fail.



---

archive/issue_comments_343322.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-13T09:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343322",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343323.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-13T09:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343323",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343324.json:
```json
{
    "body": "There were almost more commits than lines of code on this branch, so I squashed everything.",
    "created_at": "2018-02-13T09:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343324",
    "user": "jdemeyer"
}
```

There were almost more commits than lines of code on this branch, so I squashed everything.



---

archive/issue_comments_343325.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-02-14T13:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343325",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_343326.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-14T13:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343326",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343327.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-14T14:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343327",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_343328.json:
```json
{
    "body": "Looks good to me. Can somebody else confirm please ?",
    "created_at": "2018-03-04T14:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343328",
    "user": "chapoton"
}
```

Looks good to me. Can somebody else confirm please ?



---

archive/issue_comments_343329.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-05T11:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343329",
    "user": "embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343330.json:
```json
{
    "body": "I question whether it's actually useful to have this in the makefile, but if you say it is well there's no harm in it.",
    "created_at": "2018-03-05T11:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343330",
    "user": "embray"
}
```

I question whether it's actually useful to have this in the makefile, but if you say it is well there's no harm in it.



---

archive/issue_comments_343331.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-06T23:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24469#issuecomment-343331",
    "user": "vbraun"
}
```

Resolution: fixed
