# Issue 29110: Signed Representation

Issue created by migration from https://trac.sagemath.org/ticket/29347

Original creator: @coolsidd

Original creation time: 2020-03-16 14:42:01




---

Comment by @coolsidd created at 2020-03-16 14:47:20

Changing type from PLEASE CHANGE to enhancement.


---

Comment by @coolsidd created at 2020-03-16 14:47:20

Sage requires the implementation of common representations, like the sign representation of the symmetric group


---

Comment by @coolsidd created at 2020-03-16 14:47:20

Changing keywords from "" to "Representation, signed".


---

Comment by @coolsidd created at 2020-03-16 14:47:20

Set assignee to @coolsidd.


---

Comment by @coolsidd created at 2020-03-16 14:47:20

Changing component from PLEASE CHANGE to algebra.


---

Comment by git created at 2020-03-17 05:49:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-17 09:09:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @coolsidd created at 2020-03-17 09:56:55

Changing status from new to needs_review.


---

Comment by @coolsidd created at 2020-03-17 09:56:55

Could someone review the implementation?


---

Comment by git created at 2020-03-18 10:48:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-18 12:12:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-21 16:59:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-25 12:15:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-25 20:14:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-26 17:36:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-27 14:56:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-08 14:50:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-04-08 23:34:17

Here are my comments:


```diff
             if isinstance(scalar, Element):
-                P = self.parent()
                 if not self:
                     return self
+                P = self.parent()
```


I believe this is faster:

```diff
-                    return (P.sign_analogue(scalar)) * self
+                    return self if P.sign_analogue(scalar) > 0 else -self
```

Note that the sign should never be 0.

This is overly complicated and not quite correct:

```python
        self.sign_analogue = sign_analogue
        if self.sign_analogue is None:
            if self.__default_sign is not None:
                self.sign_analogue = self.__default_sign
            else:
                raise NotImplementedError(
                    "Sign Representation is only defined over FiniteGroups and CoxeterGroups, and not over {}".format(
                        type(group)
                    )
                )
```

I would instead do

```python
         if sign_analogue is None:
             try:
                 self.sign_analogue = self._default_sign
             except AttributeError:
                 raise TypeError("a sign function must be given")
```

Furthermore, I would call it `sign_function` instead of `sign_analogue`.
Also, you should use a single underscore for `_default_sign`.

You can remove the `__init__` implementation for all of the concrete base classes (although please move the `TestSuite` test to the class-level doc).

This is overly complicated:
{{#!diff
-return ((elem.order() % 2) * -2) + 1
+return (-1)**elem.order()
}}}
and similar for the Coxeter group code.

Shouldn't there be a similar generic

```
def sign_representation(self, base_ring=None, side="twosided"):
```

for objects in the category of finite groups?


---

Comment by tscrim created at 2020-04-08 23:36:56

Changing status from needs_review to needs_work.


---

Comment by @DaveWitteMorris created at 2020-04-09 06:23:31

I do not understand this:

```
class SignRepresentationFinitegroup(SignRepresentation_abstract):
    ...

    def __default_sign(self, elem):
        ...
        return ((elem.order() % 2) * -2) + 1
```

You will almost never get a homomorphism to {+1,-1} by looking only at the parity of the order of an element.  For example, it is easy to find examples where the product of two elements of even order has even order, and the product of two elements of odd order has odd order, even in abelian groups.)  So the function will rarely yield a representation.

The upshot is that abstract finite groups do not have a natural "sign representation".  I think it would be best to implement sign representations only for permutation groups and Coxeter groups.  If there are other groups that have a natural subgroup of index 2, then you could take this subgroup to be the kernel of your sign representation, but this is an unusual situation, other than for permutation groups and groups of real matrices (where the sign of the determinant is a natural sign function).


---

Comment by tscrim created at 2020-04-09 23:03:08

Ah, right. Basic group theory... (I probably have worked way too long in only Coxeter groups haha)

```
sage: G = AbelianGroup([3,5])
sage: x,y = G.gens()
sage: x.order(), y.order()
(3, 5)
sage: (x*y).order()
15
```

So we should just remove `SignRepresentationFinitegroup`. Otherwise we could convert it to the sign of the determinant by

```python
def _default_sign(self, elem):
    return 1 if elem.det() > 0 else -1
```

(which if the group passed happens to have elements incomparable to 0, this should result in an error).


---

Comment by git created at 2020-04-11 16:04:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-04-17 14:01:16

Please get rid of the specialized `__init__` methods that create an unnecessary lambda function to pass to the ABC. This is the main point of having the `_default_sign` method.


---

Comment by git created at 2020-04-20 23:47:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 00:09:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 01:22:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 01:54:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 02:26:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 02:49:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 02:53:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 02:58:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 03:01:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-04-21 03:37:39

Looks good to me now.


---

Comment by tscrim created at 2020-04-21 03:37:39

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2020-04-21 03:38:10

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2020-04-21 03:38:10

Real name as author. Once done, you can set to a positive review.


---

Comment by @coolsidd created at 2020-04-21 21:49:04

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2020-04-23 22:32:52

Resolution: fixed
