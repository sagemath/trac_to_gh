# Issue 29110: Signed Representation

archive/issues_029110.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/29347\n\n",
    "created_at": "2020-03-16T14:42:01Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Signed Representation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29110",
    "user": "@coolsidd"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/29347





---

archive/issue_comments_412096.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-03-16T14:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412096",
    "user": "@coolsidd"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_412097.json:
```json
{
    "body": "Sage requires the implementation of common representations, like the sign representation of the symmetric group",
    "created_at": "2020-03-16T14:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412097",
    "user": "@coolsidd"
}
```

Sage requires the implementation of common representations, like the sign representation of the symmetric group



---

archive/issue_comments_412098.json:
```json
{
    "body": "Changing keywords from \"\" to \"Representation, signed\".",
    "created_at": "2020-03-16T14:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412098",
    "user": "@coolsidd"
}
```

Changing keywords from "" to "Representation, signed".



---

archive/issue_comments_412099.json:
```json
{
    "body": "Set assignee to @coolsidd.",
    "created_at": "2020-03-16T14:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412099",
    "user": "@coolsidd"
}
```

Set assignee to @coolsidd.



---

archive/issue_comments_412100.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2020-03-16T14:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412100",
    "user": "@coolsidd"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_412101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-17T05:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412102.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-17T09:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412102",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412103.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-17T09:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412103",
    "user": "@coolsidd"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412104.json:
```json
{
    "body": "Could someone review the implementation?",
    "created_at": "2020-03-17T09:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412104",
    "user": "@coolsidd"
}
```

Could someone review the implementation?



---

archive/issue_comments_412105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-18T10:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412105",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412106.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-18T12:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412106",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-21T16:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-25T12:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412108",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-25T20:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412109",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T17:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-27T14:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412111",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412112.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-08T14:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412112",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412113.json:
```json
{
    "body": "Here are my comments:\n\n\n```diff\n             if isinstance(scalar, Element):\n-                P = self.parent()\n                 if not self:\n                     return self\n+                P = self.parent()\n```\n\n\nI believe this is faster:\n\n```diff\n-                    return (P.sign_analogue(scalar)) * self\n+                    return self if P.sign_analogue(scalar) > 0 else -self\n```\n\nNote that the sign should never be 0.\n\nThis is overly complicated and not quite correct:\n\n```python\n        self.sign_analogue = sign_analogue\n        if self.sign_analogue is None:\n            if self.__default_sign is not None:\n                self.sign_analogue = self.__default_sign\n            else:\n                raise NotImplementedError(\n                    \"Sign Representation is only defined over FiniteGroups and CoxeterGroups, and not over {}\".format(\n                        type(group)\n                    )\n                )\n```\n\nI would instead do\n\n```python\n         if sign_analogue is None:\n             try:\n                 self.sign_analogue = self._default_sign\n             except AttributeError:\n                 raise TypeError(\"a sign function must be given\")\n```\n\nFurthermore, I would call it `sign_function` instead of `sign_analogue`.\nAlso, you should use a single underscore for `_default_sign`.\n\nYou can remove the `__init__` implementation for all of the concrete base classes (although please move the `TestSuite` test to the class-level doc).\n\nThis is overly complicated:\n{{#!diff\n-return ((elem.order() % 2) * -2) + 1\n+return (-1)**elem.order()\n}}}\nand similar for the Coxeter group code.\n\nShouldn't there be a similar generic\n\n```\ndef sign_representation(self, base_ring=None, side=\"twosided\"):\n```\n\nfor objects in the category of finite groups?",
    "created_at": "2020-04-08T23:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412113",
    "user": "tscrim"
}
```

Here are my comments:


```diff
             if isinstance(scalar, Element):
-                P = self.parent()
                 if not self:
                     return self
+                P = self.parent()
```


I believe this is faster:

```diff
-                    return (P.sign_analogue(scalar)) * self
+                    return self if P.sign_analogue(scalar) > 0 else -self
```

Note that the sign should never be 0.

This is overly complicated and not quite correct:

```python
        self.sign_analogue = sign_analogue
        if self.sign_analogue is None:
            if self.__default_sign is not None:
                self.sign_analogue = self.__default_sign
            else:
                raise NotImplementedError(
                    "Sign Representation is only defined over FiniteGroups and CoxeterGroups, and not over {}".format(
                        type(group)
                    )
                )
```

I would instead do

```python
         if sign_analogue is None:
             try:
                 self.sign_analogue = self._default_sign
             except AttributeError:
                 raise TypeError("a sign function must be given")
```

Furthermore, I would call it `sign_function` instead of `sign_analogue`.
Also, you should use a single underscore for `_default_sign`.

You can remove the `__init__` implementation for all of the concrete base classes (although please move the `TestSuite` test to the class-level doc).

This is overly complicated:
{{#!diff
-return ((elem.order() % 2) * -2) + 1
+return (-1)**elem.order()
}}}
and similar for the Coxeter group code.

Shouldn't there be a similar generic

```
def sign_representation(self, base_ring=None, side="twosided"):
```

for objects in the category of finite groups?



---

archive/issue_comments_412114.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-08T23:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412114",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412115.json:
```json
{
    "body": "I do not understand this:\n\n```\nclass SignRepresentationFinitegroup(SignRepresentation_abstract):\n    ...\n\n    def __default_sign(self, elem):\n        ...\n        return ((elem.order() % 2) * -2) + 1\n```\n\nYou will almost never get a homomorphism to {+1,-1} by looking only at the parity of the order of an element.  For example, it is easy to find examples where the product of two elements of even order has even order, and the product of two elements of odd order has odd order, even in abelian groups.)  So the function will rarely yield a representation.\n\nThe upshot is that abstract finite groups do not have a natural \"sign representation\".  I think it would be best to implement sign representations only for permutation groups and Coxeter groups.  If there are other groups that have a natural subgroup of index 2, then you could take this subgroup to be the kernel of your sign representation, but this is an unusual situation, other than for permutation groups and groups of real matrices (where the sign of the determinant is a natural sign function).",
    "created_at": "2020-04-09T06:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412115",
    "user": "@DaveWitteMorris"
}
```

I do not understand this:

```
class SignRepresentationFinitegroup(SignRepresentation_abstract):
    ...

    def __default_sign(self, elem):
        ...
        return ((elem.order() % 2) * -2) + 1
```

You will almost never get a homomorphism to {+1,-1} by looking only at the parity of the order of an element.  For example, it is easy to find examples where the product of two elements of even order has even order, and the product of two elements of odd order has odd order, even in abelian groups.)  So the function will rarely yield a representation.

The upshot is that abstract finite groups do not have a natural "sign representation".  I think it would be best to implement sign representations only for permutation groups and Coxeter groups.  If there are other groups that have a natural subgroup of index 2, then you could take this subgroup to be the kernel of your sign representation, but this is an unusual situation, other than for permutation groups and groups of real matrices (where the sign of the determinant is a natural sign function).



---

archive/issue_comments_412116.json:
```json
{
    "body": "Ah, right. Basic group theory... (I probably have worked way too long in only Coxeter groups haha)\n\n```\nsage: G = AbelianGroup([3,5])\nsage: x,y = G.gens()\nsage: x.order(), y.order()\n(3, 5)\nsage: (x*y).order()\n15\n```\n\nSo we should just remove `SignRepresentationFinitegroup`. Otherwise we could convert it to the sign of the determinant by\n\n```python\ndef _default_sign(self, elem):\n    return 1 if elem.det() > 0 else -1\n```\n\n(which if the group passed happens to have elements incomparable to 0, this should result in an error).",
    "created_at": "2020-04-09T23:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412116",
    "user": "tscrim"
}
```

Ah, right. Basic group theory... (I probably have worked way too long in only Coxeter groups haha)

```
sage: G = AbelianGroup([3,5])
sage: x,y = G.gens()
sage: x.order(), y.order()
(3, 5)
sage: (x*y).order()
15
```

So we should just remove `SignRepresentationFinitegroup`. Otherwise we could convert it to the sign of the determinant by

```python
def _default_sign(self, elem):
    return 1 if elem.det() > 0 else -1
```

(which if the group passed happens to have elements incomparable to 0, this should result in an error).



---

archive/issue_comments_412117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-11T16:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412118.json:
```json
{
    "body": "Please get rid of the specialized `__init__` methods that create an unnecessary lambda function to pass to the ABC. This is the main point of having the `_default_sign` method.",
    "created_at": "2020-04-17T14:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412118",
    "user": "tscrim"
}
```

Please get rid of the specialized `__init__` methods that create an unnecessary lambda function to pass to the ABC. This is the main point of having the `_default_sign` method.



---

archive/issue_comments_412119.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T23:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412119",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T00:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412120",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T01:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412121",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T01:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412122",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T02:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T02:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412124",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T02:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412125",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T02:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T03:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412127",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412128.json:
```json
{
    "body": "Looks good to me now.",
    "created_at": "2020-04-21T03:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412128",
    "user": "tscrim"
}
```

Looks good to me now.



---

archive/issue_comments_412129.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-04-21T03:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412129",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_412130.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-04-21T03:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412130",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_412131.json:
```json
{
    "body": "Real name as author. Once done, you can set to a positive review.",
    "created_at": "2020-04-21T03:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412131",
    "user": "tscrim"
}
```

Real name as author. Once done, you can set to a positive review.



---

archive/issue_comments_412132.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-04-21T21:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412132",
    "user": "@coolsidd"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_412133.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-23T22:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29110#issuecomment-412133",
    "user": "vbraun"
}
```

Resolution: fixed
