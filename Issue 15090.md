# Issue 15090: More minor tableau and skew_tableau optimizations, and moving out attacking_pairs

archive/issues_015090.json:
```json
{
    "body": "CC:  @tscrim sage-combinat @anneschilling @nthiery\n\nKeywords: sage-combinat, tableau, partition, skew tableau\n\nThis patch brings some little speedups on tableaux and skew tableaux, in particular copying over the #15269 fixes to `skew_tableau.py`. It also modifies the semantics of the `to_chain` function so as to allow an optional `max_entry` parameter (which makes it return a chain of a given length -- useful if one is considering semistandard tableaux with ceiling higher than the highest entry). Furthermore it moves the `attacking_pairs` method from `tableau.py` to `partition.py`, and deprecates it in `tableau.py`. In the only place where this method is used, it is factored in for speed reasons.\n\nPatch to come in 20 minutes.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15327\n\n",
    "created_at": "2013-10-26T00:53:41Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "More minor tableau and skew_tableau optimizations, and moving out attacking_pairs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15090",
    "user": "@darijgr"
}
```
CC:  @tscrim sage-combinat @anneschilling @nthiery

Keywords: sage-combinat, tableau, partition, skew tableau

This patch brings some little speedups on tableaux and skew tableaux, in particular copying over the #15269 fixes to `skew_tableau.py`. It also modifies the semantics of the `to_chain` function so as to allow an optional `max_entry` parameter (which makes it return a chain of a given length -- useful if one is considering semistandard tableaux with ceiling higher than the highest entry). Furthermore it moves the `attacking_pairs` method from `tableau.py` to `partition.py`, and deprecates it in `tableau.py`. In the only place where this method is used, it is factored in for speed reasons.

Patch to come in 20 minutes.

Issue created by migration from https://trac.sagemath.org/ticket/15327





---

archive/issue_comments_193413.json:
```json
{
    "body": "Attachment [trac_15327-tableaux-improvements-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-tableaux-improvements-dg.patch) by @darijgr created at 2013-10-26 01:54:23",
    "created_at": "2013-10-26T01:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193413",
    "user": "@darijgr"
}
```

Attachment [trac_15327-tableaux-improvements-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-tableaux-improvements-dg.patch) by @darijgr created at 2013-10-26 01:54:23



---

archive/issue_comments_193414.json:
```json
{
    "body": "Ready for review.\n\nThe `restriction_shape` method has been introduced in `tableau.py` because it is at least twice faster than `restrict(i).shape()` (probably due to the hackery with exceptions in the latter) and the shape of the restriction seems to be used more often than the restriction itself. The `restriction_outer_shape` method in `skew_tableau.py` is arguably less useful (it is only about 20% faster than `restrict(i).outer_shape()` in the cases I checked) and I will remove it if you think it clutters up stuff.\n\nSome of the doc bugs fixed here are due to me *oops*.",
    "created_at": "2013-10-26T01:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193414",
    "user": "@darijgr"
}
```

Ready for review.

The `restriction_shape` method has been introduced in `tableau.py` because it is at least twice faster than `restrict(i).shape()` (probably due to the hackery with exceptions in the latter) and the shape of the restriction seems to be used more often than the restriction itself. The `restriction_outer_shape` method in `skew_tableau.py` is arguably less useful (it is only about 20% faster than `restrict(i).outer_shape()` in the cases I checked) and I will remove it if you think it clutters up stuff.

Some of the doc bugs fixed here are due to me *oops*.



---

archive/issue_comments_193415.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-26T01:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193415",
    "user": "@darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_193416.json:
```json
{
    "body": "Attachment [trac_15327-review-ts.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-review-ts.patch) by @tscrim created at 2013-10-27 16:44:20\n\nHey Darij,\n\nHere's a review patch which does:\n\n- some docstring tweaks,\n- adds a method `restriction_shape()` to `skew_tableau.py` (which how it's done is [much] faster than the direct implementation I tried),\n- and does some minor speedup to the creation of `SkewPartition`.\n\nBefore:\n\n```\nsage: %timeit skp = SkewPartition([[3,2,1],[2,1]])\n10000 loops, best of 3: 184 us per loop\nsage: %timeit skp = SkewPartition([[3,2,1],[2,1]])\n1000 loops, best of 3: 178 us per loop\n```\n\nWith patch:\n\n```\nsage: %timeit skp = SkewPartition([[3,2,1],[2,1]])\n10000 loops, best of 3: 115 us per loop\nsage: %timeit skp = SkewPartition([[3,2,1],[2,1]])\n1000 loops, best of 3: 112 us per loop\n```\n\n\nIf you're happy with my changes, then you can go ahead and set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-10-27T16:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193416",
    "user": "@tscrim"
}
```

Attachment [trac_15327-review-ts.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-review-ts.patch) by @tscrim created at 2013-10-27 16:44:20

Hey Darij,

Here's a review patch which does:

- some docstring tweaks,
- adds a method `restriction_shape()` to `skew_tableau.py` (which how it's done is [much] faster than the direct implementation I tried),
- and does some minor speedup to the creation of `SkewPartition`.

Before:

```
sage: %timeit skp = SkewPartition([[3,2,1],[2,1]])
10000 loops, best of 3: 184 us per loop
sage: %timeit skp = SkewPartition([[3,2,1],[2,1]])
1000 loops, best of 3: 178 us per loop
```

With patch:

```
sage: %timeit skp = SkewPartition([[3,2,1],[2,1]])
10000 loops, best of 3: 115 us per loop
sage: %timeit skp = SkewPartition([[3,2,1],[2,1]])
1000 loops, best of 3: 112 us per loop
```


If you're happy with my changes, then you can go ahead and set this to positive review.

Best,

Travis



---

archive/issue_comments_193417.json:
```json
{
    "body": "Attachment [trac_15327-revrev-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-revrev-dg.patch) by @darijgr created at 2013-10-27 17:07:12",
    "created_at": "2013-10-27T17:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193417",
    "user": "@darijgr"
}
```

Attachment [trac_15327-revrev-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-revrev-dg.patch) by @darijgr created at 2013-10-27 17:07:12



---

archive/issue_comments_193418.json:
```json
{
    "body": "Thanks a lot!! Pro forma, I'll let you set the positive_review mark since I added two chains...\n\nfor the **patchbot**:\n\napply trac_15327-tableaux-improvements-dg.patch\u200b trac_15327-review-ts.patch trac_15327-revrev-dg.patch",
    "created_at": "2013-10-27T17:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193418",
    "user": "@darijgr"
}
```

Thanks a lot!! Pro forma, I'll let you set the positive_review mark since I added two chains...

for the **patchbot**:

apply trac_15327-tableaux-improvements-dg.patchâ€‹ trac_15327-review-ts.patch trac_15327-revrev-dg.patch



---

archive/issue_comments_193419.json:
```json
{
    "body": "> two chains\n\nXP\n\nPositive review then. Could you fold the 3 patches together and re-upload?\n\nThanks,\n\nTravis",
    "created_at": "2013-10-27T17:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193419",
    "user": "@tscrim"
}
```

> two chains

XP

Positive review then. Could you fold the 3 patches together and re-upload?

Thanks,

Travis



---

archive/issue_comments_193420.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-27T17:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193420",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_193421.json:
```json
{
    "body": "Attachment [trac_15327-qfold-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-qfold-dg.patch) by @darijgr created at 2013-10-27 21:12:19\n\nqfold of the patches in this ticket",
    "created_at": "2013-10-27T21:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193421",
    "user": "@darijgr"
}
```

Attachment [trac_15327-qfold-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-qfold-dg.patch) by @darijgr created at 2013-10-27 21:12:19

qfold of the patches in this ticket



---

archive/issue_comments_193422.json:
```json
{
    "body": "Thank you again -- done. And yes, my ability to make typos while fixing them is uncontested.\n\nfor the **patchbot**:\n\napply trac_15327-qfold-dg.patch",
    "created_at": "2013-10-27T21:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193422",
    "user": "@darijgr"
}
```

Thank you again -- done. And yes, my ability to make typos while fixing them is uncontested.

for the **patchbot**:

apply trac_15327-qfold-dg.patch



---

archive/issue_comments_193423.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-10-30T00:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193423",
    "user": "@darijgr"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_193424.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-10-30T01:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193424",
    "user": "@darijgr"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_193425.json:
```json
{
    "body": "Attachment [trac_15327-fixes-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-fixes-dg.patch) by @darijgr created at 2013-10-30 01:25:58\n\nI wish it had been just typos. There were two major oopses in my version of the `inversions` method. Should be fixed now (speed improvement is still there). Now it probably needs review again, but at least that should be easy...\n\nfor the **patchbot**:\n\napply trac_15327-qfold-dg.patch trac_15327-fixes-dg.patch",
    "created_at": "2013-10-30T01:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193425",
    "user": "@darijgr"
}
```

Attachment [trac_15327-fixes-dg.patch](tarball://root/attachments/some-uuid/ticket15327/trac_15327-fixes-dg.patch) by @darijgr created at 2013-10-30 01:25:58

I wish it had been just typos. There were two major oopses in my version of the `inversions` method. Should be fixed now (speed improvement is still there). Now it probably needs review again, but at least that should be easy...

for the **patchbot**:

apply trac_15327-qfold-dg.patch trac_15327-fixes-dg.patch



---

archive/issue_comments_193426.json:
```json
{
    "body": "I feel bad for not catching the errors on the first go-around. Back to positive review.",
    "created_at": "2013-10-31T05:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193426",
    "user": "@tscrim"
}
```

I feel bad for not catching the errors on the first go-around. Back to positive review.



---

archive/issue_comments_193427.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-31T05:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193427",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_193428.json:
```json
{
    "body": "Thanks a lot for your patience, and no problem -- I should feel worse for making them in the first place!",
    "created_at": "2013-10-31T05:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193428",
    "user": "@darijgr"
}
```

Thanks a lot for your patience, and no problem -- I should feel worse for making them in the first place!



---

archive/issue_comments_193429.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-11-06T12:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15090#issuecomment-193429",
    "user": "@jdemeyer"
}
```

Resolution: fixed
