# Issue 30163: Add finite topological spaces

Issue created by migration from https://trac.sagemath.org/ticket/30400

Original creator: @jcuevas-rozo

Original creation time: 2020-08-19 22:56:22

CC:  jhpalmieri

Keywords: Finite topological spaces

This ticket provides a class for finite topological spaces and methods dealing with properties in general topology. It is expected to create a second ticket to add algebraic topology properties.

Principal reference: [Algebraic topology of finite topological spaces and applications](https://www.maths.ed.ac.uk/~v1ranick/papers/barmak2.pdf) by [Jonathan Barmak](https://mate.dm.uba.ar/~jbarmak/).


---

Comment by @jcuevas-rozo created at 2020-08-19 23:07:46

I have added the file finite_topological_spaces.py in ~/sage/src/sage/homology. I think this is a correct place to put it because different methods dealing with homotopy types and weak homotopy types will be added in next commits, but the discussion is open and I accept other suggestions in order to put it in the correct place.
----
New commits:


---

Comment by @jcuevas-rozo created at 2020-08-23 22:34:38

Set assignee to @jcuevas-rozo.


---

Comment by git created at 2020-08-26 22:49:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2020-08-26 23:08:47

Changing status from new to needs_review.


---

Comment by @jcuevas-rozo created at 2020-08-27 00:27:23

I have changed the status to _needs_review_. I have created a ticket #30447 where I will continue to working about the changes made in this ticket #30400, but... how can I import such changes to the new ticket? (how to link #30447 to #30400?)


---

Comment by jhpalmieri created at 2020-08-27 00:33:00

Add #30400 in the dependency field on #30447. (I've done that.)


---

Comment by @jcuevas-rozo created at 2020-08-27 00:37:32

Thank you so much, I've learned it for next tickets.


---

Comment by git created at 2020-08-27 01:04:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2020-08-27 03:18:36

I'm getting some doctest failures. Also, it would be nice to add this to the reference manual. Here are changes to fix some of these:

```diff
diff --git a/src/doc/en/reference/homology/index.rst b/src/doc/en/reference/homology/index.rst
index bf98e0841f..148dc4bae0 100644
--- a/src/doc/en/reference/homology/index.rst
+++ b/src/doc/en/reference/homology/index.rst
@@ -35,6 +35,7 @@ cell complexes.
    sage/homology/algebraic_topological_model
    sage/homology/homology_morphism
    sage/homology/matrix_utils
+   sage/homology/finite_topological_spaces
    sage/interfaces/chomp
 
 .. include:: ../footer.txt
diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
index 3a43eabed4..430e2a84ad 100644
--- a/src/sage/homology/finite_topological_spaces.py
+++ b/src/sage/homology/finite_topological_spaces.py
@@ -72,6 +72,7 @@ from sage.combinat.posets.hasse_diagram import HasseDiagram
 def dict_to_matrix(ordered_eltos, dictionary):
     r"""
     Return a matrix from the information given by ``dictionary``.    
+
     INPUT:
 
     - ``ordered_eltos`` -- a list.
@@ -79,7 +80,7 @@ def dict_to_matrix(ordered_eltos, dictionary):
     - ``dictionary`` -- a dict whose key list is ``ordered_eltos`` and its values
       are sets of elements in ``ordered_eltos``.
 
-    OUTPUT::
+    OUTPUT:
 
     - A binary matrix whose `(i,j)` entry is equal to 1 if and only if ``ordered_eltos[i]``
       is in ``dictionary[ordered_eltos[j]]``.
@@ -124,7 +125,7 @@ def FiniteSpace(data, elements=None, is_T0=False):
     - ``elements`` -- it is ignored when data is of type 1, 2 or 4. When ``data``
       is a topogenous matrix, this parameter gives the underlying set of the space.
 
-    EXAMPLES::
+    EXAMPLES:
 
     A dictionary as ``data``::
 
@@ -135,16 +136,16 @@ def FiniteSpace(data, elements=None, is_T0=False):
         sage: type(T)
         <class 'sage.homology.finite_topological_spaces.FiniteTopologicalSpace'>
         sage: FiniteSpace({'a': {'a', 'b'}})
-        Traceback (most recent call last)
+        Traceback (most recent call last):
         ...
         ValueError: The data does not correspond to a valid dictionary
         sage: FiniteSpace({'a': {'a', 'b'}, 'b': {'a', 'b'}, 'c': {'a', 'c'}})
-        Traceback (most recent call last)
+        Traceback (most recent call last):
         ...
         ValueError: The introduced data does not define a topology
 
     When ``data`` is a tuple or a list, the elements are in ``range(n)`` where
-    ``n`` is the lenght of ``data``::
+    ``n`` is the length of ``data``::
 
         sage: from sage.homology.finite_topological_spaces import FiniteSpace
         sage: T = FiniteSpace([{0, 3}, {1, 3}, {2, 3}, {3}]) ; T
@@ -155,7 +156,7 @@ def FiniteSpace(data, elements=None, is_T0=False):
         sage: T.elements()
         [3, 0, 1, 2]
         sage: FiniteSpace(({0, 2}, {0, 2}))
-        Traceback (most recent call last)
+        Traceback (most recent call last):
         ...
         ValueError: This kind of data assume the elements are in range(2)
 
@@ -182,7 +183,7 @@ def FiniteSpace(data, elements=None, is_T0=False):
         sage: M.elements()
         [5, 'e', 'h', 0, 'c']
         sage: FiniteSpace(mat, elements=[5, 'e', 'h', 0, 0])
-        Traceback (most recent call last)
+        Traceback (most recent call last):
         ...
         AssertionError: Not valid list of elements
 
@@ -386,6 +387,7 @@ class FiniteTopologicalSpace(Parent):
             sage: from sage.homology.finite_topological_spaces import FiniteSpace
             sage: T = FiniteSpace(({0}, {1}, {2, 3}, {3}))
             sage: T.underlying_set()
+            {0, 1, 2, 3}
             
         """
         return set(self._elements)
@@ -474,7 +476,7 @@ class FiniteTopologicalSpace(Parent):
             sage: T.Ux(4)
             {3, 4}
             sage: T.Ux(5)
-            Traceback (most recent call last)
+            Traceback (most recent call last):
             ...
             ValueError: The point 5 is not an element of the space
         """
@@ -787,7 +789,7 @@ class FiniteTopologicalSpace(Parent):
             True
             sage: T.boundary(T.boundary(Fr)) == T.boundary(Fr)
             True
-            sage: X == Fr.union(T.interior(E), T.exterior(E))|||
+            sage: X == Fr.union(T.interior(E), T.exterior(E))
             True
         """
         X = self.underlying_set()

```

I get sporadic doctest failures:

```
sage -t --warn-long 80.8 --random-seed=0 src/sage/homology/finite_topological_spaces.py
**********************************************************************
File "src/sage/homology/finite_topological_spaces.py", line 133, in sage.homology.finite_topological_spaces.FiniteSpace
Failed example:
    T = FiniteSpace({'a': {'a', 'c'}, 'b': {'b'}, 'c':{'a', 'c'}}) ; T
Expected:
    Finite topological space of 3 points with minimal basis
     {'a': {'c', 'a'}, 'b': {'b'}, 'c': {'c', 'a'}}
Got:
    Finite topological space of 3 points with minimal basis 
     {'a': {'a', 'c'}, 'b': {'b'}, 'c': {'a', 'c'}}
**********************************************************************
File "src/sage/homology/finite_topological_spaces.py", line 180, in sage.homology.finite_topological_spaces.FiniteSpace
Failed example:
    M = FiniteSpace(mat, elements=(5, 'e', 'h', 0, 'c')) ; M
Expected:
    Finite topological space of 5 points with minimal basis
     {5: {5}, 'e': {'h', 'e'}, 'h': {'h', 'e'}, 0: {0, 'c', 5}, 'c': {0, 'c', 5}}
Got:
    Finite topological space of 5 points with minimal basis 
     {5: {5}, 'e': {'e', 'h'}, 'h': {'e', 'h'}, 0: {0, 'c', 5}, 'c': {0, 'c', 5}}
**********************************************************************
File "src/sage/homology/finite_topological_spaces.py", line 319, in sage.homology.finite_topological_spaces.FiniteTopologicalSpace.__init__
Failed example:
    T = FiniteTopologicalSpace(elements, minimal_basis, matrix(mat_dict)) ; T
Expected:
    Finite topological space of 4 points with minimal basis
     {'a': {3, 'a'}, 3: {3, 'a'}, 2: {1, 2}, 1: {1}}
Got:
    Finite topological space of 4 points with minimal basis 
     {'a': {'a', 3}, 3: {'a', 3}, 2: {1, 2}, 1: {1}}
**********************************************************************
2 items had failures:
   2 of  24 in sage.homology.finite_topological_spaces.FiniteSpace
   1 of   7 in sage.homology.finite_topological_spaces.FiniteTopologicalSpace.__init__
    [231 tests, 3 failures, 0.13 s]
----------------------------------------------------------------------
sage -t --warn-long 80.8 --random-seed=0 src/sage/homology/finite_topological_spaces.py  # 3 doctests failed
----------------------------------------------------------------------
```

The issue is that these sets may print in different orders, and I think it's more or less random.

By the way, it's better to say `if E is None` instead of `if E == None`.
----
New commits:


---

Comment by git created at 2020-08-27 14:33:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-08-27 14:56:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2020-08-27 15:03:31

Replying to [comment:10 jhpalmieri]:
> _I'm getting some doctest failures. Also, it would be nice to add this to the reference manual. Here are changes to fix some of these:_

Thanks for the suggestions, I have changed the files in order to include the improvements.

> _The issue is that these sets may print in different orders, and I think it's more or less random._

I see... I think it depends on the implementation of sets in [SageMath](SageMath), do I have to impose an specific order for printing or it is not necessary?


---

Comment by jhpalmieri created at 2020-08-29 00:22:38

Doctests have to pass, so something has to change. Here are suggestions, but if you can think of meaningful doctests that don't rely on the ordering (one example is the test `T._minimal_basis['a'] == ...` below), it's better than just marking everything `# random`.

```diff
diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
index 5c40fe26ce..548322f174 100644
--- a/src/sage/homology/finite_topological_spaces.py
+++ b/src/sage/homology/finite_topological_spaces.py
@@ -127,9 +127,14 @@ def FiniteSpace(data, elements=None, is_T0=False):
     A dictionary as ``data``::
 
         sage: from sage.homology.finite_topological_spaces import FiniteSpace
-        sage: T = FiniteSpace({'a': {'a', 'c'}, 'b': {'b'}, 'c':{'a', 'c'}}) ; T
+        sage: T = FiniteSpace({'a': {'a', 'c'}, 'b': {'b'}, 'c':{'a', 'c'}})
+        sage: T # random
         Finite topological space of 3 points with minimal basis
          {'a': {'c', 'a'}, 'b': {'b'}, 'c': {'c', 'a'}}
+        sage: T._minimal_basis # random
+         {'a': {'c', 'a'}, 'b': {'b'}, 'c': {'c', 'a'}}
+        sage: T._minimal_basis['a'] == set(['a', 'c'])
+        True
         sage: type(T)
         <class 'sage.homology.finite_topological_spaces.FiniteTopologicalSpace'>
         sage: FiniteSpace({'a': {'a', 'b'}})
@@ -174,7 +179,8 @@ def FiniteSpace(data, elements=None, is_T0=False):
          {0: {0}, 1: {1, 2}, 2: {1, 2}, 3: {0, 3, 4}, 4: {0, 3, 4}}
         sage: T.elements()
         [0, 1, 2, 3, 4]
-        sage: M = FiniteSpace(mat, elements=(5, 'e', 'h', 0, 'c')) ; M
+        sage: M = FiniteSpace(mat, elements=(5, 'e', 'h', 0, 'c'))
+        sage: M # random
         Finite topological space of 5 points with minimal basis
          {5: {5}, 'e': {'h', 'e'}, 'h': {'h', 'e'}, 0: {0, 'c', 5}, 'c': {0, 'c', 5}}
         sage: M.elements()
@@ -313,7 +319,8 @@ class FiniteTopologicalSpace(Parent):
             sage: minimal_basis = {'a': {3, 'a'}, 3: {3, 'a'}, 2: {2, 1}, 1: {1}}
             sage: mat_dict = {(0, 0): 1, (0, 1): 1, (1, 1): 1, (2, 2): 1, \
             ....:             (2, 3): 1, (3, 2): 1, (3, 3): 1}
-            sage: T = FiniteTopologicalSpace(elements, minimal_basis, matrix(mat_dict)) ; T
+            sage: T = FiniteTopologicalSpace(elements, minimal_basis, matrix(mat_dict))
+            sage: T # random
             Finite topological space of 4 points with minimal basis
              {'a': {3, 'a'}, 3: {3, 'a'}, 2: {1, 2}, 1: {1}}
             sage: T.topogenous_matrix() == matrix(mat_dict)
@@ -325,7 +332,7 @@ class FiniteTopologicalSpace(Parent):
         self._minimal_basis = minimal_basis
         self._topogenous = topogenous
 
-    def __repr__(self):
+    def _repr_(self):
         r"""
         Print representation.
 
@@ -1012,7 +1019,7 @@ class FiniteTopologicalSpace_T0(FiniteTopologicalSpace):
         self._poset = poset
         self._T0 = True
 
-    def __repr__(self):
+    def _repr_(self):
         r"""
         Print representation.
 
```

By the way, for classes which inherit from `SageObject`, like `Parent`, it is better to define `_repr_` rather than `__repr__`. See https://doc.sagemath.org/html/en/developer/coding_in_python.html#print-representation.


---

Comment by jhpalmieri created at 2020-08-29 01:21:21

More suggestions:

```diff
diff --git a/src/doc/en/reference/references/index.rst b/src/doc/en/reference/references/index.rst
index c58f1acbb9..96157140c4 100644
--- a/src/doc/en/reference/references/index.rst
+++ b/src/doc/en/reference/references/index.rst
@@ -181,6 +181,8 @@ REFERENCES:
              of the Slovak Academy of Sciences. Mathematica Slovaca vol 30, n 4,
              pages 405--417, 1980
 
+.. [Ale1937] \P. Alexandroff, *Diskrete Raume*, Mat. Sb. (N.S.) 2, 501--518 (1937).
+
 .. [Al1947] \A. A. Albert, *A Structure Theory for Jordan
             Algebras*. Annals of Mathematics, Second Series, Vol. 48,
             No. 3 (Jul., 1947), pp. 546--567.
@@ -373,6 +375,10 @@ REFERENCES:
              Four Russians'. Cryptography E-Print Archive
              (http://eprint.iacr.org/2006/251.pdf), 2006.
 
+.. [Bar2011] \J. A. Barmak,
+             *Algebraic topology of finite topological spaces and applications*.
+             Lecture Notes in Mathematics Vol. 2032 (2011).
+
 .. [Bat1991] \V. V. Batyrev, *On the classification of smooth projective
              toric varieties*, Tohoku Math. J. **43** (1991), 569-585
 
@@ -4880,6 +4886,9 @@ REFERENCES:
               *Generation of random chordal graphs using subtrees of a tree*,
               :arxiv:`1810.13326v1`.
 
+.. [Shi1968] \M. Shiraki, *On finite topological spaces*,
+             Rep. Fac. Sci. Kagoshima Univ.  1, 1--8 (1968).
+
 .. [Shi2002] \M. Shimozono
              *Affine type A crystal structure on tensor products of rectangles,
              Demazure characters, and nilpotent varieties*,
diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
index 5c40fe26ce..c01c344ca2 100644
--- a/src/sage/homology/finite_topological_spaces.py
+++ b/src/sage/homology/finite_topological_spaces.py
@@ -7,11 +7,11 @@ A *finite topological space* is a topological space with finitely many points an
 a *finite preordered set* is a finite set with a transitive and reflexive relation.
 Finite spaces and finite preordered sets are basically the same objects considered
 from different perspectives. Given a finite topological space `X`, for every point
-`x\in X` the *minimal open set* `U_x` as the intersection of all the open sets
+`x\in X`, define the *minimal open set* `U_x` as the intersection of all the open sets
 which contain `x` (it is an open set since arbitrary intersections of open sets
 in finite spaces are open). The minimal open sets constitute a basis for the topology
 of `X`. Indeed, any open set `U` of `X` is the union of the sets `U_x` with `x\in U`.
-This basis is called the *minimal basis of `X`*. A preorder on `X` by `x\leqslant y`
+This basis is called the *minimal basis of* `X`. A preorder on `X` is given by `x\leqslant y`
 if `x\in U_y`.
 
 If `X` is now a finite preordered set, one can define a topology on `X` given by
@@ -20,21 +20,21 @@ then `y` is contained in every basic set containing `x`, and therefore `y\in U_x
 Conversely, if `y\in U_x`, then `y\in\lbrace z\in X\vert z\leqslant x\rbrace`.
 Therefore `y\leqslant x` if and only if `y\in U_x`. This shows that these two
 applications, relating topologies and preorders on a finite set, are mutually
-inverse. This simple remark, made in first place by Alexandroff [1], allows us to study
+inverse. This simple remark, made in first place by Alexandroff [Ale1937]_, allows us to study
 finite spaces by combining Algebraic Topology with the combinatorics arising from
 their intrinsic preorder structures. The antisymmetry of a finite preorder
 corresponds exactly to the `T_0` separation axiom. Recall that a topological space
-`X` is said to be *`T_0`* if for any pair of points in `X` there exists an open
+`X` is said to be `T_0` if for any pair of points in `X` there exists an open
 set containing one and only one of them. Therefore finite `T_0`-spaces are in
-correspondence with finite partially ordered sets (posets) [2].
+correspondence with finite partially ordered sets (posets) [Bar2011]_.
 
 Now, if `X = \lbrace x_1, x_2, \ldots , x_n\rbrace` is a finite space and for
 each `i` the unique minimal open set containing `x_i` is denoted by `U_i`, a
-*topogenous matrix* of the space is a `n \times n` matrix `A = \left[a_{ij}\right]`
+*topogenous matrix* of the space is the `n \times n` matrix `A = \left[a_{ij}\right]`
 defined by `a_{ij} = 1` if `x_i \in U_j` and `a_{ij} = 0` otherwise (this is the
-transposed matrix of the Definition 1 in [3]). A finite space `X` is `T_0` if and
+transposed matrix of the Definition 1 in [Shi1968]_). A finite space `X` is `T_0` if and
 only if the topogenous matrix `A` defined above is similar (via a permutation matrix)
-to a certain upper triangular matrix [3]. This is the reason one can assume that
+to a certain upper triangular matrix [Shi1968]_. This is the reason one can assume that
 the topogenous matrix of a finite `T_0`-space is upper triangular.
 
 
@@ -44,11 +44,9 @@ AUTHOR::
 
 REFERENCES:
 
-- [1] Alexandroff P., *Diskrete Raume*, Mat. Sb. (N.S.) 2, 501--518 (1937).
-- [2] Barmak, J.A., *Algebraic topology of finite topological spaces and applications*.
-      Lecture Notes in Mathematics Vol. 2032 (2011).
-- [3] Shiraki M., *On finite topological spaces*, Rep. Fac. Sci. Kagoshima Univ.
-      1, 1--8 (1968).
+- [Ale1937]_
+- [Bar2011]_
+- [Shi1968]_
 
 """
 # ****************************************************************************
@@ -559,12 +564,12 @@ class FiniteTopologicalSpace(Parent):
             ...
             ValueError: Parameter 'points' is not a valid set of representatives
         """
-        if self._T0==True:
+        if self._T0 is True:
             return self
         else:
             if points is None:
                 points = [list(A)[0] for A in self._T0]
-            elif check==True:
+            elif check:
                 assert isinstance(points, (tuple, list, set)), \
                        "Parameter 'points' must be of type tuple, list or set"
                 assert len(points)==len(self._T0), \

```



---

Comment by git created at 2020-08-29 18:54:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2020-08-29 19:06:13

I have fixed some failures shown in comments 14 and 15. I have added a method `space_sorting`, which allows to sort the print representation of finite spaces (I have learned to run doctests and I had not got failures after defining such method).


---

Comment by chapoton created at 2020-09-09 18:36:36

maybe you could get rid of dict_to_matrix, used only once


---

Comment by git created at 2020-09-16 13:56:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2020-09-16 13:58:18

Replying to [comment:18 chapoton]:
> maybe you could get rid of dict_to_matrix, used only once

Thanks for the suggestion.


---

Comment by @jcuevas-rozo created at 2020-10-24 14:52:23

What could be the reason why this ticket passed the tests on October 18 but not on October 22? It has not been modified in recent weeks...


---

Comment by git created at 2020-10-27 04:14:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2020-10-27 11:59:12

Replying to [comment:21 gh-jcuevas-rozo]:
> What could be the reason why this ticket passed the tests on October 18 but not on October 22? It has not been modified in recent weeks...

Because sage itself is moving, and the patchbots always use the latest develop branch, which sometimes does not pass all the tests.

By the way, you should pul your real full name in the "Authors" fields here above.


---

Comment by git created at 2020-10-29 02:31:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-10-29 03:09:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-11-07 23:04:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-11-09 03:07:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-11-21 23:07:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @bollu created at 2021-01-18 09:47:47

What's the SAGE etiquette for review? I'm interested to understand what's going on here, but don't know anything in particular about finite topologies. Am I expected to be an expert in the subject matter? Do comments on the code/general structure help?


---

Comment by jhpalmieri created at 2021-01-18 19:01:15

I think that any feedback would be good. General comments are good, and if you can delve at all into the mathematics, that would also be good. I hope I can get back to this to help with the review myself, but I haven't had the time yet.


---

Comment by @kliem created at 2021-01-23 17:21:23

Maybe a stupid comment, but isn't the singular of matrices "matrix"? Or is this something special about Kenzo.


---

Comment by @jcuevas-rozo created at 2021-01-24 20:13:51

Replying to [comment:33 gh-kliem]:
> Maybe a stupid comment, but isn't the singular of matrices "matrix"? Or is this something special about Kenzo.

Don´t worry, it is a good question. The term 'matrice', used in Kenzo, comes from French and it means matrix (as you noticed). In Kenzo, the type 'matrice' is used for sparse matrices.


---

Comment by jhpalmieri created at 2021-02-26 21:28:47

My apologies for the delay, I am going to try working on this ticket. Some style comments:
- Preferred Sage style is to keep lines under 80 characters when possible. One place that violates this is in the docstrings. Don't work too hard to get the doctests under 80 characters, but the paragraphs of text should satisfy this.
- I don't know if it's officially a Sage style, but it is in general better to not use `assert` statements for error checking, because they can be ignored when Python is run with optimization flags turned on. The [Python documentation](https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement) says that `assert` statements should be used for debugging. (I think these statements are currently used throughout the Sage library, and maybe we should start a campaign to eliminate them. In the meantime, we shouldn't add more.)
- I'm getting doctest failures of the form `cannot import name '__convertarray__' from ...`. I do not have Kenzo installed; I think those doctests should be marked `optional - kenzo`. See below for some fixes, although I may have been too aggressive in applying the tags.
- I'm getting other doctest failures from `E = random.sample(X, k)` with a deprecation warning:

```
    DeprecationWarning: Sampling from a set deprecated
    since Python 3.9 and will be removed in a subsequent version.
```

- The documentation isn't building, but I think I've fixed that. See below.


```diff
diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
index 5307dbbad1..61285a8e06 100644
--- a/src/sage/homology/finite_topological_spaces.py
+++ b/src/sage/homology/finite_topological_spaces.py
@@ -127,25 +127,25 @@ def quotient_group_matrices(*matrices, left_null=False, right_null=False, check=
 
     EXAMPLES::
 
-        sage: from sage.homology.finite_topological_spaces import quotient_group_matrices, __convertarray__
-        sage: from sage.interfaces.kenzo import s2k_matrix
-        sage: quotient_group_matrices()
+        sage: from sage.homology.finite_topological_spaces import quotient_group_matrices, __convertarray__ # optional - kenzo
+        sage: from sage.interfaces.kenzo import s2k_matrix # optional - kenzo
+        sage: quotient_group_matrices() # optional - kenzo
         0
-        sage: s_M1 = matrix(2, 3, [1, 2, 3, 4, 5, 6])
-        sage: M1 = __convertarray__(s2k_matrix(s_M1))
-        sage: quotient_group_matrices(M1, left_null=True)
+        sage: s_M1 = matrix(2, 3, [1, 2, 3, 4, 5, 6]) # optional - kenzo
+        sage: M1 = __convertarray__(s2k_matrix(s_M1)) # optional - kenzo
+        sage: quotient_group_matrices(M1, left_null=True) # optional - kenzo
         C3
-        sage: quotient_group_matrices(M1, right_null=True)
+        sage: quotient_group_matrices(M1, right_null=True) # optional - kenzo
         Z
-        sage: s_M2 = matrix(2, 2, [1, -1, 1, -1])
-        sage: M2 = __convertarray__(s2k_matrix(s_M2))
-        sage: s_M3 = matrix(2, 2, [1, 0, 1, 0])
-        sage: M3 = __convertarray__(s2k_matrix(s_M3))
-        sage: quotient_group_matrices(M2, M3)
+        sage: s_M2 = matrix(2, 2, [1, -1, 1, -1]) # optional - kenzo
+        sage: M2 = __convertarray__(s2k_matrix(s_M2)) # optional - kenzo
+        sage: s_M3 = matrix(2, 2, [1, 0, 1, 0]) # optional - kenzo
+        sage: M3 = __convertarray__(s2k_matrix(s_M3)) # optional - kenzo
+        sage: quotient_group_matrices(M2, M3) # optional - kenzo
         0
-        sage: s_M4 = matrix(2, 2, [0, 0, 1, 0])
-        sage: M4 = __convertarray__(s2k_matrix(s_M4))
-        sage: quotient_group_matrices(M2, M4)
+        sage: s_M4 = matrix(2, 2, [0, 0, 1, 0]) # optional - kenzo
+        sage: M4 = __convertarray__(s2k_matrix(s_M4)) # optional - kenzo
+        sage: quotient_group_matrices(M2, M4) # optional - kenzo
         Traceback (most recent call last):
         ...
         AssertionError: m1*m2 must be zero
@@ -192,18 +192,18 @@ def k2s_binary_matrix_sparse(kmatrix):
     EXAMPLES::
 
         sage: from sage.homology.finite_topological_spaces import k2s_binary_matrix_sparse, \
-              s2k_binary_matrix_sparse, __randomtop__
-        sage: KM2 = __randomtop__(6,1)
-        sage: k2s_binary_matrix_sparse(KM2)
+              s2k_binary_matrix_sparse, __randomtop__ # optional - kenzo
+        sage: KM2 = __randomtop__(6,1) # optional - kenzo
+        sage: k2s_binary_matrix_sparse(KM2) # optional - kenzo
         [1 1 1 1 1 1]
         [0 1 1 1 1 1]
         [0 0 1 1 1 1]
         [0 0 0 1 1 1]
         [0 0 0 0 1 1]
         [0 0 0 0 0 1]
-        sage: KM = __randomtop__(100, float(0.8))
-        sage: SM = k2s_binary_matrix_sparse(KM)
-        sage: SM == k2s_binary_matrix_sparse(s2k_binary_matrix_sparse(SM))
+        sage: KM = __randomtop__(100, float(0.8)) # optional - kenzo
+        sage: SM = k2s_binary_matrix_sparse(KM) # optional - kenzo
+        sage: SM == k2s_binary_matrix_sparse(s2k_binary_matrix_sparse(SM)) # optional - kenzo
         True
     """
     data = __vector_to_list__(__matrice_to_lmtrx__(kmatrix)).python()
@@ -226,9 +226,9 @@ def s2k_binary_matrix_sparse(smatrix):
     EXAMPLES::
 
         sage: from sage.homology.finite_topological_spaces import k2s_binary_matrix_sparse, \
-              s2k_binary_matrix_sparse
-        sage: SM2 = matrix.ones(5)
-        sage: s2k_binary_matrix_sparse(SM2)
+              s2k_binary_matrix_sparse # optional - kenzo
+        sage: SM2 = matrix.ones(5) # optional - kenzo
+        sage: s2k_binary_matrix_sparse(SM2) # optional - kenzo
         <ECL: 
         ========== MATRIX 5 lines + 5 columns =====
         L1=[C1=1][C2=1][C3=1][C4=1][C5=1]
@@ -273,7 +273,7 @@ def FiniteSpace(data, elements=None, is_T0=False):
       underlying set of the space.
       
     - ``is_T0`` -- (default ``False``) it is a boolean that indicates, when it is 
-      previously known, if the finite space is `T_0.
+      previously known, if the finite space is `T_0`.
 
     EXAMPLES:
 
@@ -444,8 +444,8 @@ def RandomFiniteT0Space(*args):
     INPUT:
 
     - ``args`` -- A tuple of two arguments. The first argument must be an integer
-     number, while the second argument must be either a number between 0 and 1, or
-     ``True``.
+      number, while the second argument must be either a number between 0 and 1, or
+      ``True``.
 
     OUTPUT:
 
@@ -458,18 +458,18 @@ def RandomFiniteT0Space(*args):
     EXAMPLES::
 
         sage: from sage.homology.finite_topological_spaces import RandomFiniteT0Space
-        sage: RandomFiniteT0Space(5, 0)
+        sage: RandomFiniteT0Space(5, 0) # optional - kenzo
         Finite T0 topological space of 5 points with minimal basis 
          {0: {0}, 1: {1}, 2: {2}, 3: {3}, 4: {4}}
-        sage: RandomFiniteT0Space(5, 2)
+        sage: RandomFiniteT0Space(5, 2) # optional - kenzo
         Finite T0 topological space of 5 points with minimal basis
          {0: {0}, 1: {0, 1}, 2: {0, 1, 2}, 3: {0, 1, 2, 3}, 4: {0, 1, 2, 3, 4}}
-        sage: RandomFiniteT0Space(6, True)
+        sage: RandomFiniteT0Space(6, True) # optional - kenzo
         Finite T0 topological space of 6 points with minimal basis
          {0: {0}, 1: {1}, 2: {0, 1, 2}, 3: {0, 1, 3}, 4: {0, 1, 2, 3, 4}, 5: {0, 1, 2, 3, 5}}
-        sage: RandomFiniteT0Space(150, 0.2)
+        sage: RandomFiniteT0Space(150, 0.2) # optional - kenzo
         Finite T0 topological space of 150 points
-        sage: RandomFiniteT0Space(5, True)
+        sage: RandomFiniteT0Space(5, True) # optional - kenzo
         Traceback (most recent call last):
         ...
         AssertionError: The first argument must be an integer number greater than 5
@@ -1875,16 +1875,16 @@ class FiniteTopologicalSpace_T0(FiniteTopologicalSpace):
             ....:            [11, 16], [15, 17], [2, 19], [6, 20], [18, 20]]
             sage: P = Poset((list(range(1,21)), Pcovers), cover_relations=True)
             sage: X = FiniteSpace(P)
-            sage: dvf = X.discrete_vector_field(); dvf
+            sage: dvf = X.discrete_vector_field(); dvf # optional - kenzo
             [(2, 3), (4, 6), (8, 9), (7, 12), (15, 17), (18, 20), (10, 13), (11, 16)]
-            sage: X.show(dvf)
+            sage: X.show(dvf) # optional - kenzo
             Graphics object consisting of 45 graphics primitives
             sage: Qcovers = [[1, 2], [2, 3], [3, 4], [3, 5]]
             sage: Q = Poset((list(range(1,6)), Qcovers), cover_relations=True)
             sage: Y = FiniteSpace(Q)
             sage: Z = Y.barycentric_subdivision()
-            sage: dvf = Z.discrete_vector_field(h_admissible=True)
-            sage: Z.show(dvf)
+            sage: dvf = Z.discrete_vector_field(h_admissible=True) # optional - kenzo
+            sage: Z.show(dvf) # optional - kenzo
             Graphics object consisting of 71 graphics primitives
         """
         kenzo_top = s2k_binary_matrix_sparse(self._topogenous)
@@ -1919,12 +1919,12 @@ class FiniteTopologicalSpace_T0(FiniteTopologicalSpace):
             ....:           [2, 4], [1, 4]]
             sage: P = Poset((list(range(1,14)), covers), cover_relations = True)
             sage: X = FiniteSpace(P)
-            sage: X.hregular_homology()
+            sage: X.hregular_homology() # optional - kenzo
             {0: Z, 1: C2, 2: 0}
-            sage: dvf = X.discrete_vector_field()
-            sage: X.show(dvf)
+            sage: dvf = X.discrete_vector_field() # optional - kenzo
+            sage: X.show(dvf) # optional - kenzo
             Graphics object consisting of 38 graphics primitives
-            sage: X.hregular_homology(dvfield = dvf)
+            sage: X.hregular_homology(dvfield = dvf) # optional - kenzo
             {0: Z, 1: C2, 2: 0}
         """
         assert deg==None or deg.is_integer(), "The degree must be an integer number or None"
```



---

Comment by jhpalmieri created at 2021-02-26 22:39:49

Two more things about the documentation: `\minus` and `\im` are not standard LaTeX commands and they do not render properly. Should `\minus` be replaced by `-` or `\setminus`? I'm not sure what to do about `\im`: replace it every time by `\mathrm{im}` or similar?


---

Comment by jhpalmieri created at 2021-02-26 22:48:46

Maybe `\mathop{\mathrm{im}}` or `\mathrm{im}\,`.


---

Comment by @jcuevas-rozo created at 2021-02-28 04:51:48

Replying to [comment:35 jhpalmieri]:
> - Preferred Sage style is to keep lines under 80 characters when possible. One place that violates this is in the docstrings. Don't work too hard to get the doctests under 80 characters, but the paragraphs of text should satisfy this.

I tried my best to do it, I have shortened the lines that didn't satisfy the rule.

> - I don't know if it's officially a Sage style, but it is in general better to not use `assert` statements for error checking, because they can be ignored when Python is run with optimization flags turned on. The [Python documentation](https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement) says that `assert` statements should be used for debugging. (I think these statements are currently used throughout the Sage library, and maybe we should start a campaign to eliminate them. In the meantime, we shouldn't add more.)

The `assert` statements have been completely changed to conditional statements.

> - I'm getting doctest failures of the form `cannot import name '__convertarray__' from ...`. I do not have Kenzo installed; I think those doctests should be marked `optional - kenzo`. See below for some fixes, although I may have been too aggressive in applying the tags.

The `optional - kenzo` mark has been added to the required lines. Also, some functions have been added directly to `src/sage/interfaces.kenzo.py`.

> - I'm getting other doctest failures from `E = random.sample(X, k)` with a deprecation warning:
> {{{
>     DeprecationWarning: Sampling from a set deprecated
>     since Python 3.9 and will be removed in a subsequent version.
> }}}

I have changed "sampling from a set `X`" by "sampling from a `list(X)`" in order to fix these warnings.


---

Comment by @jcuevas-rozo created at 2021-02-28 04:53:07

Replying to [comment:36 jhpalmieri]:
> Two more things about the documentation: `\minus` and `\im` are not standard LaTeX commands and they do not render properly. Should `\minus` be replaced by `-` or `\setminus`? I'm not sure what to do about `\im`: replace it every time by `\mathrm{im}` or similar?

I have replaced `\minus` by `-` and `\im` by `\mathrm{im}\ `.


---

Comment by git created at 2021-02-28 04:57:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-02-28 18:45:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2021-03-01 19:52:31

I have seen the pyflakes errors [here](https://patchbot.sagemath.org/log/30400/Linux/74-Ubuntu_SMP_Tue_Sep_17_17:06:04_UTC_2019/x86_64/4.15.0-65-generic/pc72/2021-02-28%2023:41:41?plugin=pyflakes&diff=/log/0/Linux/74-Ubuntu_SMP_Tue_Sep_17_17%3A06%3A04_UTC_2019/x86_64/4.15.0-65-generic/pc72/2021-02-07%2023%3A47%3A00&ticket=30400&base=9.3.beta7), but I don't know how to fix them, since the undefined names mentioned there depends on the installation of Kenzo (up to I understand)...


---

Comment by jhpalmieri created at 2021-03-02 00:39:02

Thank you for checking those pyflakes errors. I agree that they don't need to be fixed.


---

Comment by jhpalmieri created at 2021-03-02 04:10:29

In the example

```
    sage: T = FiniteSpace([{0, 3}, {1, 3}, {2, 3}, {3}]) ; T
    Finite T0 topological space of 4 points with minimal basis
     {0: {3, 0}, 1: {3, 1}, 2: {3, 2}, 3: {3}}
    sage: T.elements()
    [3, 0, 1, 2]
```

I would have expected `T.elements()` to be `[0, 1, 2, 3]`, so I found the topogeneous matrix confusing. Even more with the following, I expect the elements to be sorted the way I enter them:

```
    sage: T = FiniteSpace([{0, 3}, {1, 3}, {2, 3}, {3}], elements=[0,1,2,3])                  
    sage: T.elements()                                                                        
    [3, 0, 1, 2]
```

Should they be sorted in some cases? If the sets of elements are likely to be large, I can understand not wanting to sort by default, but if the user supplies a list of elements, shouldn't we use that?

I have no experience with finite topological spaces, so maybe users won't expect this sorting. From the !Python/Sage point of view, the current situation seems odd, though. Looking at the code, is the point to have an upper triangulate topogeneous matrix? If so, please add a comment about this to the documentation, pointing out an example. However, the example constructed from matrix data does not have an upper triangular topogeneous matrix, so maybe I'm confused. Or is it only upper triangular if the space is T0? The comment in the code could be clarified. Is this right:

```diff
diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
index 80f0b32fd1..ddab80d6f1 100644
--- a/src/sage/homology/finite_topological_spaces.py
+++ b/src/sage/homology/finite_topological_spaces.py
@@ -129,8 +129,19 @@ def FiniteSpace(data, elements=None, is_T0=False):
          {0: {3, 0}, 1: {3, 1}, 2: {3, 2}, 3: {3}}
         sage: type(T)
         <class 'sage.homology.finite_topological_spaces.FiniteTopologicalSpace_T0'>
+
+    Note that the set of elements is sorted in perhaps an unexpected
+    way. This is to ensure that in the case of a T0 space, the
+    topogenous matrix is upper triangular::
+
         sage: T.elements()
         [3, 0, 1, 2]
+        sage: T.topogenous_matrix()
+        [1 1 1 1]
+        [0 1 0 0]
+        [0 0 1 0]
+        [0 0 0 1]
+
         sage: FiniteSpace(({0, 2}, {0, 2}))
         Traceback (most recent call last):
         ...
@@ -226,7 +237,8 @@ def FiniteSpace(data, elements=None, is_T0=False):
                 basis[j] = Uj
             eltos = range(n)
 
-    # This fixes a topological sort (it guarantees an upper triangular topogenous matrix)
+    # This fixes a topological sort (it guarantees an upper triangular topogenous matrix
+    # in the T0 case)
     eltos = list(eltos)
     sorted_str_eltos = sorted([str(x) for x in eltos])
     eltos.sort(key = lambda x: (len(basis[x]), sorted_str_eltos.index(str(x))))
```



---

Comment by jhpalmieri created at 2021-03-02 04:17:34

After installing kenzo 1.1.9 (via `make kenzo`), I get doctest failures from the optional kenzo doctests. For example:

```
File "src/sage/homology/finite_topological_spaces.py", line 300, in sage.homology.finite_topological_spaces.RandomFiniteT0Space
Failed example:
    RandomFiniteT0Space(5, 0)                                # optional - kenzo               
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.homology.finite_topological_spaces.RandomFiniteT0Space[1]>", line 1, in <module>
        RandomFiniteT0Space(Integer(5), Integer(0))                                # optional - kenzo
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/homology/finite_topological_spaces.py", line 327, in RandomFiniteT0Space
        topogenous = kenzo.k2s_binary_matrix_sparse(kenzo_top)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/interfaces/kenzo.py", line 2130, in k2s_binary_matrix_sparse
        data = __vector_to_list__(__matrice_to_lmtrx__(kmatrix)).python()
      File "sage/libs/ecl.pyx", line 854, in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:8614)
        return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))
      File "sage/libs/ecl.pyx", line 365, in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5896)
        raise RuntimeError("ECL says: {}".format(
    RuntimeError: ECL says: The function VECTOR-TO-LIST is undefined.
```



---

Comment by jhpalmieri created at 2021-03-02 06:03:13

I also get failures in `src/sage/interfaces/kenzo.py` when `kenzo` is installed. Do I need to do more than `./configure --enable-kenzo=yes && make`?


---

Comment by tscrim created at 2021-03-03 22:29:57

All of the interface tests pass for me without this branch, and I am getting similar failures with the branch. These failures are happening on my Ubuntu machine.


---

Comment by @jcuevas-rozo created at 2021-03-18 03:21:49

I apologize for the delay, but I was looking for the answer to the raised questions. By now, this ticket is working by using the following commands in order to load a testing branch of Kenzo:

git clone https://github.com/miguelmarco/kenzo/ \\
cd kenzo \\
git checkout testing \\
sage -ecl < compile.lisp \\
mv kenzo--all-systems.fasb $HOME/sage/local/lib/ecl/kenzo.fas \\

The changes made in this branch will be added in a future release of Kenzo.


---

Comment by @jcuevas-rozo created at 2021-03-18 03:32:35

Replying to [comment:44 jhpalmieri]:
> In the example
> {{{
>     sage: T = FiniteSpace([{0, 3}, {1, 3}, {2, 3}, {3}]) ; T
>     Finite T0 topological space of 4 points with minimal basis
>      {0: {3, 0}, 1: {3, 1}, 2: {3, 2}, 3: {3}}
>     sage: T.elements()
>     [3, 0, 1, 2]
> }}}
> I would have expected `T.elements()` to be `[0, 1, 2, 3]`, so I found the topogeneous matrix confusing. Even more with the following, I expect the elements to be sorted the way I enter them:
> {{{
>     sage: T = FiniteSpace([{0, 3}, {1, 3}, {2, 3}, {3}], elements=[0,1,2,3])                  
>     sage: T.elements()                                                                        
>     [3, 0, 1, 2]
> }}}
> Should they be sorted in some cases? If the sets of elements are likely to be large, I can understand not wanting to sort by default, but if the user supplies a list of elements, shouldn't we use that?
\\
I think the attribute `T.elements()` has no a good name, I think I should change it to `T.topogenous_sorting()` or something like that. If the user want to obtain the set of elements of the space, the attribute `T.underlying_set()` could be the best option.

\\

> I have no experience with finite topological spaces, so maybe users won't expect this sorting. From the !Python/Sage point of view, the current situation seems odd, though. Looking at the code, is the point to have an upper triangulate topogeneous matrix? If so, please add a comment about this to the documentation, pointing out an example. However, the example constructed from matrix data does not have an upper triangular topogeneous matrix, so maybe I'm confused. Or is it only upper triangular if the space is T0? The comment in the code could be clarified. Is this right:
> {{{
> #!diff
> diff --git a/src/sage/homology/finite_topological_spaces.py b/src/sage/homology/finite_topological_spaces.py
> index 80f0b32fd1..ddab80d6f1 100644
> --- a/src/sage/homology/finite_topological_spaces.py
> +++ b/src/sage/homology/finite_topological_spaces.py
> `@``@` -129,8 +129,19 `@``@` def FiniteSpace(data, elements=None, is_T0=False):
>           {0: {3, 0}, 1: {3, 1}, 2: {3, 2}, 3: {3}}
>          sage: type(T)
>          <class 'sage.homology.finite_topological_spaces.FiniteTopologicalSpace_T0'>
> +
> +    Note that the set of elements is sorted in perhaps an unexpected
> +    way. This is to ensure that in the case of a T0 space, the
> +    topogenous matrix is upper triangular::
> +
>          sage: T.elements()
>          [3, 0, 1, 2]
> +        sage: T.topogenous_matrix()
> +        [1 1 1 1]
> +        [0 1 0 0]
> +        [0 0 1 0]
> +        [0 0 0 1]
> +
>          sage: FiniteSpace(({0, 2}, {0, 2}))
>          Traceback (most recent call last):
>          ...
> `@``@` -226,7 +237,8 `@``@` def FiniteSpace(data, elements=None, is_T0=False):
>                  basis[j] = Uj
>              eltos = range(n)
>  
> -    # This fixes a topological sort (it guarantees an upper triangular topogenous matrix)
> +    # This fixes a topological sort (it guarantees an upper triangular topogenous matrix
> +    # in the T0 case)
>      eltos = list(eltos)
>      sorted_str_eltos = sorted([str(x) for x in eltos])
>      eltos.sort(key = lambda x: (len(basis[x]), sorted_str_eltos.index(str(x))))
> }}}
\\
The comments in the code are absolutely right, thanks for the suggestions!


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by git created at 2021-06-03 02:07:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2021-06-03 09:27:57

This only adds to confusion one gets upon looking at what's in `sage/homology/`.
IMHO this needs a restructuring (not on this ticket), maybe introducing something like `sage/topology` with parts such as `spaces`, `homology`, etc


---

Comment by jhpalmieri created at 2021-06-07 18:47:18

Replying to [comment:52 dimpase]:
> This only adds to confusion one gets upon looking at what's in `sage/homology/`.
> IMHO this needs a restructuring (not on this ticket), maybe introducing something like `sage/topology` with parts such as `spaces`, `homology`, etc

I created #31925 for this.


---

Comment by dimpase created at 2021-06-07 21:03:13

Replying to [comment:53 jhpalmieri]:
> Replying to [comment:52 dimpase]:
> > This only adds to confusion one gets upon looking at what's in `sage/homology/`.
> > IMHO this needs a restructuring (not on this ticket), maybe introducing something like `sage/topology` with parts such as `spaces`, `homology`, etc
> 
> I created #31925 for this.

perhaps this ticket, i.e. #30400, can be a start for `sage/topology` ?


---

Comment by jhpalmieri created at 2021-06-07 21:42:27

Replying to [comment:54 dimpase]:
> Replying to [comment:53 jhpalmieri]:
> > Replying to [comment:52 dimpase]:
> > > This only adds to confusion one gets upon looking at what's in `sage/homology/`.
> > > IMHO this needs a restructuring (not on this ticket), maybe introducing something like `sage/topology` with parts such as `spaces`, `homology`, etc
> > 
> > I created #31925 for this.
> 
> perhaps this ticket, i.e. #30400, can be a start for `sage/topology` ?

This and also #31748.


---

Comment by jhpalmieri created at 2021-06-08 01:53:28

Replying to [comment:55 jhpalmieri]:
> Replying to [comment:54 dimpase]:
> > Replying to [comment:53 jhpalmieri]:
> > > Replying to [comment:52 dimpase]:
> > > > This only adds to confusion one gets upon looking at what's in `sage/homology/`.
> > > > IMHO this needs a restructuring (not on this ticket), maybe introducing something like `sage/topology` with parts such as `spaces`, `homology`, etc
> > > 
> > > I created #31925 for this.
> > 
> > perhaps this ticket, i.e. #30400, can be a start for `sage/topology` ?
> 
> This and also #31748.

I'm working on #31925, and if it's in good enough shape, it can be a dependency for this ticket, and the file here would get added to `sage/topology`. My understanding is that this ticket requires an upgrade to Kenzo anyway, so this one is not immediately ready for merging. Is there a ticket for the new Kenzo?


---

Comment by slelievre created at 2021-06-08 15:06:33

Replying to [comment:56 jhpalmieri]:
> Is there a ticket for the new Kenzo?

The Trac query for [tickets whose summary includes "kenzo"](https://trac.sagemath.org/query?order=id&desc=1&summary=~kenzo)
reveals:

- #29617: Support system installations of ECL and fix the kenzo SPKG build

which upgrades from Kenzo 1.1.9 to Kenzo 1.1.10
and udates the "upstream" info to point to

- https://github.com/miguelmarco/kenzo

It got positive review in early April 2021,
and was rebased on 9.4.beta0 in late May 2021.

Other Kenzo sources seem more outdated, mentioning only Kenzo 1.1.7:

- the [homepage](https://www-fourier.ujf-grenoble.fr/~sergerar/Kenzo/)
  and former [Kenzo GitHub repo](https://github.com/gheber/kenzo)
  and its [releases page](https://github.com/gheber/kenzo/releases)
  and [wiki](https://github.com/gheber/kenzo/wiki).

Thankfully,

- the [repology info page for Kenzo](https://repology.org/project/kenzo/information)
  points to Miguel Marco's fork, which Sage is using.


---

Comment by jhpalmieri created at 2021-06-08 17:20:48

Replying to [comment:57 slelievre]:
> Replying to [comment:56 jhpalmieri]:
> > Is there a ticket for the new Kenzo?
> 
> The Trac query for [tickets whose summary includes "kenzo"](https://trac.sagemath.org/query?order=id&desc=1&summary=~kenzo)
> reveals:
> 
> - #29617: Support system installations of ECL and fix the kenzo SPKG build
> 
> which upgrades from Kenzo 1.1.9 to Kenzo 1.1.10
> and udates the "upstream" info to point to
> 
> - https://github.com/miguelmarco/kenzo
> 
> It got positive review in early April 2021,
> and was rebased on 9.4.beta0 in late May 2021.
> 
> Other Kenzo sources seem more outdated, mentioning only Kenzo 1.1.7:
> 
> - the [homepage](https://www-fourier.ujf-grenoble.fr/~sergerar/Kenzo/)
>   and former [Kenzo GitHub repo](https://github.com/gheber/kenzo)
>   and its [releases page](https://github.com/gheber/kenzo/releases)
>   and [wiki](https://github.com/gheber/kenzo/wiki).
> 
> Thankfully,
> 
> - the [repology info page for Kenzo](https://repology.org/project/kenzo/information)
>   points to Miguel Marco's fork, which Sage is using.

See also comment:48 on this ticket for the upgrade that I think we need.


---

Comment by jhpalmieri created at 2021-06-08 17:21:51

In any case, #31925 is ready for review, and this ticket could go in after it.


---

Comment by mkoeppe created at 2021-06-23 16:07:54

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.


---

Comment by git created at 2021-07-31 01:17:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-31 01:26:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jcuevas-rozo created at 2021-07-31 01:30:49

Changing status from needs_work to needs_review.


---

Comment by @jcuevas-rozo created at 2021-07-31 01:30:49

It has been merged with ticket #31925.


---

Comment by jhpalmieri created at 2021-08-03 17:02:08

I think there needs to be a ticket with the appropriate upgrade to Kenzo (comment:48), and this ticket should depend on that one. I think that we cannot really test this one without the Kenzo upgrade.


---

Comment by chapoton created at 2021-10-02 16:07:19

red branch => needs work


---

Comment by chapoton created at 2021-10-02 16:07:27

Changing status from needs_review to needs_work.
