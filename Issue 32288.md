# Issue 32288: Regression: wrong infinity returned by limit with fricas

archive/issues_032288.json:
```json
{
    "body": "\n```\nsage: limit(e^(-1/x), x=0, dir='left', algorithm='fricas') \nplusInfinity()\n```\n\nshould be\n\n```\n+Infinity\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32525\n\n",
    "created_at": "2021-09-16T13:09:48Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Regression: wrong infinity returned by limit with fricas",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32288",
    "user": "https://github.com/mantepse"
}
```

```
sage: limit(e^(-1/x), x=0, dir='left', algorithm='fricas') 
plusInfinity()
```

should be

```
+Infinity
```


Issue created by migration from https://trac.sagemath.org/ticket/32525





---

archive/issue_comments_460461.json:
```json
{
    "body": "Changing keywords from \"\" to \"FriCAS\".",
    "created_at": "2021-09-16T13:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460461",
    "user": "https://github.com/mantepse"
}
```

Changing keywords from "" to "FriCAS".



---

archive/issue_comments_460462.json:
```json
{
    "body": "The reason is as follows:\n\n```\nsage: fricas.get_InputForm(f._name)\n'(plusInfinity)'\n```\n\nmeans, that `plusInfinity` is a (nullary) function here.\nTherefore, in `_parse_other`, `make_fun` is `True`, and `FRICAS_CONSTANTS` never kicks in:\n\n```python\n        if make_fun:\n            try:\n                e = symbol_table[\"fricas\"][e]\n            except KeyError:\n                e = function(e)\n        else:\n            try:\n                e = ZZ(e)\n            except TypeError:\n                try:\n                    e = float(e)\n                except ValueError:\n                    try:\n                        e = FRICAS_CONSTANTS[e]\n                    except KeyError:\n                        e = var(e.replace(\"%\", \"_\"))\n```\n\n\nI wonder whether `%plusInfinity` was a constant in FriCAS before?  Or, alternatively, why this doctest passed?",
    "created_at": "2021-09-16T13:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460462",
    "user": "https://github.com/mantepse"
}
```

The reason is as follows:

```
sage: fricas.get_InputForm(f._name)
'(plusInfinity)'
```

means, that `plusInfinity` is a (nullary) function here.
Therefore, in `_parse_other`, `make_fun` is `True`, and `FRICAS_CONSTANTS` never kicks in:

```python
        if make_fun:
            try:
                e = symbol_table["fricas"][e]
            except KeyError:
                e = function(e)
        else:
            try:
                e = ZZ(e)
            except TypeError:
                try:
                    e = float(e)
                except ValueError:
                    try:
                        e = FRICAS_CONSTANTS[e]
                    except KeyError:
                        e = var(e.replace("%", "_"))
```


I wonder whether `%plusInfinity` was a constant in FriCAS before?  Or, alternatively, why this doctest passed?



---

archive/issue_comments_460463.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-17T12:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_460464.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-17T12:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460464",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_460465.json:
```json
{
    "body": "(This needs a fricas patchbot)",
    "created_at": "2021-09-17T14:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460465",
    "user": "https://github.com/mantepse"
}
```

(This needs a fricas patchbot)



---

archive/issue_comments_460466.json:
```json
{
    "body": "# %plusInfinity::INFORM is (minusInfinity) ????",
    "created_at": "2021-09-17T14:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460466",
    "user": "https://github.com/fchapoton"
}
```

# %plusInfinity::INFORM is (minusInfinity) ????



---

archive/issue_comments_460467.json:
```json
{
    "body": "Hi Frederic!\n\nI can only guess what your question is.  More elaborate:\n`in FriCAS, %plusInfinity::INFORM is (minusInfinity), so minusInfinity is a nullary function in FriCAS`.\n\nThe comment is there, because this is not the case for pi: `%pi::INFORM is %pi, so %pi is a constant in FriCAS`",
    "created_at": "2021-09-17T15:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460467",
    "user": "https://github.com/mantepse"
}
```

Hi Frederic!

I can only guess what your question is.  More elaborate:
`in FriCAS, %plusInfinity::INFORM is (minusInfinity), so minusInfinity is a nullary function in FriCAS`.

The comment is there, because this is not the case for pi: `%pi::INFORM is %pi, so %pi is a constant in FriCAS`



---

archive/issue_comments_460468.json:
```json
{
    "body": "ping?",
    "created_at": "2021-09-22T11:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460468",
    "user": "https://github.com/mantepse"
}
```

ping?



---

archive/issue_comments_460469.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-22T11:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460469",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_460470.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2021-09-22T11:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460470",
    "user": "https://github.com/fchapoton"
}
```

ok, let it be



---

archive/issue_comments_460471.json:
```json
{
    "body": "Thank you!  Did you run the test suite with fricas?",
    "created_at": "2021-09-23T11:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460471",
    "user": "https://github.com/mantepse"
}
```

Thank you!  Did you run the test suite with fricas?



---

archive/issue_comments_460472.json:
```json
{
    "body": "only on the modified file",
    "created_at": "2021-09-23T15:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460472",
    "user": "https://github.com/fchapoton"
}
```

only on the modified file



---

archive/issue_comments_460473.json:
```json
{
    "body": "I think it would be good to run the full suite.  (I did on my installation, but I possibly do not have the standard FriCAS)",
    "created_at": "2021-09-23T15:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460473",
    "user": "https://github.com/mantepse"
}
```

I think it would be good to run the full suite.  (I did on my installation, but I possibly do not have the standard FriCAS)



---

archive/issue_comments_460474.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-10T10:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32288#issuecomment-460474",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_029306.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-10-10T10:16:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32288#event-29306"
}
```
