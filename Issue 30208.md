# Issue 30208: Merge duplications in edges, ridges and f-vector of combinatorial polyhedron

Issue created by migration from https://trac.sagemath.org/ticket/30445

Original creator: @kliem

Original creation time: 2020-08-26 13:30:32

CC:  jipilab @laisrast tscrim

Keywords: code duplication, combinatorial polyhedron

We merge some duplications of obtaining edges, ridges and f-vector.

There was an entire copy of getting edges/ridges that also obtained the f-vector. But it is much simpler doing this directly in the f-vector code.

Also getting the edges/ridges is almost the same thing. We can let the `FaceIterator` worry about the details.


---

Comment by @kliem created at 2020-08-26 13:30:38

Changing status from new to needs_review.


---

Comment by tscrim created at 2021-01-07 02:21:22

Some minor formatting things (which you can either change or ignore and then set this to a positive review):

```diff
-    cdef size_t _compute_edges_or_ridges_with_iterator(self, FaceIterator face_iter, bint do_atom_rep, size_t ***edges_pt, size_t *counter_pt, size_t *current_length_pt, MemoryAllocator mem) except -1:
+    cdef size_t _compute_edges_or_ridges_with_iterator(self, FaceIterator face_iter,
+                                                       bint do_atom_rep,
+                                                       size_t ***edges_pt,
+                                                       size_t *counter_pt,
+                                                       size_t *current_length_pt,
+                                                       MemoryAllocator mem) except -1:
         r"""
         See :meth:`CombinatorialPolyhedron._compute_edges`.
         """
         cdef size_t a,b                # facets of an edge
         cdef int dim = self.dimension()
         cdef output_dimension = 1 if do_atom_rep else dim - 2
 
-        while (face_iter.next_dimension() == output_dimension):
+        while face_iter.next_dimension() == output_dimension:
```



---

Comment by git created at 2021-01-07 11:48:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-01-07 11:48:46

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-01-07 11:48:46

Thank you.


---

Comment by vbraun created at 2021-01-17 13:46:04

Resolution: fixed
