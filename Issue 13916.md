# Issue 13916: Add constant_coefficient method for Laurent polynomials

archive/issues_013916.json:
```json
{
    "body": "Assignee: tscrim\n\nKeywords: days45\n\nThere is no (easy) way to obtain the coefficient on the constant term for an element in the Laurent polynomial ring. This just adds a method `constant_coefficient()`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14120\n\n",
    "created_at": "2013-02-14T16:01:50Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "title": "Add constant_coefficient method for Laurent polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13916",
    "user": "tscrim"
}
```
Assignee: tscrim

Keywords: days45

There is no (easy) way to obtain the coefficient on the constant term for an element in the Laurent polynomial ring. This just adds a method `constant_coefficient()`.

Issue created by migration from https://trac.sagemath.org/ticket/14120





---

archive/issue_comments_173423.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-14T16:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173423",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_173424.json:
```json
{
    "body": "Fixed doctests and added a general `__getitem__()` to retrieve the coefficient by exponent value:\n\n```\nsage: P.<x,y> = LaurentPolynomialRing(QQ)\nsage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3; f\n-x^6 - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2\nsage: f[-2,3]   \n-7\nsage: f.coefficient(x^-2*y^3)\n-7\n```\n",
    "created_at": "2013-02-15T22:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173424",
    "user": "tscrim"
}
```

Fixed doctests and added a general `__getitem__()` to retrieve the coefficient by exponent value:

```
sage: P.<x,y> = LaurentPolynomialRing(QQ)
sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3; f
-x^6 - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2
sage: f[-2,3]   
-7
sage: f.coefficient(x^-2*y^3)
-7
```




---

archive/issue_comments_173425.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-23T16:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173425",
    "user": "knsam"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_173426.json:
```json
{
    "body": "I thought, I'd review this ticket.\n\nThe docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. \n\nIMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) \n\nAnd, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints \"like\" [this](http://trac.sagemath.org/sage_trac/ticket/14124). \n\nBuilding documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` \n\n\n```\n<autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n```\n\n-------------------------\nFinally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... \n\nThe already extant method `cofficient()` would benefit from adding r: `r\"\"\"` just so that the `\\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)\n--------------------------\n\nRegards, \n~KnS",
    "created_at": "2013-02-23T16:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173426",
    "user": "knsam"
}
```

I thought, I'd review this ticket.

The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. 

IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) 

And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints "like" [this](http://trac.sagemath.org/sage_trac/ticket/14124). 

Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` 


```
<autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
```

-------------------------
Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... 

The already extant method `cofficient()` would benefit from adding r: `r"""` just so that the `\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)
--------------------------

Regards, 
~KnS



---

archive/issue_comments_173427.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-02-23T18:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173427",
    "user": "tscrim"
}
```

Attachment



---

archive/issue_comments_173428.json:
```json
{
    "body": "First off, thank you for doing the review.\n\nReplying to [comment:3 knsam]:\n> The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. \n> \n> IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) \n\nI made it consistent with other multivariate polynomial rings, however I forgot to correct the doc. This is done. I've also added in two more methods for consistancy and changed the output of the iterator.\n\n> And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints \"like\" [this](http://trac.sagemath.org/sage_trac/ticket/14124). \n\nThis does not make sense to me. They are iterable with this patch.\n\n> Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` \n> \n> {{{\n> <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.\n> }}}\n\nI do not get this with the revised patch.\n\n> Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... \n\nYou are welcome to do so on another ticket. That is outside of the purview of this one. I did it in the methods this patch touches.\n\n> The already extant method `cofficient()` would benefit from adding r: `r\"\"\"` just so that the `\\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)\n\nFixed.\n\nBest,\nTravis",
    "created_at": "2013-02-23T18:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173428",
    "user": "tscrim"
}
```

First off, thank you for doing the review.

Replying to [comment:3 knsam]:
> The docstring claims that, if the number of inputs is less than the number of variables, all the remaining[trailing] variables would have their exponent set to zero. But, for some reason, the implementation (and hence the examples) raises a `TypeError`. 
> 
> IMHO, it would be nice to implement the behaviour suggested by the docstring. (of course, the other case, where no. of variables <= no. of inputs is being handled correctly.) 

I made it consistent with other multivariate polynomial rings, however I forgot to correct the doc. This is done. I've also added in two more methods for consistancy and changed the output of the iterator.

> And, could we also please document that multivariate laurent polynomials are not iterable, as implemented, by adding an example, before we get complaints "like" [this](http://trac.sagemath.org/sage_trac/ticket/14124). 

This does not make sense to me. They are iterable with this patch.

> Building documentation, there is a warning, which is fairly easy to fix: I think the complaint is about the method `__call__` 
> 
> {{{
> <autodoc>:0: WARNING: Block quote ends without a blank line; unexpected unindent.
> }}}

I do not get this with the revised patch.

> Finally, that we are changing this file, one might as well go ahead and clean up all the codifications: self is almost never codified, for instance and such documentation stuff... 

You are welcome to do so on another ticket. That is outside of the purview of this one. I did it in the methods this patch touches.

> The already extant method `cofficient()` would benefit from adding r: `r"""` just so that the `\frac` with backslash is picked up properly by Sphinx. There is a misspelt word in the Note that is already there too. (constnat...)

Fixed.

Best,
Travis



---

archive/issue_comments_173429.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-23T18:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173429",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_173430.json:
```json
{
    "body": ">> And, could we also please document that multivariate laurent polynomials are not\n>> iterable, as implemented, by adding an example, before we get complaints \"like\"  this.\n>\n> This does not make sense to me. They are iterable with this patch.\n\nI meant more along the following lines: you cannot iterate through using slice notation: \n\n\n```\n sage: P.<x,y,z> = LaurentPolynomialRing(QQ)\n sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3 + x*z; f\n -x^6 + x*z - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2\n sage: f[6,0,0]\n -1\n sage:f[5:6]\n [snip]\n TypeError: Multivariate Laurent polynomials are not iterable\n```\n\n\nBut, well, this does not even make sense, given the current implementation. So, I'll set this to positive review. \n\n~KnS",
    "created_at": "2013-02-24T03:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173430",
    "user": "knsam"
}
```

>> And, could we also please document that multivariate laurent polynomials are not
>> iterable, as implemented, by adding an example, before we get complaints "like"  this.
>
> This does not make sense to me. They are iterable with this patch.

I meant more along the following lines: you cannot iterate through using slice notation: 


```
 sage: P.<x,y,z> = LaurentPolynomialRing(QQ)
 sage: f = (y^2 - x^9 - 7*x*y^3 + 5*x*y)*x^-3 + x*z; f
 -x^6 + x*z - 7*x^-2*y^3 + 5*x^-2*y + x^-3*y^2
 sage: f[6,0,0]
 -1
 sage:f[5:6]
 [snip]
 TypeError: Multivariate Laurent polynomials are not iterable
```


But, well, this does not even make sense, given the current implementation. So, I'll set this to positive review. 

~KnS



---

archive/issue_comments_173431.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-24T03:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173431",
    "user": "knsam"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173432.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-28T10:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13916#issuecomment-173432",
    "user": "jdemeyer"
}
```

Resolution: fixed
