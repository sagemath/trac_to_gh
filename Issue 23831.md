# Issue 23831: py3: some care for .values()[...]

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-10-19 19:22:44

part of #15981


---

Comment by chapoton created at 2017-10-19 19:23:10

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-10-19 19:23:10

New commits:


---

Comment by git created at 2017-10-19 19:26:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-10-19 21:56:15

For this change:

```diff
diff --git a/src/sage/combinat/combinat.py b/src/sage/combinat/combinat.py
index 9602889..1cdb339 100644
--- a/src/sage/combinat/combinat.py
+++ b/src/sage/combinat/combinat.py
`@``@` -144,7 +144,7 `@``@` Functions and classes
 #*****************************************************************************
 from __future__ import absolute_import
 from six.moves import range
-from six import iteritems, add_metaclass
+from six import iteritems, add_metaclass, itervalues
 
 from sage.interfaces.all import maxima
 from sage.rings.all import ZZ, QQ, Integer, infinity
`@``@` -1293,7 +1293,7 `@``@` class CombinatorialElement(CombinatorialObject, Element):
         if len(args) == 1 and not kwds:
             L = args[0]
         elif len(kwds) == 1 and not args:
-            L = kwds.values()[0]
+            L = next(itervalues(kwds))
         else:
             raise TypeError("__init__() takes exactly 2 arguments ({} given)".format(1+len(args)+len(kwds)))
         super(CombinatorialElement, self).__init__(L)
```

we should be able to do `L, = kwds.values()`.


---

Comment by git created at 2017-10-20 06:53:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-10-20 10:04:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-10-20 11:23:23

Sometimes you use `iter(x.values())` and sometimes `itervalues(x)`. Wouldn't it be better to always use `six.itervalues`?


---

Comment by chapoton created at 2017-10-20 11:56:31

I only used iter(x.values()) when the other option was not working.


---

Comment by jdemeyer created at 2017-10-20 14:58:13

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-10-20 14:58:13

Replying to [comment:7 chapoton]:
> I only used iter(x.values()) when the other option was not working.

Because you are changing the `values()` method for a non-dict!


---

Comment by git created at 2017-10-20 15:14:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-10-20 15:15:09

indeed. Corrected


---

Comment by chapoton created at 2017-10-20 15:15:09

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-10-20 18:53:52

green bot now at last


---

Comment by chapoton created at 2017-10-22 19:02:05

ping?


---

Comment by jdemeyer created at 2017-10-25 13:50:52

I disagree with

```diff
diff --git a/src/sage/graphs/generic_graph.py b/src/sage/graphs/generic_graph.py
index c3d5fe5..d5d6c5a 100644
--- a/src/sage/graphs/generic_graph.py
+++ b/src/sage/graphs/generic_graph.py
`@``@` -13101,7 +13101,7 `@``@` class GenericGraph(GenericGraph_pyx):
         From this embedding, we can clearly build an interval graph
         isomorphic to the previous one::
 
-            sage: g2 = graphs.IntervalGraph(d.values())
+            sage: g2 = graphs.IntervalGraph(list(d.values()))
             sage: g2.is_isomorphic(g)
             True
```

Instead, I suggest

```diff
diff --git a/src/sage/graphs/generators/intersection.py b/src/sage/graphs/generators/intersection.py
index a81c4a6..ba5b6a7 100644
--- a/src/sage/graphs/generators/intersection.py
+++ b/src/sage/graphs/generators/intersection.py
`@``@` -90,6 +90,7 `@``@` def IntervalGraph(intervals, points_ordered = False):
         sage: g.edges() == h.edges()
         True
     """
+    intervals = list(intervals)
 
     n = len(intervals)
     g = Graph(n)
```


In `src/sage/rings/polynomial/multi_polynomial_ring.py`, some indentation is wrong (not a multiple of 4). Since you're change that code anyway, better fix that.

In `src/sage/sets/set_from_iterator.py`, you can remove the `assert` since the new code already checks that.

That's all.


---

Comment by jdemeyer created at 2017-10-25 13:50:52

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-10-26 07:36:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-10-26 07:37:33

Thanks. All done


---

Comment by chapoton created at 2017-10-26 07:37:33

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-10-26 08:01:03

positive review if the patchbot passes.


---

Comment by tscrim created at 2017-10-26 20:11:36

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-10-29 10:31:43

Resolution: fixed
