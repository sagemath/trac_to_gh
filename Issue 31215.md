# Issue 31215: Problem with solution_dict in solve

archive/issues_031215.json:
```json
{
    "body": "CC:  chapoton\n\nThis is with\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.2, Release Date: 2020-10-24                     \u2502\n\u2502 Using Python 3.8.5. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\nAll of these work as expected:\n\n```                                                                                                                                            \nsage: solve(x==3,x)                                                                                                                                            \nsage: solve([x==3],x)                                                                                                                                          \nsage: solve([x==3],[x])                                                                                                                                        \nsage: solve(x==3,[x])                                                                                                                                          \nsage: solve(x==3,x,solution_dict=True)                                                                                                                         \nsage: solve([x==3],x,solution_dict=True)                                                                                                                       \n```\n\nSo I wonder why these give an error:\n\n```\nsage: solve(x==3,[x],solution_dict=True)                                                                                                                     \nsage: solve([x==3],[x],solution_dict=True)                                                                                                                     \n[...]\nTypeError: 'sage.symbolic.expression.Expression' object is not iterable\n```\n\nI am sure you have guessed:  I am trying to do this in a program where the number of equations and the number of variables are variable.\n\nIs it necessary to test for the case where there is only one variable?\nI hope not.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31452\n\n",
    "created_at": "2021-03-04T06:46:52Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Problem with solution_dict in solve",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31215",
    "user": "@GMS103"
}
```
CC:  chapoton

This is with

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.2, Release Date: 2020-10-24                     │
│ Using Python 3.8.5. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
```

All of these work as expected:

```                                                                                                                                            
sage: solve(x==3,x)                                                                                                                                            
sage: solve([x==3],x)                                                                                                                                          
sage: solve([x==3],[x])                                                                                                                                        
sage: solve(x==3,[x])                                                                                                                                          
sage: solve(x==3,x,solution_dict=True)                                                                                                                         
sage: solve([x==3],x,solution_dict=True)                                                                                                                       
```

So I wonder why these give an error:

```
sage: solve(x==3,[x],solution_dict=True)                                                                                                                     
sage: solve([x==3],[x],solution_dict=True)                                                                                                                     
[...]
TypeError: 'sage.symbolic.expression.Expression' object is not iterable
```

I am sure you have guessed:  I am trying to do this in a program where the number of equations and the number of variables are variable.

Is it necessary to test for the case where there is only one variable?
I hope not.

Issue created by migration from https://trac.sagemath.org/ticket/31452





---

archive/issue_comments_446242.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446242",
    "user": "mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.



---

archive/issue_comments_446243.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446243",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_446244.json:
```json
{
    "body": "Simple corner case. I also fix this while I am at it:\n\n```sage\nsage: solve([x==3], x, solution_dict=True, algorithm='sympy')                                             \n[x == 3]\nsage: solve([x==3, y==1], [x,y], solution_dict=True, algorithm='sympy')  # good\n[{x: 3, y: 1}]\n```\n\n----\nNew commits:",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446244",
    "user": "tscrim"
}
```

Simple corner case. I also fix this while I am at it:

```sage
sage: solve([x==3], x, solution_dict=True, algorithm='sympy')                                             
[x == 3]
sage: solve([x==3, y==1], [x,y], solution_dict=True, algorithm='sympy')  # good
[{x: 3, y: 1}]
```

----
New commits:



---

archive/issue_comments_446245.json:
```json
{
    "body": "Bot is morally green.",
    "created_at": "2021-05-13T02:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446245",
    "user": "tscrim"
}
```

Bot is morally green.



---

archive/issue_comments_446246.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-13T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446246",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446247.json:
```json
{
    "body": "ok",
    "created_at": "2021-05-13T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446247",
    "user": "chapoton"
}
```

ok



---

archive/issue_comments_446248.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-05-13T08:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446248",
    "user": "tscrim"
}
```

Thank you!



---

archive/issue_comments_446249.json:
```json
{
    "body": "Wonderful!\n\nThanks to all of you!",
    "created_at": "2021-05-13T12:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446249",
    "user": "@GMS103"
}
```

Wonderful!

Thanks to all of you!



---

archive/issue_comments_446250.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-05-27T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31215#issuecomment-446250",
    "user": "vbraun"
}
```

Resolution: fixed
