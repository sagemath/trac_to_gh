# Issue 24186: LinearFunctionOrConstraint.__richcmp__ should replace before converting

Issue created by migration from https://trac.sagemath.org/ticket/24423

Original creator: jdemeyer

Original creation time: 2017-12-22 21:45:33

CC:  vbraun

The logic in the hack to allow linear functions like `x_0 <= x_1 <= x_2` is wrong: currently, when doing `x <= y`, it first converts `x` and `y` to the correct parent and then it checks for a chained comparison. This is wrong: it should check for a chained comparison on the input of the `__richcmp__` function before converting.

Note: this was caught by work on #24371, but it's really an independent issue.


---

Comment by jdemeyer created at 2018-01-05 16:15:34

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-01-05 16:15:34

New commits:


---

Comment by git created at 2018-01-05 16:19:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2018-02-07 09:31:49

Can't really say I understand all implications, but this looks at least as reasonable as the previous version `:-)`.


---

Comment by mmezzarobba created at 2018-02-07 09:31:49

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2018-02-07 09:33:07

Thanks!


---

Comment by vbraun created at 2018-02-09 23:48:04

Resolution: fixed
