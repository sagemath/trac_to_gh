# Issue 14678: Inexplicably long-time doctest in sage/combinat/backtrack.py

archive/issues_014678.json:
```json
{
    "body": "Assignee: sage-combinat\n\nKeywords: combinat, backtrack\n\nIt's in the docstring of ``PositiveIntegerSemigroup``:\n\n\n```\n    EXAMPLES::\n\n        sage: from sage.combinat.backtrack import PositiveIntegerSemigroup\n        sage: PP = PositiveIntegerSemigroup()\n        sage: PP.category()\n        Join of Category of infinite enumerated sets and Category of commutative additive semigroups and Category of monoids and Category of facade sets\n        sage: PP.cardinality()\n        +Infinity\n        sage: PP.one()\n        1\n        sage: PP.an_element()\n        1\n        sage: some_elements = list(PP.some_elements()); some_elements\n        [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]\n\n    TESTS::\n\n        sage: from sage.combinat.backtrack import PositiveIntegerSemigroup\n        sage: PP = PositiveIntegerSemigroup()\n        sage: TestSuite(PP).run(elements=some_elements)\n```\n\n\nThis TestSuite call takes 1.44 min on my machine, and this persists even if I replace the ``some_elements`` list (with length 100) by a list of length 2 or even an empty list. I don't see what there is that can be tested so long about positive integers...\n\nThe attached patch doesn't solve the underlying problem, but just #longtimes the computation so that it does not lame me down when I want to doctest sage.combinat. I would love to help, but I don't know enough about test suites.\n\nThe patch also fixes some spelling.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14882\n\n",
    "created_at": "2013-07-12T13:40:35Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Inexplicably long-time doctest in sage/combinat/backtrack.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14678",
    "user": "https://github.com/darijgr"
}
```
Assignee: sage-combinat

Keywords: combinat, backtrack

It's in the docstring of ``PositiveIntegerSemigroup``:


```
    EXAMPLES::

        sage: from sage.combinat.backtrack import PositiveIntegerSemigroup
        sage: PP = PositiveIntegerSemigroup()
        sage: PP.category()
        Join of Category of infinite enumerated sets and Category of commutative additive semigroups and Category of monoids and Category of facade sets
        sage: PP.cardinality()
        +Infinity
        sage: PP.one()
        1
        sage: PP.an_element()
        1
        sage: some_elements = list(PP.some_elements()); some_elements
        [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]

    TESTS::

        sage: from sage.combinat.backtrack import PositiveIntegerSemigroup
        sage: PP = PositiveIntegerSemigroup()
        sage: TestSuite(PP).run(elements=some_elements)
```


This TestSuite call takes 1.44 min on my machine, and this persists even if I replace the ``some_elements`` list (with length 100) by a list of length 2 or even an empty list. I don't see what there is that can be tested so long about positive integers...

The attached patch doesn't solve the underlying problem, but just #longtimes the computation so that it does not lame me down when I want to doctest sage.combinat. I would love to help, but I don't know enough about test suites.

The patch also fixes some spelling.

Issue created by migration from https://trac.sagemath.org/ticket/14882





---

archive/issue_comments_186616.json:
```json
{
    "body": "not an actual fix, just a # long time",
    "created_at": "2013-07-12T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186616",
    "user": "https://github.com/darijgr"
}
```

not an actual fix, just a # long time



---

archive/issue_comments_186617.json:
```json
{
    "body": "Attachment [trac_14882-backtrack_longtime-dg.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-backtrack_longtime-dg.patch) by @darijgr created at 2013-07-12 13:41:32",
    "created_at": "2013-07-12T13:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186617",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14882-backtrack_longtime-dg.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-backtrack_longtime-dg.patch) by @darijgr created at 2013-07-12 13:41:32



---

archive/issue_comments_186618.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-07-12T13:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186618",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_186619.json:
```json
{
    "body": "I'm just seeing this is fixed by Travis in #14772. Thanks, Travis!",
    "created_at": "2013-07-12T14:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186619",
    "user": "https://github.com/darijgr"
}
```

I'm just seeing this is fixed by Travis in #14772. Thanks, Travis!



---

archive/issue_comments_186620.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-07-12T14:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186620",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_186621.json:
```json
{
    "body": "typos in docstring and valueerrors corrected",
    "created_at": "2013-07-12T14:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186621",
    "user": "https://github.com/darijgr"
}
```

typos in docstring and valueerrors corrected



---

archive/issue_comments_186622.json:
```json
{
    "body": "Attachment [trac_14882-backtrack_longtime-dg-v2.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-backtrack_longtime-dg-v2.patch) by @darijgr created at 2013-07-12 14:25:07",
    "created_at": "2013-07-12T14:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186622",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14882-backtrack_longtime-dg-v2.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-backtrack_longtime-dg-v2.patch) by @darijgr created at 2013-07-12 14:25:07



---

archive/issue_comments_186623.json:
```json
{
    "body": "Duplicate since I noticed this and fixed it in #14772? Or should we have this one just fix the spelling?",
    "created_at": "2013-07-13T10:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186623",
    "user": "https://github.com/tscrim"
}
```

Duplicate since I noticed this and fixed it in #14772? Or should we have this one just fix the spelling?



---

archive/issue_comments_186624.json:
```json
{
    "body": "This is just a spelling fix now (\"breath-first\", \"pickable\" for \"picklable\"); I removed your change from my patch.",
    "created_at": "2013-07-13T10:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186624",
    "user": "https://github.com/darijgr"
}
```

This is just a spelling fix now ("breath-first", "pickable" for "picklable"); I removed your change from my patch.



---

archive/issue_comments_186625.json:
```json
{
    "body": "Okay, so there's no dependency (I checked this). However there should not be periods '.' after the input's since they are not complete sentences. Also since we're bring the doc more up to spec, how about converting them to the conventions formatting of:\n\n```\n- ``arg`` -- a description of the arg\n```\n\n\nThanks,\n\nTravis",
    "created_at": "2013-07-13T11:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186625",
    "user": "https://github.com/tscrim"
}
```

Okay, so there's no dependency (I checked this). However there should not be periods '.' after the input's since they are not complete sentences. Also since we're bring the doc more up to spec, how about converting them to the conventions formatting of:

```
- ``arg`` -- a description of the arg
```


Thanks,

Travis



---

archive/issue_comments_186626.json:
```json
{
    "body": "spelling fixes, including a string keyword (shouldn't break doctests, since the method wasn't testing for the keyword being == \"breath\", bur only for it being != \"depth\")",
    "created_at": "2013-07-13T11:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186626",
    "user": "https://github.com/darijgr"
}
```

spelling fixes, including a string keyword (shouldn't break doctests, since the method wasn't testing for the keyword being == "breath", bur only for it being != "depth")



---

archive/issue_comments_186627.json:
```json
{
    "body": "Attachment [trac_14882-spelling_in_backtrack-dg.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-spelling_in_backtrack-dg.patch) by @darijgr created at 2013-07-13 11:57:20",
    "created_at": "2013-07-13T11:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186627",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14882-spelling_in_backtrack-dg.patch](tarball://root/attachments/some-uuid/ticket14882/trac_14882-spelling_in_backtrack-dg.patch) by @darijgr created at 2013-07-13 11:57:20



---

archive/issue_comments_186628.json:
```json
{
    "body": "Fair point; fixed.\n\nfor the patchbot:\n\napply trac_14882-spelling_in_backtrack-dg.patch",
    "created_at": "2013-07-13T11:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186628",
    "user": "https://github.com/darijgr"
}
```

Fair point; fixed.

for the patchbot:

apply trac_14882-spelling_in_backtrack-dg.patch



---

archive/issue_comments_186629.json:
```json
{
    "body": "Looks good to me now. Thanks Darij.",
    "created_at": "2013-07-13T12:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186629",
    "user": "https://github.com/tscrim"
}
```

Looks good to me now. Thanks Darij.



---

archive/issue_comments_186630.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-13T12:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186630",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_186631.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-10T06:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14678#issuecomment-186631",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_014421.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-10T06:38:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14678",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14678#event-14421"
}
```
