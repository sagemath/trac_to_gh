# Issue 16601: make affine and projective dehomogenize and homogenize work together

Issue created by migration from Trac.

Original creator: bhutz

Original creation time: 2014-08-16 16:11:12

Assignee: bhutz

There are a number of issues currently with the `homogenization` and `dehomogenization` functionality. Essentially, what I'd like to see is that dehomogenizing and then homogenizing returns basically the same object. Currently dehomogenization is using `AffinePatch`, but homogenization is creating a new projective space every time. This causes a number of funny behaviors so should instead be using projective embedding. I'd like to see tests of the following form return `True`:


```
P.<x,y,z>=ProjectiveSpace(QQ,2)
H=End(P)
f=H([x*y,y^2,z^2])
n=1
f.dehomogenize(n).homogenize(n)==f
```



```
A.<x,y>=AffineSpace(QQ,2)
H=End(A)
f=H([x*y,y^2])
n=0
f.homogenize(n).dehomogenize(n)==f
```


This also requires having the `affine_patch` and `projective_embedding` play nicely together. Fixing this would also allow objects homogenized or dehomogenized from the same space to then live in the same new space. The same for points and currently there is no homogenization function at all for affine points. 

I've started working on this and just need to fix a couple more things.


---

Comment by git created at 2014-08-18 19:53:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-23 13:13:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-23 13:18:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2014-08-25 16:42:20

Changing status from new to needs_review.


---

Comment by jdefaria created at 2014-09-03 17:46:53

Outside of a couple of small typos with spacing around equality signs, everything else looks good, ran the long test and confirmed that all tests passed.


---

Comment by git created at 2014-09-03 19:39:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdefaria created at 2014-09-03 21:04:16

Changing status from needs_review to positive_review.


---

Comment by jdefaria created at 2014-09-03 21:04:16

Everything looks good.


---

Comment by vbraun created at 2014-09-06 11:02:36

Resolution: fixed
