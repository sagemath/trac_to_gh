# Issue 16601: make affine and projective dehomogenize and homogenize work together

archive/issues_016601.json:
```json
{
    "body": "Assignee: bhutz\n\nThere are a number of issues currently with the `homogenization` and `dehomogenization` functionality. Essentially, what I'd like to see is that dehomogenizing and then homogenizing returns basically the same object. Currently dehomogenization is using `AffinePatch`, but homogenization is creating a new projective space every time. This causes a number of funny behaviors so should instead be using projective embedding. I'd like to see tests of the following form return `True`:\n\n\n```\nP.<x,y,z>=ProjectiveSpace(QQ,2)\nH=End(P)\nf=H([x*y,y^2,z^2])\nn=1\nf.dehomogenize(n).homogenize(n)==f\n```\n\n\n\n```\nA.<x,y>=AffineSpace(QQ,2)\nH=End(A)\nf=H([x*y,y^2])\nn=0\nf.homogenize(n).dehomogenize(n)==f\n```\n\n\nThis also requires having the `affine_patch` and `projective_embedding` play nicely together. Fixing this would also allow objects homogenized or dehomogenized from the same space to then live in the same new space. The same for points and currently there is no homogenization function at all for affine points. \n\nI've started working on this and just need to fix a couple more things.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16838\n\n",
    "created_at": "2014-08-16T16:11:12Z",
    "labels": [
        "algebraic geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "make affine and projective dehomogenize and homogenize work together",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16601",
    "user": "bhutz"
}
```
Assignee: bhutz

There are a number of issues currently with the `homogenization` and `dehomogenization` functionality. Essentially, what I'd like to see is that dehomogenizing and then homogenizing returns basically the same object. Currently dehomogenization is using `AffinePatch`, but homogenization is creating a new projective space every time. This causes a number of funny behaviors so should instead be using projective embedding. I'd like to see tests of the following form return `True`:


```
P.<x,y,z>=ProjectiveSpace(QQ,2)
H=End(P)
f=H([x*y,y^2,z^2])
n=1
f.dehomogenize(n).homogenize(n)==f
```



```
A.<x,y>=AffineSpace(QQ,2)
H=End(A)
f=H([x*y,y^2])
n=0
f.homogenize(n).dehomogenize(n)==f
```


This also requires having the `affine_patch` and `projective_embedding` play nicely together. Fixing this would also allow objects homogenized or dehomogenized from the same space to then live in the same new space. The same for points and currently there is no homogenization function at all for affine points. 

I've started working on this and just need to fix a couple more things.

Issue created by migration from https://trac.sagemath.org/ticket/16838





---

archive/issue_comments_218879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-18T19:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218879",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218880.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-23T13:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218880",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218881.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-23T13:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218881",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218882.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-25T16:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218882",
    "user": "bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_218883.json:
```json
{
    "body": "Outside of a couple of small typos with spacing around equality signs, everything else looks good, ran the long test and confirmed that all tests passed.",
    "created_at": "2014-09-03T17:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218883",
    "user": "jdefaria"
}
```

Outside of a couple of small typos with spacing around equality signs, everything else looks good, ran the long test and confirmed that all tests passed.



---

archive/issue_comments_218884.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-03T19:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218884",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218885.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-03T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218885",
    "user": "jdefaria"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218886.json:
```json
{
    "body": "Everything looks good.",
    "created_at": "2014-09-03T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218886",
    "user": "jdefaria"
}
```

Everything looks good.



---

archive/issue_comments_218887.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-06T11:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16601",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16601#issuecomment-218887",
    "user": "vbraun"
}
```

Resolution: fixed
