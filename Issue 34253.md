# Issue 34253: `sage --package clean` command to remove outdated source tarballs

Issue created by migration from https://trac.sagemath.org/ticket/34490

Original creator: tmonteil

Original creation time: 2022-09-04 11:05:21

The `$SAGE_ROOT/upstream/` accumulates tarballs over the time. The proposed `sage --package clean` command cleans that directory and keeps only tarballs that are currently needed (i.e. only the versions indicated in `$SAGE_ROOT/build/pkgs/*/package-version.txt` are kept).



---

Comment by tmonteil created at 2022-09-04 11:18:49

New commits:


---

Comment by tmonteil created at 2022-09-04 11:18:49

Changing status from new to needs_review.


---

Comment by dcoudert created at 2022-09-04 12:07:59

Something is not working

```
maserati:/home/dcoudert/sage> ./sage --package clean
usage: sage --package [-h] [--log LOG] {config,list,name,tarball,apropos,update,update-latest,download,upload,fix-checksum,create} ...
sage --package: error: argument subcommand: invalid choice: 'clean' (choose from 'config', 'list', 'name', 'tarball', 'apropos', 'update', 'update-latest', 'download', 'upload', 'fix-checksum', 'create')
```



---

Comment by dcoudert created at 2022-09-04 13:19:13

Oups, I did a mistake when getting the branch. I did it again and now it's working well.

LGTM.


---

Comment by dcoudert created at 2022-09-04 13:19:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-09-22 22:35:16

Resolution: fixed
