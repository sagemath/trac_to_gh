# Issue 19038: handle empty matroid in partition

Issue created by migration from https://trac.sagemath.org/ticket/19275

Original creator: chaoxu

Original creation time: 2015-09-23 13:42:25

The matroid partition code doesn't handle the special case of a empty matroid. 




---

Comment by chaoxu created at 2015-09-23 14:04:43

New commits:


---

Comment by chaoxu created at 2015-09-23 14:04:43

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-09-23 15:31:57

Can you add a test to show it works for the corner case? Otherwise LGTM.


---

Comment by git created at 2015-09-23 18:16:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-23 18:20:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chaoxu created at 2015-09-23 18:23:35

I have added the corner case.
Also, I realized it should return a empty list, instead of a list that contains a empty set.


---

Comment by tscrim created at 2015-09-24 18:25:25

Yea, that is better.

In a related issue; I tried the following ways to naturally create an empty matroid:

```
sage: Matroid()
...
UnboundLocalError: local variable 'M' referenced before assignment
sage: Matroid([])
...
ValueError: min() arg is an empty sequence
sage: Matroid(groundset=[], bases=[])
...
ValueError: min() arg is an empty sequence
```

You might want to consider changing things so that these could give you an empty matroid. Also, is this correct?

```
sage: M = Matroid(Graph()); M
Regular matroid of rank 0 on 0 elements with 1 bases
sage: list(M.bases())
[frozenset()]
```

(All of that is another ticket.)

However, this worked:

```
sage: Matroid(matrix([]))
Linear matroid of rank 0 on 0 elements represented over the Rational Field
```

Could you use that for the test since it uses the top-level interface?


---

Comment by git created at 2015-09-24 19:04:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chaoxu created at 2015-09-24 19:16:25

> You might want to consider changing things so that these could give you an empty matroid. 
I don't see the use case of a empty matroid, but this would work:


```
Matroid(groundset=[], bases=[[]])
```


> is this correct?
Yes, it is correct. The empty set is always a base. 

> Could you use that for the test since it uses the top-level interface?
done


---

Comment by tscrim created at 2015-09-24 19:39:24

Replying to [comment:9 chaoxu]:
> > You might want to consider changing things so that these could give you an empty matroid. 
> I don't see the use case of a empty matroid, but this would work:
> 
> {{{
> Matroid(groundset=[], bases=[[]])
> }}}
> 
> > is this correct?
> Yes, it is correct. The empty set is always a base. 

Well, somebody may need it as a corner case test. *shrugs*

> > Could you use that for the test since it uses the top-level interface?
> done

Thanks. Positive review.


---

Comment by tscrim created at 2015-09-24 19:39:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-10-14 21:03:37

Resolution: fixed
