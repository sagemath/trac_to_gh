# Issue 21908: LatticePoset: add is_stone

archive/issues_021908.json:
```json
{
    "body": "CC:  @tscrim\n\nAdd a function to check if a lattice is Stone lattice.\n\nDone at https://sage.sis.uta.fi/home/pub/135/ (and hence de facto needs_review), waiting for 7.6beta to be added.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22145\n\n",
    "created_at": "2017-01-07T07:59:26Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "LatticePoset: add is_stone",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21908",
    "user": "@jm58660"
}
```
CC:  @tscrim

Add a function to check if a lattice is Stone lattice.

Done at https://sage.sis.uta.fi/home/pub/135/ (and hence de facto needs_review), waiting for 7.6beta to be added.

Issue created by migration from https://trac.sagemath.org/ticket/22145





---

archive/issue_comments_304060.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-05T16:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304060",
    "user": "@jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304061.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-05T16:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304061",
    "user": "@jm58660"
}
```

New commits:



---

archive/issue_comments_304062.json:
```json
{
    "body": "Travis? Quite trivial one, no complex algorithms.",
    "created_at": "2017-04-16T04:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304062",
    "user": "@jm58660"
}
```

Travis? Quite trivial one, no complex algorithms.



---

archive/issue_comments_304063.json:
```json
{
    "body": "There is a typo `Stone algebra` and it should be `a Stone lattice` (the name is being used as an adjective, which is okay, but it still needs an article; the other way would be `A lattice is *Stone* if ...`).",
    "created_at": "2017-04-16T04:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304063",
    "user": "@tscrim"
}
```

There is a typo `Stone algebra` and it should be `a Stone lattice` (the name is being used as an adjective, which is okay, but it still needs an article; the other way would be `A lattice is *Stone* if ...`).



---

archive/issue_comments_304064.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-16T04:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304064",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304065.json:
```json
{
    "body": "Typo corrected and merged to newest beta.",
    "created_at": "2017-04-16T04:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304065",
    "user": "@jm58660"
}
```

Typo corrected and merged to newest beta.



---

archive/issue_comments_304066.json:
```json
{
    "body": "You also need the article `a Stone lattice` in a few places in the `is_stone` method.",
    "created_at": "2017-04-16T05:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304066",
    "user": "@tscrim"
}
```

You also need the article `a Stone lattice` in a few places in the `is_stone` method.



---

archive/issue_comments_304067.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-16T05:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304067",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304068.json:
```json
{
    "body": "Replying to [comment:7 tscrim]:\n> You also need the article `a Stone lattice` in a few places in the `is_stone` method.\n\nDone.",
    "created_at": "2017-04-16T05:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304068",
    "user": "@jm58660"
}
```

Replying to [comment:7 tscrim]:
> You also need the article `a Stone lattice` in a few places in the `is_stone` method.

Done.



---

archive/issue_comments_304069.json:
```json
{
    "body": "Last two nitpicks.\n\n\n```diff\n-            if (sum([x[1] for x in factor(self.cardinality())]) <\n-                atoms_n):\n+            if sum([x[1] for x in factor(self.cardinality())]) < atoms_n:\n```\n\nand similar. Here it is worthwhile to break the 80 char limit for readability.\n\nMove `from sage.arith.misc import factor` below the `self.is_distributive()` check. Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).",
    "created_at": "2017-04-16T05:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304069",
    "user": "@tscrim"
}
```

Last two nitpicks.


```diff
-            if (sum([x[1] for x in factor(self.cardinality())]) <
-                atoms_n):
+            if sum([x[1] for x in factor(self.cardinality())]) < atoms_n:
```

and similar. Here it is worthwhile to break the 80 char limit for readability.

Move `from sage.arith.misc import factor` below the `self.is_distributive()` check. Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).



---

archive/issue_comments_304070.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-16T05:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304070",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304071.json:
```json
{
    "body": "Replying to [comment:10 tscrim]:\n> Here it is worthwhile to break the 80 char limit for readability.\n\nTrue, done that.\n\n> Move `from sage.arith.misc import factor` below the `self.is_distributive()` check.\n\nWell... Done that too. It is of course faster to `import` only when needed, but it should be a special case if the user tries to see if a non-distributive lattice is a Stone lattice. There are also functions having something like\n\n\n```\nimport somefunction ...\nif self.cardinality() < 5: return True\nif somefunction(self.bottom()) ...\n```\n\n\nand I think having `import`s at a start is more readable.\n\n> Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).\n\nTwo-sided question. But then at least `skeleton()` should be changed too.",
    "created_at": "2017-04-16T05:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304071",
    "user": "@jm58660"
}
```

Replying to [comment:10 tscrim]:
> Here it is worthwhile to break the 80 char limit for readability.

True, done that.

> Move `from sage.arith.misc import factor` below the `self.is_distributive()` check.

Well... Done that too. It is of course faster to `import` only when needed, but it should be a special case if the user tries to see if a non-distributive lattice is a Stone lattice. There are also functions having something like


```
import somefunction ...
if self.cardinality() < 5: return True
if somefunction(self.bottom()) ...
```


and I think having `import`s at a start is more readable.

> Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).

Two-sided question. But then at least `skeleton()` should be changed too.



---

archive/issue_comments_304072.json:
```json
{
    "body": "Replying to [comment:12 jmantysalo]:\n> Replying to [comment:10 tscrim]:\n> > Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).\n> \n> Two-sided question. But then at least `skeleton()` should be changed too.\n\n`skeleton()` is a different issue because it is not asking a boolean question, but instead constructing a new object. In that case, the correct thing to do (IMO) is raise a `ValueError`. While I have a strong opinion on this matter, I don't care enough to refight this battle. So if you prefer this method, then I will set it to a positive review.",
    "created_at": "2017-04-16T05:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304072",
    "user": "@tscrim"
}
```

Replying to [comment:12 jmantysalo]:
> Replying to [comment:10 tscrim]:
> > Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).
> 
> Two-sided question. But then at least `skeleton()` should be changed too.

`skeleton()` is a different issue because it is not asking a boolean question, but instead constructing a new object. In that case, the correct thing to do (IMO) is raise a `ValueError`. While I have a strong opinion on this matter, I don't care enough to refight this battle. So if you prefer this method, then I will set it to a positive review.



---

archive/issue_comments_304073.json:
```json
{
    "body": "Replying to [comment:13 tscrim]:\n> Replying to [comment:12 jmantysalo]:\n> > Replying to [comment:10 tscrim]:\n> > > Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).\n> > \n> > Two-sided question. But then at least `skeleton()` should be changed too.\n> \n> `skeleton()` is a different issue because it is not asking a boolean question, but instead constructing a new object. In that case, the correct thing to do (IMO) is raise a `ValueError`. While I have a strong opinion on this matter, I don't care enough to refight this battle. So if you prefer this method, then I will set it to a positive review.\n\nI think there is also some other boolean-valued functions with similar behaviour, so please just set to a positive review.",
    "created_at": "2017-04-16T05:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304073",
    "user": "@jm58660"
}
```

Replying to [comment:13 tscrim]:
> Replying to [comment:12 jmantysalo]:
> > Replying to [comment:10 tscrim]:
> > > Actually, I would argue that it should not raise a `ValueError` in this case, but instead simply return `False`. However, I've lost similar arguments before (the `is_similar` of matrices).
> > 
> > Two-sided question. But then at least `skeleton()` should be changed too.
> 
> `skeleton()` is a different issue because it is not asking a boolean question, but instead constructing a new object. In that case, the correct thing to do (IMO) is raise a `ValueError`. While I have a strong opinion on this matter, I don't care enough to refight this battle. So if you prefer this method, then I will set it to a positive review.

I think there is also some other boolean-valued functions with similar behaviour, so please just set to a positive review.



---

archive/issue_comments_304074.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-16T05:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304074",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304075.json:
```json
{
    "body": "IMO, that is not a good reason to keep a bad precedent. However, let it be so.",
    "created_at": "2017-04-16T05:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304075",
    "user": "@tscrim"
}
```

IMO, that is not a good reason to keep a bad precedent. However, let it be so.



---

archive/issue_comments_304076.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-18T22:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21908#issuecomment-304076",
    "user": "@vbraun"
}
```

Resolution: fixed
