# Issue 29284: Upgrade giac to 1.5.0-87

Issue created by migration from https://trac.sagemath.org/ticket/29521

Original creator: mkoeppe

Original creation time: 2020-04-17 15:39:19

CC:  arojas dimpase frederichan parisse slelievre infinity0 saraedum thansen @timokau fbissey

http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/


---

Comment by fbissey created at 2020-04-17 23:29:42

Would be nice to do this. There are a few trivial doctests impacted by this. But I'll wait to know what upstream intend to do about the naming before going ahead.


---

Comment by dimpase created at 2020-04-18 04:02:10

please see https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2513


---

Comment by parisse created at 2020-04-18 08:02:50

This is a problem that should be reported to PARI:
[https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz](https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz)


---

Comment by fbissey created at 2020-04-18 08:21:07

Replying to [comment:7 parisse]:
> This is a problem that should be reported to PARI:
> [https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz](https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz)

Thanks for that . Which now begs the question, should we install pari's html doc with giac? We already have the documentation which comes with pari, in pdf if I am not mistaken.


---

Comment by parisse created at 2020-04-18 08:37:20

The HTML doc is intended to be used from Xcas (Help, Manuals, PARI-GP), I don't think you will need it to run giac inside sage.


---

Comment by fbissey created at 2020-04-18 08:43:00

`xcas` is the fltk application, right? I am not sure we ever build it in sage as we would have to make sure there is a proper fltk install and that it is detected properly. So, not shipping those won't hurt I guess.


---

Comment by frederichan created at 2020-04-18 09:34:21

Yes xcas is never built by the spkg because we put in spkg-install:
`sdh_configure --disable-gui `
I did this long ago to prevent the configure script to find a bad version of fltk that might be installed on the system.


---

Comment by mkoeppe created at 2020-04-18 16:03:42

OK sounds like our just `spkg-src` needs to delete more stuff.


---

Comment by dimpase created at 2020-04-18 16:06:29

Replying to [comment:7 parisse]:
> This is a problem that should be reported to PARI:
> [https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz](https://pari.math.u-bordeaux.fr/dochtml/html-stable.tgz)

apparently it's already fixed, for the upcoming release, i.e.
https://pari.math.u-bordeaux.fr/dochtml/html.tgz
I see no `:` in filenames.

For `html-stable`, I see

```

-rw-r--r-- 1 dimpase dimpase   26979 Jul 19  2016  Programming_in_GP:_control_statements.html
-rw-r--r-- 1 dimpase dimpase   39993 Dec  1  2018  Programming_in_GP__control_statements.html
-rw-r--r-- 1 dimpase dimpase   46872 Jul 19  2016  Programming_in_GP:_other_specific_functions.html
-rw-r--r-- 1 dimpase dimpase   78935 Dec  1  2018  Programming_in_GP__other_specific_functions.html
```


so these files with `:` are just leftovers, by looking at dates...


---

Comment by mkoeppe created at 2020-04-18 17:01:41

A decision needs to be made whether for 9.1, we want to do the update to to 1.5.0-87 or just clean up the tarball of 1.5.0-63


---

Comment by mkoeppe created at 2020-04-23 03:28:01

Changing priority from major to blocker.


---

Comment by mkoeppe created at 2020-04-23 03:28:46

Would someone who knows about the spkg-src be willing to update it?


---

Comment by fbissey created at 2020-04-23 03:33:17

Replying to [comment:16 mkoeppe]:
> Would someone who knows about the spkg-src be willing to update it?

I'll admit that I don't really want to touch it. I would probably have wanted to do the whole thing slightly differently.


---

Comment by mkoeppe created at 2020-04-23 06:06:48

New commits:


---

Comment by git created at 2020-04-23 06:20:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-23 06:21:42

Changing status from new to needs_review.


---

Comment by fbissey created at 2020-04-23 06:27:37

LGTM. I didn't even know you could use that syntax for tar under linux, looks much better now.  Have to check a couple of things before switching it to positive.


---

Comment by dimpase created at 2020-04-23 06:31:16

does this work? I would worry about `-` in the patch level.


---

Attachment

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-23 06:37:44

This one works for me.


---

Comment by mkoeppe created at 2020-04-23 06:38:37

Using `-p0` because that becomes part of the tarball name.


---

Comment by dimpase created at 2020-04-23 06:53:31

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-04-23 06:53:31

afk now, but OK.


---

Comment by fbissey created at 2020-04-23 07:29:45

I checked the bit I was worried about (whether some stuff in `doc/Makefile.am` could lead to a breakage) and I am definitely OK with this.


---

Comment by mkoeppe created at 2020-04-23 17:01:01

Thanks!


---

Comment by vbraun created at 2020-04-24 22:28:21

Resolution: fixed
