# Issue 10020: Empty LatticePolytope fails

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2010-09-27 14:37:26

Assignee: mhampton

CC:  novoselt

As return values for `Polyhedron.lattice_polytope()` we sometimes want to return empty lattice polytopes. Alas, this does not work:

```
Lsage: LatticePolytope( matrix(ZZ,3,0) )
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)

/home/vbraun/opt/sage-4.5.3/devel/sage-main/<ipython console> in <module>()

/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/lattice_polytope.pyc in LatticePolytope(data, desc, compute_vertices, copy_vertices, n)
    264         return data
    265     else:
--> 266         return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)
    267 
    268 copy_reg.constructor(LatticePolytope)   # "safe for unpickling"

/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/lattice_polytope.pyc in __init__(self, data, desc, compute_vertices, copy_vertices, n)
    402             if compute_vertices:
    403                 self._vertices = data       # Temporary assignment
--> 404                 self._compute_dim(compute_vertices=True)
    405             else:
    406                 if copy_vertices:

/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/lattice_polytope.pyc in _compute_dim(self, compute_vertices)
    494         else:
    495             points = self._vertices.columns(copy=False)
--> 496         p0 = points[0]
    497         if p0 != 0:
    498             points = [point - p0 for point in points]

IndexError: list index out of range
```

The attached patch fixes this and adds a suitable doctest.



---

Attachment

Initial patch


---

Comment by vbraun created at 2010-09-27 14:41:12

Changing status from new to needs_review.


---

Attachment

indentation fix in docstring


---

Comment by novoselt created at 2010-09-28 02:31:42

Changing type from defect to enhancement.


---

Comment by novoselt created at 2010-09-28 02:31:42

Nice improvements!


---

Comment by novoselt created at 2010-09-28 02:31:42

Changing status from needs_review to positive_review.


---

Comment by mpatel created at 2010-09-29 04:24:33

Resolution: fixed
