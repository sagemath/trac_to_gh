# Issue 20504: Brial doesn't compile with gcc 6.1

Issue created by migration from https://trac.sagemath.org/ticket/20741

Original creator: jsrn

Original creation time: 2016-06-01 06:50:31

CC:  dimpase fbissey

Keywords: brial, compilation, c++

Brial doesn't compile with gcc 6.1. The following is a snip of the error log from compiling compiling Sage 7.3.beta2 on Arch linux kernel 4.5.4-1, x86_64, 16GB ram.

The full brial error log is attached.


```
 [install] [brial-0.8.4.3] In file included from /usr/include/c++/6.1.1/string:48:0,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/locale_classes.h:40,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/ios_base.h:41,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ios:42,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ostream:38,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/iostream:39,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/pbori_defs.h:24,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/BoolePolyRing.h:21,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:12,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] /usr/include/c++/6.1.1/bits/stl_function.h:387:20: note:   'const polybori::BooleExponent' is not derived from 'const std::__cxx11::basic_string<_CharT, _Traits, _Alloc>'
 [install] [brial-0.8.4.3] { return __x < __y; }
 [install] [brial-0.8.4.3] ~~~~^~~~~
 ... 200 errors like this ...
 [install] [brial-0.8.4.3] In file included from ../../libpolybori/include/polybori/polybori.h:23:0,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_defs.h:10,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/PairStatusSet.h:20,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_alg.h:14,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:13,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note: candidate: polybori::CAuxTypes::bool_type polybori::operator<(const polybori::BooleMonomial&, const polybori::BooleMonomial&)
 [install] [brial-0.8.4.3] operator<(const BooleMonomial& lhs, const BooleMonomial& rhs) {
 [install] [brial-0.8.4.3] ^~~~~~~~
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note:   no known conversion for argument 1 from 'const polybori::BooleExponent' to 'const polybori::BooleMonomial&'
 [install] [brial-0.8.4.3] Makefile:542: recipe for target 'libpolybori_groebner_la-FGLMStrategy.lo' failed
 [install] [brial-0.8.4.3] make[5]: *** [libpolybori_groebner_la-FGLMStrategy.lo] Error 1
 [install] [brial-0.8.4.3] make[5]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner/src'
 [install] [brial-0.8.4.3] Makefile:372: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[4]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[4]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner'
 [install] [brial-0.8.4.3] Makefile:565: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[3]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[3]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src'
 [install] [brial-0.8.4.3] Error building BRiAl
 [install] [brial-0.8.4.3]
 [install] [brial-0.8.4.3] real  0m33.364s
 [install] [brial-0.8.4.3] user  0m29.830s
 [install] [brial-0.8.4.3] sys   0m1.577s
 [install] [brial-0.8.4.3] ************************************************************************
 [install] [brial-0.8.4.3] Error installing package brial-0.8.4.3
 [install] [brial-0.8.4.3] ************************************************************************
 ...
 [install] real  39m8.848s
 [install] user  37m11.613s
 [install] sys   1m58.670s
 [install] ***************************************************************
 [install] Error building Sage.
 [install] 
 [install] The following package(s) may have failed to build (not necessarily
 [install] during this run of 'make all'):
 [install] 
 [install] * package: brial-0.8.4.3
 [install] log file: /home/jsrn/mat/sage_coding_project/logs/pkgs/brial-0.8.4.3.log
 [install] build directory: /home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3
 [install] 
 [install] The build directory may contain configuration files and other potentially
 [install] helpful information. WARNING: if you now run 'make' again, the build
 [install] directory will, by default, be deleted. Set the environment variable
 [install] SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
 [install] 

```



---

Comment by jsrn created at 2016-06-01 06:51:05

Full error log


---

Attachment

I also reported this at 
https://github.com/BRiAl/BRiAl/issues/8


---

Comment by leif created at 2016-06-29 19:23:12

Is anybody going to put the ["upstream" patch](https://github.com/BRiAl/BRiAl/pull/9/commits/e9b5109b44c80dc0137f0fb13dc03fd6113d9e4e)  (from vbraun/fbissey) into a branch here?

I didn't find any changes to BRiAl's configure yet.


---

Comment by fbissey created at 2016-06-29 20:55:14

I should make a release of `brial` and it will need a little bit of changes here.


---

Comment by fbissey created at 2016-06-30 01:10:59

I need to check a few things before `brial` release, I think one of the changes needs a further adjustment. I may need a couple of days.


---

Comment by fbissey created at 2016-07-02 22:10:19

OK I released a new `BRiAl`. It includes all the patches already in sage so we should be able to drop all the patches. There is a renaming of libpolybori to libbrial for which we will need to adjust. However the header are still in include/polybori. Arguably I should have also dealt with that before release.

Hopefully I will have time later today to push a branch to update `BRiAl`.


---

Comment by fbissey created at 2016-07-03 00:38:33

OK upgrade branch with fix by Volker. Bonus `polybori` was still listed instead of `brial` in the list of standard packages. Ready for review
----
New commits:


---

Comment by fbissey created at 2016-07-03 00:38:33

Changing status from new to needs_review.


---

Comment by vbraun created at 2016-07-03 10:27:40

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-03 14:59:07

Resolution: fixed
