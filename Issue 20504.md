# Issue 20504: Brial doesn't compile with gcc 6.1

archive/issues_020504.json:
```json
{
    "body": "CC:  dimpase fbissey\n\nKeywords: brial, compilation, c++\n\nBrial doesn't compile with gcc 6.1. The following is a snip of the error log from compiling compiling Sage 7.3.beta2 on Arch linux kernel 4.5.4-1, x86_64, 16GB ram.\n\nThe full brial error log is attached.\n\n\n```\n [install] [brial-0.8.4.3] In file included from /usr/include/c++/6.1.1/string:48:0,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/locale_classes.h:40,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/ios_base.h:41,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ios:42,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ostream:38,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/iostream:39,\n [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/pbori_defs.h:24,\n [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/BoolePolyRing.h:21,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:12,\n [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:\n [install] [brial-0.8.4.3] /usr/include/c++/6.1.1/bits/stl_function.h:387:20: note:   'const polybori::BooleExponent' is not derived from 'const std::__cxx11::basic_string<_CharT, _Traits, _Alloc>'\n [install] [brial-0.8.4.3] { return __x < __y; }\n [install] [brial-0.8.4.3] ~~~~^~~~~\n ... 200 errors like this ...\n [install] [brial-0.8.4.3] In file included from ../../libpolybori/include/polybori/polybori.h:23:0,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_defs.h:10,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/PairStatusSet.h:20,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_alg.h:14,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:13,\n [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:\n [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note: candidate: polybori::CAuxTypes::bool_type polybori::operator<(const polybori::BooleMonomial&, const polybori::BooleMonomial&)\n [install] [brial-0.8.4.3] operator<(const BooleMonomial& lhs, const BooleMonomial& rhs) {\n [install] [brial-0.8.4.3] ^~~~~~~~\n [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note:   no known conversion for argument 1 from 'const polybori::BooleExponent' to 'const polybori::BooleMonomial&'\n [install] [brial-0.8.4.3] Makefile:542: recipe for target 'libpolybori_groebner_la-FGLMStrategy.lo' failed\n [install] [brial-0.8.4.3] make[5]: *** [libpolybori_groebner_la-FGLMStrategy.lo] Error 1\n [install] [brial-0.8.4.3] make[5]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner/src'\n [install] [brial-0.8.4.3] Makefile:372: recipe for target 'all-recursive' failed\n [install] [brial-0.8.4.3] make[4]: *** [all-recursive] Error 1\n [install] [brial-0.8.4.3] make[4]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner'\n [install] [brial-0.8.4.3] Makefile:565: recipe for target 'all-recursive' failed\n [install] [brial-0.8.4.3] make[3]: *** [all-recursive] Error 1\n [install] [brial-0.8.4.3] make[3]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src'\n [install] [brial-0.8.4.3] Error building BRiAl\n [install] [brial-0.8.4.3]\n [install] [brial-0.8.4.3] real  0m33.364s\n [install] [brial-0.8.4.3] user  0m29.830s\n [install] [brial-0.8.4.3] sys   0m1.577s\n [install] [brial-0.8.4.3] ************************************************************************\n [install] [brial-0.8.4.3] Error installing package brial-0.8.4.3\n [install] [brial-0.8.4.3] ************************************************************************\n ...\n [install] real  39m8.848s\n [install] user  37m11.613s\n [install] sys   1m58.670s\n [install] ***************************************************************\n [install] Error building Sage.\n [install] \n [install] The following package(s) may have failed to build (not necessarily\n [install] during this run of 'make all'):\n [install] \n [install] * package: brial-0.8.4.3\n [install] log file: /home/jsrn/mat/sage_coding_project/logs/pkgs/brial-0.8.4.3.log\n [install] build directory: /home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3\n [install] \n [install] The build directory may contain configuration files and other potentially\n [install] helpful information. WARNING: if you now run 'make' again, the build\n [install] directory will, by default, be deleted. Set the environment variable\n [install] SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n [install] \n\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20741\n\n",
    "created_at": "2016-06-01T06:50:31Z",
    "labels": [
        "build",
        "critical",
        "bug"
    ],
    "title": "Brial doesn't compile with gcc 6.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20504",
    "user": "jsrn"
}
```
CC:  dimpase fbissey

Keywords: brial, compilation, c++

Brial doesn't compile with gcc 6.1. The following is a snip of the error log from compiling compiling Sage 7.3.beta2 on Arch linux kernel 4.5.4-1, x86_64, 16GB ram.

The full brial error log is attached.


```
 [install] [brial-0.8.4.3] In file included from /usr/include/c++/6.1.1/string:48:0,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/locale_classes.h:40,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/ios_base.h:41,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ios:42,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ostream:38,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/iostream:39,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/pbori_defs.h:24,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/BoolePolyRing.h:21,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:12,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] /usr/include/c++/6.1.1/bits/stl_function.h:387:20: note:   'const polybori::BooleExponent' is not derived from 'const std::__cxx11::basic_string<_CharT, _Traits, _Alloc>'
 [install] [brial-0.8.4.3] { return __x < __y; }
 [install] [brial-0.8.4.3] ~~~~^~~~~
 ... 200 errors like this ...
 [install] [brial-0.8.4.3] In file included from ../../libpolybori/include/polybori/polybori.h:23:0,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_defs.h:10,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/PairStatusSet.h:20,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_alg.h:14,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:13,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note: candidate: polybori::CAuxTypes::bool_type polybori::operator<(const polybori::BooleMonomial&, const polybori::BooleMonomial&)
 [install] [brial-0.8.4.3] operator<(const BooleMonomial& lhs, const BooleMonomial& rhs) {
 [install] [brial-0.8.4.3] ^~~~~~~~
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note:   no known conversion for argument 1 from 'const polybori::BooleExponent' to 'const polybori::BooleMonomial&'
 [install] [brial-0.8.4.3] Makefile:542: recipe for target 'libpolybori_groebner_la-FGLMStrategy.lo' failed
 [install] [brial-0.8.4.3] make[5]: *** [libpolybori_groebner_la-FGLMStrategy.lo] Error 1
 [install] [brial-0.8.4.3] make[5]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner/src'
 [install] [brial-0.8.4.3] Makefile:372: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[4]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[4]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner'
 [install] [brial-0.8.4.3] Makefile:565: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[3]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[3]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src'
 [install] [brial-0.8.4.3] Error building BRiAl
 [install] [brial-0.8.4.3]
 [install] [brial-0.8.4.3] real  0m33.364s
 [install] [brial-0.8.4.3] user  0m29.830s
 [install] [brial-0.8.4.3] sys   0m1.577s
 [install] [brial-0.8.4.3] ************************************************************************
 [install] [brial-0.8.4.3] Error installing package brial-0.8.4.3
 [install] [brial-0.8.4.3] ************************************************************************
 ...
 [install] real  39m8.848s
 [install] user  37m11.613s
 [install] sys   1m58.670s
 [install] ***************************************************************
 [install] Error building Sage.
 [install] 
 [install] The following package(s) may have failed to build (not necessarily
 [install] during this run of 'make all'):
 [install] 
 [install] * package: brial-0.8.4.3
 [install] log file: /home/jsrn/mat/sage_coding_project/logs/pkgs/brial-0.8.4.3.log
 [install] build directory: /home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3
 [install] 
 [install] The build directory may contain configuration files and other potentially
 [install] helpful information. WARNING: if you now run 'make' again, the build
 [install] directory will, by default, be deleted. Set the environment variable
 [install] SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
 [install] 

```


Issue created by migration from https://trac.sagemath.org/ticket/20741





---

archive/issue_comments_283074.json:
```json
{
    "body": "Full error log",
    "created_at": "2016-06-01T06:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283074",
    "user": "jsrn"
}
```

Full error log



---

archive/issue_comments_283075.json:
```json
{
    "body": "Attachment\n\nI also reported this at \nhttps://github.com/BRiAl/BRiAl/issues/8",
    "created_at": "2016-06-01T09:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283075",
    "user": "dimpase"
}
```

Attachment

I also reported this at 
https://github.com/BRiAl/BRiAl/issues/8



---

archive/issue_comments_283076.json:
```json
{
    "body": "Is anybody going to put the [\"upstream\" patch](https://github.com/BRiAl/BRiAl/pull/9/commits/e9b5109b44c80dc0137f0fb13dc03fd6113d9e4e)  (from vbraun/fbissey) into a branch here?\n\nI didn't find any changes to BRiAl's configure yet.",
    "created_at": "2016-06-29T19:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283076",
    "user": "leif"
}
```

Is anybody going to put the ["upstream" patch](https://github.com/BRiAl/BRiAl/pull/9/commits/e9b5109b44c80dc0137f0fb13dc03fd6113d9e4e)  (from vbraun/fbissey) into a branch here?

I didn't find any changes to BRiAl's configure yet.



---

archive/issue_comments_283077.json:
```json
{
    "body": "I should make a release of `brial` and it will need a little bit of changes here.",
    "created_at": "2016-06-29T20:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283077",
    "user": "fbissey"
}
```

I should make a release of `brial` and it will need a little bit of changes here.



---

archive/issue_comments_283078.json:
```json
{
    "body": "I need to check a few things before `brial` release, I think one of the changes needs a further adjustment. I may need a couple of days.",
    "created_at": "2016-06-30T01:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283078",
    "user": "fbissey"
}
```

I need to check a few things before `brial` release, I think one of the changes needs a further adjustment. I may need a couple of days.



---

archive/issue_comments_283079.json:
```json
{
    "body": "OK I released a new `BRiAl`. It includes all the patches already in sage so we should be able to drop all the patches. There is a renaming of libpolybori to libbrial for which we will need to adjust. However the header are still in include/polybori. Arguably I should have also dealt with that before release.\n\nHopefully I will have time later today to push a branch to update `BRiAl`.",
    "created_at": "2016-07-02T22:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283079",
    "user": "fbissey"
}
```

OK I released a new `BRiAl`. It includes all the patches already in sage so we should be able to drop all the patches. There is a renaming of libpolybori to libbrial for which we will need to adjust. However the header are still in include/polybori. Arguably I should have also dealt with that before release.

Hopefully I will have time later today to push a branch to update `BRiAl`.



---

archive/issue_comments_283080.json:
```json
{
    "body": "OK upgrade branch with fix by Volker. Bonus `polybori` was still listed instead of `brial` in the list of standard packages. Ready for review\n----\nNew commits:",
    "created_at": "2016-07-03T00:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283080",
    "user": "fbissey"
}
```

OK upgrade branch with fix by Volker. Bonus `polybori` was still listed instead of `brial` in the list of standard packages. Ready for review
----
New commits:



---

archive/issue_comments_283081.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-03T00:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283081",
    "user": "fbissey"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_283082.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-03T10:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283082",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283083.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-03T14:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20504#issuecomment-283083",
    "user": "vbraun"
}
```

Resolution: fixed
