# Issue 22674: Reorganize some methods for loops

Issue created by migration from Trac.

Original creator: dcoudert

Original creation time: 2017-04-30 14:41:25

We have 2 methods for returning the loops of a (di)graph, ``loops`` and ``loop_edges``, and one is faster than the other.

```
sage: G = Graph(10, loops=True)
sage: G.add_edges([(u,u) for u in G])
sage: %time L1 = G.loop_edges()
CPU times: user 68 µs, sys: 23 µs, total: 91 µs
Wall time: 73 µs
sage: %time L2 = G.loops()
CPU times: user 181 µs, sys: 50 µs, total: 231 µs
Wall time: 194 µs
sage: L1 == L2
True
sage: D = digraphs.DeBruijn(10,1)
sage: %time L1 = D.loop_edges()
CPU times: user 80 µs, sys: 18 µs, total: 98 µs
Wall time: 86.1 µs
sage: %time L2 = D.loops()
CPU times: user 333 µs, sys: 76 µs, total: 409 µs
Wall time: 344 µs
sage: L1 == L2
True
```

Note however that the slower (``loops``) has an extra parameter for edge labels. Let's try to clean that.


---

Comment by dcoudert created at 2017-04-30 15:14:57

So far I have let both methods and improved the `loop_edges` method.

I don't know what's the best option:
1. deprecate one of the methods and ensure the fastest code is in the other one
2. make the slowest method an alias for the fastest one and so let both names

Any advice / opinion is welcome. Option 2 is the easiest one, but...
----
New commits:


---

Comment by dcoudert created at 2017-04-30 15:14:57

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-04-30 16:18:41

I would not deprecate the method, but just make `loops` and alias for `loop_edges` (with the extra parameter).

Also, while you're moving methods around in the file (something I try to avoid doing because it can create trivial conflicts easily), I would clean up the docstrings `Returns` -> `Return` and

```
- ``labels`` -- whether returned edges have labels (``(u,v,l)``) or not (``(u,v)``)
```



---

Comment by git created at 2017-04-30 17:05:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-04-30 17:07:17

Should be better now.


---

Comment by tscrim created at 2017-04-30 17:09:53

Last thing, we should move those doctests from `loops` into `loop_edges` as they cover a few other cases now not tested (at least from looking at the diff).


---

Comment by git created at 2017-04-30 17:25:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-04-30 17:27:14

I have merged the doctests. Some cases are may be not covered, but I don't know which one.


---

Comment by tscrim created at 2017-04-30 17:37:32

Hmm...maybe I misparsed the graphs in my mind. Thanks. Just remove the period in the `INPUT:` and you can set a positive review on my behalf.


---

Comment by git created at 2017-04-30 17:53:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-04-30 17:53:50

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2017-04-30 17:53:50

Thank you Travis.


---

Comment by vbraun created at 2017-05-08 21:18:29

Resolution: fixed
