# Issue 23067: hold=True does not always prevent evaluation

Issue created by migration from Trac.

Original creator: mmezzarobba

Original creation time: 2017-06-22 12:12:49

CC:  @davewittemorris slelievre


```
sage: x = SR.var(x)
sage: x + 1/3
x + 1/3
sage: (x + 1/3).power(2, hold=True)
(x + 1/3)^2
sage: (x + 1/3).power(2, hold=True).mul(2, hold=True) # <<< evaluates!
2*(1/9*(3*x + 1)^2)
sage: (x + 1/3).mul(2, hold=True)
2*(x + 1/3)
```



---

Comment by rws created at 2017-07-01 06:31:37

See also #21754 and #21758.


---

Comment by rws created at 2017-09-03 07:52:07

Operations like this are now better done in a hold context. With #10035:

```
sage: hold.start()
sage: x + 1/3
x + 1/3
sage: (x + 1/3)^2
(x + 1/3)^2
sage: (x + 1/3)^2*2
2*(x + 1/3)^2
sage: (x + 1/3)*2
2*(x + 1/3)
```



---

Comment by slelievre created at 2020-09-17 23:42:16

The upstream fix in Pynac was merged in Pynac 0.7.11.

The upgrade to Pynac 0.7.11 was done in #23820, merged in Sage 8.1.beta6.

In the present ticket we should add a doctest.


---

Comment by mkoeppe created at 2021-04-07 19:29:15

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.


---

Comment by chapoton created at 2022-02-14 19:50:11

here is a doctest
----
New commits:


---

Comment by chapoton created at 2022-02-14 19:50:11

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2022-02-15 02:42:26

Changing status from needs_review to needs_work.


---

Comment by @DaveWitteMorris created at 2022-02-15 02:42:26

I think that using `hold=true` should give the same result as using a hold context:

```
sage: with hold:
....:     (x + 1/3).power(2).mul(2)
2*(x + 1/3)^2
```

But the proposed doctest validates `2*(1/9*(3*x + 1)^2)`, so I don't think we want this doctest.

Ginac (and therefore pynac) was not designed with "hold" in mind (see also #31597), so I think it will take considerable effort to fix the many problems, but fixing the specific problem on this ticket might not be hard.  I might have time to work on these issues in the next few months, but it's great if someone else wants to do it.

One possibility would be to have two tickets: one ticket to add a doctest for the hold context right now (because it already gives a good answer), and another ticket (which will remain open) for fixing `hold = true`.
