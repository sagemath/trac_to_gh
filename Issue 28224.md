# Issue 28224: pep cleanup for the quivers folder

Issue created by migration from https://trac.sagemath.org/ticket/28461

Original creator: chapoton

Original creation time: 2019-09-07 13:19:38

CC:  tscrim

mainly cosmetic changes in code presentation


---

Comment by chapoton created at 2019-09-07 13:20:06

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-09-07 13:20:06

New commits:


---

Comment by chapoton created at 2019-09-07 16:35:29

green bot, please review


---

Comment by tscrim created at 2019-09-07 20:51:01

Is there a reason why you didn't also change this to a `dict` comprehension?

```diff
-        elems = dict((v, self._left_action_mats[edge][v]*element._elems[v]) for v in self._quiver)
+        elems = dict((v, self._left_action_mats[edge][v]*element._elems[v])
+                     for v in self._quiver)
```

In this change:

```diff
-        result = parent()   # this must not be the cached parent.zero(),
-                             # since otherwise it gets changed in place!!
+        result = parent()
+        # this must not be the cached parent.zero(),
+        # since otherwise it gets changed in place!!
```

I think it would be better for the comment to go first. Also, in principle, the result of `parent()` could use the cached `zero` method since we assume elements are immutable. So I think it would be better (and faster) to explicitly construct the zero element.


---

Comment by git created at 2019-09-08 08:22:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-09-08 08:25:29

I have made the trivial changes that you suggested.

Concerning the zero, it seems that there is really a problem. This looks serious enough that it should be kept for a dedicated ticket. Moreover, I am not sure that the coercion framework is used correctly, as this happens inside a double underscore method `__mul__`.


---

Comment by tscrim created at 2019-09-08 10:49:42

Replying to [comment:5 chapoton]:
> I have made the trivial changes that you suggested.

Thank you.

> Concerning the zero, it seems that there is really a problem. This looks serious enough that it should be kept for a dedicated ticket. Moreover, I am not sure that the coercion framework is used correctly, as this happens inside a double underscore method `__mul__`.

Sounds good. cc me on that and I can do the review, or I can make the change tomorrow if you have not started on it already.


---

Comment by tscrim created at 2019-09-08 10:49:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-09-10 23:01:29

Resolution: fixed
