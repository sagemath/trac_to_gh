# Issue 16340: Make matrix.permute_rows and friends accept permutations of 0..n-1 now that we have them + misc improvements

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2014-06-28 00:46:36

CC:  rbeezer




---

Comment by nthiery created at 2014-06-28 01:55:02

Changing status from new to needs_review.


---

Comment by nthiery created at 2014-06-28 01:55:02

Changing component from PLEASE CHANGE to linear algebra.


---

Comment by nthiery created at 2014-06-28 01:55:02

Changing type from PLEASE CHANGE to enhancement.


---

Comment by nthiery created at 2014-06-28 01:55:02

New commits:


---

Comment by kcrisman created at 2014-08-15 11:54:24

* As we discussed in person, there may be a few missing colons.
* Why gone?

```
-            sage: sigma
-            (1,2,3)(4,5)
```

  I mean, it will be different, but this is helpful to the user to learn how it works.  Right now it's only in the warning which of course some people will ignore ... because it's a warning.  Actually, it looks like you only do that once.
* I think this will probably break.

```
sage: G = PermutationGroup(['(1,2,3)', '(-1,0,1,2,3)'])
```

  GAP doesn't complain when I ask for this group's order!
* Also, probably there is no point to SEEALSO the actual function in each case.  E.g. `permute_columns` should not SEEALSO itself.
* `swap_columns_c` test, if it's new, should probably be in the wrapper `swap_columns`.

But actually this looks pretty good and straightforward.


---

Comment by kcrisman created at 2014-08-15 11:54:39

Changing status from needs_review to needs_work.


---

Comment by kcrisman created at 2014-08-15 11:56:00

The missing colons are in the warning sections.  Also, you don't have a warning in the `with` methods though they have examples of that.


---

Comment by git created at 2014-08-15 12:27:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2014-08-15 12:30:01

Replying to [comment:4 kcrisman]:
> * Why gone?
> {{{
> -            sage: sigma
> -            (1,2,3)(4,5)
> }}}

Oops, right; fixed, and made consistent over all tests.

> * I think this will probably break.
> {{{
> sage: G = PermutationGroup(['(1,2,3)', '(-1,0,1,2,3)'])
> }}}
>   GAP doesn't complain when I ask for this group's order!

The sanity checks are not changed by ticket, and it keeps on failing
cleanly as before.

> * Also, probably there is no point to SEEALSO the actual function in each case.  E.g. `permute_columns` should not SEEALSO itself.
> * `swap_columns_c` test, if it's new, should probably be in the wrapper `swap_columns`.

Oops, right!


---

Comment by git created at 2014-08-15 12:41:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2014-08-22 12:11:33

Hi Karl!

Just a ping for finishing the review of the hopefully final commit?

Thanks!


---

Comment by nthiery created at 2014-08-22 12:11:33

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2014-08-22 19:46:15

I should almost make you wait longer just for the length of your branch name!

You need to change `\hdots` to `\ldots` for it to work properly in the documentation.  Otherwise this is fine.

Of course, there is the meta-question of whether one should really change this behavior.  Have you talked to anyone else about that?  It is indeed backward-compatible but still one might ask whether matrix rows are numbered at 0 or 1... though with Python probably the previous behavior was more wrong than the current one...


---

Comment by kcrisman created at 2014-08-27 18:30:47

Changing status from needs_review to needs_work.


---

Comment by nthiery created at 2014-08-29 03:17:26

Changing status from needs_work to needs_review.


---

Comment by nthiery created at 2014-08-29 03:26:51

Replying to [comment:11 kcrisman]:
> I should almost make you wait longer just for the length of your branch name!

:-)

Most of the name was built by git trac from the summary; I'd been too lazy to type this in myself :-)

> You need to change `\hdots` to `\ldots` for it to work properly in the documentation.  Otherwise this is fine.

Done.

> Of course, there is the meta-question of whether one should really
> change this behavior.  Have you talked to anyone else about that?
> It is indeed backward-compatible but still one might ask whether
> matrix rows are numbered at 0 or 1... though with Python probably
> the previous behavior was more wrong than the current one...

Sage matrices/vectors/... (under the influence of Python) are
unambiguously indexed by 0..n-1, aren't they? After all that's the
convention used systematically in all other methods (row, set_row,
col, __getitem__, ...).

In this sense, permute_rows and friends were the exceptions. That's
why I did not bother yet advertising this ticket specifically (beside
you, Anne, and whoever is following it). We could make a call on
sage-devel if you think this is really needed.

Cheers,
                                    Nicolas


---

Comment by kcrisman created at 2014-08-29 11:48:20

> > You need to change `\hdots` to `\ldots` for it to work properly in the documentation.  Otherwise this is fine.
> 
> Done.

But perhaps not pushed?  It's not in your commit list.

> In this sense, permute_rows and friends were the exceptions. That's
> why I did not bother yet advertising this ticket specifically (beside
> you, Anne, and whoever is following it). We could make a call on
> sage-devel if you think this is really needed.


You know, I'd feel better if you just put a little blurb there saying, "we want to make this change because it seemed more in line with 0-based counting, but in case anyone cares say something on the ticket."  If we don't hear back, switch it to positive review.


---

Comment by git created at 2014-08-29 13:25:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2014-08-29 13:26:35

Oops, sorry, I had actually pushed from the wrong copy of Sage. Fixed!


---

Comment by kcrisman created at 2014-09-08 15:40:42

Changing status from needs_review to needs_info.


---

Comment by kcrisman created at 2014-09-08 15:40:42

Just for reference: turns out there was [quite a discussion](https://groups.google.com/forum/#!topic/sage-devel/r38j4epfogs) on 0-based permutations and some probably poor design decisions early in Sage's life (i.e. `Permutation([1,2,3])` and `Permutation((1,2,3))` not being the same thing, where probably the latter should have been required to be `Permutation([(1,2,3)])` so the cycle notation didn't get confused with other notation.  Anyway, for now I'm putting this on "needs info" since I didn't see a lot of consensus on sage-devel.
