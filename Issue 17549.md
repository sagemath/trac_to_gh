# Issue 17549: Make RealBallField useful

archive/issues_017549.json:
```json
{
    "body": "After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.\n\nWork in progress, expect rebases.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17786\n\n",
    "created_at": "2015-02-15T13:43:22Z",
    "labels": [
        "basic arithmetic",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Make RealBallField useful",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17549",
    "user": "mmezzarobba"
}
```
After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.

Work in progress, expect rebases.

Issue created by migration from https://trac.sagemath.org/ticket/17786





---

archive/issue_comments_234223.json:
```json
{
    "body": "Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\nThis is something that I could fix with a bit of effort.\n\nIn any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...",
    "created_at": "2015-02-15T17:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234223",
    "user": "fredrik.johansson"
}
```

Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

This is something that I could fix with a bit of effort.

In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...



---

archive/issue_comments_234224.json:
```json
{
    "body": "Replying to [comment:1 fredrik.johansson]:\n> Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\nGood to know, I wasn't aware of that.\n\n> This is something that I could fix with a bit of effort.\n\nUnless you have other users that need it, I don't think it is worth the effort.\n\n> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...\n\nYes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.\n\nThanks for your comments!",
    "created_at": "2015-02-16T05:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234224",
    "user": "mmezzarobba"
}
```

Replying to [comment:1 fredrik.johansson]:
> Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

Good to know, I wasn't aware of that.

> This is something that I could fix with a bit of effort.

Unless you have other users that need it, I don't think it is worth the effort.

> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...

Yes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.

Thanks for your comments!



---

archive/issue_comments_234225.json:
```json
{
    "body": "Two remarks:\n\n- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\n- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.",
    "created_at": "2015-02-16T09:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234225",
    "user": "cheuberg"
}
```

Two remarks:

- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.



---

archive/issue_comments_234226.json:
```json
{
    "body": "Replying to [comment:3 cheuberg]:\n> Two remarks:\n> \n> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\nYes, indeed, thanks. I just copied the C prototypes without thinking...\n\n> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.\n\n`RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...",
    "created_at": "2015-02-16T10:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234226",
    "user": "mmezzarobba"
}
```

Replying to [comment:3 cheuberg]:
> Two remarks:
> 
> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

Yes, indeed, thanks. I just copied the C prototypes without thinking...

> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.

`RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...



---

archive/issue_comments_234227.json:
```json
{
    "body": "Replying to [comment:4 mmezzarobba]:\n> Replying to [comment:3 cheuberg]:\n> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.\n> \n> `RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...\n\nI think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.",
    "created_at": "2015-02-16T11:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234227",
    "user": "cheuberg"
}
```

Replying to [comment:4 mmezzarobba]:
> Replying to [comment:3 cheuberg]:
> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.
> 
> `RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...

I think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.



---

archive/issue_comments_234228.json:
```json
{
    "body": "#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.",
    "created_at": "2015-02-19T17:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234228",
    "user": "cheuberg"
}
```

#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.



---

archive/issue_comments_234229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234229",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_234230.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234230",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_234231.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-05T15:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234231",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234232.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-03-06T12:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234232",
    "user": "mmezzarobba"
}
```

Last 10 new commits:



---

archive/issue_comments_234233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T12:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234233",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234234",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234235.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234235",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234236.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T14:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234236",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234238.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234238",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234239.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234239",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234240.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234240",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234241.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234241",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234243.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T17:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234243",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_234244.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-06T17:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234244",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_234245.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-06T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234245",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_234246.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234246",
    "user": "mmezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_234247.json:
```json
{
    "body": "Changing component from basic arithmetic to numerical.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234247",
    "user": "mmezzarobba"
}
```

Changing component from basic arithmetic to numerical.



---

archive/issue_comments_234248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-10T10:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234248",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_234249.json:
```json
{
    "body": "Looks good to me.\n\nBtw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234249",
    "user": "fredrik.johansson"
}
```

Looks good to me.

Btw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.



---

archive/issue_comments_234250.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234250",
    "user": "fredrik.johansson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_234251.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2015-03-10T15:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234251",
    "user": "mmezzarobba"
}
```

Thanks for the review!



---

archive/issue_comments_234252.json:
```json
{
    "body": "Reviewer name is supposed to be the real name, not the trac account name",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234252",
    "user": "vbraun"
}
```

Reviewer name is supposed to be the real name, not the trac account name



---

archive/issue_comments_234253.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234253",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_234254.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-10T21:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234254",
    "user": "fredrik.johansson"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_234255.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-12T20:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-234255",
    "user": "vbraun"
}
```

Resolution: fixed
