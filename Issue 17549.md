# Issue 17549: Make RealBallField useful

Issue created by migration from Trac.

Original creator: mmezzarobba

Original creation time: 2015-02-15 13:43:22

After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.

Work in progress, expect rebases.


---

Comment by fredrik.johansson created at 2015-02-15 17:31:43

Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

This is something that I could fix with a bit of effort.

In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...


---

Comment by mmezzarobba created at 2015-02-16 05:53:52

Replying to [comment:1 fredrik.johansson]:
> Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

Good to know, I wasn't aware of that.

> This is something that I could fix with a bit of effort.

Unless you have other users that need it, I don't think it is worth the effort.

> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...

Yes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.

Thanks for your comments!


---

Comment by cheuberg created at 2015-02-16 09:41:16

Two remarks:

- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.


---

Comment by mmezzarobba created at 2015-02-16 10:50:15

Replying to [comment:3 cheuberg]:
> Two remarks:
> 
> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

Yes, indeed, thanks. I just copied the C prototypes without thinking...

> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.

`RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...


---

Comment by cheuberg created at 2015-02-16 11:13:52

Replying to [comment:4 mmezzarobba]:
> Replying to [comment:3 cheuberg]:
> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.
> 
> `RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...

I think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.


---

Comment by cheuberg created at 2015-02-19 17:04:41

#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.


---

Comment by git created at 2015-03-05 14:05:32

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2015-03-05 14:19:56

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2015-03-05 15:02:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2015-03-06 12:17:16

Last 10 new commits:


---

Comment by git created at 2015-03-06 12:39:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 13:30:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 13:40:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 14:29:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 15:05:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 15:34:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 15:42:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 16:15:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 16:30:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 16:48:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 17:14:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-06 17:23:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2015-03-06 18:16:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2015-03-06 18:17:39

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2015-03-06 18:17:39

Changing component from basic arithmetic to numerical.


---

Comment by git created at 2015-03-10 10:11:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by fredrik.johansson created at 2015-03-10 14:33:19

Looks good to me.

Btw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.


---

Comment by fredrik.johansson created at 2015-03-10 14:33:19

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2015-03-10 15:10:38

Thanks for the review!


---

Comment by vbraun created at 2015-03-10 20:59:07

Reviewer name is supposed to be the real name, not the trac account name


---

Comment by vbraun created at 2015-03-10 20:59:07

Changing status from positive_review to needs_work.


---

Comment by fredrik.johansson created at 2015-03-10 21:04:19

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-03-12 20:22:09

Resolution: fixed
