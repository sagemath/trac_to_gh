# Issue 17549: Make RealBallField useful

archive/issues_017549.json:
```json
{
    "body": "After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.\n\nWork in progress, expect rebases.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17786\n\n",
    "created_at": "2015-02-15T13:43:22Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Make RealBallField useful",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17549",
    "user": "https://github.com/mezzarobba"
}
```
After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.

Work in progress, expect rebases.

Issue created by migration from https://trac.sagemath.org/ticket/17786





---

archive/issue_comments_233928.json:
```json
{
    "body": "Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\nThis is something that I could fix with a bit of effort.\n\nIn any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...",
    "created_at": "2015-02-15T17:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233928",
    "user": "https://github.com/fredrik-johansson"
}
```

Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

This is something that I could fix with a bit of effort.

In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...



---

archive/issue_comments_233929.json:
```json
{
    "body": "Replying to [comment:1 fredrik.johansson]:\n> Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\nGood to know, I wasn't aware of that.\n\n> This is something that I could fix with a bit of effort.\n\nUnless you have other users that need it, I don't think it is worth the effort.\n\n> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...\n\nYes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.\n\nThanks for your comments!",
    "created_at": "2015-02-16T05:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233929",
    "user": "https://github.com/mezzarobba"
}
```

Replying to [comment:1 fredrik.johansson]:
> Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

Good to know, I wasn't aware of that.

> This is something that I could fix with a bit of effort.

Unless you have other users that need it, I don't think it is worth the effort.

> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...

Yes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.

Thanks for your comments!



---

archive/issue_comments_233930.json:
```json
{
    "body": "Two remarks:\n\n- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\n- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.",
    "created_at": "2015-02-16T09:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233930",
    "user": "https://github.com/cheuberg"
}
```

Two remarks:

- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.



---

archive/issue_comments_233931.json:
```json
{
    "body": "Replying to [comment:3 cheuberg]:\n> Two remarks:\n> \n> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\nYes, indeed, thanks. I just copied the C prototypes without thinking...\n\n> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.\n\n`RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...",
    "created_at": "2015-02-16T10:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233931",
    "user": "https://github.com/mezzarobba"
}
```

Replying to [comment:3 cheuberg]:
> Two remarks:
> 
> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

Yes, indeed, thanks. I just copied the C prototypes without thinking...

> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.

`RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...



---

archive/issue_comments_233932.json:
```json
{
    "body": "Replying to [comment:4 mmezzarobba]:\n> Replying to [comment:3 cheuberg]:\n> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.\n> \n> `RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...\n\nI think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.",
    "created_at": "2015-02-16T11:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233932",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:4 mmezzarobba]:
> Replying to [comment:3 cheuberg]:
> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.
> 
> `RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...

I think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.



---

archive/issue_comments_233933.json:
```json
{
    "body": "#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.",
    "created_at": "2015-02-19T17:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233933",
    "user": "https://github.com/cheuberg"
}
```

#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.



---

archive/issue_comments_233934.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_233935.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_233936.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-05T15:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233937.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-03-06T12:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233937",
    "user": "https://github.com/mezzarobba"
}
```

Last 10 new commits:



---

archive/issue_comments_233938.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T12:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233939.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233940.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T14:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233942.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233943.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233945.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233946.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T17:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233949.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-06T17:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_233950.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-06T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233951.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233951",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_233952.json:
```json
{
    "body": "Changing component from basic arithmetic to numerical.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233952",
    "user": "https://github.com/mezzarobba"
}
```

Changing component from basic arithmetic to numerical.



---

archive/issue_comments_233953.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-10T10:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233954.json:
```json
{
    "body": "Looks good to me.\n\nBtw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233954",
    "user": "https://github.com/fredrik-johansson"
}
```

Looks good to me.

Btw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.



---

archive/issue_comments_233955.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233955",
    "user": "https://github.com/fredrik-johansson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_233956.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2015-03-10T15:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233956",
    "user": "https://github.com/mezzarobba"
}
```

Thanks for the review!



---

archive/issue_comments_233957.json:
```json
{
    "body": "Reviewer name is supposed to be the real name, not the trac account name",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233957",
    "user": "https://github.com/vbraun"
}
```

Reviewer name is supposed to be the real name, not the trac account name



---

archive/issue_comments_233958.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233958",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_233959.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-10T21:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233959",
    "user": "https://github.com/fredrik-johansson"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_233960.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-12T20:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17549#issuecomment-233960",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_016906.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-12T20:22:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17549#event-16906"
}
```
