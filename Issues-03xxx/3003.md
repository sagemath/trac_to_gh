# Issue 3003: [with patch, positive review] Bugfix for to_tableau() method of CrystalOfTableaux elements (with patch; needs review)

archive/issues_003003.json:
```json
{
    "body": "Current behaviour:\n\n```\n    sage: C = CrystalOfTableaux(['A',3],shape=[2,1])\n    sage: h = C.highest_weight_vector()\n    sage: t = h.to_tableau()\n    sage: w = t.to_word(); w\n    [2, 1, 1]\n    sage: type(w[0])\n    <class 'sage.combinat.crystals.letters.Crystal_of_letters_type_A_element'>\n    sage: t.evaluation()\n    <BOOM>\n```\nThis patch ensures we get a tableau of integers instead of a tableau of crystal elements.\n\nAssignee: @mwhansen\n\nCC:  sage-combinat\n\nKeywords: crystals, tableaux\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/3003\n\n",
    "closed_at": "2008-04-23T11:42:12Z",
    "created_at": "2008-04-22T17:14:31Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0.1",
    "title": "[with patch, positive review] Bugfix for to_tableau() method of CrystalOfTableaux elements (with patch; needs review)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3003",
    "user": "https://github.com/jbandlow"
}
```
Current behaviour:

```
    sage: C = CrystalOfTableaux(['A',3],shape=[2,1])
    sage: h = C.highest_weight_vector()
    sage: t = h.to_tableau()
    sage: w = t.to_word(); w
    [2, 1, 1]
    sage: type(w[0])
    <class 'sage.combinat.crystals.letters.Crystal_of_letters_type_A_element'>
    sage: t.evaluation()
    <BOOM>
```
This patch ensures we get a tableau of integers instead of a tableau of crystal elements.

Assignee: @mwhansen

CC:  sage-combinat

Keywords: crystals, tableaux

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/3003





---

archive/issue_comments_021159.json:
```json
{
    "body": "Attachment [to_tab.patch](tarball://root/attachments/some-uuid/ticket3003/to_tab.patch) by @jbandlow created at 2008-04-22 17:15:03",
    "created_at": "2008-04-22T17:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21159",
    "user": "https://github.com/jbandlow"
}
```

Attachment [to_tab.patch](tarball://root/attachments/some-uuid/ticket3003/to_tab.patch) by @jbandlow created at 2008-04-22 17:15:03



---

archive/issue_comments_021160.json:
```json
{
    "body": "<a id='comment:1'></a>The elements of crystals of letters look like integers because their __repr__ method returns an integer string but they are not. Before the patch it is possible to accidentally build tableaux whose entries are crystal of letter elements. The patch looks obviously correct to me. I'm not sure  this bugfix requires a doctest.",
    "created_at": "2008-04-22T17:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21160",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:1'></a>The elements of crystals of letters look like integers because their __repr__ method returns an integer string but they are not. Before the patch it is possible to accidentally build tableaux whose entries are crystal of letter elements. The patch looks obviously correct to me. I'm not sure  this bugfix requires a doctest.



---

archive/issue_comments_021161.json:
```json
{
    "body": "<a id='comment:2'></a>I know that Dan did a review, but we still need a formal vote. Since there is a test case that Jason posted we should add it as a doctest. If it runs long we should add #long to it.\n\nCheers,\n\nMichael",
    "created_at": "2008-04-22T20:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21161",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>I know that Dan did a review, but we still need a formal vote. Since there is a test case that Jason posted we should add it as a doctest. If it runs long we should add #long to it.

Cheers,

Michael



---

archive/issue_comments_021162.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Current behaviour:\n+\n+```\n     sage: C = CrystalOfTableaux(['A',3],shape=[2,1])\n     sage: h = C.highest_weight_vector()\n     sage: t = h.to_tableau()\n@@ -8,7 +10,7 @@\n     <class 'sage.combinat.crystals.letters.Crystal_of_letters_type_A_element'>\n     sage: t.evaluation()\n     <BOOM>\n-\n+```\n This patch ensures we get a tableau of integers instead of a tableau of crystal elements.\n \n Summary: Bugfix for to_tableau() method of CrystalOfTableaux elements (with patch; needs review)\n```\n",
    "created_at": "2008-04-22T20:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21162",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Current behaviour:
+
+```
     sage: C = CrystalOfTableaux(['A',3],shape=[2,1])
     sage: h = C.highest_weight_vector()
     sage: t = h.to_tableau()
@@ -8,7 +10,7 @@
     <class 'sage.combinat.crystals.letters.Crystal_of_letters_type_A_element'>
     sage: t.evaluation()
     <BOOM>
-
+```
 This patch ensures we get a tableau of integers instead of a tableau of crystal elements.
 
 Summary: Bugfix for to_tableau() method of CrystalOfTableaux elements (with patch; needs review)
```




---

archive/issue_comments_021163.json:
```json
{
    "body": "Attachment [3003.patch](tarball://root/attachments/some-uuid/ticket3003/3003.patch) by @mwhansen created at 2008-04-22 22:45:10",
    "created_at": "2008-04-22T22:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21163",
    "user": "https://github.com/mwhansen"
}
```

Attachment [3003.patch](tarball://root/attachments/some-uuid/ticket3003/3003.patch) by @mwhansen created at 2008-04-22 22:45:10



---

archive/issue_comments_021164.json:
```json
{
    "body": "<a id='comment:3'></a>Looks good to me.  I added a little test in 3003.patch -- that's the one that should be applied.",
    "created_at": "2008-04-22T22:45:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21164",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:3'></a>Looks good to me.  I added a little test in 3003.patch -- that's the one that should be applied.



---

archive/issue_comments_021165.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-04-23T11:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21165",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_021166.json:
```json
{
    "body": "<a id='comment:4'></a>Merged in Sage 3.0.1.alpha0",
    "created_at": "2008-04-23T11:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3003#issuecomment-21166",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>Merged in Sage 3.0.1.alpha0



---

archive/issue_events_006830.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-23T11:42:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3003",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3003#event-6830"
}
```
