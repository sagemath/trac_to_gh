# Issue 3375: [mixed review] Fix building ntl on Solaris with make and ld

archive/issues_003375.json:
```json
{
    "assignees": [],
    "body": "OK so here is what got me through ntl on David's box.\nThe mfile patch is against the copy in the ntl patch folder \nnot the source. It also patch ntl spkg-install to properly\nsetup and tune ntl as well as cleaning the installation bits\nintroduced to accommodate Tim & I.\nI guess Tim and I will have to fend for ourselves separately.\nAlso we submitted a lot of patch in the ntl style. Since\nI used some GNU-ism for building shared objects most of\nthem will have to be revised.\n\nFrancois\n\n\nAssignee: **mabshoff**\n\nCC:  PolyBoRi\n\nKeywords: **editor_mabshoff**\n\nReviewer: **Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3375_\n\n",
    "closed_at": "2015-02-23T21:00:19Z",
    "created_at": "2008-06-06T01:22:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "[mixed review] Fix building ntl on Solaris with make and ld",
    "type": "issue",
    "updated_at": "2023-01-14T14:24:28Z",
    "url": "https://github.com/sagemath/sage/issues/3375",
    "user": "https://github.com/kiwifb"
}
```
OK so here is what got me through ntl on David's box.
The mfile patch is against the copy in the ntl patch folder 
not the source. It also patch ntl spkg-install to properly
setup and tune ntl as well as cleaning the installation bits
introduced to accommodate Tim & I.
I guess Tim and I will have to fend for ourselves separately.
Also we submitted a lot of patch in the ntl style. Since
I used some GNU-ism for building shared objects most of
them will have to be revised.

Francois


Assignee: **mabshoff**

CC:  PolyBoRi

Keywords: **editor_mabshoff**

Reviewer: **François Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/3375_





---

archive/issue_events_031690.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-06T01:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31690"
}
```



---

archive/issue_events_031691.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-06T01:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31691"
}
```



---

archive/issue_events_031692.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-06T01:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31692"
}
```



---

archive/issue_events_031693.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-06T01:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31693"
}
```



---

archive/issue_comments_018957.json:
```json
{
    "body": "patch for ntl spkg-install and patch/mfile",
    "created_at": "2008-06-06T01:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18957",
    "user": "https://github.com/kiwifb"
}
```

patch for ntl spkg-install and patch/mfile



---

archive/issue_comments_018958.json:
```json
{
    "body": "Changed keywords from **** to **editor_mabshoff**",
    "created_at": "2008-06-15T21:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18958",
    "user": "https://github.com/craigcitro"
}
```

Changed keywords from **** to **editor_mabshoff**



---

archive/issue_comments_018959.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[ntl-sun.patch.gz](https://github.com/sagemath/sage/files/ticket3375/ntl-sun.patch.gz)**",
    "created_at": "2008-06-15T21:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18959",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[ntl-sun.patch.gz](https://github.com/sagemath/sage/files/ticket3375/ntl-sun.patch.gz)**



---

archive/issue_events_031694.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2008-06-15T21:52:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "title_is": "[with patch needs review] Fix building ntl on Solaris with make and ld",
    "title_was": "Fix building ntl on Solaris with make and ld [with patch needs review]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31694"
}
```



---

archive/issue_comments_018960.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nHi Francois, \n\nUnless I am overlooking something you are removing the \"-fPIC\" lines from the link phase. Are you sure that will work?\n\nCheers,\n\nMichael",
    "created_at": "2008-06-20T04:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18960",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:2'>Comment 2:</a>
Hi Francois, 

Unless I am overlooking something you are removing the "-fPIC" lines from the link phase. Are you sure that will work?

Cheers,

Michael



---

archive/issue_events_031695.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-06-20T04:10:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "title_is": "[mixed review] Fix building ntl on Solaris with make and ld",
    "title_was": "[with patch needs review] Fix building ntl on Solaris with make and ld",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31695"
}
```



---

archive/issue_comments_018961.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nIt works all right on linux (no text relocations) but I indeed \ncannot guaranty it on other platform. I just checked the gcc \nmanual and they recommand passing the PIC flag used during \ncompilation as well when using -shared so best to put it back:\n\n`-shared'\n     Produce a shared object which can then be linked with other\n     objects to form an executable.  Not all systems support this\noption.  For predictable results, you must also specify the same\n     set of options that were used to generate code (`-fpic', `-fPIC',\n     or model suboptions) when you specify this option.(1)",
    "created_at": "2008-06-20T08:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18961",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'>Comment 3:</a>
It works all right on linux (no text relocations) but I indeed 
cannot guaranty it on other platform. I just checked the gcc 
manual and they recommand passing the PIC flag used during 
compilation as well when using -shared so best to put it back:

`-shared'
     Produce a shared object which can then be linked with other
     objects to form an executable.  Not all systems support this
option.  For predictable results, you must also specify the same
     set of options that were used to generate code (`-fpic', `-fPIC',
     or model suboptions) when you specify this option.(1)



---

archive/issue_events_031696.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31696"
}
```



---

archive/issue_events_031697.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31697"
}
```



---

archive/issue_events_031698.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31698"
}
```



---

archive/issue_events_031699.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31699"
}
```



---

archive/issue_events_031700.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31700"
}
```



---

archive/issue_events_031701.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31701"
}
```



---

archive/issue_events_031702.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31702"
}
```



---

archive/issue_events_031703.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31703"
}
```



---

archive/issue_events_031704.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-02-22T23:05:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31704"
}
```



---

archive/issue_events_031705.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-02-22T23:05:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31705"
}
```



---

archive/issue_comments_018962.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2015-02-22T23:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18962",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_018963.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nLooking through old tickets this is sooo obsolete. Won't fix/invalid.",
    "created_at": "2015-02-22T23:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3375#issuecomment-18963",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'>Comment 10:</a>
Looking through old tickets this is sooo obsolete. Won't fix/invalid.



---

archive/issue_events_031706.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-02-22T23:07:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31706"
}
```



---

archive/issue_events_031707.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-02-22T23:07:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31707"
}
```



---

archive/issue_events_031708.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-23T21:00:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31708"
}
```



---

archive/issue_events_031709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-23T21:00:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31709"
}
```



---

archive/issue_events_031710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-23T21:00:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3375",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3375#event-31710"
}
```
