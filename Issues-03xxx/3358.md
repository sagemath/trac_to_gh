# Issue 3358: Improve the building of eclib (shared/static objects)

archive/issues_003358.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mabshoff"
    ],
    "body": "After sitting waiting for some answers on the last thread about this on debian-sage\nI decided to go ahead. This patch do not add versionning for debian as it seems\nto cause problem on other OS. It builds static objects (libraries and executables)\nwithout any pic flag and shared object with pic flag on linux. I respected the earlier\nsetting where the flag is set in spkg-install and it is set to nothing on OS X and\nCYGWIN although I think it should be set as well on this platform.\nI also move executables in a created bin directory for convenience (this directory\nis created by the Makefile).\nI cleaned the spkg-install to accommodate the changes and added a few fix that I\nthought necessary. -fPIC to -fpic, those are 2 slightly different flags, I don't\nthink I should go on the technical differences between them. I also cleaned\na conditional block were linux specific code would be executed on darwin - probably\nwithout harm but still.\n\nCC:  @timabbott\n\nComponent: **build**\n\nReviewer: **Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3358_\n\n",
    "closed_at": "2012-08-06T13:13:39Z",
    "created_at": "2008-06-03T23:57:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/worksforme"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve the building of eclib (shared/static objects)",
    "type": "issue",
    "updated_at": "2023-01-14T14:57:29Z",
    "url": "https://github.com/sagemath/sage/issues/3358",
    "user": "https://github.com/kiwifb"
}
```
After sitting waiting for some answers on the last thread about this on debian-sage
I decided to go ahead. This patch do not add versionning for debian as it seems
to cause problem on other OS. It builds static objects (libraries and executables)
without any pic flag and shared object with pic flag on linux. I respected the earlier
setting where the flag is set in spkg-install and it is set to nothing on OS X and
CYGWIN although I think it should be set as well on this platform.
I also move executables in a created bin directory for convenience (this directory
is created by the Makefile).
I cleaned the spkg-install to accommodate the changes and added a few fix that I
thought necessary. -fPIC to -fpic, those are 2 slightly different flags, I don't
think I should go on the technical differences between them. I also cleaned
a conditional block were linux specific code would be executed on darwin - probably
without harm but still.

CC:  @timabbott

Component: **build**

Reviewer: **Fran√ßois Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/3358_





---

archive/issue_events_035956.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35956"
}
```



---

archive/issue_events_035957.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35957"
}
```



---

archive/issue_events_035958.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35958"
}
```



---

archive/issue_events_035959.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35959"
}
```



---

archive/issue_events_035960.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35960"
}
```



---

archive/issue_events_035961.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-06-03T23:57:53Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "subject": "https://github.com/kiwifb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35961"
}
```



---

archive/issue_comments_017887.json:
```json
{
    "body": "Changed keywords from none to **editor_mabshoff**",
    "created_at": "2008-06-15T22:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17887",
    "user": "https://github.com/craigcitro"
}
```

Changed keywords from none to **editor_mabshoff**



---

archive/issue_comments_017888.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPlease remember to put the \"[with patch, needs review]\" at the *beginning* of the summary.",
    "created_at": "2008-06-15T22:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17888",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:3" align="right">comment:3</div>

Please remember to put the "[with patch, needs review]" at the *beginning* of the summary.



---

archive/issue_events_035962.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2008-06-15T22:02:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "title_is": "Improve the building of eclib (shared/static objects)",
    "title_was": "Improve the building of eclib (shared/static objects) [with patch needs review]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35962"
}
```



---

archive/issue_events_035963.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-06-20T04:02:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "title_is": "[mixed review] Improve the building of eclib (shared/static objects)",
    "title_was": "Improve the building of eclib (shared/static objects)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35963"
}
```



---

archive/issue_comments_017889.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI do not like the \"-fPIC\" -> \"-fpic\" change, otherwise I am fine with the patch.\n\nCheers,\n\nMichael",
    "created_at": "2008-06-20T04:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17889",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

I do not like the "-fPIC" -> "-fpic" change, otherwise I am fine with the patch.

Cheers,

Michael



---

archive/issue_comments_017890.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHi Michael,\n\nI didn't think you would take it anyway as it has\nGNU-ism like:\n(SO_LIBNAME): FPICFLAG= $(PICFLAG)\n\texport FPICFLAG\n\nI thought a bit more about -fPIC versus -fPIC and\nI guess in the interest of KISS we should probably\nstick to -fPIC as ppc and may be other may balk \notherwise.",
    "created_at": "2008-06-20T08:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17890",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Hi Michael,

I didn't think you would take it anyway as it has
GNU-ism like:
(SO_LIBNAME): FPICFLAG= $(PICFLAG)
	export FPICFLAG

I thought a bit more about -fPIC versus -fPIC and
I guess in the interest of KISS we should probably
stick to -fPIC as ppc and may be other may balk 
otherwise.



---

archive/issue_events_035964.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2008-07-07T01:19:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "title_is": "Improve the building of eclib (shared/static objects)",
    "title_was": "[mixed review] Improve the building of eclib (shared/static objects)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35964"
}
```



---

archive/issue_comments_017891.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK new patches to ungnu-ify the makefiles and build shared and static objects\nproperly and use the bin folder. Tested with bsd make and gnu make - didn't have \ntime for sun make, should work though. \nspkg-install also updated. everything is against eclib-20080310.p4",
    "created_at": "2008-07-07T01:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17891",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

OK new patches to ungnu-ify the makefiles and build shared and static objects
properly and use the bin folder. Tested with bsd make and gnu make - didn't have 
time for sun make, should work though. 
spkg-install also updated. everything is against eclib-20080310.p4



---

archive/issue_comments_017892.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nupdated the patches to 20080310.p5.",
    "created_at": "2008-07-08T22:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17892",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

updated the patches to 20080310.p5.



---

archive/issue_comments_017893.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm probably not the best person to review this but if there's anything I can do, please let me know.  John",
    "created_at": "2008-08-10T16:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17893",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm probably not the best person to review this but if there's anything I can do, please let me know.  John



---

archive/issue_comments_017894.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI think there are some issues with eclib-ungnu.patch:\n\n* the formal changes, i.e. the removal of the \".o\" from the makefiles should be independent of the other changes for reviewing purposes\n* some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.\n\nAs is the patch needs to be rebased slighly:\n\n```\n/eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\\?format\\=raw \npatching file Makefile\nHunk #4 FAILED at 45.\n1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej\npatching file Makefile.dynamic\npatching file g0n/Makefile\nHunk #2 succeeded at 25 with fuzz 2.\npatching file procs/Makefile\nHunk #2 FAILED at 23.\n1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej\npatching file qcurves/Makefile\npatching file qrank/Makefile\n```\n\nI am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-28T22:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17894",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:9" align="right">comment:9</div>

I think there are some issues with eclib-ungnu.patch:

* the formal changes, i.e. the removal of the ".o" from the makefiles should be independent of the other changes for reviewing purposes
* some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.

As is the patch needs to be rebased slighly:

```
/eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\?format\=raw 
patching file Makefile
Hunk #4 FAILED at 45.
1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej
patching file Makefile.dynamic
patching file g0n/Makefile
Hunk #2 succeeded at 25 with fuzz 2.
patching file procs/Makefile
Hunk #2 FAILED at 23.
1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej
patching file qcurves/Makefile
patching file qrank/Makefile
```

I am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.

Cheers,

Michael



---

archive/issue_events_035965.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-28T22:49:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35965"
}
```



---

archive/issue_events_035966.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-28T22:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35966"
}
```



---

archive/issue_comments_017895.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@sagetrac-mabshoff](#comment%3A9):\n> I think there are some issues with eclib-ungnu.patch:\n> \n> * the formal changes, i.e. the removal of the \".o\" from the makefiles should be independent of the other changes for reviewing purposes\n> * some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.\n> \n> As is the patch needs to be rebased slighly:\n> \n> ```\n> /eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\\?format\\=raw \n> patching file Makefile\n> Hunk #4 FAILED at 45.\n> 1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej\n> patching file Makefile.dynamic\n> patching file g0n/Makefile\n> Hunk #2 succeeded at 25 with fuzz 2.\n> patching file procs/Makefile\n> Hunk #2 FAILED at 23.\n> 1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej\n> patching file qcurves/Makefile\n> patching file qrank/Makefile\n> ```\n> \n> I am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.\n> \n> Cheers,\n> \n> Michael \n\nI am happy to go along with whatever is best for Sage. I agree that one should be able to type \"make\" without setting environment variables manually.  John",
    "created_at": "2008-11-28T22:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17895",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@sagetrac-mabshoff](#comment%3A9):
> I think there are some issues with eclib-ungnu.patch:
> 
> * the formal changes, i.e. the removal of the ".o" from the makefiles should be independent of the other changes for reviewing purposes
> * some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.
> 
> As is the patch needs to be rebased slighly:
> 
> ```
> /eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\?format\=raw 
> patching file Makefile
> Hunk #4 FAILED at 45.
> 1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej
> patching file Makefile.dynamic
> patching file g0n/Makefile
> Hunk #2 succeeded at 25 with fuzz 2.
> patching file procs/Makefile
> Hunk #2 FAILED at 23.
> 1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej
> patching file qcurves/Makefile
> patching file qrank/Makefile
> ```
> 
> I am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.
> 
> Cheers,
> 
> Michael 

I am happy to go along with whatever is best for Sage. I agree that one should be able to type "make" without setting environment variables manually.  John



---

archive/issue_comments_017896.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi guys,\n\nI am a bit out of action at the moment but I should comment on what I\nhad done and why.\n\nReplying to [@sagetrac-mabshoff](#comment%3A9):\n> I think there are some issues with eclib-ungnu.patch:\n> \n> * the formal changes, i.e. the removal of the \".o\" from the makefiles should be independent of the other changes for reviewing purposes\n\nI reviewed my patch and the removal of the \".o\" and its inclusion in\n$(OBJ_SUF) and $(SOBJ_SUF) was needed to write a working \".SUFFIXES:\"\nold unix style rule and keep putting \"_n\" in the object. It can be simplified\nif we remove it. It is a remnant of the various building options that weren't\nused in sage but could be restored with a bit of creativity and some environment\nvariables.\n\n> * some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.\n> \n\nThe behavior before and after the patch is currently the same if you\ndon't set any variables. It defaults to look for stuff in /usr/local .\nEither you do some autodetection or you pass variables. It probably \nshould be documented in a README.\n\n> As is the patch needs to be rebased slighly:\n> \n> ```\n> /eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\\?format\\=raw \n> patching file Makefile\n> Hunk #4 FAILED at 45.\n> 1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej\n> patching file Makefile.dynamic\n> patching file g0n/Makefile\n> Hunk #2 succeeded at 25 with fuzz 2.\n> patching file procs/Makefile\n> Hunk #2 FAILED at 23.\n> 1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej\n> patching file qcurves/Makefile\n> patching file qrank/Makefile\n> ```\n> \n\nI'll have a look and rebase it if that's all it takes.\n\n> I am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.\n> \n\nThe two first patches are really obsolete in many ways. And yes, after doing\nsome growing up I realise PIC->pic is wrong for something like sage. It is \ndebatable that it could be selected appropriately at the start of the building \nprocess but that wouldn't be KISS.\n\n> Cheers,\n> \n> Michael \n\nCheers,\nFrancois",
    "created_at": "2008-11-29T10:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17896",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi guys,

I am a bit out of action at the moment but I should comment on what I
had done and why.

Replying to [@sagetrac-mabshoff](#comment%3A9):
> I think there are some issues with eclib-ungnu.patch:
> 
> * the formal changes, i.e. the removal of the ".o" from the makefiles should be independent of the other changes for reviewing purposes

I reviewed my patch and the removal of the ".o" and its inclusion in
$(OBJ_SUF) and $(SOBJ_SUF) was needed to write a working ".SUFFIXES:"
old unix style rule and keep putting "_n" in the object. It can be simplified
if we remove it. It is a remnant of the various building options that weren't
used in sage but could be restored with a bit of creativity and some environment
variables.

> * some of the fixes will have the makefiles as is working with Sage, but if anyone attempted to compile eclib without explicitly setting env variables like NTL the compile will break or the build will not include features like pari support. I don't care which way we go here, but this is up to John since it is his code project.
> 

The behavior before and after the patch is currently the same if you
don't set any variables. It defaults to look for stuff in /usr/local .
Either you do some autodetection or you pass variables. It probably 
should be documented in a README.

> As is the patch needs to be rebased slighly:
> 
> ```
> /eclib-20080310.p7/src$ patch -p1 --dry-run < eclib-ungnu.patch\?format\=raw 
> patching file Makefile
> Hunk #4 FAILED at 45.
> 1 out of 4 hunks FAILED -- saving rejects to file Makefile.rej
> patching file Makefile.dynamic
> patching file g0n/Makefile
> Hunk #2 succeeded at 25 with fuzz 2.
> patching file procs/Makefile
> Hunk #2 FAILED at 23.
> 1 out of 6 hunks FAILED -- saving rejects to file procs/Makefile.rej
> patching file qcurves/Makefile
> patching file qrank/Makefile
> ```
> 

I'll have a look and rebase it if that's all it takes.

> I am -1 on all the other three patches at this ticket. Some of those might be salvaged, i.e. from the spkg-install patches like the better installation, but the PIC->pic change is just plain wrong.
> 

The two first patches are really obsolete in many ways. And yes, after doing
some growing up I realise PIC->pic is wrong for something like sage. It is 
debatable that it could be selected appropriately at the start of the building 
process but that wouldn't be KISS.

> Cheers,
> 
> Michael 

Cheers,
Francois



---

archive/issue_comments_017897.json:
```json
{
    "body": "Attachment: **[eclib-ungnu.patch.gz](https://github.com/sagemath/sage/files/ticket3358/eclib-ungnu.patch.gz)**",
    "created_at": "2008-12-04T10:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17897",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[eclib-ungnu.patch.gz](https://github.com/sagemath/sage/files/ticket3358/eclib-ungnu.patch.gz)**



---

archive/issue_comments_017898.json:
```json
{
    "body": "Attachment: **[spkg.patch.gz](https://github.com/sagemath/sage/files/ticket3358/spkg.patch.gz)**\n\nnew patch for spkg.install + new patch file for environment variables",
    "created_at": "2008-12-04T10:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17898",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[spkg.patch.gz](https://github.com/sagemath/sage/files/ticket3358/spkg.patch.gz)**

new patch for spkg.install + new patch file for environment variables



---

archive/issue_comments_017899.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOK it took me a little bit more time than expected - because of life and going back to this uncovered several \"itches\". So in summary there are two patches.\neclib-ungnu.patch:\n*rebased on 20080310.p7\n*do away with multiple building options we only build with ntl - that simplifies the suffixes of object files.\n*created an install target\n*Got enough of sub-makefile including the top makefile just for environment variables,\ncreating a lot of noise about over-riding target and so on - splitting was the only option that I knew would result in something compatible with BSD make (and incidentally sun make: bonus!).\n\nspkg.patch:\n*rebased on 20080310.p7\n*updated spkg-install to reflect changes in makefiles and the setting of environment variables.\n*included a Makefile.env in the patch directory to put the environment variables correctly for sage.\n\ncheers,\nFrancois",
    "created_at": "2008-12-04T11:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17899",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

OK it took me a little bit more time than expected - because of life and going back to this uncovered several "itches". So in summary there are two patches.
eclib-ungnu.patch:
*rebased on 20080310.p7
*do away with multiple building options we only build with ntl - that simplifies the suffixes of object files.
*created an install target
*Got enough of sub-makefile including the top makefile just for environment variables,
creating a lot of noise about over-riding target and so on - splitting was the only option that I knew would result in something compatible with BSD make (and incidentally sun make: bonus!).

spkg.patch:
*rebased on 20080310.p7
*updated spkg-install to reflect changes in makefiles and the setting of environment variables.
*included a Makefile.env in the patch directory to put the environment variables correctly for sage.

cheers,
Francois



---

archive/issue_events_035967.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-04T11:15:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35967"
}
```



---

archive/issue_events_035968.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-04T11:15:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35968"
}
```



---

archive/issue_comments_017900.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks Francois,\n\nI have deleted the old and no longer useful patches so that only the two current patches remain. I will review those patches in the near future to avoid bitrot again. \n\nCheers,\n\nMichael",
    "created_at": "2008-12-04T11:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17900",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks Francois,

I have deleted the old and no longer useful patches so that only the two current patches remain. I will review those patches in the near future to avoid bitrot again. 

Cheers,

Michael



---

archive/issue_comments_017901.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOh dear me just seen that in the need review message.\nI have to check if it needs a lot of rebasing as it was \nagainst p5. Then may be David Kirby should have a look.",
    "created_at": "2009-12-08T08:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17901",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Oh dear me just seen that in the need review message.
I have to check if it needs a lot of rebasing as it was 
against p5. Then may be David Kirby should have a look.



---

archive/issue_events_035969.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2009-12-09T20:15:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35969"
}
```



---

archive/issue_events_035970.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2009-12-09T20:15:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35970"
}
```



---

archive/issue_comments_017902.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nFound problems with qrank's binary and the tests.\nBack to need work. \nHopefully I will update this soonish.",
    "created_at": "2009-12-09T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17902",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Found problems with qrank's binary and the tests.
Back to need work. 
Hopefully I will update this soonish.



---

archive/issue_comments_017903.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis is obsolete, solved by the current eclib, we should close it.",
    "created_at": "2012-08-05T10:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17903",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

This is obsolete, solved by the current eclib, we should close it.



---

archive/issue_events_035971.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-05T10:53:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35971"
}
```



---

archive/issue_events_035972.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-05T10:53:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35972"
}
```



---

archive/issue_comments_017904.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2012-08-05T10:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17904",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_035973.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-05T10:53:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35973"
}
```



---

archive/issue_events_035974.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-05T10:53:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35974"
}
```



---

archive/issue_comments_017905.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kiwifb](#comment%3A16):\n> This is obsolete, solved by the current eclib, we should close it.\n\nAgreed.",
    "created_at": "2012-08-05T12:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17905",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kiwifb](#comment%3A16):
> This is obsolete, solved by the current eclib, we should close it.

Agreed.



---

archive/issue_events_035975.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T13:11:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35975"
}
```



---

archive/issue_comments_017906.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nMay I remind you to set the milestone to \"sage-duplicate/invalid/wontfix\" in such a case?",
    "created_at": "2012-08-06T13:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17906",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

May I remind you to set the milestone to "sage-duplicate/invalid/wontfix" in such a case?



---

archive/issue_comments_017907.json:
```json
{
    "body": "Changed keywords from **editor_mabshoff** to none",
    "created_at": "2012-08-06T13:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3358#issuecomment-17907",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **editor_mabshoff** to none



---

archive/issue_events_035976.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T13:13:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35976"
}
```



---

archive/issue_events_035977.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T13:13:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35977"
}
```



---

archive/issue_events_035978.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T13:13:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35978"
}
```



---

archive/issue_events_035979.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T13:13:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3358",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "c6c6c6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3358#event-35979"
}
```
