# Issue 3216: [with patch, positive review] notebook -- doctests for user.py

archive/issues_003216.json:
```json
{
    "body": "Warning patch will depend on #3213 because user.py was modified for it.\n\n\nAssignee: timothyclemans\n\nKeywords: editor_wstein\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/3216\n\n",
    "closed_at": "2008-06-23T12:56:40Z",
    "created_at": "2008-05-16T04:34:16Z",
    "labels": [
        "component: notebook"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0.4",
    "title": "[with patch, positive review] notebook -- doctests for user.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3216",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```
Warning patch will depend on #3213 because user.py was modified for it.


Assignee: timothyclemans

Keywords: editor_wstein

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/3216





---

archive/issue_comments_023358.json:
```json
{
    "body": "Attachment [3216.patch](tarball://root/attachments/some-uuid/ticket3216/3216.patch) by TimothyClemans created at 2008-05-16 05:38:02",
    "created_at": "2008-05-16T05:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23358",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```

Attachment [3216.patch](tarball://root/attachments/some-uuid/ticket3216/3216.patch) by TimothyClemans created at 2008-05-16 05:38:02



---

archive/issue_events_011460.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "notebook -- doctests for user.py",
        "to": "[with patch, needs review] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11460"
}
```



---

archive/issue_comments_023359.json:
```json
{
    "body": "<a id='comment:2'></a>\nREVIEW:\n\nEven after the patch there is a nodoctest at the top of the file.  That turns off doctesting. \nI think this may have mislead you into thinking the doctests work.  Could you please delete\nnodoctest from the file, then fix all the doctest failures.  Thanks!\n\n```\nteragon-2:notebook was$ sage -t user.py \nsage -t  devel/sage-bugday12/sage/server/notebook/user.py   **********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 72:\n    sage: user.set_password(self, 'Crrc!')\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[4]>\", line 1, in <module>\n        user.set_password(self, 'Crrc!')###line 72:\n    sage: user.set_password(self, 'Crrc!')\n    NameError: name 'self' is not defined\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 73:\n    sage: old != user.password()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 85:\n    sage: user.set_hashed_password(self, 'Crrc!')\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[3]>\", line 1, in <module>\n        user.set_hashed_password(self, 'Crrc!')###line 85:\n    sage: user.set_hashed_password(self, 'Crrc!')\n    NameError: name 'self' is not defined\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 86:\n    sage: user.password()\nExpected:\n    'Crrc!'\nGot:\n    'aamxw5LCYcWY.'\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 104:\n    sage: user.get_email()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[3]>\", line 1, in <module>\n        user.get_email()###line 104:\n    sage: user.get_email()\n    AttributeError: UserConfiguration instance has no attribute 'get_email'\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 106:\n    sage: user.set_email('bob@ilovepizza.gov')\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[4]>\", line 1, in <module>\n        user.set_email('bob@ilovepizza.gov')###line 106:\n    sage: user.set_email('bob@ilovepizza.gov')\n    AttributeError: UserConfiguration instance has no attribute 'set_email'\n**********************************************************************\nFile \"/Users/was/build/build/sage-3.0.1/tmp/user.py\", line 107:\n    sage: user.get_email()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[5]>\", line 1, in <module>\n        user.get_email()###line 107:\n    sage: user.get_email()\n    AttributeError: UserConfiguration instance has no attribute 'get_email'\n**********************************************************************\n3 items had failures:\n   2 of   6 in __main__.example_4\n   2 of   5 in __main__.example_5\n   3 of   6 in __main__.example_7\n***Test Failed*** 7 failures.\nFor whitespace errors, see the file /Users/was/build/build/sage-3.0.1/tmp/.doctest_user.py\n\t [2.2 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  devel/sage-bugday12/sage/server/notebook/user.py\nTotal time for all tests: 2.2 seconds\nteragon-2:notebook was$ \n```",
    "created_at": "2008-05-19T04:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23359",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
REVIEW:

Even after the patch there is a nodoctest at the top of the file.  That turns off doctesting. 
I think this may have mislead you into thinking the doctests work.  Could you please delete
nodoctest from the file, then fix all the doctest failures.  Thanks!

```
teragon-2:notebook was$ sage -t user.py 
sage -t  devel/sage-bugday12/sage/server/notebook/user.py   **********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 72:
    sage: user.set_password(self, 'Crrc!')
Exception raised:
    Traceback (most recent call last):
      File "/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[4]>", line 1, in <module>
        user.set_password(self, 'Crrc!')###line 72:
    sage: user.set_password(self, 'Crrc!')
    NameError: name 'self' is not defined
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 73:
    sage: old != user.password()
Expected:
    True
Got:
    False
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 85:
    sage: user.set_hashed_password(self, 'Crrc!')
Exception raised:
    Traceback (most recent call last):
      File "/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[3]>", line 1, in <module>
        user.set_hashed_password(self, 'Crrc!')###line 85:
    sage: user.set_hashed_password(self, 'Crrc!')
    NameError: name 'self' is not defined
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 86:
    sage: user.password()
Expected:
    'Crrc!'
Got:
    'aamxw5LCYcWY.'
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 104:
    sage: user.get_email()
Exception raised:
    Traceback (most recent call last):
      File "/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[3]>", line 1, in <module>
        user.get_email()###line 104:
    sage: user.get_email()
    AttributeError: UserConfiguration instance has no attribute 'get_email'
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 106:
    sage: user.set_email('bob@ilovepizza.gov')
Exception raised:
    Traceback (most recent call last):
      File "/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[4]>", line 1, in <module>
        user.set_email('bob@ilovepizza.gov')###line 106:
    sage: user.set_email('bob@ilovepizza.gov')
    AttributeError: UserConfiguration instance has no attribute 'set_email'
**********************************************************************
File "/Users/was/build/build/sage-3.0.1/tmp/user.py", line 107:
    sage: user.get_email()
Exception raised:
    Traceback (most recent call last):
      File "/Users/was/build/build/sage-3.0.1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[5]>", line 1, in <module>
        user.get_email()###line 107:
    sage: user.get_email()
    AttributeError: UserConfiguration instance has no attribute 'get_email'
**********************************************************************
3 items had failures:
   2 of   6 in __main__.example_4
   2 of   5 in __main__.example_5
   3 of   6 in __main__.example_7
***Test Failed*** 7 failures.
For whitespace errors, see the file /Users/was/build/build/sage-3.0.1/tmp/.doctest_user.py
	 [2.2 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  devel/sage-bugday12/sage/server/notebook/user.py
Total time for all tests: 2.2 seconds
teragon-2:notebook was$ 
```



---

archive/issue_events_011461.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "[with patch, needs review] notebook -- doctests for user.py",
        "to": "[with patch, negative review] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11461"
}
```



---

archive/issue_comments_023360.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [3216_2.patch](tarball://root/attachments/some-uuid/ticket3216/3216_2.patch) by TimothyClemans created at 2008-05-19 18:58:51",
    "created_at": "2008-05-19T18:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23360",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```

<a id='comment:3'></a>
Attachment [3216_2.patch](tarball://root/attachments/some-uuid/ticket3216/3216_2.patch) by TimothyClemans created at 2008-05-19 18:58:51



---

archive/issue_events_011462.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "[with patch, negative review] notebook -- doctests for user.py",
        "to": "[with patch, needs review] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11462"
}
```



---

archive/issue_comments_023361.json:
```json
{
    "body": "Changing keywords from \"\" to \"editor_wstein\".",
    "created_at": "2008-06-15T21:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23361",
    "user": "https://github.com/craigcitro"
}
```

Changing keywords from "" to "editor_wstein".



---

archive/issue_events_011463.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "[with patch, needs review] notebook -- doctests for user.py",
        "to": "[with patch, under review by wstein] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11463"
}
```



---

archive/issue_comments_023362.json:
```json
{
    "body": "apply all three patches including this one, which makes things professional instead of \"pizza\"",
    "created_at": "2008-06-16T04:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23362",
    "user": "https://github.com/williamstein"
}
```

apply all three patches including this one, which makes things professional instead of "pizza"



---

archive/issue_events_011464.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "[with patch, under review by wstein] notebook -- doctests for user.py",
        "to": "[with patch, positive] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11464"
}
```



---

archive/issue_comments_023363.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [sage-3216-prof.patch](tarball://root/attachments/some-uuid/ticket3216/sage-3216-prof.patch) by @williamstein created at 2008-06-16 04:45:44",
    "created_at": "2008-06-16T04:45:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23363",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>
Attachment [sage-3216-prof.patch](tarball://root/attachments/some-uuid/ticket3216/sage-3216-prof.patch) by @williamstein created at 2008-06-16 04:45:44



---

archive/issue_events_011465.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "rename": {
        "from": "[with patch, positive] notebook -- doctests for user.py",
        "to": "[with patch, positive review] notebook -- doctests for user.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11465"
}
```



---

archive/issue_comments_023364.json:
```json
{
    "body": "<a id='comment:8'></a>\nMerged in Sage 3.0.4.alpha0",
    "created_at": "2008-06-23T12:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23364",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
Merged in Sage 3.0.4.alpha0



---

archive/issue_events_011466.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-06-23T12:56:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11466"
}
```



---

archive/issue_events_011467.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-06-23T12:56:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "milestone": "sage-3.0.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3216#event-11467"
}
```



---

archive/issue_comments_023365.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-06-23T12:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3216#issuecomment-23365",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed
