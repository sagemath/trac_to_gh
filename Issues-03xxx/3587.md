# Issue 3587: calculus -- wrap maxima's symbolic summation

archive/issues_003587.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-whuss"
    ],
    "body": "Maxima has good symbolic summation and it would be easy to wrap in the calculus package.\nWe are constantly getting stuff like this:\n\n```\n02:53 < nagyv> hello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity\n03:02 < nagyv> what the heck is this? maxima.sum(1/x, x, 1, 2*N) gives 2*N/x! why?\n```\n\nProbably the only reason that this hasn't been done yet is the calculus rewrite by gfurnish.\nThat is *not* a good enough reason, and don't worry, the work won't be lost.  \n\nCC:  @burcin @jasongrout\n\nComponent: **calculus**\n\nAuthor: **Wilfried Huss**\n\nReviewer: **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman, William Stein**\n\nMerged: **sage-4.3.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3587_\n\n",
    "closed_at": "2009-11-29T14:27:30Z",
    "created_at": "2008-07-07T15:52:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "calculus -- wrap maxima's symbolic summation",
    "type": "issue",
    "updated_at": "2009-11-29T14:30:47Z",
    "url": "https://github.com/sagemath/sage/issues/3587",
    "user": "https://github.com/williamstein"
}
```
Maxima has good symbolic summation and it would be easy to wrap in the calculus package.
We are constantly getting stuff like this:

```
02:53 < nagyv> hello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity
03:02 < nagyv> what the heck is this? maxima.sum(1/x, x, 1, 2*N) gives 2*N/x! why?
```

Probably the only reason that this hasn't been done yet is the calculus rewrite by gfurnish.
That is *not* a good enough reason, and don't worry, the work won't be lost.  

CC:  @burcin @jasongrout

Component: **calculus**

Author: **Wilfried Huss**

Reviewer: **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman, William Stein**

Merged: **sage-4.3.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/3587_





---

archive/issue_events_039003.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-07-07T15:52:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39003"
}
```



---

archive/issue_events_039004.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-07-07T15:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39004"
}
```



---

archive/issue_events_039005.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-07-07T15:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39005"
}
```



---

archive/issue_events_039006.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-07-07T15:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39006"
}
```



---

archive/issue_events_039007.json:
```json
{
    "actor": "https://github.com/garyfurnish",
    "created_at": "2008-07-07T15:52:57Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39007"
}
```



---

archive/issue_comments_019515.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI would like to add a +1 to this proposal as I'm not planning on implementing symbolic summation anytime in the near (or far) future, so I would be really happy if someone would work on this.",
    "created_at": "2008-07-07T17:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19515",
    "user": "https://github.com/garyfurnish"
}
```

<div id="comment:1" align="right">comment:1</div>

I would like to add a +1 to this proposal as I'm not planning on implementing symbolic summation anytime in the near (or far) future, so I would be really happy if someone would work on this.



---

archive/issue_comments_019516.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\"sum\" is probably the most appropriate name for this, but we'd have to make sure that it behaves the same way as Python's sum.",
    "created_at": "2008-11-11T01:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19516",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:3" align="right">comment:3</div>

"sum" is probably the most appropriate name for this, but we'd have to make sure that it behaves the same way as Python's sum.



---

archive/issue_comments_019517.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe attached patch adds a summation command which wraps simplify_sum from maxima.",
    "created_at": "2009-06-04T14:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19517",
    "user": "https://github.com/sagetrac-whuss"
}
```

<div id="comment:4" align="right">comment:4</div>

The attached patch adds a summation command which wraps simplify_sum from maxima.



---

archive/issue_events_039008.json:
```json
{
    "actor": "https://github.com/garyfurnish",
    "created_at": "2009-06-04T14:15:14Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "subject": "https://github.com/sagetrac-whuss",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39008"
}
```



---

archive/issue_events_039009.json:
```json
{
    "actor": "https://github.com/sagetrac-whuss",
    "created_at": "2009-06-04T14:15:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "subject": "https://github.com/sagetrac-whuss",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39009"
}
```



---

archive/issue_events_039010.json:
```json
{
    "actor": "https://github.com/sagetrac-whuss",
    "created_at": "2009-06-04T14:15:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39010"
}
```



---

archive/issue_events_039011.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-06-05T13:25:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "title_is": "calculus -- wrap maxima's symbolic summation",
    "title_was": "calculus -- implement symbolic summation",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39011"
}
```



---

archive/issue_events_039012.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-06-05T13:25:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39012"
}
```



---

archive/issue_events_039013.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-06-05T13:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39013"
}
```



---

archive/issue_comments_019518.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMany thanks for the patch, this was long overdue. A few comments after reading your patch:\n\nYour patch replicates the way integrate/integral works perfectly. Though, as Mike wrote in [comment:3](#comment%3A3), we should just call this `sum`. There is also a discussion about naming here:\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/bd4eb3b613c98030\n\nI suggest putting a `sum()` function in `sage.misc.misc_c`, that calls python's `sum()` or your function based on the type/number of the arguments. Would you like to do this or should I?\n\nHere are some suggested changes:\n\n* rename all instances of the method to `sum` or `symbolic_sum`\n* you should import your function before the doctests in `calculus.py` to make sure you call the right function\n* it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`\n* you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output\n* In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen\n\n\nIn the long term, I would like to see `integral` and `sum` constructs as subclasses of `sage.symbolic.function.SFunction`, instead of the current thin wrappers around maxima functionality. I will take a look at the feasibility of doing this over the weekend. I don't want to hold your patch back for this though.",
    "created_at": "2009-06-05T13:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19518",
    "user": "https://github.com/burcin"
}
```

<div id="comment:5" align="right">comment:5</div>

Many thanks for the patch, this was long overdue. A few comments after reading your patch:

Your patch replicates the way integrate/integral works perfectly. Though, as Mike wrote in [comment:3](#comment%3A3), we should just call this `sum`. There is also a discussion about naming here:

http://groups.google.com/group/sage-devel/browse_thread/thread/bd4eb3b613c98030

I suggest putting a `sum()` function in `sage.misc.misc_c`, that calls python's `sum()` or your function based on the type/number of the arguments. Would you like to do this or should I?

Here are some suggested changes:

* rename all instances of the method to `sum` or `symbolic_sum`
* you should import your function before the doctests in `calculus.py` to make sure you call the right function
* it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`
* you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output
* In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen


In the long term, I would like to see `integral` and `sum` constructs as subclasses of `sage.symbolic.function.SFunction`, instead of the current thin wrappers around maxima functionality. I will take a look at the feasibility of doing this over the weekend. I don't want to hold your patch back for this though.



---

archive/issue_comments_019519.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@burcin](#comment%3A5):\n> Many thanks for the patch, this was long overdue. A few comments after reading your patch:\n> \n> Your patch replicates the way integrate/integral works perfectly. Though, as Mike wrote in [comment:3](#comment%3A3), we should just call this `sum`. There is also a discussion about naming here:\n> \n> http://groups.google.com/group/sage-devel/browse_thread/thread/bd4eb3b613c98030\n> \n> I suggest putting a `sum()` function in `sage.misc.misc_c`, that calls python's `sum()` or your function based on the type/number of the arguments. Would you like to do this or should I?\n\nIt would be great if you could do this.\n\n> Here are some suggested changes:\n> \n> * rename all instances of the method to `sum` or `symbolic_sum`\n> * you should import your function before the doctests in `calculus.py` to make sure you call the right function\n> * it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`\n> * you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output\n> * In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen\n\nI will take care of these.\n \n> \n> In the long term, I would like to see `integral` and `sum` constructs as subclasses of `sage.symbolic.function.SFunction`, instead of the current thin wrappers around maxima functionality.\n\nThis is definitely necessary. Currently there is no way to interact with an unevaluated integral or sum.\n\n> I will take a look at the feasibility of doing this over the weekend. I don't want to hold your patch back for this though.",
    "created_at": "2009-06-06T17:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19519",
    "user": "https://github.com/sagetrac-whuss"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@burcin](#comment%3A5):
> Many thanks for the patch, this was long overdue. A few comments after reading your patch:
> 
> Your patch replicates the way integrate/integral works perfectly. Though, as Mike wrote in [comment:3](#comment%3A3), we should just call this `sum`. There is also a discussion about naming here:
> 
> http://groups.google.com/group/sage-devel/browse_thread/thread/bd4eb3b613c98030
> 
> I suggest putting a `sum()` function in `sage.misc.misc_c`, that calls python's `sum()` or your function based on the type/number of the arguments. Would you like to do this or should I?

It would be great if you could do this.

> Here are some suggested changes:
> 
> * rename all instances of the method to `sum` or `symbolic_sum`
> * you should import your function before the doctests in `calculus.py` to make sure you call the right function
> * it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`
> * you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output
> * In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen

I will take care of these.
 
> 
> In the long term, I would like to see `integral` and `sum` constructs as subclasses of `sage.symbolic.function.SFunction`, instead of the current thin wrappers around maxima functionality.

This is definitely necessary. Currently there is no way to interact with an unevaluated integral or sum.

> I will take a look at the feasibility of doing this over the weekend. I don't want to hold your patch back for this though.



---

archive/issue_events_039014.json:
```json
{
    "actor": "https://github.com/sagetrac-whuss",
    "created_at": "2009-06-07T12:16:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39014"
}
```



---

archive/issue_events_039015.json:
```json
{
    "actor": "https://github.com/sagetrac-whuss",
    "created_at": "2009-06-07T12:16:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39015"
}
```



---

archive/issue_comments_019520.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[summation.patch.gz](https://github.com/sagemath/sage/files/ticket3587/summation.patch.gz)**\n\nReplying to [@burcin](#comment%3A5): \n> Here are some suggested changes:\n> \n> * rename all instances of the method to `sum` or `symbolic_sum`\n> * you should import your function before the doctests in `calculus.py` to make sure you call the right function\n> * it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`\n> * you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output\n> * In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen\n\nI posted a new patch that takes care of these issues.\n\nThe second patch (sum.patch) renames summation to sum. This currently overwrites the python sum command.",
    "created_at": "2009-06-07T12:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19520",
    "user": "https://github.com/sagetrac-whuss"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[summation.patch.gz](https://github.com/sagemath/sage/files/ticket3587/summation.patch.gz)**

Replying to [@burcin](#comment%3A5): 
> Here are some suggested changes:
> 
> * rename all instances of the method to `sum` or `symbolic_sum`
> * you should import your function before the doctests in `calculus.py` to make sure you call the right function
> * it would be good to add a comment to #6197 pointing to the comment you have in `calculus.py`
> * you could add your code for converting MMA output back to Sage to a `_sage_()` method in `sage.interfaces.mathematica.MathematicaElement`, see the `MagmaElement` class in `sage.interfaces.magma` for an example, similarly for Maple output
> * In the last lines of the docstring for `sage.symbolic.expression.Expression.summation`, choosen -> chosen

I posted a new patch that takes care of these issues.

The second patch (sum.patch) renames summation to sum. This currently overwrites the python sum command.



---

archive/issue_comments_019521.json:
```json
{
    "body": "Attachment: **[sum.patch.gz](https://github.com/sagemath/sage/files/ticket3587/sum.patch.gz)**",
    "created_at": "2009-06-20T01:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19521",
    "user": "https://github.com/mwhansen"
}
```

Attachment: **[sum.patch.gz](https://github.com/sagemath/sage/files/ticket3587/sum.patch.gz)**



---

archive/issue_comments_019522.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI updated sum.patch so that it's compatible with __builtin__.sum.\n\nBurcin, can you look at this?",
    "created_at": "2009-06-20T01:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19522",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:8" align="right">comment:8</div>

I updated sum.patch so that it's compatible with __builtin__.sum.

Burcin, can you look at this?



---

archive/issue_comments_019523.json:
```json
{
    "body": "Author: **Wilfried Huss**",
    "created_at": "2009-06-20T01:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19523",
    "user": "https://github.com/mwhansen"
}
```

Author: **Wilfried Huss**



---

archive/issue_comments_019524.json:
```json
{
    "body": "Reviewer: **Burcin Erocal, Mike Hansen**",
    "created_at": "2009-06-20T01:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19524",
    "user": "https://github.com/mwhansen"
}
```

Reviewer: **Burcin Erocal, Mike Hansen**



---

archive/issue_comments_019525.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI uploaded a new patch in [attachment: trac_3587-maxima_simplify_sum.patch](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum.patch.gz)This has both patches folded together, and renames `sum()` to `symbolic_sum()` in `sage/calculus/calculus.py` and `sage/misc/functional.py` eliminating the risk of people using the symbolic sum instead of sum in library code without realizing, and the need to import `__builtin__`.\n\nI am OK with the patch, and ready to give it a positive review. However, there is a problem, maxima returns wrong results in certain cases:\n\n```\nsage: sum(binomial(n,k), k, 1, n)\n2^n - 2\nsage: sum(binomial(n,k), k, 2, n)\n2^n - 2*n - 2\nsage: r=sum(binomial(n,k), k, 2, n-2)\nsage: r.simplify()\n2^n - 1/6*n^3 - 11/6*n - 2\n```\n\nIt seems that maxima doesn't handle definite sums with \"non natural\" bounds. I.e., in the examples above the bounds don't span the whole support of the expression, so one needs further processing to get the final result after calling Zeilberger's algorithm.\n\nIndefinite sums seem to be fine. In this case, we could check the inputs, and raise a warning if we have a definite sum. I'll try to do this, but don't count on me since I already signed up for a lot this week.",
    "created_at": "2009-06-23T21:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19525",
    "user": "https://github.com/burcin"
}
```

<div id="comment:9" align="right">comment:9</div>

I uploaded a new patch in [attachment: trac_3587-maxima_simplify_sum.patch](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum.patch.gz)This has both patches folded together, and renames `sum()` to `symbolic_sum()` in `sage/calculus/calculus.py` and `sage/misc/functional.py` eliminating the risk of people using the symbolic sum instead of sum in library code without realizing, and the need to import `__builtin__`.

I am OK with the patch, and ready to give it a positive review. However, there is a problem, maxima returns wrong results in certain cases:

```
sage: sum(binomial(n,k), k, 1, n)
2^n - 2
sage: sum(binomial(n,k), k, 2, n)
2^n - 2*n - 2
sage: r=sum(binomial(n,k), k, 2, n-2)
sage: r.simplify()
2^n - 1/6*n^3 - 11/6*n - 2
```

It seems that maxima doesn't handle definite sums with "non natural" bounds. I.e., in the examples above the bounds don't span the whole support of the expression, so one needs further processing to get the final result after calling Zeilberger's algorithm.

Indefinite sums seem to be fine. In this case, we could check the inputs, and raise a warning if we have a definite sum. I'll try to do this, but don't count on me since I already signed up for a lot this week.



---

archive/issue_events_039016.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-06-23T21:39:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39016"
}
```



---

archive/issue_events_039017.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-06-23T21:39:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39017"
}
```



---

archive/issue_comments_019526.json:
```json
{
    "body": "Attachment: **[trac_3587-maxima_simplify_sum.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum.patch.gz)**",
    "created_at": "2009-06-23T21:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19526",
    "user": "https://github.com/burcin"
}
```

Attachment: **[trac_3587-maxima_simplify_sum.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum.patch.gz)**



---

archive/issue_comments_019527.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI installed this, but it does not seem to work as advertised.  Namely, \n\n```\nsage: var('n,k')\n(k, n)\nsage: sum(binomial(n,k),k,0,n)\nsimplify_sum(sum(binomial(n,k),k,0,n))\n```\nIt does behave as desired if I go to Maxima and load(simplify_sum) etc., but that's not the same.  Somehow it's staying symbolic for some reason.  This is off of 4.1.1 on Mac OSX.5.\n\n> I am OK with the patch, and ready to give it a positive review. However, there is a problem, maxima returns wrong results in certain cases:\n> \n> ```\n> sage: sum(binomial(n,k), k, 1, n)\n> 2^n - 2\n> sage: sum(binomial(n,k), k, 2, n)\n> 2^n - 2*n - 2\n> sage: r=sum(binomial(n,k), k, 2, n-2)\n> sage: r.simplify()\n> 2^n - 1/6*n^3 - 11/6*n - 2\n> ```\n> \n> It seems that maxima doesn't handle definite sums with \"non natural\" bounds. I.e., in the examples above the bounds don't span the whole support of the expression, so one needs further processing to get the final result after calling Zeilberger's algorithm.\n\nLooks like this problem is fixed in Maxima 5.19 (at least they work properly in 5.19.1), so this is another good reason to get that in Sage soon (there was an experimental spkg posted at [http://sage.math.washington.edu/home/kirkby/Solaris-fixes/maxima-5.19.0/maxima-5.19.0.spkg](http://sage.math.washington.edu/home/kirkby/Solaris-fixes/maxima-5.19.0/maxima-5.19.0.spkg) at one point).  Incidentally, apparently it never got to as heavy a hitter as Zeilberger, but I'm not sure where the problem was.",
    "created_at": "2009-08-28T20:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19527",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

I installed this, but it does not seem to work as advertised.  Namely, 

```
sage: var('n,k')
(k, n)
sage: sum(binomial(n,k),k,0,n)
simplify_sum(sum(binomial(n,k),k,0,n))
```
It does behave as desired if I go to Maxima and load(simplify_sum) etc., but that's not the same.  Somehow it's staying symbolic for some reason.  This is off of 4.1.1 on Mac OSX.5.

> I am OK with the patch, and ready to give it a positive review. However, there is a problem, maxima returns wrong results in certain cases:
> 
> ```
> sage: sum(binomial(n,k), k, 1, n)
> 2^n - 2
> sage: sum(binomial(n,k), k, 2, n)
> 2^n - 2*n - 2
> sage: r=sum(binomial(n,k), k, 2, n-2)
> sage: r.simplify()
> 2^n - 1/6*n^3 - 11/6*n - 2
> ```
> 
> It seems that maxima doesn't handle definite sums with "non natural" bounds. I.e., in the examples above the bounds don't span the whole support of the expression, so one needs further processing to get the final result after calling Zeilberger's algorithm.

Looks like this problem is fixed in Maxima 5.19 (at least they work properly in 5.19.1), so this is another good reason to get that in Sage soon (there was an experimental spkg posted at [http://sage.math.washington.edu/home/kirkby/Solaris-fixes/maxima-5.19.0/maxima-5.19.0.spkg](http://sage.math.washington.edu/home/kirkby/Solaris-fixes/maxima-5.19.0/maxima-5.19.0.spkg) at one point).  Incidentally, apparently it never got to as heavy a hitter as Zeilberger, but I'm not sure where the problem was.



---

archive/issue_comments_019528.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@kcrisman](#comment%3A10):\n> I installed this, but it does not seem to work as advertised.  Namely, \n> \n> ```\n> sage: var('n,k')\n> (k, n)\n> sage: sum(binomial(n,k),k,0,n)\n> simplify_sum(sum(binomial(n,k),k,0,n))\n> ```\n> It does behave as desired if I go to Maxima and load(simplify_sum) etc., but that's not the same.  Somehow it's staying symbolic for some reason.  This is off of 4.1.1 on Mac OSX.5.\n\nIt works for me on sage-4.1.1 on Linux. I don't have a Mac to check.",
    "created_at": "2009-08-31T11:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19528",
    "user": "https://github.com/sagetrac-whuss"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@kcrisman](#comment%3A10):
> I installed this, but it does not seem to work as advertised.  Namely, 
> 
> ```
> sage: var('n,k')
> (k, n)
> sage: sum(binomial(n,k),k,0,n)
> simplify_sum(sum(binomial(n,k),k,0,n))
> ```
> It does behave as desired if I go to Maxima and load(simplify_sum) etc., but that's not the same.  Somehow it's staying symbolic for some reason.  This is off of 4.1.1 on Mac OSX.5.

It works for me on sage-4.1.1 on Linux. I don't have a Mac to check.



---

archive/issue_comments_019529.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe fix for my problem is to change\n\n```\nmaxima = Maxima(init_code = ['display2d:false; domain: complex; keepfloat: true; load(topoly_solver); load(simplify_sum)'],\n                script_subdirectory=None)\n```\nby\n\n```\nmaxima = Maxima(init_code = ['display2d:false', 'domain: complex', 'keepfloat: true', 'load(topoly_solver)', 'load(simplify_sum)'],\n                script_subdirectory=None)\n```\nthe need for which perhaps does depend on the operating system.   Can someone check that this doesn't break Linux?",
    "created_at": "2009-09-02T18:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19529",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

The fix for my problem is to change

```
maxima = Maxima(init_code = ['display2d:false; domain: complex; keepfloat: true; load(topoly_solver); load(simplify_sum)'],
                script_subdirectory=None)
```
by

```
maxima = Maxima(init_code = ['display2d:false', 'domain: complex', 'keepfloat: true', 'load(topoly_solver)', 'load(simplify_sum)'],
                script_subdirectory=None)
```
the need for which perhaps does depend on the operating system.   Can someone check that this doesn't break Linux?



---

archive/issue_comments_019530.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe latest .spkg in #6699 (and hence in 4.1.2.alpha0) should fix the problems Burcin mentions, and seems to handle all the sums properly.\n\n```\nsage: sum(binomial(n,k), k, 1, n)\n2^n - 2\nsage: sum(binomial(n,k), k, 2, n)\n2^n - 2*n - 2\n```\nare now\n\n```\nsage: var('k,n')\n(k, n)\nsage: sum(binomial(n,k),k,0,n)\n2^n\nsage: sum(binomial(n,k),k,1,n)\n2^n - 1\nsage: sum(binomial(n,k),k,2,n)\n2^n - n - 1\n```\nSo perhaps a new patch based on 4.1.2.alpha0 is in order, but then the review should be quite straightforward, with the fix above.",
    "created_at": "2009-09-02T19:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19530",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

The latest .spkg in #6699 (and hence in 4.1.2.alpha0) should fix the problems Burcin mentions, and seems to handle all the sums properly.

```
sage: sum(binomial(n,k), k, 1, n)
2^n - 2
sage: sum(binomial(n,k), k, 2, n)
2^n - 2*n - 2
```
are now

```
sage: var('k,n')
(k, n)
sage: sum(binomial(n,k),k,0,n)
2^n
sage: sum(binomial(n,k),k,1,n)
2^n - 1
sage: sum(binomial(n,k),k,2,n)
2^n - n - 1
```
So perhaps a new patch based on 4.1.2.alpha0 is in order, but then the review should be quite straightforward, with the fix above.



---

archive/issue_events_039018.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-02T20:24:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39018"
}
```



---

archive/issue_events_039019.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-02T20:24:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39019"
}
```



---

archive/issue_comments_019531.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis should fix all the outstanding issues. It is built off of 4.1.1, with #6564 and (then) #6699 applied, then this patch.  Several additional doctests/fixes to them are included beyond the previous patch, in addition to the Maxima init fix.  Should definitely be tested on Linux to make sure the fix for OSX didn't break Linux!",
    "created_at": "2009-09-02T20:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19531",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

This should fix all the outstanding issues. It is built off of 4.1.1, with #6564 and (then) #6699 applied, then this patch.  Several additional doctests/fixes to them are included beyond the previous patch, in addition to the Maxima init fix.  Should definitely be tested on Linux to make sure the fix for OSX didn't break Linux!



---

archive/issue_comments_019532.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal, Mike Hansen** to **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman**",
    "created_at": "2009-09-02T20:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19532",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal, Mike Hansen** to **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman**



---

archive/issue_comments_019533.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI browsed through the patch---is it still easy to access the (fast) native python sum command, or will we have to import that into the namespace?  In other words, was the suggestion given above about calling the python sum vs. this new sum depending on the arguments implemented?  If not, I see a serious, far-reaching problem with backwards compatibility...",
    "created_at": "2009-09-02T22:20:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19533",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:15" align="right">comment:15</div>

I browsed through the patch---is it still easy to access the (fast) native python sum command, or will we have to import that into the namespace?  In other words, was the suggestion given above about calling the python sum vs. this new sum depending on the arguments implemented?  If not, I see a serious, far-reaching problem with backwards compatibility...



---

archive/issue_comments_019534.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWell, the following was identical with and without the patch:\n\n```\nsage: l = range(10^6)\nsage: time sum(l)\nCPU times: user 0.15 s, sys: 0.00 s, total: 0.15 s\nWall time: 0.15 s\n499999500000L\n```\nAnd the same with summing m = 5*l, both 0.79 s, and summing n = 100*m, both about 80 s.  And sum(l,3) returns the correct answer (without the L).  Also, earlier mhansen seems to indicate that it's still okay - I don't know exactly where in the code that happens, though.  Hope this helps.",
    "created_at": "2009-09-03T00:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19534",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Well, the following was identical with and without the patch:

```
sage: l = range(10^6)
sage: time sum(l)
CPU times: user 0.15 s, sys: 0.00 s, total: 0.15 s
Wall time: 0.15 s
499999500000L
```
And the same with summing m = 5*l, both 0.79 s, and summing n = 100*m, both about 80 s.  And sum(l,3) returns the correct answer (without the L).  Also, earlier mhansen seems to indicate that it's still okay - I don't know exactly where in the code that happens, though.  Hope this helps.



---

archive/issue_comments_019535.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFix this one broken doctest and this gets a positive review from me:\n\n```python\nwstein@sage:~/build/sage-4.1.2.alpha1$ ./sage -t devel/sage/sage/misc/functional.py \nsage -t  \"devel/sage/sage/misc/functional.py\"               \n**********************************************************************\nFile \"/scratch/wstein/build/sage-4.1.2.alpha1/devel/sage/sage/misc/functional.py\", line 442:\n    sage: sum(k * binomial(n, k), k, 1, n)\nExpected:\n    1/2*2^n*n\nGot:\n    n*2^(n - 1)\n**********************************************************************\nFile \"/scratch/wstein/build/sage-4.1.2.alpha1/devel/sage/sage/misc/functional.py\", line 480:\n    sage: sum(a*q^k, k, 0, oo)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Sum is divergent.\nGot:\n    -a/(q - 1)\n**********************************************************************\n1 items had failures:\n   2 of  20 in __main__.example_25\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /scratch/wstein/build/sage-4.1.2.alpha1/tmp/.doctest_functional.py\n         [8.3 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/sage/misc/functional.py\"\nTotal time for all tests: 8.3 seconds\nwstein@sage:~/build/sage-4.1.2.alpha1$ \n```\n\nThe above is just the result of changes in Maxima going from 5.16 to 5.19 in sage-4.1.2.\n\n  -- William",
    "created_at": "2009-09-13T01:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19535",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:17" align="right">comment:17</div>

Fix this one broken doctest and this gets a positive review from me:

```python
wstein@sage:~/build/sage-4.1.2.alpha1$ ./sage -t devel/sage/sage/misc/functional.py 
sage -t  "devel/sage/sage/misc/functional.py"               
**********************************************************************
File "/scratch/wstein/build/sage-4.1.2.alpha1/devel/sage/sage/misc/functional.py", line 442:
    sage: sum(k * binomial(n, k), k, 1, n)
Expected:
    1/2*2^n*n
Got:
    n*2^(n - 1)
**********************************************************************
File "/scratch/wstein/build/sage-4.1.2.alpha1/devel/sage/sage/misc/functional.py", line 480:
    sage: sum(a*q^k, k, 0, oo)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Sum is divergent.
Got:
    -a/(q - 1)
**********************************************************************
1 items had failures:
   2 of  20 in __main__.example_25
***Test Failed*** 2 failures.
For whitespace errors, see the file /scratch/wstein/build/sage-4.1.2.alpha1/tmp/.doctest_functional.py
         [8.3 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


        sage -t  "devel/sage/sage/misc/functional.py"
Total time for all tests: 8.3 seconds
wstein@sage:~/build/sage-4.1.2.alpha1$ 
```

The above is just the result of changes in Maxima going from 5.16 to 5.19 in sage-4.1.2.

  -- William



---

archive/issue_comments_019536.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis is nice!\n\nJust a small note: Sphinx warns about the indentation of the new `note::` block in `expression.pyx`:\n\n```\n/home/apps/sage/devel/sage/doc/en/reference/sage/symbolic/expression.rst:: (ERROR/3) Content block expected for the \"note\" directive; none found.\n```",
    "created_at": "2009-09-13T01:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19536",
    "user": "https://github.com/qed777"
}
```

<div id="comment:18" align="right">comment:18</div>

This is nice!

Just a small note: Sphinx warns about the indentation of the new `note::` block in `expression.pyx`:

```
/home/apps/sage/devel/sage/doc/en/reference/sage/symbolic/expression.rst:: (ERROR/3) Content block expected for the "note" directive; none found.
```



---

archive/issue_comments_019537.json:
```json
{
    "body": "fixes the doctest errors reported by William",
    "created_at": "2009-09-14T14:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19537",
    "user": "https://github.com/sagetrac-whuss"
}
```

fixes the doctest errors reported by William



---

archive/issue_comments_019538.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAttachment: **[trac_3587-fix_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-fix_doctests.patch.gz)**\n\nOkay, I fixed those tests; there were identical ones elsewhere I did fix but functional.py escaped me.  I also think I fixed the note issue.  \n\nSince #6197 is merged I also used the correct algorithm=maxima behavior.  I don't have Maple so I didn't feel comfortable changing the Maple behavior, but it would be easy to open a new ticket for that if the appropriate algorithm worked, which it certainly seems like it should post-#6197.\n\nI'm going to assume that the builtin sum is indeed okay - great!",
    "created_at": "2009-09-14T14:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19538",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

Attachment: **[trac_3587-fix_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-fix_doctests.patch.gz)**

Okay, I fixed those tests; there were identical ones elsewhere I did fix but functional.py escaped me.  I also think I fixed the note issue.  

Since #6197 is merged I also used the correct algorithm=maxima behavior.  I don't have Maple so I didn't feel comfortable changing the Maple behavior, but it would be easy to open a new ticket for that if the appropriate algorithm worked, which it certainly seems like it should post-#6197.

I'm going to assume that the builtin sum is indeed okay - great!



---

archive/issue_comments_019539.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman** to **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman, William Stein**",
    "created_at": "2009-09-14T14:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19539",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman** to **Burcin Erocal, Mike Hansen, Karl-Dieter Crisman, William Stein**



---

archive/issue_comments_019540.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nUse only the 5-19-1 patch.",
    "created_at": "2009-09-14T14:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19540",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

Use only the 5-19-1 patch.



---

archive/issue_comments_019541.json:
```json
{
    "body": "Attachment: **[trac_3587-binomial_workaround.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-binomial_workaround.patch.gz)**\n\nremoves the workaround for binomials. Depends on #6197",
    "created_at": "2009-09-14T14:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19541",
    "user": "https://github.com/sagetrac-whuss"
}
```

Attachment: **[trac_3587-binomial_workaround.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-binomial_workaround.patch.gz)**

removes the workaround for binomials. Depends on #6197



---

archive/issue_comments_019542.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLooks like I have been a little too late.\n\nI have checked that algorithm=maple also works without the workaround for #6197.\nI think it is save to remove it.",
    "created_at": "2009-09-14T14:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19542",
    "user": "https://github.com/sagetrac-whuss"
}
```

<div id="comment:21" align="right">comment:21</div>

Looks like I have been a little too late.

I have checked that algorithm=maple also works without the workaround for #6197.
I think it is save to remove it.



---

archive/issue_comments_019543.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n We are constantly getting stuff like this:\n \n ```\n-02:53 < nagyv> \ufeffhello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity\n+02:53 < nagyv> hello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity\n 03:02 < nagyv> what the heck is this? maxima.sum(1/x, x, 1, 2*N) gives 2*N/x! why?\n ```\n \n``````\n",
    "created_at": "2009-09-14T15:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19543",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 We are constantly getting stuff like this:
 
 ```
-02:53 < nagyv> hello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity
+02:53 < nagyv> hello! how can I represent a summation in sage? like sum_{x=1}^N x, I would like to take the limit as N goes to infinity
 03:02 < nagyv> what the heck is this? maxima.sum(1/x, x, 1, 2*N) gives 2*N/x! why?
 ```
 
``````




---

archive/issue_comments_019544.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nGreat, I'll do that as well.",
    "created_at": "2009-09-14T15:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19544",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

Great, I'll do that as well.



---

archive/issue_comments_019545.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI get *tons* of doctest failures when I apply this patch, say to sage-4.1.2.alpha1:\n\n```\nThe following tests failed:\n\n        sage -t  devel/sage/sage/misc/functional.py # 5 doctests failed\n        sage -t  devel/sage/sage/calculus/calculus.py # 10 doctests failed\n        sage -t  devel/sage/sage/symbolic/expression.pyx # 9 doctests failed\n```\n\nSee http://sage.math.washington.edu/home/wstein/build/sage-4.1.2.alpha1/test_3587.out",
    "created_at": "2009-09-22T14:26:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19545",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:23" align="right">comment:23</div>

I get *tons* of doctest failures when I apply this patch, say to sage-4.1.2.alpha1:

```
The following tests failed:

        sage -t  devel/sage/sage/misc/functional.py # 5 doctests failed
        sage -t  devel/sage/sage/calculus/calculus.py # 10 doctests failed
        sage -t  devel/sage/sage/symbolic/expression.pyx # 9 doctests failed
```

See http://sage.math.washington.edu/home/wstein/build/sage-4.1.2.alpha1/test_3587.out



---

archive/issue_events_039020.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-09-22T14:26:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39020"
}
```



---

archive/issue_events_039021.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-09-22T14:26:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39021"
}
```



---

archive/issue_comments_019546.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nDid you do #6197?",
    "created_at": "2009-09-22T14:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19546",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Did you do #6197?



---

archive/issue_comments_019547.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThis patch in fact applies cleanly to 4.1.2.alpha2, and none of the files above have doctest failures with it.  Please review.",
    "created_at": "2009-09-24T14:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19547",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:25" align="right">comment:25</div>

This patch in fact applies cleanly to 4.1.2.alpha2, and none of the files above have doctest failures with it.  Please review.



---

archive/issue_events_039022.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-24T14:02:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39022"
}
```



---

archive/issue_events_039023.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-24T14:02:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39023"
}
```



---

archive/issue_comments_019548.json:
```json
{
    "body": "Based on 4.2.1, apply only this patch",
    "created_at": "2009-11-17T20:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19548",
    "user": "https://github.com/kcrisman"
}
```

Based on 4.2.1, apply only this patch



---

archive/issue_comments_019549.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[trac_3587-maxima_simplify_sum-with-maxima-5-19-1.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum-with-maxima-5-19-1.patch.gz)**\n\nPlease someone (beyond myself and the author) review this!  It would be perfect for the big 4.3 release coming up!",
    "created_at": "2009-11-17T20:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19549",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[trac_3587-maxima_simplify_sum-with-maxima-5-19-1.patch.gz](https://github.com/sagemath/sage/files/ticket3587/trac_3587-maxima_simplify_sum-with-maxima-5-19-1.patch.gz)**

Please someone (beyond myself and the author) review this!  It would be perfect for the big 4.3 release coming up!



---

archive/issue_events_039024.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-11-29T14:27:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39024"
}
```



---

archive/issue_events_039025.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-11-29T14:27:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3587#event-39025"
}
```



---

archive/issue_comments_019550.json:
```json
{
    "body": "Merged: **sage-4.3.alpha1**",
    "created_at": "2009-11-29T14:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19550",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.3.alpha1**



---

archive/issue_comments_019551.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nPositive review from me (by the way).",
    "created_at": "2009-11-29T14:30:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3587#issuecomment-19551",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:28" align="right">comment:28</div>

Positive review from me (by the way).
