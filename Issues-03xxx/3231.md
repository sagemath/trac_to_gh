# Issue 3231: Use the randgen framework to set the seeds for controlled Magma, Singular, etc. sessions

archive/issues_003231.json:
```json
{
    "body": "The interfaces to gp, gap, r, scilab, magma, etc., should use the randgen framework to initialize/set the seed for their respective random number generators.\n\nThe purpose of this ticket is to add a `set_seed` method to each interface which takes the appropriate input to modify the random number generator's seed value. It should also make the interfaces initialize their seed value with a random value generated from the randgen framework.\n\n**Assignee:** cwitty\n\n**Branch/Commit:** [38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)\n\n**Reviewer:** Martin Albrecht\n\n**Author:** Travis Scholl\n\nIssue created by migration from https://trac.sagemath.org/ticket/3231\n\n",
    "closed_at": "2015-06-22T22:25:10Z",
    "created_at": "2008-05-16T23:14:33Z",
    "labels": [
        "component: interfaces",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Use the randgen framework to set the seeds for controlled Magma, Singular, etc. sessions",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/3231",
    "user": "https://github.com/malb"
}
```
The interfaces to gp, gap, r, scilab, magma, etc., should use the randgen framework to initialize/set the seed for their respective random number generators.

The purpose of this ticket is to add a `set_seed` method to each interface which takes the appropriate input to modify the random number generator's seed value. It should also make the interfaces initialize their seed value with a random value generated from the randgen framework.

**Assignee:** cwitty

**Branch/Commit:** [38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)

**Reviewer:** Martin Albrecht

**Author:** Travis Scholl

Issue created by migration from https://trac.sagemath.org/ticket/3231





---

archive/issue_comments_017842.json:
```json
{
    "body": "**Changing assignee** from @williamstein to cwitty.",
    "created_at": "2009-02-24T02:15:43Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17842",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

**Changing assignee** from @williamstein to cwitty.



---

archive/issue_events_017231.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17231"
}
```



---

archive/issue_events_017232.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17232"
}
```



---

archive/issue_events_017233.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17233"
}
```



---

archive/issue_events_017234.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17234"
}
```



---

archive/issue_events_017235.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17235"
}
```



---

archive/issue_events_017236.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17236"
}
```



---

archive/issue_events_017237.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17237"
}
```



---

archive/issue_events_017238.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17238"
}
```



---

archive/issue_comments_017843.json:
```json
{
    "body": "**Commit:** [141e8e9b10ef8e775d73838f17fab604fcdd3d18](https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18)",
    "created_at": "2015-05-25T22:53:25Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17843",
    "user": "https://github.com/tscholl2"
}
```

**Commit:** [141e8e9b10ef8e775d73838f17fab604fcdd3d18](https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18)



---

archive/issue_comments_017844.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e532a6c1930a1f86637ae78f661b43151851ea74\">e532a6c</a></td><td><code>added set_seed support for singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa2b61b6dfab4ad7a573869e149cdcb9a5dcd138\">aa2b61b</a></td><td><code>used randstate to initialize seed in some interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18\">141e8e9</a></td><td><code>Added set_seed functionality to more interfaces.</code></td></tr></table>\n",
    "created_at": "2015-05-25T22:53:25Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17844",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e532a6c1930a1f86637ae78f661b43151851ea74">e532a6c</a></td><td><code>added set_seed support for singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa2b61b6dfab4ad7a573869e149cdcb9a5dcd138">aa2b61b</a></td><td><code>used randstate to initialize seed in some interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18">141e8e9</a></td><td><code>Added set_seed functionality to more interfaces.</code></td></tr></table>




---

archive/issue_comments_017845.json:
```json
{
    "body": "**Author:** Travis Scholl",
    "created_at": "2015-05-25T22:53:25Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17845",
    "user": "https://github.com/tscholl2"
}
```

**Author:** Travis Scholl



---

archive/issue_comments_017846.json:
```json
{
    "body": "**Branch:** [u/tscholl2/seeds_3231](https://github.com/sagemath/sagetrac-mirror/tree/u/tscholl2/seeds_3231)",
    "created_at": "2015-05-25T22:53:25Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17846",
    "user": "https://github.com/tscholl2"
}
```

**Branch:** [u/tscholl2/seeds_3231](https://github.com/sagemath/sagetrac-mirror/tree/u/tscholl2/seeds_3231)



---

archive/issue_comments_017847.json:
```json
{
    "body": "**Changing commit** from \"[141e8e9b10ef8e775d73838f17fab604fcdd3d18](https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18)\" to \"[33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2](https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2)\".",
    "created_at": "2015-05-26T13:46:34Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[141e8e9b10ef8e775d73838f17fab604fcdd3d18](https://github.com/sagemath/sagetrac-mirror/commit/141e8e9b10ef8e775d73838f17fab604fcdd3d18)" to "[33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2](https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2)".



---

archive/issue_comments_017848.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2\">33abf28</a></td><td><code>Added Magma example</code></td></tr></table>\n",
    "created_at": "2015-05-26T13:46:34Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2">33abf28</a></td><td><code>Added Magma example</code></td></tr></table>




---

archive/issue_comments_017849.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa\">3f8533a</a></td><td><code>fixed randstate singular example</code></td></tr></table>\n",
    "created_at": "2015-05-26T15:48:43Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa">3f8533a</a></td><td><code>fixed randstate singular example</code></td></tr></table>




---

archive/issue_comments_017850.json:
```json
{
    "body": "**Changing commit** from \"[33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2](https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2)\" to \"[3f8533ac115e5a446b2df92271eb6feb5b643efa](https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa)\".",
    "created_at": "2015-05-26T15:48:43Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2](https://github.com/sagemath/sagetrac-mirror/commit/33abf288e74d1685d5bb09b37c1fa2bb9e5d67e2)" to "[3f8533ac115e5a446b2df92271eb6feb5b643efa](https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa)".



---

archive/issue_events_017239.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-05-26T15:51:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17239"
}
```



---

archive/issue_comments_017851.json:
```json
{
    "body": "<a id='comment:10'></a>\nI added a `set_seed` function on a lot of the interfaces such as gap, gp, magma, maxima, R, and singular. This allows setting the seed for the corresponding random number generator.\n\nThis made solving the ticket very easy by just calling \"set_seed\" when the interface is started with `_start`.\n\nI think someone should rewrite the `randstate` class to use these methods if possible. However that would require someone with more cython knowledge.\n\nAlso `set_seed` still needs to be implemented on a few more interfaces, but those are not free so they are not as easy to test with.",
    "created_at": "2015-05-26T15:55:26Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17851",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:10'></a>
I added a `set_seed` function on a lot of the interfaces such as gap, gp, magma, maxima, R, and singular. This allows setting the seed for the corresponding random number generator.

This made solving the ticket very easy by just calling "set_seed" when the interface is started with `_start`.

I think someone should rewrite the `randstate` class to use these methods if possible. However that would require someone with more cython knowledge.

Also `set_seed` still needs to be implemented on a few more interfaces, but those are not free so they are not as easy to test with.



---

archive/issue_comments_017852.json:
```json
{
    "body": "<a id='comment:11'></a>\nMaybe this ticket should be repurposed then and another ticket created to realise the integration into the randgen() framework? It'd be a shame if this bitrots.",
    "created_at": "2015-05-27T09:23:43Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17852",
    "user": "https://github.com/malb"
}
```

<a id='comment:11'></a>
Maybe this ticket should be repurposed then and another ticket created to realise the integration into the randgen() framework? It'd be a shame if this bitrots.



---

archive/issue_comments_017853.json:
```json
{
    "body": "<a id='comment:12'></a>\nI think this ticket is fine because it's still a step in the right direction. In my mind the best framework would be for every interface to have a `set_seed` function like these. Then `randstate` would have methods that take in an instance of an interface and set it's seed using that method. Right now there is no control over multiple instances of interfaces, which it seems like there could/should be, and it might even simplify some of the `randstate` code.\n\nAlso `randstate` would still set seeds for non-interfaces such as libraries like `libc` and `python.random` (or wrap the random calls as it does). All of the `set_seed` methods I wrote default to `interface.rand_seed` on startup which uses `randstate`, so I think this fit the description of this ticket.\n\nI think the next ticket should be specifically about `randstate` and be dependent on this one. I am worried repurposing this ticket to do both might be a bit much. Or did you have something else in mind?",
    "created_at": "2015-05-27T14:31:08Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17853",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:12'></a>
I think this ticket is fine because it's still a step in the right direction. In my mind the best framework would be for every interface to have a `set_seed` function like these. Then `randstate` would have methods that take in an instance of an interface and set it's seed using that method. Right now there is no control over multiple instances of interfaces, which it seems like there could/should be, and it might even simplify some of the `randstate` code.

Also `randstate` would still set seeds for non-interfaces such as libraries like `libc` and `python.random` (or wrap the random calls as it does). All of the `set_seed` methods I wrote default to `interface.rand_seed` on startup which uses `randstate`, so I think this fit the description of this ticket.

I think the next ticket should be specifically about `randstate` and be dependent on this one. I am worried repurposing this ticket to do both might be a bit much. Or did you have something else in mind?



---

archive/issue_comments_017854.json:
```json
{
    "body": "<a id='comment:13'></a>\nI agree: let's deal with what you've done in this ticket (and change the description accordingly) and then open another follow up ticket which deals with the `randstate` business.",
    "created_at": "2015-05-28T10:23:20Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17854",
    "user": "https://github.com/malb"
}
```

<a id='comment:13'></a>
I agree: let's deal with what you've done in this ticket (and change the description accordingly) and then open another follow up ticket which deals with the `randstate` business.



---

archive/issue_comments_017855.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad\">8601eb9</a></td><td><code>reverted changes in randstate</code></td></tr></table>\n",
    "created_at": "2015-05-29T02:36:26Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad">8601eb9</a></td><td><code>reverted changes in randstate</code></td></tr></table>




---

archive/issue_comments_017856.json:
```json
{
    "body": "**Changing commit** from \"[3f8533ac115e5a446b2df92271eb6feb5b643efa](https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa)\" to \"[8601eb9749e1b9bf96af14ecf7347e4f67c143ad](https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad)\".",
    "created_at": "2015-05-29T02:36:26Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3f8533ac115e5a446b2df92271eb6feb5b643efa](https://github.com/sagemath/sagetrac-mirror/commit/3f8533ac115e5a446b2df92271eb6feb5b643efa)" to "[8601eb9749e1b9bf96af14ecf7347e4f67c143ad](https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad)".



---

archive/issue_comments_017857.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d\">6cbc95b</a></td><td><code>missed .pxd file</code></td></tr></table>\n",
    "created_at": "2015-05-29T02:41:03Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d">6cbc95b</a></td><td><code>missed .pxd file</code></td></tr></table>




---

archive/issue_comments_017858.json:
```json
{
    "body": "**Changing commit** from \"[8601eb9749e1b9bf96af14ecf7347e4f67c143ad](https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad)\" to \"[6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d](https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d)\".",
    "created_at": "2015-05-29T02:41:03Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8601eb9749e1b9bf96af14ecf7347e4f67c143ad](https://github.com/sagemath/sagetrac-mirror/commit/8601eb9749e1b9bf96af14ecf7347e4f67c143ad)" to "[6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d](https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d)".



---

archive/issue_comments_017859.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-If e.g. Magma is started from Sage then the seed parameter (`-S seed`) should be set using the randgen framework maybe.\n+The interfaces to gp, gap, r, scilab, magma, etc., should use the randgen framework to initialize/set the seed for their respective random number generators.\n+\n+The purpose of this ticket is to add a `set_seed` method to each interface which takes the appropriate input to modify the random number generator's seed value. It should also make the interfaces initialize their seed value with a random value generated from the randgen framework.\n``````\n",
    "created_at": "2015-05-29T02:51:59Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17859",
    "user": "https://github.com/tscholl2"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-If e.g. Magma is started from Sage then the seed parameter (`-S seed`) should be set using the randgen framework maybe.
+The interfaces to gp, gap, r, scilab, magma, etc., should use the randgen framework to initialize/set the seed for their respective random number generators.
+
+The purpose of this ticket is to add a `set_seed` method to each interface which takes the appropriate input to modify the random number generator's seed value. It should also make the interfaces initialize their seed value with a random value generated from the randgen framework.
``````




---

archive/issue_comments_017860.json:
```json
{
    "body": "<a id='comment:17'></a>\nI repurposed this ticket to match the new directions for the `randstate` class. This ticket is now focused on setting the seeds for the interfaces as the code I uploaded does for many of the interfaces.\n\nThere will be a new ticket to rewrite the `randstate` class to use these methods as well as allow for setting the seed on particular instances of interfaces. This may force a small change in the `randstate` api, but that is for the next ticket.",
    "created_at": "2015-05-29T02:54:58Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17860",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:17'></a>
I repurposed this ticket to match the new directions for the `randstate` class. This ticket is now focused on setting the seeds for the interfaces as the code I uploaded does for many of the interfaces.

There will be a new ticket to rewrite the `randstate` class to use these methods as well as allow for setting the seed on particular instances of interfaces. This may force a small change in the `randstate` api, but that is for the next ticket.



---

archive/issue_comments_017861.json:
```json
{
    "body": "**Reviewer:** Martin Albrecht",
    "created_at": "2015-06-12T17:28:09Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17861",
    "user": "https://github.com/malb"
}
```

**Reviewer:** Martin Albrecht



---

archive/issue_events_017240.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-12T17:28:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17240"
}
```



---

archive/issue_events_017241.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-12T17:28:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17241"
}
```



---

archive/issue_comments_017862.json:
```json
{
    "body": "<a id='comment:18'></a>\nIn /src/sage/interfaces/interface.py the new function\n\n```\n+    def get_seed(self):\n+        return self._seed\n```\n\nlacks documentation and a doctest. The next two functions lack doctests (I know it's silly)\n\nOther than that, it looks good to me.",
    "created_at": "2015-06-12T17:28:09Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17862",
    "user": "https://github.com/malb"
}
```

<a id='comment:18'></a>
In /src/sage/interfaces/interface.py the new function

```
+    def get_seed(self):
+        return self._seed
```

lacks documentation and a doctest. The next two functions lack doctests (I know it's silly)

Other than that, it looks good to me.



---

archive/issue_comments_017863.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355\">a0cacaa</a></td><td><code>added/fixed doc tests</code></td></tr></table>\n",
    "created_at": "2015-06-12T20:12:50Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355">a0cacaa</a></td><td><code>added/fixed doc tests</code></td></tr></table>




---

archive/issue_comments_017864.json:
```json
{
    "body": "**Changing commit** from \"[6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d](https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d)\" to \"[a0cacaa381ee71a0aef0e64ca711ce8e178c2355](https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355)\".",
    "created_at": "2015-06-12T20:12:50Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d](https://github.com/sagemath/sagetrac-mirror/commit/6cbc95b7a2bf9bae8efafdf8ded0fd3577a6425d)" to "[a0cacaa381ee71a0aef0e64ca711ce8e178c2355](https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355)".



---

archive/issue_comments_017865.json:
```json
{
    "body": "<a id='comment:20'></a>\nWoops, examples are always helpful!\n\nI added documentation and doctests to the functions in interfaces. I copied them out of octave's file, hopefully that works.",
    "created_at": "2015-06-12T20:17:22Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17865",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:20'></a>
Woops, examples are always helpful!

I added documentation and doctests to the functions in interfaces. I copied them out of octave's file, hopefully that works.



---

archive/issue_events_017242.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-12T20:17:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17242"
}
```



---

archive/issue_events_017243.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-12T20:17:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17243"
}
```



---

archive/issue_events_017244.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-13T09:55:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17244"
}
```



---

archive/issue_events_017245.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-13T09:55:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17245"
}
```



---

archive/issue_comments_017866.json:
```json
{
    "body": "<a id='comment:21'></a>\nWhy does your patch drop `set_seed` for Gap? \n\nI'd also say, if possible, then it shouldn't be tested with the Octave example: Octave is optional, e.g. Singular is not. Secondly, the closer to the actual code, the better. So if we can instantiate an `Interface` object directly that'd be best.",
    "created_at": "2015-06-13T09:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17866",
    "user": "https://github.com/malb"
}
```

<a id='comment:21'></a>
Why does your patch drop `set_seed` for Gap? 

I'd also say, if possible, then it shouldn't be tested with the Octave example: Octave is optional, e.g. Singular is not. Secondly, the closer to the actual code, the better. So if we can instantiate an `Interface` object directly that'd be best.



---

archive/issue_comments_017867.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585\">1324d41</a></td><td><code>tests use Singular/Interface directly</code></td></tr></table>\n",
    "created_at": "2015-06-13T14:23:42Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585">1324d41</a></td><td><code>tests use Singular/Interface directly</code></td></tr></table>




---

archive/issue_comments_017868.json:
```json
{
    "body": "**Changing commit** from \"[a0cacaa381ee71a0aef0e64ca711ce8e178c2355](https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355)\" to \"[1324d4105c9c5adbc9888bad703ec2c74cb88585](https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585)\".",
    "created_at": "2015-06-13T14:23:42Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a0cacaa381ee71a0aef0e64ca711ce8e178c2355](https://github.com/sagemath/sagetrac-mirror/commit/a0cacaa381ee71a0aef0e64ca711ce8e178c2355)" to "[1324d4105c9c5adbc9888bad703ec2c74cb88585](https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585)".



---

archive/issue_comments_017869.json:
```json
{
    "body": "**Changing commit** from \"[1324d4105c9c5adbc9888bad703ec2c74cb88585](https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585)\" to \"[033118ec0631a49be43a589aa5ce18a95769744d](https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d)\".",
    "created_at": "2015-06-13T14:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1324d4105c9c5adbc9888bad703ec2c74cb88585](https://github.com/sagemath/sagetrac-mirror/commit/1324d4105c9c5adbc9888bad703ec2c74cb88585)" to "[033118ec0631a49be43a589aa5ce18a95769744d](https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d)".



---

archive/issue_comments_017870.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d\">033118e</a></td><td><code>changed get_seed example to use Singular</code></td></tr></table>\n",
    "created_at": "2015-06-13T14:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d">033118e</a></td><td><code>changed get_seed example to use Singular</code></td></tr></table>




---

archive/issue_comments_017871.json:
```json
{
    "body": "<a id='comment:24'></a>\nThere was actually two `set_seed` for Gap. The file was long and I accidentally copied another to a slightly different place. You can still see the actual `set_seed` function under the total diff.\n\nThese new pushes change the doc tests in `interface.py` to use Singular (so less optional packages) and also use an instance of `Interface` directly. This is ok for `rand_seed` and `get_seed` but not for `set_seed` as that has to be implemented by the specific interface. Do you think we need a doc test which raises the `NotImplementedError`?",
    "created_at": "2015-06-13T14:32:40Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17871",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:24'></a>
There was actually two `set_seed` for Gap. The file was long and I accidentally copied another to a slightly different place. You can still see the actual `set_seed` function under the total diff.

These new pushes change the doc tests in `interface.py` to use Singular (so less optional packages) and also use an instance of `Interface` directly. This is ok for `rand_seed` and `get_seed` but not for `set_seed` as that has to be implemented by the specific interface. Do you think we need a doc test which raises the `NotImplementedError`?



---

archive/issue_events_017246.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-15T07:31:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17246"
}
```



---

archive/issue_events_017247.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-15T07:31:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17247"
}
```



---

archive/issue_comments_017872.json:
```json
{
    "body": "<a id='comment:25'></a>\nLooks good to me. \n\nI guess technically we should actually doctest a `NotImplementedError` but I'll leave it up to you.",
    "created_at": "2015-06-15T07:31:37Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17872",
    "user": "https://github.com/malb"
}
```

<a id='comment:25'></a>
Looks good to me. 

I guess technically we should actually doctest a `NotImplementedError` but I'll leave it up to you.



---

archive/issue_comments_017873.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09\">773a1f3</a></td><td><code>doc test for interface.set_seed</code></td></tr></table>\n",
    "created_at": "2015-06-15T15:07:03Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09">773a1f3</a></td><td><code>doc test for interface.set_seed</code></td></tr></table>




---

archive/issue_events_017248.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2015-06-15T15:07:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17248"
}
```



---

archive/issue_events_017249.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2015-06-15T15:07:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17249"
}
```



---

archive/issue_comments_017874.json:
```json
{
    "body": "**Changing commit** from \"[033118ec0631a49be43a589aa5ce18a95769744d](https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d)\" to \"[773a1f300096fb5c40cf4375f805375edd5cbf09](https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09)\".",
    "created_at": "2015-06-15T15:07:03Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[033118ec0631a49be43a589aa5ce18a95769744d](https://github.com/sagemath/sagetrac-mirror/commit/033118ec0631a49be43a589aa5ce18a95769744d)" to "[773a1f300096fb5c40cf4375f805375edd5cbf09](https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09)".



---

archive/issue_comments_017875.json:
```json
{
    "body": "<a id='comment:27'></a>\nI added a doc test for the `set_seed` method for the general interface. It was easy to add.",
    "created_at": "2015-06-15T15:08:15Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17875",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:27'></a>
I added a doc test for the `set_seed` method for the general interface. It was easy to add.



---

archive/issue_events_017250.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-15T16:36:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17250"
}
```



---

archive/issue_events_017251.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-15T16:36:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17251"
}
```



---

archive/issue_comments_017876.json:
```json
{
    "body": "<a id='comment:28'></a>\nLooks good to me.",
    "created_at": "2015-06-15T16:36:09Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17876",
    "user": "https://github.com/malb"
}
```

<a id='comment:28'></a>
Looks good to me.



---

archive/issue_comments_017877.json:
```json
{
    "body": "<a id='comment:29'></a>\n\n```\nsage -t --long src/sage/interfaces/magma.py  # 2 doctests failed\nsage -t --long src/sage/interfaces/octave.py  # 2 doctests failed\nsage -t --long src/sage/interfaces/scilab.py  # 2 doctests failed\nsage -t --long src/sage/repl/interpreter.py  # 1 doctest failed\n```",
    "created_at": "2015-06-15T20:23:53Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17877",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>

```
sage -t --long src/sage/interfaces/magma.py  # 2 doctests failed
sage -t --long src/sage/interfaces/octave.py  # 2 doctests failed
sage -t --long src/sage/interfaces/scilab.py  # 2 doctests failed
sage -t --long src/sage/repl/interpreter.py  # 1 doctest failed
```



---

archive/issue_events_017252.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-15T20:23:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17252"
}
```



---

archive/issue_events_017253.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-15T20:23:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17253"
}
```



---

archive/issue_comments_017878.json:
```json
{
    "body": "<a id='comment:30'></a>\nI get the first 3 errors if I run `sage -t --long src/sage/interfaces/magma.py` but not if I run `./sage -t --long src/sage/interfaces/magma.py`. Shouldn't I only be checking if it runs with the version of Sage on the branch and not the user's systems' version?\n\nThe last error seems to be something I didn't notice. Apparently some of the interfaces keep a counter of the commands used and label things with it. The `set_seed` function for some interfaces raises this counter because it needs to call a command in the interface. So running the test in `src/sage/repl/interpreter.py` the counter is off from what it used to be.\n\nThis error doesn't occur if I comment out line 626 in `src/sage/interfaces/maxima.py`:\n\n```\n625 # set random seed\n626 self.set_seed(self._seed)\n```\n\nI'm not sure what to do about this. It seems like there is a few options:\n\n* We could reset the counter after the `set_seed` function is called (I actually don't know if this is possible yet).\n* We could change all the doc tests in functions which use this counter and increment it manually.\n* We could not run `set_seed` on start and leave it up to the user to run it.\n\nMartin, do you have any suggestions on which way to proceed?",
    "created_at": "2015-06-17T02:54:58Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17878",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:30'></a>
I get the first 3 errors if I run `sage -t --long src/sage/interfaces/magma.py` but not if I run `./sage -t --long src/sage/interfaces/magma.py`. Shouldn't I only be checking if it runs with the version of Sage on the branch and not the user's systems' version?

The last error seems to be something I didn't notice. Apparently some of the interfaces keep a counter of the commands used and label things with it. The `set_seed` function for some interfaces raises this counter because it needs to call a command in the interface. So running the test in `src/sage/repl/interpreter.py` the counter is off from what it used to be.

This error doesn't occur if I comment out line 626 in `src/sage/interfaces/maxima.py`:

```
625 # set random seed
626 self.set_seed(self._seed)
```

I'm not sure what to do about this. It seems like there is a few options:

* We could reset the counter after the `set_seed` function is called (I actually don't know if this is possible yet).
* We could change all the doc tests in functions which use this counter and increment it manually.
* We could not run `set_seed` on start and leave it up to the user to run it.

Martin, do you have any suggestions on which way to proceed?



---

archive/issue_comments_017879.json:
```json
{
    "body": "<a id='comment:31'></a>\nAh, crap my comments from yesterday seem not to have arrived:\n\n- You are not seeing these errors because you have octave et al. installed in your local development environment. In other words: some doctests are not marked optional but you should be marked optional. \n\n- I'd just update the doctest, `set_seed()` is a proper call, so no point in resetting the counter.",
    "created_at": "2015-06-18T14:39:44Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17879",
    "user": "https://github.com/malb"
}
```

<a id='comment:31'></a>
Ah, crap my comments from yesterday seem not to have arrived:

- You are not seeing these errors because you have octave et al. installed in your local development environment. In other words: some doctests are not marked optional but you should be marked optional. 

- I'd just update the doctest, `set_seed()` is a proper call, so no point in resetting the counter.



---

archive/issue_comments_017880.json:
```json
{
    "body": "**Changing commit** from \"[773a1f300096fb5c40cf4375f805375edd5cbf09](https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09)\" to \"[df73e176ae9cde0e06e7e6074192977f07ae1e54](https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54)\".",
    "created_at": "2015-06-18T16:10:13Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[773a1f300096fb5c40cf4375f805375edd5cbf09](https://github.com/sagemath/sagetrac-mirror/commit/773a1f300096fb5c40cf4375f805375edd5cbf09)" to "[df73e176ae9cde0e06e7e6074192977f07ae1e54](https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54)".



---

archive/issue_comments_017881.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54\">df73e17</a></td><td><code>added # optional to set_seed doc tests</code></td></tr></table>\n",
    "created_at": "2015-06-18T16:10:13Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54">df73e17</a></td><td><code>added # optional to set_seed doc tests</code></td></tr></table>




---

archive/issue_comments_017882.json:
```json
{
    "body": "<a id='comment:33'></a>\nI added `# optional -` tags to the corresponding doc tests. I think I got all of them, but someone should check. Strangely enough, this also fixed the other test `sage -t --long src/sage/repl/interpreter.py`. Which may mean that either it wasn't actually counting the calls to the interpreter, or something else happened with the optional flags which affected it.",
    "created_at": "2015-06-18T18:32:32Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17882",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:33'></a>
I added `# optional -` tags to the corresponding doc tests. I think I got all of them, but someone should check. Strangely enough, this also fixed the other test `sage -t --long src/sage/repl/interpreter.py`. Which may mean that either it wasn't actually counting the calls to the interpreter, or something else happened with the optional flags which affected it.



---

archive/issue_events_017254.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-18T18:32:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17254"
}
```



---

archive/issue_events_017255.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-18T18:32:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17255"
}
```



---

archive/issue_comments_017883.json:
```json
{
    "body": "<a id='comment:34'></a>\nI still get \n\n```\nsage -t --warn-long 33.6 src/sage/repl/interpreter.py  # 1 doctest failed\n**********************************************************************\nFile \"src/sage/repl/interpreter.py\", line 561, in sage.repl.interpreter.InterfaceShellTransformer.preparse_imports_from_sage\nFailed example:\n    ift.preparse_imports_from_sage('2 + maxima(a)')\nExpected:\n    '2 +  sage1 '\nGot:\n    '2 +  sage4 '\n```\n\nbut the other three are gone.",
    "created_at": "2015-06-19T08:10:46Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17883",
    "user": "https://github.com/malb"
}
```

<a id='comment:34'></a>
I still get 

```
sage -t --warn-long 33.6 src/sage/repl/interpreter.py  # 1 doctest failed
**********************************************************************
File "src/sage/repl/interpreter.py", line 561, in sage.repl.interpreter.InterfaceShellTransformer.preparse_imports_from_sage
Failed example:
    ift.preparse_imports_from_sage('2 + maxima(a)')
Expected:
    '2 +  sage1 '
Got:
    '2 +  sage4 '
```

but the other three are gone.



---

archive/issue_events_017256.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-19T08:10:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17256"
}
```



---

archive/issue_events_017257.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-19T08:10:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17257"
}
```



---

archive/issue_comments_017884.json:
```json
{
    "body": "**Changing commit** from \"[df73e176ae9cde0e06e7e6074192977f07ae1e54](https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54)\" to \"[38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)\".",
    "created_at": "2015-06-21T17:47:36Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[df73e176ae9cde0e06e7e6074192977f07ae1e54](https://github.com/sagemath/sagetrac-mirror/commit/df73e176ae9cde0e06e7e6074192977f07ae1e54)" to "[38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)".



---

archive/issue_comments_017885.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38\">38256ae</a></td><td><code>changed doc test because set_seed call</code></td></tr></table>\n",
    "created_at": "2015-06-21T17:47:36Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17885",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38">38256ae</a></td><td><code>changed doc test because set_seed call</code></td></tr></table>




---

archive/issue_comments_017886.json:
```json
{
    "body": "<a id='comment:36'></a>\nI removed some white space and changed a doctest in `src/sage/repl/interpreter.py`.\n\nThe doc test was failing because `maxima` now calls `set_seed` on startup which uses several calls to the maxima interpreter. Therefore instead of getting back `2 +  sage1`, it should get back `2 + sage4`.",
    "created_at": "2015-06-21T17:54:16Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17886",
    "user": "https://github.com/tscholl2"
}
```

<a id='comment:36'></a>
I removed some white space and changed a doctest in `src/sage/repl/interpreter.py`.

The doc test was failing because `maxima` now calls `set_seed` on startup which uses several calls to the maxima interpreter. Therefore instead of getting back `2 +  sage1`, it should get back `2 + sage4`.



---

archive/issue_events_017258.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-21T17:54:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17258"
}
```



---

archive/issue_events_017259.json:
```json
{
    "actor": "https://github.com/tscholl2",
    "created_at": "2015-06-21T17:54:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17259"
}
```



---

archive/issue_comments_017887.json:
```json
{
    "body": "<a id='comment:37'></a>\ntests pass here & looks good.",
    "created_at": "2015-06-22T13:09:34Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17887",
    "user": "https://github.com/malb"
}
```

<a id='comment:37'></a>
tests pass here & looks good.



---

archive/issue_events_017260.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-22T13:09:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17260"
}
```



---

archive/issue_events_017261.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2015-06-22T13:09:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17261"
}
```



---

archive/issue_events_017262.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-22T22:25:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17262"
}
```



---

archive/issue_events_017263.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-22T22:25:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3231#event-17263"
}
```



---

archive/issue_comments_017888.json:
```json
{
    "body": "**Changing branch** from \"[u/tscholl2/seeds_3231](https://github.com/sagemath/sagetrac-mirror/tree/u/tscholl2/seeds_3231)\" to \"[38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)\".",
    "created_at": "2015-06-22T22:25:10Z",
    "issue": "https://github.com/sagemath/sage/issues/3231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3231#issuecomment-17888",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/tscholl2/seeds_3231](https://github.com/sagemath/sagetrac-mirror/tree/u/tscholl2/seeds_3231)" to "[38256aea80c972caecb14cfcd22fae0fe0adbe38](https://github.com/sagemath/sagetrac-mirror/commit/38256aea80c972caecb14cfcd22fae0fe0adbe38)".
