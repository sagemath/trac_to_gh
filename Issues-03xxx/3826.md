# Issue 3826: Empty string in interact prints \x00

archive/issues_003826.json:
```json
{
    "body": "In the notebook of sage 3.0.6: \n\nWrite\n\n```\n@interact\ndef f(a=input_box(default='aaa',type=str,label='Your name :')):\n    print a\n    print [1,2,3,a]\n```\n\nThen, delete 'aaa' from the box. Press enter and the list prints like this :\n\n```\n[1, 2, 3, '\\x00']\n```\n\nwhile should be :\n\n```\n[1, 2, 3, '']\n```\n\n\n**Assignee:** @itolkov\n\n**CC:**  @saliola\n\n**Keywords:** interact empty string\n\nIssue created by migration from https://trac.sagemath.org/ticket/3826\n\n",
    "closed_at": "2008-08-27T01:15:47Z",
    "created_at": "2008-08-12T23:23:21Z",
    "labels": [
        "component: interact",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "Empty string in interact prints \\x00",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3826",
    "user": "https://github.com/seblabbe"
}
```
In the notebook of sage 3.0.6: 

Write

```
@interact
def f(a=input_box(default='aaa',type=str,label='Your name :')):
    print a
    print [1,2,3,a]
```

Then, delete 'aaa' from the box. Press enter and the list prints like this :

```
[1, 2, 3, '\x00']
```

while should be :

```
[1, 2, 3, '']
```


**Assignee:** @itolkov

**CC:**  @saliola

**Keywords:** interact empty string

Issue created by migration from https://trac.sagemath.org/ticket/3826





---

archive/issue_comments_022484.json:
```json
{
    "body": "**Changing assignee** from boothby to @itolkov.",
    "created_at": "2008-08-13T00:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22484",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Changing assignee** from boothby to @itolkov.



---

archive/issue_events_022164.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-13T00:01:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "component: notebook",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22164"
}
```



---

archive/issue_events_022165.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-13T00:01:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "component: interact",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22165"
}
```



---

archive/issue_comments_022485.json:
```json
{
    "body": "<a id='comment:1'></a>\nReassigning the component to \"interact\" since I just created it.\n\nCheers,\n\nMichael",
    "created_at": "2008-08-13T00:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22485",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
Reassigning the component to "interact" since I just created it.

Cheers,

Michael



---

archive/attachments_003954.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3826/sage.patch",
    "created_at": "2008-08-13T21:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/itolkov"
}
```



---

archive/issue_comments_022486.json:
```json
{
    "body": "<a id='comment:2'></a>\n\n```\njavascript: encode64(\"\")\n```\nAA==\n\n```\nsage.server.notebook.interact.standard_b64decode(\"AA==\")\n```\n'\\x00'\n\nMy patch adds a check in the interact() function. However, encode64() and decode64() seem to be buggy. In particular, they are not inverses. For example,\n\n```\njavascript: encode64(decode64(\"\"))\n```\nAAAA",
    "created_at": "2008-08-13T21:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22486",
    "user": "https://github.com/itolkov"
}
```

<a id='comment:2'></a>

```
javascript: encode64("")
```
AA==

```
sage.server.notebook.interact.standard_b64decode("AA==")
```
'\x00'

My patch adds a check in the interact() function. However, encode64() and decode64() seem to be buggy. In particular, they are not inverses. For example,

```
javascript: encode64(decode64(""))
```
AAAA



---

archive/issue_events_022166.json:
```json
{
    "actor": "https://github.com/itolkov",
    "created_at": "2008-08-13T21:19:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22166"
}
```



---

archive/attachments_003955.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac3826-javascript-base64.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3826/trac3826-javascript-base64.patch",
    "created_at": "2008-08-23T18:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```



---

archive/issue_comments_022487.json:
```json
{
    "body": "",
    "created_at": "2008-08-23T18:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22487",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```





---

archive/issue_comments_022488.json:
```json
{
    "body": "<a id='comment:3'></a>\nRather than working around the bug, it seems better to just fix the bug.  My patch changes encode64 and decode64 to match the Python behavior (which I believe to be the correct behavior), where the empty string encodes/decodes to the empty string.",
    "created_at": "2008-08-23T18:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22488",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

<a id='comment:3'></a>
Rather than working around the bug, it seems better to just fix the bug.  My patch changes encode64 and decode64 to match the Python behavior (which I believe to be the correct behavior), where the empty string encodes/decodes to the empty string.



---

archive/issue_comments_022489.json:
```json
{
    "body": "<a id='comment:4'></a>\nSeems to be working in the example above, as well as in my example.\n\n+1",
    "created_at": "2008-08-27T01:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22489",
    "user": "https://github.com/itolkov"
}
```

<a id='comment:4'></a>
Seems to be working in the example above, as well as in my example.

+1



---

archive/issue_events_022167.json:
```json
{
    "actor": "https://github.com/itolkov",
    "created_at": "2008-08-27T01:09:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22167"
}
```



---

archive/issue_events_022168.json:
```json
{
    "actor": "https://github.com/itolkov",
    "created_at": "2008-08-27T01:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22168"
}
```



---

archive/issue_comments_022490.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged in Sage 3.1.2.alpha1",
    "created_at": "2008-08-27T01:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22490",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>
Merged in Sage 3.1.2.alpha1



---

archive/issue_events_022169.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-27T01:15:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22169"
}
```



---

archive/issue_events_022170.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-27T01:15:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3826#event-22170"
}
```



---

archive/issue_comments_022491.json:
```json
{
    "body": "<a id='comment:6'></a>\nPS: I merged *only* Carl's patch, i.e. trac3826-javascript-base64.patch",
    "created_at": "2008-08-27T01:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3826",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3826#issuecomment-22491",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
PS: I merged *only* Carl's patch, i.e. trac3826-javascript-base64.patch
