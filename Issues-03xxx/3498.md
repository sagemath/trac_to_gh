# Issue 3498: make numpy the backend for matrices over CDF and RDF

archive/issues_003498.json:
```json
{
    "assignees": [],
    "body": "\n```\n[20:17] <wstein-3053> numpy is usually better.\n[20:18] <jason--> okay; do you mind if we switch the determinant function to numpy for matrices over CDF?\n[20:18] <wstein-3053> jason-- please do.\n[20:19] <jason--> okay; ticket coming right up.\n```\n\n\nAssignee: **@williamstein**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3498_\n\n",
    "closed_at": "2008-11-09T18:20:27Z",
    "created_at": "2008-06-23T22:51:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make numpy the backend for matrices over CDF and RDF",
    "type": "issue",
    "updated_at": "2008-11-09T18:20:27Z",
    "url": "https://github.com/sagemath/sage/issues/3498",
    "user": "https://github.com/jasongrout"
}
```

```
[20:17] <wstein-3053> numpy is usually better.
[20:18] <jason--> okay; do you mind if we switch the determinant function to numpy for matrices over CDF?
[20:18] <wstein-3053> jason-- please do.
[20:19] <jason--> okay; ticket coming right up.
```


Assignee: **@williamstein**

_Issue created by migration from https://trac.sagemath.org/ticket/3498_





---

archive/issue_events_033158.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-06-23T22:51:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "milestone_number": null,
    "milestone_title": "sage-3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33158"
}
```



---

archive/issue_events_033159.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-06-23T22:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33159"
}
```



---

archive/issue_events_033160.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-06-23T22:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33160"
}
```



---

archive/issue_events_033161.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-06-23T22:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33161"
}
```



---

archive/issue_comments_019819.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nnumpy.2.patch is an update.  RDF matrices seem to work all right, except for 4 doctest failures: a loads(dumps()) doctest and three other doctests that should be changed.  Apparently the SVD format returned is different than the GSL format, and numpy correctly recognizes a singular matrix and throws an error whereas GSL went ahead and tried to compute an inverse.",
    "created_at": "2008-09-24T06:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19819",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'>Comment 1:</a>
numpy.2.patch is an update.  RDF matrices seem to work all right, except for 4 doctest failures: a loads(dumps()) doctest and three other doctests that should be changed.  Apparently the SVD format returned is different than the GSL format, and numpy correctly recognizes a singular matrix and throws an error whereas GSL went ahead and tried to compute an inverse.



---

archive/issue_comments_019820.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAttachment: **[numpy-RDF-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-RDF-CDF.patch.gz)**\n\nThe numpy-RDF-CDF.patch replaces all previous patches.\n\nBasically, I factored out stuff that was common between RDF and CDF matrices (which turned out to be almost everything except the very initial part), stripped out GSL stuff, and wrote a few more doctests.\n\nOops, I just realized that I didn't delete a few pieces of cruft still hanging around from the GSL implementation.  I'll post a follow-up patch shortly.",
    "created_at": "2008-09-26T01:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19820",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'>Comment 2:</a>
Attachment: **[numpy-RDF-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-RDF-CDF.patch.gz)**

The numpy-RDF-CDF.patch replaces all previous patches.

Basically, I factored out stuff that was common between RDF and CDF matrices (which turned out to be almost everything except the very initial part), stripped out GSL stuff, and wrote a few more doctests.

Oops, I just realized that I didn't delete a few pieces of cruft still hanging around from the GSL implementation.  I'll post a follow-up patch shortly.



---

archive/issue_events_033162.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-09-26T01:20:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33162"
}
```



---

archive/issue_comments_019821.json:
```json
{
    "body": "apply on top of previous patch",
    "created_at": "2008-09-26T01:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19821",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patch



---

archive/issue_comments_019822.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nAttachment: **[numpy-2.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-2.patch.gz)**\n\nThese patches are for 3.1.3alpha1.  With these patches, sage -t *.py and sage -t *.pyx both pass in the matrix/ directory.",
    "created_at": "2008-09-26T01:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19822",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'>Comment 3:</a>
Attachment: **[numpy-2.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-2.patch.gz)**

These patches are for 3.1.3alpha1.  With these patches, sage -t *.py and sage -t *.pyx both pass in the matrix/ directory.



---

archive/issue_comments_019823.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nHi Jason, \n\nany particular reason you delete the solve extension in setup.py, i.e.\n\n```\n604\t606\t#     matrix_padic_capped_relative_dense, \n605\t \t     solve, \n606\t607\t\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-09-26T01:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19823",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:4'>Comment 4:</a>
Hi Jason, 

any particular reason you delete the solve extension in setup.py, i.e.

```
604	606	#     matrix_padic_capped_relative_dense, 
605	 	     solve, 
606	607	
```

Cheers,

Michael



---

archive/issue_comments_019824.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nJason,\n\njust to make 100% sure: does this patch depend on any other patch?\n\nCheers,\n\nMichael",
    "created_at": "2008-09-26T01:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19824",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'>Comment 5:</a>
Jason,

just to make 100% sure: does this patch depend on any other patch?

Cheers,

Michael



---

archive/issue_comments_019825.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nMabshoff: these patches do not depend on anything but a pristine 3.1.3alpha1\n\nI deleted the solve module because it seemed like it was purely a helper module for RDF/CDF matrices.  That was the only place I could a reference to it in the sage codebase.  The functionality should be present in the RDF/CDF matrix codebase; numpy has a function which does all that that module does in just a line or two.  At least, that's how I understood it when I looked at it.",
    "created_at": "2008-09-26T01:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19825",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'>Comment 6:</a>
Mabshoff: these patches do not depend on anything but a pristine 3.1.3alpha1

I deleted the solve module because it seemed like it was purely a helper module for RDF/CDF matrices.  That was the only place I could a reference to it in the sage codebase.  The functionality should be present in the RDF/CDF matrix codebase; numpy has a function which does all that that module does in just a line or two.  At least, that's how I understood it when I looked at it.



---

archive/issue_comments_019826.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nSome timings.  First, a bunch of commands in 3.1.3alpha1 without the patches, then with the patches.\n\nThe matrix below is from `m=random_matrix(RDF,30,min=-2<sup>32,max=2</sup>32)`.  I then copied the same matrix to the other session, so the timings below are for the exact same matrix.\n\nbefore patches:\n\n```\nsage: timeit('Matrix(RDF, [[1,2],[3,4]])')\n625 loops, best of 3: 152 \u00b5s per loop\nsage: timeit('Matrix(CDF, [[1,2],[3,4]])')\n625 loops, best of 3: 207 \u00b5s per loop\nsage: m\n30 x 30 dense matrix over Real Double Field\nsage: timeit('m+m')\n625 loops, best of 3: 32.1 \u00b5s per loop\nsage: timeit('m*m')\n625 loops, best of 3: 57.2 \u00b5s per loop\nsage: timeit('~m')\n625 loops, best of 3: 194 \u00b5s per loop\nsage: timeit('m.det()')\n625 loops, best of 3: 2.58 \u00b5s per loop\nsage: timeit('m.transpose()')\n625 loops, best of 3: 30.9 \u00b5s per loop\nsage: timeit('m.LU()')\n625 loops, best of 3: 368 \u00b5s per loop\nsage: timeit('m.eigenspaces()')\n5 loops, best of 3: 43.3 ms per loop\nsage: timeit('m.SVD()')\n625 loops, best of 3: 1.39 ms per loop\nsage: timeit('m.QR()')\n625 loops, best of 3: 197 \u00b5s per loop\nsage: timeit('m.QR()')\n625 loops, best of 3: 196 \u00b5s per loop\nsage: b=vector(RDF,range(30))\nsage: timeit('m.solve_left(b)')\n625 loops, best of 3: 270 \u00b5s per loop\nsage: timeit('m.solve_left_LU(b)')\n625 loops, best of 3: 238 \u00b5s per loop\nsage: \n```\n\n\nafter patches:\n\n```\nsage:  timeit('Matrix(RDF, [[1,2],[3,4]])')\n625 loops, best of 3: 159 \u00b5s per loop\nsage: timeit('Matrix(CDF, [[1,2],[3,4]])')\n625 loops, best of 3: 176 \u00b5s per loop\nsage: m\n30 x 30 dense matrix over Real Double Field\nsage: timeit('m+m')\n625 loops, best of 3: 42.8 \u00b5s per loop\nsage: timeit('m*m')\n625 loops, best of 3: 67.2 \u00b5s per loop\nsage: timeit('~m')\n625 loops, best of 3: 452 \u00b5s per loop\nsage: timeit('m.det()')\n625 loops, best of 3: 200 \u00b5s per loop\nsage: timeit('m.transpose()')\n625 loops, best of 3: 34 \u00b5s per loop\nsage: timeit('m.LU()')\n625 loops, best of 3: 112 \u00b5s per loop\nsage: timeit('m.eigenspaces()')\n5 loops, best of 3: 50.4 ms per loop\nsage: timeit('m.SVD()')\n125 loops, best of 3: 3.52 ms per loop\nsage: timeit('m.QR()')\n625 loops, best of 3: 831 \u00b5s per loop\nsage: b=vector(RDF,range(30))\nsage: timeit('m.solve_left(b)')\n625 loops, best of 3: 256 \u00b5s per loop\n```",
    "created_at": "2008-09-26T02:44:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19826",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'>Comment 7:</a>
Some timings.  First, a bunch of commands in 3.1.3alpha1 without the patches, then with the patches.

The matrix below is from `m=random_matrix(RDF,30,min=-2<sup>32,max=2</sup>32)`.  I then copied the same matrix to the other session, so the timings below are for the exact same matrix.

before patches:

```
sage: timeit('Matrix(RDF, [[1,2],[3,4]])')
625 loops, best of 3: 152 µs per loop
sage: timeit('Matrix(CDF, [[1,2],[3,4]])')
625 loops, best of 3: 207 µs per loop
sage: m
30 x 30 dense matrix over Real Double Field
sage: timeit('m+m')
625 loops, best of 3: 32.1 µs per loop
sage: timeit('m*m')
625 loops, best of 3: 57.2 µs per loop
sage: timeit('~m')
625 loops, best of 3: 194 µs per loop
sage: timeit('m.det()')
625 loops, best of 3: 2.58 µs per loop
sage: timeit('m.transpose()')
625 loops, best of 3: 30.9 µs per loop
sage: timeit('m.LU()')
625 loops, best of 3: 368 µs per loop
sage: timeit('m.eigenspaces()')
5 loops, best of 3: 43.3 ms per loop
sage: timeit('m.SVD()')
625 loops, best of 3: 1.39 ms per loop
sage: timeit('m.QR()')
625 loops, best of 3: 197 µs per loop
sage: timeit('m.QR()')
625 loops, best of 3: 196 µs per loop
sage: b=vector(RDF,range(30))
sage: timeit('m.solve_left(b)')
625 loops, best of 3: 270 µs per loop
sage: timeit('m.solve_left_LU(b)')
625 loops, best of 3: 238 µs per loop
sage: 
```


after patches:

```
sage:  timeit('Matrix(RDF, [[1,2],[3,4]])')
625 loops, best of 3: 159 µs per loop
sage: timeit('Matrix(CDF, [[1,2],[3,4]])')
625 loops, best of 3: 176 µs per loop
sage: m
30 x 30 dense matrix over Real Double Field
sage: timeit('m+m')
625 loops, best of 3: 42.8 µs per loop
sage: timeit('m*m')
625 loops, best of 3: 67.2 µs per loop
sage: timeit('~m')
625 loops, best of 3: 452 µs per loop
sage: timeit('m.det()')
625 loops, best of 3: 200 µs per loop
sage: timeit('m.transpose()')
625 loops, best of 3: 34 µs per loop
sage: timeit('m.LU()')
625 loops, best of 3: 112 µs per loop
sage: timeit('m.eigenspaces()')
5 loops, best of 3: 50.4 ms per loop
sage: timeit('m.SVD()')
125 loops, best of 3: 3.52 ms per loop
sage: timeit('m.QR()')
625 loops, best of 3: 831 µs per loop
sage: b=vector(RDF,range(30))
sage: timeit('m.solve_left(b)')
625 loops, best of 3: 256 µs per loop
```



---

archive/issue_comments_019827.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nJason, \n\nsince caching seems to affect the above numbers: can you turn off GSL caching and redo the numbers? Then open a ticket to add caching for the new numpy classes? As is there are some significant slowdowns.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-26T03:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19827",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:8'>Comment 8:</a>
Jason, 

since caching seems to affect the above numbers: can you turn off GSL caching and redo the numbers? Then open a ticket to add caching for the new numpy classes? As is there are some significant slowdowns.

Cheers,

Michael



---

archive/issue_comments_019828.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nSome more timings from respectably-sized matrices show that numpy is indeed way faster most of the time and neck-and-neck the rest of the time.  The GSL determinant speed below is most likely from from caching the LU decomposition that had been computed for something before and using that to compute the determinant.\n\nBefore patch\n\n```\nsage: # Before patches: GSL\nsage: m=random_matrix(RDF,500,min=-2^32,max=2^32)\nsage: timeit('m+m')\n125 loops, best of 3: 7.2 ms per loop\nsage: timeit('m*m')\n5 loops, best of 3: 90.6 ms per loop\nsage: timeit('~m')\n5 loops, best of 3: 639 ms per loop\nsage: timeit('m.det()')\n625 loops, best of 3: 19.1 \u00b5s per loop\nsage: timeit('m.transpose()')\n125 loops, best of 3: 5.76 ms per loop\nsage: timeit('m.LU()')\n5 loops, best of 3: 97.6 ms per loop\nsage: %time m.SVD()\nCPU times: user 8.26 s, sys: 0.09 s, total: 8.35 s\nWall time: 9.16 s\n\n(500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field)\nsage: %time m.QR()\nCPU times: user 2.37 s, sys: 0.05 s, total: 2.42 s\nWall time: 2.68 s\n\n(500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field)\nsage: b=vector(RDF,range(500))\nsage: timeit('m.solve_left(b)')\n5 loops, best of 3: 72 ms per loop\nsage: %time a=m.eigenspaces()\nCPU times: user 26.61 s, sys: 0.42 s, total: 27.03 s\nWall time: 30.09 s\n```\n\nAfter patches\n\n```\nsage: # After patches: numpy\nsage: m=random_matrix(RDF,500,min=-2^32,max=2^32)\nsage: timeit('m+m')\n125 loops, best of 3: 2.78 ms per loop\nsage: timeit('m*m')\n5 loops, best of 3: 89.2 ms per loop\nsage: timeit('~m')\n5 loops, best of 3: 224 ms per loop\nsage: timeit('m.det()')\n5 loops, best of 3: 62 ms per loop\nsage: timeit('m.transpose()')\n625 loops, best of 3: 32.9 \u00b5s per loop\nsage: timeit('m.LU()')\n5 loops, best of 3: 15.1 ms per loop\nsage: timeit('m.SVD()')\n5 loops, best of 3: 1.42 s per loop\nsage: %time m.SVD()\nCPU times: user 1.19 s, sys: 0.06 s, total: 1.25 s\nWall time: 1.42 s\n\n(500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field)\nsage: %time m.QR()\nCPU times: user 0.26 s, sys: 0.03 s, total: 0.28 s\nWall time: 0.32 s\n\n(500 x 500 dense matrix over Real Double Field,\n 500 x 500 dense matrix over Real Double Field)\nsage: b=vector(RDF,range(500))\nsage: timeit('m.solve_left(b)')\n5 loops, best of 3: 68.6 ms per loop\nsage: %time a=m.eigenspaces()\nCPU times: user 27.52 s, sys: 0.31 s, total: 27.83 s\nWall time: 30.00 s\nsage: \n```",
    "created_at": "2008-09-26T03:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19828",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'>Comment 9:</a>
Some more timings from respectably-sized matrices show that numpy is indeed way faster most of the time and neck-and-neck the rest of the time.  The GSL determinant speed below is most likely from from caching the LU decomposition that had been computed for something before and using that to compute the determinant.

Before patch

```
sage: # Before patches: GSL
sage: m=random_matrix(RDF,500,min=-2^32,max=2^32)
sage: timeit('m+m')
125 loops, best of 3: 7.2 ms per loop
sage: timeit('m*m')
5 loops, best of 3: 90.6 ms per loop
sage: timeit('~m')
5 loops, best of 3: 639 ms per loop
sage: timeit('m.det()')
625 loops, best of 3: 19.1 µs per loop
sage: timeit('m.transpose()')
125 loops, best of 3: 5.76 ms per loop
sage: timeit('m.LU()')
5 loops, best of 3: 97.6 ms per loop
sage: %time m.SVD()
CPU times: user 8.26 s, sys: 0.09 s, total: 8.35 s
Wall time: 9.16 s

(500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field)
sage: %time m.QR()
CPU times: user 2.37 s, sys: 0.05 s, total: 2.42 s
Wall time: 2.68 s

(500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field)
sage: b=vector(RDF,range(500))
sage: timeit('m.solve_left(b)')
5 loops, best of 3: 72 ms per loop
sage: %time a=m.eigenspaces()
CPU times: user 26.61 s, sys: 0.42 s, total: 27.03 s
Wall time: 30.09 s
```

After patches

```
sage: # After patches: numpy
sage: m=random_matrix(RDF,500,min=-2^32,max=2^32)
sage: timeit('m+m')
125 loops, best of 3: 2.78 ms per loop
sage: timeit('m*m')
5 loops, best of 3: 89.2 ms per loop
sage: timeit('~m')
5 loops, best of 3: 224 ms per loop
sage: timeit('m.det()')
5 loops, best of 3: 62 ms per loop
sage: timeit('m.transpose()')
625 loops, best of 3: 32.9 µs per loop
sage: timeit('m.LU()')
5 loops, best of 3: 15.1 ms per loop
sage: timeit('m.SVD()')
5 loops, best of 3: 1.42 s per loop
sage: %time m.SVD()
CPU times: user 1.19 s, sys: 0.06 s, total: 1.25 s
Wall time: 1.42 s

(500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field)
sage: %time m.QR()
CPU times: user 0.26 s, sys: 0.03 s, total: 0.28 s
Wall time: 0.32 s

(500 x 500 dense matrix over Real Double Field,
 500 x 500 dense matrix over Real Double Field)
sage: b=vector(RDF,range(500))
sage: timeit('m.solve_left(b)')
5 loops, best of 3: 68.6 ms per loop
sage: %time a=m.eigenspaces()
CPU times: user 27.52 s, sys: 0.31 s, total: 27.83 s
Wall time: 30.00 s
sage: 
```



---

archive/issue_comments_019829.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n**Review**\n* patch applies cleanly\n* I skimmed the code and it looks fine, I didn't thoroughly read it though\n* Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)\n* doctests (64-bit Linux)\n\n```\nFile \"/home/malb/sage-3.1.3.alpha1/tmp/matrix_double_dense.py\", line 854:\n    sage: U*U.transpose()\nExpected:\n    [              1.0 2.13506512817e-16]\n    [2.13506512817e-16               1.0]\nGot:\n    [              1.0 2.66876364757e-16]\n    [2.66876364757e-16               1.0]\n**********************************************************************\nFile \"/home/malb/sage-3.1.3.alpha1/tmp/matrix_double_dense.py\", line 859:\n    sage: V*V.transpose()\nExpected:\n    [               1.0  2.02230810223e-16 -2.11947972194e-16]\n    [ 2.02230810223e-16                1.0  7.09339271349e-17]\n    [-2.11947972194e-16  7.09339271349e-17                1.0]\nGot:\n    [               1.0  5.94955942151e-17 -1.77117977403e-16]\n    [ 5.94955942151e-17                1.0 -8.87690528723e-17]\n    [-1.77117977403e-16 -8.87690528723e-17                1.0]\n**********************************************************************\n```",
    "created_at": "2008-09-27T19:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19829",
    "user": "https://github.com/malb"
}
```

<a id='comment:10'>Comment 10:</a>
**Review**
* patch applies cleanly
* I skimmed the code and it looks fine, I didn't thoroughly read it though
* Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)
* doctests (64-bit Linux)

```
File "/home/malb/sage-3.1.3.alpha1/tmp/matrix_double_dense.py", line 854:
    sage: U*U.transpose()
Expected:
    [              1.0 2.13506512817e-16]
    [2.13506512817e-16               1.0]
Got:
    [              1.0 2.66876364757e-16]
    [2.66876364757e-16               1.0]
**********************************************************************
File "/home/malb/sage-3.1.3.alpha1/tmp/matrix_double_dense.py", line 859:
    sage: V*V.transpose()
Expected:
    [               1.0  2.02230810223e-16 -2.11947972194e-16]
    [ 2.02230810223e-16                1.0  7.09339271349e-17]
    [-2.11947972194e-16  7.09339271349e-17                1.0]
Got:
    [               1.0  5.94955942151e-17 -1.77117977403e-16]
    [ 5.94955942151e-17                1.0 -8.87690528723e-17]
    [-1.77117977403e-16 -8.87690528723e-17                1.0]
**********************************************************************
```



---

archive/issue_events_033163.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-09-27T19:28:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33163"
}
```



---

archive/issue_events_033164.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-09-27T19:28:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33164"
}
```



---

archive/issue_comments_019830.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@malb](#comment%3A10):\n\nHi malb,\n\n> **Review**\n> * patch applies cleanly\n> * I skimmed the code and it looks fine, I didn't thoroughly read it though\n\nI am valgrinding it right now. Jason and I spend four hours last night fixing problems with the new nump 1.2 and scip 0.7svn - see #4205.\n\n> * Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)\n\nUnfortunately not, but numpy 1.2 (which we are upgrading to in 3.1.3) imports in 0.2s or so on sage.math. \n\n> * doctests (64-bit Linux)\n\nFixed in #4205. \n\nCheers,\n\nMichael",
    "created_at": "2008-09-27T19:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19830",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@malb](#comment%3A10):

Hi malb,

> **Review**
> * patch applies cleanly
> * I skimmed the code and it looks fine, I didn't thoroughly read it though

I am valgrinding it right now. Jason and I spend four hours last night fixing problems with the new nump 1.2 and scip 0.7svn - see #4205.

> * Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)

Unfortunately not, but numpy 1.2 (which we are upgrading to in 3.1.3) imports in 0.2s or so on sage.math. 

> * doctests (64-bit Linux)

Fixed in #4205. 

Cheers,

Michael



---

archive/issue_comments_019831.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nHi, feel free to change to **positive review** when #4205 goes in.",
    "created_at": "2008-09-27T19:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19831",
    "user": "https://github.com/malb"
}
```

<a id='comment:12'>Comment 12:</a>
Hi, feel free to change to **positive review** when #4205 goes in.



---

archive/issue_comments_019832.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@malb](#comment%3A12):\n> Hi, feel free to change to **positive review** when #4205 goes in.\n\nCool. We are still fighting some problems with scipy 0.7svn, but Mike Hansen and I are on it. Unless we can resolve those issue and if there are memory leaks in this patch I will throw the new numpy and scipy out of 3.1.3. That also makes it likely that this patch would miss 3.1.3, but so far I am hopeful.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-27T19:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19832",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@malb](#comment%3A12):
> Hi, feel free to change to **positive review** when #4205 goes in.

Cool. We are still fighting some problems with scipy 0.7svn, but Mike Hansen and I are on it. Unless we can resolve those issue and if there are memory leaks in this patch I will throw the new numpy and scipy out of 3.1.3. That also makes it likely that this patch would miss 3.1.3, but so far I am hopeful.

Cheers,

Michael



---

archive/issue_comments_019833.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nOk, this is a problem:\n\n```\n==10940== LEAK SUMMARY:\n==10940==    definitely lost: 13,108 bytes in 321 blocks.\n==10940==      possibly lost: 303,196 bytes in 829 blocks.\n==10940==    still reachable: 34,200,409 bytes in 198,999 blocks.\n==10940==         suppressed: 340,122 bytes in 5,402 blocks.\n==10940== Reachable blocks (those to which a pointer was found) are not shown.\n==10940== To see them, rerun with: --leak-check=full --show-reachable=yes\n```\nThis happens when valgrinding sage/modules/complex_double_vector.pyx. But the issue is not the code that Jason wrote, but that we leak not insignificant amounts of memory if we (re)import numpy. So I would suggest doing it once at the toplevel and killing all other import numpy statements. \n\nAnother thing that concerns me is that the number of still reachable objects has gone up dramatically, i.e. contrast the above to the situation before:\n\n```\n==16395== LEAK SUMMARY:\n==16395==    definitely lost: 612 bytes in 11 blocks.\n==16395==      possibly lost: 312,717 bytes in 866 blocks.\n==16395==    still reachable: 33,376,714 bytes in 193,940 blocks.\n==16395==         suppressed: 329,948 bytes in 5,223 blocks.\n==16395== Reachable blocks (those to which a pointer was found) are not shown.\n==16395== To see them, rerun with: --leak-check=full --show-reachable=yes\n```\nOne would need to run some longer tests to see if this is just additional, but constant crap from numpy or if the amount grows as we use it more.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-27T20:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19833",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:14'>Comment 14:</a>
Ok, this is a problem:

```
==10940== LEAK SUMMARY:
==10940==    definitely lost: 13,108 bytes in 321 blocks.
==10940==      possibly lost: 303,196 bytes in 829 blocks.
==10940==    still reachable: 34,200,409 bytes in 198,999 blocks.
==10940==         suppressed: 340,122 bytes in 5,402 blocks.
==10940== Reachable blocks (those to which a pointer was found) are not shown.
==10940== To see them, rerun with: --leak-check=full --show-reachable=yes
```
This happens when valgrinding sage/modules/complex_double_vector.pyx. But the issue is not the code that Jason wrote, but that we leak not insignificant amounts of memory if we (re)import numpy. So I would suggest doing it once at the toplevel and killing all other import numpy statements. 

Another thing that concerns me is that the number of still reachable objects has gone up dramatically, i.e. contrast the above to the situation before:

```
==16395== LEAK SUMMARY:
==16395==    definitely lost: 612 bytes in 11 blocks.
==16395==      possibly lost: 312,717 bytes in 866 blocks.
==16395==    still reachable: 33,376,714 bytes in 193,940 blocks.
==16395==         suppressed: 329,948 bytes in 5,223 blocks.
==16395== Reachable blocks (those to which a pointer was found) are not shown.
==16395== To see them, rerun with: --leak-check=full --show-reachable=yes
```
One would need to run some longer tests to see if this is just additional, but constant crap from numpy or if the amount grows as we use it more.

Cheers,

Michael



---

archive/issue_comments_019834.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\n>> Malb: Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)\n\n> Mabshoff: Unfortunately not, but numpy 1.2 (which we are upgrading to in 3.1.3) imports in 0.2s or so on sage.math. \n\nFor the record, it is absolutely definitely always possible to get rid of numpy imports.",
    "created_at": "2008-09-29T23:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19834",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:15'>Comment 15:</a>
>> Malb: Is there any chance that we can get rid of the toplevel numpy imports (they were removed just recently and I wonder whether we can get away without them for startup time reasons)

> Mabshoff: Unfortunately not, but numpy 1.2 (which we are upgrading to in 3.1.3) imports in 0.2s or so on sage.math. 

For the record, it is absolutely definitely always possible to get rid of numpy imports.



---

archive/issue_comments_019835.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@williamstein](#comment%3A15):\n> For the record, it is absolutely definitely always possible to get rid of numpy imports.\n\nI was thinking about inheriting from a numpy type or cdef'ing some numpy type in some pxd file (don't know if that's even possible) Other than that, I can't think of any situation where one couldn't do it.",
    "created_at": "2008-09-30T08:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19835",
    "user": "https://github.com/malb"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@williamstein](#comment%3A15):
> For the record, it is absolutely definitely always possible to get rid of numpy imports.

I was thinking about inheriting from a numpy type or cdef'ing some numpy type in some pxd file (don't know if that's even possible) Other than that, I can't think of any situation where one couldn't do it.



---

archive/issue_comments_019836.json:
```json
{
    "body": "apply on top of previous patches",
    "created_at": "2008-10-21T03:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19836",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patches



---

archive/issue_comments_019837.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nAttachment: **[numpy-3.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-3.patch.gz)**\n\nI added numpy-3.patch (to be applied on top of the previous patches) which makes numpy *not* imported by default (imported lazily, though), and switches several functions from the numpy versions to the more careful/recommended scipy equivalents.\n\nEarlier today, I ran valgrind on several examples and mabshoff indicated that things looked good to him.  He might do additional testing to see if things really are okay to merge.",
    "created_at": "2008-10-21T03:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19837",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:17'>Comment 17:</a>
Attachment: **[numpy-3.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-3.patch.gz)**

I added numpy-3.patch (to be applied on top of the previous patches) which makes numpy *not* imported by default (imported lazily, though), and switches several functions from the numpy versions to the more careful/recommended scipy equivalents.

Earlier today, I ran valgrind on several examples and mabshoff indicated that things looked good to him.  He might do additional testing to see if things really are okay to merge.



---

archive/issue_events_033165.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-10-21T03:23:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33165"
}
```



---

archive/issue_events_033166.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-10-21T03:23:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33166"
}
```



---

archive/issue_comments_019838.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThese patches all apply on top of 3.1.4 and the doctests in matrix/*.pyx and matrix/*.py pass.",
    "created_at": "2008-10-21T03:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19838",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:18'>Comment 18:</a>
These patches all apply on top of 3.1.4 and the doctests in matrix/*.pyx and matrix/*.py pass.



---

archive/issue_comments_019839.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThe last patch repeatedly runs\n\n```\nimport scipy.linalg\n```\nThis import also needs to be done lazily.\n\nCheers,\n\nMichael",
    "created_at": "2008-10-21T20:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19839",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:19'>Comment 19:</a>
The last patch repeatedly runs

```
import scipy.linalg
```
This import also needs to be done lazily.

Cheers,

Michael



---

archive/issue_comments_019840.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nAfter running some tests to see about leaking and the \"import scipy.linalg\" issue, mabshoff said on IRC that the output \"looks good to me\".  I don't have the logs on me, but I'm sure he can paste them in or comment if there is still an issue.",
    "created_at": "2008-10-22T00:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19840",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:20'>Comment 20:</a>
After running some tests to see about leaking and the "import scipy.linalg" issue, mabshoff said on IRC that the output "looks good to me".  I don't have the logs on me, but I'm sure he can paste them in or comment if there is still an issue.



---

archive/issue_comments_019841.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nokay, copying the private review request here for posterity :)\n\n```\nMartin and Mike,\n\nI'm emailing you two since you've both already looked at the patches at https://github.com/sagemath/sage/issues/3498.  Martin, you almost gave it a positive review, pending resolution of the deprecation warnings.  I think mabshoff fixed the deprecation warnings without applying #4205.  Mike, you expressed some concerns over leaks.  I took care of the global numpy import issue and ran some tests with valgrind and, based on those, mabshoff said today on IRC: \"Someone other than me needs to (re)review. Blessing from me on memory issues AFAIK :)\"\n\n\nMichael also said he was still a bit suspicious, though, and it seems like he'd like to run valgrind on it himself as well.\n\n\nSo, would either of you like to (re)review the patches at #3498, especially for the mathematical content?  Michael can run valgrind on it again if he wants as well.\n\nThanks,\n\nJason\n```",
    "created_at": "2008-10-22T15:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19841",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:21'>Comment 21:</a>
okay, copying the private review request here for posterity :)

```
Martin and Mike,

I'm emailing you two since you've both already looked at the patches at https://github.com/sagemath/sage/issues/3498.  Martin, you almost gave it a positive review, pending resolution of the deprecation warnings.  I think mabshoff fixed the deprecation warnings without applying #4205.  Mike, you expressed some concerns over leaks.  I took care of the global numpy import issue and ran some tests with valgrind and, based on those, mabshoff said today on IRC: "Someone other than me needs to (re)review. Blessing from me on memory issues AFAIK :)"


Michael also said he was still a bit suspicious, though, and it seems like he'd like to run valgrind on it himself as well.


So, would either of you like to (re)review the patches at #3498, especially for the mathematical content?  Michael can run valgrind on it again if he wants as well.

Thanks,

Jason
```



---

archive/issue_comments_019842.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nIs there any reason you still have the `gsl_matrix` field in the new class? Also, have you looked into using the new buffer interface, e.g., for element access (see http://wiki.cython.org/tutorials/numpy )? Perhaps this should be a separate ticket though.",
    "created_at": "2008-10-24T04:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19842",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:22'>Comment 22:</a>
Is there any reason you still have the `gsl_matrix` field in the new class? Also, have you looked into using the new buffer interface, e.g., for element access (see http://wiki.cython.org/tutorials/numpy )? Perhaps this should be a separate ticket though.



---

archive/issue_comments_019843.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nI don't believe there is any gsl_matrix field in the new class.  Where are you seeing it (after applying the patches)?\n\nAlso, yes, I have looked at using the new buffer interface.  However, for some reason, I didn't think we had current enough numpy/cython to be able to use it, and even if we did, it seemed like it was still under development.  I was going to wait until there was a clear, complete implementation.  I'm excited about it, though!\n\nI agree it ought to be a separate ticket.",
    "created_at": "2008-10-24T11:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19843",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:23'>Comment 23:</a>
I don't believe there is any gsl_matrix field in the new class.  Where are you seeing it (after applying the patches)?

Also, yes, I have looked at using the new buffer interface.  However, for some reason, I didn't think we had current enough numpy/cython to be able to use it, and even if we did, it seemed like it was still under development.  I was going to wait until there was a clear, complete implementation.  I'm excited about it, though!

I agree it ought to be a separate ticket.



---

archive/issue_comments_019844.json:
```json
{
    "body": "Attachment: **[remove-gsl-import.patch.gz](https://github.com/sagemath/sage/files/ticket3498/remove-gsl-import.patch.gz)**\n\napply on top of previous patches",
    "created_at": "2008-10-24T11:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19844",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[remove-gsl-import.patch.gz](https://github.com/sagemath/sage/files/ticket3498/remove-gsl-import.patch.gz)**

apply on top of previous patches



---

archive/issue_comments_019845.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nOkay, I see two places where I still import gsl.pxi.  I've deleted those with remove-gsl-import.patch.  Apply that patch on top of all the previous patches.\n\nIs that what you were talking about, Robert?",
    "created_at": "2008-10-24T11:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19845",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:24'>Comment 24:</a>
Okay, I see two places where I still import gsl.pxi.  I've deleted those with remove-gsl-import.patch.  Apply that patch on top of all the previous patches.

Is that what you were talking about, Robert?



---

archive/issue_comments_019846.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nrobertwb: Here's a ping about reviewing this ticket, if you have time.  I think I corrected the problems you pointed out.",
    "created_at": "2008-10-27T20:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19846",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:25'>Comment 25:</a>
robertwb: Here's a ping about reviewing this ticket, if you have time.  I think I corrected the problems you pointed out.



---

archive/issue_comments_019847.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nYes, this is what I was talking about.",
    "created_at": "2008-10-28T18:08:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19847",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:26'>Comment 26:</a>
Yes, this is what I was talking about.



---

archive/issue_comments_019848.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nrobertwb: does that mean you give this another positive review?  I'm not trying to push for a positive review, just trying to help the review process along.",
    "created_at": "2008-10-30T02:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19848",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:27'>Comment 27:</a>
robertwb: does that mean you give this another positive review?  I'm not trying to push for a positive review, just trying to help the review process along.



---

archive/issue_comments_019849.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI haven't looked into this enough to give it a positive review, but what I have looked at looks good. I'll give it a more thorough look during bug day tomorrow.",
    "created_at": "2008-10-30T02:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19849",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:28'>Comment 28:</a>
I haven't looked into this enough to give it a positive review, but what I have looked at looks good. I'll give it a more thorough look during bug day tomorrow.



---

archive/issue_comments_019850.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThanks!!  I've started working moving RDF/CDF vectors to numpy too, but that's another trac ticket.",
    "created_at": "2008-10-30T03:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19850",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:29'>Comment 29:</a>
Thanks!!  I've started working moving RDF/CDF vectors to numpy too, but that's another trac ticket.



---

archive/issue_comments_019851.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nrobertwb: Did you have time to look at this patch on bug day?",
    "created_at": "2008-11-03T21:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19851",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:30'>Comment 30:</a>
robertwb: Did you have time to look at this patch on bug day?



---

archive/issue_comments_019852.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nHmm... what's up with \n\n```\n-sage: from scipy import linsolve   \n+sage: from scipy.sparse.linalg.dsolve import linsolve\n```\nin sage/numerical/test.py? Does scipy.linsolve not work anymore?",
    "created_at": "2008-11-04T07:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19852",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:31'>Comment 31:</a>
Hmm... what's up with 

```
-sage: from scipy import linsolve   
+sage: from scipy.sparse.linalg.dsolve import linsolve
```
in sage/numerical/test.py? Does scipy.linsolve not work anymore?



---

archive/issue_comments_019853.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nSorry, that was in reference to #4205. \n\nI did look some at this on bug day, and the code looks solid and well written. I also say positive review, pending #4205.",
    "created_at": "2008-11-04T07:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19853",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:32'>Comment 32:</a>
Sorry, that was in reference to #4205. 

I did look some at this on bug day, and the code looks solid and well written. I also say positive review, pending #4205.



---

archive/issue_comments_019854.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nTo my understanding, this patch does not depend on #4205.  #4205 was to resolve some issues with upgrading to numpy 1.2.  That upgrade has already happened.  mabshoff took care of the warnings in question by modifying the numpy 1.2 code to not give the warnings, so it was a temporary fix.  However, that issue is separate from this patch.\n\nIn other words, this patch depends on numpy 1.2, which has already been upgraded in Sage.  Dealing with the deprecations in numpy 1.2 is a separate issue from this ticket, and should not be considered a prerequisite for this ticket.\n\nrobertwb: given that, does this patch earn a positive review?",
    "created_at": "2008-11-04T11:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19854",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:33'>Comment 33:</a>
To my understanding, this patch does not depend on #4205.  #4205 was to resolve some issues with upgrading to numpy 1.2.  That upgrade has already happened.  mabshoff took care of the warnings in question by modifying the numpy 1.2 code to not give the warnings, so it was a temporary fix.  However, that issue is separate from this patch.

In other words, this patch depends on numpy 1.2, which has already been upgraded in Sage.  Dealing with the deprecations in numpy 1.2 is a separate issue from this ticket, and should not be considered a prerequisite for this ticket.

robertwb: given that, does this patch earn a positive review?



---

archive/issue_comments_019855.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\n(of course, that's assuming that this patch actually applies and doctests run smoothly without applying #4205; I think it does, but can't check it again right now.  robertwb, did you *have* to apply #4205 before this patch would apply?)",
    "created_at": "2008-11-04T11:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19855",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:34'>Comment 34:</a>
(of course, that's assuming that this patch actually applies and doctests run smoothly without applying #4205; I think it does, but can't check it again right now.  robertwb, did you *have* to apply #4205 before this patch would apply?)



---

archive/issue_comments_019856.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nNo, I did not have to apply #4205. I was deferring to malb that there was some (unknown to me) reason that #4205 should be first. But it does look good to me, so I'm giving this a positive review.",
    "created_at": "2008-11-04T19:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19856",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:35'>Comment 35:</a>
No, I did not have to apply #4205. I was deferring to malb that there was some (unknown to me) reason that #4205 should be first. But it does look good to me, so I'm giving this a positive review.



---

archive/issue_events_033167.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-04T19:50:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33167"
}
```



---

archive/issue_events_033168.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-04T19:50:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33168"
}
```



---

archive/issue_comments_019857.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nThanks.  At that time, it was unclear what to do about the deprecation warnings in numpy/scipy, so #4205 was probably a prerequisite then.  As explained above, it is no longer a prerequisite, but should still be taken care of soon (i.e., before the next update of numpy/scipy).",
    "created_at": "2008-11-04T21:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19857",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:36'>Comment 36:</a>
Thanks.  At that time, it was unclear what to do about the deprecation warnings in numpy/scipy, so #4205 was probably a prerequisite then.  As explained above, it is no longer a prerequisite, but should still be taken care of soon (i.e., before the next update of numpy/scipy).



---

archive/issue_events_033169.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-05T18:13:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "title_is": "[needs rebase] make numpy the backend for matrices over CDF and RDF",
    "title_was": "make numpy the backend for matrices over CDF and RDF",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33169"
}
```



---

archive/issue_comments_019858.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nThe patch needs to be rebased - likely due to #799. 3.2.alpha2 should be out shortly, so I would suggest using that.\n\n```\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.2.alpha3/devel/sage$ patch -p1 < trac_3498_part_1_numpy-RDF-CDF.patch \npatching file sage/ext/numpy.pxd\npatching file sage/matrix/change_ring.pyx\npatching file sage/matrix/constructor.py\npatching file sage/matrix/matrix_complex_double_dense.pxd\npatching file sage/matrix/matrix_complex_double_dense.pyx\nHunk #3 FAILED at 83.\n1 out of 3 hunks FAILED -- saving rejects to file sage/matrix/matrix_complex_double_dense.pyx.rej\npatching file sage/matrix/matrix_double_dense.pxd\npatching file sage/matrix/matrix_double_dense.pyx\npatching file sage/matrix/matrix_real_double_dense.pxd\npatching file sage/matrix/matrix_real_double_dense.pyx\nHunk #5 FAILED at 81.\n1 out of 5 hunks FAILED -- saving rejects to file sage/matrix/matrix_real_double_dense.pyx.rej\npatching file sage/matrix/solve.pyx\npatching file setup.py\nHunk #2 succeeded at 488 (offset 2 lines).\nHunk #3 succeeded at 601 (offset 2 lines).\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-11-05T18:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19858",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:37'>Comment 37:</a>
The patch needs to be rebased - likely due to #799. 3.2.alpha2 should be out shortly, so I would suggest using that.

```
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.2.alpha3/devel/sage$ patch -p1 < trac_3498_part_1_numpy-RDF-CDF.patch 
patching file sage/ext/numpy.pxd
patching file sage/matrix/change_ring.pyx
patching file sage/matrix/constructor.py
patching file sage/matrix/matrix_complex_double_dense.pxd
patching file sage/matrix/matrix_complex_double_dense.pyx
Hunk #3 FAILED at 83.
1 out of 3 hunks FAILED -- saving rejects to file sage/matrix/matrix_complex_double_dense.pyx.rej
patching file sage/matrix/matrix_double_dense.pxd
patching file sage/matrix/matrix_double_dense.pyx
patching file sage/matrix/matrix_real_double_dense.pxd
patching file sage/matrix/matrix_real_double_dense.pyx
Hunk #5 FAILED at 81.
1 out of 5 hunks FAILED -- saving rejects to file sage/matrix/matrix_real_double_dense.pyx.rej
patching file sage/matrix/solve.pyx
patching file setup.py
Hunk #2 succeeded at 488 (offset 2 lines).
Hunk #3 succeeded at 601 (offset 2 lines).
```

Cheers,

Michael



---

archive/issue_comments_019859.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nOh yeah: While you are at is also please fold all four patches into one and add a proper license statemant to the file sage/ext/numpy.pxd.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-05T18:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19859",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:38'>Comment 38:</a>
Oh yeah: While you are at is also please fold all four patches into one and add a proper license statemant to the file sage/ext/numpy.pxd.

Cheers,

Michael



---

archive/issue_comments_019860.json:
```json
{
    "body": "ignore all previous files; this reverts the relevant parts of #4439 and then #778, which no longer apply to the affected files since the code has been factored out to matrix_double_dense.pyx.",
    "created_at": "2008-11-08T06:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19860",
    "user": "https://github.com/jasongrout"
}
```

ignore all previous files; this reverts the relevant parts of #4439 and then #778, which no longer apply to the affected files since the code has been factored out to matrix_double_dense.pyx.



---

archive/issue_comments_019861.json:
```json
{
    "body": "Attachment: **[revert-trac_4439_778.patch.gz](https://github.com/sagemath/sage/files/ticket3498/revert-trac_4439_778.patch.gz)**\n\nAttachment: **[numpy-RDF-CDF-final.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-RDF-CDF-final.patch.gz)**\n\napply on top of revert-trac_4439_778.patch",
    "created_at": "2008-11-08T06:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19861",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[revert-trac_4439_778.patch.gz](https://github.com/sagemath/sage/files/ticket3498/revert-trac_4439_778.patch.gz)**

Attachment: **[numpy-RDF-CDF-final.patch.gz](https://github.com/sagemath/sage/files/ticket3498/numpy-RDF-CDF-final.patch.gz)**

apply on top of revert-trac_4439_778.patch



---

archive/issue_events_033170.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-08T06:47:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "title_is": "make numpy the backend for matrices over CDF and RDF",
    "title_was": "[needs rebase] make numpy the backend for matrices over CDF and RDF",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33170"
}
```



---

archive/issue_comments_019862.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nApply revert-trac_4439_778.patch and then numpy-RDF-CDF-final.patch to mabshoff's current (as of right now; this timestamp) 3.1.4rc0 tree.\n\nI think all comments have been addressed (finally! :).",
    "created_at": "2008-11-08T06:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19862",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:39'>Comment 39:</a>
Apply revert-trac_4439_778.patch and then numpy-RDF-CDF-final.patch to mabshoff's current (as of right now; this timestamp) 3.1.4rc0 tree.

I think all comments have been addressed (finally! :).



---

archive/issue_events_033171.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-09T18:14:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "milestone_number": null,
    "milestone_title": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33171"
}
```



---

archive/issue_events_033172.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-09T18:14:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "milestone_number": null,
    "milestone_title": "sage-3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33172"
}
```



---

archive/issue_comments_019863.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nThere are some numerical noise issues to fix:\n\n```\nsage -t -long devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.rc0/devel/sage/sage/matrix/matrix_double_dense.pyx\", line 887:\n    sage: U*U.transpose()\nExpected:\n    [              1.0 2.13506512817e-16]\n    [2.13506512817e-16               1.0]\nGot:\n    [              1.0 2.66876364757e-16]\n    [2.66876364757e-16               1.0]\n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.rc0/devel/sage/sage/matrix/matrix_double_dense.pyx\", line 892:\n    sage: V*V.transpose()\nExpected:\n    [               1.0  2.02230810223e-16 -2.11947972194e-16]\n    [ 2.02230810223e-16                1.0  7.09339271349e-17]\n    [-2.11947972194e-16  7.09339271349e-17                1.0]\nGot:\n    [               1.0  5.94955942151e-17 -1.77117977403e-16]\n    [ 5.94955942151e-17                1.0 -8.87690528723e-17]\n    [-1.77117977403e-16 -8.87690528723e-17                1.0]\n**********************************************************************\n```",
    "created_at": "2008-11-09T18:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19863",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:40'>Comment 40:</a>
There are some numerical noise issues to fix:

```
sage -t -long devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.rc0/devel/sage/sage/matrix/matrix_double_dense.pyx", line 887:
    sage: U*U.transpose()
Expected:
    [              1.0 2.13506512817e-16]
    [2.13506512817e-16               1.0]
Got:
    [              1.0 2.66876364757e-16]
    [2.66876364757e-16               1.0]
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.rc0/devel/sage/sage/matrix/matrix_double_dense.pyx", line 892:
    sage: V*V.transpose()
Expected:
    [               1.0  2.02230810223e-16 -2.11947972194e-16]
    [ 2.02230810223e-16                1.0  7.09339271349e-17]
    [-2.11947972194e-16  7.09339271349e-17                1.0]
Got:
    [               1.0  5.94955942151e-17 -1.77117977403e-16]
    [ 5.94955942151e-17                1.0 -8.87690528723e-17]
    [-1.77117977403e-16 -8.87690528723e-17                1.0]
**********************************************************************
```



---

archive/issue_comments_019864.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nMerged revert-trac_4439_778.patch and numpy-RDF-CDF-final.patch in Sage 3.2.rc0.\n\nI will fix the numerical noise in a referee patch.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-09T18:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3498#issuecomment-19864",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:41'>Comment 41:</a>
Merged revert-trac_4439_778.patch and numpy-RDF-CDF-final.patch in Sage 3.2.rc0.

I will fix the numerical noise in a referee patch.

Cheers,

Michael



---

archive/issue_events_033173.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-09T18:20:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33173"
}
```



---

archive/issue_events_033174.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-09T18:20:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3498",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3498#event-33174"
}
```
