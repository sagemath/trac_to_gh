# Issue 3317: a citation system for Sage components

archive/issues_003317.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mhampton"
    ],
    "body": "This ticket implements a citation tracking system for Sage which can give fine grained information on the algorithms and implementations used for a specific computation.\nThis is in contrast to the current method in `sage.misc.citation` that relies on running a smaller example through the profiler.\n\nThe new citation module allows developers to add annotations with citation data in the code directly via decorators tuned to minimize performance overhead. Citations can be provided and obtained in several different formats, thanks to the [pybtex](http://pybtex.sourceforge.net/) package. This includes bibtex and plain text output.\n\nSample user session:\n\n```\nsage: R.<x,y,z> = QQ[]\nsage: print citations\n[1] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. \n{\\sc Singular} {3-1-3} --- {A} computer algebra system for polynomial\ncomputations. 2011, http://www.singular.uni-kl.de.\nsage: p = z^2 + 1; q = z^3 + 2\nsage: I = (p*q^2, y-z^2)*R\nsage: t = I.complete_primary_decomposition()\nsage: print citations\n[1] Takeshi Shimoyama and Kazuhiro Yokoyama. Localization and primary\ndecomposition of polynomial ideals. J. Symb. Comput., 22:247-277,\nSeptember 1996.\n[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\\tt\n    primdec.lib}. {A} {\\sc Singular} library for primary decomposition.\nPart of the {\\sc Singular} distribution, May 2001.\n[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\\sc\n    Singular} \\{3-1-3} --- {A} computer algebra system for polynomial\n    computations. 2011, http://www.singular.uni-kl.de.\n```\n\nIf a different algorithm is requested, the citations reflect this change:\n\n```\nsage: citations.clear()\nsage: t = I.complete_primary_decomposition(algorithm='gtz')\nsage: print citations\n[1] Patrizia Gianni, Barry Trager, and Gail Zacharias. Groebner bases and\nprimary decomposition of polynomial ideals. J. Symb. Comput., 6:149-167,\nDecember 1988.\n[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\\tt\n    primdec.lib}. {A} {\\sc Singular} library for primary decomposition.\nPart of the {\\sc Singular} distribution, May 2001.\n[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\\sc\n    Singular} {3-1-3} --- {A} computer algebra system for polynomial\ncomputations. 2011, http://www.singular.uni-kl.de.\n```\n\n\n---\n\nOnly apply:\n* [trac-3317-citation-environment.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)\n* [trac-3317-citation-system.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)\n* [trac-3317-bibtex-data.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)\n* [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)\n\nDepends on #11851\nDepends on #11852\n\nCC:  @burcin @novoselt @sagetrac-ranosch @sagetrac-PolyBoRi @sagetrac-jakobkroeker\n\nKeywords: **citations, sd34**\n\nWork Issues: **merge conflicts**\n\nAuthor: **Niels Ranosch, Michael Brickenstein, Burcin Erocal**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3317_\n\n",
    "created_at": "2008-05-28T00:20:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/feature",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "a citation system for Sage components",
    "type": "issue",
    "updated_at": "2016-04-21T17:06:10Z",
    "url": "https://github.com/sagemath/sage/issues/3317",
    "user": "https://github.com/sagetrac-mhampton"
}
```
This ticket implements a citation tracking system for Sage which can give fine grained information on the algorithms and implementations used for a specific computation.
This is in contrast to the current method in `sage.misc.citation` that relies on running a smaller example through the profiler.

The new citation module allows developers to add annotations with citation data in the code directly via decorators tuned to minimize performance overhead. Citations can be provided and obtained in several different formats, thanks to the [pybtex](http://pybtex.sourceforge.net/) package. This includes bibtex and plain text output.

Sample user session:

```
sage: R.<x,y,z> = QQ[]
sage: print citations
[1] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. 
{\sc Singular} {3-1-3} --- {A} computer algebra system for polynomial
computations. 2011, http://www.singular.uni-kl.de.
sage: p = z^2 + 1; q = z^3 + 2
sage: I = (p*q^2, y-z^2)*R
sage: t = I.complete_primary_decomposition()
sage: print citations
[1] Takeshi Shimoyama and Kazuhiro Yokoyama. Localization and primary
decomposition of polynomial ideals. J. Symb. Comput., 22:247-277,
September 1996.
[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\tt
    primdec.lib}. {A} {\sc Singular} library for primary decomposition.
Part of the {\sc Singular} distribution, May 2001.
[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\sc
    Singular} \{3-1-3} --- {A} computer algebra system for polynomial
    computations. 2011, http://www.singular.uni-kl.de.
```

If a different algorithm is requested, the citations reflect this change:

```
sage: citations.clear()
sage: t = I.complete_primary_decomposition(algorithm='gtz')
sage: print citations
[1] Patrizia Gianni, Barry Trager, and Gail Zacharias. Groebner bases and
primary decomposition of polynomial ideals. J. Symb. Comput., 6:149-167,
December 1988.
[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\tt
    primdec.lib}. {A} {\sc Singular} library for primary decomposition.
Part of the {\sc Singular} distribution, May 2001.
[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\sc
    Singular} {3-1-3} --- {A} computer algebra system for polynomial
computations. 2011, http://www.singular.uni-kl.de.
```


---

Only apply:
* [trac-3317-citation-environment.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)
* [trac-3317-citation-system.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)
* [trac-3317-bibtex-data.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)
* [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)

Depends on #11851
Depends on #11852

CC:  @burcin @novoselt @sagetrac-ranosch @sagetrac-PolyBoRi @sagetrac-jakobkroeker

Keywords: **citations, sd34**

Work Issues: **merge conflicts**

Author: **Niels Ranosch, Michael Brickenstein, Burcin Erocal**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/3317_





---

archive/issue_events_035827.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2008-05-28T00:20:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35827"
}
```



---

archive/issue_events_035828.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2008-05-28T00:20:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35828"
}
```



---

archive/issue_events_035829.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2008-05-28T00:20:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35829"
}
```



---

archive/issue_events_035830.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2008-05-28T00:20:03Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35830"
}
```



---

archive/issue_comments_017545.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSome thoughts:\n\nFrom: \"Fernando Perez\" <fperez....@gmail.com>\nDate: May 27, 7:02 pm\nSubject: Citing Sage and Used Systems\nTo: sage-devel\n\nThis is certainly not an easy problem if one wants a '100%' solution,\nin the sense that tracking down every single line of code in any given\ncomputation isn't easy.  But here's  a quick idea that can give an\n'80%' solution for all in-process sage/python/extension code (it won't\nwork for code done by external processes like maxima, I'm afraid). If\nyou run in the ipython console a program via '%run -p' it will be\nexecuted under the control of the profiler, and the result will tell\nyou what functions were called, how many times, etc.  Similarly %prun\nlets you execute single statements with profiler control.  The\nprofiler results object can be returned and analyzed further, if I\nrecall correctly there is some information in there about where\nfunctions come from.",
    "created_at": "2008-05-28T00:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17545",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:1" align="right">comment:1</div>

Some thoughts:

From: "Fernando Perez" <fperez....@gmail.com>
Date: May 27, 7:02 pm
Subject: Citing Sage and Used Systems
To: sage-devel

This is certainly not an easy problem if one wants a '100%' solution,
in the sense that tracking down every single line of code in any given
computation isn't easy.  But here's  a quick idea that can give an
'80%' solution for all in-process sage/python/extension code (it won't
work for code done by external processes like maxima, I'm afraid). If
you run in the ipython console a program via '%run -p' it will be
executed under the control of the profiler, and the result will tell
you what functions were called, how many times, etc.  Similarly %prun
lets you execute single statements with profiler control.  The
profiler results object can be returned and analyzed further, if I
recall correctly there is some information in there about where
functions come from.



---

archive/issue_comments_017546.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nRight now we have the code in sage/misc/citation.pyx.  Is that good enough so that this ticket should be closed?",
    "created_at": "2011-03-22T18:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17546",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

Right now we have the code in sage/misc/citation.pyx.  Is that good enough so that this ticket should be closed?



---

archive/issue_comments_017547.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jhpalmieri](#comment:3):\n> Right now we have the code in sage/misc/citation.pyx.  Is that good enough so that this ticket should be closed?\n\nThis basically does what is described in [comment:1](#comment:1). We need to do much better than that.\n\nWe are working on a system which allows developers to annotate (decorate?) functions with citation information. The decorated functions will add the citation entries to a central database at runtime. This database can be queried to get the list of packages/papers/algorithms used in various formats.\n\nIn short, I don't think we can close this yet.",
    "created_at": "2011-03-22T18:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17547",
    "user": "https://github.com/burcin"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jhpalmieri](#comment:3):
> Right now we have the code in sage/misc/citation.pyx.  Is that good enough so that this ticket should be closed?

This basically does what is described in [comment:1](#comment:1). We need to do much better than that.

We are working on a system which allows developers to annotate (decorate?) functions with citation information. The decorated functions will add the citation entries to a central database at runtime. This database can be queried to get the list of packages/papers/algorithms used in various formats.

In short, I don't think we can close this yet.



---

archive/issue_comments_017548.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBurcin Erocal, Michael Brickenstein and I (Niels Ranosch) have been working on a new citation system for about a month now: https://bitbucket.org/niels_mfo/sage-citation\n\nThe patches will be attached. What do you think about it?\n\nYou'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg\n\nCheers.",
    "created_at": "2011-08-12T13:24:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17548",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:6" align="right">comment:6</div>

Burcin Erocal, Michael Brickenstein and I (Niels Ranosch) have been working on a new citation system for about a month now: https://bitbucket.org/niels_mfo/sage-citation

The patches will be attached. What do you think about it?

You'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg

Cheers.



---

archive/issue_comments_017549.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHi!  If this doesn't slow things down, it is a really good idea, especially given that Sage is not trying to cover up the other programs inside of it.   I assume that (given the comments on the blog) you will post timing information in critical areas eventually.\n\nI have one substantive comment, I think:\n> You'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg\n\nHmm, so does that mean we would need to make `pybtex` a standard package in order for this to work?  (Currently there is a probationary period needed, which we have recently [been enforcing](https://github.com/sagemath/sage/issues/11563).)  \n\nOr are you suggesting this would be an optional spkg (for now), which means your examples would have to be optional for now?\n\nHere follow a couple silly comments that don't actually review much, but might still be worthwhile to ponder.\n* Missing \"to\": `in order make it faster` \n* A *lot* of the examples refer to Michael Brickenstein, which seems somewhat less than advisable.  I mean no disrespect here - clearly he is contributing loads and deserves citations!  But for the first-time reader of this documentation, it would be nice to have a bigger variety of citations, perhaps even beyond Sage components to the subcomponents.  For instance, the ones in the bibtex patch.\n* What does [trac-3317-example-usage.patch] exactly have an example of?  I see the `@cites(citable_items.slimgb)` - is this demonstrating that we get the same thing through the new decorator as we would have from `sage.misc.citation`?  This comment is probably just my ignorance speaking, feel free to ignore it.\n\nGood luck!",
    "created_at": "2011-08-12T14:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17549",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

Hi!  If this doesn't slow things down, it is a really good idea, especially given that Sage is not trying to cover up the other programs inside of it.   I assume that (given the comments on the blog) you will post timing information in critical areas eventually.

I have one substantive comment, I think:
> You'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg

Hmm, so does that mean we would need to make `pybtex` a standard package in order for this to work?  (Currently there is a probationary period needed, which we have recently [been enforcing](https://github.com/sagemath/sage/issues/11563).)  

Or are you suggesting this would be an optional spkg (for now), which means your examples would have to be optional for now?

Here follow a couple silly comments that don't actually review much, but might still be worthwhile to ponder.
* Missing "to": `in order make it faster` 
* A *lot* of the examples refer to Michael Brickenstein, which seems somewhat less than advisable.  I mean no disrespect here - clearly he is contributing loads and deserves citations!  But for the first-time reader of this documentation, it would be nice to have a bigger variety of citations, perhaps even beyond Sage components to the subcomponents.  For instance, the ones in the bibtex patch.
* What does [trac-3317-example-usage.patch] exactly have an example of?  I see the `@cites(citable_items.slimgb)` - is this demonstrating that we get the same thing through the new decorator as we would have from `sage.misc.citation`?  This comment is probably just my ignorance speaking, feel free to ignore it.

Good luck!



---

archive/issue_comments_017550.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nShould some of the new code (e.g., `citation/__init__.py`) be in the reference manual?",
    "created_at": "2011-08-12T15:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17550",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Should some of the new code (e.g., `citation/__init__.py`) be in the reference manual?



---

archive/issue_comments_017551.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kcrisman](#comment:8):\n> Hi!  If this doesn't slow things down, it is a really good idea, especially given that Sage is not trying to cover up the other programs inside of it.   I assume that (given the comments on the blog) you will post timing information in critical areas eventually.\n\nAt least that's what I plan to do. I'm not quite sure on how to benchmark (and what), but I'm open for suggestions. Benchmarking the decorated pass-function is unsatisfying.\n\n\n> I have one substantive comment, I think:\n> > You'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg\n\n> Hmm, so does that mean we would need to make `pybtex` a standard package in order for this to work?  (Currently there is a probationary period needed, which we have recently [been enforcing](https://github.com/sagemath/sage/issues/11563).)  \n\nWell, I put the design, as if pybtex was a standard-spkg. But it might as well be a good idea to make it optional: If people really pybtex' features, they can install it. It could be the following: If pybtex is not installed, the printed citations will just be the exact content of the bibfile, otherwise parsed (and maybe converted).\nBut there might be disadvantages: If the bibtex is parsed by pybtex, syntax-errors and illegal formatting might be found by pybtex. The output would probably be more consistent (more homogeneous and more compliant to design).\n\nI am in favour of pre-parsing everything through pybtex, but I don't know, what is actually better.\n\n\n> Or are you suggesting this would be an optional spkg (for now), which means your examples would have to be optional for now?\n> \n> Here follow a couple silly comments that don't actually review much, but might still be worthwhile to ponder.\n> * Missing \"to\": `in order make it faster` \n\nThanks.\n\n\n> * A *lot* of the examples refer to Michael Brickenstein, which seems somewhat less than advisable.  I mean no disrespect here - clearly he is contributing loads and deserves citations!  But for the first-time reader of this documentation, it would be nice to have a bigger variety of citations, perhaps even beyond Sage components to the subcomponents.  For instance, the ones in the bibtex patch.\n\nYou are right. It is more a coincidence than anything else; still, it has to be changed.\n\n\n> * What does [trac-3317-example-usage.patch] exactly have an example of?  I see the `@cites(citable_items.slimgb)` - is this demonstrating that we get the same thing through the new decorator as we would have from `sage.misc.citation`?  This comment is probably just my ignorance speaking, feel free to ignore it.\n\nI won't :-).\nFor this citation system, it is indispensable, that the decorator gets widespread into sage. In my opinion, it is best if people decorate their own functions (and possibly make their own bibtex-entries). The example shows, how a function should be decorated.\n(The deprecation-message can be uncommented later, as soon as the \"new\" citation system is more accurate than the old one.)",
    "created_at": "2011-08-15T06:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17551",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kcrisman](#comment:8):
> Hi!  If this doesn't slow things down, it is a really good idea, especially given that Sage is not trying to cover up the other programs inside of it.   I assume that (given the comments on the blog) you will post timing information in critical areas eventually.

At least that's what I plan to do. I'm not quite sure on how to benchmark (and what), but I'm open for suggestions. Benchmarking the decorated pass-function is unsatisfying.


> I have one substantive comment, I think:
> > You'll need our pybtex-spkg in order to make it work: http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg

> Hmm, so does that mean we would need to make `pybtex` a standard package in order for this to work?  (Currently there is a probationary period needed, which we have recently [been enforcing](https://github.com/sagemath/sage/issues/11563).)  

Well, I put the design, as if pybtex was a standard-spkg. But it might as well be a good idea to make it optional: If people really pybtex' features, they can install it. It could be the following: If pybtex is not installed, the printed citations will just be the exact content of the bibfile, otherwise parsed (and maybe converted).
But there might be disadvantages: If the bibtex is parsed by pybtex, syntax-errors and illegal formatting might be found by pybtex. The output would probably be more consistent (more homogeneous and more compliant to design).

I am in favour of pre-parsing everything through pybtex, but I don't know, what is actually better.


> Or are you suggesting this would be an optional spkg (for now), which means your examples would have to be optional for now?
> 
> Here follow a couple silly comments that don't actually review much, but might still be worthwhile to ponder.
> * Missing "to": `in order make it faster` 

Thanks.


> * A *lot* of the examples refer to Michael Brickenstein, which seems somewhat less than advisable.  I mean no disrespect here - clearly he is contributing loads and deserves citations!  But for the first-time reader of this documentation, it would be nice to have a bigger variety of citations, perhaps even beyond Sage components to the subcomponents.  For instance, the ones in the bibtex patch.

You are right. It is more a coincidence than anything else; still, it has to be changed.


> * What does [trac-3317-example-usage.patch] exactly have an example of?  I see the `@cites(citable_items.slimgb)` - is this demonstrating that we get the same thing through the new decorator as we would have from `sage.misc.citation`?  This comment is probably just my ignorance speaking, feel free to ignore it.

I won't :-).
For this citation system, it is indispensable, that the decorator gets widespread into sage. In my opinion, it is best if people decorate their own functions (and possibly make their own bibtex-entries). The example shows, how a function should be decorated.
(The deprecation-message can be uncommented later, as soon as the "new" citation system is more accurate than the old one.)



---

archive/issue_comments_017552.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jhpalmieri](#comment:9):\n> Should some of the new code (e.g., `citation/__init__.py`) be in the reference manual?\n\nEhm .. I think so, but don't know. Still, I'm quite a newbie.",
    "created_at": "2011-08-15T07:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17552",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jhpalmieri](#comment:9):
> Should some of the new code (e.g., `citation/__init__.py`) be in the reference manual?

Ehm .. I think so, but don't know. Still, I'm quite a newbie.



---

archive/issue_comments_017553.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nCorrected some of the errors and included my benchmark results for the decorated pass-function (in `citation/__init__.py`'s `_benchmark_`-function).\n\nAnother problem came to my mind: If a user tries to make an instance of one of the citables, strange things will happen. But I'm not sure, if we should really care about that.\n\nIs the documentation alright?\n\n\nCheers.",
    "created_at": "2011-08-16T15:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17553",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:13" align="right">comment:13</div>

Corrected some of the errors and included my benchmark results for the decorated pass-function (in `citation/__init__.py`'s `_benchmark_`-function).

Another problem came to my mind: If a user tries to make an instance of one of the citables, strange things will happen. But I'm not sure, if we should really care about that.

Is the documentation alright?


Cheers.



---

archive/issue_events_035831.json:
```json
{
    "actor": "https://github.com/sagetrac-ranosch",
    "created_at": "2011-08-26T11:56:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35831"
}
```



---

archive/issue_comments_017554.json:
```json
{
    "body": "Author: **Niels Ranosch, Michael Brickenstein, Burcin Erocal**",
    "created_at": "2011-08-26T11:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17554",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Author: **Niels Ranosch, Michael Brickenstein, Burcin Erocal**



---

archive/issue_comments_017555.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe benchmarking results are available on [http://sage-citation.blogspot.com/2011/08/awful-benchmarks.html](http://sage-citation.blogspot.com/2011/08/awful-benchmarks.html) and [https://bitbucket.org/niels_mfo/sage-citation/src/74ea62a5c9b3/benchmark/](https://bitbucket.org/niels_mfo/sage-citation/src/74ea62a5c9b3/benchmark/).\n\nI still think, it would be best, if pybtex would become a standard package.\n\nIs there any work needed for the reference manual (referring to jhpalmieri's comment)?",
    "created_at": "2011-08-26T11:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17555",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:14" align="right">comment:14</div>

The benchmarking results are available on [http://sage-citation.blogspot.com/2011/08/awful-benchmarks.html](http://sage-citation.blogspot.com/2011/08/awful-benchmarks.html) and [https://bitbucket.org/niels_mfo/sage-citation/src/74ea62a5c9b3/benchmark/](https://bitbucket.org/niels_mfo/sage-citation/src/74ea62a5c9b3/benchmark/).

I still think, it would be best, if pybtex would become a standard package.

Is there any work needed for the reference manual (referring to jhpalmieri's comment)?



---

archive/issue_comments_017556.json:
```json
{
    "body": "Changed keywords from **citations** to **citations, sd34**",
    "created_at": "2011-09-26T11:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17556",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Changed keywords from **citations** to **citations, sd34**



---

archive/issue_comments_017557.json:
```json
{
    "body": "Dependencies: **#11851, #11852**",
    "created_at": "2011-09-26T14:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17557",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Dependencies: **#11851, #11852**



---

archive/issue_comments_017558.json:
```json
{
    "body": "bibtex-data of some components",
    "created_at": "2011-09-27T16:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17558",
    "user": "https://github.com/sagetrac-ranosch"
}
```

bibtex-data of some components



---

archive/issue_comments_017559.json:
```json
{
    "body": "Attachment: **[trac-3317-bib-data.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bib-data.patch.gz)**",
    "created_at": "2011-09-27T16:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17559",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Attachment: **[trac-3317-bib-data.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bib-data.patch.gz)**



---

archive/issue_comments_017560.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac-3317-example-usage.2.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.2.patch.gz)**\n\nUploaded an updated version (with the sage citation included) and accidently added `trac-3317-example-usage.2.patch` ... please ignore this file.",
    "created_at": "2011-09-27T16:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17560",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac-3317-example-usage.2.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.2.patch.gz)**

Uploaded an updated version (with the sage citation included) and accidently added `trac-3317-example-usage.2.patch` ... please ignore this file.



---

archive/issue_comments_017561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,10 @@\n Sage could use some sort of citation system that identifies what components/packages are used in a given computation or worksheet.  After some discussion, it is unclear what the architecture of that should be.\n+\n+---\n+\n+Please ignore `trac-3317-example-usage.2.patch`.\n+\n+Only apply:\n+* `trac-3317-citation-system.patch`\n+* `trac-3317-bib-data.patch`\n+* `trac-3317-example-usage.patch`\n``````\n",
    "created_at": "2011-09-27T16:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17561",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,10 @@
 Sage could use some sort of citation system that identifies what components/packages are used in a given computation or worksheet.  After some discussion, it is unclear what the architecture of that should be.
+
+---
+
+Please ignore `trac-3317-example-usage.2.patch`.
+
+Only apply:
+* `trac-3317-citation-system.patch`
+* `trac-3317-bib-data.patch`
+* `trac-3317-example-usage.patch`
``````




---

archive/issue_comments_017562.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI'm not convinced that it is the best idea to have it so that anytime a function is called we have to log that its citation, even in the case where we don't care about that data.",
    "created_at": "2011-12-17T20:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17562",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:18" align="right">comment:18</div>

I'm not convinced that it is the best idea to have it so that anytime a function is called we have to log that its citation, even in the case where we don't care about that data.



---

archive/issue_comments_017563.json:
```json
{
    "body": "Reviewer: **itaibn**",
    "created_at": "2012-04-30T04:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17563",
    "user": "https://github.com/itaibn"
}
```

Reviewer: **itaibn**



---

archive/issue_events_035832.json:
```json
{
    "actor": "https://github.com/itaibn",
    "created_at": "2012-05-01T11:48:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35832"
}
```



---

archive/issue_events_035833.json:
```json
{
    "actor": "https://github.com/itaibn",
    "created_at": "2012-05-01T11:48:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35833"
}
```



---

archive/issue_comments_017564.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,5 @@\n * `trac-3317-citation-system.patch`\n * `trac-3317-bib-data.patch`\n * `trac-3317-example-usage.patch`\n+\n+This patch depends on `pybtex`, found here: [http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg](http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg).\n``````\n",
    "created_at": "2012-05-01T11:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17564",
    "user": "https://github.com/itaibn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,5 @@
 * `trac-3317-citation-system.patch`
 * `trac-3317-bib-data.patch`
 * `trac-3317-example-usage.patch`
+
+This patch depends on `pybtex`, found here: [http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg](http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg).
``````




---

archive/issue_comments_017565.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis patch doesn't fail nicely when you don't have `pybtex`. I didn't know it was a dependency and so sage was unable to start. I modified the ticket to indicate the dependency.",
    "created_at": "2012-05-01T11:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17565",
    "user": "https://github.com/itaibn"
}
```

<div id="comment:20" align="right">comment:20</div>

This patch doesn't fail nicely when you don't have `pybtex`. I didn't know it was a dependency and so sage was unable to start. I modified the ticket to indicate the dependency.



---

archive/issue_comments_017566.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@itaibn](#comment:20):\n> This patch doesn't fail nicely when you don't have `pybtex`. I didn't know it was a dependency and so sage was unable to start. I modified the ticket to indicate the dependency.\n\nThe dependency had been explicitly mentioned in the ticket already. Since the only intention of this ticket is to integrate pybtex into Sage, it make sense to explicitly mention the spkg for convenience. \n\nBut you also set the ticket to `needs_work`. The authors might be interested what you require them to change. (You say that Sage won't start, but this is true for all integration patches when you forget to install the spkg in question.)",
    "created_at": "2012-05-02T07:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17566",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@itaibn](#comment:20):
> This patch doesn't fail nicely when you don't have `pybtex`. I didn't know it was a dependency and so sage was unable to start. I modified the ticket to indicate the dependency.

The dependency had been explicitly mentioned in the ticket already. Since the only intention of this ticket is to integrate pybtex into Sage, it make sense to explicitly mention the spkg for convenience. 

But you also set the ticket to `needs_work`. The authors might be interested what you require them to change. (You say that Sage won't start, but this is true for all integration patches when you forget to install the spkg in question.)



---

archive/issue_comments_017567.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@alexanderdreyer](#comment:21):\n> The dependency had been explicitly mentioned in the ticket already. Since the only intention of this ticket is to integrate pybtex into Sage, it make sense to explicitly mention the spkg for convenience. \n\nCorrection myself: of course it is not the **only** intention of the ticket, but an **important one**.",
    "created_at": "2012-05-02T07:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17567",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@alexanderdreyer](#comment:21):
> The dependency had been explicitly mentioned in the ticket already. Since the only intention of this ticket is to integrate pybtex into Sage, it make sense to explicitly mention the spkg for convenience. 

Correction myself: of course it is not the **only** intention of the ticket, but an **important one**.



---

archive/issue_events_035834.json:
```json
{
    "actor": "https://github.com/itaibn",
    "created_at": "2012-05-02T22:33:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35834"
}
```



---

archive/issue_events_035835.json:
```json
{
    "actor": "https://github.com/itaibn",
    "created_at": "2012-05-02T22:33:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35835"
}
```



---

archive/issue_comments_017568.json:
```json
{
    "body": "Changed reviewer from **itaibn** to none",
    "created_at": "2012-05-02T22:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17568",
    "user": "https://github.com/itaibn"
}
```

Changed reviewer from **itaibn** to none



---

archive/issue_comments_017569.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI'm sorry, I didn't read the ticket description carefully enough. I have modified the ticket to redact my earlier modifications.",
    "created_at": "2012-05-02T22:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17569",
    "user": "https://github.com/itaibn"
}
```

<div id="comment:23" align="right">comment:23</div>

I'm sorry, I didn't read the ticket description carefully enough. I have modified the ticket to redact my earlier modifications.



---

archive/issue_comments_017570.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,3 @@\n * `trac-3317-citation-system.patch`\n * `trac-3317-bib-data.patch`\n * `trac-3317-example-usage.patch`\n-\n-This patch depends on `pybtex`, found here: [http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg](http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg).\n``````\n",
    "created_at": "2012-05-02T22:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17570",
    "user": "https://github.com/itaibn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,3 @@
 * `trac-3317-citation-system.patch`
 * `trac-3317-bib-data.patch`
 * `trac-3317-example-usage.patch`
-
-This patch depends on `pybtex`, found here: [http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg](http://sage.math.washington.edu/home/burcin/spkg/pybtex-0.15.spkg).
``````




---

archive/issue_comments_017571.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSorry for not having responded.\n\nReplying to [@mwhansen](#comment:18):\n> I'm not convinced that it is the best idea to have it so that anytime a function is called we have to log that its citation, even in the case where we don't care about that data.\n\nWhat exactly are your concerns? Speed? Integrity?\n\nIn my opinion it would be very nice to have tracked the used components, no matter if we care for this data. And it's not meant to log every function call. Only rather important functions should be decorated (could say \"cite-worthy\", but that's a vague term). Maybe there should be rules on what makes some worth citing in Sage.\n\n---\n\nReplying to [@itaibn](#comment:20):\n\nWell thanks for pointing out, that it might be unclear that you need the spkg. I thought it will be enough if the dependency is mentioned as the dependency of the corresponding ticket, but I'm willing to change the description if that's not clear enough.\n\nI'm currently updating the spkg to a newer version, should I directly include the link to it when done?\n\n---\n\nReplying to [@alexanderdreyer](#comment:22):\n\nThe intention of this ticket (as far as I see it) is to track sage's components and their citations. Pybtex is our tool of choice. Therefore, yes, it is important.",
    "created_at": "2012-05-22T09:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17571",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:24" align="right">comment:24</div>

Sorry for not having responded.

Replying to [@mwhansen](#comment:18):
> I'm not convinced that it is the best idea to have it so that anytime a function is called we have to log that its citation, even in the case where we don't care about that data.

What exactly are your concerns? Speed? Integrity?

In my opinion it would be very nice to have tracked the used components, no matter if we care for this data. And it's not meant to log every function call. Only rather important functions should be decorated (could say "cite-worthy", but that's a vague term). Maybe there should be rules on what makes some worth citing in Sage.

---

Replying to [@itaibn](#comment:20):

Well thanks for pointing out, that it might be unclear that you need the spkg. I thought it will be enough if the dependency is mentioned as the dependency of the corresponding ticket, but I'm willing to change the description if that's not clear enough.

I'm currently updating the spkg to a newer version, should I directly include the link to it when done?

---

Replying to [@alexanderdreyer](#comment:22):

The intention of this ticket (as far as I see it) is to track sage's components and their citations. Pybtex is our tool of choice. Therefore, yes, it is important.



---

archive/issue_comments_017572.json:
```json
{
    "body": "Attachment: **[trac-3317-citation-system-integrated.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)**\n\nNew citation system",
    "created_at": "2012-05-28T15:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17572",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Attachment: **[trac-3317-citation-system-integrated.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)**

New citation system



---

archive/issue_comments_017573.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nFixed bugs and doctests.",
    "created_at": "2012-05-28T16:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17573",
    "user": "https://github.com/sagetrac-ranosch"
}
```

<div id="comment:25" align="right">comment:25</div>

Fixed bugs and doctests.



---

archive/issue_comments_017574.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,6 @@\n \n ---\n \n-Please ignore `trac-3317-example-usage.2.patch`.\n-\n Only apply:\n-* `trac-3317-citation-system.patch`\n-* `trac-3317-bib-data.patch`\n-* `trac-3317-example-usage.patch`\n+* [trac-3317-citation-system-integrated.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)\n+* [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)\n``````\n",
    "created_at": "2012-05-28T16:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17574",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,6 @@
 
 ---
 
-Please ignore `trac-3317-example-usage.2.patch`.
-
 Only apply:
-* `trac-3317-citation-system.patch`
-* `trac-3317-bib-data.patch`
-* `trac-3317-example-usage.patch`
+* [trac-3317-citation-system-integrated.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)
+* [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)
``````




---

archive/issue_comments_017575.json:
```json
{
    "body": "environment changes for the citation system",
    "created_at": "2012-05-28T22:43:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17575",
    "user": "https://github.com/sagetrac-ranosch"
}
```

environment changes for the citation system



---

archive/issue_comments_017576.json:
```json
{
    "body": "Attachment: **[trac-3317-citation-environment.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)**\n\nAttachment: **[trac-3317-citation-system.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)**\n\nNew citation system",
    "created_at": "2012-05-28T22:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17576",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Attachment: **[trac-3317-citation-environment.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)**

Attachment: **[trac-3317-citation-system.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)**

New citation system



---

archive/issue_comments_017577.json:
```json
{
    "body": "bibtex-data of some components",
    "created_at": "2012-05-28T22:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17577",
    "user": "https://github.com/sagetrac-ranosch"
}
```

bibtex-data of some components



---

archive/issue_comments_017578.json:
```json
{
    "body": "Attachment: **[trac-3317-bibtex-data.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)**\n\nAttachment: **[trac-3317-example-usage.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)**\n\nExample usage in multipolynomial-libsingular",
    "created_at": "2012-05-28T22:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17578",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Attachment: **[trac-3317-bibtex-data.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)**

Attachment: **[trac-3317-example-usage.patch.gz](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)**

Example usage in multipolynomial-libsingular



---

archive/issue_comments_017579.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,7 @@\n ---\n \n Only apply:\n-* [trac-3317-citation-system-integrated.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)\n+* [trac-3317-citation-environment.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)\n+* [trac-3317-citation-system.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)\n+* [trac-3317-bibtex-data.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)\n * [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)\n``````\n",
    "created_at": "2012-05-28T22:47:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17579",
    "user": "https://github.com/sagetrac-ranosch"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,7 @@
 ---
 
 Only apply:
-* [trac-3317-citation-system-integrated.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system-integrated.patch.gz)
+* [trac-3317-citation-environment.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-environment.patch.gz)
+* [trac-3317-citation-system.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-citation-system.patch.gz)
+* [trac-3317-bibtex-data.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-bibtex-data.patch.gz)
 * [trac-3317-example-usage.patch](https://github.com/sagemath/sage/files/ticket3317/trac-3317-example-usage.patch.gz)
``````




---

archive/issue_comments_017580.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nwould it be possible to add in the description some concrete example demonstrating what functionality this ticket adds to Sage?\n\nPaul",
    "created_at": "2014-08-25T15:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17580",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:27" align="right">comment:27</div>

would it be possible to add in the description some concrete example demonstrating what functionality this ticket adds to Sage?

Paul



---

archive/issue_events_035836.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2014-08-27T11:58:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35836"
}
```



---

archive/issue_comments_017581.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,48 @@\n-Sage could use some sort of citation system that identifies what components/packages are used in a given computation or worksheet.  After some discussion, it is unclear what the architecture of that should be.\n+This ticket implements a citation tracking system for Sage which can give fine grained information on the algorithms and implementations used for a specific computation.\n+This is in contrast to the current method in `sage.misc.citation` that relies on running a smaller example through the profiler.\n+\n+The new citation module allows developers to add annotations with citation data in the code directly via decorators tuned to minimize performance overhead. Citations can be provided and obtained in several different formats, thanks to the [pybtex](http://pybtex.sourceforge.net/) package. This includes bibtex and plain text output.\n+\n+Sample user session:\n+\n+```\n+sage: R.<x,y,z> = QQ[]\n+sage: print citations\n+[1] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. \n+{\\sc Singular} {3-1-3} --- {A} computer algebra system for polynomial\n+computations. 2011, http://www.singular.uni-kl.de.\n+sage: p = z^2 + 1; q = z^3 + 2\n+sage: I = (p*q^2, y-z^2)*R\n+sage: t = I.complete_primary_decomposition()\n+sage: print citations\n+[1] Takeshi Shimoyama and Kazuhiro Yokoyama. Localization and primary\n+decomposition of polynomial ideals. J. Symb. Comput., 22:247-277,\n+September 1996.\n+[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\\tt\n+    primdec.lib}. {A} {\\sc Singular} library for primary decomposition.\n+Part of the {\\sc Singular} distribution, May 2001.\n+[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\\sc\n+    Singular} \\{3-1-3} --- {A} computer algebra system for polynomial\n+    computations. 2011, http://www.singular.uni-kl.de.\n+```\n+\n+If a different algorithm is requested, the citations reflect this change:\n+\n+```\n+sage: citations.clear()\n+sage: t = I.complete_primary_decomposition(algorithm='gtz')\n+sage: print citations\n+[1] Patrizia Gianni, Barry Trager, and Gail Zacharias. Groebner bases and\n+primary decomposition of polynomial ideals. J. Symb. Comput., 6:149-167,\n+December 1988.\n+[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\\tt\n+    primdec.lib}. {A} {\\sc Singular} library for primary decomposition.\n+Part of the {\\sc Singular} distribution, May 2001.\n+[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\\sc\n+    Singular} {3-1-3} --- {A} computer algebra system for polynomial\n+computations. 2011, http://www.singular.uni-kl.de.\n+```\n+\n \n ---\n \n``````\n",
    "created_at": "2014-08-27T11:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17581",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,48 @@
-Sage could use some sort of citation system that identifies what components/packages are used in a given computation or worksheet.  After some discussion, it is unclear what the architecture of that should be.
+This ticket implements a citation tracking system for Sage which can give fine grained information on the algorithms and implementations used for a specific computation.
+This is in contrast to the current method in `sage.misc.citation` that relies on running a smaller example through the profiler.
+
+The new citation module allows developers to add annotations with citation data in the code directly via decorators tuned to minimize performance overhead. Citations can be provided and obtained in several different formats, thanks to the [pybtex](http://pybtex.sourceforge.net/) package. This includes bibtex and plain text output.
+
+Sample user session:
+
+```
+sage: R.<x,y,z> = QQ[]
+sage: print citations
+[1] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. 
+{\sc Singular} {3-1-3} --- {A} computer algebra system for polynomial
+computations. 2011, http://www.singular.uni-kl.de.
+sage: p = z^2 + 1; q = z^3 + 2
+sage: I = (p*q^2, y-z^2)*R
+sage: t = I.complete_primary_decomposition()
+sage: print citations
+[1] Takeshi Shimoyama and Kazuhiro Yokoyama. Localization and primary
+decomposition of polynomial ideals. J. Symb. Comput., 22:247-277,
+September 1996.
+[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\tt
+    primdec.lib}. {A} {\sc Singular} library for primary decomposition.
+Part of the {\sc Singular} distribution, May 2001.
+[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\sc
+    Singular} \{3-1-3} --- {A} computer algebra system for polynomial
+    computations. 2011, http://www.singular.uni-kl.de.
+```
+
+If a different algorithm is requested, the citations reflect this change:
+
+```
+sage: citations.clear()
+sage: t = I.complete_primary_decomposition(algorithm='gtz')
+sage: print citations
+[1] Patrizia Gianni, Barry Trager, and Gail Zacharias. Groebner bases and
+primary decomposition of polynomial ideals. J. Symb. Comput., 6:149-167,
+December 1988.
+[2] Gerhard Pfister, Wolfram Decker, and Hans Schoenemann. {\tt
+    primdec.lib}. {A} {\sc Singular} library for primary decomposition.
+Part of the {\sc Singular} distribution, May 2001.
+[3] W. Decker, G.-M. Greuel, G. Pfister, and H. Schoenemann. {\sc
+    Singular} {3-1-3} --- {A} computer algebra system for polynomial
+computations. 2011, http://www.singular.uni-kl.de.
+```
+
 
 ---
 
``````




---

archive/issue_events_035837.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-13T14:03:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35837"
}
```



---

archive/issue_events_035838.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-21T17:04:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35838"
}
```



---

archive/issue_events_035839.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-21T17:04:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3317#event-35839"
}
```



---

archive/issue_comments_017582.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2016-04-21T17:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17582",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_017583.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThe patches do not apply anymore (not too surprising after so many years.)",
    "created_at": "2016-04-21T17:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17583",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:31" align="right">comment:31</div>

The patches do not apply anymore (not too surprising after so many years.)



---

archive/issue_comments_017584.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nTo be honest I like the approach used by `citation.pyx` better because it does not add any performance overhead unless you care. Then again, the output generated by the patches here is really nice\u2026",
    "created_at": "2016-04-21T17:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3317#issuecomment-17584",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:32" align="right">comment:32</div>

To be honest I like the approach used by `citation.pyx` better because it does not add any performance overhead unless you care. Then again, the output generated by the patches here is really nice…
