# Issue 3940: Add a warnings framework to Sage

archive/issues_003940.json:
```json
{
    "body": "The builtin python warnings framework allows filtering on subclasses of warnings.  This would be useful to make a sage warnings framework, with different types of sage-specific warnings.\n\nHere, I've added a directory and a basic file with a NumericalPrecisionWarning class that could be triggered, for example, in the eigenvalue computations.\n\n**Assignee:** cwitty\n\n**Reviewer:** Michael Orlitzky\n\nIssue created by migration from https://trac.sagemath.org/ticket/3940\n\n",
    "closed_at": "2021-10-04T23:44:13Z",
    "created_at": "2008-08-24T00:09:30Z",
    "labels": [
        "component: misc",
        "enhancement",
        "invalid"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Add a warnings framework to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3940",
    "user": "https://github.com/jasongrout"
}
```
The builtin python warnings framework allows filtering on subclasses of warnings.  This would be useful to make a sage warnings framework, with different types of sage-specific warnings.

Here, I've added a directory and a basic file with a NumericalPrecisionWarning class that could be triggered, for example, in the eigenvalue computations.

**Assignee:** cwitty

**Reviewer:** Michael Orlitzky

Issue created by migration from https://trac.sagemath.org/ticket/3940





---

archive/attachments_004122.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "warnings.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3940/warnings.patch",
    "created_at": "2008-08-25T01:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```



---

archive/issue_comments_028577.json:
```json
{
    "body": "<a id='comment:1'></a>\nJason,\n\nnow that #3873 has been merged can you check how much of this patch is still useful/applies?\n\nCheers,\n\nMichael",
    "created_at": "2008-08-25T01:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28577",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
Jason,

now that #3873 has been merged can you check how much of this patch is still useful/applies?

Cheers,

Michael



---

archive/issue_events_011902.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "rename": {
        "from": "Add a warnings framework to Sage",
        "to": "[needs application for functionality] Add a warnings framework to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11902"
}
```



---

archive/issue_comments_028578.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt is useful and it still applies; the application is still sitting in my queue, though.\n\nBasically, there are some situations where computing eigenvalues/vectors should throw a warning.  Also, the plotting code should throw a warning when some situations come up (when the function can't be evaluated at certain points).  The point of this patch is that: \n\n1. It makes it so that sage-related warnings are always shown by default.\n\n2. It makes it very easy to do something with all sage-related warnings (e.g., throw exceptions or ignore them and don't print them out, etc.)\n\nIf you want to wait until I post a patch that uses this, that's fine.",
    "created_at": "2008-08-25T14:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28578",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
It is useful and it still applies; the application is still sitting in my queue, though.

Basically, there are some situations where computing eigenvalues/vectors should throw a warning.  Also, the plotting code should throw a warning when some situations come up (when the function can't be evaluated at certain points).  The point of this patch is that: 

1. It makes it so that sage-related warnings are always shown by default.

2. It makes it very easy to do something with all sage-related warnings (e.g., throw exceptions or ignore them and don't print them out, etc.)

If you want to wait until I post a patch that uses this, that's fine.



---

archive/issue_comments_028579.json:
```json
{
    "body": "<a id='comment:3'></a>\nBTW, one question I had was whether to make a warnings directory or to just put this under the misc directory.",
    "created_at": "2008-08-25T14:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28579",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
BTW, one question I had was whether to make a warnings directory or to just put this under the misc directory.



---

archive/issue_events_011903.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "rename": {
        "from": "[needs application for functionality] Add a warnings framework to Sage",
        "to": "[with patch, needs a reason to apply (i.e., something using it] Add a warnings framework to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11903"
}
```



---

archive/issue_events_011904.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "rename": {
        "from": "[with patch, needs a reason to apply (i.e., something using it] Add a warnings framework to Sage",
        "to": "[with patch, needs a reason to apply (i.e., something using it)] Add a warnings framework to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11904"
}
```



---

archive/issue_comments_028580.json:
```json
{
    "body": "<a id='comment:6'></a>\nIMHO if the warnings framework is expected to stay as one file, then it should be in the misc directory; if you expect the warnings framework to expand to multiple files then maybe a new directory would be more appropriate.",
    "created_at": "2008-08-25T15:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28580",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

<a id='comment:6'></a>
IMHO if the warnings framework is expected to stay as one file, then it should be in the misc directory; if you expect the warnings framework to expand to multiple files then maybe a new directory would be more appropriate.



---

archive/issue_events_011905.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "rename": {
        "from": "[with patch, needs a reason to apply (i.e., something using it)] Add a warnings framework to Sage",
        "to": "Add a warnings framework to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11905"
}
```



---

archive/issue_comments_028581.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-04-16T21:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28581",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_028582.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhat is the status here? Not having a proper summary subject makes files fall through the cracks. \n\nEither this code is useful in which case it should be applied or not. It seems that cwitty's has some pointers, so what's going on here? :)\n\nCheers,\n\nMichael",
    "created_at": "2009-04-16T21:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28582",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:7'></a>
What is the status here? Not having a proper summary subject makes files fall through the cracks. 

Either this code is useful in which case it should be applied or not. It seems that cwitty's has some pointers, so what's going on here? :)

Cheers,

Michael



---

archive/issue_comments_028583.json:
```json
{
    "body": "<a id='comment:8'></a>\nI agree with cwitty:\n\nWork that needs to be done on this patch to get it ready for review:\n\n* Make it one file in the misc directory\n\nIf warnings become a more important part of Sage, then later we can break things into a different directory.",
    "created_at": "2009-04-16T22:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28583",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
I agree with cwitty:

Work that needs to be done on this patch to get it ready for review:

* Make it one file in the misc directory

If warnings become a more important part of Sage, then later we can break things into a different directory.



---

archive/issue_comments_028584.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-04-16T22:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28584",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_review to needs_work.



---

archive/attachments_004123.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sagewarnings.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3940/sagewarnings.py",
    "created_at": "2010-01-18T21:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```



---

archive/issue_comments_028585.json:
```json
{
    "body": "",
    "created_at": "2010-01-18T21:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28585",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```





---

archive/issue_comments_028586.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2010-01-18T21:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28586",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Upstream:** N/A



---

archive/issue_comments_028587.json:
```json
{
    "body": "<a id='comment:9'></a>\nI uploaded sagewarnings.py which derives from Jason's patch.\nThis extension addresses the lack of use cases by providing some warning classes adapted to particular things I've got in mind. This file is for discussion; See the thread on sage-devel.\n\nI renamed the file warning.py to sagewarnings.py. This seems more consistent with python's warnings module to me.",
    "created_at": "2010-01-18T21:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28587",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:9'></a>
I uploaded sagewarnings.py which derives from Jason's patch.
This extension addresses the lack of use cases by providing some warning classes adapted to particular things I've got in mind. This file is for discussion; See the thread on sage-devel.

I renamed the file warning.py to sagewarnings.py. This seems more consistent with python's warnings module to me.



---

archive/issue_events_011906.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11906"
}
```



---

archive/issue_events_011907.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11907"
}
```



---

archive/issue_events_011908.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11908"
}
```



---

archive/issue_events_011909.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11909"
}
```



---

archive/issue_events_011910.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11910"
}
```



---

archive/issue_events_011911.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11911"
}
```



---

archive/issue_events_011912.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11912"
}
```



---

archive/issue_comments_028588.json:
```json
{
    "body": "<a id='comment:14'></a>\noutdated, should close",
    "created_at": "2021-08-26T03:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
outdated, should close



---

archive/issue_comments_028589.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-08-26T03:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28589",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_events_011913.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T03:45:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11913"
}
```



---

archive/issue_events_011914.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T03:45:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11914"
}
```



---

archive/issue_comments_028590.json:
```json
{
    "body": "**Reviewer:** Michael Orlitzky",
    "created_at": "2021-10-04T22:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28590",
    "user": "https://github.com/orlitzky"
}
```

**Reviewer:** Michael Orlitzky



---

archive/issue_comments_028591.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-10-04T22:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28591",
    "user": "https://github.com/orlitzky"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_028592.json:
```json
{
    "body": "<a id='comment:15'></a>\nI think the motivation behind this is still valid. But to proceed today, we'd have to look through `git grep 'warn('` and come up with a set of warnings that map nicely to the existing uses in the tree. (And the names themselves are just asking for a bikeshed thread on sage-devel.) The patches on the ticket are far out-of-date in that respect.\n\nThat said, I could sit down for five minutes and easily come up with a hundred \"wishlist\" items that would be nice to have and that would involve a lot of work that no one is willing to do. So I think after so many years, the small benefit of closing a \"dead\" ticket outweighs whatever we'd gain from keeping this on the wishlist.",
    "created_at": "2021-10-04T22:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3940#issuecomment-28592",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:15'></a>
I think the motivation behind this is still valid. But to proceed today, we'd have to look through `git grep 'warn('` and come up with a set of warnings that map nicely to the existing uses in the tree. (And the names themselves are just asking for a bikeshed thread on sage-devel.) The patches on the ticket are far out-of-date in that respect.

That said, I could sit down for five minutes and easily come up with a hundred "wishlist" items that would be nice to have and that would involve a lot of work that no one is willing to do. So I think after so many years, the small benefit of closing a "dead" ticket outweighs whatever we'd gain from keeping this on the wishlist.



---

archive/issue_events_011915.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-04T23:44:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3940",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3940#event-11915"
}
```
