# Issue 3853: plot.py improvements part 1: Remove all factories

archive/issues_003853.json:
```json
{
    "body": "I replaced all of the factories with individual functions.\n\n**Assignee:** @williamstein\n\n**CC:**  anakha @jasongrout\n\nIssue created by migration from https://trac.sagemath.org/ticket/3853\n\n",
    "closed_at": "2008-08-26T03:44:45Z",
    "created_at": "2008-08-14T17:56:23Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "plot.py improvements part 1: Remove all factories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3853",
    "user": "https://github.com/mwhansen"
}
```
I replaced all of the factories with individual functions.

**Assignee:** @williamstein

**CC:**  anakha @jasongrout

Issue created by migration from https://trac.sagemath.org/ticket/3853





---

archive/attachments_004005.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_3853.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3853/trac_3853.patch",
    "created_at": "2008-08-14T17:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_022676.json:
```json
{
    "body": "",
    "created_at": "2008-08-14T17:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22676",
    "user": "https://github.com/mwhansen"
}
```





---

archive/issue_comments_022677.json:
```json
{
    "body": "**Assignee:** @williamstein",
    "created_at": "2008-08-14T17:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22677",
    "user": "https://github.com/mwhansen"
}
```

**Assignee:** @williamstein



---

archive/issue_events_022341.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-14T17:57:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "milestone": "sage-3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22341"
}
```



---

archive/issue_events_022342.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-14T17:57:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "component: algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22342"
}
```



---

archive/issue_events_022343.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-14T17:57:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "component: graphics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22343"
}
```



---

archive/issue_comments_022678.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"jason\".",
    "created_at": "2008-08-14T18:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22678",
    "user": "https://github.com/jasongrout"
}
```

**Changing keywords** from "" to "jason".



---

archive/issue_comments_022679.json:
```json
{
    "body": "**Changing keywords** from \"jason\" to \"\".",
    "created_at": "2008-08-14T18:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22679",
    "user": "https://github.com/jasongrout"
}
```

**Changing keywords** from "jason" to "".



---

archive/issue_comments_022680.json:
```json
{
    "body": "apply instead of trac_3853.patch",
    "created_at": "2008-08-19T14:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22680",
    "user": "https://github.com/jasongrout"
}
```

apply instead of trac_3853.patch



---

archive/attachments_004006.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_3853-rebased-3.1.1-trac_3880.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3853/trac_3853-rebased-3.1.1-trac_3880.patch",
    "created_at": "2008-08-19T16:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_022681.json:
```json
{
    "body": "<a id='comment:5'></a>\nExtra things this patch does:\n\n`line([(0,0,0),(1,1,1)])` no longer produces a 3d line, but a 2d line from the first 2 coordinates.  Use line3d to get a 3d line.\n\n`line(object)` no longer tries object.plot() first, which is a very, very good thing, since it is natural to assume that line(object) will be something like a line, but object.plot() could be *anything*.\n\n`line` no longer has a \"coerce\" argument; all input data is always coerced to float.  I've changed this to use numpy to convert to float; currently, that's a bit faster, from some tests that wstein ran.  As wstein mentioned on IRC, we should try to replace the float conversion with a snippet of Cython.\n\n`text` used to make 3d text when a 3d point was passed; now it only makes 2d text.  Use the text3d for 3d text.",
    "created_at": "2008-08-19T16:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22681",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
Extra things this patch does:

`line([(0,0,0),(1,1,1)])` no longer produces a 3d line, but a 2d line from the first 2 coordinates.  Use line3d to get a 3d line.

`line(object)` no longer tries object.plot() first, which is a very, very good thing, since it is natural to assume that line(object) will be something like a line, but object.plot() could be *anything*.

`line` no longer has a "coerce" argument; all input data is always coerced to float.  I've changed this to use numpy to convert to float; currently, that's a bit faster, from some tests that wstein ran.  As wstein mentioned on IRC, we should try to replace the float conversion with a snippet of Cython.

`text` used to make 3d text when a 3d point was passed; now it only makes 2d text.  Use the text3d for 3d text.



---

archive/issue_comments_022682.json:
```json
{
    "body": "<a id='comment:6'></a>\nwell, that coerce comment should really be: I changed this to use numpy in one case; the case where we need to separate the x-values and y-values still coerces to float no matter what.  I guess the \"line\" function, a user-visible function, shouldn't have a coerce=False option; it's too unsafe.",
    "created_at": "2008-08-19T16:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22682",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
well, that coerce comment should really be: I changed this to use numpy in one case; the case where we need to separate the x-values and y-values still coerces to float no matter what.  I guess the "line" function, a user-visible function, shouldn't have a coerce=False option; it's too unsafe.



---

archive/issue_comments_022683.json:
```json
{
    "body": "<a id='comment:7'></a>\nI take that back; I took back out the numpy stuff; we should just make a general cython function that ensures that a list is coerced to float.",
    "created_at": "2008-08-19T16:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22683",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
I take that back; I took back out the numpy stuff; we should just make a general cython function that ensures that a list is coerced to float.



---

archive/issue_comments_022684.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat last patch also streamlines a few things and makes a few things more consistent.",
    "created_at": "2008-08-19T16:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22684",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
That last patch also streamlines a few things and makes a few things more consistent.



---

archive/issue_comments_022685.json:
```json
{
    "body": "<a id='comment:9'></a>\nDespite the name trac_3880 in the referee patch, it really is the referee patch for this ticket!",
    "created_at": "2008-08-19T17:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22685",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
Despite the name trac_3880 in the referee patch, it really is the referee patch for this ticket!



---

archive/issue_comments_022686.json:
```json
{
    "body": "<a id='comment:10'></a>\nreferee patch updated to correct documentation and doctests, plus simplify code in xydata... function.",
    "created_at": "2008-08-19T19:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22686",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
referee patch updated to correct documentation and doctests, plus simplify code in xydata... function.



---

archive/issue_comments_022687.json:
```json
{
    "body": "<a id='comment:11'></a>\nplus throw some errors when trying to do line() or text() and get back a 3d object.",
    "created_at": "2008-08-19T19:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22687",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:11'></a>
plus throw some errors when trying to do line() or text() and get back a 3d object.



---

archive/issue_comments_022688.json:
```json
{
    "body": "<a id='comment:12'></a>\nthere are still some doctest errors from the referee patch",
    "created_at": "2008-08-19T21:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22688",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'></a>
there are still some doctest errors from the referee patch



---

archive/attachments_004007.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_3880-referee.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3853/trac_3880-referee.patch",
    "created_at": "2008-08-21T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_022689.json:
```json
{
    "body": "<a id='comment:13'></a>\nupdated referee patch to fix some more things.",
    "created_at": "2008-08-21T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22689",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
updated referee patch to fix some more things.



---

archive/issue_comments_022690.json:
```json
{
    "body": "<a id='comment:14'></a>\nPositive review for the initial part (mhansen's part).  The referee patch adds enough functionality that it probably ought to be reviewed as well.\n\nSo, apply trac_3853-rebased-3.1.1-trac_3880.patch and then the referee patch to review/merge this ticket.",
    "created_at": "2008-08-21T22:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22690",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:14'></a>
Positive review for the initial part (mhansen's part).  The referee patch adds enough functionality that it probably ought to be reviewed as well.

So, apply trac_3853-rebased-3.1.1-trac_3880.patch and then the referee patch to review/merge this ticket.



---

archive/issue_comments_022691.json:
```json
{
    "body": "<a id='comment:15'></a>\nI think now there is one doctest in plot.py that gives a weird error (it's a doctesting error, not a sage error, I think).",
    "created_at": "2008-08-21T22:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22691",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>
I think now there is one doctest in plot.py that gives a weird error (it's a doctesting error, not a sage error, I think).



---

archive/issue_comments_022692.json:
```json
{
    "body": "<a id='comment:16'></a>\nApply \n\ntrac_3853-rebased-3.1.1-trac_3880.patch\ntrac_3880-referee.patch \ntrac_3853-fixes.patch \n\nin order.",
    "created_at": "2008-08-26T02:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22692",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:16'></a>
Apply 

trac_3853-rebased-3.1.1-trac_3880.patch
trac_3880-referee.patch 
trac_3853-fixes.patch 

in order.



---

archive/issue_events_022344.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-26T02:06:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22344"
}
```



---

archive/issue_events_022345.json:
```json
{
    "actor": "https://github.com/jicama",
    "created_at": "2008-08-26T02:38:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22345"
}
```



---

archive/issue_events_022346.json:
```json
{
    "actor": "https://github.com/jicama",
    "created_at": "2008-08-26T02:38:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22346"
}
```



---

archive/issue_comments_022693.json:
```json
{
    "body": "<a id='comment:17'></a>\nThere was a thread about the proposed new behavior of line:\n\nline([(0,0,0),(1,1,1)]) no longer produces a 3d line, but a 2d line from the first 2 coordinates. Use line3d to get a 3d line.\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/6f4b382145c09546\n\nAll the comments were negative.  That needs to be addressed, right?\n\nI suspect I may be overstepping my bounds by changing this from positive review to needs work--if so, I'll accept an appropriate wrist slapping.",
    "created_at": "2008-08-26T02:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22693",
    "user": "https://github.com/jicama"
}
```

<a id='comment:17'></a>
There was a thread about the proposed new behavior of line:

line([(0,0,0),(1,1,1)]) no longer produces a 3d line, but a 2d line from the first 2 coordinates. Use line3d to get a 3d line.

http://groups.google.com/group/sage-devel/browse_thread/thread/6f4b382145c09546

All the comments were negative.  That needs to be addressed, right?

I suspect I may be overstepping my bounds by changing this from positive review to needs work--if so, I'll accept an appropriate wrist slapping.



---

archive/issue_events_022347.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-26T03:01:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22347"
}
```



---

archive/issue_events_022348.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-26T03:01:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22348"
}
```



---

archive/attachments_004008.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_3853-fixes.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket3853/trac_3853-fixes.2.patch",
    "created_at": "2008-08-26T03:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_022694.json:
```json
{
    "body": "<a id='comment:18'></a>\n",
    "created_at": "2008-08-26T03:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22694",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:18'></a>




---

archive/issue_comments_022695.json:
```json
{
    "body": "<a id='comment:19'></a>\nThis looks good to me, it restores the old behavior. If something else is desired it should be dealt with via a new ticket since this code should go in and would bitrot quickly.\n\nCheers,\n\nMichael",
    "created_at": "2008-08-26T03:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22695",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:19'></a>
This looks good to me, it restores the old behavior. If something else is desired it should be dealt with via a new ticket since this code should go in and would bitrot quickly.

Cheers,

Michael



---

archive/issue_events_022349.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-26T03:24:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22349"
}
```



---

archive/issue_events_022350.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-26T03:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22350"
}
```



---

archive/issue_events_022351.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-26T03:44:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22351"
}
```



---

archive/issue_events_022352.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-26T03:44:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-22352"
}
```



---

archive/issue_comments_022696.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerged trac_3853-rebased-3.1.1-trac_3880.patch, trac_3880-referee.patch and trac_3853-fixes.2.patch in Sage 3.1.2.alpha1",
    "created_at": "2008-08-26T03:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-22696",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:20'></a>
Merged trac_3853-rebased-3.1.1-trac_3880.patch, trac_3880-referee.patch and trac_3853-fixes.2.patch in Sage 3.1.2.alpha1
