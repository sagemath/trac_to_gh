# Issue 3853: [with patch, positive review] plot.py improvements part 1: Remove all factories

archive/issues_003853.json:
```json
{
    "body": "I replaced all of the factories with individual functions.\n\nAssignee: @williamstein\n\nCC:  anakha @jasongrout\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/3853\n\n",
    "closed_at": "2008-08-26T03:44:45Z",
    "created_at": "2008-08-14T17:56:23Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "[with patch, positive review] plot.py improvements part 1: Remove all factories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/3853",
    "user": "https://github.com/mwhansen"
}
```
I replaced all of the factories with individual functions.

Assignee: @williamstein

CC:  anakha @jasongrout

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/3853





---

archive/issue_comments_029644.json:
```json
{
    "body": "Attachment [trac_3853.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853.patch) by @mwhansen created at 2008-08-14 17:56:50",
    "created_at": "2008-08-14T17:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29644",
    "user": "https://github.com/mwhansen"
}
```

Attachment [trac_3853.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853.patch) by @mwhansen created at 2008-08-14 17:56:50



---

archive/issue_comments_029645.json:
```json
{
    "body": "Changing assignee from tbd to @williamstein.",
    "created_at": "2008-08-14T17:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29645",
    "user": "https://github.com/mwhansen"
}
```

Changing assignee from tbd to @williamstein.



---

archive/issue_events_008815.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-14T17:57:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "milestone": "sage-3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-8815"
}
```



---

archive/issue_comments_029646.json:
```json
{
    "body": "Changing component from algebra to graphics.",
    "created_at": "2008-08-14T17:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29646",
    "user": "https://github.com/mwhansen"
}
```

Changing component from algebra to graphics.



---

archive/issue_comments_029647.json:
```json
{
    "body": "Changing keywords from \"\" to \"jason\".",
    "created_at": "2008-08-14T18:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29647",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "" to "jason".



---

archive/issue_comments_029648.json:
```json
{
    "body": "Changing keywords from \"jason\" to \"\".",
    "created_at": "2008-08-14T18:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29648",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "jason" to "".



---

archive/issue_comments_029649.json:
```json
{
    "body": "apply instead of trac_3853.patch",
    "created_at": "2008-08-19T14:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29649",
    "user": "https://github.com/jasongrout"
}
```

apply instead of trac_3853.patch



---

archive/issue_comments_029650.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [trac_3853-rebased-3.1.1-trac_3880.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853-rebased-3.1.1-trac_3880.patch) by @jasongrout created at 2008-08-19 16:48:13\n\nExtra things this patch does:\n\n`line([(0,0,0),(1,1,1)])` no longer produces a 3d line, but a 2d line from the first 2 coordinates.  Use line3d to get a 3d line.\n\n`line(object)` no longer tries object.plot() first, which is a very, very good thing, since it is natural to assume that line(object) will be something like a line, but object.plot() could be *anything*.\n\n`line` no longer has a \"coerce\" argument; all input data is always coerced to float.  I've changed this to use numpy to convert to float; currently, that's a bit faster, from some tests that wstein ran.  As wstein mentioned on IRC, we should try to replace the float conversion with a snippet of Cython.\n\n`text` used to make 3d text when a 3d point was passed; now it only makes 2d text.  Use the text3d for 3d text.",
    "created_at": "2008-08-19T16:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29650",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
Attachment [trac_3853-rebased-3.1.1-trac_3880.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853-rebased-3.1.1-trac_3880.patch) by @jasongrout created at 2008-08-19 16:48:13

Extra things this patch does:

`line([(0,0,0),(1,1,1)])` no longer produces a 3d line, but a 2d line from the first 2 coordinates.  Use line3d to get a 3d line.

`line(object)` no longer tries object.plot() first, which is a very, very good thing, since it is natural to assume that line(object) will be something like a line, but object.plot() could be *anything*.

`line` no longer has a "coerce" argument; all input data is always coerced to float.  I've changed this to use numpy to convert to float; currently, that's a bit faster, from some tests that wstein ran.  As wstein mentioned on IRC, we should try to replace the float conversion with a snippet of Cython.

`text` used to make 3d text when a 3d point was passed; now it only makes 2d text.  Use the text3d for 3d text.



---

archive/issue_comments_029651.json:
```json
{
    "body": "<a id='comment:6'></a>\nwell, that coerce comment should really be: I changed this to use numpy in one case; the case where we need to separate the x-values and y-values still coerces to float no matter what.  I guess the \"line\" function, a user-visible function, shouldn't have a coerce=False option; it's too unsafe.",
    "created_at": "2008-08-19T16:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29651",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
well, that coerce comment should really be: I changed this to use numpy in one case; the case where we need to separate the x-values and y-values still coerces to float no matter what.  I guess the "line" function, a user-visible function, shouldn't have a coerce=False option; it's too unsafe.



---

archive/issue_comments_029652.json:
```json
{
    "body": "<a id='comment:7'></a>\nI take that back; I took back out the numpy stuff; we should just make a general cython function that ensures that a list is coerced to float.",
    "created_at": "2008-08-19T16:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29652",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
I take that back; I took back out the numpy stuff; we should just make a general cython function that ensures that a list is coerced to float.



---

archive/issue_comments_029653.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat last patch also streamlines a few things and makes a few things more consistent.",
    "created_at": "2008-08-19T16:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29653",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
That last patch also streamlines a few things and makes a few things more consistent.



---

archive/issue_comments_029654.json:
```json
{
    "body": "<a id='comment:9'></a>\nDespite the name trac_3880 in the referee patch, it really is the referee patch for this ticket!",
    "created_at": "2008-08-19T17:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29654",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
Despite the name trac_3880 in the referee patch, it really is the referee patch for this ticket!



---

archive/issue_comments_029655.json:
```json
{
    "body": "<a id='comment:10'></a>\nreferee patch updated to correct documentation and doctests, plus simplify code in xydata... function.",
    "created_at": "2008-08-19T19:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29655",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
referee patch updated to correct documentation and doctests, plus simplify code in xydata... function.



---

archive/issue_comments_029656.json:
```json
{
    "body": "<a id='comment:11'></a>\nplus throw some errors when trying to do line() or text() and get back a 3d object.",
    "created_at": "2008-08-19T19:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29656",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:11'></a>
plus throw some errors when trying to do line() or text() and get back a 3d object.



---

archive/issue_comments_029657.json:
```json
{
    "body": "<a id='comment:12'></a>\nthere are still some doctest errors from the referee patch",
    "created_at": "2008-08-19T21:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29657",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'></a>
there are still some doctest errors from the referee patch



---

archive/issue_comments_029658.json:
```json
{
    "body": "<a id='comment:13'></a>\nAttachment [trac_3880-referee.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3880-referee.patch) by @jasongrout created at 2008-08-21 21:59:02\n\nupdated referee patch to fix some more things.",
    "created_at": "2008-08-21T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29658",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
Attachment [trac_3880-referee.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3880-referee.patch) by @jasongrout created at 2008-08-21 21:59:02

updated referee patch to fix some more things.



---

archive/issue_comments_029659.json:
```json
{
    "body": "<a id='comment:14'></a>\nPositive review for the initial part (mhansen's part).  The referee patch adds enough functionality that it probably ought to be reviewed as well.\n\nSo, apply trac_3853-rebased-3.1.1-trac_3880.patch and then the referee patch to review/merge this ticket.",
    "created_at": "2008-08-21T22:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29659",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:14'></a>
Positive review for the initial part (mhansen's part).  The referee patch adds enough functionality that it probably ought to be reviewed as well.

So, apply trac_3853-rebased-3.1.1-trac_3880.patch and then the referee patch to review/merge this ticket.



---

archive/issue_comments_029660.json:
```json
{
    "body": "<a id='comment:15'></a>\nI think now there is one doctest in plot.py that gives a weird error (it's a doctesting error, not a sage error, I think).",
    "created_at": "2008-08-21T22:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29660",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>
I think now there is one doctest in plot.py that gives a weird error (it's a doctesting error, not a sage error, I think).



---

archive/issue_comments_029661.json:
```json
{
    "body": "<a id='comment:16'></a>\nApply \n\ntrac_3853-rebased-3.1.1-trac_3880.patch\ntrac_3880-referee.patch \ntrac_3853-fixes.patch \n\nin order.",
    "created_at": "2008-08-26T02:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29661",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:16'></a>
Apply 

trac_3853-rebased-3.1.1-trac_3880.patch
trac_3880-referee.patch 
trac_3853-fixes.patch 

in order.



---

archive/issue_comments_029662.json:
```json
{
    "body": "<a id='comment:17'></a>\nThere was a thread about the proposed new behavior of line:\n\nline([(0,0,0),(1,1,1)]) no longer produces a 3d line, but a 2d line from the first 2 coordinates. Use line3d to get a 3d line.\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/6f4b382145c09546\n\nAll the comments were negative.  That needs to be addressed, right?\n\nI suspect I may be overstepping my bounds by changing this from positive review to needs work--if so, I'll accept an appropriate wrist slapping.",
    "created_at": "2008-08-26T02:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29662",
    "user": "https://github.com/jicama"
}
```

<a id='comment:17'></a>
There was a thread about the proposed new behavior of line:

line([(0,0,0),(1,1,1)]) no longer produces a 3d line, but a 2d line from the first 2 coordinates. Use line3d to get a 3d line.

http://groups.google.com/group/sage-devel/browse_thread/thread/6f4b382145c09546

All the comments were negative.  That needs to be addressed, right?

I suspect I may be overstepping my bounds by changing this from positive review to needs work--if so, I'll accept an appropriate wrist slapping.



---

archive/issue_comments_029663.json:
```json
{
    "body": "<a id='comment:18'></a>\nAttachment [trac_3853-fixes.2.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853-fixes.2.patch) by @mwhansen created at 2008-08-26 03:01:21",
    "created_at": "2008-08-26T03:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29663",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:18'></a>
Attachment [trac_3853-fixes.2.patch](tarball://root/attachments/some-uuid/ticket3853/trac_3853-fixes.2.patch) by @mwhansen created at 2008-08-26 03:01:21



---

archive/issue_comments_029664.json:
```json
{
    "body": "<a id='comment:19'></a>\nThis looks good to me, it restores the old behavior. If something else is desired it should be dealt with via a new ticket since this code should go in and would bitrot quickly.\n\nCheers,\n\nMichael",
    "created_at": "2008-08-26T03:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29664",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:19'></a>
This looks good to me, it restores the old behavior. If something else is desired it should be dealt with via a new ticket since this code should go in and would bitrot quickly.

Cheers,

Michael



---

archive/issue_comments_029665.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-08-26T03:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29665",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_events_008816.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-08-26T03:44:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/3853#event-8816"
}
```



---

archive/issue_comments_029666.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerged trac_3853-rebased-3.1.1-trac_3880.patch, trac_3880-referee.patch and trac_3853-fixes.2.patch in Sage 3.1.2.alpha1",
    "created_at": "2008-08-26T03:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/3853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/3853#issuecomment-29666",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:20'></a>
Merged trac_3853-rebased-3.1.1-trac_3880.patch, trac_3880-referee.patch and trac_3853-fixes.2.patch in Sage 3.1.2.alpha1
