# Issue 3891: polynomial sqrt method

archive/issues_003891.json:
```json
{
    "assignees": [],
    "body": "John Cremona requests a sqrt for polynomial rings:\n\n```\nI have needed the following.  g(x) is a univariate polynomial which I\nknow to be a square, and i want its square root.  g.factor() does too\nmuch, as does g.squarefree_decomposition().  I can get the sqrt via\ng.gcd(g.derivative()), which works in my case since I know that the\nsqrt is itself square-free.\n```\n\n\nCC:  @JohnCremona\n\nKeywords: **polynomial, square root**\n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3891_\n\n",
    "closed_at": "2008-11-24T00:47:04Z",
    "created_at": "2008-08-18T14:00:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "polynomial sqrt method",
    "type": "issue",
    "updated_at": "2008-11-24T00:47:04Z",
    "url": "https://github.com/sagemath/sage/issues/3891",
    "user": "https://github.com/sagetrac-jbmohler"
}
```
John Cremona requests a sqrt for polynomial rings:

```
I have needed the following.  g(x) is a univariate polynomial which I
know to be a square, and i want its square root.  g.factor() does too
much, as does g.squarefree_decomposition().  I can get the sqrt via
g.gcd(g.derivative()), which works in my case since I know that the
sqrt is itself square-free.
```


CC:  @JohnCremona

Keywords: **polynomial, square root**

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/3891_





---

archive/issue_events_043393.json:
```json
{
    "actor": "https://github.com/sagetrac-jbmohler",
    "created_at": "2008-08-18T14:00:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "milestone_number": null,
    "milestone_title": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43393"
}
```



---

archive/issue_events_043394.json:
```json
{
    "actor": "https://github.com/sagetrac-jbmohler",
    "created_at": "2008-08-18T14:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43394"
}
```



---

archive/issue_events_043395.json:
```json
{
    "actor": "https://github.com/sagetrac-jbmohler",
    "created_at": "2008-08-18T14:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43395"
}
```



---

archive/issue_events_043396.json:
```json
{
    "actor": "https://github.com/sagetrac-jbmohler",
    "created_at": "2008-08-18T14:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43396"
}
```



---

archive/issue_events_043397.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-19T21:56:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43397"
}
```



---

archive/issue_events_043398.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-19T21:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43398"
}
```



---

archive/issue_events_043399.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-19T21:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43399"
}
```



---

archive/issue_comments_021642.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor an integer n, there are two options: n.sqrt() or n.is_square().  n.sqrt() returns a square root by passing to a larger ring (like CC) if it needs to, while n.is_square() returns True (and optionally returns a square root) if n is the square of an integer, false otherwise.  I think that we need an is_square method for polynomials, not a sqrt method.\n\nThe attached patch provides an is_square method.  It also fixes a bug in squarefree_decomposition: that method would barf for the wrong reason if you gave it a polynomial over a finite field.  Now it barfs for the right reason.",
    "created_at": "2008-11-19T21:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21642",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

For an integer n, there are two options: n.sqrt() or n.is_square().  n.sqrt() returns a square root by passing to a larger ring (like CC) if it needs to, while n.is_square() returns True (and optionally returns a square root) if n is the square of an integer, false otherwise.  I think that we need an is_square method for polynomials, not a sqrt method.

The attached patch provides an is_square method.  It also fixes a bug in squarefree_decomposition: that method would barf for the wrong reason if you gave it a polynomial over a finite field.  Now it barfs for the right reason.



---

archive/issue_comments_021643.json:
```json
{
    "body": "Changed keywords from none to **polynomial, square root**",
    "created_at": "2008-11-19T21:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21643",
    "user": "https://github.com/jhpalmieri"
}
```

Changed keywords from none to **polynomial, square root**



---

archive/issue_events_043400.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-19T21:56:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43400"
}
```



---

archive/issue_events_043401.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-19T21:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43401"
}
```



---

archive/issue_comments_021644.json:
```json
{
    "body": "Attachment: **[polynomial_is_square.patch.gz](https://github.com/sagemath/sage/files/ticket3891/polynomial_is_square.patch.gz)**",
    "created_at": "2008-11-19T21:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21644",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[polynomial_is_square.patch.gz](https://github.com/sagemath/sage/files/ticket3891/polynomial_is_square.patch.gz)**



---

archive/issue_comments_021645.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[trac3891-reviewer-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket3891/trac3891-reviewer-fixes.patch.gz)**\n\nPositive review for polynomial_is_square.patch, after my own trac3891-reviewer-fixes.patch is applied (so only my patch needs further review).\n\nI think Cremona may have been hoping for a polynomial sqrt that was more efficient than squarefree_decomposition; maybe that should be opened as a new wishlist ticket after this one is closed.",
    "created_at": "2008-11-23T00:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21645",
    "user": "https://github.com/sagetrac-cwitty"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[trac3891-reviewer-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket3891/trac3891-reviewer-fixes.patch.gz)**

Positive review for polynomial_is_square.patch, after my own trac3891-reviewer-fixes.patch is applied (so only my patch needs further review).

I think Cremona may have been hoping for a polynomial sqrt that was more efficient than squarefree_decomposition; maybe that should be opened as a new wishlist ticket after this one is closed.



---

archive/issue_comments_021646.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe reviewer's patch looks good to me, and all tests passed.  (I based the docstring for is_square on the one for the is_square method for integers, but your modifications make it better.)",
    "created_at": "2008-11-23T23:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21646",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

The reviewer's patch looks good to me, and all tests passed.  (I based the docstring for is_square on the one for the is_square method for integers, but your modifications make it better.)



---

archive/issue_events_043402.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-23T23:37:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43402"
}
```



---

archive/issue_events_043403.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-11-23T23:37:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43403"
}
```



---

archive/issue_events_043404.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-24T00:47:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43404"
}
```



---

archive/issue_events_043405.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-24T00:47:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3891#event-43405"
}
```



---

archive/issue_comments_021647.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMerged both patches in Sage 3.2.1.alpha1",
    "created_at": "2008-11-24T00:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3891#issuecomment-21647",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

Merged both patches in Sage 3.2.1.alpha1
