# Issue 3873: Doctest should test for warnings

archive/issues_003873.json:
```json
{
    "assignees": [],
    "body": "This patch makes it so that warnings are output to stdout and are compared in the doctest framework.  To doctest a warning, do something like:\n\n```\ndef mytest():\n    r\"\"\"\n    EXAMPLES:\n        sage: warnings.warn(\"hi\")\n        /...:1: UserWarning: hi\n        #...\n        \"\"\"\n    pass\n```\n\nThis patch will probably break a few doctests (that gave warnings before, but the warnings were ignored).\n\nAssignee: **mabshoff**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3873_\n\n",
    "closed_at": "2008-08-25T01:13:06Z",
    "created_at": "2008-08-15T11:05:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Doctest should test for warnings",
    "type": "issue",
    "updated_at": "2008-08-25T01:13:06Z",
    "url": "https://github.com/sagemath/sage/issues/3873",
    "user": "https://github.com/jasongrout"
}
```
This patch makes it so that warnings are output to stdout and are compared in the doctest framework.  To doctest a warning, do something like:

```
def mytest():
    r"""
    EXAMPLES:
        sage: warnings.warn("hi")
        /...:1: UserWarning: hi
        #...
        """
    pass
```

This patch will probably break a few doctests (that gave warnings before, but the warnings were ignored).

Assignee: **mabshoff**

_Issue created by migration from https://trac.sagemath.org/ticket/3873_





---

archive/issue_events_038332.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-08-15T11:05:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "milestone_number": null,
    "milestone_title": "sage-3.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38332"
}
```



---

archive/issue_events_038333.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-08-15T11:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38333"
}
```



---

archive/issue_events_038334.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-08-15T11:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38334"
}
```



---

archive/issue_events_038335.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-08-15T11:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38335"
}
```



---

archive/issue_comments_022405.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[doctest-warnings.patch.gz](https://github.com/sagemath/sage/files/ticket3873/doctest-warnings.patch.gz)**",
    "created_at": "2008-08-15T21:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22405",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[doctest-warnings.patch.gz](https://github.com/sagemath/sage/files/ticket3873/doctest-warnings.patch.gz)**



---

archive/issue_events_038336.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-08-15T21:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38336"
}
```



---

archive/issue_comments_022406.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThis patch should be applied to whatever repository includes $SAGE_LOCAL/bin/",
    "created_at": "2008-08-16T16:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22406",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'>Comment 2:</a>
This patch should be applied to whatever repository includes $SAGE_LOCAL/bin/



---

archive/issue_comments_022407.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThis depends on #3940 (which imports the warnings module on sage startup).",
    "created_at": "2008-08-24T00:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22407",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'>Comment 3:</a>
This depends on #3940 (which imports the warnings module on sage startup).



---

archive/issue_comments_022408.json:
```json
{
    "body": "Attachment: **[trac3873-sage_scripts.patch.gz](https://github.com/sagemath/sage/files/ticket3873/trac3873-sage_scripts.patch.gz)**",
    "created_at": "2008-08-24T00:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22408",
    "user": "https://github.com/sagetrac-cwitty"
}
```

Attachment: **[trac3873-sage_scripts.patch.gz](https://github.com/sagemath/sage/files/ticket3873/trac3873-sage_scripts.patch.gz)**



---

archive/issue_comments_022409.json:
```json
{
    "body": "Attachment: **[trac3873-doctest-warnings.patch.gz](https://github.com/sagemath/sage/files/ticket3873/trac3873-doctest-warnings.patch.gz)**",
    "created_at": "2008-08-24T00:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22409",
    "user": "https://github.com/sagetrac-cwitty"
}
```

Attachment: **[trac3873-doctest-warnings.patch.gz](https://github.com/sagemath/sage/files/ticket3873/trac3873-doctest-warnings.patch.gz)**



---

archive/issue_comments_022410.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nPositive review for Jason's patch; my two patches need to be reviewed.  The first patch (to be applied to sage_scripts after Jason's patch) fixes Jason's patch to not depend on #3940 any more, and to get rid of useless filenames (that would have to be elided from every doctest).\n\nThe second patch fixes the two places in the Sage library that generate warnings in doctests.",
    "created_at": "2008-08-24T00:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22410",
    "user": "https://github.com/sagetrac-cwitty"
}
```

<a id='comment:4'>Comment 4:</a>
Positive review for Jason's patch; my two patches need to be reviewed.  The first patch (to be applied to sage_scripts after Jason's patch) fixes Jason's patch to not depend on #3940 any more, and to get rid of useless filenames (that would have to be elided from every doctest).

The second patch fixes the two places in the Sage library that generate warnings in doctests.



---

archive/issue_comments_022411.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nNice patches, but how does #3940 relate here?\n\nCheers,\n\nMichael",
    "created_at": "2008-08-25T00:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22411",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'>Comment 5:</a>
Nice patches, but how does #3940 relate here?

Cheers,

Michael



---

archive/issue_events_038337.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-25T00:25:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38337"
}
```



---

archive/issue_events_038338.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-25T00:25:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38338"
}
```



---

archive/issue_comments_022412.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nPositive review for Carl's patches.\n\nCheers,\n\nMichael",
    "created_at": "2008-08-25T00:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22412",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:6'>Comment 6:</a>
Positive review for Carl's patches.

Cheers,

Michael



---

archive/issue_comments_022413.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nMerged all three patches in Sage 3.1.2.alpha1",
    "created_at": "2008-08-25T01:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3873#issuecomment-22413",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:7'>Comment 7:</a>
Merged all three patches in Sage 3.1.2.alpha1



---

archive/issue_events_038339.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-25T01:13:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38339"
}
```



---

archive/issue_events_038340.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-25T01:13:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3873",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3873#event-38340"
}
```
