# Issue 3797: several improvements to graph generation

archive/issues_003797.json:
```json
{
    "assignees": [],
    "body": "This patch:\n\n1. Fixes a bug in sparse6 strings for n=0.\n2. Implements generation of graphs with loops.\n3. Implements generation of graphs with specified degree sequence.\n\nThe last two have been verified to some extent using Sloane's tables. It's all in the documentation.\n\nAssignee: **@rlmill**\n\nCC:  @sagetrac-ekirkman\n\n_Issue created by migration from https://trac.sagemath.org/ticket/3797_\n\n",
    "closed_at": "2008-08-10T06:53:45Z",
    "created_at": "2008-08-09T22:25:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "several improvements to graph generation",
    "type": "issue",
    "updated_at": "2008-08-10T06:53:45Z",
    "url": "https://github.com/sagemath/sage/issues/3797",
    "user": "https://github.com/rlmill"
}
```
This patch:

1. Fixes a bug in sparse6 strings for n=0.
2. Implements generation of graphs with loops.
3. Implements generation of graphs with specified degree sequence.

The last two have been verified to some extent using Sloane's tables. It's all in the documentation.

Assignee: **@rlmill**

CC:  @sagetrac-ekirkman

_Issue created by migration from https://trac.sagemath.org/ticket/3797_





---

archive/issue_events_037426.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-08-09T22:25:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "milestone_number": null,
    "milestone_title": "sage-3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37426"
}
```



---

archive/issue_events_037427.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-08-09T22:25:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37427"
}
```



---

archive/issue_events_037428.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-08-09T22:25:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37428"
}
```



---

archive/issue_events_037429.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-08-09T22:25:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37429"
}
```



---

archive/issue_events_037430.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-08-09T22:25:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37430"
}
```



---

archive/issue_comments_021853.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAttachment: **[trac3797-graph_generator_improvements.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-graph_generator_improvements.patch.gz)**",
    "created_at": "2008-08-09T23:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21853",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:1" align="right">Comment 1</div>

Attachment: **[trac3797-graph_generator_improvements.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-graph_generator_improvements.patch.gz)**



---

archive/issue_comments_021854.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2008-08-09T23:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21854",
    "user": "https://github.com/rlmill"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_021855.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nDepends on #3789.",
    "created_at": "2008-08-10T03:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21855",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:2" align="right">Comment 2</div>

Depends on #3789.



---

archive/issue_comments_021856.json:
```json
{
    "body": "Attachment: **[trac3797-augment_by_verts.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-augment_by_verts.patch.gz)**",
    "created_at": "2008-08-10T03:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21856",
    "user": "https://github.com/rlmill"
}
```

Attachment: **[trac3797-augment_by_verts.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-augment_by_verts.patch.gz)**



---

archive/issue_events_037431.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-08-10T06:04:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37431"
}
```



---

archive/issue_comments_021857.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nFrom the submission:\n\n```\nThis patch:\n\n   1. Fixes a bug in sparse6 strings for n=0.\n```\n\nI think this bugfix looks good.\n\n```\n   2. Implements generation of graphs with loops.\n```\n\nThis looks good -- I can't guarantee that it works, but it looks fine.\n\n```\n   3. Implements generation of graphs with specified degree sequence.\n```\n\nIt's not clear what degree sequence means.  I can derive it from the code, but maybe change\n\n```\n \t241\t        deg_seq -- a sequence of degrees for the graph to have. If specified, \n \t242\t            augment, property and size are all ignored. \n```\nto something like\n\n```\n \t241\t        deg_seq -- a sequence of non-negative integers.  The degrees of the vertices of the generated graph will be the specified integers, in some order.  If specified, \n \t242\t            augment, property and size are all ignored. \n```\n\nIs that even clearer?",
    "created_at": "2008-08-10T06:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21857",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:3" align="right">Comment 3</div>

From the submission:

```
This patch:

   1. Fixes a bug in sparse6 strings for n=0.
```

I think this bugfix looks good.

```
   2. Implements generation of graphs with loops.
```

This looks good -- I can't guarantee that it works, but it looks fine.

```
   3. Implements generation of graphs with specified degree sequence.
```

It's not clear what degree sequence means.  I can derive it from the code, but maybe change

```
 	241	        deg_seq -- a sequence of degrees for the graph to have. If specified, 
 	242	            augment, property and size are all ignored. 
```
to something like

```
 	241	        deg_seq -- a sequence of non-negative integers.  The degrees of the vertices of the generated graph will be the specified integers, in some order.  If specified, 
 	242	            augment, property and size are all ignored. 
```

Is that even clearer?



---

archive/issue_comments_021858.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAttachment: **[trac3797-docs.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-docs.patch.gz)**\n\nLooks good!",
    "created_at": "2008-08-10T06:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21858",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:4" align="right">Comment 4</div>

Attachment: **[trac3797-docs.patch.gz](https://github.com/sagemath/sage/files/ticket3797/trac3797-docs.patch.gz)**

Looks good!



---

archive/issue_comments_021859.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nMerged all three patches in Sage 3.1.alpha1",
    "created_at": "2008-08-10T06:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/3797#issuecomment-21859",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">Comment 5</div>

Merged all three patches in Sage 3.1.alpha1



---

archive/issue_events_037432.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-10T06:53:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37432"
}
```



---

archive/issue_events_037433.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-08-10T06:53:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/3797",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/3797#event-37433"
}
```
