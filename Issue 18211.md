# Issue 18211: Add test if a matroid is binary

archive/issues_018211.json:
```json
{
    "body": "CC:  stefan\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18448\n\n",
    "created_at": "2015-05-19T11:51:48Z",
    "labels": [],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add test if a matroid is binary",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18211",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```
CC:  stefan



Issue created by migration from https://trac.sagemath.org/ticket/18448





---

archive/issue_comments_245583.json:
```json
{
    "body": "All done. I also noted that BinaryMatroid._is_isomorphism() did not revert to _is_field_isomorphism if both matroids were binary, repaired that omission.\n----\nNew commits:",
    "created_at": "2015-05-20T08:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245583",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

All done. I also noted that BinaryMatroid._is_isomorphism() did not revert to _is_field_isomorphism if both matroids were binary, repaired that omission.
----
New commits:



---

archive/issue_comments_245584.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to matroid theory.",
    "created_at": "2015-05-20T08:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245584",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing component from PLEASE CHANGE to matroid theory.



---

archive/issue_comments_245585.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-05-20T08:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245585",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_245586.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-20T08:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245586",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_245587.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2015-05-20T08:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245587",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing priority from major to minor.



---

archive/issue_events_051938.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Rudi",
    "created_at": "2015-05-22T14:45:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18211#event-51938"
}
```



---

archive/issue_comments_245588.json:
```json
{
    "body": "Set assignee to Rudi.",
    "created_at": "2015-05-25T09:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245588",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Set assignee to Rudi.



---

archive/issue_comments_245589.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-25T10:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245590.json:
```json
{
    "body": "According to the patchbot, there is a doctest problem in \"src/sage/interfaces/expect.py\". \n\nMy patch does not even go near \"src/sage/interfaces/expect.py\". So what could be the problem here?",
    "created_at": "2015-05-25T19:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245590",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

According to the patchbot, there is a doctest problem in "src/sage/interfaces/expect.py". 

My patch does not even go near "src/sage/interfaces/expect.py". So what could be the problem here?



---

archive/issue_comments_245591.json:
```json
{
    "body": "Replying to [comment:6 Rudi]:\n> According to the patchbot, there is a doctest problem in \"src/sage/interfaces/expect.py\". \n> \n> My patch does not even go near \"src/sage/interfaces/expect.py\". So what could be the problem here?\n\nNo worries. This is completely independent of your ticket! Singular is causing randoml troubles in expect (at least on the patchbot librae). This is a known issue.",
    "created_at": "2015-05-25T21:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245591",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:6 Rudi]:
> According to the patchbot, there is a doctest problem in "src/sage/interfaces/expect.py". 
> 
> My patch does not even go near "src/sage/interfaces/expect.py". So what could be the problem here?

No worries. This is completely independent of your ticket! Singular is causing randoml troubles in expect (at least on the patchbot librae). This is a known issue.



---

archive/issue_comments_245592.json:
```json
{
    "body": "Replying to [comment:7 vdelecroix]:\n> No worries. This is completely independent of your ticket! Singular is causing randoml troubles in expect (at least on the patchbot librae). This is a known issue.\n\nThanks for the reassurance. I've been having the strangest problems working on patches this last week. Glad to hear it's not all due to my own ignorance ;).",
    "created_at": "2015-05-25T21:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245592",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:7 vdelecroix]:
> No worries. This is completely independent of your ticket! Singular is causing randoml troubles in expect (at least on the patchbot librae). This is a known issue.

Thanks for the reassurance. I've been having the strangest problems working on patches this last week. Glad to hear it's not all due to my own ignorance ;).



---

archive/issue_comments_245593.json:
```json
{
    "body": "From looking through it, there are a couple of things to fix:\n\n- Instead of `type(self) == BinaryMatroid`, you should do `isinstance(self, BinaryMatriod)` (or even better, for `is_binary`, I would just overwrite this method in that class which returns `True`).\n- You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\\B| \\leq 1``.",
    "created_at": "2015-05-31T06:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245593",
    "user": "https://github.com/tscrim"
}
```

From looking through it, there are a couple of things to fix:

- Instead of `type(self) == BinaryMatroid`, you should do `isinstance(self, BinaryMatriod)` (or even better, for `is_binary`, I would just overwrite this method in that class which returns `True`).
- You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\B| \leq 1``.



---

archive/issue_comments_245594.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-31T09:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245595.json:
```json
{
    "body": "Hi Travis,\n\nthanks for the feedback.\n\n> - Instead of `type(self) == BinaryMatroid`, you should do `isinstance(self, BinaryMatriod)` (or even better, for `is_binary`, I would just overwrite this method in that class which returns `True`).\n\nI overwrote the method for BinaryMatroid and RegularMatroid, completely agree that this is a better solution. \n\nWhy is `isinstance(self, BinaryMatroid)` preferred over over `type(self) == BinaryMatroid`? For a class like BinaryMatroid that has no derived classes, both seem to accomplish the exact same thing.\n\n> - You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\\B| \\leq 1``.\n\nI improved the docstring, with an eye on adjacent methods.\n\nI wrote dozens of docstrings just before we added the matroid monster patch (essentialy all the docstrings were written after we wrote all the code), but apparently the rules for proper docstring writing have escaped me (or perhaps Stefan repaired my bad formatting during the review, so that I never even realized all my errors). Anyway, I should learn to do it properly.  I'll take a look at the developer guide.",
    "created_at": "2015-05-31T09:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245595",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Travis,

thanks for the feedback.

> - Instead of `type(self) == BinaryMatroid`, you should do `isinstance(self, BinaryMatriod)` (or even better, for `is_binary`, I would just overwrite this method in that class which returns `True`).

I overwrote the method for BinaryMatroid and RegularMatroid, completely agree that this is a better solution. 

Why is `isinstance(self, BinaryMatroid)` preferred over over `type(self) == BinaryMatroid`? For a class like BinaryMatroid that has no derived classes, both seem to accomplish the exact same thing.

> - You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\B| \leq 1``.

I improved the docstring, with an eye on adjacent methods.

I wrote dozens of docstrings just before we added the matroid monster patch (essentialy all the docstrings were written after we wrote all the code), but apparently the rules for proper docstring writing have escaped me (or perhaps Stefan repaired my bad formatting during the review, so that I never even realized all my errors). Anyway, I should learn to do it properly.  I'll take a look at the developer guide.



---

archive/issue_comments_245596.json:
```json
{
    "body": "Replying to [comment:11 Rudi]:\n> thanks for the feedback.\n\nThanks for your work.\n\n> Why is `isinstance(self, BinaryMatroid)` preferred over over `type(self) == BinaryMatroid`? For a class like BinaryMatroid that has no derived classes, both seem to accomplish the exact same thing.\n\nBecause then it checks for subclasses, i.e., if X is an instance of a subclass of `BinaryMatroid`, then `isinstance(X, BinaryMatroid)` returns `True`, whereas `type(X) == BinaryMatroid` returns `False`. Suppose a user has implemented a subclass in private code, then it should work for those subclasses too (since they are suppose to behave as a `BinaryMatroid` would).\n\n> > - You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\\B| \\leq 1``.\n> \n> I improved the docstring, with an eye on adjacent methods.\n> \n> I wrote dozens of docstrings just before we added the matroid monster patch (essentialy all the docstrings were written after we wrote all the code), but apparently the rules for proper docstring writing have escaped me (or perhaps Stefan repaired my bad formatting during the review, so that I never even realized all my errors). Anyway, I should learn to do it properly.  I'll take a look at the developer guide. \n\nIt's a lot better (and overall, your documentation is good), but there's still some work to do:\n\n- The indentation on all blocks with only a single colon should be the same as the base:\n\n```\nINPUT:\n\n- ``randomized_tests`` -- (default: 1) some description here\n```\n\n- You should have (with 2 colons, space, and empty line):\n\n```\n.. SEEALSO::\n\n    :meth:`M.is_binary() <sage.matroids.matroid.Matroid.is_binary>`\n```\n\n- The `EXAMPLES::` block should be followed by an empty line.\n- Change `<=` to `\\leq` (for the interactive doc, we make this substitution, but it will look better in the compiled doc).\n- For the `BinaryMatroid.is_binary` and for `RegularMatroid`, I would just say the `randomized_tests` input is ignored.",
    "created_at": "2015-05-31T17:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245596",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:11 Rudi]:
> thanks for the feedback.

Thanks for your work.

> Why is `isinstance(self, BinaryMatroid)` preferred over over `type(self) == BinaryMatroid`? For a class like BinaryMatroid that has no derived classes, both seem to accomplish the exact same thing.

Because then it checks for subclasses, i.e., if X is an instance of a subclass of `BinaryMatroid`, then `isinstance(X, BinaryMatroid)` returns `True`, whereas `type(X) == BinaryMatroid` returns `False`. Suppose a user has implemented a subclass in private code, then it should work for those subclasses too (since they are suppose to behave as a `BinaryMatroid` would).

> > - You need to fix the documentation of your methods. For example, the `INPUT:` block should only have one colon. You can look at the other nearby methods or ask me if you have any questions. I'd also add some latex formating to things using single backticks, e.g., ``|X\B| \leq 1``.
> 
> I improved the docstring, with an eye on adjacent methods.
> 
> I wrote dozens of docstrings just before we added the matroid monster patch (essentialy all the docstrings were written after we wrote all the code), but apparently the rules for proper docstring writing have escaped me (or perhaps Stefan repaired my bad formatting during the review, so that I never even realized all my errors). Anyway, I should learn to do it properly.  I'll take a look at the developer guide. 

It's a lot better (and overall, your documentation is good), but there's still some work to do:

- The indentation on all blocks with only a single colon should be the same as the base:

```
INPUT:

- ``randomized_tests`` -- (default: 1) some description here
```

- You should have (with 2 colons, space, and empty line):

```
.. SEEALSO::

    :meth:`M.is_binary() <sage.matroids.matroid.Matroid.is_binary>`
```

- The `EXAMPLES::` block should be followed by an empty line.
- Change `<=` to `\leq` (for the interactive doc, we make this substitution, but it will look better in the compiled doc).
- For the `BinaryMatroid.is_binary` and for `RegularMatroid`, I would just say the `randomized_tests` input is ignored.



---

archive/issue_comments_245597.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-31T18:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245597",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245598.json:
```json
{
    "body": "Replying to [comment:12 tscrim]:\n\n> - The indentation on all blocks with only a single colon should be the same as the base:\n> {{{\n> INPUT:\n> \n> - ``randomized_tests`` -- (default: 1) some description here\n> }}}\n> - You should have (with 2 colons, space, and empty line):\n> {{{\n> .. SEEALSO::\n> \n>     :meth:`M.is_binary() <sage.matroids.matroid.Matroid.is_binary>`\n> }}}\n> - The `EXAMPLES::` block should be followed by an empty line.\n> - Change `<=` to `\\leq` (for the interactive doc, we make this substitution, but it will look better in the compiled doc).\n> - For the `BinaryMatroid.is_binary` and for `RegularMatroid`, I would just say the `randomized_tests` input is ignored.\n\nCheck. \n\nThanks again for your help.",
    "created_at": "2015-05-31T18:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245598",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:12 tscrim]:

> - The indentation on all blocks with only a single colon should be the same as the base:
> {{{
> INPUT:
> 
> - ``randomized_tests`` -- (default: 1) some description here
> }}}
> - You should have (with 2 colons, space, and empty line):
> {{{
> .. SEEALSO::
> 
>     :meth:`M.is_binary() <sage.matroids.matroid.Matroid.is_binary>`
> }}}
> - The `EXAMPLES::` block should be followed by an empty line.
> - Change `<=` to `\leq` (for the interactive doc, we make this substitution, but it will look better in the compiled doc).
> - For the `BinaryMatroid.is_binary` and for `RegularMatroid`, I would just say the `randomized_tests` input is ignored.

Check. 

Thanks again for your help.



---

archive/issue_comments_245599.json:
```json
{
    "body": "Two more things. Once fixed you can set a positive review on my behalf.\n\n- You have a `.. SEEALSO:` (missing a colon).\n- Your algorithm blocks should be at same indentation level as the `ALGORITHM:`.\n\nThanks!",
    "created_at": "2015-06-02T06:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245599",
    "user": "https://github.com/tscrim"
}
```

Two more things. Once fixed you can set a positive review on my behalf.

- You have a `.. SEEALSO:` (missing a colon).
- Your algorithm blocks should be at same indentation level as the `ALGORITHM:`.

Thanks!



---

archive/issue_comments_245600.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-03T06:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245601.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-03T06:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245601",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245602.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-06-03T06:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245602",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_245603.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-06-03T06:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245603",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_245604.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-03T06:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245604",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245605.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-06-03T21:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245605",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_245606.json:
```json
{
    "body": "Docs don't build",
    "created_at": "2015-06-03T21:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245606",
    "user": "https://github.com/vbraun"
}
```

Docs don't build



---

archive/issue_comments_245607.json:
```json
{
    "body": "Whoops. The problem is this `|X\\B|`, where it gets interpreted by latex as a command `\\B`, instead I think this should be `|X \\setminus B|`.",
    "created_at": "2015-06-03T21:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245607",
    "user": "https://github.com/tscrim"
}
```

Whoops. The problem is this `|X\B|`, where it gets interpreted by latex as a command `\B`, instead I think this should be `|X \setminus B|`.



---

archive/issue_comments_245608.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-03T21:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245608",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245609.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-03T21:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245609",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_245610.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-03T21:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245610",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245611.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-06-06T13:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245611",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_245612.json:
```json
{
    "body": "Documentation still doesn't build",
    "created_at": "2015-06-06T13:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245612",
    "user": "https://github.com/vbraun"
}
```

Documentation still doesn't build



---

archive/issue_comments_245613.json:
```json
{
    "body": "Another problem was that there was an item that was misaligned.\n\nI made `local_binary_matroid` into a public function since it seems to be more useful than a simple helper function. I also moved the import into the function since it was circular and I couldn't get the doc to build otherwise.\n\nCan you check that the doc also builds for you too? If so, and you agree with my changes, then we can set this back to positive review.\n----\nNew commits:",
    "created_at": "2015-06-06T19:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245613",
    "user": "https://github.com/tscrim"
}
```

Another problem was that there was an item that was misaligned.

I made `local_binary_matroid` into a public function since it seems to be more useful than a simple helper function. I also moved the import into the function since it was circular and I couldn't get the doc to build otherwise.

Can you check that the doc also builds for you too? If so, and you agree with my changes, then we can set this back to positive review.
----
New commits:



---

archive/issue_comments_245614.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-06T19:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245614",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_245615.json:
```json
{
    "body": "Hi Travis,\n\nI was not able to trace that misaligned item myself, so thanks for making those changes. Building docs is not going smoothly on my machine, though it may have nothing to do with this patch:\n\n```\n[ -f local/etc/sage-started.txt ] || local/bin/sage-starts\nbuild/pipestatus \"./sage --docbuild --no-pdf-links all html  2>&1\" \"tee -a logs/dochtml.log\"\nTraceback (most recent call last):\n  File \"/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py\", line 16, in <module>\n    import sphinx.cmdline\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/cmdline.py\", line 18, in <module>\n    from docutils.utils import SystemMessage\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/utils/__init__.py\", line 20, in <module>\n    import docutils.io\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/io.py\", line 18, in <module>\n    from docutils.utils.error_reporting import locale_encoding, ErrorString, ErrorOutput\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/utils/error_reporting.py\", line 47, in <module>\n    locale_encoding = locale.getlocale()[1] or locale.getdefaultlocale()[1]\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python/locale.py\", line 543, in getdefaultlocale\n    return _parse_localename(localename)\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python/locale.py\", line 475, in _parse_localename\n    raise ValueError, 'unknown locale: %s' % localename\nValueError: unknown locale: UTF-8\nmake: *** [doc-html] Error 1\n```\n\n\nAbout making _local_binary_matroid() public... Well now that you bring this up, I agree that getting the actual binary representation itself may be useful to the user too. But with this pair of methods, if the user now wants a verified binary representation, they need to run both methods, one repeating the work of the other. And there would be two public methods in the interface dealing with one issue.\n\nAlso,  next up are ternary and quaternary matroids. For quaternary matroids the situation is more subtle. Unlike `local_binary_matroid`, the `local_quaternary_matroid` method may arrive at the conclusion that there is no quaternary representation. My idea was to let it output `None` in such cases. So then you would have very similar public methods behaving slightly different.\n\nThere may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. \n\nWhat do you think about this? If I promise not to mess up the docstrings this time ...\n\nCheers,\nRudi",
    "created_at": "2015-06-06T20:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245615",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Travis,

I was not able to trace that misaligned item myself, so thanks for making those changes. Building docs is not going smoothly on my machine, though it may have nothing to do with this patch:

```
[ -f local/etc/sage-started.txt ] || local/bin/sage-starts
build/pipestatus "./sage --docbuild --no-pdf-links all html  2>&1" "tee -a logs/dochtml.log"
Traceback (most recent call last):
  File "/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py", line 16, in <module>
    import sphinx.cmdline
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg/sphinx/cmdline.py", line 18, in <module>
    from docutils.utils import SystemMessage
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/utils/__init__.py", line 20, in <module>
    import docutils.io
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/io.py", line 18, in <module>
    from docutils.utils.error_reporting import locale_encoding, ErrorString, ErrorOutput
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python2.7/site-packages/docutils/utils/error_reporting.py", line 47, in <module>
    locale_encoding = locale.getlocale()[1] or locale.getdefaultlocale()[1]
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python/locale.py", line 543, in getdefaultlocale
    return _parse_localename(localename)
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python/locale.py", line 475, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8
make: *** [doc-html] Error 1
```


About making _local_binary_matroid() public... Well now that you bring this up, I agree that getting the actual binary representation itself may be useful to the user too. But with this pair of methods, if the user now wants a verified binary representation, they need to run both methods, one repeating the work of the other. And there would be two public methods in the interface dealing with one issue.

Also,  next up are ternary and quaternary matroids. For quaternary matroids the situation is more subtle. Unlike `local_binary_matroid`, the `local_quaternary_matroid` method may arrive at the conclusion that there is no quaternary representation. My idea was to let it output `None` in such cases. So then you would have very similar public methods behaving slightly different.

There may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. 

What do you think about this? If I promise not to mess up the docstrings this time ...

Cheers,
Rudi



---

archive/issue_comments_245616.json:
```json
{
    "body": "Just \"UTF-8\" is not a valid locale. I'm guessing you are using OSX since that has a long-standing bug there. You need something like\n\n```\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\n```\n",
    "created_at": "2015-06-06T20:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245616",
    "user": "https://github.com/vbraun"
}
```

Just "UTF-8" is not a valid locale. I'm guessing you are using OSX since that has a long-standing bug there. You need something like

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
```




---

archive/issue_comments_245617.json:
```json
{
    "body": "Replying to [comment:28 vbraun]:\n> Just \"UTF-8\" is not a valid locale. I'm guessing you are using OSX since that has a long-standing bug there. You need something like\n> {{{\n> export LC_ALL=en_US.UTF-8\n> export LANG=en_US.UTF-8\n> }}}\nYes, I am on OSX. Sorry, should have mentioned this. Those two command did the job. The docs build without any problems now.",
    "created_at": "2015-06-06T21:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245617",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:28 vbraun]:
> Just "UTF-8" is not a valid locale. I'm guessing you are using OSX since that has a long-standing bug there. You need something like
> {{{
> export LC_ALL=en_US.UTF-8
> export LANG=en_US.UTF-8
> }}}
Yes, I am on OSX. Sorry, should have mentioned this. Those two command did the job. The docs build without any problems now.



---

archive/issue_comments_245618.json:
```json
{
    "body": "Replying to [comment:27 Rudi]:\n> About making _local_binary_matroid() public... Well now that you bring this up, I agree that getting the actual binary representation itself may be useful to the user too. But with this pair of methods, if the user now wants a verified binary representation, they need to run both methods, one repeating the work of the other. And there would be two public methods in the interface dealing with one issue.\n\nFrom my (somewhat limited) understanding, every matroid has a local binary matroid, but it may not be isomorphic to the original matroid. So there are separate concerns (and IMO the user should know from the documentation to call `is_binary` if that is what they really want to check).\n\n> Also,  next up are ternary and quaternary matroids. For quaternary matroids the situation is more subtle. Unlike `local_binary_matroid`, the `local_quaternary_matroid` method may arrive at the conclusion that there is no quaternary representation. My idea was to let it output `None` in such cases. So then you would have very similar public methods behaving slightly different.\n\nYou could either return `None` or raise an error. Both are acceptable to me. Yet this is for a follow-up ticket.\n\n> There may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. \n\nIt actually would work to have 3 methods, one for the local (if my understanding is wrong, then we'd remove this method), `binary_representation()` and `is_binary()`, where we cache the output of `binary_representation()`, and `is_binary` just calls `bool(self.binary_representation())` (or if raising an error sounds better, a try-catch statement).",
    "created_at": "2015-06-07T00:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245618",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:27 Rudi]:
> About making _local_binary_matroid() public... Well now that you bring this up, I agree that getting the actual binary representation itself may be useful to the user too. But with this pair of methods, if the user now wants a verified binary representation, they need to run both methods, one repeating the work of the other. And there would be two public methods in the interface dealing with one issue.

From my (somewhat limited) understanding, every matroid has a local binary matroid, but it may not be isomorphic to the original matroid. So there are separate concerns (and IMO the user should know from the documentation to call `is_binary` if that is what they really want to check).

> Also,  next up are ternary and quaternary matroids. For quaternary matroids the situation is more subtle. Unlike `local_binary_matroid`, the `local_quaternary_matroid` method may arrive at the conclusion that there is no quaternary representation. My idea was to let it output `None` in such cases. So then you would have very similar public methods behaving slightly different.

You could either return `None` or raise an error. Both are acceptable to me. Yet this is for a follow-up ticket.

> There may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. 

It actually would work to have 3 methods, one for the local (if my understanding is wrong, then we'd remove this method), `binary_representation()` and `is_binary()`, where we cache the output of `binary_representation()`, and `is_binary` just calls `bool(self.binary_representation())` (or if raising an error sounds better, a try-catch statement).



---

archive/issue_comments_245619.json:
```json
{
    "body": "Replying to [comment:30 tscrim]:\n\n> > There may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. \n> \n> It actually would work to have 3 methods, one for the local (if my understanding is wrong, then we'd remove this method), `binary_representation()` and `is_binary()`, where we cache the output of `binary_representation()`, and `is_binary` just calls `bool(self.binary_representation())` (or if raising an error sounds better, a try-catch statement).\nBut then we would have 3 public methods. I'm trying to reduce that number to 1, if I can do so  without losing functionality.\n\nI think that once you have computed `self.binary_representation()`, computing `bool(self.binary_representation())` has nothing to do with `class Matroids` anymore, the user can do that themselves. I also prefer to avoid caching if I can do so without complicating things, since I feel the user should be in control of memory usage as much as possible (they may one day want to keep as many matroids in memory as possible, without having a need for all this cached information).  So to my mind, having the method `binary_representation` makes the method `is_binary` redundant. The converse is not true, so that is why I would want to replace `is_binary` with `binary_representation`.\n\nIt is true that any matroid has a `local binary matroid` relative to a basis, but I'm not so sure if this concept appears anywhere in the literature under that name (or any name, it's just an intermediate object). What matters for the user is that they can bypass verification if they already know that the matroid is binary. So I could perhaps fit binary_representation with an optional input `verify = True`, so that if you set `verify = False` you skip the isomorphism testing at the end. Effectively, you then just get the `local_binary_matroid` passed on without extra work. So then I would also prefer to keep a hidden `_local_binary_matroid`.\n\nStefan, if you are tuned to this channel, how do you feel about this? I think we at some point discussed a general policy of not having more than one public method dealing with very similar functionality in Matroid, if possible. But how about this particular function?",
    "created_at": "2015-06-07T11:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245619",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:30 tscrim]:

> > There may be another solution. I could rewrite `is_binary()` to a method `binary_representation()`, which outputs a `BinaryMatroid` equal to `self`, or `None` if no such binary matroid exists. The changes would be minimal. The user could still do `if M.binary_representation():` if they only care about existence. 
> 
> It actually would work to have 3 methods, one for the local (if my understanding is wrong, then we'd remove this method), `binary_representation()` and `is_binary()`, where we cache the output of `binary_representation()`, and `is_binary` just calls `bool(self.binary_representation())` (or if raising an error sounds better, a try-catch statement).
But then we would have 3 public methods. I'm trying to reduce that number to 1, if I can do so  without losing functionality.

I think that once you have computed `self.binary_representation()`, computing `bool(self.binary_representation())` has nothing to do with `class Matroids` anymore, the user can do that themselves. I also prefer to avoid caching if I can do so without complicating things, since I feel the user should be in control of memory usage as much as possible (they may one day want to keep as many matroids in memory as possible, without having a need for all this cached information).  So to my mind, having the method `binary_representation` makes the method `is_binary` redundant. The converse is not true, so that is why I would want to replace `is_binary` with `binary_representation`.

It is true that any matroid has a `local binary matroid` relative to a basis, but I'm not so sure if this concept appears anywhere in the literature under that name (or any name, it's just an intermediate object). What matters for the user is that they can bypass verification if they already know that the matroid is binary. So I could perhaps fit binary_representation with an optional input `verify = True`, so that if you set `verify = False` you skip the isomorphism testing at the end. Effectively, you then just get the `local_binary_matroid` passed on without extra work. So then I would also prefer to keep a hidden `_local_binary_matroid`.

Stefan, if you are tuned to this channel, how do you feel about this? I think we at some point discussed a general policy of not having more than one public method dealing with very similar functionality in Matroid, if possible. But how about this particular function?



---

archive/issue_comments_245620.json:
```json
{
    "body": "How about this?\n----\nNew commits:",
    "created_at": "2015-06-13T17:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245620",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

How about this?
----
New commits:



---

archive/issue_comments_245621.json:
```json
{
    "body": "In `matroid.pyx`, in the documentation for the method `binary_matroid`, under `INPUT:`, the second entry (corresponding to 'verify') has an extra space. Documentation builds after making that change.",
    "created_at": "2015-06-15T06:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245621",
    "user": "https://github.com/kevindilks"
}
```

In `matroid.pyx`, in the documentation for the method `binary_matroid`, under `INPUT:`, the second entry (corresponding to 'verify') has an extra space. Documentation builds after making that change.



---

archive/issue_comments_245622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T08:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245623.json:
```json
{
    "body": "Replying to [comment:34 kdilks]:\n> In `matroid.pyx`, in the documentation for the method `binary_matroid`, under `INPUT:`, the second entry (corresponding to 'verify') has an extra space. Documentation builds after making that change.\n\nThank you for catching that. Docs now build on my machine.",
    "created_at": "2015-06-15T08:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245623",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:34 kdilks]:
> In `matroid.pyx`, in the documentation for the method `binary_matroid`, under `INPUT:`, the second entry (corresponding to 'verify') has an extra space. Documentation builds after making that change.

Thank you for catching that. Docs now build on my machine.



---

archive/issue_comments_245624.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-17T05:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245624",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245625.json:
```json
{
    "body": "Sorry for taking so long to get back to this. If you think `local_binary_matroid` should be hidden and structure the code this way, then I won't object as I don't have a big stake in this. So positive review.",
    "created_at": "2015-06-17T05:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245625",
    "user": "https://github.com/tscrim"
}
```

Sorry for taking so long to get back to this. If you think `local_binary_matroid` should be hidden and structure the code this way, then I won't object as I don't have a big stake in this. So positive review.



---

archive/issue_comments_245626.json:
```json
{
    "body": "Replying to [comment:37 tscrim]:\n> Sorry for taking so long to get back to this. If you think `local_binary_matroid` should be hidden and structure the code this way, then I won't object as I don't have a big stake in this. So positive review.\n\nGreat! And no problem that it took a bit longer. Your criticism helped me a lot throughout and you simply were right that the interface could be better before. So thanks for giving me the opportunity to rethink it, and for doing this extra long review.",
    "created_at": "2015-06-17T08:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245626",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:37 tscrim]:
> Sorry for taking so long to get back to this. If you think `local_binary_matroid` should be hidden and structure the code this way, then I won't object as I don't have a big stake in this. So positive review.

Great! And no problem that it took a bit longer. Your criticism helped me a lot throughout and you simply were right that the interface could be better before. So thanks for giving me the opportunity to rethink it, and for doing this extra long review.



---

archive/issue_events_051939.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-18T17:58:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18211#event-51939"
}
```



---

archive/issue_comments_245627.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-18T17:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18211#issuecomment-245627",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
