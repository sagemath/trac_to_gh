# Issue 28185: Change keyword argument 'verbose' to 'check' in CoordChange.set_inverse(()

Issue created by migration from https://trac.sagemath.org/ticket/28422

Original creator: egourgoulhon

Original creation time: 2019-08-29 14:09:01

CC:  simonking tscrim

Keywords: manifolds, chart, coordinate_change

As pointed out in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/AilDfydrnSI/XhO1EbALEQAJ), the keyword `verbose=True` used to trigger the check of the inverse of a transition map in `CoordChange.set_inverse()` would be better named `check=True`. This performed in this ticket. Moreover, `check=True` is now the default (previously, it was `verbose=False`) and the printed output of the check is improved.


---

Comment by egourgoulhon created at 2019-08-29 15:31:49

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2019-08-29 15:31:49

New commits:


---

Comment by tscrim created at 2019-08-29 23:49:03

I think you should also have a `verbose` option whose default is `False` so it doesn't print all the information with the check (as we should assume the check pass).


---

Comment by egourgoulhon created at 2019-08-30 08:14:57

Replying to [comment:4 tscrim]:
> I think you should also have a `verbose` option whose default is `False` so it doesn't print all the information with the check (as we should assume the check pass).

If we restore a `verbose` option, then there is no point in having `check=True` since the printed output is the only outcome of the check. In particular, no exception is raised if the check is failed. The appreciation of whether the check is passed or not is thus left to the user. This is so because the check can fail when Sage is not capable to simplify enough the output, as with the `atan2` function considered in the `EXAMPLES` section of the documentation.


---

Comment by egourgoulhon created at 2019-09-01 09:30:06

Replying to [comment:5 egourgoulhon]:
> 
> If we restore a `verbose` option, then there is no point in having `check=True` since the printed output is the only outcome of the check. In particular, no exception is raised if the check is failed. The appreciation of whether the check is passed or not is thus left to the user. This is so because the check can fail when Sage is not capable to simplify enough the output, as with the `atan2` function considered in the `EXAMPLES` section of the documentation.

Taking into account the above, a possible use of a `verbose` option would the following: if `check=True`, then 
- for `verbose=True`, print the check details (as they are now)
- for `verbose=False`, print nothing if the check is fully passed (i.e. if the variable `any_failure` defined in the code remains to `False`) and print the check details (as they are now) when some failure has occurred

Would you agree with such a behavior?


---

Comment by tscrim created at 2019-09-01 09:48:40

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-09-01 09:48:40

Ah, I think I misread the code the first time through. I thought it always printed stuff out, but it only does it on failures. So you can disregard my comment. This is good.


---

Comment by egourgoulhon created at 2019-09-01 10:05:07

Replying to [comment:7 tscrim]:
> Ah, I think I misread the code the first time through. I thought it always printed stuff out, but it only does it on failures.

Well actually, in the current version, with `check=True`, it always print something out, even if the check is passed (the only thing that is not printed in that case is the sentence "NB: a failed report can reflect a mere lack of simplification"). Personally, I don't feel uneasy with a function that is verbose when some "interactivity" is implicitly asked in the form "check=True".


---

Comment by tscrim created at 2019-09-01 10:37:08

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2019-09-01 10:37:08

Replying to [comment:8 egourgoulhon]:
> Replying to [comment:7 tscrim]:
> > Ah, I think I misread the code the first time through. I thought it always printed stuff out, but it only does it on failures.
> 
> Well actually, in the current version, with `check=True`, it always print something out, even if the check is passed (the only thing that is not printed in that case is the sentence "NB: a failed report can reflect a mere lack of simplification"). Personally, I don't feel uneasy with a function that is verbose when some "interactivity" is implicitly asked in the form "check=True".

Okay, now I am reading the code more carefully. I don't like it being overly verbose when it passes successfully. I am happy when it prints something on failure, but I don't like the noise when it passes successfully. I feel it just gets in the way. So if you feel there is a benefit to having the data every time, then you should add a `verbose` as you proposed in comment:6.

Addendum - This objection is only when it is the default behavior. If this was something a user had to ask for, then it wouldn't be a problem.


---

Comment by git created at 2019-09-01 17:44:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-09-01 17:46:30

Replying to [comment:9 tscrim]:
> 
> Okay, now I am reading the code more carefully. I don't like it being overly verbose when it passes successfully. I am happy when it prints something on failure, but I don't like the noise when it passes successfully. I feel it just gets in the way. So if you feel there is a benefit to having the data every time, then you should add a `verbose` as you proposed in comment:6.


OK, this is done in the above commit.

> Addendum - This objection is only when it is the default behavior. If this was something a user had to ask for, then it wouldn't be a problem.

OK I see your point.


---

Comment by egourgoulhon created at 2019-09-01 17:46:47

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-09-03 00:40:51

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-09-03 00:40:51

Thank you. LGTM (it is a bit strange that in Python invalid keywords are `TypeError`s, but that is the convention).


---

Comment by egourgoulhon created at 2019-09-03 17:47:21

Thanks for the review!


---

Comment by vbraun created at 2019-09-05 21:33:05

Resolution: fixed
