# Issue 17155: Make list of built-in normal form games

Issue created by migration from https://trac.sagemath.org/ticket/17392

Original creator: kcrisman

Original creation time: 2014-11-24 21:30:23

CC:  vinceknight ncohen

In comment:13:ticket:16333, the idea arises of having built-in normal form games for pedagogical (or other) purposes, similarly to in our discrete math areas.

```
sage: graphs.[tab]
graphs.Balaban10Cage
graphs.Balaban11Cage
graphs.BalancedTree
graphs.BarbellGraph
graphs.BidiakisCube
graphs.BiggsSmithGraph
graphs.BishopGraph
graphs.BrinkmannGraph
<snip>
sage: matroids.[tab]
matroids.AG               matroids.Uniform          matroids.named_matroids
matroids.CompleteGraphic  matroids.Wheel            
matroids.PG               matroids.Whirl  
```

There are quite a few such games out there in the literature that would be assumed as 'standard'.


---

Comment by vinceknight created at 2014-11-24 21:32:59

Oh!!! love this idea, I'd actually forgotten so thanks for opening the ticket! I'll take a careful look through the way this has been done for `graphs` and `matroids` and happy to have a go.


---

Comment by tscrim created at 2014-11-25 05:11:47

Or `algebras` or `crystals` Samus `:P`.


---

Comment by vinceknight created at 2015-03-15 23:44:58

Last 10 new commits:


---

Comment by vinceknight created at 2015-03-15 23:44:58

Changing status from new to needs_review.


---

Comment by vinceknight created at 2015-03-15 23:48:09

James and I have just finished working on this assuming we're on the right path.
Everything is well tested and documented (we think) but let us know (or indeed let us know if you can think of any games that we're missing).

(We decided to follow how things were done for `matroids` as closely as possible.)


---

Comment by kcrisman created at 2015-03-16 15:16:28

I've been very busy lately but I do plan to put this on my docket, looking forward to it!


---

Comment by kcrisman created at 2015-03-16 19:10:37

Okay, I looked at this for all of two minutes and have the following non-mathematical comments.
* Many of these are _very_ standard in the literature.  There should be normative references, whether to an undergraduate text like Straffin or to some other source, such as RAND corp. whitepapers or whatever.
* Many of these games will have many different "versions" in the literature - for instance, your numbers for PD are quite unorthodox, as they are *positive* :-)  Maybe there should be way to specify the actual numbers for each, as they have a standard form in some sense (one could check for these).
* There are a number of evolutionary biology games that are quite interesting that have parameters, and indeed parameters show up in many advanced treatments of such games.  Not sure how this is a useful comment but anyway I think having parameters is a "good thing".  I like Mesterton-Gibbons' treatment of this (AMS STML volume 11).
* Finally, there are some comprehensive listings by e.g. Rapaport et al., Fishburn and Kilgour, and Robinson and Goforth, which might be interesting to include here (or some later ticket) for 2x2 normal form games "types".


---

Comment by vinceknight created at 2015-03-16 19:40:18

> Many of these are very standard in the literature. There should be normative references, whether to an undergraduate text like Straffin or to some other source, such as RAND corp. whitepapers or whatever.

Cool, will add references throughout (see later comments).

> Many of these games will have many different "versions" in the literature - for instance, your numbers for PD are quite unorthodox, as they are positive :-) 

Very help to change it, perhaps once I go through and grab references for each I'll just go with on of the many possible ones (if you are particularly against this one I'll make sure I pick a different one).

> Maybe there should be way to specify the actual numbers for each, as they have a standard form in some sense (one could check for these).

So would your idea for the PD for example, be to have a default standard (as mentioned above) but that one could pass a set of arguments? 

So for example one could pass the RSTP values (see 'Canonical PD payoff matrix' here: http://en.wikipedia.org/wiki/Prisoner%27s_dilemma). I suppose the thing with the PD is that RSTP notation is pretty common and conventional, in all honesty I am not sure they are for some of the others but will investigate.

Each game could have an initialisation test that checks if the values obey the defining inequalities. Let me know if that was what you're thinking and I'll go ahead and get working on it :)

> There are a number of evolutionary biology games that are quite interesting that have parameters, and indeed parameters show up in many advanced treatments of such games. Not sure how this is a useful comment but anyway I think having parameters is a "good thing". I like Mesterton-Gibbons' treatment of this (AMS STML volume 11).

Yeah, not at all against this idea (RSTP is certainly very common and used).

> Finally, there are some comprehensive listings by e.g. Rapaport et al., Fishburn and Kilgour, and Robinson and Goforth, which might be interesting to include here (or some later ticket) for 2x2 normal form games "types".

I'd suggest this be a further ticket as it could actually be something that is added to the normal form game class so that we could for example (a much simpler 'type') just be able to check if any game is symmetric.


---

Comment by kcrisman created at 2015-03-16 20:43:28

> So for example one could pass the RSTP values (see 'Canonical PD payoff matrix' here: http://en.wikipedia.org/wiki/Prisoner%27s_dilemma). I suppose the thing with the PD is that RSTP notation is pretty common and conventional, in all honesty I am not sure they are for some of the others but will investigate.

Yes, exactly.  And if there is no conventional standard, just don't do it and then others could propose a standard as an enhancement.
> 
> Each game could have an initialisation test that checks if the values obey the defining inequalities. Let me know if that was what you're thinking and I'll go ahead and get working on it :)

Yes.


---

Comment by git created at 2015-03-19 03:36:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-03-19 03:39:37

Hi Karl.

I'm pushing the latest set of work I've done on this. I still need to get more references. I am currently at Sage Days 64 so that will have to wait till I get back to my text books in Cardiff but thought I'd push this as it is as I've parametrised a variety of games.

One important change is the ability to create a generic `Coordination` and `Anti Coordination` game so that the Battle of the Sexes for example is a particular case of the first. 

Let me know what you think (but aware that I need to throw more references in).


---

Comment by vinceknight created at 2015-03-19 03:40:30

Changing status from needs_review to needs_work.


---

Comment by jcampbell created at 2015-03-19 16:57:44

Changing keywords from "" to "days64".


---

Comment by git created at 2015-03-24 08:39:06

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by vinceknight created at 2015-03-24 08:41:13

I think this is now ready. A lot of references and almost everything is dependent on parameters (or a type of game that is dependent on parameters).

There will always be more games that could be added but let us know if you think there's any that really should be in this ticket :)


---

Comment by vinceknight created at 2015-03-24 08:41:13

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2015-03-25 02:13:15

A quick read-through says great and thorough work.  There are a few typos and I will want to check my sources as well to make sure we are agreeing on the standard definitions for some of the games (and I may not be able to do that for some time given my current duties) but in general this will be a great resource and I wish I were teaching game theory so I could!  Also, I would parametrize Chicken if it were me, but maybe this isn't typically a parametrized game form?

Oh, and I am agnostic on where the tab-completion happens, but since `game_theory` covers more than non-cooperative game theory I wonder about that - maybe `game_theory.normal_form_games.[tab]`, though that is cumbersome-ish (only -ish because of tab-completion in the first place).  Of course, you all have implemented the entire thing so maybe it doesn't matter... but if CGT or some more standard cooperative stuff "examples" get implemented then it could be useful to separate those catalogs.  Particularly for combinatorial game theory there is likewise a standard set of basic examples (like Nim) and I wonder about confusion there, which can't happen in graph or matroid catalogs.


---

Comment by vinceknight created at 2015-03-25 08:20:30

> A quick read-through says great and thorough work. There are a few typos and I will want to check my sources as well to make sure we are agreeing on the standard definitions for some of the games (and I may not be able to do that for some time given my current duties) but in general this will be a great resource and I wish I were teaching game theory so I could! 

That's great: thanks. Apologies for the typos and no rush: I understand how busy we all are :)
I expect you will have some references that give differing parameters. If so just let us know and we'll tweak and include your reference text also.

> Also, I would parametrize Chicken if it were me, but maybe this isn't typically a parametrized game form?

We have coded this as a particular type of anti-coordination game so it is in some aspects already parametrized. Let me know what you think...

> Oh, and I am agnostic on where the tab-completion happens, but since game_theory covers more than non-cooperative game theory I wonder about that - maybe game_theory.normal_form_games.[tab], though that is cumbersome-ish (only -ish because of tab-completion in the first place). Of course, you all have implemented the entire thing so maybe it doesn't matter... but if CGT or some more standard cooperative stuff "examples" get implemented then it could be useful to separate those catalogs. Particularly for combinatorial game theory there is likewise a standard set of basic examples (like Nim) and I wonder about confusion there, which can't happen in graph or matroid catalogs.

James and I wondered about this one for a while and are also agnostic about it. I think it could be nice to have it as just `game_theory.[tab]` so that potentially we would get `game_theory.Nim` as well as `game_theory.PrisonersDilemma` but at the same time it might be more organised to seperate things out (in which case we should probably also rename the `catalog.py` file to `normal_form_game_catalog.py`. Let us know what you think: very happy either way.


---

Comment by kcrisman created at 2015-05-22 20:15:39

> > Also, I would parametrize Chicken if it were me, but maybe this isn't typically a parametrized game form?
> We have coded this as a particular type of anti-coordination game so it is in some aspects already parametrized. Let me know what you think...
I was thinking more like http://www.gametheory.net/dictionary/games/GameofChicken.html
> James and I wondered about this one for a while and are also agnostic about it. I think it could be nice to have it as just `game_theory.[tab]` so that potentially we would get `game_theory.Nim` as well as `game_theory.PrisonersDilemma` but at the same time it might be more organised to seperate things out (in which case we should probably also rename the `catalog.py` file to `normal_form_game_catalog.py`. Let us know what you think: very happy either way.
Then better to plan for the future, eh?

Minor, many very minor points because I have nothing else to complain about:
* `an often used v` -> `An often used v`
* `There is a single Nash equilibria` -> `There is a single Nash equilibrium`
* There are several other instances of this, I believe, e.g.

```
+    A coordination game is a particular type of game where the pure Nash
+    equilibria
```

  so please be careful on the plural/singular here.
* `if the defining inequality is not` -> `if the defining inequalities are not`
* I think most of the things like

```
Return a Battle of the Sexes game
```

  should be

```
Return a Battle of the Sexes game.
```

* `Chicken: Anti coordination game: Normal Form Game` seems not to jive with the usual `Battle of the sexes - Coordination game: Normal Form Game` format.  I don't know that I like either but I understand the dilemma here.
* Game theory question.

```
+    An anti coordination game is a particular type of game where the pure Nash
+    equilibria is for the players to pick different strategies (or equivalent)
+    strategies.
```

  What does that mean - do they pick different ones or not?  I have a feeling you cut and pasted from `CoordinationGame` here.
* The numbers for `HawkDove` and `Pigs` seem somewhat arbitrary.  Maybe they could at least be scaled (optionally)?  What do you think?
* `like a Hawk of a Dove.` -> `like a Hawk or a Dove.`
* The numbers don't work out right for `Pigs` without additional explanation.   See [here](http://managerialecon.blogspot.com/2011/11/john-mcmillans-rational-pigs-puzzle.html) where it's explained a bit better why 3.5 and 1.5 means the subservient pig gets 1/3 of the food!  I was stumped by that for a while.
* `Return a Matching pennies game` -> `Return a Matching Pennies game`
* Don't forget the web link for RPSLS like you did elsewhere
* `both players naming the smallest possible value` -> `both players naming the smallest possible value.`
* The following paragraph is too far indented.

```
+        Note that this command can be used to create travellers dilemma for a
+         different maximum value of the luggage. Below is an implementation
+        with a maximum value of 5::
+
```

* `Rock crushes scissors` -> `Rock crushes Scissors`


---

Comment by kcrisman created at 2015-05-22 20:15:39

Changing status from needs_review to needs_work.


---

Comment by vinceknight created at 2015-05-26 10:17:28

Thanks very much for this Karl. Things are a bit crazy right now (marking and a conference I'm helping organise coming up) but will get to it asap!


---

Comment by git created at 2015-06-10 16:46:58

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by vinceknight created at 2015-06-10 16:50:04

Replying to [comment:20 kcrisman]:
> > > Also, I would parametrize Chicken if it were me, but maybe this isn't typically a parametrized game form?
> > We have coded this as a particular type of anti-coordination game so it is in some aspects already parametrized. Let me know what you think...
> I was thinking more like http://www.gametheory.net/dictionary/games/GameofChicken.html

Cool, have changed this so that there is an extra inequality that makes the Game
of Chicken a particular type of Anti Coordination game.

> > James and I wondered about this one for a while and are also agnostic about it. I think it could be nice to have it as just `game_theory.[tab]` so that potentially we would get `game_theory.Nim` as well as `game_theory.PrisonersDilemma` but at the same time it might be more organised to seperate things out (in which case we should probably also rename the `catalog.py` file to `normal_form_game_catalog.py`. Let us know what you think: very happy either way.
> Then better to plan for the future, eh?

Yup: have changed this so that the behaviour is now:


```
normal_form_games.Chicken()
```


So you simply type `normal_form_games.` and tab completion brings up all the
names normal form games. I'm not sure if this is the best way: what do you
think? I tried to get `game_theory.normal_form_games` to work but could not
actually get that to work...

>
> Minor, many very minor points because I have nothing else to complain about:
> * `an often used v` -> `An often used v`

Done.

> * `There is a single Nash equilibria` -> `There is a single Nash equilibrium`
> * There are several other instances of this, I believe, e.g.
> {{{
> +    A coordination game is a particular type of game where the pure Nash
> +    equilibria
> }}}
>   so please be careful on the plural/singular here.

Thanks: I think I have picked these all up.

> * `if the defining inequality is not` -> `if the defining inequalities are not`

Done.

> * I think most of the things like
> {{{
> Return a Battle of the Sexes game
> }}}
>   should be
> {{{
> Return a Battle of the Sexes game.
> }}}

Done all these.

> * `Chicken: Anti coordination game: Normal Form Game` seems not to jive with the usual `Battle of the sexes - Coordination game: Normal Form Game` format.  I don't know that I like either but I understand the dilemma here.

I have changed things so that the colon `:` is only used prior to the utilities
but otherwise the `-` is used to seperate different names. So for example:


```
Battle of the sexes - Coordination game - Normal Form Game with the following utilities: {(0, 1): [1, 1], (1, 0): [0, 0], (0, 0): [3, 2], (1, 1): [2, 3]}
```


I think I prefer this but let me know.

> * Game theory question.
> {{{
> +    An anti coordination game is a particular type of game where the pure Nash
> +    equilibria is for the players to pick different strategies (or equivalent)
> +    strategies.
> }}}
>   What does that mean - do they pick different ones or not?  I have a feeling you cut and pasted from `CoordinationGame` here.

What I meant was that the strategies might not be called the same/different
thing but that they would be equivalent to the same/different thing. I've
removed this in both places in case that's more clear.

> * The numbers for `HawkDove` and `Pigs` seem somewhat arbitrary.  Maybe they could at least be scaled (optionally)?  What do you think?

I have completely parametrized `HawkDove`, let me know what you think :)

As far as scaling `Pigs`, certainly could do this but the equilibrium would be
the same so I'm not sure it's really worth doing. If you would really like it to
be done though just let me know (it just seems a bit artificial to me as the
equilibria is in pure strategies).

> * `like a Hawk of a Dove.` -> `like a Hawk or a Dove.`

Done.

> * The numbers don't work out right for `Pigs` without additional explanation.   See [here](http://managerialecon.blogspot.com/2011/11/john-mcmillans-rational-pigs-puzzle.html) where it's explained a bit better why 3.5 and 1.5 means the subservient pig gets 1/3 of the food!  I was stumped by that for a while.

I have added more explanation and changed the game to go with that blog post. As
the blog post refers to the same book I have not referenced it but am not sure
if that's appropriate.

> * `Return a Matching pennies game` -> `Return a Matching Pennies game`

Done.

> * Don't forget the web link for RPSLS like you did elsewhere

Done.

> * `both players naming the smallest possible value` -> `both players naming the smallest possible value.`

Done.

> * The following paragraph is too far indented.
> {{{
> +        Note that this command can be used to create travellers dilemma for a
> +         different maximum value of the luggage. Below is an implementation
> +        with a maximum value of 5::
> +
> }}}

Thanks: fixed.

> * `Rock crushes scissors` -> `Rock crushes Scissors`

Done.

I have also made sure that the docs build and look ok on my end but let me know if I've managed to not do that correctly. Thanks again for your time and help :)


---

Comment by vinceknight created at 2015-06-10 16:59:38

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2015-06-10 19:13:32

Awesome.  I won't have time this week (a day and a half gone to jury duty) but next week should be fine.  Why not ask on sage-devel about `game_theory.normal_form_games` or the like?  I think Sage should have a reasonably unified policy on the growing set of lists of examples anyway.


---

Comment by tscrim created at 2015-06-10 19:30:13

FYI, we've done subcatalogs for crystals; take a look at the catalog files in `combinat/crystals`. (Edit: not categories...catalogs :P)


---

Comment by vinceknight created at 2015-06-11 06:50:44

Changing status from needs_review to needs_work.


---

Comment by vinceknight created at 2015-06-11 06:50:44

Replying to [comment:26 tscrim]:
> FYI, we've done subcatalogs for crystals; take a look at the catalog files in `combinat/crystals`. (Edit: not categories...catalogs :P)

That's super helpful Travis, will get that going and push in time for when you have a moment Karl :)


---

Comment by git created at 2015-06-11 12:41:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-11 12:43:39

Have this working so that the catalog behaves as:


```
sage: game_theory.normal_form_games.
game_theory.normal_form_games.AntiCoordinationGame  game_theory.normal_form_games.MatchingPennies       game_theory.normal_form_games.RPSLS
game_theory.normal_form_games.BattleOfTheSexes      game_theory.normal_form_games.NormalFormGame        game_theory.normal_form_games.StagHunt
game_theory.normal_form_games.Chicken               game_theory.normal_form_games.Pigs                  game_theory.normal_form_games.TravellersDilemma
game_theory.normal_form_games.CoordinationGame      game_theory.normal_form_games.PrisonersDilemma      game_theory.normal_form_games.matrix
game_theory.normal_form_games.HawkDove              game_theory.normal_form_games.RPS                   game_theory.normal_form_games.sign
```


I've tidied up the documentation and also moved some files around in the hope of future proofing for further games types. :)


---

Comment by vinceknight created at 2015-06-11 12:43:39

Changing status from needs_work to needs_review.


---

Comment by vinceknight created at 2015-06-11 12:45:08

Also, in 41babbc an abstract from an email I was writing somehow managed to sneak in to the docstrings, it gets taken straight back out in a3ee259. My clumsy mistake, just mentioning it in case you go through the commits and are confused :)


---

Comment by kcrisman created at 2015-06-19 14:05:07

Not sure why the branch name is red...


---

Comment by tscrim created at 2015-06-19 15:56:39

My guess is a merge conflict from #18127 (as beta5 was recently released).


---

Comment by vinceknight created at 2015-06-19 16:08:51

Yup, just fixing it now :)


---

Comment by vinceknight created at 2015-06-19 16:09:36

Just building to make sure but it's taking a little while...


---

Comment by git created at 2015-06-19 20:56:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-19 20:57:57

Something's not right.


---

Comment by git created at 2015-06-19 21:19:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-19 21:22:20

Ok I messed up some git-foo along the way. Not sure if this is a mess or not, let me know if it is and I'll do my best to figure it out. The merge conflict is fixed and otherwise everything else is as it was.


---

Comment by tscrim created at 2015-06-19 21:32:29

It looks like you merged in beta3 first and then beta4. However something seems wrong in your `build/pkgs` folder. Let's see if I remember my git-foo...try running:

```
git checkout build/pkgs develop
```

and see if that restores those files. You can run

```
git diff --name-status develop
```

to see the files which have changed from your version of `develop`.


---

Comment by vinceknight created at 2015-06-20 05:46:30

I think I messed up with resolving the merge conflict. Have started again but this time rebasing on to develop. Just rebuilding and testing etc :)


---

Comment by git created at 2015-06-20 10:11:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by vinceknight created at 2015-06-20 10:15:41

I rebased all the work for this ticket on to of the latest version of the `develop` branch. The earlier work has been squashed in to a single commit whilst the main work addressing Karl's comments has been left as a series of commits to try and be helpful and easier to review. Let me know if any of this has not made things simple :) Thanks again for your time.


---

Comment by tscrim created at 2015-06-20 16:42:02

Looks good from a git standpoint. I'd also change `:math:`x + y`` to simply ``x + y`` and `.. math::` to `.. MATH::`.

You'll also note that because these are imported in the catalog:

```
from sage.game_theory.normal_form_game import NormalFormGame
from sage.matrix.constructor import matrix
from sage.functions.generalized import sign
```

I believe they appear under tab completion. To fix this, I'd add a

```
del matrix
del sign
```

at the end of the file.

I believe you're also importing at startup a good part of the game theory with the catalog. I'd change the import in `all.py` to

```
lazy_import('sage.game_theory', 'catalog', 'game_theory')
```



---

Comment by git created at 2015-06-20 18:28:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-20 18:31:43

Ok most of your suggestions were quick and easy fixes. However, I wasn't able to sort out the :code:`sign` and :code:`matrix` issue. When I added:


```
del matrix
del sign
```


to the bottom of the `catalog_...` file it no longer worked (one of the tests in `normal_form_games` failed and it also just would not work iat the sage prompt. I thought perhaps this was due to the `lazy_import` so I reverted some of the commits and tried again.

I've included these commits for now so that you can see what I tried (020d8bf reduces the problem to one of `sage` appearing instead of `matrix` and `sign` which is not ideal).

I'll be sure to rebase and tidy them up with a forced push once we're happy...

Thanks again :)


---

Comment by vinceknight created at 2015-06-22 08:00:52

I've just looked through the crystals library and in the `elementary.py` file there is a line:


```
from sage.rings.integer import Integer
```


but when typing `crystals.elementary.` that does not appear. I have looked through the code and can't seem to see where/how that happens (there is a particular `lazy_import` line that only calls in the required things but that seems to be depreciated)...

I'm not too sure what to do with this.


---

Comment by tscrim created at 2015-06-22 08:12:46

That's because we don't import everything from `elementary.py` into `catalog_elementary.py`, just the necessary crystals (as an alias).

I promise I will look at this tomorrow (as it is 1 AM here and I need to sleep) and see what's going on.


---

Comment by vinceknight created at 2015-06-22 08:15:08

Cool: I'll try and see where you're doing that but yeah go to sleep :D


---

Comment by tscrim created at 2015-06-23 02:46:19

IMO (and that of the git community), it's okay to even good to have commits and reverts in the history to show what you tried.

Anyways, I couldn't get it to work either. I could have sworn I got this to work somewhere. So instead I opted for a slightly more painful in terms of coding by importing everything necessary within each function, but improves the interface.

I also did a bunch of cleanup of the documentation (I'm slightly surprised it compiled, but it will fix some of the indentations).
----
New commits:


---

Comment by vinceknight created at 2015-06-23 08:54:00

Replying to [comment:49 tscrim]:
> IMO (and that of the git community), it's okay to even good to have commits and reverts in the history to show what you tried.

Cool :)

> 
> Anyways, I couldn't get it to work either. I could have sworn I got this to work somewhere. So instead I opted for a slightly more painful in terms of coding by importing everything necessary within each function, but improves the interface.

Thanks for this! :)

> 
> I also did a bunch of cleanup of the documentation (I'm slightly surprised it compiled, but it will fix some of the indentations).

Just when I thought I had figured out making documentation happy :) It compiled and actually looked just fine (I think): thanks for fixing it though :)

I've added one commit which is to add Travis to the authors list? Not sure if that's the right thing to do or not but don't want to not acknowledge anyone... I suppose in a way it could be nice to add reviewers also (as reviewers) although perhaps I'm just worrying too much about making sure everyone gets credit (your help and effort is hugely appreciated Karl).


---

Comment by vinceknight created at 2015-06-23 08:55:59

New commits:


---

Comment by tscrim created at 2015-06-23 15:24:17

I'm hardly an author as I didn't write a single line of code and only reviewed the doc/code. If anything, Karl deserves to be listed as an author and has done far more work on this than I.


---

Comment by vinceknight created at 2015-06-23 15:28:48

Replying to [comment:52 tscrim]:
> I'm hardly an author as I didn't write a single line of code and only reviewed the doc/code. If anything, Karl deserves to be listed as an author and has done far more work on this than I.

Happy to do whatever everyone feels comfortable with, I thought that because you actually moved import statements around etc that you 'qualified' as being an author. Very happy to just be told what to do with this one.


---

Comment by tscrim created at 2015-06-23 15:34:00

Replying to [comment:53 vinceknight]:
> Replying to [comment:52 tscrim]:
> > I'm hardly an author as I didn't write a single line of code and only reviewed the doc/code. If anything, Karl deserves to be listed as an author and has done far more work on this than I.
> 
> Happy to do whatever everyone feels comfortable with, I thought that because you actually moved import statements around etc that you 'qualified' as being an author. Very happy to just be told what to do with this one.

I'd just remove me as an author since I'm not really one. Thanks.


---

Comment by git created at 2015-06-23 16:51:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-23 16:52:08

> I'd just remove me as an author since I'm not really one. Thanks.

Done! Thanks again for the help :) I think that if you're happy Karl, this is good to go?


---

Comment by kcrisman created at 2015-06-24 01:49:34


```
+    This can be modeled as a particular type of anti coordination game
+    following two matrices:
```

what happened to "using the"?

I think there is also "strategies strategies" somewhere.

I just won't have time to look at this more, but if Travis is happy with the import stuff and tab completion *and* it passes all tests I think I won't stand in the way, you addressed all my comments.  I apologize, some things have come up that took some of the time I wanted to set aside for looking at game theory stuff thus far this summer.


---

Comment by tscrim created at 2015-06-24 05:11:43

FTR, I am happy with the import/tab completion.

PS - I can do the final review if more needs to be done beyond the typos mentioned by Karl-Dieter.


---

Comment by git created at 2015-06-24 14:16:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-24 14:18:53

Replying to [comment:58 tscrim]:
> FTR, I am happy with the import/tab completion.
> 
> PS - I can do the final review if more needs to be done beyond the typos mentioned by Karl-Dieter.

Thanks for the offer Travis. I think this is ready to either be accepted or further reviewed :)

The error that Karl found I think is somewhat left over from when I made a mess of the merging. I think I've caught it all.


---

Comment by tscrim created at 2015-06-24 14:53:28

Given Karl-Dieter's comments and (IIRC) tests passed, we can set this to positive review.


---

Comment by vinceknight created at 2015-06-24 15:04:23

Changing status from needs_review to positive_review.


---

Comment by vinceknight created at 2015-06-24 15:05:28

Awesome thanks both!

Also:

Replying to [comment:57 kcrisman]:

> 
> I just won't have time to look at this more, but if Travis is happy with the import stuff and tab completion *and* it passes all tests I think I won't stand in the way, you addressed all my comments.  I apologize, some things have come up that took some of the time I wanted to set aside for looking at game theory stuff thus far this summer.

No need to apologise, I completely understand that things get busy :)


---

Comment by vbraun created at 2015-06-24 18:14:12

On Arando (32-bit Linux):

```
sage -t --long src/sage/game_theory/catalog_normal_form_games.py
**********************************************************************
File "src/sage/game_theory/catalog_normal_form_games.py", line 800, in sage.game_theory.catalog_normal_form_games.TravellersDilemma
Failed example:
    g
Expected:
    Travellers dilemma - Normal Form Game with the following utilities:
     {(7, 3): [5, 1], (4, 7): [1, 5], (1, 3): [5, 9], (4, 8): [0, 4],
      (3, 0): [9, 5], (2, 8): [0, 4], (8, 0): [4, 0], (7, 8): [0, 4],
      (5, 4): [7, 3], (0, 7): [1, 5], (5, 6): [2, 6], (2, 6): [2, 6],
      (1, 6): [2, 6], (5, 1): [7, 3], (3, 7): [1, 5], (0, 3): [5, 9],
      (8, 5): [4, 0], (2, 5): [3, 7], (5, 8): [0, 4], (4, 0): [8, 4],
      (1, 2): [6, 10], (7, 4): [5, 1], (6, 4): [6, 2], (3, 3): [7, 7],
      (2, 0): [10, 6], (8, 1): [4, 0], (7, 6): [5, 1], (4, 4): [6, 6],
      (6, 3): [6, 2], (1, 5): [3, 7], (8, 8): [2, 2], (7, 2): [5, 1],
      (3, 6): [2, 6], (2, 2): [8, 8], (7, 7): [3, 3], (5, 7): [1, 5],
      (5, 3): [7, 3], (4, 1): [8, 4], (1, 1): [9, 9], (2, 7): [1, 5],
      (3, 2): [9, 5], (0, 0): [10, 10], (6, 6): [4, 4], (5, 0): [7, 3],
      (7, 1): [5, 1], (4, 5): [3, 7], (0, 4): [4, 8], (5, 5): [5, 5],
      (1, 4): [4, 8], (6, 0): [6, 2], (7, 5): [5, 1], (2, 3): [5, 9],
      (2, 1): [10, 6], (8, 7): [4, 0], (6, 8): [0, 4], (4, 2): [8, 4],
      (1, 0): [11, 7], (0, 8): [0, 4], (6, 5): [6, 2], (3, 5): [3, 7],
      (0, 1): [7, 11], (8, 3): [4, 0], (7, 0): [5, 1], (4, 6): [2, 6],
      (6, 7): [1, 5], (8, 6): [4, 0], (5, 2): [7, 3], (6, 1): [6, 2],
      (3, 1): [9, 5], (8, 2): [4, 0], (2, 4): [4, 8], (3, 8): [0, 4],
      (0, 6): [2, 6], (1, 8): [0, 4], (6, 2): [6, 2], (4, 3): [8, 4],
      (1, 7): [1, 5], (0, 5): [3, 7], (3, 4): [4, 8], (0, 2): [6, 10],
      (8, 4): [4, 0]}
Got:
    Travellers dilemma - Normal Form Game with the following utilities: {(7, 3): [5, 1], (4, 7): [1, 5], (1, 3): [5, 9], (4, 8): [0, 4], (3, 0): [9, 5], (2, 8): [0, 4], (8, 0): [4, 0], (7, 8): [0, 4], (5, 4): [7, 3], (0, 7): [1, 5], (5, 6): [2, 6], (2, 6): [2, 6], (1, 6): [2, 6], (5, 1): [7, 3], (3, 7): [1, 5], (0, 3): [5, 9], (8, 5): [4, 0], (2, 5): [3, 7], (5, 8): [0, 4], (4, 0): [8, 4], (1, 2): [6, 10], (7, 4): [5, 1], (6, 4): [6, 2], (3, 3): [7, 7], (0, 6): [2, 6], (8, 1): [4, 0], (7, 6): [5, 1], (4, 4): [6, 6], (6, 3): [6, 2], (1, 5): [3, 7], (8, 8): [2, 2], (7, 2): [5, 1], (3, 6): [2, 6], (2, 2): [8, 8], (7, 7): [3, 3], (5, 7): [1, 5], (5, 3): [7, 3], (4, 1): [8, 4], (1, 1): [9, 9], (2, 7): [1, 5], (3, 2): [9, 5], (0, 0): [10, 10], (6, 6): [4, 4], (5, 0): [7, 3], (7, 1): [5, 1], (4, 5): [3, 7], (0, 4): [4, 8], (5, 5): [5, 5], (1, 4): [4, 8], (6, 0): [6, 2], (7, 5): [5, 1], (2, 3): [5, 9], (2, 1): [10, 6], (8, 7): [4, 0], (6, 8): [0, 4], (4, 2): [8, 4], (1, 0): [11, 7], (0, 8): [0, 4], (6, 5): [6, 2], (3, 5): [3, 7], (0, 1): [7, 11], (8, 3): [4, 0], (7, 0): [5, 1], (4, 6): [2, 6], (6, 7): [1, 5], (5, 2): [7, 3], (6, 1): [6, 2], (3, 1): [9, 5], (8, 2): [4, 0], (2, 4): [4, 8], (3, 8): [0, 4], (2, 0): [10, 6], (1, 8): [0, 4], (6, 2): [6, 2], (4, 3): [8, 4], (1, 7): [1, 5], (8, 6): [4, 0], (0, 5): [3, 7], (3, 4): [4, 8], (0, 2): [6, 10], (8, 4): [4, 0]}
**********************************************************************
1 item had failures:
   1 of   6 in sage.game_theory.catalog_normal_form_games.TravellersDilemma
    [58 tests, 1 failure, 0.63 s]
```



---

Comment by vbraun created at 2015-06-24 18:14:12

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-06-24 18:21:51

So the issue is that the output order is not unique because it is from a python dict. The usual response  is to run `sorted(obj)` where `obj` is some object which represents the desired output. The other thing you could do (either with the previous or just this) is

```
Travellers dilemma - Normal Form Game with the following utilities: ...
```



---

Comment by git created at 2015-06-24 20:38:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-24 20:42:40

Changing status from needs_work to needs_review.


---

Comment by vinceknight created at 2015-06-24 20:42:40

Thanks Travis, I remember this being a pain with matching games :)

I have fixed this: tests pass on two different machines but it is possible that I've missed one BUT I did not go with your suggestion.

I have thrown in:


```
Travellers dilemma - Normal Form Game with the following utilities: ...
```


but then I also built the expected dictionary and just checked that the equality test between the game and the dictionary returned `True`

Using `sorted(g)` would only return the keys of the dictionary which could potentially hide an error... 

I think this is probably the best way to do this but please let me know if you think it should be reworked...


---

Comment by kcrisman created at 2015-06-29 19:54:11

I think this solution is fine, though

```
+        sage: g = game_theory.normal_form_games.CoordinationGame(A=9,
+        ....:                                                    a=6,
+        ....:                                                    B=0,
+        ....:                                                    b=1,
+        ....:                                                    C=2,
+        ....:                                                    c=10,
+        ....:                                                    D=4,
+        ....:                                                    d=11)
```

starts looking a little longish.  Was there a reason for doing that uniformly?  You may also want to (briefly) mention somewhere convenient why you're doing this, or perhaps just where the utility dictionary is `==` to the game, which I wasn't expecting (since it's not a game, just a random dictionary) but is fine, as far as I care about it.


---

Comment by vinceknight created at 2015-06-30 17:42:45

Replying to [comment:68 kcrisman]:

> starts looking a little longish.  Was there a reason for doing that uniformly? 

Do you mean the multilines? That's mainly to stick with the 79 character limit, I noticed this for the larger games and then thought I should do it throughout. I agree that it looks pretty bad. I'm happy to leave as is (so that it fits with the 79 characters strictly) but perhaps the rule could be broken for some of the smaller dicts?

> You may also want to (briefly) mention somewhere convenient why you're doing this, or perhaps just where the utility dictionary is `==` to the game, which I wasn't expecting (since it's not a game, just a random dictionary) but is fine, as far as I care about it.

So perhaps mention something a long the lines of:


```
sage: # Building a dictionary to test the required result
sage: # The order of the dictionary might differ on a given machine
sage: d = {...
sage: d == g
```


Let me know if that's what you mean?

Thanks again for your time with this Karl.


---

Comment by kcrisman created at 2015-06-30 17:51:38

> > starts looking a little longish.  Was there a reason for doing that uniformly? 
> 
> Do you mean the multilines? That's mainly to stick with the 79 character limit, I noticed this for the larger games and then thought I should do it throughout. I agree that it looks pretty bad. I'm happy to leave as is (so that it fits with the 79 characters strictly) but perhaps the rule could be broken for some of the smaller dicts?

I think only do it if you really go well beyond the limit.  Or just continue the multiline in such a way that there are TWO lines and not EIGHT lines :)

> > You may also want to (briefly) mention somewhere convenient why you're doing this, or perhaps just where the utility dictionary is `==` to the game, which I wasn't expecting (since it's not a game, just a random dictionary) but is fine, as far as I care about it.
> 
> So perhaps mention something a long the lines of:
> 
> {{{
> sage: # Building a dictionary to test the required result
> sage: # The order of the dictionary might differ on a given machine
> sage: d = {...
> sage: d == g
> }}}

Oh, not even that much - maybe just before the very first instance of this, preferably not within a specific function but at the module level, something like 


```
We can construct a game::

    sage: construct a game
    sage: do something with it

When we test whether the game is actually the one in question, sometimes we will build a dictionary to test it, since this can be platform-dependent, like so::

    sage: d = {...
    sage: d == g
    True
```

And then the others are tacit.


---

Comment by git created at 2015-06-30 18:38:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-30 18:55:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vinceknight created at 2015-06-30 18:56:30

Ok Karl, I think this is ready now :) I've made the adjustments I believe you are suggesting :)


---

Comment by kcrisman created at 2015-06-30 19:23:19

Presumably irrelevant remarks:

```
+We can then immediately obtain the Nash equilibria for the game::
```

Of course, in that example there is only an equilibrium, though in general presumably not.

```
modelled
```

Dang Brits.

PEP8 looks fine.  If this passes tests please set to positive review, unfortunately I have something else I need to do now.


---

Comment by git created at 2015-06-30 20:41:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-06-30 21:25:24

Replying to [comment:74 kcrisman]:

> Dang Brits.

Hehe :) My last commit addresses those two minor points.

> 
> PEP8 looks fine.  If this passes tests please set to positive review, unfortunately I have something else I need to do now.

Cool: tests pass and docs build so am setting to positive review.


---

Comment by vinceknight created at 2015-06-30 21:25:24

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-07-01 09:23:55

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-07-01 09:23:55

Sorry for not responding sooner, I've been busy moving out of my house and having to choose my time (and the past 17 hours, been traveling from SF to Korea). Here are my thoughts, not that they really count for much.

I try and keep to the 80 char/line limit, and what Vince did initially is the "best" practice according to PEP8. However, I side with Karl-Dieter on this in that it just looks ugly and it's worth it to consolidate the data and go past 80 char/line limit when it is easier to read.

However I do have an issue with this sentence:

```diff
+When we test whether the game is actually the one in question, sometimes we will
+build a dictionary to test it, since this can be platform-dependent, like so::
```

What is "this"? In particular, when I first read this, to me it seemed like the actual output could be different on different machines, whereas it is only the print representation of the dictionary used to model the game. Your change doesn't have to be as verbose as that (IMO), just change "this" to "the printed representation" or something like that.

Once you make that change, you can set this back to positive review on my behalf.


---

Comment by vinceknight created at 2015-07-01 09:37:47

Replying to [comment:77 tscrim]:

> However I do have an issue with this sentence:
> {{{#!diff
> +When we test whether the game is actually the one in question, sometimes we will
> +build a dictionary to test it, since this can be platform-dependent, like so::
> }}}
> What is "this"? In particular, when I first read this, to me it seemed like the actual output could be different on different machines, whereas it is only the print representation of the dictionary used to model the game. Your change doesn't have to be as verbose as that (IMO), just change "this" to "the printed representation" or something like that.
> 
Excellent point. Will change that asap. Thanks!

I hope your move went well!


---

Comment by git created at 2015-07-01 09:52:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-07-01 09:52:59

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-07-02 22:32:38

Resolution: fixed
