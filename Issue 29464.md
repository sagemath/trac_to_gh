# Issue 29464: Replace use of OptionalExtension by namespace packages

archive/issues_029464.json:
```json
{
    "body": "CC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29701\n\n",
    "created_at": "2020-05-17T16:26:04Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Replace use of OptionalExtension by namespace packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29464",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun



Issue created by migration from https://trac.sagemath.org/ticket/29701





---

archive/issue_comments_417640.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417640",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_417641.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-03T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_417642.json:
```json
{
    "body": "No longer on top of #28925, so no namespace package are involved any more for this ticket.",
    "created_at": "2020-06-03T22:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417642",
    "user": "https://github.com/mkoeppe"
}
```

No longer on top of #28925, so no namespace package are involved any more for this ticket.



---

archive/issue_comments_417643.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417643",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_417644.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T00:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417645.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T02:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417646.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T18:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417647.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T18:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417648.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-07T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_417649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-08T02:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417650.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212",
    "created_at": "2020-06-08T02:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417650",
    "user": "https://github.com/mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212



---

archive/issue_comments_417651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-26T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417652.json:
```json
{
    "body": "Merged in latest beta. Needs review",
    "created_at": "2020-06-26T16:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417652",
    "user": "https://github.com/mkoeppe"
}
```

Merged in latest beta. Needs review



---

archive/issue_comments_417653.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-28T22:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417654.json:
```json
{
    "body": "I'm a bit confused:\n\n`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n\nHowever, if distributions is `sage-tdlib`, you get only one source file.\n\nDon't we want `find_python_sources` to contain everything except for not installed optional packages?",
    "created_at": "2020-06-29T09:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417654",
    "user": "https://github.com/kliem"
}
```

I'm a bit confused:

`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.

However, if distributions is `sage-tdlib`, you get only one source file.

Don't we want `find_python_sources` to contain everything except for not installed optional packages?



---

archive/issue_comments_417655.json:
```json
{
    "body": "Replying to [comment:29 gh-kliem]:\n> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n> \n> However, if distributions is `sage-tdlib`, you get only one source file.\n\n\nThat's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).\n\n> Don't we want `find_python_sources` to contain everything except for not installed optional packages?\n\n\nFor this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.",
    "created_at": "2020-06-29T17:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417655",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:29 gh-kliem]:
> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.
> 
> However, if distributions is `sage-tdlib`, you get only one source file.


That's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).

> Don't we want `find_python_sources` to contain everything except for not installed optional packages?


For this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.



---

archive/issue_comments_417656.json:
```json
{
    "body": "I see.\n\nI would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.",
    "created_at": "2020-06-29T18:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417656",
    "user": "https://github.com/kliem"
}
```

I see.

I would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.



---

archive/issue_comments_417657.json:
```json
{
    "body": "Otherwise the source code looks fine. Do we have any test runs? Should I run them?",
    "created_at": "2020-06-29T18:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417657",
    "user": "https://github.com/kliem"
}
```

Otherwise the source code looks fine. Do we have any test runs? Should I run them?



---

archive/issue_comments_417658.json:
```json
{
    "body": "I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.",
    "created_at": "2020-06-29T19:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417658",
    "user": "https://github.com/mkoeppe"
}
```

I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.



---

archive/issue_comments_417659.json:
```json
{
    "body": "Replying to [comment:31 gh-kliem]:\n> I would suggest updating the benchmark. \n\n\nGood idea, will do",
    "created_at": "2020-06-29T19:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417659",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:31 gh-kliem]:
> I would suggest updating the benchmark. 


Good idea, will do



---

archive/issue_comments_417660.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-29T19:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417661.json:
```json
{
    "body": "As I have capacities I started test for only this ticket:\n\nhttps://github.com/kliem/sage/pull/18/checks",
    "created_at": "2020-06-29T19:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417661",
    "user": "https://github.com/kliem"
}
```

As I have capacities I started test for only this ticket:

https://github.com/kliem/sage/pull/18/checks



---

archive/issue_comments_417662.json:
```json
{
    "body": "There is that annoying failure of sageinspect again\n\nubuntu-bionic, minimal (for example, but looks like it is anywhere)\n\n```\nFile \"src/sage/misc/sageinspect.py\", line 28, in sage.misc.sageinspect\nFailed example:\n    sage_getsource(sage.rings.rational)[5:]\nExpected:\n    'Rational Numbers...'\nGot:\n    'tutils: libraries = ntl\\nr\"\"\"\\nRational Numbers\\n\\nAUTHORS:\\n\\n- William Stein (2005): first version\\n\\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\\n\\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\\n  python/GMP conversion; hashing\\n\\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\\n  and improve behavior of sqrt.\\n\\n- David Harvey (2006-09-15): added nth_root\\n\\n- Pablo De Napoli (2007-04-01): corrected the implementations of\\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\\n  lcm,gcd\\n\\n- John Cremona (2009-05-15): added support for local and global\\n  logarithmic heights.\\n\\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\\n\\n- Vincent Delecroix (2013): continued fraction\\n\\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\\n\\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\\n\\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\\n\\nTESTS::\\n\\n    sage: a = -2/3\\n    sage: a == loads(dumps(a))\\n    True\\n\"\"\"\\n\\n# ****************************************************************************\\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\\n#\\n#  Distributed under the terms of the GNU General Public License (GPL)\\n#  as published by the Free Software Foundation; either version 2 of\\n#  the License, or (at your option) any later version.\\n#                  https://www.gnu.org/licenses/\\n# ****************************************************************************\\n\\ncimport cython\\nfrom cpython cimport *\\nfrom cpython.object cimport Py_EQ, Py_NE\\n\\nfrom cysignals.signals cimport sig_on, sig_off\\n\\nimport operator\\nimport fractions\\n\\nfrom sage.misc.mathml import mathml\\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\\n\\nimport sage.misc.misc as misc\\nfrom sage.structure.sage_object cimport SageObject\\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\\nimport sage.rings.rational_field\\n\\ncimport sage.rings.integer as integer\\nfrom .integer cimport Integer\\n\\nfrom cypari2.paridecl cimport *\\nfrom cypari2.gen cimport Gen as pari_gen\\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\\n\\nfrom .integer_ring import ZZ\\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\\n\\nfrom sage.structure.coerce cimport is_numpy_type\\n\\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\\n\\nfrom sage.structure.coerce cimport coercion_model\\nfrom sage.structure.element cimport Element\\nfrom sage.structure.element import coerce_binop\\nfrom sage.structure.parent cimport Parent\\nfrom sage.categories.morphism cimport Morphism\\nfrom sage.categories.map cimport Map\\n\\n\\n\\nimport sage.rings.real_mpfr\\nimport sage.rings.real_double\\nfrom libc.stdint cimport uint64_t\\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\\n\\nfrom cpython.int cimport PyInt_AS_LONG\\n\\ncimport sage.rings.fast_arith\\nimport  sage.rings.fast_arith\\n\\ncdef sage.rings.fast_arith.arith_int ai\\nai = sage.rings.fast_arith.arith_int()\\n\\ncdef object numpy_long_interface = {\\'typestr\\': \\'=i4\\' if sizeof(long) == 4 else \\'=i8\\' }\\ncdef object numpy_int64_interface = {\\'typestr\\': \\'=i8\\'}\\ncdef object numpy_object_interface = {\\'typestr\\': \\'|O\\'}\\ncdef object numpy_double_interface = {\\'typestr\\': \\'=f8\\'}\\n\\nfrom libc.math cimport ldexp\\nfrom sage.libs.gmp.all cimport *\\n\\ncimport gmpy2\\ngmpy2.import_gmpy2()\\n\\n\\ncdef class Rational(sage.structure.element.FieldElement)\\n'\n```",
    "created_at": "2020-07-01T15:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417662",
    "user": "https://github.com/kliem"
}
```

There is that annoying failure of sageinspect again

ubuntu-bionic, minimal (for example, but looks like it is anywhere)

```
File "src/sage/misc/sageinspect.py", line 28, in sage.misc.sageinspect
Failed example:
    sage_getsource(sage.rings.rational)[5:]
Expected:
    'Rational Numbers...'
Got:
    'tutils: libraries = ntl\nr"""\nRational Numbers\n\nAUTHORS:\n\n- William Stein (2005): first version\n\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\n\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\n  python/GMP conversion; hashing\n\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\n  and improve behavior of sqrt.\n\n- David Harvey (2006-09-15): added nth_root\n\n- Pablo De Napoli (2007-04-01): corrected the implementations of\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\n  lcm,gcd\n\n- John Cremona (2009-05-15): added support for local and global\n  logarithmic heights.\n\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\n\n- Vincent Delecroix (2013): continued fraction\n\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\n\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\n\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\n\nTESTS::\n\n    sage: a = -2/3\n    sage: a == loads(dumps(a))\n    True\n"""\n\n# ****************************************************************************\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\n#\n#  Distributed under the terms of the GNU General Public License (GPL)\n#  as published by the Free Software Foundation; either version 2 of\n#  the License, or (at your option) any later version.\n#                  https://www.gnu.org/licenses/\n# ****************************************************************************\n\ncimport cython\nfrom cpython cimport *\nfrom cpython.object cimport Py_EQ, Py_NE\n\nfrom cysignals.signals cimport sig_on, sig_off\n\nimport operator\nimport fractions\n\nfrom sage.misc.mathml import mathml\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\n\nimport sage.misc.misc as misc\nfrom sage.structure.sage_object cimport SageObject\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\nimport sage.rings.rational_field\n\ncimport sage.rings.integer as integer\nfrom .integer cimport Integer\n\nfrom cypari2.paridecl cimport *\nfrom cypari2.gen cimport Gen as pari_gen\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\n\nfrom .integer_ring import ZZ\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\n\nfrom sage.structure.coerce cimport is_numpy_type\n\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\n\nfrom sage.structure.coerce cimport coercion_model\nfrom sage.structure.element cimport Element\nfrom sage.structure.element import coerce_binop\nfrom sage.structure.parent cimport Parent\nfrom sage.categories.morphism cimport Morphism\nfrom sage.categories.map cimport Map\n\n\n\nimport sage.rings.real_mpfr\nimport sage.rings.real_double\nfrom libc.stdint cimport uint64_t\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\n\nfrom cpython.int cimport PyInt_AS_LONG\n\ncimport sage.rings.fast_arith\nimport  sage.rings.fast_arith\n\ncdef sage.rings.fast_arith.arith_int ai\nai = sage.rings.fast_arith.arith_int()\n\ncdef object numpy_long_interface = {\'typestr\': \'=i4\' if sizeof(long) == 4 else \'=i8\' }\ncdef object numpy_int64_interface = {\'typestr\': \'=i8\'}\ncdef object numpy_object_interface = {\'typestr\': \'|O\'}\ncdef object numpy_double_interface = {\'typestr\': \'=f8\'}\n\nfrom libc.math cimport ldexp\nfrom sage.libs.gmp.all cimport *\n\ncimport gmpy2\ngmpy2.import_gmpy2()\n\n\ncdef class Rational(sage.structure.element.FieldElement)\n'
```



---

archive/issue_comments_417663.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-02T03:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417664.json:
```json
{
    "body": "Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T04:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417664",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_417665.json:
```json
{
    "body": "I was wondering, where this error came from now. Good to know that it is entirely harmless.\n\nReplying to [comment:39 mkoeppe]:\n> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T05:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417665",
    "user": "https://github.com/kliem"
}
```

I was wondering, where this error came from now. Good to know that it is entirely harmless.

Replying to [comment:39 mkoeppe]:
> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_417666.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417666",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417667.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417667",
    "user": "https://github.com/kliem"
}
```

LGTM.



---

archive/issue_comments_417668.json:
```json
{
    "body": "Thank you!",
    "created_at": "2020-07-02T19:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417668",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_417669.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_417670.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_417671.json:
```json
{
    "body": "Merged 9.2.beta3",
    "created_at": "2020-07-04T16:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417671",
    "user": "https://github.com/mkoeppe"
}
```

Merged 9.2.beta3



---

archive/issue_comments_417672.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-04T16:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417672",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417673.json:
```json
{
    "body": "Volker, is there something missing on this ticket that keeps it from being merged?",
    "created_at": "2020-07-26T22:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417673",
    "user": "https://github.com/mkoeppe"
}
```

Volker, is there something missing on this ticket that keeps it from being merged?



---

archive/issue_comments_417674.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-02T10:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417674",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to critical.



---

archive/issue_comments_417675.json:
```json
{
    "body": "#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.",
    "created_at": "2020-08-02T18:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417675",
    "user": "https://github.com/vbraun"
}
```

#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.



---

archive/issue_comments_417676.json:
```json
{
    "body": "#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?",
    "created_at": "2020-08-02T18:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417676",
    "user": "https://github.com/dimpase"
}
```

#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?



---

archive/issue_comments_417677.json:
```json
{
    "body": "Thanks for cleaning up the dependency list. \n\nUnfortunately the format does not seem to be documented anywhere.\n\n(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)",
    "created_at": "2020-08-02T18:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417677",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for cleaning up the dependency list. 

Unfortunately the format does not seem to be documented anywhere.

(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)



---

archive/issue_comments_417678.json:
```json
{
    "body": "Yes, in this case it was the parens.",
    "created_at": "2020-08-02T22:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417678",
    "user": "https://github.com/vbraun"
}
```

Yes, in this case it was the parens.



---

archive/issue_comments_417679.json:
```json
{
    "body": "```\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 83, in sage_setup.clean._find_stale_files\nFailed example:\n    python_packages, python_modules = find_python_sources(\n        SAGE_SRC, ['sage', 'sage_setup'])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[3]>\", line 2, in <module>\n        SAGE_SRC, ['sage', 'sage_setup'])\n    ValueError: too many values to unpack (expected 2)\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 92, in sage_setup.clean._find_stale_files\nFailed example:\n    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[6]>\", line 1, in <module>\n        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\n    NameError: name 'python_packages' is not defined\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 95, in sage_setup.clean._find_stale_files\nFailed example:\n    for f in stale_iter:\n        if f.endswith(skip_extensions): continue\n        if '/ext_data/' in f: continue\n        print('Found stale file: ' + f)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[9]>\", line 1, in <module>\n        for f in stale_iter:\n    NameError: name 'stale_iter' is not defined\n**********************************************************************\n1 item had failures:\n   3 of  11 in sage_setup.clean._find_stale_files\n    [17 tests, 3 failures, 0.03 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417679",
    "user": "https://github.com/vbraun"
}
```

```
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py
**********************************************************************
File "src/sage_setup/clean.py", line 83, in sage_setup.clean._find_stale_files
Failed example:
    python_packages, python_modules = find_python_sources(
        SAGE_SRC, ['sage', 'sage_setup'])
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[3]>", line 2, in <module>
        SAGE_SRC, ['sage', 'sage_setup'])
    ValueError: too many values to unpack (expected 2)
**********************************************************************
File "src/sage_setup/clean.py", line 92, in sage_setup.clean._find_stale_files
Failed example:
    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[6]>", line 1, in <module>
        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
    NameError: name 'python_packages' is not defined
**********************************************************************
File "src/sage_setup/clean.py", line 95, in sage_setup.clean._find_stale_files
Failed example:
    for f in stale_iter:
        if f.endswith(skip_extensions): continue
        if '/ext_data/' in f: continue
        print('Found stale file: ' + f)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[9]>", line 1, in <module>
        for f in stale_iter:
    NameError: name 'stale_iter' is not defined
**********************************************************************
1 item had failures:
   3 of  11 in sage_setup.clean._find_stale_files
    [17 tests, 3 failures, 0.03 s]
----------------------------------------------------------------------
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_417680.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417680",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_417681.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T00:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417682.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-03T00:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417682",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_417683.json:
```json
{
    "body": "Back to positive.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417683",
    "user": "https://github.com/kliem"
}
```

Back to positive.



---

archive/issue_comments_417684.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417684",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417685.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-08-03T17:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417685",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_417686.json:
```json
{
    "body": "```\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[dochtml]     build_many(build_ref_doc, non_references)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\nmake[3]: *** [Makefile:1816: doc-html] Error 1\nmake[3]: Leaving directory '/home/release/Sage/build/make'\nmake[2]: *** [Makefile:1707: all-start] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417686",
    "user": "https://github.com/vbraun"
}
```

```
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
make[3]: *** [Makefile:1816: doc-html] Error 1
make[3]: Leaving directory '/home/release/Sage/build/make'
make[2]: *** [Makefile:1707: all-start] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```



---

archive/issue_comments_417687.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417687",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_417688.json:
```json
{
    "body": "Replying to [comment:59 vbraun]:\n> {{{\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n> [dochtml] Error building the documentation.\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n> [dochtml]     \"__main__\", mod_spec)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n> [dochtml]     exec(code, run_globals)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n> [dochtml]     main()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n> [dochtml]     builder()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n> [dochtml]     build_many(build_ref_doc, non_references)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n> [dochtml]     _build_many(target, args, processes=NUM_THREADS)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n> [dochtml]     raise worker_exc.original_exception\n> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] \n> [dochtml]     Note: incremental documentation builds sometimes cause spurious\n> [dochtml]     error messages. To be certain that these are real errors, run\n> [dochtml]     \"make doc-clean\" first and try again.\n> make[3]: *** [Makefile:1816: doc-html] Error 1\n> make[3]: Leaving directory '/home/release/Sage/build/make'\n> make[2]: *** [Makefile:1707: all-start] Error 2\n> make[2]: Leaving directory '/home/release/Sage/build/make'\n> }}}\n\n\nAre you sure? I thought it would have come from either #30240 or #30260 since they both touch \"distance_regular\".",
    "created_at": "2020-08-04T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417688",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:59 vbraun]:
> {{{
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
> [dochtml] Error building the documentation.
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
> [dochtml]     "__main__", mod_spec)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
> [dochtml]     exec(code, run_globals)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
> [dochtml]     main()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
> [dochtml]     builder()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
> [dochtml]     build_many(build_ref_doc, non_references)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
> [dochtml]     _build_many(target, args, processes=NUM_THREADS)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
> [dochtml]     raise worker_exc.original_exception
> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] 
> [dochtml]     Note: incremental documentation builds sometimes cause spurious
> [dochtml]     error messages. To be certain that these are real errors, run
> [dochtml]     "make doc-clean" first and try again.
> make[3]: *** [Makefile:1816: doc-html] Error 1
> make[3]: Leaving directory '/home/release/Sage/build/make'
> make[2]: *** [Makefile:1707: all-start] Error 2
> make[2]: Leaving directory '/home/release/Sage/build/make'
> }}}


Are you sure? I thought it would have come from either #30240 or #30260 since they both touch "distance_regular".



---

archive/issue_comments_417689.json:
```json
{
    "body": "#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`",
    "created_at": "2020-08-04T22:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417689",
    "user": "https://github.com/mkoeppe"
}
```

#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`



---

archive/issue_comments_417690.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-04T22:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417690",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_417691.json:
```json
{
    "body": "Replying to [comment:61 mkoeppe]:\n> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> \n\nit used to be broken, but IMHO it's fixed by #30240#comment:32",
    "created_at": "2020-08-04T22:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417691",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:61 mkoeppe]:
> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> 

it used to be broken, but IMHO it's fixed by #30240#comment:32



---

archive/issue_comments_417692.json:
```json
{
    "body": "Replying to [comment:63 dimpase]:\n> Replying to [comment:61 mkoeppe]:\n> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> > \n\n> it used to be broken, but IMHO it's fixed by #30240#comment:32\n\nUnfortunately Volker merged before that.",
    "created_at": "2020-08-04T22:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417692",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:63 dimpase]:
> Replying to [comment:61 mkoeppe]:
> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> > 

> it used to be broken, but IMHO it's fixed by #30240#comment:32

Unfortunately Volker merged before that.



---

archive/issue_comments_417693.json:
```json
{
    "body": "#30240 does not even have #30260 as a dependency...",
    "created_at": "2020-08-04T23:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417693",
    "user": "https://github.com/mkoeppe"
}
```

#30240 does not even have #30260 as a dependency...



---

archive/issue_comments_417694.json:
```json
{
    "body": "Replying to [comment:65 mkoeppe]:\n> #30240 does not even have #30260 as a dependency...\n\nShould it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\nI apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.",
    "created_at": "2020-08-05T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417694",
    "user": "https://github.com/Ivo-Maffei"
}
```

Replying to [comment:65 mkoeppe]:
> #30240 does not even have #30260 as a dependency...

Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.



---

archive/issue_comments_417695.json:
```json
{
    "body": "Replying to [comment:66 gh-Ivo-Maffei]:\n> Replying to [comment:65 mkoeppe]:\n> > #30240 does not even have #30260 as a dependency...\n\n> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\n> I apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.\n\nThat's alright -- thanks for the fast reaction and fix!",
    "created_at": "2020-08-05T14:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417695",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:66 gh-Ivo-Maffei]:
> Replying to [comment:65 mkoeppe]:
> > #30240 does not even have #30260 as a dependency...

> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
> I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.

That's alright -- thanks for the fast reaction and fix!



---

archive/issue_comments_417696.json:
```json
{
    "body": "```\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 215, in sage_setup.find.find_extra_files\nFailed example:\n    extras[\"sage/ext/interpreters\"]\nExpected:\n    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]\nGot:\n    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage_setup.find.find_extra_files\n    [36 tests, 1 failure, 0.27 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417696",
    "user": "https://github.com/vbraun"
}
```

```
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py
**********************************************************************
File "src/sage_setup/find.py", line 215, in sage_setup.find.find_extra_files
Failed example:
    extras["sage/ext/interpreters"]
Expected:
    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]
Got:
    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']
**********************************************************************
1 item had failures:
   1 of   7 in sage_setup.find.find_extra_files
    [36 tests, 1 failure, 0.27 s]
----------------------------------------------------------------------
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_417697.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417697",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_417698.json:
```json
{
    "body": "Might have been from #29950",
    "created_at": "2020-08-08T12:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417698",
    "user": "https://github.com/vbraun"
}
```

Might have been from #29950



---

archive/issue_comments_417699.json:
```json
{
    "body": "Yes, it's #29950 that broke it.",
    "created_at": "2020-08-08T20:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417699",
    "user": "https://github.com/mkoeppe"
}
```

Yes, it's #29950 that broke it.



---

archive/issue_comments_417700.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-08T20:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417700",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_417701.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29464#issuecomment-417701",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075950.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29464",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29464#event-75950"
}
```
