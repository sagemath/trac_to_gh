# Issue 18760: Unitary polar graphs

archive/issues_018760.json:
```json
{
    "body": "CC:  @nathanncohen\n\nimplement the classical unitary polar graphs `U(n,q)`, see\nhttp://www.win.tue.nl/~aeb/graphs/srghub.html\n\nIssue created by migration from https://trac.sagemath.org/ticket/18997\n\n",
    "created_at": "2015-08-06T14:23:13Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Unitary polar graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18760",
    "user": "https://github.com/dimpase"
}
```
CC:  @nathanncohen

implement the classical unitary polar graphs `U(n,q)`, see
http://www.win.tue.nl/~aeb/graphs/srghub.html

Issue created by migration from https://trac.sagemath.org/ticket/18997





---

archive/issue_comments_255837.json:
```json
{
    "body": "Is there any reason why you made this ticket depend on #18972? It seems easier to finalize, and apparently does not rely on anything from that other ticket.\n\nNathann",
    "created_at": "2015-08-06T19:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255837",
    "user": "https://github.com/nathanncohen"
}
```

Is there any reason why you made this ticket depend on #18972? It seems easier to finalize, and apparently does not rely on anything from that other ticket.

Nathann



---

archive/issue_comments_255838.json:
```json
{
    "body": "Replying to [comment:2 ncohen]:\n> Is there any reason why you made this ticket depend on #18972? It seems easier to finalize, and apparently does not rely on anything from that other ticket.\n\nthis is merely to avoid  merging troubles, as they are both changing `strongly_regular_db`.\n(I'm still writing the latter part of this ticket, and speeding the construction up).\nAnd I will add a contruction of symplectic polar graphs here, as it's almost identical...",
    "created_at": "2015-08-06T19:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255838",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:2 ncohen]:
> Is there any reason why you made this ticket depend on #18972? It seems easier to finalize, and apparently does not rely on anything from that other ticket.

this is merely to avoid  merging troubles, as they are both changing `strongly_regular_db`.
(I'm still writing the latter part of this ticket, and speeding the construction up).
And I will add a contruction of symplectic polar graphs here, as it's almost identical...



---

archive/issue_comments_255839.json:
```json
{
    "body": "Okayokay. I am looking at generalized quadrangles at the moment. Seems that we will have to build some of them.\n\nNathann\n\nhttp://cage.ugent.be/~bamberg/FGQ.pdf",
    "created_at": "2015-08-06T20:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255839",
    "user": "https://github.com/nathanncohen"
}
```

Okayokay. I am looking at generalized quadrangles at the moment. Seems that we will have to build some of them.

Nathann

http://cage.ugent.be/~bamberg/FGQ.pdf



---

archive/issue_comments_255840.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n> Okayokay. I am looking at generalized quadrangles at the moment. Seems that we will have to build some of them.\n> \nwe are already building `GQ(q,q)` and `GQ(q,q^2)`; this ticket will give `GQ(q^2,q)` and `GQ(q<sup>2,q</sup>3)`. So we will need `GQ(q<sup>3,q</sup>2)` - I can do this on this ticket too, as\nthis is essentially a small modification:\n- I build points and lines of the `GQ(q<sup>2,q</sup>3)`, and use them to create the graph; \n- I can also use them to create the intersection graph of the lines, which will give the graph of `GQ(q<sup>3,q</sup>2)`.\n\nWhat remains is `GQ(q-1,q+1)` and its dual, `GQ(q+1,q-1)`.",
    "created_at": "2015-08-06T20:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255840",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:4 ncohen]:
> Okayokay. I am looking at generalized quadrangles at the moment. Seems that we will have to build some of them.
> 
we are already building `GQ(q,q)` and `GQ(q,q^2)`; this ticket will give `GQ(q^2,q)` and `GQ(q<sup>2,q</sup>3)`. So we will need `GQ(q<sup>3,q</sup>2)` - I can do this on this ticket too, as
this is essentially a small modification:
- I build points and lines of the `GQ(q<sup>2,q</sup>3)`, and use them to create the graph; 
- I can also use them to create the intersection graph of the lines, which will give the graph of `GQ(q<sup>3,q</sup>2)`.

What remains is `GQ(q-1,q+1)` and its dual, `GQ(q+1,q-1)`.



---

archive/issue_comments_255841.json:
```json
{
    "body": "> we are already building `GQ(q,q)` and `GQ(q,q^2)`;\n\nOh, really? Shouldn't they be incidence structures in their most natural form instead? I thought that it would make more sense to have a `hypergraphs.generalized_quadrangle` that would then be called by graph constructors.",
    "created_at": "2015-08-06T21:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255841",
    "user": "https://github.com/nathanncohen"
}
```

> we are already building `GQ(q,q)` and `GQ(q,q^2)`;

Oh, really? Shouldn't they be incidence structures in their most natural form instead? I thought that it would make more sense to have a `hypergraphs.generalized_quadrangle` that would then be called by graph constructors.



---

archive/issue_comments_255842.json:
```json
{
    "body": "Replying to [comment:6 ncohen]:\n> > we are already building `GQ(q,q)` and `GQ(q,q^2)`;\n> \n> Oh, really? \nyes, sure, it's `OrthogonalPolarGraph(5,q)` and `OrthogonalPolarGraph(6,q,'-')`.\n\n>Shouldn't they be incidence structures in their most natural form instead? I thought that it would make more sense to have a `hypergraphs.generalized_quadrangle` that would then be called by graph constructors.\n\nwell, they are a part of a more general construction, polar spaces. We can have `hypergraphs.polar_space` of which `hypergraphs.generalized_quadrangle` is a subclass...",
    "created_at": "2015-08-06T21:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255842",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:6 ncohen]:
> > we are already building `GQ(q,q)` and `GQ(q,q^2)`;
> 
> Oh, really? 
yes, sure, it's `OrthogonalPolarGraph(5,q)` and `OrthogonalPolarGraph(6,q,'-')`.

>Shouldn't they be incidence structures in their most natural form instead? I thought that it would make more sense to have a `hypergraphs.generalized_quadrangle` that would then be called by graph constructors.

well, they are a part of a more general construction, polar spaces. We can have `hypergraphs.polar_space` of which `hypergraphs.generalized_quadrangle` is a subclass...



---

archive/issue_comments_255843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-06T23:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255844.json:
```json
{
    "body": "actually, there already was `graphs.SymplecticGraph`, so to it I just added another algorithm to build it, which is faster for fields of size bigger than 3.",
    "created_at": "2015-08-06T23:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255844",
    "user": "https://github.com/dimpase"
}
```

actually, there already was `graphs.SymplecticGraph`, so to it I just added another algorithm to build it, which is faster for fields of size bigger than 3.



---

archive/issue_comments_255845.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-08-18T03:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_255846.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-18T07:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255847.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-18T07:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255847",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_255848.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-18T21:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255849.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T04:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255850.json:
```json
{
    "body": "for the life of me, I get\n\n```\nOSError: [graphs   ] /home/dima/software/sage/local/lib/python2.7/site-packages/sage/graphs/graph_generators.py:docstring of sage.graphs.graph_generators.GraphGenerators.SymplecticGraph:16: WARNING: Literal block expected; none found.\n```\n\nno matter how I try building the docs...\nNo f*cking idea why I get this error.",
    "created_at": "2015-08-24T05:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255850",
    "user": "https://github.com/dimpase"
}
```

for the life of me, I get

```
OSError: [graphs   ] /home/dima/software/sage/local/lib/python2.7/site-packages/sage/graphs/graph_generators.py:docstring of sage.graphs.graph_generators.GraphGenerators.SymplecticGraph:16: WARNING: Literal block expected; none found.
```

no matter how I try building the docs...
No f*cking idea why I get this error.



---

archive/issue_comments_255851.json:
```json
{
    "body": "Does this help (maybe the changes for `_polar_Graph` are unnecessary):\n\n```diff\ndiff --git a/src/sage/graphs/generators/families.py b/src/sage/graphs/generators/families.py\nindex 0fadbbd..89777b0 100644\n--- a/src/sage/graphs/generators/families.py\n+++ b/src/sage/graphs/generators/families.py\n@@ -2535,11 +2535,11 @@ def _polar_Graph(m, q, g, intersection_size=None):\n \n     TESTS::\n \n-    sage: from sage.graphs.generators.families import _polar_Graph\n-    sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2))\n-    Graph on 45 vertices\n-    sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2), intersection_size=1)\n-    Graph on 27 vertices\n+        sage: from sage.graphs.generators.families import _polar_Graph\n+        sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2))\n+        Graph on 45 vertices\n+        sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2), intersection_size=1)\n+        Graph on 27 vertices\n     \"\"\"\n     from sage.libs.gap.libgap import libgap\n     from itertools import combinations\n@@ -2675,17 +2675,17 @@ def SymplecticDualPolarGraph(m, q):\n \n     EXAMPLES::\n \n-    sage: G = graphs.SymplecticDualPolarGraph(6,2); G\n-    Symplectic Polar Graph O(6, 2): Graph on 135 vertices\n-    sage: G.is_distance_regular(parameters=True)\n-    ([14, 12, 8, None], [None, 1, 3, 7])\n+        sage: G = graphs.SymplecticDualPolarGraph(6,2); G\n+        Symplectic Polar Graph O(6, 2): Graph on 135 vertices\n+        sage: G.is_distance_regular(parameters=True)\n+        ([14, 12, 8, None], [None, 1, 3, 7])\n \n     TESTS::\n \n-    sage: G = graphs.SymplecticDualPolarGraph(6,3); G       # long time\n-    Symplectic Polar Graph O(6, 3): Graph on 1120 vertices\n-    sage: G.is_distance_regular(parameters=True)            # long time\n-    ([39, 36, 27, None], [None, 1, 4, 13])\n+        sage: G = graphs.SymplecticDualPolarGraph(6,3); G       # long time\n+        Symplectic Polar Graph O(6, 3): Graph on 1120 vertices\n+        sage: G.is_distance_regular(parameters=True)            # long time\n+        ([39, 36, 27, None], [None, 1, 4, 13])\n     \"\"\"\n     from sage.libs.gap.libgap import libgap\n     G = _polar_Graph(m, q, libgap.SymplecticGroup(m, q),\n```\n\nIf you feel like fixing some other minor docstring issues, you could make these changes, too:\n\n```diff\ndiff --git a/src/sage/graphs/generators/families.py b/src/sage/graphs/generators/families.py\nindex 0fadbbd..953b576 100644\n--- a/src/sage/graphs/generators/families.py\n+++ b/src/sage/graphs/generators/families.py\n@@ -192,9 +192,9 @@ def BalancedTree(r, h):\n \n     TESTS:\n \n-     Normally we would only consider balanced trees whose root node\n-     has degree `r \\geq 2`, but the construction degenerates\n-     gracefully::\n+    Normally we would only consider balanced trees whose root node\n+    has degree `r \\geq 2`, but the construction degenerates\n+    gracefully::\n \n         sage: graphs.BalancedTree(1, 10)\n         Balanced tree: Graph on 2 vertices\n\ndiff --git a/src/sage/graphs/generators/random.py b/src/sage/graphs/generators/random.py\nindex 01f9c13..246250d 100644\n--- a/src/sage/graphs/generators/random.py\n+++ b/src/sage/graphs/generators/random.py\n@@ -749,7 +749,7 @@ def RandomToleranceGraph(n):\n         sage: g.clique_number() == g.chromatic_number()\n         True\n \n-    TEST:\n+    TEST::\n \n         sage: g = graphs.RandomToleranceGraph(-2)\n         Traceback (most recent call last):\ndiff --git a/src/sage/graphs/generators/smallgraphs.py b/src/sage/graphs/generators/smallgraphs.py\nindex 39ca04e..27e1124 100644\n--- a/src/sage/graphs/generators/smallgraphs.py\n+++ b/src/sage/graphs/generators/smallgraphs.py\n@@ -1810,7 +1810,7 @@ def ChvatalGraph():\n         2\n         4\n \n-    TEST:\n+    TEST::\n \n         sage: import networkx\n         sage: G = graphs.ChvatalGraph()\n@@ -2647,7 +2647,7 @@ def FruchtGraph():\n         'KhCKM?_EGK?L'\n         sage: (graphs.FruchtGraph()).show() # long time\n \n-    TEST:\n+    TEST::\n \n         sage: import networkx\n         sage: G = graphs.FruchtGraph()\n@@ -2896,7 +2896,7 @@ def HeawoodGraph():\n         'MhEGHC@AI?_PC@_G_'\n         sage: (graphs.HeawoodGraph()).show() # long time\n \n-    TEST:\n+    TEST::\n \n         sage: import networkx\n         sage: G = graphs.HeawoodGraph()\n@@ -3363,7 +3363,7 @@ def KrackhardtKiteGraph():\n         sage: g = graphs.KrackhardtKiteGraph()\n         sage: g.show() # long time\n \n-    TEST:\n+    TEST::\n \n         sage: import networkx\n         sage: G = graphs.KrackhardtKiteGraph()\ndiff --git a/src/sage/graphs/strongly_regular_db.pyx b/src/sage/graphs/strongly_regular_db.pyx\nindex 44a6640..f28248c 100644\n--- a/src/sage/graphs/strongly_regular_db.pyx\n+++ b/src/sage/graphs/strongly_regular_db.pyx\n@@ -1518,7 +1518,7 @@ def strongly_regular_graph(int v,int k,int l,int mu=-1,bint existence=False):\n         ...\n         RuntimeError: Sage cannot figure out if a (1394,175,0,25)-strongly regular graph exists.\n \n-    Test the Claw bound (see 3.D of [vLintBrouwer84]_):\n+    Test the Claw bound (see 3.D of [vLintBrouwer84]_)::\n \n         sage: graphs.strongly_regular_graph(2058,242,91,20,existence=True)\n         False\n```\n\nYou could also change \"TEST:\" to \"TESTS:\" throughout, but I don't really care much about that.",
    "created_at": "2015-08-25T23:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255851",
    "user": "https://github.com/jhpalmieri"
}
```

Does this help (maybe the changes for `_polar_Graph` are unnecessary):

```diff
diff --git a/src/sage/graphs/generators/families.py b/src/sage/graphs/generators/families.py
index 0fadbbd..89777b0 100644
--- a/src/sage/graphs/generators/families.py
+++ b/src/sage/graphs/generators/families.py
@@ -2535,11 +2535,11 @@ def _polar_Graph(m, q, g, intersection_size=None):
 
     TESTS::
 
-    sage: from sage.graphs.generators.families import _polar_Graph
-    sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2))
-    Graph on 45 vertices
-    sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2), intersection_size=1)
-    Graph on 27 vertices
+        sage: from sage.graphs.generators.families import _polar_Graph
+        sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2))
+        Graph on 45 vertices
+        sage: _polar_Graph(4, 4, libgap.GeneralUnitaryGroup(4, 2), intersection_size=1)
+        Graph on 27 vertices
     """
     from sage.libs.gap.libgap import libgap
     from itertools import combinations
@@ -2675,17 +2675,17 @@ def SymplecticDualPolarGraph(m, q):
 
     EXAMPLES::
 
-    sage: G = graphs.SymplecticDualPolarGraph(6,2); G
-    Symplectic Polar Graph O(6, 2): Graph on 135 vertices
-    sage: G.is_distance_regular(parameters=True)
-    ([14, 12, 8, None], [None, 1, 3, 7])
+        sage: G = graphs.SymplecticDualPolarGraph(6,2); G
+        Symplectic Polar Graph O(6, 2): Graph on 135 vertices
+        sage: G.is_distance_regular(parameters=True)
+        ([14, 12, 8, None], [None, 1, 3, 7])
 
     TESTS::
 
-    sage: G = graphs.SymplecticDualPolarGraph(6,3); G       # long time
-    Symplectic Polar Graph O(6, 3): Graph on 1120 vertices
-    sage: G.is_distance_regular(parameters=True)            # long time
-    ([39, 36, 27, None], [None, 1, 4, 13])
+        sage: G = graphs.SymplecticDualPolarGraph(6,3); G       # long time
+        Symplectic Polar Graph O(6, 3): Graph on 1120 vertices
+        sage: G.is_distance_regular(parameters=True)            # long time
+        ([39, 36, 27, None], [None, 1, 4, 13])
     """
     from sage.libs.gap.libgap import libgap
     G = _polar_Graph(m, q, libgap.SymplecticGroup(m, q),
```

If you feel like fixing some other minor docstring issues, you could make these changes, too:

```diff
diff --git a/src/sage/graphs/generators/families.py b/src/sage/graphs/generators/families.py
index 0fadbbd..953b576 100644
--- a/src/sage/graphs/generators/families.py
+++ b/src/sage/graphs/generators/families.py
@@ -192,9 +192,9 @@ def BalancedTree(r, h):
 
     TESTS:
 
-     Normally we would only consider balanced trees whose root node
-     has degree `r \geq 2`, but the construction degenerates
-     gracefully::
+    Normally we would only consider balanced trees whose root node
+    has degree `r \geq 2`, but the construction degenerates
+    gracefully::
 
         sage: graphs.BalancedTree(1, 10)
         Balanced tree: Graph on 2 vertices

diff --git a/src/sage/graphs/generators/random.py b/src/sage/graphs/generators/random.py
index 01f9c13..246250d 100644
--- a/src/sage/graphs/generators/random.py
+++ b/src/sage/graphs/generators/random.py
@@ -749,7 +749,7 @@ def RandomToleranceGraph(n):
         sage: g.clique_number() == g.chromatic_number()
         True
 
-    TEST:
+    TEST::
 
         sage: g = graphs.RandomToleranceGraph(-2)
         Traceback (most recent call last):
diff --git a/src/sage/graphs/generators/smallgraphs.py b/src/sage/graphs/generators/smallgraphs.py
index 39ca04e..27e1124 100644
--- a/src/sage/graphs/generators/smallgraphs.py
+++ b/src/sage/graphs/generators/smallgraphs.py
@@ -1810,7 +1810,7 @@ def ChvatalGraph():
         2
         4
 
-    TEST:
+    TEST::
 
         sage: import networkx
         sage: G = graphs.ChvatalGraph()
@@ -2647,7 +2647,7 @@ def FruchtGraph():
         'KhCKM?_EGK?L'
         sage: (graphs.FruchtGraph()).show() # long time
 
-    TEST:
+    TEST::
 
         sage: import networkx
         sage: G = graphs.FruchtGraph()
@@ -2896,7 +2896,7 @@ def HeawoodGraph():
         'MhEGHC@AI?_PC@_G_'
         sage: (graphs.HeawoodGraph()).show() # long time
 
-    TEST:
+    TEST::
 
         sage: import networkx
         sage: G = graphs.HeawoodGraph()
@@ -3363,7 +3363,7 @@ def KrackhardtKiteGraph():
         sage: g = graphs.KrackhardtKiteGraph()
         sage: g.show() # long time
 
-    TEST:
+    TEST::
 
         sage: import networkx
         sage: G = graphs.KrackhardtKiteGraph()
diff --git a/src/sage/graphs/strongly_regular_db.pyx b/src/sage/graphs/strongly_regular_db.pyx
index 44a6640..f28248c 100644
--- a/src/sage/graphs/strongly_regular_db.pyx
+++ b/src/sage/graphs/strongly_regular_db.pyx
@@ -1518,7 +1518,7 @@ def strongly_regular_graph(int v,int k,int l,int mu=-1,bint existence=False):
         ...
         RuntimeError: Sage cannot figure out if a (1394,175,0,25)-strongly regular graph exists.
 
-    Test the Claw bound (see 3.D of [vLintBrouwer84]_):
+    Test the Claw bound (see 3.D of [vLintBrouwer84]_)::
 
         sage: graphs.strongly_regular_graph(2058,242,91,20,existence=True)
         False
```

You could also change "TEST:" to "TESTS:" throughout, but I don't really care much about that.



---

archive/issue_comments_255852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T00:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255853.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T02:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255854.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-27T11:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255854",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_255855.json:
```json
{
    "body": "Helloooooooo Dima,\n\nHere is a 'first-pass' review:\n\n- This doctest is way too long:\n  {{{\n  sage: %time graphs.SymplecticGraph(6,4,algorithm=\"gap\").is_strongly_regular(parameters=True)\n  CPU times: user 22 s, sys: 132 ms, total: 22.2 s\n  Wall time: 21.1 s\n  (1365, 340, 83, 85)\n  }}}\n  You will see several places in this file doctests disabled because they take\n  ~5seconds. This, because the doctests are run very often by a lot of people,\n  and we can't have them compute for 20 seconds whenever we add a function (and\n  we do add many). Could you replace this `6,4` by `4,4` or something?\n\n- Why is this only checked when `algorithm=\"gap\"`?\n  {{{\n  if d < 1 or d%2 != 0:\n      raise ValueError(\"d must be even and greater than 2\")\n  }}}\n\n- `_polar_graph` -- misses an 'INPUT' section\n\n- Could you merge this branch with the latest version of its dependency?\n\n- in `_polar_Graph` -- why upper case `G`?\n\n- same function: would it make sense to compute the list of edges of the graph\n  in GAP instead of doing it in Sage, which triggers GAP calls? Just wondering,\n  as it seems that interacting with GAP is often costly.\n\nNathann",
    "created_at": "2015-08-27T11:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255855",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooo Dima,

Here is a 'first-pass' review:

- This doctest is way too long:
  {{{
  sage: %time graphs.SymplecticGraph(6,4,algorithm="gap").is_strongly_regular(parameters=True)
  CPU times: user 22 s, sys: 132 ms, total: 22.2 s
  Wall time: 21.1 s
  (1365, 340, 83, 85)
  }}}
  You will see several places in this file doctests disabled because they take
  ~5seconds. This, because the doctests are run very often by a lot of people,
  and we can't have them compute for 20 seconds whenever we add a function (and
  we do add many). Could you replace this `6,4` by `4,4` or something?

- Why is this only checked when `algorithm="gap"`?
  {{{
  if d < 1 or d%2 != 0:
      raise ValueError("d must be even and greater than 2")
  }}}

- `_polar_graph` -- misses an 'INPUT' section

- Could you merge this branch with the latest version of its dependency?

- in `_polar_Graph` -- why upper case `G`?

- same function: would it make sense to compute the list of edges of the graph
  in GAP instead of doing it in Sage, which triggers GAP calls? Just wondering,
  as it seems that interacting with GAP is often costly.

Nathann



---

archive/issue_comments_255856.json:
```json
{
    "body": "Replying to [comment:19 ncohen]:\n\n> - Why is this only checked when `algorithm=\"gap\"`?\n>   {{{\n>   if d < 1 or d%2 != 0:\n>       raise ValueError(\"d must be even and greater than 2\")\n>   }}}\n>\noops, it's a bug...\n \n> \n> - in `_polar_Graph` -- why upper case `G`?\n> \n> - same function: would it make sense to compute the list of edges of the graph\n>   in GAP instead of doing it in Sage, which triggers GAP calls? Just wondering,\n>   as it seems that interacting with GAP is often costly.\n\nthis is `libGAP`, we can be reasonably sure that at least with non-complicated objects, \nlike integers, this is as quick as native Python... (certainly, replacing `libgap` with `gap` there would lead to a huge performance hit).",
    "created_at": "2015-08-27T17:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255856",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:19 ncohen]:

> - Why is this only checked when `algorithm="gap"`?
>   {{{
>   if d < 1 or d%2 != 0:
>       raise ValueError("d must be even and greater than 2")
>   }}}
>
oops, it's a bug...
 
> 
> - in `_polar_Graph` -- why upper case `G`?
> 
> - same function: would it make sense to compute the list of edges of the graph
>   in GAP instead of doing it in Sage, which triggers GAP calls? Just wondering,
>   as it seems that interacting with GAP is often costly.

this is `libGAP`, we can be reasonably sure that at least with non-complicated objects, 
like integers, this is as quick as native Python... (certainly, replacing `libgap` with `gap` there would lead to a huge performance hit).



---

archive/issue_comments_255857.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-27T18:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255858.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-27T18:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255858",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255859.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-28T12:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255859",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_255860.json:
```json
{
    "body": "Helloooooooo Dima,\n\n- About the methods with a \"algorithm\" keyword: some of them do not have an\n  `INPUT` block where the parameter is described. Also, it would be better if\n  instead of checking `!= 'gap'` you tested `algorithm =='Gap'` then `algorithm\n  is None` and finally raised an exception if the argument does not beelong to\n  the allowed list. This being said, I would have nothing against it if you\n  chose to remove the pure Sage code. It's up to you.\n\n- Backticks are missing around `Sp(x,y)` and others.\n\n- We have `SimplecticGraph` and `SimplecticDualPolarGraph` -- should we\n  uniformize the `Polar` somehow?\n\n- singilar\n\n- Can you please remove/change all tests that take more than 2 seconds? Don't\n  build instances larger than is necessary to *test* your code. With your\n  branch:\n  {{{\n  sage -t --long families.py\n       [280 tests, 44.02 s]\n  }}}\n  With the latest beta\n  {{{\n  sage -t --long families.py\n       [250 tests, 19.95 s]\n  }}}\n\n- Some graphs are not defined on a html page, and for those you link toward\n  \"Distance-regular graphs\". As this is much harder to find than a web page,\n  could you provide some quick definition of the class, just to give the user\n  \"an idea\"?\n\n- You may want (it's up to you) to add \"SEEALSO\" blocks between your methods.\n\n- As we now have many of these polar graphs, you may want (it's up to you) to\n  split them from the \"Graph families\" block of the index\n  (http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph_generators.html)\n  and give them a block of their own.\n\nThank you *very* much for this code.\n\nNathann",
    "created_at": "2015-08-28T12:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255860",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooo Dima,

- About the methods with a "algorithm" keyword: some of them do not have an
  `INPUT` block where the parameter is described. Also, it would be better if
  instead of checking `!= 'gap'` you tested `algorithm =='Gap'` then `algorithm
  is None` and finally raised an exception if the argument does not beelong to
  the allowed list. This being said, I would have nothing against it if you
  chose to remove the pure Sage code. It's up to you.

- Backticks are missing around `Sp(x,y)` and others.

- We have `SimplecticGraph` and `SimplecticDualPolarGraph` -- should we
  uniformize the `Polar` somehow?

- singilar

- Can you please remove/change all tests that take more than 2 seconds? Don't
  build instances larger than is necessary to *test* your code. With your
  branch:
  {{{
  sage -t --long families.py
       [280 tests, 44.02 s]
  }}}
  With the latest beta
  {{{
  sage -t --long families.py
       [250 tests, 19.95 s]
  }}}

- Some graphs are not defined on a html page, and for those you link toward
  "Distance-regular graphs". As this is much harder to find than a web page,
  could you provide some quick definition of the class, just to give the user
  "an idea"?

- You may want (it's up to you) to add "SEEALSO" blocks between your methods.

- As we now have many of these polar graphs, you may want (it's up to you) to
  split them from the "Graph families" block of the index
  (http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph_generators.html)
  and give them a block of their own.

Thank you *very* much for this code.

Nathann



---

archive/issue_comments_255861.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> Helloooooooo Dima,\n> \n> - About the methods with a \"algorithm\" keyword: some of them do not have an\n>   `INPUT` block where the parameter is described. Also, it would be better if\n>   instead of checking `!= 'gap'` you tested `algorithm =='Gap'` then `algorithm\n>   is None` and finally raised an exception if the argument does not beelong to\n>   the allowed list. This being said, I would have nothing against it if you\n>   chose to remove the pure Sage code. It's up to you.\nit's always better to have 2 implementations... I'll rearrange as you ask.\n> \n> - Backticks are missing around `Sp(x,y)` and others.\n> \n> - We have `SimplecticGraph` and `SimplecticDualPolarGraph` -- should we\n>   uniformize the `Polar` somehow?\nyep, how about renaming `SimplecticGraph` to `SimplecticPolarGraph` and make `SimplecticGraph` a deprecated alias to `SimplecticPolarGraph`?\n\n\n> - Can you please remove/change all tests that take more than 2 seconds? \nHow about I'll move them into examples and mark them # not tested (long time)?\nThey test \"generic\" situations, whereas all the small examples there are kinds of corner cases.\n\n\n> - Some graphs are not defined on a html page, and for those you link toward\n>   \"Distance-regular graphs\". As this is much harder to find than a web page,\n>   could you provide some quick definition of the class, just to give the user\n>   \"an idea\"?\n\nall these `SymplecticPolar`, `OrthogonalPolar`, etc are very similar, as\nwell as all `SymplecticDualPolar` etc.\nThere is a freely available preprint that describes them in detail:\nhttps://repository.cwi.nl/noauth/search/fullrecord.php?publnr=6775\n\nI'd rather include this as a reference.\n\nPerhaps it's more meaningful to create a separate module, say polar_families.py,\nwhere we move all them, as well as `AffinePolar` guys. Then a doc can be written\nin the top of this new module.\n\nWe could also extend the wikipedia page https://en.wikipedia.org/wiki/Distance-regular_graph and have docs there...\n\n> \n> - You may want (it's up to you) to add \"SEEALSO\" blocks between your methods.\n> \n> - As we now have many of these polar graphs, you may want (it's up to you) to\n>   split them from the \"Graph families\" block of the index\n>   (http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph_generators.html)\n>   and give them a block of their own.\n\nthis would be even more meaningful with a new module.",
    "created_at": "2015-08-28T16:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255861",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:24 ncohen]:
> Helloooooooo Dima,
> 
> - About the methods with a "algorithm" keyword: some of them do not have an
>   `INPUT` block where the parameter is described. Also, it would be better if
>   instead of checking `!= 'gap'` you tested `algorithm =='Gap'` then `algorithm
>   is None` and finally raised an exception if the argument does not beelong to
>   the allowed list. This being said, I would have nothing against it if you
>   chose to remove the pure Sage code. It's up to you.
it's always better to have 2 implementations... I'll rearrange as you ask.
> 
> - Backticks are missing around `Sp(x,y)` and others.
> 
> - We have `SimplecticGraph` and `SimplecticDualPolarGraph` -- should we
>   uniformize the `Polar` somehow?
yep, how about renaming `SimplecticGraph` to `SimplecticPolarGraph` and make `SimplecticGraph` a deprecated alias to `SimplecticPolarGraph`?


> - Can you please remove/change all tests that take more than 2 seconds? 
How about I'll move them into examples and mark them # not tested (long time)?
They test "generic" situations, whereas all the small examples there are kinds of corner cases.


> - Some graphs are not defined on a html page, and for those you link toward
>   "Distance-regular graphs". As this is much harder to find than a web page,
>   could you provide some quick definition of the class, just to give the user
>   "an idea"?

all these `SymplecticPolar`, `OrthogonalPolar`, etc are very similar, as
well as all `SymplecticDualPolar` etc.
There is a freely available preprint that describes them in detail:
https://repository.cwi.nl/noauth/search/fullrecord.php?publnr=6775

I'd rather include this as a reference.

Perhaps it's more meaningful to create a separate module, say polar_families.py,
where we move all them, as well as `AffinePolar` guys. Then a doc can be written
in the top of this new module.

We could also extend the wikipedia page https://en.wikipedia.org/wiki/Distance-regular_graph and have docs there...

> 
> - You may want (it's up to you) to add "SEEALSO" blocks between your methods.
> 
> - As we now have many of these polar graphs, you may want (it's up to you) to
>   split them from the "Graph families" block of the index
>   (http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph_generators.html)
>   and give them a block of their own.

this would be even more meaningful with a new module.



---

archive/issue_comments_255862.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-28T18:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255863.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-28T18:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255863",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255864.json:
```json
{
    "body": "I'd rather do the reorganisation elsewhere. E.g. to make the list of dual polar graphs complete, one should add orthogonal dual polar graphs.",
    "created_at": "2015-08-28T18:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255864",
    "user": "https://github.com/dimpase"
}
```

I'd rather do the reorganisation elsewhere. E.g. to make the list of dual polar graphs complete, one should add orthogonal dual polar graphs.



---

archive/issue_comments_255865.json:
```json
{
    "body": "Hello,\n\n> yep, how about renaming `SimplecticGraph` to `SimplecticPolarGraph` and make `SimplecticGraph` a deprecated alias to `SimplecticPolarGraph`?\n\n+1\n\n> There is a freely available preprint that describes them in detail:\n> https://repository.cwi.nl/noauth/search/fullrecord.php?publnr=6775\n> \n> I'd rather include this as a reference.\n\nWorks for me.\n\n> it's more meaningful to create a separate module, say polar_families.py,\n> where we move all them, as well as `AffinePolar` guys. Then a doc can be written\n> in the top of this new module.\n\n+1\n\n> We could also extend the wikipedia page https://en.wikipedia.org/wiki/Distance-regular_graph and have docs there...\n\n+1. Though I beware of wikipedia now. I have experienced how hard it is to fight the whims of those who are \"in charge\" of some pages...\n\n> this would be even more meaningful with a new module.\n\n+1\n\n> I'd rather do the reorganisation elsewhere. E.g. to make the list of dual polar graphs complete, one should add orthogonal dual polar graphs.\n\nReorganization can indeed wait, but must not forget to address the \"SymplecticDualPolarGraph\" vs \"SymplecticGraph\" issue.\n\nNathann",
    "created_at": "2015-08-29T14:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255865",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> yep, how about renaming `SimplecticGraph` to `SimplecticPolarGraph` and make `SimplecticGraph` a deprecated alias to `SimplecticPolarGraph`?

+1

> There is a freely available preprint that describes them in detail:
> https://repository.cwi.nl/noauth/search/fullrecord.php?publnr=6775
> 
> I'd rather include this as a reference.

Works for me.

> it's more meaningful to create a separate module, say polar_families.py,
> where we move all them, as well as `AffinePolar` guys. Then a doc can be written
> in the top of this new module.

+1

> We could also extend the wikipedia page https://en.wikipedia.org/wiki/Distance-regular_graph and have docs there...

+1. Though I beware of wikipedia now. I have experienced how hard it is to fight the whims of those who are "in charge" of some pages...

> this would be even more meaningful with a new module.

+1

> I'd rather do the reorganisation elsewhere. E.g. to make the list of dual polar graphs complete, one should add orthogonal dual polar graphs.

Reorganization can indeed wait, but must not forget to address the "SymplecticDualPolarGraph" vs "SymplecticGraph" issue.

Nathann



---

archive/issue_comments_255866.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-29T14:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255866",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_255867.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-29T23:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18760#issuecomment-255867",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
