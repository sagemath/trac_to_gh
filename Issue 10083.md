# Issue 10083: Lazy power series are created with incorrect order

Issue created by migration from Trac.

Original creator: schilly

Original creation time: 2010-10-06 12:26:23

Assignee: burcin

CC:  axel.bacher@labri.fr mhansen mantepse

Reported by the "Report a Problem" Form:

When typing the following:


```
S = LazyPowerSeriesRing(ZZ)
one = S(0) + S(1)
one.order
```


I get a "Infinite series order" message. When asking for

```
one.coefficients(3)
```

I get "[0, 0, 0]".

Looking into the code sage/combinat/species/series.py, the _add_ method calls the _new method to create the sum series. Trying:

```
zero = S(0)
test_series = zero._new(lambda ao: Stream(const=1), lambda: 0)
test_series.order
test_series.coefficients(3)
```

I again get "Infinite series order" and "[0, 0, 0]".

As I understand it, the _new() method calls the __init__() method of LazyPowerSeries in the line:

```
new_fps = self.__class__(parent, stream=None, order=unk, aorder=self.aorder, aorder_changed=True, is_initialized=False)
```

If the value self.aorder is inf, this puts new_fps.aorder to inf, which (in the __init__() code), also puts new_fps.order to inf, which makes Sage think that the series has infinite order.

Changing the argument aorder=self.aorder to aorder=unk in the above line solved the problem.
The sum of S(0) and S(1) should have order zero, and its first three coefficients should be [1, 0, 0].

The series test_series should also have order zero, and its coefficients should be [1, 1, 1].



---

Comment by burcin created at 2010-10-16 21:16:53

Changing assignee from burcin to sage-combinat.


---

Comment by burcin created at 2010-10-16 21:16:53

Changing component from symbolics to combinatorics.


---

Comment by mhansen created at 2012-08-10 12:05:08

Changing status from new to needs_review.


---

Attachment


---

Comment by mhansen created at 2012-08-11 01:20:17

Changing status from needs_review to needs_work.


---

Comment by mantepse created at 2014-01-10 20:34:29

Changing keywords from "" to "LazyPowerSeries".


---

Comment by mhansen created at 2014-01-14 17:17:11

A fix is in #15673


---

Comment by mantepse created at 2022-09-21 13:47:02

Changing status from needs_work to needs_review.


---

Comment by mantepse created at 2022-09-21 13:47:02

This is no longer relevant, since #32367.


---

Comment by tscrim created at 2022-10-22 07:23:21

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-11-14 19:36:43

Resolution: invalid
