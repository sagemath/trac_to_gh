# Issue 34247: Methods quotient, quotient_module are not the same for some modules from sage.modules

Issue created by migration from https://trac.sagemath.org/ticket/34484

Original creator: mkoeppe

Original creation time: 2022-09-02 22:28:29

CC:  tscrim jhpalmieri lorenz

The base class `Module_free_ambient` makes `quotient` and `quotient_module` the same, but some subclasses override only `quotient`.


```
sage: A = ZZ^3; V = A.span([[1,2,3], [4,5,6]])
sage: V.quotient
<bound method FreeModule_generic_pid.quotient of Free module of degree 3 and rank 2 over Integer Ring
Echelon basis matrix:
[1 2 3]
[0 3 6]>
sage: V.quotient_module
<bound method Module_free_ambient.quotient_module of Free module of degree 3 and rank 2 over Integer Ring
Echelon basis matrix:
[1 2 3]
[0 3 6]>

sage: A = QQ^3
sage: A.quotient
<bound method FreeModule_generic_field.quotient of Vector space of dimension 3 over Rational Field>
sage: A.quotient_module
<bound method Module_free_ambient.quotient_module of Vector space of dimension 3 over Rational Field>
```




---

Comment by jhpalmieri created at 2022-09-02 23:11:41

Having multiple names for the same thing appears in other places, too: `ZZ.quo?`, `ZZ.quotient?`, and `ZZ.quotient_ring?` display different help strings although claiming to be synonyms for each other. Maybe not as big a deal since maybe not so many things inherit methods from `ZZ`, but still not ideal (heh).


---

Comment by mkoeppe created at 2022-09-02 23:32:52

I'm not concerned about the `quo` method (provided by `Rings.ParentMethods` and redundantly(?) by `sage.rings.ring.Ring`. It just delegates to `quotient` by calling the method.


---

Comment by jhpalmieri created at 2022-09-02 23:43:36

So in the case at hand, what's going on? Do we have

```
class Module_one(...):

    def quotient(...):

    quotient_module = quotient
```

whereas it would be better to have

```
class Module_one(...):

    def quotient(...):

    def quotient_module(...):
        return self.quotient(...)
```

Or would it be better to deprecate one or the other and focus on a single way of doing things? The Python philosophy is that there should ideally only be one obvious way to do things, so if we agree with that, then deprecation is the way to go.


---

Comment by tscrim created at 2022-09-02 23:46:12

Indeed, unfortunately there isn't a goo mechanism in Python to repeat the alias in subclasses other than having the redirect.


---

Comment by mkoeppe created at 2022-09-02 23:47:25

Replying to [comment:3 jhpalmieri]:
> So in the case at hand, what's going on? Do we have
> {{{
> class Module_one(...):
> 
>     def quotient(...):
> 
>     quotient_module = quotient
> }}}
> whereas it would be better to have
> {{{
> class Module_one(...):
> 
>     def quotient(...):
> 
>     def quotient_module(...):
>         return self.quotient(...)
> }}}

Yes, exactly.


---

Comment by mkoeppe created at 2022-09-02 23:52:52

Having the alias `quo` was probably motivated by compatibility with Magma
----
New commits:


---

Comment by mkoeppe created at 2022-09-02 23:54:33

I can't comment on how important having the alias `quo` still is.

But there are probably good reasons to have both `quotient` and `quotient_ring`, for cases where also `quotient_module` makes sense


---

Comment by git created at 2022-09-03 00:01:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-03 00:02:04

Here's an incidental cleanup, removing duplications between base class and `Rings.ParentMethods`


---

Comment by git created at 2022-09-03 00:42:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-03 00:42:44

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-09-03 02:49:10

Is there any guidance, or should there be, about which method to override, `quotient` or `quotient_module`?


---

Comment by git created at 2022-09-03 03:35:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-03 03:36:02

How about this?


---

Comment by jhpalmieri created at 2022-09-05 00:17:08

I get a doctest failure in `src/doc/en/thematic_tutorials/coercion_and_categories.rst`. The changes look okay to me. Travis, any opinion?


---

Comment by git created at 2022-09-05 00:22:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2022-09-05 00:24:37

+1

I would say that redirecting to `quotient_module` is better for, say, algebras, as we could want to potentially keep the quotient-as-algebras and the quotient-as-modules different. The only other nag would be that most people will simply type (and override) the shorter-yet-still-clear `quotient` and they pay a small performance penalty of a redirect. (Of course, for the reason I just stated, this is much robust than the reverse because a programmer might implement the quotient as algebras with enforcement and expect `quotient_module` to still work and be surprised it doesn’t.) The redirect almost certainly shouldn’t have any significant impact on runtime.


---

Comment by jhpalmieri created at 2022-09-05 01:57:50

The doctest still fails: it is expecting `__rtruediv__` and `__truediv__` but not getting them.


---

Comment by mkoeppe created at 2022-09-05 02:01:24

Thanks - I was waiting for the build&test


---

Comment by git created at 2022-09-05 02:03:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-09-05 05:26:59

Positive review from me. I will flip the switch tomorrow if I don't hear otherwise.


---

Comment by jhpalmieri created at 2022-09-05 18:22:19

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-09-05 18:29:30

Thanks!


---

Comment by vbraun created at 2022-09-22 22:35:18

Resolution: fixed
