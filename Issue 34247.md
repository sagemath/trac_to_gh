# Issue 34247: Methods quotient, quotient_module are not the same for some modules from sage.modules

archive/issues_034247.json:
```json
{
    "body": "CC:  @tscrim @jhpalmieri @yyyyx4\n\nThe base class `Module_free_ambient` makes `quotient` and `quotient_module` the same, but some subclasses override only `quotient`.\n\n\n```\nsage: A = ZZ^3; V = A.span([[1,2,3], [4,5,6]])\nsage: V.quotient\n<bound method FreeModule_generic_pid.quotient of Free module of degree 3 and rank 2 over Integer Ring\nEchelon basis matrix:\n[1 2 3]\n[0 3 6]>\nsage: V.quotient_module\n<bound method Module_free_ambient.quotient_module of Free module of degree 3 and rank 2 over Integer Ring\nEchelon basis matrix:\n[1 2 3]\n[0 3 6]>\n\nsage: A = QQ^3\nsage: A.quotient\n<bound method FreeModule_generic_field.quotient of Vector space of dimension 3 over Rational Field>\nsage: A.quotient_module\n<bound method Module_free_ambient.quotient_module of Vector space of dimension 3 over Rational Field>\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34484\n\n",
    "created_at": "2022-09-02T22:28:29Z",
    "labels": [
        "linear algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Methods quotient, quotient_module are not the same for some modules from sage.modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34247",
    "user": "@mkoeppe"
}
```
CC:  @tscrim @jhpalmieri @yyyyx4

The base class `Module_free_ambient` makes `quotient` and `quotient_module` the same, but some subclasses override only `quotient`.


```
sage: A = ZZ^3; V = A.span([[1,2,3], [4,5,6]])
sage: V.quotient
<bound method FreeModule_generic_pid.quotient of Free module of degree 3 and rank 2 over Integer Ring
Echelon basis matrix:
[1 2 3]
[0 3 6]>
sage: V.quotient_module
<bound method Module_free_ambient.quotient_module of Free module of degree 3 and rank 2 over Integer Ring
Echelon basis matrix:
[1 2 3]
[0 3 6]>

sage: A = QQ^3
sage: A.quotient
<bound method FreeModule_generic_field.quotient of Vector space of dimension 3 over Rational Field>
sage: A.quotient_module
<bound method Module_free_ambient.quotient_module of Vector space of dimension 3 over Rational Field>
```



Issue created by migration from https://trac.sagemath.org/ticket/34484





---

archive/issue_comments_485735.json:
```json
{
    "body": "Having multiple names for the same thing appears in other places, too: `ZZ.quo?`, `ZZ.quotient?`, and `ZZ.quotient_ring?` display different help strings although claiming to be synonyms for each other. Maybe not as big a deal since maybe not so many things inherit methods from `ZZ`, but still not ideal (heh).",
    "created_at": "2022-09-02T23:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485735",
    "user": "@jhpalmieri"
}
```

Having multiple names for the same thing appears in other places, too: `ZZ.quo?`, `ZZ.quotient?`, and `ZZ.quotient_ring?` display different help strings although claiming to be synonyms for each other. Maybe not as big a deal since maybe not so many things inherit methods from `ZZ`, but still not ideal (heh).



---

archive/issue_comments_485736.json:
```json
{
    "body": "I'm not concerned about the `quo` method (provided by `Rings.ParentMethods` and redundantly(?) by `sage.rings.ring.Ring`. It just delegates to `quotient` by calling the method.",
    "created_at": "2022-09-02T23:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485736",
    "user": "@mkoeppe"
}
```

I'm not concerned about the `quo` method (provided by `Rings.ParentMethods` and redundantly(?) by `sage.rings.ring.Ring`. It just delegates to `quotient` by calling the method.



---

archive/issue_comments_485737.json:
```json
{
    "body": "So in the case at hand, what's going on? Do we have\n\n```\nclass Module_one(...):\n\n    def quotient(...):\n\n    quotient_module = quotient\n```\n\nwhereas it would be better to have\n\n```\nclass Module_one(...):\n\n    def quotient(...):\n\n    def quotient_module(...):\n        return self.quotient(...)\n```\n\nOr would it be better to deprecate one or the other and focus on a single way of doing things? The Python philosophy is that there should ideally only be one obvious way to do things, so if we agree with that, then deprecation is the way to go.",
    "created_at": "2022-09-02T23:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485737",
    "user": "@jhpalmieri"
}
```

So in the case at hand, what's going on? Do we have

```
class Module_one(...):

    def quotient(...):

    quotient_module = quotient
```

whereas it would be better to have

```
class Module_one(...):

    def quotient(...):

    def quotient_module(...):
        return self.quotient(...)
```

Or would it be better to deprecate one or the other and focus on a single way of doing things? The Python philosophy is that there should ideally only be one obvious way to do things, so if we agree with that, then deprecation is the way to go.



---

archive/issue_comments_485738.json:
```json
{
    "body": "Indeed, unfortunately there isn't a goo mechanism in Python to repeat the alias in subclasses other than having the redirect.",
    "created_at": "2022-09-02T23:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485738",
    "user": "@tscrim"
}
```

Indeed, unfortunately there isn't a goo mechanism in Python to repeat the alias in subclasses other than having the redirect.



---

archive/issue_comments_485739.json:
```json
{
    "body": "Replying to [comment:3 jhpalmieri]:\n> So in the case at hand, what's going on? Do we have\n> {{{\n> class Module_one(...):\n> \n>     def quotient(...):\n> \n>     quotient_module = quotient\n> }}}\n> whereas it would be better to have\n> {{{\n> class Module_one(...):\n> \n>     def quotient(...):\n> \n>     def quotient_module(...):\n>         return self.quotient(...)\n> }}}\n\nYes, exactly.",
    "created_at": "2022-09-02T23:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485739",
    "user": "@mkoeppe"
}
```

Replying to [comment:3 jhpalmieri]:
> So in the case at hand, what's going on? Do we have
> {{{
> class Module_one(...):
> 
>     def quotient(...):
> 
>     quotient_module = quotient
> }}}
> whereas it would be better to have
> {{{
> class Module_one(...):
> 
>     def quotient(...):
> 
>     def quotient_module(...):
>         return self.quotient(...)
> }}}

Yes, exactly.



---

archive/issue_comments_485740.json:
```json
{
    "body": "Having the alias `quo` was probably motivated by compatibility with Magma\n----\nNew commits:",
    "created_at": "2022-09-02T23:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485740",
    "user": "@mkoeppe"
}
```

Having the alias `quo` was probably motivated by compatibility with Magma
----
New commits:



---

archive/issue_comments_485741.json:
```json
{
    "body": "I can't comment on how important having the alias `quo` still is.\n\nBut there are probably good reasons to have both `quotient` and `quotient_ring`, for cases where also `quotient_module` makes sense",
    "created_at": "2022-09-02T23:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485741",
    "user": "@mkoeppe"
}
```

I can't comment on how important having the alias `quo` still is.

But there are probably good reasons to have both `quotient` and `quotient_ring`, for cases where also `quotient_module` makes sense



---

archive/issue_comments_485742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-03T00:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485742",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_485743.json:
```json
{
    "body": "Here's an incidental cleanup, removing duplications between base class and `Rings.ParentMethods`",
    "created_at": "2022-09-03T00:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485743",
    "user": "@mkoeppe"
}
```

Here's an incidental cleanup, removing duplications between base class and `Rings.ParentMethods`



---

archive/issue_comments_485744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-03T00:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485744",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_485745.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-09-03T00:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485745",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_485746.json:
```json
{
    "body": "Is there any guidance, or should there be, about which method to override, `quotient` or `quotient_module`?",
    "created_at": "2022-09-03T02:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485746",
    "user": "@jhpalmieri"
}
```

Is there any guidance, or should there be, about which method to override, `quotient` or `quotient_module`?



---

archive/issue_comments_485747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-03T03:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485747",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_485748.json:
```json
{
    "body": "How about this?",
    "created_at": "2022-09-03T03:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485748",
    "user": "@mkoeppe"
}
```

How about this?



---

archive/issue_comments_485749.json:
```json
{
    "body": "I get a doctest failure in `src/doc/en/thematic_tutorials/coercion_and_categories.rst`. The changes look okay to me. Travis, any opinion?",
    "created_at": "2022-09-05T00:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485749",
    "user": "@jhpalmieri"
}
```

I get a doctest failure in `src/doc/en/thematic_tutorials/coercion_and_categories.rst`. The changes look okay to me. Travis, any opinion?



---

archive/issue_comments_485750.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-05T00:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485750",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_485751.json:
```json
{
    "body": "+1\n\nI would say that redirecting to `quotient_module` is better for, say, algebras, as we could want to potentially keep the quotient-as-algebras and the quotient-as-modules different. The only other nag would be that most people will simply type (and override) the shorter-yet-still-clear `quotient` and they pay a small performance penalty of a redirect. (Of course, for the reason I just stated, this is much robust than the reverse because a programmer might implement the quotient as algebras with enforcement and expect `quotient_module` to still work and be surprised it doesn\u2019t.) The redirect almost certainly shouldn\u2019t have any significant impact on runtime.",
    "created_at": "2022-09-05T00:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485751",
    "user": "@tscrim"
}
```

+1

I would say that redirecting to `quotient_module` is better for, say, algebras, as we could want to potentially keep the quotient-as-algebras and the quotient-as-modules different. The only other nag would be that most people will simply type (and override) the shorter-yet-still-clear `quotient` and they pay a small performance penalty of a redirect. (Of course, for the reason I just stated, this is much robust than the reverse because a programmer might implement the quotient as algebras with enforcement and expect `quotient_module` to still work and be surprised it doesn’t.) The redirect almost certainly shouldn’t have any significant impact on runtime.



---

archive/issue_comments_485752.json:
```json
{
    "body": "The doctest still fails: it is expecting `__rtruediv__` and `__truediv__` but not getting them.",
    "created_at": "2022-09-05T01:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485752",
    "user": "@jhpalmieri"
}
```

The doctest still fails: it is expecting `__rtruediv__` and `__truediv__` but not getting them.



---

archive/issue_comments_485753.json:
```json
{
    "body": "Thanks - I was waiting for the build&test",
    "created_at": "2022-09-05T02:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485753",
    "user": "@mkoeppe"
}
```

Thanks - I was waiting for the build&test



---

archive/issue_comments_485754.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-05T02:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485754",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_485755.json:
```json
{
    "body": "Positive review from me. I will flip the switch tomorrow if I don't hear otherwise.",
    "created_at": "2022-09-05T05:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485755",
    "user": "@jhpalmieri"
}
```

Positive review from me. I will flip the switch tomorrow if I don't hear otherwise.



---

archive/issue_comments_485756.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-05T18:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485756",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_485757.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-09-05T18:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485757",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_485758.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-22T22:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34247#issuecomment-485758",
    "user": "@vbraun"
}
```

Resolution: fixed
