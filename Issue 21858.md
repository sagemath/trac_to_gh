# Issue 21858: imag modifies zero!!

Issue created by migration from https://trac.sagemath.org/ticket/22095

Original creator: vdelecroix

Original creation time: 2016-12-23 22:31:37


```
sage: K.<a> = NumberField(x^2 + x + 1, embedding=CDF.0)
sage: a.imag()
1/2*sqrt3
sage: K3.<sqrt3> = QuadraticField(3)
sage: K3.zero()
1/2*sqrt3
```



---

Comment by vdelecroix created at 2016-12-23 22:36:13

New commits:


---

Comment by vdelecroix created at 2016-12-23 22:36:13

Changing status from new to needs_review.


---

Comment by novoselt created at 2016-12-24 05:39:53

Um, while this will fix this example, what stops someone from using `K.zero()` instead of `K(0)` in the future code?..


---

Comment by vdelecroix created at 2016-12-24 07:31:40

You are very free to use `K.zero()` (and you should). You are not allowed to use the C-API and modifies it. And nobody prevents it! This is indeed a (minor) problem in Cython code.


---

Comment by jdemeyer created at 2016-12-25 18:30:44

Minor bikeshed about the doctest: does it really need K and K3? If one field is sufficient, that would be a better test.


---

Comment by git created at 2016-12-26 09:26:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-12-26 09:27:24

Replying to [comment:4 jdemeyer]:
> Minor bikeshed about the doctest: does it really need K and K3? If one field is sufficient, that would be a better test.

It does. Asking for imaginary part in a complex field (`K`) returns a value in a real field (`K13`). And it needs to be this precise `K13` with `sqrt13` as variable name. I changed the doctest to reflect this fact. Without the branch the second `K13.zero()` fails.


---

Comment by jdemeyer created at 2016-12-26 13:18:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-12-27 16:32:16

Resolution: fixed
