# Issue 17791: Remove GraphBundle

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2015-03-21 12:27:48

CC:  ncohen jason

Doesn't work and nothing changed over the last 5 years. If you want it back its always in the git repo.


---

Comment by vbraun created at 2015-03-21 12:30:54

New commits:


---

Comment by vbraun created at 2015-03-21 12:30:54

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-03-21 13:37:20

Wow. Glad to see that it is actually possible to remove code from Sage. I always thought that it was 'politically impossible' to remove anything from this software, but fortunately I seem to be wrong.

What would you think of removing `BipartiteGraph` while we are at it ? This class' design is awful:


```
sage: g=BipartiteGraph()
sage: l=[(0,1),(3,2),(1,2),(0,3)]
sage: for e in l:
....:     g.add_edge(e)
RuntimeError: Edge vertices must lie in different partitions.
```


but


```
sage: g = Graph()
sage: g.add_edges(l)
sage: g.is_bipartite()
True
```


Also, I just noticed that one can very easily build a non-bipartite `BipartiteGraph`::


```
sage: g = BipartiteGraph()
sage: g.add_edges(graphs.CompleteGraph(30).edges())
sage: g.is_bipartite()
False
```


Please. Can you help me get rid of that class? I'll write the ticket if you agree.

Nathann


---

Comment by ncohen created at 2015-03-21 13:37:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-03-21 13:48:17

I've never used BipartiteGraph. Is it actually useful, just with a bad interface? Or completely non-functional? At least you seem to be able to construct one, maybe start with a deprecation and see if anybody complains.


---

Comment by ncohen created at 2015-03-21 13:57:44

> I've never used BipartiteGraph. Is it actually useful, just with a bad interface? Or completely non-functional? At least you seem to be able to construct one, maybe start with a deprecation and see if anybody complains.

At some point it was claimed that it was "for teaching purposes", and it was badly designed from the start. `add_edge` does not check that the graph is bipartite, it checks that the previously computed bipartition stays valid, which is a wrong path to take for non-connected graphs.

Then you have the usual problems:


```
sage: g=BipartiteGraph(5)
sage: g.complement()
...
RuntimeError: Edge vertices must lie in different partitions.
```


Honestly if we must have such a class, we cannot afford to let it inherit from `Graph`. And from the way it appears in the doc, real graph users may want to give it a try, and regret it later.

Nathann


---

Comment by ncohen created at 2015-03-21 13:58:39

(basically its only 'feature' is to prevent you from making your graph non-bipartite. And given that it does that wrong, it is probably better if the users call .is_bipartite often instead of relying on the (wrong) exceptions raised by add_edge).

Nathann


---

Comment by vbraun created at 2015-03-21 14:09:00

If thats all then I'll be happy to review it...


---

Comment by vbraun created at 2015-03-21 17:22:43

Resolution: fixed
