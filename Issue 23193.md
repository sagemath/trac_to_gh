# Issue 23193: Cannot create a RealBall with rational radius

archive/issues_023193.json:
```json
{
    "body": "CC:  tmonteil mmezzarobba vdelecroix fredrik.johansson\n\nFor example\n\n\n```\nsage: RBF(1, 1/2)\n```\n\n\nwill fail with `unable to convert 1 to a RealBall` but\n\n```\nsage: RBF(1, 0.5)\n```\n\n\nwill succeed.   If this is not intentional I'll put a patch together.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/23430\n\n",
    "created_at": "2017-07-14T03:11:37Z",
    "labels": [
        "numerical",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Cannot create a RealBall with rational radius",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23193",
    "user": "deinst"
}
```
CC:  tmonteil mmezzarobba vdelecroix fredrik.johansson

For example


```
sage: RBF(1, 1/2)
```


will fail with `unable to convert 1 to a RealBall` but

```
sage: RBF(1, 0.5)
```


will succeed.   If this is not intentional I'll put a patch together.


Issue created by migration from https://trac.sagemath.org/ticket/23430





---

archive/issue_comments_324470.json:
```json
{
    "body": "Well, I intentionally left that out at first when writing the bulk of the constructor code, and then never got around to implementing it, but I certainly agree that it would be good to have. So feel free to go ahead and add it!",
    "created_at": "2017-08-28T16:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324470",
    "user": "mmezzarobba"
}
```

Well, I intentionally left that out at first when writing the bulk of the constructor code, and then never got around to implementing it, but I certainly agree that it would be good to have. So feel free to go ahead and add it!



---

archive/issue_comments_324471.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2018-07-26T19:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324471",
    "user": "deinst"
}
```

Changing priority from major to minor.



---

archive/issue_comments_324472.json:
```json
{
    "body": "Changing keywords from \"\" to \"sagedays@icerm\".",
    "created_at": "2018-07-26T19:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324472",
    "user": "deinst"
}
```

Changing keywords from "" to "sagedays@icerm".



---

archive/issue_comments_324473.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-26T21:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324473",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_324474.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-26T21:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324474",
    "user": "deinst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_324475.json:
```json
{
    "body": "It looks like the line `cdef Integer foo` should be removed.\n\nThis test:\n\n```python\nsage: RBF(13, 1)\n[1e+1 +/- 4.01]\n```\n\n\nlooks crazy to me. Namely, why is the radius 1 printed as 4.01? I get the same output in the current version of Sage if I put in `RBF(13, 1.)`, so this behavior has been around for a while. Is it actually correct / expected? What am I missing?",
    "created_at": "2018-08-04T15:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324475",
    "user": "@bryangingechen"
}
```

It looks like the line `cdef Integer foo` should be removed.

This test:

```python
sage: RBF(13, 1)
[1e+1 +/- 4.01]
```


looks crazy to me. Namely, why is the radius 1 printed as 4.01? I get the same output in the current version of Sage if I put in `RBF(13, 1.)`, so this behavior has been around for a while. Is it actually correct / expected? What am I missing?



---

archive/issue_comments_324476.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-04T22:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324476",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_324477.json:
```json
{
    "body": "`@`gh-bryangingechen My guess is that it is an error with the printing (maybe with upstream):\n\n```\nsage: RBF(13,0.89)\n[1.3e+1 +/- 0.891]\nsage: RBF(11,0.9)\n[1e+1 +/- 1.91]\nsage: RBF(12,0.9)\n[1e+1 +/- 2.91]\nsage: RBF(13,0.9)\n[1e+1 +/- 3.91]\nsage: RBF(14,0.9)\n[1e+1 +/- 4.91]\nsage: RBF(15,0.9)\n[2e+1 +/- 5.91]\n```\n\n\n```\nsage: x = RBF(14,0.9)\nsage: x.center()\n14.0000000000000\nsage: x.rad()\n0.90000000\nsage: x.rad().parent()\nReal Field with 30 bits of precision\nsage: (0.9).parent()\nReal Field with 53 bits of precision\nsage: x.center().parent()\nReal Field with 53 bits of precision\n```\n\nShould there be a precision loss with the radius too?\n\nDavid, don't forget to add your real name to the authors field.\n\nI think this also might fix #25456.",
    "created_at": "2018-08-04T22:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324477",
    "user": "tscrim"
}
```

`@`gh-bryangingechen My guess is that it is an error with the printing (maybe with upstream):

```
sage: RBF(13,0.89)
[1.3e+1 +/- 0.891]
sage: RBF(11,0.9)
[1e+1 +/- 1.91]
sage: RBF(12,0.9)
[1e+1 +/- 2.91]
sage: RBF(13,0.9)
[1e+1 +/- 3.91]
sage: RBF(14,0.9)
[1e+1 +/- 4.91]
sage: RBF(15,0.9)
[2e+1 +/- 5.91]
```


```
sage: x = RBF(14,0.9)
sage: x.center()
14.0000000000000
sage: x.rad()
0.90000000
sage: x.rad().parent()
Real Field with 30 bits of precision
sage: (0.9).parent()
Real Field with 53 bits of precision
sage: x.center().parent()
Real Field with 53 bits of precision
```

Should there be a precision loss with the radius too?

David, don't forget to add your real name to the authors field.

I think this also might fix #25456.



---

archive/issue_comments_324478.json:
```json
{
    "body": "Sorry about the extra foo.\n\nThe printing is a consequence of Arb's printing.  The arb function `arb_get_str` returns a string that is guaranteed to contain the original ball when read back in and is rounded so that it is accurate to one unit in the last decimal place.  This behavior can be puzzling particularly when the error magnitude is not much smaller than the absolute value of of the midpoint.",
    "created_at": "2018-08-04T23:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324478",
    "user": "deinst"
}
```

Sorry about the extra foo.

The printing is a consequence of Arb's printing.  The arb function `arb_get_str` returns a string that is guaranteed to contain the original ball when read back in and is rounded so that it is accurate to one unit in the last decimal place.  This behavior can be puzzling particularly when the error magnitude is not much smaller than the absolute value of of the midpoint.



---

archive/issue_comments_324479.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-05T05:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324479",
    "user": "@bryangingechen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_324480.json:
```json
{
    "body": "OK, as long as the print behavior is known. It might be good to open a ticket to document it a bit more, though perhaps #15944 will eventually cover it.",
    "created_at": "2018-08-05T05:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324480",
    "user": "@bryangingechen"
}
```

OK, as long as the print behavior is known. It might be good to open a ticket to document it a bit more, though perhaps #15944 will eventually cover it.



---

archive/issue_comments_324481.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2018-08-07T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324481",
    "user": "vdelecroix"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_324482.json:
```json
{
    "body": "Have you looked at #25456? Have you read [https://trac.sagemath.org/ticket/25456#comment:4](https://trac.sagemath.org/ticket/25456#comment:4)? There is a good reason for **not** doing what you propose.",
    "created_at": "2018-08-07T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324482",
    "user": "vdelecroix"
}
```

Have you looked at #25456? Have you read [https://trac.sagemath.org/ticket/25456#comment:4](https://trac.sagemath.org/ticket/25456#comment:4)? There is a good reason for **not** doing what you propose.



---

archive/issue_comments_324483.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2018-08-07T19:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324483",
    "user": "vdelecroix"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_324484.json:
```json
{
    "body": "Though, here it only deals with integer/rationals.",
    "created_at": "2018-08-07T19:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324484",
    "user": "vdelecroix"
}
```

Though, here it only deals with integer/rationals.



---

archive/issue_comments_324485.json:
```json
{
    "body": "I have looked at  #25456 but I have been, I think, careful to ensure that the arb ball includes the rational number in question.",
    "created_at": "2018-08-07T20:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324485",
    "user": "deinst"
}
```

I have looked at  #25456 but I have been, I think, careful to ensure that the arb ball includes the rational number in question.



---

archive/issue_comments_324486.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-11T16:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23193#issuecomment-324486",
    "user": "vbraun"
}
```

Resolution: fixed
