# Issue 29465: Move all code from src/setup.py, src/fpickle_setup.py to sage_setup

archive/issues_029465.json:
```json
{
    "body": "CC:  @kiwifb @vbraun @isuruf @dimpase @jhpalmieri @fchapoton @orlitzky\n\nKeywords: sd109\n\nThis is preparation for splitting sagelib into separate distutils packages, but a useful cleanup in any case.\n\nAs a follow-up of this ticket, as part of Meta-ticket #29705, the remaining very short `src/setup.py` should probably be moved to `build/pkgs/sagelib/src/` (alongside a symlink `src` -> `SAGE_ROOT/src`)\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29702\n\n",
    "closed_at": "2020-07-02T21:30:19Z",
    "created_at": "2020-05-17T17:39:35Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Move all code from src/setup.py, src/fpickle_setup.py to sage_setup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29465",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kiwifb @vbraun @isuruf @dimpase @jhpalmieri @fchapoton @orlitzky

Keywords: sd109

This is preparation for splitting sagelib into separate distutils packages, but a useful cleanup in any case.

As a follow-up of this ticket, as part of Meta-ticket #29705, the remaining very short `src/setup.py` should probably be moved to `build/pkgs/sagelib/src/` (alongside a symlink `src` -> `SAGE_ROOT/src`)



Issue created by migration from https://trac.sagemath.org/ticket/29702





---

archive/issue_events_075951.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29465#event-75951"
}
```



---

archive/issue_comments_417702.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-19T02:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417702",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-19T02:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-19T02:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417705.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-19T02:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417705",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_417706.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-20T04:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-05-20T04:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_417708.json:
```json
{
    "body": "(that was pushed to wrong ticket; fixed)",
    "created_at": "2020-05-20T05:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417708",
    "user": "https://github.com/mkoeppe"
}
```

(that was pushed to wrong ticket; fixed)



---

archive/issue_comments_417709.json:
```json
{
    "body": "Ready for review",
    "created_at": "2020-05-20T05:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417709",
    "user": "https://github.com/mkoeppe"
}
```

Ready for review



---

archive/issue_comments_417710.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-05-22T05:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_417711.json:
```json
{
    "body": "Redone on top of new version of #29411",
    "created_at": "2020-05-22T05:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417711",
    "user": "https://github.com/mkoeppe"
}
```

Redone on top of new version of #29411



---

archive/issue_comments_417712.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd109\".",
    "created_at": "2020-05-28T06:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417712",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd109".



---

archive/issue_comments_417713.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-02T06:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417714.json:
```json
{
    "body": "Merged newer version of #29411 and latest beta",
    "created_at": "2020-06-02T06:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417714",
    "user": "https://github.com/mkoeppe"
}
```

Merged newer version of #29411 and latest beta



---

archive/issue_comments_417715.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-03T02:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417716.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-03T02:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T00:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417718.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-04T18:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_417719.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T20:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417720.json:
```json
{
    "body": "please rebase this over 9.2.beta1",
    "created_at": "2020-06-15T10:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417720",
    "user": "https://github.com/dimpase"
}
```

please rebase this over 9.2.beta1



---

archive/issue_comments_417721.json:
```json
{
    "body": "rebased over rebased #29411\n\n---\nLast 10 new commits:",
    "created_at": "2020-06-15T12:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417721",
    "user": "https://github.com/dimpase"
}
```

rebased over rebased #29411

---
Last 10 new commits:



---

archive/issue_comments_417722.json:
```json
{
    "body": "Argh! I have a million tickets depending on this",
    "created_at": "2020-06-15T14:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417722",
    "user": "https://github.com/mkoeppe"
}
```

Argh! I have a million tickets depending on this



---

archive/issue_comments_417723.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-15T16:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417723",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417724.json:
```json
{
    "body": "well, I don't quite know how to deal with it. The rebased branch works for me. Should we revert all these rebases, and just hope that the merges will work?",
    "created_at": "2020-06-15T16:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417724",
    "user": "https://github.com/dimpase"
}
```

well, I don't quite know how to deal with it. The rebased branch works for me. Should we revert all these rebases, and just hope that the merges will work?



---

archive/issue_comments_417725.json:
```json
{
    "body": "Yes, please restore to the unrebased ones. I know that the merges work, I am already testing on them",
    "created_at": "2020-06-15T16:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417725",
    "user": "https://github.com/mkoeppe"
}
```

Yes, please restore to the unrebased ones. I know that the merges work, I am already testing on them



---

archive/issue_comments_417726.json:
```json
{
    "body": "It's also fine with me if you *merge* in the current develop, but rebasing is too disruptive.",
    "created_at": "2020-06-15T16:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417726",
    "user": "https://github.com/mkoeppe"
}
```

It's also fine with me if you *merge* in the current develop, but rebasing is too disruptive.



---

archive/issue_comments_417727.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:",
    "created_at": "2020-06-15T16:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:



---

archive/issue_comments_417728.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-06-15T16:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_417729.json:
```json
{
    "body": "Replying to [comment:33 mkoeppe]:\n> It's also fine with me if you *merge* in the current develop\n\nDid that, needs review",
    "created_at": "2020-06-15T16:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417729",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:33 mkoeppe]:
> It's also fine with me if you *merge* in the current develop

Did that, needs review



---

archive/issue_comments_417730.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-16T13:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417730",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417731.json:
```json
{
    "body": "lgtm",
    "created_at": "2020-06-16T13:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417731",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_417732.json:
```json
{
    "body": "Thank you!",
    "created_at": "2020-06-16T16:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417732",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_417733.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-02T21:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417733",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075952.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-02T21:30:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29465#event-75952"
}
```



---

archive/issue_comments_417734.json:
```json
{
    "body": "Thank you, the setup.py looks sooo much cleaner now.",
    "created_at": "2020-08-19T14:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29465#issuecomment-417734",
    "user": "https://github.com/embray"
}
```

Thank you, the setup.py looks sooo much cleaner now.
