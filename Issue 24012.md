# Issue 24012: py3: minor care for range

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-11-20 13:00:42

part of #16081


---

Comment by chapoton created at 2017-11-20 13:01:17

New commits:


---

Comment by chapoton created at 2017-11-20 13:01:17

Changing status from new to needs_review.


---

Comment by etn40ff created at 2017-11-20 13:12:12

LGTM


---

Comment by etn40ff created at 2017-11-20 13:12:12

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-11-20 14:13:45

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2017-11-20 14:13:45

Sorry, but I have to disagree here.

As I have mentioned several times before, you should really avoid "fixing" doctests. For example, `matrix.diagonal(range(n))` really should work. If it doesn't work, then fix `matrix.diagonal()` to accept iterables instead of "fixing" the doctest. Fixing the doctests will actually make it harder to port to Python 3 because it just hides issues.


---

Comment by git created at 2017-11-20 14:33:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-11-20 14:48:22

Can we please have a separate ticket for the issues of `diagonal_matrix(range(n))` and `matrix([range(n)])`? Stuffing this in a Python 3 ticket isn't practical for the discussion.


---

Comment by git created at 2017-11-21 08:00:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2017-11-21 08:01:11

I undid the change about diagonal matrices.


---

Comment by chapoton created at 2017-11-21 08:01:11

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-11-21 13:29:33

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-11-21 13:29:33

Same comment for `giac.py`: fix the code instead of the doctest.


---

Comment by chapoton created at 2017-11-21 13:30:19

Really ? Do we really want to accept lists of range ?


---

Comment by jdemeyer created at 2017-11-21 13:39:47

Replying to [comment:9 chapoton]:
> Really ? Do we really want to accept lists of range ?

Of course, why not? It's the obvious generalization of a list of lists.


---

Comment by embray created at 2017-11-21 16:17:29

The natural abstraction from lists would probably be to support any sized [Collection](https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection).


---

Comment by git created at 2017-11-22 12:35:35

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2017-11-22 12:36:41

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-11-22 12:36:41

ok, I undid also the other change in giac.

now, this contains only one correction to range "in the code", plus a pep8 cleanup of the onlyu modified file.


---

Comment by etn40ff created at 2017-11-22 13:58:19

Let's try again


---

Comment by etn40ff created at 2017-11-22 13:58:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-13 17:38:35

Resolution: fixed
