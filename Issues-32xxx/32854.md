# Issue 32854: search of doc pages is broken

archive/issues_032617.json:
```json
{
    "body": "when searching on https://doc.sagemath.org/html/en/reference/search.html?q=plot an error about a jQuery incompatibility causes it to break.\n\nIs this already reported? I just heard about this.\n\n**Reviewer:** Matthias Koeppe\n\n**Resolution:** invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/32854\n\n",
    "closed_at": "2022-02-26T18:53:04Z",
    "created_at": "2021-11-11T09:14:10Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "search of doc pages is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32854",
    "user": "https://github.com/haraldschilly"
}
```
when searching on https://doc.sagemath.org/html/en/reference/search.html?q=plot an error about a jQuery incompatibility causes it to break.

Is this already reported? I just heard about this.

**Reviewer:** Matthias Koeppe

**Resolution:** invalid

Issue created by migration from https://trac.sagemath.org/ticket/32854





---

archive/issue_comments_654919.json:
```json
{
    "body": "<a id='comment:1'></a>\nDuplicate of #29576?",
    "created_at": "2021-11-11T19:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654919",
    "user": "https://github.com/jhpalmieri"
}
```


<a id='comment:1'></a>
Duplicate of #29576?



---

archive/issue_comments_654920.json:
```json
{
    "body": "<a id='comment:2'></a>\nThank you, well, I don't think this is a duplicate, because I know that for the previous version the search worked (while producing those square bracket object output strings).\n\nThis time around, Thebe is actually breaking the code. So, IMHO, common solution to both tickets is to get rid of that library and make a new ticket to figure out how to add it back \"safely\", or to at least check what its current status is.",
    "created_at": "2021-11-12T08:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654920",
    "user": "https://github.com/haraldschilly"
}
```


<a id='comment:2'></a>
Thank you, well, I don't think this is a duplicate, because I know that for the previous version the search worked (while producing those square bracket object output strings).

This time around, Thebe is actually breaking the code. So, IMHO, common solution to both tickets is to get rid of that library and make a new ticket to figure out how to add it back "safely", or to at least check what its current status is.



---

archive/issue_comments_654921.json:
```json
{
    "body": "<a id='comment:3'></a>\nhere is the stacktrace I see\n\n![](https://cocalc.com/share/raw/d07330668a99873e2a5c6bd2531115b5514132fc/2021-11-12-thebe-crashing-search-doc.sagemath.org.png)",
    "created_at": "2021-11-12T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654921",
    "user": "https://github.com/haraldschilly"
}
```


<a id='comment:3'></a>
here is the stacktrace I see

![](https://cocalc.com/share/raw/d07330668a99873e2a5c6bd2531115b5514132fc/2021-11-12-thebe-crashing-search-doc.sagemath.org.png)



---

archive/issue_events_097722.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-29T08:58:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32854#event-97722"
}
```




---

archive/issue_comments_654922.json:
```json
{
    "body": "<a id='comment:4'></a>\nbump to 9.6",
    "created_at": "2022-01-29T08:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654922",
    "user": "https://github.com/fchapoton"
}
```


<a id='comment:4'></a>
bump to 9.6



---

archive/issue_comments_654923.json:
```json
{
    "body": "<a id='comment:5'></a>\nFor 9.5, the error is slightly different:\n\n![](https://cocalc.com/share/raw/f2792a71a6bbad8febe83c9f04dda7e2efaff3c9/2022-02-01-doc.sagemath.org-search-error.png)",
    "created_at": "2022-02-01T11:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654923",
    "user": "https://github.com/haraldschilly"
}
```


<a id='comment:5'></a>
For 9.5, the error is slightly different:

![](https://cocalc.com/share/raw/f2792a71a6bbad8febe83c9f04dda7e2efaff3c9/2022-02-01-doc.sagemath.org-search-error.png)



---

archive/issue_comments_654924.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-02-10T12:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654924",
    "user": "https://github.com/kwankyu"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_654925.json:
```json
{
    "body": "<a id='comment:6'></a>\nIn #33309, we turned off Thebe, fixing search box.",
    "created_at": "2022-02-10T12:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654925",
    "user": "https://github.com/kwankyu"
}
```


<a id='comment:6'></a>
In #33309, we turned off Thebe, fixing search box.



---

archive/issue_events_097723.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-02-10T12:39:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32854#event-97723"
}
```




---

archive/issue_events_097724.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-02-10T12:39:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32854#event-97724"
}
```




---

archive/issue_comments_654926.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2022-02-13T17:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654926",
    "user": "https://github.com/mkoeppe"
}
```


**Reviewer:** Matthias Koeppe



---

archive/issue_comments_654927.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-02-13T17:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654927",
    "user": "https://github.com/mkoeppe"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_events_097725.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-26T18:53:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32854#event-97725"
}
```




---

archive/issue_comments_654928.json:
```json
{
    "body": "**Resolution:** invalid",
    "created_at": "2022-02-26T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32854#issuecomment-654928",
    "user": "https://github.com/mkoeppe"
}
```


**Resolution:** invalid
