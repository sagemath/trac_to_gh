# Issue 32479: Remove monkey patching of inspect.isfunction in sage.__init__

archive/issues_032242.json:
```json
{
    "assignees": [],
    "body": "\"Monkey-patch `inspect.isfunction()` to support Cython functions.\" \n\nIntroduced in 2018 (8.3.beta2) in #25373 (for #24994).\n\nHowever, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/).\n\nIn this ticket:\n- we remove the monkey-patching\n\n- replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions\n\n- replace remaining uses of `inspect.isfunction` by the new name of our monkey-patched variant: `sage.misc.sageinspect.is_function_or_cython_function`\n\n\n(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)\n\nRelated:\n- #26254 No signature shown in help for cythonized built-in methods\n- #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`\n- #31309 `sage_getargspec` mishandles keyword-only arguments\n\n\nDepends on #31420\n\nCC:  @fchapoton @kwankyu @jhpalmieri @orlitzky\n\nBranch/Commit: **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**\n\nReviewer: **Michael Orlitzky**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **refactoring**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32479_\n\n",
    "closed_at": "2021-09-19T09:58:23Z",
    "created_at": "2021-09-05T23:53:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove monkey patching of inspect.isfunction in sage.__init__",
    "type": "issue",
    "updated_at": "2021-09-19T09:58:23Z",
    "url": "https://github.com/sagemath/sage/issues/32479",
    "user": "https://github.com/mkoeppe"
}
```
"Monkey-patch `inspect.isfunction()` to support Cython functions." 

Introduced in 2018 (8.3.beta2) in #25373 (for #24994).

However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/).

In this ticket:
- we remove the monkey-patching

- replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions

- replace remaining uses of `inspect.isfunction` by the new name of our monkey-patched variant: `sage.misc.sageinspect.is_function_or_cython_function`


(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)

Related:
- #26254 No signature shown in help for cythonized built-in methods
- #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`
- #31309 `sage_getargspec` mishandles keyword-only arguments


Depends on #31420

CC:  @fchapoton @kwankyu @jhpalmieri @orlitzky

Branch/Commit: **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**

Reviewer: **Michael Orlitzky**

Author: **Matthias Koeppe**

Component: **refactoring**

_Issue created by migration from https://trac.sagemath.org/ticket/32479_





---

archive/issue_events_444603.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-05T23:53:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444603"
}
```



---

archive/issue_events_444604.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-05T23:53:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444604"
}
```



---

archive/issue_events_444605.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-05T23:53:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444605"
}
```



---

archive/issue_events_444606.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-05T23:53:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444606"
}
```



---

archive/issue_comments_523745.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,8 @@\n \n (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help.)\n \n+Related:\n+- #26254 No signature shown in help for cythonized built-in methods\n+- #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`\n \n \n``````\n",
    "created_at": "2021-09-06T00:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523745",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,8 @@
 
 (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help.)
 
+Related:
+- #26254 No signature shown in help for cythonized built-in methods
+- #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`
 
 
``````




---

archive/issue_comments_523746.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,5 @@\n Related:\n - #26254 No signature shown in help for cythonized built-in methods\n - #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`\n+- #31309 `sage_getargspec` mishandles keyword-only arguments\n \n-\n``````\n",
    "created_at": "2021-09-06T00:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523746",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,5 @@
 Related:
 - #26254 No signature shown in help for cythonized built-in methods
 - #27578 Use `sphinx.util.inspect.Signature`, not `sphinx.ext.autodoc.inspector.formatargspec`
+- #31309 `sage_getargspec` mishandles keyword-only arguments
 
-
``````




---

archive/issue_comments_523747.json:
```json
{
    "body": "Branch: **[u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__)**",
    "created_at": "2021-09-06T00:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523747",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__)**



---

archive/issue_comments_523748.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f\"><code>903c6d4</code></a></td><td><code>src/sage/algebras/steenrod/steenrod_algebra_misc.py: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>\n",
    "created_at": "2021-09-06T00:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523748",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f"><code>903c6d4</code></a></td><td><code>src/sage/algebras/steenrod/steenrod_algebra_misc.py: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>




---

archive/issue_comments_523749.json:
```json
{
    "body": "Commit: **[`903c6d4`](https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f)**",
    "created_at": "2021-09-06T00:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523749",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`903c6d4`](https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f)**



---

archive/issue_comments_523750.json:
```json
{
    "body": "Changed commit from **[`903c6d4`](https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f)** to **[`1ac057d`](https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7)**",
    "created_at": "2021-09-06T00:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`903c6d4`](https://github.com/sagemath/sagetrac-mirror/commit/903c6d47179e8835c0d17f066d8190458e110d6f)** to **[`1ac057d`](https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7)**



---

archive/issue_comments_523751.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7\"><code>1ac057d</code></a></td><td><code>sage.modules.{free_module_homspace,vector_space_homspace,vector_space_morphism}: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>\n",
    "created_at": "2021-09-06T00:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7"><code>1ac057d</code></a></td><td><code>sage.modules.{free_module_homspace,vector_space_homspace,vector_space_morphism}: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>




---

archive/issue_comments_523752.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,9 @@\n \n Introduced in 2018 (8.3.beta2) in #25373 (for #24994).\n \n-However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/, https://www.python.org/dev/peps/pep-0579/, https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.\n+However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.\n \n-(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help.)\n+(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)\n \n Related:\n - #26254 No signature shown in help for cythonized built-in methods\n``````\n",
    "created_at": "2021-09-06T00:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523752",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,9 @@
 
 Introduced in 2018 (8.3.beta2) in #25373 (for #24994).
 
-However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/, https://www.python.org/dev/peps/pep-0579/, https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.
+However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.
 
-(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help.)
+(To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)
 
 Related:
 - #26254 No signature shown in help for cythonized built-in methods
``````




---

archive/issue_comments_523753.json:
```json
{
    "body": "Changed commit from **[`1ac057d`](https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7)** to **[`dcce32d`](https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0)**",
    "created_at": "2021-09-06T01:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523753",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ac057d`](https://github.com/sagemath/sagetrac-mirror/commit/1ac057d660dfcfbaaa8b5012df4f72c5076c0be7)** to **[`dcce32d`](https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0)**



---

archive/issue_comments_523754.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e123a9272029091ad3d1fbf4e1981a0548bbd8db\"><code>e123a92</code></a></td><td><code>sage.calculus.integration.monte_carlo_integral: Remove use of inspect.isfunction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0\"><code>dcce32d</code></a></td><td><code>sage.symbolic.expression.get_dynamic_class_for_function: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>\n",
    "created_at": "2021-09-06T01:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523754",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e123a9272029091ad3d1fbf4e1981a0548bbd8db"><code>e123a92</code></a></td><td><code>sage.calculus.integration.monte_carlo_integral: Remove use of inspect.isfunction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0"><code>dcce32d</code></a></td><td><code>sage.symbolic.expression.get_dynamic_class_for_function: Use callable(...) instead of inspect.isfunction(...)</code></td></tr></table>




---

archive/issue_comments_523755.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSetting to \"needs review\" so that the patchbot runs",
    "created_at": "2021-09-06T01:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523755",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Setting to "needs review" so that the patchbot runs



---

archive/issue_events_444607.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-06T01:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444607"
}
```



---

archive/issue_comments_523756.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,15 @@\n \n Introduced in 2018 (8.3.beta2) in #25373 (for #24994).\n \n-However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.\n+However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/).\n+\n+In this ticket:\n+- we remove the monkey-patching\n+\n+- replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions\n+\n+- ...?\n+\n \n (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)\n \n``````\n",
    "created_at": "2021-09-06T01:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523756",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,15 @@
 
 Introduced in 2018 (8.3.beta2) in #25373 (for #24994).
 
-However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/), so we should remove the monkey-patching and find a better solution.
+However, this change has been rejected by upstream (https://bugs.python.org/issue30071, https://www.python.org/dev/peps/pep-0575/,  https://www.python.org/dev/peps/pep-0580/).
+
+In this ticket:
+- we remove the monkey-patching
+
+- replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions
+
+- ...?
+
 
 (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)
 
``````




---

archive/issue_comments_523757.json:
```json
{
    "body": "Author: **Matthias Koeppe, ...**",
    "created_at": "2021-09-06T01:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523757",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe, ...**



---

archive/issue_comments_523758.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n\n```\nsage -t --long --random-seed=0 src/sage/misc/sagedoc.py  # 8 doctests failed\nsage -t --long --random-seed=0 src/sage/misc/rest_index_of_methods.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/docs/conf.py  # 1 doctest failed\n```",
    "created_at": "2021-09-07T04:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523758",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>


```
sage -t --long --random-seed=0 src/sage/misc/sagedoc.py  # 8 doctests failed
sage -t --long --random-seed=0 src/sage/misc/rest_index_of_methods.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/docs/conf.py  # 1 doctest failed
```



---

archive/issue_events_444608.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T04:36:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444608"
}
```



---

archive/issue_events_444609.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T04:36:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444609"
}
```



---

archive/issue_comments_523759.json:
```json
{
    "body": "Changed commit from **[`dcce32d`](https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0)** to **[`3bc20b8`](https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4)**",
    "created_at": "2021-09-07T05:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523759",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dcce32d`](https://github.com/sagemath/sagetrac-mirror/commit/dcce32de25608075b2648a4da6e0c9c07fe900a0)** to **[`3bc20b8`](https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4)**



---

archive/issue_comments_523760.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4\"><code>3bc20b8</code></a></td><td><code>sage.misc.sageinspect.is_function_or_cython_function: New, use it instead of relying on monkey patching of inspect.isfunction</code></td></tr></table>\n",
    "created_at": "2021-09-07T05:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523760",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4"><code>3bc20b8</code></a></td><td><code>sage.misc.sageinspect.is_function_or_cython_function: New, use it instead of relying on monkey patching of inspect.isfunction</code></td></tr></table>




---

archive/issue_comments_523761.json:
```json
{
    "body": "Changed commit from **[`3bc20b8`](https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4)** to **[`b5dd567`](https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e)**",
    "created_at": "2021-09-07T05:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523761",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3bc20b8`](https://github.com/sagemath/sagetrac-mirror/commit/3bc20b8af7a0b08a2b135dde7d314f4fdb4cc7a4)** to **[`b5dd567`](https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e)**



---

archive/issue_comments_523762.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e\"><code>b5dd567</code></a></td><td><code>src/sage/misc/sageinspect.py: Fixup doctest</code></td></tr></table>\n",
    "created_at": "2021-09-07T05:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523762",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e"><code>b5dd567</code></a></td><td><code>src/sage/misc/sageinspect.py: Fixup doctest</code></td></tr></table>




---

archive/issue_events_444610.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T05:42:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444610"
}
```



---

archive/issue_events_444611.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T05:42:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444611"
}
```



---

archive/issue_comments_523763.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThere are a few uses of `inspect.isfunction` in `sage_docbuild`. I don't know if these should be replaced by `sage.misc.sageinspect.is_function_or_cython_function`\n\n```\nsrc/sage_docbuild/ext/sage_autodoc.py:        return (inspect.isfunction(member) or inspect.isbuiltin(member)\nsrc/sage_docbuild/ext/sage_autodoc.py:                not(inspect.ismethod(initmeth) or inspect.isfunction(initmeth)):\nsrc/sage_docbuild/ext/sage_autodoc.py:        return inspect.isfunction(obj) or inspect.isbuiltin(obj) or inspect.ismethod(obj)\n```",
    "created_at": "2021-09-07T05:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523763",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

There are a few uses of `inspect.isfunction` in `sage_docbuild`. I don't know if these should be replaced by `sage.misc.sageinspect.is_function_or_cython_function`

```
src/sage_docbuild/ext/sage_autodoc.py:        return (inspect.isfunction(member) or inspect.isbuiltin(member)
src/sage_docbuild/ext/sage_autodoc.py:                not(inspect.ismethod(initmeth) or inspect.isfunction(initmeth)):
src/sage_docbuild/ext/sage_autodoc.py:        return inspect.isfunction(obj) or inspect.isbuiltin(obj) or inspect.ismethod(obj)
```



---

archive/issue_comments_523764.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI would also like to get rid of these uses of `inspect.isfunction` in plotting code.\n\n```\nsrc/sage/plot/plot3d/plot3d.py:    if inspect.isfunction(func):\nsrc/sage/plot/plot_field.py:    if isfunction(f):\nsrc/sage/plot/streamline_plot.py:        if isfunction(f_g):\n```\nHelp on this would be welcome",
    "created_at": "2021-09-07T05:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523764",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

I would also like to get rid of these uses of `inspect.isfunction` in plotting code.

```
src/sage/plot/plot3d/plot3d.py:    if inspect.isfunction(func):
src/sage/plot/plot_field.py:    if isfunction(f):
src/sage/plot/streamline_plot.py:        if isfunction(f_g):
```
Help on this would be welcome



---

archive/issue_comments_523765.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22\"><code>9675b69</code></a></td><td><code>src/sage_docbuild/ext/sage_autodoc.py: Use sage.misc.sageinspect.is_function_or_cython_function instead of inspect.isfunction</code></td></tr></table>\n",
    "created_at": "2021-09-09T00:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523765",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22"><code>9675b69</code></a></td><td><code>src/sage_docbuild/ext/sage_autodoc.py: Use sage.misc.sageinspect.is_function_or_cython_function instead of inspect.isfunction</code></td></tr></table>




---

archive/issue_comments_523766.json:
```json
{
    "body": "Changed commit from **[`b5dd567`](https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e)** to **[`9675b69`](https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22)**",
    "created_at": "2021-09-09T00:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523766",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5dd567`](https://github.com/sagemath/sagetrac-mirror/commit/b5dd56767c6b847cb1a29253f15dbd4f6e5e7a3e)** to **[`9675b69`](https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22)**



---

archive/issue_comments_523767.json:
```json
{
    "body": "Changed commit from **[`9675b69`](https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22)** to **[`a03c459`](https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3)**",
    "created_at": "2021-09-09T00:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9675b69`](https://github.com/sagemath/sagetrac-mirror/commit/9675b69021ce263bcee259f7241d0d5fbbddfd22)** to **[`a03c459`](https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3)**



---

archive/issue_comments_523768.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3\"><code>a03c459</code></a></td><td><code>sage.plot: Replace uses of inspect.isfunction by sage.misc.sageinspect.is_function_or_cython_function</code></td></tr></table>\n",
    "created_at": "2021-09-09T00:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523768",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3"><code>a03c459</code></a></td><td><code>sage.plot: Replace uses of inspect.isfunction by sage.misc.sageinspect.is_function_or_cython_function</code></td></tr></table>




---

archive/issue_comments_523769.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**",
    "created_at": "2021-09-09T00:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523769",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**



---

archive/issue_comments_523770.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWell, [comment:14](#comment%3A14), [comment:15](#comment%3A15) are refinements that can be done in follow-up tickets.\n\nReady for review",
    "created_at": "2021-09-09T00:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523770",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Well, [comment:14](#comment%3A14), [comment:15](#comment%3A15) are refinements that can be done in follow-up tickets.

Ready for review



---

archive/issue_comments_523771.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n \n - replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions\n \n-- ...?\n+- replace remaining uses of `inspect.isfunction` by the new name of our monkey-patched variant: `sage.misc.sageinspect.is_function_or_cython_function`\n \n \n (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)\n``````\n",
    "created_at": "2021-09-09T00:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523771",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 
 - replace unnecessary uses of `inspect` in ordinary Sage library code by other solutions
 
-- ...?
+- replace remaining uses of `inspect.isfunction` by the new name of our monkey-patched variant: `sage.misc.sageinspect.is_function_or_cython_function`
 
 
 (To be checked whether https://www.python.org/dev/peps/pep-0590, superseding some of the above rejected PEPs, offers help; see also the informational PEP https://www.python.org/dev/peps/pep-0579/)
``````




---

archive/issue_comments_523772.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWhat's an example of a cython function that isn't `callable()`?",
    "created_at": "2021-09-09T00:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523772",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:20" align="right">comment:20</div>

What's an example of a cython function that isn't `callable()`?



---

archive/issue_comments_523773.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@orlitzky](#comment%3A20):\n> What's an example of a cython function that isn't `callable()`?\n\nIn other words, what goes wrong if you change the plot/sagedoc code to use `callable()` too? The only difference I see is that methods are `callable()` but the new `is_function_or_cython_function()` will return `False` on them. I don't see a moral problem with plotting a class method, though. And the sagedoc code is also checking for methods.",
    "created_at": "2021-09-09T00:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523773",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@orlitzky](#comment%3A20):
> What's an example of a cython function that isn't `callable()`?

In other words, what goes wrong if you change the plot/sagedoc code to use `callable()` too? The only difference I see is that methods are `callable()` but the new `is_function_or_cython_function()` will return `False` on them. I don't see a moral problem with plotting a class method, though. And the sagedoc code is also checking for methods.



---

archive/issue_comments_523774.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNote that \n\n```\nsage: type(x)                                                                                                                                                 \n<class 'sage.symbolic.expression.Expression'>\nsage: callable(x)                                                                                                                                             \nTrue\nsage: import inspect                                                                                                                                          \nsage: inspect.isfunction(x)                                                                                                                                   \nFalse\nsage: from sage.misc.sageinspect import is_function_or_cython_function                                                                                        \nsage: is_function_or_cython_function(x)                                                                                                                       \nFalse\n```\n... so `callable` would not be the right replacement for the uses in `sage.plot`.\n\nRegarding `sagedoc` I really don't have an idea about the code (in particular I look at the formatted documentation too rarely to be sure that changes don't break anything). Hence this safe replacement.",
    "created_at": "2021-09-09T01:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523774",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Note that 

```
sage: type(x)                                                                                                                                                 
<class 'sage.symbolic.expression.Expression'>
sage: callable(x)                                                                                                                                             
True
sage: import inspect                                                                                                                                          
sage: inspect.isfunction(x)                                                                                                                                   
False
sage: from sage.misc.sageinspect import is_function_or_cython_function                                                                                        
sage: is_function_or_cython_function(x)                                                                                                                       
False
```
... so `callable` would not be the right replacement for the uses in `sage.plot`.

Regarding `sagedoc` I really don't have an idea about the code (in particular I look at the formatted documentation too rarely to be sure that changes don't break anything). Hence this safe replacement.



---

archive/issue_comments_523775.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n(All Cython functions are `callable` but not all objects that are `callable` satisfy `is_function_or_cython_function`.)",
    "created_at": "2021-09-09T01:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523775",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

(All Cython functions are `callable` but not all objects that are `callable` satisfy `is_function_or_cython_function`.)



---

archive/issue_comments_523776.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, let's just merge the easy part then (I don't really want to look at plots either).\n\nThis bit in `integration.pyx` would be cleaner/faster with `hasattr()` I think:\n\n```python\ntry:\n    vars = func.arguments()\nexcept AttributeError:\n    try:\n        vars = func.variables()\n    except AttributeError:\n        vars = sage_getargspec(func)[0]\n```\n\nMismatched parentheses in docstring:\n\n```python\n\"\"\"\nThink twice before using this function (or any function from the\n``inspect`` or ``sage.misc.sageinspect`` modules.  Most uses of\n``isfunction`` in ordinary library code can be replaced by ``callable``.\n\"\"\"\n```\n\nYou could also use Sphinx cross-module references there. Finally,\n\n```python\n\"\"\"\nVerify that ipywidgets can correctly determine signatures of Cython\nfunctions::\n\n    sage: from ipywidgets.widgets.interaction import signature\n    sage: from sage.dynamics.complex_dynamics.mandel_julia_helper import fast_mandelbrot_plot\n    sage: signature(fast_mandelbrot_plot)  # random\n    <IPython.utils._signatures.Signature object at 0x7f3ec8274e10>\n\"\"\"\n```\n\nI think that should go under a new `TESTS::` block, since it's verifying some internal detail that a user reading the reference manual won't care about.",
    "created_at": "2021-09-09T11:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523776",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, let's just merge the easy part then (I don't really want to look at plots either).

This bit in `integration.pyx` would be cleaner/faster with `hasattr()` I think:

```python
try:
    vars = func.arguments()
except AttributeError:
    try:
        vars = func.variables()
    except AttributeError:
        vars = sage_getargspec(func)[0]
```

Mismatched parentheses in docstring:

```python
"""
Think twice before using this function (or any function from the
``inspect`` or ``sage.misc.sageinspect`` modules.  Most uses of
``isfunction`` in ordinary library code can be replaced by ``callable``.
"""
```

You could also use Sphinx cross-module references there. Finally,

```python
"""
Verify that ipywidgets can correctly determine signatures of Cython
functions::

    sage: from ipywidgets.widgets.interaction import signature
    sage: from sage.dynamics.complex_dynamics.mandel_julia_helper import fast_mandelbrot_plot
    sage: signature(fast_mandelbrot_plot)  # random
    <IPython.utils._signatures.Signature object at 0x7f3ec8274e10>
"""
```

I think that should go under a new `TESTS::` block, since it's verifying some internal detail that a user reading the reference manual won't care about.



---

archive/issue_comments_523777.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@orlitzky](#comment%3A24):\n> Ok, let's just merge the easy part then (I don't really want to look at plots either).\n> \n> This bit in `integration.pyx` would be cleaner/faster with `hasattr()`\n\nI haven't timed this particular one in Cython but at least in plain Python `try: except:` is faster than doing the attribute access a second time.",
    "created_at": "2021-09-09T15:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523777",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@orlitzky](#comment%3A24):
> Ok, let's just merge the easy part then (I don't really want to look at plots either).
> 
> This bit in `integration.pyx` would be cleaner/faster with `hasattr()`

I haven't timed this particular one in Cython but at least in plain Python `try: except:` is faster than doing the attribute access a second time.



---

archive/issue_comments_523778.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db\"><code>f9154a9</code></a></td><td><code>sage.misc.sageinspect.is_function_or_cython_function: Improve docstring markup</code></td></tr></table>\n",
    "created_at": "2021-09-09T16:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523778",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db"><code>f9154a9</code></a></td><td><code>sage.misc.sageinspect.is_function_or_cython_function: Improve docstring markup</code></td></tr></table>




---

archive/issue_comments_523779.json:
```json
{
    "body": "Changed commit from **[`a03c459`](https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3)** to **[`f9154a9`](https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db)**",
    "created_at": "2021-09-09T16:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a03c459`](https://github.com/sagemath/sagetrac-mirror/commit/a03c459651ef5c4543940a2fac41ad051fc8edb3)** to **[`f9154a9`](https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db)**



---

archive/issue_comments_523780.json:
```json
{
    "body": "Reviewer: **Michael Orlitzky**",
    "created_at": "2021-09-09T16:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523780",
    "user": "https://github.com/orlitzky"
}
```

Reviewer: **Michael Orlitzky**



---

archive/issue_comments_523781.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOk then.",
    "created_at": "2021-09-09T16:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523781",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:27" align="right">comment:27</div>

Ok then.



---

archive/issue_events_444612.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-09-09T16:25:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444612"
}
```



---

archive/issue_events_444613.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-09-09T16:25:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444613"
}
```



---

archive/issue_comments_523782.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks for reviewing!",
    "created_at": "2021-09-09T16:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523782",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks for reviewing!



---

archive/issue_comments_523783.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91ec0f2afe7ac22cb9af91da5121109fec92d1ca\"><code>91ec0f2</code></a></td><td><code>src/sage/__init__.py: Remove __all__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/949d787041a94b812cd76faced705fed83e5594c\"><code>949d787</code></a></td><td><code>src/sage/__init__.py: Remove __version__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f77a98e4429616ec293e632a2ebba880181858ea\"><code>f77a98e</code></a></td><td><code>src/sage/__init__.py: Move 'import zlib' to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e9ea5682c04214c3bfcb8ca3cee1e1ba6e5150c\"><code>2e9ea56</code></a></td><td><code>src/sage/__init__.py: Move monkey-patch of ExtensionFileLoader to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad587cfd90e0a06a86e1297e470a775106ea7da8\"><code>ad587cf</code></a></td><td><code>src/sage/__init__.py [Cygwin]: Move monkey-patch of sqlite to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af6642f9b5a8448c92f87f65da9f78d7c619f1cd\"><code>af6642f</code></a></td><td><code>src/sage/cpython/__init__.py: Clean up sage.cpython module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046\"><code>2ba4c43</code></a></td><td><code>Merge #31420</code></td></tr></table>\n",
    "created_at": "2021-09-09T16:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523783",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91ec0f2afe7ac22cb9af91da5121109fec92d1ca"><code>91ec0f2</code></a></td><td><code>src/sage/__init__.py: Remove __all__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/949d787041a94b812cd76faced705fed83e5594c"><code>949d787</code></a></td><td><code>src/sage/__init__.py: Remove __version__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f77a98e4429616ec293e632a2ebba880181858ea"><code>f77a98e</code></a></td><td><code>src/sage/__init__.py: Move 'import zlib' to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e9ea5682c04214c3bfcb8ca3cee1e1ba6e5150c"><code>2e9ea56</code></a></td><td><code>src/sage/__init__.py: Move monkey-patch of ExtensionFileLoader to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad587cfd90e0a06a86e1297e470a775106ea7da8"><code>ad587cf</code></a></td><td><code>src/sage/__init__.py [Cygwin]: Move monkey-patch of sqlite to src/sage/cpython/__init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af6642f9b5a8448c92f87f65da9f78d7c619f1cd"><code>af6642f</code></a></td><td><code>src/sage/cpython/__init__.py: Clean up sage.cpython module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046"><code>2ba4c43</code></a></td><td><code>Merge #31420</code></td></tr></table>




---

archive/issue_events_444614.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-09-09T16:30:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444614"
}
```



---

archive/issue_events_444615.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-09-09T16:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444615"
}
```



---

archive/issue_comments_523784.json:
```json
{
    "body": "Changed commit from **[`f9154a9`](https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db)** to **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**",
    "created_at": "2021-09-09T16:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523784",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9154a9`](https://github.com/sagemath/sagetrac-mirror/commit/f9154a91bbd2f63d398fd3fb0af3b852c00ab2db)** to **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**



---

archive/issue_comments_523785.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nMerged #31420 to remove the trivial merge conflict in `src/sage/__init__.py`.",
    "created_at": "2021-09-09T16:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523785",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Merged #31420 to remove the trivial merge conflict in `src/sage/__init__.py`.



---

archive/issue_events_444616.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-09T16:31:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444616"
}
```



---

archive/issue_events_444617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-09T16:31:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444617"
}
```



---

archive/issue_comments_523786.json:
```json
{
    "body": "Dependencies: **#31420**",
    "created_at": "2021-09-09T16:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523786",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31420**



---

archive/issue_comments_523787.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__)** to **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**",
    "created_at": "2021-09-19T09:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32479#issuecomment-523787",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_monkey_patching_of_inspect_isfunction_in_sage___init__)** to **[`2ba4c43`](https://github.com/sagemath/sagetrac-mirror/commit/2ba4c4351c57b13489012c1291e1937ca4687046)**



---

archive/issue_events_444618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-19T09:58:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444618"
}
```



---

archive/issue_events_444619.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e30745934800b67dc2daef7c679aea62f001e4c4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-09-19T09:58:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32479",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32479#event-444619"
}
```
