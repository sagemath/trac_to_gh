# Issue 32087: cysignals, cvxopt fail to build in conda

archive/issues_031850.json:
```json
{
    "assignees": [],
    "body": "Sage sources 9.4.beta3\n\n- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)\n- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)\n- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)\n- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)\n\nDepends on #32387\n\nCC:  @isuruf\n\nComponent: **packages: standard**\n\nBranch/Commit: **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda) @ [`3592860`](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32087_\n\n",
    "closed_at": "2022-02-17T00:06:10Z",
    "created_at": "2021-06-29T21:29:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cysignals, cvxopt fail to build in conda",
    "type": "issue",
    "updated_at": "2022-02-17T00:06:10Z",
    "url": "https://github.com/sagemath/sage/issues/32087",
    "user": "https://github.com/videlec"
}
```
Sage sources 9.4.beta3

- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)
- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)
- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)
- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)

Depends on #32387

CC:  @isuruf

Component: **packages: standard**

Branch/Commit: **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda) @ [`3592860`](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**

_Issue created by migration from https://trac.sagemath.org/ticket/32087_





---

archive/issue_events_439346.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439346"
}
```



---

archive/issue_events_439347.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439347"
}
```



---

archive/issue_events_439348.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439348"
}
```



---

archive/issue_events_439349.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439349"
}
```



---

archive/issue_comments_516630.json:
```json
{
    "body": "Attachment: **[conda-list.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list.txt)**\n\nAttachment: **[config.status.gz](https://github.com/sagemath/sage/files/ticket32087/config.status.gz)**",
    "created_at": "2021-06-29T21:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516630",
    "user": "https://github.com/videlec"
}
```

Attachment: **[conda-list.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list.txt)**

Attachment: **[config.status.gz](https://github.com/sagemath/sage/files/ticket32087/config.status.gz)**



---

archive/issue_comments_516631.json:
```json
{
    "body": "Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket32087/config.log)**",
    "created_at": "2021-06-29T21:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516631",
    "user": "https://github.com/videlec"
}
```

Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket32087/config.log)**



---

archive/issue_comments_516632.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-9.4.beta3 \n+Sage sources 9.4.beta3\n+\n+- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)\n+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)\n+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)\n+- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)\n``````\n",
    "created_at": "2021-06-29T21:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516632",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-9.4.beta3 
+Sage sources 9.4.beta3
+
+- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)
+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)
+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)
+- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)
``````




---

archive/issue_comments_516633.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[pynac-0.7.27.p8.log](https://github.com/sagemath/sage/files/ticket32087/pynac-0.7.27.p8.log)**",
    "created_at": "2021-06-29T21:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516633",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[pynac-0.7.27.p8.log](https://github.com/sagemath/sage/files/ticket32087/pynac-0.7.27.p8.log)**



---

archive/issue_comments_516634.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAny idea where the `-nostdlib` could have originated in the final link line? I am fairly sure it is why the linker tries to link to static version of the `pthread` library. It probably also tries to use a static version of libstdc++.",
    "created_at": "2021-06-29T21:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516634",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

Any idea where the `-nostdlib` could have originated in the final link line? I am fairly sure it is why the linker tries to link to static version of the `pthread` library. It probably also tries to use a static version of libstdc++.



---

archive/issue_comments_516635.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFrom the build log:\n\n```\nlibtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,--sysroot=/ -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5\n1163\t/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a\n1164\n```",
    "created_at": "2021-06-29T21:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516635",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

From the build log:

```
libtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,--sysroot=/ -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5
1163	/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a
1164
```



---

archive/issue_comments_516636.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\npynac gets its flags from python, see https://github.com/pynac/pynac/blob/master/configure.ac#L56",
    "created_at": "2021-06-29T21:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

pynac gets its flags from python, see https://github.com/pynac/pynac/blob/master/configure.ac#L56



---

archive/issue_comments_516637.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNote that for this build I explicitely used conda's Python with\n\n```\n$ ./configure --with-python=/home/vincent/miniconda3/envs/sage-build/bin/python3\n```",
    "created_at": "2021-06-29T21:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516637",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Note that for this build I explicitely used conda's Python with

```
$ ./configure --with-python=/home/vincent/miniconda3/envs/sage-build/bin/python3
```



---

archive/issue_comments_516638.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nA good question for @isuruf then. `-nostdlib` is usually used to link C++ code completely statically. It should only be used in conjunction with `static`. If you try to link C++ statically without `-nostdlib` various standard library will still be dynamically linked. It is a nuclear option to get statically linked C++ code. \n\nNot recommended for use unless you really know what you are doing or you are compiling for a BlueGene [now completely dead, I personally shutdown two of those in 2016].",
    "created_at": "2021-06-29T21:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516638",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

A good question for @isuruf then. `-nostdlib` is usually used to link C++ code completely statically. It should only be used in conjunction with `static`. If you try to link C++ statically without `-nostdlib` various standard library will still be dynamically linked. It is a nuclear option to get statically linked C++ code. 

Not recommended for use unless you really know what you are doing or you are compiling for a BlueGene [now completely dead, I personally shutdown two of those in 2016].



---

archive/issue_comments_516639.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`-nostdlib` is added by libtool. This is a different problem. Can you send the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` and also what the value of `_CONDA_PYTHON_SYSCONFIGDATA_NAME` and `PYTHON_SYSCONFIGDATA_NAME` in your env is?",
    "created_at": "2021-06-29T22:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516639",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:8" align="right">comment:8</div>

`-nostdlib` is added by libtool. This is a different problem. Can you send the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` and also what the value of `_CONDA_PYTHON_SYSCONFIGDATA_NAME` and `PYTHON_SYSCONFIGDATA_NAME` in your env is?



---

archive/issue_comments_516640.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGot\n\n```\n$ echo $_CONDA_PYTHON_SYSCONFIGDATA_NAME\n_sysconfigdata_x86_64_conda_cos6_linux_gnu\n$ echo $PYTHON_SYSCONFIGDATA_NAME\n\n```\nAnd the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` is in [conda-list-p.txt](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list-p.txt).",
    "created_at": "2021-06-30T06:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516640",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Got

```
$ echo $_CONDA_PYTHON_SYSCONFIGDATA_NAME
_sysconfigdata_x86_64_conda_cos6_linux_gnu
$ echo $PYTHON_SYSCONFIGDATA_NAME

```
And the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` is in [conda-list-p.txt](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list-p.txt).



---

archive/issue_comments_516641.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[conda-list-p.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list-p.txt)**\n\nThanks. Can you post the output of `python -m sysconfig | grep sysroot`?",
    "created_at": "2021-06-30T14:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516641",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[conda-list-p.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list-p.txt)**

Thanks. Can you post the output of `python -m sysconfig | grep sysroot`?



---

archive/issue_comments_516642.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n\n```\n\tCONFIG_ARGS = \"'--prefix=/home/vincent/miniconda3/envs/sage-build' '--build=x86_64-conda_cos6-linux-gnu' '--host=x86_64-conda_cos6-linux-gnu' '--enable-ipv6' '--with-ensurepip=no' '--with-tzpath=/home/vincent/miniconda3/envs/sage-build/share/zoneinfo:/home/vincent/miniconda3/envs/sage-build/share/tzinfo' '--with-computed-gotos' '--with-system-ffi' '--enable-loadable-sqlite-extensions' '--with-tcltk-includes=-I/home/vincent/miniconda3/envs/sage-build/include' '--with-tcltk-libs=-L/home/vincent/miniconda3/envs/sage-build/lib -ltcl8.6 -ltk8.6' '--with-platlibdir=lib' '--with-lto' '--enable-optimizations' '-oldincludedir=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/x86_64-conda_cos6-linux-gnu/sysroot/usr/include' '--disable-shared' 'PROFILE_TASK=-m test --pgo' 'build_alias=x86_64-conda_cos6-linux-gnu' 'host_alias=x86_64-conda_cos6-linux-gnu' 'MACHDEP=linux' 'CC=x86_64-conda_cos6-linux-gnu-gcc' 'CFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/vincent/miniconda3/envs/sage-build/include      ' 'LDFLAGS=-Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link,/home/vincent/miniconda3/envs/sage-build/lib -L/home/vincent/miniconda3/envs/sage-build/lib' 'CPPFLAGS=-DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/vincent/miniconda3/envs/sage-build/include -I/home/vincent/miniconda3/envs/sage-build/include' 'CPP=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/bin/x86_64-conda_cos6-linux-gnu-cpp' 'PKG_CONFIG_PATH=/home/vincent/miniconda3/envs/sage-build/lib/pkgconfig'\"\n```",
    "created_at": "2021-06-30T14:55:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516642",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>


```
	CONFIG_ARGS = "'--prefix=/home/vincent/miniconda3/envs/sage-build' '--build=x86_64-conda_cos6-linux-gnu' '--host=x86_64-conda_cos6-linux-gnu' '--enable-ipv6' '--with-ensurepip=no' '--with-tzpath=/home/vincent/miniconda3/envs/sage-build/share/zoneinfo:/home/vincent/miniconda3/envs/sage-build/share/tzinfo' '--with-computed-gotos' '--with-system-ffi' '--enable-loadable-sqlite-extensions' '--with-tcltk-includes=-I/home/vincent/miniconda3/envs/sage-build/include' '--with-tcltk-libs=-L/home/vincent/miniconda3/envs/sage-build/lib -ltcl8.6 -ltk8.6' '--with-platlibdir=lib' '--with-lto' '--enable-optimizations' '-oldincludedir=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/x86_64-conda_cos6-linux-gnu/sysroot/usr/include' '--disable-shared' 'PROFILE_TASK=-m test --pgo' 'build_alias=x86_64-conda_cos6-linux-gnu' 'host_alias=x86_64-conda_cos6-linux-gnu' 'MACHDEP=linux' 'CC=x86_64-conda_cos6-linux-gnu-gcc' 'CFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/vincent/miniconda3/envs/sage-build/include      ' 'LDFLAGS=-Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link,/home/vincent/miniconda3/envs/sage-build/lib -L/home/vincent/miniconda3/envs/sage-build/lib' 'CPPFLAGS=-DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/vincent/miniconda3/envs/sage-build/include -I/home/vincent/miniconda3/envs/sage-build/include' 'CPP=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/bin/x86_64-conda_cos6-linux-gnu-cpp' 'PKG_CONFIG_PATH=/home/vincent/miniconda3/envs/sage-build/lib/pkgconfig'"
```



---

archive/issue_comments_516643.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry, I can't reproduce this. All I know is that the flag `-Wl,--sysroot=/` is the issue here. This is used in a sysconfig when used with compilers other than the ones shipped with conda. (It's there to use our newer linker with an older gcc installation). This shouldn't happen when conda compilers are used where `_CONDA_PYTHON_SYSCONFIGDATA_NAME` is set. The only situation I can think of is sage or pynac stripping the environment and deleting that env variable.\n\nCan you try printing that env variable `_CONDA_PYTHON_SYSCONFIGDATA_NAME` at the beginning of pynac build to confirm that sage doesn't filter it out?",
    "created_at": "2021-06-30T23:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516643",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry, I can't reproduce this. All I know is that the flag `-Wl,--sysroot=/` is the issue here. This is used in a sysconfig when used with compilers other than the ones shipped with conda. (It's there to use our newer linker with an older gcc installation). This shouldn't happen when conda compilers are used where `_CONDA_PYTHON_SYSCONFIGDATA_NAME` is set. The only situation I can think of is sage or pynac stripping the environment and deleting that env variable.

Can you try printing that env variable `_CONDA_PYTHON_SYSCONFIGDATA_NAME` at the beginning of pynac build to confirm that sage doesn't filter it out?



---

archive/issue_comments_516644.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nNvm, I can reproduce this. I'll fix this soon.",
    "created_at": "2021-07-01T00:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516644",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:13" align="right">comment:13</div>

Nvm, I can reproduce this. I'll fix this soon.



---

archive/issue_comments_516645.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nUpstream issue https://github.com/conda-forge/python-feedstock/issues/474.\n\nYou can downgrade your setuptools version as a workaround.",
    "created_at": "2021-07-01T04:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516645",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:14" align="right">comment:14</div>

Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.

You can downgrade your setuptools version as a workaround.



---

archive/issue_comments_516646.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@isuruf](#comment%3A14):\n> Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.\n> \n> You can downgrade your setuptools version as a workaround.\n\nDowngrading to setuptools 49.5.0 was only possible together with downgrading Python to 3.8. I am trying to build sage with that new setup now.",
    "created_at": "2021-07-01T15:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516646",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@isuruf](#comment%3A14):
> Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.
> 
> You can downgrade your setuptools version as a workaround.

Downgrading to setuptools 49.5.0 was only possible together with downgrading Python to 3.8. I am trying to build sage with that new setup now.



---

archive/issue_comments_516647.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSame problem\n\n```\nlibtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,-rpath=/home/vincent/miniconda3/envs/sage-build/lib -Wl,--no-as-needed -Wl,--sysroot=/ -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5\n/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a\ncollect2: error: ld returned 1 exit status\n```\nNote that sage installs its own version of setuptools (version 56.2.0).",
    "created_at": "2021-07-02T06:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516647",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Same problem

```
libtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,-rpath=/home/vincent/miniconda3/envs/sage-build/lib -Wl,--no-as-needed -Wl,--sysroot=/ -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5
/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a
collect2: error: ld returned 1 exit status
```
Note that sage installs its own version of setuptools (version 56.2.0).



---

archive/issue_comments_516648.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nRight. Until upstream issue is solved, we have to downgrade setuptools to 49.* in sage itself.",
    "created_at": "2021-07-02T06:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516648",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:17" align="right">comment:17</div>

Right. Until upstream issue is solved, we have to downgrade setuptools to 49.* in sage itself.



---

archive/issue_comments_516649.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nPerhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?",
    "created_at": "2021-07-02T06:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516649",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?



---

archive/issue_comments_516650.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYes, that seems reasonable until we get the upstream issue solved.",
    "created_at": "2021-07-02T21:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516650",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:19" align="right">comment:19</div>

Yes, that seems reasonable until we get the upstream issue solved.



---

archive/issue_comments_516651.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?\n\nHow could I do that?",
    "created_at": "2021-07-06T20:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516651",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mkoeppe](#comment%3A18):
> Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?

How could I do that?



---

archive/issue_comments_516652.json:
```json
{
    "body": "Branch: **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)**",
    "created_at": "2021-07-06T21:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516652",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)**



---

archive/issue_comments_516653.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nTry this\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585\"><code>5ce41d9</code></a></td><td><code>build/bin/sage-build-env [conda]: Use SETUPTOOLS_USE_DISTUTILS=stdlib</code></td></tr></table>\n",
    "created_at": "2021-07-06T21:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516653",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Try this

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585"><code>5ce41d9</code></a></td><td><code>build/bin/sage-build-env [conda]: Use SETUPTOOLS_USE_DISTUTILS=stdlib</code></td></tr></table>




---

archive/issue_comments_516654.json:
```json
{
    "body": "Commit: **[`5ce41d9`](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)**",
    "created_at": "2021-07-06T21:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516654",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`5ce41d9`](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)**



---

archive/issue_comments_516655.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n\n```\nSuccessfully installed pynac-0.7.27.p8\n```\nThanks",
    "created_at": "2021-07-06T21:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516655",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>


```
Successfully installed pynac-0.7.27.p8
```
Thanks



---

archive/issue_comments_516656.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[cysignals-1.10.3.log](https://github.com/sagemath/sage/files/ticket32087/cysignals-1.10.3.log)**\n\nAfter that the build failed for cysignals, see [cysignals-1.10.3.log](https://trac.sagemath.org/raw-attachment/ticket/32087/cysignals-1.10.3.log).",
    "created_at": "2021-07-06T21:54:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516656",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[cysignals-1.10.3.log](https://github.com/sagemath/sage/files/ticket32087/cysignals-1.10.3.log)**

After that the build failed for cysignals, see [cysignals-1.10.3.log](https://trac.sagemath.org/raw-attachment/ticket/32087/cysignals-1.10.3.log).



---

archive/issue_comments_516657.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nCan you attach the pari log as well?",
    "created_at": "2021-07-06T22:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516657",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:25" align="right">comment:25</div>

Can you attach the pari log as well?



---

archive/issue_comments_516658.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[pari-2.13.1.log](https://github.com/sagemath/sage/files/ticket32087/pari-2.13.1.log)**\n\navailable as [pari-2.13.1.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pari-2.13.1.log).\n\nThanks for your help.",
    "created_at": "2021-07-06T22:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516658",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[pari-2.13.1.log](https://github.com/sagemath/sage/files/ticket32087/pari-2.13.1.log)**

available as [pari-2.13.1.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pari-2.13.1.log).

Thanks for your help.



---

archive/issue_comments_516659.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThis may be a good moment to mention https://github.com/sagemath/cysignals/issues/125, which needs help",
    "created_at": "2021-07-06T22:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516659",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

This may be a good moment to mention https://github.com/sagemath/cysignals/issues/125, which needs help



---

archive/issue_comments_516660.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)** to **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda)**",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516660",
    "user": "https://github.com/isuruf"
}
```

Changed branch from **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)** to **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda)**



---

archive/issue_events_439350.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-07-09T20:30:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439350"
}
```



---

archive/issue_comments_516661.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e15d3c3a1dd075212773618a91af5b7870b43783\"><code>e15d3c3</code></a></td><td><code>remove pari_jupyter conda.txt because it is not compatible with pari=2.13</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea51b65f661b60b27d6666aa1b4a8957f62892d\"><code>1ea51b6</code></a></td><td><code>make sure pari>=2.13 is used with conda</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2da866d26d0c80302b91a9e6bb8c453dde95741\"><code>a2da866</code></a></td><td><code>set SUITESPARSE_INC_DIR to SAGE_LOCAL/include if we are using system suitesparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27ced511c773bacd2f3c5256f29c4ce658f39c4b\"><code>27ced51</code></a></td><td><code>Fix lib dirs for cvxopts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4\"><code>3592860</code></a></td><td><code>Ask for pthread version of pari</code></td></tr></table>\n",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516661",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:28"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e15d3c3a1dd075212773618a91af5b7870b43783"><code>e15d3c3</code></a></td><td><code>remove pari_jupyter conda.txt because it is not compatible with pari=2.13</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea51b65f661b60b27d6666aa1b4a8957f62892d"><code>1ea51b6</code></a></td><td><code>make sure pari>=2.13 is used with conda</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2da866d26d0c80302b91a9e6bb8c453dde95741"><code>a2da866</code></a></td><td><code>set SUITESPARSE_INC_DIR to SAGE_LOCAL/include if we are using system suitesparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27ced511c773bacd2f3c5256f29c4ce658f39c4b"><code>27ced51</code></a></td><td><code>Fix lib dirs for cvxopts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4"><code>3592860</code></a></td><td><code>Ask for pthread version of pari</code></td></tr></table>




---

archive/issue_comments_516662.json:
```json
{
    "body": "Changed commit from **[`5ce41d9`](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)** to **[`3592860`](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516662",
    "user": "https://github.com/isuruf"
}
```

Changed commit from **[`5ce41d9`](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)** to **[`3592860`](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**



---

archive/issue_comments_516663.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe issue was what @mkoeppe said about LDFLAGS in python overriding sage built version. For now, I've updated conda in pari to use pthread version for pari>=2.13.\n\nCan you check that this works?",
    "created_at": "2021-07-09T20:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516663",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:29" align="right">comment:29</div>

The issue was what @mkoeppe said about LDFLAGS in python overriding sage built version. For now, I've updated conda in pari to use pthread version for pari>=2.13.

Can you check that this works?



---

archive/issue_events_439351.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-09T21:59:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "pynac, cysignals fail to build in conda",
    "title_was": "pynac fails to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439351"
}
```



---

archive/issue_events_439352.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-07-09T22:07:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "pynac, cysignals, cvxopt fail to build in conda",
    "title_was": "pynac, cysignals fail to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439352"
}
```



---

archive/issue_comments_516664.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIt looks like this may be breaking `cvxopt` on a number of platforms - see https://github.com/mkoeppe/sage/runs/3041608561?check_suite_focus=true",
    "created_at": "2021-07-12T06:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516664",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

It looks like this may be breaking `cvxopt` on a number of platforms - see https://github.com/mkoeppe/sage/runs/3041608561?check_suite_focus=true



---

archive/issue_comments_516665.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n@isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation\n\n```\n[dochtml] Error in sys.excepthook:\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   [Previous line repeated 997 more times]\n[dochtml] RecursionError: maximum recursion depth exceeded\n[dochtml] \n[dochtml] Original exception was:\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)\n[dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object\n[dochtml] \n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n...\n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n[dochtml] \n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n[dochtml]     return _run_code(code, main_globals, None,\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py\", line 87, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1813, in main\n[dochtml]     builder()\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 809, in _wrapper\n[dochtml]     self.write_auto_rest_file(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1104, in write_auto_rest_file\n[dochtml]     title = self.get_module_docstring_title(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1065, in get_module_docstring_title\n[dochtml]     __import__(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage/libs/giac/__init__.py\", line 35, in <module>\n[dochtml]     from .giac import giacsettings, libgiac\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 2261, in init sage.libs.giac.giac (build/cythonized/sage/libs/giac/giac.cpp:168106)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 802, in sage.libs.giac.giac.GiacSetting.threads.__set__ (build/cythonized/sage/libs/giac/giac.cpp:11533)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-libs] Error 1\n[dochtml] make[5]: *** Waiting for unfinished jobs....\n```",
    "created_at": "2021-07-15T09:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516665",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

@isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation

```
[dochtml] Error in sys.excepthook:
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   [Previous line repeated 997 more times]
[dochtml] RecursionError: maximum recursion depth exceeded
[dochtml] 
[dochtml] Original exception was:
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)
[dochtml]   File "sage/libs/giac/giac.pyx", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)
[dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object
[dochtml] 
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
...
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
[dochtml] 
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py", line 197, in _run_module_as_main
[dochtml]     return _run_code(code, main_globals, None,
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py", line 87, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1813, in main
[dochtml]     builder()
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 809, in _wrapper
[dochtml]     self.write_auto_rest_file(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1104, in write_auto_rest_file
[dochtml]     title = self.get_module_docstring_title(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1065, in get_module_docstring_title
[dochtml]     __import__(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage/libs/giac/__init__.py", line 35, in <module>
[dochtml]     from .giac import giacsettings, libgiac
[dochtml]   File "sage/libs/giac/giac.pyx", line 2261, in init sage.libs.giac.giac (build/cythonized/sage/libs/giac/giac.cpp:168106)
[dochtml]   File "sage/libs/giac/giac.pyx", line 802, in sage.libs.giac.giac.GiacSetting.threads.__set__ (build/cythonized/sage/libs/giac/giac.cpp:11533)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-libs] Error 1
[dochtml] make[5]: *** Waiting for unfinished jobs....
```



---

archive/issue_events_439353.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T17:50:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439353"
}
```



---

archive/issue_events_439354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T17:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439354"
}
```



---

archive/issue_events_439355.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:49:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439355"
}
```



---

archive/issue_events_439356.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:49:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439356"
}
```



---

archive/issue_events_439357.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439357"
}
```



---

archive/issue_events_439358.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439358"
}
```



---

archive/issue_events_439359.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-25T22:37:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "cysignals, cvxopt fail to build in conda",
    "title_was": "pynac, cysignals, cvxopt fail to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439359"
}
```



---

archive/issue_comments_516666.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\npynac issue will disappear with package removal in #32387",
    "created_at": "2021-09-25T22:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516666",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

pynac issue will disappear with package removal in #32387



---

archive/issue_comments_516667.json:
```json
{
    "body": "Dependencies: **#32387**",
    "created_at": "2021-09-25T22:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516667",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#32387**



---

archive/issue_comments_516668.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOutdated; in 9.5.beta8 (with #32113), the packages build OK.",
    "created_at": "2021-12-21T05:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516668",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Outdated; in 9.5.beta8 (with #32113), the packages build OK.



---

archive/issue_events_439360.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439360"
}
```



---

archive/issue_events_439361.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439361"
}
```



---

archive/issue_events_439362.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439362"
}
```



---

archive/issue_comments_516669.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@videlec](#comment%3A33):\n> @isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation\n> \n> ```\n> [dochtml] Error in sys.excepthook:\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   [Previous line repeated 997 more times]\n> [dochtml] RecursionError: maximum recursion depth exceeded\n> [dochtml] \n> [dochtml] Original exception was:\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)\n> [dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object\n> [dochtml] \n> [dochtml] During handling of the above exception, another exception occurred:\n> [dochtml] \n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n> [dochtml] RuntimeError\n> ...\n> ```\n\nI've opened #33056 for this.",
    "created_at": "2021-12-21T05:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-516669",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@videlec](#comment%3A33):
> @isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation
> 
> ```
> [dochtml] Error in sys.excepthook:
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   [Previous line repeated 997 more times]
> [dochtml] RecursionError: maximum recursion depth exceeded
> [dochtml] 
> [dochtml] Original exception was:
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)
> [dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object
> [dochtml] 
> [dochtml] During handling of the above exception, another exception occurred:
> [dochtml] 
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
> [dochtml] RuntimeError
> ...
> ```

I've opened #33056 for this.



---

archive/issue_events_439363.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2022-02-16T21:07:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439363"
}
```



---

archive/issue_events_439364.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2022-02-16T21:07:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439364"
}
```



---

archive/issue_events_439365.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-17T00:06:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439365"
}
```



---

archive/issue_events_439366.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-17T00:06:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-439366"
}
```
