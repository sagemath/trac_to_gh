# Issue 32087: cysignals, cvxopt fail to build in conda

archive/issues_031850.json:
```json
{
    "assignees": [],
    "body": "Sage sources 9.4.beta3\n\n- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)\n- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)\n- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)\n- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)\n\nDepends on #32387\n\nCC:  @isuruf\n\nBranch/Commit: **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda) @ [3592860](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32087_\n\n",
    "closed_at": "2022-02-17T00:06:10Z",
    "created_at": "2021-06-29T21:29:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cysignals, cvxopt fail to build in conda",
    "type": "issue",
    "updated_at": "2022-02-17T00:06:10Z",
    "url": "https://github.com/sagemath/sage/issues/32087",
    "user": "https://github.com/videlec"
}
```
Sage sources 9.4.beta3

- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)
- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)
- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)
- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)

Depends on #32387

CC:  @isuruf

Branch/Commit: **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda) @ [3592860](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**

_Issue created by migration from https://trac.sagemath.org/ticket/32087_





---

archive/issue_events_410136.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410136"
}
```



---

archive/issue_events_410137.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410137"
}
```



---

archive/issue_events_410138.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-29T21:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410138"
}
```



---

archive/issue_comments_519720.json:
```json
{
    "body": "Attachment: **[conda-list.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list.txt)**\n\nAttachment: **[config.status.gz](https://github.com/sagemath/sage/files/ticket32087/config.status.gz)**",
    "created_at": "2021-06-29T21:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519720",
    "user": "https://github.com/videlec"
}
```

Attachment: **[conda-list.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list.txt)**

Attachment: **[config.status.gz](https://github.com/sagemath/sage/files/ticket32087/config.status.gz)**



---

archive/issue_comments_519721.json:
```json
{
    "body": "Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket32087/config.log)**",
    "created_at": "2021-06-29T21:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519721",
    "user": "https://github.com/videlec"
}
```

Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket32087/config.log)**



---

archive/issue_comments_519722.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-9.4.beta3 \n+Sage sources 9.4.beta3\n+\n+- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)\n+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)\n+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)\n+- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)\n``````\n",
    "created_at": "2021-06-29T21:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519722",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-9.4.beta3 
+Sage sources 9.4.beta3
+
+- [conda environment](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list.txt)
+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/32087/config.status)
+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/32087/config.log)
+- [pynac-0.7.27.p8.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pynac-0.7.27.p8.log)
``````




---

archive/issue_comments_519723.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[pynac-0.7.27.p8.log](https://github.com/sagemath/sage/files/ticket32087/pynac-0.7.27.p8.log)**",
    "created_at": "2021-06-29T21:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519723",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[pynac-0.7.27.p8.log](https://github.com/sagemath/sage/files/ticket32087/pynac-0.7.27.p8.log)**



---

archive/issue_comments_519724.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nAny idea where the `-nostdlib` could have originated in the final link line? I am fairly sure it is why the linker tries to link to static version of the `pthread` library. It probably also tries to use a static version of libstdc++.",
    "created_at": "2021-06-29T21:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519724",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'>Comment 3:</a>
Any idea where the `-nostdlib` could have originated in the final link line? I am fairly sure it is why the linker tries to link to static version of the `pthread` library. It probably also tries to use a static version of libstdc++.



---

archive/issue_comments_519725.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFrom the build log:\n\n```\nlibtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,--sysroot=/ -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5\n1163\t/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a\n1164\n```",
    "created_at": "2021-06-29T21:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519725",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
From the build log:

```
libtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,--sysroot=/ -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5
1163	/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a
1164
```



---

archive/issue_comments_519726.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\npynac gets its flags from python, see https://github.com/pynac/pynac/blob/master/configure.ac#L56",
    "created_at": "2021-06-29T21:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519726",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
pynac gets its flags from python, see https://github.com/pynac/pynac/blob/master/configure.ac#L56



---

archive/issue_comments_519727.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNote that for this build I explicitely used conda's Python with\n\n```\n$ ./configure --with-python=/home/vincent/miniconda3/envs/sage-build/bin/python3\n```",
    "created_at": "2021-06-29T21:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519727",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'>Comment 6:</a>
Note that for this build I explicitely used conda's Python with

```
$ ./configure --with-python=/home/vincent/miniconda3/envs/sage-build/bin/python3
```



---

archive/issue_comments_519728.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nA good question for @isuruf then. `-nostdlib` is usually used to link C++ code completely statically. It should only be used in conjunction with `static`. If you try to link C++ statically without `-nostdlib` various standard library will still be dynamically linked. It is a nuclear option to get statically linked C++ code. \n\nNot recommended for use unless you really know what you are doing or you are compiling for a BlueGene [now completely dead, I personally shutdown two of those in 2016].",
    "created_at": "2021-06-29T21:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519728",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
A good question for @isuruf then. `-nostdlib` is usually used to link C++ code completely statically. It should only be used in conjunction with `static`. If you try to link C++ statically without `-nostdlib` various standard library will still be dynamically linked. It is a nuclear option to get statically linked C++ code. 

Not recommended for use unless you really know what you are doing or you are compiling for a BlueGene [now completely dead, I personally shutdown two of those in 2016].



---

archive/issue_comments_519729.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\n`-nostdlib` is added by libtool. This is a different problem. Can you send the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` and also what the value of `_CONDA_PYTHON_SYSCONFIGDATA_NAME` and `PYTHON_SYSCONFIGDATA_NAME` in your env is?",
    "created_at": "2021-06-29T22:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519729",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:8'>Comment 8:</a>
`-nostdlib` is added by libtool. This is a different problem. Can you send the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` and also what the value of `_CONDA_PYTHON_SYSCONFIGDATA_NAME` and `PYTHON_SYSCONFIGDATA_NAME` in your env is?



---

archive/issue_comments_519730.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nGot\n\n```\n$ echo $_CONDA_PYTHON_SYSCONFIGDATA_NAME\n_sysconfigdata_x86_64_conda_cos6_linux_gnu\n$ echo $PYTHON_SYSCONFIGDATA_NAME\n\n```\nAnd the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` is in [conda-list-p.txt](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list-p.txt).",
    "created_at": "2021-06-30T06:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519730",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'>Comment 9:</a>
Got

```
$ echo $_CONDA_PYTHON_SYSCONFIGDATA_NAME
_sysconfigdata_x86_64_conda_cos6_linux_gnu
$ echo $PYTHON_SYSCONFIGDATA_NAME

```
And the output of `conda list -p /home/vincent/miniconda3/envs/sage-build/` is in [conda-list-p.txt](https://trac.sagemath.org/raw-attachment/ticket/32087/conda-list-p.txt).



---

archive/issue_comments_519731.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAttachment: **[conda-list-p.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list-p.txt)**\n\nThanks. Can you post the output of `python -m sysconfig | grep sysroot`?",
    "created_at": "2021-06-30T14:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519731",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:10'>Comment 10:</a>
Attachment: **[conda-list-p.txt](https://github.com/sagemath/sage/files/ticket32087/conda-list-p.txt)**

Thanks. Can you post the output of `python -m sysconfig | grep sysroot`?



---

archive/issue_comments_519732.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n\n```\n\tCONFIG_ARGS = \"'--prefix=/home/vincent/miniconda3/envs/sage-build' '--build=x86_64-conda_cos6-linux-gnu' '--host=x86_64-conda_cos6-linux-gnu' '--enable-ipv6' '--with-ensurepip=no' '--with-tzpath=/home/vincent/miniconda3/envs/sage-build/share/zoneinfo:/home/vincent/miniconda3/envs/sage-build/share/tzinfo' '--with-computed-gotos' '--with-system-ffi' '--enable-loadable-sqlite-extensions' '--with-tcltk-includes=-I/home/vincent/miniconda3/envs/sage-build/include' '--with-tcltk-libs=-L/home/vincent/miniconda3/envs/sage-build/lib -ltcl8.6 -ltk8.6' '--with-platlibdir=lib' '--with-lto' '--enable-optimizations' '-oldincludedir=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/x86_64-conda_cos6-linux-gnu/sysroot/usr/include' '--disable-shared' 'PROFILE_TASK=-m test --pgo' 'build_alias=x86_64-conda_cos6-linux-gnu' 'host_alias=x86_64-conda_cos6-linux-gnu' 'MACHDEP=linux' 'CC=x86_64-conda_cos6-linux-gnu-gcc' 'CFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/vincent/miniconda3/envs/sage-build/include      ' 'LDFLAGS=-Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link,/home/vincent/miniconda3/envs/sage-build/lib -L/home/vincent/miniconda3/envs/sage-build/lib' 'CPPFLAGS=-DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/vincent/miniconda3/envs/sage-build/include -I/home/vincent/miniconda3/envs/sage-build/include' 'CPP=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/bin/x86_64-conda_cos6-linux-gnu-cpp' 'PKG_CONFIG_PATH=/home/vincent/miniconda3/envs/sage-build/lib/pkgconfig'\"\n```",
    "created_at": "2021-06-30T14:55:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519732",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'>Comment 11:</a>

```
	CONFIG_ARGS = "'--prefix=/home/vincent/miniconda3/envs/sage-build' '--build=x86_64-conda_cos6-linux-gnu' '--host=x86_64-conda_cos6-linux-gnu' '--enable-ipv6' '--with-ensurepip=no' '--with-tzpath=/home/vincent/miniconda3/envs/sage-build/share/zoneinfo:/home/vincent/miniconda3/envs/sage-build/share/tzinfo' '--with-computed-gotos' '--with-system-ffi' '--enable-loadable-sqlite-extensions' '--with-tcltk-includes=-I/home/vincent/miniconda3/envs/sage-build/include' '--with-tcltk-libs=-L/home/vincent/miniconda3/envs/sage-build/lib -ltcl8.6 -ltk8.6' '--with-platlibdir=lib' '--with-lto' '--enable-optimizations' '-oldincludedir=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/x86_64-conda_cos6-linux-gnu/sysroot/usr/include' '--disable-shared' 'PROFILE_TASK=-m test --pgo' 'build_alias=x86_64-conda_cos6-linux-gnu' 'host_alias=x86_64-conda_cos6-linux-gnu' 'MACHDEP=linux' 'CC=x86_64-conda_cos6-linux-gnu-gcc' 'CFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/vincent/miniconda3/envs/sage-build/include      ' 'LDFLAGS=-Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link,/home/vincent/miniconda3/envs/sage-build/lib -L/home/vincent/miniconda3/envs/sage-build/lib' 'CPPFLAGS=-DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/vincent/miniconda3/envs/sage-build/include -I/home/vincent/miniconda3/envs/sage-build/include' 'CPP=/home/conda/feedstock_root/build_artifacts/python-split_1624061905143/_build_env/bin/x86_64-conda_cos6-linux-gnu-cpp' 'PKG_CONFIG_PATH=/home/vincent/miniconda3/envs/sage-build/lib/pkgconfig'"
```



---

archive/issue_comments_519733.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nSorry, I can't reproduce this. All I know is that the flag `-Wl,--sysroot=/` is the issue here. This is used in a sysconfig when used with compilers other than the ones shipped with conda. (It's there to use our newer linker with an older gcc installation). This shouldn't happen when conda compilers are used where `_CONDA_PYTHON_SYSCONFIGDATA_NAME` is set. The only situation I can think of is sage or pynac stripping the environment and deleting that env variable.\n\nCan you try printing that env variable `_CONDA_PYTHON_SYSCONFIGDATA_NAME` at the beginning of pynac build to confirm that sage doesn't filter it out?",
    "created_at": "2021-06-30T23:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519733",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:12'>Comment 12:</a>
Sorry, I can't reproduce this. All I know is that the flag `-Wl,--sysroot=/` is the issue here. This is used in a sysconfig when used with compilers other than the ones shipped with conda. (It's there to use our newer linker with an older gcc installation). This shouldn't happen when conda compilers are used where `_CONDA_PYTHON_SYSCONFIGDATA_NAME` is set. The only situation I can think of is sage or pynac stripping the environment and deleting that env variable.

Can you try printing that env variable `_CONDA_PYTHON_SYSCONFIGDATA_NAME` at the beginning of pynac build to confirm that sage doesn't filter it out?



---

archive/issue_comments_519734.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNvm, I can reproduce this. I'll fix this soon.",
    "created_at": "2021-07-01T00:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519734",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:13'>Comment 13:</a>
Nvm, I can reproduce this. I'll fix this soon.



---

archive/issue_comments_519735.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nUpstream issue https://github.com/conda-forge/python-feedstock/issues/474.\n\nYou can downgrade your setuptools version as a workaround.",
    "created_at": "2021-07-01T04:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519735",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:14'>Comment 14:</a>
Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.

You can downgrade your setuptools version as a workaround.



---

archive/issue_comments_519736.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@isuruf](#comment%3A14):\n> Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.\n> \n> You can downgrade your setuptools version as a workaround.\n\nDowngrading to setuptools 49.5.0 was only possible together with downgrading Python to 3.8. I am trying to build sage with that new setup now.",
    "created_at": "2021-07-01T15:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519736",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@isuruf](#comment%3A14):
> Upstream issue https://github.com/conda-forge/python-feedstock/issues/474.
> 
> You can downgrade your setuptools version as a workaround.

Downgrading to setuptools 49.5.0 was only possible together with downgrading Python to 3.8. I am trying to build sage with that new setup now.



---

archive/issue_comments_519737.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nSame problem\n\n```\nlibtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,-rpath=/home/vincent/miniconda3/envs/sage-build/lib -Wl,--no-as-needed -Wl,--sysroot=/ -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5\n/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a\ncollect2: error: ld returned 1 exit status\n```\nNote that sage installs its own version of setuptools (version 56.2.0).",
    "created_at": "2021-07-02T06:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519737",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'>Comment 16:</a>
Same problem

```
libtool: link: /home/vincent/miniconda3/envs/sage-build/bin/x86_64-conda-linux-gnu-c++  -fPIC -DPIC -shared -nostdlib /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crti.o /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtbeginS.o  .libs/libpynac_la-add.o .libs/libpynac_la-archive.o .libs/libpynac_la-assume.o .libs/libpynac_la-basic.o .libs/libpynac_la-cmatcher.o .libs/libpynac_la-constant.o .libs/libpynac_la-context.o .libs/libpynac_la-ex.o .libs/libpynac_la-expair.o .libs/libpynac_la-expairseq.o .libs/libpynac_la-exprseq.o .libs/libpynac_la-fderivative.o .libs/libpynac_la-function.o .libs/libpynac_la-function_info.o .libs/libpynac_la-infinity.o .libs/libpynac_la-inifcns.o .libs/libpynac_la-inifcns_trig.o .libs/libpynac_la-inifcns_zeta.o .libs/libpynac_la-inifcns_hyperb.o .libs/libpynac_la-inifcns_trans.o .libs/libpynac_la-inifcns_gamma.o .libs/libpynac_la-inifcns_nstdsums.o .libs/libpynac_la-inifcns_orthopoly.o .libs/libpynac_la-inifcns_hyperg.o .libs/libpynac_la-inifcns_comb.o .libs/libpynac_la-lst.o .libs/libpynac_la-matrix.o .libs/libpynac_la-mpoly-giac.o .libs/libpynac_la-mpoly-ginac.o .libs/libpynac_la-mpoly-singular.o .libs/libpynac_la-mpoly.o .libs/libpynac_la-mul.o .libs/libpynac_la-normal.o .libs/libpynac_la-numeric.o .libs/libpynac_la-operators.o .libs/libpynac_la-power.o .libs/libpynac_la-py_funcs.o .libs/libpynac_la-registrar.o .libs/libpynac_la-relational.o .libs/libpynac_la-remember.o .libs/libpynac_la-pseries.o .libs/libpynac_la-print.o .libs/libpynac_la-symbol.o .libs/libpynac_la-upoly-ginac.o .libs/libpynac_la-utils.o .libs/libpynac_la-wildcard.o .libs/libpynac_la-templates.o .libs/libpynac_la-infoflagbase.o .libs/libpynac_la-sum.o .libs/libpynac_la-order.o .libs/libpynac_la-useries.o   -L/opt/sage/local/lib -L/home/vincent/miniconda3/envs/sage-build/lib -lpthread -lfactory -lmpfr -lntl -lomalloc -lsingular_resources -lflint -lgmp -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0 -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -lstdc++ -lm -lc -lgcc_s /home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/crtendS.o /home/vincent/miniconda3/envs/sage-build/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib/crtn.o  -O2 -g -march=nocona -mtune=haswell -fstack-protector-strong -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -pthread -Wl,-rpath=/home/vincent/miniconda3/envs/sage-build/lib -Wl,--no-as-needed -Wl,--sysroot=/ -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/home/vincent/miniconda3/envs/sage-build/lib -Wl,-rpath-link -Wl,/home/vincent/miniconda3/envs/sage-build/lib -march=nocona -mtune=haswell -fstack-protector-strong -O2 -O2   -pthread -Wl,-soname -Wl,libpynac.so.18 -o .libs/libpynac.so.18.3.5
/home/vincent/miniconda3/envs/sage-build/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: cannot find /usr/lib64/libpthread_nonshared.a
collect2: error: ld returned 1 exit status
```
Note that sage installs its own version of setuptools (version 56.2.0).



---

archive/issue_comments_519738.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nRight. Until upstream issue is solved, we have to downgrade setuptools to 49.* in sage itself.",
    "created_at": "2021-07-02T06:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519738",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:17'>Comment 17:</a>
Right. Until upstream issue is solved, we have to downgrade setuptools to 49.* in sage itself.



---

archive/issue_comments_519739.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nPerhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?",
    "created_at": "2021-07-02T06:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'>Comment 18:</a>
Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?



---

archive/issue_comments_519740.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nYes, that seems reasonable until we get the upstream issue solved.",
    "created_at": "2021-07-02T21:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519740",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:19'>Comment 19:</a>
Yes, that seems reasonable until we get the upstream issue solved.



---

archive/issue_comments_519741.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@mkoeppe](#comment%3A18):\n> Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?\n\nHow could I do that?",
    "created_at": "2021-07-06T20:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519741",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@mkoeppe](#comment%3A18):
> Perhaps it's good enough to just change the value of `SETUPTOOLS_USE_DISTUTILS` (set in `build/bin/sage-build-env`) for conda as a workaround?

How could I do that?



---

archive/issue_comments_519742.json:
```json
{
    "body": "Branch: **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)**",
    "created_at": "2021-07-06T21:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519742",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)**



---

archive/issue_comments_519743.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nTry this\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585\">5ce41d9</a></td><td><code>build/bin/sage-build-env [conda]: Use SETUPTOOLS_USE_DISTUTILS=stdlib</code></td></tr></table>\n",
    "created_at": "2021-07-06T21:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519743",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'>Comment 22:</a>
Try this

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585">5ce41d9</a></td><td><code>build/bin/sage-build-env [conda]: Use SETUPTOOLS_USE_DISTUTILS=stdlib</code></td></tr></table>




---

archive/issue_comments_519744.json:
```json
{
    "body": "Commit: **[5ce41d9](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)**",
    "created_at": "2021-07-06T21:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519744",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[5ce41d9](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)**



---

archive/issue_comments_519745.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\n\n```\nSuccessfully installed pynac-0.7.27.p8\n```\nThanks",
    "created_at": "2021-07-06T21:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519745",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'>Comment 23:</a>

```
Successfully installed pynac-0.7.27.p8
```
Thanks



---

archive/issue_comments_519746.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nAttachment: **[cysignals-1.10.3.log](https://github.com/sagemath/sage/files/ticket32087/cysignals-1.10.3.log)**\n\nAfter that the build failed for cysignals, see [cysignals-1.10.3.log](https://trac.sagemath.org/raw-attachment/ticket/32087/cysignals-1.10.3.log).",
    "created_at": "2021-07-06T21:54:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519746",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'>Comment 24:</a>
Attachment: **[cysignals-1.10.3.log](https://github.com/sagemath/sage/files/ticket32087/cysignals-1.10.3.log)**

After that the build failed for cysignals, see [cysignals-1.10.3.log](https://trac.sagemath.org/raw-attachment/ticket/32087/cysignals-1.10.3.log).



---

archive/issue_comments_519747.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nCan you attach the pari log as well?",
    "created_at": "2021-07-06T22:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519747",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:25'>Comment 25:</a>
Can you attach the pari log as well?



---

archive/issue_comments_519748.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nAttachment: **[pari-2.13.1.log](https://github.com/sagemath/sage/files/ticket32087/pari-2.13.1.log)**\n\navailable as [pari-2.13.1.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pari-2.13.1.log).\n\nThanks for your help.",
    "created_at": "2021-07-06T22:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519748",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>Comment 26:</a>
Attachment: **[pari-2.13.1.log](https://github.com/sagemath/sage/files/ticket32087/pari-2.13.1.log)**

available as [pari-2.13.1.log](https://trac.sagemath.org/raw-attachment/ticket/32087/pari-2.13.1.log).

Thanks for your help.



---

archive/issue_comments_519749.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThis may be a good moment to mention https://github.com/sagemath/cysignals/issues/125, which needs help",
    "created_at": "2021-07-06T22:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519749",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>Comment 27:</a>
This may be a good moment to mention https://github.com/sagemath/cysignals/issues/125, which needs help



---

archive/issue_comments_519750.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)** to **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda)**",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519750",
    "user": "https://github.com/isuruf"
}
```

Changed branch from **[u/mkoeppe/pynac_fails_to_build_in_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pynac_fails_to_build_in_conda)** to **[u/isuruf/pari-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/pari-conda)**



---

archive/issue_events_410139.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-07-09T20:30:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410139"
}
```



---

archive/issue_comments_519751.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e15d3c3a1dd075212773618a91af5b7870b43783\">e15d3c3</a></td><td><code>remove pari_jupyter conda.txt because it is not compatible with pari=2.13</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea51b65f661b60b27d6666aa1b4a8957f62892d\">1ea51b6</a></td><td><code>make sure pari>=2.13 is used with conda</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2da866d26d0c80302b91a9e6bb8c453dde95741\">a2da866</a></td><td><code>set SUITESPARSE_INC_DIR to SAGE_LOCAL/include if we are using system suitesparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27ced511c773bacd2f3c5256f29c4ce658f39c4b\">27ced51</a></td><td><code>Fix lib dirs for cvxopts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4\">3592860</a></td><td><code>Ask for pthread version of pari</code></td></tr></table>\n",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519751",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:28'>Comment 28:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e15d3c3a1dd075212773618a91af5b7870b43783">e15d3c3</a></td><td><code>remove pari_jupyter conda.txt because it is not compatible with pari=2.13</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea51b65f661b60b27d6666aa1b4a8957f62892d">1ea51b6</a></td><td><code>make sure pari>=2.13 is used with conda</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2da866d26d0c80302b91a9e6bb8c453dde95741">a2da866</a></td><td><code>set SUITESPARSE_INC_DIR to SAGE_LOCAL/include if we are using system suitesparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27ced511c773bacd2f3c5256f29c4ce658f39c4b">27ced51</a></td><td><code>Fix lib dirs for cvxopts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4">3592860</a></td><td><code>Ask for pthread version of pari</code></td></tr></table>




---

archive/issue_comments_519752.json:
```json
{
    "body": "Changed commit from **[5ce41d9](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)** to **[3592860](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**",
    "created_at": "2021-07-09T20:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519752",
    "user": "https://github.com/isuruf"
}
```

Changed commit from **[5ce41d9](https://github.com/sagemath/sagetrac-mirror/commit/5ce41d90c51a4cbfaf0cbb80a030ed4f4e27e585)** to **[3592860](https://github.com/sagemath/sagetrac-mirror/commit/35928608621161d9c4709474792d2a7dcaf2b6d4)**



---

archive/issue_comments_519753.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThe issue was what @mkoeppe said about LDFLAGS in python overriding sage built version. For now, I've updated conda in pari to use pthread version for pari>=2.13.\n\nCan you check that this works?",
    "created_at": "2021-07-09T20:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519753",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:29'>Comment 29:</a>
The issue was what @mkoeppe said about LDFLAGS in python overriding sage built version. For now, I've updated conda in pari to use pthread version for pari>=2.13.

Can you check that this works?



---

archive/issue_events_410140.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-09T21:59:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "pynac, cysignals fail to build in conda",
    "title_was": "pynac fails to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410140"
}
```



---

archive/issue_events_410141.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-07-09T22:07:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "pynac, cysignals, cvxopt fail to build in conda",
    "title_was": "pynac, cysignals fail to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410141"
}
```



---

archive/issue_comments_519754.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nIt looks like this may be breaking `cvxopt` on a number of platforms - see https://github.com/mkoeppe/sage/runs/3041608561?check_suite_focus=true",
    "created_at": "2021-07-12T06:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'>Comment 32:</a>
It looks like this may be breaking `cvxopt` on a number of platforms - see https://github.com/mkoeppe/sage/runs/3041608561?check_suite_focus=true



---

archive/issue_comments_519755.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\n@isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation\n\n```\n[dochtml] Error in sys.excepthook:\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n[dochtml]     context = TracebackException(\n[dochtml]   [Previous line repeated 997 more times]\n[dochtml] RecursionError: maximum recursion depth exceeded\n[dochtml] \n[dochtml] Original exception was:\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)\n[dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object\n[dochtml] \n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n...\n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n[dochtml] \n[dochtml] During handling of the above exception, another exception occurred:\n[dochtml] \n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n[dochtml]     return _run_code(code, main_globals, None,\n[dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py\", line 87, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1813, in main\n[dochtml]     builder()\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 809, in _wrapper\n[dochtml]     self.write_auto_rest_file(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1104, in write_auto_rest_file\n[dochtml]     title = self.get_module_docstring_title(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1065, in get_module_docstring_title\n[dochtml]     __import__(module_name)\n[dochtml]   File \"/opt/sage/local/lib/python3.9/site-packages/sage/libs/giac/__init__.py\", line 35, in <module>\n[dochtml]     from .giac import giacsettings, libgiac\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 2261, in init sage.libs.giac.giac (build/cythonized/sage/libs/giac/giac.cpp:168106)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 802, in sage.libs.giac.giac.GiacSetting.threads.__set__ (build/cythonized/sage/libs/giac/giac.cpp:11533)\n[dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n[dochtml] RuntimeError\n[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-libs] Error 1\n[dochtml] make[5]: *** Waiting for unfinished jobs....\n```",
    "created_at": "2021-07-15T09:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519755",
    "user": "https://github.com/videlec"
}
```

<a id='comment:33'>Comment 33:</a>
@isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation

```
[dochtml] Error in sys.excepthook:
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
[dochtml]     context = TracebackException(
[dochtml]   [Previous line repeated 997 more times]
[dochtml] RecursionError: maximum recursion depth exceeded
[dochtml] 
[dochtml] Original exception was:
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)
[dochtml]   File "sage/libs/giac/giac.pyx", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)
[dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object
[dochtml] 
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
...
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
[dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
[dochtml] 
[dochtml] During handling of the above exception, another exception occurred:
[dochtml] 
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py", line 197, in _run_module_as_main
[dochtml]     return _run_code(code, main_globals, None,
[dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/runpy.py", line 87, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1813, in main
[dochtml]     builder()
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 809, in _wrapper
[dochtml]     self.write_auto_rest_file(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1104, in write_auto_rest_file
[dochtml]     title = self.get_module_docstring_title(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1065, in get_module_docstring_title
[dochtml]     __import__(module_name)
[dochtml]   File "/opt/sage/local/lib/python3.9/site-packages/sage/libs/giac/__init__.py", line 35, in <module>
[dochtml]     from .giac import giacsettings, libgiac
[dochtml]   File "sage/libs/giac/giac.pyx", line 2261, in init sage.libs.giac.giac (build/cythonized/sage/libs/giac/giac.cpp:168106)
[dochtml]   File "sage/libs/giac/giac.pyx", line 802, in sage.libs.giac.giac.GiacSetting.threads.__set__ (build/cythonized/sage/libs/giac/giac.cpp:11533)
[dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
[dochtml] RuntimeError
[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-libs] Error 1
[dochtml] make[5]: *** Waiting for unfinished jobs....
```



---

archive/issue_events_410142.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T17:50:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410142"
}
```



---

archive/issue_events_410143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T17:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410143"
}
```



---

archive/issue_events_410144.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410144"
}
```



---

archive/issue_events_410145.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410145"
}
```



---

archive/issue_events_410146.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-25T22:37:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "title_is": "cysignals, cvxopt fail to build in conda",
    "title_was": "pynac, cysignals, cvxopt fail to build in conda",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410146"
}
```



---

archive/issue_comments_519756.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\npynac issue will disappear with package removal in #32387",
    "created_at": "2021-09-25T22:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519756",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'>Comment 37:</a>
pynac issue will disappear with package removal in #32387



---

archive/issue_comments_519757.json:
```json
{
    "body": "Dependencies: **#32387**",
    "created_at": "2021-09-25T22:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519757",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#32387**



---

archive/issue_comments_519758.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nOutdated; in 9.5.beta8 (with #32113), the packages build OK.",
    "created_at": "2021-12-21T05:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519758",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'>Comment 38:</a>
Outdated; in 9.5.beta8 (with #32113), the packages build OK.



---

archive/issue_events_410147.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410147"
}
```



---

archive/issue_events_410148.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410148"
}
```



---

archive/issue_events_410149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T05:02:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410149"
}
```



---

archive/issue_comments_519759.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nReplying to [@videlec](#comment%3A33):\n> @isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation\n> \n> ```\n> [dochtml] Error in sys.excepthook:\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   File \"/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py\", line 493, in __init__\n> [dochtml]     context = TracebackException(\n> [dochtml]   [Previous line repeated 997 more times]\n> [dochtml] RecursionError: maximum recursion depth exceeded\n> [dochtml] \n> [dochtml] Original exception was:\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)\n> [dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object\n> [dochtml] \n> [dochtml] During handling of the above exception, another exception occurred:\n> [dochtml] \n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)\n> [dochtml]   File \"sage/libs/giac/giac.pyx\", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)\n> [dochtml] RuntimeError\n> ...\n> ```\n\nI've opened #33056 for this.",
    "created_at": "2021-12-21T05:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32087#issuecomment-519759",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'>Comment 39:</a>
Replying to [@videlec](#comment%3A33):
> @isuruf: with your branch, sage did build in conda. Thanks. Though I got into trouble when compiling the documentation
> 
> ```
> [dochtml] Error in sys.excepthook:
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   File "/home/vincent/miniconda3/envs/sage-build/lib/python3.9/traceback.py", line 493, in __init__
> [dochtml]     context = TracebackException(
> [dochtml]   [Previous line repeated 997 more times]
> [dochtml] RecursionError: maximum recursion depth exceeded
> [dochtml] 
> [dochtml] Original exception was:
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10510)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1323, in sage.libs.giac.giac.Pygen.cas_setup (build/cythonized/sage/libs/giac/giac.cpp:145936)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 902, in sage.libs.giac.giac.Pygen.__cinit__ (build/cythonized/sage/libs/giac/giac.cpp:140970)
> [dochtml] RecursionError: maximum recursion depth exceeded while calling a Python object
> [dochtml] 
> [dochtml] During handling of the above exception, another exception occurred:
> [dochtml] 
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1121, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143061)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 739, in sage.libs.giac.giac.GiacSetting.eval_level.__get__ (build/cythonized/sage/libs/giac/giac.cpp:10513)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1036, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:142492)
> [dochtml]   File "sage/libs/giac/giac.pyx", line 1125, in sage.libs.giac.giac.Pygen.eval (build/cythonized/sage/libs/giac/giac.cpp:143137)
> [dochtml] RuntimeError
> ...
> ```

I've opened #33056 for this.



---

archive/issue_events_410150.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2022-02-16T21:07:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410150"
}
```



---

archive/issue_events_410151.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2022-02-16T21:07:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410151"
}
```



---

archive/issue_events_410152.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-17T00:06:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410152"
}
```



---

archive/issue_events_410153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-17T00:06:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32087#event-410153"
}
```
