# Issue 32380: make NumberFieldFractionalIdeal inherit from Ideal_fractional

archive/issues_032143.json:
```json
{
    "body": "We have an `Ideal_fractional` parent class, but the most important type of fractional ideals in Sage (namely, for number fields) does not inherit from it. Let's change this, so that we can reliably distinguish fractional ideals from ideals.\n\n(I haven't found any other fractional ideals in Sage that are not already children of `Ideal_fractional`.)\n\nThis patch should result in absolutely no change in behaviour, except that `isinstance(I, Ideal_fractional)` now returns `True` when `I` is a `NumberFieldFractionalIdeal`.\n\nKeywords: number fields, fractional ideals\n\nBranch/Commit: 55cfe14c4c47db45f257be79c67ec28975307415\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Lorenz Panny\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32380\n\n",
    "closed_at": "2021-11-15T23:16:07Z",
    "created_at": "2021-08-15T09:44:07Z",
    "labels": [
        "component: number fields",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "make NumberFieldFractionalIdeal inherit from Ideal_fractional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32380",
    "user": "https://github.com/yyyyx4"
}
```
We have an `Ideal_fractional` parent class, but the most important type of fractional ideals in Sage (namely, for number fields) does not inherit from it. Let's change this, so that we can reliably distinguish fractional ideals from ideals.

(I haven't found any other fractional ideals in Sage that are not already children of `Ideal_fractional`.)

This patch should result in absolutely no change in behaviour, except that `isinstance(I, Ideal_fractional)` now returns `True` when `I` is a `NumberFieldFractionalIdeal`.

Keywords: number fields, fractional ideals

Branch/Commit: 55cfe14c4c47db45f257be79c67ec28975307415

Reviewer: Frédéric Chapoton

Author: Lorenz Panny

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32380





---

archive/issue_comments_644786.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-15T09:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644786",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_644787.json:
```json
{
    "body": "<a id='comment:2'></a>\nneeds a doctest",
    "created_at": "2021-08-15T15:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644787",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
needs a doctest



---

archive/issue_comments_644788.json:
```json
{
    "body": "Changing commit from \"aa898ad59aa104de61ea70a4419a49870edc379e\" to \"8039ce43a85aae80f543f0cfbaa97731f7252fe9\"",
    "created_at": "2021-08-15T16:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644788",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aa898ad59aa104de61ea70a4419a49870edc379e" to "8039ce43a85aae80f543f0cfbaa97731f7252fe9"



---

archive/issue_comments_644789.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[8039ce4](https://git.sagemath.org/sage.git/commit/?id=8039ce43a85aae80f543f0cfbaa97731f7252fe9)|`add doctest for #32380`|",
    "created_at": "2021-08-15T16:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[8039ce4](https://git.sagemath.org/sage.git/commit/?id=8039ce43a85aae80f543f0cfbaa97731f7252fe9)|`add doctest for #32380`|



---

archive/issue_comments_644790.json:
```json
{
    "body": "<a id='comment:4'></a>\nDone.",
    "created_at": "2021-08-15T16:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644790",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:4'></a>
Done.



---

archive/issue_comments_644791.json:
```json
{
    "body": "<a id='comment:5'></a>\nok",
    "created_at": "2021-09-03T15:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644791",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
ok



---

archive/issue_comments_644792.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-03T15:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644792",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_644793.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2021-09-03T15:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644793",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_644794.json:
```json
{
    "body": "<a id='comment:6'></a>\nMerge conflict",
    "created_at": "2021-10-14T22:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644794",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
Merge conflict



---

archive/issue_comments_644795.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-10-14T22:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644795",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_644796.json:
```json
{
    "body": "Changing commit from \"8039ce43a85aae80f543f0cfbaa97731f7252fe9\" to \"65805c52b6cf889c8a659a9c5dc49ff846d8c784\"",
    "created_at": "2021-10-15T02:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8039ce43a85aae80f543f0cfbaa97731f7252fe9" to "65805c52b6cf889c8a659a9c5dc49ff846d8c784"



---

archive/issue_comments_644797.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|\n|[65805c5](https://git.sagemath.org/sage.git/commit/?id=65805c52b6cf889c8a659a9c5dc49ff846d8c784)|`Merge tag '9.5.beta3' into public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional`|",
    "created_at": "2021-10-15T02:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
|[65805c5](https://git.sagemath.org/sage.git/commit/?id=65805c52b6cf889c8a659a9c5dc49ff846d8c784)|`Merge tag '9.5.beta3' into public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional`|



---

archive/issue_comments_644798.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks, fixed.",
    "created_at": "2021-10-15T02:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644798",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:8'></a>
Thanks, fixed.



---

archive/issue_comments_644799.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-15T02:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644799",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_644800.json:
```json
{
    "body": "<a id='comment:9'></a>\nOne (seems trivial) failing doctest according to the patchbot:\n\n```\nsage -t --long --random-seed=43805222569518434108329399959452339425 src/sage/rings/polynomial/polynomial_element_generic.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/polynomial_element_generic.py\", line 783, in sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_sparse.quo_rem\nFailed example:\n    f.quo_rem(g)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ArithmeticError: Division non exact (consider coercing to polynomials over the fraction field)\nGot:\n    (-y^5 + 2*y^2, y^3 - 2*x^2*y^2 - y)\n**********************************************************************\n```\nSo some functionality is apparently changed for something that did not work before but now gives a result. Seems like a good thing.",
    "created_at": "2021-11-03T08:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644800",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
One (seems trivial) failing doctest according to the patchbot:

```
sage -t --long --random-seed=43805222569518434108329399959452339425 src/sage/rings/polynomial/polynomial_element_generic.py
**********************************************************************
File "src/sage/rings/polynomial/polynomial_element_generic.py", line 783, in sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_sparse.quo_rem
Failed example:
    f.quo_rem(g)
Expected:
    Traceback (most recent call last):
    ...
    ArithmeticError: Division non exact (consider coercing to polynomials over the fraction field)
Got:
    (-y^5 + 2*y^2, y^3 - 2*x^2*y^2 - y)
**********************************************************************
```
So some functionality is apparently changed for something that did not work before but now gives a result. Seems like a good thing.



---

archive/issue_comments_644801.json:
```json
{
    "body": "<a id='comment:10'></a>\nSome quick testing suggests the failure is random (unrelated to this ticket, in any case). I've opened #32816 for this.",
    "created_at": "2021-11-03T08:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644801",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:10'></a>
Some quick testing suggests the failure is random (unrelated to this ticket, in any case). I've opened #32816 for this.



---

archive/issue_comments_644802.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|\n|[55cfe14](https://git.sagemath.org/sage.git/commit/?id=55cfe14c4c47db45f257be79c67ec28975307415)|`Merge tag '9.5.beta5' into public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional`|",
    "created_at": "2021-11-03T08:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
|[55cfe14](https://git.sagemath.org/sage.git/commit/?id=55cfe14c4c47db45f257be79c67ec28975307415)|`Merge tag '9.5.beta5' into public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional`|



---

archive/issue_comments_644803.json:
```json
{
    "body": "Changing commit from \"65805c52b6cf889c8a659a9c5dc49ff846d8c784\" to \"55cfe14c4c47db45f257be79c67ec28975307415\"",
    "created_at": "2021-11-03T08:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "65805c52b6cf889c8a659a9c5dc49ff846d8c784" to "55cfe14c4c47db45f257be79c67ec28975307415"



---

archive/issue_comments_644804.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-03T08:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644804",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_644805.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks. Then I am setting this back to a positive review.",
    "created_at": "2021-11-03T08:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644805",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Thanks. Then I am setting this back to a positive review.



---

archive/issue_comments_644806.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you!",
    "created_at": "2021-11-03T09:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644806",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:13'></a>
Thank you!



---

archive/issue_comments_644807.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-11-15T23:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644807",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_644808.json:
```json
{
    "body": "Changing branch from \"public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional\" to \"55cfe14c4c47db45f257be79c67ec28975307415\"",
    "created_at": "2021-11-15T23:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32380#issuecomment-644808",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/make_NumberFieldFractionalIdeal_inherit_from_Ideal_fractional" to "55cfe14c4c47db45f257be79c67ec28975307415"



---

archive/issue_events_085925.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-15T23:16:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32380",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32380#event-85925"
}
```
