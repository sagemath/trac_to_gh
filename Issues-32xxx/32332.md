# Issue 32332: using argparse in sage-runtests script

archive/issues_032095.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\ninstead of the deprecated optparse\n\nThis was rather simple, but needs testing.\n\nalso full flake8 cleanup for the modified file\n\nCC:  @tscrim @slel @kliem @antonio-rojas\n\nComponent: **scripts**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch: **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32332_\n\n",
    "closed_at": "2021-10-09T11:09:57Z",
    "created_at": "2021-08-04T07:54:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "using argparse in sage-runtests script",
    "type": "issue",
    "updated_at": "2021-10-12T10:48:08Z",
    "url": "https://github.com/sagemath/sage/issues/32332",
    "user": "https://github.com/fchapoton"
}
```
<div id="comment:0"></div>

instead of the deprecated optparse

This was rather simple, but needs testing.

also full flake8 cleanup for the modified file

CC:  @tscrim @slel @kliem @antonio-rojas

Component: **scripts**

Author: **Frédéric Chapoton**

Branch: **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/32332_





---

archive/issue_events_442746.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-08-04T07:54:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442746"
}
```



---

archive/issue_events_442747.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-08-04T07:54:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "0000b0",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442747"
}
```



---

archive/issue_events_442748.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-08-04T07:54:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442748"
}
```



---

archive/issue_events_442749.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-08-04T07:54:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442749"
}
```



---

archive/issue_comments_520833.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n instead of the deprecated optparse\n+\n+This was rather simple, but needs testing.\n+\n+also full flake8 cleanup for the modified file\n``````\n",
    "created_at": "2021-08-04T07:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520833",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 instead of the deprecated optparse
+
+This was rather simple, but needs testing.
+
+also full flake8 cleanup for the modified file
``````




---

archive/issue_events_442750.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-08-04T07:56:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442750"
}
```



---

archive/issue_comments_520834.json:
```json
{
    "body": "Branch: **[u/chapoton/32332](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32332)**",
    "created_at": "2021-08-04T07:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520834",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/32332](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32332)**



---

archive/issue_comments_520835.json:
```json
{
    "body": "Commit: **[`32d10d1`](https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8)**",
    "created_at": "2021-08-04T07:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520835",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`32d10d1`](https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8)**



---

archive/issue_comments_520836.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8\"><code>32d10d1</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>\n",
    "created_at": "2021-08-04T07:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520836",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8"><code>32d10d1</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>




---

archive/issue_comments_520837.json:
```json
{
    "body": "Changed commit from **[`32d10d1`](https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8)** to **[`8c92fc4`](https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344)**",
    "created_at": "2021-08-04T08:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520837",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`32d10d1`](https://github.com/sagemath/sagetrac-mirror/commit/32d10d1ab718b78cbcfefaf8f976a8f72865bdc8)** to **[`8c92fc4`](https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344)**



---

archive/issue_comments_520838.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344\"><code>8c92fc4</code></a></td><td><code>simplify GCAction in sage-runtests</code></td></tr></table>\n",
    "created_at": "2021-08-04T08:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520838",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344"><code>8c92fc4</code></a></td><td><code>simplify GCAction in sage-runtests</code></td></tr></table>




---

archive/issue_comments_520839.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-08-05T05:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520839",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_520840.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nLGTM as far as I can tell. A good ticket for the initial 9.5.beta0 release.",
    "created_at": "2021-08-05T05:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520840",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

LGTM as far as I can tell. A good ticket for the initial 9.5.beta0 release.



---

archive/issue_events_442751.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-08-05T05:06:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442751"
}
```



---

archive/issue_events_442752.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-08-05T05:06:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442752"
}
```



---

archive/issue_events_442753.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-08-05T05:06:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442753"
}
```



---

archive/issue_events_442754.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-08-05T05:06:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442754"
}
```



---

archive/issue_events_442755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-05T22:44:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442755"
}
```



---

archive/issue_events_442756.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-05T22:44:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442756"
}
```



---

archive/issue_comments_520841.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n\n```\nmake ptestlong\n[...]\nmake[1]: Leaving directory '/home/release/Sage'\n./sage -t -p --all --long --logfile=logs/ptestlong.log\nusage: sage -t [options] filenames\nsage-runtests: error: argument -p/--nthreads: expected one argument\nmake: *** [Makefile:201: ptestlong] Error 2\n```",
    "created_at": "2021-09-05T22:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520841",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>


```
make ptestlong
[...]
make[1]: Leaving directory '/home/release/Sage'
./sage -t -p --all --long --logfile=logs/ptestlong.log
usage: sage -t [options] filenames
sage-runtests: error: argument -p/--nthreads: expected one argument
make: *** [Makefile:201: ptestlong] Error 2
```



---

archive/issue_comments_520842.json:
```json
{
    "body": "Changed commit from **[`8c92fc4`](https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344)** to **[`1d3dfc3`](https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7)**",
    "created_at": "2021-09-06T07:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520842",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c92fc4`](https://github.com/sagemath/sagetrac-mirror/commit/8c92fc443c0f2c816564d804cb3ac893d5889344)** to **[`1d3dfc3`](https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7)**



---

archive/issue_comments_520843.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d148cbd7febda0df3b0336934d0703303cb4ccb\"><code>0d148cb</code></a></td><td><code>Merge branch 'u/chapoton/32332' in 9.5.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7\"><code>1d3dfc3</code></a></td><td><code>fix for argparse when using -p</code></td></tr></table>\n",
    "created_at": "2021-09-06T07:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520843",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d148cbd7febda0df3b0336934d0703303cb4ccb"><code>0d148cb</code></a></td><td><code>Merge branch 'u/chapoton/32332' in 9.5.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7"><code>1d3dfc3</code></a></td><td><code>fix for argparse when using -p</code></td></tr></table>




---

archive/issue_comments_520844.json:
```json
{
    "body": "Changed commit from **[`1d3dfc3`](https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7)** to **[`4aa95ed`](https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5)**",
    "created_at": "2021-09-06T07:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520844",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d3dfc3`](https://github.com/sagemath/sagetrac-mirror/commit/1d3dfc38b6f75c0783763e6aa52d568f359678e7)** to **[`4aa95ed`](https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5)**



---

archive/issue_comments_520845.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5\"><code>4aa95ed</code></a></td><td><code>another fix for the logfile</code></td></tr></table>\n",
    "created_at": "2021-09-06T07:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520845",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5"><code>4aa95ed</code></a></td><td><code>another fix for the logfile</code></td></tr></table>




---

archive/issue_comments_520846.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nok, should be better now. I fixed the behaviour of -p and --logfile.",
    "created_at": "2021-09-06T07:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520846",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

ok, should be better now. I fixed the behaviour of -p and --logfile.



---

archive/issue_events_442757.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-06T07:18:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442757"
}
```



---

archive/issue_events_442758.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-06T07:18:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442758"
}
```



---

archive/issue_comments_520847.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484\"><code>8a458aa</code></a></td><td><code>better handling for -p</code></td></tr></table>\n",
    "created_at": "2021-09-06T07:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520847",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484"><code>8a458aa</code></a></td><td><code>better handling for -p</code></td></tr></table>




---

archive/issue_comments_520848.json:
```json
{
    "body": "Changed commit from **[`4aa95ed`](https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5)** to **[`8a458aa`](https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484)**",
    "created_at": "2021-09-06T07:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520848",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4aa95ed`](https://github.com/sagemath/sagetrac-mirror/commit/4aa95ed2d10329290772e1b7e67354153e5c43e5)** to **[`8a458aa`](https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484)**



---

archive/issue_comments_520849.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThere are still issues:\n\n```\n$ ./sage -btp src/sage/combinat/partition.py\n...\nsage-runtests: error: argument -p/--nthreads: invalid int value: 'src/sage/combinat/partition.py'\n$ ./sage -tp src/sage/combinat/partition.py \nusage: sage -t [options] filenames\nsage-runtests: error: argument -p/--nthreads: invalid int value: 'src/sage/combinat/partition.py'\n```\nI at least use these shortcuts a lot, but I guess that is not a strict requirement to have them fixed. It would just mean a lot of relearning for me.\n\nThese both continue to not work (so they don't need to be fixed)\n\n```\n$ ./sage -btp8 src/sage/combinat/partition.py \nError: unknown option: -btp8\n$ ./sage -tp8 src/sage/combinat/partition.py \nError: unknown option: -tp8\n```\nbut this now works (before it didn't):\n\n```\n$ ./sage -t -p8 src/sage/combinat/partition.py\n```",
    "created_at": "2021-09-10T02:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520849",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

There are still issues:

```
$ ./sage -btp src/sage/combinat/partition.py
...
sage-runtests: error: argument -p/--nthreads: invalid int value: 'src/sage/combinat/partition.py'
$ ./sage -tp src/sage/combinat/partition.py 
usage: sage -t [options] filenames
sage-runtests: error: argument -p/--nthreads: invalid int value: 'src/sage/combinat/partition.py'
```
I at least use these shortcuts a lot, but I guess that is not a strict requirement to have them fixed. It would just mean a lot of relearning for me.

These both continue to not work (so they don't need to be fixed)

```
$ ./sage -btp8 src/sage/combinat/partition.py 
Error: unknown option: -btp8
$ ./sage -tp8 src/sage/combinat/partition.py 
Error: unknown option: -tp8
```
but this now works (before it didn't):

```
$ ./sage -t -p8 src/sage/combinat/partition.py
```



---

archive/issue_events_442759.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-10T02:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442759"
}
```



---

archive/issue_events_442760.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-10T02:58:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442760"
}
```



---

archive/issue_comments_520850.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis may be difficult to fix. What's the point of tp alone, given that the default value for nthreads is 1 ? This amounts to say, parallel, but not parallel.\n\nNote that\n`./sage -tp 8 src/sage/combinat/partition.py`\nworks fine, and same for btp.\n\nThere is an inherent ambiguity in the options\n\n```\n-p filename.py\n```\nthat argparse cannot really handle, if I understand correctly.",
    "created_at": "2021-09-10T11:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520850",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

This may be difficult to fix. What's the point of tp alone, given that the default value for nthreads is 1 ? This amounts to say, parallel, but not parallel.

Note that
`./sage -tp 8 src/sage/combinat/partition.py`
works fine, and same for btp.

There is an inherent ambiguity in the options

```
-p filename.py
```
that argparse cannot really handle, if I understand correctly.



---

archive/issue_comments_520851.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006\"><code>b6f8162</code></a></td><td><code>little tweak in argparse for runtests</code></td></tr></table>\n",
    "created_at": "2021-09-10T12:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006"><code>b6f8162</code></a></td><td><code>little tweak in argparse for runtests</code></td></tr></table>




---

archive/issue_comments_520852.json:
```json
{
    "body": "Changed commit from **[`8a458aa`](https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484)** to **[`b6f8162`](https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006)**",
    "created_at": "2021-09-10T12:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520852",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8a458aa`](https://github.com/sagemath/sagetrac-mirror/commit/8a458aa5b9513400251dd58858b199cdbb83f484)** to **[`b6f8162`](https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006)**



---

archive/issue_comments_520853.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@fchapoton](#comment%3A11):\n> This may be difficult to fix. What's the point of tp alone, given that the default value for nthreads is 1 ? This amounts to say, parallel, but not parallel.\n\nFrom what I can tell, it does run it in parallel.",
    "created_at": "2021-09-10T21:34:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520853",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@fchapoton](#comment%3A11):
> This may be difficult to fix. What's the point of tp alone, given that the default value for nthreads is 1 ? This amounts to say, parallel, but not parallel.

From what I can tell, it does run it in parallel.



---

archive/issue_comments_520854.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13\"><code>0c55640</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>\n",
    "created_at": "2021-09-11T07:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520854",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13"><code>0c55640</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>




---

archive/issue_comments_520855.json:
```json
{
    "body": "Changed commit from **[`b6f8162`](https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006)** to **[`0c55640`](https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13)**",
    "created_at": "2021-09-11T07:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520855",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6f8162`](https://github.com/sagemath/sagetrac-mirror/commit/b6f8162e7a78df3f7479c3305a243981587f7006)** to **[`0c55640`](https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13)**



---

archive/issue_comments_520856.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNow the behaviour is\n\n```\nno option -p   =>   nthreads = 1\n-p             =>   nthreads = 0\n-p k           =>   nthreads = k\n```\n\nBut I still do not see how to fix your concern.",
    "created_at": "2021-09-11T07:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520856",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

Now the behaviour is

```
no option -p   =>   nthreads = 1
-p             =>   nthreads = 0
-p k           =>   nthreads = k
```

But I still do not see how to fix your concern.



---

archive/issue_comments_520857.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905\"><code>3a93583</code></a></td><td><code>better handling short and warn-long</code></td></tr></table>\n",
    "created_at": "2021-09-11T07:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905"><code>3a93583</code></a></td><td><code>better handling short and warn-long</code></td></tr></table>




---

archive/issue_comments_520858.json:
```json
{
    "body": "Changed commit from **[`0c55640`](https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13)** to **[`3a93583`](https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905)**",
    "created_at": "2021-09-11T07:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c55640`](https://github.com/sagemath/sagetrac-mirror/commit/0c556408ff92446a738f13b421b21f997e3e5f13)** to **[`3a93583`](https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905)**



---

archive/issue_comments_520859.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI would see a solution to avoid breaking `sage -tp file.py`\n\nbut at the prize of breaking\n\n`sage -tp 4 [...]`\n\nThe idea is to always add the argument 0 to `-p` when using `-tp` or `-btp`.\n\nSo what would you prefer ?\n\nPeople would still be able to use\n\n```\nsage -t -p 4 [...]\n```",
    "created_at": "2021-09-11T08:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520859",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

I would see a solution to avoid breaking `sage -tp file.py`

but at the prize of breaking

`sage -tp 4 [...]`

The idea is to always add the argument 0 to `-p` when using `-tp` or `-btp`.

So what would you prefer ?

People would still be able to use

```
sage -t -p 4 [...]
```



---

archive/issue_comments_520860.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWe have the same issue with other options\n\n```\n~/sage$ sage -t --short src/sage/combinat/partition.py \neither use --new or --all or some filenames\n~/sage$ sage -t --warn-long src/sage/combinat/partition.py \neither use --new or --all or some filenames\n```\nA workaround seems to be\n\n```\n~/sage$ sage -t --warn-long -- src/sage/combinat/partition.py \n```",
    "created_at": "2021-09-11T09:43:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520860",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

We have the same issue with other options

```
~/sage$ sage -t --short src/sage/combinat/partition.py 
either use --new or --all or some filenames
~/sage$ sage -t --warn-long src/sage/combinat/partition.py 
either use --new or --all or some filenames
```
A workaround seems to be

```
~/sage$ sage -t --warn-long -- src/sage/combinat/partition.py 
```



---

archive/issue_comments_520861.json:
```json
{
    "body": "Changed commit from **[`3a93583`](https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905)** to **[`7328505`](https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e)**",
    "created_at": "2021-09-11T10:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a93583`](https://github.com/sagemath/sagetrac-mirror/commit/3a9358337afbf13e28ae769308cf0e992b571905)** to **[`7328505`](https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e)**



---

archive/issue_comments_520862.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e\"><code>7328505</code></a></td><td><code>adding custom treatment</code></td></tr></table>\n",
    "created_at": "2021-09-11T10:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e"><code>7328505</code></a></td><td><code>adding custom treatment</code></td></tr></table>




---

archive/issue_comments_520863.json:
```json
{
    "body": "Changed commit from **[`7328505`](https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e)** to **[`c3dc88c`](https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188)**",
    "created_at": "2021-09-11T10:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520863",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7328505`](https://github.com/sagemath/sagetrac-mirror/commit/7328505eff557af40d5a9f1fb32ac5d1a8c9d24e)** to **[`c3dc88c`](https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188)**



---

archive/issue_comments_520864.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188\"><code>c3dc88c</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>\n",
    "created_at": "2021-09-11T10:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520864",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188"><code>c3dc88c</code></a></td><td><code>use argparse in sage-runtests</code></td></tr></table>




---

archive/issue_events_442761.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-11T10:37:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442761"
}
```



---

archive/issue_events_442762.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-11T10:37:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442762"
}
```



---

archive/issue_comments_520865.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI think I have found a solution. Maybe not perfect.",
    "created_at": "2021-09-11T10:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520865",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

I think I have found a solution. Maybe not perfect.



---

archive/issue_comments_520866.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIf we have to make a choice, I personally would prefer `-tp` and `-btp` to work, but that is because it is what I most frequently use. Does your solution keep both input formats?\n\nWhat about `.pyx` (and probably `.pxd` and `.pxi`) files? I think those also need to be added to the list.",
    "created_at": "2021-09-11T10:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520866",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

If we have to make a choice, I personally would prefer `-tp` and `-btp` to work, but that is because it is what I most frequently use. Does your solution keep both input formats?

What about `.pyx` (and probably `.pxd` and `.pxi`) files? I think those also need to be added to the list.



---

archive/issue_comments_520867.json:
```json
{
    "body": "Changed commit from **[`c3dc88c`](https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188)** to **[`dd18675`](https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b)**",
    "created_at": "2021-09-11T11:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3dc88c`](https://github.com/sagemath/sagetrac-mirror/commit/c3dc88c9d9974339b58f9a983fbd8a53904d9188)** to **[`dd18675`](https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b)**



---

archive/issue_comments_520868.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b\"><code>dd18675</code></a></td><td><code>fix</code></td></tr></table>\n",
    "created_at": "2021-09-11T11:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b"><code>dd18675</code></a></td><td><code>fix</code></td></tr></table>




---

archive/issue_comments_520869.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for the suggestion about pyx. I have added that.\n\nI think everything works smoothly now.\n\nWhat would still fail would be something like\n\n```\nsage -tp src/sage/combinat/\n```\nwhich can easily be obtained as\n\n```\nsage -tp 0 src/sage/combinat\n```",
    "created_at": "2021-09-11T11:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520869",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for the suggestion about pyx. I have added that.

I think everything works smoothly now.

What would still fail would be something like

```
sage -tp src/sage/combinat/
```
which can easily be obtained as

```
sage -tp 0 src/sage/combinat
```



---

archive/issue_comments_520870.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@fchapoton](#comment%3A24):\n> What would still fail would be something like\n> \n> ```\n> sage -tp src/sage/combinat/\n> ```\n> which can easily be obtained as\n> \n> ```\n> sage -tp 0 src/sage/combinat\n> ```\n\n-1 on making such incompatible changes, it will be annoying to developers",
    "created_at": "2021-09-11T21:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520870",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@fchapoton](#comment%3A24):
> What would still fail would be something like
> 
> ```
> sage -tp src/sage/combinat/
> ```
> which can easily be obtained as
> 
> ```
> sage -tp 0 src/sage/combinat
> ```

-1 on making such incompatible changes, it will be annoying to developers



---

archive/issue_comments_520871.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d\"><code>d057ee2</code></a></td><td><code>another try for argparse of runtests</code></td></tr></table>\n",
    "created_at": "2021-09-12T07:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520871",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d"><code>d057ee2</code></a></td><td><code>another try for argparse of runtests</code></td></tr></table>




---

archive/issue_comments_520872.json:
```json
{
    "body": "Changed commit from **[`dd18675`](https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b)** to **[`d057ee2`](https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d)**",
    "created_at": "2021-09-12T07:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dd18675`](https://github.com/sagemath/sagetrac-mirror/commit/dd18675b44c31d387d96caff5646046af9fdde4b)** to **[`d057ee2`](https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d)**



---

archive/issue_comments_520873.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHere is a new proposal. I tried to keep things simple.",
    "created_at": "2021-09-12T07:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520873",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

Here is a new proposal. I tried to keep things simple.



---

archive/issue_comments_520874.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThank you. We are getting close.\n\n```\n$ ./sage -tp --warn-long src/sage/rings/function_field/function_field.py\n```\nworks, but this does not (although it used to)\n\n```\n$ ./sage -tp src/sage/rings/function_field/function_field.py --warn-long\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2021-09-13-14-49-55-02c83a90.\nGit branch: u/chapoton/32332\nUsing --optional=bliss,build,debian,dochtml,dot2tex,e_antic,libnauty,ninja_build,normaliz,pip,sage,sage_spkg\nTraceback (most recent call last):\n  File \"/home/uqtscrim/sage-build/src/bin/sage-runtests\", line 149, in <module>\n    err = DC.run()\n  File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1204, in run\n    self.expand_files_into_sources()\n  File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 788, in expand_files_into_sources\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 788, in <listcomp>\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/sources.py\", line 527, in __init__\n    raise ValueError(\"unknown file extension %r\"%ext)\nValueError: unknown file extension ''\n```\nAlthough I could very easily argue that this is not supported behavior, so it might be more luck than anything it worked before. This is a very minor point and not something I would withhold a positive review for.",
    "created_at": "2021-09-13T04:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520874",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

Thank you. We are getting close.

```
$ ./sage -tp --warn-long src/sage/rings/function_field/function_field.py
```
works, but this does not (although it used to)

```
$ ./sage -tp src/sage/rings/function_field/function_field.py --warn-long
too few successful tests, not using stored timings
Running doctests with ID 2021-09-13-14-49-55-02c83a90.
Git branch: u/chapoton/32332
Using --optional=bliss,build,debian,dochtml,dot2tex,e_antic,libnauty,ninja_build,normaliz,pip,sage,sage_spkg
Traceback (most recent call last):
  File "/home/uqtscrim/sage-build/src/bin/sage-runtests", line 149, in <module>
    err = DC.run()
  File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1204, in run
    self.expand_files_into_sources()
  File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 788, in expand_files_into_sources
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 788, in <listcomp>
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/sources.py", line 527, in __init__
    raise ValueError("unknown file extension %r"%ext)
ValueError: unknown file extension ''
```
Although I could very easily argue that this is not supported behavior, so it might be more luck than anything it worked before. This is a very minor point and not something I would withhold a positive review for.



---

archive/issue_comments_520875.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI do not think that we should allow options after the filenames.\n\nThe usage is \"options then filenames\", and that's all.",
    "created_at": "2021-09-13T07:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520875",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

I do not think that we should allow options after the filenames.

The usage is "options then filenames", and that's all.



---

archive/issue_comments_520876.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66083fd7e500980ecef13e5d691784772acc6a09\"><code>66083fd</code></a></td><td><code>Merge branch 'u/chapoton/32332' in 9.5.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc\"><code>04e40ff</code></a></td><td><code>fine tuning short and warn-long options</code></td></tr></table>\n",
    "created_at": "2021-09-14T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520876",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66083fd7e500980ecef13e5d691784772acc6a09"><code>66083fd</code></a></td><td><code>Merge branch 'u/chapoton/32332' in 9.5.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc"><code>04e40ff</code></a></td><td><code>fine tuning short and warn-long options</code></td></tr></table>




---

archive/issue_comments_520877.json:
```json
{
    "body": "Changed commit from **[`d057ee2`](https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d)** to **[`04e40ff`](https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc)**",
    "created_at": "2021-09-14T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d057ee2`](https://github.com/sagemath/sagetrac-mirror/commit/d057ee2d3263e4aca9f4a26a763364a616ed2a0d)** to **[`04e40ff`](https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc)**



---

archive/issue_comments_520878.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOkay, then let's not (unofficially) support that input format anymore.\n\nShouldn't `--short` take floating points? Granted, I find it unlikely that someone will want to do something in `321.0123` seconds, but perhaps for one file they don't want whole seconds? The output for `--short` has also become a lot more verbose. (Not that that is a bad thing, it is just a change in behavior.)\n\nAnyways, this should hopefully be the last of it. The sooner we can get this merged and out for people to test it more in the wild, the better we can pick up other changes in behavior (that people care about).",
    "created_at": "2021-09-15T01:45:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520878",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

Okay, then let's not (unofficially) support that input format anymore.

Shouldn't `--short` take floating points? Granted, I find it unlikely that someone will want to do something in `321.0123` seconds, but perhaps for one file they don't want whole seconds? The output for `--short` has also become a lot more verbose. (Not that that is a bad thing, it is just a change in behavior.)

Anyways, this should hopefully be the last of it. The sooner we can get this merged and out for people to test it more in the wild, the better we can pick up other changes in behavior (that people care about).



---

archive/issue_comments_520879.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58\"><code>84471a3</code></a></td><td><code>fix for --short</code></td></tr></table>\n",
    "created_at": "2021-09-15T07:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520879",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58"><code>84471a3</code></a></td><td><code>fix for --short</code></td></tr></table>




---

archive/issue_comments_520880.json:
```json
{
    "body": "Changed commit from **[`04e40ff`](https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc)** to **[`84471a3`](https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58)**",
    "created_at": "2021-09-15T07:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520880",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04e40ff`](https://github.com/sagemath/sagetrac-mirror/commit/04e40ffba2f944c8369cc48f3b5aeef6fc409bfc)** to **[`84471a3`](https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58)**



---

archive/issue_comments_520881.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nok, short was indeed broken by the change of default value. Repaired now.\n\nShort was taking integers and will still take integers. I would prefer not to change that.",
    "created_at": "2021-09-15T07:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520881",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:33" align="right">comment:33</div>

ok, short was indeed broken by the change of default value. Repaired now.

Short was taking integers and will still take integers. I would prefer not to change that.



---

archive/issue_events_442763.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-15T09:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442763"
}
```



---

archive/issue_events_442764.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-15T09:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442764"
}
```



---

archive/issue_comments_520882.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOkay, thank you. Let's get this tested by the rest of the developers.",
    "created_at": "2021-09-15T09:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520882",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Okay, thank you. Let's get this tested by the rest of the developers.



---

archive/issue_events_442765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-19T22:39:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442765"
}
```



---

archive/issue_events_442766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-19T22:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442766"
}
```



---

archive/issue_comments_520883.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n\n```\nsage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/test.py  # 21 doctests failed\nsage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/forker.py  # 11 doctests failed\nsage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/control.py  # Bad exit: 1 after testing finished\n```",
    "created_at": "2021-09-19T22:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520883",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">comment:35</div>


```
sage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/test.py  # 21 doctests failed
sage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/forker.py  # 11 doctests failed
sage -t --long --warn-long 44.9 --random-seed=0 src/sage/doctest/control.py  # Bad exit: 1 after testing finished
```



---

archive/issue_comments_520884.json:
```json
{
    "body": "Changed commit from **[`84471a3`](https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58)** to **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**",
    "created_at": "2021-09-20T08:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84471a3`](https://github.com/sagemath/sagetrac-mirror/commit/84471a3d11c198c23fd59ced9815069181bb5f58)** to **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**



---

archive/issue_comments_520885.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83\"><code>c87148b</code></a></td><td><code>fixing logfile and warn-long handling</code></td></tr></table>\n",
    "created_at": "2021-09-20T08:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83"><code>c87148b</code></a></td><td><code>fixing logfile and warn-long handling</code></td></tr></table>




---

archive/issue_comments_520886.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\ndamn. I have fixed a few things again.",
    "created_at": "2021-09-20T08:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520886",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:37" align="right">comment:37</div>

damn. I have fixed a few things again.



---

archive/issue_events_442767.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-20T08:36:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442767"
}
```



---

archive/issue_events_442768.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-09-20T08:36:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442768"
}
```



---

archive/issue_events_442769.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-21T08:17:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442769"
}
```



---

archive/issue_events_442770.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-21T08:17:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442770"
}
```



---

archive/issue_comments_520887.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nGreen bot and passes locally.",
    "created_at": "2021-09-21T08:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520887",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

Green bot and passes locally.



---

archive/issue_events_442771.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-09T11:09:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442771"
}
```



---

archive/issue_events_442772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9d8d7b2cec5c85287abd3e5f50716583d2e56dde",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-09T11:09:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32332#event-442772"
}
```



---

archive/issue_comments_520888.json:
```json
{
    "body": "Changed branch from **[u/chapoton/32332](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32332)** to **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**",
    "created_at": "2021-10-09T11:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520888",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/32332](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32332)** to **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)**



---

archive/issue_comments_520889.json:
```json
{
    "body": "Changed commit from **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)** to none",
    "created_at": "2021-10-12T10:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520889",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[`c87148b`](https://github.com/sagemath/sagetrac-mirror/commit/c87148b86fe0de11be68a0f01917e45b705e4c83)** to none



---

archive/issue_comments_520890.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThis breaks running `sage -t file --optional=foo` for me, regardless of the optional tags I specify\n\n```\n> sage -t /usr/lib/python3.9/site-packages/sage/sets/integer_range.py --optional=sage\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2021-10-12-12-41-27-6d41dc7c.\nUsing --optional=dochtml,pip,sage\nTraceback (most recent call last):\n  File \"/usr/bin/sage-runtests\", line 151, in <module>\n    err = DC.run()\n  File \"/usr/lib/python3.9/site-packages/sage/doctest/control.py\", line 1210, in run\n    self.expand_files_into_sources()\n  File \"/usr/lib/python3.9/site-packages/sage/doctest/control.py\", line 794, in expand_files_into_sources\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/usr/lib/python3.9/site-packages/sage/doctest/control.py\", line 794, in <listcomp>\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/usr/lib/python3.9/site-packages/sage/doctest/sources.py\", line 527, in __init__\n    raise ValueError(\"unknown file extension %r\"%ext)\nValueError: unknown file extension ''\n```",
    "created_at": "2021-10-12T10:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520890",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:40" align="right">comment:40</div>

This breaks running `sage -t file --optional=foo` for me, regardless of the optional tags I specify

```
> sage -t /usr/lib/python3.9/site-packages/sage/sets/integer_range.py --optional=sage
too many failed tests, not using stored timings
Running doctests with ID 2021-10-12-12-41-27-6d41dc7c.
Using --optional=dochtml,pip,sage
Traceback (most recent call last):
  File "/usr/bin/sage-runtests", line 151, in <module>
    err = DC.run()
  File "/usr/lib/python3.9/site-packages/sage/doctest/control.py", line 1210, in run
    self.expand_files_into_sources()
  File "/usr/lib/python3.9/site-packages/sage/doctest/control.py", line 794, in expand_files_into_sources
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/usr/lib/python3.9/site-packages/sage/doctest/control.py", line 794, in <listcomp>
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/usr/lib/python3.9/site-packages/sage/doctest/sources.py", line 527, in __init__
    raise ValueError("unknown file extension %r"%ext)
ValueError: unknown file extension ''
```



---

archive/issue_comments_520891.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nNevermind, I see this is intentional (re comment 29)",
    "created_at": "2021-10-12T10:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32332#issuecomment-520891",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:42" align="right">comment:42</div>

Nevermind, I see this is intentional (re comment 29)
