# Issue 32366: Implementation of the q-bracket

archive/issues_032129.json:
```json
{
    "body": "This ticket's goal is to implement the q-bracket and related functions in order to verify the Bloch-Okounkov theorem. A reference about the subject is the paper by Zagier: \n\n*Partitions, quasimodular forms and the Bloch-Okounkov theorem*, \nhttps://people.mpim-bonn.mpg.de/zagier/files/doi/10.1007/s11139-015-9730-8/bloch-okounkov.pdf\n\nThis ticket is part of the GSoC 2021 project about quasimodular forms, see the task ticket #31560.\n\nThis code will be marked as *experimental*, but a more formal, non-experimental, implementation shall be done in the future (using shifted symmetric polynomials).\n\nThe code of this ticket is located in the following new directory:\n\n`sage/combinat/shifted_symmetric_functions/`\n\nAssignee: @DavidAyotte\n\nCC:  @videlec @slel\n\nKeywords: quasimodular forms, Bloch-Okounkov\n\nAuthor: David Ayotte\n\nBranch: u/gh-DavidAyotte/block_okounkov\n\nStatus: new\n\nDependencies: #32357\n\nCommit: c3e71364ea2cab45a144663d6e5ff7ff0a7c63b4\n\nIssue created by migration from https://trac.sagemath.org/ticket/32366\n\n",
    "created_at": "2021-08-11T13:41:33Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Implementation of the q-bracket",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32366",
    "user": "https://github.com/DavidAyotte"
}
```
This ticket's goal is to implement the q-bracket and related functions in order to verify the Bloch-Okounkov theorem. A reference about the subject is the paper by Zagier: 

*Partitions, quasimodular forms and the Bloch-Okounkov theorem*, 
https://people.mpim-bonn.mpg.de/zagier/files/doi/10.1007/s11139-015-9730-8/bloch-okounkov.pdf

This ticket is part of the GSoC 2021 project about quasimodular forms, see the task ticket #31560.

This code will be marked as *experimental*, but a more formal, non-experimental, implementation shall be done in the future (using shifted symmetric polynomials).

The code of this ticket is located in the following new directory:

`sage/combinat/shifted_symmetric_functions/`

Assignee: @DavidAyotte

CC:  @videlec @slel

Keywords: quasimodular forms, Bloch-Okounkov

Author: David Ayotte

Branch: u/gh-DavidAyotte/block_okounkov

Status: new

Dependencies: #32357

Commit: c3e71364ea2cab45a144663d6e5ff7ff0a7c63b4

Issue created by migration from https://trac.sagemath.org/ticket/32366





---

archive/issue_comments_489803.json:
```json
{
    "body": "Set assignee to @DavidAyotte.",
    "created_at": "2021-08-11T13:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489803",
    "user": "https://github.com/DavidAyotte"
}
```

Set assignee to @DavidAyotte.



---

archive/issue_comments_489804.json:
```json
{
    "body": "Changing keywords from \"\" to \"quasi modular forms block okounkov\".",
    "created_at": "2021-08-11T13:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489804",
    "user": "https://github.com/DavidAyotte"
}
```

Changing keywords from "" to "quasi modular forms block okounkov".



---

archive/issue_comments_489805.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2021-08-11T13:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489805",
    "user": "https://github.com/DavidAyotte"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_489806.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket's goal is to implement the q-bracket and related functions in order to verify the Block-Okounkov theorem. A reference about the subject is the paper by Zagier: \n+This ticket's goal is to implement the q-bracket and related functions in order to verify the Bloch-Okounkov theorem. A reference about the subject is the paper by Zagier: \n \n *Partitions, quasimodular forms and the Bloch-Okounkov theorem*, \n https://people.mpim-bonn.mpg.de/zagier/files/doi/10.1007/s11139-015-9730-8/bloch-okounkov.pdf\n```\n",
    "created_at": "2021-08-14T18:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489806",
    "user": "https://github.com/slel"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket's goal is to implement the q-bracket and related functions in order to verify the Block-Okounkov theorem. A reference about the subject is the paper by Zagier: 
+This ticket's goal is to implement the q-bracket and related functions in order to verify the Bloch-Okounkov theorem. A reference about the subject is the paper by Zagier: 
 
 *Partitions, quasimodular forms and the Bloch-Okounkov theorem*, 
 https://people.mpim-bonn.mpg.de/zagier/files/doi/10.1007/s11139-015-9730-8/bloch-okounkov.pdf
```




---

archive/issue_comments_489807.json:
```json
{
    "body": "<a id='comment:3'></a>Careful, it's Spencer Bloch, not Block.\n\n- http://www.math.uchicago.edu/~bloch/\n \n---\nLast 10 new commits:",
    "created_at": "2021-08-14T18:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489807",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>Careful, it's Spencer Bloch, not Block.

- http://www.math.uchicago.edu/~bloch/
 
---
Last 10 new commits:



---

archive/issue_comments_489808.json:
```json
{
    "body": "Changing keywords from \"quasi modular forms block okounkov\" to \"quasimodular forms, Bloch-Okounkov\".",
    "created_at": "2021-08-14T18:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489808",
    "user": "https://github.com/slel"
}
```

Changing keywords from "quasi modular forms block okounkov" to "quasimodular forms, Bloch-Okounkov".



---

archive/issue_comments_489809.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-09-16T20:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_489810.json:
```json
{
    "body": "<a id='comment:5'></a>To make the commit history clear, I must mention that I added the `q_bracket` function in this commit:\n\n[https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c](https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c)\n\n(Everything outside `sage/combinat/shifted_symmetric_functions/` does not belong to this ticket).\n\nUnfortunately, I don't think the code is correct because the output seems wrong when I test it for a shifted symmetric polynomial different than a generator of the ring of shifted symmetric polynomial.\n\nFor examples, this is correct:\n\n```\nsage: from sage.combinat.shifted_symmetric_functions.q_bracket import *\nsage: P.<Q1, Q2, Q3, Q4> = QQ[]\nsage: q_bracket(Q2)\n-1/24*P\nsage: q_bracket(Q4)\n1/1152*P^2 + 1/2880*Q\n```\n(by correct, I mean that the computations are the same as the ones given in the Appendix of the paper by Zagier)\n\nHowever, this is not correct:\n\n```\nsage: q_bracket(Q2^2)\n1/576*P^2 + 1/1440*Q\n```\nBy the table of Zagier, it should be equal to `-1/576*P^2 + 1/288*Q`. I would be really grateful if someone could help me figure out why my code return the wrong answer! Thanks!",
    "created_at": "2021-09-16T21:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489810",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:5'></a>To make the commit history clear, I must mention that I added the `q_bracket` function in this commit:

[https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c](https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c)

(Everything outside `sage/combinat/shifted_symmetric_functions/` does not belong to this ticket).

Unfortunately, I don't think the code is correct because the output seems wrong when I test it for a shifted symmetric polynomial different than a generator of the ring of shifted symmetric polynomial.

For examples, this is correct:

```
sage: from sage.combinat.shifted_symmetric_functions.q_bracket import *
sage: P.<Q1, Q2, Q3, Q4> = QQ[]
sage: q_bracket(Q2)
-1/24*P
sage: q_bracket(Q4)
1/1152*P^2 + 1/2880*Q
```
(by correct, I mean that the computations are the same as the ones given in the Appendix of the paper by Zagier)

However, this is not correct:

```
sage: q_bracket(Q2^2)
1/576*P^2 + 1/1440*Q
```
By the table of Zagier, it should be equal to `-1/576*P^2 + 1/288*Q`. I would be really grateful if someone could help me figure out why my code return the wrong answer! Thanks!



---

archive/issue_comments_489811.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-27T15:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32366#issuecomment-489811",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_085891.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32366#event-85891"
}
```



---

archive/issue_events_085892.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32366#event-85892"
}
```



---

archive/issue_events_085893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32366#event-85893"
}
```



---

archive/issue_events_085894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32366#event-85894"
}
```



---

archive/issue_events_085895.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32366",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32366#event-85895"
}
```
