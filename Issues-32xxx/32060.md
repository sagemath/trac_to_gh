# Issue 32060: configure: Change defaults to --with-system-gcc=force, defer error exits after system package info is shown

archive/issues_031823.json:
```json
{
    "assignees": [],
    "body": "This will make it an error if no suitable system `gcc` is found.\n\nIt can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils are lacking.  \n\n(from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)\n\n\nCurrently, `force` leads to immediate exit, without printing the system package advice. We also change this.  This is a useful improvement in its own right.\n\n\nDiscussion of other packages to which the same logic should be applied is beyond the scope of the present ticket.\n\n\n\nCC:  @dimpase @seblabbe @slel @kliem @orlitzky @vbraun\n\nBranch/Commit: **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32060_\n\n",
    "closed_at": "2021-09-25T23:18:13Z",
    "created_at": "2021-06-25T16:34:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "configure: Change defaults to --with-system-gcc=force, defer error exits after system package info is shown",
    "type": "issue",
    "updated_at": "2021-09-25T23:18:13Z",
    "url": "https://github.com/sagemath/sage/issues/32060",
    "user": "https://github.com/mkoeppe"
}
```
This will make it an error if no suitable system `gcc` is found.

It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils are lacking.  

(from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)


Currently, `force` leads to immediate exit, without printing the system package advice. We also change this.  This is a useful improvement in its own right.


Discussion of other packages to which the same logic should be applied is beyond the scope of the present ticket.



CC:  @dimpase @seblabbe @slel @kliem @orlitzky @vbraun

Branch/Commit: **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/32060_





---

archive/issue_events_442202.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-25T16:34:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442202"
}
```



---

archive/issue_events_442203.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-25T16:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442203"
}
```



---

archive/issue_events_442204.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-25T16:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442204"
}
```



---

archive/issue_events_442205.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-25T16:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442205"
}
```



---

archive/issue_comments_516336.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)\n \n \n+\n+Currently, `force` leads to immediate exit, without printing the system package advice. This needs to be changed.\n``````\n",
    "created_at": "2021-06-25T16:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516336",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)
 
 
+
+Currently, `force` leads to immediate exit, without printing the system package advice. This needs to be changed.
``````




---

archive/issue_comments_516337.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n#30863 has a related proposal.",
    "created_at": "2021-06-25T18:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516337",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

#30863 has a related proposal.



---

archive/issue_comments_516338.json:
```json
{
    "body": "Branch: **[u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force)**",
    "created_at": "2021-06-26T02:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516338",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force)**



---

archive/issue_comments_516339.json:
```json
{
    "body": "Commit: **[458447b](https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e)**",
    "created_at": "2021-06-26T02:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516339",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[458447b](https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e)**



---

archive/issue_comments_516340.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere's a beginning. `./bootstrap && ./configure --with-system-libsemigroups=force --with-system-pari_galpol=force` on homebrew (which does not have these packages) now leads to:\n\n```\nconfigure:\n\n    notice: the following SPKGs did not find equivalent system packages:\n\n          _recommended coxeter3 gp2c igraph libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_cpan_polymake_prereq perl_mongodb\n        \n[...irrelevant system package advice...]\n\nconfigure: error: \n\n    Given --with-system-libsemigroups=force, but no system package could be used.\n    That's an error.  Please install the indicated package to continue.\n    (To override this error, use ./configure --without-system-libsemigroups)\n    Given --with-system-pari_galpol=force, but no system package could be used.\n    That's an error.  Please install the indicated package to continue.\n    (To override this error, use ./configure --without-system-pari_galpol)\n```\n\nFeel free to make refinements to the wording by pushing to this ticket...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e\">458447b</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr></table>\n",
    "created_at": "2021-06-26T02:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516340",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Here's a beginning. `./bootstrap && ./configure --with-system-libsemigroups=force --with-system-pari_galpol=force` on homebrew (which does not have these packages) now leads to:

```
configure:

    notice: the following SPKGs did not find equivalent system packages:

          _recommended coxeter3 gp2c igraph libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_cpan_polymake_prereq perl_mongodb
        
[...irrelevant system package advice...]

configure: error: 

    Given --with-system-libsemigroups=force, but no system package could be used.
    That's an error.  Please install the indicated package to continue.
    (To override this error, use ./configure --without-system-libsemigroups)
    Given --with-system-pari_galpol=force, but no system package could be used.
    That's an error.  Please install the indicated package to continue.
    (To override this error, use ./configure --without-system-pari_galpol)
```

Feel free to make refinements to the wording by pushing to this ticket...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e">458447b</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr></table>




---

archive/issue_comments_516341.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f\">87c929c</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr></table>\n",
    "created_at": "2021-06-26T02:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516341",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f">87c929c</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr></table>




---

archive/issue_comments_516342.json:
```json
{
    "body": "Changed commit from **[458447b](https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e)** to **[87c929c](https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f)**",
    "created_at": "2021-06-26T02:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516342",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[458447b](https://github.com/sagemath/sagetrac-mirror/commit/458447b15f1a0a617c3215c83eeaa996843e1f6e)** to **[87c929c](https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f)**



---

archive/issue_comments_516343.json:
```json
{
    "body": "Changed commit from **[87c929c](https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f)** to **[7eb3999](https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05)**",
    "created_at": "2021-06-26T02:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516343",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[87c929c](https://github.com/sagemath/sagetrac-mirror/commit/87c929c41cade47b9188fe3a15be3d75fa5fa58f)** to **[7eb3999](https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05)**



---

archive/issue_comments_516344.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05\">7eb3999</a></td><td><code>configure.ac, sage_spkg_configure.m4: Set default --with-system-gcc=force, --with-system-python3=force</code></td></tr></table>\n",
    "created_at": "2021-06-26T02:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516344",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05">7eb3999</a></td><td><code>configure.ac, sage_spkg_configure.m4: Set default --with-system-gcc=force, --with-system-python3=force</code></td></tr></table>




---

archive/issue_comments_516345.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-06-26T02:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516345",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_516346.json:
```json
{
    "body": "Dependencies: **#31786**",
    "created_at": "2021-06-26T02:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516346",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31786**



---

archive/issue_events_442206.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-26T02:28:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442206"
}
```



---

archive/issue_comments_516347.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe discussion that led to the ticket has ended, but the ticket with the solution still needs review.",
    "created_at": "2021-06-28T16:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516347",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

The discussion that led to the ticket has ended, but the ticket with the solution still needs review.



---

archive/issue_events_442207.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-29T06:38:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442207"
}
```



---

archive/issue_events_442208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-29T06:38:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442208"
}
```



---

archive/issue_comments_516348.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nNeed to override these changed defaults in tox.ini, or all `-minimal` builds will fail",
    "created_at": "2021-06-29T06:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516348",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Need to override these changed defaults in tox.ini, or all `-minimal` builds will fail



---

archive/issue_comments_516349.json:
```json
{
    "body": "Changed commit from **[7eb3999](https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05)** to **[312d5ad](https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5)**",
    "created_at": "2021-06-29T07:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516349",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7eb3999](https://github.com/sagemath/sagetrac-mirror/commit/7eb3999cf5dd483af53a598000d6ab5d703f2c05)** to **[312d5ad](https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5)**



---

archive/issue_comments_516350.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5\">312d5ad</a></td><td><code>tox.ini: Override new configure --with-system-python3=force default from #32060</code></td></tr></table>\n",
    "created_at": "2021-06-29T07:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516350",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5">312d5ad</a></td><td><code>tox.ini: Override new configure --with-system-python3=force default from #32060</code></td></tr></table>




---

archive/issue_events_442209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-29T07:14:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442209"
}
```



---

archive/issue_events_442210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-29T07:14:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442210"
}
```



---

archive/issue_comments_516351.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nStill needs review",
    "created_at": "2021-07-26T17:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516351",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Still needs review



---

archive/issue_events_442211.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442211"
}
```



---

archive/issue_events_442212.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442212"
}
```



---

archive/issue_comments_516352.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLet's get this in please.",
    "created_at": "2021-09-15T00:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516352",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Let's get this in please.



---

archive/issue_comments_516353.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWhy `--with-system-python3=force`? I can understand gcc, since building gcc can take a long time and maybe can be a little finicky, but why Python?",
    "created_at": "2021-09-15T16:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516353",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Why `--with-system-python3=force`? I can understand gcc, since building gcc can take a long time and maybe can be a little finicky, but why Python?



---

archive/issue_comments_516354.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI don't have a strong preference on the default for `python3`. I can undo this change",
    "created_at": "2021-09-15T16:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516354",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

I don't have a strong preference on the default for `python3`. I can undo this change



---

archive/issue_comments_516355.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI don't think I have a strong preference either, I was asking for the reason behind the proposed change.",
    "created_at": "2021-09-15T16:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516355",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

I don't think I have a strong preference either, I was asking for the reason behind the proposed change.



---

archive/issue_comments_516356.json:
```json
{
    "body": "Changed commit from **[312d5ad](https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5)** to **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**",
    "created_at": "2021-09-15T17:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[312d5ad](https://github.com/sagemath/sagetrac-mirror/commit/312d5adfd14c8c6eb0427cc80a09b73b40d9d3b5)** to **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**



---

archive/issue_comments_516357.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5668636db832763a5b326463021522430529eae\">b566863</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48cdeb484462aad084a3dec5bc54a0afc6caadfe\">48cdeb4</a></td><td><code>configure.ac, sage_spkg_configure.m4: Set default --with-system-gcc=force, --with-system-python3=force</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e92b98212e3f4c6ef9cc52114eea4017e07c8c8\">8e92b98</a></td><td><code>tox.ini: Override new configure --with-system-python3=force default from #32060</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6\">19efe21</a></td><td><code>configure.ac: Revert the change to the default for --with-system-python3</code></td></tr></table>\n",
    "created_at": "2021-09-15T17:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516357",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5668636db832763a5b326463021522430529eae">b566863</a></td><td><code>m4/sage_spkg_{collect,configure}.m4: Defer error message from --with-system-SPKG=force to the end</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48cdeb484462aad084a3dec5bc54a0afc6caadfe">48cdeb4</a></td><td><code>configure.ac, sage_spkg_configure.m4: Set default --with-system-gcc=force, --with-system-python3=force</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e92b98212e3f4c6ef9cc52114eea4017e07c8c8">8e92b98</a></td><td><code>tox.ini: Override new configure --with-system-python3=force default from #32060</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6">19efe21</a></td><td><code>configure.ac: Revert the change to the default for --with-system-python3</code></td></tr></table>




---

archive/issue_comments_516358.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nLet's do the more limited change.",
    "created_at": "2021-09-15T17:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516358",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Let's do the more limited change.



---

archive/issue_comments_516359.json:
```json
{
    "body": "Changed dependencies from **#31786** to none",
    "created_at": "2021-09-15T17:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516359",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31786** to none



---

archive/issue_events_442213.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-15T17:37:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "title_is": "configure: Change defaults to --with-system-gcc=force, defer error exits after system package info is shown",
    "title_was": "configure: Change defaults to --with-system-gcc=force, --with-system-python3=force",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442213"
}
```



---

archive/issue_comments_516360.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jhpalmieri](#comment:18):\n> I don't think I have a strong preference either, I was asking for the reason behind the proposed change.\n\nthe proposal was to minimize unnecessary tricky package building on a typical system.\nTypically Python3.7 or newer is available.",
    "created_at": "2021-09-16T08:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516360",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jhpalmieri](#comment:18):
> I don't think I have a strong preference either, I was asking for the reason behind the proposed change.

the proposal was to minimize unnecessary tricky package building on a typical system.
Typically Python3.7 or newer is available.



---

archive/issue_comments_516361.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIs the tricky part (for building Python) making sure that ssl is available?",
    "created_at": "2021-09-16T15:58:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516361",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

Is the tricky part (for building Python) making sure that ssl is available?



---

archive/issue_comments_516362.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jhpalmieri](#comment:24):\n> Is the tricky part (for building Python) making sure that ssl is available?\n\nthat's one of tricky parts for sure, in particular on macOS.",
    "created_at": "2021-09-16T16:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516362",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jhpalmieri](#comment:24):
> Is the tricky part (for building Python) making sure that ssl is available?

that's one of tricky parts for sure, in particular on macOS.



---

archive/issue_comments_516363.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nNo, the ssl problems are all gone since we made the openssl package (3.0) standard.\n\nI don't think there are build problems with python3 on any of our platforms -- with the exception of builds on top of conda on Linux (which is currently broken in multiple ways)\n\nI think the point was just that some (new) users are surprised that we build our own python. But in contrast to the gcc build, which rarely works at all, building python3 is very robust. So I don't think this warrants the change of defaults.",
    "created_at": "2021-09-16T16:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516363",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

No, the ssl problems are all gone since we made the openssl package (3.0) standard.

I don't think there are build problems with python3 on any of our platforms -- with the exception of builds on top of conda on Linux (which is currently broken in multiple ways)

I think the point was just that some (new) users are surprised that we build our own python. But in contrast to the gcc build, which rarely works at all, building python3 is very robust. So I don't think this warrants the change of defaults.



---

archive/issue_comments_516364.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@mkoeppe](#comment:26):\n> No, the ssl problems are all gone since we made the openssl package (3.0) standard.\n> \n> I don't think there are build problems with python3 on any of our platforms -- with the exception of builds on top of conda on Linux (which is currently broken in multiple ways)\n> \n> I think the point was just that some (new) users are surprised that we build our own python. But in contrast to the gcc build, which rarely works at all, building python3 is very robust. So I don't think this warrants the change of defaults.\n> \n\nWhat's the point of building Python, and other packages which are just a click away, such as GMP? To accelerate global warming?",
    "created_at": "2021-09-16T17:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516364",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@mkoeppe](#comment:26):
> No, the ssl problems are all gone since we made the openssl package (3.0) standard.
> 
> I don't think there are build problems with python3 on any of our platforms -- with the exception of builds on top of conda on Linux (which is currently broken in multiple ways)
> 
> I think the point was just that some (new) users are surprised that we build our own python. But in contrast to the gcc build, which rarely works at all, building python3 is very robust. So I don't think this warrants the change of defaults.
> 

What's the point of building Python, and other packages which are just a click away, such as GMP? To accelerate global warming?



---

archive/issue_comments_516365.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@dimpase](#comment:27):\n> \n> What's the point of building Python, and other packages which are just a click away, such as GMP? To accelerate global warming?\n\nIt also ensures that downloading the source release wastes a few hundred megabytes of bandwidth and then disk space.\n\nWe should eliminate the gcc and python SPKGs entirely. They serve no purpose at all, and require constant maintenance, support, and physical resources. In the rare case where gcc or python3 are not available from a package manager or binary download, using conda or nix is preferable to using the sage spkg.",
    "created_at": "2021-09-16T17:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516365",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@dimpase](#comment:27):
> 
> What's the point of building Python, and other packages which are just a click away, such as GMP? To accelerate global warming?

It also ensures that downloading the source release wastes a few hundred megabytes of bandwidth and then disk space.

We should eliminate the gcc and python SPKGs entirely. They serve no purpose at all, and require constant maintenance, support, and physical resources. In the rare case where gcc or python3 are not available from a package manager or binary download, using conda or nix is preferable to using the sage spkg.



---

archive/issue_comments_516366.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLet's kindly not use this technical ticket to rehash this fruitless discussion.",
    "created_at": "2021-09-16T17:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516366",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Let's kindly not use this technical ticket to rehash this fruitless discussion.



---

archive/issue_comments_516367.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNeeds review.",
    "created_at": "2021-09-16T17:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516367",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Needs review.



---

archive/issue_comments_516368.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWell, someone asked \"what's the point?\" The benefits of deleting the SPKGs are clear. The benefits of changing them to \"force\" by default are less clear, since we will still be responsible for shipping and maintaining SPKGs that will never get used. (Using `--without-system-gcc` is always a mistake, and likewise for python3.)\n\nNevertheless, setting them to \"force\" can be seen as step towards removal, so I'm not against it. I just don't think it solves the issue that prompted the mailing list thread -- that we are involved in this mess in the first place. All of the core packages that are available everywhere and are well-supported (for multiple versions) in sage should be relegated to _prereq or _bootstrap.",
    "created_at": "2021-09-16T18:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516368",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">comment:31</div>

Well, someone asked "what's the point?" The benefits of deleting the SPKGs are clear. The benefits of changing them to "force" by default are less clear, since we will still be responsible for shipping and maintaining SPKGs that will never get used. (Using `--without-system-gcc` is always a mistake, and likewise for python3.)

Nevertheless, setting them to "force" can be seen as step towards removal, so I'm not against it. I just don't think it solves the issue that prompted the mailing list thread -- that we are involved in this mess in the first place. All of the core packages that are available everywhere and are well-supported (for multiple versions) in sage should be relegated to _prereq or _bootstrap.



---

archive/issue_comments_516369.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@mkoeppe](#comment:29):\n> Let's kindly not use this technical ticket to rehash this fruitless discussion. \n\ntechnically there is no need to keep gcc and python3 packages in Sage.",
    "created_at": "2021-09-16T19:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516369",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@mkoeppe](#comment:29):
> Let's kindly not use this technical ticket to rehash this fruitless discussion. 

technically there is no need to keep gcc and python3 packages in Sage.



---

archive/issue_comments_516370.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nthat's just, like, your opinion, man",
    "created_at": "2021-09-16T19:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516370",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

that's just, like, your opinion, man



---

archive/issue_comments_516371.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFirst, the help string in `./configure` still says that \"yes\" is the default for `--with-system-gcc`. Second, if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying\n\n```\nconfigure: error: no acceptable C compiler found in $PATH\nSee `config.log' for more details\n```\nThird, should this also test for `gfortran`, or should we continue to build that without complaining? It would be nice on a platform like OS X to just quit with an error if `gfortran` is missing *and* the user is using homebrew, because there is no excuse, but maybe install it if there is no obvious package management system in place. That may be beyond the scope of this ticket.\n\nThe Sage philosophy used to be: treat developers and users as the same, and basically assume everyone was building from scratch. Have we moved enough away from this now that we can treat developers (by which I just mean people who compile Sage themselves) differently?",
    "created_at": "2021-09-16T21:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516371",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

First, the help string in `./configure` still says that "yes" is the default for `--with-system-gcc`. Second, if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying

```
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details
```
Third, should this also test for `gfortran`, or should we continue to build that without complaining? It would be nice on a platform like OS X to just quit with an error if `gfortran` is missing *and* the user is using homebrew, because there is no excuse, but maybe install it if there is no obvious package management system in place. That may be beyond the scope of this ticket.

The Sage philosophy used to be: treat developers and users as the same, and basically assume everyone was building from scratch. Have we moved enough away from this now that we can treat developers (by which I just mean people who compile Sage themselves) differently?



---

archive/issue_comments_516372.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jhpalmieri](#comment:34):\n> if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying\n> \n> ```\n> configure: error: no acceptable C compiler found in $PATH\n> See `config.log' for more details\n> ```\n\nIt's hard to avoid error exits from standard autoconf macros. Ticket #29531 sketches a solution, but it's tricky, and I consider it out of scope.",
    "created_at": "2021-09-16T21:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516372",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jhpalmieri](#comment:34):
> if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying
> 
> ```
> configure: error: no acceptable C compiler found in $PATH
> See `config.log' for more details
> ```

It's hard to avoid error exits from standard autoconf macros. Ticket #29531 sketches a solution, but it's tricky, and I consider it out of scope.



---

archive/issue_comments_516373.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n\n```\n> should this also test for `gfortran`\n```\nNo, I don't think so because building `gfortran` is robust when a suitable `gcc` is present. We know this because we test it on GH Actions: All the `-minimal` configuration do not have system `gfortran`.",
    "created_at": "2021-09-16T21:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516373",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>


```
> should this also test for `gfortran`
```
No, I don't think so because building `gfortran` is robust when a suitable `gcc` is present. We know this because we test it on GH Actions: All the `-minimal` configuration do not have system `gfortran`.



---

archive/issue_comments_516374.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThat makes it hard (at least for me) to test. The changes make sense, but I'm not that familiar with `m4` syntax. To see it in action, I guess I need a system with a `gcc` but one that's broken (too old for example).\n\nIf someone else can review, that would be great. If you think it's right to do the same with Python3, please open another ticket.",
    "created_at": "2021-09-16T21:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516374",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:37" align="right">comment:37</div>

That makes it hard (at least for me) to test. The changes make sense, but I'm not that familiar with `m4` syntax. To see it in action, I guess I need a system with a `gcc` but one that's broken (too old for example).

If someone else can review, that would be great. If you think it's right to do the same with Python3, please open another ticket.



---

archive/issue_comments_516375.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,13 @@\n-This will make it an error if no suitable system gcc / python3 is found.\n+This will make it an error if no suitable system `gcc` is found.\n \n-It can be overridden by the user by `--without-system-gcc`, `--without-system-python3`\n+It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils.  \n \n (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)\n \n \n+Currently, `force` leads to immediate exit, without printing the system package advice. We also change this.  This is a useful improvement in its own right.\n \n-Currently, `force` leads to immediate exit, without printing the system package advice. This needs to be changed.\n+\n+Discussion of other packages to which the same logic should be applied is beyond the scope of the present ticket.\n+\n+\n``````\n",
    "created_at": "2021-09-16T21:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516375",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,13 @@
-This will make it an error if no suitable system gcc / python3 is found.
+This will make it an error if no suitable system `gcc` is found.
 
-It can be overridden by the user by `--without-system-gcc`, `--without-system-python3`
+It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils.  
 
 (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)
 
 
+Currently, `force` leads to immediate exit, without printing the system package advice. We also change this.  This is a useful improvement in its own right.
 
-Currently, `force` leads to immediate exit, without printing the system package advice. This needs to be changed.
+
+Discussion of other packages to which the same logic should be applied is beyond the scope of the present ticket.
+
+
``````




---

archive/issue_comments_516376.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This will make it an error if no suitable system `gcc` is found.\n \n-It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils.  \n+It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils are lacking.  \n \n (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)\n \n``````\n",
    "created_at": "2021-09-16T21:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516376",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This will make it an error if no suitable system `gcc` is found.
 
-It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils.  
+It can be overridden by the user by `--without-system-gcc`. Our `gcc` stands out from other SPKGs because building it often fails, for example because suitable binutils are lacking.  
 
 (from https://groups.google.com/g/sage-devel/c/cSsAsPuVnxg/m/fDBOSaYZBgAJ)
 
``````




---

archive/issue_comments_516377.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@mkoeppe](#comment:33):\n> that's just, like, your opinion, man\n\nthat's, like, the reviewer's job, no?",
    "created_at": "2021-09-16T22:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516377",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@mkoeppe](#comment:33):
> that's just, like, your opinion, man

that's, like, the reviewer's job, no?



---

archive/issue_comments_516378.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIt's out of scope for this ticket, so, no.",
    "created_at": "2021-09-16T22:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516378",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

It's out of scope for this ticket, so, no.



---

archive/issue_comments_516379.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jhpalmieri](#comment:34):\n> First, the help string in `./configure` still says that \"yes\" is the default for `--with-system-gcc`. Second, if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying\n> \n> ```\n> configure: error: no acceptable C compiler found in $PATH\n> See `config.log' for more details\n> ```\n> Third, should this also test for `gfortran`, or should we continue to build that without complaining? It would be nice on a platform like OS X to just quit with an error if `gfortran` is missing *and* the user is using homebrew, because there is no excuse, but maybe install it if there is no obvious package management system in place. That may be beyond the scope of this ticket.\n\n\nthere are standalone distributions of gfortran for macOS by the gfortran maintainer of the Homebrew package.\nTo me this offers a way to entirety remove gcc and gfortran spkgs from Sage.\n\nhttps://github.com/fxcoudert/gfortran-for-macOS\n\n\n> \n> The Sage philosophy used to be: treat developers and users as the same, and basically assume everyone was building from scratch. Have we moved enough away from this now that we can treat developers (by which I just mean people who compile Sage themselves) differently?\n\nit is hard to tell, but I guess the majority of users is using prebuilt Sage.",
    "created_at": "2021-09-16T23:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516379",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jhpalmieri](#comment:34):
> First, the help string in `./configure` still says that "yes" is the default for `--with-system-gcc`. Second, if I don't have `gcc` at all, then `./configure` stops before it prints the message, saying
> 
> ```
> configure: error: no acceptable C compiler found in $PATH
> See `config.log' for more details
> ```
> Third, should this also test for `gfortran`, or should we continue to build that without complaining? It would be nice on a platform like OS X to just quit with an error if `gfortran` is missing *and* the user is using homebrew, because there is no excuse, but maybe install it if there is no obvious package management system in place. That may be beyond the scope of this ticket.


there are standalone distributions of gfortran for macOS by the gfortran maintainer of the Homebrew package.
To me this offers a way to entirety remove gcc and gfortran spkgs from Sage.

https://github.com/fxcoudert/gfortran-for-macOS


> 
> The Sage philosophy used to be: treat developers and users as the same, and basically assume everyone was building from scratch. Have we moved enough away from this now that we can treat developers (by which I just mean people who compile Sage themselves) differently?

it is hard to tell, but I guess the majority of users is using prebuilt Sage.



---

archive/issue_comments_516380.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI've put a broken `gcc` ahead of everything in my PATH, and tried `./configure`\n\nIs this how the error regarding missing gcc should look like?\n\n```\nchecking for gcc... gcc\nchecking whether the C compiler works... no\nconfigure: error: in `/mnt/opt/Sage/sage-dev':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\n```\n\nand there is nothing beyond that in `config.log`, no `more details`, really, except `configure: exit 77` as the last line.",
    "created_at": "2021-09-17T10:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516380",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

I've put a broken `gcc` ahead of everything in my PATH, and tried `./configure`

Is this how the error regarding missing gcc should look like?

```
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/mnt/opt/Sage/sage-dev':
configure: error: C compiler cannot create executables
See `config.log' for more details
```

and there is nothing beyond that in `config.log`, no `more details`, really, except `configure: exit 77` as the last line.



---

archive/issue_comments_516381.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nthe trick in the previous comment does not work for python3, as `./configure` still manages to divine\n`/usr/bin/python3` somehow.",
    "created_at": "2021-09-17T10:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516381",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

the trick in the previous comment does not work for python3, as `./configure` still manages to divine
`/usr/bin/python3` somehow.



---

archive/issue_comments_516382.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2021-09-17T10:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516382",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_442214.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-09-17T10:46:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442214"
}
```



---

archive/issue_events_442215.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-09-17T10:46:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442215"
}
```



---

archive/issue_comments_516383.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nanyhow, this looks good enough.",
    "created_at": "2021-09-17T10:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516383",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

anyhow, this looks good enough.



---

archive/issue_comments_516384.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@dimpase](#comment:43):\n> I've put a broken `gcc` ahead of everything in my PATH, and tried `./configure`\n> \n> Is this how the error regarding missing gcc should look like?\n> \n> ```\n> checking for gcc... gcc\n> checking whether the C compiler works... no\n> configure: error: in `/mnt/opt/Sage/sage-dev':\n> configure: error: C compiler cannot create executables\n> See `config.log' for more details\n> ```\n> \n> and there is nothing beyond that in `config.log`, no `more details`, really, except `configure: exit 77` as the last line.\n\nNo, see [comment:35](#comment:35). This ticket is not about early exits caused by standard autoconf macros. It is about our spkg-configure which uses more specific tests regarding the compiler.\n\nIf you want to test this properly, use a working but out-of-version-range compiler such as gcc 4.4 or 12.dev.",
    "created_at": "2021-09-17T16:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516384",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@dimpase](#comment:43):
> I've put a broken `gcc` ahead of everything in my PATH, and tried `./configure`
> 
> Is this how the error regarding missing gcc should look like?
> 
> ```
> checking for gcc... gcc
> checking whether the C compiler works... no
> configure: error: in `/mnt/opt/Sage/sage-dev':
> configure: error: C compiler cannot create executables
> See `config.log' for more details
> ```
> 
> and there is nothing beyond that in `config.log`, no `more details`, really, except `configure: exit 77` as the last line.

No, see [comment:35](#comment:35). This ticket is not about early exits caused by standard autoconf macros. It is about our spkg-configure which uses more specific tests regarding the compiler.

If you want to test this properly, use a working but out-of-version-range compiler such as gcc 4.4 or 12.dev.



---

archive/issue_comments_516385.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@dimpase](#comment:45):\n> looks good enough.\n\nThanks. If nothing else, the deferred error exits are valuable.",
    "created_at": "2021-09-17T16:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516385",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@dimpase](#comment:45):
> looks good enough.

Thanks. If nothing else, the deferred error exits are valuable.



---

archive/issue_comments_516386.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI have opened #32532 to remove gcc and gfortran spkgs.",
    "created_at": "2021-09-18T14:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516386",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

I have opened #32532 to remove gcc and gfortran spkgs.



---

archive/issue_comments_516387.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThanks. Good to have a central place for this recurring topic.",
    "created_at": "2021-09-18T16:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516387",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Thanks. Good to have a central place for this recurring topic.



---

archive/issue_comments_516388.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jhpalmieri](#comment:34):\n> the help string in `./configure` still says that \"yes\" is the default for `--with-system-gcc`. \n\nLet's fix this in #32533 - one of several possible improvements for `./configure --help`",
    "created_at": "2021-09-18T18:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516388",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jhpalmieri](#comment:34):
> the help string in `./configure` still says that "yes" is the default for `--with-system-gcc`. 

Let's fix this in #32533 - one of several possible improvements for `./configure --help`



---

archive/issue_comments_516389.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force)** to **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**",
    "created_at": "2021-09-25T23:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32060#issuecomment-516389",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/configure__change_defaults_to___with_system_gcc_force____with_system_python3_force)** to **[19efe21](https://github.com/sagemath/sagetrac-mirror/commit/19efe2125c0903a52011390850122651ceccb6d6)**



---

archive/issue_events_442216.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-25T23:18:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442216"
}
```



---

archive/issue_events_442217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7a9e47523f4598da52978065d0327a0e896edbff",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-09-25T23:18:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32060",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32060#event-442217"
}
```
