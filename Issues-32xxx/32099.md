# Issue 32099: Update database_knotinfo to 2021.9.1, fix file-cache location

archive/issues_031862.json:
```json
{
    "assignees": [],
    "body": "In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.\n\nFurthermore, an upgrade to the official release 2021.9.1 of the PyPI-package will be done.\n\nThe original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release was [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n\nThis upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).\n\n\n\nDepends on #32344\n\nCC:  @kiwifb\n\nComponent: **packages: optional**\n\nKeywords: **database knotinfo**\n\nAuthor: **Sebastian Oehms**\n\nBranch/Commit: **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32099_\n\n",
    "closed_at": "2021-09-15T22:06:11Z",
    "created_at": "2021-07-02T16:26:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20databases"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update database_knotinfo to 2021.9.1, fix file-cache location",
    "type": "issue",
    "updated_at": "2021-09-15T22:06:11Z",
    "url": "https://github.com/sagemath/sage/issues/32099",
    "user": "https://github.com/soehms"
}
```
In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.

Furthermore, an upgrade to the official release 2021.9.1 of the PyPI-package will be done.

The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release was [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).

This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).



Depends on #32344

CC:  @kiwifb

Component: **packages: optional**

Keywords: **database knotinfo**

Author: **Sebastian Oehms**

Branch/Commit: **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/32099_





---

archive/issue_events_439531.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:26:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439531"
}
```



---

archive/issue_events_439532.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:26:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439532"
}
```



---

archive/issue_events_439533.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:26:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439533"
}
```



---

archive/issue_events_439534.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:26:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20databases",
    "label_color": "0000ff",
    "label_name": "c: databases",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439534"
}
```



---

archive/issue_comments_516894.json:
```json
{
    "body": "Branch: **[u/soehms/knotinfo_update_32099](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo_update_32099)**",
    "created_at": "2021-07-02T16:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516894",
    "user": "https://github.com/soehms"
}
```

Branch: **[u/soehms/knotinfo_update_32099](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo_update_32099)**



---

archive/issue_comments_516895.json:
```json
{
    "body": "Commit: **[`514c714`](https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633)**",
    "created_at": "2021-07-02T16:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516895",
    "user": "https://github.com/soehms"
}
```

Commit: **[`514c714`](https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633)**



---

archive/issue_events_439535.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:34:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439535"
}
```



---

archive/issue_comments_516896.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633\"><code>514c714</code></a></td><td><code>32099: initial version</code></td></tr></table>\n",
    "created_at": "2021-07-02T16:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516896",
    "user": "https://github.com/soehms"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633"><code>514c714</code></a></td><td><code>32099: initial version</code></td></tr></table>




---

archive/issue_events_439536.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-02T16:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439536"
}
```



---

archive/issue_comments_516897.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't think the spkg-install should be in charge of clearing things in the user's .sage directory. This won't work in multi-user installations. This needs a better solution",
    "created_at": "2021-07-02T16:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516897",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't think the spkg-install should be in charge of clearing things in the user's .sage directory. This won't work in multi-user installations. This needs a better solution



---

archive/issue_comments_516898.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@mkoeppe](#comment%3A4):\n> I don't think the spkg-install should be in charge of clearing things in the user's .sage directory. This won't work in multi-user installations. This needs a better solution\n\nIndeed not. This was possibly overlooked as of non consequence on a multi-user install because it would only apply to the installing user's `DOT_SAGE`. But if cleaning is needed, it has to be done at runtime when the user starts sage or the specific functionality.",
    "created_at": "2021-07-02T20:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516898",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@mkoeppe](#comment%3A4):
> I don't think the spkg-install should be in charge of clearing things in the user's .sage directory. This won't work in multi-user installations. This needs a better solution

Indeed not. This was possibly overlooked as of non consequence on a multi-user install because it would only apply to the installing user's `DOT_SAGE`. But if cleaning is needed, it has to be done at runtime when the user starts sage or the specific functionality.



---

archive/issue_comments_516899.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kiwifb](#comment%3A5):\n>> Replying to [@mkoeppe](#comment%3A4):\n\n> But if cleaning is needed, it has to be done at runtime when the user starts sage or the specific functionality.\n\nSure! I will do it next week.",
    "created_at": "2021-07-03T10:35:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516899",
    "user": "https://github.com/soehms"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kiwifb](#comment%3A5):
>> Replying to [@mkoeppe](#comment%3A4):

> But if cleaning is needed, it has to be done at runtime when the user starts sage or the specific functionality.

Sure! I will do it next week.



---

archive/issue_comments_516900.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369\"><code>cdff7f6</code></a></td><td><code>32099: refresh file-cache at runtime</code></td></tr></table>\n",
    "created_at": "2021-07-06T10:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516900",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369"><code>cdff7f6</code></a></td><td><code>32099: refresh file-cache at runtime</code></td></tr></table>




---

archive/issue_comments_516901.json:
```json
{
    "body": "Changed commit from **[`514c714`](https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633)** to **[`cdff7f6`](https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369)**",
    "created_at": "2021-07-06T10:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516901",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`514c714`](https://github.com/sagemath/sagetrac-mirror/commit/514c714bcc8a703691dbe50acaadb40cc75ba633)** to **[`cdff7f6`](https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369)**



---

archive/issue_comments_516902.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAn automatic refresh of the file-cache at runtime is already implemented. It is performed whenever the file `num_knots.sobj` in the file-cache directory is missing. Thus, the only thing to do is to add the version number to this file-name.",
    "created_at": "2021-07-06T10:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516902",
    "user": "https://github.com/soehms"
}
```

<div id="comment:8" align="right">comment:8</div>

An automatic refresh of the file-cache at runtime is already implemented. It is performed whenever the file `num_knots.sobj` in the file-cache directory is missing. Thus, the only thing to do is to add the version number to this file-name.



---

archive/issue_comments_516903.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2\"><code>e9965ee</code></a></td><td><code>32099 small fix on former commit</code></td></tr></table>\n",
    "created_at": "2021-07-06T10:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516903",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2"><code>e9965ee</code></a></td><td><code>32099 small fix on former commit</code></td></tr></table>




---

archive/issue_comments_516904.json:
```json
{
    "body": "Changed commit from **[`cdff7f6`](https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369)** to **[`e9965ee`](https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2)**",
    "created_at": "2021-07-06T10:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cdff7f6`](https://github.com/sagemath/sagetrac-mirror/commit/cdff7f68da62c0f50f78c9abe5d85833add8d369)** to **[`e9965ee`](https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2)**



---

archive/issue_events_439537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-08T22:03:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439537"
}
```



---

archive/issue_events_439538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-08T22:03:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439538"
}
```



---

archive/issue_comments_516905.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThis is not a good solution - let's please not re-introduce uses of `sage.misc.package` - this is specific to sage-the-distribution.\n\nI would suggest to instead query the version of the installed Python package using standard Python means: \n- either using a variable that your Python package `database_knotinfo` provides for this purpose\n- or using `importlib.metadata` https://docs.python.org/3/library/importlib.metadata.html",
    "created_at": "2021-07-08T22:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516905",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

This is not a good solution - let's please not re-introduce uses of `sage.misc.package` - this is specific to sage-the-distribution.

I would suggest to instead query the version of the installed Python package using standard Python means: 
- either using a variable that your Python package `database_knotinfo` provides for this purpose
- or using `importlib.metadata` https://docs.python.org/3/library/importlib.metadata.html



---

archive/issue_comments_516906.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97\"><code>4f12b1b</code></a></td><td><code>32099: obtain version via importlib</code></td></tr></table>\n",
    "created_at": "2021-07-09T11:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516906",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97"><code>4f12b1b</code></a></td><td><code>32099: obtain version via importlib</code></td></tr></table>




---

archive/issue_comments_516907.json:
```json
{
    "body": "Changed commit from **[`e9965ee`](https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2)** to **[`4f12b1b`](https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97)**",
    "created_at": "2021-07-09T11:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516907",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e9965ee`](https://github.com/sagemath/sagetrac-mirror/commit/e9965ee4f4ad5e9e0cf84354ab09d80df19f25d2)** to **[`4f12b1b`](https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97)**



---

archive/issue_comments_516908.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment%3A10):\n> This is not a good solution - let's please not re-introduce uses of `sage.misc.package` - this is specific to sage-the-distribution.\n> \n> I would suggest to instead query the version of the installed Python package using standard Python means: \n> - either using a variable that your Python package `database_knotinfo` provides for this purpose\n> - or using `importlib.metadata` https://docs.python.org/3/library/importlib.metadata.html\n\n\nThanks for the hint!",
    "created_at": "2021-07-09T11:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516908",
    "user": "https://github.com/soehms"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment%3A10):
> This is not a good solution - let's please not re-introduce uses of `sage.misc.package` - this is specific to sage-the-distribution.
> 
> I would suggest to instead query the version of the installed Python package using standard Python means: 
> - either using a variable that your Python package `database_knotinfo` provides for this purpose
> - or using `importlib.metadata` https://docs.python.org/3/library/importlib.metadata.html


Thanks for the hint!



---

archive/issue_events_439539.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-09T11:39:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439539"
}
```



---

archive/issue_events_439540.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-07-09T11:39:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439540"
}
```



---

archive/issue_comments_516909.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks for making this change. \n\nBecause we still support Python 3.7, I think this will need a `try...except` with fallback to using the backport package `importlib_metadata` (see https://importlib-metadata.readthedocs.io/en/latest/using.html)",
    "created_at": "2021-07-09T15:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516909",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks for making this change. 

Because we still support Python 3.7, I think this will need a `try...except` with fallback to using the backport package `importlib_metadata` (see https://importlib-metadata.readthedocs.io/en/latest/using.html)



---

archive/issue_comments_516910.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b\"><code>b1e4f13</code></a></td><td><code>32099: fix python3.7 compatibility</code></td></tr></table>\n",
    "created_at": "2021-07-12T08:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516910",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b"><code>b1e4f13</code></a></td><td><code>32099: fix python3.7 compatibility</code></td></tr></table>




---

archive/issue_comments_516911.json:
```json
{
    "body": "Changed commit from **[`4f12b1b`](https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97)** to **[`b1e4f13`](https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b)**",
    "created_at": "2021-07-12T08:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516911",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4f12b1b`](https://github.com/sagemath/sagetrac-mirror/commit/4f12b1b3f81eedf9aabc044fc0547f665c763c97)** to **[`b1e4f13`](https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b)**



---

archive/issue_comments_516912.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSince I couldn't test with python 3.7 I started the [GitHub workflow tox-optional](https://github.com/soehms/sage/actions/runs/1020446425) instead.",
    "created_at": "2021-07-12T08:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516912",
    "user": "https://github.com/soehms"
}
```

<div id="comment:15" align="right">comment:15</div>

Since I couldn't test with python 3.7 I started the [GitHub workflow tox-optional](https://github.com/soehms/sage/actions/runs/1020446425) instead.



---

archive/issue_comments_516913.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe `debian-buster-standard` run (which has system python 3.7) looks fine.",
    "created_at": "2021-07-12T17:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516913",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

The `debian-buster-standard` run (which has system python 3.7) looks fine.



---

archive/issue_comments_516914.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nTesting locally, I am getting numerous doctest failures though:\n\n```\nFile \"src/sage/knots/link.py\", line 3931, in sage.knots.link.Link.is_isotopic\nFailed example:\n    from sage.knots.knotinfo import KnotInfo\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.knots.link.Link.is_isotopic[5]>\", line 1, in <module>\n        from sage.knots.knotinfo import KnotInfo\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/knotinfo.py\", line 2416, in <module>\n        KnotInfo = KnotInfoBase('KnotInfo', db.row_names())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py\", line 707, in row_names\n        row_dict = self.read_row_dict()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py\", line 685, in read_row_dict\n        return load('%s/%s' %(sobj_path, filename))\n      File \"sage/misc/persist.pyx\", line 187, in sage.misc.persist.load\n        with open(filename, 'rb') as fobj:\n    FileNotFoundError: [Errno 2] No such file or directory: '/Users/mkoeppe/.sage/knotinfo/row_dict.sobj'\n```",
    "created_at": "2021-07-12T17:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516914",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Testing locally, I am getting numerous doctest failures though:

```
File "src/sage/knots/link.py", line 3931, in sage.knots.link.Link.is_isotopic
Failed example:
    from sage.knots.knotinfo import KnotInfo
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.knots.link.Link.is_isotopic[5]>", line 1, in <module>
        from sage.knots.knotinfo import KnotInfo
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/knotinfo.py", line 2416, in <module>
        KnotInfo = KnotInfoBase('KnotInfo', db.row_names())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py", line 707, in row_names
        row_dict = self.read_row_dict()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py", line 685, in read_row_dict
        return load('%s/%s' %(sobj_path, filename))
      File "sage/misc/persist.pyx", line 187, in sage.misc.persist.load
        with open(filename, 'rb') as fobj:
    FileNotFoundError: [Errno 2] No such file or directory: '/Users/mkoeppe/.sage/knotinfo/row_dict.sobj'
```



---

archive/issue_comments_516915.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment%3A17):\n> Testing locally, I am getting numerous doctest failures though: ....\n\nI've no idea where this could come from. Can you please say more about the test-case. Have there been error messages from the new method `version`? If so, can you please post them?",
    "created_at": "2021-07-14T06:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516915",
    "user": "https://github.com/soehms"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment%3A17):
> Testing locally, I am getting numerous doctest failures though: ....

I've no idea where this could come from. Can you please say more about the test-case. Have there been error messages from the new method `version`? If so, can you please post them?



---

archive/issue_comments_516916.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b\"><code>9b2000b</code></a></td><td><code>32099: use version from repository</code></td></tr></table>\n",
    "created_at": "2021-07-16T06:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516916",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b"><code>9b2000b</code></a></td><td><code>32099: use version from repository</code></td></tr></table>




---

archive/issue_comments_516917.json:
```json
{
    "body": "Changed commit from **[`b1e4f13`](https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b)** to **[`9b2000b`](https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b)**",
    "created_at": "2021-07-16T06:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516917",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b1e4f13`](https://github.com/sagemath/sagetrac-mirror/commit/b1e4f1311da5b8fd931ac823abe13eb040612c8b)** to **[`9b2000b`](https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b)**



---

archive/issue_comments_516918.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI think the first option of your suggestion in comment 10 is the better choice, since it can be implemented independent on the Python version. Thus, I'm switching to this solution, now.",
    "created_at": "2021-07-16T06:45:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516918",
    "user": "https://github.com/soehms"
}
```

<div id="comment:20" align="right">comment:20</div>

I think the first option of your suggestion in comment 10 is the better choice, since it can be implemented independent on the Python version. Thus, I'm switching to this solution, now.



---

archive/issue_comments_516919.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c52d8209c853844d02495ef0b6b93f8e6059642\"><code>6c52d82</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246\"><code>d935c8f</code></a></td><td><code>32099: add dependencies for doctests in spkg-check.in</code></td></tr></table>\n",
    "created_at": "2021-07-19T12:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c52d8209c853844d02495ef0b6b93f8e6059642"><code>6c52d82</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246"><code>d935c8f</code></a></td><td><code>32099: add dependencies for doctests in spkg-check.in</code></td></tr></table>




---

archive/issue_comments_516920.json:
```json
{
    "body": "Changed commit from **[`9b2000b`](https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b)** to **[`d935c8f`](https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246)**",
    "created_at": "2021-07-19T12:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516920",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b2000b`](https://github.com/sagemath/sagetrac-mirror/commit/9b2000bc0a5406827aa4afaf4fbe590abb025e2b)** to **[`d935c8f`](https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246)**



---

archive/issue_comments_516921.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAfter an inspection of the log-files being attached to the `tox-optional` workflow run mentioned in [comment 15](https://github.com/sagemath/sage/issues/32099#comment:15) (for example the [one for ubunto focal](https://github.com/soehms/sage/runs/3040930473?check_suite_focus=true)) I realized that a couple of dependencies to standard `spkg` being necassary to have the doctests of `spkg-check.in` pass successfully during a clean build, were missing.\n\nI've added these and started the [workflow](https://github.com/soehms/sage/actions/runs/1044132433) again.\n\n\nI suspect that the problem which has been reported in [comment 17](https://github.com/sagemath/sage/issues/32099#comment:17) is related to that and should be fixed, now.\n\nBTW: Is it intended that the jobs of `tox-optional` are marked green even though `spkg-check.in` failed?",
    "created_at": "2021-07-19T12:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516921",
    "user": "https://github.com/soehms"
}
```

<div id="comment:22" align="right">comment:22</div>

After an inspection of the log-files being attached to the `tox-optional` workflow run mentioned in [comment 15](https://github.com/sagemath/sage/issues/32099#comment:15) (for example the [one for ubunto focal](https://github.com/soehms/sage/runs/3040930473?check_suite_focus=true)) I realized that a couple of dependencies to standard `spkg` being necassary to have the doctests of `spkg-check.in` pass successfully during a clean build, were missing.

I've added these and started the [workflow](https://github.com/soehms/sage/actions/runs/1044132433) again.


I suspect that the problem which has been reported in [comment 17](https://github.com/sagemath/sage/issues/32099#comment:17) is related to that and should be fixed, now.

BTW: Is it intended that the jobs of `tox-optional` are marked green even though `spkg-check.in` failed?



---

archive/issue_comments_516922.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674\"><code>b57673a</code></a></td><td><code>32099: Once more: A new version number format</code></td></tr></table>\n",
    "created_at": "2021-07-23T08:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516922",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674"><code>b57673a</code></a></td><td><code>32099: Once more: A new version number format</code></td></tr></table>




---

archive/issue_comments_516923.json:
```json
{
    "body": "Changed commit from **[`d935c8f`](https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246)** to **[`b57673a`](https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674)**",
    "created_at": "2021-07-23T08:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d935c8f`](https://github.com/sagemath/sagetrac-mirror/commit/d935c8f93519e9e804bb5f42f5be2aba9c28e246)** to **[`b57673a`](https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674)**



---

archive/issue_comments_516924.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNow, the doctests did pass for the current workflow run on all jobs that I've inspected (by random choice of those that did not fail by some other reason). For example on Debian buster:\n\n```bash\nSuccessfully installed database-knotinfo-21.7.15\nRemoved build tracker: '/tmp/pip-req-tracker-1y0wwg_k'\n\nreal    0m2.628s\nuser    0m2.231s\nsys     0m0.401s\nCopying package files from temporary location /sage/local/var/tmp/sage/build/database_knotinfo-21.7.15/inst to /sage/local\nRunning the test suite for database_knotinfo-21.7.15...\nTesting databases/knotinfo_db.py\nno stored timings available\nRunning doctests with ID 2021-07-20-03-48-43-957b59f6.\nUsing --optional=database_knotinfo,sage\nDoctesting 1 file.\nsage -t --long --random-seed=0 databases/knotinfo_db.py\n    [101 tests, 25.38 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 25.5 seconds\n    cpu time: 24.8 seconds\n    cumulative wall time: 25.4 seconds\nPytest is not installed, skip checking tests that rely on it.\nTesting knots/knotinfo.py\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2021-07-20-03-49-12-54c67d38.\nUsing --optional=database_knotinfo,sage\nDoctesting 1 file.\nsage -t --random-seed=0 knots/knotinfo.py\n    [352 tests, 5.04 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.2 seconds\n    cpu time: 5.0 seconds\n    cumulative wall time: 5.0 seconds\nPytest is not installed, skip checking tests that rely on it.\nTesting knots/link.py\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2021-07-20-03-49-20-81ce905a.\nUsing --optional=database_knotinfo,sage\nDoctesting 1 file.\nsage -t --random-seed=0 knots/link.py\n    [539 tests, 13.25 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 13.4 seconds\n    cpu time: 13.2 seconds\n    cumulative wall time: 13.3 seconds\nPytest is not installed, skip checking tests that rely on it.\n\nreal    0m52.506s\nuser    0m48.852s\nsys     0m2.132s\nPassed the test suite for database_knotinfo-21.7.15.\nSuccessfully installed database_knotinfo-21.7.15\nDeleting temporary build directory\n```\n\n\n\nThe current commit is independent on that. Again, it just switches to a new version number format (see [issue 2 on GitHub](https://github.com/soehms/database_knotinfo/issues/2)).",
    "created_at": "2021-07-23T08:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516924",
    "user": "https://github.com/soehms"
}
```

<div id="comment:24" align="right">comment:24</div>

Now, the doctests did pass for the current workflow run on all jobs that I've inspected (by random choice of those that did not fail by some other reason). For example on Debian buster:

```bash
Successfully installed database-knotinfo-21.7.15
Removed build tracker: '/tmp/pip-req-tracker-1y0wwg_k'

real    0m2.628s
user    0m2.231s
sys     0m0.401s
Copying package files from temporary location /sage/local/var/tmp/sage/build/database_knotinfo-21.7.15/inst to /sage/local
Running the test suite for database_knotinfo-21.7.15...
Testing databases/knotinfo_db.py
no stored timings available
Running doctests with ID 2021-07-20-03-48-43-957b59f6.
Using --optional=database_knotinfo,sage
Doctesting 1 file.
sage -t --long --random-seed=0 databases/knotinfo_db.py
    [101 tests, 25.38 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 25.5 seconds
    cpu time: 24.8 seconds
    cumulative wall time: 25.4 seconds
Pytest is not installed, skip checking tests that rely on it.
Testing knots/knotinfo.py
too few successful tests, not using stored timings
Running doctests with ID 2021-07-20-03-49-12-54c67d38.
Using --optional=database_knotinfo,sage
Doctesting 1 file.
sage -t --random-seed=0 knots/knotinfo.py
    [352 tests, 5.04 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.2 seconds
    cpu time: 5.0 seconds
    cumulative wall time: 5.0 seconds
Pytest is not installed, skip checking tests that rely on it.
Testing knots/link.py
too few successful tests, not using stored timings
Running doctests with ID 2021-07-20-03-49-20-81ce905a.
Using --optional=database_knotinfo,sage
Doctesting 1 file.
sage -t --random-seed=0 knots/link.py
    [539 tests, 13.25 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 13.4 seconds
    cpu time: 13.2 seconds
    cumulative wall time: 13.3 seconds
Pytest is not installed, skip checking tests that rely on it.

real    0m52.506s
user    0m48.852s
sys     0m2.132s
Passed the test suite for database_knotinfo-21.7.15.
Successfully installed database_knotinfo-21.7.15
Deleting temporary build directory
```



The current commit is independent on that. Again, it just switches to a new version number format (see [issue 2 on GitHub](https://github.com/soehms/database_knotinfo/issues/2)).



---

archive/issue_comments_516925.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@soehms](#comment%3A22):\n> After an inspection of the log-files being attached to the `tox-optional` workflow run mentioned in [comment 15](https://github.com/sagemath/sage/issues/32099#comment:15) (for example the [one for ubunto focal](https://github.com/soehms/sage/runs/3040930473?check_suite_focus=true)) I realized that a couple of dependencies to standard `spkg` being necassary to have the doctests of `spkg-check.in` pass successfully during a clean build, were missing.\n\nTo declare check-specific dependencies, you can use the format/trick that is used in  `build/pkgs/networkx/dependencies`",
    "created_at": "2021-07-25T22:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@soehms](#comment%3A22):
> After an inspection of the log-files being attached to the `tox-optional` workflow run mentioned in [comment 15](https://github.com/sagemath/sage/issues/32099#comment:15) (for example the [one for ubunto focal](https://github.com/soehms/sage/runs/3040930473?check_suite_focus=true)) I realized that a couple of dependencies to standard `spkg` being necassary to have the doctests of `spkg-check.in` pass successfully during a clean build, were missing.

To declare check-specific dependencies, you can use the format/trick that is used in  `build/pkgs/networkx/dependencies`



---

archive/issue_comments_516926.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@soehms](#comment%3A22):\n> BTW: Is it intended that the jobs of `tox-optional` are marked green even though `spkg-check.in` failed?\n\nYes, it's intentional.  Just too many optional packages fail at the moment. Seeing everything or almost everything fail is neither informative nor encouraging...",
    "created_at": "2021-07-25T22:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516926",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@soehms](#comment%3A22):
> BTW: Is it intended that the jobs of `tox-optional` are marked green even though `spkg-check.in` failed?

Yes, it's intentional.  Just too many optional packages fail at the moment. Seeing everything or almost everything fail is neither informative nor encouraging...



---

archive/issue_comments_516927.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7654503e82ae09bd9d5c565a96c4358d06a91bdd\"><code>7654503</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732\"><code>426ae4a</code></a></td><td><code>32099: make restricted dependencies conditional</code></td></tr></table>\n",
    "created_at": "2021-07-27T08:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516927",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7654503e82ae09bd9d5c565a96c4358d06a91bdd"><code>7654503</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732"><code>426ae4a</code></a></td><td><code>32099: make restricted dependencies conditional</code></td></tr></table>




---

archive/issue_comments_516928.json:
```json
{
    "body": "Changed commit from **[`b57673a`](https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674)** to **[`426ae4a`](https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732)**",
    "created_at": "2021-07-27T08:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516928",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b57673a`](https://github.com/sagemath/sagetrac-mirror/commit/b57673aa02345a259d3021b74f99d6d489ad9674)** to **[`426ae4a`](https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732)**



---

archive/issue_comments_516929.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@mkoeppe](#comment%3A25):\n\n> To declare check-specific dependencies, you can use the format/trick that is used in  `build/pkgs/networkx/dependencies`\n\nThe package I used as example was `p_group_cohomology` which performes Sage doctests in `spkg-ceck.in`, as well. Anyway, I followed your suggestion and tested that at least the goal of the former commit has not been damaged. On the other hand I didn't test whether there are less restrictions if no check option is given. But, I think that should work here, too, if it is working for `networkx`.",
    "created_at": "2021-07-27T08:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516929",
    "user": "https://github.com/soehms"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@mkoeppe](#comment%3A25):

> To declare check-specific dependencies, you can use the format/trick that is used in  `build/pkgs/networkx/dependencies`

The package I used as example was `p_group_cohomology` which performes Sage doctests in `spkg-ceck.in`, as well. Anyway, I followed your suggestion and tested that at least the goal of the former commit has not been damaged. On the other hand I didn't test whether there are less restrictions if no check option is given. But, I think that should work here, too, if it is working for `networkx`.



---

archive/issue_comments_516930.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@mkoeppe](#comment%3A26):\n\n> Yes, it's intentional.  Just too many optional packages fail at the moment. Seeing everything or almost everything fail is neither informative nor encouraging...\n\nYes, that's right.",
    "created_at": "2021-07-27T08:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516930",
    "user": "https://github.com/soehms"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@mkoeppe](#comment%3A26):

> Yes, it's intentional.  Just too many optional packages fail at the moment. Seeing everything or almost everything fail is neither informative nor encouraging...

Yes, that's right.



---

archive/issue_comments_516931.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nRight after installation of the new version of the package I get the following errors upon `./sage -tp src/sage/databases/ src/sage/features/ src/sage/knots/`.\n\n```\nsage -t --random-seed=0 src/sage/features/databases.py\n**********************************************************************\nFile \"src/sage/features/databases.py\", line 113, in sage.features.databases.DatabaseKnotInfo\nFailed example:\n    DatabaseKnotInfo().is_present()  # optional: database_knotinfo\nExpected:\n    FeatureTestResult('sage.knots.knotinfo', True)\nGot:\n    FeatureTestResult('database_knotinfo', True)\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.features.databases.DatabaseKnotInfo\n    [15 tests, 1 failure, 0.02 s]\nsage -t --random-seed=0 src/sage/knots/link.py\n**********************************************************************\nFile \"src/sage/knots/link.py\", line 2667, in sage.knots.link.Link.homfly_polynomial\nFailed example:\n    KI, m = K.get_knotinfo(); KI, m\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.knots.link.Link.homfly_polynomial[14]>\", line 1, in <module>\n        KI, m = K.get_knotinfo(); KI, m\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/link.py\", line 3861, in get_knotinfo\n        ls, proved_s = self._knotinfo_matching_list()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/link.py\", line 3489, in _knotinfo_matching_list\n        from sage.knots.knotinfo import KnotInfoSeries\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/knotinfo.py\", line 2416, in <module>\n        KnotInfo = KnotInfoBase('KnotInfo', db.row_names())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py\", line 705, in row_names\n        row_dict = self.read_row_dict()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py\", line 683, in read_row_dict\n        return load('%s/%s' %(sobj_path, filename))\n      File \"sage/misc/persist.pyx\", line 187, in sage.misc.persist.load\n        with open(filename, 'rb') as fobj:\n    FileNotFoundError: [Errno 2] No such file or directory: '/Users/mkoeppe/.sage/knotinfo/row_dict.sobj'\n**********************************************************************\nFile \"src/sage/knots/link.py\", line 2669, in sage.knots.link.Link.homfly_polynomial\nFailed example:\n    K.homfly_polynomial(normalization='vz') == KI.homfly_polynomial()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.knots.link.Link.homfly_polynomial[15]>\", line 1, in <module>\n        K.homfly_polynomial(normalization='vz') == KI.homfly_polynomial()\n    NameError: name 'KI' is not defined\n**********************************************************************\n1 item had failures:\n   2 of  31 in sage.knots.link.Link.homfly_polynomial\n    [540 tests, 2 failures, 11.52 s]\n```\n\n\nThis is not stable: I reran the same command and got different errors:\n\n```\nsage -t --random-seed=0 src/sage/knots/knotinfo.py  # 232 doctests failed\nsage -t --random-seed=0 src/sage/features/databases.py  # 1 doctest failed\nsage -t --random-seed=0 src/sage/knots/link.py  # 2 doctests failed\n```\n\nMy guess is that what is happening here is that creating the cache is not safe for parallel doctesting. You may want to make this step atomic.",
    "created_at": "2021-08-03T01:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516931",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Right after installation of the new version of the package I get the following errors upon `./sage -tp src/sage/databases/ src/sage/features/ src/sage/knots/`.

```
sage -t --random-seed=0 src/sage/features/databases.py
**********************************************************************
File "src/sage/features/databases.py", line 113, in sage.features.databases.DatabaseKnotInfo
Failed example:
    DatabaseKnotInfo().is_present()  # optional: database_knotinfo
Expected:
    FeatureTestResult('sage.knots.knotinfo', True)
Got:
    FeatureTestResult('database_knotinfo', True)
**********************************************************************
1 item had failures:
   1 of   3 in sage.features.databases.DatabaseKnotInfo
    [15 tests, 1 failure, 0.02 s]
sage -t --random-seed=0 src/sage/knots/link.py
**********************************************************************
File "src/sage/knots/link.py", line 2667, in sage.knots.link.Link.homfly_polynomial
Failed example:
    KI, m = K.get_knotinfo(); KI, m
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.knots.link.Link.homfly_polynomial[14]>", line 1, in <module>
        KI, m = K.get_knotinfo(); KI, m
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/link.py", line 3861, in get_knotinfo
        ls, proved_s = self._knotinfo_matching_list()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/link.py", line 3489, in _knotinfo_matching_list
        from sage.knots.knotinfo import KnotInfoSeries
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/knots/knotinfo.py", line 2416, in <module>
        KnotInfo = KnotInfoBase('KnotInfo', db.row_names())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py", line 705, in row_names
        row_dict = self.read_row_dict()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/databases/knotinfo_db.py", line 683, in read_row_dict
        return load('%s/%s' %(sobj_path, filename))
      File "sage/misc/persist.pyx", line 187, in sage.misc.persist.load
        with open(filename, 'rb') as fobj:
    FileNotFoundError: [Errno 2] No such file or directory: '/Users/mkoeppe/.sage/knotinfo/row_dict.sobj'
**********************************************************************
File "src/sage/knots/link.py", line 2669, in sage.knots.link.Link.homfly_polynomial
Failed example:
    K.homfly_polynomial(normalization='vz') == KI.homfly_polynomial()
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.knots.link.Link.homfly_polynomial[15]>", line 1, in <module>
        K.homfly_polynomial(normalization='vz') == KI.homfly_polynomial()
    NameError: name 'KI' is not defined
**********************************************************************
1 item had failures:
   2 of  31 in sage.knots.link.Link.homfly_polynomial
    [540 tests, 2 failures, 11.52 s]
```


This is not stable: I reran the same command and got different errors:

```
sage -t --random-seed=0 src/sage/knots/knotinfo.py  # 232 doctests failed
sage -t --random-seed=0 src/sage/features/databases.py  # 1 doctest failed
sage -t --random-seed=0 src/sage/knots/link.py  # 2 doctests failed
```

My guess is that what is happening here is that creating the cache is not safe for parallel doctesting. You may want to make this step atomic.



---

archive/issue_events_439541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-03T01:07:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439541"
}
```



---

archive/issue_events_439542.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-03T01:07:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439542"
}
```



---

archive/issue_comments_516932.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2714bede1fb4118f207dcd8d5b83303119e153f\"><code>a2714be</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/681cf4d950d64c003fae988954b94fdc64c6b27f\"><code>681cf4d</code></a></td><td><code>32344: initial version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd3dbd19afd6ac171b9977d521a6632e50a24620\"><code>bd3dbd1</code></a></td><td><code>Merge branch 'u/soehms/atomic_dir_32344' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635\"><code>436fadf</code></a></td><td><code>32099: make reset_filecache atomic</code></td></tr></table>\n",
    "created_at": "2021-08-07T16:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516932",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2714bede1fb4118f207dcd8d5b83303119e153f"><code>a2714be</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/681cf4d950d64c003fae988954b94fdc64c6b27f"><code>681cf4d</code></a></td><td><code>32344: initial version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd3dbd19afd6ac171b9977d521a6632e50a24620"><code>bd3dbd1</code></a></td><td><code>Merge branch 'u/soehms/atomic_dir_32344' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635"><code>436fadf</code></a></td><td><code>32099: make reset_filecache atomic</code></td></tr></table>




---

archive/issue_comments_516933.json:
```json
{
    "body": "Changed commit from **[`426ae4a`](https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732)** to **[`436fadf`](https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635)**",
    "created_at": "2021-08-07T16:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516933",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`426ae4a`](https://github.com/sagemath/sagetrac-mirror/commit/426ae4ad8c816c9076244920f5e35ba075a4a732)** to **[`436fadf`](https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635)**



---

archive/issue_events_439543.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-08-07T17:09:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439543"
}
```



---

archive/issue_events_439544.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-08-07T17:09:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439544"
}
```



---

archive/issue_comments_516934.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@mkoeppe](#comment%3A30):\n> My guess is that what is happening here is that creating the cache is not safe for parallel doctesting. You may want to make this step atomic.\n\nExactly! Shame on me: I only tested serial! Since I didn't find an appropriate Sage class to use for this purpose I created a variation of `atomic_write` in #32344",
    "created_at": "2021-08-07T17:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516934",
    "user": "https://github.com/soehms"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@mkoeppe](#comment%3A30):
> My guess is that what is happening here is that creating the cache is not safe for parallel doctesting. You may want to make this step atomic.

Exactly! Shame on me: I only tested serial! Since I didn't find an appropriate Sage class to use for this purpose I created a variation of `atomic_write` in #32344



---

archive/issue_comments_516935.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.\n \n-Furthermore, an upgrade to  the first official release 21.7 of the PyPI-package will be done.\n+Furthermore, an upgrade to  the first official release 21.7.21 of the PyPI-package will be done.\n \n-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the month giving the next differences. The first such release is [21.7](https://pypi.org/project/database-knotinfo/21.7/).\n+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [21.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n \n This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).\n \n``````\n",
    "created_at": "2021-08-07T18:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516935",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.
 
-Furthermore, an upgrade to  the first official release 21.7 of the PyPI-package will be done.
+Furthermore, an upgrade to  the first official release 21.7.21 of the PyPI-package will be done.
 
-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the month giving the next differences. The first such release is [21.7](https://pypi.org/project/database-knotinfo/21.7/).
+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [21.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).
 
 This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).
 
``````




---

archive/issue_comments_516936.json:
```json
{
    "body": "Dependencies: **#32344**",
    "created_at": "2021-08-07T18:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516936",
    "user": "https://github.com/soehms"
}
```

Dependencies: **#32344**



---

archive/issue_comments_516937.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.\n \n-Furthermore, an upgrade to  the first official release 21.7.21 of the PyPI-package will be done.\n+Furthermore, an upgrade to  the first official release 2021.7.21 of the PyPI-package will be done.\n \n-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [21.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n \n This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).\n \n``````\n",
    "created_at": "2021-08-07T18:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516937",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.
 
-Furthermore, an upgrade to  the first official release 21.7.21 of the PyPI-package will be done.
+Furthermore, an upgrade to  the first official release 2021.7.21 of the PyPI-package will be done.
 
-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [21.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).
+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).
 
 This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).
 
``````




---

archive/issue_comments_516938.json:
```json
{
    "body": "Changed commit from **[`436fadf`](https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635)** to **[`7993ccf`](https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1)**",
    "created_at": "2021-08-11T09:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`436fadf`](https://github.com/sagemath/sagetrac-mirror/commit/436fadf34f0c096549bc93af1581365fba4c8635)** to **[`7993ccf`](https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1)**



---

archive/issue_comments_516939.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/791612176907391819cae5996c7efe6cabe1fb9b\"><code>7916121</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00b7106975e3cda892df849394bf6a3de5dba88c\"><code>00b7106</code></a></td><td><code>Merge branch 'u/soehms/atomic_dir_32344' of git://trac.sagemath.org/sage into atomic_dir_32344</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d4693d580d0d5f87dba4f8b6d795d25ba7f109e\"><code>6d4693d</code></a></td><td><code>32344: keep dir if it exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce5685522682da559f0be4c4e156865083219938\"><code>ce56855</code></a></td><td><code>Merge branch 'atomic_dir_32344' into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1\"><code>7993ccf</code></a></td><td><code>32099: adaption to change in #32344</code></td></tr></table>\n",
    "created_at": "2021-08-11T09:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516939",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/791612176907391819cae5996c7efe6cabe1fb9b"><code>7916121</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of git://trac.sagemath.org/sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00b7106975e3cda892df849394bf6a3de5dba88c"><code>00b7106</code></a></td><td><code>Merge branch 'u/soehms/atomic_dir_32344' of git://trac.sagemath.org/sage into atomic_dir_32344</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d4693d580d0d5f87dba4f8b6d795d25ba7f109e"><code>6d4693d</code></a></td><td><code>32344: keep dir if it exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce5685522682da559f0be4c4e156865083219938"><code>ce56855</code></a></td><td><code>Merge branch 'atomic_dir_32344' into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1"><code>7993ccf</code></a></td><td><code>32099: adaption to change in #32344</code></td></tr></table>




---

archive/issue_comments_516940.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI rename `reset_filcache` to `create_filecache`. Cleaning is resticted to a change of the version or user input, now!",
    "created_at": "2021-08-11T09:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516940",
    "user": "https://github.com/soehms"
}
```

<div id="comment:37" align="right">comment:37</div>

I rename `reset_filcache` to `create_filecache`. Cleaning is resticted to a change of the version or user input, now!



---

archive/issue_events_439545.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439545"
}
```



---

archive/issue_events_439546.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439546"
}
```



---

archive/issue_comments_516941.json:
```json
{
    "body": "Changed commit from **[`7993ccf`](https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1)** to **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**",
    "created_at": "2021-09-07T16:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7993ccf`](https://github.com/sagemath/sagetrac-mirror/commit/7993ccff6f23ed0e32b2ef64aae914673b9111e1)** to **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**



---

archive/issue_comments_516942.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96db3213ed003a1b46bb0e4fd0c9d1ee2cdc9764\"><code>96db321</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f\"><code>ce89457</code></a></td><td><code>32099: update to version 2021.9.1</code></td></tr></table>\n",
    "created_at": "2021-09-07T16:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96db3213ed003a1b46bb0e4fd0c9d1ee2cdc9764"><code>96db321</code></a></td><td><code>Merge branch 'u/soehms/knotinfo_update_32099' of trac.sagemath.org:sage into knotinfo_update_32099</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f"><code>ce89457</code></a></td><td><code>32099: update to version 2021.9.1</code></td></tr></table>




---

archive/issue_comments_516943.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nLet's take the current version of the PyPI package with us. It's the first release completely created by the cron-job.",
    "created_at": "2021-09-07T16:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516943",
    "user": "https://github.com/soehms"
}
```

<div id="comment:40" align="right">comment:40</div>

Let's take the current version of the PyPI package with us. It's the first release completely created by the cron-job.



---

archive/issue_comments_516944.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThis seems to work well now!",
    "created_at": "2021-09-07T18:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516944",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

This seems to work well now!



---

archive/issue_comments_516945.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-09-07T18:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516945",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_439547.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T18:35:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "title_is": "Update database_knotinfo to 2021.9.1, fix file-cache location",
    "title_was": "Fix file-cache location for database_knotinfo",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439547"
}
```



---

archive/issue_comments_516946.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.\n \n-Furthermore, an upgrade to  the first official release 2021.7.21 of the PyPI-package will be done.\n+Furthermore, an upgrade to the official release 2021.9.1 of the PyPI-package will be done.\n \n-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release was [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).\n \n This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).\n \n``````\n",
    "created_at": "2021-09-07T18:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516946",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 In #31921 the location for the file-cache of the KnotInfo databases has been changed from `$SAGE_LOCAL` to `$DOT_SAGE`. Unfortunately this change has not been performed with respect to cleaning on version updates. This will be fixed here.
 
-Furthermore, an upgrade to  the first official release 2021.7.21 of the PyPI-package will be done.
+Furthermore, an upgrade to the official release 2021.9.1 of the PyPI-package will be done.
 
-The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release is [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).
+The original databases on the [KnotInfo](https://knotinfo.math.indiana.edu/) web-page are developed under continuous flow. In order to keep track with that I've installed a [cronjob](https://github.com/soehms/database_knotinfo/blob/main/.github/workflows/check_version_changed.yml) that looks for differences and creates new releases if necessary. This is done once a month. The version numbers correspond to the date giving the next differences. The first such release was [2021.7.21](https://pypi.org/project/database-knotinfo/2021.7.21/).
 
 This upgrade just puts Sage on that release. It does not effect any functionality. As far as I've seen, the major difference to the former release is the addition of 2 new columns for proper links (`'arf_invariant': 'Arf Invariant'`, `'topological_four_genus': 'Genus-4D (Top.)'`).
 
``````




---

archive/issue_events_439548.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T18:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439548"
}
```



---

archive/issue_events_439549.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T18:35:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439549"
}
```



---

archive/issue_comments_516947.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nMany Thanks!",
    "created_at": "2021-09-08T07:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516947",
    "user": "https://github.com/soehms"
}
```

<div id="comment:42" align="right">comment:42</div>

Many Thanks!



---

archive/issue_events_439550.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-15T22:06:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439550"
}
```



---

archive/issue_events_439551.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0eb07acfc30bf0c512963256e77df619906d2667",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-09-15T22:06:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32099#event-439551"
}
```



---

archive/issue_comments_516948.json:
```json
{
    "body": "Changed branch from **[u/soehms/knotinfo_update_32099](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo_update_32099)** to **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**",
    "created_at": "2021-09-15T22:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32099#issuecomment-516948",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/soehms/knotinfo_update_32099](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo_update_32099)** to **[`ce89457`](https://github.com/sagemath/sagetrac-mirror/commit/ce89457d6fb8400d94e1f200ef5bdc59eb787b5f)**
