# Issue 32037: Upgrade to lcalc-2.0.4

archive/issues_031800.json:
```json
{
    "assignees": [],
    "body": "The new lcalc 2.0.3 has been released.\nNote in particular:\n\n- sane build system\n- comes with a pkg-config file\n- public API header has moved to `lcalc/L.h`\n- the `find_zeros_via_N_v()` function was removed\n  and replaced by `find_zeros()`\n\nIn this ticket we upgrade to lcalc 2.0.3 and:\n\n- add gengetopt as a new standard SPKG\n- adjust dependencies\n- adjust spkg-* files for the saner build system\n- adjust spkg-configure.m4 to find the new version\n- adjust tolerance in some doctests\n\n\nDepends on #32061\nDepends on #31837\n\nCC:  @JohnCremona @antonio-rojas @kiwifb @dimpase\n\nBranch: **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**\n\nReviewer: **Antonio Rojas, Dima Pasechnik**\n\nAuthor: **Michael Orlitzky, Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32037_\n\n",
    "closed_at": "2021-12-12T15:08:56Z",
    "created_at": "2021-06-23T03:11:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to lcalc-2.0.4",
    "type": "issue",
    "updated_at": "2021-12-18T18:12:04Z",
    "url": "https://github.com/sagemath/sage/issues/32037",
    "user": "https://github.com/orlitzky"
}
```
The new lcalc 2.0.3 has been released.
Note in particular:

- sane build system
- comes with a pkg-config file
- public API header has moved to `lcalc/L.h`
- the `find_zeros_via_N_v()` function was removed
  and replaced by `find_zeros()`

In this ticket we upgrade to lcalc 2.0.3 and:

- add gengetopt as a new standard SPKG
- adjust dependencies
- adjust spkg-* files for the saner build system
- adjust spkg-configure.m4 to find the new version
- adjust tolerance in some doctests


Depends on #32061
Depends on #31837

CC:  @JohnCremona @antonio-rojas @kiwifb @dimpase

Branch: **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**

Reviewer: **Antonio Rojas, Dima Pasechnik**

Author: **Michael Orlitzky, Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/32037_





---

archive/issue_events_409434.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:11:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409434"
}
```



---

archive/issue_events_409435.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:11:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409435"
}
```



---

archive/issue_events_409436.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:11:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409436"
}
```



---

archive/issue_events_409437.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:11:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409437"
}
```



---

archive/issue_comments_518851.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nUh, a branch please?",
    "created_at": "2021-06-23T05:23:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518851",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'>Comment 1:</a>
Uh, a branch please?



---

archive/issue_comments_518852.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nJohn, L-functions question here...",
    "created_at": "2021-06-23T08:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518852",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'>Comment 2:</a>
John, L-functions question here...



---

archive/issue_comments_518853.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nFor the first doctest, the PARI implementation (only available for real input) gives a different answer at 0:\n\n```\nsage: chi = DirichletGroup(5)[2]                                                \nsage: chi.lfunction().hardy(0)                                                  \n0.793597201093544\n```\n\n***EDIT***\n\nbut Pari doc of \"lfunhardy\" says this gives a \"Variant of the Hardy Z-function\"",
    "created_at": "2021-06-23T10:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518853",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>Comment 3:</a>
For the first doctest, the PARI implementation (only available for real input) gives a different answer at 0:

```
sage: chi = DirichletGroup(5)[2]                                                
sage: chi.lfunction().hardy(0)                                                  
0.793597201093544
```

***EDIT***

but Pari doc of "lfunhardy" says this gives a "Variant of the Hardy Z-function"



---

archive/issue_comments_518854.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nFor the second doctest, the values are indeed zeroes, according to pari :\n\n```\nsage: chi = DirichletGroup(5)[1]                                               \nsage: f = chi.lfunction() \nsage: f(1/2+6.18357819545086*I)                                                 \n2.61452836816118e-15 + 6.48370608217824e-15*I\nsage: f(1/2+8.45722917442320*I)                                                 \n3.51419504210656e-14 - 3.69407271406328e-14*I\nsage: f(1/2-4.13290370521286*I)       \n-4.69010768657543e-15 - 8.53389710587884e-15*I\n```\n\n\n***EDIT***\n\nBut that doc says that \"L.find_zeros_via_N(3)\" is supposed to find 3 zeroes, ignoring negative ones !",
    "created_at": "2021-06-23T11:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518854",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'>Comment 5:</a>
For the second doctest, the values are indeed zeroes, according to pari :

```
sage: chi = DirichletGroup(5)[1]                                               
sage: f = chi.lfunction() 
sage: f(1/2+6.18357819545086*I)                                                 
2.61452836816118e-15 + 6.48370608217824e-15*I
sage: f(1/2+8.45722917442320*I)                                                 
3.51419504210656e-14 - 3.69407271406328e-14*I
sage: f(1/2-4.13290370521286*I)       
-4.69010768657543e-15 - 8.53389710587884e-15*I
```


***EDIT***

But that doc says that "L.find_zeros_via_N(3)" is supposed to find 3 zeroes, ignoring negative ones !



---

archive/issue_comments_518855.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@mkoeppe](#comment%3A1):\n> Uh, a branch please?\n\nI hacked together the minimal changes needed to get this to compile (bonus: it doesn't crash), but all of the patches in the description should be viewed with great suspicion. It will take some more time to sort out the right things to do here.",
    "created_at": "2021-06-23T23:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518855",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@mkoeppe](#comment%3A1):
> Uh, a branch please?

I hacked together the minimal changes needed to get this to compile (bonus: it doesn't crash), but all of the patches in the description should be viewed with great suspicion. It will take some more time to sort out the right things to do here.



---

archive/issue_comments_518856.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@fchapoton](#comment%3A5):\n> ***EDIT***\n> \n> But that doc says that \"L.find_zeros_via_N(3)\" is supposed to find 3 zeroes, ignoring negative ones !\n\nThere used to be a parameter called `do_negative` that made it look for zeros with a negative imaginary part, but the new libLfunction computes `do_negative` on its own:\n\n```C++\nbool do_negative=is_complex();\n...\ntemplate <class ttype>\nbool L_function <ttype>::\nis_complex(){\n\n    if(my_verbose>2) cout << \"#            start is_complex()\" << endl;\n\n    bool do_negative=false;\n\n    int n=0;\n    if(what_type_L!=-1) //if not the zeta function, check if self dual. If so, do_negative stays false                                                     \n    do{\n        n++;\n        if(abs(imag(Complex(dirichlet_coefficient[n])))>.00001){\n            do_negative=true;\n\t    if(my_verbose>2) cout << \"#            is_complex: Dirichlet co\\\neff \" << n << \" \" << setprecision(DIGITS) << dirichlet_coefficient[n] << endl;\n        }\n\t}while(n<number_of_dirichlet_coefficients&&!do_negative);\n    if(my_verbose>2) cout << \"#            is_complex() = \" << do_negative<\\\n< endl;\n\n    return do_negative;\n\n}\n```\n\nSo maybe it's just the documentation that needs to be updated. I don't know what self-dual means, or what it's ultimately checking to make that decision in this case.",
    "created_at": "2021-06-24T00:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518856",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@fchapoton](#comment%3A5):
> ***EDIT***
> 
> But that doc says that "L.find_zeros_via_N(3)" is supposed to find 3 zeroes, ignoring negative ones !

There used to be a parameter called `do_negative` that made it look for zeros with a negative imaginary part, but the new libLfunction computes `do_negative` on its own:

```C++
bool do_negative=is_complex();
...
template <class ttype>
bool L_function <ttype>::
is_complex(){

    if(my_verbose>2) cout << "#            start is_complex()" << endl;

    bool do_negative=false;

    int n=0;
    if(what_type_L!=-1) //if not the zeta function, check if self dual. If so, do_negative stays false                                                     
    do{
        n++;
        if(abs(imag(Complex(dirichlet_coefficient[n])))>.00001){
            do_negative=true;
	    if(my_verbose>2) cout << "#            is_complex: Dirichlet co\
eff " << n << " " << setprecision(DIGITS) << dirichlet_coefficient[n] << endl;
        }
	}while(n<number_of_dirichlet_coefficients&&!do_negative);
    if(my_verbose>2) cout << "#            is_complex() = " << do_negative<\
< endl;

    return do_negative;

}
```

So maybe it's just the documentation that needs to be updated. I don't know what self-dual means, or what it's ultimately checking to make that decision in this case.



---

archive/issue_comments_518857.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nFWIW, here is my reading of this code: If all of the coefficients of the Dirichlet series are real (up to a tolerance of `.00001`), then the conjugate of any root is also a root.  (This is what \"self-dual\" must mean.) We do not need to look for roots below the real axis in this case (because they are conjugates of roots that are above the real axis), so `do_negative` is set to `False`. Otherwise, `do_negative` is set to `True`.\n\nReplying to [@orlitzky](#comment%3A7):\n> Replying to [@fchapoton](#comment%3A5):\n> ...\n> So maybe it's just the documentation that needs to be updated. I don't know what self-dual means, or what it's ultimately checking to make that decision in this case.",
    "created_at": "2021-06-24T02:26:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518857",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:8'>Comment 8:</a>
FWIW, here is my reading of this code: If all of the coefficients of the Dirichlet series are real (up to a tolerance of `.00001`), then the conjugate of any root is also a root.  (This is what "self-dual" must mean.) We do not need to look for roots below the real axis in this case (because they are conjugates of roots that are above the real axis), so `do_negative` is set to `False`. Otherwise, `do_negative` is set to `True`.

Replying to [@orlitzky](#comment%3A7):
> Replying to [@fchapoton](#comment%3A5):
> ...
> So maybe it's just the documentation that needs to be updated. I don't know what self-dual means, or what it's ultimately checking to make that decision in this case.



---

archive/issue_comments_518858.json:
```json
{
    "body": "Branch: **[public/lcalc_version_2](https://github.com/sagemath/sagetrac-mirror/tree/public/lcalc_version_2)**",
    "created_at": "2021-06-24T07:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518858",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/lcalc_version_2](https://github.com/sagemath/sagetrac-mirror/tree/public/lcalc_version_2)**



---

archive/issue_comments_518859.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nhere is a first branch, just changing version, checksums and lcalc_sage.h\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7\">61be05d</a></td><td><code>first steps towards lcalc 2.0.0</code></td></tr></table>\n",
    "created_at": "2021-06-24T07:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518859",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'>Comment 9:</a>
here is a first branch, just changing version, checksums and lcalc_sage.h

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7">61be05d</a></td><td><code>first steps towards lcalc 2.0.0</code></td></tr></table>




---

archive/issue_comments_518860.json:
```json
{
    "body": "Commit: **[61be05d](https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7)**",
    "created_at": "2021-06-24T07:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518860",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[61be05d](https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7)**



---

archive/issue_comments_518861.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nshould we remove all the old patches ?",
    "created_at": "2021-06-24T07:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518861",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'>Comment 10:</a>
should we remove all the old patches ?



---

archive/issue_comments_518862.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@fchapoton](#comment%3A10):\n> should we remove all the old patches ?\n\nYep, all patches are obsolete. The spkg-install.in should now be,\n\n```\nsdh_configure --with-pari\nsdh_make_install\n```\n\nand we can add an spkg-check.in containing,\n\n```\nsdh_make_check\n```",
    "created_at": "2021-06-24T12:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518862",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@fchapoton](#comment%3A10):
> should we remove all the old patches ?

Yep, all patches are obsolete. The spkg-install.in should now be,

```
sdh_configure --with-pari
sdh_make_install
```

and we can add an spkg-check.in containing,

```
sdh_make_check
```



---

archive/issue_comments_518863.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a\">7f68936</a></td><td><code>lcalc 2.0.0 removing all patches</code></td></tr></table>\n",
    "created_at": "2021-06-24T15:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518863",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a">7f68936</a></td><td><code>lcalc 2.0.0 removing all patches</code></td></tr></table>




---

archive/issue_comments_518864.json:
```json
{
    "body": "Changed commit from **[61be05d](https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7)** to **[7f68936](https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a)**",
    "created_at": "2021-06-24T15:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[61be05d](https://github.com/sagemath/sagetrac-mirror/commit/61be05df342fb59e8c1856770009608c6d8a11e7)** to **[7f68936](https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a)**



---

archive/issue_comments_518865.json:
```json
{
    "body": "Changed commit from **[7f68936](https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a)** to **[ef80bc3](https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb)**",
    "created_at": "2021-06-24T15:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f68936](https://github.com/sagemath/sagetrac-mirror/commit/7f68936e3191f55025665a8184911c48c364758a)** to **[ef80bc3](https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb)**



---

archive/issue_comments_518866.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb\">ef80bc3</a></td><td><code>update installation scripts</code></td></tr></table>\n",
    "created_at": "2021-06-24T15:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518866",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb">ef80bc3</a></td><td><code>update installation scripts</code></td></tr></table>




---

archive/issue_comments_518867.json:
```json
{
    "body": "Changed commit from **[ef80bc3](https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb)** to **[76226d7](https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f)**",
    "created_at": "2021-06-24T16:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ef80bc3](https://github.com/sagemath/sagetrac-mirror/commit/ef80bc3588b7fd9d6c22f2c20414d438e75822fb)** to **[76226d7](https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f)**



---

archive/issue_comments_518868.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f\">76226d7</a></td><td><code>lcalc 2.0.0 no dependency to mpfr</code></td></tr></table>\n",
    "created_at": "2021-06-24T16:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518868",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f">76226d7</a></td><td><code>lcalc 2.0.0 no dependency to mpfr</code></td></tr></table>




---

archive/issue_comments_518869.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nshould we \"cd src\" in spkg-install ?\n\nI have not managed to install so far with the current branch, \"sage -i lcalc\" complains as follows\n\n```\n[lcalc-2.0.0] Uninstalling 'lcalc' with legacy uninstaller\n[lcalc-2.0.0] Package 'lcalc' is currently not installed\n[lcalc-2.0.0] Now building lcalc, example programs and the shared library...\n[lcalc-2.0.0] Building lcalc-2.0.0\n[lcalc-2.0.0] make[3]: *** No targets specified and no makefile found.  Stop.\n```",
    "created_at": "2021-06-24T17:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518869",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'>Comment 15:</a>
should we "cd src" in spkg-install ?

I have not managed to install so far with the current branch, "sage -i lcalc" complains as follows

```
[lcalc-2.0.0] Uninstalling 'lcalc' with legacy uninstaller
[lcalc-2.0.0] Package 'lcalc' is currently not installed
[lcalc-2.0.0] Now building lcalc, example programs and the shared library...
[lcalc-2.0.0] Building lcalc-2.0.0
[lcalc-2.0.0] make[3]: *** No targets specified and no makefile found.  Stop.
```



---

archive/issue_comments_518870.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI don't understand anything about the build system, so it's likely that this is noise (in which case I apologize), but [dimpase says](https://groups.google.com/g/sage-devel/c/euE9MJnfjAo/m/XOB7X1TxBQAJ) not to use \"sage -i\":\n\n```\nwe are trying to switch to a sane building scheme:\n\n./bootstrap\n./configure\nmake build\nmake pynormaliz\n\nsage -i is an old hack noone should use...\n```\nSo maybe you are supposed to try \"make lcalc\" ?",
    "created_at": "2021-06-24T18:40:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518870",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:16'>Comment 16:</a>
I don't understand anything about the build system, so it's likely that this is noise (in which case I apologize), but [dimpase says](https://groups.google.com/g/sage-devel/c/euE9MJnfjAo/m/XOB7X1TxBQAJ) not to use "sage -i":

```
we are trying to switch to a sane building scheme:

./bootstrap
./configure
make build
make pynormaliz

sage -i is an old hack noone should use...
```
So maybe you are supposed to try "make lcalc" ?



---

archive/issue_comments_518871.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@fchapoton](#comment%3A15):\n> should we \"cd src\" in spkg-install ?\n\nyes",
    "created_at": "2021-06-24T18:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518871",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@fchapoton](#comment%3A15):
> should we "cd src" in spkg-install ?

yes



---

archive/issue_comments_518872.json:
```json
{
    "body": "Changed commit from **[76226d7](https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f)** to **[aa2bb03](https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219)**",
    "created_at": "2021-06-24T22:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[76226d7](https://github.com/sagemath/sagetrac-mirror/commit/76226d74470962d0c31753fa755d558fd9b0e76f)** to **[aa2bb03](https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219)**



---

archive/issue_comments_518873.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219\">aa2bb03</a></td><td><code>Trac #32037: update spkg-configure.m4 for lcalc-2.0.0.</code></td></tr></table>\n",
    "created_at": "2021-06-24T22:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518873",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219">aa2bb03</a></td><td><code>Trac #32037: update spkg-configure.m4 for lcalc-2.0.0.</code></td></tr></table>




---

archive/issue_comments_518874.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nShould .m4 files mix tabs and spaces?",
    "created_at": "2021-06-24T23:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518874",
    "user": "https://github.com/slel"
}
```

<a id='comment:19'>Comment 19:</a>
Should .m4 files mix tabs and spaces?



---

archive/issue_comments_518875.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa\">849de4b</a></td><td><code>Trac #32037: fixup: kill tabs in build/pkgs/lcalc/spkg-configure.m4.</code></td></tr></table>\n",
    "created_at": "2021-06-24T23:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518875",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa">849de4b</a></td><td><code>Trac #32037: fixup: kill tabs in build/pkgs/lcalc/spkg-configure.m4.</code></td></tr></table>




---

archive/issue_comments_518876.json:
```json
{
    "body": "Changed commit from **[aa2bb03](https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219)** to **[849de4b](https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa)**",
    "created_at": "2021-06-24T23:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518876",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa2bb03](https://github.com/sagemath/sagetrac-mirror/commit/aa2bb03392532ab113180bc8aa0b2e80e1867219)** to **[849de4b](https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa)**



---

archive/issue_comments_518877.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@slel](#comment%3A19):\n> Should .m4 files mix tabs and spaces?\n\nAccording to me, no. According to emacs, at every opportunity.",
    "created_at": "2021-06-24T23:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518877",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@slel](#comment%3A19):
> Should .m4 files mix tabs and spaces?

According to me, no. According to emacs, at every opportunity.



---

archive/issue_comments_518878.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nUsing \"make lcalc\", I am still not able to build, with or without \"cd src\".\n\nComplains of missing makefile, as in [comment:17](#comment%3A17)",
    "created_at": "2021-06-25T09:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518878",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'>Comment 22:</a>
Using "make lcalc", I am still not able to build, with or without "cd src".

Complains of missing makefile, as in [comment:17](#comment%3A17)



---

archive/issue_comments_518879.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@fchapoton](#comment%3A22):\n> Using \"make lcalc\", I am still not able to build, with or without \"cd src\".\n> \n> Complains of missing makefile, as in [comment:17](#comment%3A17)\n\nI think you have to get rid of `spkg-build.in`, too.",
    "created_at": "2021-06-25T14:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518879",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@fchapoton](#comment%3A22):
> Using "make lcalc", I am still not able to build, with or without "cd src".
> 
> Complains of missing makefile, as in [comment:17](#comment%3A17)

I think you have to get rid of `spkg-build.in`, too.



---

archive/issue_comments_518880.json:
```json
{
    "body": "Changed commit from **[849de4b](https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa)** to **[7327388](https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd)**",
    "created_at": "2021-06-25T15:49:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518880",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[849de4b](https://github.com/sagemath/sagetrac-mirror/commit/849de4b283a3c460cb8276771e663d7ee3c9d2aa)** to **[7327388](https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd)**



---

archive/issue_comments_518881.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd\">7327388</a></td><td><code>lcalc 2.0.0 towards a working make</code></td></tr></table>\n",
    "created_at": "2021-06-25T15:49:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518881",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd">7327388</a></td><td><code>lcalc 2.0.0 towards a working make</code></td></tr></table>




---

archive/issue_comments_518882.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nok, now \"make lcalc\" starts doing something and stops at\n\n```\n[lcalc-2.0.0] Thread model: posix\n[lcalc-2.0.0] gcc version 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04) \n...\n[lcalc-2.0.0] checking for gengetopt... no\n[lcalc-2.0.0] configure: error: GNU gengetopt is required\n```",
    "created_at": "2021-06-25T15:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518882",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'>Comment 25:</a>
ok, now "make lcalc" starts doing something and stops at

```
[lcalc-2.0.0] Thread model: posix
[lcalc-2.0.0] gcc version 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04) 
...
[lcalc-2.0.0] checking for gengetopt... no
[lcalc-2.0.0] configure: error: GNU gengetopt is required
```



---

archive/issue_comments_518883.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,7 @@\n \n There are a few issues that need to be addressed during the upgrade.\n \n+0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)\n 1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.\n \n 2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).\n``````\n",
    "created_at": "2021-06-25T17:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518883",
    "user": "https://github.com/orlitzky"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,7 @@
 
 There are a few issues that need to be addressed during the upgrade.
 
+0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)
 1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.
 
 2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).
``````




---

archive/issue_comments_518884.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nWell the good news is that it's supposed to do that, but the bad news is that we'll have to add another gengetopt SPKG for lcalc to depend on.",
    "created_at": "2021-06-25T17:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518884",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:26'>Comment 26:</a>
Well the good news is that it's supposed to do that, but the bad news is that we'll have to add another gengetopt SPKG for lcalc to depend on.



---

archive/issue_comments_518885.json:
```json
{
    "body": "Dependencies: **#32061**",
    "created_at": "2021-06-25T17:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518885",
    "user": "https://github.com/orlitzky"
}
```

Dependencies: **#32061**



---

archive/issue_comments_518886.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI posted a branch for review on #32061 to add the missing dependency.",
    "created_at": "2021-06-25T18:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518886",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:27'>Comment 27:</a>
I posted a branch for review on #32061 to add the missing dependency.



---

archive/issue_events_409438.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-26T00:14:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "title_is": "Upgrade to lcalc-2.0.1",
    "title_was": "Upgrade to lcalc-2.0.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409438"
}
```



---

archive/issue_comments_518887.json:
```json
{
    "body": "Changed commit from **[7327388](https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd)** to **[3b44220](https://github.com/sagemath/sagetrac-mirror/commit/3b44220644165a289248bdacc8ea1ab7ce21abca)**",
    "created_at": "2021-06-26T00:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518887",
    "user": "https://github.com/orlitzky"
}
```

Changed commit from **[7327388](https://github.com/sagemath/sagetrac-mirror/commit/73273882b19a12cc84f82452f81212e339a686cd)** to **[3b44220](https://github.com/sagemath/sagetrac-mirror/commit/3b44220644165a289248bdacc8ea1ab7ce21abca)**



---

archive/issue_comments_518888.json:
```json
{
    "body": "Changed branch from **[public/lcalc_version_2](https://github.com/sagemath/sagetrac-mirror/tree/public/lcalc_version_2)** to **[u/mjo/ticket/32037](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/32037)**",
    "created_at": "2021-06-26T00:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518888",
    "user": "https://github.com/orlitzky"
}
```

Changed branch from **[public/lcalc_version_2](https://github.com/sagemath/sagetrac-mirror/tree/public/lcalc_version_2)** to **[u/mjo/ticket/32037](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/32037)**



---

archive/issue_comments_518889.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI figured out how to fix the build scripts... and then found a typo in the upstream configure.ac that I had to release a 2.0.1 to fix. I think this will actually work now.",
    "created_at": "2021-06-26T00:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518889",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:28'>Comment 28:</a>
I figured out how to fix the build scripts... and then found a typo in the upstream configure.ac that I had to release a 2.0.1 to fix. I think this will actually work now.



---

archive/issue_comments_518890.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@DaveWitteMorris](#comment%3A8):\n> FWIW, here is my reading of this code: If all of the coefficients of the Dirichlet series are real (up to a tolerance of `.00001`), then the conjugate of any root is also a root.  (This is what \"self-dual\" must mean.) We do not need to look for roots below the real axis in this case (because they are conjugates of roots that are above the real axis), so `do_negative` is set to `False`. Otherwise, `do_negative` is set to `True`.\n\nThese functions are supposed to \"return the first `n` zeros.\" That's vague, but scrutable if you're starting from the real axis and moving up: basically, the numbers (imaginary parts) it outputs get bigger. I guess when `do_negative` is true, we output the first `n` zeros in *magnitude*?",
    "created_at": "2021-06-26T00:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518890",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@DaveWitteMorris](#comment%3A8):
> FWIW, here is my reading of this code: If all of the coefficients of the Dirichlet series are real (up to a tolerance of `.00001`), then the conjugate of any root is also a root.  (This is what "self-dual" must mean.) We do not need to look for roots below the real axis in this case (because they are conjugates of roots that are above the real axis), so `do_negative` is set to `False`. Otherwise, `do_negative` is set to `True`.

These functions are supposed to "return the first `n` zeros." That's vague, but scrutable if you're starting from the real axis and moving up: basically, the numbers (imaginary parts) it outputs get bigger. I guess when `do_negative` is true, we output the first `n` zeros in *magnitude*?



---

archive/issue_comments_518891.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I've just tagged a 2.0.0 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.0\n+I've just tagged a 2.0.1 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.1\n \n There are a few issues that need to be addressed during the upgrade.\n \n``````\n",
    "created_at": "2021-06-26T12:12:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518891",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I've just tagged a 2.0.0 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.0
+I've just tagged a 2.0.1 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.1
 
 There are a few issues that need to be addressed during the upgrade.
 
``````




---

archive/issue_comments_518892.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f248552456ccd1e78666e5059bd0011e3cadfff5\">f248552</a></td><td><code>Trac #32061: add distro package information for GNU Gengetopt.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37299edba78bcd3a720eae3725a2756e7336b519\">37299ed</a></td><td><code>Trac #32061: add spkg-check.in for gengetopt.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd445a4e3925d9a8729f4c686771d901beff1588\">fd445a4</a></td><td><code>first steps towards lcalc 2.0.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62e2f2ef640754fa3c2880e353d76e2e4d1d1646\">62e2f2e</a></td><td><code>lcalc 2.0.0 removing all patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2658f0d82fbed2d4d69d50d3a8248c2ed0965ff2\">2658f0d</a></td><td><code>update installation scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a09e5a1b7049827037959c555df7f49c4f7e3180\">a09e5a1</a></td><td><code>lcalc 2.0.0 no dependency to mpfr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de1c43de6782e8ef612e4bc7847b9ceacc897514\">de1c43d</a></td><td><code>Trac #32037: update spkg-configure.m4 for lcalc-2.0.0.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/101ec5fdb5c00c9bdbb8967cf589b53cb20e60ec\">101ec5f</a></td><td><code>Trac #32037: have lcalc depend on gengetopt.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24928e92d711e56c3ccbf7356a7623d5622b419e\">24928e9</a></td><td><code>Trac #32037: upgrade lcalc to v2.0.1.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c\">4d5fc58</a></td><td><code>Trac #32037: fix build scripts for lcalc SPKG.</code></td></tr></table>\n",
    "created_at": "2021-06-26T13:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518892",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f248552456ccd1e78666e5059bd0011e3cadfff5">f248552</a></td><td><code>Trac #32061: add distro package information for GNU Gengetopt.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37299edba78bcd3a720eae3725a2756e7336b519">37299ed</a></td><td><code>Trac #32061: add spkg-check.in for gengetopt.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd445a4e3925d9a8729f4c686771d901beff1588">fd445a4</a></td><td><code>first steps towards lcalc 2.0.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62e2f2ef640754fa3c2880e353d76e2e4d1d1646">62e2f2e</a></td><td><code>lcalc 2.0.0 removing all patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2658f0d82fbed2d4d69d50d3a8248c2ed0965ff2">2658f0d</a></td><td><code>update installation scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a09e5a1b7049827037959c555df7f49c4f7e3180">a09e5a1</a></td><td><code>lcalc 2.0.0 no dependency to mpfr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de1c43de6782e8ef612e4bc7847b9ceacc897514">de1c43d</a></td><td><code>Trac #32037: update spkg-configure.m4 for lcalc-2.0.0.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/101ec5fdb5c00c9bdbb8967cf589b53cb20e60ec">101ec5f</a></td><td><code>Trac #32037: have lcalc depend on gengetopt.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24928e92d711e56c3ccbf7356a7623d5622b419e">24928e9</a></td><td><code>Trac #32037: upgrade lcalc to v2.0.1.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c">4d5fc58</a></td><td><code>Trac #32037: fix build scripts for lcalc SPKG.</code></td></tr></table>




---

archive/issue_comments_518893.json:
```json
{
    "body": "Changed commit from **[3b44220](https://github.com/sagemath/sagetrac-mirror/commit/3b44220644165a289248bdacc8ea1ab7ce21abca)** to **[4d5fc58](https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c)**",
    "created_at": "2021-06-26T13:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3b44220](https://github.com/sagemath/sagetrac-mirror/commit/3b44220644165a289248bdacc8ea1ab7ce21abca)** to **[4d5fc58](https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c)**



---

archive/issue_comments_518894.json:
```json
{
    "body": "Changed commit from **[4d5fc58](https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c)** to **[44f2e0d](https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d)**",
    "created_at": "2021-06-28T02:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518894",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4d5fc58](https://github.com/sagemath/sagetrac-mirror/commit/4d5fc586d5cf69adc2ffe5f71d325c52fd86107c)** to **[44f2e0d](https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d)**



---

archive/issue_comments_518895.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51f93f2aa5507f23dc60416e2fa78938fa816dc9\">51f93f2</a></td><td><code>Trac #32037: update libs/lcalc API for lcalc-2.x.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ba3550e8cb945304bf95e563ec486607d8099f\">74ba355</a></td><td><code>Trac #32037: use lcalc-2.x API in libs/lcalc/lcalc_Lfunction.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d\">44f2e0d</a></td><td><code>Trac #32037: update find_zeros_via_N() to match the lcalc-2.x API.</code></td></tr></table>\n",
    "created_at": "2021-06-28T02:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518895",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>Comment 33:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51f93f2aa5507f23dc60416e2fa78938fa816dc9">51f93f2</a></td><td><code>Trac #32037: update libs/lcalc API for lcalc-2.x.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ba3550e8cb945304bf95e563ec486607d8099f">74ba355</a></td><td><code>Trac #32037: use lcalc-2.x API in libs/lcalc/lcalc_Lfunction.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d">44f2e0d</a></td><td><code>Trac #32037: update find_zeros_via_N() to match the lcalc-2.x API.</code></td></tr></table>




---

archive/issue_comments_518896.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@orlitzky](#comment%3A29):\n> Replying to [@DaveWitteMorris](#comment%3A8):\n\n>> ... I guess when `do_negative` is true, we output the first `n` zeros in *magnitude*?\n\nYes, I'm pretty sure that is correct. For example, a comment introducing the `find_zeros` function says \"Finds zeros of L(1/2+It) or of L(1/2+It)*L(1/2-It) (depending on whether self dual or not)\". (The second form will combine the zeros with negative imaginary into the ones with positive imaginary part.) And a comment in the code of the function says \"in the self dual case we only count half the zeros with |t|<T\".",
    "created_at": "2021-06-29T00:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518896",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@orlitzky](#comment%3A29):
> Replying to [@DaveWitteMorris](#comment%3A8):

>> ... I guess when `do_negative` is true, we output the first `n` zeros in *magnitude*?

Yes, I'm pretty sure that is correct. For example, a comment introducing the `find_zeros` function says "Finds zeros of L(1/2+It) or of L(1/2+It)*L(1/2-It) (depending on whether self dual or not)". (The second form will combine the zeros with negative imaginary into the ones with positive imaginary part.) And a comment in the code of the function says "in the self dual case we only count half the zeros with |t|<T".



---

archive/issue_comments_518897.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13da394fb088449048b1a7a75ccae22e077e9eb8\">13da394</a></td><td><code>Trac #32037: ensure lcalc has PRECISION_DOUBLE and HAVE_PARI.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011\">63bbfcc</a></td><td><code>Trac #32037: add Gentoo package information for lcalc.</code></td></tr></table>\n",
    "created_at": "2021-07-01T19:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518897",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>Comment 35:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13da394fb088449048b1a7a75ccae22e077e9eb8">13da394</a></td><td><code>Trac #32037: ensure lcalc has PRECISION_DOUBLE and HAVE_PARI.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011">63bbfcc</a></td><td><code>Trac #32037: add Gentoo package information for lcalc.</code></td></tr></table>




---

archive/issue_comments_518898.json:
```json
{
    "body": "Changed commit from **[44f2e0d](https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d)** to **[63bbfcc](https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011)**",
    "created_at": "2021-07-01T19:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518898",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[44f2e0d](https://github.com/sagemath/sagetrac-mirror/commit/44f2e0d4be583c6143da267c690f8b87e1c2396d)** to **[63bbfcc](https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011)**



---

archive/issue_comments_518899.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93\">8d70dfd</a></td><td><code>Trac 32037: fixup lcalc header name in sage/libs/lcalc/lcalc_sage.h.</code></td></tr></table>\n",
    "created_at": "2021-07-02T23:08:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518899",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'>Comment 36:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93">8d70dfd</a></td><td><code>Trac 32037: fixup lcalc header name in sage/libs/lcalc/lcalc_sage.h.</code></td></tr></table>




---

archive/issue_comments_518900.json:
```json
{
    "body": "Changed commit from **[63bbfcc](https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011)** to **[8d70dfd](https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93)**",
    "created_at": "2021-07-02T23:08:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[63bbfcc](https://github.com/sagemath/sagetrac-mirror/commit/63bbfcc13115411b0caf7d55a7c30638b6acf011)** to **[8d70dfd](https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93)**



---

archive/issue_comments_518901.json:
```json
{
    "body": "Changed commit from **[8d70dfd](https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93)** to **[4c40554](https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa)**",
    "created_at": "2021-07-03T12:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518901",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8d70dfd](https://github.com/sagemath/sagetrac-mirror/commit/8d70dfde098ae5d63cb70212e7587b24fe47ae93)** to **[4c40554](https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa)**



---

archive/issue_comments_518902.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/882bbc236e460e31b8380bb24813fe86c66ad4d7\">882bbc2</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c127ff71a6f6264a48505d933ce1b506a83d40c\">6c127ff</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5404c185f723c5f797b7d230adf73533597035ec\">5404c18</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa\">4c40554</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr></table>\n",
    "created_at": "2021-07-03T12:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518902",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>Comment 37:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/882bbc236e460e31b8380bb24813fe86c66ad4d7">882bbc2</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c127ff71a6f6264a48505d933ce1b506a83d40c">6c127ff</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5404c185f723c5f797b7d230adf73533597035ec">5404c18</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa">4c40554</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr></table>




---

archive/issue_comments_518903.json:
```json
{
    "body": "Changed commit from **[4c40554](https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa)** to **[1b6cdbc](https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515)**",
    "created_at": "2021-07-03T12:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c40554](https://github.com/sagemath/sagetrac-mirror/commit/4c40554f4a852858017bc4ff7cfb5f9e8295b1fa)** to **[1b6cdbc](https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515)**



---

archive/issue_comments_518904.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4a15513018fa86ddee9359d5d0071504af56cb1\">f4a1551</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4ea9c21df75b80dd9b099b77b3a0c019632f06c\">e4ea9c2</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515\">1b6cdbc</a></td><td><code>Trac #32037: replace some ellipeses with abs_tol.</code></td></tr></table>\n",
    "created_at": "2021-07-03T12:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518904",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4a15513018fa86ddee9359d5d0071504af56cb1">f4a1551</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4ea9c21df75b80dd9b099b77b3a0c019632f06c">e4ea9c2</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515">1b6cdbc</a></td><td><code>Trac #32037: replace some ellipeses with abs_tol.</code></td></tr></table>




---

archive/issue_comments_518905.json:
```json
{
    "body": "Changed commit from **[1b6cdbc](https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515)** to **[fec80eb](https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced)**",
    "created_at": "2021-07-03T12:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518905",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1b6cdbc](https://github.com/sagemath/sagetrac-mirror/commit/1b6cdbc50cc308c83392207977aaf96d0fd1d515)** to **[fec80eb](https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced)**



---

archive/issue_comments_518906.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced\">fec80eb</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr></table>\n",
    "created_at": "2021-07-03T12:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518906",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced">fec80eb</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr></table>




---

archive/issue_events_409439.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-03T12:46:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409439"
}
```



---

archive/issue_comments_518907.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nI've fixed all of the problems I know about, and deleted the one remaining failing doctest that no one knows what to do with. Pending a ptestlong, I think it's ready for a serious look.",
    "created_at": "2021-07-03T12:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518907",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:40'>Comment 40:</a>
I've fixed all of the problems I know about, and deleted the one remaining failing doctest that no one knows what to do with. Pending a ptestlong, I think it's ready for a serious look.



---

archive/issue_comments_518908.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nThe branch is red. Is there a merge conflict?",
    "created_at": "2021-07-03T18:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518908",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:41'>Comment 41:</a>
The branch is red. Is there a merge conflict?



---

archive/issue_comments_518909.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nReplying to [@DaveWitteMorris](#comment%3A41):\n> The branch is red. Is there a merge conflict?\n\nProbably the gcc-11 patch that was added for the lcalc SPKG before sage-9.4. I can rebase after my ptestlong finishes.",
    "created_at": "2021-07-03T18:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518909",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:42'>Comment 42:</a>
Replying to [@DaveWitteMorris](#comment%3A41):
> The branch is red. Is there a merge conflict?

Probably the gcc-11 patch that was added for the lcalc SPKG before sage-9.4. I can rebase after my ptestlong finishes.



---

archive/issue_comments_518910.json:
```json
{
    "body": "Changed commit from **[fec80eb](https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced)** to **[1750827](https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404)**",
    "created_at": "2021-07-03T21:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518910",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fec80eb](https://github.com/sagemath/sagetrac-mirror/commit/fec80eb18c6fde27065465c07b8808b8e201cced)** to **[1750827](https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404)**



---

archive/issue_comments_518911.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eab9b441ce1fe67b8fd04eefa2bc0577c57c1fdc\">eab9b44</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404\">1750827</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr></table>\n",
    "created_at": "2021-07-03T21:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518911",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>Comment 43:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eab9b441ce1fe67b8fd04eefa2bc0577c57c1fdc">eab9b44</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404">1750827</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr></table>




---

archive/issue_comments_518912.json:
```json
{
    "body": "Changed commit from **[1750827](https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404)** to **[dce49da](https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e)**",
    "created_at": "2021-07-03T21:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1750827](https://github.com/sagemath/sagetrac-mirror/commit/175082741e57941abf48a7d3365cc0b75f6ca404)** to **[dce49da](https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e)**



---

archive/issue_comments_518913.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e\">dce49da</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>\n",
    "created_at": "2021-07-03T21:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518913",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:44'>Comment 44:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e">dce49da</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>




---

archive/issue_events_409440.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-07-04T08:34:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409440"
}
```



---

archive/issue_events_409441.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-07-04T08:34:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409441"
}
```



---

archive/issue_comments_518914.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nDoesn't merge cleanly on current develop, please rebase",
    "created_at": "2021-07-04T08:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518914",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:45'>Comment 45:</a>
Doesn't merge cleanly on current develop, please rebase



---

archive/issue_comments_518915.json:
```json
{
    "body": "Changed commit from **[dce49da](https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e)** to **[c5d8924](https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f)**",
    "created_at": "2021-07-04T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518915",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dce49da](https://github.com/sagemath/sagetrac-mirror/commit/dce49daa311c2574b934d4ebecdb6e6ee0226e1e)** to **[c5d8924](https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f)**



---

archive/issue_comments_518916.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a4df39703e481fd508df71087e286fcddefcd77\">1a4df39</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e5d57303df7cde0755ecf4b43d02075e569c64\">44e5d57</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1dbfb54fc5ab2ecf921cbf29b7ff6545a98cc34\">d1dbfb5</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a84d284b52bd5226cce7ad6cdf5aa1590523484c\">a84d284</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1727c69c88b074d6ed4e2e40a30aed87e8397d86\">1727c69</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/191147f3aaafbb29e0aa6031e52c4bf1a22e3831\">191147f</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b668c90ccfb5aa3087b0e22ce5e3c78f49ec618\">0b668c9</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e3f55fc41ac9f77d9f3e4e8d1090e4d5094e3ff\">9e3f55f</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fc9b896ff9a9b868a14db1e1c0becb52544f037\">7fc9b89</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f\">c5d8924</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>\n",
    "created_at": "2021-07-04T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518916",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:46'>Comment 46:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a4df39703e481fd508df71087e286fcddefcd77">1a4df39</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e5d57303df7cde0755ecf4b43d02075e569c64">44e5d57</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1dbfb54fc5ab2ecf921cbf29b7ff6545a98cc34">d1dbfb5</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a84d284b52bd5226cce7ad6cdf5aa1590523484c">a84d284</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1727c69c88b074d6ed4e2e40a30aed87e8397d86">1727c69</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/191147f3aaafbb29e0aa6031e52c4bf1a22e3831">191147f</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b668c90ccfb5aa3087b0e22ce5e3c78f49ec618">0b668c9</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e3f55fc41ac9f77d9f3e4e8d1090e4d5094e3ff">9e3f55f</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fc9b896ff9a9b868a14db1e1c0becb52544f037">7fc9b89</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f">c5d8924</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>




---

archive/issue_comments_518917.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nshould be ok now",
    "created_at": "2021-07-04T12:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518917",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:47'>Comment 47:</a>
should be ok now



---

archive/issue_comments_518918.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nThis breaks build of sagelib with GCC 11, which worked fine with 1.23 (will all patches on top)\n\n```\nIn file included from /usr/include/lcalc/Lglobals.h:70,\n                 from /usr/include/lcalc/L.h:43,\n                 from build/cythonized/sage/libs/lcalc/lcalc_sage.h:1,\n                 from build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:676:\n/usr/include/c++/11.1.0/limits: In static member function \u2018static constexpr double std::numeric_limits<double>::min()\u2019:\n/usr/include/c++/11.1.0/limits:1748:44: error: call to non-\u2018constexpr\u2019 function \u2018double lcalc_to_double(const long double&)\u2019\n 1748 |       min() _GLIBCXX_USE_NOEXCEPT { return __DBL_MIN__; }\n      |                                            ^~~~~~~~~~~\n/usr/include/lcalc/Lcommon.h:35:15: note: \u2018double lcalc_to_double(const long double&)\u2019 declared here\n   35 | inline double lcalc_to_double(const long double& x) { return x; }\n      |               ^~~~~~~~~~~~~~~\n```",
    "created_at": "2021-07-04T13:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518918",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:48'>Comment 48:</a>
This breaks build of sagelib with GCC 11, which worked fine with 1.23 (will all patches on top)

```
In file included from /usr/include/lcalc/Lglobals.h:70,
                 from /usr/include/lcalc/L.h:43,
                 from build/cythonized/sage/libs/lcalc/lcalc_sage.h:1,
                 from build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:676:
/usr/include/c++/11.1.0/limits: In static member function ‘static constexpr double std::numeric_limits<double>::min()’:
/usr/include/c++/11.1.0/limits:1748:44: error: call to non-‘constexpr’ function ‘double lcalc_to_double(const long double&)’
 1748 |       min() _GLIBCXX_USE_NOEXCEPT { return __DBL_MIN__; }
      |                                            ^~~~~~~~~~~
/usr/include/lcalc/Lcommon.h:35:15: note: ‘double lcalc_to_double(const long double&)’ declared here
   35 | inline double lcalc_to_double(const long double& x) { return x; }
      |               ^~~~~~~~~~~~~~~
```



---

archive/issue_comments_518919.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nOk, thanks, I'll have to investigate after the holiday (it would take more than a day to build gcc-11 on my laptop). The absence of `constexpr` in lcalc is \"correct,\" since lcalc can use MPFR for its double type and the MPFR type is not a constexpr.",
    "created_at": "2021-07-04T13:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518919",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:49'>Comment 49:</a>
Ok, thanks, I'll have to investigate after the holiday (it would take more than a day to build gcc-11 on my laptop). The absence of `constexpr` in lcalc is "correct," since lcalc can use MPFR for its double type and the MPFR type is not a constexpr.



---

archive/issue_comments_518920.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nwe can add archlinux, or some other way to get gcc 11, on  lcalc CI.\n\nhttps://stackoverflow.com/a/67406788/557937\n\n\nwe can make a macro expanding to constexpr or to \"\", and set it up at configure time.",
    "created_at": "2021-07-04T16:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518920",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'>Comment 50:</a>
we can add archlinux, or some other way to get gcc 11, on  lcalc CI.

https://stackoverflow.com/a/67406788/557937


we can make a macro expanding to constexpr or to "", and set it up at configure time.



---

archive/issue_comments_518921.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nI'm still not 100% sure what's going on, but this is a `-std=c++11` problem and not a gcc-11 problem. If you let gcc-11 pick the standard, everything works. But if you specify `-std=c++11`, then even the following trivial program will fail,\n\n```C\n#include <lcalc/L.h>\n```\n\nThe errors suggest that somehow `lcalc_to_double()` from lcalc is being invoked in the C++ standard library's `min()` function that's just trying to return a constant:\n\n```\nIn file included from /usr/include/lcalc/Lglobals.h:70,\n                 from /usr/include/lcalc/L.h:43,\n                 from conftest.cpp:1:\n/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/include/g++-v11/limits: In static member function 'static constexpr double std::numeric_limits<double>::min()':\n/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/include/g++-v11/limits:1748:44: error: call to non-'constexpr' function 'double lcalc_to_double(const long double&)'\n 1748 |       min() _GLIBCXX_USE_NOEXCEPT { return __DBL_MIN__; }\n```",
    "created_at": "2021-07-05T13:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518921",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:51'>Comment 51:</a>
I'm still not 100% sure what's going on, but this is a `-std=c++11` problem and not a gcc-11 problem. If you let gcc-11 pick the standard, everything works. But if you specify `-std=c++11`, then even the following trivial program will fail,

```C
#include <lcalc/L.h>
```

The errors suggest that somehow `lcalc_to_double()` from lcalc is being invoked in the C++ standard library's `min()` function that's just trying to return a constant:

```
In file included from /usr/include/lcalc/Lglobals.h:70,
                 from /usr/include/lcalc/L.h:43,
                 from conftest.cpp:1:
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/include/g++-v11/limits: In static member function 'static constexpr double std::numeric_limits<double>::min()':
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/include/g++-v11/limits:1748:44: error: call to non-'constexpr' function 'double lcalc_to_double(const long double&)'
 1748 |       min() _GLIBCXX_USE_NOEXCEPT { return __DBL_MIN__; }
```



---

archive/issue_comments_518922.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944\">1a4061a</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr></table>\n",
    "created_at": "2021-07-05T14:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518922",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>Comment 52:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944">1a4061a</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr></table>




---

archive/issue_comments_518923.json:
```json
{
    "body": "Changed commit from **[c5d8924](https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f)** to **[1a4061a](https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944)**",
    "created_at": "2021-07-05T14:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c5d8924](https://github.com/sagemath/sagetrac-mirror/commit/c5d8924a907d40ebc9bd6121fe869ea4acadf85f)** to **[1a4061a](https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944)**



---

archive/issue_events_409442.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-05T14:54:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409442"
}
```



---

archive/issue_events_409443.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-05T14:54:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409443"
}
```



---

archive/issue_comments_518924.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nThere was a recent change that started adding `-std=gnu++11` to our `CXXFLAGS` and broke lcalc. I released lcalc-2.0.2 which should work again.",
    "created_at": "2021-07-05T14:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518924",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:53'>Comment 53:</a>
There was a recent change that started adding `-std=gnu++11` to our `CXXFLAGS` and broke lcalc. I released lcalc-2.0.2 which should work again.



---

archive/issue_events_409444.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-05T14:54:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "title_is": "Upgrade to lcalc-2.0.2",
    "title_was": "Upgrade to lcalc-2.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409444"
}
```



---

archive/issue_comments_518925.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nI confirm sagelib builds fine again with GCC 11",
    "created_at": "2021-07-05T15:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518925",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:54'>Comment 54:</a>
I confirm sagelib builds fine again with GCC 11



---

archive/issue_comments_518926.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nwhat change was adding the -std=gnu++11 ?\n\nit is certainly important that all the Sage  C++ libs are compatible wrt to C++ ABI.",
    "created_at": "2021-07-05T15:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518926",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:55'>Comment 55:</a>
what change was adding the -std=gnu++11 ?

it is certainly important that all the Sage  C++ libs are compatible wrt to C++ ABI.



---

archive/issue_comments_518927.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nI haven't followed the discussion on the ticket, but if a specific C++ standard is needed to use the headers, then it is best to declare it in the `.pxd` file using `distutils: extra_compile_args=-std=c++11`.\n\n`sage_setup.command.sage_build_cython` does set this as a default - but I consider this only legacy behavior of our homegrown build system for sagelib. \n\nIt will have to be tested with `./configure --enable-editable`, which switches the sagelib build to a simpler build system.",
    "created_at": "2021-07-05T16:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518927",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'>Comment 56:</a>
I haven't followed the discussion on the ticket, but if a specific C++ standard is needed to use the headers, then it is best to declare it in the `.pxd` file using `distutils: extra_compile_args=-std=c++11`.

`sage_setup.command.sage_build_cython` does set this as a default - but I consider this only legacy behavior of our homegrown build system for sagelib. 

It will have to be tested with `./configure --enable-editable`, which switches the sagelib build to a simpler build system.



---

archive/issue_comments_518928.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nReplying to [@dimpase](#comment%3A55):\n> what change was adding the -std=gnu++11 ?\n\nThe switch to c++11 is actually pretty old (see e.g. 370c03505f290f). What must have changed is that `-std=gnu++11` started being added earlier in the build process, before we try to detect lcalc (I know *something* changed because detecting lcalc-2.0.1 used to work before I rebased onto develop). Regardless, adding the flag early is the right thing to do if we're ultimately going to be compiling code against these libraries with `-std=gnu++11` in `CXXFLAGS`.\n\nFor me now, that flag gets added while detecting GCC.",
    "created_at": "2021-07-06T15:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518928",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:57'>Comment 57:</a>
Replying to [@dimpase](#comment%3A55):
> what change was adding the -std=gnu++11 ?

The switch to c++11 is actually pretty old (see e.g. 370c03505f290f). What must have changed is that `-std=gnu++11` started being added earlier in the build process, before we try to detect lcalc (I know *something* changed because detecting lcalc-2.0.1 used to work before I rebased onto develop). Regardless, adding the flag early is the right thing to do if we're ultimately going to be compiling code against these libraries with `-std=gnu++11` in `CXXFLAGS`.

For me now, that flag gets added while detecting GCC.



---

archive/issue_comments_518929.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nReplying to [@mkoeppe](#comment%3A56):\n> I haven't followed the discussion on the ticket, but if a specific C++ standard is needed to use the headers, then it is best to declare it in the `.pxd` file using `distutils: extra_compile_args=-std=c++11`.\n\nNo special flags are needed. The latest lcalc-2.0.2 will work with any of the 11, 14, or 17 standards.",
    "created_at": "2021-07-06T15:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518929",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:58'>Comment 58:</a>
Replying to [@mkoeppe](#comment%3A56):
> I haven't followed the discussion on the ticket, but if a specific C++ standard is needed to use the headers, then it is best to declare it in the `.pxd` file using `distutils: extra_compile_args=-std=c++11`.

No special flags are needed. The latest lcalc-2.0.2 will work with any of the 11, 14, or 17 standards.



---

archive/issue_comments_518930.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nWith my distro packages, getting one test failure only\n\n```\nFile \"/usr/lib/python3.9/site-packages/sage/lfunctions/zero_sums.pyx\", line 832, in sage.lfunctions.zero_sums.LFunctionZeroSum_abstract._zerosum_cauchy\nFailed example:\n    E.lseries().zeros(2)\nExpected:\n    [6.36261389, 8.60353962]\nGot:\n    [6.36261390, 8.60353962]\n**********************************************************************\n```",
    "created_at": "2021-07-07T06:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518930",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:59'>Comment 59:</a>
With my distro packages, getting one test failure only

```
File "/usr/lib/python3.9/site-packages/sage/lfunctions/zero_sums.pyx", line 832, in sage.lfunctions.zero_sums.LFunctionZeroSum_abstract._zerosum_cauchy
Failed example:
    E.lseries().zeros(2)
Expected:
    [6.36261389, 8.60353962]
Got:
    [6.36261390, 8.60353962]
**********************************************************************
```



---

archive/issue_comments_518931.json:
```json
{
    "body": "Changed commit from **[1a4061a](https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944)** to **[12ac186](https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807)**",
    "created_at": "2021-07-07T11:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1a4061a](https://github.com/sagemath/sagetrac-mirror/commit/1a4061a098519973bd3085db3c7414bdb37ce944)** to **[12ac186](https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807)**



---

archive/issue_comments_518932.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807\">12ac186</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr></table>\n",
    "created_at": "2021-07-07T11:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518932",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:60'>Comment 60:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807">12ac186</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr></table>




---

archive/issue_comments_518933.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\ntests run on https://github.com/sagemath/sagetrac-mirror/actions/runs/1009717554",
    "created_at": "2021-07-07T22:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518933",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:61'>Comment 61:</a>
tests run on https://github.com/sagemath/sagetrac-mirror/actions/runs/1009717554



---

archive/issue_comments_518934.json:
```json
{
    "body": "Changed commit from **[12ac186](https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807)** to **[2d13818](https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4)**",
    "created_at": "2021-07-13T18:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[12ac186](https://github.com/sagemath/sagetrac-mirror/commit/12ac186b28f7a49469a3019f3a39ac313d656807)** to **[2d13818](https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4)**



---

archive/issue_comments_518935.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f58d06e15acf7a74cc5d6808a67ccdcb8dd5454d\">f58d06e</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f6911772f7c351ce6bb515f9b33a8bb7b7b89fe\">3f69117</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b642382defcef7381bc97906ea44d1fba5e0eb9e\">b642382</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51750e325acb3c40aca45446589beeee2bf10cf8\">51750e3</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eeb0730525be086cb779b76e5f286ae8db52619\">0eeb073</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c99d844a325b251e39084f5db1fe53319bc61967\">c99d844</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/300ee8971674f1507a44d3c882de06f85d09a406\">300ee89</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10123527ce580be55cf778fc23a5f7df32ea844e\">1012352</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57d4c29d05fb1ae8ae9307cd5b2d20ce2212d413\">57d4c29</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4\">2d13818</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr></table>\n",
    "created_at": "2021-07-13T18:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518935",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:62'>Comment 62:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f58d06e15acf7a74cc5d6808a67ccdcb8dd5454d">f58d06e</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f6911772f7c351ce6bb515f9b33a8bb7b7b89fe">3f69117</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b642382defcef7381bc97906ea44d1fba5e0eb9e">b642382</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51750e325acb3c40aca45446589beeee2bf10cf8">51750e3</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eeb0730525be086cb779b76e5f286ae8db52619">0eeb073</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c99d844a325b251e39084f5db1fe53319bc61967">c99d844</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/300ee8971674f1507a44d3c882de06f85d09a406">300ee89</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10123527ce580be55cf778fc23a5f7df32ea844e">1012352</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57d4c29d05fb1ae8ae9307cd5b2d20ce2212d413">57d4c29</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4">2d13818</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr></table>




---

archive/issue_comments_518936.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I've just tagged a 2.0.1 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.1\n+I've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3\n \n There are a few issues that need to be addressed during the upgrade.\n \n``````\n",
    "created_at": "2021-07-13T18:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518936",
    "user": "https://github.com/orlitzky"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I've just tagged a 2.0.1 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.1
+I've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3
 
 There are a few issues that need to be addressed during the upgrade.
 
``````




---

archive/issue_comments_518937.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nI accidentally broke the soname in the last version, so here's v2.0.3 to fix it. Also rebased onto the latest gengetopt branch.",
    "created_at": "2021-07-13T18:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518937",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:63'>Comment 63:</a>
I accidentally broke the soname in the last version, so here's v2.0.3 to fix it. Also rebased onto the latest gengetopt branch.



---

archive/issue_events_409445.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-13T18:50:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "title_is": "Upgrade to lcalc-2.0.3",
    "title_was": "Upgrade to lcalc-2.0.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409445"
}
```



---

archive/issue_events_409446.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409446"
}
```



---

archive/issue_events_409447.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409447"
}
```



---

archive/issue_comments_518938.json:
```json
{
    "body": "Changed commit from **[2d13818](https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4)** to **[dd656cf](https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1)**",
    "created_at": "2021-07-19T12:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d13818](https://github.com/sagemath/sagetrac-mirror/commit/2d138187193b0661ee950b7a59af7b8b70fc3bf4)** to **[dd656cf](https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1)**



---

archive/issue_comments_518939.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1\">dd656cf</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr></table>\n",
    "created_at": "2021-07-19T12:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518939",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:65'>Comment 65:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1">dd656cf</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr></table>




---

archive/issue_comments_518940.json:
```json
{
    "body": "Author: **Michael Orlitzky, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2021-08-19T21:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518940",
    "user": "https://github.com/slel"
}
```

Author: **Michael Orlitzky, Frédéric Chapoton**



---

archive/issue_events_409448.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-10-29T06:24:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409448"
}
```



---

archive/issue_events_409449.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-10-29T06:24:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409449"
}
```



---

archive/issue_comments_518941.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nI've been shipping this downstream for 3 months without issues",
    "created_at": "2021-10-29T06:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518941",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:67'>Comment 67:</a>
I've been shipping this downstream for 3 months without issues



---

archive/issue_comments_518942.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nTicket description should be cleaned up",
    "created_at": "2021-10-29T06:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518942",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:68'>Comment 68:</a>
Ticket description should be cleaned up



---

archive/issue_comments_518943.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nI tried to reduce the ticket description to a digest.\n\nNot sure what the conclusion was on item 7, so I left that out.\n\nThe ticket description from before my edit is reproduced below.\n\n---\n\nI've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3\n\nThere are a few issues that need to be addressed during the upgrade.\n\n0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)\n1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.\n\n2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).\n\n3. spkg-configure.m4 should be modified to find the new version, for example...\n\n```patch\ndiff --git a/build/pkgs/lcalc/spkg-configure.m4 b/build/pkgs/lcalc/spkg-configure.m4\nindex 19a87c8d30..b332294eae 100644\n--- a/build/pkgs/lcalc/spkg-configure.m4\n+++ b/build/pkgs/lcalc/spkg-configure.m4\n@@ -1,20 +1,20 @@\n SAGE_SPKG_CONFIGURE([lcalc], [\n-    m4_pushdef([SAGE_LCALC_MINVER],[\"1.22\"])\n-    SAGE_SPKG_DEPCHECK([pari mpfr], [\n+    m4_pushdef([SAGE_LCALC_MINVER],[\"2.0.0\"])\n+    SAGE_SPKG_DEPCHECK([pari], [\n         AC_PATH_PROG([LCALC], [lcalc])\n         AS_IF([test x$LCALC = x], [\n            AC_MSG_NOTICE([lcalc not found. Installing lcalc])\n            sage_spkg_install_lcalc=yes], [\n            AC_MSG_CHECKING([is lcalc's version good enough? ])\n-           lcalc_ver=`$LCALC --version 2>>/dev/null | $SED -e 's/lcalc\\ //' | $SED -e 's/\\ .*//g'`\n+           lcalc_ver=$($LCALC --version 2>>/dev/null | $SED -e 's/lcalc\\ //' | cut -d' ' -f2)\n            AX_COMPARE_VERSION([$lcalc_ver], [ge], [$SAGE_LCALC_MINVER], [\n                AC_MSG_RESULT([yes.])\n-               AC_CHECK_HEADER([Lfunction/L.h], [], [sage_spkg_install_lcalc=yes])\n+               AC_CHECK_HEADER([lcalc/L.h], [], [sage_spkg_install_lcalc=yes])\n           AC_MSG_CHECKING([whether we can link and run a program using libLfunction])\n           LCALC_SAVED_LIBS=$LIBS\n           LIBS=\"$LIBS -lLfunction\"\n           AC_RUN_IFELSE([\n-            AC_LANG_PROGRAM([[#include <Lfunction/L.h>]],\n+            AC_LANG_PROGRAM([[#include <lcalc/L.h>]],\n                       [[initialize_globals();\n                         Complex x;\n                         x = Pi*I;\n```\n\nHowever, lcalc-2.0.0 comes with a pkg-config file, so we could greatly simplify that.\n\n4. The public API header has moved to `lcalc/L.h`:\n\n```patch\ndiff --git a/src/sage/libs/lcalc/lcalc_sage.h b/src/sage/libs/lcalc/lcalc_sage.h\nindex 498528917f..18e5232cbe 100644\n--- a/src/sage/libs/lcalc/lcalc_sage.h\n+++ b/src/sage/libs/lcalc/lcalc_sage.h\n@@ -1,4 +1,4 @@\n-#include \"Lfunction/L.h\"\n+#include \"lcalc/L.h\"\n int *new_ints(int l)\n {\n     return new int[l];\n\n```\n\n5. The `find_zeros_via_N_v()` function was removed, and replaced by `find_zeros()`. Here's a patch:\n\n```patch\ndiff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pxd b/src/sage/libs/lcalc/lcalc_Lfunction.pxd\nindex d1dbb5d95d..5edf0844f3 100644\n--- a/src/sage/libs/lcalc/lcalc_Lfunction.pxd\n+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pxd\n@@ -21,7 +21,7 @@ cdef extern from \"lcalc_sage.h\":\n         int (* compute_rank) ()\n         double (* N) (double T)\n         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n         void (*print_data_L)()\n \n         #Constructor and destructor\n@@ -38,7 +38,7 @@ cdef extern from \"lcalc_sage.h\":\n         double (* N) (double T)\n         double *dirichlet_coefficient\n         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n         void (*print_data_L)()\n \n         #Constructor and destructor\n@@ -54,7 +54,7 @@ cdef extern from \"lcalc_sage.h\":\n         int (* compute_rank) ()\n         double (* N) (double T)\n         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n         void (*print_data_L)()\n \n         #Constructor and destructor\n@@ -70,7 +70,7 @@ cdef extern from \"lcalc_sage.h\":\n         int (* compute_rank) ()\n         double (* N) (double T)\n         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)#puts result in vector<double> result\n+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n         void (*find_zeros_via_N)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, char *filename) #puts result in filename\n \n         #Constructor and destructor\n@@ -111,7 +111,7 @@ cdef class Lfunction:\n     #strange bug, replacing Double with double gives me a compile error\n     cdef Double __typedN(self, double T)\n     cdef void __find_zeros_v(self, double T1, double T2, double stepsize,doublevec *result)\n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula,doublevec *result)\n+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n \n     cdef str _repr\n\n```\n\n```patch\ndiff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pyx b/src/sage/libs/lcalc/lcalc_Lfunction.pyx\nindex 7e54d7e78d..409987c5d0 100644\n--- a/src/sage/libs/lcalc/lcalc_Lfunction.pyx\n+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pyx\n@@ -307,8 +307,7 @@ cdef class Lfunction:\n         return returnvalue\n \n     #The default values are from L.h. See L.h\n-    def find_zeros_via_N(self, count=0, do_negative=False, max_refine=1025,\n-                         rank=-1, test_explicit_formula=0):\n+    def find_zeros_via_N(self, count=0, start=0, max_refine=1025, rank=-1):\n         \"\"\"\n         Finds ``count`` number of zeros with positive imaginary part\n         starting at real axis. This function also verifies that all\n@@ -317,8 +316,7 @@ cdef class Lfunction:\n         INPUT:\n \n         - ``count`` - number of zeros to be found\n-        - ``do_negative`` - (default: False) False to ignore zeros below the\n-          real axis.\n+        - ``start`` - (default: 0) how many initial zeros to skip\n         - ``max_refine`` - when some zeros are found to be missing, the step\n           size used to find zeros is refined. max_refine gives an upper limit\n           on when lcalc should give up. Use default value unless you know\n@@ -326,13 +324,9 @@ cdef class Lfunction:\n         - ``rank`` - integer (default: -1) analytic rank of the L-function.\n           If -1 is passed, then we attempt to compute it. (Use default if in\n           doubt)\n-        - ``test_explicit_formula`` - integer (default: 0) If nonzero, test\n-          the explicit formula for additional confidence that all the zeros\n-          have been found and are accurate. This is still being tested, so\n-          using the default is recommended.\n \n         OUTPUT:\n-        \n+\n         list -- A list of the imaginary parts of the zeros that have been found\n \n         EXAMPLES::\n@@ -356,14 +350,10 @@ cdef class Lfunction:\n             sage: L.find_zeros_via_N(3)\n             [14.1347251417..., 21.0220396387..., 25.0108575801...]\n         \"\"\"\n-        cdef Integer count_I = Integer(count)\n-        cdef Integer do_negative_I = Integer(do_negative)\n-        cdef RealNumber max_refine_R = RRR(max_refine)\n-        cdef Integer rank_I = Integer(rank)\n-        cdef Integer test_explicit_I = Integer(test_explicit_formula)\n+        cdef const char *message_stamp = \"\"\n         cdef doublevec result\n         sig_on()\n-        self.__find_zeros_via_N_v(mpz_get_si(count_I.value), mpz_get_si(do_negative_I.value), mpfr_get_d(max_refine_R.value, MPFR_RNDN), mpz_get_si(rank_I.value), mpz_get_si(test_explicit_I.value), &result)\n+        self.__find_zeros(count, start, max_refine, rank, message_stamp, &result)\n         sig_off()\n         returnvalue = []\n         for i in range(result.size()):\n@@ -390,7 +380,7 @@ cdef class Lfunction:\n     cdef void __find_zeros_v(self,double T1, double T2, double stepsize, doublevec *result):\n         raise NotImplementedError\n \n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n         raise NotImplementedError\n \n ##############################################################################\n@@ -486,8 +476,8 @@ cdef class Lfunction_I(Lfunction):\n     cdef double __typedN(self, double T):\n         return (<c_Lfunction_I *>self.thisptr).N(T)\n \n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n-        (<c_Lfunction_I *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n+        (<c_Lfunction_I *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n \n     # debug tools\n     def _print_data_to_standard_output(self):\n@@ -624,8 +614,8 @@ cdef class Lfunction_D(Lfunction):\n     cdef double __typedN(self, double T):\n         return (<c_Lfunction_D *>self.thisptr).N(T)\n \n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n-        (<c_Lfunction_D *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n+    cdef int __find_zeros(self, long count, long start,double max_refine, int rank, const char* message_stamp, doublevec *result):\n+        (<c_Lfunction_D *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n \n     # debug tools\n     def _print_data_to_standard_output(self):\n@@ -769,8 +759,8 @@ cdef class Lfunction_C:\n     cdef double __typedN(self, double T):\n         return (<c_Lfunction_C *>self.thisptr).N(T)\n \n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n-        (<c_Lfunction_C *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n+        (<c_Lfunction_C *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n \n     # debug tools\n     def _print_data_to_standard_output(self):\n@@ -854,8 +844,8 @@ cdef class Lfunction_Zeta(Lfunction):\n     cdef double __typedN(self, double T):\n         return (<c_Lfunction_Zeta *>self.thisptr).N(T)\n \n-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n-        (<c_Lfunction_Zeta *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n+        (<c_Lfunction_Zeta *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n \n     def __dealloc__(self):\n         \"\"\"\n```\n\n6. Some tests need tolerance updates because the answers have changed slightly.\n\n7. Two tests give different answers entirely and require help from someone who knows what an L-function is. These are discussed on #24820 as well:\n\n```\n**********************************************************************\nFile \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\nFailed example:\n    L.hardy_z_function(.4+.3*I)\nExpected:\n    0.2166144222685... - 0.00408187127850...*I\nGot:\n    0.0240947990422036 + 0.215308871779581*I\n**********************************************************************\nFile \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 350, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.find_zeros_via_N\nFailed example:\n    L.find_zeros_via_N(3)\nExpected:\n    [6.18357819545..., 8.45722917442..., 12.6749464170...]\nGot:\n    [-4.13290370521286, 6.18357819545086, 8.45722917442320]\n**********************************************************************\n```",
    "created_at": "2021-10-29T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518943",
    "user": "https://github.com/slel"
}
```

<a id='comment:69'>Comment 69:</a>
I tried to reduce the ticket description to a digest.

Not sure what the conclusion was on item 7, so I left that out.

The ticket description from before my edit is reproduced below.

---

I've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3

There are a few issues that need to be addressed during the upgrade.

0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)
1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.

2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).

3. spkg-configure.m4 should be modified to find the new version, for example...

```patch
diff --git a/build/pkgs/lcalc/spkg-configure.m4 b/build/pkgs/lcalc/spkg-configure.m4
index 19a87c8d30..b332294eae 100644
--- a/build/pkgs/lcalc/spkg-configure.m4
+++ b/build/pkgs/lcalc/spkg-configure.m4
@@ -1,20 +1,20 @@
 SAGE_SPKG_CONFIGURE([lcalc], [
-    m4_pushdef([SAGE_LCALC_MINVER],["1.22"])
-    SAGE_SPKG_DEPCHECK([pari mpfr], [
+    m4_pushdef([SAGE_LCALC_MINVER],["2.0.0"])
+    SAGE_SPKG_DEPCHECK([pari], [
         AC_PATH_PROG([LCALC], [lcalc])
         AS_IF([test x$LCALC = x], [
            AC_MSG_NOTICE([lcalc not found. Installing lcalc])
            sage_spkg_install_lcalc=yes], [
            AC_MSG_CHECKING([is lcalc's version good enough? ])
-           lcalc_ver=`$LCALC --version 2>>/dev/null | $SED -e 's/lcalc\ //' | $SED -e 's/\ .*//g'`
+           lcalc_ver=$($LCALC --version 2>>/dev/null | $SED -e 's/lcalc\ //' | cut -d' ' -f2)
            AX_COMPARE_VERSION([$lcalc_ver], [ge], [$SAGE_LCALC_MINVER], [
                AC_MSG_RESULT([yes.])
-               AC_CHECK_HEADER([Lfunction/L.h], [], [sage_spkg_install_lcalc=yes])
+               AC_CHECK_HEADER([lcalc/L.h], [], [sage_spkg_install_lcalc=yes])
           AC_MSG_CHECKING([whether we can link and run a program using libLfunction])
           LCALC_SAVED_LIBS=$LIBS
           LIBS="$LIBS -lLfunction"
           AC_RUN_IFELSE([
-            AC_LANG_PROGRAM([[#include <Lfunction/L.h>]],
+            AC_LANG_PROGRAM([[#include <lcalc/L.h>]],
                       [[initialize_globals();
                         Complex x;
                         x = Pi*I;
```

However, lcalc-2.0.0 comes with a pkg-config file, so we could greatly simplify that.

4. The public API header has moved to `lcalc/L.h`:

```patch
diff --git a/src/sage/libs/lcalc/lcalc_sage.h b/src/sage/libs/lcalc/lcalc_sage.h
index 498528917f..18e5232cbe 100644
--- a/src/sage/libs/lcalc/lcalc_sage.h
+++ b/src/sage/libs/lcalc/lcalc_sage.h
@@ -1,4 +1,4 @@
-#include "Lfunction/L.h"
+#include "lcalc/L.h"
 int *new_ints(int l)
 {
     return new int[l];

```

5. The `find_zeros_via_N_v()` function was removed, and replaced by `find_zeros()`. Here's a patch:

```patch
diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pxd b/src/sage/libs/lcalc/lcalc_Lfunction.pxd
index d1dbb5d95d..5edf0844f3 100644
--- a/src/sage/libs/lcalc/lcalc_Lfunction.pxd
+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pxd
@@ -21,7 +21,7 @@ cdef extern from "lcalc_sage.h":
         int (* compute_rank) ()
         double (* N) (double T)
         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
         void (*print_data_L)()
 
         #Constructor and destructor
@@ -38,7 +38,7 @@ cdef extern from "lcalc_sage.h":
         double (* N) (double T)
         double *dirichlet_coefficient
         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
         void (*print_data_L)()
 
         #Constructor and destructor
@@ -54,7 +54,7 @@ cdef extern from "lcalc_sage.h":
         int (* compute_rank) ()
         double (* N) (double T)
         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
         void (*print_data_L)()
 
         #Constructor and destructor
@@ -70,7 +70,7 @@ cdef extern from "lcalc_sage.h":
         int (* compute_rank) ()
         double (* N) (double T)
         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
-        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)#puts result in vector<double> result
+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
         void (*find_zeros_via_N)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, char *filename) #puts result in filename
 
         #Constructor and destructor
@@ -111,7 +111,7 @@ cdef class Lfunction:
     #strange bug, replacing Double with double gives me a compile error
     cdef Double __typedN(self, double T)
     cdef void __find_zeros_v(self, double T1, double T2, double stepsize,doublevec *result)
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula,doublevec *result)
+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
 
     cdef str _repr

```

```patch
diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pyx b/src/sage/libs/lcalc/lcalc_Lfunction.pyx
index 7e54d7e78d..409987c5d0 100644
--- a/src/sage/libs/lcalc/lcalc_Lfunction.pyx
+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pyx
@@ -307,8 +307,7 @@ cdef class Lfunction:
         return returnvalue
 
     #The default values are from L.h. See L.h
-    def find_zeros_via_N(self, count=0, do_negative=False, max_refine=1025,
-                         rank=-1, test_explicit_formula=0):
+    def find_zeros_via_N(self, count=0, start=0, max_refine=1025, rank=-1):
         """
         Finds ``count`` number of zeros with positive imaginary part
         starting at real axis. This function also verifies that all
@@ -317,8 +316,7 @@ cdef class Lfunction:
         INPUT:
 
         - ``count`` - number of zeros to be found
-        - ``do_negative`` - (default: False) False to ignore zeros below the
-          real axis.
+        - ``start`` - (default: 0) how many initial zeros to skip
         - ``max_refine`` - when some zeros are found to be missing, the step
           size used to find zeros is refined. max_refine gives an upper limit
           on when lcalc should give up. Use default value unless you know
@@ -326,13 +324,9 @@ cdef class Lfunction:
         - ``rank`` - integer (default: -1) analytic rank of the L-function.
           If -1 is passed, then we attempt to compute it. (Use default if in
           doubt)
-        - ``test_explicit_formula`` - integer (default: 0) If nonzero, test
-          the explicit formula for additional confidence that all the zeros
-          have been found and are accurate. This is still being tested, so
-          using the default is recommended.
 
         OUTPUT:
-        
+
         list -- A list of the imaginary parts of the zeros that have been found
 
         EXAMPLES::
@@ -356,14 +350,10 @@ cdef class Lfunction:
             sage: L.find_zeros_via_N(3)
             [14.1347251417..., 21.0220396387..., 25.0108575801...]
         """
-        cdef Integer count_I = Integer(count)
-        cdef Integer do_negative_I = Integer(do_negative)
-        cdef RealNumber max_refine_R = RRR(max_refine)
-        cdef Integer rank_I = Integer(rank)
-        cdef Integer test_explicit_I = Integer(test_explicit_formula)
+        cdef const char *message_stamp = ""
         cdef doublevec result
         sig_on()
-        self.__find_zeros_via_N_v(mpz_get_si(count_I.value), mpz_get_si(do_negative_I.value), mpfr_get_d(max_refine_R.value, MPFR_RNDN), mpz_get_si(rank_I.value), mpz_get_si(test_explicit_I.value), &result)
+        self.__find_zeros(count, start, max_refine, rank, message_stamp, &result)
         sig_off()
         returnvalue = []
         for i in range(result.size()):
@@ -390,7 +380,7 @@ cdef class Lfunction:
     cdef void __find_zeros_v(self,double T1, double T2, double stepsize, doublevec *result):
         raise NotImplementedError
 
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
         raise NotImplementedError
 
 ##############################################################################
@@ -486,8 +476,8 @@ cdef class Lfunction_I(Lfunction):
     cdef double __typedN(self, double T):
         return (<c_Lfunction_I *>self.thisptr).N(T)
 
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
-        (<c_Lfunction_I *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
+        (<c_Lfunction_I *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
 
     # debug tools
     def _print_data_to_standard_output(self):
@@ -624,8 +614,8 @@ cdef class Lfunction_D(Lfunction):
     cdef double __typedN(self, double T):
         return (<c_Lfunction_D *>self.thisptr).N(T)
 
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
-        (<c_Lfunction_D *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
+    cdef int __find_zeros(self, long count, long start,double max_refine, int rank, const char* message_stamp, doublevec *result):
+        (<c_Lfunction_D *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
 
     # debug tools
     def _print_data_to_standard_output(self):
@@ -769,8 +759,8 @@ cdef class Lfunction_C:
     cdef double __typedN(self, double T):
         return (<c_Lfunction_C *>self.thisptr).N(T)
 
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
-        (<c_Lfunction_C *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
+        (<c_Lfunction_C *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
 
     # debug tools
     def _print_data_to_standard_output(self):
@@ -854,8 +844,8 @@ cdef class Lfunction_Zeta(Lfunction):
     cdef double __typedN(self, double T):
         return (<c_Lfunction_Zeta *>self.thisptr).N(T)
 
-    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
-        (<c_Lfunction_Zeta *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
+        (<c_Lfunction_Zeta *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
 
     def __dealloc__(self):
         """
```

6. Some tests need tolerance updates because the answers have changed slightly.

7. Two tests give different answers entirely and require help from someone who knows what an L-function is. These are discussed on #24820 as well:

```
**********************************************************************
File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
Failed example:
    L.hardy_z_function(.4+.3*I)
Expected:
    0.2166144222685... - 0.00408187127850...*I
Got:
    0.0240947990422036 + 0.215308871779581*I
**********************************************************************
File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 350, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.find_zeros_via_N
Failed example:
    L.find_zeros_via_N(3)
Expected:
    [6.18357819545..., 8.45722917442..., 12.6749464170...]
Got:
    [-4.13290370521286, 6.18357819545086, 8.45722917442320]
**********************************************************************
```



---

archive/issue_comments_518944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,251 +1,17 @@\n-I've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3\n+The new lcalc 2.0.3 has been released.\n+Note in particular:\n \n-There are a few issues that need to be addressed during the upgrade.\n+- sane build system\n+- comes with a pkg-config file\n+- public API header has moved to `lcalc/L.h`\n+- the `find_zeros_via_N_v()` function was removed\n+  and replaced by `find_zeros()`\n \n-0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)\n-1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.\n+In this ticket we upgrade to lcalc 2.0.3 and:\n \n-2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).\n+- add gengetopt as a new standard SPKG\n+- adjust dependencies\n+- adjust spkg-* files for the saner build system\n+- adjust spkg-configure.m4 to find the new version\n+- adjust tolerance in some doctests\n \n-3. spkg-configure.m4 should be modified to find the new version, for example...\n-\n-```patch\n-diff --git a/build/pkgs/lcalc/spkg-configure.m4 b/build/pkgs/lcalc/spkg-configure.m4\n-index 19a87c8d30..b332294eae 100644\n---- a/build/pkgs/lcalc/spkg-configure.m4\n-+++ b/build/pkgs/lcalc/spkg-configure.m4\n-@@ -1,20 +1,20 @@\n- SAGE_SPKG_CONFIGURE([lcalc], [\n--    m4_pushdef([SAGE_LCALC_MINVER],[\"1.22\"])\n--    SAGE_SPKG_DEPCHECK([pari mpfr], [\n-+    m4_pushdef([SAGE_LCALC_MINVER],[\"2.0.0\"])\n-+    SAGE_SPKG_DEPCHECK([pari], [\n-         AC_PATH_PROG([LCALC], [lcalc])\n-         AS_IF([test x$LCALC = x], [\n-            AC_MSG_NOTICE([lcalc not found. Installing lcalc])\n-            sage_spkg_install_lcalc=yes], [\n-            AC_MSG_CHECKING([is lcalc's version good enough? ])\n--           lcalc_ver=`$LCALC --version 2>>/dev/null | $SED -e 's/lcalc\\ //' | $SED -e 's/\\ .*//g'`\n-+           lcalc_ver=$($LCALC --version 2>>/dev/null | $SED -e 's/lcalc\\ //' | cut -d' ' -f2)\n-            AX_COMPARE_VERSION([$lcalc_ver], [ge], [$SAGE_LCALC_MINVER], [\n-                AC_MSG_RESULT([yes.])\n--               AC_CHECK_HEADER([Lfunction/L.h], [], [sage_spkg_install_lcalc=yes])\n-+               AC_CHECK_HEADER([lcalc/L.h], [], [sage_spkg_install_lcalc=yes])\n-           AC_MSG_CHECKING([whether we can link and run a program using libLfunction])\n-           LCALC_SAVED_LIBS=$LIBS\n-           LIBS=\"$LIBS -lLfunction\"\n-           AC_RUN_IFELSE([\n--            AC_LANG_PROGRAM([[#include <Lfunction/L.h>]],\n-+            AC_LANG_PROGRAM([[#include <lcalc/L.h>]],\n-                       [[initialize_globals();\n-                         Complex x;\n-                         x = Pi*I;\n-```\n-\n-However, lcalc-2.0.0 comes with a pkg-config file, so we could greatly simplify that.\n-\n-4. The public API header has moved to `lcalc/L.h`:\n-\n-```patch\n-diff --git a/src/sage/libs/lcalc/lcalc_sage.h b/src/sage/libs/lcalc/lcalc_sage.h\n-index 498528917f..18e5232cbe 100644\n---- a/src/sage/libs/lcalc/lcalc_sage.h\n-+++ b/src/sage/libs/lcalc/lcalc_sage.h\n-@@ -1,4 +1,4 @@\n--#include \"Lfunction/L.h\"\n-+#include \"lcalc/L.h\"\n- int *new_ints(int l)\n- {\n-     return new int[l];\n-\n-```\n-\n-5. The `find_zeros_via_N_v()` function was removed, and replaced by `find_zeros()`. Here's a patch:\n-\n-```patch\n-diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pxd b/src/sage/libs/lcalc/lcalc_Lfunction.pxd\n-index d1dbb5d95d..5edf0844f3 100644\n---- a/src/sage/libs/lcalc/lcalc_Lfunction.pxd\n-+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pxd\n-@@ -21,7 +21,7 @@ cdef extern from \"lcalc_sage.h\":\n-         int (* compute_rank) ()\n-         double (* N) (double T)\n-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n-         void (*print_data_L)()\n- \n-         #Constructor and destructor\n-@@ -38,7 +38,7 @@ cdef extern from \"lcalc_sage.h\":\n-         double (* N) (double T)\n-         double *dirichlet_coefficient\n-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n-         void (*print_data_L)()\n- \n-         #Constructor and destructor\n-@@ -54,7 +54,7 @@ cdef extern from \"lcalc_sage.h\":\n-         int (* compute_rank) ()\n-         double (* N) (double T)\n-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)\n-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n-         void (*print_data_L)()\n- \n-         #Constructor and destructor\n-@@ -70,7 +70,7 @@ cdef extern from \"lcalc_sage.h\":\n-         int (* compute_rank) ()\n-         double (* N) (double T)\n-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )\n--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)#puts result in vector<double> result\n-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n-         void (*find_zeros_via_N)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, char *filename) #puts result in filename\n- \n-         #Constructor and destructor\n-@@ -111,7 +111,7 @@ cdef class Lfunction:\n-     #strange bug, replacing Double with double gives me a compile error\n-     cdef Double __typedN(self, double T)\n-     cdef void __find_zeros_v(self, double T1, double T2, double stepsize,doublevec *result)\n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula,doublevec *result)\n-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)\n- \n-     cdef str _repr\n-\n-```\n-\n-```patch\n-diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pyx b/src/sage/libs/lcalc/lcalc_Lfunction.pyx\n-index 7e54d7e78d..409987c5d0 100644\n---- a/src/sage/libs/lcalc/lcalc_Lfunction.pyx\n-+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pyx\n-@@ -307,8 +307,7 @@ cdef class Lfunction:\n-         return returnvalue\n- \n-     #The default values are from L.h. See L.h\n--    def find_zeros_via_N(self, count=0, do_negative=False, max_refine=1025,\n--                         rank=-1, test_explicit_formula=0):\n-+    def find_zeros_via_N(self, count=0, start=0, max_refine=1025, rank=-1):\n-         \"\"\"\n-         Finds ``count`` number of zeros with positive imaginary part\n-         starting at real axis. This function also verifies that all\n-@@ -317,8 +316,7 @@ cdef class Lfunction:\n-         INPUT:\n- \n-         - ``count`` - number of zeros to be found\n--        - ``do_negative`` - (default: False) False to ignore zeros below the\n--          real axis.\n-+        - ``start`` - (default: 0) how many initial zeros to skip\n-         - ``max_refine`` - when some zeros are found to be missing, the step\n-           size used to find zeros is refined. max_refine gives an upper limit\n-           on when lcalc should give up. Use default value unless you know\n-@@ -326,13 +324,9 @@ cdef class Lfunction:\n-         - ``rank`` - integer (default: -1) analytic rank of the L-function.\n-           If -1 is passed, then we attempt to compute it. (Use default if in\n-           doubt)\n--        - ``test_explicit_formula`` - integer (default: 0) If nonzero, test\n--          the explicit formula for additional confidence that all the zeros\n--          have been found and are accurate. This is still being tested, so\n--          using the default is recommended.\n- \n-         OUTPUT:\n--        \n-+\n-         list -- A list of the imaginary parts of the zeros that have been found\n- \n-         EXAMPLES::\n-@@ -356,14 +350,10 @@ cdef class Lfunction:\n-             sage: L.find_zeros_via_N(3)\n-             [14.1347251417..., 21.0220396387..., 25.0108575801...]\n-         \"\"\"\n--        cdef Integer count_I = Integer(count)\n--        cdef Integer do_negative_I = Integer(do_negative)\n--        cdef RealNumber max_refine_R = RRR(max_refine)\n--        cdef Integer rank_I = Integer(rank)\n--        cdef Integer test_explicit_I = Integer(test_explicit_formula)\n-+        cdef const char *message_stamp = \"\"\n-         cdef doublevec result\n-         sig_on()\n--        self.__find_zeros_via_N_v(mpz_get_si(count_I.value), mpz_get_si(do_negative_I.value), mpfr_get_d(max_refine_R.value, MPFR_RNDN), mpz_get_si(rank_I.value), mpz_get_si(test_explicit_I.value), &result)\n-+        self.__find_zeros(count, start, max_refine, rank, message_stamp, &result)\n-         sig_off()\n-         returnvalue = []\n-         for i in range(result.size()):\n-@@ -390,7 +380,7 @@ cdef class Lfunction:\n-     cdef void __find_zeros_v(self,double T1, double T2, double stepsize, doublevec *result):\n-         raise NotImplementedError\n- \n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n-         raise NotImplementedError\n- \n- ##############################################################################\n-@@ -486,8 +476,8 @@ cdef class Lfunction_I(Lfunction):\n-     cdef double __typedN(self, double T):\n-         return (<c_Lfunction_I *>self.thisptr).N(T)\n- \n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n--        (<c_Lfunction_I *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n-+        (<c_Lfunction_I *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n- \n-     # debug tools\n-     def _print_data_to_standard_output(self):\n-@@ -624,8 +614,8 @@ cdef class Lfunction_D(Lfunction):\n-     cdef double __typedN(self, double T):\n-         return (<c_Lfunction_D *>self.thisptr).N(T)\n- \n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n--        (<c_Lfunction_D *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n-+    cdef int __find_zeros(self, long count, long start,double max_refine, int rank, const char* message_stamp, doublevec *result):\n-+        (<c_Lfunction_D *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n- \n-     # debug tools\n-     def _print_data_to_standard_output(self):\n-@@ -769,8 +759,8 @@ cdef class Lfunction_C:\n-     cdef double __typedN(self, double T):\n-         return (<c_Lfunction_C *>self.thisptr).N(T)\n- \n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n--        (<c_Lfunction_C *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n-+        (<c_Lfunction_C *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n- \n-     # debug tools\n-     def _print_data_to_standard_output(self):\n-@@ -854,8 +844,8 @@ cdef class Lfunction_Zeta(Lfunction):\n-     cdef double __typedN(self, double T):\n-         return (<c_Lfunction_Zeta *>self.thisptr).N(T)\n- \n--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):\n--        (<c_Lfunction_Zeta *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])\n-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):\n-+        (<c_Lfunction_Zeta *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)\n- \n-     def __dealloc__(self):\n-         \"\"\"\n-```\n-\n-6. Some tests need tolerance updates because the answers have changed slightly.\n-\n-7. Two tests give different answers entirely and require help from someone who knows what an L-function is. These are discussed on #24820 as well:\n-\n-```\n-**********************************************************************\n-File \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\n-Failed example:\n-    L.hardy_z_function(.4+.3*I)\n-Expected:\n-    0.2166144222685... - 0.00408187127850...*I\n-Got:\n-    0.0240947990422036 + 0.215308871779581*I\n-**********************************************************************\n-File \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 350, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.find_zeros_via_N\n-Failed example:\n-    L.find_zeros_via_N(3)\n-Expected:\n-    [6.18357819545..., 8.45722917442..., 12.6749464170...]\n-Got:\n-    [-4.13290370521286, 6.18357819545086, 8.45722917442320]\n-**********************************************************************\n-```\n``````\n",
    "created_at": "2021-10-29T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518944",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,251 +1,17 @@
-I've just tagged a 2.0.3 release of lcalc: https://gitlab.com/sagemath/lcalc/-/tags/2.0.3
+The new lcalc 2.0.3 has been released.
+Note in particular:
 
-There are a few issues that need to be addressed during the upgrade.
+- sane build system
+- comes with a pkg-config file
+- public API header has moved to `lcalc/L.h`
+- the `find_zeros_via_N_v()` function was removed
+  and replaced by `find_zeros()`
 
-0. The build requires GNU gengetopt, so we'll need a new gengetopt SPKG for lcalc to depend on. (It doesn't need to go in the DEPCHECK macro though, since it's a build-only dependency.)
-1. The build system is now sane. This should make life easier in the long run, but means that spkg-* need to be rewritten. `./configure --with-pari` should suffice.
+In this ticket we upgrade to lcalc 2.0.3 and:
 
-2. The lcalc spkg shouldn't depend on mpfr (I'm not sure why it ever did).
+- add gengetopt as a new standard SPKG
+- adjust dependencies
+- adjust spkg-* files for the saner build system
+- adjust spkg-configure.m4 to find the new version
+- adjust tolerance in some doctests
 
-3. spkg-configure.m4 should be modified to find the new version, for example...
-
-```patch
-diff --git a/build/pkgs/lcalc/spkg-configure.m4 b/build/pkgs/lcalc/spkg-configure.m4
-index 19a87c8d30..b332294eae 100644
---- a/build/pkgs/lcalc/spkg-configure.m4
-+++ b/build/pkgs/lcalc/spkg-configure.m4
-@@ -1,20 +1,20 @@
- SAGE_SPKG_CONFIGURE([lcalc], [
--    m4_pushdef([SAGE_LCALC_MINVER],["1.22"])
--    SAGE_SPKG_DEPCHECK([pari mpfr], [
-+    m4_pushdef([SAGE_LCALC_MINVER],["2.0.0"])
-+    SAGE_SPKG_DEPCHECK([pari], [
-         AC_PATH_PROG([LCALC], [lcalc])
-         AS_IF([test x$LCALC = x], [
-            AC_MSG_NOTICE([lcalc not found. Installing lcalc])
-            sage_spkg_install_lcalc=yes], [
-            AC_MSG_CHECKING([is lcalc's version good enough? ])
--           lcalc_ver=`$LCALC --version 2>>/dev/null | $SED -e 's/lcalc\ //' | $SED -e 's/\ .*//g'`
-+           lcalc_ver=$($LCALC --version 2>>/dev/null | $SED -e 's/lcalc\ //' | cut -d' ' -f2)
-            AX_COMPARE_VERSION([$lcalc_ver], [ge], [$SAGE_LCALC_MINVER], [
-                AC_MSG_RESULT([yes.])
--               AC_CHECK_HEADER([Lfunction/L.h], [], [sage_spkg_install_lcalc=yes])
-+               AC_CHECK_HEADER([lcalc/L.h], [], [sage_spkg_install_lcalc=yes])
-           AC_MSG_CHECKING([whether we can link and run a program using libLfunction])
-           LCALC_SAVED_LIBS=$LIBS
-           LIBS="$LIBS -lLfunction"
-           AC_RUN_IFELSE([
--            AC_LANG_PROGRAM([[#include <Lfunction/L.h>]],
-+            AC_LANG_PROGRAM([[#include <lcalc/L.h>]],
-                       [[initialize_globals();
-                         Complex x;
-                         x = Pi*I;
-```
-
-However, lcalc-2.0.0 comes with a pkg-config file, so we could greatly simplify that.
-
-4. The public API header has moved to `lcalc/L.h`:
-
-```patch
-diff --git a/src/sage/libs/lcalc/lcalc_sage.h b/src/sage/libs/lcalc/lcalc_sage.h
-index 498528917f..18e5232cbe 100644
---- a/src/sage/libs/lcalc/lcalc_sage.h
-+++ b/src/sage/libs/lcalc/lcalc_sage.h
-@@ -1,4 +1,4 @@
--#include "Lfunction/L.h"
-+#include "lcalc/L.h"
- int *new_ints(int l)
- {
-     return new int[l];
-
-```
-
-5. The `find_zeros_via_N_v()` function was removed, and replaced by `find_zeros()`. Here's a patch:
-
-```patch
-diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pxd b/src/sage/libs/lcalc/lcalc_Lfunction.pxd
-index d1dbb5d95d..5edf0844f3 100644
---- a/src/sage/libs/lcalc/lcalc_Lfunction.pxd
-+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pxd
-@@ -21,7 +21,7 @@ cdef extern from "lcalc_sage.h":
-         int (* compute_rank) ()
-         double (* N) (double T)
-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
-         void (*print_data_L)()
- 
-         #Constructor and destructor
-@@ -38,7 +38,7 @@ cdef extern from "lcalc_sage.h":
-         double (* N) (double T)
-         double *dirichlet_coefficient
-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
-         void (*print_data_L)()
- 
-         #Constructor and destructor
-@@ -54,7 +54,7 @@ cdef extern from "lcalc_sage.h":
-         int (* compute_rank) ()
-         double (* N) (double T)
-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)
-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
-         void (*print_data_L)()
- 
-         #Constructor and destructor
-@@ -70,7 +70,7 @@ cdef extern from "lcalc_sage.h":
-         int (* compute_rank) ()
-         double (* N) (double T)
-         void  (* find_zeros_v)(double T1, double T2, double stepsize, doublevec result )
--        void (*find_zeros_via_N_v)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec result)#puts result in vector<double> result
-+        int (*find_zeros)(long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
-         void (*find_zeros_via_N)(long count,int do_negative,double max_refine, int rank, int test_explicit_formula, char *filename) #puts result in filename
- 
-         #Constructor and destructor
-@@ -111,7 +111,7 @@ cdef class Lfunction:
-     #strange bug, replacing Double with double gives me a compile error
-     cdef Double __typedN(self, double T)
-     cdef void __find_zeros_v(self, double T1, double T2, double stepsize,doublevec *result)
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula,doublevec *result)
-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec* result)
- 
-     cdef str _repr
-
-```
-
-```patch
-diff --git a/src/sage/libs/lcalc/lcalc_Lfunction.pyx b/src/sage/libs/lcalc/lcalc_Lfunction.pyx
-index 7e54d7e78d..409987c5d0 100644
---- a/src/sage/libs/lcalc/lcalc_Lfunction.pyx
-+++ b/src/sage/libs/lcalc/lcalc_Lfunction.pyx
-@@ -307,8 +307,7 @@ cdef class Lfunction:
-         return returnvalue
- 
-     #The default values are from L.h. See L.h
--    def find_zeros_via_N(self, count=0, do_negative=False, max_refine=1025,
--                         rank=-1, test_explicit_formula=0):
-+    def find_zeros_via_N(self, count=0, start=0, max_refine=1025, rank=-1):
-         """
-         Finds ``count`` number of zeros with positive imaginary part
-         starting at real axis. This function also verifies that all
-@@ -317,8 +316,7 @@ cdef class Lfunction:
-         INPUT:
- 
-         - ``count`` - number of zeros to be found
--        - ``do_negative`` - (default: False) False to ignore zeros below the
--          real axis.
-+        - ``start`` - (default: 0) how many initial zeros to skip
-         - ``max_refine`` - when some zeros are found to be missing, the step
-           size used to find zeros is refined. max_refine gives an upper limit
-           on when lcalc should give up. Use default value unless you know
-@@ -326,13 +324,9 @@ cdef class Lfunction:
-         - ``rank`` - integer (default: -1) analytic rank of the L-function.
-           If -1 is passed, then we attempt to compute it. (Use default if in
-           doubt)
--        - ``test_explicit_formula`` - integer (default: 0) If nonzero, test
--          the explicit formula for additional confidence that all the zeros
--          have been found and are accurate. This is still being tested, so
--          using the default is recommended.
- 
-         OUTPUT:
--        
-+
-         list -- A list of the imaginary parts of the zeros that have been found
- 
-         EXAMPLES::
-@@ -356,14 +350,10 @@ cdef class Lfunction:
-             sage: L.find_zeros_via_N(3)
-             [14.1347251417..., 21.0220396387..., 25.0108575801...]
-         """
--        cdef Integer count_I = Integer(count)
--        cdef Integer do_negative_I = Integer(do_negative)
--        cdef RealNumber max_refine_R = RRR(max_refine)
--        cdef Integer rank_I = Integer(rank)
--        cdef Integer test_explicit_I = Integer(test_explicit_formula)
-+        cdef const char *message_stamp = ""
-         cdef doublevec result
-         sig_on()
--        self.__find_zeros_via_N_v(mpz_get_si(count_I.value), mpz_get_si(do_negative_I.value), mpfr_get_d(max_refine_R.value, MPFR_RNDN), mpz_get_si(rank_I.value), mpz_get_si(test_explicit_I.value), &result)
-+        self.__find_zeros(count, start, max_refine, rank, message_stamp, &result)
-         sig_off()
-         returnvalue = []
-         for i in range(result.size()):
-@@ -390,7 +380,7 @@ cdef class Lfunction:
-     cdef void __find_zeros_v(self,double T1, double T2, double stepsize, doublevec *result):
-         raise NotImplementedError
- 
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
-         raise NotImplementedError
- 
- ##############################################################################
-@@ -486,8 +476,8 @@ cdef class Lfunction_I(Lfunction):
-     cdef double __typedN(self, double T):
-         return (<c_Lfunction_I *>self.thisptr).N(T)
- 
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
--        (<c_Lfunction_I *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
-+        (<c_Lfunction_I *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
- 
-     # debug tools
-     def _print_data_to_standard_output(self):
-@@ -624,8 +614,8 @@ cdef class Lfunction_D(Lfunction):
-     cdef double __typedN(self, double T):
-         return (<c_Lfunction_D *>self.thisptr).N(T)
- 
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
--        (<c_Lfunction_D *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
-+    cdef int __find_zeros(self, long count, long start,double max_refine, int rank, const char* message_stamp, doublevec *result):
-+        (<c_Lfunction_D *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
- 
-     # debug tools
-     def _print_data_to_standard_output(self):
-@@ -769,8 +759,8 @@ cdef class Lfunction_C:
-     cdef double __typedN(self, double T):
-         return (<c_Lfunction_C *>self.thisptr).N(T)
- 
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
--        (<c_Lfunction_C *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
-+        (<c_Lfunction_C *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
- 
-     # debug tools
-     def _print_data_to_standard_output(self):
-@@ -854,8 +844,8 @@ cdef class Lfunction_Zeta(Lfunction):
-     cdef double __typedN(self, double T):
-         return (<c_Lfunction_Zeta *>self.thisptr).N(T)
- 
--    cdef void __find_zeros_via_N_v(self, long count,int do_negative,double max_refine, int rank, int test_explicit_formula, doublevec *result):
--        (<c_Lfunction_Zeta *>self.thisptr).find_zeros_via_N_v(count, do_negative, max_refine, rank, test_explicit_formula, result[0])
-+    cdef int __find_zeros(self, long count, long start, double max_refine, int rank, const char* message_stamp, doublevec *result):
-+        (<c_Lfunction_Zeta *>self.thisptr).find_zeros(count, start, max_refine, rank, message_stamp, result)
- 
-     def __dealloc__(self):
-         """
-```
-
-6. Some tests need tolerance updates because the answers have changed slightly.
-
-7. Two tests give different answers entirely and require help from someone who knows what an L-function is. These are discussed on #24820 as well:
-
-```
-**********************************************************************
-File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
-Failed example:
-    L.hardy_z_function(.4+.3*I)
-Expected:
-    0.2166144222685... - 0.00408187127850...*I
-Got:
-    0.0240947990422036 + 0.215308871779581*I
-**********************************************************************
-File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 350, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.find_zeros_via_N
-Failed example:
-    L.find_zeros_via_N(3)
-Expected:
-    [6.18357819545..., 8.45722917442..., 12.6749464170...]
-Got:
-    [-4.13290370521286, 6.18357819545086, 8.45722917442320]
-**********************************************************************
-```
``````




---

archive/issue_comments_518945.json:
```json
{
    "body": "Reviewer: **Antonio Rojas**",
    "created_at": "2021-10-29T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518945",
    "user": "https://github.com/slel"
}
```

Reviewer: **Antonio Rojas**



---

archive/issue_comments_518946.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nReplying to [@slel](#comment%3A69):\n> I tried to reduce the ticket description to a digest.\n> \n> Not sure what the conclusion was on item 7, so I left that out.\n> \n\nThanks. One of those doctests was updated for the new output, an expected change now that the API automatically determines that the L-function is complex:\n\nhttps://github.com/sagemath/sagetrac-mirror/commits/8d1221a4\n\nThe other was ultimately deleted, because no one can explain either the old or new output:\n\nhttps://github.com/sagemath/sagetrac-mirror/commits/b642382d\n\n> add gengetopt as a new standard SPKG \n\nThis is actually still open as a dependency in #32061.\n\n(Edit: link to the correct commits.)",
    "created_at": "2021-10-29T17:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518946",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:70'>Comment 70:</a>
Replying to [@slel](#comment%3A69):
> I tried to reduce the ticket description to a digest.
> 
> Not sure what the conclusion was on item 7, so I left that out.
> 

Thanks. One of those doctests was updated for the new output, an expected change now that the API automatically determines that the L-function is complex:

https://github.com/sagemath/sagetrac-mirror/commits/8d1221a4

The other was ultimately deleted, because no one can explain either the old or new output:

https://github.com/sagemath/sagetrac-mirror/commits/b642382d

> add gengetopt as a new standard SPKG 

This is actually still open as a dependency in #32061.

(Edit: link to the correct commits.)



---

archive/issue_comments_518947.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nshould be good to go now.",
    "created_at": "2021-11-01T13:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518947",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'>Comment 71:</a>
should be good to go now.



---

archive/issue_comments_518948.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nNeeds to be rebased on top of #31837, which brings a patch that does not apply to the new version",
    "created_at": "2021-11-06T23:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518948",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'>Comment 72:</a>
Needs to be rebased on top of #31837, which brings a patch that does not apply to the new version



---

archive/issue_events_409450.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-06T23:24:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409450"
}
```



---

archive/issue_events_409451.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-06T23:24:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409451"
}
```



---

archive/issue_comments_518949.json:
```json
{
    "body": "Changed dependencies from **#32061** to **#32061, #31837**",
    "created_at": "2021-11-06T23:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518949",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32061** to **#32061, #31837**



---

archive/issue_comments_518950.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\n... as seen in https://github.com/mkoeppe/sage/runs/4127380314?check_suite_focus=true",
    "created_at": "2021-11-06T23:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518950",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:73'>Comment 73:</a>
... as seen in https://github.com/mkoeppe/sage/runs/4127380314?check_suite_focus=true



---

archive/issue_comments_518951.json:
```json
{
    "body": "Changed commit from **[dd656cf](https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1)** to **[93f9928](https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe)**",
    "created_at": "2021-11-07T13:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518951",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dd656cf](https://github.com/sagemath/sagetrac-mirror/commit/dd656cf19dbd95e3e55d591252dfea052258a7c1)** to **[93f9928](https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe)**



---

archive/issue_comments_518952.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a42b787c808a010ab8ad495645a95add6475774\">9a42b78</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1537168d7b33e4e04127b5e5085108ae5441b06a\">1537168</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2f3e5c1a62b9338fc7218d0b27f10fd30dcd72b\">c2f3e5c</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a63aa52a347e327cdfac5ac98200f547232d5a0\">5a63aa5</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68b89a7b2f16634799e0b10fdc8aa365125af00b\">68b89a7</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bb551bd1a802ded62626b71fb6419b84615d182\">9bb551b</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/513003c47f8e9967e5851ec59e940f6373123705\">513003c</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/413f11454dd839ae5ceca3f51874c6edca2ed66e\">413f114</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ea32f7dc82996f446405ca03b3ce8d2656242c6\">3ea32f7</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe\">93f9928</a></td><td><code>Trac #32037: remove remaining lcalc patches.</code></td></tr></table>\n",
    "created_at": "2021-11-07T13:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518952",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:74'>Comment 74:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a42b787c808a010ab8ad495645a95add6475774">9a42b78</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1537168d7b33e4e04127b5e5085108ae5441b06a">1537168</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2f3e5c1a62b9338fc7218d0b27f10fd30dcd72b">c2f3e5c</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a63aa52a347e327cdfac5ac98200f547232d5a0">5a63aa5</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68b89a7b2f16634799e0b10fdc8aa365125af00b">68b89a7</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bb551bd1a802ded62626b71fb6419b84615d182">9bb551b</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/513003c47f8e9967e5851ec59e940f6373123705">513003c</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/413f11454dd839ae5ceca3f51874c6edca2ed66e">413f114</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ea32f7dc82996f446405ca03b3ce8d2656242c6">3ea32f7</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe">93f9928</a></td><td><code>Trac #32037: remove remaining lcalc patches.</code></td></tr></table>




---

archive/issue_events_409452.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-07T13:30:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409452"
}
```



---

archive/issue_events_409453.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-07T13:30:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409453"
}
```



---

archive/issue_comments_518953.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nRebased cleanly onto develop, and added one additional commit to remove the new patch.",
    "created_at": "2021-11-07T13:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518953",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:75'>Comment 75:</a>
Rebased cleanly onto develop, and added one additional commit to remove the new patch.



---

archive/issue_events_409454.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-14T09:13:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409454"
}
```



---

archive/issue_events_409455.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-14T09:13:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409455"
}
```



---

archive/issue_comments_518954.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nred branch => needs work",
    "created_at": "2021-11-14T09:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518954",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:76'>Comment 76:</a>
red branch => needs work



---

archive/issue_comments_518955.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a4d43df709ad403f12b8c15b1ea728082ed09bb\">1a4d43d</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1601d3bd1cf8490cc678c187cff60c53a7011264\">1601d3b</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab32bdc6e77c170db2c7cc39b2bfa294bfbdac9\">7ab32bd</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2897402a544d8e57853aa1717e361158614ff211\">2897402</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c44adc5687f5d679b72589f5a3316c37dab0162a\">c44adc5</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef57b435898f8d5382f121686afaaebeb53a0924\">ef57b43</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad5c3bf39db64ce3fb9469c3cb58866c51879406\">ad5c3bf</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fae1d2075ca918c1bbd9d3a8427eaf551f1b231d\">fae1d20</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35870f25e54f11732f1423bd0588e074f4103173\">35870f2</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e\">69e646d</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>\n",
    "created_at": "2021-11-14T20:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518955",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:77'>Comment 77:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a4d43df709ad403f12b8c15b1ea728082ed09bb">1a4d43d</a></td><td><code>Trac #32037: update the doctest for the DirichletGroup(5)[1] L-function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1601d3bd1cf8490cc678c187cff60c53a7011264">1601d3b</a></td><td><code>Trac #32037: lower all lcalc tolerances to 1e-8.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab32bdc6e77c170db2c7cc39b2bfa294bfbdac9">7ab32bd</a></td><td><code>Trac #32037: add abs_tol to an lcalc test to fix a new failure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2897402a544d8e57853aa1717e361158614ff211">2897402</a></td><td><code>Trac #32037: update an lcalc doctest that counts zeros.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c44adc5687f5d679b72589f5a3316c37dab0162a">c44adc5</a></td><td><code>Trac #32037: add tolerance to a few sage/lfunctions/lcalc.py doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef57b435898f8d5382f121686afaaebeb53a0924">ef57b43</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad5c3bf39db64ce3fb9469c3cb58866c51879406">ad5c3bf</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fae1d2075ca918c1bbd9d3a8427eaf551f1b231d">fae1d20</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35870f25e54f11732f1423bd0588e074f4103173">35870f2</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e">69e646d</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr></table>




---

archive/issue_comments_518956.json:
```json
{
    "body": "Changed commit from **[93f9928](https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe)** to **[69e646d](https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e)**",
    "created_at": "2021-11-14T20:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[93f9928](https://github.com/sagemath/sagetrac-mirror/commit/93f9928194e352bb8ba1ed42b9ab3db4c2786bbe)** to **[69e646d](https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e)**



---

archive/issue_events_409456.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-14T20:01:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409456"
}
```



---

archive/issue_events_409457.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-14T20:01:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409457"
}
```



---

archive/issue_comments_518957.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nNot sure why, it merged cleanly with beta6 for me. Here it is again rebased onto develop.",
    "created_at": "2021-11-14T20:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518957",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:78'>Comment 78:</a>
Not sure why, it merged cleanly with beta6 for me. Here it is again rebased onto develop.



---

archive/issue_comments_518958.json:
```json
{
    "body": "Changed reviewer from **Antonio Rojas** to **Antonio Rojas, Dima Pasechnik**",
    "created_at": "2021-11-16T14:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518958",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Antonio Rojas** to **Antonio Rojas, Dima Pasechnik**



---

archive/issue_comments_518959.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nlgtm",
    "created_at": "2021-11-16T14:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518959",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:79'>Comment 79:</a>
lgtm



---

archive/issue_events_409458.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T14:45:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409458"
}
```



---

archive/issue_events_409459.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T14:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409459"
}
```



---

archive/issue_events_409460.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-20T10:46:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409460"
}
```



---

archive/issue_events_409461.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-20T10:46:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409461"
}
```



---

archive/issue_comments_518960.json:
```json
{
    "body": "<a id='comment:80'>Comment 80:</a>\n\n```\nUsing cached file /home/release/Sage/upstream/lcalc-2.0.1.tar.xz\nlcalc-2.0.1\n====================================================\nSetting up build directory for lcalc-2.0.1\nFinished extraction\nApplying patches from ../patches...\nApplying ../patches/lcalc-1.23-gcc11.patch\ncan't find file to patch at input line 5\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|diff --git a/include/Lcommon.h b/include/Lcommon.h\n|index 1b3be43..717fcde 100644\n|--- a/include/Lcommon.h\n|+++ b/include/Lcommon.h\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n2 out of 2 hunks ignored\nError applying '../patches/lcalc-1.23-gcc11.patch'\n************************************************************************\nError applying patches\n************************************************************************\n```",
    "created_at": "2021-11-20T10:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518960",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:80'>Comment 80:</a>

```
Using cached file /home/release/Sage/upstream/lcalc-2.0.1.tar.xz
lcalc-2.0.1
====================================================
Setting up build directory for lcalc-2.0.1
Finished extraction
Applying patches from ../patches...
Applying ../patches/lcalc-1.23-gcc11.patch
can't find file to patch at input line 5
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/include/Lcommon.h b/include/Lcommon.h
|index 1b3be43..717fcde 100644
|--- a/include/Lcommon.h
|+++ b/include/Lcommon.h
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
2 out of 2 hunks ignored
Error applying '../patches/lcalc-1.23-gcc11.patch'
************************************************************************
Error applying patches
************************************************************************
```



---

archive/issue_comments_518961.json:
```json
{
    "body": "Changed commit from **[69e646d](https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e)** to **[8286107](https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62)**",
    "created_at": "2021-11-20T12:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518961",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[69e646d](https://github.com/sagemath/sagetrac-mirror/commit/69e646df02782b6d7da6d7065a08507c6ab1937e)** to **[8286107](https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62)**



---

archive/issue_comments_518962.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb84c7b2480a50e76a5869f1bd173974fa2cf74f\">eb84c7b</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/648e1317adc6a62987ae60fdad7f84286c5577e4\">648e131</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f80d33502244ffb92d69367c6d0a1384c6601f01\">f80d335</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc5766c85b1c03f8d3cf7fe34967f8755f49292b\">dc5766c</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efabc7ef80a4f3f5277d1177f0bc9b4c0b01352f\">efabc7e</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b0f6e2caed5465d9634ccab3de6a032a0bfa5ae\">7b0f6e2</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a2e9d8e1f49af1889908fdc266f86a973b9b646\">8a2e9d8</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e00ab0c1ccc5a81099799876d1595df49ed91100\">e00ab0c</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6011956ce6d822e816099bfabc338b47aea89b9\">a601195</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62\">8286107</a></td><td><code>Trac #32037: remove remaining lcalc patches.</code></td></tr></table>\n",
    "created_at": "2021-11-20T12:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518962",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:81'>Comment 81:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb84c7b2480a50e76a5869f1bd173974fa2cf74f">eb84c7b</a></td><td><code>Trac #32037: delete a failing doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/648e1317adc6a62987ae60fdad7f84286c5577e4">648e131</a></td><td><code>Trac #32037: replace some ellipses with abs_tol.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f80d33502244ffb92d69367c6d0a1384c6601f01">f80d335</a></td><td><code>Trac #32037: adjust doctest tolerance for lcalc-2.0.1 in lseries_ell.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc5766c85b1c03f8d3cf7fe34967f8755f49292b">dc5766c</a></td><td><code>Trac #32037: weaken doctest tolerance for lcalc-2.0.1 in modular/dirichlet.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efabc7ef80a4f3f5277d1177f0bc9b4c0b01352f">efabc7e</a></td><td><code>Trac #32037: tweak a doctest in elliptic_curves/ell_rational_field.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b0f6e2caed5465d9634ccab3de6a032a0bfa5ae">7b0f6e2</a></td><td><code>Trac #32037: update to lcalc-2.0.2 to fix the build with std=c++11.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a2e9d8e1f49af1889908fdc266f86a973b9b646">8a2e9d8</a></td><td><code>Trac #32037: add tolerance to a test in sage/lfunctions/zero_sums.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e00ab0c1ccc5a81099799876d1595df49ed91100">e00ab0c</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6011956ce6d822e816099bfabc338b47aea89b9">a601195</a></td><td><code>Trac #32037: make getgetopt an order-only dependency of lcalc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62">8286107</a></td><td><code>Trac #32037: remove remaining lcalc patches.</code></td></tr></table>




---

archive/issue_events_409462.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-20T12:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409462"
}
```



---

archive/issue_events_409463.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-20T12:40:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409463"
}
```



---

archive/issue_comments_518963.json:
```json
{
    "body": "<a id='comment:83'>Comment 83:</a>\nstil same error?",
    "created_at": "2021-11-23T21:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518963",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:83'>Comment 83:</a>
stil same error?



---

archive/issue_events_409464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-23T21:34:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409464"
}
```



---

archive/issue_events_409465.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-23T21:34:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409465"
}
```



---

archive/issue_comments_518964.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nnevermind...",
    "created_at": "2021-11-23T21:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518964",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:84'>Comment 84:</a>
nevermind...



---

archive/issue_events_409466.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-23T21:35:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409466"
}
```



---

archive/issue_events_409467.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-23T21:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409467"
}
```



---

archive/issue_comments_518965.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nOn Debian 9 x86_64:\n\n```\n**********************************************************************\nFile \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\nFailed example:\n    L.hardy_z_function(0) # abs tol 1e-8\nExpected:\n    0.793967590477 + 0.0*I\nGot:\n    0.793967590477090\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\n    [105 tests, 1 failure, 0.76 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=234205826713938282410851315937822845647 src/sage/libs/lcalc/lcalc_Lfunction.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```\non OSX Big Sur:\n\n```\nIn file included from ../../src/libLfunction/L.h:43:\nIn file included from ../../src/libLfunction/Lglobals.h:55:\n../../src/libLfunction/Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\n#include <bits/c++config.h>\n         ^~~~~~~~~~~~~~~~~~\n1 error generated.\nmake[6]: *** [Lcommandline.o] Error 1\nmake[6]: Target `all' not remade because of errors.\nMaking all in tests\nMaking all in lib\nmake[7]: Nothing to be done for `all'.\nmake[7]: Nothing to be done for `all-am'.\nmake[6]: Nothing to be done for `all-am'.\nmake[5]: *** [all-recursive] Error 1\nmake[5]: Target `all' not remade because of errors.\n********************************************************************************\nError building lcalc-2.0.3\n********************************************************************************\n```",
    "created_at": "2021-11-25T00:22:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518965",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'>Comment 85:</a>
On Debian 9 x86_64:

```
**********************************************************************
File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
Failed example:
    L.hardy_z_function(0) # abs tol 1e-8
Expected:
    0.793967590477 + 0.0*I
Got:
    0.793967590477090
**********************************************************************
1 item had failures:
   1 of  14 in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
    [105 tests, 1 failure, 0.76 s]
----------------------------------------------------------------------
sage -t --long --random-seed=234205826713938282410851315937822845647 src/sage/libs/lcalc/lcalc_Lfunction.pyx  # 1 doctest failed
----------------------------------------------------------------------
```
on OSX Big Sur:

```
In file included from ../../src/libLfunction/L.h:43:
In file included from ../../src/libLfunction/Lglobals.h:55:
../../src/libLfunction/Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
#include <bits/c++config.h>
         ^~~~~~~~~~~~~~~~~~
1 error generated.
make[6]: *** [Lcommandline.o] Error 1
make[6]: Target `all' not remade because of errors.
Making all in tests
Making all in lib
make[7]: Nothing to be done for `all'.
make[7]: Nothing to be done for `all-am'.
make[6]: Nothing to be done for `all-am'.
make[5]: *** [all-recursive] Error 1
make[5]: Target `all' not remade because of errors.
********************************************************************************
Error building lcalc-2.0.3
********************************************************************************
```



---

archive/issue_events_409468.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-25T00:22:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409468"
}
```



---

archive/issue_events_409469.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-25T00:22:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409469"
}
```



---

archive/issue_comments_518966.json:
```json
{
    "body": "<a id='comment:86'>Comment 86:</a>\nReplying to [@vbraun](#comment%3A85):\n> On Debian 9 x86_64:\n> \n> ```\n> **********************************************************************\n> File \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\n> Failed example:\n>     L.hardy_z_function(0) # abs tol 1e-8\n> Expected:\n>     0.793967590477 + 0.0*I\n> Got:\n>     0.793967590477090\n> **********************************************************************\n> ```\n\nWell... all of these `abs_tol` tests involving complex numbers are wrong. I was naively assuming that our doctest framework would do the obvious thing here, but it's using regexps to find strings that look like floating point numbers and then e.g. deciding that the lists `[\"0.793967590477\", \" + 0.0\"]` and  `[\"0.793967590477090\"]` cannot be equivalent because they are of different lengths.\n\nI'll redo all of the tests to compare the real and imaginary parts separately I guess.\n\n> on OSX Big Sur:\n> \n> ```\n> In file included from ../../src/libLfunction/L.h:43:\n> In file included from ../../src/libLfunction/Lglobals.h:55:\n> ../../src/libLfunction/Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\n> #include <bits/c++config.h>\n>          ^~~~~~~~~~~~~~~~~~\n> ```\n\nI don't know what to do about this. That's a standard C++ header, and I don't have access to OSX to debug. The full build log *might* help, if something is very obviously wrong.",
    "created_at": "2021-11-25T02:06:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518966",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:86'>Comment 86:</a>
Replying to [@vbraun](#comment%3A85):
> On Debian 9 x86_64:
> 
> ```
> **********************************************************************
> File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 194, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
> Failed example:
>     L.hardy_z_function(0) # abs tol 1e-8
> Expected:
>     0.793967590477 + 0.0*I
> Got:
>     0.793967590477090
> **********************************************************************
> ```

Well... all of these `abs_tol` tests involving complex numbers are wrong. I was naively assuming that our doctest framework would do the obvious thing here, but it's using regexps to find strings that look like floating point numbers and then e.g. deciding that the lists `["0.793967590477", " + 0.0"]` and  `["0.793967590477090"]` cannot be equivalent because they are of different lengths.

I'll redo all of the tests to compare the real and imaginary parts separately I guess.

> on OSX Big Sur:
> 
> ```
> In file included from ../../src/libLfunction/L.h:43:
> In file included from ../../src/libLfunction/Lglobals.h:55:
> ../../src/libLfunction/Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
> #include <bits/c++config.h>
>          ^~~~~~~~~~~~~~~~~~
> ```

I don't know what to do about this. That's a standard C++ header, and I don't have access to OSX to debug. The full build log *might* help, if something is very obviously wrong.



---

archive/issue_comments_518967.json:
```json
{
    "body": "<a id='comment:87'>Comment 87:</a>\nSeen that kind of stuff before when porting to clang. I don't think anything in `bits` should be included directly because they are implementation specific functions. Would have to check what exactly was needed from there.\n\nFrom the file itself\n\n```\n/** @file bits/c++config.h\n  *  This is an internal header file, included by other library headers.\n  *  Do not attempt to use it directly. @headername{iosfwd}\n  */\n```",
    "created_at": "2021-11-25T03:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518967",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:87'>Comment 87:</a>
Seen that kind of stuff before when porting to clang. I don't think anything in `bits` should be included directly because they are implementation specific functions. Would have to check what exactly was needed from there.

From the file itself

```
/** @file bits/c++config.h
  *  This is an internal header file, included by other library headers.
  *  Do not attempt to use it directly. @headername{iosfwd}
  */
```



---

archive/issue_comments_518968.json:
```json
{
    "body": "<a id='comment:88'>Comment 88:</a>\nFor gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.",
    "created_at": "2021-11-25T09:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518968",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:88'>Comment 88:</a>
For gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.



---

archive/issue_comments_518969.json:
```json
{
    "body": "<a id='comment:89'>Comment 89:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22efbb4807a20aa4ff10a8b6b2d17d9157778e86\">22efbb4</a></td><td><code>Trac #32037: don't use \"abs tol\" for complex numbers.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acf4d44c932de5ff89a52e831cf5d62e4a863596\">acf4d44</a></td><td><code>Trac #32037: whitespace cleanup in sage.libs.lcalc.lcalc_Lfunction.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc\">1a2dd14</a></td><td><code>Trac #32037: example cosmetology in sage.libs.lcalc.lcalc_Lfunction.</code></td></tr></table>\n",
    "created_at": "2021-11-25T16:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518969",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:89'>Comment 89:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22efbb4807a20aa4ff10a8b6b2d17d9157778e86">22efbb4</a></td><td><code>Trac #32037: don't use "abs tol" for complex numbers.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acf4d44c932de5ff89a52e831cf5d62e4a863596">acf4d44</a></td><td><code>Trac #32037: whitespace cleanup in sage.libs.lcalc.lcalc_Lfunction.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc">1a2dd14</a></td><td><code>Trac #32037: example cosmetology in sage.libs.lcalc.lcalc_Lfunction.</code></td></tr></table>




---

archive/issue_comments_518970.json:
```json
{
    "body": "Changed commit from **[8286107](https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62)** to **[1a2dd14](https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc)**",
    "created_at": "2021-11-25T16:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518970",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8286107](https://github.com/sagemath/sagetrac-mirror/commit/82861077a6c485a84a72d93c371738e0cfb85d62)** to **[1a2dd14](https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc)**



---

archive/issue_comments_518971.json:
```json
{
    "body": "<a id='comment:90'>Comment 90:</a>\nReplying to [@kiwifb](#comment%3A88):\n> For gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.\n\nThis works well with both clang and gcc on linux... but can anyone confirm that it works on OSX before I make a whole new release and upgrade again?",
    "created_at": "2021-11-25T16:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518971",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:90'>Comment 90:</a>
Replying to [@kiwifb](#comment%3A88):
> For gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.

This works well with both clang and gcc on linux... but can anyone confirm that it works on OSX before I make a whole new release and upgrade again?



---

archive/issue_comments_518972.json:
```json
{
    "body": "<a id='comment:91'>Comment 91:</a>\nIf the repo was on GH, I'd send you a PR for portability/integration testing.\n\nLooks like GitLab is also starting to provide macOS testing? https://docs.gitlab.com/ee/ci/runners/saas/macos_saas_runner.html",
    "created_at": "2021-11-25T18:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518972",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'>Comment 91:</a>
If the repo was on GH, I'd send you a PR for portability/integration testing.

Looks like GitLab is also starting to provide macOS testing? https://docs.gitlab.com/ee/ci/runners/saas/macos_saas_runner.html



---

archive/issue_comments_518973.json:
```json
{
    "body": "<a id='comment:92'>Comment 92:</a>\nReplying to [@orlitzky](#comment%3A90):\n> Replying to [@kiwifb](#comment%3A88):\n> > For gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.\n\n> \n> This works well with both clang and gcc on linux... but can anyone confirm that it works on OSX before I make a whole new release and upgrade again?\n\nCould have mentioned that. But clang on linux is not a good test unless you build clang's libstdc++ and make use of it. However, if you do it almost a sure deal. But I couldn't test on mac os because I am not properly set and was missing dependencies.",
    "created_at": "2021-11-25T18:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518973",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:92'>Comment 92:</a>
Replying to [@orlitzky](#comment%3A90):
> Replying to [@kiwifb](#comment%3A88):
> > For gcc, this particular header is included in `<cmath>` which is also included later. So, I'd recommend removing that include altogether.

> 
> This works well with both clang and gcc on linux... but can anyone confirm that it works on OSX before I make a whole new release and upgrade again?

Could have mentioned that. But clang on linux is not a good test unless you build clang's libstdc++ and make use of it. However, if you do it almost a sure deal. But I couldn't test on mac os because I am not properly set and was missing dependencies.



---

archive/issue_comments_518974.json:
```json
{
    "body": "<a id='comment:93'>Comment 93:</a>\nclang's C++ library is libc++, not libstdc++\n\nI'll try checking on macOS 12 now.",
    "created_at": "2021-11-25T19:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518974",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:93'>Comment 93:</a>
clang's C++ library is libc++, not libstdc++

I'll try checking on macOS 12 now.



---

archive/issue_comments_518975.json:
```json
{
    "body": "<a id='comment:94'>Comment 94:</a>\n\n```\nlibtool: compile:  clang++ -std=gnu++11 -DHAVE_CONFIG_H -I. -I../../src -g -O2 -c Lriemannsiegel.cc  -fno-common -DPIC -o .libs/Lriemannsiegel.o\nIn file included from Lmisc.cc:24:\nIn file included from ./Lmisc.h:27:\nIn file included from ./Lglobals.h:55:\n./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\nIn file included from Lgamma.cc:24:\nIn file included from ./Lgamma.h:#include <bits/c++config.h>\n         ^~~~~~~~~~~~~~~~~~\n28:\nIn file included from ./Lglobals.h:55:\n./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\n#include <bits/c++config.h>\n         ^~~~~~~~~~~~~~~~~~\nIn file included from Lglobals.cc:24:\nIn file included from ./Lglobals.h:55:\n./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\n#include <bits/c++config.h>\n         ^~~~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from Lnumbertheory.cc:24:\nIn file included from ./Lnumbertheory.h:32:\nIn file included from ./Lglobals.h:55:\n./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found\n#include <bits/c++config.h>\n         ^~~~~~~~~~~~~~~~~~\nmake[6]: *** [Lmisc.lo] Error 1\nmake[6]: *** Waiting for unfinished jobs....\n```\n\nremoving the offending #include, i.e.\n\n```diff\ndiff --git a/src/libLfunction/Lcomplex.h b/src/libLfunction/Lcomplex.h\nindex 639dbfa..be29aab 100644\n--- a/src/libLfunction/Lcomplex.h\n+++ b/src/libLfunction/Lcomplex.h\n@@ -45,7 +45,7 @@\n \n #pragma GCC system_header\n \n-#include <bits/c++config.h>\n+// #include <bits/c++config.h>\n \n //no longer include:\n //#include <bits/cpp_type_traits.h>  only thing used was is_floating... \n```\n\nmakes it build",
    "created_at": "2021-11-25T20:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518975",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:94'>Comment 94:</a>

```
libtool: compile:  clang++ -std=gnu++11 -DHAVE_CONFIG_H -I. -I../../src -g -O2 -c Lriemannsiegel.cc  -fno-common -DPIC -o .libs/Lriemannsiegel.o
In file included from Lmisc.cc:24:
In file included from ./Lmisc.h:27:
In file included from ./Lglobals.h:55:
./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
In file included from Lgamma.cc:24:
In file included from ./Lgamma.h:#include <bits/c++config.h>
         ^~~~~~~~~~~~~~~~~~
28:
In file included from ./Lglobals.h:55:
./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
#include <bits/c++config.h>
         ^~~~~~~~~~~~~~~~~~
In file included from Lglobals.cc:24:
In file included from ./Lglobals.h:55:
./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
#include <bits/c++config.h>
         ^~~~~~~~~~~~~~~~~~
1 error generated.
In file included from Lnumbertheory.cc:24:
In file included from ./Lnumbertheory.h:32:
In file included from ./Lglobals.h:55:
./Lcomplex.h:48:10: fatal error: 'bits/c++config.h' file not found
#include <bits/c++config.h>
         ^~~~~~~~~~~~~~~~~~
make[6]: *** [Lmisc.lo] Error 1
make[6]: *** Waiting for unfinished jobs....
```

removing the offending #include, i.e.

```diff
diff --git a/src/libLfunction/Lcomplex.h b/src/libLfunction/Lcomplex.h
index 639dbfa..be29aab 100644
--- a/src/libLfunction/Lcomplex.h
+++ b/src/libLfunction/Lcomplex.h
@@ -45,7 +45,7 @@
 
 #pragma GCC system_header
 
-#include <bits/c++config.h>
+// #include <bits/c++config.h>
 
 //no longer include:
 //#include <bits/cpp_type_traits.h>  only thing used was is_floating... 
```

makes it build



---

archive/issue_comments_518976.json:
```json
{
    "body": "<a id='comment:95'>Comment 95:</a>\nThanks, release/upgrade incoming.",
    "created_at": "2021-11-25T20:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518976",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:95'>Comment 95:</a>
Thanks, release/upgrade incoming.



---

archive/issue_comments_518977.json:
```json
{
    "body": "<a id='comment:96'>Comment 96:</a>\nReplying to [@kiwifb](#comment%3A92):\n> \n> Could have mentioned that. But clang on linux is not a good test unless you build clang's libstdc++ and make use of it.\n\nArgh, TIL about `USE=default-libcxx` on sys-devel/clang.",
    "created_at": "2021-11-25T21:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518977",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:96'>Comment 96:</a>
Replying to [@kiwifb](#comment%3A92):
> 
> Could have mentioned that. But clang on linux is not a good test unless you build clang's libstdc++ and make use of it.

Argh, TIL about `USE=default-libcxx` on sys-devel/clang.



---

archive/issue_comments_518978.json:
```json
{
    "body": "<a id='comment:97'>Comment 97:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042\">cbb7908</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.4.</code></td></tr></table>\n",
    "created_at": "2021-11-26T00:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518978",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:97'>Comment 97:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042">cbb7908</a></td><td><code>Trac #32037: upgrade to lcalc-2.0.4.</code></td></tr></table>




---

archive/issue_comments_518979.json:
```json
{
    "body": "Changed commit from **[1a2dd14](https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc)** to **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**",
    "created_at": "2021-11-26T00:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518979",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1a2dd14](https://github.com/sagemath/sagetrac-mirror/commit/1a2dd14015b4900fab3bf8836f8929e43cd827cc)** to **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**



---

archive/issue_comments_518980.json:
```json
{
    "body": "<a id='comment:98'>Comment 98:</a>\nCertain (non-sage) builds were failing with newer clangs anyway so I guess this was timely.",
    "created_at": "2021-11-26T00:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518980",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:98'>Comment 98:</a>
Certain (non-sage) builds were failing with newer clangs anyway so I guess this was timely.



---

archive/issue_events_409470.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-26T00:47:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409470"
}
```



---

archive/issue_events_409471.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-26T00:47:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409471"
}
```



---

archive/issue_events_409472.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-27T18:59:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "title_is": "Upgrade to lcalc-2.0.4",
    "title_was": "Upgrade to lcalc-2.0.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409472"
}
```



---

archive/issue_comments_518981.json:
```json
{
    "body": "<a id='comment:99'>Comment 99:</a>\nmaybe you can drop all the `register` things, as\n\n```\n warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n```\nis all over there on macOS.",
    "created_at": "2021-11-27T18:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518981",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:99'>Comment 99:</a>
maybe you can drop all the `register` things, as

```
 warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
```
is all over there on macOS.



---

archive/issue_comments_518982.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nlgtm, otherwise",
    "created_at": "2021-11-27T21:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518982",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'>Comment 0:</a>
lgtm, otherwise



---

archive/issue_comments_518983.json:
```json
{
    "body": "<a id='comment:101'>Comment 101:</a>\nReplying to [@dimpase](#comment%3A99):\n> maybe you can drop all the `register` things, as\n> \n> ```\n>  warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n> ```\n> is all over there on macOS.\n\nAre you sure this was with v2.0.4? I already fixed a warning like that, and there's no more *register* in the lcalc repo.",
    "created_at": "2021-11-28T23:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518983",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:101'>Comment 101:</a>
Replying to [@dimpase](#comment%3A99):
> maybe you can drop all the `register` things, as
> 
> ```
>  warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
> ```
> is all over there on macOS.

Are you sure this was with v2.0.4? I already fixed a warning like that, and there's no more *register* in the lcalc repo.



---

archive/issue_comments_518984.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAh, these came from the included pari headers /usr/local/include/pari/pari.h.\nAll good.",
    "created_at": "2021-11-29T00:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518984",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'>Comment 2:</a>
Ah, these came from the included pari headers /usr/local/include/pari/pari.h.
All good.



---

archive/issue_events_409473.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-29T00:10:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409473"
}
```



---

archive/issue_events_409474.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-29T00:10:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409474"
}
```



---

archive/issue_comments_518985.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/32037](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/32037)** to **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**",
    "created_at": "2021-12-12T15:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518985",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/32037](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/32037)** to **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)**



---

archive/issue_events_409475.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-12T15:08:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409475"
}
```



---

archive/issue_events_409476.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "493433c9e604e7914b1b5e71a7a2d070e4917178",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-12-12T15:08:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32037#event-409476"
}
```



---

archive/issue_comments_518986.json:
```json
{
    "body": "Changed commit from **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)** to none",
    "created_at": "2021-12-18T18:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518986",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[cbb7908](https://github.com/sagemath/sagetrac-mirror/commit/cbb790846f52d690c84f0a6207723973c9ff0042)** to none



---

archive/issue_comments_518987.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nThis broke cygwin: #33043",
    "created_at": "2021-12-18T18:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32037#issuecomment-518987",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
This broke cygwin: #33043
