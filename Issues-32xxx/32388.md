# Issue 32388: elliptic-curve isogenies probably shouldn't be mutable

archive/issues_032151.json:
```json
{
    "assignees": [],
    "body": "Right now, isogenies of elliptic curves are *slightly* mutable:\nThe three methods `switch_sign`, `set_post_isomorphism`, and `set_pre_isomorphism` all modify `self`.\n\nAs usual, this alone already causes bugs because it breaks hashing:\n\n```sage\nsage: E = EllipticCurve(GF(431), [1,0])\nsage: phi = E.isogeny(E.lift_x(277))\nsage: my_isogenies = {phi}\nsage: iso = phi.codomain().isomorphism_to(phi.codomain().change_weierstrass_model(1,2,3,4))\nsage: phi.set_post_isomorphism(iso)\nsage: phi in my_isogenies\nFalse\nsage: phi in list(my_isogenies)\nTrue\n```\n\nThe bigger issue is that it breaks other constructions that use `EllipticCurveIsogenies` as a building block: The easiest example is the existing `FormalCompositeMap` we already get from composing two isogenies. Mutability means that the factors of the map can be changed after the composition has been constructed, with weird and buggy results:\n\n```sage\nsage: psi = E.multiplication_by_m_isogeny(2)\nsage: f = phi * psi\nsage: f(E(0,0))\n(0 : 1 : 0)\nsage: iso = phi.domain().change_weierstrass_model(1,2,3,4).isomorphism_to(phi.domain())\nsage: psi.set_pre_isomorphism(iso)\nsage: f(E(0,0))\n# ...\nTypeError: Coordinates [11, 145, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + x over Finite Field of size 431\nsage: f.domain()\nElliptic Curve defined by y^2 = x^3 + x over Finite Field of size 431\nsage: f[0].domain()\nElliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 + 428*x^2 + 420*x + 425 over Finite Field of size 431\n```\n\nThe main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.\n\nSince I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.\n(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before.)\n\nTo facilitate these \"mixed\" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (mostly just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains. This was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.\n\nNote: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.\n\nAlso note: The patch is probably easiest to review by looking at the individual commits rather than the overall diff.\n\nCC:  @defeo @JohnCremona @tscrim\n\nKeywords: **elliptic curves, isogenies, mutability**\n\nBranch/Commit: **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**\n\nReviewer: **Travis Scrimshaw, John Cremona**\n\nAuthor: **Lorenz Panny**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32388_\n\n",
    "closed_at": "2021-09-19T09:59:06Z",
    "created_at": "2021-08-17T05:17:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "elliptic-curve isogenies probably shouldn't be mutable",
    "type": "issue",
    "updated_at": "2021-09-19T09:59:06Z",
    "url": "https://github.com/sagemath/sage/issues/32388",
    "user": "https://github.com/yyyyx4"
}
```
Right now, isogenies of elliptic curves are *slightly* mutable:
The three methods `switch_sign`, `set_post_isomorphism`, and `set_pre_isomorphism` all modify `self`.

As usual, this alone already causes bugs because it breaks hashing:

```sage
sage: E = EllipticCurve(GF(431), [1,0])
sage: phi = E.isogeny(E.lift_x(277))
sage: my_isogenies = {phi}
sage: iso = phi.codomain().isomorphism_to(phi.codomain().change_weierstrass_model(1,2,3,4))
sage: phi.set_post_isomorphism(iso)
sage: phi in my_isogenies
False
sage: phi in list(my_isogenies)
True
```

The bigger issue is that it breaks other constructions that use `EllipticCurveIsogenies` as a building block: The easiest example is the existing `FormalCompositeMap` we already get from composing two isogenies. Mutability means that the factors of the map can be changed after the composition has been constructed, with weird and buggy results:

```sage
sage: psi = E.multiplication_by_m_isogeny(2)
sage: f = phi * psi
sage: f(E(0,0))
(0 : 1 : 0)
sage: iso = phi.domain().change_weierstrass_model(1,2,3,4).isomorphism_to(phi.domain())
sage: psi.set_pre_isomorphism(iso)
sage: f(E(0,0))
# ...
TypeError: Coordinates [11, 145, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + x over Finite Field of size 431
sage: f.domain()
Elliptic Curve defined by y^2 = x^3 + x over Finite Field of size 431
sage: f[0].domain()
Elliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 + 428*x^2 + 420*x + 425 over Finite Field of size 431
```

The main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.

Since I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.
(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before.)

To facilitate these "mixed" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (mostly just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains. This was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.

Note: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.

Also note: The patch is probably easiest to review by looking at the individual commits rather than the overall diff.

CC:  @defeo @JohnCremona @tscrim

Keywords: **elliptic curves, isogenies, mutability**

Branch/Commit: **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**

Reviewer: **Travis Scrimshaw, John Cremona**

Author: **Lorenz Panny**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/32388_





---

archive/issue_events_446760.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-17T05:17:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446760"
}
```



---

archive/issue_events_446761.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-17T05:17:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446761"
}
```



---

archive/issue_events_446762.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-17T05:17:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446762"
}
```



---

archive/issue_events_446763.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-17T05:17:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446763"
}
```



---

archive/issue_comments_522209.json:
```json
{
    "body": "Author: **Lorenz Panny**",
    "created_at": "2021-08-17T05:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522209",
    "user": "https://github.com/yyyyx4"
}
```

Author: **Lorenz Panny**



---

archive/issue_comments_522210.json:
```json
{
    "body": "Commit: **[`69a15a2`](https://github.com/sagemath/sagetrac-mirror/commit/69a15a2bb2e6584714fa291d8540d67de7cf62a2)**",
    "created_at": "2021-08-17T05:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522210",
    "user": "https://github.com/yyyyx4"
}
```

Commit: **[`69a15a2`](https://github.com/sagemath/sagetrac-mirror/commit/69a15a2bb2e6584714fa291d8540d67de7cf62a2)**



---

archive/issue_comments_522211.json:
```json
{
    "body": "Branch: **[public/deprecate_mutable_elliptic_curve_isogenies](https://github.com/sagemath/sagetrac-mirror/tree/public/deprecate_mutable_elliptic_curve_isogenies)**",
    "created_at": "2021-08-17T05:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522211",
    "user": "https://github.com/yyyyx4"
}
```

Branch: **[public/deprecate_mutable_elliptic_curve_isogenies](https://github.com/sagemath/sagetrac-mirror/tree/public/deprecate_mutable_elliptic_curve_isogenies)**



---

archive/issue_events_446764.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-17T05:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446764"
}
```



---

archive/issue_comments_522212.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,14 @@\n sage: f[0].domain()\n Elliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 + 428*x^2 + 420*x + 425 over Finite Field of size 431\n ```\n+\n+The main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.\n+\n+Since I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.\n+(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before. The current implementation of these compositions is a bit hacky, but can transparently be replaced by something more principled in the future.)\n+\n+To facilitate these \"mixed\" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (currently just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains; this was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.\n+\n+Note: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.\n+\n+Also note: The patch is probably easiest to review by looking at the individual commits rather than the overall diff.\n``````\n",
    "created_at": "2021-08-17T05:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522212",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,14 @@
 sage: f[0].domain()
 Elliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 + 428*x^2 + 420*x + 425 over Finite Field of size 431
 ```
+
+The main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.
+
+Since I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.
+(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before. The current implementation of these compositions is a bit hacky, but can transparently be replaced by something more principled in the future.)
+
+To facilitate these "mixed" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (currently just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains; this was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.
+
+Note: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.
+
+Also note: The patch is probably easiest to review by looking at the individual commits rather than the overall diff.
``````




---

archive/issue_comments_522213.json:
```json
{
    "body": "Changed commit from **[`69a15a2`](https://github.com/sagemath/sagetrac-mirror/commit/69a15a2bb2e6584714fa291d8540d67de7cf62a2)** to **[`b2d61b8`](https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4)**",
    "created_at": "2021-08-20T05:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522213",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69a15a2`](https://github.com/sagemath/sagetrac-mirror/commit/69a15a2bb2e6584714fa291d8540d67de7cf62a2)** to **[`b2d61b8`](https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4)**



---

archive/issue_comments_522214.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c24d57f4c5bfa6ee78b1e27b1b03d26b3b77730b\"><code>c24d57f</code></a></td><td><code>Revert \"hack to make * compose isogenies and isomorphisms correctly\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5714eaa68992ed2c51505613fb6f643292afeacc\"><code>5714eaa</code></a></td><td><code>make * compose isogenies and isomorphisms correctly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4\"><code>b2d61b8</code></a></td><td><code>make patchbot plugins happier</code></td></tr></table>\n",
    "created_at": "2021-08-20T05:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522214",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c24d57f4c5bfa6ee78b1e27b1b03d26b3b77730b"><code>c24d57f</code></a></td><td><code>Revert "hack to make * compose isogenies and isomorphisms correctly"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5714eaa68992ed2c51505613fb6f643292afeacc"><code>5714eaa</code></a></td><td><code>make * compose isogenies and isomorphisms correctly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4"><code>b2d61b8</code></a></td><td><code>make patchbot plugins happier</code></td></tr></table>




---

archive/issue_comments_522215.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplaced the previous, very hacky implementation of compositions between different types of `EllipticCurveHom`s by a slightly less hacky version that should make it easier to get compositions to work with new subclasses of `EllipticCurveHom`.",
    "created_at": "2021-08-20T05:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522215",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:4" align="right">comment:4</div>

Replaced the previous, very hacky implementation of compositions between different types of `EllipticCurveHom`s by a slightly less hacky version that should make it easier to get compositions to work with new subclasses of `EllipticCurveHom`.



---

archive/issue_comments_522216.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,9 +36,9 @@\n The main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.\n \n Since I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.\n-(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before. The current implementation of these compositions is a bit hacky, but can transparently be replaced by something more principled in the future.)\n+(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before.)\n \n-To facilitate these \"mixed\" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (currently just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains; this was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.\n+To facilitate these \"mixed\" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (mostly just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains. This was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.\n \n Note: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.\n \n``````\n",
    "created_at": "2021-08-20T05:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522216",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,9 +36,9 @@
 The main reason I care about this is because I'm working on parts of #7368, and this precise issue is causing quite a bit of headache. I suggest deprecating the `set_*_isomorphism()` and `switch_sign()` methods as soon as possible so that isogenies can stop mutating in-place at some point in the not too distant future.
 
 Since I'm sure composing isogenies with isomorphisms will be sorely missed (I use this feature a lot myself), the patch does introduce new syntax for the same operations: We can simply write `iso * phi` to post-compose `phi` with `iso`, and similarly for pre-composition. The `switch_sign` method can already be substituted by the unary negation operator.
-(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before. The current implementation of these compositions is a bit hacky, but can transparently be replaced by something more principled in the future.)
+(Note that composing isogenies and isomorphisms using `*` does *not* result in a generic formal composition, but in an `EllipticCurveIsogeny` like before.)
 
-To facilitate these "mixed" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (currently just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains; this was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.
+To facilitate these "mixed" compositions, the patch reparents `WeierstrassIsomorphism` and `EllipticCurveIsogeny` under a common parent class `EllipticCurveHom` (mostly just a `Morphism` with a different name). This should also make implementing other classes of elliptic-curve morphisms (e.g., purely inseparable isogenies, formal sums of isogenies for endomorphism rings, etc.) easier in the future. As part of this change, `WeierstrassIsomorphism`s now have actual curves rather than groups of points as their (co)domains. This was the mathematically right choice all along and is consistent with `EllipticCurveIsogenies`.
 
 Note: This patch is intentionally kept small. I'm aware of other things in the elliptic-curve isogeny code that need refactoring or fixing. My hope is that making small changes one at a time has a better chance of actually getting things done.
 
``````




---

archive/issue_comments_522217.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638\"><code>bb8c235</code></a></td><td><code>return NotImplemented instead of raising NotImplementedError</code></td></tr></table>\n",
    "created_at": "2021-08-30T08:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522217",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638"><code>bb8c235</code></a></td><td><code>return NotImplemented instead of raising NotImplementedError</code></td></tr></table>




---

archive/issue_comments_522218.json:
```json
{
    "body": "Changed commit from **[`b2d61b8`](https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4)** to **[`bb8c235`](https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638)**",
    "created_at": "2021-08-30T08:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522218",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2d61b8`](https://github.com/sagemath/sagetrac-mirror/commit/b2d61b8c47589c2b0eb65f2c3c8b7333fa72dac4)** to **[`bb8c235`](https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638)**



---

archive/issue_comments_522219.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nYet another example where this causes things to break:\n\n```sage\nsage: from sage.schemes.elliptic_curves.weierstrass_morphism import WeierstrassIsomorphism\nsage: E = EllipticCurve([1,0])\nsage: phi = E.isogeny(E(0,0))\nsage: psi = phi.dual(); psi\nIsogeny of degree 2 from Elliptic Curve defined by y^2 = x^3 - 4*x over Rational Field to Elliptic Curve defined by y^2 = x^3 + x over Rational Field\nsage: psi.set_post_isomorphism(WeierstrassIsomorphism(E, (1,2,3,4)))\nsage: phi.dual()\nIsogeny of degree 2 from Elliptic Curve defined by y^2 = x^3 - 4*x over Rational Field to Elliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 - 3*x^2 - 11*x - 6 over Rational Field\n```",
    "created_at": "2021-09-10T03:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522219",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:6" align="right">comment:6</div>

Yet another example where this causes things to break:

```sage
sage: from sage.schemes.elliptic_curves.weierstrass_morphism import WeierstrassIsomorphism
sage: E = EllipticCurve([1,0])
sage: phi = E.isogeny(E(0,0))
sage: psi = phi.dual(); psi
Isogeny of degree 2 from Elliptic Curve defined by y^2 = x^3 - 4*x over Rational Field to Elliptic Curve defined by y^2 = x^3 + x over Rational Field
sage: psi.set_post_isomorphism(WeierstrassIsomorphism(E, (1,2,3,4)))
sage: phi.dual()
Isogeny of degree 2 from Elliptic Curve defined by y^2 = x^3 - 4*x over Rational Field to Elliptic Curve defined by y^2 + 6*x*y + 8*y = x^3 - 3*x^2 - 11*x - 6 over Rational Field
```



---

archive/issue_comments_522220.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor composition you can also consider offering the `_matmul_` operator (#30244, #32212)",
    "created_at": "2021-09-10T04:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522220",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

For composition you can also consider offering the `_matmul_` operator (#30244, #32212)



---

archive/issue_comments_522221.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde\"><code>207d534</code></a></td><td><code>add EllipticCurveHom to documentation</code></td></tr></table>\n",
    "created_at": "2021-09-10T08:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522221",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde"><code>207d534</code></a></td><td><code>add EllipticCurveHom to documentation</code></td></tr></table>




---

archive/issue_comments_522222.json:
```json
{
    "body": "Changed commit from **[`bb8c235`](https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638)** to **[`207d534`](https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde)**",
    "created_at": "2021-09-10T08:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522222",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bb8c235`](https://github.com/sagemath/sagetrac-mirror/commit/bb8c2358281961c3dbdb17282ea0c190a956b638)** to **[`207d534`](https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde)**



---

archive/issue_comments_522223.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mkoeppe](#comment:7):\n> For composition you can also consider offering the `_matmul_` operator (#30244, #32212)\n\nSounds reasonable, but feels somewhat orthogonal to this ticket. In any case, to avoid fixing an interface prematurely, we should think about whether we'd like `@` and `*` to do different things, in particular regarding #31850. (Personally, I think they should be the same and create isogeny-esque formal composite maps, as outlined in [#31850 comment:6](https://github.com/sagemath/sage/issues/31850#comment:6).)",
    "created_at": "2021-09-10T08:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522223",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mkoeppe](#comment:7):
> For composition you can also consider offering the `_matmul_` operator (#30244, #32212)

Sounds reasonable, but feels somewhat orthogonal to this ticket. In any case, to avoid fixing an interface prematurely, we should think about whether we'd like `@` and `*` to do different things, in particular regarding #31850. (Personally, I think they should be the same and create isogeny-esque formal composite maps, as outlined in [#31850 comment:6](https://github.com/sagemath/sage/issues/31850#comment:6).)



---

archive/issue_comments_522224.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFor the internal call to `_switch_sign`, I think you should just explicitly replace it with the function call and get rid of `_switch_sign` as it is only called in one place in non-deprecated code.",
    "created_at": "2021-09-13T01:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522224",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

For the internal call to `_switch_sign`, I think you should just explicitly replace it with the function call and get rid of `_switch_sign` as it is only called in one place in non-deprecated code.



---

archive/issue_comments_522225.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0\"><code>c6b8f66</code></a></td><td><code>feedback from #32388: inline _switch_sign()</code></td></tr></table>\n",
    "created_at": "2021-09-13T03:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522225",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0"><code>c6b8f66</code></a></td><td><code>feedback from #32388: inline _switch_sign()</code></td></tr></table>




---

archive/issue_comments_522226.json:
```json
{
    "body": "Changed commit from **[`207d534`](https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde)** to **[`c6b8f66`](https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0)**",
    "created_at": "2021-09-13T03:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522226",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`207d534`](https://github.com/sagemath/sagetrac-mirror/commit/207d5344e337ebbbdcbbedf79a94981aaaf0bbde)** to **[`c6b8f66`](https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0)**



---

archive/issue_comments_522227.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOnly other thing that needs to be done is make sure every method has a doctest.",
    "created_at": "2021-09-13T04:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522227",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Only other thing that needs to be done is make sure every method has a doctest.



---

archive/issue_comments_522228.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc\"><code>fdc6117</code></a></td><td><code>#32388: more doctests</code></td></tr></table>\n",
    "created_at": "2021-09-13T06:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522228",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc"><code>fdc6117</code></a></td><td><code>#32388: more doctests</code></td></tr></table>




---

archive/issue_comments_522229.json:
```json
{
    "body": "Changed commit from **[`c6b8f66`](https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0)** to **[`fdc6117`](https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc)**",
    "created_at": "2021-09-13T06:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6b8f66`](https://github.com/sagemath/sagetrac-mirror/commit/c6b8f66dddbaee892f7ccb42957a61e6d3cfaff0)** to **[`fdc6117`](https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc)**



---

archive/issue_comments_522230.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDone, I believe.",
    "created_at": "2021-09-13T07:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522230",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:14" align="right">comment:14</div>

Done, I believe.



---

archive/issue_comments_522231.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316\"><code>40081c7</code></a></td><td><code>not necessary</code></td></tr></table>\n",
    "created_at": "2021-09-13T13:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522231",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316"><code>40081c7</code></a></td><td><code>not necessary</code></td></tr></table>




---

archive/issue_comments_522232.json:
```json
{
    "body": "Changed commit from **[`fdc6117`](https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc)** to **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**",
    "created_at": "2021-09-13T13:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522232",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdc6117`](https://github.com/sagemath/sagetrac-mirror/commit/fdc6117e2947e8ff42af8669a7f4590c6606ccdc)** to **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**



---

archive/issue_comments_522233.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks to those who have been working on this and related tickets.  I have just been looking at the threads after returning from holiday and am happy with what is being proposed.\n\nThe issue regarding normalization of isogenies is almost entirely restricted to isogenies over finite fields, where it is easy to achieve by changing the model used for the domain or codomain, but is almost irrelevant for isogenies over Q and other number fields, which I have done most with (and use most), where you often have few units around to scale modles by, and do not care whether the isogenies are normalised.\n\nSecondly, composing with isomorphisms in general is used a lot in the code I wrote for compstructing isogenies over number fields, where there's a generic formula for short Weiertstrass equations but one want an isogeny between other (say minimal) models.  In particular, pre- and post-composing by automorphisms was implemented the way it is (I seem to remember) by the original implemented, who worked over finite fields, and added some features at my request before the first versions of all this were merged years ago.",
    "created_at": "2021-09-13T15:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522233",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks to those who have been working on this and related tickets.  I have just been looking at the threads after returning from holiday and am happy with what is being proposed.

The issue regarding normalization of isogenies is almost entirely restricted to isogenies over finite fields, where it is easy to achieve by changing the model used for the domain or codomain, but is almost irrelevant for isogenies over Q and other number fields, which I have done most with (and use most), where you often have few units around to scale modles by, and do not care whether the isogenies are normalised.

Secondly, composing with isomorphisms in general is used a lot in the code I wrote for compstructing isogenies over number fields, where there's a generic formula for short Weiertstrass equations but one want an isogeny between other (say minimal) models.  In particular, pre- and post-composing by automorphisms was implemented the way it is (I seem to remember) by the original implemented, who worked over finite fields, and added some features at my request before the first versions of all this were merged years ago.



---

archive/issue_comments_522234.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-09-15T01:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522234",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_522235.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you. This LGTM.\n\nJohn, forgive me as this is a bit outside my mathematical area, is there something with this ticket, such as removing the pre/post-compose with mutation that you disagree with, such as for performance reasons?",
    "created_at": "2021-09-15T01:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522235",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you. This LGTM.

John, forgive me as this is a bit outside my mathematical area, is there something with this ticket, such as removing the pre/post-compose with mutation that you disagree with, such as for performance reasons?



---

archive/issue_events_446765.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-09-15T07:52:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446765"
}
```



---

archive/issue_events_446766.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-09-15T07:52:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446766"
}
```



---

archive/issue_comments_522236.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, John Cremona**",
    "created_at": "2021-09-15T07:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522236",
    "user": "https://github.com/JohnCremona"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, John Cremona**



---

archive/issue_comments_522237.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment:17):\n> Thank you. This LGTM.\n> \n> John, forgive me as this is a bit outside my mathematical area, is there something with this ticket, such as removing the pre/post-compose with mutation that you disagree with, such as for performance reasons?\n\nNo, not at all.  I really like these changes, and also the move towards unifying isogenies with isomorphisms (of Weierstrass models) which always were a special case.  This is much better.  I think that implementing W. isomorphisms was the very first thing I ever did in Sage, in 2007, so probably my first ever Python programming, and hence almost certainly in need of attention -- that was before isogenies were implemented at all, and was desperately needed at the time!\n\nI have looked at the changes and am happy to add my name to the reviewers, and give this a positive review.",
    "created_at": "2021-09-15T07:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522237",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment:17):
> Thank you. This LGTM.
> 
> John, forgive me as this is a bit outside my mathematical area, is there something with this ticket, such as removing the pre/post-compose with mutation that you disagree with, such as for performance reasons?

No, not at all.  I really like these changes, and also the move towards unifying isogenies with isomorphisms (of Weierstrass models) which always were a special case.  This is much better.  I think that implementing W. isomorphisms was the very first thing I ever did in Sage, in 2007, so probably my first ever Python programming, and hence almost certainly in need of attention -- that was before isogenies were implemented at all, and was desperately needed at the time!

I have looked at the changes and am happy to add my name to the reviewers, and give this a positive review.



---

archive/issue_comments_522238.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nGreat, thank you for clarifying and reviewing.",
    "created_at": "2021-09-15T09:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522238",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Great, thank you for clarifying and reviewing.



---

archive/issue_comments_522239.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThanks both of you! I'm glad you agree that these changes are a step towards making things better. :-)",
    "created_at": "2021-09-15T10:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522239",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:20" align="right">comment:20</div>

Thanks both of you! I'm glad you agree that these changes are a step towards making things better. :-)



---

archive/issue_comments_522240.json:
```json
{
    "body": "Changed branch from **[public/deprecate_mutable_elliptic_curve_isogenies](https://github.com/sagemath/sagetrac-mirror/tree/public/deprecate_mutable_elliptic_curve_isogenies)** to **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**",
    "created_at": "2021-09-19T09:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32388#issuecomment-522240",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/deprecate_mutable_elliptic_curve_isogenies](https://github.com/sagemath/sagetrac-mirror/tree/public/deprecate_mutable_elliptic_curve_isogenies)** to **[`40081c7`](https://github.com/sagemath/sagetrac-mirror/commit/40081c7895a119dfbbdbf1a39671d04a48498316)**



---

archive/issue_events_446767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-19T09:59:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446767"
}
```



---

archive/issue_events_446768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0dd478a0b44fb114caee0d53c6671c9ed9e86104",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-09-19T09:59:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32388",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32388#event-446768"
}
```
