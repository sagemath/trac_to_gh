# Issue 32135: Implement to_polynomial and from_polynomial methods for ModularFormsRing

archive/issues_031898.json:
```json
{
    "assignees": [
        "https://github.com/DavidAyotte"
    ],
    "body": "The goal of this ticket is to implement two methods: one for the class `GradedModularFormElement` and one for the class `ModularFormsRing`. \n\n* The first method is `to_polynomial` that will convert a graded form *F* into a polynomial *P(X_1, X_2,... X_n)* where the *X_i* correspond to the generators of the graded ring of modular forms in which *F* lives. Note that the result of this method is not unique in general. \n\n```\nsage: M = ModularFormsRing(1)\nsage: f = (M.0)^3 + (M.1)^2;\n2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)\nsage: f.to_polynomial(f)\nX^3 + Y^2\n```\n\n* The second method is `from_polynomial` that will convert a polynomial into a graded form:\n\n```\nsage: M = ModularFormsRing(1)\nsage: M.from_polynomial(X^3 + Y^2, [M.0, M.1])\n2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)\n```\n\nThis ticket is part of #31560\n\n\n\nDepends on #31559\n\nCC:  @videlec\n\nKeywords: **graded modular forms polynomials gsoc 2021**\n\nBranch/Commit: **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **David Ayotte**\n\nComponent: **modular forms**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32135_\n\n",
    "closed_at": "2021-08-31T22:00:32Z",
    "created_at": "2021-07-05T14:08:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement to_polynomial and from_polynomial methods for ModularFormsRing",
    "type": "issue",
    "updated_at": "2021-08-31T22:00:32Z",
    "url": "https://github.com/sagemath/sage/issues/32135",
    "user": "https://github.com/DavidAyotte"
}
```
The goal of this ticket is to implement two methods: one for the class `GradedModularFormElement` and one for the class `ModularFormsRing`. 

* The first method is `to_polynomial` that will convert a graded form *F* into a polynomial *P(X_1, X_2,... X_n)* where the *X_i* correspond to the generators of the graded ring of modular forms in which *F* lives. Note that the result of this method is not unique in general. 

```
sage: M = ModularFormsRing(1)
sage: f = (M.0)^3 + (M.1)^2;
2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)
sage: f.to_polynomial(f)
X^3 + Y^2
```

* The second method is `from_polynomial` that will convert a polynomial into a graded form:

```
sage: M = ModularFormsRing(1)
sage: M.from_polynomial(X^3 + Y^2, [M.0, M.1])
2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)
```

This ticket is part of #31560



Depends on #31559

CC:  @videlec

Keywords: **graded modular forms polynomials gsoc 2021**

Branch/Commit: **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**

Reviewer: **Vincent Delecroix**

Author: **David Ayotte**

Component: **modular forms**

_Issue created by migration from https://trac.sagemath.org/ticket/32135_





---

archive/issue_events_439985.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-05T14:08:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439985"
}
```



---

archive/issue_events_439986.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-05T14:08:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "c: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439986"
}
```



---

archive/issue_events_439987.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-05T14:08:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439987"
}
```



---

archive/issue_events_439988.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-05T14:08:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439988"
}
```



---

archive/issue_events_439989.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-05T14:08:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "c: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439989"
}
```



---

archive/issue_comments_517475.json:
```json
{
    "body": "Branch: **[u/gh-DavidAyotte/modform_to_polynomials_generators](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/modform_to_polynomials_generators)**",
    "created_at": "2021-07-06T17:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517475",
    "user": "https://github.com/DavidAyotte"
}
```

Branch: **[u/gh-DavidAyotte/modform_to_polynomials_generators](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/modform_to_polynomials_generators)**



---

archive/issue_comments_517476.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d\"><code>5bbc4f4</code></a></td><td><code>initial implementation of the method from_polynomial</code></td></tr></table>\n",
    "created_at": "2021-07-06T19:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517476",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d"><code>5bbc4f4</code></a></td><td><code>initial implementation of the method from_polynomial</code></td></tr></table>




---

archive/issue_comments_517477.json:
```json
{
    "body": "Commit: **[`5bbc4f4`](https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d)**",
    "created_at": "2021-07-06T19:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517477",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5bbc4f4`](https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d)**



---

archive/issue_comments_517478.json:
```json
{
    "body": "Changed commit from **[`5bbc4f4`](https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d)** to **[`b2517ec`](https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8)**",
    "created_at": "2021-07-07T01:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5bbc4f4`](https://github.com/sagemath/sagetrac-mirror/commit/5bbc4f41998518144fd005b60bf85515abb98c8d)** to **[`b2517ec`](https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8)**



---

archive/issue_comments_517479.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8\"><code>b2517ec</code></a></td><td><code>updated _generators_variables_dictionnary</code></td></tr></table>\n",
    "created_at": "2021-07-07T01:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8"><code>b2517ec</code></a></td><td><code>updated _generators_variables_dictionnary</code></td></tr></table>




---

archive/issue_comments_517480.json:
```json
{
    "body": "Changed commit from **[`b2517ec`](https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8)** to **[`461d5f6`](https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100)**",
    "created_at": "2021-07-07T17:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517480",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2517ec`](https://github.com/sagemath/sagetrac-mirror/commit/b2517ecb6cbea6390e8c70cbcf18b315e82b03b8)** to **[`461d5f6`](https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100)**



---

archive/issue_comments_517481.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100\"><code>461d5f6</code></a></td><td><code>implementation of to_polynomial</code></td></tr></table>\n",
    "created_at": "2021-07-07T17:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517481",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100"><code>461d5f6</code></a></td><td><code>implementation of to_polynomial</code></td></tr></table>




---

archive/issue_events_439990.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-07T17:51:22Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "subject": "https://github.com/DavidAyotte",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439990"
}
```



---

archive/issue_events_439991.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-07T17:53:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439991"
}
```



---

archive/issue_comments_517482.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n sage: M = ModularFormsRing(1)\n sage: f = (M.0)^3 + (M.1)^2;\n 2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)\n-sage: f.to_polynomial([M.0, M.1])\n+sage: f.to_polynomial(f)\n X^3 + Y^2\n ```\n \n``````\n",
    "created_at": "2021-07-07T17:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517482",
    "user": "https://github.com/DavidAyotte"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 sage: M = ModularFormsRing(1)
 sage: f = (M.0)^3 + (M.1)^2;
 2 - 288*q + 400032*q^2 + 33473664*q^3 + 796491936*q^4 + 9257371200*q^5 + O(q^6)
-sage: f.to_polynomial([M.0, M.1])
+sage: f.to_polynomial(f)
 X^3 + Y^2
 ```
 
``````




---

archive/issue_comments_517483.json:
```json
{
    "body": "Changed commit from **[`461d5f6`](https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100)** to **[`1e6a262`](https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1)**",
    "created_at": "2021-07-12T13:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517483",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`461d5f6`](https://github.com/sagemath/sagetrac-mirror/commit/461d5f623afd914c1ce9573db806f9235aef8100)** to **[`1e6a262`](https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1)**



---

archive/issue_comments_517484.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1\"><code>1e6a262</code></a></td><td><code>make polynomial_ring not private, assigned degrees to the variables</code></td></tr></table>\n",
    "created_at": "2021-07-12T13:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1"><code>1e6a262</code></a></td><td><code>make polynomial_ring not private, assigned degrees to the variables</code></td></tr></table>




---

archive/issue_comments_517485.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641\"><code>7d8b20a</code></a></td><td><code>fix docstring of to_polynomial</code></td></tr></table>\n",
    "created_at": "2021-07-12T20:21:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517485",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641"><code>7d8b20a</code></a></td><td><code>fix docstring of to_polynomial</code></td></tr></table>




---

archive/issue_comments_517486.json:
```json
{
    "body": "Changed commit from **[`1e6a262`](https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1)** to **[`7d8b20a`](https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641)**",
    "created_at": "2021-07-12T20:21:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517486",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e6a262`](https://github.com/sagemath/sagetrac-mirror/commit/1e6a262bcd6a89b4d6b72dec2005f861440f83c1)** to **[`7d8b20a`](https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641)**



---

archive/issue_events_439992.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-07-27T08:57:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439992"
}
```



---

archive/issue_events_439993.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-07-27T08:57:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439993"
}
```



---

archive/issue_comments_517487.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe method `_monomials_of_weight` is hidden and it does not make much sense to have an `EXAMPLES` block for this. Furthermore, the code is not properly indented here.\n\nThe method `_weights_of_generators` is used only once in the code. It does not make much sense to have it given that its code is a single line.\n\nIn the documentation of `polynomial_ring` the generators are not unique. You would better change <code>Return the polynomial ring of which \\`\\`self\\`\\` is a quotient.</code> by <code>Return a polynomial ring of which \\`\\`self\\`\\` is a quotient.</code>.\n\nThe method `_monomials_of_weight` is used nowhere. After `:meth:` in the documentation you need to add backticks like <code>:meth:\\`my_method\\`</code>. This was missing in `from_polynomial`.\n\nInstead of\n\n```\niter = 0\npoly = 0\nfor p in monomials.keys():\n    poly += soln[iter, 0]*p\n    iter += 1\n```\nyou would better write\n\n```\npoly = 0 # TODO : this should be the zero polynomial, not the integer 0\nfor iter, p in enumerate(monomials):\n    poly += soln[iter, 0]*p\n```",
    "created_at": "2021-07-27T08:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517487",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

The method `_monomials_of_weight` is hidden and it does not make much sense to have an `EXAMPLES` block for this. Furthermore, the code is not properly indented here.

The method `_weights_of_generators` is used only once in the code. It does not make much sense to have it given that its code is a single line.

In the documentation of `polynomial_ring` the generators are not unique. You would better change <code>Return the polynomial ring of which \`\`self\`\` is a quotient.</code> by <code>Return a polynomial ring of which \`\`self\`\` is a quotient.</code>.

The method `_monomials_of_weight` is used nowhere. After `:meth:` in the documentation you need to add backticks like <code>:meth:\`my_method\`</code>. This was missing in `from_polynomial`.

Instead of

```
iter = 0
poly = 0
for p in monomials.keys():
    poly += soln[iter, 0]*p
    iter += 1
```
you would better write

```
poly = 0 # TODO : this should be the zero polynomial, not the integer 0
for iter, p in enumerate(monomials):
    poly += soln[iter, 0]*p
```



---

archive/issue_comments_517488.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877\"><code>e4a974f</code></a></td><td><code>fix docstring, removed _weights_of_gemerators, small code syntax changes</code></td></tr></table>\n",
    "created_at": "2021-07-27T19:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517488",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877"><code>e4a974f</code></a></td><td><code>fix docstring, removed _weights_of_gemerators, small code syntax changes</code></td></tr></table>




---

archive/issue_comments_517489.json:
```json
{
    "body": "Changed commit from **[`7d8b20a`](https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641)** to **[`e4a974f`](https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877)**",
    "created_at": "2021-07-27T19:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517489",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d8b20a`](https://github.com/sagemath/sagetrac-mirror/commit/7d8b20ae2b308dd7aecb3f34fc4a2e78c8f7b641)** to **[`e4a974f`](https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877)**



---

archive/issue_events_439994.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-27T19:14:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439994"
}
```



---

archive/issue_events_439995.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-07-27T19:14:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439995"
}
```



---

archive/issue_comments_517490.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThank you very much for the comments! Considering the method `_monomials_of_weight`, it is used in `sage/modular/modform/element.py`, line 3563 (for the method `_homogeneous_to_polynomial`). However, it is the only place that it is used. Should I make it not private, or simply erase the method and move the code inside the method `_homogeneous_to_polynomial`?",
    "created_at": "2021-07-27T19:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517490",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:12" align="right">comment:12</div>

Thank you very much for the comments! Considering the method `_monomials_of_weight`, it is used in `sage/modular/modform/element.py`, line 3563 (for the method `_homogeneous_to_polynomial`). However, it is the only place that it is used. Should I make it not private, or simply erase the method and move the code inside the method `_homogeneous_to_polynomial`?



---

archive/issue_comments_517491.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b9332ec4c3bde432908da2a2381184ad638531d\"><code>1b9332e</code></a></td><td><code>moved sage.modular.modform.find_generators.py in sage.rings, attempt at making decrecation work (without success)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68509f933d5182591ebbee5a21bea6fcd423894d\"><code>68509f9</code></a></td><td><code>deprecation, added missing newline</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e78c452b05c0236d5f219b01bee9e2ae753eb12\"><code>2e78c45</code></a></td><td><code>revert to commit 7fdca22</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99f8ab5647e8b30a017b5fddba2fc12ad0a27988\"><code>99f8ab5</code></a></td><td><code>renamed find_generators.py to ring.py, added deprecation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62a9484b3e9ac98ec832266ef231b73fa2a775ff\"><code>62a9484</code></a></td><td><code>docstring updates, fixed weights_list method for zero element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed90b5a170ee62c20462979b112ac4b12625482f\"><code>ed90b5a</code></a></td><td><code>fixed deprecation, added deprecation for find_generators and basis_for_modform_space</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d489a1f423e066fd99bfc6ed18e5ea8a8c92a14c\"><code>d489a1f</code></a></td><td><code>moved deprecation doctests inside find_generators, fixed docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf19eece5c801e7cbb2c170c9df6e286ccdbd506\"><code>bf19eec</code></a></td><td><code>added example info for GradedModularFormElement class, moved some doctests inside the `__init__` method (for coverage)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e499076cadb327925414e917fa1f2c399269d2b\"><code>2e49907</code></a></td><td><code>fix docbuild error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff\"><code>d991d19</code></a></td><td><code>merge ticket 31559 'Make ModularFormRings manipulate formal objects' and fix conflicts</code></td></tr></table>\n",
    "created_at": "2021-08-04T15:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517491",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b9332ec4c3bde432908da2a2381184ad638531d"><code>1b9332e</code></a></td><td><code>moved sage.modular.modform.find_generators.py in sage.rings, attempt at making decrecation work (without success)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68509f933d5182591ebbee5a21bea6fcd423894d"><code>68509f9</code></a></td><td><code>deprecation, added missing newline</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e78c452b05c0236d5f219b01bee9e2ae753eb12"><code>2e78c45</code></a></td><td><code>revert to commit 7fdca22</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99f8ab5647e8b30a017b5fddba2fc12ad0a27988"><code>99f8ab5</code></a></td><td><code>renamed find_generators.py to ring.py, added deprecation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62a9484b3e9ac98ec832266ef231b73fa2a775ff"><code>62a9484</code></a></td><td><code>docstring updates, fixed weights_list method for zero element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed90b5a170ee62c20462979b112ac4b12625482f"><code>ed90b5a</code></a></td><td><code>fixed deprecation, added deprecation for find_generators and basis_for_modform_space</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d489a1f423e066fd99bfc6ed18e5ea8a8c92a14c"><code>d489a1f</code></a></td><td><code>moved deprecation doctests inside find_generators, fixed docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf19eece5c801e7cbb2c170c9df6e286ccdbd506"><code>bf19eec</code></a></td><td><code>added example info for GradedModularFormElement class, moved some doctests inside the `__init__` method (for coverage)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e499076cadb327925414e917fa1f2c399269d2b"><code>2e49907</code></a></td><td><code>fix docbuild error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff"><code>d991d19</code></a></td><td><code>merge ticket 31559 'Make ModularFormRings manipulate formal objects' and fix conflicts</code></td></tr></table>




---

archive/issue_comments_517492.json:
```json
{
    "body": "Changed commit from **[`e4a974f`](https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877)** to **[`d991d19`](https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff)**",
    "created_at": "2021-08-04T15:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517492",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e4a974f`](https://github.com/sagemath/sagetrac-mirror/commit/e4a974f3f233fd9568ef613cbd28b5f4bd83c877)** to **[`d991d19`](https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff)**



---

archive/issue_comments_517493.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79\"><code>b23e726</code></a></td><td><code>fix constant polynomials bug</code></td></tr></table>\n",
    "created_at": "2021-08-04T18:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517493",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79"><code>b23e726</code></a></td><td><code>fix constant polynomials bug</code></td></tr></table>




---

archive/issue_comments_517494.json:
```json
{
    "body": "Changed commit from **[`d991d19`](https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff)** to **[`b23e726`](https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79)**",
    "created_at": "2021-08-04T18:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517494",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d991d19`](https://github.com/sagemath/sagetrac-mirror/commit/d991d193a6eb6c9c021e991dbf31149f6da8ccff)** to **[`b23e726`](https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79)**



---

archive/issue_comments_517495.json:
```json
{
    "body": "Author: **David Ayotte**",
    "created_at": "2021-08-06T17:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517495",
    "user": "https://github.com/DavidAyotte"
}
```

Author: **David Ayotte**



---

archive/issue_events_439996.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-07T10:18:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439996"
}
```



---

archive/issue_events_439997.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-07T10:18:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439997"
}
```



---

archive/issue_comments_517496.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIn `_homogeneous_to_polynomial` you call Sturm bound in two places (first one is inside a loop)\n\n```\nf[k].parent().sturm_bound()\nself[k].parent().sturm_bound()\n```\nThis is always the same value, right? I believe the code would be simpler to read if you initialized a variable\n\n```\nsturm_bound = M.modular_forms_of_weight(k).sturm_bound()\n```\nand use that instead.\n\n\nThere is a `TODO` left in the code\n\n```\npoly = 0 # TODO : this should be the zero polynomial, not the integer 0\n```\nSimilarly, in the sum\n\n```\n        dict_of_monomials = {}\n        for exponents in W:\n            monomial_forms = 1; monomial_poly = 1\n            iter = 0\n            for e, g in zip(exponents, gens):\n                monomial_forms *= self(g)**e\n                monomial_poly *= poly_parent.gen(iter)**e\n                iter += 1\n            dict_of_monomials[monomial_poly] = monomial_forms\n```\nThe `monomial_poly` should be the one from the polynomial ring. Not the Python integer one.\n\n\nIn the same piece of code, don't use `;`. Having two statements on the same line is more complicated to read.\n\n\nI don't understand why the ouptut of `_monomials_of_weight` is a dictionary. The latter is an expensive data structure (involving hasing of the keys). You don't seem to use the dictionary structure anywhere.",
    "created_at": "2021-08-07T10:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517496",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

In `_homogeneous_to_polynomial` you call Sturm bound in two places (first one is inside a loop)

```
f[k].parent().sturm_bound()
self[k].parent().sturm_bound()
```
This is always the same value, right? I believe the code would be simpler to read if you initialized a variable

```
sturm_bound = M.modular_forms_of_weight(k).sturm_bound()
```
and use that instead.


There is a `TODO` left in the code

```
poly = 0 # TODO : this should be the zero polynomial, not the integer 0
```
Similarly, in the sum

```
        dict_of_monomials = {}
        for exponents in W:
            monomial_forms = 1; monomial_poly = 1
            iter = 0
            for e, g in zip(exponents, gens):
                monomial_forms *= self(g)**e
                monomial_poly *= poly_parent.gen(iter)**e
                iter += 1
            dict_of_monomials[monomial_poly] = monomial_forms
```
The `monomial_poly` should be the one from the polynomial ring. Not the Python integer one.


In the same piece of code, don't use `;`. Having two statements on the same line is more complicated to read.


I don't understand why the ouptut of `_monomials_of_weight` is a dictionary. The latter is an expensive data structure (involving hasing of the keys). You don't seem to use the dictionary structure anywhere.



---

archive/issue_comments_517497.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00\"><code>3539dbb</code></a></td><td><code>deleted _monomials_of_weight, changed some syntax in _homogeneous_to_polynomial</code></td></tr></table>\n",
    "created_at": "2021-08-09T14:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517497",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00"><code>3539dbb</code></a></td><td><code>deleted _monomials_of_weight, changed some syntax in _homogeneous_to_polynomial</code></td></tr></table>




---

archive/issue_comments_517498.json:
```json
{
    "body": "Changed commit from **[`b23e726`](https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79)** to **[`3539dbb`](https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00)**",
    "created_at": "2021-08-09T14:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517498",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b23e726`](https://github.com/sagemath/sagetrac-mirror/commit/b23e726e64814a1b339e72c63e5a6fb3c9eb0a79)** to **[`3539dbb`](https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00)**



---

archive/issue_events_439998.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-09T14:42:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439998"
}
```



---

archive/issue_events_439999.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-09T14:42:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-439999"
}
```



---

archive/issue_comments_517499.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThanks a lot for the review. I decided to remove `_monomials_of_weight` (and move the code inside `_homogeneous_to_polynomial`) because, as you pointed out, it is not used very often in the code. I believe that this eliminates a loop in the code. I also changed the dictionary structure to a list.",
    "created_at": "2021-08-09T14:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517499",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:18" align="right">comment:18</div>

Thanks a lot for the review. I decided to remove `_monomials_of_weight` (and move the code inside `_homogeneous_to_polynomial`) because, as you pointed out, it is not used very often in the code. I believe that this eliminates a loop in the code. I also changed the dictionary structure to a list.



---

archive/issue_events_440000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440000"
}
```



---

archive/issue_events_440001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440001"
}
```



---

archive/issue_comments_517500.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2021-08-10T17:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517500",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_517501.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI think there ought to be a test with a base ring different from `ZZ`.",
    "created_at": "2021-08-12T06:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517501",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

I think there ought to be a test with a base ring different from `ZZ`.



---

archive/issue_comments_517502.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2\"><code>182b16e</code></a></td><td><code>added tests and base ring checker</code></td></tr></table>\n",
    "created_at": "2021-08-12T12:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517502",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2"><code>182b16e</code></a></td><td><code>added tests and base ring checker</code></td></tr></table>




---

archive/issue_comments_517503.json:
```json
{
    "body": "Changed commit from **[`3539dbb`](https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00)** to **[`182b16e`](https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2)**",
    "created_at": "2021-08-12T12:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517503",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3539dbb`](https://github.com/sagemath/sagetrac-mirror/commit/3539dbb57c5c193a05c2a59b0eac900133368c00)** to **[`182b16e`](https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2)**



---

archive/issue_comments_517504.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nCurrently polynomial conversion does not work over base ring other than Q mostly because of the method `gens_form` (which only returns forms over Q no matter what the base ring is). There is also the method `generators` which only returns q-expansion, so I think that there might be more than just one change to do here. Hence, I think that this should be a topic of a new ticket (I was planning to open one soon) and I simply decided to add an `if` statement in order to check the base ring. What do you think?",
    "created_at": "2021-08-12T13:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517504",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:23" align="right">comment:23</div>

Currently polynomial conversion does not work over base ring other than Q mostly because of the method `gens_form` (which only returns forms over Q no matter what the base ring is). There is also the method `generators` which only returns q-expansion, so I think that there might be more than just one change to do here. Hence, I think that this should be a topic of a new ticket (I was planning to open one soon) and I simply decided to add an `if` statement in order to check the base ring. What do you think?



---

archive/issue_events_440002.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-16T15:00:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440002"
}
```



---

archive/issue_events_440003.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-16T15:00:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440003"
}
```



---

archive/issue_comments_517505.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIt is fine for now.",
    "created_at": "2021-08-16T15:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517505",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

It is fine for now.



---

archive/issue_comments_517506.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI'm changing this to *needs work* because I will add input parsing for the element constructor (in order to check if the polynomial is a q-expansion).",
    "created_at": "2021-08-17T13:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517506",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:25" align="right">comment:25</div>

I'm changing this to *needs work* because I will add input parsing for the element constructor (in order to check if the polynomial is a q-expansion).



---

archive/issue_events_440004.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-17T13:06:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440004"
}
```



---

archive/issue_events_440005.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-17T13:06:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440005"
}
```



---

archive/issue_comments_517507.json:
```json
{
    "body": "Changed commit from **[`182b16e`](https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2)** to **[`b77460b`](https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be)**",
    "created_at": "2021-08-25T13:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517507",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`182b16e`](https://github.com/sagemath/sagetrac-mirror/commit/182b16e6cf3a07d01b90de9073fb3f0be9acb0a2)** to **[`b77460b`](https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be)**



---

archive/issue_comments_517508.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be\"><code>b77460b</code></a></td><td><code>added input parsing to _element_constructor_</code></td></tr></table>\n",
    "created_at": "2021-08-25T13:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517508",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be"><code>b77460b</code></a></td><td><code>added input parsing to _element_constructor_</code></td></tr></table>




---

archive/issue_events_440006.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-25T13:40:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440006"
}
```



---

archive/issue_events_440007.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2021-08-25T13:40:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440007"
}
```



---

archive/issue_comments_517509.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nIs this the expected behavior\n\n```\nsage: M = ModularFormsRing(1)\nsage: q,t = polygens(QQ, 'q,t')\nsage: M(q^2+t^3)\nTraceback (most recent call last):\n...\nNotImplementedError: conversion from q-expansion not yet implemented\n```",
    "created_at": "2021-08-26T07:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517509",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Is this the expected behavior

```
sage: M = ModularFormsRing(1)
sage: q,t = polygens(QQ, 'q,t')
sage: M(q^2+t^3)
Traceback (most recent call last):
...
NotImplementedError: conversion from q-expansion not yet implemented
```



---

archive/issue_comments_517510.json:
```json
{
    "body": "Changed commit from **[`b77460b`](https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be)** to **[`7d10c2d`](https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a)**",
    "created_at": "2021-08-26T14:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517510",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b77460b`](https://github.com/sagemath/sagetrac-mirror/commit/b77460b5eb7e2b16d9f2a3c5295467e4077339be)** to **[`7d10c2d`](https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a)**



---

archive/issue_comments_517511.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a\"><code>7d10c2d</code></a></td><td><code>fixed parsing for variable name in from_polynomial</code></td></tr></table>\n",
    "created_at": "2021-08-26T14:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517511",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a"><code>7d10c2d</code></a></td><td><code>fixed parsing for variable name in from_polynomial</code></td></tr></table>




---

archive/issue_comments_517512.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHello Vincent,\n\nThank you for your comment, I changed a little bit the behavior of the code. What do you think? I'm all ears to any other ideas also.",
    "created_at": "2021-08-26T15:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517512",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:30" align="right">comment:30</div>

Hello Vincent,

Thank you for your comment, I changed a little bit the behavior of the code. What do you think? I'm all ears to any other ideas also.



---

archive/issue_comments_517513.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nHi David,\n\nI don't like the fact that we rely on variable names to parse user input. What about using univariate (for q-expansion) versus multivariate (for generators)?\n\nAlso, you sometimes use `defaults.DEFAULT_VARIABLE` and sometimes the string `'q'`. The usage could be cleaner.",
    "created_at": "2021-08-27T15:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517513",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Hi David,

I don't like the fact that we rely on variable names to parse user input. What about using univariate (for q-expansion) versus multivariate (for generators)?

Also, you sometimes use `defaults.DEFAULT_VARIABLE` and sometimes the string `'q'`. The usage could be cleaner.



---

archive/issue_comments_517514.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n(cleaner and tested)",
    "created_at": "2021-08-27T15:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517514",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

(cleaner and tested)



---

archive/issue_comments_517515.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73\"><code>2cdb21a</code></a></td><td><code>fixed polynomial parsing, added doctest</code></td></tr></table>\n",
    "created_at": "2021-08-27T19:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517515",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73"><code>2cdb21a</code></a></td><td><code>fixed polynomial parsing, added doctest</code></td></tr></table>




---

archive/issue_comments_517516.json:
```json
{
    "body": "Changed commit from **[`7d10c2d`](https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a)** to **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**",
    "created_at": "2021-08-27T19:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517516",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d10c2d`](https://github.com/sagemath/sagetrac-mirror/commit/7d10c2d3da0360c95b1eafb1a17f9bfe2d60eb3a)** to **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**



---

archive/issue_comments_517517.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@videlec](#comment%3A31):\n> Hi David,\n> \n> I don't like the fact that we rely on variable names to parse user input. What about using univariate (for q-expansion) versus multivariate (for generators)?\n> \n> Also, you sometimes use `defaults.DEFAULT_VARIABLE` and sometimes the string `'q'`. The usage could be cleaner.\n\nThank you for your feedback! I decided to drop completely the case for a univariate polynomial. At first, I wanted the code to work even if the number of variables was less or equal to the number of generators, but it turned out to be confusing with q-expansion, so as you said it is better to stick with multivariate polynomials. I also added some details in the documentation in order to make it clearer for the user (is it?). \n\nFor q-expansion, I think it will be better to stick with power series (and not univariate polynomial) instead in order to be consistent with the spaces of weighted modular forms:\n\n```\nsage: M = ModularForms(1, 4)\nsage: q = polygen(QQ, 'q')\nsage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 # Univariate polynomial\nsage: M(E4)\nTraceback (most recent call last):\n...\nTypeError: can't initialize vector from nonzero non-list\nsage: P.<q> = PowerSeriesRing(QQ)\nsage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 + O(q^6) # Power series\nsage: M(E4)\n1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 + O(q^6)\n```\n\nMoreover, observe that we have the following behavior:\n\n```\nsage: P.<q> = PowerSeriesRing(QQ)\nsage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 # Exact power series\nsage: M(E4)\nTraceback (most recent call last):\n...\nTypeError: unable to create modular form from exact non-zero polynomial\n```\n\nHowever, I do find the error message \"can't initialize vector from nonzero non-list\" not very explicit for the user (but that's an issue for an other ticket).",
    "created_at": "2021-08-27T19:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517517",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@videlec](#comment%3A31):
> Hi David,
> 
> I don't like the fact that we rely on variable names to parse user input. What about using univariate (for q-expansion) versus multivariate (for generators)?
> 
> Also, you sometimes use `defaults.DEFAULT_VARIABLE` and sometimes the string `'q'`. The usage could be cleaner.

Thank you for your feedback! I decided to drop completely the case for a univariate polynomial. At first, I wanted the code to work even if the number of variables was less or equal to the number of generators, but it turned out to be confusing with q-expansion, so as you said it is better to stick with multivariate polynomials. I also added some details in the documentation in order to make it clearer for the user (is it?). 

For q-expansion, I think it will be better to stick with power series (and not univariate polynomial) instead in order to be consistent with the spaces of weighted modular forms:

```
sage: M = ModularForms(1, 4)
sage: q = polygen(QQ, 'q')
sage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 # Univariate polynomial
sage: M(E4)
Traceback (most recent call last):
...
TypeError: can't initialize vector from nonzero non-list
sage: P.<q> = PowerSeriesRing(QQ)
sage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 + O(q^6) # Power series
sage: M(E4)
1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 + O(q^6)
```

Moreover, observe that we have the following behavior:

```
sage: P.<q> = PowerSeriesRing(QQ)
sage: E4 = 1 + 240*q + 2160*q^2 + 6720*q^3 + 17520*q^4 + 30240*q^5 # Exact power series
sage: M(E4)
Traceback (most recent call last):
...
TypeError: unable to create modular form from exact non-zero polynomial
```

However, I do find the error message "can't initialize vector from nonzero non-list" not very explicit for the user (but that's an issue for an other ticket).



---

archive/issue_comments_517518.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nGood point. I agree that compatibility with modular forms come first. The interface there is reasonable, to specify zero leading coefficients you need the O(q^n).",
    "created_at": "2021-08-28T06:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517518",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Good point. I agree that compatibility with modular forms come first. The interface there is reasonable, to specify zero leading coefficients you need the O(q^n).



---

archive/issue_events_440008.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-30T09:41:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440008"
}
```



---

archive/issue_events_440009.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-08-30T09:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440009"
}
```



---

archive/issue_events_440010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-31T22:00:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440010"
}
```



---

archive/issue_events_440011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ad8c2d26402a891febdee033ed8bf04c16b777e2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-08-31T22:00:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32135#event-440011"
}
```



---

archive/issue_comments_517519.json:
```json
{
    "body": "Changed branch from **[u/gh-DavidAyotte/modform_to_polynomials_generators](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/modform_to_polynomials_generators)** to **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**",
    "created_at": "2021-08-31T22:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32135#issuecomment-517519",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-DavidAyotte/modform_to_polynomials_generators](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/modform_to_polynomials_generators)** to **[`2cdb21a`](https://github.com/sagemath/sagetrac-mirror/commit/2cdb21a48ab1b92273f43acc235b07f71e585a73)**
