# Issue 32616: configure/make: Generate SAGE_ROOT/requirements-using-local-wheels.txt

archive/issues_032379.json:
```json
{
    "body": "This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.\n\nVariant 1\n- just add `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n\n- adds sagelib (always source location, but not editable)\n\n- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels\n\nVariant 1b\n\n- if `configure --enable-editable` is in use, require `make wheels` (from #33817)\n\nVariant 2\n- basically the output of `pip freeze` (``@` file:///` URLs, fixed as described in #30956)\n\n\nWe can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv\n\nCC:  @tobiasdiez\n\nStatus: new\n\nDependencies: #33817\n\nIssue created by migration from https://trac.sagemath.org/ticket/32616\n\n",
    "created_at": "2021-10-03T02:44:52Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "configure/make: Generate SAGE_ROOT/requirements-using-local-wheels.txt",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32616",
    "user": "https://github.com/mkoeppe"
}
```
This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.

Variant 1
- just add `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`

- adds sagelib (always source location, but not editable)

- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels

Variant 1b

- if `configure --enable-editable` is in use, require `make wheels` (from #33817)

Variant 2
- basically the output of `pip freeze` (``@` file:///` URLs, fixed as described in #30956)


We can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv

CC:  @tobiasdiez

Status: new

Dependencies: #33817

Issue created by migration from https://trac.sagemath.org/ticket/32616





---

archive/issue_comments_649786.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-... which just adds `--no-index --find-links=../venv/local/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n+... which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n \n \n``````\n",
    "created_at": "2021-10-12T06:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649786",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-... which just adds `--no-index --find-links=../venv/local/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
+... which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
 
 
``````




---

archive/issue_comments_649787.json:
```json
{
    "body": "Changing dependencies from \"#32442\" to \"#32442, #32672\"",
    "created_at": "2021-10-12T06:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649787",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32442" to "#32442, #32672"



---

archive/issue_comments_649788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n-... which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n+- which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n+\n+- adds sagelib \n+\n+- if `configure --enable-editable` is in use, uses editable for packages like `sage_setup`, `sage_conf`\n \n \n``````\n",
    "created_at": "2021-12-06T18:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649788",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
-... which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
+- which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
+
+- adds sagelib 
+
+- if `configure --enable-editable` is in use, uses editable for packages like `sage_setup`, `sage_conf`
 
 
``````




---

archive/issue_comments_649789.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,10 @@\n-- which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n+This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.\n \n-- adds sagelib \n+- which just adds `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n \n-- if `configure --enable-editable` is in use, uses editable for packages like `sage_setup`, `sage_conf`\n+- adds sagelib (always source location, but not editable)\n+\n+- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`\n+instead of wheels\n \n \n``````\n",
    "created_at": "2021-12-06T18:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649789",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,10 @@
-- which just adds `--no-index --find-links=../venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
+This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.
 
-- adds sagelib 
+- which just adds `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
 
-- if `configure --enable-editable` is in use, uses editable for packages like `sage_setup`, `sage_conf`
+- adds sagelib (always source location, but not editable)
+
+- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`
+instead of wheels
 
 
``````




---

archive/issue_events_086426.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32616#event-86426"
}
```



---

archive/issue_comments_649790.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,13 @@\n This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.\n \n-- which just adds `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n+Variant 1\n+- just add `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`\n \n - adds sagelib (always source location, but not editable)\n \n - if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`\n instead of wheels\n \n+Variant 2\n+- basically the output of `pip freeze` (after the fix in #30956)\n \n``````\n",
    "created_at": "2021-12-28T00:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649790",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,13 @@
 This file is for setting up a separate venv, for example for installing a stable snapshot of what is in the current source tree.
 
-- which just adds `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
+Variant 1
+- just add `--no-index --find-links=SAGE_ROOT/venv/var/lib/sage/wheels/` to the contents of `src/requirements.txt`
 
 - adds sagelib (always source location, but not editable)
 
 - if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`
 instead of wheels
 
+Variant 2
+- basically the output of `pip freeze` (after the fix in #30956)
 
``````




---

archive/issue_comments_649791.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,8 +5,7 @@\n \n - adds sagelib (always source location, but not editable)\n \n-- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`\n-instead of wheels\n+- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels\n \n Variant 2\n - basically the output of `pip freeze` (after the fix in #30956)\n``````\n",
    "created_at": "2021-12-28T00:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649791",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,8 +5,7 @@
 
 - adds sagelib (always source location, but not editable)
 
-- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf`
-instead of wheels
+- if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels
 
 Variant 2
 - basically the output of `pip freeze` (after the fix in #30956)
``````




---

archive/issue_comments_649792.json:
```json
{
    "body": "<a id='comment:8'></a>Remove dependency on #32442, seeticket: ticket:29039#comment:163#comment:29039.",
    "created_at": "2021-12-29T06:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649792",
    "user": "https://github.com/slel"
}
```

<a id='comment:8'></a>Remove dependency on #32442, seeticket: ticket:29039#comment:163#comment:29039.



---

archive/issue_comments_649793.json:
```json
{
    "body": "Changing dependencies from \"#32442, #32672\" to \"#32672\"",
    "created_at": "2021-12-29T06:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649793",
    "user": "https://github.com/slel"
}
```

Changing dependencies from "#32442, #32672" to "#32672"



---

archive/issue_events_086427.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32616#event-86427"
}
```



---

archive/issue_events_086428.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32616#event-86428"
}
```



---

archive/issue_comments_649794.json:
```json
{
    "body": "Changing dependencies from \"#32672\" to \"#33817\"",
    "created_at": "2022-07-27T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649794",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32672" to "#33817"



---

archive/issue_comments_649795.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,11 @@\n \n - if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels\n \n+Variant 1b\n+\n+- if `configure --enable-editable` is in use, require `make wheels` (from #33817)\n+\n Variant 2\n - basically the output of `pip freeze` (after the fix in #30956)\n \n+\n``````\n",
    "created_at": "2022-07-27T17:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649795",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,11 @@
 
 - if `configure --enable-editable` is in use, uses source locations (but not editable) for packages like `sage_setup`, `sage_conf` instead of wheels
 
+Variant 1b
+
+- if `configure --enable-editable` is in use, require `make wheels` (from #33817)
+
 Variant 2
 - basically the output of `pip freeze` (after the fix in #30956)
 
+
``````




---

archive/issue_comments_649796.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n - basically the output of `pip freeze` (after the fix in #30956)\n \n \n+We can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv\n``````\n",
    "created_at": "2022-07-27T17:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649796",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 - basically the output of `pip freeze` (after the fix in #30956)
 
 
+We can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv
``````




---

archive/issue_comments_649797.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n - if `configure --enable-editable` is in use, require `make wheels` (from #33817)\n \n Variant 2\n-- basically the output of `pip freeze` (after the fix in #30956)\n+- basically the output of `pip freeze` (``@` file:///` URLs, fixed as described in #30956)\n \n \n We can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv\n``````\n",
    "created_at": "2022-07-29T17:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32616#issuecomment-649797",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 - if `configure --enable-editable` is in use, require `make wheels` (from #33817)
 
 Variant 2
-- basically the output of `pip freeze` (after the fix in #30956)
+- basically the output of `pip freeze` (``@` file:///` URLs, fixed as described in #30956)
 
 
 We can also add a convenience script `sage --venv /SOME/DIRECTORY` for creating and populating the venv
``````




---

archive/issue_events_086429.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32616#event-86429"
}
```



---

archive/issue_events_086430.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32616",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32616#event-86430"
}
```
