# Issue 32046: Use pip --use-feature=in-tree-build, replace use of sdh_setup_bdist_wheel by sdh_pip_install

archive/issues_031809.json:
```json
{
    "body": "This is a feature added in pip 21.1.\n\nWe can now build wheels for all packages using `pip wheel`, even those with symlinks or that need in-tree configuration files. Direct invocation of `setup.py bdist_wheel` is no longer necessary.\n\n\n**CC:**  @jhpalmieri @kliem @isuruf\n\n**Branch/Commit:** [290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/32046\n\n",
    "closed_at": "2021-08-31T22:00:50Z",
    "created_at": "2021-06-23T18:43:30Z",
    "labels": [
        "component: build",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Use pip --use-feature=in-tree-build, replace use of sdh_setup_bdist_wheel by sdh_pip_install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32046",
    "user": "https://github.com/mkoeppe"
}
```
This is a feature added in pip 21.1.

We can now build wheels for all packages using `pip wheel`, even those with symlinks or that need in-tree configuration files. Direct invocation of `setup.py bdist_wheel` is no longer necessary.


**CC:**  @jhpalmieri @kliem @isuruf

**Branch/Commit:** [290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/32046





---

archive/issue_comments_609636.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)",
    "created_at": "2021-06-23T19:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609636",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)



---

archive/issue_comments_609637.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1e78f226cd7d81a5af85866c1db530361453b21\">a1e78f2</a></td><td><code>build/pkgs/pillow/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install, fix quoting of CONDA_PREFIX with whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6166a8c07067740b495a5ff63104cbfe919a74b5\">6166a8c</a></td><td><code>build/bin/sage-dist-helpers: Generalize sdh_globaloptionify to sdh_prefix_args</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dae827aa6542798105df5deca76e910943494c1\">2dae827</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9\">f358345</a></td><td><code>build/pkgs/python_igraph/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-06-23T20:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1e78f226cd7d81a5af85866c1db530361453b21">a1e78f2</a></td><td><code>build/pkgs/pillow/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install, fix quoting of CONDA_PREFIX with whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6166a8c07067740b495a5ff63104cbfe919a74b5">6166a8c</a></td><td><code>build/bin/sage-dist-helpers: Generalize sdh_globaloptionify to sdh_prefix_args</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dae827aa6542798105df5deca76e910943494c1">2dae827</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9">f358345</a></td><td><code>build/pkgs/python_igraph/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr></table>




---

archive/issue_comments_609638.json:
```json
{
    "body": "**Commit:** [f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)",
    "created_at": "2021-06-23T20:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)



---

archive/issue_comments_609639.json:
```json
{
    "body": "**Changing commit** from \"[f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)\" to \"[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)\".",
    "created_at": "2021-06-23T20:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)" to "[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)".



---

archive/issue_comments_609640.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1d33bc99aa357c9cca692b311f9eadb922f2950\">a1d33bc</a></td><td><code>build/pkgs/pillow/spkg-install.in, build/bin/sage-dist-helpers: Remove debugging code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0\">413f6b5</a></td><td><code>build/pkgs/{jupyter_jsmol,python_igraph,pillow}/spkg-install.in: Use --build-option, not --global-option</code></td></tr></table>\n",
    "created_at": "2021-06-23T20:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1d33bc99aa357c9cca692b311f9eadb922f2950">a1d33bc</a></td><td><code>build/pkgs/pillow/spkg-install.in, build/bin/sage-dist-helpers: Remove debugging code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0">413f6b5</a></td><td><code>build/pkgs/{jupyter_jsmol,python_igraph,pillow}/spkg-install.in: Use --build-option, not --global-option</code></td></tr></table>




---

archive/issue_comments_609641.json:
```json
{
    "body": "<a id='comment:4'></a>\nA similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565",
    "created_at": "2021-06-23T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609641",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565



---

archive/issue_comments_609642.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-06-23T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609642",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_609643.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-06-23T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609643",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_609644.json:
```json
{
    "body": "<a id='comment:5'></a>\nDo we need to change `build/pkgs/pip/install-requires.txt` to require at least version 21.1?",
    "created_at": "2021-06-27T22:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609644",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Do we need to change `build/pkgs/pip/install-requires.txt` to require at least version 21.1?



---

archive/issue_comments_609645.json:
```json
{
    "body": "<a id='comment:6'></a>\nYes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.",
    "created_at": "2021-06-27T22:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609645",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.



---

archive/issue_comments_609646.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb\">8c5ee65</a></td><td><code>build/pkgs/pip/install-requires.txt: Update lower bound</code></td></tr></table>\n",
    "created_at": "2021-06-27T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb">8c5ee65</a></td><td><code>build/pkgs/pip/install-requires.txt: Update lower bound</code></td></tr></table>




---

archive/issue_comments_609647.json:
```json
{
    "body": "**Changing commit** from \"[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)\" to \"[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)\".",
    "created_at": "2021-06-27T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)" to "[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)".



---

archive/issue_comments_609648.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [mkoeppe](#comment%3A6):\n> Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.\n\n\nSo what happens if someone has a system version of pip installed that doesn't support `--use-feature=in-tree-build`?",
    "created_at": "2021-06-28T03:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609648",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Replying to [mkoeppe](#comment%3A6):
> Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.


So what happens if someone has a system version of pip installed that doesn't support `--use-feature=in-tree-build`?



---

archive/issue_comments_609649.json:
```json
{
    "body": "<a id='comment:9'></a>\nWe don't use any system Python packages, even when we use system Python.",
    "created_at": "2021-06-28T03:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609649",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
We don't use any system Python packages, even when we use system Python.



---

archive/issue_comments_609650.json:
```json
{
    "body": "<a id='comment:10'></a>\nAre you saying that we always build and use our own pip? Are the entries in `pip/distros` ignored?",
    "created_at": "2021-06-28T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609650",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Are you saying that we always build and use our own pip? Are the entries in `pip/distros` ignored?



---

archive/issue_comments_609651.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jhpalmieri](#comment%3A10):\n> Are you saying that we always build and use our own pip? \n\n\nThat's right. See `build/bin/sage-venv`, which is the script that we use to set up our venv over the system Python. https://docs.python.org/3/library/venv.html#venv.EnvBuilder `with_pip` defaults to False; and we also use `system_site_packages=False`.\nWe then bootstrap `setuptools`, `pip`, and `wheel` in our empty virtual environment -- same as we do when we build our own python.\n\n> Are the entries in `pip/distros` ignored?\n\n\nYes, they are only decoration. There is currently only one use-case for Python system packages, and that is a conda development environment (see `src/environment.yml`).",
    "created_at": "2021-06-28T04:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609651",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [jhpalmieri](#comment%3A10):
> Are you saying that we always build and use our own pip? 


That's right. See `build/bin/sage-venv`, which is the script that we use to set up our venv over the system Python. https://docs.python.org/3/library/venv.html#venv.EnvBuilder `with_pip` defaults to False; and we also use `system_site_packages=False`.
We then bootstrap `setuptools`, `pip`, and `wheel` in our empty virtual environment -- same as we do when we build our own python.

> Are the entries in `pip/distros` ignored?


Yes, they are only decoration. There is currently only one use-case for Python system packages, and that is a conda development environment (see `src/environment.yml`).



---

archive/issue_comments_609652.json:
```json
{
    "body": "**Work_Issues:** rebase",
    "created_at": "2021-07-24T19:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609652",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** rebase



---

archive/issue_comments_609653.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-07-24T19:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609653",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_609654.json:
```json
{
    "body": "**Changing commit** from \"[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)\" to \"[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)\".",
    "created_at": "2021-07-24T19:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)" to "[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)".



---

archive/issue_comments_609655.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9\">ed5f9f0</a></td><td><code>Merge tag '9.4.beta6' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-07-24T19:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9">ed5f9f0</a></td><td><code>Merge tag '9.4.beta6' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>




---

archive/issue_comments_609656.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-07-24T19:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609656",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_events_095100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:14:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-95100"
}
```



---

archive/issue_comments_609657.json:
```json
{
    "body": "**Changing work_issues** from \"rebase\" to \"\".",
    "created_at": "2021-07-24T19:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609657",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work_issues** from "rebase" to "".



---

archive/issue_comments_609658.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef\">85d1d27</a></td><td><code>Merge tag '9.4.rc1' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-08-12T20:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef">85d1d27</a></td><td><code>Merge tag '9.4.rc1' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>




---

archive/issue_comments_609659.json:
```json
{
    "body": "**Changing commit** from \"[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)\" to \"[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)\".",
    "created_at": "2021-08-12T20:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)" to "[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)".



---

archive/issue_comments_609660.json:
```json
{
    "body": "**Changing commit** from \"[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)\" to \"[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)\".",
    "created_at": "2021-08-12T21:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)" to "[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)".



---

archive/issue_comments_609661.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2\">050f8df</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use sdh_pip_install, sdh_prefix_args</code></td></tr></table>\n",
    "created_at": "2021-08-12T21:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2">050f8df</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use sdh_pip_install, sdh_prefix_args</code></td></tr></table>




---

archive/issue_comments_609662.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mkoeppe](#comment%3A4):\n> A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565\n\n\nI've made the change now",
    "created_at": "2021-08-12T21:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609662",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [mkoeppe](#comment%3A4):
> A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565


I've made the change now



---

archive/issue_comments_609663.json:
```json
{
    "body": "**Changing commit** from \"[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)\" to \"[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\".",
    "created_at": "2021-08-12T22:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)" to "[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)".



---

archive/issue_comments_609664.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26\">290fa2f</a></td><td><code>build/pkgs/sagelib/src: Restore lost symlink</code></td></tr></table>\n",
    "created_at": "2021-08-12T22:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26">290fa2f</a></td><td><code>build/pkgs/sagelib/src: Restore lost symlink</code></td></tr></table>




---

archive/issue_comments_609665.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-08-16T20:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609665",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_609666.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2021-08-16T20:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609666",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_609667.json:
```json
{
    "body": "<a id='comment:20'></a>\nOkay, let's merge it. It works for me on OS X. I haven't tested with conda, but the changes make sense.",
    "created_at": "2021-08-16T20:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609667",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Okay, let's merge it. It works for me on OS X. I haven't tested with conda, but the changes make sense.



---

archive/issue_comments_609668.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks!",
    "created_at": "2021-08-16T20:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609668",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Thanks!



---

archive/issue_events_095101.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-31T22:00:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-95101"
}
```



---

archive/issue_comments_609669.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)\" to \"[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\".",
    "created_at": "2021-08-31T22:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-609669",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)" to "[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)".
