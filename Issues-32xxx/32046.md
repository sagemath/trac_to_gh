# Issue 32046: Use pip --use-feature=in-tree-build, replace use of sdh_setup_bdist_wheel by sdh_pip_install

archive/issues_031809.json:
```json
{
    "body": "This is a feature added in pip 21.1.\n\nWe can now build wheels for all packages using `pip wheel`, even those with symlinks or that need in-tree configuration files. Direct invocation of `setup.py bdist_wheel` is no longer necessary.\n\n\n**CC:**  @jhpalmieri @kliem @isuruf\n\n**Branch/Commit:** [290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/32046\n\n",
    "closed_at": "2021-08-31T22:00:50Z",
    "created_at": "2021-06-23T18:43:30Z",
    "labels": [
        "component: build",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Use pip --use-feature=in-tree-build, replace use of sdh_setup_bdist_wheel by sdh_pip_install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32046",
    "user": "https://github.com/mkoeppe"
}
```
This is a feature added in pip 21.1.

We can now build wheels for all packages using `pip wheel`, even those with symlinks or that need in-tree configuration files. Direct invocation of `setup.py bdist_wheel` is no longer necessary.


**CC:**  @jhpalmieri @kliem @isuruf

**Branch/Commit:** [290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/32046





---

archive/issue_comments_520401.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)",
    "created_at": "2021-06-23T19:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520401",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)



---

archive/issue_comments_520402.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1e78f226cd7d81a5af85866c1db530361453b21\">a1e78f2</a></td><td><code>build/pkgs/pillow/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install, fix quoting of CONDA_PREFIX with whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6166a8c07067740b495a5ff63104cbfe919a74b5\">6166a8c</a></td><td><code>build/bin/sage-dist-helpers: Generalize sdh_globaloptionify to sdh_prefix_args</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dae827aa6542798105df5deca76e910943494c1\">2dae827</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9\">f358345</a></td><td><code>build/pkgs/python_igraph/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-06-23T20:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1e78f226cd7d81a5af85866c1db530361453b21">a1e78f2</a></td><td><code>build/pkgs/pillow/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install, fix quoting of CONDA_PREFIX with whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6166a8c07067740b495a5ff63104cbfe919a74b5">6166a8c</a></td><td><code>build/bin/sage-dist-helpers: Generalize sdh_globaloptionify to sdh_prefix_args</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dae827aa6542798105df5deca76e910943494c1">2dae827</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9">f358345</a></td><td><code>build/pkgs/python_igraph/spkg-install.in: Switch from sdh_setup_bdist_wheel to sdh_pip_install</code></td></tr></table>




---

archive/issue_comments_520403.json:
```json
{
    "body": "**Commit:** [f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)",
    "created_at": "2021-06-23T20:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)



---

archive/issue_comments_520404.json:
```json
{
    "body": "**Changing commit** from \"[f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)\" to \"[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)\".",
    "created_at": "2021-06-23T20:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f3583457677284130daed94f8a96e480714fcec9](https://github.com/sagemath/sagetrac-mirror/commit/f3583457677284130daed94f8a96e480714fcec9)" to "[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)".



---

archive/issue_comments_520405.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1d33bc99aa357c9cca692b311f9eadb922f2950\">a1d33bc</a></td><td><code>build/pkgs/pillow/spkg-install.in, build/bin/sage-dist-helpers: Remove debugging code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0\">413f6b5</a></td><td><code>build/pkgs/{jupyter_jsmol,python_igraph,pillow}/spkg-install.in: Use --build-option, not --global-option</code></td></tr></table>\n",
    "created_at": "2021-06-23T20:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1d33bc99aa357c9cca692b311f9eadb922f2950">a1d33bc</a></td><td><code>build/pkgs/pillow/spkg-install.in, build/bin/sage-dist-helpers: Remove debugging code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0">413f6b5</a></td><td><code>build/pkgs/{jupyter_jsmol,python_igraph,pillow}/spkg-install.in: Use --build-option, not --global-option</code></td></tr></table>




---

archive/issue_comments_520406.json:
```json
{
    "body": "<a id='comment:4'></a>\nA similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565",
    "created_at": "2021-06-23T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520406",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565



---

archive/issue_events_292648.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-23T20:38:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292648"
}
```



---

archive/issue_comments_520407.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-06-23T20:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520407",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_520408.json:
```json
{
    "body": "<a id='comment:5'></a>\nDo we need to change `build/pkgs/pip/install-requires.txt` to require at least version 21.1?",
    "created_at": "2021-06-27T22:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520408",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Do we need to change `build/pkgs/pip/install-requires.txt` to require at least version 21.1?



---

archive/issue_comments_520409.json:
```json
{
    "body": "<a id='comment:6'></a>\nYes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.",
    "created_at": "2021-06-27T22:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520409",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.



---

archive/issue_comments_520410.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb\">8c5ee65</a></td><td><code>build/pkgs/pip/install-requires.txt: Update lower bound</code></td></tr></table>\n",
    "created_at": "2021-06-27T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb">8c5ee65</a></td><td><code>build/pkgs/pip/install-requires.txt: Update lower bound</code></td></tr></table>




---

archive/issue_comments_520411.json:
```json
{
    "body": "**Changing commit** from \"[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)\" to \"[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)\".",
    "created_at": "2021-06-27T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[413f6b5c4be4286f6b7c411e498129b16fbc77f0](https://github.com/sagemath/sagetrac-mirror/commit/413f6b5c4be4286f6b7c411e498129b16fbc77f0)" to "[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)".



---

archive/issue_comments_520412.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [mkoeppe](#comment%3A6):\n> Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.\n\n\nSo what happens if someone has a system version of pip installed that doesn't support `--use-feature=in-tree-build`?",
    "created_at": "2021-06-28T03:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520412",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Replying to [mkoeppe](#comment%3A6):
> Yes, it's a good idea to update it to document this lower bound - although technically pip's lower bound is not used - pip does not appear in `build/pkgs/sagelib/src/pyproject.toml.m4` nor `build/pkgs/sagelib/src/setup.cfg.m4`.


So what happens if someone has a system version of pip installed that doesn't support `--use-feature=in-tree-build`?



---

archive/issue_comments_520413.json:
```json
{
    "body": "<a id='comment:9'></a>\nWe don't use any system Python packages, even when we use system Python.",
    "created_at": "2021-06-28T03:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520413",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
We don't use any system Python packages, even when we use system Python.



---

archive/issue_comments_520414.json:
```json
{
    "body": "<a id='comment:10'></a>\nAre you saying that we always build and use our own pip? Are the entries in `pip/distros` ignored?",
    "created_at": "2021-06-28T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520414",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Are you saying that we always build and use our own pip? Are the entries in `pip/distros` ignored?



---

archive/issue_comments_520415.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jhpalmieri](#comment%3A10):\n> Are you saying that we always build and use our own pip? \n\n\nThat's right. See `build/bin/sage-venv`, which is the script that we use to set up our venv over the system Python. https://docs.python.org/3/library/venv.html#venv.EnvBuilder `with_pip` defaults to False; and we also use `system_site_packages=False`.\nWe then bootstrap `setuptools`, `pip`, and `wheel` in our empty virtual environment -- same as we do when we build our own python.\n\n> Are the entries in `pip/distros` ignored?\n\n\nYes, they are only decoration. There is currently only one use-case for Python system packages, and that is a conda development environment (see `src/environment.yml`).",
    "created_at": "2021-06-28T04:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520415",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [jhpalmieri](#comment%3A10):
> Are you saying that we always build and use our own pip? 


That's right. See `build/bin/sage-venv`, which is the script that we use to set up our venv over the system Python. https://docs.python.org/3/library/venv.html#venv.EnvBuilder `with_pip` defaults to False; and we also use `system_site_packages=False`.
We then bootstrap `setuptools`, `pip`, and `wheel` in our empty virtual environment -- same as we do when we build our own python.

> Are the entries in `pip/distros` ignored?


Yes, they are only decoration. There is currently only one use-case for Python system packages, and that is a conda development environment (see `src/environment.yml`).



---

archive/issue_comments_520416.json:
```json
{
    "body": "**Work_Issues:** rebase",
    "created_at": "2021-07-24T19:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520416",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** rebase



---

archive/issue_events_292649.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:10:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292649"
}
```



---

archive/issue_events_292650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292650"
}
```



---

archive/issue_comments_520417.json:
```json
{
    "body": "**Changing commit** from \"[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)\" to \"[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)\".",
    "created_at": "2021-07-24T19:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8c5ee65a8872549cdfcce321bbee8bef81b57ccb](https://github.com/sagemath/sagetrac-mirror/commit/8c5ee65a8872549cdfcce321bbee8bef81b57ccb)" to "[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)".



---

archive/issue_comments_520418.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9\">ed5f9f0</a></td><td><code>Merge tag '9.4.beta6' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-07-24T19:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9">ed5f9f0</a></td><td><code>Merge tag '9.4.beta6' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>




---

archive/issue_events_292651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:14:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292651"
}
```



---

archive/issue_events_292652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:14:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292652"
}
```



---

archive/issue_events_292653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:14:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292653"
}
```



---

archive/issue_events_292654.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-24T19:14:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292654"
}
```



---

archive/issue_comments_520419.json:
```json
{
    "body": "**Changing work_issues** from \"rebase\" to \"\".",
    "created_at": "2021-07-24T19:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520419",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work_issues** from "rebase" to "".



---

archive/issue_comments_520420.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef\">85d1d27</a></td><td><code>Merge tag '9.4.rc1' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>\n",
    "created_at": "2021-08-12T20:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef">85d1d27</a></td><td><code>Merge tag '9.4.rc1' into t/32046/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install</code></td></tr></table>




---

archive/issue_comments_520421.json:
```json
{
    "body": "**Changing commit** from \"[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)\" to \"[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)\".",
    "created_at": "2021-08-12T20:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed5f9f0c9219a86a85cd46df588414c920b063b9](https://github.com/sagemath/sagetrac-mirror/commit/ed5f9f0c9219a86a85cd46df588414c920b063b9)" to "[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)".



---

archive/issue_comments_520422.json:
```json
{
    "body": "**Changing commit** from \"[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)\" to \"[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)\".",
    "created_at": "2021-08-12T21:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[85d1d2716188e67b85b48838c52d8f919f7244ef](https://github.com/sagemath/sagetrac-mirror/commit/85d1d2716188e67b85b48838c52d8f919f7244ef)" to "[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)".



---

archive/issue_comments_520423.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2\">050f8df</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use sdh_pip_install, sdh_prefix_args</code></td></tr></table>\n",
    "created_at": "2021-08-12T21:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2">050f8df</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use sdh_pip_install, sdh_prefix_args</code></td></tr></table>




---

archive/issue_comments_520424.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mkoeppe](#comment%3A4):\n> A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565\n\n\nI've made the change now",
    "created_at": "2021-08-12T21:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520424",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [mkoeppe](#comment%3A4):
> A similar change can be done with `numpy`, but to avoid conflicts, that's best done in #32021 or #31565


I've made the change now



---

archive/issue_comments_520425.json:
```json
{
    "body": "**Changing commit** from \"[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)\" to \"[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\".",
    "created_at": "2021-08-12T22:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[050f8df9a056a966e4fed9371ddb6244d0cb18f2](https://github.com/sagemath/sagetrac-mirror/commit/050f8df9a056a966e4fed9371ddb6244d0cb18f2)" to "[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)".



---

archive/issue_comments_520426.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26\">290fa2f</a></td><td><code>build/pkgs/sagelib/src: Restore lost symlink</code></td></tr></table>\n",
    "created_at": "2021-08-12T22:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26">290fa2f</a></td><td><code>build/pkgs/sagelib/src: Restore lost symlink</code></td></tr></table>




---

archive/issue_events_292655.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-08-16T20:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292655"
}
```



---

archive/issue_events_292656.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-08-16T20:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292656"
}
```



---

archive/issue_comments_520427.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2021-08-16T20:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520427",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_520428.json:
```json
{
    "body": "<a id='comment:20'></a>\nOkay, let's merge it. It works for me on OS X. I haven't tested with conda, but the changes make sense.",
    "created_at": "2021-08-16T20:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520428",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Okay, let's merge it. It works for me on OS X. I haven't tested with conda, but the changes make sense.



---

archive/issue_comments_520429.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks!",
    "created_at": "2021-08-16T20:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520429",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Thanks!



---

archive/issue_events_292657.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-31T22:00:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292657"
}
```



---

archive/issue_events_292658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-31T22:00:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32046#event-292658"
}
```



---

archive/issue_comments_520430.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)\" to \"[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)\".",
    "created_at": "2021-08-31T22:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32046#issuecomment-520430",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/use_pip___use_feature_in_tree_build__replace_use_of_sdh_setup_bdist_wheel_by_sdh_pip_install)" to "[290fa2ff50ca053d726bb0a1a8e0470a66040c26](https://github.com/sagemath/sagetrac-mirror/commit/290fa2ff50ca053d726bb0a1a8e0470a66040c26)".
