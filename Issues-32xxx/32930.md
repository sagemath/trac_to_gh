# Issue 32930: IPython/Jupyter upgrade for python 3.10 support

archive/issues_032693.json:
```json
{
    "body": "All updated packages still support Python 3.7, as needed for the Sage 9.5 series.\n\nCC:  @enriqueartal @tornaria @egourgoulhon @kwankyu @orlitzky\n\nBranch/Commit: 66c16b14f9081c6d62f5d105cfe76b470074c187\n\nReviewer: Michael Orlitzky\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32930\n\n",
    "closed_at": "2021-12-23T20:26:29Z",
    "created_at": "2021-11-25T02:19:28Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "IPython/Jupyter upgrade for python 3.10 support",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32930",
    "user": "https://github.com/mkoeppe"
}
```
All updated packages still support Python 3.7, as needed for the Sage 9.5 series.

CC:  @enriqueartal @tornaria @egourgoulhon @kwankyu @orlitzky

Branch/Commit: 66c16b14f9081c6d62f5d105cfe76b470074c187

Reviewer: Michael Orlitzky

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32930





---

archive/issue_comments_656728.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/ipython_jupyter_upgrade_for_python_3_10_support\"",
    "created_at": "2021-11-25T02:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656728",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/ipython_jupyter_upgrade_for_python_3_10_support"



---

archive/issue_comments_656729.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2021-11-25T02:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656729",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_656730.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-11-25T02:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656730",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_656731.json:
```json
{
    "body": "Changing commit from \"\" to \"66c16b14f9081c6d62f5d105cfe76b470074c187\"",
    "created_at": "2021-11-25T02:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656731",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "66c16b14f9081c6d62f5d105cfe76b470074c187"



---

archive/issue_comments_656732.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+All updated packages still support Python 3.7, as needed for the Sage 9.5 series.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-11-25T02:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656732",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+All updated packages still support Python 3.7, as needed for the Sage 9.5 series.
 
 Comment: 1
 
``````




---

archive/issue_comments_656733.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/1502165423\"",
    "created_at": "2021-11-25T04:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656733",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/1502165423"



---

archive/issue_comments_656734.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-25T04:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656734",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_656735.json:
```json
{
    "body": "<a id='comment:5'></a>Tests look OK. Ready for review",
    "created_at": "2021-11-26T03:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656735",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Tests look OK. Ready for review



---

archive/issue_comments_656736.json:
```json
{
    "body": "<a id='comment:6'></a>Is a similar ticket needed for JupyterLab\n(optional package) too?",
    "created_at": "2021-11-27T14:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656736",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>Is a similar ticket needed for JupyterLab
(optional package) too?



---

archive/issue_comments_656737.json:
```json
{
    "body": "<a id='comment:7'></a>There's a separate ticket somewhere for that",
    "created_at": "2021-11-28T00:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656737",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>There's a separate ticket somewhere for that



---

archive/issue_comments_656738.json:
```json
{
    "body": "<a id='comment:8'></a>Oh, #32069, I see.",
    "created_at": "2021-11-28T00:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656738",
    "user": "https://github.com/slel"
}
```

<a id='comment:8'></a>Oh, #32069, I see.



---

archive/issue_comments_656739.json:
```json
{
    "body": "<a id='comment:11'></a>I'm testing this along with #31535. I've run\n\n```\n$ EXTRA_CONFIGURE_ARGS=\"--without-system-python3\" tox -e local-direct -- build sagelib-tox-python-sagewheels-nopypi\n```\n\nand I'm seeing doctest failures like\n\n```\nFailed example:\n    shell = get_test_shell()\nExpected nothing\nGot:\n    doctest:warning\n    ...\n   :\n    UserWarning: Attempting to work in a virtualenv. If you encounter problems, please install IPython inside the virtualenv.\n    Error processing line 1 of /home/mjo/src/sage.git/pkgs/sagemath-standard/.tox/python-sagewheels-nopypi/lib/python3.9/site-packages/_virtualenv.pth:\n    <BLANKLINE>\n      Traceback (most recent call last):\n        File \"/home/mjo/src/sage.git/.tox/local-direct/local/lib/python3.9/site.py\", line 169, in addpackage\n          exec(line)\n        File \"<string>\", line 1, in <module>\n      ModuleNotFoundError: No module named '_virtualenv'\n    <BLANKLINE>\n    Remainder of file ignored\n```\n\nDoes that look like a tox issue, or something that changed with ipython?",
    "created_at": "2021-12-03T20:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656739",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:11'></a>I'm testing this along with #31535. I've run

```
$ EXTRA_CONFIGURE_ARGS="--without-system-python3" tox -e local-direct -- build sagelib-tox-python-sagewheels-nopypi
```

and I'm seeing doctest failures like

```
Failed example:
    shell = get_test_shell()
Expected nothing
Got:
    doctest:warning
    ...
   :
    UserWarning: Attempting to work in a virtualenv. If you encounter problems, please install IPython inside the virtualenv.
    Error processing line 1 of /home/mjo/src/sage.git/pkgs/sagemath-standard/.tox/python-sagewheels-nopypi/lib/python3.9/site-packages/_virtualenv.pth:
    <BLANKLINE>
      Traceback (most recent call last):
        File "/home/mjo/src/sage.git/.tox/local-direct/local/lib/python3.9/site.py", line 169, in addpackage
          exec(line)
        File "<string>", line 1, in <module>
      ModuleNotFoundError: No module named '_virtualenv'
    <BLANKLINE>
    Remainder of file ignored
```

Does that look like a tox issue, or something that changed with ipython?



---

archive/issue_comments_656740.json:
```json
{
    "body": "<a id='comment:12'></a>I think this might be fixed with #32933",
    "created_at": "2021-12-03T21:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>I think this might be fixed with #32933



---

archive/issue_comments_656741.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-04T03:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656741",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_656742.json:
```json
{
    "body": "<a id='comment:13'></a>Yep, looks like that was it.",
    "created_at": "2021-12-04T03:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656742",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:13'></a>Yep, looks like that was it.



---

archive/issue_comments_656743.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/1502165423\" to \"Michael Orlitzky\"",
    "created_at": "2021-12-04T03:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656743",
    "user": "https://github.com/orlitzky"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/1502165423" to "Michael Orlitzky"



---

archive/issue_comments_656744.json:
```json
{
    "body": "<a id='comment:14'></a>Thanks for reviewing!",
    "created_at": "2021-12-04T06:20:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656744",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Thanks for reviewing!



---

archive/issue_comments_656745.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-12-17T17:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656745",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_events_087024.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-23T20:26:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32930#event-87024"
}
```



---

archive/issue_comments_656746.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-23T20:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656746",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_656747.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/ipython_jupyter_upgrade_for_python_3_10_support\" to \"66c16b14f9081c6d62f5d105cfe76b470074c187\"",
    "created_at": "2021-12-23T20:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32930#issuecomment-656747",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/ipython_jupyter_upgrade_for_python_3_10_support" to "66c16b14f9081c6d62f5d105cfe76b470074c187"
