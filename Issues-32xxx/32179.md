# Issue 32179: Remove unnecessary uses of SR and symbolic functions in sage.geometry (except .hyperbolic_space)

archive/issues_032179.json:
```json
{
    "body": "CC:  @kliem @fchapoton\n\n(and except `sage.geometry.riemannian_manifolds`, which is removed in #32228)\n\nSimilar to what is done in #32411.\n\nThis is part of Meta-ticket #29705 (modularization) - to remove unnecessary dependencies on the distribution sagemath-symbolics (#31695)\n\nIssue created by migration from https://trac.sagemath.org/ticket/32416\n\n",
    "closed_at": "2021-10-10T10:16:56Z",
    "created_at": "2021-08-24T19:10:45Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Remove unnecessary uses of SR and symbolic functions in sage.geometry (except .hyperbolic_space)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32179",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kliem @fchapoton

(and except `sage.geometry.riemannian_manifolds`, which is removed in #32228)

Similar to what is done in #32411.

This is part of Meta-ticket #29705 (modularization) - to remove unnecessary dependencies on the distribution sagemath-symbolics (#31695)

Issue created by migration from https://trac.sagemath.org/ticket/32416





---

archive/issue_comments_459029.json:
```json
{
    "body": "I'm working on this at the moment. Using `sympy.symbols` is ok, right?\nProbably yes, because `geometry` depends on `categories.sets_cat`, which depends on `sympy`.\n\nI'm just too lazy to reinvent the wheel and was looking for something that prints linear combinations of symbolic variables as well. Of course it is not too hard to write this yourself...",
    "created_at": "2021-08-27T19:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459029",
    "user": "https://github.com/kliem"
}
```

I'm working on this at the moment. Using `sympy.symbols` is ok, right?
Probably yes, because `geometry` depends on `categories.sets_cat`, which depends on `sympy`.

I'm just too lazy to reinvent the wheel and was looking for something that prints linear combinations of symbolic variables as well. Of course it is not too hard to write this yourself...



---

archive/issue_comments_459030.json:
```json
{
    "body": "Hm... what do you need this for? Are you just looking for `repr_lincomb`?",
    "created_at": "2021-08-27T20:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459030",
    "user": "https://github.com/mkoeppe"
}
```

Hm... what do you need this for? Are you just looking for `repr_lincomb`?



---

archive/issue_comments_459031.json:
```json
{
    "body": "Yes, that is exactly what I was looking for.",
    "created_at": "2021-08-27T20:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459031",
    "user": "https://github.com/kliem"
}
```

Yes, that is exactly what I was looking for.



---

archive/issue_comments_459032.json:
```json
{
    "body": "This is a partial solution.\n\n- Some doctests need to be marked optional yet. In this ticket?\n- `sage.geometry.polyhedron.base.Polyhedron_base.affine_hull_manifold` is missing yet.\n- `sage.geometry.hyperplane_arrangement.plot` is missing. Not sure that this even works.\n\n---\nNew commits:",
    "created_at": "2021-08-27T20:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459032",
    "user": "https://github.com/kliem"
}
```

This is a partial solution.

- Some doctests need to be marked optional yet. In this ticket?
- `sage.geometry.polyhedron.base.Polyhedron_base.affine_hull_manifold` is missing yet.
- `sage.geometry.hyperplane_arrangement.plot` is missing. Not sure that this even works.

---
New commits:



---

archive/issue_comments_459033.json:
```json
{
    "body": "These changes look good to me so far.",
    "created_at": "2021-08-27T21:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459033",
    "user": "https://github.com/mkoeppe"
}
```

These changes look good to me so far.



---

archive/issue_comments_459034.json:
```json
{
    "body": "Replying to [comment:4 gh-kliem]:\n> - Some doctests need to be marked optional yet. In this ticket?\n\n\nWe don't really have \"optional\" tags for things like `sagemath_symbolics` yet. You could add it to the beginning of `sage.doctest.control` (`auto_optional_tags`) but a more general solution is needed in the long term, see #30746",
    "created_at": "2021-08-27T21:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459034",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:4 gh-kliem]:
> - Some doctests need to be marked optional yet. In this ticket?


We don't really have "optional" tags for things like `sagemath_symbolics` yet. You could add it to the beginning of `sage.doctest.control` (`auto_optional_tags`) but a more general solution is needed in the long term, see #30746



---

archive/issue_comments_459035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-30T04:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459035",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_459036.json:
```json
{
    "body": "Let's see what the patchbot thinks",
    "created_at": "2021-09-30T04:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459036",
    "user": "https://github.com/mkoeppe"
}
```

Let's see what the patchbot thinks



---

archive/issue_comments_459037.json:
```json
{
    "body": "1 doctest failure from the changed latex whitespace in representation printing\n\n```\nsage -t --long --random-seed=0 src/doc/en/thematic_tutorials/geometry/tips.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/geometry/tips.rst\", line 82, in doc.en.thematic_tutorials.geometry.tips\nFailed example:\n    print(TCube.Hrepresentation_str(latex=True))\n```",
    "created_at": "2021-09-30T18:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459037",
    "user": "https://github.com/mkoeppe"
}
```

1 doctest failure from the changed latex whitespace in representation printing

```
sage -t --long --random-seed=0 src/doc/en/thematic_tutorials/geometry/tips.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/tips.rst", line 82, in doc.en.thematic_tutorials.geometry.tips
Failed example:
    print(TCube.Hrepresentation_str(latex=True))
```



---

archive/issue_comments_459038.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-30T18:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459039.json:
```json
{
    "body": "LGTM, thanks.",
    "created_at": "2021-10-03T16:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459039",
    "user": "https://github.com/mkoeppe"
}
```

LGTM, thanks.



---

archive/issue_comments_459040.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-03T16:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459040",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_459041.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> We don't really have \"optional\" tags for things like `sagemath_symbolics` yet. \n\n\nNow provided by #32614",
    "created_at": "2021-10-03T23:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459041",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:6 mkoeppe]:
> We don't really have "optional" tags for things like `sagemath_symbolics` yet. 


Now provided by #32614



---

archive/issue_events_086002.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:16:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32179#event-86002"
}
```



---

archive/issue_comments_459042.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-10T10:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32179#issuecomment-459042",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
