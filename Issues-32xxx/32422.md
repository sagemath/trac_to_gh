# Issue 32422: feature request. Improve Latex generation when variable name has underscore at start

archive/issues_032185.json:
```json
{
    "assignees": [],
    "body": "Given\n\n```\nSageMath version 9.3, Release Date: 2021-05-09                     \u2502\nUsing Python 3.9.4. Type \"help()\" for help. \n\nsage: var('_C0 _C1 x');\nsage: my_variable = _C0*_C1*x\n\nsage: my_variable\n_C0*_C1*x\n\nsage: latex(my_variable)\n_{C_{0}} _{C_{1}} x\n\n```\n\nWhen compiling the above latex, it gives error\n\n\n```\n\\documentclass[12pt]{article}\n\\usepackage{amsmath}\n\\begin{document}\n\\[\n_{C_{0}} _{C_{1}} x\n\\]\n\\end{document}\n\n```\n\nThe error is \n\n\n```\n>lualatex foo2.tex\nThis is LuaHBTeX, Version 1.13.2 (TeX Live 2021)\n restricted system commands enabled.\n(./foo2.tex\nLaTeX2e <2021-06-01>\n L3 programming layer <2021-06-01>\n(/usr/local/texlive/2021/texmf-dist/tex/latex/base/article.cls\nDocument Class: article 2021/02/12 v1.4n Standard LaTeX document class\n(/usr/local/texlive/2021/texmf-dist/tex/latex/base/size12.clo))\n(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsmath.sty\nFor additional information on amsmath, use the `?' option.\n(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amstext.sty\n(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsgen.sty))\n(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsbsy.sty)\n(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsopn.sty))\n(/usr/local/texlive/2021/texmf-dist/tex/latex/l3backend/l3backend-luatex.def)\n(./foo2.aux) (/usr/local/texlive/2021/texmf-dist/tex/latex/base/ts1cmr.fd)\n! Double subscript.\nl.10 _{C_{0}} _\n             {C_{1}} x\n?\n\n```\n\nI asked about this in the Latex form [https://tex.stackexchange.com/questions/612013/double-subscript-error-from-auto-generated-latex](https://tex.stackexchange.com/questions/612013/double-subscript-error-from-auto-generated-latex)  and the suggestion was that sagemath adds `\\_` to each variable name that starts with underscore, so the latex generated will become `\\_{C_{0}} \\_{C_{1}} x` and this solves the Latex error.\n\nI know it is better not to use underscore at start of variable names, but this is an input which was autogenerated by another system.\n\n\n\nKeywords: **latex**\n\nComponent: **translations**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32422_\n\n",
    "created_at": "2021-08-25T19:12:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20translations",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "feature request. Improve Latex generation when variable name has underscore at start",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/32422",
    "user": "https://github.com/nasser1"
}
```
Given

```
SageMath version 9.3, Release Date: 2021-05-09                     â”‚
Using Python 3.9.4. Type "help()" for help. 

sage: var('_C0 _C1 x');
sage: my_variable = _C0*_C1*x

sage: my_variable
_C0*_C1*x

sage: latex(my_variable)
_{C_{0}} _{C_{1}} x

```

When compiling the above latex, it gives error


```
\documentclass[12pt]{article}
\usepackage{amsmath}
\begin{document}
\[
_{C_{0}} _{C_{1}} x
\]
\end{document}

```

The error is 


```
>lualatex foo2.tex
This is LuaHBTeX, Version 1.13.2 (TeX Live 2021)
 restricted system commands enabled.
(./foo2.tex
LaTeX2e <2021-06-01>
 L3 programming layer <2021-06-01>
(/usr/local/texlive/2021/texmf-dist/tex/latex/base/article.cls
Document Class: article 2021/02/12 v1.4n Standard LaTeX document class
(/usr/local/texlive/2021/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2021/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2021/texmf-dist/tex/latex/l3backend/l3backend-luatex.def)
(./foo2.aux) (/usr/local/texlive/2021/texmf-dist/tex/latex/base/ts1cmr.fd)
! Double subscript.
l.10 _{C_{0}} _
             {C_{1}} x
?

```

I asked about this in the Latex form [https://tex.stackexchange.com/questions/612013/double-subscript-error-from-auto-generated-latex](https://tex.stackexchange.com/questions/612013/double-subscript-error-from-auto-generated-latex)  and the suggestion was that sagemath adds `\_` to each variable name that starts with underscore, so the latex generated will become `\_{C_{0}} \_{C_{1}} x` and this solves the Latex error.

I know it is better not to use underscore at start of variable names, but this is an input which was autogenerated by another system.



Keywords: **latex**

Component: **translations**

_Issue created by migration from https://trac.sagemath.org/ticket/32422_





---

archive/issue_events_449316.json:
```json
{
    "actor": "https://github.com/nasser1",
    "created_at": "2021-08-25T19:12:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449316"
}
```



---

archive/issue_events_449317.json:
```json
{
    "actor": "https://github.com/nasser1",
    "created_at": "2021-08-25T19:12:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20translations",
    "label_color": "0075ca",
    "label_name": "c: translations",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449317"
}
```



---

archive/issue_events_449318.json:
```json
{
    "actor": "https://github.com/nasser1",
    "created_at": "2021-08-25T19:12:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449318"
}
```



---

archive/issue_events_449319.json:
```json
{
    "actor": "https://github.com/nasser1",
    "created_at": "2021-08-25T19:12:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449319"
}
```



---

archive/issue_events_449320.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449320"
}
```



---

archive/issue_events_449321.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449321"
}
```



---

archive/issue_events_449322.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449322"
}
```



---

archive/issue_events_449323.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449323"
}
```



---

archive/issue_events_449324.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449324"
}
```



---

archive/issue_events_449325.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32422",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32422#event-449325"
}
```
