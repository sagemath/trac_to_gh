# Issue 32181: RealSet: Faster operations by scan-line (merging) techniques

archive/issues_031944.json:
```json
{
    "assignees": [],
    "body": "Adapt from:\n- https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py\n- https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py\n\n1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time the random generator and timing test code can find in this [page](https://github.com/NicoleYueqiLi/sagemath/blob/main/RealsetTestTool.py):\n\n|        |       |         |        |\n|--------|-------|---------|--------|\n|Function|Dataset|Scan-line|original|\n|union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|\n|union|[1000 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_oo_ff.txt)|[0.004339](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_union.txt)|\n|union|[1000 mixed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_co_ff.txt)|[0.005025](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed_open/res_union.txt)|\n|intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|\n|intersection|[300 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_oo_ff.txt)|[0.001225](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_intersection.txt)|[4.359314](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_intersection.txt)|\n|intersection|[300 mixed bounded interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_co_ff.txt)|[0.001537](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_closed_open/res_intersection.txt)|[4.407478](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_closed_open/res_intersection.txt)|\n\n2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.\n3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.\n4. Implement `convex_hull` and `is_connected` in `RealSet`. \n\nDepends on #34252\n\nCC:  @yuan-zhou\n\nBranch/Commit: **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Yueqi Li, Yuan Zhou**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32181_\n\n",
    "closed_at": "2022-08-06T07:44:13Z",
    "created_at": "2021-07-11T18:10:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "RealSet: Faster operations by scan-line (merging) techniques",
    "type": "issue",
    "updated_at": "2022-08-06T07:44:13Z",
    "url": "https://github.com/sagemath/sage/issues/32181",
    "user": "https://github.com/mkoeppe"
}
```
Adapt from:
- https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py
- https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py

1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time the random generator and timing test code can find in this [page](https://github.com/NicoleYueqiLi/sagemath/blob/main/RealsetTestTool.py):

|        |       |         |        |
|--------|-------|---------|--------|
|Function|Dataset|Scan-line|original|
|union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|
|union|[1000 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_oo_ff.txt)|[0.004339](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_union.txt)|
|union|[1000 mixed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_co_ff.txt)|[0.005025](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed_open/res_union.txt)|
|intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|
|intersection|[300 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_oo_ff.txt)|[0.001225](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_intersection.txt)|[4.359314](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_intersection.txt)|
|intersection|[300 mixed bounded interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_co_ff.txt)|[0.001537](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_closed_open/res_intersection.txt)|[4.407478](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_closed_open/res_intersection.txt)|

2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.
3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.
4. Implement `convex_hull` and `is_connected` in `RealSet`. 

Depends on #34252

CC:  @yuan-zhou

Branch/Commit: **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**

Reviewer: **Matthias Koeppe**

Author: **Yueqi Li, Yuan Zhou**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/32181_





---

archive/issue_events_440644.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-11T18:10:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440644"
}
```



---

archive/issue_events_440645.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-11T18:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440645"
}
```



---

archive/issue_events_440646.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-11T18:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440646"
}
```



---

archive/issue_events_440647.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-11T18:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440647"
}
```



---

archive/issue_events_440648.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440648"
}
```



---

archive/issue_events_440649.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440649"
}
```



---

archive/issue_events_440650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440650"
}
```



---

archive/issue_events_440651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440651"
}
```



---

archive/issue_events_440652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440652"
}
```



---

archive/issue_events_440653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440653"
}
```



---

archive/issue_comments_518271.json:
```json
{
    "body": "Branch: **[u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques)**",
    "created_at": "2022-05-19T03:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518271",
    "user": "https://github.com/NicoleYueqiLi"
}
```

Branch: **[u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques)**



---

archive/issue_comments_518272.json:
```json
{
    "body": "Commit: **[`625ac58`](https://github.com/sagemath/sagetrac-mirror/commit/625ac58151d34ba21cf7e8ebcb31170deb88c457)**",
    "created_at": "2022-07-18T21:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518272",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`625ac58`](https://github.com/sagemath/sagetrac-mirror/commit/625ac58151d34ba21cf7e8ebcb31170deb88c457)**



---

archive/issue_comments_518273.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-18T21:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518273",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_518274.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,7 @@\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py\n \n+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the intersection of two realsets took 10.9 seconds on average, and new methods only took 0.018 seconds on average, union of five realsets, the original method took 0.052 seconds, and new methods only took 0.041 seconds.\n+2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.\n+3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.\n+4. Implement `convex_hull` and `is_connected` in `RealSet`. \n``````\n",
    "created_at": "2022-07-26T19:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518274",
    "user": "https://github.com/NicoleYueqiLi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,7 @@
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py
 
+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the intersection of two realsets took 10.9 seconds on average, and new methods only took 0.018 seconds on average, union of five realsets, the original method took 0.052 seconds, and new methods only took 0.041 seconds.
+2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.
+3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.
+4. Implement `convex_hull` and `is_connected` in `RealSet`. 
``````




---

archive/issue_comments_518275.json:
```json
{
    "body": "Changed commit from **[`625ac58`](https://github.com/sagemath/sagetrac-mirror/commit/625ac58151d34ba21cf7e8ebcb31170deb88c457)** to **[`33385c8`](https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d)**",
    "created_at": "2022-07-26T19:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`625ac58`](https://github.com/sagemath/sagetrac-mirror/commit/625ac58151d34ba21cf7e8ebcb31170deb88c457)** to **[`33385c8`](https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d)**



---

archive/issue_comments_518276.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31613391161c5d86d7637fab9322f35c33181d54\"><code>3161339</code></a></td><td><code>1. fixed pycode test fail</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d\"><code>33385c8</code></a></td><td><code>Adding examples for helper funtion `_scan_line_union`, `_scan_line_intersection`, `_scan_line_difference`, `_scan_line_symmetric_difference`</code></td></tr></table>\n",
    "created_at": "2022-07-26T19:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31613391161c5d86d7637fab9322f35c33181d54"><code>3161339</code></a></td><td><code>1. fixed pycode test fail</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d"><code>33385c8</code></a></td><td><code>Adding examples for helper funtion `_scan_line_union`, `_scan_line_intersection`, `_scan_line_difference`, `_scan_line_symmetric_difference`</code></td></tr></table>




---

archive/issue_comments_518277.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIf you merge the most current beta (9.7.beta6), you can use https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Validatingdocstringwith.sage-tox-erst",
    "created_at": "2022-07-27T07:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518277",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

If you merge the most current beta (9.7.beta6), you can use https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Validatingdocstringwith.sage-tox-erst



---

archive/issue_comments_518278.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1\"><code>61862a9</code></a></td><td><code>Change scan-line methods to tree structure, improve inner function's documentation</code></td></tr></table>\n",
    "created_at": "2022-07-28T19:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518278",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1"><code>61862a9</code></a></td><td><code>Change scan-line methods to tree structure, improve inner function's documentation</code></td></tr></table>




---

archive/issue_comments_518279.json:
```json
{
    "body": "Changed commit from **[`33385c8`](https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d)** to **[`61862a9`](https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1)**",
    "created_at": "2022-07-28T19:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`33385c8`](https://github.com/sagemath/sagetrac-mirror/commit/33385c80d5c3f42b548b82a6329bc7b17eb2336d)** to **[`61862a9`](https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1)**



---

archive/issue_comments_518280.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n`tox -e relint` will tell you that `EXAMPLE::` should be `EXAMPLES::` according to our style guide (whether there is a single or there are multiple examples)",
    "created_at": "2022-07-28T20:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518280",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

`tox -e relint` will tell you that `EXAMPLE::` should be `EXAMPLES::` according to our style guide (whether there is a single or there are multiple examples)



---

archive/issue_comments_518281.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe current code does not pass the doc-tests.\nAlso, please follow https://doc.sagemath.org/html/en/developer/coding_basics.html. For example, in the text part, `convex_hull` should be fully-referenced so that it is clickable after build, i.e. :meth:`~sage.sets.real_set.RealSet.convex_hull`",
    "created_at": "2022-07-29T18:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518281",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:11" align="right">comment:11</div>

The current code does not pass the doc-tests.
Also, please follow https://doc.sagemath.org/html/en/developer/coding_basics.html. For example, in the text part, `convex_hull` should be fully-referenced so that it is clickable after build, i.e. :meth:`~sage.sets.real_set.RealSet.convex_hull`



---

archive/issue_comments_518282.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI took a look through the code, but didn't run the code. \nI have some first comments.\n- The patchbot currently shows 31 doctests failures and 4 lint errors. To be fixed!\n- In the docstrings of `_scan_left_endpoint` and `_scan_right_endpoint`: What does an event mean. Reformat the text after output. Describe the value of delta. Include example(s) where tag is given.\n- `RealSet` constructor with option normalized=True. What does this assume? Describe it in the docstring of `__classcall__`  or that of `RealSet`. Mention that is does not apply to the manifold case. Include doctests/tests where normalized=True is given, and examples where arguments are of type `InternalRealInterval`. \n- I have doubts about where `if not normalized` is treated. (But of course, this depends on how you define normalized=True). I thought if normalized=True and it's not of the manifold case (lines 1267-1283), one can just return `UniqueRepresentation.__classcall__(cls, *intervals)` before line 1199 `intervals = []`, which skips all treatments on args. \n- When normalized is not True, may simplify and insert the code in def normalize here, then remove the normalize function as it is only used once here. Alternatively, keep def normalize and move all treatment of args from `__classcall__` to normalize.\n- `RealSet.__classcall__`: Line 1188-1190 change to just: normalized = kwds.pop('normalized', False). L1194: \"... take no keyword arguments other than 'normalized'.\"\" \n- `RealSet._prep`: L1710 elif. L1717 elif\n- `RealSet` doesn't need methods `_scan_left_endpoint` and `_scan_right_endpoint`. These are methods of the class `InternalRealInterval`. \n- `RealSet._scan_interval` Rename the function, to something like `_scan`, or `_scan_intervals`, or `_generate_events`. Rewrite the function: for i in self._intervals: yield i._scan_left_endpoint(tag); yield i._scan_right_endpoint(tag). No more merge/sorting needed.\n- Ideally, all scan methods are generators. Currently, some are generators, some return lists.\n- In `_scan_line_union`, lines 2104-2122, the two while loops look very suspicious to me. I think they do not belong here. Moreover, the lines 2118-2119 in the second while loop might be wrong. You claimed that these two while loops take care of the special cases RealSet(x=-infinity) and RealSet(x<=-infinity), but the input scan to this function should never be in such form. Such empty (nonsense) special cases should already been eliminated in around line 1209 in `__classcall__`\n- In `union_of_realsets` and other similar functions: Lines 2175 to 2178 can be simplified to `scan = merge(RealSet(s)._scan() for s in real_set_collection)`\n- `_scan_line_intersection`. Add more special examples to doctest to cover the cases where intersection is just one point, or just empty. For example:  `[1,2] \u2229 [2,3]`, `[2,3] \u2229 (3,4)`, `(3,4) \u2229 [4,5)`, `[4,5) \u2229 (5,6)`. Lines 2252-2261 (and other similar places) can be simplified to\n\n```\nif now_on:\n  (on_x, on_epsilon) = (x, epsilon) \nelse: \n  if was_on and (on_x, on_epsilon) < (x, epsilon): \n    yield InternalRealInterval(...)\n  (on_x, on_epsilon) = (None, None)\n```\n- Questions about 'tag'. It is said to be a real number in the docstrings of many function, but is used as True or False for the difference function only. I think tag can be eliminated throughout the code (and do some special treatment for the difference.) Also, why is it called index at some places? That's not used either, so can be removed as well. On a related note, given a collection of real sets, after generating and merging the their scan, you can no longer match the list of events back to the original real sets, because index was not passed to tag in the events. I do not like the current design. \n- `_scan_line_union`, `_scan_line_intersection`, `_scan_line_symmetric_difference` (and part of `are_pairwise_disjoint`) all look redundant. They all can be replaced by a new method `RealSet._scan_to_intervals(scan, indicator)` that takes scan as a generator of sorted events and indicator as a number 1 or n (or perhaps as a lambda function for `are_pairwise_disjoint`), and outputs a tuple intervals of type InternalRealInterval.\n- According to your ticket description, the old union method is slower than the new one. Is this true for the union of two real sets? If so, why is the old one kept in the code? If not, please update the description of the ticket, and include comments in the code. In general, are there examples where the original method is faster? Please specify the examples, and change the code to choose strategically between the two versions according to the input.\n- `def convex_hull`: correct but wasteful. One does not to sort all intervals, only the left most and right most intervals of each real set matter.\n- `def is_connected` docstring: Return whether ``self`` is a connected set. OUTPUT: Boolean. ``True`` if ``self`` is a single interval.\n- `def are_pairwise_disjoint`: Revise.\n- Throughout the code, (for example in `_scan_line_union` and `_scan_line_intersection` and many other functions,) the docstrings need significant improvements! The current ones make little sense. They are often copy-pasted from other places which do not correspond to the function. Input and output descriptions are not exact, variable undefined, variable mistaken (eg. realsets v.s `real_set_collection`) type not specified, code-style incorrect. Often bad and incomplete examples. `EXAMPLES::` plural. At the beginning of the file, \"Yueqi Li (2022-06-27): ...\" Rephrase to one or two lines. Some places in the docstrings \":meth:`~sage.sets.real_set.RealSet.convex_hull`\"\n- Please make sure that your docstrings follow https://doc.sagemath.org/html/en/developer/coding_basics.html.  \n- Throughout the code: clean up the commented-out code.\n- Throughout the code: :class:`RealInterval` should be :class:`InternalRealInterval`\n- New method: relative closure in a superset?",
    "created_at": "2022-07-30T03:50:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518282",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:12" align="right">comment:12</div>

I took a look through the code, but didn't run the code. 
I have some first comments.
- The patchbot currently shows 31 doctests failures and 4 lint errors. To be fixed!
- In the docstrings of `_scan_left_endpoint` and `_scan_right_endpoint`: What does an event mean. Reformat the text after output. Describe the value of delta. Include example(s) where tag is given.
- `RealSet` constructor with option normalized=True. What does this assume? Describe it in the docstring of `__classcall__`  or that of `RealSet`. Mention that is does not apply to the manifold case. Include doctests/tests where normalized=True is given, and examples where arguments are of type `InternalRealInterval`. 
- I have doubts about where `if not normalized` is treated. (But of course, this depends on how you define normalized=True). I thought if normalized=True and it's not of the manifold case (lines 1267-1283), one can just return `UniqueRepresentation.__classcall__(cls, *intervals)` before line 1199 `intervals = []`, which skips all treatments on args. 
- When normalized is not True, may simplify and insert the code in def normalize here, then remove the normalize function as it is only used once here. Alternatively, keep def normalize and move all treatment of args from `__classcall__` to normalize.
- `RealSet.__classcall__`: Line 1188-1190 change to just: normalized = kwds.pop('normalized', False). L1194: "... take no keyword arguments other than 'normalized'."" 
- `RealSet._prep`: L1710 elif. L1717 elif
- `RealSet` doesn't need methods `_scan_left_endpoint` and `_scan_right_endpoint`. These are methods of the class `InternalRealInterval`. 
- `RealSet._scan_interval` Rename the function, to something like `_scan`, or `_scan_intervals`, or `_generate_events`. Rewrite the function: for i in self._intervals: yield i._scan_left_endpoint(tag); yield i._scan_right_endpoint(tag). No more merge/sorting needed.
- Ideally, all scan methods are generators. Currently, some are generators, some return lists.
- In `_scan_line_union`, lines 2104-2122, the two while loops look very suspicious to me. I think they do not belong here. Moreover, the lines 2118-2119 in the second while loop might be wrong. You claimed that these two while loops take care of the special cases RealSet(x=-infinity) and RealSet(x<=-infinity), but the input scan to this function should never be in such form. Such empty (nonsense) special cases should already been eliminated in around line 1209 in `__classcall__`
- In `union_of_realsets` and other similar functions: Lines 2175 to 2178 can be simplified to `scan = merge(RealSet(s)._scan() for s in real_set_collection)`
- `_scan_line_intersection`. Add more special examples to doctest to cover the cases where intersection is just one point, or just empty. For example:  `[1,2] ∩ [2,3]`, `[2,3] ∩ (3,4)`, `(3,4) ∩ [4,5)`, `[4,5) ∩ (5,6)`. Lines 2252-2261 (and other similar places) can be simplified to

```
if now_on:
  (on_x, on_epsilon) = (x, epsilon) 
else: 
  if was_on and (on_x, on_epsilon) < (x, epsilon): 
    yield InternalRealInterval(...)
  (on_x, on_epsilon) = (None, None)
```
- Questions about 'tag'. It is said to be a real number in the docstrings of many function, but is used as True or False for the difference function only. I think tag can be eliminated throughout the code (and do some special treatment for the difference.) Also, why is it called index at some places? That's not used either, so can be removed as well. On a related note, given a collection of real sets, after generating and merging the their scan, you can no longer match the list of events back to the original real sets, because index was not passed to tag in the events. I do not like the current design. 
- `_scan_line_union`, `_scan_line_intersection`, `_scan_line_symmetric_difference` (and part of `are_pairwise_disjoint`) all look redundant. They all can be replaced by a new method `RealSet._scan_to_intervals(scan, indicator)` that takes scan as a generator of sorted events and indicator as a number 1 or n (or perhaps as a lambda function for `are_pairwise_disjoint`), and outputs a tuple intervals of type InternalRealInterval.
- According to your ticket description, the old union method is slower than the new one. Is this true for the union of two real sets? If so, why is the old one kept in the code? If not, please update the description of the ticket, and include comments in the code. In general, are there examples where the original method is faster? Please specify the examples, and change the code to choose strategically between the two versions according to the input.
- `def convex_hull`: correct but wasteful. One does not to sort all intervals, only the left most and right most intervals of each real set matter.
- `def is_connected` docstring: Return whether ``self`` is a connected set. OUTPUT: Boolean. ``True`` if ``self`` is a single interval.
- `def are_pairwise_disjoint`: Revise.
- Throughout the code, (for example in `_scan_line_union` and `_scan_line_intersection` and many other functions,) the docstrings need significant improvements! The current ones make little sense. They are often copy-pasted from other places which do not correspond to the function. Input and output descriptions are not exact, variable undefined, variable mistaken (eg. realsets v.s `real_set_collection`) type not specified, code-style incorrect. Often bad and incomplete examples. `EXAMPLES::` plural. At the beginning of the file, "Yueqi Li (2022-06-27): ..." Rephrase to one or two lines. Some places in the docstrings ":meth:`~sage.sets.real_set.RealSet.convex_hull`"
- Please make sure that your docstrings follow https://doc.sagemath.org/html/en/developer/coding_basics.html.  
- Throughout the code: clean up the commented-out code.
- Throughout the code: :class:`RealInterval` should be :class:`InternalRealInterval`
- New method: relative closure in a superset?



---

archive/issue_comments_518283.json:
```json
{
    "body": "Changed branch from **[u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques)** to **[u/yzh/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/realset__faster_operations_by_scan_line__merging__techniques)**",
    "created_at": "2022-07-30T04:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518283",
    "user": "https://github.com/yuan-zhou"
}
```

Changed branch from **[u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NicoleYueqiLi/realset__faster_operations_by_scan_line__merging__techniques)** to **[u/yzh/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/realset__faster_operations_by_scan_line__merging__techniques)**



---

archive/issue_comments_518284.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMerge-in [SageMath](../wiki/SageMath) version to 9.7.beta6.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616\"><code>ed5c560</code></a></td><td><code>Merge branch 'develop' into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>\n",
    "created_at": "2022-07-30T04:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518284",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:14" align="right">comment:14</div>

Merge-in [SageMath](../wiki/SageMath) version to 9.7.beta6.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616"><code>ed5c560</code></a></td><td><code>Merge branch 'develop' into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>




---

archive/issue_comments_518285.json:
```json
{
    "body": "Changed commit from **[`61862a9`](https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1)** to **[`ed5c560`](https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616)**",
    "created_at": "2022-07-30T04:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518285",
    "user": "https://github.com/yuan-zhou"
}
```

Changed commit from **[`61862a9`](https://github.com/sagemath/sagetrac-mirror/commit/61862a9941196e68fab072e743a62d18d4727bc1)** to **[`ed5c560`](https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616)**



---

archive/issue_comments_518286.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd9cc4cd69e5278697e27de5c9173e0e50236abb\"><code>cd9cc4c</code></a></td><td><code>trivial typo fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6b334f17df9a80b3c4cc5b0715c53c44664d9c9\"><code>f6b334f</code></a></td><td><code>remove outdated patch for the broken comparison between infinity and RLF (fixed in ticket 11506)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58aa1efb570d01ac6e1b28b6a507f0def15b3679\"><code>58aa1ef</code></a></td><td><code>add bug example regarding empty InternalRealInterval. Will not fix for this internal class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44\"><code>7a65f08</code></a></td><td><code>fix bug regarding empty real sets</code></td></tr></table>\n",
    "created_at": "2022-07-31T06:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd9cc4cd69e5278697e27de5c9173e0e50236abb"><code>cd9cc4c</code></a></td><td><code>trivial typo fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6b334f17df9a80b3c4cc5b0715c53c44664d9c9"><code>f6b334f</code></a></td><td><code>remove outdated patch for the broken comparison between infinity and RLF (fixed in ticket 11506)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58aa1efb570d01ac6e1b28b6a507f0def15b3679"><code>58aa1ef</code></a></td><td><code>add bug example regarding empty InternalRealInterval. Will not fix for this internal class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44"><code>7a65f08</code></a></td><td><code>fix bug regarding empty real sets</code></td></tr></table>




---

archive/issue_comments_518287.json:
```json
{
    "body": "Changed commit from **[`ed5c560`](https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616)** to **[`7a65f08`](https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44)**",
    "created_at": "2022-07-31T06:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518287",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed5c560`](https://github.com/sagemath/sagetrac-mirror/commit/ed5c56031aa8ed98eebc0470c987bd1ba47b0616)** to **[`7a65f08`](https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44)**



---

archive/issue_comments_518288.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b\"><code>1bbb04f</code></a></td><td><code>acknowledge authors, reference</code></td></tr></table>\n",
    "created_at": "2022-07-31T07:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518288",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b"><code>1bbb04f</code></a></td><td><code>acknowledge authors, reference</code></td></tr></table>




---

archive/issue_comments_518289.json:
```json
{
    "body": "Changed commit from **[`7a65f08`](https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44)** to **[`1bbb04f`](https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b)**",
    "created_at": "2022-07-31T07:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518289",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7a65f08`](https://github.com/sagemath/sagetrac-mirror/commit/7a65f0892d433ddd895c701f6f7c8c1c2f85dd44)** to **[`1bbb04f`](https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b)**



---

archive/issue_comments_518290.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe\"><code>dda8f6b</code></a></td><td><code>rewrite implementation of scan-line algo for real set methods, by adapting the code from https://github.com/mkoeppe/cutgeneratingfunctionology</code></td></tr></table>\n",
    "created_at": "2022-07-31T13:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518290",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe"><code>dda8f6b</code></a></td><td><code>rewrite implementation of scan-line algo for real set methods, by adapting the code from https://github.com/mkoeppe/cutgeneratingfunctionology</code></td></tr></table>




---

archive/issue_comments_518291.json:
```json
{
    "body": "Changed commit from **[`1bbb04f`](https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b)** to **[`dda8f6b`](https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe)**",
    "created_at": "2022-07-31T13:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518291",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1bbb04f`](https://github.com/sagemath/sagetrac-mirror/commit/1bbb04f27ac5c5267f58aec47411e8fbafb8395b)** to **[`dda8f6b`](https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe)**



---

archive/issue_comments_518292.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@NicoleYueqiLi](#comment:6):\nI rewrote your code according to the remarks in [comment:12](#comment:12). Yet to update the docstrings.",
    "created_at": "2022-07-31T13:46:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518292",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@NicoleYueqiLi](#comment:6):
I rewrote your code according to the remarks in [comment:12](#comment:12). Yet to update the docstrings.



---

archive/issue_comments_518293.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75ec519465f5d9970c90d0f05b034e542d5b2d68\"><code>75ec519</code></a></td><td><code>pass kwd normalize=True to UniqueRepresentation classcall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecf22e10d33966d49176f9a02132f565605db76f\"><code>ecf22e1</code></a></td><td><code>rename left and right endpoints to lower and upper</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7967c81a570f2ba34f5ca443308ba275cb9c067f\"><code>7967c81</code></a></td><td><code>add comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8\"><code>2bfdfb2</code></a></td><td><code>improve docstring and add docstests</code></td></tr></table>\n",
    "created_at": "2022-08-01T09:58:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518293",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75ec519465f5d9970c90d0f05b034e542d5b2d68"><code>75ec519</code></a></td><td><code>pass kwd normalize=True to UniqueRepresentation classcall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecf22e10d33966d49176f9a02132f565605db76f"><code>ecf22e1</code></a></td><td><code>rename left and right endpoints to lower and upper</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7967c81a570f2ba34f5ca443308ba275cb9c067f"><code>7967c81</code></a></td><td><code>add comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8"><code>2bfdfb2</code></a></td><td><code>improve docstring and add docstests</code></td></tr></table>




---

archive/issue_comments_518294.json:
```json
{
    "body": "Changed commit from **[`dda8f6b`](https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe)** to **[`2bfdfb2`](https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8)**",
    "created_at": "2022-08-01T09:58:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518294",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dda8f6b`](https://github.com/sagemath/sagetrac-mirror/commit/dda8f6b3d231344e0175872f8689058faabbeefe)** to **[`2bfdfb2`](https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8)**



---

archive/issue_comments_518295.json:
```json
{
    "body": "Author: **Yueqi Li, Yuan Zhou**",
    "created_at": "2022-08-01T10:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518295",
    "user": "https://github.com/yuan-zhou"
}
```

Author: **Yueqi Li, Yuan Zhou**



---

archive/issue_events_440654.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-01T10:01:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440654"
}
```



---

archive/issue_comments_518296.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d1e07a4743d840b8f1a88a02cabe6f2b24f91be\"><code>9d1e07a</code></a></td><td><code>Revive furo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f19b59704068e2d2bb90dc168705074819b99b57\"><code>f19b597</code></a></td><td><code>Add link to the logo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09d5f5cd78bcfd97b6e8b5d1ceffa4e1804db638\"><code>09d5f5c</code></a></td><td><code>Fix the logo link for reference</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae75d53769051a434580a7548a945ff8631fc879\"><code>ae75d53</code></a></td><td><code>Fix a subtle reference problem for build_options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3519bed10223f7c799e0a8f321d8e001a4bbf5d6\"><code>3519bed</code></a></td><td><code>Run docbuild workflow with single thread</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1274718740497cd84295cff540558691a21ec687\"><code>1274718</code></a></td><td><code>Fix a suspicious part of categories doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5b1f7e5ef6763f74b5f08ee8bfc2e8524fe6fa2\"><code>e5b1f7e</code></a></td><td><code>Add search.html</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949\"><code>bc6a87f</code></a></td><td><code>Merge branch 'u/klee/34252' of git://trac.sagemath.org/sage into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>\n",
    "created_at": "2022-08-01T10:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d1e07a4743d840b8f1a88a02cabe6f2b24f91be"><code>9d1e07a</code></a></td><td><code>Revive furo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f19b59704068e2d2bb90dc168705074819b99b57"><code>f19b597</code></a></td><td><code>Add link to the logo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09d5f5cd78bcfd97b6e8b5d1ceffa4e1804db638"><code>09d5f5c</code></a></td><td><code>Fix the logo link for reference</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae75d53769051a434580a7548a945ff8631fc879"><code>ae75d53</code></a></td><td><code>Fix a subtle reference problem for build_options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3519bed10223f7c799e0a8f321d8e001a4bbf5d6"><code>3519bed</code></a></td><td><code>Run docbuild workflow with single thread</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1274718740497cd84295cff540558691a21ec687"><code>1274718</code></a></td><td><code>Fix a suspicious part of categories doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5b1f7e5ef6763f74b5f08ee8bfc2e8524fe6fa2"><code>e5b1f7e</code></a></td><td><code>Add search.html</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949"><code>bc6a87f</code></a></td><td><code>Merge branch 'u/klee/34252' of git://trac.sagemath.org/sage into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>




---

archive/issue_comments_518297.json:
```json
{
    "body": "Changed commit from **[`2bfdfb2`](https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8)** to **[`bc6a87f`](https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949)**",
    "created_at": "2022-08-01T10:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518297",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2bfdfb2`](https://github.com/sagemath/sagetrac-mirror/commit/2bfdfb2b4d1e974721ad97a13662a4fd8da601b8)** to **[`bc6a87f`](https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949)**



---

archive/issue_comments_518298.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nTry merging #34252 to fix the docbuild errors.",
    "created_at": "2022-08-01T10:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518298",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:22" align="right">comment:22</div>

Try merging #34252 to fix the docbuild errors.



---

archive/issue_events_440655.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-01T10:23:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440655"
}
```



---

archive/issue_events_440656.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-01T10:23:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440656"
}
```



---

archive/issue_comments_518299.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063\"><code>1194904</code></a></td><td><code>minor fix for pycodestyle</code></td></tr></table>\n",
    "created_at": "2022-08-01T10:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518299",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063"><code>1194904</code></a></td><td><code>minor fix for pycodestyle</code></td></tr></table>




---

archive/issue_comments_518300.json:
```json
{
    "body": "Changed commit from **[`bc6a87f`](https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949)** to **[`1194904`](https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063)**",
    "created_at": "2022-08-01T10:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518300",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc6a87f`](https://github.com/sagemath/sagetrac-mirror/commit/bc6a87f531d1e44946bca809af6b2b19aaa32949)** to **[`1194904`](https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063)**



---

archive/issue_comments_518301.json:
```json
{
    "body": "Changed commit from **[`1194904`](https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063)** to **[`44926c8`](https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59)**",
    "created_at": "2022-08-01T13:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518301",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1194904`](https://github.com/sagemath/sagetrac-mirror/commit/119490424fc151776e4bf767751d312adb42b063)** to **[`44926c8`](https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59)**



---

archive/issue_comments_518302.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59\"><code>44926c8</code></a></td><td><code>better pyflakes, better handle of RealSet(x != oo)</code></td></tr></table>\n",
    "created_at": "2022-08-01T13:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59"><code>44926c8</code></a></td><td><code>better pyflakes, better handle of RealSet(x != oo)</code></td></tr></table>




---

archive/issue_comments_518303.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAs you merged #34252 here, add it to Dependencies in the ticket box",
    "created_at": "2022-08-01T17:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518303",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

As you merged #34252 here, add it to Dependencies in the ticket box



---

archive/issue_comments_518304.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI think you can unify `RealSet.intersection` and `RealSet.intersection_of_realsets` to just one (non-static) method `RealSet.intersection`.",
    "created_at": "2022-08-01T18:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518304",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

I think you can unify `RealSet.intersection` and `RealSet.intersection_of_realsets` to just one (non-static) method `RealSet.intersection`.



---

archive/issue_comments_518305.json:
```json
{
    "body": "Changed commit from **[`44926c8`](https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59)** to **[`523b49a`](https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3)**",
    "created_at": "2022-08-01T21:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`44926c8`](https://github.com/sagemath/sagetrac-mirror/commit/44926c8c6b4bc2bbfd8d290338b8213ba1fc1c59)** to **[`523b49a`](https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3)**



---

archive/issue_comments_518306.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9d4746cf368a5377ad2b372b2e162235ca8598c\"><code>c9d4746</code></a></td><td><code>update RealSet.union and RealSet.intersection to handle several real sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebd3b77e49246009b2681abbbeb45fda58680ab8\"><code>ebd3b77</code></a></td><td><code>Better pygments style</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73e5aa3fbbec2d751a47064c14479fc0d55c3de9\"><code>73e5aa3</code></a></td><td><code>Make white logo transparent to match with furo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3\"><code>523b49a</code></a></td><td><code>Merge branch 'u/klee/34252' of git://trac.sagemath.org/sage into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>\n",
    "created_at": "2022-08-01T21:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518306",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9d4746cf368a5377ad2b372b2e162235ca8598c"><code>c9d4746</code></a></td><td><code>update RealSet.union and RealSet.intersection to handle several real sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebd3b77e49246009b2681abbbeb45fda58680ab8"><code>ebd3b77</code></a></td><td><code>Better pygments style</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73e5aa3fbbec2d751a47064c14479fc0d55c3de9"><code>73e5aa3</code></a></td><td><code>Make white logo transparent to match with furo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3"><code>523b49a</code></a></td><td><code>Merge branch 'u/klee/34252' of git://trac.sagemath.org/sage into t/32181/realset__faster_operations_by_scan_line__merging__techniques</code></td></tr></table>




---

archive/issue_comments_518307.json:
```json
{
    "body": "Dependencies: **34252**",
    "created_at": "2022-08-01T21:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518307",
    "user": "https://github.com/yuan-zhou"
}
```

Dependencies: **34252**



---

archive/issue_comments_518308.json:
```json
{
    "body": "Changed dependencies from **34252** to **#34252**",
    "created_at": "2022-08-01T21:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518308",
    "user": "https://github.com/yuan-zhou"
}
```

Changed dependencies from **34252** to **#34252**



---

archive/issue_comments_518309.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n\n```\n-    @staticmethod\n-    def normalize(intervals):\n-        r\"\"\"\n```\nThis function is part of the public API, can't just remove",
    "created_at": "2022-08-04T17:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>


```
-    @staticmethod
-    def normalize(intervals):
-        r"""
```
This function is part of the public API, can't just remove



---

archive/issue_comments_518310.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n\n```\n+            # Fastpass: The input is already normalized: Args is a list of\n```\nThat should be \"Fast path\"",
    "created_at": "2022-08-04T17:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518310",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>


```
+            # Fastpass: The input is already normalized: Args is a list of
```
That should be "Fast path"



---

archive/issue_comments_518311.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n\n```\n+    def is_connected(self):\n+        \"\"\"\n+        Return whether ``self`` is a connected set.\n+\n+        OUTPUT:\n+\n+        Boolean. Whether the normalized form of ``self``\n+        has a single connected component.\n+\n```\n\nIn this description, you are mixing talking about ``self`` as a set and its representation as a list of intervals",
    "created_at": "2022-08-04T17:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518311",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>


```
+    def is_connected(self):
+        """
+        Return whether ``self`` is a connected set.
+
+        OUTPUT:
+
+        Boolean. Whether the normalized form of ``self``
+        has a single connected component.
+
```

In this description, you are mixing talking about ``self`` as a set and its representation as a list of intervals



---

archive/issue_comments_518312.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n\n```\n             sage: s1.symmetric_difference(s2)\n             (0, 1] \u222a [2, +oo)\n         \"\"\"\n-        other = RealSet(*other)\n-        return self.difference(other).union(other.difference(self))\n+        scan = merge(self._scan(), RealSet(*other)._scan())\n+        intervals = tuple(RealSet._scan_to_intervals(scan, lambda i: bool(i == 1)))\n+        return RealSet(*intervals, normalized=True)\n \n     def contains(self, x):\n```\nIs the explicit conversion to `bool` necessary here?",
    "created_at": "2022-08-04T17:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>


```
             sage: s1.symmetric_difference(s2)
             (0, 1] ∪ [2, +oo)
         """
-        other = RealSet(*other)
-        return self.difference(other).union(other.difference(self))
+        scan = merge(self._scan(), RealSet(*other)._scan())
+        intervals = tuple(RealSet._scan_to_intervals(scan, lambda i: bool(i == 1)))
+        return RealSet(*intervals, normalized=True)
 
     def contains(self, x):
```
Is the explicit conversion to `bool` necessary here?



---

archive/issue_comments_518313.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWould it make sense to add the benchmarks mentioned in the ticket description as doctests (can be marked `# not tested` so it does not run automatically)?\n\nThe benchmarks are for complicated real sets with many intervals.\n\nDoes the new implementation have an overhead over the previous implementation that becomes noticeable for simple real sets with 0, 1, 2, or 5 intervals? That's probably the most common case how this class is used. It would be good to include a benchmark for this.",
    "created_at": "2022-08-04T17:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518313",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Would it make sense to add the benchmarks mentioned in the ticket description as doctests (can be marked `# not tested` so it does not run automatically)?

The benchmarks are for complicated real sets with many intervals.

Does the new implementation have an overhead over the previous implementation that becomes noticeable for simple real sets with 0, 1, 2, or 5 intervals? That's probably the most common case how this class is used. It would be good to include a benchmark for this.



---

archive/issue_comments_518314.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThanks for reviewing the ticket! I don't think that the benchmark in the current ticket description makes much sense. I was hoping that Yueqi would be able to provide an updated version and more details soon. \nReplying to [@mkoeppe](#comment:35):\n> Would it make sense to add the benchmarks mentioned in the ticket description as doctests (can be marked `# not tested` so it does not run automatically)?\n> \n> The benchmarks are for complicated real sets with many intervals.\n> \n> Does the new implementation have an overhead over the previous implementation that becomes noticeable for simple real sets with 0, 1, 2, or 5 intervals? That's probably the most common case how this class is used. It would be good to include a benchmark for this.\n\n>",
    "created_at": "2022-08-04T17:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518314",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:36" align="right">comment:36</div>

Thanks for reviewing the ticket! I don't think that the benchmark in the current ticket description makes much sense. I was hoping that Yueqi would be able to provide an updated version and more details soon. 
Replying to [@mkoeppe](#comment:35):
> Would it make sense to add the benchmarks mentioned in the ticket description as doctests (can be marked `# not tested` so it does not run automatically)?
> 
> The benchmarks are for complicated real sets with many intervals.
> 
> Does the new implementation have an overhead over the previous implementation that becomes noticeable for simple real sets with 0, 1, 2, or 5 intervals? That's probably the most common case how this class is used. It would be good to include a benchmark for this.

>



---

archive/issue_comments_518315.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI don't quite get it. I thought that a real set is connected iff its normalized form has only one connected component (interval or singleton).\n\nReplying to [@mkoeppe](#comment:33):\n> \n> ```\n> +    def is_connected(self):\n> +        \"\"\"\n> +        Return whether ``self`` is a connected set.\n> +\n> +        OUTPUT:\n> +\n> +        Boolean. Whether the normalized form of ``self``\n> +        has a single connected component.\n> +\n> ```\n> \n> In this description, you are mixing talking about ``self`` as a set and its representation as a list of intervals\n\n>",
    "created_at": "2022-08-04T17:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518315",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:37" align="right">comment:37</div>

I don't quite get it. I thought that a real set is connected iff its normalized form has only one connected component (interval or singleton).

Replying to [@mkoeppe](#comment:33):
> 
> ```
> +    def is_connected(self):
> +        """
> +        Return whether ``self`` is a connected set.
> +
> +        OUTPUT:
> +
> +        Boolean. Whether the normalized form of ``self``
> +        has a single connected component.
> +
> ```
> 
> In this description, you are mixing talking about ``self`` as a set and its representation as a list of intervals

>



---

archive/issue_comments_518316.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nDo you mean bool(i==1)? I don't know if it's always needed, but I thought there is nothing wrong to add it.\nReplying to [@mkoeppe](#comment:34):\n> \n> ```\n>              sage: s1.symmetric_difference(s2)\n>              (0, 1] \u222a [2, +oo)\n>          \"\"\"\n> -        other = RealSet(*other)\n> -        return self.difference(other).union(other.difference(self))\n> +        scan = merge(self._scan(), RealSet(*other)._scan())\n> +        intervals = tuple(RealSet._scan_to_intervals(scan, lambda i: bool(i == 1)))\n> +        return RealSet(*intervals, normalized=True)\n>  \n>      def contains(self, x):\n> ```\n> Is the explicit conversion to `bool` necessary here?",
    "created_at": "2022-08-04T17:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518316",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:38" align="right">comment:38</div>

Do you mean bool(i==1)? I don't know if it's always needed, but I thought there is nothing wrong to add it.
Replying to [@mkoeppe](#comment:34):
> 
> ```
>              sage: s1.symmetric_difference(s2)
>              (0, 1] ∪ [2, +oo)
>          """
> -        other = RealSet(*other)
> -        return self.difference(other).union(other.difference(self))
> +        scan = merge(self._scan(), RealSet(*other)._scan())
> +        intervals = tuple(RealSet._scan_to_intervals(scan, lambda i: bool(i == 1)))
> +        return RealSet(*intervals, normalized=True)
>  
>      def contains(self, x):
> ```
> Is the explicit conversion to `bool` necessary here?



---

archive/issue_comments_518317.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@yuan-zhou](#comment:37):\n> I don't quite get it. I thought that a real set is connected iff its normalized form has only one connected component (interval or singleton).\n\n\"Connected component\" is a property of the set (topological space).\n\n\"Normalized form\" is a list of intervals. There's no such thing as a connected component of a list.",
    "created_at": "2022-08-04T17:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518317",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@yuan-zhou](#comment:37):
> I don't quite get it. I thought that a real set is connected iff its normalized form has only one connected component (interval or singleton).

"Connected component" is a property of the set (topological space).

"Normalized form" is a list of intervals. There's no such thing as a connected component of a list.



---

archive/issue_comments_518318.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a864fdc113c4fc3f70e5c95dcc39b1a01ca0fe27\"><code>a864fdc</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34\"><code>3f6a0ac</code></a></td><td><code>revive RealSet.normalize</code></td></tr></table>\n",
    "created_at": "2022-08-04T17:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518318",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a864fdc113c4fc3f70e5c95dcc39b1a01ca0fe27"><code>a864fdc</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34"><code>3f6a0ac</code></a></td><td><code>revive RealSet.normalize</code></td></tr></table>




---

archive/issue_comments_518319.json:
```json
{
    "body": "Changed commit from **[`523b49a`](https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3)** to **[`3f6a0ac`](https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34)**",
    "created_at": "2022-08-04T17:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`523b49a`](https://github.com/sagemath/sagetrac-mirror/commit/523b49a04188e6b50def5ea58a80119b30624cc3)** to **[`3f6a0ac`](https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34)**



---

archive/issue_comments_518320.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@yuan-zhou](#comment:38):\n> Do you mean bool(i==1)? I don't know if it's always needed, but I thought there is nothing wrong to add it.\n\n`i` is just an integer, right? Converting to `bool` is only needed in comparison when you are comparing `SR` elements, which have overloaded comparison operators for forming relational expressions.",
    "created_at": "2022-08-04T18:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518320",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@yuan-zhou](#comment:38):
> Do you mean bool(i==1)? I don't know if it's always needed, but I thought there is nothing wrong to add it.

`i` is just an integer, right? Converting to `bool` is only needed in comparison when you are comparing `SR` elements, which have overloaded comparison operators for forming relational expressions.



---

archive/issue_comments_518321.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nIf you want, you can add a deprecation for the `normalize` method",
    "created_at": "2022-08-04T18:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518321",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

If you want, you can add a deprecation for the `normalize` method



---

archive/issue_comments_518322.json:
```json
{
    "body": "Changed commit from **[`3f6a0ac`](https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34)** to **[`79f2014`](https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7)**",
    "created_at": "2022-08-04T18:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518322",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f6a0ac`](https://github.com/sagemath/sagetrac-mirror/commit/3f6a0ac458139529dca91373302ad773a27fae34)** to **[`79f2014`](https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7)**



---

archive/issue_comments_518323.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7\"><code>79f2014</code></a></td><td><code>revise the docstring of RealSet.is_connected</code></td></tr></table>\n",
    "created_at": "2022-08-04T18:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518323",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7"><code>79f2014</code></a></td><td><code>revise the docstring of RealSet.is_connected</code></td></tr></table>




---

archive/issue_comments_518324.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646\"><code>1ef7dd1</code></a></td><td><code>remove unnecessary bool()</code></td></tr></table>\n",
    "created_at": "2022-08-04T18:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518324",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646"><code>1ef7dd1</code></a></td><td><code>remove unnecessary bool()</code></td></tr></table>




---

archive/issue_comments_518325.json:
```json
{
    "body": "Changed commit from **[`79f2014`](https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7)** to **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**",
    "created_at": "2022-08-04T18:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518325",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`79f2014`](https://github.com/sagemath/sagetrac-mirror/commit/79f2014e688a757e573442dc77378e6c2316b7e7)** to **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**



---

archive/issue_comments_518326.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHere's a microbenchmark:\n\nBefore:\n\n```\nsage: from itertools import count\nsage: c = count()\nsage: %timeit RealSet((0, next(c)))\n82.9 \u00b5s \u00b1 3.75 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10,000 loops each)\nsage: %timeit RealSet((0, next(c))).union([next(c), next(c)])\n210 \u00b5s \u00b1 7.86 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1,000 loops each)\n```\n\nWith this ticket:\n\n```\nsage: from itertools import count\nsage: c = count()\nsage: %timeit RealSet((0, next(c)))\n86.2 \u00b5s \u00b1 3.43 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10,000 loops each)\nsage: %timeit RealSet((0, next(c))).union([next(c), next(c)])\n257 \u00b5s \u00b1 18.9 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1,000 loops each)\n```",
    "created_at": "2022-08-04T19:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518326",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Here's a microbenchmark:

Before:

```
sage: from itertools import count
sage: c = count()
sage: %timeit RealSet((0, next(c)))
82.9 µs ± 3.75 µs per loop (mean ± std. dev. of 7 runs, 10,000 loops each)
sage: %timeit RealSet((0, next(c))).union([next(c), next(c)])
210 µs ± 7.86 µs per loop (mean ± std. dev. of 7 runs, 1,000 loops each)
```

With this ticket:

```
sage: from itertools import count
sage: c = count()
sage: %timeit RealSet((0, next(c)))
86.2 µs ± 3.43 µs per loop (mean ± std. dev. of 7 runs, 10,000 loops each)
sage: %timeit RealSet((0, next(c))).union([next(c), next(c)])
257 µs ± 18.9 µs per loop (mean ± std. dev. of 7 runs, 1,000 loops each)
```



---

archive/issue_comments_518327.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nDoes the overhead look acceptable on the above examples?",
    "created_at": "2022-08-04T19:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518327",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:46" align="right">comment:46</div>

Does the overhead look acceptable on the above examples?



---

archive/issue_comments_518328.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\n\n```\n     def __init__(self, lower, lower_closed, upper, upper_closed, check=True):\n         \"\"\"\n         Initialize ``self``.\n[...]\n             if (upper_closed and upper == infinity):\n                 raise ValueError('interval cannot be closed at +oo')\n+            # TODO: take care of the empty set case.\n```\n\nWhat do you have in mind there?",
    "created_at": "2022-08-04T19:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518328",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>


```
     def __init__(self, lower, lower_closed, upper, upper_closed, check=True):
         """
         Initialize ``self``.
[...]
             if (upper_closed and upper == infinity):
                 raise ValueError('interval cannot be closed at +oo')
+            # TODO: take care of the empty set case.
```

What do you have in mind there?



---

archive/issue_comments_518329.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,12 @@\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py\n \n-1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the intersection of two realsets took 10.9 seconds on average, and new methods only took 0.018 seconds on average, union of five realsets, the original method took 0.052 seconds, and new methods only took 0.041 seconds.\n+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time:\n+|        |       |         |        |\n+|--------|-------|---------|--------|\n+|Function|Dataset|Scan-line|original|\n+|union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|\n+|intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|\n 2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.\n 3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.\n 4. Implement `convex_hull` and `is_connected` in `RealSet`. \n``````\n",
    "created_at": "2022-08-04T19:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518329",
    "user": "https://github.com/NicoleYueqiLi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,12 @@
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py
 
-1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the intersection of two realsets took 10.9 seconds on average, and new methods only took 0.018 seconds on average, union of five realsets, the original method took 0.052 seconds, and new methods only took 0.041 seconds.
+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time:
+|        |       |         |        |
+|--------|-------|---------|--------|
+|Function|Dataset|Scan-line|original|
+|union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|
+|intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|
 2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.
 3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.
 4. Implement `convex_hull` and `is_connected` in `RealSet`. 
``````




---

archive/issue_comments_518330.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSomewhere in the original code (__mul__ ?), the empty interval is set to (0, 0)\nReplying to [@mkoeppe](#comment:47):\n> \n> ```\n>      def __init__(self, lower, lower_closed, upper, upper_closed, check=True):\n>          \"\"\"\n>          Initialize ``self``.\n> [...]\n>              if (upper_closed and upper == infinity):\n>                  raise ValueError('interval cannot be closed at +oo')\n> +            # TODO: take care of the empty set case.\n> ```\n> \n> What do you have in mind there?",
    "created_at": "2022-08-04T19:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518330",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:49" align="right">comment:49</div>

Somewhere in the original code (__mul__ ?), the empty interval is set to (0, 0)
Replying to [@mkoeppe](#comment:47):
> 
> ```
>      def __init__(self, lower, lower_closed, upper, upper_closed, check=True):
>          """
>          Initialize ``self``.
> [...]
>              if (upper_closed and upper == infinity):
>                  raise ValueError('interval cannot be closed at +oo')
> +            # TODO: take care of the empty set case.
> ```
> 
> What do you have in mind there?



---

archive/issue_comments_518331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,12 +2,18 @@\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py\n - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py\n \n-1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time:\n+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time the random generator and timing test code can find in this [page](https://github.com/NicoleYueqiLi/sagemath/blob/main/RealsetTestTool.py):\n+\n |        |       |         |        |\n |--------|-------|---------|--------|\n |Function|Dataset|Scan-line|original|\n |union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|\n+|union|[1000 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_oo_ff.txt)|[0.004339](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_union.txt)|\n+|union|[1000 mixed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_co_ff.txt)|[0.005025](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed_open/res_union.txt)|\n |intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|\n+|intersection|[300 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_oo_ff.txt)|[0.001225](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_intersection.txt)|[4.359314](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_intersection.txt)|\n+|intersection|[300 mixed bounded interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_co_ff.txt)|[0.001537](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_closed_open/res_intersection.txt)|[4.407478](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_closed_open/res_intersection.txt)|\n+\n 2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.\n 3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.\n 4. Implement `convex_hull` and `is_connected` in `RealSet`. \n``````\n",
    "created_at": "2022-08-04T19:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518331",
    "user": "https://github.com/NicoleYueqiLi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,12 +2,18 @@
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/intervals.py
 - https://github.com/mkoeppe/cutgeneratingfunctionology/blob/master/cutgeneratingfunctionology/igp/fast_piecewise.py
 
-1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time:
+1. Extend `Union` and `Intersection` from pairwise computation to multiple realsets with scan-line algorithm. In order to compare the performance of the scan-line and orginial methods, we use different dataset to test the CPU time the random generator and timing test code can find in this [page](https://github.com/NicoleYueqiLi/sagemath/blob/main/RealsetTestTool.py):
+
 |        |       |         |        |
 |--------|-------|---------|--------|
 |Function|Dataset|Scan-line|original|
 |union|[1000 closed bounded disjoint interval ](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_cc_ff.txt)|[0.005281](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_union.txt)|[0.00749](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_union.txt)|
+|union|[1000 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_oo_ff.txt)|[0.004339](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_union.txt)|
+|union|[1000 mixed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_1000_1000_co_ff.txt)|[0.005025](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed_open/res_union.txt)|[0.006646](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed_open/res_union.txt)|
 |intersection|[300 closed bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_cc_ff.txt)|[0.001182](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_cloesed/res_intersection.txt)|[4.376048](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_cloesed/res_intersection.txt)|
+|intersection|[300 open bounded disjoint interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_oo_ff.txt)|[0.001225](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_open/res_intersection.txt)|[4.359314](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_open/res_intersection.txt)|
+|intersection|[300 mixed bounded interval](https://github.com/NicoleYueqiLi/sagemath/blob/main/testing_file/test_100_300_co_ff.txt)|[0.001537](https://github.com/NicoleYueqiLi/sagemath/blob/main/Scanline_res/disjoint_unsorted_closed_open/res_intersection.txt)|[4.407478](https://github.com/NicoleYueqiLi/sagemath/blob/main/Original_res/disjoint_unsorted_closed_open/res_intersection.txt)|
+
 2. We used scan-line methods to replace the original `normalize` and also make `normalize` optionally. After replacing it, we test it with 500,000 random intervals, the original methods take 151 second to construct it; scan-line methods only took 18 seconds.
 3. Replace `difference`,`symmetric_difference` and `are_pairwise_disjoint` with scan-line methods. We use 1000 realsets each realsets containing 1000 random intervals as the testing dataset. The original methods found the difference between two real sets took 11 seconds on average, and the new methods only took 0.021 seconds on average; symmetric_differnce also has a similar result.
 4. Implement `convex_hull` and `is_connected` in `RealSet`. 
``````




---

archive/issue_comments_518332.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nIs this syntax `self.intersection(0,1)` new? Is it really needed?\n\n```\n+        elif len(real_set_collection) == 2:\n+            a, b = real_set_collection\n+            # allow self.intersection(0,1) syntax\n+            try:\n+                a.n()\n+                b.n()\n+                sets.append(RealSet(a, b))\n+            except (AttributeError, ValueError, TypeError):\n+                sets.append(RealSet(a))\n+                sets.append(RealSet(b))\n+        else:\n```",
    "created_at": "2022-08-04T21:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518332",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">comment:51</div>

Is this syntax `self.intersection(0,1)` new? Is it really needed?

```
+        elif len(real_set_collection) == 2:
+            a, b = real_set_collection
+            # allow self.intersection(0,1) syntax
+            try:
+                a.n()
+                b.n()
+                sets.append(RealSet(a, b))
+            except (AttributeError, ValueError, TypeError):
+                sets.append(RealSet(a))
+                sets.append(RealSet(b))
+        else:
```



---

archive/issue_comments_518333.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI didn't like it either, since the new code spends a lot of effect to take care of that. I wanted to eliminate that. However, the original code allowed for it (contained doctests of that kind).\nReplying to [@mkoeppe](#comment:51):\n> Is this syntax `self.intersection(0,1)` new? Is it really needed?\n> \n> ```\n> +        elif len(real_set_collection) == 2:\n> +            a, b = real_set_collection\n> +            # allow self.intersection(0,1) syntax\n> +            try:\n> +                a.n()\n> +                b.n()\n> +                sets.append(RealSet(a, b))\n> +            except (AttributeError, ValueError, TypeError):\n> +                sets.append(RealSet(a))\n> +                sets.append(RealSet(b))\n> +        else:\n> ```",
    "created_at": "2022-08-04T21:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518333",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:52" align="right">comment:52</div>

I didn't like it either, since the new code spends a lot of effect to take care of that. I wanted to eliminate that. However, the original code allowed for it (contained doctests of that kind).
Replying to [@mkoeppe](#comment:51):
> Is this syntax `self.intersection(0,1)` new? Is it really needed?
> 
> ```
> +        elif len(real_set_collection) == 2:
> +            a, b = real_set_collection
> +            # allow self.intersection(0,1) syntax
> +            try:
> +                a.n()
> +                b.n()
> +                sets.append(RealSet(a, b))
> +            except (AttributeError, ValueError, TypeError):
> +                sets.append(RealSet(a))
> +                sets.append(RealSet(b))
> +        else:
> ```



---

archive/issue_comments_518334.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nOK, you are right, the old code did allow it. So we have to keep it.",
    "created_at": "2022-08-04T21:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518334",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

OK, you are right, the old code did allow it. So we have to keep it.



---

archive/issue_comments_518335.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\n\n``` \n-    def intersection(self, *other):\n+    def intersection(self, *real_set_collection):\n         \"\"\"\n```\n\nI think you can simplify it further by making it \n\n```\n     def intersection(*real_set_collection)\n```\n\nWhen used as a bound method, `RealSet(1, 3).intersection(RealSet(2, 4))`, the ``self`` would just be the first element of ``real_set_collection``.\n\nBut it could also be used as an unbound method `RealSet.intersection(RealSet(1, 3), RealSet(2,4))`, and you could also handle the case `RealSet.intersection()`, which should give the real line as the intersection over an empty family",
    "created_at": "2022-08-04T21:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518335",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>


``` 
-    def intersection(self, *other):
+    def intersection(self, *real_set_collection):
         """
```

I think you can simplify it further by making it 

```
     def intersection(*real_set_collection)
```

When used as a bound method, `RealSet(1, 3).intersection(RealSet(2, 4))`, the ``self`` would just be the first element of ``real_set_collection``.

But it could also be used as an unbound method `RealSet.intersection(RealSet(1, 3), RealSet(2,4))`, and you could also handle the case `RealSet.intersection()`, which should give the real line as the intersection over an empty family



---

archive/issue_comments_518336.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\n(Just a suggestion, it's fine as it)",
    "created_at": "2022-08-04T21:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518336",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

(Just a suggestion, it's fine as it)



---

archive/issue_comments_518337.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@yuan-zhou](#comment:46):\n> Does the overhead look acceptable on the above examples?\n\nYes, I think it's fine.\n\nMy guess is that it could be improved by a custom version of heapq with a fast path for near-trivial cases, or even cythonized.\n\nLet's keep this for a possible follow-up ticket.",
    "created_at": "2022-08-04T21:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518337",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@yuan-zhou](#comment:46):
> Does the overhead look acceptable on the above examples?

Yes, I think it's fine.

My guess is that it could be improved by a custom version of heapq with a fast path for near-trivial cases, or even cythonized.

Let's keep this for a possible follow-up ticket.



---

archive/issue_comments_518338.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-08-04T21:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518338",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_440657.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-04T21:53:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440657"
}
```



---

archive/issue_events_440658.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-04T21:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440658"
}
```



---

archive/issue_comments_518339.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThat's a good suggestion, but I incline to leave it as is on this ticket. The reason is the treatments for special cases such as `RealSet.union(RealSet(0,1)), RealSet.union((0,1)), RealSet.union(0, 1), and RealSet(0,1).union(1, 3)==RealSet.union(RealSet(0,1), 1, 3)` could be too complicated at the moment. Will discuss the deprecation of the use of `RealSet(0,1).union(1, 3)` on another ticket later.\nReplying to [@mkoeppe](#comment:54):\n> \n> ``` \n> -    def intersection(self, *other):\n> +    def intersection(self, *real_set_collection):\n>          \"\"\"\n> ```\n> \n> I think you can simplify it further by making it \n> \n> ```\n>      def intersection(*real_set_collection)\n> ```\n> \n> When used as a bound method, `RealSet(1, 3).intersection(RealSet(2, 4))`, the ``self`` would just be the first element of ``real_set_collection``.\n> \n> But it could also be used as an unbound method `RealSet.intersection(RealSet(1, 3), RealSet(2,4))`, and you could also handle the case `RealSet.intersection()`, which should give the real line as the intersection over an empty family \n> \n\n>",
    "created_at": "2022-08-04T21:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518339",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:58" align="right">comment:58</div>

That's a good suggestion, but I incline to leave it as is on this ticket. The reason is the treatments for special cases such as `RealSet.union(RealSet(0,1)), RealSet.union((0,1)), RealSet.union(0, 1), and RealSet(0,1).union(1, 3)==RealSet.union(RealSet(0,1), 1, 3)` could be too complicated at the moment. Will discuss the deprecation of the use of `RealSet(0,1).union(1, 3)` on another ticket later.
Replying to [@mkoeppe](#comment:54):
> 
> ``` 
> -    def intersection(self, *other):
> +    def intersection(self, *real_set_collection):
>          """
> ```
> 
> I think you can simplify it further by making it 
> 
> ```
>      def intersection(*real_set_collection)
> ```
> 
> When used as a bound method, `RealSet(1, 3).intersection(RealSet(2, 4))`, the ``self`` would just be the first element of ``real_set_collection``.
> 
> But it could also be used as an unbound method `RealSet.intersection(RealSet(1, 3), RealSet(2,4))`, and you could also handle the case `RealSet.intersection()`, which should give the real line as the intersection over an empty family 
> 

>



---

archive/issue_comments_518340.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThank you! Replying to [@mkoeppe](#comment:57):",
    "created_at": "2022-08-04T21:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518340",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:59" align="right">comment:59</div>

Thank you! Replying to [@mkoeppe](#comment:57):



---

archive/issue_comments_518341.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nShould `def normalize(intervals)` be `@`staticmethod",
    "created_at": "2022-08-05T16:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518341",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:60" align="right">comment:60</div>

Should `def normalize(intervals)` be `@`staticmethod



---

archive/issue_comments_518342.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nNever mind. Without `@`staticmethod, the following can apply.\n\n```\nsage: r = RealSet(RealSet(2, 6)[0], RealSet(4, 10)[0], normalized=True)\nsage: r\n(2, 6) \u222a (4, 10)\nsage: r.normalize()\n((2, 10),)\n```\n\nReplying to [@yuan-zhou](#comment:60):\n> Should `def normalize(intervals)` be `@`staticmethod",
    "created_at": "2022-08-05T16:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518342",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:61" align="right">comment:61</div>

Never mind. Without `@`staticmethod, the following can apply.

```
sage: r = RealSet(RealSet(2, 6)[0], RealSet(4, 10)[0], normalized=True)
sage: r
(2, 6) ∪ (4, 10)
sage: r.normalize()
((2, 10),)
```

Replying to [@yuan-zhou](#comment:60):
> Should `def normalize(intervals)` be `@`staticmethod



---

archive/issue_events_440659.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-06T07:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440659"
}
```



---

archive/issue_events_440660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "855db5865d2b91289b0e1864f119b182fc1f28db",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-06T07:44:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32181#event-440660"
}
```



---

archive/issue_comments_518343.json:
```json
{
    "body": "Changed branch from **[u/yzh/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/realset__faster_operations_by_scan_line__merging__techniques)** to **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**",
    "created_at": "2022-08-06T07:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32181",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32181#issuecomment-518343",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/yzh/realset__faster_operations_by_scan_line__merging__techniques](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/realset__faster_operations_by_scan_line__merging__techniques)** to **[`1ef7dd1`](https://github.com/sagemath/sagetrac-mirror/commit/1ef7dd16933411fd21e26f00c63a6ed9298b7646)**
