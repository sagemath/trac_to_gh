# Issue 32734: Remove .all import of infinity

archive/issues_032497.json:
```json
{
    "body": "... throughout the Sage library.\n\n`sage.rings` is becoming a namespace package in the course of modularization (#29705), so we are replacing imports from `sage.rings.all` throughout the Sage library.\n\n\nBranch/Commit: [97861cd5bc0c1a516c8a01434754f71ccbfc6f79](https://github.com/sagemath/sagetrac-mirror/commit/97861cd5bc0c1a516c8a01434754f71ccbfc6f79)\n\nReviewer: Kwankyu Lee\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32734\n\n",
    "closed_at": "2021-10-31T22:20:59Z",
    "created_at": "2021-10-21T05:28:38Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Remove .all import of infinity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32734",
    "user": "https://github.com/mkoeppe"
}
```
... throughout the Sage library.

`sage.rings` is becoming a namespace package in the course of modularization (#29705), so we are replacing imports from `sage.rings.all` throughout the Sage library.


Branch/Commit: [97861cd5bc0c1a516c8a01434754f71ccbfc6f79](https://github.com/sagemath/sagetrac-mirror/commit/97861cd5bc0c1a516c8a01434754f71ccbfc6f79)

Reviewer: Kwankyu Lee

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32734





---

archive/issue_comments_652377.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/remove__all_import_of_infinity\"",
    "created_at": "2021-10-21T05:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652377",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/remove__all_import_of_infinity"



---

archive/issue_comments_652378.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-10-21T05:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652378",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_652379.json:
```json
{
    "body": "Changing commit from \"\" to \"2446ec922d5ec0ed7bba5906a131ee3f65b185a2\"",
    "created_at": "2021-10-21T05:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652379",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "2446ec922d5ec0ed7bba5906a131ee3f65b185a2"



---

archive/issue_comments_652380.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-21T05:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652380",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_652381.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|\n|[2446ec9](https://github.com/sagemath/sagetrac-mirror/commit/2446ec922d5ec0ed7bba5906a131ee3f65b185a2)|`git grep -l 'import infinity *$' | xargs sed -i.bak 's/ sage.*all import infinity *$/ sage.rings.infinity import infinity/'`|",
    "created_at": "2021-10-21T05:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652381",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
|[2446ec9](https://github.com/sagemath/sagetrac-mirror/commit/2446ec922d5ec0ed7bba5906a131ee3f65b185a2)|`git grep -l 'import infinity *$' | xargs sed -i.bak 's/ sage.*all import infinity *$/ sage.rings.infinity import infinity/'`|



---

archive/issue_comments_652382.json:
```json
{
    "body": "Changing commit from \"2446ec922d5ec0ed7bba5906a131ee3f65b185a2\" to \"bc2d9700597861a712c7080a5a11ff8b3c2dbc71\"",
    "created_at": "2021-10-21T06:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2446ec922d5ec0ed7bba5906a131ee3f65b185a2" to "bc2d9700597861a712c7080a5a11ff8b3c2dbc71"



---

archive/issue_comments_652383.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9b83d92](https://github.com/sagemath/sagetrac-mirror/commit/9b83d92deedf1d87a781c2a94b621768d7edef0b)|`src/sage/combinat: Remove all-import of infinity`|\n|[0224b35](https://github.com/sagemath/sagetrac-mirror/commit/0224b35edb5890b844f91a4a46f8b1e0aae0ee5c)|`src/sage/rings/valuation: Remove all-import of infinity`|\n|[3c5750c](https://github.com/sagemath/sagetrac-mirror/commit/3c5750cbb82ab0482a0b56f8ed7f23df632115c2)|`src/sage/modular/abvar: Remove all-import of infinity`|\n|[aa797a5](https://github.com/sagemath/sagetrac-mirror/commit/aa797a5488d4110907d81e1a59d9a366c5f2ec8a)|`src/sage/rings/polynomial: Remove all-import of infinity`|\n|[bb3ca7a](https://github.com/sagemath/sagetrac-mirror/commit/bb3ca7a8e3a4867480b7bb58008420aca4fafc48)|`src/sage/modular/modform_hecketriangle: Remove all-import of infinity`|\n|[8e096f4](https://github.com/sagemath/sagetrac-mirror/commit/8e096f4766f59cfaea1e31b9b69f4c573683bace)|`src/sage/modular/modsym: Remove all-import of infinity`|\n|[58eb1f9](https://github.com/sagemath/sagetrac-mirror/commit/58eb1f9b9961521082f5c1c334d8f1a7abbfb87c)|`src/sage/rings/valuation/valuation_space.py: Remove all-import of infinity`|\n|[bc2d970](https://github.com/sagemath/sagetrac-mirror/commit/bc2d9700597861a712c7080a5a11ff8b3c2dbc71)|`src/sage/schemes/elliptic_curves/height.py: Remove all-import of infinity`|",
    "created_at": "2021-10-21T06:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9b83d92](https://github.com/sagemath/sagetrac-mirror/commit/9b83d92deedf1d87a781c2a94b621768d7edef0b)|`src/sage/combinat: Remove all-import of infinity`|
|[0224b35](https://github.com/sagemath/sagetrac-mirror/commit/0224b35edb5890b844f91a4a46f8b1e0aae0ee5c)|`src/sage/rings/valuation: Remove all-import of infinity`|
|[3c5750c](https://github.com/sagemath/sagetrac-mirror/commit/3c5750cbb82ab0482a0b56f8ed7f23df632115c2)|`src/sage/modular/abvar: Remove all-import of infinity`|
|[aa797a5](https://github.com/sagemath/sagetrac-mirror/commit/aa797a5488d4110907d81e1a59d9a366c5f2ec8a)|`src/sage/rings/polynomial: Remove all-import of infinity`|
|[bb3ca7a](https://github.com/sagemath/sagetrac-mirror/commit/bb3ca7a8e3a4867480b7bb58008420aca4fafc48)|`src/sage/modular/modform_hecketriangle: Remove all-import of infinity`|
|[8e096f4](https://github.com/sagemath/sagetrac-mirror/commit/8e096f4766f59cfaea1e31b9b69f4c573683bace)|`src/sage/modular/modsym: Remove all-import of infinity`|
|[58eb1f9](https://github.com/sagemath/sagetrac-mirror/commit/58eb1f9b9961521082f5c1c334d8f1a7abbfb87c)|`src/sage/rings/valuation/valuation_space.py: Remove all-import of infinity`|
|[bc2d970](https://github.com/sagemath/sagetrac-mirror/commit/bc2d9700597861a712c7080a5a11ff8b3c2dbc71)|`src/sage/schemes/elliptic_curves/height.py: Remove all-import of infinity`|



---

archive/issue_comments_652384.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[c658a23](https://github.com/sagemath/sagetrac-mirror/commit/c658a23ba1111a4a0b272b32eddae05a45cac162)|`src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py: Fix typo`|",
    "created_at": "2021-10-21T16:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[c658a23](https://github.com/sagemath/sagetrac-mirror/commit/c658a23ba1111a4a0b272b32eddae05a45cac162)|`src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py: Fix typo`|



---

archive/issue_comments_652385.json:
```json
{
    "body": "Changing commit from \"bc2d9700597861a712c7080a5a11ff8b3c2dbc71\" to \"c658a23ba1111a4a0b272b32eddae05a45cac162\"",
    "created_at": "2021-10-21T16:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bc2d9700597861a712c7080a5a11ff8b3c2dbc71" to "c658a23ba1111a4a0b272b32eddae05a45cac162"



---

archive/issue_comments_652386.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[97861cd](https://github.com/sagemath/sagetrac-mirror/commit/97861cd5bc0c1a516c8a01434754f71ccbfc6f79)|`src/sage/rings/valuation/valuation_space.py: Fix typo`|",
    "created_at": "2021-10-21T16:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[97861cd](https://github.com/sagemath/sagetrac-mirror/commit/97861cd5bc0c1a516c8a01434754f71ccbfc6f79)|`src/sage/rings/valuation/valuation_space.py: Fix typo`|



---

archive/issue_comments_652387.json:
```json
{
    "body": "Changing commit from \"c658a23ba1111a4a0b272b32eddae05a45cac162\" to \"97861cd5bc0c1a516c8a01434754f71ccbfc6f79\"",
    "created_at": "2021-10-21T16:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c658a23ba1111a4a0b272b32eddae05a45cac162" to "97861cd5bc0c1a516c8a01434754f71ccbfc6f79"



---

archive/issue_comments_652388.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+... throughout the Sage library.\n \n+`sage.rings` is becoming a namespace package in the course of modularization (#29705), so we are replacing imports from `sage.rings.all` throughout the Sage library.\n+\n``````\n",
    "created_at": "2021-10-21T20:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652388",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+... throughout the Sage library.
 
+`sage.rings` is becoming a namespace package in the course of modularization (#29705), so we are replacing imports from `sage.rings.all` throughout the Sage library.
+
``````




---

archive/issue_comments_652389.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe failure in `src/sage/rings/integer.pyx` is not from this ticket.",
    "created_at": "2021-10-21T20:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652389",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
The failure in `src/sage/rings/integer.pyx` is not from this ticket.



---

archive/issue_comments_652390.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhat is the new policy? Do we intend to remove all `all.py` eventually? If not, what should(can) remain in `all.py`? Or this is determined by how we split sage library? The last case is not good, I think... \n\nOr there won't be no change in `all.py` but we stop importing things from it in Sage library?",
    "created_at": "2021-10-28T04:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652390",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'></a>
What is the new policy? Do we intend to remove all `all.py` eventually? If not, what should(can) remain in `all.py`? Or this is determined by how we split sage library? The last case is not good, I think... 

Or there won't be no change in `all.py` but we stop importing things from it in Sage library?



---

archive/issue_comments_652391.json:
```json
{
    "body": "<a id='comment:8'></a>\nAll `all.py` are kept, for the purpose of populating the global interactive environment (`sage.all`).\n\nWe are just getting rid of imports from `sage.PAC.KAGE.all` within the Sage library. In particular, the imports from those packages `sage.PAC.KAGE` that become namespace packages, i.e., filled with modules from several distributions.",
    "created_at": "2021-10-28T04:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652391",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
All `all.py` are kept, for the purpose of populating the global interactive environment (`sage.all`).

We are just getting rid of imports from `sage.PAC.KAGE.all` within the Sage library. In particular, the imports from those packages `sage.PAC.KAGE` that become namespace packages, i.e., filled with modules from several distributions.



---

archive/issue_comments_652392.json:
```json
{
    "body": "<a id='comment:9'></a>\nI am asking because you keep lines like\n\n`from sage.rings.all import AA, QQbar, CC`",
    "created_at": "2021-10-28T04:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652392",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:9'></a>
I am asking because you keep lines like

`from sage.rings.all import AA, QQbar, CC`



---

archive/issue_comments_652393.json:
```json
{
    "body": "<a id='comment:10'></a>\nJust because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.",
    "created_at": "2021-10-28T04:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652393",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Just because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.



---

archive/issue_comments_652394.json:
```json
{
    "body": "<a id='comment:11'></a>\n`CC`, for example, is subject of #30741",
    "created_at": "2021-10-28T04:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652394",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
`CC`, for example, is subject of #30741



---

archive/issue_comments_652395.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [mkoeppe](#comment%3A10):\n> Just because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.\n\n\nOkay.\n\nMay I understand the new policy as that we never import from `.all` within the Sage library?",
    "created_at": "2021-10-28T04:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652395",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
Replying to [mkoeppe](#comment%3A10):
> Just because I can't do everything on the same ticket. These will also go away, or perhaps it is already done on another ticket.


Okay.

May I understand the new policy as that we never import from `.all` within the Sage library?



---

archive/issue_comments_652396.json:
```json
{
    "body": "<a id='comment:13'></a>\nThat would be a safe and easy to understand way to phrase a new policy.\n\nBut that policy would be broader than what is technically needed. For example, I have no plans to split up `sage.plot` into several distributions (`sage.plot` will remain an ordinary package with `__init__.py`). So it does not matter whether library code imports from `sage.plot.all` or `sage.plot.plot`.",
    "created_at": "2021-10-28T04:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652396",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
That would be a safe and easy to understand way to phrase a new policy.

But that policy would be broader than what is technically needed. For example, I have no plans to split up `sage.plot` into several distributions (`sage.plot` will remain an ordinary package with `__init__.py`). So it does not matter whether library code imports from `sage.plot.all` or `sage.plot.plot`.



---

archive/issue_comments_652397.json:
```json
{
    "body": "<a id='comment:14'></a>\nThese changes seem to increase startup time slightly. But I think we can allow this.",
    "created_at": "2021-10-28T04:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652397",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>
These changes seem to increase startup time slightly. But I think we can allow this.



---

archive/issue_comments_652398.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-28T04:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652398",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_652399.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kwankyu Lee\"",
    "created_at": "2021-10-28T04:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652399",
    "user": "https://github.com/kwankyu"
}
```

Changing reviewer from "" to "Kwankyu Lee"



---

archive/issue_comments_652400.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for reviewing!",
    "created_at": "2021-10-28T05:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652400",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Thanks for reviewing!



---

archive/issue_comments_652401.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/remove__all_import_of_infinity\" to \"97861cd5bc0c1a516c8a01434754f71ccbfc6f79\"",
    "created_at": "2021-10-31T22:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652401",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/remove__all_import_of_infinity" to "97861cd5bc0c1a516c8a01434754f71ccbfc6f79"



---

archive/issue_comments_652402.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-31T22:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32734#issuecomment-652402",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_097454.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-31T22:20:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32734",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32734#event-97454"
}
```
