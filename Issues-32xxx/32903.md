# Issue 32903: Improve getting rows and columns in dense integer matrices

archive/issues_032666.json:
```json
{
    "body": "Before:\n\n```\nsage: M = random_matrix(ZZ, 10)\nsage: %timeit M.row(3)\n2.48 \u00b5s \u00b1 6.84 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit M.column(3)\n2.49 \u00b5s \u00b1 6.26 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: M = random_matrix(ZZ, 100)\nsage: %timeit M.row(3)\n13.8 \u00b5s \u00b1 17.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit M.column(3)\n13.9 \u00b5s \u00b1 15.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\nAfter:\n\n```\nsage: M = random_matrix(ZZ, 10)\nsage: %timeit M.row(3)\n975 ns \u00b1 2.51 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: %timeit M.column(3)\n956 ns \u00b1 1.28 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: M = random_matrix(ZZ, 100)\nsage: %timeit M.row(3)\n7.36 \u00b5s \u00b1 7.26 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit M.column(3)\n7.37 \u00b5s \u00b1 8.25 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\nBranch/Commit: 52fcf0c5328363266c75ff0fe4b604dc30059d50\n\nReviewer: Michael Orlitzky\n\nAuthor: Jonathan Kliem\n\nDependencies: #32902\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32903\n\n",
    "closed_at": "2021-12-19T11:47:12Z",
    "created_at": "2021-11-19T09:24:07Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Improve getting rows and columns in dense integer matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32903",
    "user": "https://github.com/kliem"
}
```
Before:

```
sage: M = random_matrix(ZZ, 10)
sage: %timeit M.row(3)
2.48 µs ± 6.84 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit M.column(3)
2.49 µs ± 6.26 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: M = random_matrix(ZZ, 100)
sage: %timeit M.row(3)
13.8 µs ± 17.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit M.column(3)
13.9 µs ± 15.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

After:

```
sage: M = random_matrix(ZZ, 10)
sage: %timeit M.row(3)
975 ns ± 2.51 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: %timeit M.column(3)
956 ns ± 1.28 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: M = random_matrix(ZZ, 100)
sage: %timeit M.row(3)
7.36 µs ± 7.26 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit M.column(3)
7.37 µs ± 8.25 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

Branch/Commit: 52fcf0c5328363266c75ff0fe4b604dc30059d50

Reviewer: Michael Orlitzky

Author: Jonathan Kliem

Dependencies: #32902

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32903





---

archive/issue_comments_656182.json:
```json
{
    "body": "Changing branch from \"\" to \"public/32903\"",
    "created_at": "2021-11-19T09:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656182",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/32903"



---

archive/issue_comments_656183.json:
```json
{
    "body": "Changing commit from \"\" to \"b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50\"",
    "created_at": "2021-11-19T09:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656183",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50"



---

archive/issue_comments_656184.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[182ee47](https://github.com/sagemath/sagetrac-mirror/commit/182ee47f0418a11bf9f1f22e6ad58eb4618d003f)|`cache row_ambient_module of matrices`|\n|[5c32588](https://github.com/sagemath/sagetrac-mirror/commit/5c325888144e162ab6006f0a78bce9d88fd82ccf)|`use cached row and column module`|\n|[b4f8d74](https://github.com/sagemath/sagetrac-mirror/commit/b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50)|`implement row and column specialized for dense integer matrices`|",
    "created_at": "2021-11-19T09:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656184",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[182ee47](https://github.com/sagemath/sagetrac-mirror/commit/182ee47f0418a11bf9f1f22e6ad58eb4618d003f)|`cache row_ambient_module of matrices`|
|[5c32588](https://github.com/sagemath/sagetrac-mirror/commit/5c325888144e162ab6006f0a78bce9d88fd82ccf)|`use cached row and column module`|
|[b4f8d74](https://github.com/sagemath/sagetrac-mirror/commit/b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50)|`implement row and column specialized for dense integer matrices`|



---

archive/issue_comments_656185.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-19T09:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656185",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_656186.json:
```json
{
    "body": "<a id='comment:2'></a>\nI think this should be `ZZ`?\n\n```\nsage: m = matrix(QQ, 3, 2, [1, -2, 3, 4, -1, 0])\n```",
    "created_at": "2021-11-30T00:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656186",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:2'></a>
I think this should be `ZZ`?

```
sage: m = matrix(QQ, 3, 2, [1, -2, 3, 4, -1, 0])
```



---

archive/issue_comments_656187.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,14 +3,14 @@\n ```\n sage: M = random_matrix(ZZ, 10)\n sage: %timeit M.row(3)\n-4.86 \u00b5s \u00b1 22.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+2.48 \u00b5s \u00b1 6.84 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n sage: %timeit M.column(3)\n-4.76 \u00b5s \u00b1 19 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+2.49 \u00b5s \u00b1 6.26 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n sage: M = random_matrix(ZZ, 100)\n sage: %timeit M.row(3)\n-20.2 \u00b5s \u00b1 853 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+13.8 \u00b5s \u00b1 17.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n sage: %timeit M.column(3)\n-21.9 \u00b5s \u00b1 4.72 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n+13.9 \u00b5s \u00b1 15.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n ```\n \n After:\n``````\n",
    "created_at": "2021-11-30T08:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656187",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,14 +3,14 @@
 ```
 sage: M = random_matrix(ZZ, 10)
 sage: %timeit M.row(3)
-4.86 µs ± 22.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+2.48 µs ± 6.84 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 sage: %timeit M.column(3)
-4.76 µs ± 19 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+2.49 µs ± 6.26 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 sage: M = random_matrix(ZZ, 100)
 sage: %timeit M.row(3)
-20.2 µs ± 853 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+13.8 µs ± 17.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 sage: %timeit M.column(3)
-21.9 µs ± 4.72 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
+13.9 µs ± 15.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 ```
 
 After:
``````




---

archive/issue_comments_656188.json:
```json
{
    "body": "Changing commit from \"b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50\" to \"\"",
    "created_at": "2021-11-30T08:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656188",
    "user": "https://github.com/kliem"
}
```

Changing commit from "b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50" to ""



---

archive/issue_comments_656189.json:
```json
{
    "body": "Changing branch from \"public/32903\" to \"public/32903-reb\"",
    "created_at": "2021-11-30T08:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656189",
    "user": "https://github.com/kliem"
}
```

Changing branch from "public/32903" to "public/32903-reb"



---

archive/issue_comments_656190.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,12 +18,12 @@\n ```\n sage: M = random_matrix(ZZ, 10)\n sage: %timeit M.row(3)\n-1.04 \u00b5s \u00b1 1 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n+975 ns \u00b1 2.51 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n sage: %timeit M.column(3)\n-990 ns \u00b1 1.42 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n+956 ns \u00b1 1.28 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n sage: M = random_matrix(ZZ, 100)\n sage: %timeit M.row(3)\n-7.37 \u00b5s \u00b1 6.97 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+7.36 \u00b5s \u00b1 7.26 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n sage: %timeit M.column(3)\n-7.33 \u00b5s \u00b1 5.79 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+7.37 \u00b5s \u00b1 8.25 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n ```\n``````\n",
    "created_at": "2021-11-30T08:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656190",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,12 +18,12 @@
 ```
 sage: M = random_matrix(ZZ, 10)
 sage: %timeit M.row(3)
-1.04 µs ± 1 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
+975 ns ± 2.51 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
 sage: %timeit M.column(3)
-990 ns ± 1.42 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
+956 ns ± 1.28 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
 sage: M = random_matrix(ZZ, 100)
 sage: %timeit M.row(3)
-7.37 µs ± 6.97 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+7.36 µs ± 7.26 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 sage: %timeit M.column(3)
-7.33 µs ± 5.79 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+7.37 µs ± 8.25 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 ```
``````




---

archive/issue_comments_656191.json:
```json
{
    "body": "Changing commit from \"\" to \"52fcf0c5328363266c75ff0fe4b604dc30059d50\"",
    "created_at": "2021-11-30T08:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "52fcf0c5328363266c75ff0fe4b604dc30059d50"



---

archive/issue_comments_656192.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[a356ff1](https://github.com/sagemath/sagetrac-mirror/commit/a356ff1c9ecc2996821ce144ac1ed886e544b8cd)|`remark about code duplication`|\n|[313c645](https://github.com/sagemath/sagetrac-mirror/commit/313c645c723a9a1d9a15c6d2fb571de3108b8f4e)|`documentation`|\n|[e6188d0](https://github.com/sagemath/sagetrac-mirror/commit/e6188d02dacc78f3a594cad5925cccd8513483b2)|`optimization when obtaining FreeModule`|\n|[15d4e5b](https://github.com/sagemath/sagetrac-mirror/commit/15d4e5b87e0179a1662b6239a7d6ba84c37401b2)|`Merge branch 'public/32901' of git://trac.sagemath.org/sage into public/32901-reb`|\n|[5c32588](https://github.com/sagemath/sagetrac-mirror/commit/5c325888144e162ab6006f0a78bce9d88fd82ccf)|`use cached row and column module`|\n|[4c90648](https://github.com/sagemath/sagetrac-mirror/commit/4c9064874038f7765aeef8da26117d58658f8d0b)|`Merge branch 'public/32902' of git://trac.sagemath.org/sage into public/32902-reb`|\n|[77907fc](https://github.com/sagemath/sagetrac-mirror/commit/77907fcf31efd2be79b731790279723385ae4531)|`small optimizations`|\n|[b4f8d74](https://github.com/sagemath/sagetrac-mirror/commit/b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50)|`implement row and column specialized for dense integer matrices`|\n|[c490c8c](https://github.com/sagemath/sagetrac-mirror/commit/c490c8cdbf27dde952610445fec23fac807a5a1f)|`Merge branch 'public/32903' of git://trac.sagemath.org/sage into public/32903-reb`|\n|[52fcf0c](https://github.com/sagemath/sagetrac-mirror/commit/52fcf0c5328363266c75ff0fe4b604dc30059d50)|`fix doctest`|",
    "created_at": "2021-11-30T08:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[a356ff1](https://github.com/sagemath/sagetrac-mirror/commit/a356ff1c9ecc2996821ce144ac1ed886e544b8cd)|`remark about code duplication`|
|[313c645](https://github.com/sagemath/sagetrac-mirror/commit/313c645c723a9a1d9a15c6d2fb571de3108b8f4e)|`documentation`|
|[e6188d0](https://github.com/sagemath/sagetrac-mirror/commit/e6188d02dacc78f3a594cad5925cccd8513483b2)|`optimization when obtaining FreeModule`|
|[15d4e5b](https://github.com/sagemath/sagetrac-mirror/commit/15d4e5b87e0179a1662b6239a7d6ba84c37401b2)|`Merge branch 'public/32901' of git://trac.sagemath.org/sage into public/32901-reb`|
|[5c32588](https://github.com/sagemath/sagetrac-mirror/commit/5c325888144e162ab6006f0a78bce9d88fd82ccf)|`use cached row and column module`|
|[4c90648](https://github.com/sagemath/sagetrac-mirror/commit/4c9064874038f7765aeef8da26117d58658f8d0b)|`Merge branch 'public/32902' of git://trac.sagemath.org/sage into public/32902-reb`|
|[77907fc](https://github.com/sagemath/sagetrac-mirror/commit/77907fcf31efd2be79b731790279723385ae4531)|`small optimizations`|
|[b4f8d74](https://github.com/sagemath/sagetrac-mirror/commit/b4f8d74a8114af0a68f1dfcfa6f6f1f3ab017b50)|`implement row and column specialized for dense integer matrices`|
|[c490c8c](https://github.com/sagemath/sagetrac-mirror/commit/c490c8cdbf27dde952610445fec23fac807a5a1f)|`Merge branch 'public/32903' of git://trac.sagemath.org/sage into public/32903-reb`|
|[52fcf0c](https://github.com/sagemath/sagetrac-mirror/commit/52fcf0c5328363266c75ff0fe4b604dc30059d50)|`fix doctest`|



---

archive/issue_comments_656193.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-30T15:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656193",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_656194.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Michael Orlitzky\"",
    "created_at": "2021-11-30T15:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656194",
    "user": "https://github.com/orlitzky"
}
```

Changing reviewer from "" to "Michael Orlitzky"



---

archive/issue_comments_656195.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-19T11:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656195",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_656196.json:
```json
{
    "body": "Changing branch from \"public/32903-reb\" to \"52fcf0c5328363266c75ff0fe4b604dc30059d50\"",
    "created_at": "2021-12-19T11:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32903#issuecomment-656196",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/32903-reb" to "52fcf0c5328363266c75ff0fe4b604dc30059d50"



---

archive/issue_events_097831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-19T11:47:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32903",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32903#event-97831"
}
```
