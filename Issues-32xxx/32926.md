# Issue 32926: Features for latex packages

archive/issues_032689.json:
```json
{
    "body": "Add Features `LaTeXPackage` to detect presence of latex packages.\n\nCC:  @seblabbe @kwankyu\n\nReviewer: Kwankyu Lee, S\u00e9bastien Labb\u00e9\n\nAuthor: Matthias Koeppe\n\nBranch: e22c173e279cf55b7c5836ee0af32688422e043b\n\nDependencies: #32174\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32926\n\n",
    "closed_at": "2021-12-19T11:46:46Z",
    "created_at": "2021-11-24T01:36:22Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Features for latex packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32926",
    "user": "https://github.com/mkoeppe"
}
```
Add Features `LaTeXPackage` to detect presence of latex packages.

CC:  @seblabbe @kwankyu

Reviewer: Kwankyu Lee, Sébastien Labbé

Author: Matthias Koeppe

Branch: e22c173e279cf55b7c5836ee0af32688422e043b

Dependencies: #32174

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32926





---

archive/issue_comments_497967.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-24T02:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497967",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_497968.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2021-11-24T02:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497968",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_497969.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-25T11:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497969",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_497970.json:
```json
{
    "body": "<a id='comment:4'></a>When testing the feature, I get:\n\n```\nNameError: name 'FeatureNotPresentError' is not defined\n```\nan import is missing.",
    "created_at": "2021-11-25T11:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497970",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'></a>When testing the feature, I get:

```
NameError: name 'FeatureNotPresentError' is not defined
```
an import is missing.



---

archive/issue_comments_497971.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-25T18:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_497972.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-25T18:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497972",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_497973.json:
```json
{
    "body": "<a id='comment:8'></a>\n```diff\ndiff --git a/src/sage/features/latex.py b/src/sage/features/latex.py\nindex 7b95796be4..7bd8d72164 100644\n--- a/src/sage/features/latex.py\n+++ b/src/sage/features/latex.py\n@@ -147,7 +147,7 @@ class TeXFile(StaticFile):\n         sage: from sage.features.latex import TeXFile\n         sage: TeXFile('x', 'x.tex').is_present()  # optional: pdflatex\n         FeatureTestResult('x', True)\n-        sage: TeXFile('nonexisting', 'fajfhjdksf-nonexisting-file.tex').is_present()  # optional: pdflatex\n+        sage: TeXFile('nonexisting', 'xxxxxx-nonexisting-file.tex').is_present()  # optional - pdflatex\n         FeatureTestResult('nonexisting', False)\n     \"\"\"\n     def __init__(self, name, filename, **kwds):\n@@ -161,7 +161,7 @@ class TeXFile(StaticFile):\n \n             sage: from sage.features.latex import TeXFile\n             sage: feature = TeXFile('latex_class_article', 'article.cls')\n-            sage: feature.absolute_path()  # optional: pdflatex\n+            sage: feature.absolute_path()  # optional - pdflatex\n             '.../latex/base/article.cls'\n         \"\"\"\n         from subprocess import run, CalledProcessError, PIPE\n@@ -183,7 +183,7 @@ class LaTeXPackage(TeXFile):\n     EXAMPLES::\n \n         sage: from sage.features.latex import LaTeXPackage\n-        sage: LaTeXPackage('graphics').is_present()  # optional: pdflatex\n+        sage: LaTeXPackage('graphics').is_present()  # optional - pdflatex\n         FeatureTestResult('latex_package_graphics', True)\n     \"\"\"\n     @staticmethod\n```\n\nOtherwise, looks good to me.",
    "created_at": "2021-11-30T12:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497973",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
```diff
diff --git a/src/sage/features/latex.py b/src/sage/features/latex.py
index 7b95796be4..7bd8d72164 100644
--- a/src/sage/features/latex.py
+++ b/src/sage/features/latex.py
@@ -147,7 +147,7 @@ class TeXFile(StaticFile):
         sage: from sage.features.latex import TeXFile
         sage: TeXFile('x', 'x.tex').is_present()  # optional: pdflatex
         FeatureTestResult('x', True)
-        sage: TeXFile('nonexisting', 'fajfhjdksf-nonexisting-file.tex').is_present()  # optional: pdflatex
+        sage: TeXFile('nonexisting', 'xxxxxx-nonexisting-file.tex').is_present()  # optional - pdflatex
         FeatureTestResult('nonexisting', False)
     """
     def __init__(self, name, filename, **kwds):
@@ -161,7 +161,7 @@ class TeXFile(StaticFile):
 
             sage: from sage.features.latex import TeXFile
             sage: feature = TeXFile('latex_class_article', 'article.cls')
-            sage: feature.absolute_path()  # optional: pdflatex
+            sage: feature.absolute_path()  # optional - pdflatex
             '.../latex/base/article.cls'
         """
         from subprocess import run, CalledProcessError, PIPE
@@ -183,7 +183,7 @@ class LaTeXPackage(TeXFile):
     EXAMPLES::
 
         sage: from sage.features.latex import LaTeXPackage
-        sage: LaTeXPackage('graphics').is_present()  # optional: pdflatex
+        sage: LaTeXPackage('graphics').is_present()  # optional - pdflatex
         FeatureTestResult('latex_package_graphics', True)
     """
     @staticmethod
```

Otherwise, looks good to me.



---

archive/issue_comments_497974.json:
```json
{
    "body": "<a id='comment:10'></a>I agree with these changes, please push them to the ticket",
    "created_at": "2021-11-30T17:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497974",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>I agree with these changes, please push them to the ticket



---

archive/issue_comments_497975.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-01T00:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_497976.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-01T00:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497976",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_497977.json:
```json
{
    "body": "<a id='comment:13'></a>Okay. Done.",
    "created_at": "2021-12-01T00:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497977",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>Okay. Done.



---

archive/issue_comments_497978.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-12-01T00:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497978",
    "user": "https://github.com/kwankyu"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_497979.json:
```json
{
    "body": "<a id='comment:15'></a>Let's wait for the patchbot run once more.",
    "created_at": "2021-12-01T00:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497979",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'></a>Let's wait for the patchbot run once more.



---

archive/issue_comments_497980.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-01T00:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497980",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_497981.json:
```json
{
    "body": "<a id='comment:16'></a>There are latex related failures on the patchbot, that may be caused by this ticket:\n\n```\nUsing --optional=build,debian,dochtml,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,imagemagick,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,mcqd,meataxe,pandoc,pdf2svg,pdflatex,plantri,pynormaliz,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.plot,sage.rings.number_field,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,tdlib,xelatex\n...\n----------------------------------------------------------------------\nsage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/plot/plot.py  # 89 doctests failed\nsage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/plot/graphics.py  # 63 doctests failed\nsage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/misc/latex.py  # 1 doctest failed\n----------------------------------------------------------------------\nFeatures detected for doctesting: 4ti2,dvipng,ffmpeg,graphviz,latex,latex_package_tkz_graph,lrslib,lualatex,pdflatex,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.plot,sage.rings.number_field,sage.rings.real_double,sage.symbolic,xelatex\n```\n\nin particular:\n\n```\nsage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/misc/latex.py\n**********************************************************************\nFile \"src/sage/misc/latex.py\", line 1968, in sage.misc.latex.?\nFailed example:\n    png(ZZ[x], os.path.join(SAGE_TMP, \"zz.png\")) # random, optional - latex\nException raised:\n    Traceback (most recent call last):\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.latex.?[1]>\", line 1, in <module>\n        png(ZZ[x], os.path.join(SAGE_TMP, \"zz.png\")) # random, optional - latex\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/latex.py\", line 1990, in png\n        e = _run_latex_(tex_file, density=density, debug=debug,\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/latex.py\", line 755, in _run_latex_\n        ImageMagick().require()\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/features/__init__.py\", line 205, in require\n        raise FeatureNotPresentError(self, presence.reason, presence.resolution)\n    sage.features.FeatureNotPresentError: imagemagick is not available.\n    Executable 'convert' not found on PATH.\n    To install imagemagick using the debian package manager, you can try to run:\n    !sudo apt-get update \n      !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev\n    To install imagemagick using the Sage package manager, you can try to run:\n      !sage -i _recommended\n    No equivalent system packages for pip are known to Sage.\n    Further installation instructions might be available at https://www.imagemagick.org/.\n**********************************************************************\n1 item had failures:\n   1 of  19 in sage.misc.latex.?\n    [257 tests, 1 failure, 5.09 s]\n```\n\nAlso notice:\n\n```\nTo install imagemagick using the debian package manager, you can try to run:\n    !sudo apt-get update \n    !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev\n```",
    "created_at": "2021-12-01T07:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497981",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>There are latex related failures on the patchbot, that may be caused by this ticket:

```
Using --optional=build,debian,dochtml,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,imagemagick,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,mcqd,meataxe,pandoc,pdf2svg,pdflatex,plantri,pynormaliz,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.plot,sage.rings.number_field,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,tdlib,xelatex
...
----------------------------------------------------------------------
sage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/plot/plot.py  # 89 doctests failed
sage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/plot/graphics.py  # 63 doctests failed
sage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/misc/latex.py  # 1 doctest failed
----------------------------------------------------------------------
Features detected for doctesting: 4ti2,dvipng,ffmpeg,graphviz,latex,latex_package_tkz_graph,lrslib,lualatex,pdflatex,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.plot,sage.rings.number_field,sage.rings.real_double,sage.symbolic,xelatex
```

in particular:

```
sage -t --long --random-seed=178499729190442340371727389632049879918 src/sage/misc/latex.py
**********************************************************************
File "src/sage/misc/latex.py", line 1968, in sage.misc.latex.?
Failed example:
    png(ZZ[x], os.path.join(SAGE_TMP, "zz.png")) # random, optional - latex
Exception raised:
    Traceback (most recent call last):
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.latex.?[1]>", line 1, in <module>
        png(ZZ[x], os.path.join(SAGE_TMP, "zz.png")) # random, optional - latex
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/latex.py", line 1990, in png
        e = _run_latex_(tex_file, density=density, debug=debug,
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/latex.py", line 755, in _run_latex_
        ImageMagick().require()
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/features/__init__.py", line 205, in require
        raise FeatureNotPresentError(self, presence.reason, presence.resolution)
    sage.features.FeatureNotPresentError: imagemagick is not available.
    Executable 'convert' not found on PATH.
    To install imagemagick using the debian package manager, you can try to run:
    !sudo apt-get update 
      !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev
    To install imagemagick using the Sage package manager, you can try to run:
      !sage -i _recommended
    No equivalent system packages for pip are known to Sage.
    Further installation instructions might be available at https://www.imagemagick.org/.
**********************************************************************
1 item had failures:
   1 of  19 in sage.misc.latex.?
    [257 tests, 1 failure, 5.09 s]
```

Also notice:

```
To install imagemagick using the debian package manager, you can try to run:
    !sudo apt-get update 
    !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev
```



---

archive/issue_comments_497982.json:
```json
{
    "body": "<a id='comment:17'></a>This failure in testing `src/sage/misc/latex.py` is probably already visible with #32174.",
    "created_at": "2021-12-01T07:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497982",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>This failure in testing `src/sage/misc/latex.py` is probably already visible with #32174.



---

archive/issue_comments_497983.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-01T07:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497983",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_497984.json:
```json
{
    "body": "<a id='comment:19'></a>Not sure what's going on in the other failures in `sage.plot`.",
    "created_at": "2021-12-01T08:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497984",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Not sure what's going on in the other failures in `sage.plot`.



---

archive/issue_comments_497985.json:
```json
{
    "body": "<a id='comment:20'></a>(*This comment was moved to* #32174#comment:56)",
    "created_at": "2021-12-01T10:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497985",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:20'></a>(*This comment was moved to* #32174#comment:56)



---

archive/issue_comments_497986.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:17 mkoeppe]:\n> This failure in testing `src/sage/misc/latex.py` is probably already visible with #32174.\n\n\nOk, so I confirm that the 89 + 63 failures are already seen by the patchbot `labri-vindelecroix-1` while testing #32174, so it is not related to the current ticket.",
    "created_at": "2021-12-01T10:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497986",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>Replying to [comment:17 mkoeppe]:
> This failure in testing `src/sage/misc/latex.py` is probably already visible with #32174.


Ok, so I confirm that the 89 + 63 failures are already seen by the patchbot `labri-vindelecroix-1` while testing #32174, so it is not related to the current ticket.



---

archive/issue_comments_497987.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-12-01T18:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497987",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_497988.json:
```json
{
    "body": "<a id='comment:23'></a>rebased on top of updated #32174",
    "created_at": "2021-12-01T18:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497988",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>rebased on top of updated #32174



---

archive/issue_comments_497989.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:16 slabbe]:\n> Also notice:\n> \n> \n> ```\n> To install imagemagick using the debian package manager, you can try to run:\n>     !sudo apt-get update \n>     !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev\n> ```\n\n\nSee #32956 to deal with that.",
    "created_at": "2021-12-01T21:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497989",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'></a>Replying to [comment:16 slabbe]:
> Also notice:
> 
> 
> ```
> To install imagemagick using the debian package manager, you can try to run:
>     !sudo apt-get update 
>     !sudo apt-get install  texlive-latex-extra texlive-xetex latexmk dvipng default-jdk ffmpeg libavdevice-dev
> ```


See #32956 to deal with that.



---

archive/issue_comments_497990.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-03T05:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497990",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_497991.json:
```json
{
    "body": "<a id='comment:25'></a>No more thing to do here. Right?",
    "created_at": "2021-12-03T05:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497991",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:25'></a>No more thing to do here. Right?



---

archive/issue_comments_497992.json:
```json
{
    "body": "<a id='comment:26'></a>Maybe a short ticket description?\n\nE.g. is there a meta-ticket or documentation page\nor release tour item about \"features\"?\n\nOther than that, this ticket depends on #32174\nwhich still needs review.",
    "created_at": "2021-12-03T05:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497992",
    "user": "https://github.com/slel"
}
```

<a id='comment:26'></a>Maybe a short ticket description?

E.g. is there a meta-ticket or documentation page
or release tour item about "features"?

Other than that, this ticket depends on #32174
which still needs review.



---

archive/issue_comments_497993.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-12-03T06:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497993",
    "user": "https://github.com/kwankyu"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_497994.json:
```json
{
    "body": "<a id='comment:27'></a>Okay then.",
    "created_at": "2021-12-03T06:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497994",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'></a>Okay then.



---

archive/issue_comments_497995.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Add Features \\`LaTeXPackage\\` to detect presence of latex packages.\n \n Author: Matthias Koeppe\n \n```\n",
    "created_at": "2021-12-03T07:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497995",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Add Features \`LaTeXPackage\` to detect presence of latex packages.
 
 Author: Matthias Koeppe
 
```




---

archive/issue_comments_497996.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-03T07:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497996",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_497997.json:
```json
{
    "body": "<a id='comment:30'></a>As the dependency #32174 just got positive review.",
    "created_at": "2021-12-03T08:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497997",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:30'></a>As the dependency #32174 just got positive review.



---

archive/issue_comments_497998.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-03T08:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497998",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_497999.json:
```json
{
    "body": "<a id='comment:31'></a>\n```\nsage -t --long --warn-long 41.2 --random-seed=90818346224792411697676027482246961463 src/sage/doctest/external.py\n**********************************************************************\nFile \"src/sage/doctest/external.py\", line 379, in sage.doctest.external.AvailableSoftware\nFailed example:\n    external_software\nExpected:\n    ['cplex',\n     'gurobi',\n     'internet',\n     'latex',\n     'lualatex',\n     'macaulay2',\n     'magma',\n     'maple',\n     'mathematica',\n     'matlab',\n     'octave',\n     'pdflatex',\n     'scilab',\n     'xelatex']\nGot:\n    ['cplex',\n     'gurobi',\n     'internet',\n     'latex',\n     'latex_package_tkz_graph',\n     'lualatex',\n     'macaulay2',\n     'magma',\n     'maple',\n     'mathematica',\n     'matlab',\n     'octave',\n     'pdflatex',\n     'scilab',\n     'xelatex']\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.doctest.external.AvailableSoftware\n    [40 tests, 1 failure, 0.02 s]\n```",
    "created_at": "2021-12-12T15:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-497999",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>
```
sage -t --long --warn-long 41.2 --random-seed=90818346224792411697676027482246961463 src/sage/doctest/external.py
**********************************************************************
File "src/sage/doctest/external.py", line 379, in sage.doctest.external.AvailableSoftware
Failed example:
    external_software
Expected:
    ['cplex',
     'gurobi',
     'internet',
     'latex',
     'lualatex',
     'macaulay2',
     'magma',
     'maple',
     'mathematica',
     'matlab',
     'octave',
     'pdflatex',
     'scilab',
     'xelatex']
Got:
    ['cplex',
     'gurobi',
     'internet',
     'latex',
     'latex_package_tkz_graph',
     'lualatex',
     'macaulay2',
     'magma',
     'maple',
     'mathematica',
     'matlab',
     'octave',
     'pdflatex',
     'scilab',
     'xelatex']
**********************************************************************
1 item had failures:
   1 of   3 in sage.doctest.external.AvailableSoftware
    [40 tests, 1 failure, 0.02 s]
```



---

archive/issue_comments_498000.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-12-12T15:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-498000",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_498001.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-12T17:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-498001",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_498002.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-12-12T17:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-498002",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_087011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-19T11:46:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32926#event-87011"
}
```



---

archive/issue_comments_498003.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-19T11:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32926#issuecomment-498003",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
