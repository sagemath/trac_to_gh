# Issue 32605: Update polymake to 4.5, change from experimental to optional

archive/issues_032368.json:
```json
{
    "body": "https://polymake.org/doku.php/news/release_4_5 (2021-09-29)\n\nPrevious update: 4.4 (#27745)\n\n\nCC:  @kliem @tscrim tmonteil simonking\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nBranch: 015b89911e606112327f57949e3bce7af1a0595b\n\nDependencies: #31163\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32605\n\n",
    "closed_at": "2021-10-13T22:50:29Z",
    "created_at": "2021-10-01T01:26:42Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Update polymake to 4.5, change from experimental to optional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32605",
    "user": "https://github.com/mkoeppe"
}
```
https://polymake.org/doku.php/news/release_4_5 (2021-09-29)

Previous update: 4.4 (#27745)


CC:  @kliem @tscrim tmonteil simonking

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Branch: 015b89911e606112327f57949e3bce7af1a0595b

Dependencies: #31163

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32605





---

archive/issue_comments_649497.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+https://polymake.org/doku.php/news/release_4_5 (2021-09-29)\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-10-01T01:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649497",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+https://polymake.org/doku.php/news/release_4_5 (2021-09-29)
 
 Comment: 1
 
``````




---

archive/issue_comments_649498.json:
```json
{
    "body": "<a id='comment:2'></a>\n```\n[polymake-4.5] checking perl module Term::ReadKey ... failed\n[polymake-4.5] WARNING: perl module Term::ReadKey required for polymake not found on your machine.\n[polymake-4.5]          Please be sure to install it prior to starting to use polymake. \n[}}}",
    "created_at": "2021-10-01T02:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649498",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
```
[polymake-4.5] checking perl module Term::ReadKey ... failed
[polymake-4.5] WARNING: perl module Term::ReadKey required for polymake not found on your machine.
[polymake-4.5]          Please be sure to install it prior to starting to use polymake. 
[}}}



---

archive/issue_comments_649499.json:
```json
{
    "body": "<a id='comment:4'></a>\n```\nsage -t --random-seed=0 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 2185, in sage.interfaces.polymake.PolymakeExpect._eval_line\nFailed example:\n    c                                 # optional - polymake\nExpected:\n    cube of dimension 15\nGot:\n    <repr(<sage.interfaces.polymake.PolymakeElement at 0x4141d9f80>) failed: sage.interfaces.polymake.PolymakeError: Can't locate object method \"description\" via package \"1\" (perhaps you forgot to load \"1\"?)>\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 2187, in sage.interfaces.polymake.PolymakeExpect._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake\nExpected:\n    32768\nGot:\n    Member function 'N_VERTICES' of 1 object\n**********************************************************************\n```",
    "created_at": "2021-10-01T04:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649499",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
```
sage -t --random-seed=0 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 2185, in sage.interfaces.polymake.PolymakeExpect._eval_line
Failed example:
    c                                 # optional - polymake
Expected:
    cube of dimension 15
Got:
    <repr(<sage.interfaces.polymake.PolymakeElement at 0x4141d9f80>) failed: sage.interfaces.polymake.PolymakeError: Can't locate object method "description" via package "1" (perhaps you forgot to load "1"?)>
**********************************************************************
File "src/sage/interfaces/polymake.py", line 2187, in sage.interfaces.polymake.PolymakeExpect._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake
Expected:
    32768
Got:
    Member function 'N_VERTICES' of 1 object
**********************************************************************
```



---

archive/issue_comments_649500.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/update_polymake_to_4_5\"",
    "created_at": "2021-10-01T04:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649500",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/update_polymake_to_4_5"



---

archive/issue_comments_649501.json:
```json
{
    "body": "Changing commit from \"\" to \"bcfe1634895aa509599ed5d0ddb214703c9cff3c\"",
    "created_at": "2021-10-01T04:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649501",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "bcfe1634895aa509599ed5d0ddb214703c9cff3c"



---

archive/issue_comments_649502.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+https://polymake.org/doku.php/news/release_4_5 (2021-09-29)\n+\n+Previous update: 4.4 (#27745)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-10-01T04:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649502",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+https://polymake.org/doku.php/news/release_4_5 (2021-09-29)
+
+Previous update: 4.4 (#27745)
 
 
 Comment: 1
``````




---

archive/issue_comments_649503.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-10-01T04:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649503",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_649504.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2021-10-01T04:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649504",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_649505.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-01T04:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649505",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_649506.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:4 mkoeppe]:\n> {{{\n> sage -t --random-seed=0 src/sage/interfaces/polymake.py\n> **********************************************************************\n> File \"src/sage/interfaces/polymake.py\", line 2187, in sage.interfaces.polymake.PolymakeExpect._eval_line\n> Failed example:\n>     c.N_VERTICES                      # optional - polymake\n> Expected:\n>     32768\n> Got:\n>     Member function 'N_VERTICES' of 1 object\n> **********************************************************************\n> }}}\n\n\nThis one (with the deprecated pexpect-based interface) we already saw in the previous upgrade ticket, #27745#comment:69",
    "created_at": "2021-10-01T04:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649506",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Replying to [comment:4 mkoeppe]:
> {{{
> sage -t --random-seed=0 src/sage/interfaces/polymake.py
> **********************************************************************
> File "src/sage/interfaces/polymake.py", line 2187, in sage.interfaces.polymake.PolymakeExpect._eval_line
> Failed example:
>     c.N_VERTICES                      # optional - polymake
> Expected:
>     32768
> Got:
>     Member function 'N_VERTICES' of 1 object
> **********************************************************************
> }}}


This one (with the deprecated pexpect-based interface) we already saw in the previous upgrade ticket, #27745#comment:69



---

archive/issue_comments_649507.json:
```json
{
    "body": "<a id='comment:8'></a>If we are having a test failure like that, then we can't upgrade this to an optional. Or is it still marked as `# known bug`?",
    "created_at": "2021-10-01T04:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649507",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>If we are having a test failure like that, then we can't upgrade this to an optional. Or is it still marked as `# known bug`?



---

archive/issue_comments_649508.json:
```json
{
    "body": "<a id='comment:9'></a>Right, we had marked some of the failing or non-robust tests `optional - polymake_expect`.\nI'll mark the ones that failed this time in the same way.",
    "created_at": "2021-10-01T04:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649508",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Right, we had marked some of the failing or non-robust tests `optional - polymake_expect`.
I'll mark the ones that failed this time in the same way.



---

archive/issue_comments_649509.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-01T04:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649510.json:
```json
{
    "body": "Changing commit from \"bcfe1634895aa509599ed5d0ddb214703c9cff3c\" to \"9d2674b8d443f0524f60f0777c59775cc6fb658e\"",
    "created_at": "2021-10-01T04:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bcfe1634895aa509599ed5d0ddb214703c9cff3c" to "9d2674b8d443f0524f60f0777c59775cc6fb658e"



---

archive/issue_comments_649511.json:
```json
{
    "body": "<a id='comment:11'></a>Okay, that will be good.\n\nThe only other thing I am not sure about with making this optional is the perl dependencies. It should be okay, but I feel like we should just double check on sage-devel about this.",
    "created_at": "2021-10-01T06:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649511",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>Okay, that will be good.

The only other thing I am not sure about with making this optional is the perl dependencies. It should be okay, but I feel like we should just double check on sage-devel about this.



---

archive/issue_comments_649512.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31163\"",
    "created_at": "2021-10-01T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649512",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#31163"



---

archive/issue_comments_649513.json:
```json
{
    "body": "Changing commit from \"9d2674b8d443f0524f60f0777c59775cc6fb658e\" to \"8c8e1c43a295228ecc3efd553df66507873727c3\"",
    "created_at": "2021-10-01T17:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9d2674b8d443f0524f60f0777c59775cc6fb658e" to "8c8e1c43a295228ecc3efd553df66507873727c3"



---

archive/issue_comments_649514.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-01T17:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649515.json:
```json
{
    "body": "<a id='comment:14'></a>I'd say the Perl dependencies are just like other dummy packages that we have that can only be installed using system packages. For example: `pandoc`\n\nI've now merged #31163, which gives better system package info when someone ignores the advice issued by `configure` and attempts to install `perl_cpan_polymake_prereq` (directly or as a dependency of `polymake`).",
    "created_at": "2021-10-01T17:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649515",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>I'd say the Perl dependencies are just like other dummy packages that we have that can only be installed using system packages. For example: `pandoc`

I've now merged #31163, which gives better system package info when someone ignores the advice issued by `configure` and attempts to install `perl_cpan_polymake_prereq` (directly or as a dependency of `polymake`).



---

archive/issue_comments_649516.json:
```json
{
    "body": "Changing commit from \"8c8e1c43a295228ecc3efd553df66507873727c3\" to \"015b89911e606112327f57949e3bce7af1a0595b\"",
    "created_at": "2021-10-01T17:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8c8e1c43a295228ecc3efd553df66507873727c3" to "015b89911e606112327f57949e3bce7af1a0595b"



---

archive/issue_comments_649517.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-01T17:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649518.json:
```json
{
    "body": "<a id='comment:16'></a>Okay, then let it be so.",
    "created_at": "2021-10-02T00:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649518",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Okay, then let it be so.



---

archive/issue_comments_649519.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-10-02T00:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649519",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_649520.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-02T00:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649520",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_649521.json:
```json
{
    "body": "<a id='comment:17'></a>Thank you!",
    "created_at": "2021-10-02T00:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Thank you!



---

archive/issue_events_086406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-13T22:50:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32605#event-86406"
}
```



---

archive/issue_comments_649522.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_polymake_to_4_5\" to \"015b89911e606112327f57949e3bce7af1a0595b\"",
    "created_at": "2021-10-13T22:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649522",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/update_polymake_to_4_5" to "015b89911e606112327f57949e3bce7af1a0595b"



---

archive/issue_comments_649523.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-13T22:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649523",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_649524.json:
```json
{
    "body": "<a id='comment:19'></a>On #31527 I found that `jupymake` must be installed if `polymake` is, so dependencies aren't set right here.",
    "created_at": "2021-10-22T09:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649524",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>On #31527 I found that `jupymake` must be installed if `polymake` is, so dependencies aren't set right here.



---

archive/issue_comments_649525.json:
```json
{
    "body": "Changing commit from \"015b89911e606112327f57949e3bce7af1a0595b\" to \"\"",
    "created_at": "2021-10-22T09:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32605#issuecomment-649525",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "015b89911e606112327f57949e3bce7af1a0595b" to ""
