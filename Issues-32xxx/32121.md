# Issue 32121: Generalize MapCombinatorialClass to ImageSubobject/ImageSet, add method Map.image

archive/issues_031884.json:
```json
{
    "body": "`EnumeratedSets.ParentMethods.map` uses `MapCombinatorialClass`.\n\n`map`'s docstring explains that that class needs to be refactored to use categories.\n\nPart of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)\n\nSee also: \n- #31653#comment:1 for a discussion of existing `image` and `pushforward` methods of maps.\n\n- #24176\n\n\n\nCC:  @tscrim @fchapoton @roed314 @mwageringel\n\nBranch/Commit: 038e354711832119926df56e411759d44f252d80\n\nReviewer: Travis Scrimshaw, Matthias Koeppe\n\nAuthor: Matthias Koeppe, Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32121\n\n",
    "closed_at": "2022-02-27T22:00:43Z",
    "created_at": "2021-07-04T02:54:05Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Generalize MapCombinatorialClass to ImageSubobject/ImageSet, add method Map.image",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32121",
    "user": "https://github.com/mkoeppe"
}
```
`EnumeratedSets.ParentMethods.map` uses `MapCombinatorialClass`.

`map`'s docstring explains that that class needs to be refactored to use categories.

Part of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)

See also: 
- #31653#comment:1 for a discussion of existing `image` and `pushforward` methods of maps.

- #24176



CC:  @tscrim @fchapoton @roed314 @mwageringel

Branch/Commit: 038e354711832119926df56e411759d44f252d80

Reviewer: Travis Scrimshaw, Matthias Koeppe

Author: Matthias Koeppe, Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32121





---

archive/issue_comments_486441.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,9 @@\n `map`'s docstring explains that that class needs to be refactored to use categories.\n \n Part of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)\n+\n+See also: #24176\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-07-04T02:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486441",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,9 @@
 `map`'s docstring explains that that class needs to be refactored to use categories.
 
 Part of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)
+
+See also: #24176
+
 
 Comment: 1
 
``````




---

archive/issue_comments_486442.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+`EnumeratedSets.ParentMethods.map` uses `MapCombinatorialClass`.\n+\n+`map`'s docstring explains that that class needs to be refactored to use categories.\n+\n+Part of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)\n+\n+See also: \n+- #31653#comment:1 for a discussion of existing `image` and `pushforward` methods of maps.\n+\n+- #24176\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-04T03:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486442",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,14 @@
+`EnumeratedSets.ParentMethods.map` uses `MapCombinatorialClass`.
+
+`map`'s docstring explains that that class needs to be refactored to use categories.
+
+Part of #12913 (Meta-ticket: Deprecate `CombinatorialClass` in favor of the `EnumeratedSet`'s categories)
+
+See also: 
+- #31653#comment:1 for a discussion of existing `image` and `pushforward` methods of maps.
+
+- #24176
+
 
 
 Comment: 1
``````




---

archive/issue_comments_486443.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T19:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486444.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-07-04T21:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_486445.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T21:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486446.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T21:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486447.json:
```json
{
    "body": "<a id='comment:10'></a>Here's an attempt",
    "created_at": "2021-07-04T21:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Here's an attempt



---

archive/issue_comments_486448.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T22:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486449.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T23:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486450.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T03:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486451.json:
```json
{
    "body": "<a id='comment:17'></a>Help with extending the doctests with examples relevant for combinatorics and algebra would be very welcome.",
    "created_at": "2021-07-06T05:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Help with extending the doctests with examples relevant for combinatorics and algebra would be very welcome.



---

archive/issue_comments_486452.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-18T19:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486452",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_486453.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-19T02:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486454.json:
```json
{
    "body": "<a id='comment:20'></a>Sorry for being a bit slow to get to this.\n\nThis class is not so widely used within the codebase. I can only find:\n\n- combinat/set_partition_ordered.py: `fatter()`\n- combinat/root_systems/root_lattice_realizations.py: `negative_roots()`\n- combinat/composition.py: `finer()` and `fatter()`\n- combinat/free_module.py: The indices for the tensor product of CFMs\n\nSo if it works fine for these files, then it is a full replacement. These also are fairly extensively tested already I think. Thus, I don't think new tests are necessarily needed.",
    "created_at": "2021-07-28T01:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486454",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Sorry for being a bit slow to get to this.

This class is not so widely used within the codebase. I can only find:

- combinat/set_partition_ordered.py: `fatter()`
- combinat/root_systems/root_lattice_realizations.py: `negative_roots()`
- combinat/composition.py: `finer()` and `fatter()`
- combinat/free_module.py: The indices for the tensor product of CFMs

So if it works fine for these files, then it is a full replacement. These also are fairly extensively tested already I think. Thus, I don't think new tests are necessarily needed.



---

archive/issue_comments_486455.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-02T00:58:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_486456.json:
```json
{
    "body": "<a id='comment:22'></a>Rebased, partially squashed, on 9.4.rc0",
    "created_at": "2021-08-02T00:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Rebased, partially squashed, on 9.4.rc0



---

archive/issue_comments_486457.json:
```json
{
    "body": "<a id='comment:23'></a>A few trivial failures, but also a more deeper issue:\n\n```\nsage -t --long --random-seed=0 src/sage/categories/finite_dimensional_modules_with_basis.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/combinat/free_module.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/categories/enumerated_sets.py  # 2 doctests failed\n```\nAdditionally, there are many places that need some doctests. Would you like me to add them?",
    "created_at": "2021-08-03T07:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486457",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>A few trivial failures, but also a more deeper issue:

```
sage -t --long --random-seed=0 src/sage/categories/finite_dimensional_modules_with_basis.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/combinat/free_module.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/categories/enumerated_sets.py  # 2 doctests failed
```
Additionally, there are many places that need some doctests. Would you like me to add them?



---

archive/issue_comments_486458.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-03T07:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486458",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_486459.json:
```json
{
    "body": "<a id='comment:24'></a>Any help on the ticket is welcome! I won't be able to work on it before mid August",
    "created_at": "2021-08-03T13:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Any help on the ticket is welcome! I won't be able to work on it before mid August



---

archive/issue_events_085029.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32121#event-85029"
}
```



---

archive/issue_comments_486460.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-06T06:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486460",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_486461.json:
```json
{
    "body": "<a id='comment:26'></a>I finally got around to working on this. I have made some tweaks, and I also fixed a few bugs. The biggest was moving the generic `image()` definition to the category. This was conflicting with the `image` defined for `ModulesWithBasis()`. There are still a few things that need doctests, but I don't know how to effectively doctest them (other than with something trivial).\n\n---\nNew commits:",
    "created_at": "2021-10-06T06:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486461",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>I finally got around to working on this. I have made some tweaks, and I also fixed a few bugs. The biggest was moving the generic `image()` definition to the category. This was conflicting with the `image` defined for `ModulesWithBasis()`. There are still a few things that need doctests, but I don't know how to effectively doctest them (other than with something trivial).

---
New commits:



---

archive/issue_comments_486462.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-06T01:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486463.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-09T06:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_085030.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32121#event-85030"
}
```



---

archive/issue_events_085031.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32121#event-85031"
}
```



---

archive/issue_comments_486464.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486465.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T18:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486466.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T18:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486467.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T19:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486468.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T19:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486469.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T19:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486470.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T19:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486471.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T19:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486472.json:
```json
{
    "body": "<a id='comment:40'></a>I think this is ready now",
    "created_at": "2022-02-19T19:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486472",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>I think this is ready now



---

archive/issue_comments_486473.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-19T21:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486474.json:
```json
{
    "body": "<a id='comment:42'></a>Thank you. Just a few more little things:\n\n- Since `_star` is only called in one place, I think it should just be done inline. This will also save you from having to write a docstring/test for it.\n- `lift` and `retract` need doctests.\n- `MapCombinatorialClass`, `_an_element_`, and `ImageSet` are missing periods at the end of their one-line descriptions.\n- In both `map()` docs:\n  {{{#!diff\n-        Use ``is_injective=False`` to get a correct result in this case.\n+        Use ``is_injective=False`` to get a correct result in this case::\n \n             sage: P.map(len, is_injective=False).list()\n             [1, 2, 3, 4]\n  }}}\n  {{{#!diff\n         INPUT:\n \n- ``is_injective`` -- boolean (default: ``True``) whether to assume\n-          that ``f`` is injective.\n+          that ``f`` is injective\n  }}}\n- I am not sure how I feel about being so detailed in the code copyright declaration. I understand the legal reason, but it is a bit tedious to maintain (it is already out of date) and might create legal issues with the license (including some people may not be claiming copyright as they did not change that statement). This is probably more towards bikeshedding though...",
    "created_at": "2022-02-20T06:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486474",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:42'></a>Thank you. Just a few more little things:

- Since `_star` is only called in one place, I think it should just be done inline. This will also save you from having to write a docstring/test for it.
- `lift` and `retract` need doctests.
- `MapCombinatorialClass`, `_an_element_`, and `ImageSet` are missing periods at the end of their one-line descriptions.
- In both `map()` docs:
  {{{#!diff
-        Use ``is_injective=False`` to get a correct result in this case.
+        Use ``is_injective=False`` to get a correct result in this case::
 
             sage: P.map(len, is_injective=False).list()
             [1, 2, 3, 4]
  }}}
  {{{#!diff
         INPUT:
 
- ``is_injective`` -- boolean (default: ``True``) whether to assume
-          that ``f`` is injective.
+          that ``f`` is injective
  }}}
- I am not sure how I feel about being so detailed in the code copyright declaration. I understand the legal reason, but it is a bit tedious to maintain (it is already out of date) and might create legal issues with the license (including some people may not be claiming copyright as they did not change that statement). This is probably more towards bikeshedding though...



---

archive/issue_comments_486475.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 tscrim]:\n> I am not sure how I feel about being so detailed in the code copyright declaration. I understand the legal reason,\n\n\nMore importantly perhaps, it looks much better if there is year for year activity by several authors. If copyright notices stop in 2006 because the updating work has been neglected, the file and perhaps the whole project looks stale to the casual observer.\n\n> it is a bit tedious to maintain (it is already out of date)\n\n\nIt does not have to be perfect. And if it looks updated, people will be motivated to keep it updated.\n\n> and might create legal issues with the license (including some people may not be claiming copyright as they did not change that statement). \n\n\nCopyright is established whether there is intent or not, whenever there is a copyrightable change in a given year.",
    "created_at": "2022-02-20T21:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486475",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Replying to [comment:42 tscrim]:
> I am not sure how I feel about being so detailed in the code copyright declaration. I understand the legal reason,


More importantly perhaps, it looks much better if there is year for year activity by several authors. If copyright notices stop in 2006 because the updating work has been neglected, the file and perhaps the whole project looks stale to the casual observer.

> it is a bit tedious to maintain (it is already out of date)


It does not have to be perfect. And if it looks updated, people will be motivated to keep it updated.

> and might create legal issues with the license (including some people may not be claiming copyright as they did not change that statement). 


Copyright is established whether there is intent or not, whenever there is a copyrightable change in a given year.



---

archive/issue_comments_486476.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-20T22:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486477.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-20T22:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486478.json:
```json
{
    "body": "<a id='comment:46'></a>Thank you. Green bot => positive review.",
    "created_at": "2022-02-21T05:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486478",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'></a>Thank you. Green bot => positive review.



---

archive/issue_comments_486479.json:
```json
{
    "body": "<a id='comment:47'></a>Patchbot failures are unrelated.",
    "created_at": "2022-02-21T20:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486479",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Patchbot failures are unrelated.



---

archive/issue_comments_486480.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-21T20:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486480",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_486481.json:
```json
{
    "body": "<a id='comment:48'></a>This doctest seems to be random\n\n```\n**********************************************************************\nFile \"src/sage/sets/image_set.py\", line 275, in sage.sets.image_set.ImageSet\nFailed example:\n    ImageSet(sos, Set([(3, 4), (3, -4)]))\nExpected:\n    Image of\n     {(3, -4), (3, 4)} by\n     The map (x, y) |--> x^2 + y^2 from Vector space of dimension 2 over Symbolic Ring\nGot:\n    Image of {(3, 4), (3, -4)} by The map (x, y) |--> x^2 + y^2 from Vector space of dimension 2 over Symbolic Ring\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.sets.image_set.ImageSet\n    [52 tests, 1 failure, 0.25 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/sets/image_set.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2022-02-24T19:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486481",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:48'></a>This doctest seems to be random

```
**********************************************************************
File "src/sage/sets/image_set.py", line 275, in sage.sets.image_set.ImageSet
Failed example:
    ImageSet(sos, Set([(3, 4), (3, -4)]))
Expected:
    Image of
     {(3, -4), (3, 4)} by
     The map (x, y) |--> x^2 + y^2 from Vector space of dimension 2 over Symbolic Ring
Got:
    Image of {(3, 4), (3, -4)} by The map (x, y) |--> x^2 + y^2 from Vector space of dimension 2 over Symbolic Ring
**********************************************************************
1 item had failures:
   1 of   9 in sage.sets.image_set.ImageSet
    [52 tests, 1 failure, 0.25 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/sets/image_set.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_486482.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-02-24T19:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486482",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_486483.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-24T22:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_486484.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-02-24T22:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486484",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_085032.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-27T22:00:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32121#event-85032"
}
```



---

archive/issue_comments_486485.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-27T22:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32121#issuecomment-486485",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
