# Issue 32965: tox / GH Actions: Add centos-7-devtoolset-gcc_{9,10,11}

archive/issues_032728.json:
```json
{
    "body": "(from #30876)\n\n`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)\n\nWe add variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937; to test:\n\n```\ntox -e docker-centos-7-devtoolset-gcc_11-standard\n```\nThis prepares a switch from `centos-7` to `centos-7-devtoolset-gcc_11`, as suggested by dimpase in #30876#comment:12\n(\"nobody nowadays is using gcc 4 on Centos 7... We can and should drop gcc 4, without dropping OSs\")\n\n(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)\n\n\nCC:  @dimpase\n\nBranch/Commit: d11dd6e6578d84ceef2477747b2a5e52e1cd2f16\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #32966, #33306\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32965\n\n",
    "closed_at": "2022-02-21T21:56:34Z",
    "created_at": "2021-12-04T01:58:00Z",
    "labels": [
        "component: porting",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "tox / GH Actions: Add centos-7-devtoolset-gcc_{9,10,11}",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32965",
    "user": "https://github.com/mkoeppe"
}
```
(from #30876)

`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)

We add variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937; to test:

```
tox -e docker-centos-7-devtoolset-gcc_11-standard
```
This prepares a switch from `centos-7` to `centos-7-devtoolset-gcc_11`, as suggested by dimpase in #30876#comment:12
("nobody nowadays is using gcc 4 on Centos 7... We can and should drop gcc 4, without dropping OSs")

(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)


CC:  @dimpase

Branch/Commit: d11dd6e6578d84ceef2477747b2a5e52e1cd2f16

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #32966, #33306

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32965





---

archive/issue_events_087101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32965#event-87101"
}
```



---

archive/issue_comments_498455.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,11 @@\n (from #30876)\n \n-see https://stackoverflow.com/a/67212990/557937\n+`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)\n+\n+We switch to variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937\n+\n+(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2022-02-08T00:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498455",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,11 @@
 (from #30876)
 
-see https://stackoverflow.com/a/67212990/557937
+`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)
+
+We switch to variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937
+
+(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)
+
 
 Comment: 1
 
```




---

archive/issue_comments_498456.json:
```json
{
    "body": "<a id='comment:7'></a>Last 10 new commits:",
    "created_at": "2022-02-08T04:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Last 10 new commits:



---

archive/issue_comments_498457.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+(from #30876)\n+\n+`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)\n+\n+We add variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937; to test:\n+\n+```\n+tox -e docker-centos-7-devtoolset-gcc_11-standard\n+```\n+This prepares a switch from `centos-7` to `centos-7-devtoolset-gcc_11`, as suggested by dimpase in #30876#comment:12\n+(\"nobody nowadays is using gcc 4 on Centos 7... We can and should drop gcc 4, without dropping OSs\")\n+\n+(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)\n \n \n Comment: 1\n```\n",
    "created_at": "2022-02-08T04:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498457",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,16 @@
+(from #30876)
+
+`centos-7` has EOL June 2024 and comes with the very outdated gcc 4.x, which we will not be able to use any more (see #32074)
+
+We add variants `centos-7-devtoolset-gcc_{9,10,11}`, following  https://stackoverflow.com/a/67212990/557937; to test:
+
+```
+tox -e docker-centos-7-devtoolset-gcc_11-standard
+```
+This prepares a switch from `centos-7` to `centos-7-devtoolset-gcc_11`, as suggested by dimpase in #30876#comment:12
+("nobody nowadays is using gcc 4 on Centos 7... We can and should drop gcc 4, without dropping OSs")
+
+(This is not needed for `fedora` because even the oldest that we currently support, `fedora-26`, comes with GCC 7.1.1.)
 
 
 Comment: 1
```




---

archive/issue_comments_498458.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-08T04:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498458",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_498459.json:
```json
{
    "body": "<a id='comment:8'></a>testing this on https://github.com/sagemath/sagetrac-mirror/actions/runs/1818122556",
    "created_at": "2022-02-09T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498459",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>testing this on https://github.com/sagemath/sagetrac-mirror/actions/runs/1818122556



---

archive/issue_comments_498460.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 dimpase]:\n> testing this on https://github.com/sagemath/sagetrac-mirror/actions/runs/1818122556\n\n\nThat's not testing anything related to the ticket because I have not changed `.github/workflows/tox.yml`",
    "created_at": "2022-02-09T18:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498460",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Replying to [comment:8 dimpase]:
> testing this on https://github.com/sagemath/sagetrac-mirror/actions/runs/1818122556


That's not testing anything related to the ticket because I have not changed `.github/workflows/tox.yml`



---

archive/issue_comments_498461.json:
```json
{
    "body": "<a id='comment:10'></a>OK, testing this now.\n\nI wonder, by the way, whether it's possible to give docker images created meaningful names, and not these automatically assigned `romantic_chebyshev` etc.",
    "created_at": "2022-02-11T13:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498461",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>OK, testing this now.

I wonder, by the way, whether it's possible to give docker images created meaningful names, and not these automatically assigned `romantic_chebyshev` etc.



---

archive/issue_comments_498462.json:
```json
{
    "body": "<a id='comment:11'></a>The images are already tagged with names such as `sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets`. Probably you mean containers. The ones created as a side effect of building the images in `tox` do not matter.\nIf you run one of the built images in a new container using `docker run -it sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets:9.6.beta0-16-g9c8f6dbbb8-failed` or such, you can use an option `--name` to give a name to the container.",
    "created_at": "2022-02-11T18:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498462",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>The images are already tagged with names such as `sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets`. Probably you mean containers. The ones created as a side effect of building the images in `tox` do not matter.
If you run one of the built images in a new container using `docker run -it sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets:9.6.beta0-16-g9c8f6dbbb8-failed` or such, you can use an option `--name` to give a name to the container.



---

archive/issue_comments_498463.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 mkoeppe]:\n> The images are already tagged with names such as `sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets`. Probably you mean containers. The ones created as a side effect of building the images in `tox` do not matter.\n\n\nWell, they matter for debugging,say. And figuring this out by names might be a good idea.",
    "created_at": "2022-02-11T18:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498463",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>Replying to [comment:11 mkoeppe]:
> The images are already tagged with names such as `sage-docker-centos-7-devtoolset-gcc_11-standard-with-targets`. Probably you mean containers. The ones created as a side effect of building the images in `tox` do not matter.


Well, they matter for debugging,say. And figuring this out by names might be a good idea.



---

archive/issue_comments_498464.json:
```json
{
    "body": "<a id='comment:13'></a>No, these containers are dead. They have been committed to tagged images already. For debugging purposes, you run a new container from that image.",
    "created_at": "2022-02-11T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498464",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>No, these containers are dead. They have been committed to tagged images already. For debugging purposes, you run a new container from that image.



---

archive/issue_comments_498465.json:
```json
{
    "body": "<a id='comment:14'></a>OK, it works",
    "created_at": "2022-02-11T19:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498465",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>OK, it works



---

archive/issue_comments_498466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-11T19:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498466",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_498467.json:
```json
{
    "body": "<a id='comment:15'></a>Thanks!",
    "created_at": "2022-02-11T19:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Thanks!



---

archive/issue_comments_498468.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-11T19:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498468",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_498469.json:
```json
{
    "body": "<a id='comment:17'></a>this needs a rebase",
    "created_at": "2022-02-16T12:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498469",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>this needs a rebase



---

archive/issue_comments_498470.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-02-16T16:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_498471.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-02-16T16:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_498472.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-16T16:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498472",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_498473.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-21T21:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32965#issuecomment-498473",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087102.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-21T21:56:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32965",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32965#event-87102"
}
```
