# Issue 32328: Adding post_critical_set

archive/issues_032091.json:
```json
{
    "body": "This ticket aims to add a method to calculate the orbit of all the critical points for post-critically finite dynamical systems.\n\nCC:  @bhutz\n\nKeywords: gsoc2021\n\nBranch/Commit: 2e320b59aa963bd76d3e03f484fbb4aa235c890f\n\nReviewer: Ben Hutz\n\nAuthor: Alexander Galarraga\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32328\n\n",
    "closed_at": "2021-10-19T20:30:45Z",
    "created_at": "2021-08-02T23:44:57Z",
    "labels": [
        "component: dynamics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Adding post_critical_set",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32328",
    "user": "https://github.com/EnderWannabe"
}
```
This ticket aims to add a method to calculate the orbit of all the critical points for post-critically finite dynamical systems.

CC:  @bhutz

Keywords: gsoc2021

Branch/Commit: 2e320b59aa963bd76d3e03f484fbb4aa235c890f

Reviewer: Ben Hutz

Author: Alexander Galarraga

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32328





---

archive/issue_comments_643639.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-EnderWannabe/post_critical_set\"",
    "created_at": "2021-08-02T23:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643639",
    "user": "https://github.com/EnderWannabe"
}
```

Changing branch from "" to "u/gh-EnderWannabe/post_critical_set"



---

archive/issue_comments_643640.json:
```json
{
    "body": "Changing commit from \"\" to \"13de775ac290b351d1f5dfb934a45833a1c05ed1\"",
    "created_at": "2021-08-02T23:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643640",
    "user": "https://github.com/EnderWannabe"
}
```

Changing commit from "" to "13de775ac290b351d1f5dfb934a45833a1c05ed1"



---

archive/issue_comments_643641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-02T23:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643641",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_643642.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[13de775](https://git.sagemath.org/sage.git/commit?id=13de775ac290b351d1f5dfb934a45833a1c05ed1)|`32328: initial commit`|",
    "created_at": "2021-08-02T23:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643642",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[13de775](https://git.sagemath.org/sage.git/commit?id=13de775ac290b351d1f5dfb934a45833a1c05ed1)|`32328: initial commit`|



---

archive/issue_comments_643643.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-03T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643643",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_643644.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ben Hutz\"",
    "created_at": "2021-08-03T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643644",
    "user": "https://github.com/bhutz"
}
```

Changing reviewer from "" to "Ben Hutz"



---

archive/issue_comments_643645.json:
```json
{
    "body": "<a id='comment:3'></a>\nSome things to work on here:\n\n- need check=True parameter to not do the pcf check since it is time consuming. You claim to raise an error if not pcf, but you do not actually do the check right now\n\n\n- add to the documentation the definition of postcritical set: The postcritical set is union of points which are in the forward orbits of the critical points. In other words, the set of points `Q` so that `f^n(P) = Q` for some positive integer `n` and critical point `P`, where `f` is this mapping.\n\n- Should say that you extend to the 'field_of_definition_critical()' field.\n\n\n- OUTPUT rather that OUTPUTS\n\n- OUTPUT: The set of postcritical points.\n\n- only have examples over QQ. Should add a number field and a finite field example\n\n- ('must not be a dynamical system on a subscheme') -> ('must be a dynamical system on projective space') since that is what you check\n\n- postcritical set does not include the critical point unless it is peridoic (i.e., occurs as a forward image)\n\n\n- Failing example\n\n```\nK.<v>=QuadraticField(2)\nP.<x,y>=ProjectiveSpace(K,1)\nf=DynamicalSystem([x^2+(-2)*y^2,y^2])\nm=matrix(K,2,2,[v,1,0,1])\ng=f.conjugate(m)\ng.post_critical_set()\n```\n\n- we're likely to run into the same sorting issue on doctest output here that we've seen in some other functions lately.",
    "created_at": "2021-08-03T14:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643645",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:3'></a>
Some things to work on here:

- need check=True parameter to not do the pcf check since it is time consuming. You claim to raise an error if not pcf, but you do not actually do the check right now


- add to the documentation the definition of postcritical set: The postcritical set is union of points which are in the forward orbits of the critical points. In other words, the set of points `Q` so that `f^n(P) = Q` for some positive integer `n` and critical point `P`, where `f` is this mapping.

- Should say that you extend to the 'field_of_definition_critical()' field.


- OUTPUT rather that OUTPUTS

- OUTPUT: The set of postcritical points.

- only have examples over QQ. Should add a number field and a finite field example

- ('must not be a dynamical system on a subscheme') -> ('must be a dynamical system on projective space') since that is what you check

- postcritical set does not include the critical point unless it is peridoic (i.e., occurs as a forward image)


- Failing example

```
K.<v>=QuadraticField(2)
P.<x,y>=ProjectiveSpace(K,1)
f=DynamicalSystem([x^2+(-2)*y^2,y^2])
m=matrix(K,2,2,[v,1,0,1])
g=f.conjugate(m)
g.post_critical_set()
```

- we're likely to run into the same sorting issue on doctest output here that we've seen in some other functions lately.



---

archive/issue_comments_643646.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[2e320b5](https://git.sagemath.org/sage.git/commit/?id=2e320b59aa963bd76d3e03f484fbb4aa235c890f)|`32328: added examples and fixed errors`|",
    "created_at": "2021-08-03T16:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[2e320b5](https://git.sagemath.org/sage.git/commit/?id=2e320b59aa963bd76d3e03f484fbb4aa235c890f)|`32328: added examples and fixed errors`|



---

archive/issue_comments_643647.json:
```json
{
    "body": "Changing commit from \"13de775ac290b351d1f5dfb934a45833a1c05ed1\" to \"2e320b59aa963bd76d3e03f484fbb4aa235c890f\"",
    "created_at": "2021-08-03T16:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "13de775ac290b351d1f5dfb934a45833a1c05ed1" to "2e320b59aa963bd76d3e03f484fbb4aa235c890f"



---

archive/issue_comments_643648.json:
```json
{
    "body": "<a id='comment:5'></a>\nFixed that example and added as a test. Also, I changed all instances of \"post critical\" to \"postcritical\".",
    "created_at": "2021-08-03T16:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643648",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:5'></a>
Fixed that example and added as a test. Also, I changed all instances of "post critical" to "postcritical".



---

archive/issue_comments_643649.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-03T17:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643649",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_085754.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32328#event-85754"
}
```



---

archive/issue_comments_643650.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis looks fine to me. Any idea why the patchbot is getting a `blocks` failure? It doesn't look like those lines are even part of this function, but it does look like it ran after your last set of changes. I built the docs without issue just to check.",
    "created_at": "2021-08-13T17:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643650",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>
This looks fine to me. Any idea why the patchbot is getting a `blocks` failure? It doesn't look like those lines are even part of this function, but it does look like it ran after your last set of changes. I built the docs without issue just to check.



---

archive/issue_comments_643651.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [bhutz](#comment%3A8):\n> Any idea why the patchbot is getting a `blocks` failure?\n\n\nNo idea. The tests run on 8/3 were run on the same commit and passed. I feel like I've seen failures in `blocks` before, but I don't remember where...",
    "created_at": "2021-08-13T17:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643651",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:9'></a>
Replying to [bhutz](#comment%3A8):
> Any idea why the patchbot is getting a `blocks` failure?


No idea. The tests run on 8/3 were run on the same commit and passed. I feel like I've seen failures in `blocks` before, but I don't remember where...



---

archive/issue_comments_643652.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-17T18:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643652",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_643653.json:
```json
{
    "body": "<a id='comment:10'></a>\nwell, we had another pass and another failure. Looks like all the failures are on the same patchbot machine, so it looks like it is an issue with that machine. I'll mark this positive.",
    "created_at": "2021-08-17T18:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643653",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:10'></a>
well, we had another pass and another failure. Looks like all the failures are on the same patchbot machine, so it looks like it is an issue with that machine. I'll mark this positive.



---

archive/issue_comments_643654.json:
```json
{
    "body": "Changing branch from \"u/gh-EnderWannabe/post_critical_set\" to \"2e320b59aa963bd76d3e03f484fbb4aa235c890f\"",
    "created_at": "2021-10-19T20:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643654",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-EnderWannabe/post_critical_set" to "2e320b59aa963bd76d3e03f484fbb4aa235c890f"



---

archive/issue_events_085755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-19T20:30:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32328#event-85755"
}
```



---

archive/issue_comments_643655.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-19T20:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32328#issuecomment-643655",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
