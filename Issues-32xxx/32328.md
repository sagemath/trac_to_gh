# Issue 32328: Adding post_critical_set

archive/issues_032091.json:
```json
{
    "assignees": [],
    "body": "This ticket aims to add a method to calculate the orbit of all the critical points for post-critically finite dynamical systems.\n\nCC:  @bhutz\n\nKeywords: **gsoc2021**\n\nBranch/Commit: **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**\n\nReviewer: **Ben Hutz**\n\nAuthor: **Alexander Galarraga**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32328_\n\n",
    "closed_at": "2021-10-19T20:30:45Z",
    "created_at": "2021-08-02T23:44:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20dynamics",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Adding post_critical_set",
    "type": "issue",
    "updated_at": "2021-10-19T20:30:45Z",
    "url": "https://github.com/sagemath/sage/issues/32328",
    "user": "https://github.com/EnderWannabe"
}
```
This ticket aims to add a method to calculate the orbit of all the critical points for post-critically finite dynamical systems.

CC:  @bhutz

Keywords: **gsoc2021**

Branch/Commit: **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**

Reviewer: **Ben Hutz**

Author: **Alexander Galarraga**

_Issue created by migration from https://trac.sagemath.org/ticket/32328_





---

archive/issue_events_427654.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-02T23:44:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427654"
}
```



---

archive/issue_events_427655.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-02T23:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20dynamics",
    "label_color": "0000ff",
    "label_name": "component: dynamics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427655"
}
```



---

archive/issue_events_427656.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-02T23:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427656"
}
```



---

archive/issue_events_427657.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-02T23:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427657"
}
```



---

archive/issue_comments_523872.json:
```json
{
    "body": "Branch: **[u/gh-EnderWannabe/post_critical_set](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/post_critical_set)**",
    "created_at": "2021-08-02T23:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523872",
    "user": "https://github.com/EnderWannabe"
}
```

Branch: **[u/gh-EnderWannabe/post_critical_set](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/post_critical_set)**



---

archive/issue_comments_523873.json:
```json
{
    "body": "Commit: **[13de775](https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1)**",
    "created_at": "2021-08-02T23:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523873",
    "user": "https://github.com/EnderWannabe"
}
```

Commit: **[13de775](https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1)**



---

archive/issue_events_427658.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-02T23:45:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427658"
}
```



---

archive/issue_comments_523874.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1\">13de775</a></td><td><code>32328: initial commit</code></td></tr></table>\n",
    "created_at": "2021-08-02T23:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523874",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1">13de775</a></td><td><code>32328: initial commit</code></td></tr></table>




---

archive/issue_events_427659.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-08-03T14:23:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427659"
}
```



---

archive/issue_events_427660.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-08-03T14:23:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427660"
}
```



---

archive/issue_comments_523875.json:
```json
{
    "body": "Reviewer: **Ben Hutz**",
    "created_at": "2021-08-03T14:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523875",
    "user": "https://github.com/bhutz"
}
```

Reviewer: **Ben Hutz**



---

archive/issue_comments_523876.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nSome things to work on here:\n\n- need check=True parameter to not do the pcf check since it is time consuming. You claim to raise an error if not pcf, but you do not actually do the check right now\n\n\n- add to the documentation the definition of postcritical set: The postcritical set is union of points which are in the forward orbits of the critical points. In other words, the set of points `Q` so that `f^n(P) = Q` for some positive integer `n` and critical point `P`, where `f` is this mapping.\n\n- Should say that you extend to the 'field_of_definition_critical()' field.\n\n\n- OUTPUT rather that OUTPUTS\n\n- OUTPUT: The set of postcritical points.\n\n- only have examples over QQ. Should add a number field and a finite field example\n\n- ('must not be a dynamical system on a subscheme') -> ('must be a dynamical system on projective space') since that is what you check\n\n- postcritical set does not include the critical point unless it is peridoic (i.e., occurs as a forward image)\n\n\n- Failing example\n\n```\nK.<v>=QuadraticField(2)\nP.<x,y>=ProjectiveSpace(K,1)\nf=DynamicalSystem([x^2+(-2)*y^2,y^2])\nm=matrix(K,2,2,[v,1,0,1])\ng=f.conjugate(m)\ng.post_critical_set()\n```\n\n- we're likely to run into the same sorting issue on doctest output here that we've seen in some other functions lately.",
    "created_at": "2021-08-03T14:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523876",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:3" align="right">Comment 3</div>

Some things to work on here:

- need check=True parameter to not do the pcf check since it is time consuming. You claim to raise an error if not pcf, but you do not actually do the check right now


- add to the documentation the definition of postcritical set: The postcritical set is union of points which are in the forward orbits of the critical points. In other words, the set of points `Q` so that `f^n(P) = Q` for some positive integer `n` and critical point `P`, where `f` is this mapping.

- Should say that you extend to the 'field_of_definition_critical()' field.


- OUTPUT rather that OUTPUTS

- OUTPUT: The set of postcritical points.

- only have examples over QQ. Should add a number field and a finite field example

- ('must not be a dynamical system on a subscheme') -> ('must be a dynamical system on projective space') since that is what you check

- postcritical set does not include the critical point unless it is peridoic (i.e., occurs as a forward image)


- Failing example

```
K.<v>=QuadraticField(2)
P.<x,y>=ProjectiveSpace(K,1)
f=DynamicalSystem([x^2+(-2)*y^2,y^2])
m=matrix(K,2,2,[v,1,0,1])
g=f.conjugate(m)
g.post_critical_set()
```

- we're likely to run into the same sorting issue on doctest output here that we've seen in some other functions lately.



---

archive/issue_comments_523877.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f\">2e320b5</a></td><td><code>32328: added examples and fixed errors</code></td></tr></table>\n",
    "created_at": "2021-08-03T16:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523877",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f">2e320b5</a></td><td><code>32328: added examples and fixed errors</code></td></tr></table>




---

archive/issue_comments_523878.json:
```json
{
    "body": "Changed commit from **[13de775](https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1)** to **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**",
    "created_at": "2021-08-03T16:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523878",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[13de775](https://github.com/sagemath/sagetrac-mirror/commit/13de775ac290b351d1f5dfb934a45833a1c05ed1)** to **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**



---

archive/issue_comments_523879.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nFixed that example and added as a test. Also, I changed all instances of \"post critical\" to \"postcritical\".",
    "created_at": "2021-08-03T16:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523879",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:5" align="right">Comment 5</div>

Fixed that example and added as a test. Also, I changed all instances of "post critical" to "postcritical".



---

archive/issue_events_427661.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-03T17:02:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427661"
}
```



---

archive/issue_events_427662.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-03T17:02:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427662"
}
```



---

archive/issue_events_427663.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427663"
}
```



---

archive/issue_events_427664.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427664"
}
```



---

archive/issue_comments_523880.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThis looks fine to me. Any idea why the patchbot is getting a `blocks` failure? It doesn't look like those lines are even part of this function, but it does look like it ran after your last set of changes. I built the docs without issue just to check.",
    "created_at": "2021-08-13T17:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523880",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:8" align="right">Comment 8</div>

This looks fine to me. Any idea why the patchbot is getting a `blocks` failure? It doesn't look like those lines are even part of this function, but it does look like it ran after your last set of changes. I built the docs without issue just to check.



---

archive/issue_comments_523881.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@bhutz](#comment%3A8):\n> Any idea why the patchbot is getting a `blocks` failure?\n\nNo idea. The tests run on 8/3 were run on the same commit and passed. I feel like I've seen failures in `blocks` before, but I don't remember where...",
    "created_at": "2021-08-13T17:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523881",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@bhutz](#comment%3A8):
> Any idea why the patchbot is getting a `blocks` failure?

No idea. The tests run on 8/3 were run on the same commit and passed. I feel like I've seen failures in `blocks` before, but I don't remember where...



---

archive/issue_events_427665.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-08-17T18:17:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427665"
}
```



---

archive/issue_events_427666.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-08-17T18:17:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427666"
}
```



---

archive/issue_comments_523882.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nwell, we had another pass and another failure. Looks like all the failures are on the same patchbot machine, so it looks like it is an issue with that machine. I'll mark this positive.",
    "created_at": "2021-08-17T18:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523882",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:10" align="right">Comment 10</div>

well, we had another pass and another failure. Looks like all the failures are on the same patchbot machine, so it looks like it is an issue with that machine. I'll mark this positive.



---

archive/issue_comments_523883.json:
```json
{
    "body": "Changed branch from **[u/gh-EnderWannabe/post_critical_set](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/post_critical_set)** to **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**",
    "created_at": "2021-10-19T20:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32328#issuecomment-523883",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-EnderWannabe/post_critical_set](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/post_critical_set)** to **[2e320b5](https://github.com/sagemath/sagetrac-mirror/commit/2e320b59aa963bd76d3e03f484fbb4aa235c890f)**



---

archive/issue_events_427667.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-19T20:30:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427667"
}
```



---

archive/issue_events_427668.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ab2c01cf283ebea2085f8b3d545fc6bb0f265819",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-19T20:30:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32328",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32328#event-427668"
}
```
