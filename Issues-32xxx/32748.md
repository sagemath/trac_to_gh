# Issue 32748: clean the processing of networkx (Multi)(Di)Graph in the (Di)Graph constructor

archive/issues_032511.json:
```json
{
    "body": "CC:  @fchapoton @tscrim tmonteil\n\nWe have tests to distinguish between networkx `Graph` and `MultiGraph` which are silently failing since for the following reason:\n\n```\nsage: H = networkx.MultiGraph()\nsage: H.add_edge(0, 1)\n0\nsage: H.add_edge(0, 1)\n1\nsage: isinstance(H, networkx.MultiGraph)\nTrue\nsage: isinstance(H, networkx.Graph)\nTrue\n```\nand so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.\n\nHere, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. \n\nThis will be useful for #9731.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32748\n\n",
    "closed_at": "2021-10-31T22:20:55Z",
    "created_at": "2021-10-23T16:59:39Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "clean the processing of networkx (Multi)(Di)Graph in the (Di)Graph constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32748",
    "user": "https://github.com/dcoudert"
}
```
CC:  @fchapoton @tscrim tmonteil

We have tests to distinguish between networkx `Graph` and `MultiGraph` which are silently failing since for the following reason:

```
sage: H = networkx.MultiGraph()
sage: H.add_edge(0, 1)
0
sage: H.add_edge(0, 1)
1
sage: isinstance(H, networkx.MultiGraph)
True
sage: isinstance(H, networkx.Graph)
True
```
and so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.

Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. 

This will be useful for #9731.

Issue created by migration from https://trac.sagemath.org/ticket/32748





---

archive/issue_comments_463099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463099",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_463100.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463100",
    "user": "https://github.com/dcoudert"
}
```

New commits:



---

archive/issue_comments_463101.json:
```json
{
    "body": "Changing component from game theory to graph theory.",
    "created_at": "2021-10-23T18:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463101",
    "user": "https://github.com/dcoudert"
}
```

Changing component from game theory to graph theory.



---

archive/issue_comments_463102.json:
```json
{
    "body": "LGTM modulo the trivial extra space on the second line of some of the `INPUT:` in `from_networkx_graph`.",
    "created_at": "2021-10-29T00:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463102",
    "user": "https://github.com/tscrim"
}
```

LGTM modulo the trivial extra space on the second line of some of the `INPUT:` in `from_networkx_graph`.



---

archive/issue_comments_463103.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T06:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463103",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463104.json:
```json
{
    "body": "Good catch. Thanks.",
    "created_at": "2021-10-29T06:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463104",
    "user": "https://github.com/dcoudert"
}
```

Good catch. Thanks.



---

archive/issue_comments_463105.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-10-29T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463105",
    "user": "https://github.com/tscrim"
}
```

Thank you.



---

archive/issue_comments_463106.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-29T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463106",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463107.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-31T22:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-463107",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_086674.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-31T22:20:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32748#event-86674"
}
```
