# Issue 32748: clean the processing of networkx (Multi)(Di)Graph in the (Di)Graph constructor

archive/issues_032511.json:
```json
{
    "body": "We have tests to distinguish between networkx `Graph` and `MultiGraph` which are silently failing since for the following reason:\n\n```\nsage: H = networkx.MultiGraph()\nsage: H.add_edge(0, 1)\n0\nsage: H.add_edge(0, 1)\n1\nsage: isinstance(H, networkx.MultiGraph)\nTrue\nsage: isinstance(H, networkx.Graph)\nTrue\n```\nand so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.\n\nHere, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. \n\nThis will be useful for #9731.\n\nCC:  @fchapoton @tscrim tmonteil\n\nBranch/Commit: 01463095386995d8bbe2c487b19f67a4b70d535d\n\nReviewer: Travis Scrimshaw\n\nAuthor: David Coudert\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32748\n\n",
    "closed_at": "2021-10-31T22:20:55Z",
    "created_at": "2021-10-23T16:59:39Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "clean the processing of networkx (Multi)(Di)Graph in the (Di)Graph constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32748",
    "user": "https://github.com/dcoudert"
}
```
We have tests to distinguish between networkx `Graph` and `MultiGraph` which are silently failing since for the following reason:

```
sage: H = networkx.MultiGraph()
sage: H.add_edge(0, 1)
0
sage: H.add_edge(0, 1)
1
sage: isinstance(H, networkx.MultiGraph)
True
sage: isinstance(H, networkx.Graph)
True
```
and so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.

Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. 

This will be useful for #9731.

CC:  @fchapoton @tscrim tmonteil

Branch/Commit: 01463095386995d8bbe2c487b19f67a4b70d535d

Reviewer: Travis Scrimshaw

Author: David Coudert

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32748





---

archive/issue_comments_652488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,9 @@\n ```\n and so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.\n \n-Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph.\n+Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. \n+\n+This will be useful for #9731.\n \n Author: David Coudert\n \n``````\n",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652488",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,9 @@
 ```
 and so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.
 
-Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph.
+Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph. 
+
+This will be useful for #9731.
 
 Author: David Coudert
 
``````




---

archive/issue_comments_652489.json:
```json
{
    "body": "Changing branch from \"\" to \"public/graphs/32748_networkx\"",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652489",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "public/graphs/32748_networkx"



---

archive/issue_comments_652490.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652490",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_652491.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652491",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_652492.json:
```json
{
    "body": "Changing commit from \"\" to \"271f765fc84fb1e61182d4bd0afbacd66a2d0084\"",
    "created_at": "2021-10-23T17:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652492",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "" to "271f765fc84fb1e61182d4bd0afbacd66a2d0084"



---

archive/issue_comments_652493.json:
```json
{
    "body": "Changing component from game theory to graph theory.",
    "created_at": "2021-10-23T18:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652493",
    "user": "https://github.com/dcoudert"
}
```

Changing component from game theory to graph theory.



---

archive/issue_comments_652494.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-10-29T00:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652494",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_652495.json:
```json
{
    "body": "<a id='comment:3'></a>LGTM modulo the trivial extra space on the second line of some of the `INPUT:` in `from_networkx_graph`.",
    "created_at": "2021-10-29T00:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652495",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>LGTM modulo the trivial extra space on the second line of some of the `INPUT:` in `from_networkx_graph`.



---

archive/issue_comments_652496.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T06:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_652497.json:
```json
{
    "body": "Changing commit from \"271f765fc84fb1e61182d4bd0afbacd66a2d0084\" to \"01463095386995d8bbe2c487b19f67a4b70d535d\"",
    "created_at": "2021-10-29T06:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "271f765fc84fb1e61182d4bd0afbacd66a2d0084" to "01463095386995d8bbe2c487b19f67a4b70d535d"



---

archive/issue_comments_652498.json:
```json
{
    "body": "<a id='comment:5'></a>Good catch. Thanks.",
    "created_at": "2021-10-29T06:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652498",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>Good catch. Thanks.



---

archive/issue_comments_652499.json:
```json
{
    "body": "<a id='comment:6'></a>Thank you.",
    "created_at": "2021-10-29T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652499",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Thank you.



---

archive/issue_comments_652500.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-29T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652500",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_652501.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-31T22:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652501",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_652502.json:
```json
{
    "body": "Changing branch from \"public/graphs/32748_networkx\" to \"01463095386995d8bbe2c487b19f67a4b70d535d\"",
    "created_at": "2021-10-31T22:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32748#issuecomment-652502",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/32748_networkx" to "01463095386995d8bbe2c487b19f67a4b70d535d"



---

archive/issue_events_086674.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-31T22:20:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32748#event-86674"
}
```
