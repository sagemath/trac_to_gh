# Issue 32609: Remove or tag uses of SR and symbolic functions in combinat, categories, etc.

archive/issues_032372.json:
```json
{
    "body": "Follow-up on #32411.\n\nUse of `floor`/`ceil` from `sage.functions` can be avoided.\n\nModules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.\n\nDoctests that need these modules should be marked `# optional - sage.symbolic`.\n\nThis can be tested using #32601 (**sagemath-standard-no-symbolics**)\n\n\nCC:  @tscrim\n\nBranch/Commit: 4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32609\n\n",
    "closed_at": "2022-03-12T15:11:17Z",
    "created_at": "2021-10-02T16:53:58Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Remove or tag uses of SR and symbolic functions in combinat, categories, etc.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32609",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up on #32411.

Use of `floor`/`ceil` from `sage.functions` can be avoided.

Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.

Doctests that need these modules should be marked `# optional - sage.symbolic`.

This can be tested using #32601 (**sagemath-standard-no-symbolics**)


CC:  @tscrim

Branch/Commit: 4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc

Reviewer: Samuel Leli√®vre

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32609





---

archive/issue_events_086410.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32609#event-86410"
}
```



---

archive/issue_comments_493236.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2022-02-27T23:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493236",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_493237.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,34 +2,12 @@\n \n Use of \\`floor\\`/\\`ceil\\` from \\`sage.functions\\` can be avoided.\n \n-Modules that only need symbolics in some methods should avoid module-level imports from \\`sage.functions\\`, \\`sage.symbolic\\`, \\`sage.calculus\\`\n+Modules that only need symbolics in some methods should avoid module-level imports from \\`sage.functions\\`, \\`sage.symbolic\\`, \\`sage.calculus\\`.\n \n-\\`\\`\\`\n-src/sage/categories/loop_crystals.py:from sage.functions.other import ceil\n-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.log import log\n-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.other import sqrt\n-src/sage/combinat/crystals/littelmann_path.py:from sage.functions.other import floor\n-src/sage/combinat/crystals/tensor_product.py:from sage.functions.other import floor, ceil\n-src/sage/combinat/crystals/tensor_product_element.pyx:from sage.functions.other import ceil\n-src/sage/combinat/diagram_algebras.py:from sage.functions.other import floor, ceil\n-src/sage/combinat/finite_state_machine.py:from sage.calculus.var import var\n-src/sage/combinat/finite_state_machine.py:from sage.functions.trig import atan2\n-src/sage/combinat/k_tableau.py:from sage.functions.generalized import sgn\n-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.trig import cos, sin\n-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.other import sqrt\n-src/sage/combinat/partition.py:from sage.symbolic.ring import var\n-src/sage/combinat/partition_algebra.py:from sage.functions.all import ceil\n-src/sage/combinat/root_system/coxeter_type.py:from sage.symbolic.ring import SR\n-src/sage/combinat/sine_gordon.py:from sage.functions.trig import cos, sin\n-src/sage/combinat/sine_gordon.py:from sage.symbolic.constants import pi, I\n-src/sage/combinat/sine_gordon.py:from sage.functions.log import exp\n-src/sage/combinat/sine_gordon.py:from sage.functions.other import ceil\n-src/sage/combinat/sine_gordon.py:from sage.symbolic.ring import SR\n-src/sage/combinat/sine_gordon.py:from sage.functions.other import real_part, imag_part\n-src/sage/combinat/sloane_functions.py:from sage.functions.all import prime_pi\n-src/sage/combinat/symmetric_group_representations.py:from sage.symbolic.ring import SR\n-src/sage/combinat/symmetric_group_representations.py:from sage.functions.all import sqrt\n-\\`\\`\\`\n+Doctests that need these modules should be marked \\`# optional - sage.symbolic\\`.\n+\n+This can be tested using #32601 (**sagemath-standard-no-symbolics**)\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2022-02-27T23:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493237",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,34 +2,12 @@
 
 Use of \`floor\`/\`ceil\` from \`sage.functions\` can be avoided.
 
-Modules that only need symbolics in some methods should avoid module-level imports from \`sage.functions\`, \`sage.symbolic\`, \`sage.calculus\`
+Modules that only need symbolics in some methods should avoid module-level imports from \`sage.functions\`, \`sage.symbolic\`, \`sage.calculus\`.
 
-\`\`\`
-src/sage/categories/loop_crystals.py:from sage.functions.other import ceil
-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.log import log
-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.other import sqrt
-src/sage/combinat/crystals/littelmann_path.py:from sage.functions.other import floor
-src/sage/combinat/crystals/tensor_product.py:from sage.functions.other import floor, ceil
-src/sage/combinat/crystals/tensor_product_element.pyx:from sage.functions.other import ceil
-src/sage/combinat/diagram_algebras.py:from sage.functions.other import floor, ceil
-src/sage/combinat/finite_state_machine.py:from sage.calculus.var import var
-src/sage/combinat/finite_state_machine.py:from sage.functions.trig import atan2
-src/sage/combinat/k_tableau.py:from sage.functions.generalized import sgn
-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.trig import cos, sin
-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.other import sqrt
-src/sage/combinat/partition.py:from sage.symbolic.ring import var
-src/sage/combinat/partition_algebra.py:from sage.functions.all import ceil
-src/sage/combinat/root_system/coxeter_type.py:from sage.symbolic.ring import SR
-src/sage/combinat/sine_gordon.py:from sage.functions.trig import cos, sin
-src/sage/combinat/sine_gordon.py:from sage.symbolic.constants import pi, I
-src/sage/combinat/sine_gordon.py:from sage.functions.log import exp
-src/sage/combinat/sine_gordon.py:from sage.functions.other import ceil
-src/sage/combinat/sine_gordon.py:from sage.symbolic.ring import SR
-src/sage/combinat/sine_gordon.py:from sage.functions.other import real_part, imag_part
-src/sage/combinat/sloane_functions.py:from sage.functions.all import prime_pi
-src/sage/combinat/symmetric_group_representations.py:from sage.symbolic.ring import SR
-src/sage/combinat/symmetric_group_representations.py:from sage.functions.all import sqrt
-\`\`\`
+Doctests that need these modules should be marked \`# optional - sage.symbolic\`.
+
+This can be tested using #32601 (**sagemath-standard-no-symbolics**)
+
 
 Comment: 1
 
```




---

archive/issue_comments_493238.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-27T23:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493238",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_493239.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-27T23:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493240.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-02-28T00:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_493241.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T01:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493242.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T01:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493243.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T02:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493244.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493245.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493246.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493247.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493248.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493249.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493250.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T05:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493251.json:
```json
{
    "body": "<a id='comment:17'></a>Some more parts can be made symbolics-free,\nthough sometimes it makes things convoluted.\n\n**File `src/sage/categories/algebra_functor.py`**\n\nWe can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:\n\n```\n    sage: G = GL(2, 7)\n    sage: K = QuadraticField(5, 'srqt5')\n    sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]\n    sage: OG = GroupAlgebra(G, Zr5)\n    sage: OG(2)\n    2*[1 0]\n    [0 1]\n    sage: OG(G(2))\n    [2 0]\n    [0 2]\n \n    sage: OG(FormalSum([ (1, G(2)), (2, RR(0.77)) ]) )\n    Traceback (most recent call last):\n    ...\n    TypeError: Attempt to coerce non-integral RealNumber to Integer\n    sage: OG(OG.base_ring().basis()[1])\n    sqrt5*[1 0]\n    [0 1]\n```\n\nKeeping the clearer `ZZ[sqrt(5)]` and adding\n`# optional - sage.symbolic` makes sense too.\n\nI wish `sqrt(5)` gave an element in a number field\nor `AA` or `QQbar`, not in the symbolic ring...\n\n**File `src/sage/categories/coxeter_groups.py`**\n\nUsing a polynomial variable can bypass symbolics here:\n\n```diff\n                 sage: W = CoxeterGroups().example()\n-                sage: sum((x^w.length()) for w in W) - expand(prod(sum(x^i for i in range(j+1)) for j in range(4))) # This is scandalously slow!!!  # optional - sage.symbolic\n+                sage: x = polygen(ZZ)\n+                sage: s = sum(x^w.length() for w in W)\n+                sage: p = prod(sum(x^i for i in range(j)) for j in range(1, 5))\n+                sage: s - p\n                 0\n```\n\nThe 2009 \"scandalously slow\" comment can probably go?\n\n**File `src/sage/categories/pushout.py`**\n\nUsing `sqrt(3.)` and `(2.)^(1/3)` makes this symbolics-free:\n\n```diff\n-            sage: K.<a> = NumberField(x^3-2, embedding=CDF(1/2*I*2^(1/3)*sqrt(3) - 1/2*2^(1/3)))\n+            sage: cbrt2 = CDF(2)^(1/3)\n+            sage: zeta3 = CDF(-1/2, sqrt(3.)/2)\n+            sage: K.<a> = NumberField(x^3 - 2, embedding=cbrt2 * zeta3)\n```",
    "created_at": "2022-02-28T21:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493251",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>Some more parts can be made symbolics-free,
though sometimes it makes things convoluted.

**File `src/sage/categories/algebra_functor.py`**

We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:

```
    sage: G = GL(2, 7)
    sage: K = QuadraticField(5, 'srqt5')
    sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]
    sage: OG = GroupAlgebra(G, Zr5)
    sage: OG(2)
    2*[1 0]
    [0 1]
    sage: OG(G(2))
    [2 0]
    [0 2]
 
    sage: OG(FormalSum([ (1, G(2)), (2, RR(0.77)) ]) )
    Traceback (most recent call last):
    ...
    TypeError: Attempt to coerce non-integral RealNumber to Integer
    sage: OG(OG.base_ring().basis()[1])
    sqrt5*[1 0]
    [0 1]
```

Keeping the clearer `ZZ[sqrt(5)]` and adding
`# optional - sage.symbolic` makes sense too.

I wish `sqrt(5)` gave an element in a number field
or `AA` or `QQbar`, not in the symbolic ring...

**File `src/sage/categories/coxeter_groups.py`**

Using a polynomial variable can bypass symbolics here:

```diff
                 sage: W = CoxeterGroups().example()
-                sage: sum((x^w.length()) for w in W) - expand(prod(sum(x^i for i in range(j+1)) for j in range(4))) # This is scandalously slow!!!  # optional - sage.symbolic
+                sage: x = polygen(ZZ)
+                sage: s = sum(x^w.length() for w in W)
+                sage: p = prod(sum(x^i for i in range(j)) for j in range(1, 5))
+                sage: s - p
                 0
```

The 2009 "scandalously slow" comment can probably go?

**File `src/sage/categories/pushout.py`**

Using `sqrt(3.)` and `(2.)^(1/3)` makes this symbolics-free:

```diff
-            sage: K.<a> = NumberField(x^3-2, embedding=CDF(1/2*I*2^(1/3)*sqrt(3) - 1/2*2^(1/3)))
+            sage: cbrt2 = CDF(2)^(1/3)
+            sage: zeta3 = CDF(-1/2, sqrt(3.)/2)
+            sage: K.<a> = NumberField(x^3 - 2, embedding=cbrt2 * zeta3)
```



---

archive/issue_comments_493252.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 slelievre]:\n> Some more parts can be made symbolics-free,\n> though sometimes it makes things convoluted.\n> \n> **File `src/sage/categories/algebra_functor.py`**\n> \n> We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:\n> \n> \n> ```\n>     sage: G = GL(2, 7)\n>     sage: K = QuadraticField(5, 'srqt5')\n>     sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]\n\n\nOr just `ZZ[AA(5).sqrt()]`",
    "created_at": "2022-02-28T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493252",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:17 slelievre]:
> Some more parts can be made symbolics-free,
> though sometimes it makes things convoluted.
> 
> **File `src/sage/categories/algebra_functor.py`**
> 
> We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:
> 
> 
> ```
>     sage: G = GL(2, 7)
>     sage: K = QuadraticField(5, 'srqt5')
>     sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]


Or just `ZZ[AA(5).sqrt()]`



---

archive/issue_comments_493253.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493254.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493255.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:17 slelievre]:\n> **File `src/sage/categories/coxeter_groups.py`**\n> \n> Using a polynomial variable can bypass symbolics here [...]\n\n\nThanks, I've made a similar change",
    "created_at": "2022-02-28T22:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493255",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Replying to [comment:17 slelievre]:
> **File `src/sage/categories/coxeter_groups.py`**
> 
> Using a polynomial variable can bypass symbolics here [...]


Thanks, I've made a similar change



---

archive/issue_comments_493256.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493257.json:
```json
{
    "body": "<a id='comment:23'></a>I like `ZZ[AA(5).sqrt()]` but it does not name\nthe generator `sqrt5` as `ZZ[sqrt(5)]`:\n\n```\nsage: ZZ[sqrt(5)]\nOrder in Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?\nsage: ZZ[AA(5).sqrt()]\nOrder in Number Field in a with defining polynomial x^2 - 5 with a = 2.236067977499790?\n```\nso you need to change:\n\n```diff\n     sage: OG(OG.base_ring().basis()[1])\n-    sqrt5*[1 0]\n+    a*[1 0]\n     [0 1]\n```",
    "created_at": "2022-02-28T23:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493257",
    "user": "https://github.com/slel"
}
```

<a id='comment:23'></a>I like `ZZ[AA(5).sqrt()]` but it does not name
the generator `sqrt5` as `ZZ[sqrt(5)]`:

```
sage: ZZ[sqrt(5)]
Order in Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?
sage: ZZ[AA(5).sqrt()]
Order in Number Field in a with defining polynomial x^2 - 5 with a = 2.236067977499790?
```
so you need to change:

```diff
     sage: OG(OG.base_ring().basis()[1])
-    sqrt5*[1 0]
+    a*[1 0]
     [0 1]
```



---

archive/issue_comments_493258.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T23:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493259.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-01T06:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493260.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-01T06:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493261.json:
```json
{
    "body": "<a id='comment:27'></a>The remaining doctest failure (and the pyflakes warnings) seen in the patchbot run are not from this ticket.",
    "created_at": "2022-03-01T18:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493261",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>The remaining doctest failure (and the pyflakes warnings) seen in the patchbot run are not from this ticket.



---

archive/issue_comments_493262.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-08T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_493263.json:
```json
{
    "body": "<a id='comment:30'></a>If bots go green or only report errors unrelated to this, positive review.",
    "created_at": "2022-03-09T11:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493263",
    "user": "https://github.com/slel"
}
```

<a id='comment:30'></a>If bots go green or only report errors unrelated to this, positive review.



---

archive/issue_comments_493264.json:
```json
{
    "body": "<a id='comment:31'></a>Patchbot failures and pyflakes warnings are unrelated.",
    "created_at": "2022-03-09T22:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493264",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Patchbot failures and pyflakes warnings are unrelated.



---

archive/issue_comments_493265.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-09T22:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493265",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_493266.json:
```json
{
    "body": "<a id='comment:32'></a>Thank you!",
    "created_at": "2022-03-09T22:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493266",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thank you!



---

archive/issue_comments_493267.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-12T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-493267",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_086411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-12T15:11:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32609#event-86411"
}
```
