# Issue 32609: Remove or tag uses of SR and symbolic functions in combinat, categories, etc.

archive/issues_032372.json:
```json
{
    "body": "Follow-up on #32411.\n\nUse of `floor`/`ceil` from `sage.functions` can be avoided.\n\nModules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.\n\nDoctests that need these modules should be marked `# optional - sage.symbolic`.\n\nThis can be tested using #32601 (**sagemath-standard-no-symbolics**)\n\n\nCC:  @tscrim\n\nBranch/Commit: 4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32609\n\n",
    "closed_at": "2022-03-12T15:11:17Z",
    "created_at": "2021-10-02T16:53:58Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Remove or tag uses of SR and symbolic functions in combinat, categories, etc.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32609",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up on #32411.

Use of `floor`/`ceil` from `sage.functions` can be avoided.

Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.

Doctests that need these modules should be marked `# optional - sage.symbolic`.

This can be tested using #32601 (**sagemath-standard-no-symbolics**)


CC:  @tscrim

Branch/Commit: 4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc

Reviewer: Samuel Leli√®vre

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32609





---

archive/issue_events_086410.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32609#event-86410"
}
```



---

archive/issue_comments_649586.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/remove_more_unnecessary_uses_of_sr_and_symbolic_functions_in_sage_combinat\"",
    "created_at": "2022-02-27T22:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649586",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/remove_more_unnecessary_uses_of_sr_and_symbolic_functions_in_sage_combinat"



---

archive/issue_comments_649587.json:
```json
{
    "body": "Changing commit from \"\" to \"04855a1a774573393702b83bb89204de2f7898c3\"",
    "created_at": "2022-02-27T23:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649587",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "04855a1a774573393702b83bb89204de2f7898c3"



---

archive/issue_comments_649588.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2022-02-27T23:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_649589.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,31 +2,9 @@\n \n Use of `floor`/`ceil` from `sage.functions` can be avoided.\n \n-Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`\n+Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.\n \n-```\n-src/sage/categories/loop_crystals.py:from sage.functions.other import ceil\n-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.log import log\n-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.other import sqrt\n-src/sage/combinat/crystals/littelmann_path.py:from sage.functions.other import floor\n-src/sage/combinat/crystals/tensor_product.py:from sage.functions.other import floor, ceil\n-src/sage/combinat/crystals/tensor_product_element.pyx:from sage.functions.other import ceil\n-src/sage/combinat/diagram_algebras.py:from sage.functions.other import floor, ceil\n-src/sage/combinat/finite_state_machine.py:from sage.calculus.var import var\n-src/sage/combinat/finite_state_machine.py:from sage.functions.trig import atan2\n-src/sage/combinat/k_tableau.py:from sage.functions.generalized import sgn\n-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.trig import cos, sin\n-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.other import sqrt\n-src/sage/combinat/partition.py:from sage.symbolic.ring import var\n-src/sage/combinat/partition_algebra.py:from sage.functions.all import ceil\n-src/sage/combinat/root_system/coxeter_type.py:from sage.symbolic.ring import SR\n-src/sage/combinat/sine_gordon.py:from sage.functions.trig import cos, sin\n-src/sage/combinat/sine_gordon.py:from sage.symbolic.constants import pi, I\n-src/sage/combinat/sine_gordon.py:from sage.functions.log import exp\n-src/sage/combinat/sine_gordon.py:from sage.functions.other import ceil\n-src/sage/combinat/sine_gordon.py:from sage.symbolic.ring import SR\n-src/sage/combinat/sine_gordon.py:from sage.functions.other import real_part, imag_part\n-src/sage/combinat/sloane_functions.py:from sage.functions.all import prime_pi\n-src/sage/combinat/symmetric_group_representations.py:from sage.symbolic.ring import SR\n-src/sage/combinat/symmetric_group_representations.py:from sage.functions.all import sqrt\n-```\n+Doctests that need these modules should be marked `# optional - sage.symbolic`.\n+\n+This can be tested using #32601 (**sagemath-standard-no-symbolics**)\n+\n``````\n",
    "created_at": "2022-02-27T23:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649589",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,31 +2,9 @@
 
 Use of `floor`/`ceil` from `sage.functions` can be avoided.
 
-Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`
+Modules that only need symbolics in some methods should avoid module-level imports from `sage.functions`, `sage.symbolic`, `sage.calculus`.
 
-```
-src/sage/categories/loop_crystals.py:from sage.functions.other import ceil
-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.log import log
-src/sage/combinat/binary_recurrence_sequences.py:from sage.functions.other import sqrt
-src/sage/combinat/crystals/littelmann_path.py:from sage.functions.other import floor
-src/sage/combinat/crystals/tensor_product.py:from sage.functions.other import floor, ceil
-src/sage/combinat/crystals/tensor_product_element.pyx:from sage.functions.other import ceil
-src/sage/combinat/diagram_algebras.py:from sage.functions.other import floor, ceil
-src/sage/combinat/finite_state_machine.py:from sage.calculus.var import var
-src/sage/combinat/finite_state_machine.py:from sage.functions.trig import atan2
-src/sage/combinat/k_tableau.py:from sage.functions.generalized import sgn
-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.trig import cos, sin
-src/sage/combinat/parallelogram_polyomino.py:from sage.functions.other import sqrt
-src/sage/combinat/partition.py:from sage.symbolic.ring import var
-src/sage/combinat/partition_algebra.py:from sage.functions.all import ceil
-src/sage/combinat/root_system/coxeter_type.py:from sage.symbolic.ring import SR
-src/sage/combinat/sine_gordon.py:from sage.functions.trig import cos, sin
-src/sage/combinat/sine_gordon.py:from sage.symbolic.constants import pi, I
-src/sage/combinat/sine_gordon.py:from sage.functions.log import exp
-src/sage/combinat/sine_gordon.py:from sage.functions.other import ceil
-src/sage/combinat/sine_gordon.py:from sage.symbolic.ring import SR
-src/sage/combinat/sine_gordon.py:from sage.functions.other import real_part, imag_part
-src/sage/combinat/sloane_functions.py:from sage.functions.all import prime_pi
-src/sage/combinat/symmetric_group_representations.py:from sage.symbolic.ring import SR
-src/sage/combinat/symmetric_group_representations.py:from sage.functions.all import sqrt
-```
+Doctests that need these modules should be marked `# optional - sage.symbolic`.
+
+This can be tested using #32601 (**sagemath-standard-no-symbolics**)
+
``````




---

archive/issue_comments_649590.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-27T23:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649590",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_649591.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-02-27T23:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649591",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_649592.json:
```json
{
    "body": "Changing commit from \"04855a1a774573393702b83bb89204de2f7898c3\" to \"ecad0153152377612705f15471949861de4f4088\"",
    "created_at": "2022-02-27T23:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649592",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "04855a1a774573393702b83bb89204de2f7898c3" to "ecad0153152377612705f15471949861de4f4088"



---

archive/issue_comments_649593.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-27T23:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649593",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649594.json:
```json
{
    "body": "Changing commit from \"ecad0153152377612705f15471949861de4f4088\" to \"2511e3e18995b5768fc12a75c69a2b2988937bcd\"",
    "created_at": "2022-02-28T00:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ecad0153152377612705f15471949861de4f4088" to "2511e3e18995b5768fc12a75c69a2b2988937bcd"



---

archive/issue_comments_649595.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-02-28T00:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_649596.json:
```json
{
    "body": "Changing commit from \"2511e3e18995b5768fc12a75c69a2b2988937bcd\" to \"ea8d379c44f783128ddd48a7f6548d94418283b9\"",
    "created_at": "2022-02-28T01:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649596",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2511e3e18995b5768fc12a75c69a2b2988937bcd" to "ea8d379c44f783128ddd48a7f6548d94418283b9"



---

archive/issue_comments_649597.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T01:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649597",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649598.json:
```json
{
    "body": "Changing commit from \"ea8d379c44f783128ddd48a7f6548d94418283b9\" to \"9cae6cbfc8192e24564024cb7d1bf144bf462663\"",
    "created_at": "2022-02-28T01:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649598",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea8d379c44f783128ddd48a7f6548d94418283b9" to "9cae6cbfc8192e24564024cb7d1bf144bf462663"



---

archive/issue_comments_649599.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T01:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649600.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T02:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649601.json:
```json
{
    "body": "Changing commit from \"9cae6cbfc8192e24564024cb7d1bf144bf462663\" to \"3cd71956cba73459df35e7839ebe2392950978bc\"",
    "created_at": "2022-02-28T02:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649601",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9cae6cbfc8192e24564024cb7d1bf144bf462663" to "3cd71956cba73459df35e7839ebe2392950978bc"



---

archive/issue_comments_649602.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649602",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649603.json:
```json
{
    "body": "Changing commit from \"3cd71956cba73459df35e7839ebe2392950978bc\" to \"2445b36d233e59b256b7cb185b0644725bc74b6b\"",
    "created_at": "2022-02-28T03:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649603",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3cd71956cba73459df35e7839ebe2392950978bc" to "2445b36d233e59b256b7cb185b0644725bc74b6b"



---

archive/issue_comments_649604.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649604",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649605.json:
```json
{
    "body": "Changing commit from \"2445b36d233e59b256b7cb185b0644725bc74b6b\" to \"fe0c38823e6ce0bbfccdd4fec96e22f59f852a0b\"",
    "created_at": "2022-02-28T03:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649605",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2445b36d233e59b256b7cb185b0644725bc74b6b" to "fe0c38823e6ce0bbfccdd4fec96e22f59f852a0b"



---

archive/issue_comments_649606.json:
```json
{
    "body": "Changing commit from \"fe0c38823e6ce0bbfccdd4fec96e22f59f852a0b\" to \"e197558d1ef89e72fe7c118f5cb8e9b7aec1f49a\"",
    "created_at": "2022-02-28T03:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fe0c38823e6ce0bbfccdd4fec96e22f59f852a0b" to "e197558d1ef89e72fe7c118f5cb8e9b7aec1f49a"



---

archive/issue_comments_649607.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649607",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649608.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649608",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649609.json:
```json
{
    "body": "Changing commit from \"e197558d1ef89e72fe7c118f5cb8e9b7aec1f49a\" to \"caf233ef157269f0d4a3321208717850d12d666c\"",
    "created_at": "2022-02-28T03:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e197558d1ef89e72fe7c118f5cb8e9b7aec1f49a" to "caf233ef157269f0d4a3321208717850d12d666c"



---

archive/issue_comments_649610.json:
```json
{
    "body": "Changing commit from \"caf233ef157269f0d4a3321208717850d12d666c\" to \"486fafbb7a0c30399199ee924db96c8c8857e8db\"",
    "created_at": "2022-02-28T03:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "caf233ef157269f0d4a3321208717850d12d666c" to "486fafbb7a0c30399199ee924db96c8c8857e8db"



---

archive/issue_comments_649611.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649612.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T03:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649613.json:
```json
{
    "body": "Changing commit from \"486fafbb7a0c30399199ee924db96c8c8857e8db\" to \"adab09fbb47d46d80e90aec53d33cf78adb33ab3\"",
    "created_at": "2022-02-28T03:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "486fafbb7a0c30399199ee924db96c8c8857e8db" to "adab09fbb47d46d80e90aec53d33cf78adb33ab3"



---

archive/issue_comments_649614.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T05:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649615.json:
```json
{
    "body": "Changing commit from \"adab09fbb47d46d80e90aec53d33cf78adb33ab3\" to \"e177b45387f031f3146dafbcd550722790939a5d\"",
    "created_at": "2022-02-28T05:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "adab09fbb47d46d80e90aec53d33cf78adb33ab3" to "e177b45387f031f3146dafbcd550722790939a5d"



---

archive/issue_comments_649616.json:
```json
{
    "body": "<a id='comment:17'></a>Some more parts can be made symbolics-free,\nthough sometimes it makes things convoluted.\n\n**File `src/sage/categories/algebra_functor.py`**\n\nWe can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:\n\n```\n    sage: G = GL(2, 7)\n    sage: K = QuadraticField(5, 'srqt5')\n    sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]\n    sage: OG = GroupAlgebra(G, Zr5)\n    sage: OG(2)\n    2*[1 0]\n    [0 1]\n    sage: OG(G(2))\n    [2 0]\n    [0 2]\n \n    sage: OG(FormalSum([ (1, G(2)), (2, RR(0.77)) ]) )\n    Traceback (most recent call last):\n    ...\n    TypeError: Attempt to coerce non-integral RealNumber to Integer\n    sage: OG(OG.base_ring().basis()[1])\n    sqrt5*[1 0]\n    [0 1]\n```\n\nKeeping the clearer `ZZ[sqrt(5)]` and adding\n`# optional - sage.symbolic` makes sense too.\n\nI wish `sqrt(5)` gave an element in a number field\nor `AA` or `QQbar`, not in the symbolic ring...\n\n**File `src/sage/categories/coxeter_groups.py`**\n\nUsing a polynomial variable can bypass symbolics here:\n\n```diff\n                 sage: W = CoxeterGroups().example()\n-                sage: sum((x^w.length()) for w in W) - expand(prod(sum(x^i for i in range(j+1)) for j in range(4))) # This is scandalously slow!!!  # optional - sage.symbolic\n+                sage: x = polygen(ZZ)\n+                sage: s = sum(x^w.length() for w in W)\n+                sage: p = prod(sum(x^i for i in range(j)) for j in range(1, 5))\n+                sage: s - p\n                 0\n```\n\nThe 2009 \"scandalously slow\" comment can probably go?\n\n**File `src/sage/categories/pushout.py`**\n\nUsing `sqrt(3.)` and `(2.)^(1/3)` makes this symbolics-free:\n\n```diff\n-            sage: K.<a> = NumberField(x^3-2, embedding=CDF(1/2*I*2^(1/3)*sqrt(3) - 1/2*2^(1/3)))\n+            sage: cbrt2 = CDF(2)^(1/3)\n+            sage: zeta3 = CDF(-1/2, sqrt(3.)/2)\n+            sage: K.<a> = NumberField(x^3 - 2, embedding=cbrt2 * zeta3)\n```",
    "created_at": "2022-02-28T21:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649616",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>Some more parts can be made symbolics-free,
though sometimes it makes things convoluted.

**File `src/sage/categories/algebra_functor.py`**

We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:

```
    sage: G = GL(2, 7)
    sage: K = QuadraticField(5, 'srqt5')
    sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]
    sage: OG = GroupAlgebra(G, Zr5)
    sage: OG(2)
    2*[1 0]
    [0 1]
    sage: OG(G(2))
    [2 0]
    [0 2]
 
    sage: OG(FormalSum([ (1, G(2)), (2, RR(0.77)) ]) )
    Traceback (most recent call last):
    ...
    TypeError: Attempt to coerce non-integral RealNumber to Integer
    sage: OG(OG.base_ring().basis()[1])
    sqrt5*[1 0]
    [0 1]
```

Keeping the clearer `ZZ[sqrt(5)]` and adding
`# optional - sage.symbolic` makes sense too.

I wish `sqrt(5)` gave an element in a number field
or `AA` or `QQbar`, not in the symbolic ring...

**File `src/sage/categories/coxeter_groups.py`**

Using a polynomial variable can bypass symbolics here:

```diff
                 sage: W = CoxeterGroups().example()
-                sage: sum((x^w.length()) for w in W) - expand(prod(sum(x^i for i in range(j+1)) for j in range(4))) # This is scandalously slow!!!  # optional - sage.symbolic
+                sage: x = polygen(ZZ)
+                sage: s = sum(x^w.length() for w in W)
+                sage: p = prod(sum(x^i for i in range(j)) for j in range(1, 5))
+                sage: s - p
                 0
```

The 2009 "scandalously slow" comment can probably go?

**File `src/sage/categories/pushout.py`**

Using `sqrt(3.)` and `(2.)^(1/3)` makes this symbolics-free:

```diff
-            sage: K.<a> = NumberField(x^3-2, embedding=CDF(1/2*I*2^(1/3)*sqrt(3) - 1/2*2^(1/3)))
+            sage: cbrt2 = CDF(2)^(1/3)
+            sage: zeta3 = CDF(-1/2, sqrt(3.)/2)
+            sage: K.<a> = NumberField(x^3 - 2, embedding=cbrt2 * zeta3)
```



---

archive/issue_comments_649617.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [slelievre](#comment%3A17):\n> Some more parts can be made symbolics-free,\n> though sometimes it makes things convoluted.\n> \n> **File `src/sage/categories/algebra_functor.py`**\n> \n> We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:\n> \n> \n> ```\n>     sage: G = GL(2, 7)\n>     sage: K = QuadraticField(5, 'srqt5')\n>     sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]\n\n\nOr just `ZZ[AA(5).sqrt()]`",
    "created_at": "2022-02-28T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649617",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [slelievre](#comment%3A17):
> Some more parts can be made symbolics-free,
> though sometimes it makes things convoluted.
> 
> **File `src/sage/categories/algebra_functor.py`**
> 
> We can bypass using `sqrt(5)` to construct `ZZ[sqrt(5)]`:
> 
> 
> ```
>     sage: G = GL(2, 7)
>     sage: K = QuadraticField(5, 'srqt5')
>     sage: Zr5 = K.order(K.gen())  # This is ZZ[sqrt(5)]


Or just `ZZ[AA(5).sqrt()]`



---

archive/issue_comments_649618.json:
```json
{
    "body": "Changing commit from \"e177b45387f031f3146dafbcd550722790939a5d\" to \"bbe19adcd1ba9fd7108104870bb51b7a1b537b7c\"",
    "created_at": "2022-02-28T22:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e177b45387f031f3146dafbcd550722790939a5d" to "bbe19adcd1ba9fd7108104870bb51b7a1b537b7c"



---

archive/issue_comments_649619.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649620.json:
```json
{
    "body": "Changing commit from \"bbe19adcd1ba9fd7108104870bb51b7a1b537b7c\" to \"5d8277123932f491f6134b27e8da349f410e2a24\"",
    "created_at": "2022-02-28T22:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bbe19adcd1ba9fd7108104870bb51b7a1b537b7c" to "5d8277123932f491f6134b27e8da349f410e2a24"



---

archive/issue_comments_649621.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649622.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [slelievre](#comment%3A17):\n> **File `src/sage/categories/coxeter_groups.py`**\n> \n> Using a polynomial variable can bypass symbolics here [...]\n\n\nThanks, I've made a similar change",
    "created_at": "2022-02-28T22:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649622",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Replying to [slelievre](#comment%3A17):
> **File `src/sage/categories/coxeter_groups.py`**
> 
> Using a polynomial variable can bypass symbolics here [...]


Thanks, I've made a similar change



---

archive/issue_comments_649623.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T22:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649624.json:
```json
{
    "body": "Changing commit from \"5d8277123932f491f6134b27e8da349f410e2a24\" to \"38519081315c3fddc3e3522a97cec788013de54c\"",
    "created_at": "2022-02-28T22:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d8277123932f491f6134b27e8da349f410e2a24" to "38519081315c3fddc3e3522a97cec788013de54c"



---

archive/issue_comments_649625.json:
```json
{
    "body": "<a id='comment:23'></a>I like `ZZ[AA(5).sqrt()]` but it does not name\nthe generator `sqrt5` as `ZZ[sqrt(5)]`:\n\n```\nsage: ZZ[sqrt(5)]\nOrder in Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?\nsage: ZZ[AA(5).sqrt()]\nOrder in Number Field in a with defining polynomial x^2 - 5 with a = 2.236067977499790?\n```\nso you need to change:\n\n```diff\n     sage: OG(OG.base_ring().basis()[1])\n-    sqrt5*[1 0]\n+    a*[1 0]\n     [0 1]\n```",
    "created_at": "2022-02-28T23:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649625",
    "user": "https://github.com/slel"
}
```

<a id='comment:23'></a>I like `ZZ[AA(5).sqrt()]` but it does not name
the generator `sqrt5` as `ZZ[sqrt(5)]`:

```
sage: ZZ[sqrt(5)]
Order in Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?
sage: ZZ[AA(5).sqrt()]
Order in Number Field in a with defining polynomial x^2 - 5 with a = 2.236067977499790?
```
so you need to change:

```diff
     sage: OG(OG.base_ring().basis()[1])
-    sqrt5*[1 0]
+    a*[1 0]
     [0 1]
```



---

archive/issue_comments_649626.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-28T23:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649627.json:
```json
{
    "body": "Changing commit from \"38519081315c3fddc3e3522a97cec788013de54c\" to \"595f99aeed0a28c508fbcd57ec907a091d78c9fd\"",
    "created_at": "2022-02-28T23:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "38519081315c3fddc3e3522a97cec788013de54c" to "595f99aeed0a28c508fbcd57ec907a091d78c9fd"



---

archive/issue_comments_649628.json:
```json
{
    "body": "Changing commit from \"595f99aeed0a28c508fbcd57ec907a091d78c9fd\" to \"ed59c28fee0c8db4b9be646ac77ab742c5a293ec\"",
    "created_at": "2022-03-01T06:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "595f99aeed0a28c508fbcd57ec907a091d78c9fd" to "ed59c28fee0c8db4b9be646ac77ab742c5a293ec"



---

archive/issue_comments_649629.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-01T06:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649630.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-01T06:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649631.json:
```json
{
    "body": "Changing commit from \"ed59c28fee0c8db4b9be646ac77ab742c5a293ec\" to \"518bb96718db45e6484db65fc3c7d91e16d21fff\"",
    "created_at": "2022-03-01T06:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ed59c28fee0c8db4b9be646ac77ab742c5a293ec" to "518bb96718db45e6484db65fc3c7d91e16d21fff"



---

archive/issue_comments_649632.json:
```json
{
    "body": "<a id='comment:27'></a>The remaining doctest failure (and the pyflakes warnings) seen in the patchbot run are not from this ticket.",
    "created_at": "2022-03-01T18:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649632",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>The remaining doctest failure (and the pyflakes warnings) seen in the patchbot run are not from this ticket.



---

archive/issue_comments_649633.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2022-03-02T22:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649633",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Samuel Leli√®vre"



---

archive/issue_comments_649634.json:
```json
{
    "body": "Changing commit from \"518bb96718db45e6484db65fc3c7d91e16d21fff\" to \"4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc\"",
    "created_at": "2022-03-08T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "518bb96718db45e6484db65fc3c7d91e16d21fff" to "4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc"



---

archive/issue_comments_649635.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-08T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_649636.json:
```json
{
    "body": "<a id='comment:30'></a>If bots go green or only report errors unrelated to this, positive review.",
    "created_at": "2022-03-09T11:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649636",
    "user": "https://github.com/slel"
}
```

<a id='comment:30'></a>If bots go green or only report errors unrelated to this, positive review.



---

archive/issue_comments_649637.json:
```json
{
    "body": "<a id='comment:31'></a>Patchbot failures and pyflakes warnings are unrelated.",
    "created_at": "2022-03-09T22:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649637",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Patchbot failures and pyflakes warnings are unrelated.



---

archive/issue_comments_649638.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-09T22:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649638",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_649639.json:
```json
{
    "body": "<a id='comment:32'></a>Thank you!",
    "created_at": "2022-03-09T22:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649639",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thank you!



---

archive/issue_comments_649640.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-12T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649640",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_649641.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/remove_more_unnecessary_uses_of_sr_and_symbolic_functions_in_sage_combinat\" to \"4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc\"",
    "created_at": "2022-03-12T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32609#issuecomment-649641",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/remove_more_unnecessary_uses_of_sr_and_symbolic_functions_in_sage_combinat" to "4a1b489ce9a2efdfcbbed0b4415e8bfec451f2dc"



---

archive/issue_events_086411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-12T15:11:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32609#event-86411"
}
```
