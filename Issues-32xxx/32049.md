# Issue 32049: Update FriCAS to 1.3.7

archive/issues_031812.json:
```json
{
    "body": "This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.\n\nTarball: see checksums.ini\n\nNote that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:\n\n- https://fricas.sourceforge.net\n- https://github.com/fricas/fricas/releases\n\nOur last update was to Fricas 1.3.6 in #27309 in 2020.\n\nTo try this ticket from your Sage root directory, with `git-trac-command` installed:\n\n1. `git trac try `\n2. `SAGE_SPKG=\"sage-spkg -o\" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)\n3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`\n\nThis release also fixes #28630\n\nCC:  @slel @fchapoton\n\nKeywords: fricas\n\nBranch/Commit: [2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\n\nReviewer: Dima Pasechnik\n\nAuthor: Martin Rubey\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32049\n\n",
    "closed_at": "2021-07-18T22:53:25Z",
    "created_at": "2021-06-24T11:22:40Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Update FriCAS to 1.3.7",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32049",
    "user": "https://github.com/mantepse"
}
```
This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.

Tarball: see checksums.ini

Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:

- https://fricas.sourceforge.net
- https://github.com/fricas/fricas/releases

Our last update was to Fricas 1.3.6 in #27309 in 2020.

To try this ticket from your Sage root directory, with `git-trac-command` installed:

1. `git trac try `
2. `SAGE_SPKG="sage-spkg -o" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)
3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`

This release also fixes #28630

CC:  @slel @fchapoton

Keywords: fricas

Branch/Commit: [2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)

Reviewer: Dima Pasechnik

Author: Martin Rubey

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32049





---

archive/issue_comments_638128.json:
```json
{
    "body": "<a id='comment:2'></a>\nbranch?",
    "created_at": "2021-06-27T10:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638128",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
branch?



---

archive/issue_comments_638129.json:
```json
{
    "body": "Branch: [u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)",
    "created_at": "2021-07-07T08:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638129",
    "user": "https://github.com/mantepse"
}
```

Branch: [u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)



---

archive/issue_comments_638130.json:
```json
{
    "body": "Commit: [7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638130",
    "user": "https://github.com/mantepse"
}
```

Commit: [7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)



---

archive/issue_comments_638131.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[7eeb80c](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)|`update fricas to 1.3.7`|",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638131",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[7eeb80c](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)|`update fricas to 1.3.7`|



---

archive/issue_comments_638132.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,3 @@\n-A preliminary release branch is at https://sourceforge.net/projects/fricas/files/fricas/1.3.7/fricas-1.3.7-full.tar.bz2\n-\n-\n This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.\n \n Tarball: see checksums.ini\n@@ -8,10 +5,6 @@\n Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:\n \n - https://fricas.sourceforge.net\n-\n-and we still get source tarballs from Sourceforge since those available at GitHub are not the full source archives we need.\n-\n-- http://fricas.sourceforge.net/\n - https://github.com/fricas/fricas/releases\n \n Our last update was to Fricas 1.3.6 in #27309 in 2020.\n@@ -22,3 +15,4 @@\n 2. `SAGE_SPKG=\"sage-spkg -o\" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)\n 3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`\n \n+This release also fixes #28630\n``````\n",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638132",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,3 @@
-A preliminary release branch is at https://sourceforge.net/projects/fricas/files/fricas/1.3.7/fricas-1.3.7-full.tar.bz2
-
-
 This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.
 
 Tarball: see checksums.ini
@@ -8,10 +5,6 @@
 Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:
 
 - https://fricas.sourceforge.net
-
-and we still get source tarballs from Sourceforge since those available at GitHub are not the full source archives we need.
-
-- http://fricas.sourceforge.net/
 - https://github.com/fricas/fricas/releases
 
 Our last update was to Fricas 1.3.6 in #27309 in 2020.
@@ -22,3 +15,4 @@
 2. `SAGE_SPKG="sage-spkg -o" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)
 3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`
 
+This release also fixes #28630
``````




---

archive/issue_comments_638133.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638133",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_638134.json:
```json
{
    "body": "Reviewer: Dima Pasechnik",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638134",
    "user": "https://github.com/dimpase"
}
```

Reviewer: Dima Pasechnik



---

archive/issue_comments_638135.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638135",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_638136.json:
```json
{
    "body": "<a id='comment:5'></a>\nlgtm",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638136",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
lgtm



---

archive/issue_comments_638137.json:
```json
{
    "body": "<a id='comment:6'></a>\ndoes not build on macOS:\n\n```\n[fricas-1.3.7.p1] No legacy uninstaller found for 'fricas'; nothing to do\n[fricas-1.3.7.p1] Configuring fricas-1.3.7.p1\n[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static, --disable-maintainer-mode, --disable-dependency-tracking\n[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.\n[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static\n[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.\n[fricas-1.3.7.p1] ********************************************************************************\n[fricas-1.3.7.p1] Error configuring fricas-1.3.7.p1 See the file\n```",
    "created_at": "2021-07-08T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638137",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
does not build on macOS:

```
[fricas-1.3.7.p1] No legacy uninstaller found for 'fricas'; nothing to do
[fricas-1.3.7.p1] Configuring fricas-1.3.7.p1
[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static, --disable-maintainer-mode, --disable-dependency-tracking
[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.
[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static
[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.
[fricas-1.3.7.p1] ********************************************************************************
[fricas-1.3.7.p1] Error configuring fricas-1.3.7.p1 See the file
```



---

archive/issue_comments_638138.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-08T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638138",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_638139.json:
```json
{
    "body": "<a id='comment:7'></a>\nI do not have access to macOS, can you do something about this?  Or do you know who could?",
    "created_at": "2021-07-08T13:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638139",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:7'></a>
I do not have access to macOS, can you do something about this?  Or do you know who could?



---

archive/issue_comments_638140.json:
```json
{
    "body": "<a id='comment:8'></a>\ntrying to fix it now. Probably it's a red herring (see https://github.com/fricas/fricas/issues/38), but it needs a patch. I've disabled the test in question and checking if it still works.",
    "created_at": "2021-07-08T13:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638140",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
trying to fix it now. Probably it's a red herring (see https://github.com/fricas/fricas/issues/38), but it needs a patch. I've disabled the test in question and checking if it still works.



---

archive/issue_comments_638141.json:
```json
{
    "body": "<a id='comment:9'></a>\nbuilds and tests fine with\n\n```diff\n--- /dev/null\n+++ b/build/pkgs/fricas/patches/remove_case_insensitive_test.patch\n@@ -0,0 +1,13 @@\n+diff --git a/configure b/configure\n+index a49f75a..960d412 100755\n+--- a/configure\n++++ b/configure\n+@@ -2470,7 +2470,7 @@ fi\n+ \n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for in-tree build on case insensitive file system\" >&5\n+ $as_echo_n \"checking for in-tree build on case insensitive file system... \" >&6; }\n+-if test \"$fricas_top_srcdir\" = \"$fricas_pwd\"; then\n++if test \"$fricas_top_srcdir\" = xfoobla; then\n+    rm -f ac_TEST_filenames_CASE_sensitive ac_test_filenames_case_sensitive\n+    echo foo > ac_test_filenames_case_sensitive\n+    if test -f ac_TEST_filenames_CASE_sensitive; then\n```",
    "created_at": "2021-07-08T13:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638141",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
builds and tests fine with

```diff
--- /dev/null
+++ b/build/pkgs/fricas/patches/remove_case_insensitive_test.patch
@@ -0,0 +1,13 @@
+diff --git a/configure b/configure
+index a49f75a..960d412 100755
+--- a/configure
++++ b/configure
+@@ -2470,7 +2470,7 @@ fi
+ 
+ { $as_echo "$as_me:${as_lineno-$LINENO}: checking for in-tree build on case insensitive file system" >&5
+ $as_echo_n "checking for in-tree build on case insensitive file system... " >&6; }
+-if test "$fricas_top_srcdir" = "$fricas_pwd"; then
++if test "$fricas_top_srcdir" = xfoobla; then
+    rm -f ac_TEST_filenames_CASE_sensitive ac_test_filenames_case_sensitive
+    echo foo > ac_test_filenames_case_sensitive
+    if test -f ac_TEST_filenames_CASE_sensitive; then
```



---

archive/issue_comments_638142.json:
```json
{
    "body": "<a id='comment:10'></a>\nOK, this will do.\n\n---\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[2619149](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)|`disable insensitivity of FS check`|",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638142",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
OK, this will do.

---
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[2619149](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)|`disable insensitivity of FS check`|



---

archive/issue_comments_638143.json:
```json
{
    "body": "Changing commit from \"[7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)\" to \"[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\"",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638143",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "[7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)" to "[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)"



---

archive/issue_comments_638144.json:
```json
{
    "body": "Changing branch from \"[u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)\" to \"[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)\"",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638144",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "[u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)" to "[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)"



---

archive/issue_comments_638145.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638145",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_638146.json:
```json
{
    "body": "<a id='comment:11'></a>\nThank you!",
    "created_at": "2021-07-08T15:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638146",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:11'></a>
Thank you!



---

archive/issue_comments_638147.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-18T22:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638147",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_095413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-18T22:53:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32049#event-95413"
}
```



---

archive/issue_comments_638148.json:
```json
{
    "body": "Changing branch from \"[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)\" to \"[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\"",
    "created_at": "2021-07-18T22:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638148",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)" to "[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)"
