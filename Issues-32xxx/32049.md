# Issue 32049: Update FriCAS to 1.3.7

archive/issues_031812.json:
```json
{
    "body": "This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.\n\nTarball: see checksums.ini\n\nNote that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:\n\n- https://fricas.sourceforge.net\n- https://github.com/fricas/fricas/releases\n\nOur last update was to Fricas 1.3.6 in #27309 in 2020.\n\nTo try this ticket from your Sage root directory, with `git-trac-command` installed:\n\n1. `git trac try `\n2. `SAGE_SPKG=\"sage-spkg -o\" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)\n3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`\n\nThis release also fixes #28630\n\n**CC:**  @slel @fchapoton\n\n**Keywords:** fricas\n\n**Branch/Commit:** [2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Martin Rubey\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32049\n\n",
    "closed_at": "2021-07-18T22:53:25Z",
    "created_at": "2021-06-24T11:22:40Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Update FriCAS to 1.3.7",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32049",
    "user": "https://github.com/mantepse"
}
```
This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.

Tarball: see checksums.ini

Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:

- https://fricas.sourceforge.net
- https://github.com/fricas/fricas/releases

Our last update was to Fricas 1.3.6 in #27309 in 2020.

To try this ticket from your Sage root directory, with `git-trac-command` installed:

1. `git trac try `
2. `SAGE_SPKG="sage-spkg -o" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)
3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`

This release also fixes #28630

**CC:**  @slel @fchapoton

**Keywords:** fricas

**Branch/Commit:** [2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)

**Reviewer:** Dima Pasechnik

**Author:** Martin Rubey

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/32049





---

archive/issue_comments_638102.json:
```json
{
    "body": "<a id='comment:2'></a>\nbranch?",
    "created_at": "2021-06-27T10:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638102",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:2'></a>
branch?



---

archive/issue_comments_638103.json:
```json
{
    "body": "**Branch:** [u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)",
    "created_at": "2021-07-07T08:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638103",
    "user": "https://github.com/mantepse"
}
```


**Branch:** [u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)



---

archive/issue_comments_638104.json:
```json
{
    "body": "**Commit:** [7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638104",
    "user": "https://github.com/mantepse"
}
```


**Commit:** [7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)



---

archive/issue_comments_638105.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52\">7eeb80c</a></td><td><code>update fricas to 1.3.7</code></td></tr></table>\n",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638105",
    "user": "https://github.com/mantepse"
}
```


<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52">7eeb80c</a></td><td><code>update fricas to 1.3.7</code></td></tr></table>




---

archive/issue_comments_638106.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,3 @@\n-A preliminary release branch is at https://sourceforge.net/projects/fricas/files/fricas/1.3.7/fricas-1.3.7-full.tar.bz2\n-\n-\n This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.\n \n Tarball: see checksums.ini\n@@ -8,10 +5,6 @@\n Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:\n \n - https://fricas.sourceforge.net\n-\n-and we still get source tarballs from Sourceforge since those available at GitHub are not the full source archives we need.\n-\n-- http://fricas.sourceforge.net/\n - https://github.com/fricas/fricas/releases\n \n Our last update was to Fricas 1.3.6 in #27309 in 2020.\n@@ -22,3 +15,4 @@\n 2. `SAGE_SPKG=\"sage-spkg -o\" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)\n 3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`\n \n+This release also fixes #28630\n``````\n",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638106",
    "user": "https://github.com/mantepse"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,3 @@
-A preliminary release branch is at https://sourceforge.net/projects/fricas/files/fricas/1.3.7/fricas-1.3.7-full.tar.bz2
-
-
 This ticket is to upgrade to FriCAS 1.3.7 and track dependencies.
 
 Tarball: see checksums.ini
@@ -8,10 +5,6 @@
 Note that FriCAS has switched to using Git and the primary repository is now the one at GitHub, but the homepage remains at Sourceforge:
 
 - https://fricas.sourceforge.net
-
-and we still get source tarballs from Sourceforge since those available at GitHub are not the full source archives we need.
-
-- http://fricas.sourceforge.net/
 - https://github.com/fricas/fricas/releases
 
 Our last update was to Fricas 1.3.6 in #27309 in 2020.
@@ -22,3 +15,4 @@
 2. `SAGE_SPKG="sage-spkg -o" ./sage -i fricas` (or use `./configure --enable-download-from-upstream-url` first)
 3. `./sage -t --optional=fricas,sage src/sage/interfaces/fricas.py`
 
+This release also fixes #28630
``````




---

archive/issue_comments_638107.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-07-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638107",
    "user": "https://github.com/mantepse"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_638108.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638108",
    "user": "https://github.com/dimpase"
}
```


**Reviewer:** Dima Pasechnik



---

archive/issue_comments_638109.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638109",
    "user": "https://github.com/dimpase"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_comments_638110.json:
```json
{
    "body": "<a id='comment:5'></a>\nlgtm",
    "created_at": "2021-07-08T08:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638110",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:5'></a>
lgtm



---

archive/issue_comments_638111.json:
```json
{
    "body": "<a id='comment:6'></a>\ndoes not build on macOS:\n\n```\n[fricas-1.3.7.p1] No legacy uninstaller found for 'fricas'; nothing to do\n[fricas-1.3.7.p1] Configuring fricas-1.3.7.p1\n[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static, --disable-maintainer-mode, --disable-dependency-tracking\n[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.\n[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static\n[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0\n[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.\n[fricas-1.3.7.p1] ********************************************************************************\n[fricas-1.3.7.p1] Error configuring fricas-1.3.7.p1 See the file\n```",
    "created_at": "2021-07-08T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638111",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:6'></a>
does not build on macOS:

```
[fricas-1.3.7.p1] No legacy uninstaller found for 'fricas'; nothing to do
[fricas-1.3.7.p1] Configuring fricas-1.3.7.p1
[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static, --disable-maintainer-mode, --disable-dependency-tracking
[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.
[fricas-1.3.7.p1] configure: WARNING: unrecognized options: --disable-static
[fricas-1.3.7.p1] checking build system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking host system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking target system type... x86_64-apple-darwin20.5.0
[fricas-1.3.7.p1] checking for in-tree build on case insensitive file system... configure: error: in tree build on case insensitive file system is not supported. Use out-of-source build instead.
[fricas-1.3.7.p1] ********************************************************************************
[fricas-1.3.7.p1] Error configuring fricas-1.3.7.p1 See the file
```



---

archive/issue_comments_638112.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-07-08T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638112",
    "user": "https://github.com/dimpase"
}
```


**Changing status** from positive_review to needs_work.



---

archive/issue_comments_638113.json:
```json
{
    "body": "<a id='comment:7'></a>\nI do not have access to macOS, can you do something about this?  Or do you know who could?",
    "created_at": "2021-07-08T13:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638113",
    "user": "https://github.com/mantepse"
}
```


<a id='comment:7'></a>
I do not have access to macOS, can you do something about this?  Or do you know who could?



---

archive/issue_comments_638114.json:
```json
{
    "body": "<a id='comment:8'></a>\ntrying to fix it now. Probably it's a red herring (see https://github.com/fricas/fricas/issues/38), but it needs a patch. I've disabled the test in question and checking if it still works.",
    "created_at": "2021-07-08T13:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638114",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:8'></a>
trying to fix it now. Probably it's a red herring (see https://github.com/fricas/fricas/issues/38), but it needs a patch. I've disabled the test in question and checking if it still works.



---

archive/issue_comments_638115.json:
```json
{
    "body": "<a id='comment:9'></a>\nbuilds and tests fine with\n\n```diff\n--- /dev/null\n+++ b/build/pkgs/fricas/patches/remove_case_insensitive_test.patch\n@@ -0,0 +1,13 @@\n+diff --git a/configure b/configure\n+index a49f75a..960d412 100755\n+--- a/configure\n++++ b/configure\n+@@ -2470,7 +2470,7 @@ fi\n+ \n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for in-tree build on case insensitive file system\" >&5\n+ $as_echo_n \"checking for in-tree build on case insensitive file system... \" >&6; }\n+-if test \"$fricas_top_srcdir\" = \"$fricas_pwd\"; then\n++if test \"$fricas_top_srcdir\" = xfoobla; then\n+    rm -f ac_TEST_filenames_CASE_sensitive ac_test_filenames_case_sensitive\n+    echo foo > ac_test_filenames_case_sensitive\n+    if test -f ac_TEST_filenames_CASE_sensitive; then\n```",
    "created_at": "2021-07-08T13:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638115",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:9'></a>
builds and tests fine with

```diff
--- /dev/null
+++ b/build/pkgs/fricas/patches/remove_case_insensitive_test.patch
@@ -0,0 +1,13 @@
+diff --git a/configure b/configure
+index a49f75a..960d412 100755
+--- a/configure
++++ b/configure
+@@ -2470,7 +2470,7 @@ fi
+ 
+ { $as_echo "$as_me:${as_lineno-$LINENO}: checking for in-tree build on case insensitive file system" >&5
+ $as_echo_n "checking for in-tree build on case insensitive file system... " >&6; }
+-if test "$fricas_top_srcdir" = "$fricas_pwd"; then
++if test "$fricas_top_srcdir" = xfoobla; then
+    rm -f ac_TEST_filenames_CASE_sensitive ac_test_filenames_case_sensitive
+    echo foo > ac_test_filenames_case_sensitive
+    if test -f ac_TEST_filenames_CASE_sensitive; then
```



---

archive/issue_comments_638116.json:
```json
{
    "body": "<a id='comment:10'></a>\nOK, this will do.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0\">2619149</a></td><td><code>disable insensitivity of FS check</code></td></tr></table>\n",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638116",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:10'></a>
OK, this will do.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0">2619149</a></td><td><code>disable insensitivity of FS check</code></td></tr></table>




---

archive/issue_comments_638117.json:
```json
{
    "body": "**Changing commit** from \"[7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)\" to \"[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\".",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638117",
    "user": "https://github.com/dimpase"
}
```


**Changing commit** from "[7eeb80c9e1b4e656e0616d157fbc16b31f94ba52](https://github.com/sagemath/sagetrac-mirror/commit/7eeb80c9e1b4e656e0616d157fbc16b31f94ba52)" to "[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)".



---

archive/issue_comments_638118.json:
```json
{
    "body": "**Changing branch** from \"[u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)\" to \"[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)\".",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638118",
    "user": "https://github.com/dimpase"
}
```


**Changing branch** from "[u/mantepse/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/update_fricas_to_1_3_7)" to "[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)".



---

archive/issue_comments_638119.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2021-07-08T14:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638119",
    "user": "https://github.com/dimpase"
}
```


**Changing status** from needs_work to positive_review.



---

archive/issue_comments_638120.json:
```json
{
    "body": "<a id='comment:11'></a>\nThank you!",
    "created_at": "2021-07-08T15:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638120",
    "user": "https://github.com/mantepse"
}
```


<a id='comment:11'></a>
Thank you!



---

archive/issue_comments_638121.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-07-18T22:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638121",
    "user": "https://github.com/vbraun"
}
```


**Resolution:** fixed



---

archive/issue_events_095413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-18T22:53:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32049#event-95413"
}
```




---

archive/issue_comments_638122.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)\" to \"[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)\".",
    "created_at": "2021-07-18T22:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32049#issuecomment-638122",
    "user": "https://github.com/vbraun"
}
```


**Changing branch** from "[u/dimpase/update_fricas_to_1_3_7](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/update_fricas_to_1_3_7)" to "[2619149521420ed65a4207630102067f856825a0](https://github.com/sagemath/sagetrac-mirror/commit/2619149521420ed65a4207630102067f856825a0)".
