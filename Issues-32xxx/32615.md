# Issue 32615: Faster arithmetic with function field ideals

archive/issues_032378.json:
```json
{
    "body": "We make ideal arithmetic faster for ideals with two-generators representation.\n \n```sage\nsage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]\n....: L.<y> = K.extension(Y^7 - x^3*Y - x)\n....: O = L.maximal_order()\n....: I = O.ideal(y)\n....: J = O.ideal(x + y)\nsage: def naive_power(i, n):\n....:     j = i\n....:     for s in range(n - 1):\n....:         j *= i\n....:     return j\n....: \nsage: n = 100\nsage: i = I / J\nsage: %timeit naive_power(i, n)\n683 ms \u00b1 8.82 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\nsage: %timeit i^n\n34.3 ms \u00b1 454 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: p, q = i.gens_two()\nsage: %timeit naive_power(i, n)  # faster multiplication\n147 ms \u00b1 4.08 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\nsage: %timeit i^n                # faster powering\n16.2 ms \u00b1 149 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\nsage: naive_power(i, n) == i^n\nTrue\n```\n\nBranch/Commit: 0a77fa52ca71ec76aca7ad9a7867b66828e6c761\n\nReviewer: Travis Scrimshaw\n\nAuthor: Kwankyu Lee\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32615\n\n",
    "closed_at": "2021-10-13T22:50:08Z",
    "created_at": "2021-10-03T01:32:28Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Faster arithmetic with function field ideals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32615",
    "user": "https://github.com/kwankyu"
}
```
We make ideal arithmetic faster for ideals with two-generators representation.
 
```sage
sage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]
....: L.<y> = K.extension(Y^7 - x^3*Y - x)
....: O = L.maximal_order()
....: I = O.ideal(y)
....: J = O.ideal(x + y)
sage: def naive_power(i, n):
....:     j = i
....:     for s in range(n - 1):
....:         j *= i
....:     return j
....: 
sage: n = 100
sage: i = I / J
sage: %timeit naive_power(i, n)
683 ms ± 8.82 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit i^n
34.3 ms ± 454 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: p, q = i.gens_two()
sage: %timeit naive_power(i, n)  # faster multiplication
147 ms ± 4.08 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
sage: %timeit i^n                # faster powering
16.2 ms ± 149 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: naive_power(i, n) == i^n
True
```

Branch/Commit: 0a77fa52ca71ec76aca7ad9a7867b66828e6c761

Reviewer: Travis Scrimshaw

Author: Kwankyu Lee

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32615





---

archive/issue_comments_649907.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2021-10-03T01:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649907",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_649908.json:
```json
{
    "body": "Changing branch from \"\" to \"u/klee/32615\"",
    "created_at": "2021-10-03T01:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649908",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "u/klee/32615"



---

archive/issue_comments_649909.json:
```json
{
    "body": "Changing commit from \"\" to \"a16530020d7b48e53616880f4987139d1fac749c\"",
    "created_at": "2021-10-03T01:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649909",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "a16530020d7b48e53616880f4987139d1fac749c"



---

archive/issue_comments_649910.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[a165300](https://github.com/sagemath/sagetrac-mirror/commit/a16530020d7b48e53616880f4987139d1fac749c)|`Speed up ideal multiplication`|",
    "created_at": "2021-10-03T01:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[a165300](https://github.com/sagemath/sagetrac-mirror/commit/a16530020d7b48e53616880f4987139d1fac749c)|`Speed up ideal multiplication`|



---

archive/issue_comments_649911.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-03T01:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649911",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_649912.json:
```json
{
    "body": "<a id='comment:4'></a>\nOne trivial little change:\n\n```diff\n      def _gens_two(self):\n-         \"\"\"\n+         r\"\"\"\n```\nOnce done, you can set a positive review on my behalf.\n\nI do find this line\n\n```\nif len(self._gens_two.cache) == 2:\n```\nto be a little strange though.",
    "created_at": "2021-10-03T08:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649912",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
One trivial little change:

```diff
      def _gens_two(self):
-         """
+         r"""
```
Once done, you can set a positive review on my behalf.

I do find this line

```
if len(self._gens_two.cache) == 2:
```
to be a little strange though.



---

archive/issue_comments_649913.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-10-03T08:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649913",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_649914.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[5d190dd](https://github.com/sagemath/sagetrac-mirror/commit/5d190dd754444367f9728bc24d0f1616502aa3a2)|`Use raw docstring to prevent invalid escape warning`|",
    "created_at": "2021-10-03T09:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[5d190dd](https://github.com/sagemath/sagetrac-mirror/commit/5d190dd754444367f9728bc24d0f1616502aa3a2)|`Use raw docstring to prevent invalid escape warning`|



---

archive/issue_comments_649915.json:
```json
{
    "body": "Changing commit from \"a16530020d7b48e53616880f4987139d1fac749c\" to \"5d190dd754444367f9728bc24d0f1616502aa3a2\"",
    "created_at": "2021-10-03T09:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a16530020d7b48e53616880f4987139d1fac749c" to "5d190dd754444367f9728bc24d0f1616502aa3a2"



---

archive/issue_comments_649916.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We make ideal arithmetic faster for ideals with two generator representations.\n+We make ideal arithmetic faster for ideals with two-generators representation.\n  \n ```sage\n sage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]\n``````\n",
    "created_at": "2021-10-03T09:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649916",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We make ideal arithmetic faster for ideals with two generator representations.
+We make ideal arithmetic faster for ideals with two-generators representation.
  
 ```sage
 sage: K.<x> = FunctionField(GF(2)); _.<Y> = K[]
``````




---

archive/issue_comments_649917.json:
```json
{
    "body": "Changing commit from \"5d190dd754444367f9728bc24d0f1616502aa3a2\" to \"0a77fa52ca71ec76aca7ad9a7867b66828e6c761\"",
    "created_at": "2021-10-03T09:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d190dd754444367f9728bc24d0f1616502aa3a2" to "0a77fa52ca71ec76aca7ad9a7867b66828e6c761"



---

archive/issue_comments_649918.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[0a77fa5](https://github.com/sagemath/sagetrac-mirror/commit/0a77fa52ca71ec76aca7ad9a7867b66828e6c761)|`Drop use of _gens_two.cache`|",
    "created_at": "2021-10-03T09:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[0a77fa5](https://github.com/sagemath/sagetrac-mirror/commit/0a77fa52ca71ec76aca7ad9a7867b66828e6c761)|`Drop use of _gens_two.cache`|



---

archive/issue_comments_649919.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [tscrim](#comment%3A4):\n\nSorry for the mess. I somehow lost a commit that I thought I uploaded.\n\n> One trivial little change:\n> \n> ```diff\n>       def _gens_two(self):\n> -         \"\"\"\n> +         r\"\"\"\n> ```\n> Once done, you can set a positive review on my behalf.\n\n\nDone now.\n\n> I do find this line\n> \n> ```\n> if len(self._gens_two.cache) == 2:\n> ```\n> to be a little strange though.\n\n\nI had deleted this in the lost commit. Now done again.\n\nI will wait for a green bot. Thank you for quick review.",
    "created_at": "2021-10-03T09:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649919",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
Replying to [tscrim](#comment%3A4):

Sorry for the mess. I somehow lost a commit that I thought I uploaded.

> One trivial little change:
> 
> ```diff
>       def _gens_two(self):
> -         """
> +         r"""
> ```
> Once done, you can set a positive review on my behalf.


Done now.

> I do find this line
> 
> ```
> if len(self._gens_two.cache) == 2:
> ```
> to be a little strange though.


I had deleted this in the lost commit. Now done again.

I will wait for a green bot. Thank you for quick review.



---

archive/issue_comments_649920.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks. Sounds good. Green bot => positive review.",
    "created_at": "2021-10-03T11:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649920",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Thanks. Sounds good. Green bot => positive review.



---

archive/issue_comments_649921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-03T13:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649921",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_649922.json:
```json
{
    "body": "Changing branch from \"u/klee/32615\" to \"0a77fa52ca71ec76aca7ad9a7867b66828e6c761\"",
    "created_at": "2021-10-13T22:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649922",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/klee/32615" to "0a77fa52ca71ec76aca7ad9a7867b66828e6c761"



---

archive/issue_comments_649923.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-13T22:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32615#issuecomment-649923",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_097190.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-13T22:50:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32615",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32615#event-97190"
}
```
