# Issue 32215: Asymptotic Term Monoids: refactor element construction

archive/issues_031978.json:
```json
{
    "body": "In #31933 conversion fails. In order to fix this properly, a refactor of the conversion process seems the best solution. This ticket does this (without fixing the open issue on #31933 which will be a follow up).\n\n**CC:**  @cheuberg @behackl @thhagelmayer\n\n**Keywords:** gsoc2021\n\n**Branch/Commit:** [89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)\n\n**Reviewer:** Benjamin Hackl\n\n**Author:** Daniel Krenn\n\n**Dependencies:** #32214\n\nIssue created by migration from https://trac.sagemath.org/ticket/32215\n\n",
    "closed_at": "2021-12-12T15:08:54Z",
    "created_at": "2021-07-16T19:55:19Z",
    "labels": [
        "component: asymptotic expansions",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Asymptotic Term Monoids: refactor element construction",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32215",
    "user": "https://github.com/dkrenn"
}
```
In #31933 conversion fails. In order to fix this properly, a refactor of the conversion process seems the best solution. This ticket does this (without fixing the open issue on #31933 which will be a follow up).

**CC:**  @cheuberg @behackl @thhagelmayer

**Keywords:** gsoc2021

**Branch/Commit:** [89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)

**Reviewer:** Benjamin Hackl

**Author:** Daniel Krenn

**Dependencies:** #32214

Issue created by migration from https://trac.sagemath.org/ticket/32215





---

archive/issue_comments_613076.json:
```json
{
    "body": "**Branch:** [u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)",
    "created_at": "2021-07-16T20:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613076",
    "user": "https://github.com/dkrenn"
}
```

**Branch:** [u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)



---

archive/issue_comments_613077.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-07-16T20:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613077",
    "user": "https://github.com/dkrenn"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_613078.json:
```json
{
    "body": "**Dependencies:** #32214",
    "created_at": "2021-07-16T20:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613078",
    "user": "https://github.com/dkrenn"
}
```

**Dependencies:** #32214



---

archive/issue_comments_613079.json:
```json
{
    "body": "**Commit:** [c805fc19b60e9ac4ff028f63d4c687cb4d50bca2](https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2)",
    "created_at": "2021-07-16T20:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613079",
    "user": "https://github.com/dkrenn"
}
```

**Commit:** [c805fc19b60e9ac4ff028f63d4c687cb4d50bca2](https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2)



---

archive/issue_comments_613080.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9061510ffa10f76c4f2f7f984366b8be8974ed5a\">9061510</a></td><td><code>add `_repr_` for TermWithCoefficientMonoid</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0b6a1e235cb112b5a00b810cfd9cd0c65ea2521\">a0b6a1e</a></td><td><code>update and unify GenericTermMonoid _repr_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4062f9ae87745b2af9b6c2f12aa33519010a1080\">4062f9a</a></td><td><code>refactor element construction in term monoids</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2\">c805fc1</a></td><td><code>Trac #32215: deprecate positional \"coefficient\" argument</code></td></tr></table>\n",
    "created_at": "2021-07-16T20:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613080",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9061510ffa10f76c4f2f7f984366b8be8974ed5a">9061510</a></td><td><code>add `_repr_` for TermWithCoefficientMonoid</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0b6a1e235cb112b5a00b810cfd9cd0c65ea2521">a0b6a1e</a></td><td><code>update and unify GenericTermMonoid _repr_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4062f9ae87745b2af9b6c2f12aa33519010a1080">4062f9a</a></td><td><code>refactor element construction in term monoids</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2">c805fc1</a></td><td><code>Trac #32215: deprecate positional "coefficient" argument</code></td></tr></table>




---

archive/issue_comments_613081.json:
```json
{
    "body": "**Author:** Daniel Krenn",
    "created_at": "2021-07-16T20:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613081",
    "user": "https://github.com/dkrenn"
}
```

**Author:** Daniel Krenn



---

archive/issue_comments_613082.json:
```json
{
    "body": "<a id='comment:3'></a>\nReview recommendation: commit-wise",
    "created_at": "2021-07-16T20:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613082",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:3'></a>
Review recommendation: commit-wise



---

archive/issue_comments_613083.json:
```json
{
    "body": "**Changing commit** from \"[c805fc19b60e9ac4ff028f63d4c687cb4d50bca2](https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2)\" to \"[f76b7e7ef42e8cf09301cc38277a11024e210f1d](https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d)\".",
    "created_at": "2021-07-17T10:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c805fc19b60e9ac4ff028f63d4c687cb4d50bca2](https://github.com/sagemath/sagetrac-mirror/commit/c805fc19b60e9ac4ff028f63d4c687cb4d50bca2)" to "[f76b7e7ef42e8cf09301cc38277a11024e210f1d](https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d)".



---

archive/issue_comments_613084.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d\">f76b7e7</a></td><td><code>Trac #32215: use defaults of super class</code></td></tr></table>\n",
    "created_at": "2021-07-17T10:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d">f76b7e7</a></td><td><code>Trac #32215: use defaults of super class</code></td></tr></table>




---

archive/issue_comments_613085.json:
```json
{
    "body": "**Changing commit** from \"[f76b7e7ef42e8cf09301cc38277a11024e210f1d](https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d)\" to \"[c4792672602326a9cc615fb0060d5e09a20d69dd](https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd)\".",
    "created_at": "2021-07-18T11:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f76b7e7ef42e8cf09301cc38277a11024e210f1d](https://github.com/sagemath/sagetrac-mirror/commit/f76b7e7ef42e8cf09301cc38277a11024e210f1d)" to "[c4792672602326a9cc615fb0060d5e09a20d69dd](https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd)".



---

archive/issue_comments_613086.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c98180548fde5d14ff8999c89bd39b60b5640436\">c981805</a></td><td><code>Trac #32215: unify docstrings of .construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd\">c479267</a></td><td><code>Trac #32215: remove caching from _default_kwds_construction_</code></td></tr></table>\n",
    "created_at": "2021-07-18T11:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c98180548fde5d14ff8999c89bd39b60b5640436">c981805</a></td><td><code>Trac #32215: unify docstrings of .construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd">c479267</a></td><td><code>Trac #32215: remove caching from _default_kwds_construction_</code></td></tr></table>




---

archive/issue_comments_613087.json:
```json
{
    "body": "**Changing commit** from \"[c4792672602326a9cc615fb0060d5e09a20d69dd](https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd)\" to \"[3c5c0f0d88eec1853137f15466f254c378b32b5d](https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d)\".",
    "created_at": "2021-07-18T14:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c4792672602326a9cc615fb0060d5e09a20d69dd](https://github.com/sagemath/sagetrac-mirror/commit/c4792672602326a9cc615fb0060d5e09a20d69dd)" to "[3c5c0f0d88eec1853137f15466f254c378b32b5d](https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d)".



---

archive/issue_comments_613088.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d\">3c5c0f0</a></td><td><code>fix coercion related to absorbtion</code></td></tr></table>\n",
    "created_at": "2021-07-18T14:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d">3c5c0f0</a></td><td><code>fix coercion related to absorbtion</code></td></tr></table>




---

archive/issue_comments_613089.json:
```json
{
    "body": "**Changing branch** from \"[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)\" to \"[u/behackl/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/refactor-element-construction-term-monoids)\".",
    "created_at": "2021-07-22T11:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613089",
    "user": "https://github.com/behackl"
}
```

**Changing branch** from "[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)" to "[u/behackl/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/refactor-element-construction-term-monoids)".



---

archive/issue_comments_613090.json:
```json
{
    "body": "**Changing commit** from \"[3c5c0f0d88eec1853137f15466f254c378b32b5d](https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d)\" to \"[1975a10ac0f58240e195e66cf08c6105ad125a7e](https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e)\".",
    "created_at": "2021-07-22T11:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613090",
    "user": "https://github.com/behackl"
}
```

**Changing commit** from "[3c5c0f0d88eec1853137f15466f254c378b32b5d](https://github.com/sagemath/sagetrac-mirror/commit/3c5c0f0d88eec1853137f15466f254c378b32b5d)" to "[1975a10ac0f58240e195e66cf08c6105ad125a7e](https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e)".



---

archive/issue_comments_613091.json:
```json
{
    "body": "<a id='comment:9'></a>\nHere are some minor points that should be addressed: \n\n1. The new exceptions caused by ambiguously passing additional `growth` and `coefficient` keyword arguments should be tested.\n\n2. Is there a particular reason for changing the implementation of `OTerm.can_absorb`?\n\n3. The implementations of `TermWithCoefficientMonoid._convert_construction_` and `ExactTermMonoid._convert_construction_` are identical. I think the tests contained in the docstring of `ExactTermMonoid._convert_construction_` should be moved to `TermWithCoefficientMonoid._convert_construction_` and the separate implementation of `ExactTermMonoid._convert_construction_` should be removed.\n\n\nOtherwise, the proposed changes look good to me. Here are the changes I've made in my reviewer commits:\n\n- the `cached_method` import was unused and is now removed.\n\n- The `EXAMPLES` block in some newly added methods used `TermMonoidFactory` to manually construct a factory, I've changed it to `from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid` (also see #32032).\n\n- Language improvements for the error messages and the deprecation warning in `GenericTermMonoid._element_constructor`.\n \n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc7b2bc56ad6541bd8a8e5adf55e698915fad6dc\">bc7b2bc</a></td><td><code>removed superfluous import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7cefd91f1218a4253920b32f21ac06dd0c828e2\">d7cefd9</a></td><td><code>minor language improvements for docstrings and deprecation warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e\">1975a10</a></td><td><code>changed doctests of new methods to use DefaultTermMonoidFactory</code></td></tr></table>\n",
    "created_at": "2021-07-22T11:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613091",
    "user": "https://github.com/behackl"
}
```

<a id='comment:9'></a>
Here are some minor points that should be addressed: 

1. The new exceptions caused by ambiguously passing additional `growth` and `coefficient` keyword arguments should be tested.

2. Is there a particular reason for changing the implementation of `OTerm.can_absorb`?

3. The implementations of `TermWithCoefficientMonoid._convert_construction_` and `ExactTermMonoid._convert_construction_` are identical. I think the tests contained in the docstring of `ExactTermMonoid._convert_construction_` should be moved to `TermWithCoefficientMonoid._convert_construction_` and the separate implementation of `ExactTermMonoid._convert_construction_` should be removed.


Otherwise, the proposed changes look good to me. Here are the changes I've made in my reviewer commits:

- the `cached_method` import was unused and is now removed.

- The `EXAMPLES` block in some newly added methods used `TermMonoidFactory` to manually construct a factory, I've changed it to `from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid` (also see #32032).

- Language improvements for the error messages and the deprecation warning in `GenericTermMonoid._element_constructor`.
 
---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc7b2bc56ad6541bd8a8e5adf55e698915fad6dc">bc7b2bc</a></td><td><code>removed superfluous import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7cefd91f1218a4253920b32f21ac06dd0c828e2">d7cefd9</a></td><td><code>minor language improvements for docstrings and deprecation warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e">1975a10</a></td><td><code>changed doctests of new methods to use DefaultTermMonoidFactory</code></td></tr></table>




---

archive/issue_comments_613092.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-07-22T11:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613092",
    "user": "https://github.com/behackl"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_613093.json:
```json
{
    "body": "**Reviewer:** Benjamin Hackl",
    "created_at": "2021-07-22T11:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613093",
    "user": "https://github.com/behackl"
}
```

**Reviewer:** Benjamin Hackl



---

archive/issue_comments_613094.json:
```json
{
    "body": "**Changing branch** from \"[u/behackl/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/refactor-element-construction-term-monoids)\" to \"[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)\".",
    "created_at": "2021-08-07T16:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613094",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing branch** from "[u/behackl/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/refactor-element-construction-term-monoids)" to "[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)".



---

archive/issue_comments_613095.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have merged #32032 and fixed some doctests.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e925c053bb08e38a85d4df1fa48b658409020104\">e925c05</a></td><td><code>Merge branch 't/32032/a3bad87abf0a70f85adbcba9b88244b0393a82ad' into t/32215/refactor-element-construction-term-monoids</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393\">0a50635</a></td><td><code>Trac #32215: fix doctests</code></td></tr></table>\n",
    "created_at": "2021-08-07T16:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613095",
    "user": "https://github.com/thhagelmayer"
}
```

<a id='comment:11'></a>
I have merged #32032 and fixed some doctests.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e925c053bb08e38a85d4df1fa48b658409020104">e925c05</a></td><td><code>Merge branch 't/32032/a3bad87abf0a70f85adbcba9b88244b0393a82ad' into t/32215/refactor-element-construction-term-monoids</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393">0a50635</a></td><td><code>Trac #32215: fix doctests</code></td></tr></table>




---

archive/issue_comments_613096.json:
```json
{
    "body": "**Changing commit** from \"[1975a10ac0f58240e195e66cf08c6105ad125a7e](https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e)\" to \"[0a506354ea6ec01df3e7ba5b093d5c6e06179393](https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393)\".",
    "created_at": "2021-08-07T16:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613096",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing commit** from "[1975a10ac0f58240e195e66cf08c6105ad125a7e](https://github.com/sagemath/sagetrac-mirror/commit/1975a10ac0f58240e195e66cf08c6105ad125a7e)" to "[0a506354ea6ec01df3e7ba5b093d5c6e06179393](https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393)".



---

archive/issue_comments_613097.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [behackl](#comment%3A9):\n> Otherwise, the proposed changes look good to me. Here are the changes I've made in my reviewer commits:\n> \n> - the `cached_method` import was unused and is now removed.\n> \n> - The `EXAMPLES` block in some newly added methods used `TermMonoidFactory` to manually construct a factory, I've changed it to `from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid` (also see #32032).\n> \n> - Language improvements for the error messages and the deprecation warning in `GenericTermMonoid._element_constructor`.\n\n\nLGTM, thanks.",
    "created_at": "2021-08-09T13:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613097",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:12'></a>
Replying to [behackl](#comment%3A9):
> Otherwise, the proposed changes look good to me. Here are the changes I've made in my reviewer commits:
> 
> - the `cached_method` import was unused and is now removed.
> 
> - The `EXAMPLES` block in some newly added methods used `TermMonoidFactory` to manually construct a factory, I've changed it to `from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid` (also see #32032).
> 
> - Language improvements for the error messages and the deprecation warning in `GenericTermMonoid._element_constructor`.


LGTM, thanks.



---

archive/issue_comments_613098.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)\" to \"[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)\".",
    "created_at": "2021-08-09T14:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613098",
    "user": "https://github.com/dkrenn"
}
```

**Changing branch** from "[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)" to "[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)".



---

archive/issue_comments_613099.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee\">d763d66</a></td><td><code>Trac #32215: full coverage of _element_constructor_</code></td></tr></table>\n",
    "created_at": "2021-08-09T14:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613099",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee">d763d66</a></td><td><code>Trac #32215: full coverage of _element_constructor_</code></td></tr></table>




---

archive/issue_comments_613100.json:
```json
{
    "body": "**Changing commit** from \"[0a506354ea6ec01df3e7ba5b093d5c6e06179393](https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393)\" to \"[d763d663355c4519128a616fb5f6ce7ebba2cfee](https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee)\".",
    "created_at": "2021-08-09T14:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0a506354ea6ec01df3e7ba5b093d5c6e06179393](https://github.com/sagemath/sagetrac-mirror/commit/0a506354ea6ec01df3e7ba5b093d5c6e06179393)" to "[d763d663355c4519128a616fb5f6ce7ebba2cfee](https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee)".



---

archive/issue_comments_613101.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [behackl](#comment%3A9):\n> 1. The new exceptions caused by ambiguously passing additional `growth` and `coefficient` keyword arguments should be tested.\n\n\nTested now. Indeed there was code, that could have never been reached. I think we should have full coverage now.\n\n> 2. Is there a particular reason for changing the implementation of `OTerm.can_absorb`?\n\n\nThis was the only place, where the `<=` of a term was used. However, I think it should be made clear what we compare here (\"explicit is better than implicit\"), so I switched to comparing the growth directly.\n\nThe reason for having `<=` (and method `le`) is for being compatible with SageMath's poset class in this perspective. If it wouldn't be for that, I would suggest to deprecate `<=` in the long run. However, as there is a reason for keeping it, I suggest to, at least, not use it further.\n\n> 3. The implementations of `TermWithCoefficientMonoid._convert_construction_` and `ExactTermMonoid._convert_construction_` are identical. I think the tests contained in the docstring of `ExactTermMonoid._convert_construction_` should be moved to `TermWithCoefficientMonoid._convert_construction_` and the separate implementation of `ExactTermMonoid._convert_construction_` should be removed.\n\n\nI disagree here. Usually I am in strong favour of removeing code duplicities, however, `_convert_construction_` is the one crucial method that all different terms (or their monoids, to be precise) have that do the conversion and making this conversion as explicit as possible helps understanding what is going on. I find it more of an incidient that two different type of terms have the same conversion.",
    "created_at": "2021-08-09T14:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613101",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:15'></a>
Replying to [behackl](#comment%3A9):
> 1. The new exceptions caused by ambiguously passing additional `growth` and `coefficient` keyword arguments should be tested.


Tested now. Indeed there was code, that could have never been reached. I think we should have full coverage now.

> 2. Is there a particular reason for changing the implementation of `OTerm.can_absorb`?


This was the only place, where the `<=` of a term was used. However, I think it should be made clear what we compare here ("explicit is better than implicit"), so I switched to comparing the growth directly.

The reason for having `<=` (and method `le`) is for being compatible with SageMath's poset class in this perspective. If it wouldn't be for that, I would suggest to deprecate `<=` in the long run. However, as there is a reason for keeping it, I suggest to, at least, not use it further.

> 3. The implementations of `TermWithCoefficientMonoid._convert_construction_` and `ExactTermMonoid._convert_construction_` are identical. I think the tests contained in the docstring of `ExactTermMonoid._convert_construction_` should be moved to `TermWithCoefficientMonoid._convert_construction_` and the separate implementation of `ExactTermMonoid._convert_construction_` should be removed.


I disagree here. Usually I am in strong favour of removeing code duplicities, however, `_convert_construction_` is the one crucial method that all different terms (or their monoids, to be precise) have that do the conversion and making this conversion as explicit as possible helps understanding what is going on. I find it more of an incidient that two different type of terms have the same conversion.



---

archive/issue_comments_613102.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2021-08-09T16:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613102",
    "user": "https://github.com/behackl"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_613103.json:
```json
{
    "body": "<a id='comment:16'></a>\n> I think we should have full coverage now.\n\n\nGreat, thanks!\n\n>  I would suggest to deprecate `<=` in the long run. However, as there is a reason for keeping it, I suggest to, at least, not use it further.\n\n\nAnother example of *spiritual deprecation*. +1.\n\n>  I find it more of an incidient that two different type of terms have the same conversion.\n\n\nOkay, good argument.\n\nThis LGTM now, thanks for your efforts!",
    "created_at": "2021-08-09T16:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613103",
    "user": "https://github.com/behackl"
}
```

<a id='comment:16'></a>
> I think we should have full coverage now.


Great, thanks!

>  I would suggest to deprecate `<=` in the long run. However, as there is a reason for keeping it, I suggest to, at least, not use it further.


Another example of *spiritual deprecation*. +1.

>  I find it more of an incidient that two different type of terms have the same conversion.


Okay, good argument.

This LGTM now, thanks for your efforts!



---

archive/issue_comments_613104.json:
```json
{
    "body": "<a id='comment:17'></a>\nI am not sure why the `deprecation_number` test in the most recent patchbot run failed though. The deprecation introduced here correctly uses 32215.",
    "created_at": "2021-08-09T16:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613104",
    "user": "https://github.com/behackl"
}
```

<a id='comment:17'></a>
I am not sure why the `deprecation_number` test in the most recent patchbot run failed though. The deprecation introduced here correctly uses 32215.



---

archive/issue_comments_613105.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c\">540d088</a></td><td><code>Merge commit 'c11b2f4' into t/32215/refactor-element-construction-term-monoids</code></td></tr></table>\n",
    "created_at": "2021-08-09T20:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c">540d088</a></td><td><code>Merge commit 'c11b2f4' into t/32215/refactor-element-construction-term-monoids</code></td></tr></table>




---

archive/issue_comments_613106.json:
```json
{
    "body": "**Changing status** from positive_review to needs_review.",
    "created_at": "2021-08-09T20:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing status** from positive_review to needs_review.



---

archive/issue_comments_613107.json:
```json
{
    "body": "**Changing commit** from \"[d763d663355c4519128a616fb5f6ce7ebba2cfee](https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee)\" to \"[540d08880bdcc5fbda1b2487bce9c74d3d35f27c](https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c)\".",
    "created_at": "2021-08-09T20:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d763d663355c4519128a616fb5f6ce7ebba2cfee](https://github.com/sagemath/sagetrac-mirror/commit/d763d663355c4519128a616fb5f6ce7ebba2cfee)" to "[540d08880bdcc5fbda1b2487bce9c74d3d35f27c](https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c)".



---

archive/issue_comments_613108.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487\">62cae10</a></td><td><code>Trac #32215: fix doctest after merge</code></td></tr></table>\n",
    "created_at": "2021-08-09T20:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613108",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487">62cae10</a></td><td><code>Trac #32215: fix doctest after merge</code></td></tr></table>




---

archive/issue_comments_613109.json:
```json
{
    "body": "**Changing commit** from \"[540d08880bdcc5fbda1b2487bce9c74d3d35f27c](https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c)\" to \"[62cae10d33ab58abe5b2bbb2388adce8e01d1487](https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487)\".",
    "created_at": "2021-08-09T20:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[540d08880bdcc5fbda1b2487bce9c74d3d35f27c](https://github.com/sagemath/sagetrac-mirror/commit/540d08880bdcc5fbda1b2487bce9c74d3d35f27c)" to "[62cae10d33ab58abe5b2bbb2388adce8e01d1487](https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487)".



---

archive/issue_comments_613110.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerged #32153 and fixed doctest. It's now on 9.4.beta4.",
    "created_at": "2021-08-09T20:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613110",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:20'></a>
Merged #32153 and fixed doctest. It's now on 9.4.beta4.



---

archive/issue_events_095707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32215#event-95707"
}
```



---

archive/issue_comments_613111.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-08-10T07:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613111",
    "user": "https://github.com/behackl"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_613112.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"gsoc2021\".",
    "created_at": "2021-08-18T13:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613112",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing keywords** from "" to "gsoc2021".



---

archive/issue_comments_613113.json:
```json
{
    "body": "<a id='comment:24'></a>\nMerge conflict",
    "created_at": "2021-08-30T22:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613113",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>
Merge conflict



---

archive/issue_comments_613114.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-08-30T22:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613114",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_613115.json:
```json
{
    "body": "**Changing branch** from \"[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)\" to \"[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)\".",
    "created_at": "2021-09-15T15:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613115",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing branch** from "[u/dkrenn/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/refactor-element-construction-term-monoids)" to "[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)".



---

archive/issue_comments_613116.json:
```json
{
    "body": "<a id='comment:26'></a>\nI merged #31933 into this ticket and resolved the merge conflict.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d\">d2eb45d</a></td><td><code>Merge commit 'f631489' into t/32215/refactor-element-construction-term-monoids</code></td></tr></table>\n",
    "created_at": "2021-09-15T15:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613116",
    "user": "https://github.com/thhagelmayer"
}
```

<a id='comment:26'></a>
I merged #31933 into this ticket and resolved the merge conflict.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d">d2eb45d</a></td><td><code>Merge commit 'f631489' into t/32215/refactor-element-construction-term-monoids</code></td></tr></table>




---

archive/issue_comments_613117.json:
```json
{
    "body": "**Changing commit** from \"[62cae10d33ab58abe5b2bbb2388adce8e01d1487](https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487)\" to \"[d2eb45dcd993194e9e5c262a5ef3e3d352666a2d](https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d)\".",
    "created_at": "2021-09-15T15:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613117",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing commit** from "[62cae10d33ab58abe5b2bbb2388adce8e01d1487](https://github.com/sagemath/sagetrac-mirror/commit/62cae10d33ab58abe5b2bbb2388adce8e01d1487)" to "[d2eb45dcd993194e9e5c262a5ef3e3d352666a2d](https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d)".



---

archive/issue_comments_613118.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-09-15T15:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613118",
    "user": "https://github.com/thhagelmayer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_613119.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b\">5e98877</a></td><td><code>Restore files which have been accidentally removed in the last commit and prevented building sage.</code></td></tr></table>\n",
    "created_at": "2021-09-17T08:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b">5e98877</a></td><td><code>Restore files which have been accidentally removed in the last commit and prevented building sage.</code></td></tr></table>




---

archive/issue_comments_613120.json:
```json
{
    "body": "**Changing commit** from \"[d2eb45dcd993194e9e5c262a5ef3e3d352666a2d](https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d)\" to \"[5e9887771df00abbdf9827d8a46bf546721ac22b](https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b)\".",
    "created_at": "2021-09-17T08:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d2eb45dcd993194e9e5c262a5ef3e3d352666a2d](https://github.com/sagemath/sagetrac-mirror/commit/d2eb45dcd993194e9e5c262a5ef3e3d352666a2d)" to "[5e9887771df00abbdf9827d8a46bf546721ac22b](https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b)".



---

archive/issue_comments_613121.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c3af69c70abfd729faa03b70f8d14f77ce16861\">6c3af69</a></td><td><code>Merge commit 'f631489' into t/32215/refactor-element-construction-term-monoids</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933\">dfd5ae4</a></td><td><code>Trac #32215: fix doctest after merge</code></td></tr></table>\n",
    "created_at": "2021-11-24T12:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c3af69c70abfd729faa03b70f8d14f77ce16861">6c3af69</a></td><td><code>Merge commit 'f631489' into t/32215/refactor-element-construction-term-monoids</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933">dfd5ae4</a></td><td><code>Trac #32215: fix doctest after merge</code></td></tr></table>




---

archive/issue_comments_613122.json:
```json
{
    "body": "**Changing commit** from \"[5e9887771df00abbdf9827d8a46bf546721ac22b](https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b)\" to \"[dfd5ae49c72effc3d0811f84d9e7a9d346809933](https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933)\".",
    "created_at": "2021-11-24T12:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5e9887771df00abbdf9827d8a46bf546721ac22b](https://github.com/sagemath/sagetrac-mirror/commit/5e9887771df00abbdf9827d8a46bf546721ac22b)" to "[dfd5ae49c72effc3d0811f84d9e7a9d346809933](https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933)".



---

archive/issue_comments_613123.json:
```json
{
    "body": "<a id='comment:29'></a>\nSomwthing went wrong with the last push here, so I went back to the status of `u/dkrenn/refactor-element-construction-term-monoids` and redid the merge and fixed the doctests. There is still one doctest failing:\n\n\n```\nFile \"src/sage/rings/asymptotic/term_monoid.py\", line 4698, in sage.rings.asymptotic.term_monoid.BTerm.can_absorb\nFailed example:\n    t2.absorb(t1)\nExpected:\n    B(2003/400*x^3, x >= 20)\nGot:\n...\n    DeprecationWarning: Passing 'coefficient' as a positional argument is deprecated; specify it as keyword argument 'coefficient=...'.\n    See https://trac.sagemath.org/32215 for details.\n    B(2003/400*x^3, x >= 20)\n```",
    "created_at": "2021-11-24T12:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613123",
    "user": "https://github.com/thhagelmayer"
}
```

<a id='comment:29'></a>
Somwthing went wrong with the last push here, so I went back to the status of `u/dkrenn/refactor-element-construction-term-monoids` and redid the merge and fixed the doctests. There is still one doctest failing:


```
File "src/sage/rings/asymptotic/term_monoid.py", line 4698, in sage.rings.asymptotic.term_monoid.BTerm.can_absorb
Failed example:
    t2.absorb(t1)
Expected:
    B(2003/400*x^3, x >= 20)
Got:
...
    DeprecationWarning: Passing 'coefficient' as a positional argument is deprecated; specify it as keyword argument 'coefficient=...'.
    See https://trac.sagemath.org/32215 for details.
    B(2003/400*x^3, x >= 20)
```



---

archive/issue_comments_613124.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [gh-thhagelmayer](#comment%3A29):\n> Somwthing went wrong with the last push here, so I went back to the status of `u/dkrenn/refactor-element-construction-term-monoids` and redid the merge and fixed the doctests. There is still one doctest failing:\n> \n> \n> ```\n> File \"src/sage/rings/asymptotic/term_monoid.py\", line 4698, in sage.rings.asymptotic.term_monoid.BTerm.can_absorb\n> Failed example:\n>     t2.absorb(t1)\n> Expected:\n>     B(2003/400*x^3, x >= 20)\n> Got:\n> ...\n>     DeprecationWarning: Passing 'coefficient' as a positional argument is deprecated; specify it as keyword argument 'coefficient=...'.\n>     See https://trac.sagemath.org/32215 for details.\n>     B(2003/400*x^3, x >= 20)\n> ```\n\n\nYes, this should be resolved as well: it comes from https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/rings/asymptotic/term_monoid.py?id=683acc1eaa07fd3375bdd031516cfce30f1e363b#n4753, the coefficient should be passed via keyword argument.",
    "created_at": "2021-11-24T13:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613124",
    "user": "https://github.com/behackl"
}
```

<a id='comment:30'></a>
Replying to [gh-thhagelmayer](#comment%3A29):
> Somwthing went wrong with the last push here, so I went back to the status of `u/dkrenn/refactor-element-construction-term-monoids` and redid the merge and fixed the doctests. There is still one doctest failing:
> 
> 
> ```
> File "src/sage/rings/asymptotic/term_monoid.py", line 4698, in sage.rings.asymptotic.term_monoid.BTerm.can_absorb
> Failed example:
>     t2.absorb(t1)
> Expected:
>     B(2003/400*x^3, x >= 20)
> Got:
> ...
>     DeprecationWarning: Passing 'coefficient' as a positional argument is deprecated; specify it as keyword argument 'coefficient=...'.
>     See https://trac.sagemath.org/32215 for details.
>     B(2003/400*x^3, x >= 20)
> ```


Yes, this should be resolved as well: it comes from https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/rings/asymptotic/term_monoid.py?id=683acc1eaa07fd3375bdd031516cfce30f1e363b#n4753, the coefficient should be passed via keyword argument.



---

archive/issue_comments_613125.json:
```json
{
    "body": "**Changing commit** from \"[dfd5ae49c72effc3d0811f84d9e7a9d346809933](https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933)\" to \"[7e7b5c7bf93c713e3688a94ccb33561092556b83](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)\".",
    "created_at": "2021-11-25T11:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dfd5ae49c72effc3d0811f84d9e7a9d346809933](https://github.com/sagemath/sagetrac-mirror/commit/dfd5ae49c72effc3d0811f84d9e7a9d346809933)" to "[7e7b5c7bf93c713e3688a94ccb33561092556b83](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)".



---

archive/issue_comments_613126.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83\">7e7b5c7</a></td><td><code>Trac #32215: fix a doctest. Use **kwds instead of coefficient</code></td></tr></table>\n",
    "created_at": "2021-11-25T11:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83">7e7b5c7</a></td><td><code>Trac #32215: fix a doctest. Use **kwds instead of coefficient</code></td></tr></table>




---

archive/issue_comments_613127.json:
```json
{
    "body": "<a id='comment:32'></a>\nI fixed the doctest in [7e7b5c7](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)",
    "created_at": "2021-11-25T11:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613127",
    "user": "https://github.com/thhagelmayer"
}
```

<a id='comment:32'></a>
I fixed the doctest in [7e7b5c7](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)



---

archive/issue_comments_613128.json:
```json
{
    "body": "<a id='comment:33'></a>\nI've managed to find the problem causing the `deprecation_number` plugin failure: looking at the implementation of the plugin over at https://github.com/sagemath/sage-patchbot/blob/745ec21b12f3bce03e8f1c8399cba0fb77bdc45c/sage_patchbot/plugins.py#L546, the plugin parses all *added* lines. If one of those contains `deprecation(` or `deprecated_function_alias(`, the code tries to parse the part following afterwards to find the ticket number, and then compares this parsed number to the actual ticket number.\n\nThe problem with our code is that we currently have\n\n```diff\n+            deprecation(\n+                32215,\n+                \"Passing 'coefficient' as a positional argument is deprecated; \"\n+                \"specify it as keyword argument 'coefficient=...'.\")\n```\nin our diff, so the code fails to properly parse the deprecation number. Changing this addition in `term_monoid.py` to\n\n```diff\n+            deprecation(32215,\n+                \"Passing 'coefficient' as a positional argument is deprecated; \"\n+                \"specify it as keyword argument 'coefficient=...'.\")\n```\nwill fix the failing test.",
    "created_at": "2021-11-25T20:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613128",
    "user": "https://github.com/behackl"
}
```

<a id='comment:33'></a>
I've managed to find the problem causing the `deprecation_number` plugin failure: looking at the implementation of the plugin over at https://github.com/sagemath/sage-patchbot/blob/745ec21b12f3bce03e8f1c8399cba0fb77bdc45c/sage_patchbot/plugins.py#L546, the plugin parses all *added* lines. If one of those contains `deprecation(` or `deprecated_function_alias(`, the code tries to parse the part following afterwards to find the ticket number, and then compares this parsed number to the actual ticket number.

The problem with our code is that we currently have

```diff
+            deprecation(
+                32215,
+                "Passing 'coefficient' as a positional argument is deprecated; "
+                "specify it as keyword argument 'coefficient=...'.")
```
in our diff, so the code fails to properly parse the deprecation number. Changing this addition in `term_monoid.py` to

```diff
+            deprecation(32215,
+                "Passing 'coefficient' as a positional argument is deprecated; "
+                "specify it as keyword argument 'coefficient=...'.")
```
will fix the failing test.



---

archive/issue_comments_613129.json:
```json
{
    "body": "**Changing commit** from \"[7e7b5c7bf93c713e3688a94ccb33561092556b83](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)\" to \"[89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)\".",
    "created_at": "2021-11-26T10:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7e7b5c7bf93c713e3688a94ccb33561092556b83](https://github.com/sagemath/sagetrac-mirror/commit/7e7b5c7bf93c713e3688a94ccb33561092556b83)" to "[89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)".



---

archive/issue_comments_613130.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01\">89ad9d2</a></td><td><code>Trac #31125: fix deprecation plugin failure</code></td></tr></table>\n",
    "created_at": "2021-11-26T10:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01">89ad9d2</a></td><td><code>Trac #31125: fix deprecation plugin failure</code></td></tr></table>




---

archive/issue_comments_613131.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [behackl](#comment%3A33):\n> I've managed to find the problem causing the `deprecation_number` plugin failure: looking at the implementation of the plugin over at https://github.com/sagemath/sage-patchbot/blob/745ec21b12f3bce03e8f1c8399cba0fb77bdc45c/sage_patchbot/plugins.py#L546, the plugin parses all *added* lines. If one of those contains `deprecation(` or `deprecated_function_alias(`, the code tries to parse the part following afterwards to find the ticket number, and then compares this parsed number to the actual ticket number.\n> \n> The problem with our code is that we currently have\n> \n> ```diff\n> +            deprecation(\n> +                32215,\n> +                \"Passing 'coefficient' as a positional argument is deprecated; \"\n> +                \"specify it as keyword argument 'coefficient=...'.\")\n> ```\n> in our diff, so the code fails to properly parse the deprecation number. Changing this addition in `term_monoid.py` to\n> \n> ```diff\n> +            deprecation(32215,\n> +                \"Passing 'coefficient' as a positional argument is deprecated; \"\n> +                \"specify it as keyword argument 'coefficient=...'.\")\n> ```\n> will fix the failing test.\n\n\nI changed that line accordingly.",
    "created_at": "2021-11-26T10:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613131",
    "user": "https://github.com/thhagelmayer"
}
```

<a id='comment:35'></a>
Replying to [behackl](#comment%3A33):
> I've managed to find the problem causing the `deprecation_number` plugin failure: looking at the implementation of the plugin over at https://github.com/sagemath/sage-patchbot/blob/745ec21b12f3bce03e8f1c8399cba0fb77bdc45c/sage_patchbot/plugins.py#L546, the plugin parses all *added* lines. If one of those contains `deprecation(` or `deprecated_function_alias(`, the code tries to parse the part following afterwards to find the ticket number, and then compares this parsed number to the actual ticket number.
> 
> The problem with our code is that we currently have
> 
> ```diff
> +            deprecation(
> +                32215,
> +                "Passing 'coefficient' as a positional argument is deprecated; "
> +                "specify it as keyword argument 'coefficient=...'.")
> ```
> in our diff, so the code fails to properly parse the deprecation number. Changing this addition in `term_monoid.py` to
> 
> ```diff
> +            deprecation(32215,
> +                "Passing 'coefficient' as a positional argument is deprecated; "
> +                "specify it as keyword argument 'coefficient=...'.")
> ```
> will fix the failing test.


I changed that line accordingly.



---

archive/issue_comments_613132.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-12-01T09:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613132",
    "user": "https://github.com/behackl"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_613133.json:
```json
{
    "body": "<a id='comment:36'></a>\nThis seems fine to me now, thank you! The latest patchbot test failures seem unrelated.",
    "created_at": "2021-12-01T09:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613133",
    "user": "https://github.com/behackl"
}
```

<a id='comment:36'></a>
This seems fine to me now, thank you! The latest patchbot test failures seem unrelated.



---

archive/issue_events_095708.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-12T15:08:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32215#event-95708"
}
```



---

archive/issue_comments_613134.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)\" to \"[89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)\".",
    "created_at": "2021-12-12T15:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32215#issuecomment-613134",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-thhagelmayer/refactor-element-construction-term-monoids](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-thhagelmayer/refactor-element-construction-term-monoids)" to "[89ad9d2cbd4aed3a7c0b1065766c03727c754e01](https://github.com/sagemath/sagetrac-mirror/commit/89ad9d2cbd4aed3a7c0b1065766c03727c754e01)".
