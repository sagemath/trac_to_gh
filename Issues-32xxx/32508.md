# Issue 32508: Eliminate use of __init__.py files for supplying package docstrings

archive/issues_032271.json:
```json
{
    "assignees": [],
    "body": "... as in `src/sage/categories/__init__.py` or `src/sage/combinat/__init__.py`\n\n(part of #32501)\n\nCC:  @tscrim @kwankyu @nthiery\n\nBranch: **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **refactoring**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32508_\n\n",
    "closed_at": "2021-11-12T21:27:46Z",
    "created_at": "2021-09-12T06:32:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Eliminate use of __init__.py files for supplying package docstrings",
    "type": "issue",
    "updated_at": "2022-05-29T12:05:00Z",
    "url": "https://github.com/sagemath/sage/issues/32508",
    "user": "https://github.com/mkoeppe"
}
```
... as in `src/sage/categories/__init__.py` or `src/sage/combinat/__init__.py`

(part of #32501)

CC:  @tscrim @kwankyu @nthiery

Branch: **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**

Reviewer: **Matthias Koeppe**

Author: **Kwankyu Lee**

Component: **refactoring**

_Issue created by migration from https://trac.sagemath.org/ticket/32508_





---

archive/issue_events_450351.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-12T06:32:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450351"
}
```



---

archive/issue_events_450352.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-12T06:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450352"
}
```



---

archive/issue_events_450353.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-12T06:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450353"
}
```



---

archive/issue_events_450354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-12T06:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450354"
}
```



---

archive/issue_comments_524294.json:
```json
{
    "body": "Branch: **[u/klee/32508](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32508)**",
    "created_at": "2021-10-28T08:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524294",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/32508](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32508)**



---

archive/issue_comments_524295.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2021-10-28T08:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524295",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_524296.json:
```json
{
    "body": "Commit: **[`5dcb3f5`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7)**",
    "created_at": "2021-10-28T08:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524296",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5dcb3f5`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7)**



---

archive/issue_comments_524297.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7\"><code>5dcb3f5</code></a></td><td><code>Remove docstrings from __init__.py</code></td></tr></table>\n",
    "created_at": "2021-10-28T08:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524297",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7"><code>5dcb3f5</code></a></td><td><code>Remove docstrings from __init__.py</code></td></tr></table>




---

archive/issue_comments_524298.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nPreviously\n\n```sage\nsage: import sage.combinat\nsage: sage.combinat.quickref?\n```\n\nworked. Not anymore with the patch. We should \n\n```sage\nsage: import sage.combinat.quickref\nsage: sage.combinat.quickref?\n```\n\nThe same with `sage.combinat.tutorial`",
    "created_at": "2021-10-28T09:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524298",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:4" align="right">comment:4</div>

Previously

```sage
sage: import sage.combinat
sage: sage.combinat.quickref?
```

worked. Not anymore with the patch. We should 

```sage
sage: import sage.combinat.quickref
sage: sage.combinat.quickref?
```

The same with `sage.combinat.tutorial`



---

archive/issue_comments_524299.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMore seriously, before the patch,\n\n```sage\nsage: import sage.combinat\nsage: help(sage.combinat)\n```\ngives a nice ... help. Could we retain this functionality somehow while eliminating the content of `sage.combinat.__init__.py`?",
    "created_at": "2021-10-29T06:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524299",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:5" align="right">comment:5</div>

More seriously, before the patch,

```sage
sage: import sage.combinat
sage: help(sage.combinat)
```
gives a nice ... help. Could we retain this functionality somehow while eliminating the content of `sage.combinat.__init__.py`?



---

archive/issue_comments_524300.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI guess with a bit of extra code in `src/sage/misc/sagedoc.py`, where `help` is defined, we could do this",
    "created_at": "2021-10-29T07:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524300",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

I guess with a bit of extra code in `src/sage/misc/sagedoc.py`, where `help` is defined, we could do this



---

archive/issue_comments_524301.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@mkoeppe](#comment:6):\n> I guess with a bit of extra code in `src/sage/misc/sagedoc.py`, where `help` is defined, we could do this\n\nI cannot guess how. Where should the content go? Do you imagine a file like `src/sage/combinat/doc.rst` or something?",
    "created_at": "2021-10-29T07:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524301",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@mkoeppe](#comment:6):
> I guess with a bit of extra code in `src/sage/misc/sagedoc.py`, where `help` is defined, we could do this

I cannot guess how. Where should the content go? Do you imagine a file like `src/sage/combinat/doc.rst` or something?



---

archive/issue_comments_524302.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`src/sage/combinat/__doc__.py` would be better name for that.",
    "created_at": "2021-10-29T10:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524302",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:8" align="right">comment:8</div>

`src/sage/combinat/__doc__.py` would be better name for that.



---

archive/issue_comments_524303.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n+1 on `__doc__`.",
    "created_at": "2021-10-29T16:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524303",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

+1 on `__doc__`.



---

archive/issue_comments_524304.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@mkoeppe](#comment:9):\n> +1 on `__doc__`.\n\nDo you mean `__doc__` without `.py` extension?",
    "created_at": "2021-10-30T03:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524304",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@mkoeppe](#comment:9):
> +1 on `__doc__`.

Do you mean `__doc__` without `.py` extension?



---

archive/issue_comments_524305.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWith `.py`, like you suggested",
    "created_at": "2021-10-30T03:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524305",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

With `.py`, like you suggested



---

archive/issue_comments_524306.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThen `__doc__.py` with a python docstring (`\"\"\"...\"\"\"`)?",
    "created_at": "2021-10-30T03:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524306",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:12" align="right">comment:12</div>

Then `__doc__.py` with a python docstring (`"""..."""`)?



---

archive/issue_comments_524307.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOn the other hand, I wonder if there is a solution(or recommendation) for this problem(package docstring) in python level as this seems a general issue with namespace packages.",
    "created_at": "2021-10-30T03:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524307",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

On the other hand, I wonder if there is a solution(or recommendation) for this problem(package docstring) in python level as this seems a general issue with namespace packages.



---

archive/issue_comments_524308.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kwankyu](#comment:12):\n> Then `__doc__.py` with a python docstring (`\"\"\"...\"\"\"`)?\n\nYes, that's what I thought",
    "created_at": "2021-10-30T04:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524308",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kwankyu](#comment:12):
> Then `__doc__.py` with a python docstring (`"""..."""`)?

Yes, that's what I thought



---

archive/issue_comments_524309.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@kwankyu](#comment:13):\n> On the other hand, I wonder if there is a solution(or recommendation) for this problem(package docstring) in python level as this seems a general issue with namespace packages.\n\nI agree, it would be good to find out whether there are existing practices for this in the Python community.",
    "created_at": "2021-10-30T04:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@kwankyu](#comment:13):
> On the other hand, I wonder if there is a solution(or recommendation) for this problem(package docstring) in python level as this seems a general issue with namespace packages.

I agree, it would be good to find out whether there are existing practices for this in the Python community.



---

archive/issue_comments_524310.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment:14):\n> Replying to [@kwankyu](#comment:12):\n> > Then `__doc__.py` with a python docstring (`\"\"\"...\"\"\"`)?\n\n> Yes, that's what I thought\n\nOne problem with `__doc__.py` is that it is a fake module for it cannot be imported.\n\nHow about this:\n\n`src/sage/combinat/__init__/__init__.py`\n\nThen the namespace package `sage.combinat` get to have a subpackage `__init__` initialized by `__init__.py`, which we perhaps may use for \"some initialization\" as well as for package docstring.\n\nIs this too much or incompatible with the modularization plan?",
    "created_at": "2021-11-01T00:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524310",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment:14):
> Replying to [@kwankyu](#comment:12):
> > Then `__doc__.py` with a python docstring (`"""..."""`)?

> Yes, that's what I thought

One problem with `__doc__.py` is that it is a fake module for it cannot be imported.

How about this:

`src/sage/combinat/__init__/__init__.py`

Then the namespace package `sage.combinat` get to have a subpackage `__init__` initialized by `__init__.py`, which we perhaps may use for "some initialization" as well as for package docstring.

Is this too much or incompatible with the modularization plan?



---

archive/issue_comments_524311.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment:15):\n> I agree, it would be good to find out whether there are existing practices for this in the Python community.\n\nI googled for it, but found none.",
    "created_at": "2021-11-01T00:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524311",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment:15):
> I agree, it would be good to find out whether there are existing practices for this in the Python community.

I googled for it, but found none.



---

archive/issue_comments_524312.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHow about we just use `all.py` for this purpose? \n\n(Modularized packages such as **sagemath-polyhedra** (#32432) add files such as `all__sagemath_polyhedra.py`)",
    "created_at": "2021-11-01T01:24:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

How about we just use `all.py` for this purpose? 

(Modularized packages such as **sagemath-polyhedra** (#32432) add files such as `all__sagemath_polyhedra.py`)



---

archive/issue_comments_524313.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment:18):\n> How about we just use `all.py` for this purpose? \n> \n> (Modularized packages such as **sagemath-polyhedra** (#32432) add files such as `all__sagemath_polyhedra.py`)\n\nHow does `all.py` work? \n\n(1) Does it exist by itself and import other `all__xxx` files into it? \n\n(2) Or is it dynamically created by combining `all__xxx` files? \n\nAnyway, if it is at `src/sage/combinat/all.py`, then it cannot be imported. Can it be?",
    "created_at": "2021-11-01T01:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524313",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment:18):
> How about we just use `all.py` for this purpose? 
> 
> (Modularized packages such as **sagemath-polyhedra** (#32432) add files such as `all__sagemath_polyhedra.py`)

How does `all.py` work? 

(1) Does it exist by itself and import other `all__xxx` files into it? 

(2) Or is it dynamically created by combining `all__xxx` files? 

Anyway, if it is at `src/sage/combinat/all.py`, then it cannot be imported. Can it be?



---

archive/issue_comments_524314.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYes, `all.py` exists as a file in Sage. For namespace packages, I am modularizing it by splitting parts of the existing `all.py` out to `all__sagemath_objects.py`, `all__sagemath_categories.py`, `all__sagemath_polyhedra` etc.  When a distribution has another distribution as a dependency, then it imports the dependency's `all__...` module. For example, **sagemath-polyhedra** has **sagemath-categories** as a dependency, so you see the imports: https://github.com/sagemath/sagetrac-mirror/blob/a58ea1f6decbb84102bd341f8b3cc20f3147452b/src/sage/all__sagemath_polyhedra.py&id2=f716a0b366e31bbb546230140489244cfb68390d and https://github.com/sagemath/sagetrac-mirror/blob/a58ea1f6decbb84102bd341f8b3cc20f3147452b/src/sage/rings/all__sagemath_polyhedra.py&id2=f716a0b366e31bbb546230140489244cfb68390d",
    "created_at": "2021-11-01T02:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524314",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Yes, `all.py` exists as a file in Sage. For namespace packages, I am modularizing it by splitting parts of the existing `all.py` out to `all__sagemath_objects.py`, `all__sagemath_categories.py`, `all__sagemath_polyhedra` etc.  When a distribution has another distribution as a dependency, then it imports the dependency's `all__...` module. For example, **sagemath-polyhedra** has **sagemath-categories** as a dependency, so you see the imports: https://github.com/sagemath/sagetrac-mirror/blob/a58ea1f6decbb84102bd341f8b3cc20f3147452b/src/sage/all__sagemath_polyhedra.py&id2=f716a0b366e31bbb546230140489244cfb68390d and https://github.com/sagemath/sagetrac-mirror/blob/a58ea1f6decbb84102bd341f8b3cc20f3147452b/src/sage/rings/all__sagemath_polyhedra.py&id2=f716a0b366e31bbb546230140489244cfb68390d



---

archive/issue_comments_524315.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nGenerally, if the `all` module is present, then it can also be imported.\nLikewise, if an `all__...` module is present, then it can also be imported.",
    "created_at": "2021-11-01T02:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524315",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Generally, if the `all` module is present, then it can also be imported.
Likewise, if an `all__...` module is present, then it can also be imported.



---

archive/issue_comments_524316.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIf `sage.misc.sagedoc.help` is used on a package `P` without `__doc__` attribute, it could try to import everything in `dir(P)` whose name begins with `all` and accumulate the docstrings of the importable modules.",
    "created_at": "2021-11-01T02:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524316",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

If `sage.misc.sagedoc.help` is used on a package `P` without `__doc__` attribute, it could try to import everything in `dir(P)` whose name begins with `all` and accumulate the docstrings of the importable modules.



---

archive/issue_comments_524317.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mkoeppe](#comment:21):\n> Generally, if the `all` module is present, then it can also be imported.\n> Likewise, if an `all__...` module is present, then it can also be imported.\n\nHmm. if the `all` module is just below in a namespace package (without `__init__.py`), I cannot import it. Do I misunderstand something?\n\nFor experiment, I created `src/sage/namespace/all.py` but no `src/sage/namespace/__init__.py`. I get\n\n```sage\nsage: import sage.namespace.all\n---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\n<ipython-input-1-f30e99bc2b64> in <module>\n----> 1 import sage.namespace.all\n\nModuleNotFoundError: No module named 'sage.namespace.all'\n```",
    "created_at": "2021-11-01T02:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524317",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mkoeppe](#comment:21):
> Generally, if the `all` module is present, then it can also be imported.
> Likewise, if an `all__...` module is present, then it can also be imported.

Hmm. if the `all` module is just below in a namespace package (without `__init__.py`), I cannot import it. Do I misunderstand something?

For experiment, I created `src/sage/namespace/all.py` but no `src/sage/namespace/__init__.py`. I get

```sage
sage: import sage.namespace.all
---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
<ipython-input-1-f30e99bc2b64> in <module>
----> 1 import sage.namespace.all

ModuleNotFoundError: No module named 'sage.namespace.all'
```



---

archive/issue_comments_524318.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe current default build system of the Sage library does not actually understand namespace packages. If you look into the installed Sage library in `site-packages`, you will see that your file `all.py` has not been copied there. This will be fixed in #28925.\n\nIf you want to test this, you can use `./configure --enable-editable` to switch to a different build system (https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library)",
    "created_at": "2021-11-01T02:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524318",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

The current default build system of the Sage library does not actually understand namespace packages. If you look into the installed Sage library in `site-packages`, you will see that your file `all.py` has not been copied there. This will be fixed in #28925.

If you want to test this, you can use `./configure --enable-editable` to switch to a different build system (https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library)



---

archive/issue_comments_524319.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment:24):\n> The current default build system of the Sage library does not actually understand namespace packages. If you look into the installed Sage library in `site-packages`, you will see that your file `all.py` has not been copied there. This will be fixed in #28925.\n> \n> If you want to test this, you can use `./configure --enable-editable` to switch to a different build system (https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library)\n\nThanks. It works.",
    "created_at": "2021-11-04T02:38:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524319",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment:24):
> The current default build system of the Sage library does not actually understand namespace packages. If you look into the installed Sage library in `site-packages`, you will see that your file `all.py` has not been copied there. This will be fixed in #28925.
> 
> If you want to test this, you can use `./configure --enable-editable` to switch to a different build system (https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library)

Thanks. It works.



---

archive/issue_comments_524320.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment:18):\n> How about we just use `all.py` for this purpose? \n\nI disagree. `all.py` serves its own purpose and may have its own docstring.\n\nOn the other hand, `__doc__.py` is somewhat misleading as it appears \"official\" as much as `__init__.py`, which is not true.\n\nNow I suggest `doc.py` to store package docstrings. This is just a sage thing.",
    "created_at": "2021-11-04T02:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524320",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment:18):
> How about we just use `all.py` for this purpose? 

I disagree. `all.py` serves its own purpose and may have its own docstring.

On the other hand, `__doc__.py` is somewhat misleading as it appears "official" as much as `__init__.py`, which is not true.

Now I suggest `doc.py` to store package docstrings. This is just a sage thing.



---

archive/issue_comments_524321.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nFor the use of `doc.py`:\n\nIt seems that the package docstrings in `__init__.py` files are mostly intended for our Sphinx documentation, not for using with `help(...)`.\n\nSo in this ticket, I would focus only on Sphinx documentation and ignore possible use with `help()`. If really needed, the use with `help()` may be dealt with in other ticket in future.",
    "created_at": "2021-11-04T02:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524321",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:27" align="right">comment:27</div>

For the use of `doc.py`:

It seems that the package docstrings in `__init__.py` files are mostly intended for our Sphinx documentation, not for using with `help(...)`.

So in this ticket, I would focus only on Sphinx documentation and ignore possible use with `help()`. If really needed, the use with `help()` may be dealt with in other ticket in future.



---

archive/issue_comments_524322.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@kwankyu](#comment:26):\n> Replying to [@mkoeppe](#comment:18):\n> > How about we just use `all.py` for this purpose? \n\n> \n> I disagree. `all.py` serves its own purpose and may have its own docstring.\n\nDo you see an example of an `all` module that has a useful docstring?",
    "created_at": "2021-11-04T05:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524322",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@kwankyu](#comment:26):
> Replying to [@mkoeppe](#comment:18):
> > How about we just use `all.py` for this purpose? 

> 
> I disagree. `all.py` serves its own purpose and may have its own docstring.

Do you see an example of an `all` module that has a useful docstring?



---

archive/issue_comments_524323.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@mkoeppe](#comment:28):\n> Replying to [@kwankyu](#comment:26):\n> > Replying to [@mkoeppe](#comment:18):\n> > > How about we just use `all.py` for this purpose? \n\n> > \n> > I disagree. `all.py` serves its own purpose and may have its own docstring.\n\n> \n> Do you see an example of an `all` module that has a useful docstring?\n\nI didn't examine all, but some `all` modules have docstrings. Useful or not, I don't know.\n\nI think we overload `all.py` if we add package docstring to it...",
    "created_at": "2021-11-04T05:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524323",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@mkoeppe](#comment:28):
> Replying to [@kwankyu](#comment:26):
> > Replying to [@mkoeppe](#comment:18):
> > > How about we just use `all.py` for this purpose? 

> > 
> > I disagree. `all.py` serves its own purpose and may have its own docstring.

> 
> Do you see an example of an `all` module that has a useful docstring?

I didn't examine all, but some `all` modules have docstrings. Useful or not, I don't know.

I think we overload `all.py` if we add package docstring to it...



---

archive/issue_comments_524324.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI advocate `doc.py` since\n\n`sage.combinat.doc`\n\nreads better than\n\n`sage.combinat.all`\n\nin documentation.",
    "created_at": "2021-11-04T05:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524324",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:30" align="right">comment:30</div>

I advocate `doc.py` since

`sage.combinat.doc`

reads better than

`sage.combinat.all`

in documentation.



---

archive/issue_comments_524325.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n`doc` is fine with me",
    "created_at": "2021-11-04T06:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524325",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

`doc` is fine with me



---

archive/issue_comments_524326.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWorking on this, I now realize that what this ticket aims at goes against what the ticket #16256 achieved, which systematically used `__init__.py` for package docstrings. So whatever we do here has possibility to make the combinat people unhappy. \n\nFor example,\n`sage.combinat.crystals?` will not work. Instead \n\n```sage\nsage: import sage.combinat.crystals.doc\nsage: sage.combinat.crystals.doc?\n```\nwould work.\n\nTravis, what do you think?",
    "created_at": "2021-11-04T07:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524326",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:32" align="right">comment:32</div>

Working on this, I now realize that what this ticket aims at goes against what the ticket #16256 achieved, which systematically used `__init__.py` for package docstrings. So whatever we do here has possibility to make the combinat people unhappy. 

For example,
`sage.combinat.crystals?` will not work. Instead 

```sage
sage: import sage.combinat.crystals.doc
sage: sage.combinat.crystals.doc?
```
would work.

Travis, what do you think?



---

archive/issue_comments_524327.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nWhile I don't use the feature `sage.combinat?`, I can certainly see it as being useful. If we can get this to continue working, then I would have no objections.\n\nI am cc-ing Nicolas to see if he has any comments.",
    "created_at": "2021-11-04T08:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524327",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

While I don't use the feature `sage.combinat?`, I can certainly see it as being useful. If we can get this to continue working, then I would have no objections.

I am cc-ing Nicolas to see if he has any comments.



---

archive/issue_comments_524328.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@tscrim](#comment:33):\n> While I don't use the feature `sage.combinat?`, I can certainly see it as being useful. If we can get this to continue working, then I would have no objections.\n\nIt seems that we cannot get that to continue working unless we patch IPython, which perhaps we don't want to.",
    "created_at": "2021-11-04T09:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524328",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@tscrim](#comment:33):
> While I don't use the feature `sage.combinat?`, I can certainly see it as being useful. If we can get this to continue working, then I would have no objections.

It seems that we cannot get that to continue working unless we patch IPython, which perhaps we don't want to.



---

archive/issue_comments_524329.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThanks for working on Sage's modularization and for investigating for\nsolutions!\n\nI see the technical hurdles behind, and don't have a good solution to offer,\nbut I advocate for finding some technical mean to keep the functionality `package?` to retrieve\ninformation about the package. This is consistent with how users retrieve\ninformation by introspection for all other types of objects (functions, ...),\nand when it's not there I have witnessed countless users during classes or\nworkshops struggle to find an entry point for the documentation (having\nto search for the proper submodule; or leave the interpreter to search\naround from the ref manual or browsing the web).\n\nThis is indeed not a widely adopted idiom in the Python world, yet this is so\nnatural that I believe we should push for it.\n\nThanks in advance,",
    "created_at": "2021-11-04T10:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524329",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:35" align="right">comment:35</div>

Thanks for working on Sage's modularization and for investigating for
solutions!

I see the technical hurdles behind, and don't have a good solution to offer,
but I advocate for finding some technical mean to keep the functionality `package?` to retrieve
information about the package. This is consistent with how users retrieve
information by introspection for all other types of objects (functions, ...),
and when it's not there I have witnessed countless users during classes or
workshops struggle to find an entry point for the documentation (having
to search for the proper submodule; or leave the interpreter to search
around from the ref manual or browsing the web).

This is indeed not a widely adopted idiom in the Python world, yet this is so
natural that I believe we should push for it.

Thanks in advance,



---

archive/issue_comments_524330.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThanks for all comments. I agree that thinking of the `?` functionality is important.\n\nI think an easy solution is to have `all.py` put a `__doc__` attribute into its containing package.",
    "created_at": "2021-11-04T15:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524330",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Thanks for all comments. I agree that thinking of the `?` functionality is important.

I think an easy solution is to have `all.py` put a `__doc__` attribute into its containing package.



---

archive/issue_comments_524331.json:
```json
{
    "body": "Changed commit from **[`5dcb3f5`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7)** to **[`d7085db`](https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844)**",
    "created_at": "2021-11-05T11:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524331",
    "user": "https://github.com/kwankyu"
}
```

Changed commit from **[`5dcb3f5`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb3f5358dab97c4765a72877278e23f32559e7)** to **[`d7085db`](https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844)**



---

archive/issue_comments_524332.json:
```json
{
    "body": "Changed branch from **[u/klee/32508](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32508)** to **[public/32508](https://github.com/sagemath/sagetrac-mirror/tree/public/32508)**",
    "created_at": "2021-11-05T11:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524332",
    "user": "https://github.com/kwankyu"
}
```

Changed branch from **[u/klee/32508](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32508)** to **[public/32508](https://github.com/sagemath/sagetrac-mirror/tree/public/32508)**



---

archive/issue_comments_524333.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844\"><code>d7085db</code></a></td><td><code>Move package docstrings out of __init__.py</code></td></tr></table>\n",
    "created_at": "2021-11-05T11:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524333",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844"><code>d7085db</code></a></td><td><code>Move package docstrings out of __init__.py</code></td></tr></table>




---

archive/issue_comments_524334.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@mkoeppe](#comment:36):\n> Thanks for all comments. I agree that thinking of the `?` functionality is important.\n> \n> I think an easy solution is to have `all.py` put a `__doc__` attribute into its containing package.\n\nThat works. Thanks!",
    "created_at": "2021-11-05T11:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524334",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@mkoeppe](#comment:36):
> Thanks for all comments. I agree that thinking of the `?` functionality is important.
> 
> I think an easy solution is to have `all.py` put a `__doc__` attribute into its containing package.

That works. Thanks!



---

archive/issue_comments_524335.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@mkoeppe](#comment:28): \n> > I disagree. `all.py` serves its own purpose and may have its own docstring.\n\n> \n> Do you see an example of an `all` module that has a useful docstring?\n\nI examined all. No I don't. Using `all` now seems a simpler solution than introducing a new file `doc.py`. Even when it has a significant docstring, we can still use `all` to have the package docstring along with it.",
    "created_at": "2021-11-05T11:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524335",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@mkoeppe](#comment:28): 
> > I disagree. `all.py` serves its own purpose and may have its own docstring.

> 
> Do you see an example of an `all` module that has a useful docstring?

I examined all. No I don't. Using `all` now seems a simpler solution than introducing a new file `doc.py`. Even when it has a significant docstring, we can still use `all` to have the package docstring along with it.



---

archive/issue_comments_524336.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThis looks great to me. Ready for review?",
    "created_at": "2021-11-05T16:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524336",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

This looks great to me. Ready for review?



---

archive/issue_comments_524337.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nGreat to have a simple solution! all.py is not super standard in the\nPython world, but since it's a long time idiom to use it in Sage,\nwe might indeed as well use it for the package docstrings too.\nAlso, since `<package>.__doc__` is only used at runtime and not during\npackage loading; so having a little dynamic monkey patching of the package\ncauses no risk.\n\nHence +1 on my side on the principle. Thanks!",
    "created_at": "2021-11-05T17:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524337",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:41" align="right">comment:41</div>

Great to have a simple solution! all.py is not super standard in the
Python world, but since it's a long time idiom to use it in Sage,
we might indeed as well use it for the package docstrings too.
Also, since `<package>.__doc__` is only used at runtime and not during
package loading; so having a little dynamic monkey patching of the package
causes no risk.

Hence +1 on my side on the principle. Thanks!



---

archive/issue_events_450355.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-05T21:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450355"
}
```



---

archive/issue_comments_524338.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@mkoeppe](#comment:40):\n> This looks great to me. Ready for review?\n\nWe are supposed to deal with all `__init__` files. No?\n\nNow that we have a solution, I think we need to polish the code, especially as it would be used as an idiom globally in Sage. \n\nAny ideas for improvement, in names or organization, are welcome.",
    "created_at": "2021-11-05T21:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524338",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@mkoeppe](#comment:40):
> This looks great to me. Ready for review?

We are supposed to deal with all `__init__` files. No?

Now that we have a solution, I think we need to polish the code, especially as it would be used as an idiom globally in Sage. 

Any ideas for improvement, in names or organization, are welcome.



---

archive/issue_comments_524339.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@nthiery](#comment:41):\n> Great to have a simple solution! all.py is not super standard in the\n> Python world, but since it's a long time idiom to use it in Sage,\n> we might indeed as well use it for the package docstrings too.\n\nThere seems no better place for (namespace) package docstrings. But I am open for better ideas.",
    "created_at": "2021-11-05T22:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524339",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@nthiery](#comment:41):
> Great to have a simple solution! all.py is not super standard in the
> Python world, but since it's a long time idiom to use it in Sage,
> we might indeed as well use it for the package docstrings too.

There seems no better place for (namespace) package docstrings. But I am open for better ideas.



---

archive/issue_events_450356.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-05T22:03:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450356"
}
```



---

archive/issue_events_450357.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-05T22:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450357"
}
```



---

archive/issue_comments_524340.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI don't see a reason why `all.py` should have its own docstring either. I am +1 for using that.",
    "created_at": "2021-11-06T01:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524340",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

I don't see a reason why `all.py` should have its own docstring either. I am +1 for using that.



---

archive/issue_comments_524341.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@kwankyu](#comment:42):\n> Replying to [@mkoeppe](#comment:40):\n> > This looks great to me. Ready for review?\n\n> \n> We are supposed to deal with all `__init__` files. No?\n\nNot necessarily. Only the `__init__.py` files of packages that will become namespace packages. See explanation in #32501 (also related to our previous discussion in [#32734 comment:13](https://github.com/sagemath/sage/issues/32734#comment:13)).",
    "created_at": "2021-11-06T19:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524341",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@kwankyu](#comment:42):
> Replying to [@mkoeppe](#comment:40):
> > This looks great to me. Ready for review?

> 
> We are supposed to deal with all `__init__` files. No?

Not necessarily. Only the `__init__.py` files of packages that will become namespace packages. See explanation in #32501 (also related to our previous discussion in [#32734 comment:13](https://github.com/sagemath/sage/issues/32734#comment:13)).



---

archive/issue_comments_524342.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nRe-running the command from the ticket description of #32501 on the present branch:\n\n```\n$ find src/sage -name '__init__.py' | xargs wc -l | grep -v '^ *0'\n       2 src/sage/crypto/__init__.py\n       3 src/sage/crypto/mq/__init__.py\n       3 src/sage/dynamics/__init__.py\n       3 src/sage/dynamics/cellular_automata/__init__.py\n       1 src/sage/combinat/words/__init__.py\n       1 src/sage/combinat/designs/__init__.py\n       1 src/sage/combinat/chas/__init__.py\n       1 src/sage/combinat/path_tableaux/__init__.py\n       1 src/sage/combinat/species/__init__.py\n       1 src/sage/combinat/sf/__init__.py\n       1 src/sage/combinat/ncsf_qsym/__init__.py\n       6 src/sage/combinat/integer_lists/__init__.py\n       9 src/sage/combinat/root_system/__init__.py\n       3 src/sage/doctest/__init__.py\n     847 src/sage/features/__init__.py\n      15 src/sage/repl/__init__.py\n       4 src/sage/repl/rich_output/__init__.py\n      34 src/sage/__init__.py\n     358 src/sage/libs/giac/__init__.py\n       2 src/sage/libs/ntl/__init__.py\n       1 src/sage/libs/gap/__init__.py\n     199 src/sage/libs/pari/__init__.py\n      55 src/sage/cpython/__init__.py\n       2 src/sage/sat/converters/__init__.py\n       4 src/sage/sat/solvers/__init__.py\n       1 src/sage/modular/quasimodform/__init__.py\n       2 src/sage/finance/__init__.py\n       2 src/sage/matroids/__init__.py\n     114 src/sage/rings/polynomial/pbori/__init__.py\n      10 src/sage/modules/with_basis/__init__.py\n       2 src/sage/structure/__init__.py\n       2 src/sage/media/__init__.py\n```",
    "created_at": "2021-11-06T19:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524342",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Re-running the command from the ticket description of #32501 on the present branch:

```
$ find src/sage -name '__init__.py' | xargs wc -l | grep -v '^ *0'
       2 src/sage/crypto/__init__.py
       3 src/sage/crypto/mq/__init__.py
       3 src/sage/dynamics/__init__.py
       3 src/sage/dynamics/cellular_automata/__init__.py
       1 src/sage/combinat/words/__init__.py
       1 src/sage/combinat/designs/__init__.py
       1 src/sage/combinat/chas/__init__.py
       1 src/sage/combinat/path_tableaux/__init__.py
       1 src/sage/combinat/species/__init__.py
       1 src/sage/combinat/sf/__init__.py
       1 src/sage/combinat/ncsf_qsym/__init__.py
       6 src/sage/combinat/integer_lists/__init__.py
       9 src/sage/combinat/root_system/__init__.py
       3 src/sage/doctest/__init__.py
     847 src/sage/features/__init__.py
      15 src/sage/repl/__init__.py
       4 src/sage/repl/rich_output/__init__.py
      34 src/sage/__init__.py
     358 src/sage/libs/giac/__init__.py
       2 src/sage/libs/ntl/__init__.py
       1 src/sage/libs/gap/__init__.py
     199 src/sage/libs/pari/__init__.py
      55 src/sage/cpython/__init__.py
       2 src/sage/sat/converters/__init__.py
       4 src/sage/sat/solvers/__init__.py
       1 src/sage/modular/quasimodform/__init__.py
       2 src/sage/finance/__init__.py
       2 src/sage/matroids/__init__.py
     114 src/sage/rings/polynomial/pbori/__init__.py
      10 src/sage/modules/with_basis/__init__.py
       2 src/sage/structure/__init__.py
       2 src/sage/media/__init__.py
```



---

archive/issue_comments_524343.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nTo do:\n- `src/sage/dynamics/__init__.py` - because `sage.dynamics.complex_dynamics` needs `sage.symbolic` and everything else does not, see #32601\n- `src/sage/combinat/root_system/__init__.py` - because `git grep 'cimport' src/sage/combinat/root_system/` reveals `from sage.groups.perm_gps.permgroup_element cimport PermutationGroupElement`, and `git grep 'cimport' src/sage/groups/perm_gps` shows dependencies on numerous libraries: `gap`, `flint`\n- `src/sage/matroids` - to play safe given that there's a lot of `cimport`ing\n\nNot necessary to change:\n- `src/sage/combinat/words/__init__.py` because `git grep 'cimport' src/sage/combinat/words` does not show compile-time dependencies on libraries, so `sage.combinat.words` does not have to become a namespace package\n- likewise `src/sage/combinat/integer_lists/__init__.py`\n- `src/sage/sat/...` because `git grep 'cimport' src/sage/sat/` is empty\n- `src/sage/features/`, `src/sage/libs/...`, `src/sage/repl` because they will definitely not become namespace packages",
    "created_at": "2021-11-06T19:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524343",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

To do:
- `src/sage/dynamics/__init__.py` - because `sage.dynamics.complex_dynamics` needs `sage.symbolic` and everything else does not, see #32601
- `src/sage/combinat/root_system/__init__.py` - because `git grep 'cimport' src/sage/combinat/root_system/` reveals `from sage.groups.perm_gps.permgroup_element cimport PermutationGroupElement`, and `git grep 'cimport' src/sage/groups/perm_gps` shows dependencies on numerous libraries: `gap`, `flint`
- `src/sage/matroids` - to play safe given that there's a lot of `cimport`ing

Not necessary to change:
- `src/sage/combinat/words/__init__.py` because `git grep 'cimport' src/sage/combinat/words` does not show compile-time dependencies on libraries, so `sage.combinat.words` does not have to become a namespace package
- likewise `src/sage/combinat/integer_lists/__init__.py`
- `src/sage/sat/...` because `git grep 'cimport' src/sage/sat/` is empty
- `src/sage/features/`, `src/sage/libs/...`, `src/sage/repl` because they will definitely not become namespace packages



---

archive/issue_comments_524344.json:
```json
{
    "body": "Changed commit from **[`d7085db`](https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844)** to **[`b7d2be9`](https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3)**",
    "created_at": "2021-11-08T01:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524344",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d7085db`](https://github.com/sagemath/sagetrac-mirror/commit/d7085db4ea6679d185d34ad1a64054a6da91f844)** to **[`b7d2be9`](https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3)**



---

archive/issue_comments_524345.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3\"><code>b7d2be9</code></a></td><td><code>More refactoring of `__init__` files</code></td></tr></table>\n",
    "created_at": "2021-11-08T01:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524345",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3"><code>b7d2be9</code></a></td><td><code>More refactoring of `__init__` files</code></td></tr></table>




---

archive/issue_comments_524346.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3\"><code>b7d2be9</code></a></td><td><code>More refactoring of `__init__` files</code></td></tr></table>\n",
    "created_at": "2021-11-08T01:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524346",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:49"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3"><code>b7d2be9</code></a></td><td><code>More refactoring of `__init__` files</code></td></tr></table>




---

archive/issue_events_450358.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-08T01:58:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450358"
}
```



---

archive/issue_events_450359.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-08T01:58:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450359"
}
```



---

archive/issue_comments_524347.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nRe-running the command from the ticket description of #32501 on the present branch:\n\n```\n$ find src/sage -name '__init__.py' | xargs wc -l | grep -v '^ *0'\n       2 src/sage/crypto/__init__.py\n       3 src/sage/crypto/mq/__init__.py\n       3 src/sage/dynamics/cellular_automata/__init__.py\n      41 src/sage/combinat/words/__init__.py\n       1 src/sage/combinat/designs/__init__.py\n       1 src/sage/combinat/chas/__init__.py\n       1 src/sage/combinat/path_tableaux/__init__.py\n       1 src/sage/combinat/species/__init__.py\n       1 src/sage/combinat/sf/__init__.py\n       1 src/sage/combinat/ncsf_qsym/__init__.py\n       6 src/sage/combinat/integer_lists/__init__.py\n       9 src/sage/combinat/root_system/__init__.py\n       3 src/sage/doctest/__init__.py\n     847 src/sage/features/__init__.py\n      15 src/sage/repl/__init__.py\n       4 src/sage/repl/rich_output/__init__.py\n      34 src/sage/__init__.py\n     358 src/sage/libs/giac/__init__.py\n       2 src/sage/libs/ntl/__init__.py\n       1 src/sage/libs/gap/__init__.py\n     199 src/sage/libs/pari/__init__.py\n      55 src/sage/cpython/__init__.py\n       2 src/sage/sat/converters/__init__.py\n       4 src/sage/sat/solvers/__init__.py\n       1 src/sage/modular/quasimodform/__init__.py\n       2 src/sage/finance/__init__.py\n       2 src/sage/matroids/__init__.py\n     114 src/sage/rings/polynomial/pbori/__init__.py\n      10 src/sage/modules/with_basis/__init__.py\n       2 src/sage/structure/__init__.py\n       2 src/sage/media/__init__.py\n    1727 total\n```",
    "created_at": "2021-11-08T01:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524347",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:50" align="right">comment:50</div>

Re-running the command from the ticket description of #32501 on the present branch:

```
$ find src/sage -name '__init__.py' | xargs wc -l | grep -v '^ *0'
       2 src/sage/crypto/__init__.py
       3 src/sage/crypto/mq/__init__.py
       3 src/sage/dynamics/cellular_automata/__init__.py
      41 src/sage/combinat/words/__init__.py
       1 src/sage/combinat/designs/__init__.py
       1 src/sage/combinat/chas/__init__.py
       1 src/sage/combinat/path_tableaux/__init__.py
       1 src/sage/combinat/species/__init__.py
       1 src/sage/combinat/sf/__init__.py
       1 src/sage/combinat/ncsf_qsym/__init__.py
       6 src/sage/combinat/integer_lists/__init__.py
       9 src/sage/combinat/root_system/__init__.py
       3 src/sage/doctest/__init__.py
     847 src/sage/features/__init__.py
      15 src/sage/repl/__init__.py
       4 src/sage/repl/rich_output/__init__.py
      34 src/sage/__init__.py
     358 src/sage/libs/giac/__init__.py
       2 src/sage/libs/ntl/__init__.py
       1 src/sage/libs/gap/__init__.py
     199 src/sage/libs/pari/__init__.py
      55 src/sage/cpython/__init__.py
       2 src/sage/sat/converters/__init__.py
       4 src/sage/sat/solvers/__init__.py
       1 src/sage/modular/quasimodform/__init__.py
       2 src/sage/finance/__init__.py
       2 src/sage/matroids/__init__.py
     114 src/sage/rings/polynomial/pbori/__init__.py
      10 src/sage/modules/with_basis/__init__.py
       2 src/sage/structure/__init__.py
       2 src/sage/media/__init__.py
    1727 total
```



---

archive/issue_comments_524348.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-11-08T02:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524348",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_524349.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nLooking great but I'm getting a docbuild error:\n\n```\n[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/crystals/crystals.py:docstring of sage.combinat.crystals.crystals:122: WARNING: undefined label: sage.combinat.crystals\n[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:48: WARNING: undefined label: sage.combinat.root_system\n[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:54: WARNING: undefined label: sage.combinat.crystals\n[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:71: WARNING: undefined label: sage.combinat.posets\n[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/root_system/root_system.py:docstring of sage.combinat.root_system.root_system:3: WARNING: undefined label: sage.combinat.root_system\n[dochtml] [combinat ] dumping search index in English (code: en)... done\n[dochtml] [combinat ] The HTML pages are in local/share/doc/sage/html/en/reference/combinat.\n[dochtml] Error building the documentation.\n```",
    "created_at": "2021-11-08T03:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524349",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Looking great but I'm getting a docbuild error:

```
[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/crystals/crystals.py:docstring of sage.combinat.crystals.crystals:122: WARNING: undefined label: sage.combinat.crystals
[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:48: WARNING: undefined label: sage.combinat.root_system
[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:54: WARNING: undefined label: sage.combinat.crystals
[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:71: WARNING: undefined label: sage.combinat.posets
[dochtml] [combinat ] /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.9/site-packages/sage/combinat/root_system/root_system.py:docstring of sage.combinat.root_system.root_system:3: WARNING: undefined label: sage.combinat.root_system
[dochtml] [combinat ] dumping search index in English (code: en)... done
[dochtml] [combinat ] The HTML pages are in local/share/doc/sage/html/en/reference/combinat.
[dochtml] Error building the documentation.
```



---

archive/issue_comments_524350.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c\"><code>ee4367d</code></a></td><td><code>Fixes for doctest failures</code></td></tr></table>\n",
    "created_at": "2021-11-08T04:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524350",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c"><code>ee4367d</code></a></td><td><code>Fixes for doctest failures</code></td></tr></table>




---

archive/issue_comments_524351.json:
```json
{
    "body": "Changed commit from **[`b7d2be9`](https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3)** to **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**",
    "created_at": "2021-11-08T04:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524351",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7d2be9`](https://github.com/sagemath/sagetrac-mirror/commit/b7d2be9dad402978af44d657fa1c75139c6c0fa3)** to **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**



---

archive/issue_comments_524352.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nStrange that those errors got slipped in unnoticed...",
    "created_at": "2021-11-08T04:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524352",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:54" align="right">comment:54</div>

Strange that those errors got slipped in unnoticed...



---

archive/issue_comments_524353.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nIt's working now, and the built documentation also looks fine. Thanks!",
    "created_at": "2021-11-08T04:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524353",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

It's working now, and the built documentation also looks fine. Thanks!



---

archive/issue_events_450360.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-08T04:45:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450360"
}
```



---

archive/issue_events_450361.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-08T04:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450361"
}
```



---

archive/issue_comments_524354.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nLooks good indeed.\n\nJust one thing (that could possibly go in a follow up\nticket): would there be a way to maintain the validity\nof cross-references like :ref:`sage.combinat` ?\n\nFirst because it's easier to remember, and does not\nreveal an implementation detail (that the doc is actually\nstored in `sage/combinat/all.py`).\n\nBut also because, thanks to intersphinx links these\ncross-references can be used from documents outside\nof the Sage documentation, and this is breaking\nbackward compatibility for them.\n\nThanks,",
    "created_at": "2021-11-08T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524354",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:56" align="right">comment:56</div>

Looks good indeed.

Just one thing (that could possibly go in a follow up
ticket): would there be a way to maintain the validity
of cross-references like :ref:`sage.combinat` ?

First because it's easier to remember, and does not
reveal an implementation detail (that the doc is actually
stored in `sage/combinat/all.py`).

But also because, thanks to intersphinx links these
cross-references can be used from documents outside
of the Sage documentation, and this is breaking
backward compatibility for them.

Thanks,



---

archive/issue_comments_524355.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@nthiery](#comment:56):\n> Looks good indeed.\n> \n> Just one thing (that could possibly go in a follow up\n> ticket): would there be a way to maintain the validity\n> of cross-references like :ref:`sage.combinat` ?\n\nIf you compare \"before\" and \"after\" below, we see that Sphinx recognizes regular package and treat it appropriately. Hence I think we need to wait until Sphinx gets equipped with some mechanism to deal with namespace packages appropriately. It seems that Sphinx does not have such a mechanism yet (as far as I know by googling).   \n\n---\nBefore the patch: this line\n\n```\n.. toctree::    \n\n    sage/combinat/__init__   \n```\ngenerates\n\n```\n.. nodoctest\n\n.. _sage.combinat:\n\nCombinatorics\n=============\n\n.. This file has been autogenerated.\n\n\n.. automodule:: sage.combinat.__init__\n   :members:\n   :undoc-members:\n   :show-inheritance:   \n```\n\nAfter the patch: this line\n\n```\n.. toctree::    \n\n    sage/combinat/all  \n```\ngenerates\n\n```\n.. nodoctest\n\n.. _sage.combinat.all:\n\nCombinatorics\n=============\n\n.. This file has been autogenerated.\n\n\n.. automodule:: sage.combinat.all\n   :members:\n   :undoc-members:\n   :show-inheritance:  \n```",
    "created_at": "2021-11-09T00:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524355",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@nthiery](#comment:56):
> Looks good indeed.
> 
> Just one thing (that could possibly go in a follow up
> ticket): would there be a way to maintain the validity
> of cross-references like :ref:`sage.combinat` ?

If you compare "before" and "after" below, we see that Sphinx recognizes regular package and treat it appropriately. Hence I think we need to wait until Sphinx gets equipped with some mechanism to deal with namespace packages appropriately. It seems that Sphinx does not have such a mechanism yet (as far as I know by googling).   

---
Before the patch: this line

```
.. toctree::    

    sage/combinat/__init__   
```
generates

```
.. nodoctest

.. _sage.combinat:

Combinatorics
=============

.. This file has been autogenerated.


.. automodule:: sage.combinat.__init__
   :members:
   :undoc-members:
   :show-inheritance:   
```

After the patch: this line

```
.. toctree::    

    sage/combinat/all  
```
generates

```
.. nodoctest

.. _sage.combinat.all:

Combinatorics
=============

.. This file has been autogenerated.


.. automodule:: sage.combinat.all
   :members:
   :undoc-members:
   :show-inheritance:  
```



---

archive/issue_events_450362.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-12T21:27:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450362"
}
```



---

archive/issue_events_450363.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4f555cc95f8c1efc3fc242ac2faa449aef48eb6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-11-12T21:27:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32508#event-450363"
}
```



---

archive/issue_comments_524356.json:
```json
{
    "body": "Changed branch from **[public/32508](https://github.com/sagemath/sagetrac-mirror/tree/public/32508)** to **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**",
    "created_at": "2021-11-12T21:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524356",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/32508](https://github.com/sagemath/sagetrac-mirror/tree/public/32508)** to **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)**



---

archive/issue_comments_524357.json:
```json
{
    "body": "Changed commit from **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)** to none",
    "created_at": "2022-05-29T00:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524357",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`ee4367d`](https://github.com/sagemath/sagetrac-mirror/commit/ee4367df90299b3a77e944c5b8daaaae91c40c1c)** to none



---

archive/issue_comments_524358.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThe addition of\n\n```\nfrom . import quickref, tutorial\n```\nto `sage.combinat.all` broke the top-level `tutorial()` command. Maybe that command should be removed anyway, especially since no one has reported its loss, but in any case, right now `tutorial()` is broken as a command in Sage.",
    "created_at": "2022-05-29T00:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524358",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:59" align="right">comment:59</div>

The addition of

```
from . import quickref, tutorial
```
to `sage.combinat.all` broke the top-level `tutorial()` command. Maybe that command should be removed anyway, especially since no one has reported its loss, but in any case, right now `tutorial()` is broken as a command in Sage.



---

archive/issue_comments_524359.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@jhpalmieri](#comment:59):\n> The addition of\n> \n> ```\n> from . import quickref, tutorial\n> ```\n> to `sage.combinat.all` broke the top-level `tutorial()` command. Maybe that command should be removed anyway, especially since no one has reported its loss, but in any case, right now `tutorial()` is broken as a command in Sage.\n\nAfter 7 months, I don't remember why I put that line into `all.py`. Simply removing that line would solve the problem. Yes? We don't need `quickref` either in the global name space.",
    "created_at": "2022-05-29T06:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524359",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@jhpalmieri](#comment:59):
> The addition of
> 
> ```
> from . import quickref, tutorial
> ```
> to `sage.combinat.all` broke the top-level `tutorial()` command. Maybe that command should be removed anyway, especially since no one has reported its loss, but in any case, right now `tutorial()` is broken as a command in Sage.

After 7 months, I don't remember why I put that line into `all.py`. Simply removing that line would solve the problem. Yes? We don't need `quickref` either in the global name space.



---

archive/issue_comments_524360.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nIndeed, there is no reason for quickref and tutorial to be in the global namespace.\nAll we need is to be able to do sage.combinat? sage.combinat.tutorial? and sage.combinat.quickref?",
    "created_at": "2022-05-29T10:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524360",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:61" align="right">comment:61</div>

Indeed, there is no reason for quickref and tutorial to be in the global namespace.
All we need is to be able to do sage.combinat? sage.combinat.tutorial? and sage.combinat.quickref?



---

archive/issue_comments_524361.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nSee #33933.",
    "created_at": "2022-05-29T12:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32508#issuecomment-524361",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:62" align="right">comment:62</div>

See #33933.
