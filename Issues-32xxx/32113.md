# Issue 32113: GH Actions: conda-forge tests broken

archive/issues_031876.json:
```json
{
    "body": "`docker-conda-forge-minimal`, `docker-conda-forge-standard` (https://github.com/sagemath/sage/runs/2967006198?check_suite_focus=true)\n\n```\n  [python3-3.9.5]   LD_LIBRARY_PATH=/sage/local/var/tmp/sage/build/python3-3.9.5/src CC='/opt/conda/bin/x86_64-conda-linux-gnu-cc -pthread' LDSHARED='/opt/conda/bin/x86_64-conda-linux-gnu-cc -pthread -shared -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -L. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib  ' OPT='-DNDEBUG -g -fwrapv -O3 -Wall' \t_TCLTK_INCLUDES='' _TCLTK_LIBS='' \t./python -E ./setup.py  build\n  [python3-3.9.5]   Traceback (most recent call last):\n  [python3-3.9.5]     File \"/sage/local/var/tmp/sage/build/python3-3.9.5/src/./setup.py\", line 33, in <module>\n  [python3-3.9.5]       from distutils import log\n  [python3-3.9.5]     File \"/opt/conda/lib/python3.9/site-packages/_distutils_hack/__init__.py\", line 80, in create_module\n  [python3-3.9.5]       return importlib.import_module('._distutils', 'setuptools')\n  [python3-3.9.5]     File \"/opt/conda/lib/python3.9/importlib/__init__.py\", line 127, in import_module\n  [python3-3.9.5]       return _bootstrap._gcd_import(name[level:], package, level)\n  [python3-3.9.5]     File \"/opt/conda/lib/python3.9/site-packages/setuptools/__init__.py\", line 16, in <module>\n  [python3-3.9.5]       from setuptools.extern.six import PY3, string_types\n  [python3-3.9.5]     File \"/opt/conda/lib/python3.9/site-packages/setuptools/extern/__init__.py\", line 50, in load_module\n  [python3-3.9.5]       raise ImportError(\n  [python3-3.9.5]   ImportError: The 'six' package is required; normally this is bundled with this package so if you get this warning, consult the packager of your distribution.\n  [python3-3.9.5]   make[3]: *** [Makefile:641: sharedmods] Error 1\n```\n\n`conda-forge-ubuntu` (https://github.com/sagemath/sage/runs/2967003736?check_suite_focus=true):\n\n```\nlocal-conda-forge-ubuntu-minimal run-test: commands[5] | bash -c 'if [ ! -x /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda/bin/conda ]; then curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /home/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /home/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda; fi'\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n100   160  100   160    0     0    935      0 --:--:-- --:--:-- --:--:--   935\n\n100   634  100   634    0     0   1962      0 --:--:-- --:--:-- --:--:--  1962\n\n 22 69.9M   22 15.6M    0     0  15.6M      0  0:00:04 --:--:--  0:00:04 15.6M\n 61 69.9M   61 42.8M    0     0  20.8M      0  0:00:03  0:00:02  0:00:01 25.7M\n100 69.9M  100 69.9M    0     0  25.0M      0  0:00:02  0:00:02 --:--:-- 30.2M\nPREFIX=/home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda\nUnpacking payload ...\nERROR   Expected environment not found at prefix: /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda\nERROR   Aborting.\n/home/runner/work/sage/sage/.tox/Caches/Miniforge3-Linux-x86_64.sh: line 365: /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda/preconda.tar.bz2: No such file or directory\n```\n\nLikewise on `local-conda-forge-macos`, https://github.com/sagemath/sage/runs/2967003146?check_suite_focus=true\n\n\n\n\nCC:  @isuruf @videlec @dimpase @kliem\n\nBranch/Commit: f3116a125a3283b84240c783d3d19900ca740614\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #30766, #32894\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32113\n\n",
    "closed_at": "2022-01-01T00:23:35Z",
    "created_at": "2021-07-03T17:47:54Z",
    "labels": [
        "component: porting",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "GH Actions: conda-forge tests broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32113",
    "user": "https://github.com/mkoeppe"
}
```
`docker-conda-forge-minimal`, `docker-conda-forge-standard` (https://github.com/sagemath/sage/runs/2967006198?check_suite_focus=true)

```
  [python3-3.9.5]   LD_LIBRARY_PATH=/sage/local/var/tmp/sage/build/python3-3.9.5/src CC='/opt/conda/bin/x86_64-conda-linux-gnu-cc -pthread' LDSHARED='/opt/conda/bin/x86_64-conda-linux-gnu-cc -pthread -shared -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -L. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib  ' OPT='-DNDEBUG -g -fwrapv -O3 -Wall' 	_TCLTK_INCLUDES='' _TCLTK_LIBS='' 	./python -E ./setup.py  build
  [python3-3.9.5]   Traceback (most recent call last):
  [python3-3.9.5]     File "/sage/local/var/tmp/sage/build/python3-3.9.5/src/./setup.py", line 33, in <module>
  [python3-3.9.5]       from distutils import log
  [python3-3.9.5]     File "/opt/conda/lib/python3.9/site-packages/_distutils_hack/__init__.py", line 80, in create_module
  [python3-3.9.5]       return importlib.import_module('._distutils', 'setuptools')
  [python3-3.9.5]     File "/opt/conda/lib/python3.9/importlib/__init__.py", line 127, in import_module
  [python3-3.9.5]       return _bootstrap._gcd_import(name[level:], package, level)
  [python3-3.9.5]     File "/opt/conda/lib/python3.9/site-packages/setuptools/__init__.py", line 16, in <module>
  [python3-3.9.5]       from setuptools.extern.six import PY3, string_types
  [python3-3.9.5]     File "/opt/conda/lib/python3.9/site-packages/setuptools/extern/__init__.py", line 50, in load_module
  [python3-3.9.5]       raise ImportError(
  [python3-3.9.5]   ImportError: The 'six' package is required; normally this is bundled with this package so if you get this warning, consult the packager of your distribution.
  [python3-3.9.5]   make[3]: *** [Makefile:641: sharedmods] Error 1
```

`conda-forge-ubuntu` (https://github.com/sagemath/sage/runs/2967003736?check_suite_focus=true):

```
local-conda-forge-ubuntu-minimal run-test: commands[5] | bash -c 'if [ ! -x /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda/bin/conda ]; then curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /home/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /home/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda; fi'
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100   160  100   160    0     0    935      0 --:--:-- --:--:-- --:--:--   935

100   634  100   634    0     0   1962      0 --:--:-- --:--:-- --:--:--  1962

 22 69.9M   22 15.6M    0     0  15.6M      0  0:00:04 --:--:--  0:00:04 15.6M
 61 69.9M   61 42.8M    0     0  20.8M      0  0:00:03  0:00:02  0:00:01 25.7M
100 69.9M  100 69.9M    0     0  25.0M      0  0:00:02  0:00:02 --:--:-- 30.2M
PREFIX=/home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda
Unpacking payload ...
ERROR   Expected environment not found at prefix: /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda
ERROR   Aborting.
/home/runner/work/sage/sage/.tox/Caches/Miniforge3-Linux-x86_64.sh: line 365: /home/runner/work/sage/sage/.tox/local-conda-forge-ubuntu-minimal/conda/preconda.tar.bz2: No such file or directory
```

Likewise on `local-conda-forge-macos`, https://github.com/sagemath/sage/runs/2967003146?check_suite_focus=true




CC:  @isuruf @videlec @dimpase @kliem

Branch/Commit: f3116a125a3283b84240c783d3d19900ca740614

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #30766, #32894

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32113





---

archive/issue_comments_639308.json:
```json
{
    "body": "<a id='comment:1'></a>Can you try removing `SETUPTOOLS_USE_DISTUTILS=local` for now?",
    "created_at": "2021-07-03T20:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639308",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:1'></a>Can you try removing `SETUPTOOLS_USE_DISTUTILS=local` for now?



---

archive/issue_comments_639309.json:
```json
{
    "body": "<a id='comment:2'></a>Sure, we can conditionalize this on `CONDA_PREFIX` like in `build/pkgs/pillow/spkg-install.in`",
    "created_at": "2021-07-03T22:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639309",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Sure, we can conditionalize this on `CONDA_PREFIX` like in `build/pkgs/pillow/spkg-install.in`



---

archive/issue_events_085002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32113#event-85002"
}
```



---

archive/issue_comments_639310.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#32558, #32557\"",
    "created_at": "2021-09-25T22:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639310",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#32558, #32557"



---

archive/issue_comments_639311.json:
```json
{
    "body": "Changing branch from \"\" to \"u/isuruf/conda\"",
    "created_at": "2021-09-28T21:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639311",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "" to "u/isuruf/conda"



---

archive/issue_comments_639312.json:
```json
{
    "body": "Changing author from \"\" to \"Isuru Fernando\"",
    "created_at": "2021-09-28T21:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639312",
    "user": "https://github.com/isuruf"
}
```

Changing author from "" to "Isuru Fernando"



---

archive/issue_comments_639313.json:
```json
{
    "body": "<a id='comment:5'></a>Added a branch. Needs to be tested after merging in the dependencies.",
    "created_at": "2021-09-28T21:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639313",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:5'></a>Added a branch. Needs to be tested after merging in the dependencies.



---

archive/issue_comments_639314.json:
```json
{
    "body": "Changing commit from \"\" to \"330db42a75b978c7737b72266345f9fc56c57974\"",
    "created_at": "2021-09-28T21:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639314",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "" to "330db42a75b978c7737b72266345f9fc56c57974"



---

archive/issue_comments_639315.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-28T21:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639315",
    "user": "https://github.com/isuruf"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_639316.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-28T21:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639317.json:
```json
{
    "body": "Changing commit from \"330db42a75b978c7737b72266345f9fc56c57974\" to \"ccdd330e2646fbb6de5d256f73dd00d303f4e702\"",
    "created_at": "2021-09-28T21:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "330db42a75b978c7737b72266345f9fc56c57974" to "ccdd330e2646fbb6de5d256f73dd00d303f4e702"



---

archive/issue_comments_639318.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-09-28T21:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639318",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_639319.json:
```json
{
    "body": "Changing commit from \"ccdd330e2646fbb6de5d256f73dd00d303f4e702\" to \"b85cfba08b0156f670dfc8dffb9e122dee30a6b0\"",
    "created_at": "2021-09-28T21:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ccdd330e2646fbb6de5d256f73dd00d303f4e702" to "b85cfba08b0156f670dfc8dffb9e122dee30a6b0"



---

archive/issue_comments_639320.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-29T16:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639321.json:
```json
{
    "body": "Changing commit from \"b85cfba08b0156f670dfc8dffb9e122dee30a6b0\" to \"2d4421c5b4887f6665b6fa225975a1b2c5044bb6\"",
    "created_at": "2021-09-29T16:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b85cfba08b0156f670dfc8dffb9e122dee30a6b0" to "2d4421c5b4887f6665b6fa225975a1b2c5044bb6"



---

archive/issue_comments_639322.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-29T21:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639323.json:
```json
{
    "body": "Changing commit from \"2d4421c5b4887f6665b6fa225975a1b2c5044bb6\" to \"9a38a29c123aa808fdafeb20d14b4fe39f542443\"",
    "created_at": "2021-09-29T21:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d4421c5b4887f6665b6fa225975a1b2c5044bb6" to "9a38a29c123aa808fdafeb20d14b4fe39f542443"



---

archive/issue_comments_639324.json:
```json
{
    "body": "Changing dependencies from \"#32558, #32557\" to \"#32558, #32557, #32424\"",
    "created_at": "2021-09-29T21:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639324",
    "user": "https://github.com/isuruf"
}
```

Changing dependencies from "#32558, #32557" to "#32558, #32557, #32424"



---

archive/issue_comments_639325.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2021-09-29T21:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639325",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_639326.json:
```json
{
    "body": "<a id='comment:12'></a>how about dropping nose? All the packages that used it have swithed to pytests.",
    "created_at": "2021-09-29T23:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639326",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>how about dropping nose? All the packages that used it have swithed to pytests.



---

archive/issue_comments_639327.json:
```json
{
    "body": "<a id='comment:13'></a>pytest is optional at the moment. Let's start a vote to drop nose and promote pytest to standard",
    "created_at": "2021-09-29T23:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639327",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:13'></a>pytest is optional at the moment. Let's start a vote to drop nose and promote pytest to standard



---

archive/issue_comments_639328.json:
```json
{
    "body": "Changing dependencies from \"#32558, #32557, #32424\" to \"#32558, #32557, #32424, #32595\"",
    "created_at": "2021-10-13T06:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639328",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32558, #32557, #32424" to "#32558, #32557, #32424, #32595"



---

archive/issue_comments_639329.json:
```json
{
    "body": "<a id='comment:14'></a>The latest run, with 9.3.beta5, of `local-conda-forge-macos-standard` (https://github.com/sagemath/sage/runs/3863933907?check_suite_focus=true) looks better but uses XCode's python3, as #31539 is still unresolved.",
    "created_at": "2021-10-13T06:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639329",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>The latest run, with 9.3.beta5, of `local-conda-forge-macos-standard` (https://github.com/sagemath/sage/runs/3863933907?check_suite_focus=true) looks better but uses XCode's python3, as #31539 is still unresolved.



---

archive/issue_comments_639330.json:
```json
{
    "body": "Changing branch from \"u/isuruf/conda\" to \"u/mkoeppe/conda\"",
    "created_at": "2021-10-22T19:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639330",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/isuruf/conda" to "u/mkoeppe/conda"



---

archive/issue_comments_639331.json:
```json
{
    "body": "<a id='comment:16'></a>Not sure if my rebase of the rpath business will work as intended\n\n---\nNew commits:",
    "created_at": "2021-10-22T19:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639331",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Not sure if my rebase of the rpath business will work as intended

---
New commits:



---

archive/issue_comments_639332.json:
```json
{
    "body": "Changing commit from \"9a38a29c123aa808fdafeb20d14b4fe39f542443\" to \"ee6256df89af258d039ee9175b1b7116a52c8128\"",
    "created_at": "2021-10-22T19:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639332",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "9a38a29c123aa808fdafeb20d14b4fe39f542443" to "ee6256df89af258d039ee9175b1b7116a52c8128"



---

archive/issue_comments_639333.json:
```json
{
    "body": "<a id='comment:17'></a>https://github.com/mkoeppe/sage/runs/3986317613?check_suite_focus=true\n\n```\nlocal-conda-forge-macos-minimal create: /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal\nlocal-conda-forge-macos-minimal run-test-pre: PYTHONHASHSEED='3748675463'\nlocal-conda-forge-macos-minimal run-test: commands[0] | bash -c 'if [ ! -d /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library/Caches ]; then mkdir -p /Users/runner/work/sage/sage/.tox/Caches && mkdir -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library && ln -sf /Users/runner/work/sage/sage/.tox/Caches /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library/; fi'\nlocal-conda-forge-macos-minimal run-test: commands[1] | bash -c 'mkdir -p /Users/runner/work/sage/sage/.tox/Caches/conda_pkgs /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda'\nlocal-conda-forge-macos-minimal run-test: commands[2] | bash -c 'echo >  /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc \"pkgs_dirs:\"'\nlocal-conda-forge-macos-minimal run-test: commands[3] | bash -c 'echo >> /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc \"  - /Users/runner/work/sage/sage/.tox/Caches/conda_pkgs\"'\nlocal-conda-forge-macos-minimal run-test: commands[4] | bash -c 'cat condarc.yml >> /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc'\nlocal-conda-forge-macos-minimal run-test: commands[5] | bash -c 'if [ ! -x /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/bin/conda ]; then mkdir /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/conda-meta && curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda; fi'\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n100   161  100   161    0     0    800      0 --:--:-- --:--:-- --:--:--   805\n\n100   635  100   635    0     0   1819      0 --:--:-- --:--:-- --:--:--  1819\n\n 13 41.5M   13 5778k    0     0  8161k      0  0:00:05 --:--:--  0:00:05 8161k\n100 41.5M  100 41.5M    0     0  31.2M      0  0:00:01  0:00:01 --:--:-- 57.9M\nPREFIX=/Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda\nUnpacking payload ...\nERROR   Configuration file specified but does not exist at 'condarc.yml'\nERROR   Aborting.\n/Users/runner/work/sage/sage/.tox/Caches/Miniforge3-MacOSX-x86_64.sh: line 364: /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/preconda.tar.bz2: No such file or directory\nERROR: InvocationError for command /bin/bash -c 'if [ ! -x /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/bin/conda ]; then mkdir /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/conda-meta && curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda; fi' (exited with code 1)\n```",
    "created_at": "2021-10-24T06:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639333",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>https://github.com/mkoeppe/sage/runs/3986317613?check_suite_focus=true

```
local-conda-forge-macos-minimal create: /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal
local-conda-forge-macos-minimal run-test-pre: PYTHONHASHSEED='3748675463'
local-conda-forge-macos-minimal run-test: commands[0] | bash -c 'if [ ! -d /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library/Caches ]; then mkdir -p /Users/runner/work/sage/sage/.tox/Caches && mkdir -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library && ln -sf /Users/runner/work/sage/sage/.tox/Caches /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/Library/; fi'
local-conda-forge-macos-minimal run-test: commands[1] | bash -c 'mkdir -p /Users/runner/work/sage/sage/.tox/Caches/conda_pkgs /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda'
local-conda-forge-macos-minimal run-test: commands[2] | bash -c 'echo >  /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc "pkgs_dirs:"'
local-conda-forge-macos-minimal run-test: commands[3] | bash -c 'echo >> /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc "  - /Users/runner/work/sage/sage/.tox/Caches/conda_pkgs"'
local-conda-forge-macos-minimal run-test: commands[4] | bash -c 'cat condarc.yml >> /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/.condarc'
local-conda-forge-macos-minimal run-test: commands[5] | bash -c 'if [ ! -x /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/bin/conda ]; then mkdir /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/conda-meta && curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda; fi'
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100   161  100   161    0     0    800      0 --:--:-- --:--:-- --:--:--   805

100   635  100   635    0     0   1819      0 --:--:-- --:--:-- --:--:--  1819

 13 41.5M   13 5778k    0     0  8161k      0  0:00:05 --:--:--  0:00:05 8161k
100 41.5M  100 41.5M    0     0  31.2M      0  0:00:01  0:00:01 --:--:-- 57.9M
PREFIX=/Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda
Unpacking payload ...
ERROR   Configuration file specified but does not exist at 'condarc.yml'
ERROR   Aborting.
/Users/runner/work/sage/sage/.tox/Caches/Miniforge3-MacOSX-x86_64.sh: line 364: /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/preconda.tar.bz2: No such file or directory
ERROR: InvocationError for command /bin/bash -c 'if [ ! -x /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/bin/conda ]; then mkdir /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda/conda-meta && curl -L https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -C - -o /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh && bash /Users/runner/work/sage/sage/.tox/Caches/Miniforge3-$(uname | sed s/^Darwin/MacOSX/;)-x86_64.sh -b -f -p /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-minimal/conda; fi' (exited with code 1)
```



---

archive/issue_comments_639334.json:
```json
{
    "body": "Changing commit from \"ee6256df89af258d039ee9175b1b7116a52c8128\" to \"e6b912b18d36ed3d3256021543cf2f41af5c4ad2\"",
    "created_at": "2021-12-20T22:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ee6256df89af258d039ee9175b1b7116a52c8128" to "e6b912b18d36ed3d3256021543cf2f41af5c4ad2"



---

archive/issue_comments_639335.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-12-20T22:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639335",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_639336.json:
```json
{
    "body": "Changing dependencies from \"#32558, #32557, #32424, #32595\" to \"\"",
    "created_at": "2021-12-20T22:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639336",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32558, #32557, #32424, #32595" to ""



---

archive/issue_comments_639337.json:
```json
{
    "body": "Changing author from \"Isuru Fernando\" to \"Isuru Fernando, Matthias Koeppe\"",
    "created_at": "2021-12-20T22:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639337",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Isuru Fernando" to "Isuru Fernando, Matthias Koeppe"



---

archive/issue_comments_639338.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-12-20T22:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639338",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_639339.json:
```json
{
    "body": "<a id='comment:21'></a>The last commit fixes `ERROR   Configuration file specified but does not exist at 'condarc.yml'`",
    "created_at": "2021-12-20T23:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639339",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>The last commit fixes `ERROR   Configuration file specified but does not exist at 'condarc.yml'`



---

archive/issue_comments_639340.json:
```json
{
    "body": "<a id='comment:22'></a>With `tox -e docker-conda-forge-minimal` I get:\n\n```\n  [openblas-0.3.18]   /opt/conda/bin/x86_64-conda-linux-gnu-cc -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DNO_WARMUP -DMAX_CPU_NUMBER=10 -DMAX_PARALLEL_NUMBER=1 -DUSE_TLS -DBUILD_SINGLE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.18\\\" -msse3 -mssse3 -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME=\\\"_\\\" -DCHAR_CNAME=\\\"\\\" -DNO_AFFINITY -I. -O2 -DSMALL_MATRIX_OPT -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DNO_WARMUP -DMAX_CPU_NUMBER=10 -DMAX_PARALLEL_NUMBER=1 -DUSE_TLS -DBUILD_SINGLE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.18\\\" -msse3 -mssse3 -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME=\\\"_\\\" -DCHAR_CNAME=\\\"\\\" -DNO_AFFINITY -I.. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -w -o linktest linktest.c ../libopenblas_atomp-r0.3.18.so -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0 -L/opt/conda/bin/../lib/gcc -L/sage/local/lib/../lib -L/sage/local/lib/../lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/sage/local/lib -L/sage/local/lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../.. -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -Wl,-rpath,/opt/conda/lib  -lgfortran -lm -lquadmath -lm -lc   && echo OK.\n  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `GOMP_parallel'\n  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_thread_num_'\n  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_num_threads_'\n  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `GOMP_task'\n  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_thread_num'\n  [openblas-0.3.18]   collect2: error: ld returned 1 exit status\n  [openblas-0.3.18]   make[4]: *** [Makefile:186: ../libopenblas_atomp-r0.3.18.so] Error 1\n  [openblas-0.3.18]   make[4]: Target 'so' not remade because of errors.\n  [openblas-0.3.18]   make[3]: *** [Makefile:122: shared] Error 2\n  [openblas-0.3.18]   ********************************************************************************\n  [openblas-0.3.18]   Error building openblas-0.3.18\n  [openblas-0.3.18]   ********************************************************************************\n```",
    "created_at": "2021-12-20T23:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639340",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>With `tox -e docker-conda-forge-minimal` I get:

```
  [openblas-0.3.18]   /opt/conda/bin/x86_64-conda-linux-gnu-cc -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DNO_WARMUP -DMAX_CPU_NUMBER=10 -DMAX_PARALLEL_NUMBER=1 -DUSE_TLS -DBUILD_SINGLE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\"0.3.18\" -msse3 -mssse3 -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME=\"_\" -DCHAR_CNAME=\"\" -DNO_AFFINITY -I. -O2 -DSMALL_MATRIX_OPT -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DNO_WARMUP -DMAX_CPU_NUMBER=10 -DMAX_PARALLEL_NUMBER=1 -DUSE_TLS -DBUILD_SINGLE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\"0.3.18\" -msse3 -mssse3 -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME=\"_\" -DCHAR_CNAME=\"\" -DNO_AFFINITY -I.. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -w -o linktest linktest.c ../libopenblas_atomp-r0.3.18.so -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0 -L/opt/conda/bin/../lib/gcc -L/sage/local/lib/../lib -L/sage/local/lib/../lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/lib/../lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/lib/../lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib/../lib -L/sage/local/lib -L/sage/local/lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/lib -L/opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../.. -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/lib -L/opt/conda/bin/../x86_64-conda-linux-gnu/sysroot/usr/lib -Wl,-rpath,/opt/conda/lib  -lgfortran -lm -lquadmath -lm -lc   && echo OK.
  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `GOMP_parallel'
  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_thread_num_'
  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_num_threads_'
  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `GOMP_task'
  [openblas-0.3.18]   /opt/conda/bin/../lib/gcc/x86_64-conda-linux-gnu/9.4.0/../../../../x86_64-conda-linux-gnu/bin/ld: ../libopenblas_atomp-r0.3.18.so: undefined reference to `omp_get_thread_num'
  [openblas-0.3.18]   collect2: error: ld returned 1 exit status
  [openblas-0.3.18]   make[4]: *** [Makefile:186: ../libopenblas_atomp-r0.3.18.so] Error 1
  [openblas-0.3.18]   make[4]: Target 'so' not remade because of errors.
  [openblas-0.3.18]   make[3]: *** [Makefile:122: shared] Error 2
  [openblas-0.3.18]   ********************************************************************************
  [openblas-0.3.18]   Error building openblas-0.3.18
  [openblas-0.3.18]   ********************************************************************************
```



---

archive/issue_comments_639341.json:
```json
{
    "body": "<a id='comment:23'></a>With `tox -e docker-conda-forge-standard` I get a build error with `primecount`. That's now #33054.",
    "created_at": "2021-12-20T23:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639341",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>With `tox -e docker-conda-forge-standard` I get a build error with `primecount`. That's now #33054.



---

archive/issue_comments_639342.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30766\"",
    "created_at": "2021-12-21T01:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639342",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30766"



---

archive/issue_comments_639343.json:
```json
{
    "body": "Changing commit from \"e6b912b18d36ed3d3256021543cf2f41af5c4ad2\" to \"c0b5b67966eb27ccd18f76c5bc932c2ce0468d43\"",
    "created_at": "2021-12-21T01:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e6b912b18d36ed3d3256021543cf2f41af5c4ad2" to "c0b5b67966eb27ccd18f76c5bc932c2ce0468d43"



---

archive/issue_comments_639344.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-21T01:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_639345.json:
```json
{
    "body": "Changing dependencies from \"#30766\" to \"#30766, #32894\"",
    "created_at": "2021-12-21T01:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639345",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30766" to "#30766, #32894"



---

archive/issue_comments_639346.json:
```json
{
    "body": "<a id='comment:27'></a>I've put the commits for fixing the `python3` spkg build on #33055.\n\nHere on this ticket, I'll focus on getting the `conda-forge-standard` builds to work (using conda's python) - the `python3` patches are not needed here.",
    "created_at": "2021-12-21T03:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639346",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>I've put the commits for fixing the `python3` spkg build on #33055.

Here on this ticket, I'll focus on getting the `conda-forge-standard` builds to work (using conda's python) - the `python3` patches are not needed here.



---

archive/issue_comments_639347.json:
```json
{
    "body": "Changing commit from \"c0b5b67966eb27ccd18f76c5bc932c2ce0468d43\" to \"f3116a125a3283b84240c783d3d19900ca740614\"",
    "created_at": "2021-12-21T03:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c0b5b67966eb27ccd18f76c5bc932c2ce0468d43" to "f3116a125a3283b84240c783d3d19900ca740614"



---

archive/issue_comments_639348.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-12-21T03:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639348",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_639349.json:
```json
{
    "body": "Changing author from \"Isuru Fernando, Matthias Koeppe\" to \"Matthias Koeppe\"",
    "created_at": "2021-12-21T03:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639349",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Isuru Fernando, Matthias Koeppe" to "Matthias Koeppe"



---

archive/issue_comments_639350.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/1605145773\"",
    "created_at": "2021-12-21T04:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639350",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/1605145773"



---

archive/issue_comments_639351.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-23T10:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639351",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_639352.json:
```json
{
    "body": "<a id='comment:32'></a>lgtm",
    "created_at": "2021-12-23T10:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639352",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>lgtm



---

archive/issue_comments_639353.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks!",
    "created_at": "2021-12-23T16:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639353",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Thanks!



---

archive/issue_comments_639354.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/1605145773\" to \"Dima Pasechnik\"",
    "created_at": "2021-12-23T16:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639354",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/1605145773" to "Dima Pasechnik"



---

archive/issue_comments_639355.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-01T00:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639355",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_639356.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/conda\" to \"f3116a125a3283b84240c783d3d19900ca740614\"",
    "created_at": "2022-01-01T00:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32113#issuecomment-639356",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/conda" to "f3116a125a3283b84240c783d3d19900ca740614"



---

archive/issue_events_085003.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-01T00:23:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32113",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32113#event-85003"
}
```
