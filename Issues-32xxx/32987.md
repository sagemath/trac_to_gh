# Issue 32987: Deprecate sage.misc.misc.sage_makedirs

archive/issues_032750.json:
```json
{
    "body": "As noted in #29093, in py3, `os.makedirs` learned an `exist_ok` option that makes `sage_makedirs` entirely redundant.\n\nhttps://docs.python.org/3/library/os.html#os.makedirs\n\nSince then we have dropped py2 support, so we can deprecate `sage_makedirs` and replace all uses in the library.\n\n\n\nCC:  @mezzarobba @orlitzky\n\nBranch/Commit: d3b32527ddbb7edb2760bb79079111ed6af277ec\n\nReviewer: Kwankyu Lee, Michael Orlitzky\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32987\n\n",
    "closed_at": "2022-02-21T21:56:30Z",
    "created_at": "2021-12-06T21:01:56Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Deprecate sage.misc.misc.sage_makedirs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32987",
    "user": "https://github.com/mkoeppe"
}
```
As noted in #29093, in py3, `os.makedirs` learned an `exist_ok` option that makes `sage_makedirs` entirely redundant.

https://docs.python.org/3/library/os.html#os.makedirs

Since then we have dropped py2 support, so we can deprecate `sage_makedirs` and replace all uses in the library.



CC:  @mezzarobba @orlitzky

Branch/Commit: d3b32527ddbb7edb2760bb79079111ed6af277ec

Reviewer: Kwankyu Lee, Michael Orlitzky

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32987





---

archive/issue_comments_657793.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n As noted in #29093, in py3, `os.makedirs` learned an `exist_ok` option that makes `sage_makedirs` entirely redundant.\n+\n+https://docs.python.org/3/library/os.html#os.makedirs\n \n Since then we have dropped py2 support, so we can deprecate `sage_makedirs` and replace all uses in the library.\n \n``````\n",
    "created_at": "2021-12-06T21:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657793",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 As noted in #29093, in py3, `os.makedirs` learned an `exist_ok` option that makes `sage_makedirs` entirely redundant.
+
+https://docs.python.org/3/library/os.html#os.makedirs
 
 Since then we have dropped py2 support, so we can deprecate `sage_makedirs` and replace all uses in the library.
 
``````




---

archive/issue_comments_657794.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#32986\"",
    "created_at": "2021-12-06T23:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657794",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#32986"



---

archive/issue_comments_657795.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/deprecate_sage_misc_misc_sage_makedirs\"",
    "created_at": "2021-12-09T02:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657795",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/deprecate_sage_misc_misc_sage_makedirs"



---

archive/issue_comments_657796.json:
```json
{
    "body": "Changing commit from \"\" to \"37218dac6ec4a396968f6ad290272ea43fccde20\"",
    "created_at": "2021-12-09T02:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657796",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "37218dac6ec4a396968f6ad290272ea43fccde20"



---

archive/issue_comments_657797.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-09T02:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657797",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_657798.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[81d0fff](https://git.sagemath.org/sage.git/commit?id=81d0fff79ade95acbbe856dc294df69ef85a3cb6)|`sage.misc.temporary_file: Move SAGE_TMP implementation here`|\n|[7e78f59](https://git.sagemath.org/sage.git/commit?id=7e78f591a9a584e8c5a4b098619fe6865ab0cf21)|`src/sage/misc/temporary_file.py: Remove use of functools.cache`|\n|[a9de636](https://git.sagemath.org/sage.git/commit?id=a9de636da996d515b37475481777f5b50dc9a00c)|`Merge #32986`|\n|[52b810f](https://git.sagemath.org/sage.git/commit?id=52b810fff3a14d8cd57db18726ca11edd03a180b)|`git grep -l sage_makedirs | xargs sed -E -i.bak 's/from sage.misc.misc import sage_makedirs/import os/;s/sage_makedirs[(](.*)[)]$/os.makedirs(\\1, exist_ok=True)/'`|\n|[5b94d90](https://git.sagemath.org/sage.git/commit?id=5b94d90f1a2718b8549cf55251ea57192c61d0a8)|`Remove duplicate imports`|\n|[976ff6f](https://git.sagemath.org/sage.git/commit?id=976ff6f2a0c3ace568c55599739a280f09839e7c)|`Remove remaining import of sage_makedirs`|\n|[37218da](https://git.sagemath.org/sage.git/commit?id=37218dac6ec4a396968f6ad290272ea43fccde20)|`sage.misc.misc.sage_makedirs: Deprecate`|",
    "created_at": "2021-12-09T02:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657798",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[81d0fff](https://git.sagemath.org/sage.git/commit?id=81d0fff79ade95acbbe856dc294df69ef85a3cb6)|`sage.misc.temporary_file: Move SAGE_TMP implementation here`|
|[7e78f59](https://git.sagemath.org/sage.git/commit?id=7e78f591a9a584e8c5a4b098619fe6865ab0cf21)|`src/sage/misc/temporary_file.py: Remove use of functools.cache`|
|[a9de636](https://git.sagemath.org/sage.git/commit?id=a9de636da996d515b37475481777f5b50dc9a00c)|`Merge #32986`|
|[52b810f](https://git.sagemath.org/sage.git/commit?id=52b810fff3a14d8cd57db18726ca11edd03a180b)|`git grep -l sage_makedirs | xargs sed -E -i.bak 's/from sage.misc.misc import sage_makedirs/import os/;s/sage_makedirs[(](.*)[)]$/os.makedirs(\1, exist_ok=True)/'`|
|[5b94d90](https://git.sagemath.org/sage.git/commit?id=5b94d90f1a2718b8549cf55251ea57192c61d0a8)|`Remove duplicate imports`|
|[976ff6f](https://git.sagemath.org/sage.git/commit?id=976ff6f2a0c3ace568c55599739a280f09839e7c)|`Remove remaining import of sage_makedirs`|
|[37218da](https://git.sagemath.org/sage.git/commit?id=37218dac6ec4a396968f6ad290272ea43fccde20)|`sage.misc.misc.sage_makedirs: Deprecate`|



---

archive/issue_comments_657799.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-12-09T02:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657799",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_657800.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt works well. \n\nI see two doctest failures with `src/sage/tests/cmdline.py`, but these seem related with `pytest` issues, not with the current branch.",
    "created_at": "2021-12-10T13:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657800",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:5'></a>
It works well. 

I see two doctest failures with `src/sage/tests/cmdline.py`, but these seem related with `pytest` issues, not with the current branch.



---

archive/issue_comments_657801.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kwankyu Lee\"",
    "created_at": "2021-12-10T13:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657801",
    "user": "https://github.com/kwankyu"
}
```

Changing reviewer from "" to "Kwankyu Lee"



---

archive/issue_comments_657802.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-10T13:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657802",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_657803.json:
```json
{
    "body": "<a id='comment:6'></a>\nThank you!",
    "created_at": "2021-12-10T16:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657803",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Thank you!



---

archive/issue_events_087155.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:35:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32987#event-87155"
}
```



---

archive/issue_comments_657804.json:
```json
{
    "body": "Changing commit from \"37218dac6ec4a396968f6ad290272ea43fccde20\" to \"d3b32527ddbb7edb2760bb79079111ed6af277ec\"",
    "created_at": "2022-02-18T20:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37218dac6ec4a396968f6ad290272ea43fccde20" to "d3b32527ddbb7edb2760bb79079111ed6af277ec"



---

archive/issue_comments_657805.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-02-18T20:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_657806.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                                                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[766d835](https://git.sagemath.org/sage.git/commit/?id=766d8352791446250d64a2342acb320a0d8a1d4c)|`git grep -l sage_makedirs | xargs sed -E -i.bak 's/from sage.misc.misc import sage_makedirs/import os/;s/sage_makedirs[(](.*)[)]$/os.makedirs(\\1, exist_ok=True)/'`|\n|[4494364](https://git.sagemath.org/sage.git/commit/?id=44943641aa965e4106727cc6a04985f615f039f0)|`Remove duplicate imports`|\n|[41b015c](https://git.sagemath.org/sage.git/commit/?id=41b015ceb5854ea71d2fec2ff68cd347717325d4)|`Remove remaining import of sage_makedirs`|\n|[e891787](https://git.sagemath.org/sage.git/commit/?id=e891787dd7f622abc80b62b8e967afc4aa0f19c3)|`sage.misc.misc.sage_makedirs: Deprecate`|\n|[d3b3252](https://git.sagemath.org/sage.git/commit/?id=d3b32527ddbb7edb2760bb79079111ed6af277ec)|`sage.misc.misc (SAGE_TMP, ECL_TMP, SAGE_TMP_INTERFACE): Also replace use of sage_makedirs here`|",
    "created_at": "2022-02-18T20:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
|                                                                                                                                           |                                                                                                                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[766d835](https://git.sagemath.org/sage.git/commit/?id=766d8352791446250d64a2342acb320a0d8a1d4c)|`git grep -l sage_makedirs | xargs sed -E -i.bak 's/from sage.misc.misc import sage_makedirs/import os/;s/sage_makedirs[(](.*)[)]$/os.makedirs(\1, exist_ok=True)/'`|
|[4494364](https://git.sagemath.org/sage.git/commit/?id=44943641aa965e4106727cc6a04985f615f039f0)|`Remove duplicate imports`|
|[41b015c](https://git.sagemath.org/sage.git/commit/?id=41b015ceb5854ea71d2fec2ff68cd347717325d4)|`Remove remaining import of sage_makedirs`|
|[e891787](https://git.sagemath.org/sage.git/commit/?id=e891787dd7f622abc80b62b8e967afc4aa0f19c3)|`sage.misc.misc.sage_makedirs: Deprecate`|
|[d3b3252](https://git.sagemath.org/sage.git/commit/?id=d3b32527ddbb7edb2760bb79079111ed6af277ec)|`sage.misc.misc (SAGE_TMP, ECL_TMP, SAGE_TMP_INTERFACE): Also replace use of sage_makedirs here`|



---

archive/issue_comments_657807.json:
```json
{
    "body": "Changing dependencies from \"#32986\" to \"\"",
    "created_at": "2022-02-18T20:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657807",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32986" to ""



---

archive/issue_comments_657808.json:
```json
{
    "body": "<a id='comment:9'></a>\nRebased away from #32986 (which is stuck)",
    "created_at": "2022-02-18T20:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657808",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Rebased away from #32986 (which is stuck)



---

archive/issue_comments_657809.json:
```json
{
    "body": "Changing reviewer from \"Kwankyu Lee\" to \"Kwankyu Lee, Michael Orlitzky\"",
    "created_at": "2022-02-19T01:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657809",
    "user": "https://github.com/orlitzky"
}
```

Changing reviewer from "Kwankyu Lee" to "Kwankyu Lee, Michael Orlitzky"



---

archive/issue_comments_657810.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-19T01:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657810",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_657811.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis was already positively reviewed, but LGTM too after rebasing.",
    "created_at": "2022-02-19T01:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657811",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:10'></a>
This was already positively reviewed, but LGTM too after rebasing.



---

archive/issue_comments_657812.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks!",
    "created_at": "2022-02-19T01:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Thanks!



---

archive/issue_events_087156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-21T21:56:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32987#event-87156"
}
```



---

archive/issue_comments_657813.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/deprecate_sage_misc_misc_sage_makedirs\" to \"d3b32527ddbb7edb2760bb79079111ed6af277ec\"",
    "created_at": "2022-02-21T21:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657813",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/deprecate_sage_misc_misc_sage_makedirs" to "d3b32527ddbb7edb2760bb79079111ed6af277ec"



---

archive/issue_comments_657814.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-21T21:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32987#issuecomment-657814",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
