# Issue 32245: Quaternion ideals sometimes compare incorrectly

archive/issues_032008.json:
```json
{
    "assignees": [],
    "body": "On sage 9.3, the following code unexpectedly prints `False`:\n\n```\nQ.<i,j,k> = QuaternionAlgebra(-1,-19)\nI = Q.maximal_order().unit_ideal()\nprint(I.scale(1) == I)\n```\n(This behaviour was discovered by Jana Sot\u00e1kov\u00e1.)\n\nCause: The `.scale()` method for `QuaternionFractionalIdeal_rational` passes the set of generators of the scaled ideal to the parent algebra's `.ideal()` method as a `list`, whereas other code seems to assume that the basis is stored as a `tuple`. In particular, the `__eq__` method for `QuaternionFractionalIdeal_rational` simply compares the `__basis` members, and since a list is never equal to a tuple, the equality tested in the snippet above fails even though scaling an ideal by 1 clearly shouldn't change anything.\n\nFix: Compare HNF bases everywhere (see the discussion below).\n\nDepends on #31582\n\nCC:  @slel\n\nKeywords: **quaternion ideals**\n\nBranch/Commit: **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**\n\nStopgaps: **mathematically_wrong**\n\nReviewer: **Samuel Leli\u00e8vre**\n\nAuthor: **Lorenz Panny, Peter Bruin**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32245_\n\n",
    "closed_at": "2022-01-04T22:51:15Z",
    "created_at": "2021-07-20T08:53:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Quaternion ideals sometimes compare incorrectly",
    "type": "issue",
    "updated_at": "2022-01-04T22:51:15Z",
    "url": "https://github.com/sagemath/sage/issues/32245",
    "user": "https://github.com/yyyyx4"
}
```
On sage 9.3, the following code unexpectedly prints `False`:

```
Q.<i,j,k> = QuaternionAlgebra(-1,-19)
I = Q.maximal_order().unit_ideal()
print(I.scale(1) == I)
```
(This behaviour was discovered by Jana Sotáková.)

Cause: The `.scale()` method for `QuaternionFractionalIdeal_rational` passes the set of generators of the scaled ideal to the parent algebra's `.ideal()` method as a `list`, whereas other code seems to assume that the basis is stored as a `tuple`. In particular, the `__eq__` method for `QuaternionFractionalIdeal_rational` simply compares the `__basis` members, and since a list is never equal to a tuple, the equality tested in the snippet above fails even though scaling an ideal by 1 clearly shouldn't change anything.

Fix: Compare HNF bases everywhere (see the discussion below).

Depends on #31582

CC:  @slel

Keywords: **quaternion ideals**

Branch/Commit: **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**

Stopgaps: **mathematically_wrong**

Reviewer: **Samuel Lelièvre**

Author: **Lorenz Panny, Peter Bruin**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/32245_





---

archive/issue_events_446943.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-07-20T08:53:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446943"
}
```



---

archive/issue_events_446944.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-07-20T08:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446944"
}
```



---

archive/issue_events_446945.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-07-20T08:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446945"
}
```



---

archive/issue_events_446946.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-07-20T08:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446946"
}
```



---

archive/issue_events_446947.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-07-20T08:54:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446947"
}
```



---

archive/issue_comments_519398.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think converting the argument to a tuple inside either the `__init__()` method (as you suggest) or the `ideal()` method is a more robust solution.  The `ideal()` method can be called directly by users and we shouldn't force them to insert `tuple()` by hand to avoid running into this problem.",
    "created_at": "2021-07-20T10:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519398",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

I think converting the argument to a tuple inside either the `__init__()` method (as you suggest) or the `ideal()` method is a more robust solution.  The `ideal()` method can be called directly by users and we shouldn't force them to insert `tuple()` by hand to avoid running into this problem.



---

archive/issue_comments_519399.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788\"><code>3756c49</code></a></td><td><code>always cast given basis to tuple to prevent bugs like trac #32245</code></td></tr></table>\n",
    "created_at": "2021-07-20T15:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519399",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788"><code>3756c49</code></a></td><td><code>always cast given basis to tuple to prevent bugs like trac #32245</code></td></tr></table>




---

archive/issue_comments_519400.json:
```json
{
    "body": "Changed commit from **[`f39d011`](https://github.com/sagemath/sagetrac-mirror/commit/f39d0118cbfe05d86544f8e41fe199db21adc8ed)** to **[`3756c49`](https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788)**",
    "created_at": "2021-07-20T15:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f39d011`](https://github.com/sagemath/sagetrac-mirror/commit/f39d0118cbfe05d86544f8e41fe199db21adc8ed)** to **[`3756c49`](https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788)**



---

archive/issue_comments_519401.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for the fast response!\u2002I added an explicit cast to `tuple` in the constructors for both quaternion orders and quaternion ideals.",
    "created_at": "2021-07-20T15:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519401",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for the fast response! I added an explicit cast to `tuple` in the constructors for both quaternion orders and quaternion ideals.



---

archive/issue_comments_519402.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nLooks good!  Could you add a doctest to show that the bug has been fixed?",
    "created_at": "2021-07-20T18:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519402",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:5" align="right">comment:5</div>

Looks good!  Could you add a doctest to show that the bug has been fixed?



---

archive/issue_comments_519403.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4\"><code>68aa67e</code></a></td><td><code>add doctest for trac #32245</code></td></tr></table>\n",
    "created_at": "2021-07-21T02:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519403",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4"><code>68aa67e</code></a></td><td><code>add doctest for trac #32245</code></td></tr></table>




---

archive/issue_comments_519404.json:
```json
{
    "body": "Changed commit from **[`3756c49`](https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788)** to **[`68aa67e`](https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4)**",
    "created_at": "2021-07-21T02:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3756c49`](https://github.com/sagemath/sagetrac-mirror/commit/3756c49efa7bac6d1f494d7ca499f74aa5012788)** to **[`68aa67e`](https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4)**



---

archive/issue_comments_519405.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nDone.\n\nHowever, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.\n\nSimilarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.",
    "created_at": "2021-07-21T02:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519405",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:7" align="right">comment:7</div>

Done.

However, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.

Similarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.



---

archive/issue_comments_519406.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@yyyyx4](#comment:7):\n> However, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.\n> \n> Similarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.\n\nRight!  I noticed this too some time ago.  Moreover, if I remember correctly, the claim that the basis matrix is guaranteed to be in HNF is actually false in the current implementation.  I even started writing a patch, but didn't get around to finishing it.  Let me try to see if it applies to your branch.",
    "created_at": "2021-07-21T07:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519406",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@yyyyx4](#comment:7):
> However, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.
> 
> Similarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.

Right!  I noticed this too some time ago.  Moreover, if I remember correctly, the claim that the basis matrix is guaranteed to be in HNF is actually false in the current implementation.  I even started writing a patch, but didn't get around to finishing it.  Let me try to see if it applies to your branch.



---

archive/issue_comments_519407.json:
```json
{
    "body": "Changed commit from **[`68aa67e`](https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4)** to **[`64c6b30`](https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97)**",
    "created_at": "2021-07-21T08:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`68aa67e`](https://github.com/sagemath/sagetrac-mirror/commit/68aa67ed787624e7fe60b6870383a1816acbd5f4)** to **[`64c6b30`](https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97)**



---

archive/issue_comments_519408.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97\"><code>64c6b30</code></a></td><td><code>Trac 32245: ensure basis matrix is in Hermite normal form</code></td></tr></table>\n",
    "created_at": "2021-07-21T08:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97"><code>64c6b30</code></a></td><td><code>Trac 32245: ensure basis matrix is in Hermite normal form</code></td></tr></table>




---

archive/issue_comments_519409.json:
```json
{
    "body": "Changed author from **Lorenz Panny** to **Lorenz Panny, Peter Bruin**",
    "created_at": "2021-07-21T08:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519409",
    "user": "https://github.com/pjbruin"
}
```

Changed author from **Lorenz Panny** to **Lorenz Panny, Peter Bruin**



---

archive/issue_comments_519410.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe above commit makes sure that `basis_matrix()` returns a matrix in Hermite normal form (up to a denominator), as described in the documentation.  It also uses the basis matrix to compare ideals. The documentation is updated so that it no longer claims that the basis itself (as opposed to the matrix) is or must be in HNF.",
    "created_at": "2021-07-21T08:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519410",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

The above commit makes sure that `basis_matrix()` returns a matrix in Hermite normal form (up to a denominator), as described in the documentation.  It also uses the basis matrix to compare ideals. The documentation is updated so that it no longer claims that the basis itself (as opposed to the matrix) is or must be in HNF.



---

archive/issue_events_446948.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2021-07-21T08:14:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "title_is": "Quaternion ideals sometimes compare incorrectly",
    "title_was": "Quaternion ideals' .scale() method constructs incomparable ideals",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446948"
}
```



---

archive/issue_comments_519411.json:
```json
{
    "body": "Changed commit from **[`64c6b30`](https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97)** to **[`aa8333d`](https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623)**",
    "created_at": "2021-07-21T09:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519411",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64c6b30`](https://github.com/sagemath/sagetrac-mirror/commit/64c6b308b886982a546b15dafa3f44c9220ebb97)** to **[`aa8333d`](https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623)**



---

archive/issue_comments_519412.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623\"><code>aa8333d</code></a></td><td><code>Trac 32245: compare ambient quaternion algebra in __eq__(), add doctest</code></td></tr></table>\n",
    "created_at": "2021-07-21T09:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519412",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623"><code>aa8333d</code></a></td><td><code>Trac 32245: compare ambient quaternion algebra in __eq__(), add doctest</code></td></tr></table>




---

archive/issue_comments_519413.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAfter my previous commit, ideals in different quaternion algebras with the same HNF basis matrices incorrectly compared equal.  The above commit fixes `__eq__()` so that it also compares the ambient quaternion algebras, not just the HNF basis matrices.",
    "created_at": "2021-07-21T09:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519413",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

After my previous commit, ideals in different quaternion algebras with the same HNF basis matrices incorrectly compared equal.  The above commit fixes `__eq__()` so that it also compares the ambient quaternion algebras, not just the HNF basis matrices.



---

archive/issue_comments_519414.json:
```json
{
    "body": "Changed commit from **[`aa8333d`](https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623)** to **[`d1c2234`](https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948)**",
    "created_at": "2021-07-21T09:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519414",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa8333d`](https://github.com/sagemath/sagetrac-mirror/commit/aa8333d3d4f524594ae527c98271d2ac12405623)** to **[`d1c2234`](https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948)**



---

archive/issue_comments_519415.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948\"><code>d1c2234</code></a></td><td><code>trac #32245: Quaternion orders should be equal if they are equal as lattices</code></td></tr></table>\n",
    "created_at": "2021-07-21T09:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519415",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948"><code>d1c2234</code></a></td><td><code>trac #32245: Quaternion orders should be equal if they are equal as lattices</code></td></tr></table>




---

archive/issue_comments_519416.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've just pushed another commit to make `__eq__` for quaternion orders simply compare the unit ideals, since I think properties such as\n\n```\nQ.quaternion_order([1,-i,k,j]) != Q.quaternion_order([1,i,j,k])\n```\nare unexpected and weird. I feel that if someone wants to compare bases, they should be comparing the `.basis()` members rather than the orders themselves. Or was there a good reason to keep the current behaviour?",
    "created_at": "2021-07-21T09:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519416",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:14" align="right">comment:14</div>

I've just pushed another commit to make `__eq__` for quaternion orders simply compare the unit ideals, since I think properties such as

```
Q.quaternion_order([1,-i,k,j]) != Q.quaternion_order([1,i,j,k])
```
are unexpected and weird. I feel that if someone wants to compare bases, they should be comparing the `.basis()` members rather than the orders themselves. Or was there a good reason to keep the current behaviour?



---

archive/issue_comments_519417.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@yyyyx4](#comment:14):\n> I've just pushed another commit to make `__eq__` for quaternion orders simply compare the unit ideals, since I think properties such as\n> \n> ```\n> Q.quaternion_order([1,-i,k,j]) != Q.quaternion_order([1,i,j,k])\n> ```\n> are unexpected and weird. I feel that if someone wants to compare bases, they should be comparing the `.basis()` members rather than the orders themselves. Or was there a good reason to keep the current behaviour?\n\nThis change makes sense to me.  In the future we could even try making quaternion orders a subclass of quaternion ideals, so they inherit comparison and possibly other useful methods.",
    "created_at": "2021-07-21T09:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519417",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@yyyyx4](#comment:14):
> I've just pushed another commit to make `__eq__` for quaternion orders simply compare the unit ideals, since I think properties such as
> 
> ```
> Q.quaternion_order([1,-i,k,j]) != Q.quaternion_order([1,i,j,k])
> ```
> are unexpected and weird. I feel that if someone wants to compare bases, they should be comparing the `.basis()` members rather than the orders themselves. Or was there a good reason to keep the current behaviour?

This change makes sense to me.  In the future we could even try making quaternion orders a subclass of quaternion ideals, so they inherit comparison and possibly other useful methods.



---

archive/issue_comments_519418.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@pjbruin](#comment:8):\n> Replying to [@yyyyx4](#comment:7):\n> > However, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.\n> > \n> > Similarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.\n\n> Right!  I noticed this too some time ago.  Moreover, if I remember correctly, the claim that the basis matrix is guaranteed to be in HNF is actually false in the current implementation.  I even started writing a patch, but didn't get around to finishing it.  Let me try to see if it applies to your branch.\n\nI just noticed that I already made a similar change in #31582.  This is likely to cause merge conflicts.  Normally I would try to merge #31582 into the branch of this ticket, but I see you already based #32264 on this branch.  What do you think about merging #31582 here and then rebasing #32264 on top of that?",
    "created_at": "2021-07-23T11:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519418",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@pjbruin](#comment:8):
> Replying to [@yyyyx4](#comment:7):
> > However, here's another bug that's somewhat related: `I.scale(-1)` is also not equal to `I` because `__eq__` compares bases, but `.scale()` simply multiplies each basis element by `-1`. I think we should just be comparing the `.basis_matrix()` members in `__eq__` as they are guaranteed to be in HNF. They are cached as well, so the performance impact should be negligible.
> > 
> > Similarly, quaternion *orders* also only compare bases in `__eq__`, which in that case is documented, but probably not the expected behaviour for most users. I suggest changing that to an actual lattice equality test as well.

> Right!  I noticed this too some time ago.  Moreover, if I remember correctly, the claim that the basis matrix is guaranteed to be in HNF is actually false in the current implementation.  I even started writing a patch, but didn't get around to finishing it.  Let me try to see if it applies to your branch.

I just noticed that I already made a similar change in #31582.  This is likely to cause merge conflicts.  Normally I would try to merge #31582 into the branch of this ticket, but I see you already based #32264 on this branch.  What do you think about merging #31582 here and then rebasing #32264 on top of that?



---

archive/issue_comments_519419.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSure, sounds good to me.",
    "created_at": "2021-07-23T11:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519419",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:17" align="right">comment:17</div>

Sure, sounds good to me.



---

archive/issue_comments_519420.json:
```json
{
    "body": "Changed commit from **[`d1c2234`](https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948)** to **[`3ef029d`](https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a)**",
    "created_at": "2021-07-23T18:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519420",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1c2234`](https://github.com/sagemath/sagetrac-mirror/commit/d1c2234d919819c72ee41c3bea36e6eeb26f1948)** to **[`3ef029d`](https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a)**



---

archive/issue_comments_519421.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3dcc343cce025fb0d1706863f8d5dc201a10391\"><code>c3dcc34</code></a></td><td><code>Trac 31582: use existing attributes and methods of Ideal_fractional,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c453e90a8fac30546d20ea0ae69398a0bda67f8\"><code>5c453e9</code></a></td><td><code>Trac 31582: add argument Q to QuaternionFractionalIdeal_rational.__init__()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a\"><code>3ef029d</code></a></td><td><code>Merge branch 'ticket/31582-quaternion_ideal_parent' into ticket/32245-quaternion_ideal_basis</code></td></tr></table>\n",
    "created_at": "2021-07-23T18:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519421",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3dcc343cce025fb0d1706863f8d5dc201a10391"><code>c3dcc34</code></a></td><td><code>Trac 31582: use existing attributes and methods of Ideal_fractional,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c453e90a8fac30546d20ea0ae69398a0bda67f8"><code>5c453e9</code></a></td><td><code>Trac 31582: add argument Q to QuaternionFractionalIdeal_rational.__init__()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a"><code>3ef029d</code></a></td><td><code>Merge branch 'ticket/31582-quaternion_ideal_parent' into ticket/32245-quaternion_ideal_basis</code></td></tr></table>




---

archive/issue_comments_519422.json:
```json
{
    "body": "Dependencies: **#31582**",
    "created_at": "2021-07-24T07:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519422",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#31582**



---

archive/issue_events_446949.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446949"
}
```



---

archive/issue_events_446950.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446950"
}
```



---

archive/issue_comments_519423.json:
```json
{
    "body": "Stopgaps: **mathematically_wrong**",
    "created_at": "2021-08-26T07:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519423",
    "user": "https://github.com/yyyyx4"
}
```

Stopgaps: **mathematically_wrong**



---

archive/issue_comments_519424.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,4 @@\n \n Cause: The `.scale()` method for `QuaternionFractionalIdeal_rational` passes the set of generators of the scaled ideal to the parent algebra's `.ideal()` method as a `list`, whereas other code seems to assume that the basis is stored as a `tuple`. In particular, the `__eq__` method for `QuaternionFractionalIdeal_rational` simply compares the `__basis` members, and since a list is never equal to a tuple, the equality tested in the snippet above fails even though scaling an ideal by 1 clearly shouldn't change anything.\n \n-Fix: Use a tuple instead of a list.\n-We could also enforce this in `QuaternionFractionalIdeal_rational.__init__` even when `check=False` is passed, or explicitly cast to `tuple` in `__eq__` just in case; opinions are welcome.\n+Fix: Compare HNF bases everywhere (see the discussion below).\n``````\n",
    "created_at": "2021-08-26T07:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519424",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,4 @@
 
 Cause: The `.scale()` method for `QuaternionFractionalIdeal_rational` passes the set of generators of the scaled ideal to the parent algebra's `.ideal()` method as a `list`, whereas other code seems to assume that the basis is stored as a `tuple`. In particular, the `__eq__` method for `QuaternionFractionalIdeal_rational` simply compares the `__basis` members, and since a list is never equal to a tuple, the equality tested in the snippet above fails even though scaling an ideal by 1 clearly shouldn't change anything.
 
-Fix: Use a tuple instead of a list.
-We could also enforce this in `QuaternionFractionalIdeal_rational.__init__` even when `check=False` is passed, or explicitly cast to `tuple` in `__eq__` just in case; opinions are welcome.
+Fix: Compare HNF bases everywhere (see the discussion below).
``````




---

archive/issue_comments_519425.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nBumping priority since this bug can lead to mathematical errors.",
    "created_at": "2021-10-21T02:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519425",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:22" align="right">comment:22</div>

Bumping priority since this bug can lead to mathematical errors.



---

archive/issue_events_446951.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-10-21T02:59:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446951"
}
```



---

archive/issue_events_446952.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-10-21T02:59:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446952"
}
```



---

archive/issue_comments_519426.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe comments in the doctests (like `# trac #32245`) are not welcome. They should rather use text before the doctests with the trac roles like <code>:trac:\\`32245\\`</code>",
    "created_at": "2021-10-25T12:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519426",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

The comments in the doctests (like `# trac #32245`) are not welcome. They should rather use text before the doctests with the trac roles like <code>:trac:\`32245\`</code>



---

archive/issue_comments_519427.json:
```json
{
    "body": "Changed commit from **[`3ef029d`](https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a)** to **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**",
    "created_at": "2021-10-25T13:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519427",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ef029d`](https://github.com/sagemath/sagetrac-mirror/commit/3ef029d43d4b668f4729e13eaa1dfed40c7d1a0a)** to **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**



---

archive/issue_comments_519428.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f12db00bd7085bdaa96b289b5f374af45e812ab6\"><code>f12db00</code></a></td><td><code>Merge tag '9.5.beta4' into public/fix_quaternion_scaled_ideals_equality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1\"><code>7159ed8</code></a></td><td><code>move trac numbers from comments to text</code></td></tr></table>\n",
    "created_at": "2021-10-25T13:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519428",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f12db00bd7085bdaa96b289b5f374af45e812ab6"><code>f12db00</code></a></td><td><code>Merge tag '9.5.beta4' into public/fix_quaternion_scaled_ideals_equality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1"><code>7159ed8</code></a></td><td><code>move trac numbers from comments to text</code></td></tr></table>




---

archive/issue_comments_519429.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks, fixed.",
    "created_at": "2021-10-25T13:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519429",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks, fixed.



---

archive/issue_events_446953.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446953"
}
```



---

archive/issue_events_446954.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446954"
}
```



---

archive/issue_comments_519430.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519430",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_446955.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-12-29T06:35:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446955"
}
```



---

archive/issue_events_446956.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-12-29T06:35:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446956"
}
```



---

archive/issue_comments_519431.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2021-12-29T06:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519431",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_events_446957.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-12-29T06:36:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446957"
}
```



---

archive/issue_events_446958.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-12-29T06:36:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446958"
}
```



---

archive/issue_comments_519432.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThank you!",
    "created_at": "2021-12-29T07:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519432",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:29" align="right">comment:29</div>

Thank you!



---

archive/issue_comments_519433.json:
```json
{
    "body": "Changed branch from **[public/fix_quaternion_scaled_ideals_equality](https://github.com/sagemath/sagetrac-mirror/tree/public/fix_quaternion_scaled_ideals_equality)** to **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**",
    "created_at": "2022-01-04T22:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32245#issuecomment-519433",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/fix_quaternion_scaled_ideals_equality](https://github.com/sagemath/sagetrac-mirror/tree/public/fix_quaternion_scaled_ideals_equality)** to **[`7159ed8`](https://github.com/sagemath/sagetrac-mirror/commit/7159ed81487ded93ba170e574e1ae530ca7408e1)**



---

archive/issue_events_446959.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-04T22:51:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446959"
}
```



---

archive/issue_events_446960.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c1f5a61578e4b811854a45ceea79cc339726d30d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-04T22:51:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32245",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32245#event-446960"
}
```
