# Issue 32505: Finitely presented graded modules over graded connected algebras

archive/issues_032268.json:
```json
{
    "assignees": [],
    "body": "This is a precursor to #30680, laying out the framework for finitely presented modules over graded connected algebras. #30680 will focus on the case of the Steenrod algebra, with specific applications in mind.\n\nCC:  @sverre320 @sagetrac-kvanwoerden @jhpalmieri @tscrim @rrbruner @cnassau\n\nBranch/Commit: **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**\n\nReviewer: **John Palmieri, Travis Scrimshaw**\n\nAuthor: **Bob Bruner, Michael Catanzaro, Sverre Lun\u00f8e-Nielsen, Koen van Woerden, John Palmieri, Travis Scrimshaw**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32505_\n\n",
    "closed_at": "2022-02-12T22:07:12Z",
    "created_at": "2021-09-11T23:59:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Finitely presented graded modules over graded connected algebras",
    "type": "issue",
    "updated_at": "2022-02-12T22:07:12Z",
    "url": "https://github.com/sagemath/sage/issues/32505",
    "user": "https://github.com/jhpalmieri"
}
```
This is a precursor to #30680, laying out the framework for finitely presented modules over graded connected algebras. #30680 will focus on the case of the Steenrod algebra, with specific applications in mind.

CC:  @sverre320 @sagetrac-kvanwoerden @jhpalmieri @tscrim @rrbruner @cnassau

Branch/Commit: **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**

Reviewer: **John Palmieri, Travis Scrimshaw**

Author: **Bob Bruner, Michael Catanzaro, Sverre Lunøe-Nielsen, Koen van Woerden, John Palmieri, Travis Scrimshaw**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/32505_





---

archive/issue_events_448145.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-11T23:59:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448145"
}
```



---

archive/issue_events_448146.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-11T23:59:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448146"
}
```



---

archive/issue_events_448147.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-11T23:59:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448147"
}
```



---

archive/issue_events_448148.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-11T23:59:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448148"
}
```



---

archive/issue_comments_524307.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI will quote from the TODO list in the forthcoming `__init__.py`:\n\n1. Why do we need to define `__bool__` and `__eq__` in element.py? They should be taken care of automatically, once we define `__nonzero__`.\n2. inhheritance: free modules, elements, etc., should perhaps inherit from fp versions, or maybe both should inherit from generic classes, to consolidate some methods (like degree, `_repr_`, others?)\n3. Test with graded modules over other graded rings. (Should be okay, but add some doctests.)\nIn `__classcall__/__init__` for FP_Modules, allow as input a free module or a morphism of free modules? Or just leave it as is, with methods in `FP_Modules`, morphisms, and free modules for these constructions. (See the pre-existing `FP_Modules.from_free_module` etc., and also new methods `morphism.to_fp_module()` and `free_module.to_fp_module()`.)\n\nQuestion 1 is bugging me the most: I get doctest failures if I don't define `__bool__` and `__eq__`, but according to `structure/element.pyx`, I shouldn't have to do this: the documentation there for `__nonzero__` says:\n\n```\n        Note that this is automatically called when converting to\n        boolean, as in the conditional of an if or while statement.\n```\nwhich really sounds like I shouldn't have to define `__bool__`.",
    "created_at": "2021-09-12T00:16:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524307",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

I will quote from the TODO list in the forthcoming `__init__.py`:

1. Why do we need to define `__bool__` and `__eq__` in element.py? They should be taken care of automatically, once we define `__nonzero__`.
2. inhheritance: free modules, elements, etc., should perhaps inherit from fp versions, or maybe both should inherit from generic classes, to consolidate some methods (like degree, `_repr_`, others?)
3. Test with graded modules over other graded rings. (Should be okay, but add some doctests.)
In `__classcall__/__init__` for FP_Modules, allow as input a free module or a morphism of free modules? Or just leave it as is, with methods in `FP_Modules`, morphisms, and free modules for these constructions. (See the pre-existing `FP_Modules.from_free_module` etc., and also new methods `morphism.to_fp_module()` and `free_module.to_fp_module()`.)

Question 1 is bugging me the most: I get doctest failures if I don't define `__bool__` and `__eq__`, but according to `structure/element.pyx`, I shouldn't have to do this: the documentation there for `__nonzero__` says:

```
        Note that this is automatically called when converting to
        boolean, as in the conditional of an if or while statement.
```
which really sounds like I shouldn't have to define `__bool__`.



---

archive/issue_comments_524308.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/free-graded-modules](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/free-graded-modules)**",
    "created_at": "2021-09-12T00:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524308",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/free-graded-modules](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/free-graded-modules)**



---

archive/issue_comments_524309.json:
```json
{
    "body": "Commit: **[`fa91596`](https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92)**",
    "created_at": "2021-09-12T00:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524309",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[`fa91596`](https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92)**



---

archive/issue_events_448149.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-12T00:28:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448149"
}
```



---

archive/issue_comments_524310.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is not the final draft \u2014\u00a0I'd like to resolve at least some of the \"TODO\"s \u2014 but I'll mark it as \"needs review\".\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92\"><code>fa91596</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr></table>\n",
    "created_at": "2021-09-12T00:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524310",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

This is not the final draft — I'd like to resolve at least some of the "TODO"s — but I'll mark it as "needs review".

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92"><code>fa91596</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr></table>




---

archive/issue_comments_524311.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nStructurally, the starting place for a review perhaps should be the `free_*` files; the others are built on top of those.",
    "created_at": "2021-09-12T00:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524311",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Structurally, the starting place for a review perhaps should be the `free_*` files; the others are built on top of those.



---

archive/issue_comments_524312.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d\"><code>fd8545b</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr></table>\n",
    "created_at": "2021-09-13T20:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524312",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d"><code>fd8545b</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr></table>




---

archive/issue_comments_524313.json:
```json
{
    "body": "Changed commit from **[`fa91596`](https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92)** to **[`fd8545b`](https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d)**",
    "created_at": "2021-09-13T20:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524313",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa91596`](https://github.com/sagemath/sagetrac-mirror/commit/fa915966124a5e32b28a3a54538045d74858ed92)** to **[`fd8545b`](https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d)**



---

archive/issue_comments_524314.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIn order to follow #32501, `__init__.py` should be empty, so I changed it, moving the TODO list to `module.py`.",
    "created_at": "2021-09-13T20:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524314",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

In order to follow #32501, `__init__.py` should be empty, so I changed it, moving the TODO list to `module.py`.



---

archive/issue_comments_524315.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThank you for separating this ticket out. It will make it easier to focus on the general functionality here. I finally have gotten back around to this. Sorry it took so long (but I have now finally moved to Japan).\n\nI think we should change the name `FP_Element` and similar to `FPElement` to match PEP8.\n\nThere are many places where `TESTS:` should be `TESTS::`.\n\nLet's get rid of the `is_FreeGradedModuleHomspace` and just replace it with the `isinstance` call.\n\nI don't like the name `free_element()`. Perhaps `free_module_representative()`?\n\nThe mathematical description does not quite seem to match the implementation. Your basis elements are not a basis over the `F`-algebra `A` but over `F`. This needs to be **very** carefully explained in the documentation.\n\nI think more things should be using the category framework (unless this becomes a significant bottleneck in #30680) Mainly I am looking at `degree()` by using `degree_on_basis`, but there is a mismatch with what this is a module over. Actually, this is more like the `cartesian_product` with some additional functionality. I might need to think a bit more about how this will all fit together.",
    "created_at": "2021-09-26T07:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524315",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Thank you for separating this ticket out. It will make it easier to focus on the general functionality here. I finally have gotten back around to this. Sorry it took so long (but I have now finally moved to Japan).

I think we should change the name `FP_Element` and similar to `FPElement` to match PEP8.

There are many places where `TESTS:` should be `TESTS::`.

Let's get rid of the `is_FreeGradedModuleHomspace` and just replace it with the `isinstance` call.

I don't like the name `free_element()`. Perhaps `free_module_representative()`?

The mathematical description does not quite seem to match the implementation. Your basis elements are not a basis over the `F`-algebra `A` but over `F`. This needs to be **very** carefully explained in the documentation.

I think more things should be using the category framework (unless this becomes a significant bottleneck in #30680) Mainly I am looking at `degree()` by using `degree_on_basis`, but there is a mismatch with what this is a module over. Actually, this is more like the `cartesian_product` with some additional functionality. I might need to think a bit more about how this will all fit together.



---

archive/issue_comments_524316.json:
```json
{
    "body": "Changed commit from **[`fd8545b`](https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d)** to **[`5153c6f`](https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7)**",
    "created_at": "2021-09-28T20:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524316",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd8545b`](https://github.com/sagemath/sagetrac-mirror/commit/fd8545b771c670f6eda373b3fa5e4ea88d17b45d)** to **[`5153c6f`](https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7)**



---

archive/issue_comments_524317.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20aba35517bc6a5e71a83062d5c186fc97abc1c6\"><code>20aba35</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ab07abc54053c494d07c8533fecf3dfe1f54624\"><code>1ab07ab</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7\"><code>5153c6f</code></a></td><td><code>trac 32505:</code></td></tr></table>\n",
    "created_at": "2021-09-28T20:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524317",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20aba35517bc6a5e71a83062d5c186fc97abc1c6"><code>20aba35</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ab07abc54053c494d07c8533fecf3dfe1f54624"><code>1ab07ab</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7"><code>5153c6f</code></a></td><td><code>trac 32505:</code></td></tr></table>




---

archive/issue_comments_524318.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHere are some of the changes: everything you suggested except for the category framework and changing the documentation to reflect what we mean by basis. (I thought I would take care of the easy things first.)\n\nIf you have more thoughts about how to use the category framework, I would be happy to hear them.",
    "created_at": "2021-09-28T20:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524318",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Here are some of the changes: everything you suggested except for the category framework and changing the documentation to reflect what we mean by basis. (I thought I would take care of the easy things first.)

If you have more thoughts about how to use the category framework, I would be happy to hear them.



---

archive/issue_comments_524319.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTo utilize the `degree()` from the category framework, we only need to implement a `degree_on_basis()` method in the parent. This would mean less repeated code, although it might be slightly slower in the computation. Of course, the current version works and is fine to do things this way.\n\nWe also don't need the `__nonzero__` anymore because `__bool__` is Python3.\n\nRight now, I feel like this is violating some internal assumptions of `CFM` because of the basis mismatch. So it should not inherit from `CFM`, but some other class, perhaps `CombinatorialFreeModule_CartesianProduct` as we realize it as `A`<sup>k</sup> but are considering it to be an `F`-module from the implementation point of view. If we really want to think of it as an `A`-module, then internally we need to extract the `F`-basis coefficients from the values of the element `dict` (and we might want to think a bit about how we name our methods). This should be fairly simple to do, but requires some minor refactoring.\n\nBased upon the code and its intended use, you are converting things a lot to/from (dense) vectors in `F`<sup>d</sup>, so the Cartesian product approach with an entirely new element class might be the best option, where elements is stored as a dict of `(degree, vector)` pairs. I guess it depends on how much time is spent doing element manipulations like this, but the caching suggests this is a time-critical operation.",
    "created_at": "2021-09-29T23:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524319",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

To utilize the `degree()` from the category framework, we only need to implement a `degree_on_basis()` method in the parent. This would mean less repeated code, although it might be slightly slower in the computation. Of course, the current version works and is fine to do things this way.

We also don't need the `__nonzero__` anymore because `__bool__` is Python3.

Right now, I feel like this is violating some internal assumptions of `CFM` because of the basis mismatch. So it should not inherit from `CFM`, but some other class, perhaps `CombinatorialFreeModule_CartesianProduct` as we realize it as `A`<sup>k</sup> but are considering it to be an `F`-module from the implementation point of view. If we really want to think of it as an `A`-module, then internally we need to extract the `F`-basis coefficients from the values of the element `dict` (and we might want to think a bit about how we name our methods). This should be fairly simple to do, but requires some minor refactoring.

Based upon the code and its intended use, you are converting things a lot to/from (dense) vectors in `F`<sup>d</sup>, so the Cartesian product approach with an entirely new element class might be the best option, where elements is stored as a dict of `(degree, vector)` pairs. I guess it depends on how much time is spent doing element manipulations like this, but the caching suggests this is a time-critical operation.



---

archive/issue_comments_524320.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nFirst, `FreeGradedModule` is indeed an honest free module, and I think it should be okay to use `CombinatorialFreeModule` for it. The \"basis\" in this case is explicitly the basis as a module over `algebra`; it is not a vector space basis. As a result, the `degree_on_basis()` setup won't work, because it assumes that you're working with graded modules over an ungraded ring, and so it doesn't take into account the possible degree of the coefficients. At least that's my reading of the [homogeneous_degree method](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/categories/filtered_modules_with_basis.py#n709) in `categories/filtered_modules_with_basis.py`.\n\nI don't really see how using Cartesian products will help: A<sup>k</sup> is just a free module, so we should be able to use the free module class for it. I don't think the code will use the projection and inclusion maps that are provided by the Cartesian product class.\n\n`FPModule` is trickier: it is not free as a module over `algebra`, but of course it is free over the ground field. I don't know of a suitable class in Sage for it, but `CombinatorialFreeModule` kind of works. One problem is that the basis keys correspond to the given choice of generators, and since the module need not be free, it need not be a basis. Another problem is that there is an actual vector space basis in each degree and we want to compute it, but we can't just deduce it from the \"basis\" for this `CombinatorialFreeModule`.\n\nIt's a good idea to maybe cache `dense_coefficient_list` for these elements, and maybe while we're at it, give the method for this class of elements a different name.",
    "created_at": "2021-09-30T22:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524320",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

First, `FreeGradedModule` is indeed an honest free module, and I think it should be okay to use `CombinatorialFreeModule` for it. The "basis" in this case is explicitly the basis as a module over `algebra`; it is not a vector space basis. As a result, the `degree_on_basis()` setup won't work, because it assumes that you're working with graded modules over an ungraded ring, and so it doesn't take into account the possible degree of the coefficients. At least that's my reading of the [homogeneous_degree method](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/categories/filtered_modules_with_basis.py#n709) in `categories/filtered_modules_with_basis.py`.

I don't really see how using Cartesian products will help: A<sup>k</sup> is just a free module, so we should be able to use the free module class for it. I don't think the code will use the projection and inclusion maps that are provided by the Cartesian product class.

`FPModule` is trickier: it is not free as a module over `algebra`, but of course it is free over the ground field. I don't know of a suitable class in Sage for it, but `CombinatorialFreeModule` kind of works. One problem is that the basis keys correspond to the given choice of generators, and since the module need not be free, it need not be a basis. Another problem is that there is an actual vector space basis in each degree and we want to compute it, but we can't just deduce it from the "basis" for this `CombinatorialFreeModule`.

It's a good idea to maybe cache `dense_coefficient_list` for these elements, and maybe while we're at it, give the method for this class of elements a different name.



---

archive/issue_comments_524321.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jhpalmieri](#comment:11):\n> First, `FreeGradedModule` is indeed an honest free module, and I think it should be okay to use `CombinatorialFreeModule` for it. The \"basis\" in this case is explicitly the basis as a module over `algebra`; it is not a vector space basis. As a result, the `degree_on_basis()` setup won't work, because it assumes that you're working with graded modules over an ungraded ring, and so it doesn't take into account the possible degree of the coefficients. At least that's my reading of the [homogeneous_degree method](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/categories/filtered_modules_with_basis.py#n709) in `categories/filtered_modules_with_basis.py`.\n\nAh, right, because we are considering it over a graded ring, which we do not have a mechanism to take that into account. That is a missing feature of the categories that probably needs to be addressed at some point. However, then the category of `GradedModulesWithBasis(R)` is wrong, and  instead it should be in `GradedModules(R).WithBasis()`. These are not the same\n\n```\nsage: GradedModulesWithBasis(QQ) == GradedModules(QQ).WithBasis()\nFalse\n```\nas the latter is just saying there is a distinguished basis in a graded module, but not that the basis respects the grading. This allows us to circumvent this issue of the grading of the base ring (at least for now).\n\n> I don't really see how using Cartesian products will help: A<sup>k</sup> is just a free module, so we should be able to use the free module class for it. I don't think the code will use the projection and inclusion maps that are provided by the Cartesian product class.\n\nFrom the above, I agree that `CFM` is fine. So we don't have to use this.\n\n> `FPModule` is trickier: it is not free as a module over `algebra`, but of course it is free over the ground field. I don't know of a suitable class in Sage for it, but `CombinatorialFreeModule` kind of works. One problem is that the basis keys correspond to the given choice of generators, and since the module need not be free, it need not be a basis. Another problem is that there is an actual vector space basis in each degree and we want to compute it, but we can't just deduce it from the \"basis\" for this `CombinatorialFreeModule`.\n\nWe can weaken this to be a subclass of `IndexedGenerators`, `Module`, and `UniqueRepresentation`, which are the base classes of `CFM` and has mos of the desired features. There might be some features we might want to abstract from `CFM` to some intermediate ABC to also use in this class to remove code duplication. This will probably be the best way forward for `FPModule`.\n\n> It's a good idea to maybe cache `dense_coefficient_list` for these elements, and maybe while we're at it, give the method for this class of elements a different name.\n\nIf we are going to cache it, then we might as well only store that and reimplement the module structure following my proposal at the end of in [comment:10](#comment:10). IIRC, it is faster to go from the dense list to the indexed free module element than the other way around.",
    "created_at": "2021-09-30T23:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524321",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jhpalmieri](#comment:11):
> First, `FreeGradedModule` is indeed an honest free module, and I think it should be okay to use `CombinatorialFreeModule` for it. The "basis" in this case is explicitly the basis as a module over `algebra`; it is not a vector space basis. As a result, the `degree_on_basis()` setup won't work, because it assumes that you're working with graded modules over an ungraded ring, and so it doesn't take into account the possible degree of the coefficients. At least that's my reading of the [homogeneous_degree method](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/categories/filtered_modules_with_basis.py#n709) in `categories/filtered_modules_with_basis.py`.

Ah, right, because we are considering it over a graded ring, which we do not have a mechanism to take that into account. That is a missing feature of the categories that probably needs to be addressed at some point. However, then the category of `GradedModulesWithBasis(R)` is wrong, and  instead it should be in `GradedModules(R).WithBasis()`. These are not the same

```
sage: GradedModulesWithBasis(QQ) == GradedModules(QQ).WithBasis()
False
```
as the latter is just saying there is a distinguished basis in a graded module, but not that the basis respects the grading. This allows us to circumvent this issue of the grading of the base ring (at least for now).

> I don't really see how using Cartesian products will help: A<sup>k</sup> is just a free module, so we should be able to use the free module class for it. I don't think the code will use the projection and inclusion maps that are provided by the Cartesian product class.

From the above, I agree that `CFM` is fine. So we don't have to use this.

> `FPModule` is trickier: it is not free as a module over `algebra`, but of course it is free over the ground field. I don't know of a suitable class in Sage for it, but `CombinatorialFreeModule` kind of works. One problem is that the basis keys correspond to the given choice of generators, and since the module need not be free, it need not be a basis. Another problem is that there is an actual vector space basis in each degree and we want to compute it, but we can't just deduce it from the "basis" for this `CombinatorialFreeModule`.

We can weaken this to be a subclass of `IndexedGenerators`, `Module`, and `UniqueRepresentation`, which are the base classes of `CFM` and has mos of the desired features. There might be some features we might want to abstract from `CFM` to some intermediate ABC to also use in this class to remove code duplication. This will probably be the best way forward for `FPModule`.

> It's a good idea to maybe cache `dense_coefficient_list` for these elements, and maybe while we're at it, give the method for this class of elements a different name.

If we are going to cache it, then we might as well only store that and reimplement the module structure following my proposal at the end of in [comment:10](#comment:10). IIRC, it is faster to go from the dense list to the indexed free module element than the other way around.



---

archive/issue_comments_524322.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017\"><code>b3816f9</code></a></td><td><code>trac 32505: minor cleanup</code></td></tr></table>\n",
    "created_at": "2021-10-01T17:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524322",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017"><code>b3816f9</code></a></td><td><code>trac 32505: minor cleanup</code></td></tr></table>




---

archive/issue_comments_524323.json:
```json
{
    "body": "Changed commit from **[`5153c6f`](https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7)** to **[`b3816f9`](https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017)**",
    "created_at": "2021-10-01T17:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524323",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5153c6f`](https://github.com/sagemath/sagetrac-mirror/commit/5153c6fab78b1a9869b67c76fbc6c1fff81862f7)** to **[`b3816f9`](https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017)**



---

archive/issue_comments_524324.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tscrim](#comment:12):\n> Ah, right, because we are considering it over a graded ring, which we do not have a mechanism to take that into account. That is a missing feature of the categories that probably needs to be addressed at some point. However, then the category of `GradedModulesWithBasis(R)` is wrong, and  instead it should be in `GradedModules(R).WithBasis()`. These are not the same\n> \n> ```\n> sage: GradedModulesWithBasis(QQ) == GradedModules(QQ).WithBasis()\n> False\n> ```\n> as the latter is just saying there is a distinguished basis in a graded module, but not that the basis respects the grading. This allows us to circumvent this issue of the grading of the base ring (at least for now).\n\nFirst, it is unfortunate that these are not the same, but that's not something to be fixed here. What differences does it make in this particular case to use `GradedModules(algebra).WithBasis()`?\n\nRe `FPModule`:\n\n> We can weaken this to be a subclass of `IndexedGenerators`, `Module`, and `UniqueRepresentation`, which are the base classes of `CFM` and has mos of the desired features. There might be some features we might want to abstract from `CFM` to some intermediate ABC to also use in this class to remove code duplication. This will probably be the best way forward for `FPModule`.\n\nI'll work on this.",
    "created_at": "2021-10-05T17:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524324",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tscrim](#comment:12):
> Ah, right, because we are considering it over a graded ring, which we do not have a mechanism to take that into account. That is a missing feature of the categories that probably needs to be addressed at some point. However, then the category of `GradedModulesWithBasis(R)` is wrong, and  instead it should be in `GradedModules(R).WithBasis()`. These are not the same
> 
> ```
> sage: GradedModulesWithBasis(QQ) == GradedModules(QQ).WithBasis()
> False
> ```
> as the latter is just saying there is a distinguished basis in a graded module, but not that the basis respects the grading. This allows us to circumvent this issue of the grading of the base ring (at least for now).

First, it is unfortunate that these are not the same, but that's not something to be fixed here. What differences does it make in this particular case to use `GradedModules(algebra).WithBasis()`?

Re `FPModule`:

> We can weaken this to be a subclass of `IndexedGenerators`, `Module`, and `UniqueRepresentation`, which are the base classes of `CFM` and has mos of the desired features. There might be some features we might want to abstract from `CFM` to some intermediate ABC to also use in this class to remove code duplication. This will probably be the best way forward for `FPModule`.

I'll work on this.



---

archive/issue_comments_524325.json:
```json
{
    "body": "Changed commit from **[`b3816f9`](https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017)** to **[`ca45b2b`](https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85)**",
    "created_at": "2021-10-08T22:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524325",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3816f9`](https://github.com/sagemath/sagetrac-mirror/commit/b3816f980e1fe37b0cacc16273e96b0f66e01017)** to **[`ca45b2b`](https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85)**



---

archive/issue_comments_524326.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1612a41a07097cf676f7839b824c0f31cfdd189f\"><code>1612a41</code></a></td><td><code>trac 32505: change category for free modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a569bf03dd9889c1b84038f934d52215d5be208e\"><code>a569bf0</code></a></td><td><code>trac 32505: use `__bool__` instead of __nonzero__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85\"><code>ca45b2b</code></a></td><td><code>trac 32505: change inheritance for FPModule, first pass</code></td></tr></table>\n",
    "created_at": "2021-10-08T22:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524326",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1612a41a07097cf676f7839b824c0f31cfdd189f"><code>1612a41</code></a></td><td><code>trac 32505: change category for free modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a569bf03dd9889c1b84038f934d52215d5be208e"><code>a569bf0</code></a></td><td><code>trac 32505: use `__bool__` instead of __nonzero__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85"><code>ca45b2b</code></a></td><td><code>trac 32505: change inheritance for FPModule, first pass</code></td></tr></table>




---

archive/issue_comments_524327.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHere are a bunch of changes in response to Travis' suggestions:\n\n- use `__bool__` instead of `__nonzero__`\n- change the category for free modules to `GradedModules(algebra).WithBasis()`. I have not tested whether this allows me to get away with just defining `degree_on_basis`.\n- change the class for `FPModule` to inherit from `IndexedGenerators`, `Module`, and `UniqueRepresentation`.\n\nI still need to add some doctests for methods copied over from `CombinatorialFreeModule` and other places, but this works as is. (So feel free to look at the changes, but I will be adding more doctests, if nothing else.) I have not created any intermediate classes in an attempt to remove any code duplication.",
    "created_at": "2021-10-08T22:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524327",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Here are a bunch of changes in response to Travis' suggestions:

- use `__bool__` instead of `__nonzero__`
- change the category for free modules to `GradedModules(algebra).WithBasis()`. I have not tested whether this allows me to get away with just defining `degree_on_basis`.
- change the class for `FPModule` to inherit from `IndexedGenerators`, `Module`, and `UniqueRepresentation`.

I still need to add some doctests for methods copied over from `CombinatorialFreeModule` and other places, but this works as is. (So feel free to look at the changes, but I will be adding more doctests, if nothing else.) I have not created any intermediate classes in an attempt to remove any code duplication.



---

archive/issue_comments_524328.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a\"><code>46ef922</code></a></td><td><code>trac 32505: change inheritance for FPModule</code></td></tr></table>\n",
    "created_at": "2021-10-09T01:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524328",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a"><code>46ef922</code></a></td><td><code>trac 32505: change inheritance for FPModule</code></td></tr></table>




---

archive/issue_comments_524329.json:
```json
{
    "body": "Changed commit from **[`ca45b2b`](https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85)** to **[`46ef922`](https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a)**",
    "created_at": "2021-10-09T01:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524329",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca45b2b`](https://github.com/sagemath/sagetrac-mirror/commit/ca45b2bfeb215d0d5e065daa3de1404c68467a85)** to **[`46ef922`](https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a)**



---

archive/issue_comments_524330.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNow including doctest coverage for everything.",
    "created_at": "2021-10-09T01:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524330",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

Now including doctest coverage for everything.



---

archive/issue_comments_524331.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI think this all works. We can use the suggestion at the end of [comment:10](#comment:10) now or defer to another ticket. I think I would prefer to wait and see where the real bottlenecks are.",
    "created_at": "2021-10-09T02:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524331",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

I think this all works. We can use the suggestion at the end of [comment:10](#comment:10) now or defer to another ticket. I think I would prefer to wait and see where the real bottlenecks are.



---

archive/issue_comments_524332.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nping?",
    "created_at": "2021-11-05T21:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524332",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

ping?



---

archive/issue_comments_524333.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSorry, I have been a bit busy with my move (Australia -> Japan).\n\nBefore this goes to a positive review, there are a number of little code polishing things to take care of:\n\n1. Full doctest coverage (mainly `__init__` with adding a `TestSuite(foo).run()`).\n2. Pyflakes\n3. There are two `== None` -> `is None` needed.\n4. I don't think we should have `0` be displayed as `<>`. I know this is consistent with displaying the other elements, but I think it should just be `0`.\n5. The documentation of `degree()` is wrong with the output for `0`.\n6. Class docstrings shouldn't have an `OUTPUT:`.\n7. Somewhere in the documentation needs to be stated that the module must be finite dimensional (over the algebra `A`). I think the category should also reflect this. It should be possible to remove this limitation, which shouldn't be too hard, but it is there currently.\n8. `if len(self.generator_degrees()) == 0:` -> `if not self.generator_degrees():`\n9. I am not sure we should use the name `basis_elements` as it is not giving basis elements over `A`, but I can't think of a better name right now. It should be specified that these are basis elements over the base ring `R` of `A` to make this clear. (Note that the direct sum is as additive groups (or `R`-modules), not as `A`-modules.\n10. We probably want to state that this code only works for algebras that have a graded distinguished basis.\n21. I would want some of the key methods to have doctests that work for other graded algebras. Anything that is of the form `*Sym` is good; same with `NilCoxeter` or `Exterior` (finite dimensional ones) or `Shuffle`.\n\nI will probably also make a pass through this later for some code tweaks and improvements. However, before that, I want to talk a little bit more about the possible optimization in [comment:10](#comment:10). Do we have any good ways to check the efficacy of such a change? Mainly, is there a computation that takes a few minutes that heavily uses this code? In terms of memory, it will likely be better because we are not storing the same information twice.",
    "created_at": "2021-11-08T00:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524333",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Sorry, I have been a bit busy with my move (Australia -> Japan).

Before this goes to a positive review, there are a number of little code polishing things to take care of:

1. Full doctest coverage (mainly `__init__` with adding a `TestSuite(foo).run()`).
2. Pyflakes
3. There are two `== None` -> `is None` needed.
4. I don't think we should have `0` be displayed as `<>`. I know this is consistent with displaying the other elements, but I think it should just be `0`.
5. The documentation of `degree()` is wrong with the output for `0`.
6. Class docstrings shouldn't have an `OUTPUT:`.
7. Somewhere in the documentation needs to be stated that the module must be finite dimensional (over the algebra `A`). I think the category should also reflect this. It should be possible to remove this limitation, which shouldn't be too hard, but it is there currently.
8. `if len(self.generator_degrees()) == 0:` -> `if not self.generator_degrees():`
9. I am not sure we should use the name `basis_elements` as it is not giving basis elements over `A`, but I can't think of a better name right now. It should be specified that these are basis elements over the base ring `R` of `A` to make this clear. (Note that the direct sum is as additive groups (or `R`-modules), not as `A`-modules.
10. We probably want to state that this code only works for algebras that have a graded distinguished basis.
21. I would want some of the key methods to have doctests that work for other graded algebras. Anything that is of the form `*Sym` is good; same with `NilCoxeter` or `Exterior` (finite dimensional ones) or `Shuffle`.

I will probably also make a pass through this later for some code tweaks and improvements. However, before that, I want to talk a little bit more about the possible optimization in [comment:10](#comment:10). Do we have any good ways to check the efficacy of such a change? Mainly, is there a computation that takes a few minutes that heavily uses this code? In terms of memory, it will likely be better because we are not storing the same information twice.



---

archive/issue_comments_524334.json:
```json
{
    "body": "Changed commit from **[`46ef922`](https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a)** to **[`b5c7895`](https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed)**",
    "created_at": "2021-11-20T23:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46ef922`](https://github.com/sagemath/sagetrac-mirror/commit/46ef922ade27cd5223f64ae51238dc21813fa44a)** to **[`b5c7895`](https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed)**



---

archive/issue_comments_524335.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/320be0da3752a0afb55948eb395f925f16571f28\"><code>320be0d</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fab508ad23b72e96a9e367956325f24c100bb18b\"><code>fab508a</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0930162820c778598afea7de7119c624a0c40fe\"><code>c093016</code></a></td><td><code>trac 32505:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b595530ceeda6ef3703a8596e412016d3119dfdc\"><code>b595530</code></a></td><td><code>trac 32505: minor cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9058e9a16c448b285bc2457a0bf703daeed81711\"><code>9058e9a</code></a></td><td><code>trac 32505: change category for free modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0093e2583b60c0061fdb98dcfeac5fe92d39750\"><code>c0093e2</code></a></td><td><code>trac 32505: use `__bool__` instead of __nonzero__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfe23879d9bbba959ec114996e760194dc8c8ea0\"><code>dfe2387</code></a></td><td><code>trac 32505: change inheritance for FPModule</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed\"><code>b5c7895</code></a></td><td><code>trac 32505: add axiom \"FinitelyPresented\" for modules and use it.</code></td></tr></table>\n",
    "created_at": "2021-11-20T23:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524335",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/320be0da3752a0afb55948eb395f925f16571f28"><code>320be0d</code></a></td><td><code>trac 32505: finitely presented graded modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fab508ad23b72e96a9e367956325f24c100bb18b"><code>fab508a</code></a></td><td><code>trac 32505: clear out __init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0930162820c778598afea7de7119c624a0c40fe"><code>c093016</code></a></td><td><code>trac 32505:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b595530ceeda6ef3703a8596e412016d3119dfdc"><code>b595530</code></a></td><td><code>trac 32505: minor cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9058e9a16c448b285bc2457a0bf703daeed81711"><code>9058e9a</code></a></td><td><code>trac 32505: change category for free modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0093e2583b60c0061fdb98dcfeac5fe92d39750"><code>c0093e2</code></a></td><td><code>trac 32505: use `__bool__` instead of __nonzero__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfe23879d9bbba959ec114996e760194dc8c8ea0"><code>dfe2387</code></a></td><td><code>trac 32505: change inheritance for FPModule</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed"><code>b5c7895</code></a></td><td><code>trac 32505: add axiom "FinitelyPresented" for modules and use it.</code></td></tr></table>




---

archive/issue_comments_524336.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks, Travis. I've addressed most of these. I will add some doctests involving some other algebras like `Exterior`. Regarding your list:\n\n- I added test suites to the various `__init__` methods, and now I'm getting a doctest failure that I have yet to track down. I would be happy for help:\n\n```\nFile \"src/sage/modules/fp_graded/module.py\", line 156, in sage.modules.fp_graded.module.FPModule.__init__\nFailed example:\n    TestSuite(M).run()\nExpected nothing\nGot:\n      Failure in _test_category:\n      Traceback (most recent call last):\n        File \"/Users/palmieri/Desktop/Sage/git/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n          test_method(tester=tester)\n        File \"sage/structure/element.pyx\", line 722, in sage.structure.element.Element._test_category (build/cythonized/sage/structure/element.c:6825)\n          tester.assertTrue(isinstance(self, self.parent().category().element_class))\n        File \"/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/unittest/case.py\", line 688, in assertTrue\n          raise self.failureException(msg)\n      AssertionError: False is not true\n      ------------------------------------------------------------\n      The following tests failed: _test_category\n    Failure in _test_elements\n    The following tests failed: _test_elements\n```\n When I actually run Sage and look at this, I think this is relevant information:\n\n```\nsage: from sage.modules.fp_graded.module import FPModule\nsage: A3 = SteenrodAlgebra(profile=[4,3,2,1])\nsage: M = FPModule(A3, [0,1], [[Sq(2), Sq(1)]])\nsage: x = M.an_element()\nsage: x.parent().category().element_class\n<class 'sage.categories.category.JoinCategory.element_class'>\nsage: isinstance(x, x.parent().category().element_class)  # _test_category asserts True\nFalse\n```\n\n- \"Somewhere in the documentation needs to be stated that the module must be finite dimensional\". We say \"finitely presented\" frequently already, but I've added a bit more. I also added a new category axiom, \"FinitelyPresented\".\n\nRegarding [comment:10](#comment:10) and optimization, I think the followup ticket #30680 will be a good testing ground, since it will use this code heavily.",
    "created_at": "2021-11-20T23:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524336",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks, Travis. I've addressed most of these. I will add some doctests involving some other algebras like `Exterior`. Regarding your list:

- I added test suites to the various `__init__` methods, and now I'm getting a doctest failure that I have yet to track down. I would be happy for help:

```
File "src/sage/modules/fp_graded/module.py", line 156, in sage.modules.fp_graded.module.FPModule.__init__
Failed example:
    TestSuite(M).run()
Expected nothing
Got:
      Failure in _test_category:
      Traceback (most recent call last):
        File "/Users/palmieri/Desktop/Sage/git/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/sage_unittest.py", line 297, in run
          test_method(tester=tester)
        File "sage/structure/element.pyx", line 722, in sage.structure.element.Element._test_category (build/cythonized/sage/structure/element.c:6825)
          tester.assertTrue(isinstance(self, self.parent().category().element_class))
        File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/unittest/case.py", line 688, in assertTrue
          raise self.failureException(msg)
      AssertionError: False is not true
      ------------------------------------------------------------
      The following tests failed: _test_category
    Failure in _test_elements
    The following tests failed: _test_elements
```
 When I actually run Sage and look at this, I think this is relevant information:

```
sage: from sage.modules.fp_graded.module import FPModule
sage: A3 = SteenrodAlgebra(profile=[4,3,2,1])
sage: M = FPModule(A3, [0,1], [[Sq(2), Sq(1)]])
sage: x = M.an_element()
sage: x.parent().category().element_class
<class 'sage.categories.category.JoinCategory.element_class'>
sage: isinstance(x, x.parent().category().element_class)  # _test_category asserts True
False
```

- "Somewhere in the documentation needs to be stated that the module must be finite dimensional". We say "finitely presented" frequently already, but I've added a bit more. I also added a new category axiom, "FinitelyPresented".

Regarding [comment:10](#comment:10) and optimization, I think the followup ticket #30680 will be a good testing ground, since it will use this code heavily.



---

archive/issue_comments_524337.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSorry (yet again) for taking so long to get to this. So as you are surmising, either the category or the element does not seem to be created correctly. I will need to look at this in more detail. As a quick workaround if we want to merge this quickly, we can just skip that particular test. However, this does seem to be a more serious but subtle issue that we should address.",
    "created_at": "2021-12-09T06:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524337",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

Sorry (yet again) for taking so long to get to this. So as you are surmising, either the category or the element does not seem to be created correctly. I will need to look at this in more detail. As a quick workaround if we want to merge this quickly, we can just skip that particular test. However, this does seem to be a more serious but subtle issue that we should address.



---

archive/issue_comments_524338.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0\"><code>e8e4927</code></a></td><td><code>trac 32505: add a few examples using exterior algebras.</code></td></tr></table>\n",
    "created_at": "2021-12-09T19:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0"><code>e8e4927</code></a></td><td><code>trac 32505: add a few examples using exterior algebras.</code></td></tr></table>




---

archive/issue_comments_524339.json:
```json
{
    "body": "Changed commit from **[`b5c7895`](https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed)** to **[`e8e4927`](https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0)**",
    "created_at": "2021-12-09T19:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524339",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5c7895`](https://github.com/sagemath/sagetrac-mirror/commit/b5c789541fab53e4163c636e646d59e6caa2bbed)** to **[`e8e4927`](https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0)**



---

archive/issue_comments_524340.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHere are a few examples with exterior algebras. Also in the previous version `M.gen(0)` would work when `M` was a free graded module but not a finitely presented module, so I've added `gen` as an alias for `generator` in the f.p. case, too. Same for `gens`.\n\nI also disabled the failing `TestSuite` doctest. If we can figure out how to fix it, even better.\n\nFinally, I am not happy with how elements are printed. Rather than `<x, y>`, I would rather see `x*g_0 + y*g_1`. Users should be allowed to name their generators, so you could also do\n\n```\nsage: M.<a,b,c> = FPModule(...)\nsage: x*a + y*b\nx*a + y*b\n```\nor\n\n```\nsage: M = FPModule(..., name='b', ...)  # not sure about this syntax\nsage: x*M.gen(0)\nx*b_0\n```\ngh-sverre320, kvanwoerden, gh-rrbruner: any comments?",
    "created_at": "2021-12-09T19:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524340",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

Here are a few examples with exterior algebras. Also in the previous version `M.gen(0)` would work when `M` was a free graded module but not a finitely presented module, so I've added `gen` as an alias for `generator` in the f.p. case, too. Same for `gens`.

I also disabled the failing `TestSuite` doctest. If we can figure out how to fix it, even better.

Finally, I am not happy with how elements are printed. Rather than `<x, y>`, I would rather see `x*g_0 + y*g_1`. Users should be allowed to name their generators, so you could also do

```
sage: M.<a,b,c> = FPModule(...)
sage: x*a + y*b
x*a + y*b
```
or

```
sage: M = FPModule(..., name='b', ...)  # not sure about this syntax
sage: x*M.gen(0)
x*b_0
```
gh-sverre320, kvanwoerden, gh-rrbruner: any comments?



---

archive/issue_comments_524341.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI know what the problem is. The `TestSuite` is very useful:\n\n```diff\n-element_class = FPElement\n+Element = FPElement\n```\nI will push a fix along with some other miscellaneous doc fixes one I make my way through all of the code.\n\nOne this that I do not like is `submodule` returning a morphism. This is very counterintuitive to me. I propose we rename this `submodule_inclusion` or `submodule_embedding` (other names welcome). Same for `kernel`. I know this is meant for homological algebra (+1 for that), but the method names should reflect their behavior IMO.",
    "created_at": "2021-12-10T00:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524341",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

I know what the problem is. The `TestSuite` is very useful:

```diff
-element_class = FPElement
+Element = FPElement
```
I will push a fix along with some other miscellaneous doc fixes one I make my way through all of the code.

One this that I do not like is `submodule` returning a morphism. This is very counterintuitive to me. I propose we rename this `submodule_inclusion` or `submodule_embedding` (other names welcome). Same for `kernel`. I know this is meant for homological algebra (+1 for that), but the method names should reflect their behavior IMO.



---

archive/issue_comments_524342.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am also +1 on changing the print (and latex) representation of elements to have user specified names. We can just use the framework of `IndexedGenerators` to handle the printing. We can also add an option to retain the current printing (as it matches what `FreeModule` does). John, what would `(x + y)*a`, where `x,y` are different basis elements of the algebra `A`, print as? `x*a + y*a` or `(x + y)*a`? Should we add such an option too?",
    "created_at": "2021-12-10T00:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524342",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

I am also +1 on changing the print (and latex) representation of elements to have user specified names. We can just use the framework of `IndexedGenerators` to handle the printing. We can also add an option to retain the current printing (as it matches what `FreeModule` does). John, what would `(x + y)*a`, where `x,y` are different basis elements of the algebra `A`, print as? `x*a + y*a` or `(x + y)*a`? Should we add such an option too?



---

archive/issue_comments_524343.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI also have some thoughts about the construction hooks. These do not necessarily need to be address on this ticket, but it might be good to do it here. I think we should have some method added to the category of `GradedAlgebrasWithBasis` called `free_graded_module` and possibly add `FreeGradedModule` to the global namespace. This would serve as the main entry point.\n\nNext, to construct a finitely presented module, I am thinking we should implement a quotient method or some other natural method to compute finitely presented modules as a 2-step procedure. Of course, we can easily add a `finitely_presented_graded_module()` or similar such method to allow a direct construction.\n\nThoughts?",
    "created_at": "2021-12-10T00:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524343",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

I also have some thoughts about the construction hooks. These do not necessarily need to be address on this ticket, but it might be good to do it here. I think we should have some method added to the category of `GradedAlgebrasWithBasis` called `free_graded_module` and possibly add `FreeGradedModule` to the global namespace. This would serve as the main entry point.

Next, to construct a finitely presented module, I am thinking we should implement a quotient method or some other natural method to compute finitely presented modules as a 2-step procedure. Of course, we can easily add a `finitely_presented_graded_module()` or similar such method to allow a direct construction.

Thoughts?



---

archive/issue_comments_524344.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/free-graded-modules](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/free-graded-modules)** to **[public/modules/free_graded_modules-32505](https://github.com/sagemath/sagetrac-mirror/tree/public/modules/free_graded_modules-32505)**",
    "created_at": "2021-12-10T01:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524344",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/jhpalmieri/free-graded-modules](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/free-graded-modules)** to **[public/modules/free_graded_modules-32505](https://github.com/sagemath/sagetrac-mirror/tree/public/modules/free_graded_modules-32505)**



---

archive/issue_comments_524345.json:
```json
{
    "body": "Reviewer: **John Palmieri, Travis Scrimshaw**",
    "created_at": "2021-12-10T01:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524345",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **John Palmieri, Travis Scrimshaw**



---

archive/issue_comments_524346.json:
```json
{
    "body": "Changed commit from **[`e8e4927`](https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0)** to **[`ded984f`](https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795)**",
    "created_at": "2021-12-10T01:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524346",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`e8e4927`](https://github.com/sagemath/sagetrac-mirror/commit/e8e4927b68ba5f762f4d1ce13525bff38b3ca2f0)** to **[`ded984f`](https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795)**



---

archive/issue_comments_524347.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795\"><code>ded984f</code></a></td><td><code>Reviewer changes with misc tweaks and fixes.</code></td></tr></table>\n",
    "created_at": "2021-12-10T01:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524347",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795"><code>ded984f</code></a></td><td><code>Reviewer changes with misc tweaks and fixes.</code></td></tr></table>




---

archive/issue_comments_524348.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tscrim](#comment:28):\n> I am also +1 on changing the print (and latex) representation of elements to have user specified names. We can just use the framework of `IndexedGenerators` to handle the printing. We can also add an option to retain the current printing (as it matches what `FreeModule` does). John, what would `(x + y)*a`, where `x,y` are different basis elements of the algebra `A`, print as? `x*a + y*a` or `(x + y)*a`? Should we add such an option too?\n\nI've been trying out using the default for `IndexedFreeModuleElement`, and it uses parentheses: `(x+y)*a + (y+z)*b` (no spaces around `+` inside the parentheses). I would like to stick with the default. That means getting rid of `_repr_` for the elements and adding `_repr_term` for the parents.\n\nBy the way, the general switch from `<a,b>` to `a*g_{0} + b*g_{1}` is my preference, but it is also consistent with how Sage prints elements in algebraic structures more generally. My current implementation allows for\n\n```\nM = FreeGradedModule(A, (0, 2))  -->  generators are g_{0}, g_{2}\nM = FreeGradedModule(A, (0, 0, 2))  -->  generators are g_{0,0}, g_{0,1}, g_{2,0}: two indices since multiple generators in the same degree\nM = FreeGradedModule(A, (0, 0, 2), names='c')  -->  use \"c\" instead of \"g\"\nM = FreeGradedModule(A, (0, 0, 2), names='a, b, c')  -->  generators a, b, c: no subscripts\nM.<a0,b0,c2> = FreeGradedModule(A, (0, 0, 2))  -->  generators a0, b0, c2: no subscripts, also define a0, b0, c2\n```",
    "created_at": "2021-12-10T01:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524348",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tscrim](#comment:28):
> I am also +1 on changing the print (and latex) representation of elements to have user specified names. We can just use the framework of `IndexedGenerators` to handle the printing. We can also add an option to retain the current printing (as it matches what `FreeModule` does). John, what would `(x + y)*a`, where `x,y` are different basis elements of the algebra `A`, print as? `x*a + y*a` or `(x + y)*a`? Should we add such an option too?

I've been trying out using the default for `IndexedFreeModuleElement`, and it uses parentheses: `(x+y)*a + (y+z)*b` (no spaces around `+` inside the parentheses). I would like to stick with the default. That means getting rid of `_repr_` for the elements and adding `_repr_term` for the parents.

By the way, the general switch from `<a,b>` to `a*g_{0} + b*g_{1}` is my preference, but it is also consistent with how Sage prints elements in algebraic structures more generally. My current implementation allows for

```
M = FreeGradedModule(A, (0, 2))  -->  generators are g_{0}, g_{2}
M = FreeGradedModule(A, (0, 0, 2))  -->  generators are g_{0,0}, g_{0,1}, g_{2,0}: two indices since multiple generators in the same degree
M = FreeGradedModule(A, (0, 0, 2), names='c')  -->  use "c" instead of "g"
M = FreeGradedModule(A, (0, 0, 2), names='a, b, c')  -->  generators a, b, c: no subscripts
M.<a0,b0,c2> = FreeGradedModule(A, (0, 0, 2))  -->  generators a0, b0, c2: no subscripts, also define a0, b0, c2
```



---

archive/issue_comments_524349.json:
```json
{
    "body": "Changed commit from **[`ded984f`](https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795)** to **[`a12a838`](https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c)**",
    "created_at": "2021-12-10T04:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524349",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ded984f`](https://github.com/sagemath/sagetrac-mirror/commit/ded984f60dc7090448df317ec2b5104986ce1795)** to **[`a12a838`](https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c)**



---

archive/issue_comments_524350.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dfde967a69b17155c8c14e0555fe0ea2ade12b3\"><code>8dfde96</code></a></td><td><code>trac 32505: delete `_repr_` for elements and instead use _repr_term</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c\"><code>a12a838</code></a></td><td><code>trac 32505: rename kernel() to kernel_morphism() and similar for</code></td></tr></table>\n",
    "created_at": "2021-12-10T04:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524350",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dfde967a69b17155c8c14e0555fe0ea2ade12b3"><code>8dfde96</code></a></td><td><code>trac 32505: delete `_repr_` for elements and instead use _repr_term</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c"><code>a12a838</code></a></td><td><code>trac 32505: rename kernel() to kernel_morphism() and similar for</code></td></tr></table>




---

archive/issue_comments_524351.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a\"><code>8529b6c</code></a></td><td><code>trac 32505: add _latex_term</code></td></tr></table>\n",
    "created_at": "2021-12-10T04:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524351",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a"><code>8529b6c</code></a></td><td><code>trac 32505: add _latex_term</code></td></tr></table>




---

archive/issue_comments_524352.json:
```json
{
    "body": "Changed commit from **[`a12a838`](https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c)** to **[`8529b6c`](https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a)**",
    "created_at": "2021-12-10T04:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524352",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a12a838`](https://github.com/sagemath/sagetrac-mirror/commit/a12a8380fa33f8fb08c9c8b0cf9214c5a123861c)** to **[`8529b6c`](https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a)**



---

archive/issue_comments_524353.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHere is a branch that uses the new print representation and adds a LaTeX representation. It also changes `submodule` to `submodule_inclusion`, `kernel` -> `kernel_morphism`, `cokernel` -> `cokernel_morphism`.",
    "created_at": "2021-12-10T04:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524353",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Here is a branch that uses the new print representation and adds a LaTeX representation. It also changes `submodule` to `submodule_inclusion`, `kernel` -> `kernel_morphism`, `cokernel` -> `cokernel_morphism`.



---

archive/issue_comments_524354.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWe can undo these changes if there are sound objections, of course.",
    "created_at": "2021-12-10T04:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524354",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

We can undo these changes if there are sound objections, of course.



---

archive/issue_comments_524355.json:
```json
{
    "body": "Changed commit from **[`8529b6c`](https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a)** to **[`8e54829`](https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09)**",
    "created_at": "2021-12-10T04:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524355",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8529b6c`](https://github.com/sagemath/sagetrac-mirror/commit/8529b6c0be23120ac6f087a5d9c04b805fdf008a)** to **[`8e54829`](https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09)**



---

archive/issue_comments_524356.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09\"><code>8e54829</code></a></td><td><code>trac 32505: typos</code></td></tr></table>\n",
    "created_at": "2021-12-10T04:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524356",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09"><code>8e54829</code></a></td><td><code>trac 32505: typos</code></td></tr></table>




---

archive/issue_comments_524357.json:
```json
{
    "body": "Changed commit from **[`8e54829`](https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09)** to **[`db79c13`](https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c)**",
    "created_at": "2021-12-10T19:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524357",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8e54829`](https://github.com/sagemath/sagetrac-mirror/commit/8e54829b2c315f9fd9bd696b82eef78c33510f09)** to **[`db79c13`](https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c)**



---

archive/issue_comments_524358.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ebfa19ac01c5b2d8ac76eb34136eacc8f3d89e\"><code>c0ebfa1</code></a></td><td><code>trac 32505: rename kernel_morphism to kernel_inclusion,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c\"><code>db79c13</code></a></td><td><code>trac 32505: comments about submodules</code></td></tr></table>\n",
    "created_at": "2021-12-10T19:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524358",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ebfa19ac01c5b2d8ac76eb34136eacc8f3d89e"><code>c0ebfa1</code></a></td><td><code>trac 32505: rename kernel_morphism to kernel_inclusion,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c"><code>db79c13</code></a></td><td><code>trac 32505: comments about submodules</code></td></tr></table>




---

archive/issue_comments_524359.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@tscrim](#comment:27):\n> I know what the problem is. The `TestSuite` is very useful:\n> \n> ```diff\n> -element_class = FPElement\n> +Element = FPElement\n> ```\n> I will push a fix along with some other miscellaneous doc fixes one I make my way through all of the code.\n\nThanks for figuring that out!\n\n> One this that I do not like is `submodule` returning a morphism. This is very counterintuitive to me. I propose we rename this `submodule_inclusion` or `submodule_embedding` (other names welcome). Same for `kernel`. I know this is meant for homological algebra (+1 for that), but the method names should reflect their behavior IMO.\n\nFixed. I also suggested in a private email that another option would be to have a new class `FpMorphismKernel` which would inherit from `FPModule` but would also remember ambient module and the inclusion map. In the particular setting here, I think that the morphism is going to be used more than the kernel, so using `f.kernel_inclusion()` and occasionally `f.kernel_inclusion().domain()` looks better to me than `f.kernel().inclusion()` and occasionally `f.kernel()`.",
    "created_at": "2021-12-10T22:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524359",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@tscrim](#comment:27):
> I know what the problem is. The `TestSuite` is very useful:
> 
> ```diff
> -element_class = FPElement
> +Element = FPElement
> ```
> I will push a fix along with some other miscellaneous doc fixes one I make my way through all of the code.

Thanks for figuring that out!

> One this that I do not like is `submodule` returning a morphism. This is very counterintuitive to me. I propose we rename this `submodule_inclusion` or `submodule_embedding` (other names welcome). Same for `kernel`. I know this is meant for homological algebra (+1 for that), but the method names should reflect their behavior IMO.

Fixed. I also suggested in a private email that another option would be to have a new class `FpMorphismKernel` which would inherit from `FPModule` but would also remember ambient module and the inclusion map. In the particular setting here, I think that the morphism is going to be used more than the kernel, so using `f.kernel_inclusion()` and occasionally `f.kernel_inclusion().domain()` looks better to me than `f.kernel().inclusion()` and occasionally `f.kernel()`.



---

archive/issue_comments_524360.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@tscrim](#comment:29):\n> I also have some thoughts about the construction hooks. These do not necessarily need to be address on this ticket, but it might be good to do it here. I think we should have some method added to the category of `GradedAlgebrasWithBasis` called `free_graded_module` and possibly add `FreeGradedModule` to the global namespace. This would serve as the main entry point.\n\nThis may require some other changes; in particular, every algebra (with basis? or every algebra?) should have a `free_module` method, but the `free_module` method for Clifford/exterior algebras just gives a rank 1 free module, the module underlying the algebra itself. Searching for `free_module` methods suggests that some behave this way while some allow the user to specify a basis. We should probably have something like `underlying_free_module(self)` and `free_module(self, basis=...)`. The version in `categories/rings.py`, which might be viewed as the default method, is a little strange, since it returns not just a free module `V` over the ring `R` but also maps `R -> V` and `V -> R`. Such maps are not particularly canonical, so I don't know why they are part of the structure. Actually, it looks like this may only return a free module of rank 1. I don't know why it doesn't just call `CombinatorialFreeModule(R, basis, ...)` and allow for higher rank modules.\n\nMaybe my point is, this looks messy enough that it should be deferred to another ticket. Alternatively we could ignore the mess and just add a `free_graded_module` method as you suggest, and try to clean up the ungraded case later. It will be a little awkward if `free_module` and `graded_free_module` behave so differently.\n\n> Next, to construct a finitely presented module, I am thinking we should implement a quotient method or some other natural method to compute finitely presented modules as a 2-step procedure. Of course, we can easily add a `finitely_presented_graded_module()` or similar such method to allow a direct construction.\n\nThe current code allows for the construction of a finitely presented module from a morphism between two free modules (`mor.to_fp_module()`). That could also be turned into a method for free modules, accepting a morphism and returning an f.p. module.",
    "created_at": "2021-12-10T22:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524360",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@tscrim](#comment:29):
> I also have some thoughts about the construction hooks. These do not necessarily need to be address on this ticket, but it might be good to do it here. I think we should have some method added to the category of `GradedAlgebrasWithBasis` called `free_graded_module` and possibly add `FreeGradedModule` to the global namespace. This would serve as the main entry point.

This may require some other changes; in particular, every algebra (with basis? or every algebra?) should have a `free_module` method, but the `free_module` method for Clifford/exterior algebras just gives a rank 1 free module, the module underlying the algebra itself. Searching for `free_module` methods suggests that some behave this way while some allow the user to specify a basis. We should probably have something like `underlying_free_module(self)` and `free_module(self, basis=...)`. The version in `categories/rings.py`, which might be viewed as the default method, is a little strange, since it returns not just a free module `V` over the ring `R` but also maps `R -> V` and `V -> R`. Such maps are not particularly canonical, so I don't know why they are part of the structure. Actually, it looks like this may only return a free module of rank 1. I don't know why it doesn't just call `CombinatorialFreeModule(R, basis, ...)` and allow for higher rank modules.

Maybe my point is, this looks messy enough that it should be deferred to another ticket. Alternatively we could ignore the mess and just add a `free_graded_module` method as you suggest, and try to clean up the ungraded case later. It will be a little awkward if `free_module` and `graded_free_module` behave so differently.

> Next, to construct a finitely presented module, I am thinking we should implement a quotient method or some other natural method to compute finitely presented modules as a 2-step procedure. Of course, we can easily add a `finitely_presented_graded_module()` or similar such method to allow a direct construction.

The current code allows for the construction of a finitely presented module from a morphism between two free modules (`mor.to_fp_module()`). That could also be turned into a method for free modules, accepting a morphism and returning an f.p. module.



---

archive/issue_comments_524361.json:
```json
{
    "body": "Changed commit from **[`db79c13`](https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c)** to **[`2e9b692`](https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863)**",
    "created_at": "2021-12-11T04:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524361",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db79c13`](https://github.com/sagemath/sagetrac-mirror/commit/db79c13f71ab358d0d403db0903b57253110b53c)** to **[`2e9b692`](https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863)**



---

archive/issue_comments_524362.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863\"><code>2e9b692</code></a></td><td><code>trac 32505: fix some comparisons to None</code></td></tr></table>\n",
    "created_at": "2021-12-11T04:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524362",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863"><code>2e9b692</code></a></td><td><code>trac 32505: fix some comparisons to None</code></td></tr></table>




---

archive/issue_comments_524363.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nWe could do this, for example:\n\n```diff\ndiff --git a/src/sage/categories/graded_algebras_with_basis.py b/src/sage/categories/graded_algebras_with_basis.py\nindex e7ae68328e..8af922cd31 100644\n--- a/src/sage/categories/graded_algebras_with_basis.py\n+++ b/src/sage/categories/graded_algebras_with_basis.py\n@@ -84,6 +84,45 @@ class GradedAlgebrasWithBasis(GradedModulesCategory):\n         # Also, ``projection`` could be overridden by, well, a\n         # projection.\n \n+        def free_graded_module(self, generator_degrees, names=None):\n+            \"\"\"\n+            Create a finitely generated free graded module over ``self``\n+\n+            This is only implemented when the ground ring is a field.\n+\n+            INPUTS:\n+\n+            - ``generator_degrees`` -- tuple of integers defining the\n+              number of generators of the module, and their degrees\n+\n+            - ``names`` -- optional, the names of the generators. If\n+              ``names`` is a comma-separated string like ``'a, b,\n+              c'``, then those will be the names. Otherwise, for\n+              example if ``names`` is ``abc``, then the names will be\n+              ``abc_{d,i}``.\n+\n+            By default, if all generators are in distinct degrees,\n+            then the ``names`` of the generators will have the form\n+            ``g_{d}`` where ``d`` is the degree of the generator. If\n+            the degrees are not distinct, then the generators will be\n+            called ``g_{d,i}`` where ``d`` is the degree and ``i`` is\n+            its index in the list of generators in that degree.\n+\n+            See :mod:`sage.modules.fp_graded.free_module` for more\n+            examples and details.\n+\n+            EXAMPLES::\n+\n+                sage: Q = QuadraticForm(QQ, 3, [1,2,3,4,5,6])\n+                sage: Cl = CliffordAlgebra(Q)\n+                sage: M = Cl.free_graded_module((0, 2, 3))\n+                sage: M.gens()\n+                (g_{0}, g_{2}, g_{3})\n+            \"\"\"\n+            from sage.modules.fp_graded.free_module import FreeGradedModule\n+            return FreeGradedModule(self, generator_degrees, names)\n+\n+\n     class ElementMethods:\n         pass\n \n```",
    "created_at": "2021-12-11T05:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524363",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

We could do this, for example:

```diff
diff --git a/src/sage/categories/graded_algebras_with_basis.py b/src/sage/categories/graded_algebras_with_basis.py
index e7ae68328e..8af922cd31 100644
--- a/src/sage/categories/graded_algebras_with_basis.py
+++ b/src/sage/categories/graded_algebras_with_basis.py
@@ -84,6 +84,45 @@ class GradedAlgebrasWithBasis(GradedModulesCategory):
         # Also, ``projection`` could be overridden by, well, a
         # projection.
 
+        def free_graded_module(self, generator_degrees, names=None):
+            """
+            Create a finitely generated free graded module over ``self``
+
+            This is only implemented when the ground ring is a field.
+
+            INPUTS:
+
+            - ``generator_degrees`` -- tuple of integers defining the
+              number of generators of the module, and their degrees
+
+            - ``names`` -- optional, the names of the generators. If
+              ``names`` is a comma-separated string like ``'a, b,
+              c'``, then those will be the names. Otherwise, for
+              example if ``names`` is ``abc``, then the names will be
+              ``abc_{d,i}``.
+
+            By default, if all generators are in distinct degrees,
+            then the ``names`` of the generators will have the form
+            ``g_{d}`` where ``d`` is the degree of the generator. If
+            the degrees are not distinct, then the generators will be
+            called ``g_{d,i}`` where ``d`` is the degree and ``i`` is
+            its index in the list of generators in that degree.
+
+            See :mod:`sage.modules.fp_graded.free_module` for more
+            examples and details.
+
+            EXAMPLES::
+
+                sage: Q = QuadraticForm(QQ, 3, [1,2,3,4,5,6])
+                sage: Cl = CliffordAlgebra(Q)
+                sage: M = Cl.free_graded_module((0, 2, 3))
+                sage: M.gens()
+                (g_{0}, g_{2}, g_{3})
+            """
+            from sage.modules.fp_graded.free_module import FreeGradedModule
+            return FreeGradedModule(self, generator_degrees, names)
+
+
     class ElementMethods:
         pass
 
```



---

archive/issue_comments_524364.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jhpalmieri](#comment:26):\n> Finally, I am not happy with how elements are printed. Rather than `<x, y>`, I would rather see `x*g_0 + y*g_1`. Users should be allowed to name their generators, so you could also do\n> \n> ```\n> sage: M.<a,b,c> = FPModule(...)\n> sage: x*a + y*b\n> x*a + y*b\n> ```\n> or\n> \n> ```\n> sage: M = FPModule(..., name='b', ...)  # not sure about this syntax\n> sage: x*M.gen(0)\n> x*b_0\n> ```\n> gh-sverre320, kvanwoerden, gh-rrbruner: any comments?\n\nWe like the printing and naming mechanism you propose, jhpalmieri!",
    "created_at": "2021-12-15T19:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524364",
    "user": "https://github.com/sagetrac-kvanwoerden"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jhpalmieri](#comment:26):
> Finally, I am not happy with how elements are printed. Rather than `<x, y>`, I would rather see `x*g_0 + y*g_1`. Users should be allowed to name their generators, so you could also do
> 
> ```
> sage: M.<a,b,c> = FPModule(...)
> sage: x*a + y*b
> x*a + y*b
> ```
> or
> 
> ```
> sage: M = FPModule(..., name='b', ...)  # not sure about this syntax
> sage: x*M.gen(0)
> x*b_0
> ```
> gh-sverre320, kvanwoerden, gh-rrbruner: any comments?

We like the printing and naming mechanism you propose, jhpalmieri!



---

archive/issue_events_448150.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448150"
}
```



---

archive/issue_events_448151.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448151"
}
```



---

archive/issue_comments_524365.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nSorry for being slow about this.\n\nI like your idea in [comment:41](#comment:41).\n\nNow for something closer to bikeshedding. I think we should print the elements as, e.g., `g[0]` following CFM. In addition, we could just pass everything off to `IndexedGenerators` (via CFM) and let that handle everything. This makes it more customizable. In order to do so, we would extend that to support the `names` option. How does this sound? I can take care of this if you want.",
    "created_at": "2021-12-29T01:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524365",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

Sorry for being slow about this.

I like your idea in [comment:41](#comment:41).

Now for something closer to bikeshedding. I think we should print the elements as, e.g., `g[0]` following CFM. In addition, we could just pass everything off to `IndexedGenerators` (via CFM) and let that handle everything. This makes it more customizable. In order to do so, we would extend that to support the `names` option. How does this sound? I can take care of this if you want.



---

archive/issue_comments_524366.json:
```json
{
    "body": "Changed commit from **[`2e9b692`](https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863)** to **[`c3bf4b8`](https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff)**",
    "created_at": "2022-01-01T02:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524366",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2e9b692`](https://github.com/sagemath/sagetrac-mirror/commit/2e9b692503d169c9e4f5fa0ee0c84ca5b7b6a863)** to **[`c3bf4b8`](https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff)**



---

archive/issue_comments_524367.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff\"><code>c3bf4b8</code></a></td><td><code>trac 32505: add free_graded_module method to GradedAlgebrasWithBasis</code></td></tr></table>\n",
    "created_at": "2022-01-01T02:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524367",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff"><code>c3bf4b8</code></a></td><td><code>trac 32505: add free_graded_module method to GradedAlgebrasWithBasis</code></td></tr></table>




---

archive/issue_comments_524368.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHere is a branch with [comment:41](#comment:41) incorporated. If you can push a branch with `names` etc., that would be great!",
    "created_at": "2022-01-01T02:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524368",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:46" align="right">comment:46</div>

Here is a branch with [comment:41](#comment:41) incorporated. If you can push a branch with `names` etc., that would be great!



---

archive/issue_comments_524369.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b\"><code>8435c78</code></a></td><td><code>Reformatting output, simplifying basis construction, other misc changes.</code></td></tr></table>\n",
    "created_at": "2022-01-10T03:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524369",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b"><code>8435c78</code></a></td><td><code>Reformatting output, simplifying basis construction, other misc changes.</code></td></tr></table>




---

archive/issue_comments_524370.json:
```json
{
    "body": "Changed commit from **[`c3bf4b8`](https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff)** to **[`8435c78`](https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b)**",
    "created_at": "2022-01-10T03:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524370",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3bf4b8`](https://github.com/sagemath/sagetrac-mirror/commit/c3bf4b88715dba4a2419e398cd30884b7f3f5fff)** to **[`8435c78`](https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b)**



---

archive/issue_comments_524371.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI have pushed the changes with names (we will want the patchbot to get around to it to see if there are other (almost certainly trivial) doctests breaking across Sage from the internal changes).\n\nI also made a number of other changes and improvements. One important one is I changed the internal representation of basis elements to match the \"generic\" (i.e., no `names` specified) printing indices. This is the most natural way to associate data to the basis element (IMO the only other natural way would just be to just use {0, ..., k} to index the basis elements). I also directly links the FP module to the free module's indices. This was also very useful for setting up the element printing.\n\nI renamed the `to_fp_module` to `as_fp_module` for modules and `fp_module` for morphisms. If it was `to_fp_module`, I would expect some kind of map to be returned. I wanted the different names both to reflect the English and that modules and morphism are fundamentally different objects.\n\nI have some design questions:\n\n- I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.\n- We should remove the `__contains__` of `FPModule`. I think this is suppressing an issue with comparing elements. Contrast this code with\n\n  ```\n  sage: Z4 = Zmod(4)\n  sage: Z5 = Zmod(5)\n  sage: Z5(3) in Z4\n  False\n  sage: Z5(3) == Z4(3)\n  False\n  ```\n  which is using the generic `__contains__`. Right now I can't provide any advice on how to fix this as I haven't looked at this too closely yet.\n\nI also have some questions regarding the formatting that are easy enough to fix/change, but I wanted to be set on them before updating the remaining doctests (there will be some trivial failures in the added files):\n\n- What do we want the default prefix to be? Previously it was `g`, but I was thinking `G` to reflect that it should be an element of the module `G`. Pure bikeshedding, and I don't care. I just chose something that I thought was reasonable, but I should poll for other opinions before setting everything.\n- How do we want to print when the generator degrees? Right now the unique are `G[0]` and the non-unique are `G(0, 0)` because that was the easiest to do. I can easily change the unique to `G(0)`, and it is also relatively easy to change `G(0, 0)` to, e.g., `G[0,0]`.\n- I propose changing the morphism output to match that of ring morphisms:\n\n  ```\n  sage: R.<x> = ZZ[]\n  sage: S.<y> = ZZ[]\n  sage: R.hom([y])\n  Ring morphism:\n    From: Univariate Polynomial Ring in x over Integer Ring\n    To:   Univariate Polynomial Ring in y over Integer Ring\n    Defn: x |--> y\n  ```\n  This is better when there are a lot of elements, it is consistent with other parts of Sage, no tuple-vs-list printing issues, and we likely can take advantage of other morphism display code.",
    "created_at": "2022-01-10T03:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524371",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

I have pushed the changes with names (we will want the patchbot to get around to it to see if there are other (almost certainly trivial) doctests breaking across Sage from the internal changes).

I also made a number of other changes and improvements. One important one is I changed the internal representation of basis elements to match the "generic" (i.e., no `names` specified) printing indices. This is the most natural way to associate data to the basis element (IMO the only other natural way would just be to just use {0, ..., k} to index the basis elements). I also directly links the FP module to the free module's indices. This was also very useful for setting up the element printing.

I renamed the `to_fp_module` to `as_fp_module` for modules and `fp_module` for morphisms. If it was `to_fp_module`, I would expect some kind of map to be returned. I wanted the different names both to reflect the English and that modules and morphism are fundamentally different objects.

I have some design questions:

- I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.
- We should remove the `__contains__` of `FPModule`. I think this is suppressing an issue with comparing elements. Contrast this code with

  ```
  sage: Z4 = Zmod(4)
  sage: Z5 = Zmod(5)
  sage: Z5(3) in Z4
  False
  sage: Z5(3) == Z4(3)
  False
  ```
  which is using the generic `__contains__`. Right now I can't provide any advice on how to fix this as I haven't looked at this too closely yet.

I also have some questions regarding the formatting that are easy enough to fix/change, but I wanted to be set on them before updating the remaining doctests (there will be some trivial failures in the added files):

- What do we want the default prefix to be? Previously it was `g`, but I was thinking `G` to reflect that it should be an element of the module `G`. Pure bikeshedding, and I don't care. I just chose something that I thought was reasonable, but I should poll for other opinions before setting everything.
- How do we want to print when the generator degrees? Right now the unique are `G[0]` and the non-unique are `G(0, 0)` because that was the easiest to do. I can easily change the unique to `G(0)`, and it is also relatively easy to change `G(0, 0)` to, e.g., `G[0,0]`.
- I propose changing the morphism output to match that of ring morphisms:

  ```
  sage: R.<x> = ZZ[]
  sage: S.<y> = ZZ[]
  sage: R.hom([y])
  Ring morphism:
    From: Univariate Polynomial Ring in x over Integer Ring
    To:   Univariate Polynomial Ring in y over Integer Ring
    Defn: x |--> y
  ```
  This is better when there are a lot of elements, it is consistent with other parts of Sage, no tuple-vs-list printing issues, and we likely can take advantage of other morphism display code.



---

archive/issue_comments_524372.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@tscrim](#comment:48):\n> I have pushed the changes with names (we will want the patchbot to get around to it to see if there are other (almost certainly trivial) doctests breaking across Sage from the internal changes).\n\nGreat, thank you!\n \n> - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.\n\nSounds okay to me, but I don't a strong opinion about it.\n\n> - We should remove the `__contains__` of `FPModule`. I think this is suppressing an issue with comparing elements.\n\nI'll try it and see what happens, then get back to you.\n\n\n> - What do we want the default prefix to be? Previously it was `g`, but I was thinking `G` to reflect that it should be an element of the module `G`. Pure bikeshedding, and I don't care. I just chose something that I thought was reasonable, but I should poll for other opinions before setting everything.\n\nI think lowercase is better: `g[0]` looks more like an element to me than `G[0]`.\n\n> - How do we want to print when the generator degrees? Right now the unique are `G[0]` and the non-unique are `G(0, 0)` because that was the easiest to do. I can easily change the unique to `G(0)`, and it is also relatively easy to change `G(0, 0)` to, e.g., `G[0,0]`.\n\nI don't care too much, but I have a slight preference for uniformity: square brackets in both cases?\n\n> - I propose changing the morphism output to match that of ring morphisms:\n\nYes, sounds good.",
    "created_at": "2022-01-25T00:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524372",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@tscrim](#comment:48):
> I have pushed the changes with names (we will want the patchbot to get around to it to see if there are other (almost certainly trivial) doctests breaking across Sage from the internal changes).

Great, thank you!
 
> - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.

Sounds okay to me, but I don't a strong opinion about it.

> - We should remove the `__contains__` of `FPModule`. I think this is suppressing an issue with comparing elements.

I'll try it and see what happens, then get back to you.


> - What do we want the default prefix to be? Previously it was `g`, but I was thinking `G` to reflect that it should be an element of the module `G`. Pure bikeshedding, and I don't care. I just chose something that I thought was reasonable, but I should poll for other opinions before setting everything.

I think lowercase is better: `g[0]` looks more like an element to me than `G[0]`.

> - How do we want to print when the generator degrees? Right now the unique are `G[0]` and the non-unique are `G(0, 0)` because that was the easiest to do. I can easily change the unique to `G(0)`, and it is also relatively easy to change `G(0, 0)` to, e.g., `G[0,0]`.

I don't care too much, but I have a slight preference for uniformity: square brackets in both cases?

> - I propose changing the morphism output to match that of ring morphisms:

Yes, sounds good.



---

archive/issue_comments_524373.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a556c49b3da79a29bbae456749e557b336214390\"><code>a556c49</code></a></td><td><code>Merge branch 'develop' into t/32505/public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b\"><code>d745357</code></a></td><td><code>trac 32505: fix doctests, change print representation for morphisms</code></td></tr></table>\n",
    "created_at": "2022-01-25T05:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a556c49b3da79a29bbae456749e557b336214390"><code>a556c49</code></a></td><td><code>Merge branch 'develop' into t/32505/public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b"><code>d745357</code></a></td><td><code>trac 32505: fix doctests, change print representation for morphisms</code></td></tr></table>




---

archive/issue_comments_524374.json:
```json
{
    "body": "Changed commit from **[`8435c78`](https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b)** to **[`d745357`](https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b)**",
    "created_at": "2022-01-25T05:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8435c78`](https://github.com/sagemath/sagetrac-mirror/commit/8435c780eea6a5d6749d80d914e20dc433301a1b)** to **[`d745357`](https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b)**



---

archive/issue_comments_524375.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nI changed `G[0]` to `g[0]` but also changed `G(0, 0)` to `g(0, 0)` \u2014\u00a0it wasn't clear how to get brackets in the second case. I also changed the print representation for morphisms. I think I fixed all of the doctests, too.",
    "created_at": "2022-01-25T05:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524375",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:51" align="right">comment:51</div>

I changed `G[0]` to `g[0]` but also changed `G(0, 0)` to `g(0, 0)` — it wasn't clear how to get brackets in the second case. I also changed the print representation for morphisms. I think I fixed all of the doctests, too.



---

archive/issue_comments_524376.json:
```json
{
    "body": "Changed commit from **[`d745357`](https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b)** to **[`a73519c`](https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb)**",
    "created_at": "2022-01-25T05:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524376",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d745357`](https://github.com/sagemath/sagetrac-mirror/commit/d745357be5294371512684d2a23614d358c43a7b)** to **[`a73519c`](https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb)**



---

archive/issue_comments_524377.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb\"><code>a73519c</code></a></td><td><code>trac 32505: delete the method \"__contains__\" for FPModules</code></td></tr></table>\n",
    "created_at": "2022-01-25T05:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524377",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb"><code>a73519c</code></a></td><td><code>trac 32505: delete the method "__contains__" for FPModules</code></td></tr></table>




---

archive/issue_comments_524378.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@tscrim](#comment:48):\n> - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.\n\nI would be happy for you to take care of this. I ran into problems because I want to use generators and relations as arguments (as is currently done) but then have `__classcall_private__` convert to a morphism and pass that to `__init__`, and I couldn't figure out a clean way to do that. I didn't try that hard, but it seems that `__classcall_private__` and `__init__` should have the same arguments, so they both need `morphism`, `generators`, and `relations`? I guess we could switch to using a factory to construct these modules instead, but I didn't try that.\n\nI removed the `__contains__` method, but I didn't know what you were referring to with \"I think this is suppressing an issue with comparing elements.\"\n\nWith elements, it's easy for me to switch to `g(0)` and keep the current `g(0, 0)`, but I can't figure out how to instead switch the second one to `g[0, 0]`.\n\nOtherwise, I'm happy with this.",
    "created_at": "2022-01-25T06:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524378",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@tscrim](#comment:48):
> - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.

I would be happy for you to take care of this. I ran into problems because I want to use generators and relations as arguments (as is currently done) but then have `__classcall_private__` convert to a morphism and pass that to `__init__`, and I couldn't figure out a clean way to do that. I didn't try that hard, but it seems that `__classcall_private__` and `__init__` should have the same arguments, so they both need `morphism`, `generators`, and `relations`? I guess we could switch to using a factory to construct these modules instead, but I didn't try that.

I removed the `__contains__` method, but I didn't know what you were referring to with "I think this is suppressing an issue with comparing elements."

With elements, it's easy for me to switch to `g(0)` and keep the current `g(0, 0)`, but I can't figure out how to instead switch the second one to `g[0, 0]`.

Otherwise, I'm happy with this.



---

archive/issue_comments_524379.json:
```json
{
    "body": "Changed commit from **[`a73519c`](https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb)** to **[`ebcae24`](https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a)**",
    "created_at": "2022-01-25T18:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524379",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a73519c`](https://github.com/sagemath/sagetrac-mirror/commit/a73519c9f03e4b9d5f2461a55619ee8b6a09c7fb)** to **[`ebcae24`](https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a)**



---

archive/issue_comments_524380.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a\"><code>ebcae24</code></a></td><td><code>trac 32505: fix a doctest</code></td></tr></table>\n",
    "created_at": "2022-01-25T18:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524380",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a"><code>ebcae24</code></a></td><td><code>trac 32505: fix a doctest</code></td></tr></table>




---

archive/issue_comments_524381.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nSorry, I have been busy this past week. I should be able to do this today. It is simply a matter of adding a layer in the `_repr_term` method to convert the input to a list and then passing it up. Although I am thinking a better (long term) solution is to add another hook in `IndexedGenerators` for more broadly handling iterable input and use the general mechanics (so if someone wants to change the brackets to, say, `{`, it becomes a simple changing of the print options). This should also be quick to do.",
    "created_at": "2022-01-28T00:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524381",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:55" align="right">comment:55</div>

Sorry, I have been busy this past week. I should be able to do this today. It is simply a matter of adding a layer in the `_repr_term` method to convert the input to a list and then passing it up. Although I am thinking a better (long term) solution is to add another hook in `IndexedGenerators` for more broadly handling iterable input and use the general mechanics (so if someone wants to change the brackets to, say, `{`, it becomes a simple changing of the print options). This should also be quick to do.



---

archive/issue_comments_524382.json:
```json
{
    "body": "Changed commit from **[`ebcae24`](https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a)** to **[`6b84071`](https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef)**",
    "created_at": "2022-01-28T06:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524382",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ebcae24`](https://github.com/sagemath/sagetrac-mirror/commit/ebcae245641d773e9a3961702345143fe757b16a)** to **[`6b84071`](https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef)**



---

archive/issue_comments_524383.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4599fb53ccbc677493c9b3889247f1219aaeaebe\"><code>4599fb5</code></a></td><td><code>Merge branch 'develop' into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d6bdf98b1f8bc475e9d4612df0ddec9aed80735\"><code>7d6bdf9</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef\"><code>6b84071</code></a></td><td><code>Adding additional print option to IndexedGenerators for iterating through keys.</code></td></tr></table>\n",
    "created_at": "2022-01-28T06:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524383",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4599fb53ccbc677493c9b3889247f1219aaeaebe"><code>4599fb5</code></a></td><td><code>Merge branch 'develop' into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d6bdf98b1f8bc475e9d4612df0ddec9aed80735"><code>7d6bdf9</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef"><code>6b84071</code></a></td><td><code>Adding additional print option to IndexedGenerators for iterating through keys.</code></td></tr></table>




---

archive/issue_comments_524384.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649\"><code>d6f67cf</code></a></td><td><code>Fix containment issues and add some more doctests.</code></td></tr></table>\n",
    "created_at": "2022-01-28T06:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524384",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649"><code>d6f67cf</code></a></td><td><code>Fix containment issues and add some more doctests.</code></td></tr></table>




---

archive/issue_comments_524385.json:
```json
{
    "body": "Changed commit from **[`6b84071`](https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef)** to **[`d6f67cf`](https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649)**",
    "created_at": "2022-01-28T06:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524385",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b84071`](https://github.com/sagemath/sagetrac-mirror/commit/6b840715fc73c0fc528a6d48e2020dc86c682bef)** to **[`d6f67cf`](https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649)**



---

archive/issue_comments_524386.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@jhpalmieri](#comment:53):\n> Replying to [@tscrim](#comment:48):\n> > - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.\n\n> \n> I would be happy for you to take care of this. I ran into problems because I want to use generators and relations as arguments (as is currently done) but then have `__classcall_private__` convert to a morphism and pass that to `__init__`, and I couldn't figure out a clean way to do that. I didn't try that hard, but it seems that `__classcall_private__` and `__init__` should have the same arguments, so they both need `morphism`, `generators`, and `relations`? I guess we could switch to using a factory to construct these modules instead, but I didn't try that.\n\nA factory is overkill. The only thing needed is checking if the `__classcall_private__` input is a morphism or not. Well, I am feeling lazy (forgive me!) and don't really care too much to simplify the input as the current version works albeit somewhat inefficiently since it converts from the morphism data and then reconstructs said morphism. Anyways, this isn't anything that needs to be done right now. If you want to do this, please go ahead.\n\n> I removed the `__contains__` method, but I didn't know what you were referring to with \"I think this is suppressing an issue with comparing elements.\"\n\nI was getting errors for those doctest you removed. Using the default containment, you get this:\n\n```\nsage: from sage.modules.fp_graded.module import FPModule\nsage: M = FPModule(SteenrodAlgebra(2), [0,1], [[Sq(4), Sq(3)]])\nsage: N = FPModule(SteenrodAlgebra(2), [0], [[Sq(2)]])\nsage: y = Sq(2) * N.generator(0)\nsage: y in M\nTrue\n```\nwhich I think is wrong as it is checking this:\n\n```\nsage: M(y) == y\nTrue\n```\nSo either it is the equality or the conversion that has a bug (possibly both). Taking another look, the `_element_constructor_` was too permissive in how it was handling elements. I have fixed this, and it seems to resolve other issues I found with testing for this.\n\n> With elements, it's easy for me to switch to `g(0)` and keep the current `g(0, 0)`, but I can't figure out how to instead switch the second one to `g[0, 0]`.\n\nI have done this following what I sketched in [comment:55](#comment:55).\n\n> Otherwise, I'm happy with this.\n\nI am too if my changes are good.",
    "created_at": "2022-01-28T06:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524386",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@jhpalmieri](#comment:53):
> Replying to [@tscrim](#comment:48):
> > - I think we should have the `FPModule` construction be based on the morphism since that is the data that is actually stored. The `__classcall_private__` would then preparse the input data as needed.

> 
> I would be happy for you to take care of this. I ran into problems because I want to use generators and relations as arguments (as is currently done) but then have `__classcall_private__` convert to a morphism and pass that to `__init__`, and I couldn't figure out a clean way to do that. I didn't try that hard, but it seems that `__classcall_private__` and `__init__` should have the same arguments, so they both need `morphism`, `generators`, and `relations`? I guess we could switch to using a factory to construct these modules instead, but I didn't try that.

A factory is overkill. The only thing needed is checking if the `__classcall_private__` input is a morphism or not. Well, I am feeling lazy (forgive me!) and don't really care too much to simplify the input as the current version works albeit somewhat inefficiently since it converts from the morphism data and then reconstructs said morphism. Anyways, this isn't anything that needs to be done right now. If you want to do this, please go ahead.

> I removed the `__contains__` method, but I didn't know what you were referring to with "I think this is suppressing an issue with comparing elements."

I was getting errors for those doctest you removed. Using the default containment, you get this:

```
sage: from sage.modules.fp_graded.module import FPModule
sage: M = FPModule(SteenrodAlgebra(2), [0,1], [[Sq(4), Sq(3)]])
sage: N = FPModule(SteenrodAlgebra(2), [0], [[Sq(2)]])
sage: y = Sq(2) * N.generator(0)
sage: y in M
True
```
which I think is wrong as it is checking this:

```
sage: M(y) == y
True
```
So either it is the equality or the conversion that has a bug (possibly both). Taking another look, the `_element_constructor_` was too permissive in how it was handling elements. I have fixed this, and it seems to resolve other issues I found with testing for this.

> With elements, it's easy for me to switch to `g(0)` and keep the current `g(0, 0)`, but I can't figure out how to instead switch the second one to `g[0, 0]`.

I have done this following what I sketched in [comment:55](#comment:55).

> Otherwise, I'm happy with this.

I am too if my changes are good.



---

archive/issue_comments_524387.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419\"><code>f5ec2c1</code></a></td><td><code>trac 32505: do not use __class__(...), instead explicitly name the class</code></td></tr></table>\n",
    "created_at": "2022-01-28T21:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524387",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419"><code>f5ec2c1</code></a></td><td><code>trac 32505: do not use __class__(...), instead explicitly name the class</code></td></tr></table>




---

archive/issue_comments_524388.json:
```json
{
    "body": "Changed commit from **[`d6f67cf`](https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649)** to **[`f5ec2c1`](https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419)**",
    "created_at": "2022-01-28T21:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524388",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6f67cf`](https://github.com/sagemath/sagetrac-mirror/commit/d6f67cfe115757c2415c7c4755a10e6a096ae649)** to **[`f5ec2c1`](https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419)**



---

archive/issue_comments_524389.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI tried to modify `__classcall_private__` to allow a morphism as input, but I ran into problems, which I have now mostly fixed. One minor problem is that the class is often initialized with the explicit keyword `generator_degrees` (as in `FPModule(..., generator_degrees=...)`), but it doesn't make sense to use that name for the argument anymore, so I removed those. Now we can easily change the name of the argument. Another problem is that some objects were constructed by calling `self.__class__(...)`, and this usage seems to bypass `__classcall_private__` and go straight to `__init__`. It seems like a bad idea anyway, so I changed those to just use `FPModule(...)`.\n\nI may try later to implement a morphism as input, but this will do for now.",
    "created_at": "2022-01-28T22:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524389",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:60" align="right">comment:60</div>

I tried to modify `__classcall_private__` to allow a morphism as input, but I ran into problems, which I have now mostly fixed. One minor problem is that the class is often initialized with the explicit keyword `generator_degrees` (as in `FPModule(..., generator_degrees=...)`), but it doesn't make sense to use that name for the argument anymore, so I removed those. Now we can easily change the name of the argument. Another problem is that some objects were constructed by calling `self.__class__(...)`, and this usage seems to bypass `__classcall_private__` and go straight to `__init__`. It seems like a bad idea anyway, so I changed those to just use `FPModule(...)`.

I may try later to implement a morphism as input, but this will do for now.



---

archive/issue_comments_524390.json:
```json
{
    "body": "Changed commit from **[`f5ec2c1`](https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419)** to **[`ca9cdf0`](https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034)**",
    "created_at": "2022-01-29T00:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524390",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f5ec2c1`](https://github.com/sagemath/sagetrac-mirror/commit/f5ec2c1b87b21f4af85c95ca48d43a6c68301419)** to **[`ca9cdf0`](https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034)**



---

archive/issue_comments_524391.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034\"><code>ca9cdf0</code></a></td><td><code>trac 32505: fix one doctest</code></td></tr></table>\n",
    "created_at": "2022-01-29T00:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524391",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034"><code>ca9cdf0</code></a></td><td><code>trac 32505: fix one doctest</code></td></tr></table>




---

archive/issue_comments_524392.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThis passes all tests for me now. Let's not worry about allowing a morphism as input to the `FPModule` constructor. I'd like to be able to move on to #30680. Travis, I'm happy with all of your work on this; thank you. Any objections to my most recent changes?",
    "created_at": "2022-01-29T01:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524392",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:62" align="right">comment:62</div>

This passes all tests for me now. Let's not worry about allowing a morphism as input to the `FPModule` constructor. I'd like to be able to move on to #30680. Travis, I'm happy with all of your work on this; thank you. Any objections to my most recent changes?



---

archive/issue_comments_524393.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d\"><code>7dc9139</code></a></td><td><code>trac 32505: remove an unneeded import</code></td></tr></table>\n",
    "created_at": "2022-01-29T01:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524393",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d"><code>7dc9139</code></a></td><td><code>trac 32505: remove an unneeded import</code></td></tr></table>




---

archive/issue_comments_524394.json:
```json
{
    "body": "Changed commit from **[`ca9cdf0`](https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034)** to **[`7dc9139`](https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d)**",
    "created_at": "2022-01-29T01:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524394",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca9cdf0`](https://github.com/sagemath/sagetrac-mirror/commit/ca9cdf08d263d417566d20f86387c69512408034)** to **[`7dc9139`](https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d)**



---

archive/issue_comments_524395.json:
```json
{
    "body": "Changed commit from **[`7dc9139`](https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d)** to **[`b7f9179`](https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155)**",
    "created_at": "2022-01-29T06:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524395",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7dc9139`](https://github.com/sagemath/sagetrac-mirror/commit/7dc91398f34cd0f21a3a4922e8330f596454ea4d)** to **[`b7f9179`](https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155)**



---

archive/issue_comments_524396.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155\"><code>b7f9179</code></a></td><td><code>Adding support for morphism input.</code></td></tr></table>\n",
    "created_at": "2022-01-29T06:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524396",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155"><code>b7f9179</code></a></td><td><code>Adding support for morphism input.</code></td></tr></table>




---

archive/issue_comments_524397.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nI got out of my laziness and added support for taking a morphism input.\n\nI also changed the `FPModule.j` parameter to the hidden `_j`.\n\nAlthough looking again at the code, I have a few more questions (sorry!):\n\n- With allowing both input formats, do we need the `from_free_module*` methods? They seem more like clutter to me. I propose to remove them.\n\n- Related, I don't see why we want to create a free `FPModule` (instead of `FreeGradedModule`) in `resolution()`. Likely this is related to having different APIs, where methods likely just need to be added to the free version or perhaps some ABC needs to be created. We might want to even have the `__classcall_private__` redirect to the free module where appropriate.\n\n- Should the `FPModule` belong to the category of `ModulesWithBasis`? I don't think this is guaranteed (over the base algebra). See also the comment below.\n\n- I don't agree with the comment before `FPModule` \"vector spaces\" is ill-defined (in particular, we don't require the base ring of the base algebra to be a field). This can be corrected fairly easily. However, I propose removing this as it doesn't contribute anything to (understanding) the code.",
    "created_at": "2022-01-29T06:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524397",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:65" align="right">comment:65</div>

I got out of my laziness and added support for taking a morphism input.

I also changed the `FPModule.j` parameter to the hidden `_j`.

Although looking again at the code, I have a few more questions (sorry!):

- With allowing both input formats, do we need the `from_free_module*` methods? They seem more like clutter to me. I propose to remove them.

- Related, I don't see why we want to create a free `FPModule` (instead of `FreeGradedModule`) in `resolution()`. Likely this is related to having different APIs, where methods likely just need to be added to the free version or perhaps some ABC needs to be created. We might want to even have the `__classcall_private__` redirect to the free module where appropriate.

- Should the `FPModule` belong to the category of `ModulesWithBasis`? I don't think this is guaranteed (over the base algebra). See also the comment below.

- I don't agree with the comment before `FPModule` "vector spaces" is ill-defined (in particular, we don't require the base ring of the base algebra to be a field). This can be corrected fairly easily. However, I propose removing this as it doesn't contribute anything to (understanding) the code.



---

archive/issue_comments_524398.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@tscrim](#comment:65):\n> I got out of my laziness and added support for taking a morphism input.\n\nGreat, thanks! I also added code to allow a free module as input, in which case it would return a finitely presented module with no relations. We can revisit this based on how we want to handle your question below about `resolution`.\n\n> I also changed the `FPModule.j` parameter to the hidden `_j`.\n\nGood, makes sense.\n\n> - With allowing both input formats, do we need the `from_free_module*` methods? They seem more like clutter to me. I propose to remove them.\n\nDone.\n \n> - Related, I don't see why we want to create a free `FPModule` (instead of `FreeGradedModule`) in `resolution()`. Likely this is related to having different APIs, where methods likely just need to be added to the free version or perhaps some ABC needs to be created. We might want to even have the `__classcall_private__` redirect to the free module where appropriate.\n\nGood question. Comments from the original authors? Why not just use free modules in `resolution`?\n \n> - Should the `FPModule` belong to the category of `ModulesWithBasis`? I don't think this is guaranteed (over the base algebra). See also the comment below.\n\nI deleted this.\n \n> - I don't agree with the comment before `FPModule` \"vector spaces\" is ill-defined (in particular, we don't require the base ring of the base algebra to be a field). This can be corrected fairly easily. However, I propose removing this as it doesn't contribute anything to (understanding) the code.\n\nI replaced it with another comment, pointing out that some of the methods assume that there is a vector space structure and a chosen basis.",
    "created_at": "2022-01-29T22:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524398",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@tscrim](#comment:65):
> I got out of my laziness and added support for taking a morphism input.

Great, thanks! I also added code to allow a free module as input, in which case it would return a finitely presented module with no relations. We can revisit this based on how we want to handle your question below about `resolution`.

> I also changed the `FPModule.j` parameter to the hidden `_j`.

Good, makes sense.

> - With allowing both input formats, do we need the `from_free_module*` methods? They seem more like clutter to me. I propose to remove them.

Done.
 
> - Related, I don't see why we want to create a free `FPModule` (instead of `FreeGradedModule`) in `resolution()`. Likely this is related to having different APIs, where methods likely just need to be added to the free version or perhaps some ABC needs to be created. We might want to even have the `__classcall_private__` redirect to the free module where appropriate.

Good question. Comments from the original authors? Why not just use free modules in `resolution`?
 
> - Should the `FPModule` belong to the category of `ModulesWithBasis`? I don't think this is guaranteed (over the base algebra). See also the comment below.

I deleted this.
 
> - I don't agree with the comment before `FPModule` "vector spaces" is ill-defined (in particular, we don't require the base ring of the base algebra to be a field). This can be corrected fairly easily. However, I propose removing this as it doesn't contribute anything to (understanding) the code.

I replaced it with another comment, pointing out that some of the methods assume that there is a vector space structure and a chosen basis.



---

archive/issue_comments_524399.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da\"><code>5c242e7</code></a></td><td><code>trac 32505: remove from_free_module, from_free_module_morphism</code></td></tr></table>\n",
    "created_at": "2022-01-29T22:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524399",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da"><code>5c242e7</code></a></td><td><code>trac 32505: remove from_free_module, from_free_module_morphism</code></td></tr></table>




---

archive/issue_comments_524400.json:
```json
{
    "body": "Changed commit from **[`b7f9179`](https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155)** to **[`5c242e7`](https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da)**",
    "created_at": "2022-01-29T22:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7f9179`](https://github.com/sagemath/sagetrac-mirror/commit/b7f9179ccb50b17cf867e5b11009594a5ba6d155)** to **[`5c242e7`](https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da)**



---

archive/issue_comments_524401.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3\"><code>5e02153</code></a></td><td><code>trac 32505: remove from_free_module, from_free_module_morphism</code></td></tr></table>\n",
    "created_at": "2022-01-29T22:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3"><code>5e02153</code></a></td><td><code>trac 32505: remove from_free_module, from_free_module_morphism</code></td></tr></table>




---

archive/issue_comments_524402.json:
```json
{
    "body": "Changed commit from **[`5c242e7`](https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da)** to **[`5e02153`](https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3)**",
    "created_at": "2022-01-29T22:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524402",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5c242e7`](https://github.com/sagemath/sagetrac-mirror/commit/5c242e73c2685630cea27fda10d1b14632c179da)** to **[`5e02153`](https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3)**



---

archive/issue_comments_524403.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b\"><code>f253e83</code></a></td><td><code>trac 32505: allow the resolution to be made up of maps between</code></td></tr></table>\n",
    "created_at": "2022-01-30T01:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524403",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b"><code>f253e83</code></a></td><td><code>trac 32505: allow the resolution to be made up of maps between</code></td></tr></table>




---

archive/issue_comments_524404.json:
```json
{
    "body": "Changed commit from **[`5e02153`](https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3)** to **[`f253e83`](https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b)**",
    "created_at": "2022-01-30T01:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e02153`](https://github.com/sagemath/sagetrac-mirror/commit/5e021535eb5917c9b65036db7c018b66729063e3)** to **[`f253e83`](https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b)**



---

archive/issue_comments_524405.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a\"><code>11b3725</code></a></td><td><code>trac 32505: allow the resolution to be made up of maps between</code></td></tr></table>\n",
    "created_at": "2022-01-30T01:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524405",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a"><code>11b3725</code></a></td><td><code>trac 32505: allow the resolution to be made up of maps between</code></td></tr></table>




---

archive/issue_comments_524406.json:
```json
{
    "body": "Changed commit from **[`f253e83`](https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b)** to **[`11b3725`](https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a)**",
    "created_at": "2022-01-30T01:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524406",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f253e83`](https://github.com/sagemath/sagetrac-mirror/commit/f253e83ccaed4b920b62147878c65cb8a0c1e61b)** to **[`11b3725`](https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a)**



---

archive/issue_comments_524407.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nThis now allows for the possibility of the terms in the resolution being instances of `FreeGradedModuleMorphism` (except for the initial map, which has codomain the original module). I've also added a (slow) method which will compute the top dimension of a finite-dimensional algebra, for use in determining when to stop computing the resolution. I've also added a computation of a free resolution of a trivial module over an exterior algebra.",
    "created_at": "2022-01-30T01:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524407",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:71" align="right">comment:71</div>

This now allows for the possibility of the terms in the resolution being instances of `FreeGradedModuleMorphism` (except for the initial map, which has codomain the original module). I've also added a (slow) method which will compute the top dimension of a finite-dimensional algebra, for use in determining when to stop computing the resolution. I've also added a computation of a free resolution of a trivial module over an exterior algebra.



---

archive/issue_comments_524408.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nSo maybe the choice for `resolution` was because the initial map has codomain `M` which is likely not free. With the new `as_free=True` option, the later maps are all converted to type `FreeGradedModuleMorphism`, and you could just omit the 0th term to get an honest (graded) free resolution out of it.\n\nMaybe now we're done?",
    "created_at": "2022-01-30T02:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524408",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:72" align="right">comment:72</div>

So maybe the choice for `resolution` was because the initial map has codomain `M` which is likely not free. With the new `as_free=True` option, the later maps are all converted to type `FreeGradedModuleMorphism`, and you could just omit the 0th term to get an honest (graded) free resolution out of it.

Maybe now we're done?



---

archive/issue_comments_524409.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1\"><code>6c1ab8d</code></a></td><td><code>trac 32505: more fixes</code></td></tr></table>\n",
    "created_at": "2022-01-30T03:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524409",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1"><code>6c1ab8d</code></a></td><td><code>trac 32505: more fixes</code></td></tr></table>




---

archive/issue_comments_524410.json:
```json
{
    "body": "Changed commit from **[`11b3725`](https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a)** to **[`6c1ab8d`](https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1)**",
    "created_at": "2022-01-30T03:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524410",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11b3725`](https://github.com/sagemath/sagetrac-mirror/commit/11b37258a9c3fa8989f0e7c42bd839b643014a2a)** to **[`6c1ab8d`](https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1)**



---

archive/issue_comments_524411.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nFixed a few more things: the `free_graded_module` method for algebras with basis wasn't handling the `names` argument correctly, and a few doctests were failing. I changed some of the documentation, too.",
    "created_at": "2022-01-30T03:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524411",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:74" align="right">comment:74</div>

Fixed a few more things: the `free_graded_module` method for algebras with basis wasn't handling the `names` argument correctly, and a few doctests were failing. I changed some of the documentation, too.



---

archive/issue_comments_524412.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nI was just running into that problem in [comment:74](#comment:74) and about to fix it. Thanks. I will be pushing a bunch of changes shortly too.",
    "created_at": "2022-01-30T03:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524412",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:75" align="right">comment:75</div>

I was just running into that problem in [comment:74](#comment:74) and about to fix it. Thanks. I will be pushing a bunch of changes shortly too.



---

archive/issue_comments_524413.json:
```json
{
    "body": "Changed commit from **[`6c1ab8d`](https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1)** to **[`5074464`](https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d)**",
    "created_at": "2022-01-30T03:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524413",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c1ab8d`](https://github.com/sagemath/sagetrac-mirror/commit/6c1ab8dc9a5f2a932297bf5256dab88dbb5f27e1)** to **[`5074464`](https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d)**



---

archive/issue_comments_524414.json:
```json
{
    "body": "<div id=\"comment:76\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72e455ea30c98e5c5408bf8fa646ea28b430a2da\"><code>72e455e</code></a></td><td><code>We do not require the base algebra's base ring to be a field.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcce24d7af5efefe94048db407bde108da78dfee\"><code>fcce24d</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e0518f314df9371277710745ae5b8b8ffb07553\"><code>2e0518f</code></a></td><td><code>Using free modules where possible and improved compatibility.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cf6d146d5f19a35035d3c270cc2968ec6fcc8b4\"><code>6cf6d14</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d\"><code>5074464</code></a></td><td><code>Some last fixes and removing redundancy.</code></td></tr></table>\n",
    "created_at": "2022-01-30T03:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:76"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72e455ea30c98e5c5408bf8fa646ea28b430a2da"><code>72e455e</code></a></td><td><code>We do not require the base algebra's base ring to be a field.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcce24d7af5efefe94048db407bde108da78dfee"><code>fcce24d</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e0518f314df9371277710745ae5b8b8ffb07553"><code>2e0518f</code></a></td><td><code>Using free modules where possible and improved compatibility.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cf6d146d5f19a35035d3c270cc2968ec6fcc8b4"><code>6cf6d14</code></a></td><td><code>Merge branch 'public/modules/free_graded_modules-32505' of git://trac.sagemath.org/sage into public/modules/free_graded_modules-32505</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d"><code>5074464</code></a></td><td><code>Some last fixes and removing redundancy.</code></td></tr></table>




---

archive/issue_comments_524415.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nI took this a bit further and made everything in the resolution a `FreeGradedModule`. As I suspected, there were some compatibility issues to sort out, but I took care of all of the ones that came up in doctests (and a few others I saw along the way). There might be a few others (which will show up as missing methods), but we can fix them as we come across them.\n\nTowards this, I made the free module morphism/homspace a subclass of the respective non-free version. This required some slight workaround, but the code is much cleaner IMO because there are no duplicated methods and the subclassing makes mathematical sense.\n\nI tweaked the documentation to say \"free module\" basically everywhere we use \"vector space\" because we are not using the field properties AFAICS.\n\nAs of right now, I am happy with the code. Please check my changes. If they are good, then go ahead and set a positive review.",
    "created_at": "2022-01-30T03:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524415",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:77" align="right">comment:77</div>

I took this a bit further and made everything in the resolution a `FreeGradedModule`. As I suspected, there were some compatibility issues to sort out, but I took care of all of the ones that came up in doctests (and a few others I saw along the way). There might be a few others (which will show up as missing methods), but we can fix them as we come across them.

Towards this, I made the free module morphism/homspace a subclass of the respective non-free version. This required some slight workaround, but the code is much cleaner IMO because there are no duplicated methods and the subclassing makes mathematical sense.

I tweaked the documentation to say "free module" basically everywhere we use "vector space" because we are not using the field properties AFAICS.

As of right now, I am happy with the code. Please check my changes. If they are good, then go ahead and set a positive review.



---

archive/issue_comments_524416.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nI saw that you replaced `PlusInfinity()` with `infinity`, so I made the same change a few other places. I also removed a \"todo\" about dealing with finite dimensionality rather than just finiteness, handling it the same way we did elsewhere in the code. If someone gets motivated (on another ticket), they can try to handle the case where `self.base_ring().dimension()` is not defined.",
    "created_at": "2022-01-30T06:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524416",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:78" align="right">comment:78</div>

I saw that you replaced `PlusInfinity()` with `infinity`, so I made the same change a few other places. I also removed a "todo" about dealing with finite dimensionality rather than just finiteness, handling it the same way we did elsewhere in the code. If someone gets motivated (on another ticket), they can try to handle the case where `self.base_ring().dimension()` is not defined.



---

archive/issue_comments_524417.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46\"><code>ffe7179</code></a></td><td><code>trac 32505: replace \"PlusInfinity()\" with \"infinity\"</code></td></tr></table>\n",
    "created_at": "2022-01-30T06:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524417",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46"><code>ffe7179</code></a></td><td><code>trac 32505: replace "PlusInfinity()" with "infinity"</code></td></tr></table>




---

archive/issue_comments_524418.json:
```json
{
    "body": "Changed commit from **[`5074464`](https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d)** to **[`ffe7179`](https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46)**",
    "created_at": "2022-01-30T06:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524418",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5074464`](https://github.com/sagemath/sagetrac-mirror/commit/50744642c4c07b3987729988501d7347b5286b9d)** to **[`ffe7179`](https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46)**



---

archive/issue_comments_524419.json:
```json
{
    "body": "Changed author from **Bob Bruner, Michael Catanzaro, Sverre Lun\u00f8e-Nielsen, Koen van Woerden, John Palmieri** to **Bob Bruner, Michael Catanzaro, Sverre Lun\u00f8e-Nielsen, Koen van Woerden, John Palmieri, Travis Scrimshaw**",
    "created_at": "2022-01-30T06:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524419",
    "user": "https://github.com/jhpalmieri"
}
```

Changed author from **Bob Bruner, Michael Catanzaro, Sverre Lunøe-Nielsen, Koen van Woerden, John Palmieri** to **Bob Bruner, Michael Catanzaro, Sverre Lunøe-Nielsen, Koen van Woerden, John Palmieri, Travis Scrimshaw**



---

archive/issue_events_448152.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-30T06:14:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448152"
}
```



---

archive/issue_events_448153.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-30T06:14:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448153"
}
```



---

archive/issue_comments_524420.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@jhpalmieri](#comment:78):\n> I saw that you replaced `PlusInfinity()` with `infinity`, so I made the same change a few other places.\n\nIndeed, this is a micro-optimization since they are the same object, but `infinity` is already created (and nailed in memory).\n\n> I also removed a \"todo\" about dealing with finite dimensionality rather than just finiteness, handling it the same way we did elsewhere in the code.\n\nThank you. I had made that note for myself, but I forgot about it.\n\n> If someone gets motivated (on another ticket), they can try to handle the case where `self.base_ring().dimension()` is not defined.\n\nI concur.\n\nThank you.",
    "created_at": "2022-01-30T06:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524420",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@jhpalmieri](#comment:78):
> I saw that you replaced `PlusInfinity()` with `infinity`, so I made the same change a few other places.

Indeed, this is a micro-optimization since they are the same object, but `infinity` is already created (and nailed in memory).

> I also removed a "todo" about dealing with finite dimensionality rather than just finiteness, handling it the same way we did elsewhere in the code.

Thank you. I had made that note for myself, but I forgot about it.

> If someone gets motivated (on another ticket), they can try to handle the case where `self.base_ring().dimension()` is not defined.

I concur.

Thank you.



---

archive/issue_comments_524421.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\n> Good question. Comments from the original authors? Why not just use free modules in resolution? \n\nIn the original version, the free module class was not intended for public use.",
    "created_at": "2022-01-30T07:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524421",
    "user": "https://github.com/sverre320"
}
```

<div id="comment:82" align="right">comment:82</div>

> Good question. Comments from the original authors? Why not just use free modules in resolution? 

In the original version, the free module class was not intended for public use.



---

archive/issue_events_448154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-30T15:44:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448154"
}
```



---

archive/issue_events_448155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-30T15:44:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448155"
}
```



---

archive/issue_comments_524422.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\n\n```\n[sagemath_doc_html-none] [modules  ] The inventory files are in local/share/doc/sage/inventory/en/reference/modules.\n[sagemath_doc_html-none] Error building the documentation.\n[sagemath_doc_html-none] Traceback (most recent call last):\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n[sagemath_doc_html-none]     return _run_code(code, main_globals, None,\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/runpy.py\", line 87, in _run_code\n[sagemath_doc_html-none]     exec(code, run_globals)\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[sagemath_doc_html-none]     main()\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1731, in main\n[sagemath_doc_html-none]     builder()\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 776, in _wrapper\n[sagemath_doc_html-none]     getattr(DocBuilder, build_type)(self, *args, **kwds)\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 136, in f\n[sagemath_doc_html-none]     runsphinx()\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 323, in runsphinx\n[sagemath_doc_html-none]     sys.stderr.raise_errors()\n[sagemath_doc_html-none]   File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 258, in raise_errors\n[sagemath_doc_html-none]     raise OSError(self._error)\n[sagemath_doc_html-none] OSError: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/modules/fp_graded/free_homspace.py:docstring of sage.modules.fp_graded.free_homspace.FreeGradedModuleHomspace.identity:4: WARNING: Literal block expected; none found.\n[sagemath_doc_html-none] \n[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious\n[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run\n[sagemath_doc_html-none]     \"make doc-clean doc-uninstall\" first and try again.\n```",
    "created_at": "2022-01-30T15:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524422",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:83" align="right">comment:83</div>


```
[sagemath_doc_html-none] [modules  ] The inventory files are in local/share/doc/sage/inventory/en/reference/modules.
[sagemath_doc_html-none] Error building the documentation.
[sagemath_doc_html-none] Traceback (most recent call last):
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/runpy.py", line 197, in _run_module_as_main
[sagemath_doc_html-none]     return _run_code(code, main_globals, None,
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/runpy.py", line 87, in _run_code
[sagemath_doc_html-none]     exec(code, run_globals)
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[sagemath_doc_html-none]     main()
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1731, in main
[sagemath_doc_html-none]     builder()
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 776, in _wrapper
[sagemath_doc_html-none]     getattr(DocBuilder, build_type)(self, *args, **kwds)
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 136, in f
[sagemath_doc_html-none]     runsphinx()
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 323, in runsphinx
[sagemath_doc_html-none]     sys.stderr.raise_errors()
[sagemath_doc_html-none]   File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 258, in raise_errors
[sagemath_doc_html-none]     raise OSError(self._error)
[sagemath_doc_html-none] OSError: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/modules/fp_graded/free_homspace.py:docstring of sage.modules.fp_graded.free_homspace.FreeGradedModuleHomspace.identity:4: WARNING: Literal block expected; none found.
[sagemath_doc_html-none] 
[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious
[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run
[sagemath_doc_html-none]     "make doc-clean doc-uninstall" first and try again.
```



---

archive/issue_comments_524423.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nTravis, was your intention to delete the `identity` method from `free_homspace`? Perhaps also remove `zero`?",
    "created_at": "2022-01-30T17:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524423",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:84" align="right">comment:84</div>

Travis, was your intention to delete the `identity` method from `free_homspace`? Perhaps also remove `zero`?



---

archive/issue_comments_524424.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@jhpalmieri](#comment:84):\n> Travis, was your intention to delete the `identity` method from `free_homspace`? Perhaps also remove `zero`?\n\nYes it was. They are now inherited as they had (effectively) the same code as the not-necessarily-free homspace.",
    "created_at": "2022-01-31T00:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524424",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@jhpalmieri](#comment:84):
> Travis, was your intention to delete the `identity` method from `free_homspace`? Perhaps also remove `zero`?

Yes it was. They are now inherited as they had (effectively) the same code as the not-necessarily-free homspace.



---

archive/issue_comments_524425.json:
```json
{
    "body": "Changed commit from **[`ffe7179`](https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46)** to **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**",
    "created_at": "2022-01-31T01:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524425",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ffe7179`](https://github.com/sagemath/sagetrac-mirror/commit/ffe7179490704efe9157a6796cdbf2ae68f27c46)** to **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**



---

archive/issue_comments_524426.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960\"><code>a1a9467</code></a></td><td><code>trac 32505: remove redundant \"zero\" and \"identity\" methods</code></td></tr></table>\n",
    "created_at": "2022-01-31T01:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960"><code>a1a9467</code></a></td><td><code>trac 32505: remove redundant "zero" and "identity" methods</code></td></tr></table>




---

archive/issue_events_448156.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-31T01:12:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448156"
}
```



---

archive/issue_events_448157.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-31T01:12:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448157"
}
```



---

archive/issue_comments_524427.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nThank you.",
    "created_at": "2022-01-31T01:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524427",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:88" align="right">comment:88</div>

Thank you.



---

archive/issue_comments_524428.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nFollowup in #33275.",
    "created_at": "2022-02-02T17:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524428",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:89" align="right">comment:89</div>

Followup in #33275.



---

archive/issue_events_448158.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:07:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448158"
}
```



---

archive/issue_events_448159.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9c6afb97c83857d61801b4f043d197196df7d3d1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-12T22:07:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32505#event-448159"
}
```



---

archive/issue_comments_524429.json:
```json
{
    "body": "Changed branch from **[public/modules/free_graded_modules-32505](https://github.com/sagemath/sagetrac-mirror/tree/public/modules/free_graded_modules-32505)** to **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**",
    "created_at": "2022-02-12T22:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32505#issuecomment-524429",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/modules/free_graded_modules-32505](https://github.com/sagemath/sagetrac-mirror/tree/public/modules/free_graded_modules-32505)** to **[`a1a9467`](https://github.com/sagemath/sagetrac-mirror/commit/a1a9467e95cd05a6439b4b2765e62c6aad6dc960)**
