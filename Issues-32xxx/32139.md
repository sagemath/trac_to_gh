# Issue 32139: Ineffective deprecation warnings

archive/issues_031902.json:
```json
{
    "body": "As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n\nThis happens through an interaction of several flaws.\n- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n- counting the `stacklevel` may depend on whether Cython functions are involved\n\nThis ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n\n```\nsage: var('y')\ny\nsage: (x+y)(1, 2)\n<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\nSee http://trac.sagemath.org/5930 for details.\n  (x+y)(Integer(1), Integer(2))\n3\n```\n\nIn addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` for `module` patterns -- they are only needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name \"_vendor\" | xargs ls`\n\n\n\n\n\n\nCC:  @fchapoton @tscrim @jhpalmieri @vbraun\n\nBranch/Commit: 69a81ca8214b708b2e937675c933c4d00ad83fc0\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32139\n\n",
    "closed_at": "2021-07-18T22:53:49Z",
    "created_at": "2021-07-05T21:35:56Z",
    "labels": [
        "component: refactoring",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Ineffective deprecation warnings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32139",
    "user": "https://github.com/mkoeppe"
}
```
As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.

This happens through an interaction of several flaws.
- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
- counting the `stacklevel` may depend on whether Cython functions are involved

This ticket fixes these two issues. As a result, the following deprecation warning is again issued:

```
sage: var('y')
y
sage: (x+y)(1, 2)
<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
See http://trac.sagemath.org/5930 for details.
  (x+y)(Integer(1), Integer(2))
3
```

In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` for `module` patterns -- they are only needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name "_vendor" | xargs ls`






CC:  @fchapoton @tscrim @jhpalmieri @vbraun

Branch/Commit: 69a81ca8214b708b2e937675c933c4d00ad83fc0

Reviewer: John Palmieri

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32139





---

archive/issue_comments_639767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,12 @@\n-As observed in #14270 with 9.4.beta4, some of our = deprecation warnings are currently not issued.\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n \n This happens through an interaction of several flaws.\n - #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n - counting the `stacklevel` may depend on whether Cython functions are involved\n \n-In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'`\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` \n+\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-07-05T21:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639767",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,12 @@
-As observed in #14270 with 9.4.beta4, some of our = deprecation warnings are currently not issued.
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
 
 This happens through an interaction of several flaws.
 - #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
 - counting the `stacklevel` may depend on whether Cython functions are involved
 
-In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'`
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` 
+
+
 
 Comment: 1
 
``````




---

archive/issue_comments_639768.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/ineffective_deprecation_warnings\"",
    "created_at": "2021-07-05T22:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639768",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/ineffective_deprecation_warnings"



---

archive/issue_comments_639769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,23 @@\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n+\n+This happens through an interaction of several flaws.\n+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n+- counting the `stacklevel` may depend on whether Cython functions are involved\n+\n+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n+\n+```\n+sage: var('y')\n+y\n+sage: (x+y)(1, 2)\n+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n+See http://trac.sagemath.org/5930 for details.\n+  (x+y)(Integer(1), Integer(2))\n+3\n+```\n+\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` \n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-05T22:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639769",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,23 @@
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
+
+This happens through an interaction of several flaws.
+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
+- counting the `stacklevel` may depend on whether Cython functions are involved
+
+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:
+
+```
+sage: var('y')
+y
+sage: (x+y)(1, 2)
+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
+See http://trac.sagemath.org/5930 for details.
+  (x+y)(Integer(1), Integer(2))
+3
+```
+
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` 
+
 
 
 Comment: 1
``````




---

archive/issue_comments_639770.json:
```json
{
    "body": "Changing commit from \"\" to \"419133748bb6a4ab38612b27b2b820d1f3e3b766\"",
    "created_at": "2021-07-05T22:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639770",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "419133748bb6a4ab38612b27b2b820d1f3e3b766"



---

archive/issue_comments_639771.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2021-07-05T22:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_639772.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T22:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639773.json:
```json
{
    "body": "Changing commit from \"419133748bb6a4ab38612b27b2b820d1f3e3b766\" to \"6492b8c2fdb941c009127d83bb83fc35f2fbeed1\"",
    "created_at": "2021-07-05T22:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "419133748bb6a4ab38612b27b2b820d1f3e3b766" to "6492b8c2fdb941c009127d83bb83fc35f2fbeed1"



---

archive/issue_comments_639774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,24 @@\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n+\n+This happens through an interaction of several flaws.\n+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n+- counting the `stacklevel` may depend on whether Cython functions are involved\n+\n+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n+\n+```\n+sage: var('y')\n+y\n+sage: (x+y)(1, 2)\n+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n+See http://trac.sagemath.org/5930 for details.\n+  (x+y)(Integer(1), Integer(2))\n+3\n+```\n+\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184)\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-05T22:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639774",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,24 @@
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
+
+This happens through an interaction of several flaws.
+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
+- counting the `stacklevel` may depend on whether Cython functions are involved
+
+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:
+
+```
+sage: var('y')
+y
+sage: (x+y)(1, 2)
+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
+See http://trac.sagemath.org/5930 for details.
+  (x+y)(Integer(1), Integer(2))
+3
+```
+
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184)
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_639775.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,26 @@\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n+\n+This happens through an interaction of several flaws.\n+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n+- counting the `stacklevel` may depend on whether Cython functions are involved\n+\n+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n+\n+```\n+sage: var('y')\n+y\n+sage: (x+y)(1, 2)\n+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n+See http://trac.sagemath.org/5930 for details.\n+  (x+y)(Integer(1), Integer(2))\n+3\n+```\n+\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` -- they are only be needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name \"_vendor\" | xargs ls`\n+\n+\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-05T22:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639775",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,26 @@
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
+
+This happens through an interaction of several flaws.
+- #26132 broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
+- counting the `stacklevel` may depend on whether Cython functions are involved
+
+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:
+
+```
+sage: var('y')
+y
+sage: (x+y)(1, 2)
+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
+See http://trac.sagemath.org/5930 for details.
+  (x+y)(Integer(1), Integer(2))
+3
+```
+
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` -- they are only be needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name "_vendor" | xargs ls`
+
+
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_639776.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,26 @@\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n+\n+This happens through an interaction of several flaws.\n+- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n+- counting the `stacklevel` may depend on whether Cython functions are involved\n+\n+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n+\n+```\n+sage: var('y')\n+y\n+sage: (x+y)(1, 2)\n+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n+See http://trac.sagemath.org/5930 for details.\n+  (x+y)(Integer(1), Integer(2))\n+3\n+```\n+\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` -- they are only be needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name \"_vendor\" | xargs ls`\n+\n+\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-05T22:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639776",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,26 @@
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
+
+This happens through an interaction of several flaws.
+- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
+- counting the `stacklevel` may depend on whether Cython functions are involved
+
+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:
+
+```
+sage: var('y')
+y
+sage: (x+y)(1, 2)
+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
+See http://trac.sagemath.org/5930 for details.
+  (x+y)(Integer(1), Integer(2))
+3
+```
+
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` -- they are only be needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name "_vendor" | xargs ls`
+
+
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_639777.json:
```json
{
    "body": "Changing commit from \"6492b8c2fdb941c009127d83bb83fc35f2fbeed1\" to \"04fdda6254d7e543235c863c271bb63faafb7d02\"",
    "created_at": "2021-07-05T22:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6492b8c2fdb941c009127d83bb83fc35f2fbeed1" to "04fdda6254d7e543235c863c271bb63faafb7d02"



---

archive/issue_comments_639778.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T22:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639779.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-05T22:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639779",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_639780.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-07-05T22:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639780",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_639781.json:
```json
{
    "body": "<a id='comment:10'></a>It's not as though we're vigilant about removing old deprecated code, but do we need to somehow add a grace period for code connected to the reappearing deprecation warnings? If someone decides in the near future to remove the code deprecated in #5930, is that okay?",
    "created_at": "2021-07-05T22:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639781",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>It's not as though we're vigilant about removing old deprecated code, but do we need to somehow add a grace period for code connected to the reappearing deprecation warnings? If someone decides in the near future to remove the code deprecated in #5930, is that okay?



---

archive/issue_comments_639782.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 jhpalmieri]:\n> If someone decides in the near future to remove the code deprecated in #5930\n\n\nI just did in the revived #14270.",
    "created_at": "2021-07-06T01:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639782",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Replying to [comment:10 jhpalmieri]:
> If someone decides in the near future to remove the code deprecated in #5930


I just did in the revived #14270.



---

archive/issue_comments_639783.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 jhpalmieri]:\n> grace period for code connected to the reappearing deprecation warnings? \n\n\nI think, but have not tested, that the deprecation warning was only suppressed if this call is done directly on the top level; as soon as 1 level of Python function is wrapped around it, the deprecation warning would still show. If I'm right about this, the change in #14270 can certainly break people's interactive sessions in notebooks but not \"code\".",
    "created_at": "2021-07-06T01:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639783",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:10 jhpalmieri]:
> grace period for code connected to the reappearing deprecation warnings? 


I think, but have not tested, that the deprecation warning was only suppressed if this call is done directly on the top level; as soon as 1 level of Python function is wrapped around it, the deprecation warning would still show. If I'm right about this, the change in #14270 can certainly break people's interactive sessions in notebooks but not "code".



---

archive/issue_comments_639784.json:
```json
{
    "body": "<a id='comment:13'></a>I get lots of doctest failures:\n\n```\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sagedoc.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sageinspect.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/doc/en/thematic_tutorials/sandpile.rst  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/sandpiles/sandpile.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/cachefunc.pyx  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/parallel/decorate.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/tests/lazy_imports.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/sets/set_from_iterator.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/doc/en/developer/coding_basics.rst  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/repl/ipython_tests.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sphinxify.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/repl/interface_magic.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/utils.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/bindable_class.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/structure/dynamic_class.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/interfaces/tachyon.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/structure/mutability.pyx  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/sphinxbuild.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/__init__.py  # 1 doctest failed\nsage -t --long --warn-long 119.7 --random-seed=0 src/sage/databases/findstat.py  # 1 doctest failed\n```\nThe typical failure is because of this:\n\n```\n    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n```\nFull details for one file:\n\n```\nFile \"src/sage/misc/cachefunc.pyx\", line 250, in sage.misc.cachefunc\nFailed example:\n    print(sage_getdoc(test_pfunc))\nExpected:\n       Some documentation\nGot:\n    doctest:warning\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/src/bin/sage-runtests\", line 144, in <module>\n        err = DC.run()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n        self.run_doctests()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n        self.parallel_dispatch()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2211, in start\n        super(DocTestWorker, self).start()\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py\", line 121, in start\n        self._popen = self._Popen(self)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py\", line 224, in _Popen\n        return _default_context.get_context().Process._Popen(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py\", line 277, in _Popen\n        return Popen(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n        self._launch(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n        code = process_obj._bootstrap(parent_sentinel=child_r)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n        self.run()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2183, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2512, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2559, in _run\n        result = runner.run(test)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 910, in run\n        return self._run(test, compileflags, out)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.cachefunc[50]>\", line 1, in <module>\n        print(sage_getdoc(test_pfunc))\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sageinspect.py\", line 2033, in sage_getdoc\n        s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py\", line 746, in format\n        s = detex(s, embedded=embedded)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py\", line 244, in detex\n        s = sphinxify(s, format='text')\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sphinxify.py\", line 121, in sphinxify\n        sphinx_app = Sphinx(srcdir, confdir, outdir, doctreedir, format,\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/application.py\", line 217, in __init__\n        self.config = Config.read(self.confdir, confoverrides or {}, self.tags)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py\", line 168, in read\n        namespace = eval_config_file(filename, tags)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py\", line 323, in eval_config_file\n        exec(code, namespace)\n      File \"/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/tmppgjltzvc/en/introspect/conf.py\", line 2, in <module>\n        from sage.docs.conf import *\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/docs/conf.py\", line 12, in <module>\n        import sphinx.ext.intersphinx as intersphinx\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/ext/intersphinx.py\", line 46, in <module>\n        from sphinx.util import logging, requests\n      File \"<frozen importlib._bootstrap>\", line 1058, in _handle_fromlist\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/util/requests.py\", line 17, in <module>\n        import requests\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/__init__.py\", line 52, in <module>\n        from .packages.urllib3.contrib import pyopenssl\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 972, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 972, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/__init__.py\", line 27, in <module>\n        from . import urllib3\n      File \"<frozen importlib._bootstrap>\", line 1058, in _handle_fromlist\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/__init__.py\", line 8, in <module>\n        from .connectionpool import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connectionpool.py\", line 29, in <module>\n        from .connection import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connection.py\", line 39, in <module>\n        from .util.ssl_ import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 972, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/__init__.py\", line 3, in <module>\n        from .connection import is_connection_dropped\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/connection.py\", line 3, in <module>\n        from .wait import wait_for_read\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/wait.py\", line 1, in <module>\n        from .selectors import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/selectors.py\", line 11, in <module>\n        from collections import namedtuple, Mapping\n      File \"<frozen importlib._bootstrap>\", line 1055, in _handle_fromlist\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/collections/__init__.py\", line 62, in __getattr__\n        warnings.warn(\"Using or importing the ABCs from 'collections' instead \"\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n    doctest:warning\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/src/bin/sage-runtests\", line 144, in <module>\n        err = DC.run()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n        self.run_doctests()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n        self.parallel_dispatch()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2211, in start\n        super(DocTestWorker, self).start()\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py\", line 121, in start\n        self._popen = self._Popen(self)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py\", line 224, in _Popen\n        return _default_context.get_context().Process._Popen(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py\", line 277, in _Popen\n        return Popen(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n        self._launch(process_obj)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n        code = process_obj._bootstrap(parent_sentinel=child_r)\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n        self.run()\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2183, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2512, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2559, in _run\n        result = runner.run(test)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 910, in run\n        return self._run(test, compileflags, out)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.cachefunc[50]>\", line 1, in <module>\n        print(sage_getdoc(test_pfunc))\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sageinspect.py\", line 2033, in sage_getdoc\n        s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py\", line 746, in format\n        s = detex(s, embedded=embedded)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py\", line 244, in detex\n        s = sphinxify(s, format='text')\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sphinxify.py\", line 121, in sphinxify\n        sphinx_app = Sphinx(srcdir, confdir, outdir, doctreedir, format,\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/application.py\", line 217, in __init__\n        self.config = Config.read(self.confdir, confoverrides or {}, self.tags)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py\", line 168, in read\n        namespace = eval_config_file(filename, tags)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py\", line 323, in eval_config_file\n        exec(code, namespace)\n      File \"/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/tmppgjltzvc/en/introspect/conf.py\", line 2, in <module>\n        from sage.docs.conf import *\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/docs/conf.py\", line 12, in <module>\n        import sphinx.ext.intersphinx as intersphinx\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/ext/intersphinx.py\", line 46, in <module>\n        from sphinx.util import logging, requests\n      File \"<frozen importlib._bootstrap>\", line 1058, in _handle_fromlist\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/util/requests.py\", line 17, in <module>\n        import requests\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/__init__.py\", line 52, in <module>\n        from .packages.urllib3.contrib import pyopenssl\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 972, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 972, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/__init__.py\", line 27, in <module>\n        from . import urllib3\n      File \"<frozen importlib._bootstrap>\", line 1058, in _handle_fromlist\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/__init__.py\", line 8, in <module>\n        from .connectionpool import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connectionpool.py\", line 29, in <module>\n        from .connection import (\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connection.py\", line 50, in <module>\n        from ._collections import HTTPHeaderDict\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/_collections.py\", line 2, in <module>\n        from collections import Mapping, MutableMapping\n      File \"<frozen importlib._bootstrap>\", line 1055, in _handle_fromlist\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/collections/__init__.py\", line 62, in __getattr__\n        warnings.warn(\"Using or importing the ABCs from 'collections' instead \"\n      File \"/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n       Some documentation\n    <BLANKLINE>\n```\nI'm using OS X, and obviously this is with homebrew's Python.",
    "created_at": "2021-07-06T20:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639784",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>I get lots of doctest failures:

```
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sagedoc.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sageinspect.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/doc/en/thematic_tutorials/sandpile.rst  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/sandpiles/sandpile.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/cachefunc.pyx  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/parallel/decorate.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/tests/lazy_imports.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/sets/set_from_iterator.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/doc/en/developer/coding_basics.rst  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/repl/ipython_tests.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/sphinxify.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/repl/interface_magic.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/utils.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/misc/bindable_class.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/structure/dynamic_class.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/interfaces/tachyon.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/structure/mutability.pyx  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/sphinxbuild.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage_docbuild/__init__.py  # 1 doctest failed
sage -t --long --warn-long 119.7 --random-seed=0 src/sage/databases/findstat.py  # 1 doctest failed
```
The typical failure is because of this:

```
    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working
```
Full details for one file:

```
File "src/sage/misc/cachefunc.pyx", line 250, in sage.misc.cachefunc
Failed example:
    print(sage_getdoc(test_pfunc))
Expected:
       Some documentation
Got:
    doctest:warning
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/src/bin/sage-runtests", line 144, in <module>
        err = DC.run()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
        self.run_doctests()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
        self.dispatcher.dispatch()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2044, in dispatch
        self.parallel_dispatch()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
        w.start()  # This might take some time
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2211, in start
        super(DocTestWorker, self).start()
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py", line 121, in start
        self._popen = self._Popen(self)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py", line 224, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
        self._launch(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
        code = process_obj._bootstrap(parent_sentinel=child_r)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
        self.run()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2183, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2512, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2559, in _run
        result = runner.run(test)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 910, in run
        return self._run(test, compileflags, out)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.cachefunc[50]>", line 1, in <module>
        print(sage_getdoc(test_pfunc))
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sageinspect.py", line 2033, in sage_getdoc
        s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py", line 746, in format
        s = detex(s, embedded=embedded)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py", line 244, in detex
        s = sphinxify(s, format='text')
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sphinxify.py", line 121, in sphinxify
        sphinx_app = Sphinx(srcdir, confdir, outdir, doctreedir, format,
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/application.py", line 217, in __init__
        self.config = Config.read(self.confdir, confoverrides or {}, self.tags)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py", line 168, in read
        namespace = eval_config_file(filename, tags)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py", line 323, in eval_config_file
        exec(code, namespace)
      File "/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/tmppgjltzvc/en/introspect/conf.py", line 2, in <module>
        from sage.docs.conf import *
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/docs/conf.py", line 12, in <module>
        import sphinx.ext.intersphinx as intersphinx
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/ext/intersphinx.py", line 46, in <module>
        from sphinx.util import logging, requests
      File "<frozen importlib._bootstrap>", line 1058, in _handle_fromlist
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/util/requests.py", line 17, in <module>
        import requests
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/__init__.py", line 52, in <module>
        from .packages.urllib3.contrib import pyopenssl
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 972, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 972, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/__init__.py", line 27, in <module>
        from . import urllib3
      File "<frozen importlib._bootstrap>", line 1058, in _handle_fromlist
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/__init__.py", line 8, in <module>
        from .connectionpool import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connectionpool.py", line 29, in <module>
        from .connection import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connection.py", line 39, in <module>
        from .util.ssl_ import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 972, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/__init__.py", line 3, in <module>
        from .connection import is_connection_dropped
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/connection.py", line 3, in <module>
        from .wait import wait_for_read
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/wait.py", line 1, in <module>
        from .selectors import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/util/selectors.py", line 11, in <module>
        from collections import namedtuple, Mapping
      File "<frozen importlib._bootstrap>", line 1055, in _handle_fromlist
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/collections/__init__.py", line 62, in __getattr__
        warnings.warn("Using or importing the ABCs from 'collections' instead "
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working
    doctest:warning
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/src/bin/sage-runtests", line 144, in <module>
        err = DC.run()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
        self.run_doctests()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
        self.dispatcher.dispatch()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2044, in dispatch
        self.parallel_dispatch()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
        w.start()  # This might take some time
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2211, in start
        super(DocTestWorker, self).start()
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py", line 121, in start
        self._popen = self._Popen(self)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py", line 224, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
        self._launch(process_obj)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
        code = process_obj._bootstrap(parent_sentinel=child_r)
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
        self.run()
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2183, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2512, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2559, in _run
        result = runner.run(test)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 910, in run
        return self._run(test, compileflags, out)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.cachefunc[50]>", line 1, in <module>
        print(sage_getdoc(test_pfunc))
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sageinspect.py", line 2033, in sage_getdoc
        s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py", line 746, in format
        s = detex(s, embedded=embedded)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sagedoc.py", line 244, in detex
        s = sphinxify(s, format='text')
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/misc/sphinxify.py", line 121, in sphinxify
        sphinx_app = Sphinx(srcdir, confdir, outdir, doctreedir, format,
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/application.py", line 217, in __init__
        self.config = Config.read(self.confdir, confoverrides or {}, self.tags)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py", line 168, in read
        namespace = eval_config_file(filename, tags)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/config.py", line 323, in eval_config_file
        exec(code, namespace)
      File "/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/tmppgjltzvc/en/introspect/conf.py", line 2, in <module>
        from sage.docs.conf import *
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sage/docs/conf.py", line 12, in <module>
        import sphinx.ext.intersphinx as intersphinx
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/ext/intersphinx.py", line 46, in <module>
        from sphinx.util import logging, requests
      File "<frozen importlib._bootstrap>", line 1058, in _handle_fromlist
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/sphinx/util/requests.py", line 17, in <module>
        import requests
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/__init__.py", line 52, in <module>
        from .packages.urllib3.contrib import pyopenssl
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 972, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 972, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/__init__.py", line 27, in <module>
        from . import urllib3
      File "<frozen importlib._bootstrap>", line 1058, in _handle_fromlist
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/__init__.py", line 8, in <module>
        from .connectionpool import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connectionpool.py", line 29, in <module>
        from .connection import (
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/connection.py", line 50, in <module>
        from ._collections import HTTPHeaderDict
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.4.beta4/local/lib/python3.9/site-packages/requests/packages/urllib3/_collections.py", line 2, in <module>
        from collections import Mapping, MutableMapping
      File "<frozen importlib._bootstrap>", line 1055, in _handle_fromlist
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/collections/__init__.py", line 62, in __getattr__
        warnings.warn("Using or importing the ABCs from 'collections' instead "
      File "/usr/local/Cellar/python@3.9/3.9.5/Frameworks/Python.framework/Versions/3.9/lib/python3.9/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working
       Some documentation
    <BLANKLINE>
```
I'm using OS X, and obviously this is with homebrew's Python.



---

archive/issue_comments_639785.json:
```json
{
    "body": "<a id='comment:14'></a>OK, I messed up the `collections.abc` filter, mistaking a `message` condition for a `module` condition",
    "created_at": "2021-07-06T21:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639785",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>OK, I messed up the `collections.abc` filter, mistaking a `message` condition for a `module` condition



---

archive/issue_comments_639786.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T21:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_639787.json:
```json
{
    "body": "Changing commit from \"04fdda6254d7e543235c863c271bb63faafb7d02\" to \"69a81ca8214b708b2e937675c933c4d00ad83fc0\"",
    "created_at": "2021-07-06T21:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "04fdda6254d7e543235c863c271bb63faafb7d02" to "69a81ca8214b708b2e937675c933c4d00ad83fc0"



---

archive/issue_comments_639788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,26 @@\n+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.\n+\n+This happens through an interaction of several flaws.\n+- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make \"sure to keep OUR deprecation warnings\"\n+- counting the `stacklevel` may depend on whether Cython functions are involved\n+\n+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:\n+\n+```\n+sage: var('y')\n+y\n+sage: (x+y)(1, 2)\n+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n+See http://trac.sagemath.org/5930 for details.\n+  (x+y)(Integer(1), Integer(2))\n+3\n+```\n+\n+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` for `module` patterns -- they are only needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name \"_vendor\" | xargs ls`\n+\n+\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-06T21:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639788",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,26 @@
+As observed in #14270 with 9.4.beta4, some of our deprecation warnings are currently not issued.
+
+This happens through an interaction of several flaws.
+- #26132 (merged in Sage 8.4) broke the `filterwarnings` regex in `sage.all` that is supposed to make "sure to keep OUR deprecation warnings"
+- counting the `stacklevel` may depend on whether Cython functions are involved
+
+This ticket fixes these two issues. As a result, the following deprecation warning is again issued:
+
+```
+sage: var('y')
+y
+sage: (x+y)(1, 2)
+<ipython-input-2-63751830fa4e>:1: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
+See http://trac.sagemath.org/5930 for details.
+  (x+y)(Integer(1), Integer(2))
+3
+```
+
+In addition, some of the regexes in `filterwarnings` in `sage.all` are too broad, such as matching on `module='.*ast'` (added in #30184). We remove all leading `.*` for `module` patterns -- they are only needed when some deprecation warnings are introduced by vendored versions of some modules -- for example, `pip` vendors `packaging` as `pip._vendor.packaging`. This can be checked by `find local/lib/python*/ -name "_vendor" | xargs ls`
+
+
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_639789.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2021-07-06T23:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639789",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_639790.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-06T23:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639790",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_639791.json:
```json
{
    "body": "<a id='comment:17'></a>Looks good to me, tests pass, and evaluating `(x+y)(1, 2)` now prints a deprecation warning, both from the command line and the Jupyter notebook.",
    "created_at": "2021-07-06T23:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639791",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>Looks good to me, tests pass, and evaluating `(x+y)(1, 2)` now prints a deprecation warning, both from the command line and the Jupyter notebook.



---

archive/issue_comments_639792.json:
```json
{
    "body": "<a id='comment:18'></a>Thank you!",
    "created_at": "2021-07-07T00:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639792",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Thank you!



---

archive/issue_comments_639793.json:
```json
{
    "body": "<a id='comment:19'></a>Failing patchbot report is from an old commit\n\n```\n/data/pell/lipnik/patchbot/local/lib/python3.9/site-packages/requests/packages/urllib3/util/selectors.py:11: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n  from collections import namedtuple, Mapping\n```",
    "created_at": "2021-07-17T21:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639793",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Failing patchbot report is from an old commit

```
/data/pell/lipnik/patchbot/local/lib/python3.9/site-packages/requests/packages/urllib3/util/selectors.py:11: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working
  from collections import namedtuple, Mapping
```



---

archive/issue_comments_639794.json:
```json
{
    "body": "Replying to [ticket:32139 mkoeppe]:\n> - counting the `stacklevel` may depend on whether Cython functions are involved\n\n\nAll the other deprecation warnings from Cython code are affected by this problem as well: #28500.",
    "created_at": "2021-07-18T14:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639794",
    "user": "https://github.com/mwageringel"
}
```

Replying to [ticket:32139 mkoeppe]:
> - counting the `stacklevel` may depend on whether Cython functions are involved


All the other deprecation warnings from Cython code are affected by this problem as well: #28500.



---

archive/issue_events_085089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-18T22:53:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32139#event-85089"
}
```



---

archive/issue_comments_639795.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-18T22:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639795",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_639796.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/ineffective_deprecation_warnings\" to \"69a81ca8214b708b2e937675c933c4d00ad83fc0\"",
    "created_at": "2021-07-18T22:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32139#issuecomment-639796",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/ineffective_deprecation_warnings" to "69a81ca8214b708b2e937675c933c4d00ad83fc0"
