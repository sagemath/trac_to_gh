# Issue 32777: Allow some imports of RLF to fail

archive/issues_032540.json:
```json
{
    "body": "The `RealLazyField` implementation is tied closely to `real_mpfr`.\n\nWe modify some imports for the purpose of modularization, in particular **sagemath-polyhedra** (#32432)\n\nIn particular for `... is RLF` tests:\n\n```\n$ git grep 'is RLF'\nsrc/sage/rings/complex_double.pyx:        if S is ZZ or S is QQ or S is RDF or S is RLF:\nsrc/sage/rings/number_field/number_field_base.pyx:        if codomain is AA or codomain is RLF:\nsrc/sage/rings/real_double.pyx:        if S is ZZ or S is QQ or S is RLF:\nsrc/sage/schemes/plane_conics/con_number_field.py:                if not (isinstance(p, Map) and p.category_for().is_subcategory(Rings())) or p.codomain() is AA or p.codomain() is RLF:\n```\n\n\nCC:  @kliem @tscrim tmonteil\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nBranch: b49bbdfea55128e1ea5c4a38e4c02c8849e366c9\n\nDependencies: #32742, #32750, #32733\n\nCommit: b49bbdfea55128e1ea5c4a38e4c02c8849e366c9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32777\n\n",
    "closed_at": "2021-12-05T11:15:32Z",
    "created_at": "2021-10-26T19:37:50Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Allow some imports of RLF to fail",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32777",
    "user": "https://github.com/mkoeppe"
}
```
The `RealLazyField` implementation is tied closely to `real_mpfr`.

We modify some imports for the purpose of modularization, in particular **sagemath-polyhedra** (#32432)

In particular for `... is RLF` tests:

```
$ git grep 'is RLF'
src/sage/rings/complex_double.pyx:        if S is ZZ or S is QQ or S is RDF or S is RLF:
src/sage/rings/number_field/number_field_base.pyx:        if codomain is AA or codomain is RLF:
src/sage/rings/real_double.pyx:        if S is ZZ or S is QQ or S is RLF:
src/sage/schemes/plane_conics/con_number_field.py:                if not (isinstance(p, Map) and p.category_for().is_subcategory(Rings())) or p.codomain() is AA or p.codomain() is RLF:
```


CC:  @kliem @tscrim tmonteil

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Branch: b49bbdfea55128e1ea5c4a38e4c02c8849e366c9

Dependencies: #32742, #32750, #32733

Commit: b49bbdfea55128e1ea5c4a38e4c02c8849e366c9

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32777





---

archive/issue_comments_463638.json:
```json
{
    "body": "<a id='comment:3'></a>Last 10 new commits:",
    "created_at": "2021-10-26T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463638",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Last 10 new commits:



---

archive/issue_comments_463639.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-26T22:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463639",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_463640.json:
```json
{
    "body": "<a id='comment:5'></a>This failure is not from this ticket:\n\n```\nsage -t --long --random-seed=321172385432269463934777057410284981568 src/sage/rings/integer.pyx  # 1 doctest failed\n```\n\nThis failure is likely from random seed fuzzing, not this ticket:\n\n```\nsage -t --long --random-seed=321172385432269463934777057410284981568 src/sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 1 doctest failed\n```\nreported in #32544.",
    "created_at": "2021-10-28T05:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463640",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>This failure is not from this ticket:

```
sage -t --long --random-seed=321172385432269463934777057410284981568 src/sage/rings/integer.pyx  # 1 doctest failed
```

This failure is likely from random seed fuzzing, not this ticket:

```
sage -t --long --random-seed=321172385432269463934777057410284981568 src/sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 1 doctest failed
```
reported in #32544.



---

archive/issue_comments_463641.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T00:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463642.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T05:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463643.json:
```json
{
    "body": "<a id='comment:9'></a>One green bot; one bot that's not feeling well",
    "created_at": "2021-11-04T21:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463643",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>One green bot; one bot that's not feeling well



---

archive/issue_comments_463644.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 mkoeppe]:\n> One green bot; one bot that's not feeling well\n\n\nI stopped all my patchbots.",
    "created_at": "2021-11-04T21:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463644",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:10'></a>Replying to [comment:9 mkoeppe]:
> One green bot; one bot that's not feeling well


I stopped all my patchbots.



---

archive/issue_comments_463645.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-06T01:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463645",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463646.json:
```json
{
    "body": "<a id='comment:12'></a>Thank you!",
    "created_at": "2021-11-06T17:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463646",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Thank you!



---

archive/issue_comments_463647.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-11-07T09:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463647",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_463648.json:
```json
{
    "body": "<a id='comment:13'></a>Merge conflict",
    "created_at": "2021-11-07T09:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463648",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>Merge conflict



---

archive/issue_comments_463649.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-11-07T16:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_463650.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-07T17:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463650",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_463651.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-07T17:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463651",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463652.json:
```json
{
    "body": "<a id='comment:17'></a>trivial merge",
    "created_at": "2021-11-07T17:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463652",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>trivial merge



---

archive/issue_comments_463653.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-11-12T23:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_463654.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-11-12T23:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_463655.json:
```json
{
    "body": "<a id='comment:19'></a>Trivial merge with 9.5.beta6",
    "created_at": "2021-11-12T23:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463655",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Trivial merge with 9.5.beta6



---

archive/issue_comments_463656.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-12T23:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463656",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463657.json:
```json
{
    "body": "<a id='comment:20'></a>It was already merged, but then the branch changed and now its a merge conflict",
    "created_at": "2021-11-14T17:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463657",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>It was already merged, but then the branch changed and now its a merge conflict



---

archive/issue_comments_463658.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-11-14T17:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463658",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_463659.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-14T18:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_463660.json:
```json
{
    "body": "<a id='comment:23'></a>Sorry. Back to the previous commit.",
    "created_at": "2021-11-14T18:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463660",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Sorry. Back to the previous commit.



---

archive/issue_comments_463661.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-11-14T18:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463661",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_463662.json:
```json
{
    "body": "<a id='comment:25'></a>still merge conflict",
    "created_at": "2021-11-15T23:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463662",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>still merge conflict



---

archive/issue_comments_463663.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-11-15T23:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463663",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_463664.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-15T23:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463665.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-11-15T23:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463665",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_086724.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-05T11:15:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32777#event-86724"
}
```



---

archive/issue_comments_463666.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-05T11:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32777#issuecomment-463666",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
