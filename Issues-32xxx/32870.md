# Issue 32870: sage.rings: Modularization changes

archive/issues_032633.json:
```json
{
    "body": "split out from #32432.\n\n\n\n**CC:**  @kliem\n\n**Branch/Commit:** [92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)\n\n**Reviewer:** Jonathan Kliem, Matthias Koeppe\n\n**Author:** Matthias Koeppe, Jonathan Kliem\n\nIssue created by migration from https://trac.sagemath.org/ticket/32870\n\n",
    "closed_at": "2021-12-19T11:47:25Z",
    "created_at": "2021-11-14T08:23:09Z",
    "labels": [
        "component: refactoring",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "sage.rings: Modularization changes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32870",
    "user": "https://github.com/mkoeppe"
}
```
split out from #32432.



**CC:**  @kliem

**Branch/Commit:** [92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)

**Reviewer:** Jonathan Kliem, Matthias Koeppe

**Author:** Matthias Koeppe, Jonathan Kliem

Issue created by migration from https://trac.sagemath.org/ticket/32870





---

archive/issue_comments_626205.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)",
    "created_at": "2021-11-14T08:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626205",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)



---

archive/issue_comments_626206.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd1e636900ea7f7009aaba75cdb4fcdf23b7685c\">bd1e636</a></td><td><code>src/sage/rings/quotient_ring*.py: Delay imports from sage.interfaces.singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ead86533a73ecae3fda27191cad8ebc1f9b9aa6a\">ead8653</a></td><td><code>src/sage/rings/finite_rings/finite_field_constructor.py: Do not fail if .finite_field_givaro cannot be imported</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2a2adc809fe270eed2f96f632dac080495ece6a\">f2a2adc</a></td><td><code>src/sage/rings/rational.pyx: Move import of mathml into method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf\">59e54b0</a></td><td><code>src/sage/rings/rational.pyx: Do not fail at import time when sage.rings.real_* is not available</code></td></tr></table>\n",
    "created_at": "2021-11-14T08:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626206",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd1e636900ea7f7009aaba75cdb4fcdf23b7685c">bd1e636</a></td><td><code>src/sage/rings/quotient_ring*.py: Delay imports from sage.interfaces.singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ead86533a73ecae3fda27191cad8ebc1f9b9aa6a">ead8653</a></td><td><code>src/sage/rings/finite_rings/finite_field_constructor.py: Do not fail if .finite_field_givaro cannot be imported</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2a2adc809fe270eed2f96f632dac080495ece6a">f2a2adc</a></td><td><code>src/sage/rings/rational.pyx: Move import of mathml into method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf">59e54b0</a></td><td><code>src/sage/rings/rational.pyx: Do not fail at import time when sage.rings.real_* is not available</code></td></tr></table>




---

archive/issue_comments_626207.json:
```json
{
    "body": "**Commit:** [59e54b0f79893e6ab6fd010a210463072b764fbf](https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf)",
    "created_at": "2021-11-14T08:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626207",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [59e54b0f79893e6ab6fd010a210463072b764fbf](https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf)



---

archive/issue_comments_626208.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-11-14T08:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626208",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_626209.json:
```json
{
    "body": "<a id='comment:3'></a>\n\n```\n    from .functional import (additive_order,\n  File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/misc/functional.py\", line 26, in <module>\n    from sage.rings.complex_double import CDF\n  File \"sage/rings/complex_double.pyx\", line 110, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24921)\n  File \"sage/rings/complex_mpfr.pyx\", line 1, in init sage.rings.complex_mpfr (build/cythonized/sage/rings/complex_mpfr.c:35629)\n  File \"sage/rings/real_mpfr.pyx\", line 1, in init sage.rings.real_mpfr (build/cythonized/sage/rings/real_mpfr.c:47129)\n  File \"sage/libs/mpmath/utils.pyx\", line 17, in init sage.libs.mpmath.utils (build/cythonized/sage/libs/mpmath/utils.c:9319)\nImportError: cannot import name ComplexField\n```",
    "created_at": "2021-11-16T20:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626209",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>

```
    from .functional import (additive_order,
  File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/misc/functional.py", line 26, in <module>
    from sage.rings.complex_double import CDF
  File "sage/rings/complex_double.pyx", line 110, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24921)
  File "sage/rings/complex_mpfr.pyx", line 1, in init sage.rings.complex_mpfr (build/cythonized/sage/rings/complex_mpfr.c:35629)
  File "sage/rings/real_mpfr.pyx", line 1, in init sage.rings.real_mpfr (build/cythonized/sage/rings/real_mpfr.c:47129)
  File "sage/libs/mpmath/utils.pyx", line 17, in init sage.libs.mpmath.utils (build/cythonized/sage/libs/mpmath/utils.c:9319)
ImportError: cannot import name ComplexField
```



---

archive/issue_comments_626210.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-11-16T20:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626210",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_626211.json:
```json
{
    "body": "**Changing commit** from \"[59e54b0f79893e6ab6fd010a210463072b764fbf](https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf)\" to \"[8ba073457d08480484312f6771365ee36ed9a744](https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744)\".",
    "created_at": "2021-11-16T23:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[59e54b0f79893e6ab6fd010a210463072b764fbf](https://github.com/sagemath/sagetrac-mirror/commit/59e54b0f79893e6ab6fd010a210463072b764fbf)" to "[8ba073457d08480484312f6771365ee36ed9a744](https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744)".



---

archive/issue_comments_626212.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/136de8bf0391918ea4ebbb42163b2b11af1e96fc\">136de8b</a></td><td><code>src/sage/rings/rational.pyx: Move import of mathml into method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4b7c9daf59d38aee3399b7f2081700356f182ce\">a4b7c9d</a></td><td><code>src/sage/rings/finite_rings/finite_field_constructor.py: Do not fail if .finite_field_givaro cannot be imported</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744\">8ba0734</a></td><td><code>src/sage/rings/quotient_ring*.py: Delay imports from sage.interfaces.singular</code></td></tr></table>\n",
    "created_at": "2021-11-16T23:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/136de8bf0391918ea4ebbb42163b2b11af1e96fc">136de8b</a></td><td><code>src/sage/rings/rational.pyx: Move import of mathml into method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4b7c9daf59d38aee3399b7f2081700356f182ce">a4b7c9d</a></td><td><code>src/sage/rings/finite_rings/finite_field_constructor.py: Do not fail if .finite_field_givaro cannot be imported</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744">8ba0734</a></td><td><code>src/sage/rings/quotient_ring*.py: Delay imports from sage.interfaces.singular</code></td></tr></table>




---

archive/issue_comments_626213.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-11-16T23:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626213",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_626214.json:
```json
{
    "body": "<a id='comment:5'></a>\nBacked out the last change to `src/sage/rings/rational.pyx`",
    "created_at": "2021-11-16T23:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626214",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Backed out the last change to `src/sage/rings/rational.pyx`



---

archive/issue_comments_626215.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48cab996d7f570d9195a7316a494f972839a46c5\">48cab99</a></td><td><code>Import Algebra from sage.rings.ring, not sage.algebras.algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f5fd79ec6d608d15ca4e6d2f9c96c34b0a7be66\">9f5fd79</a></td><td><code>Import CommutativeAlgebra from sage.rings.ring, not sage.rings.commutative_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a\">e606d35</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: fixup</code></td></tr></table>\n",
    "created_at": "2021-11-18T18:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48cab996d7f570d9195a7316a494f972839a46c5">48cab99</a></td><td><code>Import Algebra from sage.rings.ring, not sage.algebras.algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f5fd79ec6d608d15ca4e6d2f9c96c34b0a7be66">9f5fd79</a></td><td><code>Import CommutativeAlgebra from sage.rings.ring, not sage.rings.commutative_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a">e606d35</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: fixup</code></td></tr></table>




---

archive/issue_comments_626216.json:
```json
{
    "body": "**Changing commit** from \"[8ba073457d08480484312f6771365ee36ed9a744](https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744)\" to \"[e606d3570b4d816c2257ae2718bdb25cb849c68a](https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a)\".",
    "created_at": "2021-11-18T18:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ba073457d08480484312f6771365ee36ed9a744](https://github.com/sagemath/sagetrac-mirror/commit/8ba073457d08480484312f6771365ee36ed9a744)" to "[e606d3570b4d816c2257ae2718bdb25cb849c68a](https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a)".



---

archive/issue_comments_626217.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-11-29T22:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626217",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_626218.json:
```json
{
    "body": "<a id='comment:7'></a>\n\n```\nsage -t --long --random-seed=194261639548588837697181034125749346937 src/sage/rings/commutative_algebra.py\n**********************************************************************\nFile \"src/sage/rings/commutative_algebra.py\", line 28, in sage.rings.commutative_algebra.is_CommutativeAlgebra\nFailed example:\n    sage.rings.commutative_algebra.is_CommutativeAlgebra(sage.rings.ring.CommutativeAlgebra(ZZ))\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.commutative_algebra.is_CommutativeAlgebra[0]>\", line 1, in <module>\n        sage.rings.commutative_algebra.is_CommutativeAlgebra(sage.rings.ring.CommutativeAlgebra(ZZ))\n    AttributeError: module 'sage.rings' has no attribute 'commutative_algebra'\n```",
    "created_at": "2021-11-29T22:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626218",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>

```
sage -t --long --random-seed=194261639548588837697181034125749346937 src/sage/rings/commutative_algebra.py
**********************************************************************
File "src/sage/rings/commutative_algebra.py", line 28, in sage.rings.commutative_algebra.is_CommutativeAlgebra
Failed example:
    sage.rings.commutative_algebra.is_CommutativeAlgebra(sage.rings.ring.CommutativeAlgebra(ZZ))
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.commutative_algebra.is_CommutativeAlgebra[0]>", line 1, in <module>
        sage.rings.commutative_algebra.is_CommutativeAlgebra(sage.rings.ring.CommutativeAlgebra(ZZ))
    AttributeError: module 'sage.rings' has no attribute 'commutative_algebra'
```



---

archive/issue_comments_626219.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da3c5cf81c63aa9546864ddbf7e136cb873d12e9\">da3c5cf</a></td><td><code>Merge tag '9.5.beta7' into t/32870/sage-rings-modularization</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb\">fba5f43</a></td><td><code>src/sage/rings/commutative_algebra.py: Fix up imports in doctest</code></td></tr></table>\n",
    "created_at": "2021-11-29T22:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da3c5cf81c63aa9546864ddbf7e136cb873d12e9">da3c5cf</a></td><td><code>Merge tag '9.5.beta7' into t/32870/sage-rings-modularization</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb">fba5f43</a></td><td><code>src/sage/rings/commutative_algebra.py: Fix up imports in doctest</code></td></tr></table>




---

archive/issue_comments_626220.json:
```json
{
    "body": "**Changing commit** from \"[e606d3570b4d816c2257ae2718bdb25cb849c68a](https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a)\" to \"[fba5f43491403997227ed0daecc7dea3f4f4f2eb](https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb)\".",
    "created_at": "2021-11-29T22:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e606d3570b4d816c2257ae2718bdb25cb849c68a](https://github.com/sagemath/sagetrac-mirror/commit/e606d3570b4d816c2257ae2718bdb25cb849c68a)" to "[fba5f43491403997227ed0daecc7dea3f4f4f2eb](https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb)".



---

archive/issue_comments_626221.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-11-29T22:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626221",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_626222.json:
```json
{
    "body": "<a id='comment:10'></a>\nBefore:\n\n```\nsage: P.<x,y>  = PolynomialRing(GF(2),2)\nsage: I = sage.rings.ideal.FieldIdeal(P)\nsage: Q = P.quo(I)\nsage: %timeit Q._singular_()\n833 ns \u00b1 1.01 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n```\n\nAfter:\n\n```\nsage: P.<x,y>  = PolynomialRing(GF(2),2)\nsage: I = sage.rings.ideal.FieldIdeal(P)\nsage: Q = P.quo(I)\nsage: %timeit Q._singular_()\n1.37 \u00b5s \u00b1 0.777 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n```\n\nI will see, if I can improve this.",
    "created_at": "2021-11-30T08:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626222",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>
Before:

```
sage: P.<x,y>  = PolynomialRing(GF(2),2)
sage: I = sage.rings.ideal.FieldIdeal(P)
sage: Q = P.quo(I)
sage: %timeit Q._singular_()
833 ns ± 1.01 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
```

After:

```
sage: P.<x,y>  = PolynomialRing(GF(2),2)
sage: I = sage.rings.ideal.FieldIdeal(P)
sage: Q = P.quo(I)
sage: %timeit Q._singular_()
1.37 µs ± 0.777 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
```

I will see, if I can improve this.



---

archive/issue_comments_626223.json:
```json
{
    "body": "<a id='comment:11'></a>\nBefore:\n\n```\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: S = R.quotient_ring(x^2+y^2)\nsage: %timeit S.ideal(x+y+1)\n8.2 \u00b5s \u00b1 38.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S.ideal()\n2.24 \u00b5s \u00b1 8.11 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S(x)\n2.04 \u00b5s \u00b1 7.01 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\nAfter:\n\n```\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: S = R.quotient_ring(x^2+y^2)\nsage: %timeit S.ideal(x+y+1)\n9.71 \u00b5s \u00b1 36.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S.ideal()\n3.2 \u00b5s \u00b1 26.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S(x)\n2.75 \u00b5s \u00b1 6.89 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```",
    "created_at": "2021-11-30T08:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626223",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>
Before:

```
sage: R.<x,y> = PolynomialRing(QQ)
sage: S = R.quotient_ring(x^2+y^2)
sage: %timeit S.ideal(x+y+1)
8.2 µs ± 38.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S.ideal()
2.24 µs ± 8.11 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S(x)
2.04 µs ± 7.01 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

After:

```
sage: R.<x,y> = PolynomialRing(QQ)
sage: S = R.quotient_ring(x^2+y^2)
sage: %timeit S.ideal(x+y+1)
9.71 µs ± 36.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S.ideal()
3.2 µs ± 26.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S(x)
2.75 µs ± 6.89 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```



---

archive/issue_comments_626224.json:
```json
{
    "body": "**Changing author** from \"Matthias Koeppe\" to \"Matthias Koeppe, Jonathan Kliem\".",
    "created_at": "2021-11-30T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626224",
    "user": "https://github.com/kliem"
}
```

**Changing author** from "Matthias Koeppe" to "Matthias Koeppe, Jonathan Kliem".



---

archive/issue_comments_626225.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)\" to \"[u/gh-kliem/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage-rings-modularization)\".",
    "created_at": "2021-11-30T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626225",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)" to "[u/gh-kliem/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage-rings-modularization)".



---

archive/issue_comments_626226.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'm pretty much back to the old timings:\n\n```\nsage: P.<x,y>  = PolynomialRing(GF(2),2)\nsage: I = sage.rings.ideal.FieldIdeal(P)\nsage: Q = P.quo(I)\nsage: %timeit Q._singular_()\n853 ns \u00b1 1.18 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: S = R.quotient_ring(x^2+y^2)\nsage: %timeit S.ideal(x+y+1)\n8.1 \u00b5s \u00b1 71.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S.ideal()\n2.11 \u00b5s \u00b1 2.83 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit S(x)\n2.02 \u00b5s \u00b1 13.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4\">5c61a2b</a></td><td><code>small optimizations</code></td></tr></table>\n",
    "created_at": "2021-11-30T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626226",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'></a>
I'm pretty much back to the old timings:

```
sage: P.<x,y>  = PolynomialRing(GF(2),2)
sage: I = sage.rings.ideal.FieldIdeal(P)
sage: Q = P.quo(I)
sage: %timeit Q._singular_()
853 ns ± 1.18 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: R.<x,y> = PolynomialRing(QQ)
sage: S = R.quotient_ring(x^2+y^2)
sage: %timeit S.ideal(x+y+1)
8.1 µs ± 71.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S.ideal()
2.11 µs ± 2.83 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit S(x)
2.02 µs ± 13.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4">5c61a2b</a></td><td><code>small optimizations</code></td></tr></table>




---

archive/issue_comments_626227.json:
```json
{
    "body": "**Changing commit** from \"[fba5f43491403997227ed0daecc7dea3f4f4f2eb](https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb)\" to \"[5c61a2b52a786811af25ef1081d8a1b2f5d19cc4](https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4)\".",
    "created_at": "2021-11-30T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626227",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[fba5f43491403997227ed0daecc7dea3f4f4f2eb](https://github.com/sagemath/sagetrac-mirror/commit/fba5f43491403997227ed0daecc7dea3f4f4f2eb)" to "[5c61a2b52a786811af25ef1081d8a1b2f5d19cc4](https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4)".



---

archive/issue_comments_626228.json:
```json
{
    "body": "**Reviewer:** Jonathan Kliem, ...",
    "created_at": "2021-11-30T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626228",
    "user": "https://github.com/kliem"
}
```

**Reviewer:** Jonathan Kliem, ...



---

archive/issue_comments_626229.json:
```json
{
    "body": "**Changing reviewer** from \"Jonathan Kliem, ...\" to \"Jonathan Kliem, Matthias Koeppe\".",
    "created_at": "2021-11-30T21:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626229",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Jonathan Kliem, ..." to "Jonathan Kliem, Matthias Koeppe".



---

archive/issue_comments_626230.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-11-30T21:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626230",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_626231.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks a lot, this is looking great.",
    "created_at": "2021-11-30T21:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626231",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Thanks a lot, this is looking great.



---

archive/issue_comments_626232.json:
```json
{
    "body": "<a id='comment:14'></a>\nActually, in this change there's a typo:\n\n```\n--- a/src/sage/rings/quotient_ring_element.py\n+++ b/src/sage/rings/quotient_ring_element.py\n@@ -18,7 +18,12 @@ AUTHORS:\n \n from sage.structure.element import RingElement\n from sage.structure.richcmp import richcmp, rich_to_bool\n-from sage.interfaces.singular import singular as singular_default\n+\n+\n+try:\n+    from sage.interfaces.singular import singular as singular_default\n+except ImportError:\n+    is_singularElement = lambda x : False\n```\n\n... `singular_default` should be set here",
    "created_at": "2021-11-30T23:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626232",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Actually, in this change there's a typo:

```
--- a/src/sage/rings/quotient_ring_element.py
+++ b/src/sage/rings/quotient_ring_element.py
@@ -18,7 +18,12 @@ AUTHORS:
 
 from sage.structure.element import RingElement
 from sage.structure.richcmp import richcmp, rich_to_bool
-from sage.interfaces.singular import singular as singular_default
+
+
+try:
+    from sage.interfaces.singular import singular as singular_default
+except ImportError:
+    is_singularElement = lambda x : False
```

... `singular_default` should be set here



---

archive/issue_comments_626233.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-11-30T23:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626233",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_626234.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-kliem/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage-rings-modularization)\" to \"[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)\".",
    "created_at": "2021-11-30T23:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626234",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/gh-kliem/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage-rings-modularization)" to "[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)".



---

archive/issue_comments_626235.json:
```json
{
    "body": "<a id='comment:16'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6\">92d88c0</a></td><td><code>src/sage/rings/quotient_ring_element.py: Fixup</code></td></tr></table>\n",
    "created_at": "2021-11-30T23:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626235",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6">92d88c0</a></td><td><code>src/sage/rings/quotient_ring_element.py: Fixup</code></td></tr></table>




---

archive/issue_comments_626236.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-11-30T23:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626236",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_626237.json:
```json
{
    "body": "**Changing commit** from \"[5c61a2b52a786811af25ef1081d8a1b2f5d19cc4](https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4)\" to \"[92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)\".",
    "created_at": "2021-11-30T23:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626237",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[5c61a2b52a786811af25ef1081d8a1b2f5d19cc4](https://github.com/sagemath/sagetrac-mirror/commit/5c61a2b52a786811af25ef1081d8a1b2f5d19cc4)" to "[92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)".



---

archive/issue_comments_626238.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-12-01T06:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626238",
    "user": "https://github.com/kliem"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_626239.json:
```json
{
    "body": "<a id='comment:17'></a>\nThanks for fixing this.",
    "created_at": "2021-12-01T06:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626239",
    "user": "https://github.com/kliem"
}
```

<a id='comment:17'></a>
Thanks for fixing this.



---

archive/issue_comments_626240.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)\" to \"[92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)\".",
    "created_at": "2021-12-19T11:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32870#issuecomment-626240",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/sage-rings-modularization](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage-rings-modularization)" to "[92d88c059f0608e19e951e30f1c0afe2d2bb38f6](https://github.com/sagemath/sagetrac-mirror/commit/92d88c059f0608e19e951e30f1c0afe2d2bb38f6)".



---

archive/issue_events_097448.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-19T11:47:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32870#event-97448"
}
```
