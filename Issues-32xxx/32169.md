# Issue 32169: Bug in edge disjoint spanning trees

archive/issues_031932.json:
```json
{
    "assignees": [],
    "body": "Timeout when creating edge disjoint spanning trees:\n\n```\nsage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\nsage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\nsage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\nsage: dig6_string += r'?YBFosqITEA?IvCU_'\nsage: G = DiGraph(dig6_string)\nsage: G.edge_connectivity(5)\n5\nsage: G.edge_disjoint_spanning_trees(5)  # timeout\n```\n\nThis contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n\nDepends on #32911\n\n**CC:**  @dcoudert\n\n**Keywords:** graph, spanning trees\n\n**Branch:** [e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/32169\n\n",
    "closed_at": "2022-05-18T22:18:58Z",
    "created_at": "2021-07-09T18:15:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in edge disjoint spanning trees",
    "type": "issue",
    "updated_at": "2022-05-22T22:49:05Z",
    "url": "https://github.com/sagemath/sage/issues/32169",
    "user": "https://github.com/kliem"
}
```
Timeout when creating edge disjoint spanning trees:

```
sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
sage: dig6_string += r'?YBFosqITEA?IvCU_'
sage: G = DiGraph(dig6_string)
sage: G.edge_connectivity(5)
5
sage: G.edge_disjoint_spanning_trees(5)  # timeout
```

This contradicts a doctest in `src/sage/graphs/generic_graph.py`.

Depends on #32911

**CC:**  @dcoudert

**Keywords:** graph, spanning trees

**Branch:** [e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)

**Reviewer:** Travis Scrimshaw

**Author:** David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/32169





---

archive/issue_events_390636.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390636"
}
```



---

archive/issue_events_390637.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390637"
}
```



---

archive/issue_events_390638.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390638"
}
```



---

archive/issue_comments_520799.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n sage: G.edge_disjoint_spanning_trees(5)  # timeout\n ```\n \n+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n+\n Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \\h`.\n``````\n",
    "created_at": "2021-07-09T18:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520799",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 sage: G.edge_disjoint_spanning_trees(5)  # timeout
 ```
 
+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
+
 Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \h`.
``````




---

archive/issue_comments_520800.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nI get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).\n\n```\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      \nCPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s\nWall time: 663 ms\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       \nCPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s\nWall time: 3.61 s\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\n```\n\nConcerning the `\\h`,  if I replace it in the string with `\\\\h`, then I don't get the warning anymore. Not sure how to fix this issue.",
    "created_at": "2021-07-09T22:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520800",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'>**Comment 2:**</a>
I get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).

```
sage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      
CPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s
Wall time: 663 ms
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       
CPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s
Wall time: 3.61 s
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
```

Concerning the `\h`,  if I replace it in the string with `\\h`, then I don't get the warning anymore. Not sure how to fix this issue.



---

archive/issue_comments_520801.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nAnother option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.",
    "created_at": "2021-07-10T00:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520801",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:3'>**Comment 3:**</a>
Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.



---

archive/issue_comments_520802.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n Timeout when creating edge disjoint spanning trees:\n \n ```\n-sage: dig6_string = '[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\n-sage: dig6_string += 'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\n-sage: dig6_string += '[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\n-sage: dig6_string += '?YBFosqITEA?IvCU_'\n+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\n+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\n+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\n+sage: dig6_string += r'?YBFosqITEA?IvCU_'\n sage: G = DiGraph(dig6_string)\n sage: G.edge_connectivity(5)\n 5\n@@ -12,5 +12,3 @@\n ```\n \n This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n-\n-Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \\h`.\n``````\n",
    "created_at": "2021-07-10T06:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520802",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 Timeout when creating edge disjoint spanning trees:
 
 ```
-sage: dig6_string = '[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
-sage: dig6_string += 'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
-sage: dig6_string += '[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
-sage: dig6_string += '?YBFosqITEA?IvCU_'
+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
+sage: dig6_string += r'?YBFosqITEA?IvCU_'
 sage: G = DiGraph(dig6_string)
 sage: G.edge_connectivity(5)
 5
@@ -12,5 +12,3 @@
 ```
 
 This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
-
-Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \h`.
``````




---

archive/issue_comments_520803.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nReplying to [@DaveWitteMorris](#comment%3A3):\n> Another option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.\n\nThanks for the info. So this was a usage error from my side. I fixed the description.",
    "created_at": "2021-07-10T06:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520803",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'>**Comment 5:**</a>
Replying to [@DaveWitteMorris](#comment%3A3):
> Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.

Thanks for the info. So this was a usage error from my side. I fixed the description.



---

archive/issue_comments_520804.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nThe current method is based on integer linear programming and is very slow.\n\nFor undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.\n\nI don't know the algorithms for directed graphs.",
    "created_at": "2021-07-10T08:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520804",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'>**Comment 6:**</a>
The current method is based on integer linear programming and is very slow.

For undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.

I don't know the algorithms for directed graphs.



---

archive/issue_comments_520805.json:
```json
{
    "body": "**Commit:** [76ce72340f8de0b866446781461c80b519b0fda9](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520805",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [76ce72340f8de0b866446781461c80b519b0fda9](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)



---

archive/issue_events_390639.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-10T13:21:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390639"
}
```



---

archive/issue_comments_520806.json:
```json
{
    "body": "**Branch:** [public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520806",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)



---

archive/issue_comments_520807.json:
```json
{
    "body": "**Author:** David Coudert",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520807",
    "user": "https://github.com/dcoudert"
}
```

**Author:** David Coudert



---

archive/issue_comments_520808.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nAt first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.\n\n```\nsage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' \nsage: G = DiGraph(d6)                                                                                                                              \nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s\nWall time: 825 ms\nsage: F                                                                                                                                            \n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s\nWall time: 2.38 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s\nWall time: 1.37 s\n```\n\nOf course, it would be better to implement the polynomial time algorithms.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9\">76ce723</a></td><td><code>trac #32169: new ILP formulation</code></td></tr></table>\n",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520808",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'>**Comment 7:**</a>
At first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.

```
sage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' 
sage: G = DiGraph(d6)                                                                                                                              
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s
Wall time: 825 ms
sage: F                                                                                                                                            
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s
Wall time: 2.38 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s
Wall time: 1.37 s
```

Of course, it would be better to implement the polynomial time algorithms.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9">76ce723</a></td><td><code>trac #32169: new ILP formulation</code></td></tr></table>




---

archive/issue_comments_520809.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0\">047afda</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr></table>\n",
    "created_at": "2021-07-10T13:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520809",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>**Comment 8:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0">047afda</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr></table>




---

archive/issue_comments_520810.json:
```json
{
    "body": "**Changing commit** from \"[76ce72340f8de0b866446781461c80b519b0fda9](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)\" to \"[047afdaebccd55455f6e234510c010b5efdb15f0](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)\".",
    "created_at": "2021-07-10T13:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520810",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[76ce72340f8de0b866446781461c80b519b0fda9](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)" to "[047afdaebccd55455f6e234510c010b5efdb15f0](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)".



---

archive/issue_comments_520811.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nI get slightly better running time when I force equality for the number of incoming edges. \n\n```\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s\nWall time: 506 ms\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s\nWall time: 2.44 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s\nWall time: 1.23 s\n```\nHowever, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.",
    "created_at": "2021-07-10T13:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520811",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'>**Comment 9:**</a>
I get slightly better running time when I force equality for the number of incoming edges. 

```
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s
Wall time: 506 ms
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s
Wall time: 2.44 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s
Wall time: 1.23 s
```
However, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.



---

archive/issue_comments_520812.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nDo you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?",
    "created_at": "2021-07-12T00:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520812",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'>**Comment 10:**</a>
Do you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?



---

archive/issue_comments_520813.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nI prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.",
    "created_at": "2021-07-12T05:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520813",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'>**Comment 11:**</a>
I prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.



---

archive/issue_events_390640.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-12T06:15:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390640"
}
```



---

archive/issue_events_390641.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-12T06:15:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390641"
}
```



---

archive/issue_comments_520814.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2021-07-12T06:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520814",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_520815.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nOkay, LGTM.",
    "created_at": "2021-07-12T06:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520815",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>**Comment 12:**</a>
Okay, LGTM.



---

archive/issue_comments_520816.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nWith this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:\n\n```\nsage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')\nsage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') \nsage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') \n```\n\nEven worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.\n\nAnyway, while this resolved the one particular case I reported, it seems to have created various other problems.",
    "created_at": "2021-07-15T07:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520816",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'>**Comment 13:**</a>
With this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:

```
sage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')
sage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') 
sage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') 
```

Even worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.

Anyway, while this resolved the one particular case I reported, it seems to have created various other problems.



---

archive/issue_comments_520817.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nE.g.\n\n```\ng = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') \n```\n\nis resolved now, but didn't work before.",
    "created_at": "2021-07-15T07:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520817",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'>**Comment 14:**</a>
E.g.

```
g = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') 
```

is resolved now, but didn't work before.



---

archive/issue_comments_520818.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nCan you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.",
    "created_at": "2021-07-15T08:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520818",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'>**Comment 15:**</a>
Can you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.



---

archive/issue_events_390642.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T08:21:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390642"
}
```



---

archive/issue_events_390643.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T08:21:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390643"
}
```



---

archive/issue_comments_520819.json:
```json
{
    "body": "**Changing commit** from \"[047afdaebccd55455f6e234510c010b5efdb15f0](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)\" to \"[2171ac4b5d038c6f01e59a9301aca7ccd58add33](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)\".",
    "created_at": "2021-07-15T12:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520819",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[047afdaebccd55455f6e234510c010b5efdb15f0](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)" to "[2171ac4b5d038c6f01e59a9301aca7ccd58add33](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)".



---

archive/issue_comments_520820.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33\">2171ac4</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr></table>\n",
    "created_at": "2021-07-15T12:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520820",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33">2171ac4</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr></table>




---

archive/issue_comments_520821.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nI added some strengthening constraints to speed up the resolution of the problem. Is it better now ?",
    "created_at": "2021-07-15T12:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520821",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'>**Comment 17:**</a>
I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?



---

archive/issue_comments_520822.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nWhenever I say a graph `g` is not working, I mean that:\n\n```\nsage: k = G.edge_connectivity(5)\nsage: G.edge_disjoint_spanning_trees(k)\n```\n\ndoes not terminate in reasonable time.\n\nBefore this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.",
    "created_at": "2021-07-15T13:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520822",
    "user": "https://github.com/kliem"
}
```

<a id='comment:18'>**Comment 18:**</a>
Whenever I say a graph `g` is not working, I mean that:

```
sage: k = G.edge_connectivity(5)
sage: G.edge_disjoint_spanning_trees(k)
```

does not terminate in reasonable time.

Before this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.



---

archive/issue_comments_520823.json:
```json
{
    "body": "**Changing commit** from \"[2171ac4b5d038c6f01e59a9301aca7ccd58add33](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)\" to \"[3d53da393cc982228cfd20c04e052b9c81720487](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)\".",
    "created_at": "2021-07-15T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520823",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2171ac4b5d038c6f01e59a9301aca7ccd58add33](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)" to "[3d53da393cc982228cfd20c04e052b9c81720487](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)".



---

archive/issue_comments_520824.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487\">3d53da3</a></td><td><code>trac #32169: small cases</code></td></tr></table>\n",
    "created_at": "2021-07-15T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520824",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487">3d53da3</a></td><td><code>trac #32169: small cases</code></td></tr></table>




---

archive/issue_comments_520825.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nadded some tests to deal with small cases (k=0 or 1, n=0).",
    "created_at": "2021-07-15T15:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520825",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'>**Comment 20:**</a>
added some tests to deal with small cases (k=0 or 1, n=0).



---

archive/issue_events_390644.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T15:10:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390644"
}
```



---

archive/issue_events_390645.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T15:10:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390645"
}
```



---

archive/issue_events_390646.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T16:28:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390646"
}
```



---

archive/issue_events_390647.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T16:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390647"
}
```



---

archive/issue_comments_520826.json:
```json
{
    "body": "**Dependencies:** #32197",
    "created_at": "2021-07-15T16:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520826",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #32197



---

archive/issue_comments_520827.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\n\n```\n+        edges = p.get_values(edge)\n+        for (e, c), val in edges.items():\n+            if val == 1:\n+                classes[c].add_edge(e)\n```\nsee #32197.",
    "created_at": "2021-07-15T16:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520827",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'>**Comment 21:**</a>

```
+        edges = p.get_values(edge)
+        for (e, c), val in edges.items():
+            if val == 1:
+                classes[c].add_edge(e)
```
see #32197.



---

archive/issue_comments_520828.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [@dcoudert](#comment%3A17):\n> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?\n\nIt seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.\n\n```\nsage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      \nsage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           \nsage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        \nsage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')\n```\n\nThere is more. This is how I find them:\n\n```\nsage: def foo(n): \n....:     try: \n....:         alarm(20) \n....:         g = digraphs.RandomDirectedGNP(n, .3) \n....:         k = Integer(g.edge_connectivity()) \n....:         arborescences = g.edge_disjoint_spanning_trees(k) \n....:     except AlarmInterrupt: \n....:         print(g.dig6_string()) \n....:     finally: \n....:         cancel_alarm() \n....:  \nsage: while True:\n....:     foo(12)\n```",
    "created_at": "2021-07-16T12:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520828",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [@dcoudert](#comment%3A17):
> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?

It seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.

```
sage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      
sage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           
sage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        
sage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')
```

There is more. This is how I find them:

```
sage: def foo(n): 
....:     try: 
....:         alarm(20) 
....:         g = digraphs.RandomDirectedGNP(n, .3) 
....:         k = Integer(g.edge_connectivity()) 
....:         arborescences = g.edge_disjoint_spanning_trees(k) 
....:     except AlarmInterrupt: 
....:         print(g.dig6_string()) 
....:     finally: 
....:         cancel_alarm() 
....:  
sage: while True:
....:     foo(12)
```



---

archive/issue_comments_520829.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nWith the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.\n\nBut for sure it would be much better to get a proper implementation of the polynomial time algorithms.",
    "created_at": "2021-07-16T14:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520829",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'>**Comment 23:**</a>
With the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.

But for sure it would be much better to get a proper implementation of the polynomial time algorithms.



---

archive/issue_events_390648.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-17T10:32:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390648"
}
```



---

archive/issue_events_390649.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-17T10:32:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390649"
}
```



---

archive/issue_comments_520830.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nI have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c\">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39\">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc\">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6\">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765\">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9f5f576d46c1cc27a591978f5464c1aa64af205\">b9f5f57</a></td><td><code>trac #32169: new ILP formulation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/497b3dcc0ee3e47d075fc7e6de14621c5967944e\">497b3dc</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85bceeecf6f31ada20cf68314e6290b6f1e28ae7\">85bceee</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea3eb3f63bfd04f830bea00a6f1fe2b60dc819ed\">ea3eb3f</a></td><td><code>trac #32169: small cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10\">f977bfe</a></td><td><code>trac #32169: use convert and integrality_tolerance</code></td></tr></table>\n",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520830",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'>**Comment 24:**</a>
I have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9f5f576d46c1cc27a591978f5464c1aa64af205">b9f5f57</a></td><td><code>trac #32169: new ILP formulation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/497b3dcc0ee3e47d075fc7e6de14621c5967944e">497b3dc</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85bceeecf6f31ada20cf68314e6290b6f1e28ae7">85bceee</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea3eb3f63bfd04f830bea00a6f1fe2b60dc819ed">ea3eb3f</a></td><td><code>trac #32169: small cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10">f977bfe</a></td><td><code>trac #32169: use convert and integrality_tolerance</code></td></tr></table>




---

archive/issue_comments_520831.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)\" to \"[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)\".",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520831",
    "user": "https://github.com/dcoudert"
}
```

**Changing branch** from "[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)" to "[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)".



---

archive/issue_comments_520832.json:
```json
{
    "body": "**Changing commit** from \"[3d53da393cc982228cfd20c04e052b9c81720487](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)\" to \"[f977bfe42e05e7b8aa92d9136003cd15045dfa10](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)\".",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520832",
    "user": "https://github.com/dcoudert"
}
```

**Changing commit** from "[3d53da393cc982228cfd20c04e052b9c81720487](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)" to "[f977bfe42e05e7b8aa92d9136003cd15045dfa10](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)".



---

archive/issue_comments_520833.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nThe use of `get_values` looks fine. I have not looked at the details of the formulation used",
    "created_at": "2021-07-21T03:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520833",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>**Comment 25:**</a>
The use of `get_values` looks fine. I have not looked at the details of the formulation used



---

archive/issue_comments_520834.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nThe proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.\n\nFor undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.",
    "created_at": "2021-07-21T07:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520834",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'>**Comment 26:**</a>
The proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.

For undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.



---

archive/issue_comments_520835.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nThis seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.\n\n```\nsage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') \n```\n\nI don't know if this can be improved at all. I'm just stating this.",
    "created_at": "2021-08-09T15:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520835",
    "user": "https://github.com/kliem"
}
```

<a id='comment:27'>**Comment 27:**</a>
This seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.

```
sage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') 
```

I don't know if this can be improved at all. I'm just stating this.



---

archive/issue_events_390650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390650"
}
```



---

archive/issue_events_390651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390651"
}
```



---

archive/issue_comments_520836.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\n\n```\nsage: g = Graph(r'M_IkGr`_QCwWDk?E?')\nsage: g\nGraph on 14 vertices\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: %time trees = g.edge_disjoint_spanning_trees(k)\nCPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s\nWall time: 11.7 s\n```\n\nHence we lower the number of vertices in \n ||[2609cb5](https://github.com/sagemath/sagetrac-mirror/commit/2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||\nin #29935.",
    "created_at": "2021-10-04T10:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520836",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'>**Comment 29:**</a>

```
sage: g = Graph(r'M_IkGr`_QCwWDk?E?')
sage: g
Graph on 14 vertices
sage: k = Integer(g.edge_connectivity()) // 2
sage: %time trees = g.edge_disjoint_spanning_trees(k)
CPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s
Wall time: 11.7 s
```

Hence we lower the number of vertices in 
 ||[2609cb5](https://github.com/sagemath/sagetrac-mirror/commit/2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||
in #29935.



---

archive/issue_comments_520837.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nI now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. \nHowever, I don't have any code for directed graphs (and I have not found any reference yet).\n\nWhich solution do you prefer:\n- remove the ILP for undirected graphs and replace it with my code\n- keep the ILP and add new code.\n\nNote that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.",
    "created_at": "2021-10-12T17:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520837",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'>**Comment 30:**</a>
I now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. 
However, I don't have any code for directed graphs (and I have not found any reference yet).

Which solution do you prefer:
- remove the ILP for undirected graphs and replace it with my code
- keep the ILP and add new code.

Note that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.



---

archive/issue_comments_520838.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nSince the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.",
    "created_at": "2021-10-13T05:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520838",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'>**Comment 31:**</a>
Since the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.



---

archive/issue_comments_520839.json:
```json
{
    "body": "**Changing commit** from \"[f977bfe42e05e7b8aa92d9136003cd15045dfa10](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)\" to \"[ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)\".",
    "created_at": "2021-10-14T10:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520839",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f977bfe42e05e7b8aa92d9136003cd15045dfa10](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)" to "[ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)".



---

archive/issue_comments_520840.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae9cd03df780a1d5c2925b178e1c9a78d653e89d\">ae9cd03</a></td><td><code>trac #32169: merged with 9.5.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a0ea6907640646ea6e0547134e7015ab1a72f77\">2a0ea69</a></td><td><code>trac #32169: implement the Roskind-Tarjan algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2\">ca875d0</a></td><td><code>trac #32169: expose the method</code></td></tr></table>\n",
    "created_at": "2021-10-14T10:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520840",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>**Comment 32:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae9cd03df780a1d5c2925b178e1c9a78d653e89d">ae9cd03</a></td><td><code>trac #32169: merged with 9.5.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a0ea6907640646ea6e0547134e7015ab1a72f77">2a0ea69</a></td><td><code>trac #32169: implement the Roskind-Tarjan algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2">ca875d0</a></td><td><code>trac #32169: expose the method</code></td></tr></table>




---

archive/issue_comments_520841.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nI have added the `Roskind-Tarjan` algorithm for undirected graphs.\n\ntest with `graphs.RandomGNP(50, .4)` and `cplex`, I get:\n\n```\nsage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_\n....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: k\n7\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\")\nCPU times: user 19.4 s, sys: 918 ms, total: 20.3 s\nWall time: 3.81 s\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"Roskind-Tarjan\")\nCPU times: user 113 ms, sys: 1.98 ms, total: 115 ms\nWall time: 115 ms\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\n```\n\nI'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that \"the argument directly translates to an efficient algorithm\"...).",
    "created_at": "2021-10-14T10:59:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520841",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'>**Comment 33:**</a>
I have added the `Roskind-Tarjan` algorithm for undirected graphs.

test with `graphs.RandomGNP(50, .4)` and `cplex`, I get:

```
sage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_
....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')
sage: k = Integer(g.edge_connectivity()) // 2
sage: k
7
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="MILP")
CPU times: user 19.4 s, sys: 918 ms, total: 20.3 s
Wall time: 3.81 s
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="Roskind-Tarjan")
CPU times: user 113 ms, sys: 1.98 ms, total: 115 ms
Wall time: 115 ms
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
```

I'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that "the argument directly translates to an efficient algorithm"...).



---

archive/issue_comments_520842.json:
```json
{
    "body": "**Changing commit** from \"[ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)\" to \"[8d42f68ea212c2bc7e4610e3861316a09c13a8fb](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)\".",
    "created_at": "2021-10-14T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520842",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)" to "[8d42f68ea212c2bc7e4610e3861316a09c13a8fb](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)".



---

archive/issue_comments_520843.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb\">8d42f68</a></td><td><code>trac #32169: small issue</code></td></tr></table>\n",
    "created_at": "2021-10-14T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520843",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>**Comment 34:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb">8d42f68</a></td><td><code>trac #32169: small issue</code></td></tr></table>




---

archive/issue_comments_520844.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nmay be `EmptySetError` could be loaded at module level since it is used in several methods ?",
    "created_at": "2021-10-14T17:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520844",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'>**Comment 35:**</a>
may be `EmptySetError` could be loaded at module level since it is used in several methods ?



---

archive/issue_comments_520845.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nPerhaps this paper will help.  It claims to provide \"a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time\".\n\n```\nRobert Endre Tarjan\nA good algorithm for edge-disjoint branching\nInformation Processing Letters\nVolume 3, Issue 2, November 1974, Pages 51-53\nhttps://doi.org/10.1016/0020-0190(74)90024-6\n```\n(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)",
    "created_at": "2021-10-14T19:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520845",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:36'>**Comment 36:**</a>
Perhaps this paper will help.  It claims to provide "a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time".

```
Robert Endre Tarjan
A good algorithm for edge-disjoint branching
Information Processing Letters
Volume 3, Issue 2, November 1974, Pages 51-53
https://doi.org/10.1016/0020-0190(74)90024-6
```
(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)



---

archive/issue_comments_520846.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nActually, the good ones seems to be\n- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022\n- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7\n\nIt seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.",
    "created_at": "2021-10-14T20:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520846",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'>**Comment 37:**</a>
Actually, the good ones seems to be
- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022
- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7

It seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.



---

archive/issue_comments_520847.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nIf you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.\n\nI'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.",
    "created_at": "2021-11-19T12:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520847",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:38'>**Comment 38:**</a>
If you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.

I'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.



---

archive/issue_comments_520848.json:
```json
{
    "body": "**Changing commit** from \"[8d42f68ea212c2bc7e4610e3861316a09c13a8fb](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)\" to \"[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)\".",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520848",
    "user": "https://github.com/dcoudert"
}
```

**Changing commit** from "[8d42f68ea212c2bc7e4610e3861316a09c13a8fb](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)" to "[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)".



---

archive/issue_comments_520849.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nI have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a8ef6007059920549edc6662d6bdc390a288e4b\">2a8ef60</a></td><td><code>trac #32911: Roskind-Tarjan edge-disjoint spanning trees</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18\">e23edfc</a></td><td><code>trac #32169: restart over 32911</code></td></tr></table>\n",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520849",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:39'>**Comment 39:**</a>
I have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a8ef6007059920549edc6662d6bdc390a288e4b">2a8ef60</a></td><td><code>trac #32911: Roskind-Tarjan edge-disjoint spanning trees</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18">e23edfc</a></td><td><code>trac #32169: restart over 32911</code></td></tr></table>




---

archive/issue_comments_520850.json:
```json
{
    "body": "**Changing dependencies** from \"#32197\" to \"#32911\".",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520850",
    "user": "https://github.com/dcoudert"
}
```

**Changing dependencies** from "#32197" to "#32911".



---

archive/issue_comments_520851.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)\" to \"[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)\".",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520851",
    "user": "https://github.com/dcoudert"
}
```

**Changing branch** from "[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)" to "[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)".



---

archive/issue_comments_520852.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nFYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\nI'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.",
    "created_at": "2021-12-08T12:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520852",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:40'>**Comment 40:**</a>
FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 

I'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.



---

archive/issue_comments_520853.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nNo problem. Just let me know when you're ready for a review.",
    "created_at": "2021-12-09T00:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520853",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:41'>**Comment 41:**</a>
No problem. Just let me know when you're ready for a review.



---

archive/issue_events_390652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390652"
}
```



---

archive/issue_events_390653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390653"
}
```



---

archive/issue_events_390654.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390654"
}
```



---

archive/issue_events_390655.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390655"
}
```



---

archive/issue_comments_520854.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nReplying to [@dcoudert](#comment%3A40):\n> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\nThis is now #33839.",
    "created_at": "2022-05-11T14:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520854",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:44'>**Comment 44:**</a>
Replying to [@dcoudert](#comment%3A40):
> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 

This is now #33839.



---

archive/issue_events_390656.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-05-14T22:44:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390656"
}
```



---

archive/issue_events_390657.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-05-14T22:44:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390657"
}
```



---

archive/issue_comments_520855.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nThen positive review.",
    "created_at": "2022-05-14T22:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520855",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'>**Comment 45:**</a>
Then positive review.



---

archive/issue_comments_520856.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)\" to \"[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)\".",
    "created_at": "2022-05-18T22:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520856",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)" to "[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)".



---

archive/issue_events_390658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-18T22:18:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390658"
}
```



---

archive/issue_events_390659.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa0456e37fef4fee122d549010877113015bafb2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-18T22:18:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-390659"
}
```



---

archive/issue_comments_520857.json:
```json
{
    "body": "**Changing commit** from \"[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)\" to \"\".",
    "created_at": "2022-05-22T20:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520857",
    "user": "https://github.com/antonio-rojas"
}
```

**Changing commit** from "[e23edfc46930f74b092abbfbe4d5f7e0c19bcf18](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)" to "".



---

archive/issue_comments_520858.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nThis makes the test suite hang with certain random seeds:\n\n```\nsage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py\n    Timed out\n**********************************************************************\nTests run before process (pid=581821) timed out:\n[...]\nsage: trees = g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\") ## line 6579 ##\n------------------------------------------------------------------------\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]\n/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]\n/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]\n/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]\n/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]\n/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]\n/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]\n/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]\n/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]\n/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]\n/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]\n/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]\n/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]\n/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]\n/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]\n/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]\n/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]\n/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]\n/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]\n/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]\n/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]\n/usr/bin/python(_start+0x25)[0x5642f4693045]\n------------------------------------------------------------------------\n```",
    "created_at": "2022-05-22T20:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520858",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:47'>**Comment 47:**</a>
This makes the test suite hang with certain random seeds:

```
sage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py
    Timed out
**********************************************************************
Tests run before process (pid=581821) timed out:
[...]
sage: trees = g.edge_disjoint_spanning_trees(k, algorithm="MILP") ## line 6579 ##
------------------------------------------------------------------------
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]
/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]
/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]
/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]
/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]
/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]
/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]
/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]
/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]
/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]
/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]
/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]
/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]
/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]
/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]
/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]
/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]
/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]
/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]
/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]
/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]
/usr/bin/python(_start+0x25)[0x5642f4693045]
------------------------------------------------------------------------
```



---

archive/issue_comments_520859.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\noutch :(\n\nThis is for\n\n```\ng = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')\n```\nIt's a too hard instance for this formulation with `GLPK`.\n\nI see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).",
    "created_at": "2022-05-22T22:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520859",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:48'>**Comment 48:**</a>
outch :(

This is for

```
g = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')
```
It's a too hard instance for this formulation with `GLPK`.

I see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).



---

archive/issue_comments_520860.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\nI would make the number of nodes for the test smaller as it is less invasive of a fix.",
    "created_at": "2022-05-22T22:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520860",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:49'>**Comment 49:**</a>
I would make the number of nodes for the test smaller as it is less invasive of a fix.



---

archive/issue_comments_520861.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\nI opened #33884.",
    "created_at": "2022-05-22T22:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-520861",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:50'>**Comment 50:**</a>
I opened #33884.
