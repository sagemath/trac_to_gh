# Issue 32169: Bug in edge disjoint spanning trees

archive/issues_031932.json:
```json
{
    "assignees": [],
    "body": "Timeout when creating edge disjoint spanning trees:\n\n```\nsage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\nsage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\nsage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\nsage: dig6_string += r'?YBFosqITEA?IvCU_'\nsage: G = DiGraph(dig6_string)\nsage: G.edge_connectivity(5)\n5\nsage: G.edge_disjoint_spanning_trees(5)  # timeout\n```\n\nThis contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n\nDepends on #32911\n\nCC:  @dcoudert\n\nKeywords: **graph, spanning trees**\n\nBranch: **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32169_\n\n",
    "closed_at": "2022-05-18T22:18:58Z",
    "created_at": "2021-07-09T18:15:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in edge disjoint spanning trees",
    "type": "issue",
    "updated_at": "2022-05-22T22:49:05Z",
    "url": "https://github.com/sagemath/sage/issues/32169",
    "user": "https://github.com/kliem"
}
```
Timeout when creating edge disjoint spanning trees:

```
sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
sage: dig6_string += r'?YBFosqITEA?IvCU_'
sage: G = DiGraph(dig6_string)
sage: G.edge_connectivity(5)
5
sage: G.edge_disjoint_spanning_trees(5)  # timeout
```

This contradicts a doctest in `src/sage/graphs/generic_graph.py`.

Depends on #32911

CC:  @dcoudert

Keywords: **graph, spanning trees**

Branch: **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**

Reviewer: **Travis Scrimshaw**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/32169_





---

archive/issue_events_443711.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443711"
}
```



---

archive/issue_events_443712.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443712"
}
```



---

archive/issue_events_443713.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443713"
}
```



---

archive/issue_events_443714.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-07-09T18:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443714"
}
```



---

archive/issue_comments_518120.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n sage: G.edge_disjoint_spanning_trees(5)  # timeout\n ```\n \n+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n+\n Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \\h`.\n``````\n",
    "created_at": "2021-07-09T18:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518120",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 sage: G.edge_disjoint_spanning_trees(5)  # timeout
 ```
 
+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
+
 Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \h`.
``````




---

archive/issue_comments_518121.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).\n\n```\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      \nCPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s\nWall time: 663 ms\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       \nCPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s\nWall time: 3.61 s\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\n```\n\nConcerning the `\\h`,  if I replace it in the string with `\\\\h`, then I don't get the warning anymore. Not sure how to fix this issue.",
    "created_at": "2021-07-09T22:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518121",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

I get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).

```
sage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      
CPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s
Wall time: 663 ms
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       
CPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s
Wall time: 3.61 s
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
```

Concerning the `\h`,  if I replace it in the string with `\\h`, then I don't get the warning anymore. Not sure how to fix this issue.



---

archive/issue_comments_518122.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAnother option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.",
    "created_at": "2021-07-10T00:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518122",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:3" align="right">comment:3</div>

Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.



---

archive/issue_comments_518123.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n Timeout when creating edge disjoint spanning trees:\n \n ```\n-sage: dig6_string = '[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\n-sage: dig6_string += 'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\n-sage: dig6_string += '[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\n-sage: dig6_string += '?YBFosqITEA?IvCU_'\n+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\n+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\n+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\n+sage: dig6_string += r'?YBFosqITEA?IvCU_'\n sage: G = DiGraph(dig6_string)\n sage: G.edge_connectivity(5)\n 5\n@@ -12,5 +12,3 @@\n ```\n \n This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n-\n-Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \\h`.\n``````\n",
    "created_at": "2021-07-10T06:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518123",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 Timeout when creating edge disjoint spanning trees:
 
 ```
-sage: dig6_string = '[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
-sage: dig6_string += 'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
-sage: dig6_string += '[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
-sage: dig6_string += '?YBFosqITEA?IvCU_'
+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
+sage: dig6_string += r'?YBFosqITEA?IvCU_'
 sage: G = DiGraph(dig6_string)
 sage: G.edge_connectivity(5)
 5
@@ -12,5 +12,3 @@
 ```
 
 This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
-
-Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \h`.
``````




---

archive/issue_comments_518124.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@DaveWitteMorris](#comment:3):\n> Another option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.\n\nThanks for the info. So this was a usage error from my side. I fixed the description.",
    "created_at": "2021-07-10T06:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518124",
    "user": "https://github.com/kliem"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@DaveWitteMorris](#comment:3):
> Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.

Thanks for the info. So this was a usage error from my side. I fixed the description.



---

archive/issue_comments_518125.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe current method is based on integer linear programming and is very slow.\n\nFor undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.\n\nI don't know the algorithms for directed graphs.",
    "created_at": "2021-07-10T08:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518125",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

The current method is based on integer linear programming and is very slow.

For undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.

I don't know the algorithms for directed graphs.



---

archive/issue_comments_518126.json:
```json
{
    "body": "Commit: **[`76ce723`](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)**",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518126",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`76ce723`](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)**



---

archive/issue_events_443715.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-10T13:21:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443715"
}
```



---

archive/issue_comments_518127.json:
```json
{
    "body": "Branch: **[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)**",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518127",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)**



---

archive/issue_comments_518128.json:
```json
{
    "body": "Author: **David Coudert**",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518128",
    "user": "https://github.com/dcoudert"
}
```

Author: **David Coudert**



---

archive/issue_comments_518129.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAt first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.\n\n```\nsage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' \nsage: G = DiGraph(d6)                                                                                                                              \nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s\nWall time: 825 ms\nsage: F                                                                                                                                            \n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s\nWall time: 2.38 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s\nWall time: 1.37 s\n```\n\nOf course, it would be better to implement the polynomial time algorithms.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9\">76ce723</a></td><td><code>trac #32169: new ILP formulation</code></td></tr></table>\n",
    "created_at": "2021-07-10T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518129",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

At first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.

```
sage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' 
sage: G = DiGraph(d6)                                                                                                                              
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s
Wall time: 825 ms
sage: F                                                                                                                                            
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s
Wall time: 2.38 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s
Wall time: 1.37 s
```

Of course, it would be better to implement the polynomial time algorithms.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9">76ce723</a></td><td><code>trac #32169: new ILP formulation</code></td></tr></table>




---

archive/issue_comments_518130.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0\">047afda</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr></table>\n",
    "created_at": "2021-07-10T13:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518130",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0">047afda</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr></table>




---

archive/issue_comments_518131.json:
```json
{
    "body": "Changed commit from **[`76ce723`](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)** to **[`047afda`](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)**",
    "created_at": "2021-07-10T13:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518131",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`76ce723`](https://github.com/sagemath/sagetrac-mirror/commit/76ce72340f8de0b866446781461c80b519b0fda9)** to **[`047afda`](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)**



---

archive/issue_comments_518132.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI get slightly better running time when I force equality for the number of incoming edges. \n\n```\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s\nWall time: 506 ms\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s\nWall time: 2.44 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s\nWall time: 1.23 s\n```\nHowever, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.",
    "created_at": "2021-07-10T13:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518132",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

I get slightly better running time when I force equality for the number of incoming edges. 

```
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s
Wall time: 506 ms
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s
Wall time: 2.44 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s
Wall time: 1.23 s
```
However, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.



---

archive/issue_comments_518133.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDo you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?",
    "created_at": "2021-07-12T00:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518133",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Do you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?



---

archive/issue_comments_518134.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.",
    "created_at": "2021-07-12T05:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518134",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

I prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.



---

archive/issue_events_443716.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-12T06:15:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443716"
}
```



---

archive/issue_events_443717.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-12T06:15:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443717"
}
```



---

archive/issue_comments_518135.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-07-12T06:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518135",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_518136.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOkay, LGTM.",
    "created_at": "2021-07-12T06:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518136",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Okay, LGTM.



---

archive/issue_comments_518137.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWith this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:\n\n```\nsage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')\nsage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') \nsage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') \n```\n\nEven worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.\n\nAnyway, while this resolved the one particular case I reported, it seems to have created various other problems.",
    "created_at": "2021-07-15T07:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518137",
    "user": "https://github.com/kliem"
}
```

<div id="comment:13" align="right">comment:13</div>

With this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:

```
sage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')
sage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') 
sage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') 
```

Even worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.

Anyway, while this resolved the one particular case I reported, it seems to have created various other problems.



---

archive/issue_comments_518138.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nE.g.\n\n```\ng = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') \n```\n\nis resolved now, but didn't work before.",
    "created_at": "2021-07-15T07:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518138",
    "user": "https://github.com/kliem"
}
```

<div id="comment:14" align="right">comment:14</div>

E.g.

```
g = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') 
```

is resolved now, but didn't work before.



---

archive/issue_comments_518139.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nCan you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.",
    "created_at": "2021-07-15T08:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518139",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:15" align="right">comment:15</div>

Can you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.



---

archive/issue_events_443718.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T08:21:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443718"
}
```



---

archive/issue_events_443719.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T08:21:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443719"
}
```



---

archive/issue_comments_518140.json:
```json
{
    "body": "Changed commit from **[`047afda`](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)** to **[`2171ac4`](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)**",
    "created_at": "2021-07-15T12:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518140",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`047afda`](https://github.com/sagemath/sagetrac-mirror/commit/047afdaebccd55455f6e234510c010b5efdb15f0)** to **[`2171ac4`](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)**



---

archive/issue_comments_518141.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33\">2171ac4</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr></table>\n",
    "created_at": "2021-07-15T12:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518141",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33">2171ac4</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr></table>




---

archive/issue_comments_518142.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI added some strengthening constraints to speed up the resolution of the problem. Is it better now ?",
    "created_at": "2021-07-15T12:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518142",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?



---

archive/issue_comments_518143.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWhenever I say a graph `g` is not working, I mean that:\n\n```\nsage: k = G.edge_connectivity(5)\nsage: G.edge_disjoint_spanning_trees(k)\n```\n\ndoes not terminate in reasonable time.\n\nBefore this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.",
    "created_at": "2021-07-15T13:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518143",
    "user": "https://github.com/kliem"
}
```

<div id="comment:18" align="right">comment:18</div>

Whenever I say a graph `g` is not working, I mean that:

```
sage: k = G.edge_connectivity(5)
sage: G.edge_disjoint_spanning_trees(k)
```

does not terminate in reasonable time.

Before this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.



---

archive/issue_comments_518144.json:
```json
{
    "body": "Changed commit from **[`2171ac4`](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)** to **[`3d53da3`](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)**",
    "created_at": "2021-07-15T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2171ac4`](https://github.com/sagemath/sagetrac-mirror/commit/2171ac4b5d038c6f01e59a9301aca7ccd58add33)** to **[`3d53da3`](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)**



---

archive/issue_comments_518145.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487\">3d53da3</a></td><td><code>trac #32169: small cases</code></td></tr></table>\n",
    "created_at": "2021-07-15T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518145",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487">3d53da3</a></td><td><code>trac #32169: small cases</code></td></tr></table>




---

archive/issue_comments_518146.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nadded some tests to deal with small cases (k=0 or 1, n=0).",
    "created_at": "2021-07-15T15:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518146",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

added some tests to deal with small cases (k=0 or 1, n=0).



---

archive/issue_events_443720.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T15:10:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443720"
}
```



---

archive/issue_events_443721.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-15T15:10:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443721"
}
```



---

archive/issue_events_443722.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T16:28:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443722"
}
```



---

archive/issue_events_443723.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T16:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443723"
}
```



---

archive/issue_comments_518147.json:
```json
{
    "body": "Dependencies: **#32197**",
    "created_at": "2021-07-15T16:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518147",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#32197**



---

archive/issue_comments_518148.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n\n```\n+        edges = p.get_values(edge)\n+        for (e, c), val in edges.items():\n+            if val == 1:\n+                classes[c].add_edge(e)\n```\nsee #32197.",
    "created_at": "2021-07-15T16:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518148",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>


```
+        edges = p.get_values(edge)
+        for (e, c), val in edges.items():
+            if val == 1:
+                classes[c].add_edge(e)
```
see #32197.



---

archive/issue_comments_518149.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@dcoudert](#comment:17):\n> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?\n\nIt seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.\n\n```\nsage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      \nsage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           \nsage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        \nsage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')\n```\n\nThere is more. This is how I find them:\n\n```\nsage: def foo(n): \n....:     try: \n....:         alarm(20) \n....:         g = digraphs.RandomDirectedGNP(n, .3) \n....:         k = Integer(g.edge_connectivity()) \n....:         arborescences = g.edge_disjoint_spanning_trees(k) \n....:     except AlarmInterrupt: \n....:         print(g.dig6_string()) \n....:     finally: \n....:         cancel_alarm() \n....:  \nsage: while True:\n....:     foo(12)\n```",
    "created_at": "2021-07-16T12:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518149",
    "user": "https://github.com/kliem"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@dcoudert](#comment:17):
> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?

It seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.

```
sage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      
sage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           
sage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        
sage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')
```

There is more. This is how I find them:

```
sage: def foo(n): 
....:     try: 
....:         alarm(20) 
....:         g = digraphs.RandomDirectedGNP(n, .3) 
....:         k = Integer(g.edge_connectivity()) 
....:         arborescences = g.edge_disjoint_spanning_trees(k) 
....:     except AlarmInterrupt: 
....:         print(g.dig6_string()) 
....:     finally: 
....:         cancel_alarm() 
....:  
sage: while True:
....:     foo(12)
```



---

archive/issue_comments_518150.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWith the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.\n\nBut for sure it would be much better to get a proper implementation of the polynomial time algorithms.",
    "created_at": "2021-07-16T14:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518150",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:23" align="right">comment:23</div>

With the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.

But for sure it would be much better to get a proper implementation of the polynomial time algorithms.



---

archive/issue_events_443724.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-17T10:32:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443724"
}
```



---

archive/issue_events_443725.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-17T10:32:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443725"
}
```



---

archive/issue_comments_518151.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c\">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39\">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc\">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6\">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765\">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9f5f576d46c1cc27a591978f5464c1aa64af205\">b9f5f57</a></td><td><code>trac #32169: new ILP formulation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/497b3dcc0ee3e47d075fc7e6de14621c5967944e\">497b3dc</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85bceeecf6f31ada20cf68314e6290b6f1e28ae7\">85bceee</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea3eb3f63bfd04f830bea00a6f1fe2b60dc819ed\">ea3eb3f</a></td><td><code>trac #32169: small cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10\">f977bfe</a></td><td><code>trac #32169: use convert and integrality_tolerance</code></td></tr></table>\n",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518151",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

I have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9f5f576d46c1cc27a591978f5464c1aa64af205">b9f5f57</a></td><td><code>trac #32169: new ILP formulation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/497b3dcc0ee3e47d075fc7e6de14621c5967944e">497b3dc</a></td><td><code>trac #32169: enforce equality in the number of incoming edges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85bceeecf6f31ada20cf68314e6290b6f1e28ae7">85bceee</a></td><td><code>trac #32169: add strengthening constraints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea3eb3f63bfd04f830bea00a6f1fe2b60dc819ed">ea3eb3f</a></td><td><code>trac #32169: small cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10">f977bfe</a></td><td><code>trac #32169: use convert and integrality_tolerance</code></td></tr></table>




---

archive/issue_comments_518152.json:
```json
{
    "body": "Changed branch from **[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)** to **[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)**",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518152",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/graphs/32169_new_ILP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP)** to **[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)**



---

archive/issue_comments_518153.json:
```json
{
    "body": "Changed commit from **[`3d53da3`](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)** to **[`f977bfe`](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)**",
    "created_at": "2021-07-17T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518153",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[`3d53da3`](https://github.com/sagemath/sagetrac-mirror/commit/3d53da393cc982228cfd20c04e052b9c81720487)** to **[`f977bfe`](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)**



---

archive/issue_comments_518154.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThe use of `get_values` looks fine. I have not looked at the details of the formulation used",
    "created_at": "2021-07-21T03:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518154",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

The use of `get_values` looks fine. I have not looked at the details of the formulation used



---

archive/issue_comments_518155.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.\n\nFor undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.",
    "created_at": "2021-07-21T07:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518155",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:26" align="right">comment:26</div>

The proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.

For undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.



---

archive/issue_comments_518156.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThis seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.\n\n```\nsage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') \n```\n\nI don't know if this can be improved at all. I'm just stating this.",
    "created_at": "2021-08-09T15:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518156",
    "user": "https://github.com/kliem"
}
```

<div id="comment:27" align="right">comment:27</div>

This seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.

```
sage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') 
```

I don't know if this can be improved at all. I'm just stating this.



---

archive/issue_events_443726.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443726"
}
```



---

archive/issue_events_443727.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443727"
}
```



---

archive/issue_comments_518157.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n\n```\nsage: g = Graph(r'M_IkGr`_QCwWDk?E?')\nsage: g\nGraph on 14 vertices\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: %time trees = g.edge_disjoint_spanning_trees(k)\nCPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s\nWall time: 11.7 s\n```\n\nHence we lower the number of vertices in \n ||[2609cb5](https://github.com/sagemath/sagetrac-mirror/commit/2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||\nin #29935.",
    "created_at": "2021-10-04T10:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518157",
    "user": "https://github.com/kliem"
}
```

<div id="comment:29" align="right">comment:29</div>


```
sage: g = Graph(r'M_IkGr`_QCwWDk?E?')
sage: g
Graph on 14 vertices
sage: k = Integer(g.edge_connectivity()) // 2
sage: %time trees = g.edge_disjoint_spanning_trees(k)
CPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s
Wall time: 11.7 s
```

Hence we lower the number of vertices in 
 ||[2609cb5](https://github.com/sagemath/sagetrac-mirror/commit/2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||
in #29935.



---

archive/issue_comments_518158.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. \nHowever, I don't have any code for directed graphs (and I have not found any reference yet).\n\nWhich solution do you prefer:\n- remove the ILP for undirected graphs and replace it with my code\n- keep the ILP and add new code.\n\nNote that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.",
    "created_at": "2021-10-12T17:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518158",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:30" align="right">comment:30</div>

I now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. 
However, I don't have any code for directed graphs (and I have not found any reference yet).

Which solution do you prefer:
- remove the ILP for undirected graphs and replace it with my code
- keep the ILP and add new code.

Note that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.



---

archive/issue_comments_518159.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nSince the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.",
    "created_at": "2021-10-13T05:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518159",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

Since the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.



---

archive/issue_comments_518160.json:
```json
{
    "body": "Changed commit from **[`f977bfe`](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)** to **[`ca875d0`](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)**",
    "created_at": "2021-10-14T10:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f977bfe`](https://github.com/sagemath/sagetrac-mirror/commit/f977bfe42e05e7b8aa92d9136003cd15045dfa10)** to **[`ca875d0`](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)**



---

archive/issue_comments_518161.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae9cd03df780a1d5c2925b178e1c9a78d653e89d\">ae9cd03</a></td><td><code>trac #32169: merged with 9.5.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a0ea6907640646ea6e0547134e7015ab1a72f77\">2a0ea69</a></td><td><code>trac #32169: implement the Roskind-Tarjan algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2\">ca875d0</a></td><td><code>trac #32169: expose the method</code></td></tr></table>\n",
    "created_at": "2021-10-14T10:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518161",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae9cd03df780a1d5c2925b178e1c9a78d653e89d">ae9cd03</a></td><td><code>trac #32169: merged with 9.5.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a0ea6907640646ea6e0547134e7015ab1a72f77">2a0ea69</a></td><td><code>trac #32169: implement the Roskind-Tarjan algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2">ca875d0</a></td><td><code>trac #32169: expose the method</code></td></tr></table>




---

archive/issue_comments_518162.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI have added the `Roskind-Tarjan` algorithm for undirected graphs.\n\ntest with `graphs.RandomGNP(50, .4)` and `cplex`, I get:\n\n```\nsage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_\n....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: k\n7\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\")\nCPU times: user 19.4 s, sys: 918 ms, total: 20.3 s\nWall time: 3.81 s\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"Roskind-Tarjan\")\nCPU times: user 113 ms, sys: 1.98 ms, total: 115 ms\nWall time: 115 ms\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\n```\n\nI'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that \"the argument directly translates to an efficient algorithm\"...).",
    "created_at": "2021-10-14T10:59:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518162",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">comment:33</div>

I have added the `Roskind-Tarjan` algorithm for undirected graphs.

test with `graphs.RandomGNP(50, .4)` and `cplex`, I get:

```
sage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_
....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')
sage: k = Integer(g.edge_connectivity()) // 2
sage: k
7
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="MILP")
CPU times: user 19.4 s, sys: 918 ms, total: 20.3 s
Wall time: 3.81 s
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="Roskind-Tarjan")
CPU times: user 113 ms, sys: 1.98 ms, total: 115 ms
Wall time: 115 ms
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
```

I'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that "the argument directly translates to an efficient algorithm"...).



---

archive/issue_comments_518163.json:
```json
{
    "body": "Changed commit from **[`ca875d0`](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)** to **[`8d42f68`](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)**",
    "created_at": "2021-10-14T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca875d0`](https://github.com/sagemath/sagetrac-mirror/commit/ca875d0493adf44cf4f9bb3cd08aada3ef47a3b2)** to **[`8d42f68`](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)**



---

archive/issue_comments_518164.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb\">8d42f68</a></td><td><code>trac #32169: small issue</code></td></tr></table>\n",
    "created_at": "2021-10-14T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518164",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb">8d42f68</a></td><td><code>trac #32169: small issue</code></td></tr></table>




---

archive/issue_comments_518165.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nmay be `EmptySetError` could be loaded at module level since it is used in several methods ?",
    "created_at": "2021-10-14T17:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518165",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">comment:35</div>

may be `EmptySetError` could be loaded at module level since it is used in several methods ?



---

archive/issue_comments_518166.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nPerhaps this paper will help.  It claims to provide \"a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time\".\n\n```\nRobert Endre Tarjan\nA good algorithm for edge-disjoint branching\nInformation Processing Letters\nVolume 3, Issue 2, November 1974, Pages 51-53\nhttps://doi.org/10.1016/0020-0190(74)90024-6\n```\n(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)",
    "created_at": "2021-10-14T19:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518166",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:36" align="right">comment:36</div>

Perhaps this paper will help.  It claims to provide "a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time".

```
Robert Endre Tarjan
A good algorithm for edge-disjoint branching
Information Processing Letters
Volume 3, Issue 2, November 1974, Pages 51-53
https://doi.org/10.1016/0020-0190(74)90024-6
```
(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)



---

archive/issue_comments_518167.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nActually, the good ones seems to be\n- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022\n- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7\n\nIt seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.",
    "created_at": "2021-10-14T20:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518167",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:37" align="right">comment:37</div>

Actually, the good ones seems to be
- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022
- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7

It seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.



---

archive/issue_comments_518168.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nIf you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.\n\nI'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.",
    "created_at": "2021-11-19T12:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518168",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:38" align="right">comment:38</div>

If you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.

I'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.



---

archive/issue_comments_518169.json:
```json
{
    "body": "Changed commit from **[`8d42f68`](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)** to **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518169",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[`8d42f68`](https://github.com/sagemath/sagetrac-mirror/commit/8d42f68ea212c2bc7e4610e3861316a09c13a8fb)** to **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**



---

archive/issue_comments_518170.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a8ef6007059920549edc6662d6bdc390a288e4b\">2a8ef60</a></td><td><code>trac #32911: Roskind-Tarjan edge-disjoint spanning trees</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18\">e23edfc</a></td><td><code>trac #32169: restart over 32911</code></td></tr></table>\n",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518170",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:39" align="right">comment:39</div>

I have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a8ef6007059920549edc6662d6bdc390a288e4b">2a8ef60</a></td><td><code>trac #32911: Roskind-Tarjan edge-disjoint spanning trees</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18">e23edfc</a></td><td><code>trac #32169: restart over 32911</code></td></tr></table>




---

archive/issue_comments_518171.json:
```json
{
    "body": "Changed dependencies from **#32197** to **#32911**",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518171",
    "user": "https://github.com/dcoudert"
}
```

Changed dependencies from **#32197** to **#32911**



---

archive/issue_comments_518172.json:
```json
{
    "body": "Changed branch from **[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)** to **[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)**",
    "created_at": "2021-11-20T14:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518172",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/graphs/32169_new_ILP_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_new_ILP_v2)** to **[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)**



---

archive/issue_comments_518173.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nFYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\nI'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.",
    "created_at": "2021-12-08T12:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518173",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:40" align="right">comment:40</div>

FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 

I'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.



---

archive/issue_comments_518174.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nNo problem. Just let me know when you're ready for a review.",
    "created_at": "2021-12-09T00:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518174",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">comment:41</div>

No problem. Just let me know when you're ready for a review.



---

archive/issue_events_443728.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443728"
}
```



---

archive/issue_events_443729.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443729"
}
```



---

archive/issue_events_443730.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443730"
}
```



---

archive/issue_events_443731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443731"
}
```



---

archive/issue_comments_518175.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@dcoudert](#comment:40):\n> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\nThis is now #33839.",
    "created_at": "2022-05-11T14:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518175",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@dcoudert](#comment:40):
> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 

This is now #33839.



---

archive/issue_events_443732.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-05-14T22:44:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443732"
}
```



---

archive/issue_events_443733.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-05-14T22:44:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443733"
}
```



---

archive/issue_comments_518176.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThen positive review.",
    "created_at": "2022-05-14T22:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518176",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

Then positive review.



---

archive/issue_comments_518177.json:
```json
{
    "body": "Changed branch from **[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)** to **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**",
    "created_at": "2022-05-18T22:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518177",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/32169_v3](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32169_v3)** to **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)**



---

archive/issue_events_443734.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-18T22:18:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443734"
}
```



---

archive/issue_events_443735.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa0456e37fef4fee122d549010877113015bafb2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-18T22:18:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32169#event-443735"
}
```



---

archive/issue_comments_518178.json:
```json
{
    "body": "Changed commit from **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)** to none",
    "created_at": "2022-05-22T20:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518178",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[`e23edfc`](https://github.com/sagemath/sagetrac-mirror/commit/e23edfc46930f74b092abbfbe4d5f7e0c19bcf18)** to none



---

archive/issue_comments_518179.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThis makes the test suite hang with certain random seeds:\n\n```\nsage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py\n    Timed out\n**********************************************************************\nTests run before process (pid=581821) timed out:\n[...]\nsage: trees = g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\") ## line 6579 ##\n------------------------------------------------------------------------\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]\n/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]\n/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]\n/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]\n/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]\n/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]\n/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]\n/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]\n/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]\n/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]\n/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]\n/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]\n/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]\n/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]\n/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]\n/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]\n/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]\n/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]\n/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]\n/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]\n/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]\n/usr/bin/python(_start+0x25)[0x5642f4693045]\n------------------------------------------------------------------------\n```",
    "created_at": "2022-05-22T20:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518179",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:47" align="right">comment:47</div>

This makes the test suite hang with certain random seeds:

```
sage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py
    Timed out
**********************************************************************
Tests run before process (pid=581821) timed out:
[...]
sage: trees = g.edge_disjoint_spanning_trees(k, algorithm="MILP") ## line 6579 ##
------------------------------------------------------------------------
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]
/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]
/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]
/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]
/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]
/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]
/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]
/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]
/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]
/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]
/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]
/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]
/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]
/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]
/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]
/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]
/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]
/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]
/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]
/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]
/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]
/usr/bin/python(_start+0x25)[0x5642f4693045]
------------------------------------------------------------------------
```



---

archive/issue_comments_518180.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\noutch :(\n\nThis is for\n\n```\ng = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')\n```\nIt's a too hard instance for this formulation with `GLPK`.\n\nI see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).",
    "created_at": "2022-05-22T22:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518180",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:48" align="right">comment:48</div>

outch :(

This is for

```
g = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')
```
It's a too hard instance for this formulation with `GLPK`.

I see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).



---

archive/issue_comments_518181.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI would make the number of nodes for the test smaller as it is less invasive of a fix.",
    "created_at": "2022-05-22T22:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518181",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:49" align="right">comment:49</div>

I would make the number of nodes for the test smaller as it is less invasive of a fix.



---

archive/issue_comments_518182.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nI opened #33884.",
    "created_at": "2022-05-22T22:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32169#issuecomment-518182",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:50" align="right">comment:50</div>

I opened #33884.
