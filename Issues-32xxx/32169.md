# Issue 32169: Bug in edge disjoint spanning trees

archive/issues_031932.json:
```json
{
    "body": "Timeout when creating edge disjoint spanning trees:\n\n```\nsage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\nsage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\nsage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\nsage: dig6_string += r'?YBFosqITEA?IvCU_'\nsage: G = DiGraph(dig6_string)\nsage: G.edge_connectivity(5)\n5\nsage: G.edge_disjoint_spanning_trees(5)  # timeout\n```\n\nThis contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n\nCC:  @dcoudert\n\nKeywords: graph, spanning trees\n\nReviewer: Travis Scrimshaw\n\nAuthor: David Coudert\n\nBranch: e23edfc46930f74b092abbfbe4d5f7e0c19bcf18\n\nDependencies: #32911\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32169\n\n",
    "closed_at": "2022-05-18T22:18:58Z",
    "created_at": "2021-07-09T18:15:57Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Bug in edge disjoint spanning trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32169",
    "user": "https://github.com/kliem"
}
```
Timeout when creating edge disjoint spanning trees:

```
sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
sage: dig6_string += r'?YBFosqITEA?IvCU_'
sage: G = DiGraph(dig6_string)
sage: G.edge_connectivity(5)
5
sage: G.edge_disjoint_spanning_trees(5)  # timeout
```

This contradicts a doctest in `src/sage/graphs/generic_graph.py`.

CC:  @dcoudert

Keywords: graph, spanning trees

Reviewer: Travis Scrimshaw

Author: David Coudert

Branch: e23edfc46930f74b092abbfbe4d5f7e0c19bcf18

Dependencies: #32911

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32169





---

archive/issue_comments_487019.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -11,6 +11,8 @@\n sage: G.edge_disjoint_spanning_trees(5)  # timeout\n ```\n \n+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n+\n Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \\h`.\n \n Comment: 1\n```\n",
    "created_at": "2021-07-09T18:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487019",
    "user": "https://github.com/kliem"
}
```

Description changed:
```diff
--- 
+++ 
@@ -11,6 +11,8 @@
 sage: G.edge_disjoint_spanning_trees(5)  # timeout
 ```
 
+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
+
 Also I'm getting a bunch of Deprecation warning, when parsing the `dig6_string`: `DeprecationWarning: invalid escape sequence \h`.
 
 Comment: 1
```




---

archive/issue_comments_487020.json:
```json
{
    "body": "<a id='comment:2'></a>I get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).\n\n```\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      \nCPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s\nWall time: 663 ms\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       \nCPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s\nWall time: 3.61 s\n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\n```\n\nConcerning the `\\h`,  if I replace it in the string with `\\\\h`, then I don't get the warning anymore. Not sure how to fix this issue.",
    "created_at": "2021-07-09T22:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487020",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'></a>I get the answer very quickly with `cplex` and in a few seconds with `coin`. However, with `glpk` it takes ages (although it gets quickly the right LP bound).

```
sage: %time G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                      
CPU times: user 2.74 s, sys: 67.5 ms, total: 2.81 s
Wall time: 663 ms
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                       
CPU times: user 3.52 s, sys: 76.7 ms, total: 3.6 s
Wall time: 3.61 s
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
```

Concerning the `\h`,  if I replace it in the string with `\\h`, then I don't get the warning anymore. Not sure how to fix this issue.



---

archive/issue_comments_487021.json:
```json
{
    "body": "<a id='comment:3'></a>Another option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.",
    "created_at": "2021-07-10T00:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487021",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:3'></a>Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.



---

archive/issue_comments_487022.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+Timeout when creating edge disjoint spanning trees:\n \n+```\n+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'\n+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'\n+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'\n+sage: dig6_string += r'?YBFosqITEA?IvCU_'\n+sage: G = DiGraph(dig6_string)\n+sage: G.edge_connectivity(5)\n+5\n+sage: G.edge_disjoint_spanning_trees(5)  # timeout\n+```\n+\n+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.\n \n Comment: 1\n \n```\n",
    "created_at": "2021-07-10T06:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487022",
    "user": "https://github.com/kliem"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,17 @@
+Timeout when creating edge disjoint spanning trees:
 
+```
+sage: dig6_string = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?'
+sage: dig6_string += r'JOEYCdOzdkQGo@ADA@AAg?GAQW?'
+sage: dig6_string += r'[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q?'
+sage: dig6_string += r'?YBFosqITEA?IvCU_'
+sage: G = DiGraph(dig6_string)
+sage: G.edge_connectivity(5)
+5
+sage: G.edge_disjoint_spanning_trees(5)  # timeout
+```
+
+This contradicts a doctest in `src/sage/graphs/generic_graph.py`.
 
 Comment: 1
 
```




---

archive/issue_comments_487023.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 gh-DaveWitteMorris]:\n> Another option for the `\\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.\n\n\nThanks for the info. So this was a usage error from my side. I fixed the description.",
    "created_at": "2021-07-10T06:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487023",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>Replying to [comment:3 gh-DaveWitteMorris]:
> Another option for the `\h` (which I think is better) would be to use raw strings (put an 'r' before each of them, or before the one that is giving an error, at least).  As I understand it, dig6 strings can include any visible ascii character, including a backslash.


Thanks for the info. So this was a usage error from my side. I fixed the description.



---

archive/issue_comments_487024.json:
```json
{
    "body": "<a id='comment:6'></a>The current method is based on integer linear programming and is very slow.\n\nFor undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.\n\nI don't know the algorithms for directed graphs.",
    "created_at": "2021-07-10T08:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487024",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>The current method is based on integer linear programming and is very slow.

For undirected graphs, we can try to implement one of the existing polynomial time algorithm such as the one described in https://doi.org/10.1287/moor.10.4.701. I don't know yet if there is a simpler algorithms.

I don't know the algorithms for directed graphs.



---

archive/issue_comments_487025.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-10T13:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487025",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487026.json:
```json
{
    "body": "<a id='comment:7'></a>At first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.\n\n```\nsage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' \nsage: G = DiGraph(d6)                                                                                                                              \nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s\nWall time: 825 ms\nsage: F                                                                                                                                            \n[Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices,\n Digraph on 28 vertices]\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s\nWall time: 2.38 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s\nWall time: 1.37 s\n```\n\nOf course, it would be better to implement the polynomial time algorithms.\n\n---\nNew commits:",
    "created_at": "2021-07-10T13:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487026",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>At first, I propose an alternative ILP formulation based on the Miller-Tucker-Zemlin subtour elimination constraints to replace the current formulation which is based on the maximum average degree. I obtain the solution for the reported digraph with `glpk` in 1.4s on a macbook air.

```
sage: d6 = r'[E_S?_hKIH@eos[BSg???Q@FShGC?hTHUGM?IPug?JOEYCdOzdkQGo@ADA@AAg?GAQW?[aIaSwHYcD@qQb@Dd?\hJTI@OHlJ_?C_OEIKoeCR@_BC?Q??YBFosqITEA?IvCU_' 
sage: G = DiGraph(d6)                                                                                                                              
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 4.83 s, sys: 97.1 ms, total: 4.93 s
Wall time: 825 ms
sage: F                                                                                                                                            
[Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices,
 Digraph on 28 vertices]
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.3 s, sys: 65.2 ms, total: 2.37 s
Wall time: 2.38 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.36 s, sys: 7.96 ms, total: 1.36 s
Wall time: 1.37 s
```

Of course, it would be better to implement the polynomial time algorithms.

---
New commits:



---

archive/issue_comments_487027.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-10T13:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487027",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487028.json:
```json
{
    "body": "<a id='comment:9'></a>I get slightly better running time when I force equality for the number of incoming edges. \n\n```\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  \nCPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s\nWall time: 506 ms\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   \nCPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s\nWall time: 2.44 s\nsage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   \nCPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s\nWall time: 1.23 s\n```\nHowever, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.",
    "created_at": "2021-07-10T13:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487028",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'></a>I get slightly better running time when I force equality for the number of incoming edges. 

```
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Cplex')                                                                                  
CPU times: user 2.2 s, sys: 84.2 ms, total: 2.28 s
Wall time: 506 ms
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='Coin')                                                                                   
CPU times: user 2.36 s, sys: 53.2 ms, total: 2.41 s
Wall time: 2.44 s
sage: %time F = G.edge_disjoint_spanning_trees(5, solver='GLPK')                                                                                   
CPU times: user 1.22 s, sys: 8.05 ms, total: 1.22 s
Wall time: 1.23 s
```
However, if I remove the constraint ensuring that each vertex is incident to a selected edge, the program is way slower to solve.



---

archive/issue_comments_487029.json:
```json
{
    "body": "<a id='comment:10'></a>Do you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?",
    "created_at": "2021-07-12T00:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487029",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Do you want to keep trying to improve the speed on this ticket or go with this current version and work on further improvements later?



---

archive/issue_comments_487030.json:
```json
{
    "body": "<a id='comment:11'></a>I prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.",
    "created_at": "2021-07-12T05:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487030",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>I prefer to work on further improvements later. I had a look at a paper from Roskind and Tarjan for undirected graphs and it is already quite involved (I don't know if better / simpler algorithms have been proposed since 1985) and I have not seen any proposal for directed graphs yet.



---

archive/issue_comments_487031.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-12T06:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487031",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487032.json:
```json
{
    "body": "<a id='comment:12'></a>Okay, LGTM.",
    "created_at": "2021-07-12T06:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487032",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Okay, LGTM.



---

archive/issue_comments_487033.json:
```json
{
    "body": "<a id='comment:13'></a>With this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:\n\n```\nsage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')\nsage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') \nsage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') \n```\n\nEven worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.\n\nAnyway, while this resolved the one particular case I reported, it seems to have created various other problems.",
    "created_at": "2021-07-15T07:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487033",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'></a>With this ticket our claim is still way above that what sage can do. For those three graphs with 12 vertices, this ticket fails:

```
sage: g1 = DiGraph(r'KAGBiSahR?D?Hw@jFDbLyTWAE')
sage: g2 = DiGraph(r'KW?ACPRIJh_AKPCk_KAORC`Bw') 
sage: g3 = DiGraph(r'KOOB?R?@G_IGc_U}`NEMjE@CE') 
```

Even worse, it seems to work find on the develop branch. However, on the develop branch I'm getting `UnboundedLocalError`, because `classes` are referenced before assignment.

Anyway, while this resolved the one particular case I reported, it seems to have created various other problems.



---

archive/issue_comments_487034.json:
```json
{
    "body": "<a id='comment:14'></a>E.g.\n\n```\ng = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') \n```\n\nis resolved now, but didn't work before.",
    "created_at": "2021-07-15T07:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487034",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>E.g.

```
g = DiGraph(r'SKwrQo`?DpS?hP@OaOYABAYP`OO[_JekGGPI?O_?bKG?IB?B@[BDGiKBCQMGoTp?GGC_') 
```

is resolved now, but didn't work before.



---

archive/issue_comments_487035.json:
```json
{
    "body": "<a id='comment:15'></a>Can you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.",
    "created_at": "2021-07-15T08:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487035",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>Can you be more specific on the errors you get ?  I can try to improve the formulation, and with more time to implement the polynomial time algorithms.



---

archive/issue_comments_487036.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-15T08:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487036",
    "user": "https://github.com/dcoudert"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_487037.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T12:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487038.json:
```json
{
    "body": "<a id='comment:17'></a>I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?",
    "created_at": "2021-07-15T12:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487038",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?



---

archive/issue_comments_487039.json:
```json
{
    "body": "<a id='comment:18'></a>Whenever I say a graph `g` is not working, I mean that:\n\n```\nsage: k = G.edge_connectivity(5)\nsage: G.edge_disjoint_spanning_trees(k)\n```\n\ndoes not terminate in reasonable time.\n\nBefore this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.",
    "created_at": "2021-07-15T13:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487039",
    "user": "https://github.com/kliem"
}
```

<a id='comment:18'></a>Whenever I say a graph `g` is not working, I mean that:

```
sage: k = G.edge_connectivity(5)
sage: G.edge_disjoint_spanning_trees(k)
```

does not terminate in reasonable time.

Before this ticket, there was an `UnboundedLocalError`, whenever `k` was `0`.



---

archive/issue_comments_487040.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T15:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487041.json:
```json
{
    "body": "<a id='comment:20'></a>added some tests to deal with small cases (k=0 or 1, n=0).",
    "created_at": "2021-07-15T15:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487041",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>added some tests to deal with small cases (k=0 or 1, n=0).



---

archive/issue_comments_487042.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-15T15:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487042",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_487043.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-15T16:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487043",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_487044.json:
```json
{
    "body": "<a id='comment:21'></a>\n```\n+        edges = p.get_values(edge)\n+        for (e, c), val in edges.items():\n+            if val == 1:\n+                classes[c].add_edge(e)\n```\nsee #32197.",
    "created_at": "2021-07-15T16:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487044",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
```
+        edges = p.get_values(edge)
+        for (e, c), val in edges.items():
+            if val == 1:
+                classes[c].add_edge(e)
```
see #32197.



---

archive/issue_comments_487045.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:17 dcoudert]:\n> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?\n\n\nIt seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.\n\n```\nsage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      \nsage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           \nsage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        \nsage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')\n```\n\nThere is more. This is how I find them:\n\n```\nsage: def foo(n): \n....:     try: \n....:         alarm(20) \n....:         g = digraphs.RandomDirectedGNP(n, .3) \n....:         k = Integer(g.edge_connectivity()) \n....:         arborescences = g.edge_disjoint_spanning_trees(k) \n....:     except AlarmInterrupt: \n....:         print(g.dig6_string()) \n....:     finally: \n....:         cancel_alarm() \n....:  \nsage: while True:\n....:     foo(12)\n```",
    "created_at": "2021-07-16T12:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487045",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'></a>Replying to [comment:17 dcoudert]:
> I added some strengthening constraints to speed up the resolution of the problem. Is it better now ?


It seems to be an improvement. It takes way longer until I find a `DiGraph` with 12 vertices that does not work. And those do work in up to 40 seconds.

```
sage: g1 = DiGraph(r'KO_@OThwDWWCSAMOj_tCIa`DA')      
sage: g2 = DiGraph(r'KGGdZEaQEOyEBZU?DO@O`wKBk')           
sage: g3 = DiGraph(r'KH?cpUuwpp{AOH^SAEEDaWCbW')        
sage: g4 = DiGraph(r'K?IJHENIUh[_ODPCD_@Tr{Wxg')
```

There is more. This is how I find them:

```
sage: def foo(n): 
....:     try: 
....:         alarm(20) 
....:         g = digraphs.RandomDirectedGNP(n, .3) 
....:         k = Integer(g.edge_connectivity()) 
....:         arborescences = g.edge_disjoint_spanning_trees(k) 
....:     except AlarmInterrupt: 
....:         print(g.dig6_string()) 
....:     finally: 
....:         cancel_alarm() 
....:  
sage: while True:
....:     foo(12)
```



---

archive/issue_comments_487046.json:
```json
{
    "body": "<a id='comment:23'></a>With the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.\n\nBut for sure it would be much better to get a proper implementation of the polynomial time algorithms.",
    "created_at": "2021-07-16T14:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487046",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>With the new formulation and `glpk`, I get the solution for g1, g2, g3 in less than 1s and for g4 in 5s. I'm on a Intel MacBook air.

But for sure it would be much better to get a proper implementation of the polynomial time algorithms.



---

archive/issue_comments_487047.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-17T10:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487047",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_487048.json:
```json
{
    "body": "<a id='comment:24'></a>I have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.\n\n---\nLast 10 new commits:",
    "created_at": "2021-07-17T10:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487048",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>I have rebased the branch on #32197 (hope I did it correctly...) and now use the `integrality_tolerance`.

---
Last 10 new commits:



---

archive/issue_comments_487049.json:
```json
{
    "body": "<a id='comment:25'></a>The use of `get_values` looks fine. I have not looked at the details of the formulation used",
    "created_at": "2021-07-21T03:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487049",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>The use of `get_values` looks fine. I have not looked at the details of the formulation used



---

archive/issue_comments_487050.json:
```json
{
    "body": "<a id='comment:26'></a>The proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.\n\nFor undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.",
    "created_at": "2021-07-21T07:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487050",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>The proposed formulation is clearly not best possible. The constraints I have used have been proposed for solving tsp, steiner tree, and simple path problems in graphs with negative weight cycles.We can certainly do better, but I'm not aware of the good formulations for this problem.

For undirected graphs, I plan to implement a polynomial time algorithm (e.g., Roskind-Tarjan). It will take some time.



---

archive/issue_comments_487051.json:
```json
{
    "body": "<a id='comment:27'></a>This seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.\n\n```\nsage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') \n```\n\nI don't know if this can be improved at all. I'm just stating this.",
    "created_at": "2021-08-09T15:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487051",
    "user": "https://github.com/kliem"
}
```

<a id='comment:27'></a>This seems to be an improvement. However, there are still examples of very slow graphs with 12 vertices (one minute) and things get worse with more vertices, e.g.

```
sage: g = DiGraph(r'KAGHM`U`acCqHKEPmH@IHQdOy') 
```

I don't know if this can be improved at all. I'm just stating this.



---

archive/issue_events_085188.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85188"
}
```



---

archive/issue_comments_487052.json:
```json
{
    "body": "<a id='comment:29'></a>\n```\nsage: g = Graph(r'M_IkGr`_QCwWDk?E?')\nsage: g\nGraph on 14 vertices\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: %time trees = g.edge_disjoint_spanning_trees(k)\nCPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s\nWall time: 11.7 s\n```\n\nHence we lower the number of vertices in \n ||[2609cb5](https://git.sagemath.org/sage.git/commit/?id=2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||\nin #29935.",
    "created_at": "2021-10-04T10:01:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487052",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'></a>
```
sage: g = Graph(r'M_IkGr`_QCwWDk?E?')
sage: g
Graph on 14 vertices
sage: k = Integer(g.edge_connectivity()) // 2
sage: %time trees = g.edge_disjoint_spanning_trees(k)
CPU times: user 11.7 s, sys: 18.2 ms, total: 11.7 s
Wall time: 11.7 s
```

Hence we lower the number of vertices in 
 ||[2609cb5](https://git.sagemath.org/sage.git/commit/?id=2609cb529eeb3ce1d3c5c4be41c54dff0f2f03dc)||`edge disjoint spanning tree not as fast as claimed, see #32169`||
in #29935.



---

archive/issue_comments_487053.json:
```json
{
    "body": "<a id='comment:30'></a>I now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. \nHowever, I don't have any code for directed graphs (and I have not found any reference yet).\n\nWhich solution do you prefer:\n- remove the ILP for undirected graphs and replace it with my code\n- keep the ILP and add new code.\n\nNote that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.",
    "created_at": "2021-10-12T17:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487053",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>I now have an implementation of the [Roskind-Tarjan](https://pubsonline.informs.org/doi/abs/10.1287/moor.10.4.701) algorithm for finding minimum-cost edge-disjoint spanning trees in undirected simple graphs. 
However, I don't have any code for directed graphs (and I have not found any reference yet).

Which solution do you prefer:
- remove the ILP for undirected graphs and replace it with my code
- keep the ILP and add new code.

Note that the ILP is not needed if only for comparison purpose. I can add a method to check the validity of the solution.



---

archive/issue_comments_487054.json:
```json
{
    "body": "<a id='comment:31'></a>Since the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.",
    "created_at": "2021-10-13T05:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487054",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'></a>Since the ILP part is going to have to stay (at least for now) for the directed graphs, I propose we keep it so there is more uniformity between directed and undirected graphs. Plus I always like having comparison options.



---

archive/issue_comments_487055.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-14T10:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487055",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487056.json:
```json
{
    "body": "<a id='comment:33'></a>I have added the `Roskind-Tarjan` algorithm for undirected graphs.\n\ntest with `graphs.RandomGNP(50, .4)` and `cplex`, I get:\n\n```\nsage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_\n....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')\nsage: k = Integer(g.edge_connectivity()) // 2\nsage: k\n7\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\")\nCPU times: user 19.4 s, sys: 918 ms, total: 20.3 s\nWall time: 3.81 s\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\nsage: %time g.edge_disjoint_spanning_trees(k, algorithm=\"Roskind-Tarjan\")\nCPU times: user 113 ms, sys: 1.98 ms, total: 115 ms\nWall time: 115 ms\n[Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices,\n Graph on 50 vertices]\n```\n\nI'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that \"the argument directly translates to an efficient algorithm\"...).",
    "created_at": "2021-10-14T10:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487056",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'></a>I have added the `Roskind-Tarjan` algorithm for undirected graphs.

test with `graphs.RandomGNP(50, .4)` and `cplex`, I get:

```
sage: g = Graph('qeOuOHJ?Ua?hkiwmAFDuDh|]ICoCrNTNKCLBmE]JH?s~{\\??mRR@sF_Ox@mUo|jAoh_A[]gh?@I}nGNRLUSNME]I{`kE@Q?eM?o\\^JOKpBcGbr_LCSGCpPPOo?CixnJ_
....: _ekpG@T[A^fEikLaAPcOhWqS_IWROGhB\\TiCaexPXrQHZBxjREuapmPPXIIccRVRMwHq}FR?G?Gqs?')
sage: k = Integer(g.edge_connectivity()) // 2
sage: k
7
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="MILP")
CPU times: user 19.4 s, sys: 918 ms, total: 20.3 s
Wall time: 3.81 s
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
sage: %time g.edge_disjoint_spanning_trees(k, algorithm="Roskind-Tarjan")
CPU times: user 113 ms, sys: 1.98 ms, total: 115 ms
Wall time: 115 ms
[Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices,
 Graph on 50 vertices]
```

I'm still looking for an algorithm for directed graphs. Any pointer is more than welcome (please avoid papers saying that "the argument directly translates to an efficient algorithm"...).



---

archive/issue_comments_487057.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-14T16:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487058.json:
```json
{
    "body": "<a id='comment:35'></a>may be `EmptySetError` could be loaded at module level since it is used in several methods ?",
    "created_at": "2021-10-14T17:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487058",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'></a>may be `EmptySetError` could be loaded at module level since it is used in several methods ?



---

archive/issue_comments_487059.json:
```json
{
    "body": "<a id='comment:36'></a>Perhaps this paper will help.  It claims to provide \"a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time\".\n\n```\nRobert Endre Tarjan\nA good algorithm for edge-disjoint branching\nInformation Processing Letters\nVolume 3, Issue 2, November 1974, Pages 51-53\nhttps://doi.org/10.1016/0020-0190(74)90024-6\n```\n(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)",
    "created_at": "2021-10-14T19:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487059",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:36'></a>Perhaps this paper will help.  It claims to provide "a simple algorithm which does find k disjoint branchings, if they exist, in polynomial time".

```
Robert Endre Tarjan
A good algorithm for edge-disjoint branching
Information Processing Letters
Volume 3, Issue 2, November 1974, Pages 51-53
https://doi.org/10.1016/0020-0190(74)90024-6
```
(When a branching is rooted at a single vertex, I think it is a directed tree that is rooted at that vertex.)



---

archive/issue_comments_487060.json:
```json
{
    "body": "<a id='comment:37'></a>Actually, the good ones seems to be\n- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022\n- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7\n\nIt seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.",
    "created_at": "2021-10-14T20:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487060",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'></a>Actually, the good ones seems to be
- Harold N. Gabow: A Matroid Approach to Finding Edge Connectivity and Packing Arborescences. J. Comput. Syst. Sci. 50(2): 259-273 (1995) https://doi.org/10.1006/jcss.1995.1022
- Loukas Georgiadis, Dionysios Kefallinos, Luigi Laura, Nikos Parotsidis: An Experimental Study of Algorithms for Computing the Edge Connectivity of a Directed Graph. ALENEX 2021: 85-97 https://epubs.siam.org/doi/10.1137/1.9781611976472.7

It seems that the algorithm of Gabow is not so hard to implement (but not easy).If I understand well, the algorithm computes k-spanning-trees assuming (k-1) spanning trees are given as input (the trees might be modified). So it's incremental. Several steps are similar to the `Roskind-Tarjan` algorithms I implemented for undirected graphs. I will give it a try asap.



---

archive/issue_comments_487061.json:
```json
{
    "body": "<a id='comment:38'></a>If you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.\n\nI'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.",
    "created_at": "2021-11-19T12:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487061",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:38'></a>If you agree, I propose to move the code of the `Roskind-Tarjan` algorithm to a separate ticket. This way, it might be reviewed and possibly added to sagemath soon.

I'm working on the Gabow algorithm. Lukas Georgiadis kindly seeded me some C code, and I'm currently writing a Cython version. It requires careful checking, test and a lot of comments. It's a long and not easy code, so it takes time.



---

archive/issue_comments_487062.json:
```json
{
    "body": "<a id='comment:39'></a>I have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.\n\n---\nNew commits:",
    "created_at": "2021-11-20T14:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487062",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:39'></a>I have moved the `Roskind-Tarjan` algorithm in #32911 and restart this ticket over #32911.

---
New commits:



---

archive/issue_comments_487063.json:
```json
{
    "body": "<a id='comment:40'></a>FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\nI'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.",
    "created_at": "2021-12-08T12:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487063",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:40'></a>FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 

I'm still working on the second part of the paper of Gabow for extracting the k-edge-disjoint spanning trees (not obvious). I will not push code before it's done as I may have to refactor some parts of the first algorithm that are also used in the second part.



---

archive/issue_comments_487064.json:
```json
{
    "body": "<a id='comment:41'></a>No problem. Just let me know when you're ready for a review.",
    "created_at": "2021-12-09T00:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487064",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:41'></a>No problem. Just let me know when you're ready for a review.



---

archive/issue_events_085189.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85189"
}
```



---

archive/issue_events_085190.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85190"
}
```



---

archive/issue_events_085191.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85191"
}
```



---

archive/issue_events_085192.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85192"
}
```



---

archive/issue_comments_487065.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:40 dcoudert]:\n> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... \n\n\nThis is now #33839.",
    "created_at": "2022-05-11T14:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487065",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:44'></a>Replying to [comment:40 dcoudert]:
> FYI: thanks to the Loukas Georgiadis and his co-authors (see #comment:37), I now have a working implementation of the algorithm of Gabow for computing the edge connectivity of a digraph. They gave me a pure C code that I turned into an easier to read Cython code. It still lacks comments and doctests... 


This is now #33839.



---

archive/issue_comments_487066.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-14T22:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487066",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487067.json:
```json
{
    "body": "<a id='comment:45'></a>Then positive review.",
    "created_at": "2022-05-14T22:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487067",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>Then positive review.



---

archive/issue_comments_487068.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-18T22:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487068",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_085193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-18T22:18:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32169#event-85193"
}
```



---

archive/issue_comments_487069.json:
```json
{
    "body": "<a id='comment:47'></a>This makes the test suite hang with certain random seeds:\n\n```\nsage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py\n    Timed out\n**********************************************************************\nTests run before process (pid=581821) timed out:\n[...]\nsage: trees = g.edge_disjoint_spanning_trees(k, algorithm=\"MILP\") ## line 6579 ##\n------------------------------------------------------------------------\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]\n/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]\n/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]\n/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]\n/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]\n/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]\n/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]\n/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]\n/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]\n/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]\n/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]\n/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]\n/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]\n/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]\n/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]\n/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]\n/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]\n/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]\n/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]\n/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]\n/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]\n/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]\n/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]\n/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]\n/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]\n/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]\n/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]\n/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]\n/usr/bin/python(_start+0x25)[0x5642f4693045]\n------------------------------------------------------------------------\n```",
    "created_at": "2022-05-22T20:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487069",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:47'></a>This makes the test suite hang with certain random seeds:

```
sage -t --long --random-seed=226966935809951887489348852629671397336 /usr/lib/python3.10/site-packages/sage/graphs/generic_graph.py
    Timed out
**********************************************************************
Tests run before process (pid=581821) timed out:
[...]
sage: trees = g.edge_disjoint_spanning_trees(k, algorithm="MILP") ## line 6579 ##
------------------------------------------------------------------------
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x76fd)[0x7fdff2caa6fd]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0x77bc)[0x7fdff2caa7bc]
/usr/lib/python3.10/site-packages/cysignals/signals.cpython-310-x86_64-linux-gnu.so(+0xa4e2)[0x7fdff2cad4e2]
/usr/lib/libc.so.6(+0x3e8e0)[0x7fdff42788e0]
/usr/lib/libglpk.so.40(glp_get_mat_col+0x4b)[0x7fdf7d591dfb]
/usr/lib/libglpk.so.40(glp_eval_tab_row+0x198)[0x7fdf7d5b3328]
/usr/lib/libglpk.so.40(+0x43ed5)[0x7fdf7d5b7ed5]
/usr/lib/libglpk.so.40(+0x49950)[0x7fdf7d5bd950]
/usr/lib/libglpk.so.40(+0x3be63)[0x7fdf7d5afe63]
/usr/lib/libglpk.so.40(glp_intopt+0xd2c)[0x7fdf7d5b108c]
/usr/lib/python3.10/site-packages/sage/numerical/backends/glpk_backend.cpython-310-x86_64-linux-gnu.so(+0x1f618)[0x7fdf7d6be618]
/usr/lib/python3.10/site-packages/sage/numerical/mip.cpython-310-x86_64-linux-gnu.so(+0x2bc83)[0x7fdf84e5ac83]
/usr/lib/libpython3.10.so.1.0(+0x154be1)[0x7fdff459bbe1]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5aaf)[0x7fdff4590b9f]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x1fb9cb)[0x7fdff46429cb]
/usr/lib/libpython3.10.so.1.0(+0x15528f)[0x7fdff459c28f]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x346)[0x7fdff458b436]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(_PyObject_Call_Prepend+0x6d)[0x7fdff45a4c5d]
/usr/lib/libpython3.10.so.1.0(+0x22d462)[0x7fdff4674462]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x2ab)[0x7fdff45954bb]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x149a)[0x7fdff458c58a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyObject_FastCallDictTstate+0xdb)[0x7fdff45947ab]
/usr/lib/libpython3.10.so.1.0(+0x15d08d)[0x7fdff45a408d]
/usr/lib/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x283)[0x7fdff4595493]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x5164)[0x7fdff4590254]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(+0x1603f6)[0x7fdff45a73f6]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x4ebf)[0x7fdff458ffaf]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(_PyFunction_Vectorcall+0x79)[0x7fdff459c099]
/usr/lib/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x77a)[0x7fdff458b86a]
/usr/lib/libpython3.10.so.1.0(+0x143080)[0x7fdff458a080]
/usr/lib/libpython3.10.so.1.0(PyEval_EvalCode+0x94)[0x7fdff463cbb4]
/usr/lib/libpython3.10.so.1.0(+0x205103)[0x7fdff464c103]
/usr/lib/libpython3.10.so.1.0(+0x200a9a)[0x7fdff4647a9a]
/usr/lib/libpython3.10.so.1.0(+0xa183c)[0x7fdff44e883c]
/usr/lib/libpython3.10.so.1.0(_PyRun_SimpleFileObject+0x3cc)[0x7fdff44e84ed]
/usr/lib/libpython3.10.so.1.0(_PyRun_AnyFileObject+0x89)[0x7fdff44e8ea0]
/usr/lib/libpython3.10.so.1.0(Py_RunMain+0x3dd)[0x7fdff46586fd]
/usr/lib/libpython3.10.so.1.0(Py_BytesMain+0x3b)[0x7fdff462e19b]
/usr/lib/libc.so.6(+0x29290)[0x7fdff4263290]
/usr/lib/libc.so.6(__libc_start_main+0x8a)[0x7fdff426334a]
/usr/bin/python(_start+0x25)[0x5642f4693045]
------------------------------------------------------------------------
```



---

archive/issue_comments_487070.json:
```json
{
    "body": "<a id='comment:48'></a>outch :(\n\nThis is for\n\n```\ng = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')\n```\nIt's a too hard instance for this formulation with `GLPK`.\n\nI see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).",
    "created_at": "2022-05-22T22:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487070",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:48'></a>outch :(

This is for

```
g = Graph(']sLa{AZZs?fCoOOPAqJaO_byp|e?w[U@cObCktCSsAO]b{cndeJIT`G~dcaXWEBwUk_kLar@sg')
```
It's a too hard instance for this formulation with `GLPK`.

I see 2 solutions here: use a much smaller instance (10 nodes ?) or deprecate the `ILP` formulation. We have the polynomial time  `Roskind-Tarjan` algorithm for undirected graphs and we should soon have an algorithm for directed graphs (GSoC project).



---

archive/issue_comments_487071.json:
```json
{
    "body": "<a id='comment:49'></a>I would make the number of nodes for the test smaller as it is less invasive of a fix.",
    "created_at": "2022-05-22T22:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487071",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:49'></a>I would make the number of nodes for the test smaller as it is less invasive of a fix.



---

archive/issue_comments_487072.json:
```json
{
    "body": "<a id='comment:50'></a>I opened #33884.",
    "created_at": "2022-05-22T22:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32169#issuecomment-487072",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:50'></a>I opened #33884.
