# Issue 32701: sage.rings.{real,complex}_double: Remove compile time dependency on cypari2

archive/issues_032464.json:
```json
{
    "assignees": [],
    "body": "... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.\n\nThis is to support modularization (#29705):\n- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce`) fully functional without having to pull in PARI (at compile time or run time)\n- likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).\n\n\nCC:  @kliem @videlec @tscrim @yyyyx4\n\nBranch/Commit: **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**\n\nReviewer: **Matthias Koeppe, Travis Scrimshaw**\n\nAuthor: **Matthias Koeppe, Jonathan Kliem**\n\nComponent: **refactoring**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32701_\n\n",
    "closed_at": "2021-10-31T22:21:08Z",
    "created_at": "2021-10-16T03:20:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.rings.{real,complex}_double: Remove compile time dependency on cypari2",
    "type": "issue",
    "updated_at": "2021-10-31T22:21:08Z",
    "url": "https://github.com/sagemath/sage/issues/32701",
    "user": "https://github.com/mkoeppe"
}
```
... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.

This is to support modularization (#29705):
- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce`) fully functional without having to pull in PARI (at compile time or run time)
- likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).


CC:  @kliem @videlec @tscrim @yyyyx4

Branch/Commit: **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**

Reviewer: **Matthias Koeppe, Travis Scrimshaw**

Author: **Matthias Koeppe, Jonathan Kliem**

Component: **refactoring**

_Issue created by migration from https://trac.sagemath.org/ticket/32701_





---

archive/issue_events_447174.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-16T03:20:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447174"
}
```



---

archive/issue_events_447175.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-16T03:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447175"
}
```



---

archive/issue_events_447176.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-16T03:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447176"
}
```



---

archive/issue_events_447177.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-16T03:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447177"
}
```



---

archive/issue_comments_527452.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-22T01:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527452",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_comments_527453.json:
```json
{
    "body": "Author: **Matthias Koeppe, ...**",
    "created_at": "2021-10-22T01:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527453",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe, ...**



---

archive/issue_comments_527454.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHere's an attempt but I'm getting doctest errors:\n\n```\nsage -t --random-seed=0 src/sage/rings/polynomial/polynomial_element.pyx\n      File \"sage/rings/complex_double.pyx\", line 387, in sage.rings.complex_double.ComplexDoubleField_class._element_constructor_ (build/cythonized/sage/rings/complex_double.c:6109)\n        return ComplexDoubleElement(x, 0)\n      File \"sage/rings/complex_double.pyx\", line 755, in sage.rings.complex_double.ComplexDoubleElement.__init__ (build/cythonized/sage/rings/complex_double.c:9194)\n        self._complex = gsl_complex_rect(real, imag)\n      File \"cypari2/gen.pyx\", line 2002, in cypari2.gen.Gen.__float__\n      File \"cypari2/handle_error.pyx\", line 213, in cypari2.handle_error._pari_err_handle\n    cypari2.handle_error.PariError: incorrect type in gtodouble [t_REAL expected] (t_COMPLEX)\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cc2fa71426e061bd030e85177766cd7c5dd05c4\"><code>2cc2fa7</code></a></td><td><code>src/sage/rings/real_double.pyx: Replace cimport from cypari.convert by method-local import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757\"><code>d641dc6</code></a></td><td><code>src/sage/rings/complex_double.pyx: Move PARI conversion functions to src/sage/libs/pari/</code></td></tr></table>\n",
    "created_at": "2021-10-22T01:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527454",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Here's an attempt but I'm getting doctest errors:

```
sage -t --random-seed=0 src/sage/rings/polynomial/polynomial_element.pyx
      File "sage/rings/complex_double.pyx", line 387, in sage.rings.complex_double.ComplexDoubleField_class._element_constructor_ (build/cythonized/sage/rings/complex_double.c:6109)
        return ComplexDoubleElement(x, 0)
      File "sage/rings/complex_double.pyx", line 755, in sage.rings.complex_double.ComplexDoubleElement.__init__ (build/cythonized/sage/rings/complex_double.c:9194)
        self._complex = gsl_complex_rect(real, imag)
      File "cypari2/gen.pyx", line 2002, in cypari2.gen.Gen.__float__
      File "cypari2/handle_error.pyx", line 213, in cypari2.handle_error._pari_err_handle
    cypari2.handle_error.PariError: incorrect type in gtodouble [t_REAL expected] (t_COMPLEX)
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cc2fa71426e061bd030e85177766cd7c5dd05c4"><code>2cc2fa7</code></a></td><td><code>src/sage/rings/real_double.pyx: Replace cimport from cypari.convert by method-local import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757"><code>d641dc6</code></a></td><td><code>src/sage/rings/complex_double.pyx: Move PARI conversion functions to src/sage/libs/pari/</code></td></tr></table>




---

archive/issue_comments_527455.json:
```json
{
    "body": "Commit: **[`d641dc6`](https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757)**",
    "created_at": "2021-10-22T01:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527455",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`d641dc6`](https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757)**



---

archive/issue_comments_527456.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-25T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527456",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_comments_527457.json:
```json
{
    "body": "Changed commit from **[`d641dc6`](https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757)** to **[`bc1710c`](https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8)**",
    "created_at": "2021-10-25T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527457",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`d641dc6`](https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757)** to **[`bc1710c`](https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8)**



---

archive/issue_comments_527458.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nChecking the most obvious thing helped:\n\n```\nsage: from sage.rings.complex_double import pari_gen\nsage: pari_gen\n()\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e43dfad561d3cc0f7b659b89eb4b2041e970fc20\"><code>e43dfad</code></a></td><td><code>Merge branch 'u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2' of git://trac.sagemath.org/sage into u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8\"><code>bc1710c</code></a></td><td><code>fix incorrect import</code></td></tr></table>\n",
    "created_at": "2021-10-25T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527458",
    "user": "https://github.com/kliem"
}
```

<div id="comment:4" align="right">comment:4</div>

Checking the most obvious thing helped:

```
sage: from sage.rings.complex_double import pari_gen
sage: pari_gen
()
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e43dfad561d3cc0f7b659b89eb4b2041e970fc20"><code>e43dfad</code></a></td><td><code>Merge branch 'u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2' of git://trac.sagemath.org/sage into u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8"><code>bc1710c</code></a></td><td><code>fix incorrect import</code></td></tr></table>




---

archive/issue_comments_527459.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe, Jonathan Kliem**",
    "created_at": "2021-10-25T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527459",
    "user": "https://github.com/kliem"
}
```

Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe, Jonathan Kliem**



---

archive/issue_comments_527460.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71b62be886046fe6c1fe0eb6b8ba543d90ec0293\"><code>71b62be</code></a></td><td><code>new_gen_from_double not available as python function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82\"><code>64984be</code></a></td><td><code>coverage</code></td></tr></table>\n",
    "created_at": "2021-10-25T13:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527460",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71b62be886046fe6c1fe0eb6b8ba543d90ec0293"><code>71b62be</code></a></td><td><code>new_gen_from_double not available as python function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82"><code>64984be</code></a></td><td><code>coverage</code></td></tr></table>




---

archive/issue_comments_527461.json:
```json
{
    "body": "Changed commit from **[`bc1710c`](https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8)** to **[`64984be`](https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82)**",
    "created_at": "2021-10-25T13:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527461",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc1710c`](https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8)** to **[`64984be`](https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82)**



---

archive/issue_events_447178.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-10-25T13:11:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447178"
}
```



---

archive/issue_comments_527462.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThank you! Let's wait for the patchbot",
    "created_at": "2021-10-25T15:34:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527462",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Thank you! Let's wait for the patchbot



---

archive/issue_comments_527463.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTesting locally, I am seeing:\n\n```\n[sagelib-9.5.beta4] warning: sage/libs/pari/convert_sage_complex_double.pxd:4:44: Declarations should not be declared inline.\n[sagelib-9.5.beta4] warning: sage/libs/pari/convert_sage_complex_double.pyx:9:6: Function 'pari_to_cdf' previously declared as 'cpdef'\n```",
    "created_at": "2021-10-25T21:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527463",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Testing locally, I am seeing:

```
[sagelib-9.5.beta4] warning: sage/libs/pari/convert_sage_complex_double.pxd:4:44: Declarations should not be declared inline.
[sagelib-9.5.beta4] warning: sage/libs/pari/convert_sage_complex_double.pyx:9:6: Function 'pari_to_cdf' previously declared as 'cpdef'
```



---

archive/issue_comments_527464.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-25T22:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527464",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_comments_527465.json:
```json
{
    "body": "Reviewer: **..., Matthias Koeppe**",
    "created_at": "2021-10-25T22:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527465",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **..., Matthias Koeppe**



---

archive/issue_comments_527466.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244\"><code>16d2850</code></a></td><td><code>src/sage/libs/pari/convert_sage_complex_double.pxd (pari_to_cdf): cdef inline -> cpdef</code></td></tr></table>\n",
    "created_at": "2021-10-25T22:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527466",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244"><code>16d2850</code></a></td><td><code>src/sage/libs/pari/convert_sage_complex_double.pxd (pari_to_cdf): cdef inline -> cpdef</code></td></tr></table>




---

archive/issue_comments_527467.json:
```json
{
    "body": "Changed commit from **[`64984be`](https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82)** to **[`16d2850`](https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244)**",
    "created_at": "2021-10-25T22:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527467",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64984be`](https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82)** to **[`16d2850`](https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244)**



---

archive/issue_comments_527468.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI think this requires some checking for speed regressions because the function is both no longer `inline` nor `cimport`-ed, and I could see this being used in a tight loop.",
    "created_at": "2021-10-26T05:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527468",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

I think this requires some checking for speed regressions because the function is both no longer `inline` nor `cimport`-ed, and I could see this being used in a tight loop.



---

archive/issue_comments_527469.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tscrim](#comment:13):\n> I think this requires some checking for speed regressions because the function is both no longer `inline` nor `cimport`-ed, and I could see this being used in a tight loop.\n\nThings get about 1\u00b5s slower:\n\nBefore:\n\n```\nsage: a = CDF(1,2)\nsage: %timeit a.__pari__()\n199 ns \u00b1 0.214 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit CDF(p)\n310 ns \u00b1 0.827 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: b = RDF(1.3)\nsage: %timeit b.__pari__()\n160 ns \u00b1 0.128 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: p = b.__pari__()\nsage: %timeit RDF(p)\n174 ns \u00b1 2.06 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: %timeit a.eta()\n7.99 \u00b5s \u00b1 12.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each) \nsage: %timeit a.dilog()\n46.2 \u00b5s \u00b1 64.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\nsage: %timeit a.gamma()\n33.5 \u00b5s \u00b1 59.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\nsage: %timeit a.zeta()\n74.4 \u00b5s \u00b1 726 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n```\n\nAfter:\n\n```\nsage: a = CDF(1,2)\nsage: %timeit a.__pari__()\n736 ns \u00b1 0.283 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit CDF(p)\n327 ns \u00b1 0.544 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: b = RDF(1.3)\nsage: %timeit b.__pari__()\n707 ns \u00b1 0.792 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: p = b.__pari__()\nsage: %timeit RDF(p)\n157 ns \u00b1 0.072 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: %timeit a.eta()\n9.31 \u00b5s \u00b1 32.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit a.dilog()\n48.1 \u00b5s \u00b1 389 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\nsage: %timeit a.gamma()\n36.8 \u00b5s \u00b1 549 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\nsage: %timeit a.zeta()\n76.2 \u00b5s \u00b1 1.62 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n```\n\nI doubt that calling `__pari__` or `_element_constructor_` is the crucial task of some algorithm.\n\nIf the regression is a problem, we could find a faster way to deal with the whole `pari_to_cdf(self.__pari__()...)` calls, e.g.\n\n```diff\ndiff --git a/src/sage/libs/pari/convert_sage_complex_double.pyx b/src/sage/libs/pari/convert_sage_complex_double.pyx\nindex 5a04aff7f6..f8859a7dea 100644\n--- a/src/sage/libs/pari/convert_sage_complex_double.pyx\n+++ b/src/sage/libs/pari/convert_sage_complex_double.pyx\n@@ -58,3 +58,6 @@ cpdef Gen new_gen_from_complex_double_element(ComplexDoubleElement self):\n         return new_gen_from_double(self._complex.real)\n     else:\n         return new_t_COMPLEX_from_double(self._complex.real, self._complex.imag)\n+\n+cpdef ComplexDoubleElement complex_double_eta(ComplexDoubleElement self, int flag):\n+    return pari_to_cdf(new_gen_from_complex_double_element(self).eta(flag))\ndiff --git a/src/sage/rings/complex_double.pyx b/src/sage/rings/complex_double.pyx\nindex ecc326b439..0aef6a3aad 100644\n--- a/src/sage/rings/complex_double.pyx\n+++ b/src/sage/rings/complex_double.pyx\n@@ -92,9 +92,11 @@ from sage.structure.coerce cimport is_numpy_type\n try:\n     from cypari2.gen import Gen as pari_gen\n     from sage.libs.pari.convert_sage_complex_double import pari_to_cdf\n+    from sage.libs.pari.convert_sage_complex_double import complex_double_eta\n \n except ImportError:\n     pari_gen = ()\n+    complex_double_eta = None\n \n from . import complex_mpfr\n \n@@ -2241,8 +2243,11 @@ cdef class ComplexDoubleElement(FieldElement):\n             # this, PARI can easily underflow.\n             return ComplexDoubleElement(0,0)\n \n+        if complex_double_eta is None:\n+            raise ImportError(\"pari not found\")\n+\n         cdef int flag = 0 if omit_frac else 1\n-        return pari_to_cdf(self.__pari__().eta(flag))\n+        return complex_double_eta(self, flag)\n```\n\nThis is even faster than the original approach with new timing being:\n\n```\nsage: a = CDF(1,2)\nsage: %timeit a.eta()\n7.89 \u00b5s \u00b1 9.65 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\nThis approach could be used anywhere but to speed up `__pari__` and `_element_constructor_`.",
    "created_at": "2021-10-26T08:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527469",
    "user": "https://github.com/kliem"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tscrim](#comment:13):
> I think this requires some checking for speed regressions because the function is both no longer `inline` nor `cimport`-ed, and I could see this being used in a tight loop.

Things get about 1µs slower:

Before:

```
sage: a = CDF(1,2)
sage: %timeit a.__pari__()
199 ns ± 0.214 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: p = a.__pari__()
sage: %timeit CDF(p)
310 ns ± 0.827 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: b = RDF(1.3)
sage: %timeit b.__pari__()
160 ns ± 0.128 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: p = b.__pari__()
sage: %timeit RDF(p)
174 ns ± 2.06 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: %timeit a.eta()
7.99 µs ± 12.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
sage: %timeit a.dilog()
46.2 µs ± 64.8 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit a.gamma()
33.5 µs ± 59.2 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit a.zeta()
74.4 µs ± 726 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```

After:

```
sage: a = CDF(1,2)
sage: %timeit a.__pari__()
736 ns ± 0.283 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: p = a.__pari__()
sage: %timeit CDF(p)
327 ns ± 0.544 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: b = RDF(1.3)
sage: %timeit b.__pari__()
707 ns ± 0.792 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: p = b.__pari__()
sage: %timeit RDF(p)
157 ns ± 0.072 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: %timeit a.eta()
9.31 µs ± 32.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit a.dilog()
48.1 µs ± 389 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit a.gamma()
36.8 µs ± 549 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit a.zeta()
76.2 µs ± 1.62 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```

I doubt that calling `__pari__` or `_element_constructor_` is the crucial task of some algorithm.

If the regression is a problem, we could find a faster way to deal with the whole `pari_to_cdf(self.__pari__()...)` calls, e.g.

```diff
diff --git a/src/sage/libs/pari/convert_sage_complex_double.pyx b/src/sage/libs/pari/convert_sage_complex_double.pyx
index 5a04aff7f6..f8859a7dea 100644
--- a/src/sage/libs/pari/convert_sage_complex_double.pyx
+++ b/src/sage/libs/pari/convert_sage_complex_double.pyx
@@ -58,3 +58,6 @@ cpdef Gen new_gen_from_complex_double_element(ComplexDoubleElement self):
         return new_gen_from_double(self._complex.real)
     else:
         return new_t_COMPLEX_from_double(self._complex.real, self._complex.imag)
+
+cpdef ComplexDoubleElement complex_double_eta(ComplexDoubleElement self, int flag):
+    return pari_to_cdf(new_gen_from_complex_double_element(self).eta(flag))
diff --git a/src/sage/rings/complex_double.pyx b/src/sage/rings/complex_double.pyx
index ecc326b439..0aef6a3aad 100644
--- a/src/sage/rings/complex_double.pyx
+++ b/src/sage/rings/complex_double.pyx
@@ -92,9 +92,11 @@ from sage.structure.coerce cimport is_numpy_type
 try:
     from cypari2.gen import Gen as pari_gen
     from sage.libs.pari.convert_sage_complex_double import pari_to_cdf
+    from sage.libs.pari.convert_sage_complex_double import complex_double_eta
 
 except ImportError:
     pari_gen = ()
+    complex_double_eta = None
 
 from . import complex_mpfr
 
@@ -2241,8 +2243,11 @@ cdef class ComplexDoubleElement(FieldElement):
             # this, PARI can easily underflow.
             return ComplexDoubleElement(0,0)
 
+        if complex_double_eta is None:
+            raise ImportError("pari not found")
+
         cdef int flag = 0 if omit_frac else 1
-        return pari_to_cdf(self.__pari__().eta(flag))
+        return complex_double_eta(self, flag)
```

This is even faster than the original approach with new timing being:

```
sage: a = CDF(1,2)
sage: %timeit a.eta()
7.89 µs ± 9.65 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

This approach could be used anywhere but to speed up `__pari__` and `_element_constructor_`.



---

archive/issue_comments_527470.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThank you for doing the timings. If someone is using polynomials or matrices over RDF/CDF and then running a PARI algorithm on them and has to convert back and forth, then this could have some noticeable effects on speed. With this, that main thing it would be going through is `__pari__` and `_element_constructor_`. Although my suspicion is that this would not have a major impact, if someone is doing that.\n\nPerhaps this is just the cost of doing business, but I would have expected this to be okay to do. To be precise about \"this\", I mean implementing a Cython conversion to/from a library. How useful is this to modularization?\n\nI am actually more worried about #30022 having an actual impact on calculations because `ZZ` and `QQ` are much more common for base ring computations.",
    "created_at": "2021-10-26T11:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527470",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Thank you for doing the timings. If someone is using polynomials or matrices over RDF/CDF and then running a PARI algorithm on them and has to convert back and forth, then this could have some noticeable effects on speed. With this, that main thing it would be going through is `__pari__` and `_element_constructor_`. Although my suspicion is that this would not have a major impact, if someone is doing that.

Perhaps this is just the cost of doing business, but I would have expected this to be okay to do. To be precise about "this", I mean implementing a Cython conversion to/from a library. How useful is this to modularization?

I am actually more worried about #30022 having an actual impact on calculations because `ZZ` and `QQ` are much more common for base ring computations.



---

archive/issue_comments_527471.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIf you really want to be fast, you should with `__pari__` and `_element_constructor_` you can use `pari_to_cdf` or `new_gen_from_complex_double_element` directly:\n\n```\nsage: from sage.libs.pari.convert_sage_complex_double import pari_to_cdf, new_gen_from_complex_double_element\nsage: a = CDF(1,2)\nsage: %timeit new_gen_from_complex_double_element(a)\n182 ns \u00b1 0.109 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit pari_to_cdf(p)\n106 ns \u00b1 0.0893 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\n```\n\nIn that way, this ticket is an improvement. I'm fixing the other use cases and I will also see, whether #30022 can be improved.",
    "created_at": "2021-10-26T11:34:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527471",
    "user": "https://github.com/kliem"
}
```

<div id="comment:16" align="right">comment:16</div>

If you really want to be fast, you should with `__pari__` and `_element_constructor_` you can use `pari_to_cdf` or `new_gen_from_complex_double_element` directly:

```
sage: from sage.libs.pari.convert_sage_complex_double import pari_to_cdf, new_gen_from_complex_double_element
sage: a = CDF(1,2)
sage: %timeit new_gen_from_complex_double_element(a)
182 ns ± 0.109 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: p = a.__pari__()
sage: %timeit pari_to_cdf(p)
106 ns ± 0.0893 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
```

In that way, this ticket is an improvement. I'm fixing the other use cases and I will also see, whether #30022 can be improved.



---

archive/issue_comments_527472.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-26T11:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527472",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_comments_527473.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/388b05f54be5419a1c0f68c765a6e6064301e1ac\"><code>388b05f</code></a></td><td><code>speed up conversion for complex double</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001\"><code>a64d72b</code></a></td><td><code>speed up conversion from real double</code></td></tr></table>\n",
    "created_at": "2021-10-26T11:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527473",
    "user": "https://github.com/kliem"
}
```

<div id="comment:17"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/388b05f54be5419a1c0f68c765a6e6064301e1ac"><code>388b05f</code></a></td><td><code>speed up conversion for complex double</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001"><code>a64d72b</code></a></td><td><code>speed up conversion from real double</code></td></tr></table>




---

archive/issue_comments_527474.json:
```json
{
    "body": "Changed commit from **[`16d2850`](https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244)** to **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)**",
    "created_at": "2021-10-26T11:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527474",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`16d2850`](https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244)** to **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)**



---

archive/issue_comments_527475.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nBefore this ticket:\n\n```\nsage: a = RDF(2.3)\nsage: %timeit a.__pari__()\n174 ns \u00b1 0.0989 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit RDF(p)\n161 ns \u00b1 0.0978 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: a = CDF(1,1)\nsage: %timeit a.__pari__()\n205 ns \u00b1 0.299 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit CDF(p)\n323 ns \u00b1 0.852 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: %timeit a.eta()\n7.38 \u00b5s \u00b1 18.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit a.gamma()\n33.2 \u00b5s \u00b1 74.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n```\n\nWith this ticket:\n\n```\nsage: a = RDF(2.3)\nsage: %timeit a.__pari__()\n173 ns \u00b1 0.137 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit RDF(p)\n170 ns \u00b1 0.109 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\nsage: a = CDF(1,1)\nsage: %timeit a.__pari__()\n214 ns \u00b1 0.392 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: p = a.__pari__()\nsage: %timeit CDF(p)\n376 ns \u00b1 0.567 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: %timeit a.eta()\n7.41 \u00b5s \u00b1 18.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit a.gamma()\n33.2 \u00b5s \u00b1 42.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n```",
    "created_at": "2021-10-26T12:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527475",
    "user": "https://github.com/kliem"
}
```

<div id="comment:18" align="right">comment:18</div>

Before this ticket:

```
sage: a = RDF(2.3)
sage: %timeit a.__pari__()
174 ns ± 0.0989 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: p = a.__pari__()
sage: %timeit RDF(p)
161 ns ± 0.0978 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: a = CDF(1,1)
sage: %timeit a.__pari__()
205 ns ± 0.299 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: p = a.__pari__()
sage: %timeit CDF(p)
323 ns ± 0.852 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: %timeit a.eta()
7.38 µs ± 18.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit a.gamma()
33.2 µs ± 74.6 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```

With this ticket:

```
sage: a = RDF(2.3)
sage: %timeit a.__pari__()
173 ns ± 0.137 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: p = a.__pari__()
sage: %timeit RDF(p)
170 ns ± 0.109 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
sage: a = CDF(1,1)
sage: %timeit a.__pari__()
214 ns ± 0.392 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: p = a.__pari__()
sage: %timeit CDF(p)
376 ns ± 0.567 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: %timeit a.eta()
7.41 µs ± 18.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit a.gamma()
33.2 µs ± 42.6 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```



---

archive/issue_comments_527476.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThat requires more understanding of the internal workings of Sage, is not local to the parent object, and is not flexible when the parent changes. So I am not sure it is the best path.\n\nHowever, at least with these changes, the effect on the function calls are minimized.",
    "created_at": "2021-10-26T12:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527476",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

That requires more understanding of the internal workings of Sage, is not local to the parent object, and is not flexible when the parent changes. So I am not sure it is the best path.

However, at least with these changes, the effect on the function calls are minimized.



---

archive/issue_comments_527477.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYes, having things fast out of the box without extra tricks is important.",
    "created_at": "2021-10-26T12:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527477",
    "user": "https://github.com/kliem"
}
```

<div id="comment:20" align="right">comment:20</div>

Yes, having things fast out of the box without extra tricks is important.



---

archive/issue_comments_527478.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-... like done in #30022\n+... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.\n+\n+This is to support modularization (#29705):\n+- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce) fully functional without having to pull in PARI (at compile time or run time)\n+- likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).\n+\n``````\n",
    "created_at": "2021-10-26T17:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527478",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-... like done in #30022
+... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.
+
+This is to support modularization (#29705):
+- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce) fully functional without having to pull in PARI (at compile time or run time)
+- likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).
+
``````




---

archive/issue_comments_527479.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@tscrim](#comment:15):\n>  How useful is this to modularization?\n\nNot sure if I'm answering this in the right context of your question, but I have expanded the ticket description to explain the motivation for this ticket.",
    "created_at": "2021-10-26T17:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527479",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@tscrim](#comment:15):
>  How useful is this to modularization?

Not sure if I'm answering this in the right context of your question, but I have expanded the ticket description to explain the motivation for this ticket.



---

archive/issue_comments_527480.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n ... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.\n \n This is to support modularization (#29705):\n-- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce) fully functional without having to pull in PARI (at compile time or run time)\n+- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce`) fully functional without having to pull in PARI (at compile time or run time)\n - likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).\n \n``````\n",
    "created_at": "2021-10-27T00:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527480",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 ... as previously done in #30022 for `sage.rings.integer` and `sage.rings.rational`.
 
 This is to support modularization (#29705):
-- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce) fully functional without having to pull in PARI (at compile time or run time)
+- in particular, for **sagemath-categories** (#29865), to make the functions `py_scalar_parent` and `py_scalar_to_element` (from  `sage.structure.coerce`) fully functional without having to pull in PARI (at compile time or run time)
 - likewise, for **sagemath-polyhedra** (#32432) to support floating-point polyhedra and linear programming without having to pull in PARI (at compile time or run time).
 
``````




---

archive/issue_events_447179.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-27T00:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447179"
}
```



---

archive/issue_events_447180.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-27T00:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447180"
}
```



---

archive/issue_comments_527481.json:
```json
{
    "body": "Changed reviewer from **..., Matthias Koeppe** to **Matthias Koeppe, Travis Scrimshaw**",
    "created_at": "2021-10-27T00:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527481",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **..., Matthias Koeppe** to **Matthias Koeppe, Travis Scrimshaw**



---

archive/issue_comments_527482.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThat was what I was after. Thank you.\n\nThe current version LGTM.",
    "created_at": "2021-10-27T00:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527482",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

That was what I was after. Thank you.

The current version LGTM.



---

archive/issue_comments_527483.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for reviewing!",
    "created_at": "2021-10-27T00:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527483",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for reviewing!



---

archive/issue_comments_527484.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-29T00:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527484",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_events_447181.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-29T00:10:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447181"
}
```



---

archive/issue_events_447182.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-29T00:10:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447182"
}
```



---

archive/issue_comments_527485.json:
```json
{
    "body": "Changed commit from **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)** to **[`addbbe7`](https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554)**",
    "created_at": "2021-10-29T00:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527485",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)** to **[`addbbe7`](https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554)**



---

archive/issue_comments_527486.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554\"><code>addbbe7</code></a></td><td><code>Merge tag '9.5.beta5' into t/32701/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr></table>\n",
    "created_at": "2021-10-29T00:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527486",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554"><code>addbbe7</code></a></td><td><code>Merge tag '9.5.beta5' into t/32701/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr></table>




---

archive/issue_comments_527487.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI used an old version of the branch, to be redone",
    "created_at": "2021-10-29T00:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527487",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

I used an old version of the branch, to be redone



---

archive/issue_comments_527488.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**",
    "created_at": "2021-10-29T00:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527488",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)**



---

archive/issue_comments_527489.json:
```json
{
    "body": "Changed commit from **[`addbbe7`](https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554)** to **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)**",
    "created_at": "2021-10-29T00:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527489",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`addbbe7`](https://github.com/sagemath/sagetrac-mirror/commit/addbbe7f3936e8643e05992cc7710e6f482f8554)** to **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)**



---

archive/issue_comments_527490.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cc2fa71426e061bd030e85177766cd7c5dd05c4\"><code>2cc2fa7</code></a></td><td><code>src/sage/rings/real_double.pyx: Replace cimport from cypari.convert by method-local import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757\"><code>d641dc6</code></a></td><td><code>src/sage/rings/complex_double.pyx: Move PARI conversion functions to src/sage/libs/pari/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e43dfad561d3cc0f7b659b89eb4b2041e970fc20\"><code>e43dfad</code></a></td><td><code>Merge branch 'u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2' of git://trac.sagemath.org/sage into u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8\"><code>bc1710c</code></a></td><td><code>fix incorrect import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71b62be886046fe6c1fe0eb6b8ba543d90ec0293\"><code>71b62be</code></a></td><td><code>new_gen_from_double not available as python function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82\"><code>64984be</code></a></td><td><code>coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244\"><code>16d2850</code></a></td><td><code>src/sage/libs/pari/convert_sage_complex_double.pxd (pari_to_cdf): cdef inline -> cpdef</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/388b05f54be5419a1c0f68c765a6e6064301e1ac\"><code>388b05f</code></a></td><td><code>speed up conversion for complex double</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001\"><code>a64d72b</code></a></td><td><code>speed up conversion from real double</code></td></tr></table>\n",
    "created_at": "2021-10-29T00:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527490",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cc2fa71426e061bd030e85177766cd7c5dd05c4"><code>2cc2fa7</code></a></td><td><code>src/sage/rings/real_double.pyx: Replace cimport from cypari.convert by method-local import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d641dc6a081eb018a694a78795e8a23097604757"><code>d641dc6</code></a></td><td><code>src/sage/rings/complex_double.pyx: Move PARI conversion functions to src/sage/libs/pari/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e43dfad561d3cc0f7b659b89eb4b2041e970fc20"><code>e43dfad</code></a></td><td><code>Merge branch 'u/mkoeppe/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2' of git://trac.sagemath.org/sage into u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc1710c61fa8b9abb3f53bec78c121e16ac68ae8"><code>bc1710c</code></a></td><td><code>fix incorrect import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71b62be886046fe6c1fe0eb6b8ba543d90ec0293"><code>71b62be</code></a></td><td><code>new_gen_from_double not available as python function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64984beb812c93dfc7572eb32b0f4f7c822f9f82"><code>64984be</code></a></td><td><code>coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16d28509023cd429a4fd82a9ba3aec6037868244"><code>16d2850</code></a></td><td><code>src/sage/libs/pari/convert_sage_complex_double.pxd (pari_to_cdf): cdef inline -> cpdef</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/388b05f54be5419a1c0f68c765a6e6064301e1ac"><code>388b05f</code></a></td><td><code>speed up conversion for complex double</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001"><code>a64d72b</code></a></td><td><code>speed up conversion from real double</code></td></tr></table>




---

archive/issue_comments_527491.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMerging 9.5.beta5 pulls in #32607, so corresponding changes need to be made in `src/sage/libs/pari/convert_sage_complex_double.pyx`",
    "created_at": "2021-10-29T00:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527491",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Merging 9.5.beta5 pulls in #32607, so corresponding changes need to be made in `src/sage/libs/pari/convert_sage_complex_double.pyx`



---

archive/issue_comments_527492.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3\"><code>629c319</code></a></td><td><code>merge in 9.5.beta5</code></td></tr></table>\n",
    "created_at": "2021-10-29T06:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527492",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3"><code>629c319</code></a></td><td><code>merge in 9.5.beta5</code></td></tr></table>




---

archive/issue_comments_527493.json:
```json
{
    "body": "Changed commit from **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)** to **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**",
    "created_at": "2021-10-29T06:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a64d72b`](https://github.com/sagemath/sagetrac-mirror/commit/a64d72b83610b2de1efaed05deaf18d879a78001)** to **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**



---

archive/issue_events_447183.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-10-29T06:55:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447183"
}
```



---

archive/issue_events_447184.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-10-29T06:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447184"
}
```



---

archive/issue_events_447185.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-29T17:18:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447185"
}
```



---

archive/issue_events_447186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-29T17:18:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447186"
}
```



---

archive/issue_comments_527494.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks.",
    "created_at": "2021-10-29T17:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527494",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks.



---

archive/issue_events_447187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-31T22:21:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447187"
}
```



---

archive/issue_events_447188.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "154137a687680dc274e87129c4249d33270ad3b2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-31T22:21:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32701#event-447188"
}
```



---

archive/issue_comments_527495.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**",
    "created_at": "2021-10-31T22:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32701#issuecomment-527495",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/sage_rings__real_complex__double__remove_compile_time_dependency_on_cypari2)** to **[`629c319`](https://github.com/sagemath/sagetrac-mirror/commit/629c31924161d00c5a1e3941eb3945e45ca8a0b3)**
