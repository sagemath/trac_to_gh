# Issue 32945: Cygwin: notebook spkg installation hangs in pip dependency resolution

archive/issues_032708.json:
```json
{
    "body": "```\nINFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pyrsistent-0.18.0-cp38-cp38-cygwin_3_3_2_x86_64.whl\nINFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/Pygments-2.10.0-py3-none-any.whl\nINFO: pip is looking at multiple versions of pandocfilters to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pandocfilters-1.4.3-py3-none-any.whl\nINFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.\nINFO: pip is looking at multiple versions of attrs to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/attrs-21.2.0-py2.py3-none-any.whl\nINFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: https://pip.pypa.io/surveys/backtracking\nINFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.\nINFO: pip is looking at multiple versions of jsonschema to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/jsonschema-3.2.0-py2.py3-none-any.whl\nINFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. \n...\n```\n\nUnchanged after the IPython/Jupyter upgrade #32930.\n\nWe use upstream PR: https://github.com/pypa/pip/pull/10574, backported to the current stable `pip`.\n\n\n\nCC:  @slel @dimpase @jhpalmieri\n\nBranch/Commit: f8400f719f46f046cd12a781d6dc16f43e92a100\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #32671\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32945\n\n",
    "closed_at": "2021-12-12T15:09:25Z",
    "created_at": "2021-11-28T19:17:14Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Cygwin: notebook spkg installation hangs in pip dependency resolution",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32945",
    "user": "https://github.com/mkoeppe"
}
```
```
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pyrsistent-0.18.0-cp38-cp38-cygwin_3_3_2_x86_64.whl
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/Pygments-2.10.0-py3-none-any.whl
INFO: pip is looking at multiple versions of pandocfilters to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pandocfilters-1.4.3-py3-none-any.whl
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of attrs to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/attrs-21.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: https://pip.pypa.io/surveys/backtracking
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of jsonschema to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/jsonschema-3.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. 
...
```

Unchanged after the IPython/Jupyter upgrade #32930.

We use upstream PR: https://github.com/pypa/pip/pull/10574, backported to the current stable `pip`.



CC:  @slel @dimpase @jhpalmieri

Branch/Commit: f8400f719f46f046cd12a781d6dc16f43e92a100

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #32671

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32945





---

archive/issue_comments_498207.json:
```json
{
    "body": "<a id='comment:1'></a>`@`slelievre, do you see this in the logs of `notebook` also in your local build?",
    "created_at": "2021-11-28T19:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498207",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>`@`slelievre, do you see this in the logs of `notebook` also in your local build?



---

archive/issue_comments_498208.json:
```json
{
    "body": "<a id='comment:2'></a>There are some upcoming changes to `pip` that might fix this issue https://github.com/pypa/pip/pull/10574/files\n\nhttps://pip.pypa.io/en/latest/news/",
    "created_at": "2021-11-28T21:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498208",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>There are some upcoming changes to `pip` that might fix this issue https://github.com/pypa/pip/pull/10574/files

https://pip.pypa.io/en/latest/news/



---

archive/issue_comments_498209.json:
```json
{
    "body": "<a id='comment:3'></a>No such thing in `logs/pkgs/notebook-6.4.3.log` here.",
    "created_at": "2021-11-28T21:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498209",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>No such thing in `logs/pkgs/notebook-6.4.3.log` here.



---

archive/issue_comments_498210.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2021-11-28T21:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498210",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_498211.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-28T23:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_498212.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-29T05:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498212",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_498213.json:
```json
{
    "body": "<a id='comment:9'></a>This fixes the problem, as can be seen in https://github.com/mkoeppe/sage/runs/4349318130?check_suite_focus=true",
    "created_at": "2021-11-29T05:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498213",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>This fixes the problem, as can be seen in https://github.com/mkoeppe/sage/runs/4349318130?check_suite_focus=true



---

archive/issue_comments_498214.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -18,6 +18,10 @@\n \n Unchanged after the IPython/Jupyter upgrade #32930.\n \n+We use upstream PR: https://github.com/pypa/pip/pull/10574, backported to the current stable \\`pip\\`.\n+\n+\n+\n Comment: 1\n \n Priority: critical\n```\n",
    "created_at": "2021-11-29T05:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498214",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -18,6 +18,10 @@
 
 Unchanged after the IPython/Jupyter upgrade #32930.
 
+We use upstream PR: https://github.com/pypa/pip/pull/10574, backported to the current stable \`pip\`.
+
+
+
 Comment: 1
 
 Priority: critical
```




---

archive/issue_comments_498215.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2021-11-29T05:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498215",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_498216.json:
```json
{
    "body": "<a id='comment:13'></a>not yet released pip, where this megapatch  is from, is dropping python 3.6.\n\nCan we either follow the suit, or make this patch cygwin only?",
    "created_at": "2021-12-02T21:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498216",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>not yet released pip, where this megapatch  is from, is dropping python 3.6.

Can we either follow the suit, or make this patch cygwin only?



---

archive/issue_comments_498217.json:
```json
{
    "body": "<a id='comment:14'></a>We dropped support for Python 3.6 in #30551.\n\nDropping support for Python 3.7 is #32937.",
    "created_at": "2021-12-02T22:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498217",
    "user": "https://github.com/slel"
}
```

<a id='comment:14'></a>We dropped support for Python 3.6 in #30551.

Dropping support for Python 3.7 is #32937.



---

archive/issue_comments_498218.json:
```json
{
    "body": "<a id='comment:15'></a>OK, cool.",
    "created_at": "2021-12-02T22:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498218",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>OK, cool.



---

archive/issue_comments_498219.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-02T22:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498219",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_498220.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks!",
    "created_at": "2021-12-02T23:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498220",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Thanks!



---

archive/issue_comments_498221.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-12T15:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-498221",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087059.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-12T15:09:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32945#event-87059"
}
```
