# Issue 32058: add typing annotations in permutations

archive/issues_031821.json:
```json
{
    "body": "not everywhere, but a good start\n\n**CC:**  @tscrim @slel @tobiasdiez\n\n**Branch/Commit:** [f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32058\n\n",
    "closed_at": "2021-07-09T20:23:28Z",
    "created_at": "2021-06-25T12:36:09Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "add typing annotations in permutations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32058",
    "user": "https://github.com/fchapoton"
}
```
not everywhere, but a good start

**CC:**  @tscrim @slel @tobiasdiez

**Branch/Commit:** [f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)

**Reviewer:** Matthias Koeppe

**Author:** Frédéric Chapoton

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/32058





---

archive/issue_comments_638239.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb\">d7a9ea8</a></td><td><code>some typing annotation in permutation.py</code></td></tr></table>\n",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638239",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb">d7a9ea8</a></td><td><code>some typing annotation in permutation.py</code></td></tr></table>




---

archive/issue_comments_638240.json:
```json
{
    "body": "**Branch:** [u/chapoton/32058](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32058)",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638240",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/32058](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32058)



---

archive/issue_comments_638241.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638241",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_638242.json:
```json
{
    "body": "**Commit:** [d7a9ea8781a336a25f1f7458dc21c01db9d8bafb](https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb)",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638242",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [d7a9ea8781a336a25f1f7458dc21c01db9d8bafb](https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb)



---

archive/issue_comments_638243.json:
```json
{
    "body": "<a id='comment:2'></a>\nbot is morally green, please have a look",
    "created_at": "2021-06-26T11:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638243",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
bot is morally green, please have a look



---

archive/issue_comments_638244.json:
```json
{
    "body": "<a id='comment:3'></a>\nCan you say why `\"Permutation\"` needs quotes but not `Composition`?\n\nSome changes I would consider (unless they slow things down):\n\n```diff\n-        return [i + 1 for i in range(len(self)) if i + 1 == self[i]]\n+        return [i for i, v in enumerate(self, start=1) if i == v]\n```\n\n```diff\n-        return {i + 1: self[i] for i in range(len(self))}\n+        return dict(enumerate(self, start=1))\n```\nBut feel free to ignore as this leaves the ticket's scope.\n\nYour changes in passing from the previous loops\nare a clear improvement.",
    "created_at": "2021-06-26T12:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638244",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>
Can you say why `"Permutation"` needs quotes but not `Composition`?

Some changes I would consider (unless they slow things down):

```diff
-        return [i + 1 for i in range(len(self)) if i + 1 == self[i]]
+        return [i for i, v in enumerate(self, start=1) if i == v]
```

```diff
-        return {i + 1: self[i] for i in range(len(self))}
+        return dict(enumerate(self, start=1))
```
But feel free to ignore as this leaves the ticket's scope.

Your changes in passing from the previous loops
are a clear improvement.



---

archive/issue_comments_638245.json:
```json
{
    "body": "**Changing commit** from \"[d7a9ea8781a336a25f1f7458dc21c01db9d8bafb](https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb)\" to \"[d502d6b791844dad9e7440c212feb44c11dc3b27](https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27)\".",
    "created_at": "2021-06-26T16:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d7a9ea8781a336a25f1f7458dc21c01db9d8bafb](https://github.com/sagemath/sagetrac-mirror/commit/d7a9ea8781a336a25f1f7458dc21c01db9d8bafb)" to "[d502d6b791844dad9e7440c212feb44c11dc3b27](https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27)".



---

archive/issue_comments_638246.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27\">d502d6b</a></td><td><code>minor details in permutation.py</code></td></tr></table>\n",
    "created_at": "2021-06-26T16:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27">d502d6b</a></td><td><code>minor details in permutation.py</code></td></tr></table>




---

archive/issue_comments_638247.json:
```json
{
    "body": "<a id='comment:5'></a>\nmerci pour les suggestions. C'est fait.\n\nPour \"Permutation\", c'est parce que c'est n\u00e9cessaire pour annoter les m\u00e9thodes d'une classe par elle-m\u00eame. Pour \u00e9viter une boucle. Enfin, je crois.",
    "created_at": "2021-06-26T16:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638247",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
merci pour les suggestions. C'est fait.

Pour "Permutation", c'est parce que c'est nécessaire pour annoter les méthodes d'une classe par elle-même. Pour éviter une boucle. Enfin, je crois.



---

archive/issue_comments_638248.json:
```json
{
    "body": "<a id='comment:6'></a>\nPlease add `from __future__ import annotations` to the top of files that use type annotations.",
    "created_at": "2021-06-26T17:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638248",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Please add `from __future__ import annotations` to the top of files that use type annotations.



---

archive/issue_comments_638249.json:
```json
{
    "body": "<a id='comment:7'></a>\nthis is not necessary for the annotations applied here, if I am not mistaken\n\nand this was not applied to the existing annotations:\n\n```\n:~/sage$ git grep -c \") -> .*:$\" src/sage/combinat/\nsrc/sage/combinat/affine_permutation.py:10\nsrc/sage/combinat/combinat.py:35\nsrc/sage/combinat/interval_posets.py:81\nsrc/sage/combinat/knutson_tao_puzzles.py:28\nsrc/sage/combinat/necklace.py:3\nsrc/sage/combinat/parking_functions.py:22\nsrc/sage/combinat/permutation.py:64\nsrc/sage/combinat/plane_partition.py:19\nsrc/sage/combinat/posets/posets.py:15\n~/sage$ git grep -c \"future__.*annota\" src/sage/combinat/\n```",
    "created_at": "2021-06-26T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638249",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
this is not necessary for the annotations applied here, if I am not mistaken

and this was not applied to the existing annotations:

```
:~/sage$ git grep -c ") -> .*:$" src/sage/combinat/
src/sage/combinat/affine_permutation.py:10
src/sage/combinat/combinat.py:35
src/sage/combinat/interval_posets.py:81
src/sage/combinat/knutson_tao_puzzles.py:28
src/sage/combinat/necklace.py:3
src/sage/combinat/parking_functions.py:22
src/sage/combinat/permutation.py:64
src/sage/combinat/plane_partition.py:19
src/sage/combinat/posets/posets.py:15
~/sage$ git grep -c "future__.*annota" src/sage/combinat/
```



---

archive/issue_comments_638250.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe previous annotations were probably written before we dropped Python 3.6 support in #30551. Only since Python 3.7, `from __future__ import annotations` exists.\n\nI would think it's better to write these type annotations to one language standard instead of waiting for the first incompatibility to happen...",
    "created_at": "2021-06-26T19:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638250",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
The previous annotations were probably written before we dropped Python 3.6 support in #30551. Only since Python 3.7, `from __future__ import annotations` exists.

I would think it's better to write these type annotations to one language standard instead of waiting for the first incompatibility to happen...



---

archive/issue_comments_638251.json:
```json
{
    "body": "<a id='comment:9'></a>\nWith the future import, you no longer have problems with the forward references. So in particular, you can simply write\n\n```\n- def inverse(self) -> \"Permutation\":\n+ def inverse(self) -> Permutation:\n```\n\n\nMoreover, it would be good if the type of the list items would also be specified, i.e. `list[int]` instead of only `list`. Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List.",
    "created_at": "2021-06-27T07:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638251",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
With the future import, you no longer have problems with the forward references. So in particular, you can simply write

```
- def inverse(self) -> "Permutation":
+ def inverse(self) -> Permutation:
```


Moreover, it would be good if the type of the list items would also be specified, i.e. `list[int]` instead of only `list`. Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List.



---

archive/issue_comments_638252.json:
```json
{
    "body": "<a id='comment:10'></a>\n`@`mkoeppe: The future import is not always necessarily. If you only use simple types, then there is no practical difference (except for the minimal performance impact of the runtime evaluation of types), so I don't think we need to import it in every file that uses type information. But as soon as you would use string-literal typing or the soon-deprecated `List` etc, I would say the future import makes sense.",
    "created_at": "2021-06-27T07:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638252",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:10'></a>
`@`mkoeppe: The future import is not always necessarily. If you only use simple types, then there is no practical difference (except for the minimal performance impact of the runtime evaluation of types), so I don't think we need to import it in every file that uses type information. But as soon as you would use string-literal typing or the soon-deprecated `List` etc, I would say the future import makes sense.



---

archive/issue_comments_638253.json:
```json
{
    "body": "<a id='comment:11'></a>\nI agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.\n\nThis ticket is intended only as a first approximation of typing on this file. So please, let us move on and keep enhancements for later.",
    "created_at": "2021-06-27T08:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638253",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.

This ticket is intended only as a first approximation of typing on this file. So please, let us move on and keep enhancements for later.



---

archive/issue_comments_638254.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [gh-tobiasdiez](#comment%3A10):\n> `@`mkoeppe: The future import is not always necessarily. \n\n\nMy point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.",
    "created_at": "2021-06-27T15:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638254",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Replying to [gh-tobiasdiez](#comment%3A10):
> `@`mkoeppe: The future import is not always necessarily. 


My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.



---

archive/issue_comments_638255.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-06-27T15:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638255",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_638256.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [chapoton](#comment%3A11):\n> I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.\n\n\nThere is no point in writing code to an already outdated standard when adding `from __future__ import annotations` makes the current standard available to all supported Python versions.",
    "created_at": "2021-06-27T15:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638256",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Replying to [chapoton](#comment%3A11):
> I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.


There is no point in writing code to an already outdated standard when adding `from __future__ import annotations` makes the current standard available to all supported Python versions.



---

archive/issue_comments_638257.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [gh-tobiasdiez](#comment%3A9):\n> Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n\nBut `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.",
    "created_at": "2021-06-27T15:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638257",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Replying to [gh-tobiasdiez](#comment%3A9):
> Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 


But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.



---

archive/issue_comments_638258.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [mkoeppe](#comment%3A14):\n> Replying to [gh-tobiasdiez](#comment%3A9):\n> > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n> \n> But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.\n> \n\n\nIt's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation",
    "created_at": "2021-06-27T16:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638258",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'></a>
Replying to [mkoeppe](#comment%3A14):
> Replying to [gh-tobiasdiez](#comment%3A9):
> > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 

> 
> But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.
> 


It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation



---

archive/issue_comments_638259.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mkoeppe](#comment%3A12):\n> Replying to [gh-tobiasdiez](#comment%3A10):\n> > `@`mkoeppe: The future import is not always necessarily. \n\n> \n> My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.\n\n\nGood point. Maybe it's worthwhile to document this in the dev docs.",
    "created_at": "2021-06-27T16:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638259",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:16'></a>
Replying to [mkoeppe](#comment%3A12):
> Replying to [gh-tobiasdiez](#comment%3A10):
> > `@`mkoeppe: The future import is not always necessarily. 

> 
> My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.


Good point. Maybe it's worthwhile to document this in the dev docs.



---

archive/issue_comments_638260.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [gh-tobiasdiez](#comment%3A16):\n> Maybe it's worthwhile to document this in the dev docs.\n\n\n+1 on a section on best practices for type annotations! I've opened #32067 for this.\n\nI think we may also want to add a patchbot plugin that enforces presence of `from __future__ import annotations` whenever something that looks like a typing annotation is found in the file.",
    "created_at": "2021-06-27T16:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638260",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [gh-tobiasdiez](#comment%3A16):
> Maybe it's worthwhile to document this in the dev docs.


+1 on a section on best practices for type annotations! I've opened #32067 for this.

I think we may also want to add a patchbot plugin that enforces presence of `from __future__ import annotations` whenever something that looks like a typing annotation is found in the file.



---

archive/issue_comments_638261.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [gh-tobiasdiez](#comment%3A15):\n> Replying to [mkoeppe](#comment%3A14):\n> > Replying to [gh-tobiasdiez](#comment%3A9):\n> > > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n> > \n> > But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.\n> > \n\n> \n> It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation \n\n\nThanks for the pointer! I didn't know that.",
    "created_at": "2021-06-27T16:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638261",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [gh-tobiasdiez](#comment%3A15):
> Replying to [mkoeppe](#comment%3A14):
> > Replying to [gh-tobiasdiez](#comment%3A9):
> > > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 

> > 
> > But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.
> > 

> 
> It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation 


Thanks for the pointer! I didn't know that.



---

archive/issue_comments_638262.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b\">7b0ec52</a></td><td><code>do not use soon-deprecated List annotation</code></td></tr></table>\n",
    "created_at": "2021-06-27T19:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b">7b0ec52</a></td><td><code>do not use soon-deprecated List annotation</code></td></tr></table>




---

archive/issue_comments_638263.json:
```json
{
    "body": "**Changing commit** from \"[d502d6b791844dad9e7440c212feb44c11dc3b27](https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27)\" to \"[7b0ec5295c68a829c1772e7e1c49b8a87792852b](https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b)\".",
    "created_at": "2021-06-27T19:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d502d6b791844dad9e7440c212feb44c11dc3b27](https://github.com/sagemath/sagetrac-mirror/commit/d502d6b791844dad9e7440c212feb44c11dc3b27)" to "[7b0ec5295c68a829c1772e7e1c49b8a87792852b](https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b)".



---

archive/issue_comments_638264.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-06-27T19:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638264",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_638265.json:
```json
{
    "body": "<a id='comment:20'></a>\nhere is a version\n\n* not using \"List\", that is going soon to be deprecated\n\n* not using \"list[int]\" or anything that would require a `__future__` import\n\nso backs to needs review",
    "created_at": "2021-06-27T19:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638265",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>
here is a version

* not using "List", that is going soon to be deprecated

* not using "list[int]" or anything that would require a `__future__` import

so backs to needs review



---

archive/issue_comments_638266.json:
```json
{
    "body": "<a id='comment:21'></a>\nPlease, let's use the `__future__`. Not doing so just sets the stage for a thousand \"cleanup\" tickets later.",
    "created_at": "2021-06-27T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638266",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Please, let's use the `__future__`. Not doing so just sets the stage for a thousand "cleanup" tickets later.



---

archive/issue_comments_638267.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-06-27T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638267",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_638268.json:
```json
{
    "body": "<a id='comment:22'></a>\nI you insist, I can do that, but I do not see the point, because I am not doing here anything that will need any cleanup later.",
    "created_at": "2021-06-27T19:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638268",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
I you insist, I can do that, but I do not see the point, because I am not doing here anything that will need any cleanup later.



---

archive/issue_comments_638269.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a\">555c8ca</a></td><td><code>adding one future import that will need to be removed later</code></td></tr></table>\n",
    "created_at": "2021-06-27T19:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a">555c8ca</a></td><td><code>adding one future import that will need to be removed later</code></td></tr></table>




---

archive/issue_comments_638270.json:
```json
{
    "body": "**Changing commit** from \"[7b0ec5295c68a829c1772e7e1c49b8a87792852b](https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b)\" to \"[555c8ca2171d1c226ecea50a4d511284c723a20a](https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a)\".",
    "created_at": "2021-06-27T19:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7b0ec5295c68a829c1772e7e1c49b8a87792852b](https://github.com/sagemath/sagetrac-mirror/commit/7b0ec5295c68a829c1772e7e1c49b8a87792852b)" to "[555c8ca2171d1c226ecea50a4d511284c723a20a](https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a)".



---

archive/issue_comments_638271.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-06-27T19:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638271",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_638272.json:
```json
{
    "body": "<a id='comment:24'></a>\nhere we go",
    "created_at": "2021-06-27T19:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638272",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
here we go



---

archive/issue_comments_638273.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [chapoton](#comment%3A22):\n> I you insist, I can do that, but I do not see the point\n\n\ncomment 12 above\n\n> because I am not doing here anything that will need any cleanup later.\n\n\nyes you do, comment 9 above.",
    "created_at": "2021-06-27T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638273",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Replying to [chapoton](#comment%3A22):
> I you insist, I can do that, but I do not see the point


comment 12 above

> because I am not doing here anything that will need any cleanup later.


yes you do, comment 9 above.



---

archive/issue_comments_638274.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-06-29T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638274",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_638275.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe type annotation \"Permutation\" is unnecessarily string-quoted - https://www.python.org/dev/peps/pep-0563/",
    "created_at": "2021-06-29T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638275",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
The type annotation "Permutation" is unnecessarily string-quoted - https://www.python.org/dev/peps/pep-0563/



---

archive/issue_comments_638276.json:
```json
{
    "body": "**Changing commit** from \"[555c8ca2171d1c226ecea50a4d511284c723a20a](https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a)\" to \"[0dc73cb40f457ffb1f6afe6df128eb9e53defcb1](https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)\".",
    "created_at": "2021-06-29T19:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[555c8ca2171d1c226ecea50a4d511284c723a20a](https://github.com/sagemath/sagetrac-mirror/commit/555c8ca2171d1c226ecea50a4d511284c723a20a)" to "[0dc73cb40f457ffb1f6afe6df128eb9e53defcb1](https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)".



---

archive/issue_comments_638277.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1\">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>\n",
    "created_at": "2021-06-29T19:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>




---

archive/issue_comments_638278.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-06-29T19:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638278",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_638279.json:
```json
{
    "body": "<a id='comment:28'></a>\ndone\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1\">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1\">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>\n",
    "created_at": "2021-06-29T19:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638279",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>
done

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1">0dc73cb</a></td><td><code>no need for quotes on annotations</code></td></tr></table>




---

archive/issue_comments_638280.json:
```json
{
    "body": "<a id='comment:29'></a>\nThank you, LGTM.",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638280",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Thank you, LGTM.



---

archive/issue_comments_638281.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638281",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_638282.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638282",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_638283.json:
```json
{
    "body": "<a id='comment:30'></a>\nmerge conflict",
    "created_at": "2021-07-01T21:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638283",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
merge conflict



---

archive/issue_comments_638284.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-07-01T21:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638284",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_638285.json:
```json
{
    "body": "**Changing commit** from \"[0dc73cb40f457ffb1f6afe6df128eb9e53defcb1](https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)\" to \"[f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)\".",
    "created_at": "2021-07-02T19:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0dc73cb40f457ffb1f6afe6df128eb9e53defcb1](https://github.com/sagemath/sagetrac-mirror/commit/0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)" to "[f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)".



---

archive/issue_comments_638286.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3\">f0534fe</a></td><td><code>Merge branch 'u/chapoton/32058' in 9.4.b4</code></td></tr></table>\n",
    "created_at": "2021-07-02T19:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3">f0534fe</a></td><td><code>Merge branch 'u/chapoton/32058' in 9.4.b4</code></td></tr></table>




---

archive/issue_comments_638287.json:
```json
{
    "body": "<a id='comment:32'></a>\nsetting back to positive after trivial rebase",
    "created_at": "2021-07-02T19:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638287",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>
setting back to positive after trivial rebase



---

archive/issue_comments_638288.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2021-07-02T19:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638288",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_638289.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-07-09T20:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638289",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_638290.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/32058](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32058)\" to \"[f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)\".",
    "created_at": "2021-07-09T20:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638290",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/32058](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/32058)" to "[f0534fe010382260c100dc1cd684cb1a255a72d3](https://github.com/sagemath/sagetrac-mirror/commit/f0534fe010382260c100dc1cd684cb1a255a72d3)".



---

archive/issue_events_095451.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-09T20:23:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32058#event-95451"
}
```
