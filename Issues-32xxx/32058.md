# Issue 32058: add typing annotations in permutations

archive/issues_031821.json:
```json
{
    "body": "not everywhere, but a good start\n\nCC:  @tscrim @slel @tobiasdiez\n\nBranch/Commit: f0534fe010382260c100dc1cd684cb1a255a72d3\n\nReviewer: Matthias Koeppe\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32058\n\n",
    "closed_at": "2021-07-09T20:23:28Z",
    "created_at": "2021-06-25T12:36:09Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "add typing annotations in permutations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32058",
    "user": "https://github.com/fchapoton"
}
```
not everywhere, but a good start

CC:  @tscrim @slel @tobiasdiez

Branch/Commit: f0534fe010382260c100dc1cd684cb1a255a72d3

Reviewer: Matthias Koeppe

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32058





---

archive/issue_comments_638013.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638013",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_638014.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/32058\"",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638014",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/32058"



---

archive/issue_comments_638015.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638015",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_638016.json:
```json
{
    "body": "Changing commit from \"\" to \"d7a9ea8781a336a25f1f7458dc21c01db9d8bafb\"",
    "created_at": "2021-06-25T12:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638016",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "d7a9ea8781a336a25f1f7458dc21c01db9d8bafb"



---

archive/issue_comments_638017.json:
```json
{
    "body": "<a id='comment:2'></a>bot is morally green, please have a look",
    "created_at": "2021-06-26T11:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638017",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>bot is morally green, please have a look



---

archive/issue_comments_638018.json:
```json
{
    "body": "<a id='comment:3'></a>Can you say why `\"Permutation\"` needs quotes but not `Composition`?\n\nSome changes I would consider (unless they slow things down):\n\n```diff\n-        return [i + 1 for i in range(len(self)) if i + 1 == self[i]]\n+        return [i for i, v in enumerate(self, start=1) if i == v]\n```\n\n```diff\n-        return {i + 1: self[i] for i in range(len(self))}\n+        return dict(enumerate(self, start=1))\n```\nBut feel free to ignore as this leaves the ticket's scope.\n\nYour changes in passing from the previous loops\nare a clear improvement.",
    "created_at": "2021-06-26T12:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638018",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>Can you say why `"Permutation"` needs quotes but not `Composition`?

Some changes I would consider (unless they slow things down):

```diff
-        return [i + 1 for i in range(len(self)) if i + 1 == self[i]]
+        return [i for i, v in enumerate(self, start=1) if i == v]
```

```diff
-        return {i + 1: self[i] for i in range(len(self))}
+        return dict(enumerate(self, start=1))
```
But feel free to ignore as this leaves the ticket's scope.

Your changes in passing from the previous loops
are a clear improvement.



---

archive/issue_comments_638019.json:
```json
{
    "body": "Changing commit from \"d7a9ea8781a336a25f1f7458dc21c01db9d8bafb\" to \"d502d6b791844dad9e7440c212feb44c11dc3b27\"",
    "created_at": "2021-06-26T16:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d7a9ea8781a336a25f1f7458dc21c01db9d8bafb" to "d502d6b791844dad9e7440c212feb44c11dc3b27"



---

archive/issue_comments_638020.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-26T16:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638020",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_638021.json:
```json
{
    "body": "<a id='comment:5'></a>merci pour les suggestions. C'est fait.\n\nPour \"Permutation\", c'est parce que c'est n\u00e9cessaire pour annoter les m\u00e9thodes d'une classe par elle-m\u00eame. Pour \u00e9viter une boucle. Enfin, je crois.",
    "created_at": "2021-06-26T16:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638021",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>merci pour les suggestions. C'est fait.

Pour "Permutation", c'est parce que c'est nécessaire pour annoter les méthodes d'une classe par elle-même. Pour éviter une boucle. Enfin, je crois.



---

archive/issue_comments_638022.json:
```json
{
    "body": "<a id='comment:6'></a>Please add `from __future__ import annotations` to the top of files that use type annotations.",
    "created_at": "2021-06-26T17:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638022",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Please add `from __future__ import annotations` to the top of files that use type annotations.



---

archive/issue_comments_638023.json:
```json
{
    "body": "<a id='comment:7'></a>this is not necessary for the annotations applied here, if I am not mistaken\n\nand this was not applied to the existing annotations:\n\n```\n:~/sage$ git grep -c \") -> .*:$\" src/sage/combinat/\nsrc/sage/combinat/affine_permutation.py:10\nsrc/sage/combinat/combinat.py:35\nsrc/sage/combinat/interval_posets.py:81\nsrc/sage/combinat/knutson_tao_puzzles.py:28\nsrc/sage/combinat/necklace.py:3\nsrc/sage/combinat/parking_functions.py:22\nsrc/sage/combinat/permutation.py:64\nsrc/sage/combinat/plane_partition.py:19\nsrc/sage/combinat/posets/posets.py:15\n~/sage$ git grep -c \"future__.*annota\" src/sage/combinat/\n```",
    "created_at": "2021-06-26T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638023",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>this is not necessary for the annotations applied here, if I am not mistaken

and this was not applied to the existing annotations:

```
:~/sage$ git grep -c ") -> .*:$" src/sage/combinat/
src/sage/combinat/affine_permutation.py:10
src/sage/combinat/combinat.py:35
src/sage/combinat/interval_posets.py:81
src/sage/combinat/knutson_tao_puzzles.py:28
src/sage/combinat/necklace.py:3
src/sage/combinat/parking_functions.py:22
src/sage/combinat/permutation.py:64
src/sage/combinat/plane_partition.py:19
src/sage/combinat/posets/posets.py:15
~/sage$ git grep -c "future__.*annota" src/sage/combinat/
```



---

archive/issue_comments_638024.json:
```json
{
    "body": "<a id='comment:8'></a>The previous annotations were probably written before we dropped Python 3.6 support in #30551. Only since Python 3.7, `from __future__ import annotations` exists.\n\nI would think it's better to write these type annotations to one language standard instead of waiting for the first incompatibility to happen...",
    "created_at": "2021-06-26T19:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638024",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>The previous annotations were probably written before we dropped Python 3.6 support in #30551. Only since Python 3.7, `from __future__ import annotations` exists.

I would think it's better to write these type annotations to one language standard instead of waiting for the first incompatibility to happen...



---

archive/issue_comments_638025.json:
```json
{
    "body": "<a id='comment:9'></a>With the future import, you no longer have problems with the forward references. So in particular, you can simply write\n\n```\n- def inverse(self) -> \"Permutation\":\n+ def inverse(self) -> Permutation:\n```\n\n\nMoreover, it would be good if the type of the list items would also be specified, i.e. `list[int]` instead of only `list`. Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List.",
    "created_at": "2021-06-27T07:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638025",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>With the future import, you no longer have problems with the forward references. So in particular, you can simply write

```
- def inverse(self) -> "Permutation":
+ def inverse(self) -> Permutation:
```


Moreover, it would be good if the type of the list items would also be specified, i.e. `list[int]` instead of only `list`. Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List.



---

archive/issue_comments_638026.json:
```json
{
    "body": "<a id='comment:10'></a>`@`mkoeppe: The future import is not always necessarily. If you only use simple types, then there is no practical difference (except for the minimal performance impact of the runtime evaluation of types), so I don't think we need to import it in every file that uses type information. But as soon as you would use string-literal typing or the soon-deprecated `List` etc, I would say the future import makes sense.",
    "created_at": "2021-06-27T07:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638026",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:10'></a>`@`mkoeppe: The future import is not always necessarily. If you only use simple types, then there is no practical difference (except for the minimal performance impact of the runtime evaluation of types), so I don't think we need to import it in every file that uses type information. But as soon as you would use string-literal typing or the soon-deprecated `List` etc, I would say the future import makes sense.



---

archive/issue_comments_638027.json:
```json
{
    "body": "<a id='comment:11'></a>I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.\n\nThis ticket is intended only as a first approximation of typing on this file. So please, let us move on and keep enhancements for later.",
    "created_at": "2021-06-27T08:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638027",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.

This ticket is intended only as a first approximation of typing on this file. So please, let us move on and keep enhancements for later.



---

archive/issue_comments_638028.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 gh-tobiasdiez]:\n> `@`mkoeppe: The future import is not always necessarily. \n\n\nMy point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.",
    "created_at": "2021-06-27T15:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638028",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:10 gh-tobiasdiez]:
> `@`mkoeppe: The future import is not always necessarily. 


My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.



---

archive/issue_comments_638029.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-27T15:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638029",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_638030.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 chapoton]:\n> I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.\n\n\nThere is no point in writing code to an already outdated standard when adding `from __future__ import annotations` makes the current standard available to all supported Python versions.",
    "created_at": "2021-06-27T15:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638030",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Replying to [comment:11 chapoton]:
> I agree that we should try to use typing annotations in a coherent way. Alas, this has been a moving ground, with behaviour changing a lot between 3.6 and 3.9. As long as we do not refuse python 3.7 and 3.8, we should keep things simple.


There is no point in writing code to an already outdated standard when adding `from __future__ import annotations` makes the current standard available to all supported Python versions.



---

archive/issue_comments_638031.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:9 gh-tobiasdiez]:\n> Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n\nBut `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.",
    "created_at": "2021-06-27T15:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638031",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Replying to [comment:9 gh-tobiasdiez]:
> Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 


But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.



---

archive/issue_comments_638032.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 mkoeppe]:\n> Replying to [comment:9 gh-tobiasdiez]:\n> > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n> \n> But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.\n> \n\n\nIt's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation",
    "created_at": "2021-06-27T16:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638032",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'></a>Replying to [comment:14 mkoeppe]:
> Replying to [comment:9 gh-tobiasdiez]:
> > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 

> 
> But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.
> 


It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation



---

archive/issue_comments_638033.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:12 mkoeppe]:\n> Replying to [comment:10 gh-tobiasdiez]:\n> > `@`mkoeppe: The future import is not always necessarily. \n\n> \n> My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.\n\n\nGood point. Maybe it's worthwhile to document this in the dev docs.",
    "created_at": "2021-06-27T16:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638033",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:16'></a>Replying to [comment:12 mkoeppe]:
> Replying to [comment:10 gh-tobiasdiez]:
> > `@`mkoeppe: The future import is not always necessarily. 

> 
> My point is that -- whether it is necessary or not for a specific file -- it is better to add it, because that reduces both the cognitive load for developers, and reduces the chance that things get broken.


Good point. Maybe it's worthwhile to document this in the dev docs.



---

archive/issue_comments_638034.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 gh-tobiasdiez]:\n> Maybe it's worthwhile to document this in the dev docs.\n\n\n+1 on a section on best practices for type annotations! I've opened #32067 for this.\n\nI think we may also want to add a patchbot plugin that enforces presence of `from __future__ import annotations` whenever something that looks like a typing annotation is found in the file.",
    "created_at": "2021-06-27T16:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638034",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Replying to [comment:16 gh-tobiasdiez]:
> Maybe it's worthwhile to document this in the dev docs.


+1 on a section on best practices for type annotations! I've opened #32067 for this.

I think we may also want to add a patchbot plugin that enforces presence of `from __future__ import annotations` whenever something that looks like a typing annotation is found in the file.



---

archive/issue_comments_638035.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:15 gh-tobiasdiez]:\n> Replying to [comment:14 mkoeppe]:\n> > Replying to [comment:9 gh-tobiasdiez]:\n> > > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. \n\n> > \n> > But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.\n> > \n\n> \n> It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation \n\n\nThanks for the pointer! I didn't know that.",
    "created_at": "2021-06-27T16:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638035",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:15 gh-tobiasdiez]:
> Replying to [comment:14 mkoeppe]:
> > Replying to [comment:9 gh-tobiasdiez]:
> > > Please also use `list[int]` instead of `List[int]` (with capital L). The latter is deprecated with Python 3.9, see https://docs.python.org/3/library/typing.html#typing.List. 

> > 
> > But `list[int]` was only introduced in Python 3.9, so we can't use it yet as we still support Python 3.7 and 3.8.  So we have to either use `List[int]` -- or keep things simple and just use `list`.
> > 

> 
> It's backported to Python 3.7 using `from __future__ import annotations`, see https://www.python.org/dev/peps/pep-0585/#implementation 


Thanks for the pointer! I didn't know that.



---

archive/issue_comments_638036.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-27T19:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_638037.json:
```json
{
    "body": "Changing commit from \"d502d6b791844dad9e7440c212feb44c11dc3b27\" to \"7b0ec5295c68a829c1772e7e1c49b8a87792852b\"",
    "created_at": "2021-06-27T19:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d502d6b791844dad9e7440c212feb44c11dc3b27" to "7b0ec5295c68a829c1772e7e1c49b8a87792852b"



---

archive/issue_comments_638038.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-27T19:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638038",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_638039.json:
```json
{
    "body": "<a id='comment:20'></a>here is a version\n\n* not using \"List\", that is going soon to be deprecated\n\n* not using \"list[int]\" or anything that would require a `__future__` import\n\nso backs to needs review",
    "created_at": "2021-06-27T19:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638039",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>here is a version

* not using "List", that is going soon to be deprecated

* not using "list[int]" or anything that would require a `__future__` import

so backs to needs review



---

archive/issue_comments_638040.json:
```json
{
    "body": "<a id='comment:21'></a>Please, let's use the `__future__`. Not doing so just sets the stage for a thousand \"cleanup\" tickets later.",
    "created_at": "2021-06-27T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638040",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Please, let's use the `__future__`. Not doing so just sets the stage for a thousand "cleanup" tickets later.



---

archive/issue_comments_638041.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-27T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638041",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_638042.json:
```json
{
    "body": "<a id='comment:22'></a>I you insist, I can do that, but I do not see the point, because I am not doing here anything that will need any cleanup later.",
    "created_at": "2021-06-27T19:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638042",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>I you insist, I can do that, but I do not see the point, because I am not doing here anything that will need any cleanup later.



---

archive/issue_comments_638043.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-27T19:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_638044.json:
```json
{
    "body": "Changing commit from \"7b0ec5295c68a829c1772e7e1c49b8a87792852b\" to \"555c8ca2171d1c226ecea50a4d511284c723a20a\"",
    "created_at": "2021-06-27T19:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7b0ec5295c68a829c1772e7e1c49b8a87792852b" to "555c8ca2171d1c226ecea50a4d511284c723a20a"



---

archive/issue_comments_638045.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-27T19:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638045",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_638046.json:
```json
{
    "body": "<a id='comment:24'></a>here we go",
    "created_at": "2021-06-27T19:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638046",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>here we go



---

archive/issue_comments_638047.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:22 chapoton]:\n> I you insist, I can do that, but I do not see the point\n\n\ncomment 12 above\n\n> because I am not doing here anything that will need any cleanup later.\n\n\nyes you do, comment 9 above.",
    "created_at": "2021-06-27T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638047",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Replying to [comment:22 chapoton]:
> I you insist, I can do that, but I do not see the point


comment 12 above

> because I am not doing here anything that will need any cleanup later.


yes you do, comment 9 above.



---

archive/issue_comments_638048.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-29T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638048",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_638049.json:
```json
{
    "body": "<a id='comment:26'></a>The type annotation \"Permutation\" is unnecessarily string-quoted - https://www.python.org/dev/peps/pep-0563/",
    "created_at": "2021-06-29T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638049",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>The type annotation "Permutation" is unnecessarily string-quoted - https://www.python.org/dev/peps/pep-0563/



---

archive/issue_comments_638050.json:
```json
{
    "body": "Changing commit from \"555c8ca2171d1c226ecea50a4d511284c723a20a\" to \"0dc73cb40f457ffb1f6afe6df128eb9e53defcb1\"",
    "created_at": "2021-06-29T19:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "555c8ca2171d1c226ecea50a4d511284c723a20a" to "0dc73cb40f457ffb1f6afe6df128eb9e53defcb1"



---

archive/issue_comments_638051.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T19:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_638052.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-29T19:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638052",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_638053.json:
```json
{
    "body": "<a id='comment:28'></a>done\n\n---\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[0dc73cb](https://git.sagemath.org/sage.git/commit?id=0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)|`no need for quotes on annotations`|\n---\nNew commits:",
    "created_at": "2021-06-29T19:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638053",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>done

---
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[0dc73cb](https://git.sagemath.org/sage.git/commit?id=0dc73cb40f457ffb1f6afe6df128eb9e53defcb1)|`no need for quotes on annotations`|
---
New commits:



---

archive/issue_comments_638054.json:
```json
{
    "body": "<a id='comment:29'></a>Thank you, LGTM.",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638054",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Thank you, LGTM.



---

archive/issue_comments_638055.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638055",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_638056.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-29T19:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638056",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_638057.json:
```json
{
    "body": "<a id='comment:30'></a>merge conflict",
    "created_at": "2021-07-01T21:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638057",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>merge conflict



---

archive/issue_comments_638058.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-01T21:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638058",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_638059.json:
```json
{
    "body": "Changing commit from \"0dc73cb40f457ffb1f6afe6df128eb9e53defcb1\" to \"f0534fe010382260c100dc1cd684cb1a255a72d3\"",
    "created_at": "2021-07-02T19:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0dc73cb40f457ffb1f6afe6df128eb9e53defcb1" to "f0534fe010382260c100dc1cd684cb1a255a72d3"



---

archive/issue_comments_638060.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-02T19:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_638061.json:
```json
{
    "body": "<a id='comment:32'></a>setting back to positive after trivial rebase",
    "created_at": "2021-07-02T19:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638061",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>setting back to positive after trivial rebase



---

archive/issue_comments_638062.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-07-02T19:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638062",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_638063.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-09T20:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638063",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_638064.json:
```json
{
    "body": "Changing branch from \"u/chapoton/32058\" to \"f0534fe010382260c100dc1cd684cb1a255a72d3\"",
    "created_at": "2021-07-09T20:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32058#issuecomment-638064",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/32058" to "f0534fe010382260c100dc1cd684cb1a255a72d3"



---

archive/issue_events_084844.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-09T20:23:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32058",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32058#event-84844"
}
```
