# Issue 32907: Update singular to 4.2.1p3

archive/issues_032670.json:
```json
{
    "body": "From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x\n\nThe FLINT/Singular problem on ubuntu-trusty\nwill be fixed by this (already merged)\npull request to FLINT:\n\n- https://github.com/wbhart/flint2/pull/1040\n\n\nCC:  @dimpase @orlitzky @kiwifb @antonio-rojas @slel\n\nKeywords: upgrade, Singular\n\nBranch: [0856554004c43d72729967a0865f795b29488da2](https://github.com/sagemath/sagetrac-mirror/commit/0856554004c43d72729967a0865f795b29488da2)\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe, Antonio Rojas\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32907\n\n",
    "closed_at": "2021-12-28T21:15:55Z",
    "created_at": "2021-11-19T18:21:34Z",
    "labels": [
        "component: packages: standard",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Update singular to 4.2.1p3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32907",
    "user": "https://github.com/mkoeppe"
}
```
From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x

The FLINT/Singular problem on ubuntu-trusty
will be fixed by this (already merged)
pull request to FLINT:

- https://github.com/wbhart/flint2/pull/1040


CC:  @dimpase @orlitzky @kiwifb @antonio-rojas @slel

Keywords: upgrade, Singular

Branch: [0856554004c43d72729967a0865f795b29488da2](https://github.com/sagemath/sagetrac-mirror/commit/0856554004c43d72729967a0865f795b29488da2)

Reviewer: Dima Pasechnik

Author: Matthias Koeppe, Antonio Rojas

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32907





---

archive/issue_comments_656286.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/update_singular_to_4_2_1p2\"",
    "created_at": "2021-11-19T18:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656286",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/update_singular_to_4_2_1p2"



---

archive/issue_comments_656287.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-11-19T18:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656287",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_656288.json:
```json
{
    "body": "Changing commit from \"\" to \"4cf59d30fecf7abc972c889d2ade95c05193217d\"",
    "created_at": "2021-11-19T18:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656288",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "4cf59d30fecf7abc972c889d2ade95c05193217d"



---

archive/issue_comments_656289.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[4cf59d3](https://github.com/sagemath/sagetrac-mirror/commit/4cf59d30fecf7abc972c889d2ade95c05193217d)|`build/pkgs/singular: Update to 4.2.1p2`|",
    "created_at": "2021-11-19T18:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656289",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[4cf59d3](https://github.com/sagemath/sagetrac-mirror/commit/4cf59d30fecf7abc972c889d2ade95c05193217d)|`build/pkgs/singular: Update to 4.2.1p2`|



---

archive/issue_comments_656290.json:
```json
{
    "body": "Changing commit from \"4cf59d30fecf7abc972c889d2ade95c05193217d\" to \"5b2d00326f1e54ec969803605229f15afd9aea59\"",
    "created_at": "2021-11-19T18:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4cf59d30fecf7abc972c889d2ade95c05193217d" to "5b2d00326f1e54ec969803605229f15afd9aea59"



---

archive/issue_comments_656291.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[5b2d003](https://github.com/sagemath/sagetrac-mirror/commit/5b2d00326f1e54ec969803605229f15afd9aea59)|`build/pkgs/singular: Remove patch`|",
    "created_at": "2021-11-19T18:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[5b2d003](https://github.com/sagemath/sagetrac-mirror/commit/5b2d00326f1e54ec969803605229f15afd9aea59)|`build/pkgs/singular: Remove patch`|



---

archive/issue_comments_656292.json:
```json
{
    "body": "<a id='comment:4'></a>\nBuild ends with `Error: source file/directory doc/singular.idx does not exist`",
    "created_at": "2021-11-19T18:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656292",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Build ends with `Error: source file/directory doc/singular.idx does not exist`



---

archive/issue_comments_656293.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|\n|[26a7332](https://github.com/sagemath/sagetrac-mirror/commit/26a733276090c56f3c48ae181dd64cf75f98936b)|`build/pkgs/singular/spkg-install.in: Remove workaround for singular.idx, it is now in doc.tbz2`|",
    "created_at": "2021-11-19T19:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
|[26a7332](https://github.com/sagemath/sagetrac-mirror/commit/26a733276090c56f3c48ae181dd64cf75f98936b)|`build/pkgs/singular/spkg-install.in: Remove workaround for singular.idx, it is now in doc.tbz2`|



---

archive/issue_comments_656294.json:
```json
{
    "body": "Changing commit from \"5b2d00326f1e54ec969803605229f15afd9aea59\" to \"26a733276090c56f3c48ae181dd64cf75f98936b\"",
    "created_at": "2021-11-19T19:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5b2d00326f1e54ec969803605229f15afd9aea59" to "26a733276090c56f3c48ae181dd64cf75f98936b"



---

archive/issue_comments_656295.json:
```json
{
    "body": "<a id='comment:7'></a>\nPassing `-j1` to \"make\" should no longer be necessary.",
    "created_at": "2021-11-19T20:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656295",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:7'></a>
Passing `-j1` to "make" should no longer be necessary.



---

archive/issue_comments_656296.json:
```json
{
    "body": "Changing commit from \"26a733276090c56f3c48ae181dd64cf75f98936b\" to \"bb1f741169d5bc3bc01d559bafbda7ccb63e6f68\"",
    "created_at": "2021-11-19T20:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26a733276090c56f3c48ae181dd64cf75f98936b" to "bb1f741169d5bc3bc01d559bafbda7ccb63e6f68"



---

archive/issue_comments_656297.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|\n|[bb1f741](https://github.com/sagemath/sagetrac-mirror/commit/bb1f741169d5bc3bc01d559bafbda7ccb63e6f68)|`build/pkgs/singular/spkg-install.in: Remove workaround for make paralellization bugs`|",
    "created_at": "2021-11-19T20:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
|[bb1f741](https://github.com/sagemath/sagetrac-mirror/commit/bb1f741169d5bc3bc01d559bafbda7ccb63e6f68)|`build/pkgs/singular/spkg-install.in: Remove workaround for make paralellization bugs`|



---

archive/issue_comments_656298.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-19T20:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656298",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_656299.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/1482688821, https://github.com/mkoeppe/sage/actions/runs/1482688827\"",
    "created_at": "2021-11-19T20:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656299",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/1482688821, https://github.com/mkoeppe/sage/actions/runs/1482688827"



---

archive/issue_comments_656300.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x\n \n``````\n",
    "created_at": "2021-11-19T20:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656300",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x
 
``````




---

archive/issue_comments_656301.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis gives errors in the sagelib build:\n\n```\n  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp:33693:18: note: in expansion of macro \u2018p_SetCoeff0\u2019\n  [sagelib-9.5.beta7]              (void)(p_SetCoeff0(__pyx_v_temp, n_Copy(p_GetCoeff(__pyx_v_p, __pyx_v_r), __pyx_v_r), __pyx_v_r));\n  [sagelib-9.5.beta7]                     ^\n  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp: In function \u2018PyObject* __pyx_pf_4sage_5rings_10polynomial_28multi_polynomial_libsingular_23MPolynomial_libsingular_104factor(__pyx_obj_4sage_5rings_10polynomial_28multi_polynomial_libsingular_MPolynomial_libsingular*, PyObject*)\u2019:\n  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp:34874:40: error: cannot convert \u2018ip_sring*\u2019 to \u2018coeffs {aka n_Procs_s*}\u2019 for argument \u20181\u2019 to \u2018int n_GetChar(coeffs)\u2019\n  [sagelib-9.5.beta7]      __pyx_t_7 = ((n_GetChar(__pyx_v__ring) > 0x20000000) != 0);\n  [sagelib-9.5.beta7]                                           ^\n```",
    "created_at": "2021-11-20T00:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656301",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
This gives errors in the sagelib build:

```
  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp:33693:18: note: in expansion of macro ‘p_SetCoeff0’
  [sagelib-9.5.beta7]              (void)(p_SetCoeff0(__pyx_v_temp, n_Copy(p_GetCoeff(__pyx_v_p, __pyx_v_r), __pyx_v_r), __pyx_v_r));
  [sagelib-9.5.beta7]                     ^
  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp: In function ‘PyObject* __pyx_pf_4sage_5rings_10polynomial_28multi_polynomial_libsingular_23MPolynomial_libsingular_104factor(__pyx_obj_4sage_5rings_10polynomial_28multi_polynomial_libsingular_MPolynomial_libsingular*, PyObject*)’:
  [sagelib-9.5.beta7]   build/cythonized/sage/rings/polynomial/multi_polynomial_libsingular.cpp:34874:40: error: cannot convert ‘ip_sring*’ to ‘coeffs {aka n_Procs_s*}’ for argument ‘1’ to ‘int n_GetChar(coeffs)’
  [sagelib-9.5.beta7]      __pyx_t_7 = ((n_GetChar(__pyx_v__ring) > 0x20000000) != 0);
  [sagelib-9.5.beta7]                                           ^
```



---

archive/issue_comments_656302.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-20T00:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656302",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_656303.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe\" to \"Matthias Koeppe, ...\"",
    "created_at": "2021-11-20T02:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656303",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Matthias Koeppe" to "Matthias Koeppe, ..."



---

archive/issue_comments_656304.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_singular_to_4_2_1p2\" to \"u/arojas/update_singular_to_4_2_1p2\"",
    "created_at": "2021-11-20T10:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656304",
    "user": "https://github.com/antonio-rojas"
}
```

Changing branch from "u/mkoeppe/update_singular_to_4_2_1p2" to "u/arojas/update_singular_to_4_2_1p2"



---

archive/issue_comments_656305.json:
```json
{
    "body": "Changing commit from \"bb1f741169d5bc3bc01d559bafbda7ccb63e6f68\" to \"720d10e8a7f7d2bf4038b65c64e73db494106a57\"",
    "created_at": "2021-11-20T11:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656305",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bb1f741169d5bc3bc01d559bafbda7ccb63e6f68" to "720d10e8a7f7d2bf4038b65c64e73db494106a57"



---

archive/issue_comments_656306.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[720d10e](https://github.com/sagemath/sagetrac-mirror/commit/720d10e8a7f7d2bf4038b65c64e73db494106a57)|`Update tests for singular 4.2.1p2`|",
    "created_at": "2021-11-20T11:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656306",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[720d10e](https://github.com/sagemath/sagetrac-mirror/commit/720d10e8a7f7d2bf4038b65c64e73db494106a57)|`Update tests for singular 4.2.1p2`|



---

archive/issue_comments_656307.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-20T11:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656307",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_656308.json:
```json
{
    "body": "<a id='comment:18'></a>\nBuilds now, also with older singular (at least as far back as 4.2.0p1). I've also tried to keep tests compatible with older singular, except for the example in `rings/polynomial/hilbert.pyx`, which failed before and works now. Should we care about it?",
    "created_at": "2021-11-20T11:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656308",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:18'></a>
Builds now, also with older singular (at least as far back as 4.2.0p1). I've also tried to keep tests compatible with older singular, except for the example in `rings/polynomial/hilbert.pyx`, which failed before and works now. Should we care about it?



---

archive/issue_comments_656309.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, Antonio Rojas\"",
    "created_at": "2021-11-20T11:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656309",
    "user": "https://github.com/antonio-rojas"
}
```

Changing author from "Matthias Koeppe, ..." to "Matthias Koeppe, Antonio Rojas"



---

archive/issue_comments_656310.json:
```json
{
    "body": "Changing branch from \"u/arojas/update_singular_to_4_2_1p2\" to \"u/mkoeppe/update_singular_to_4_2_1p2\"",
    "created_at": "2021-11-20T17:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656310",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/arojas/update_singular_to_4_2_1p2" to "u/mkoeppe/update_singular_to_4_2_1p2"



---

archive/issue_comments_656311.json:
```json
{
    "body": "Changing commit from \"720d10e8a7f7d2bf4038b65c64e73db494106a57\" to \"cca353b70b9fdf04ca2fb1b76fff097d6bde940a\"",
    "created_at": "2021-11-20T17:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656311",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "720d10e8a7f7d2bf4038b65c64e73db494106a57" to "cca353b70b9fdf04ca2fb1b76fff097d6bde940a"



---

archive/issue_comments_656312.json:
```json
{
    "body": "<a id='comment:20'></a>\nNew commits:\n|                                                                                                                                          |                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[cca353b](https://github.com/sagemath/sagetrac-mirror/commit/cca353b70b9fdf04ca2fb1b76fff097d6bde940a)|`src/sage/rings/polynomial/hilbert.pyx: Fix doctest markup`|",
    "created_at": "2021-11-20T17:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656312",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
New commits:
|                                                                                                                                          |                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[cca353b](https://github.com/sagemath/sagetrac-mirror/commit/cca353b70b9fdf04ca2fb1b76fff097d6bde940a)|`src/sage/rings/polynomial/hilbert.pyx: Fix doctest markup`|



---

archive/issue_comments_656313.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/1482688821, https://github.com/mkoeppe/sage/actions/runs/1482688827\" to \"https://github.com/mkoeppe/sage/actions/runs/1485019210, https://github.com/mkoeppe/sage/actions/runs/1485019208\"",
    "created_at": "2021-11-20T17:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656313",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/1482688821, https://github.com/mkoeppe/sage/actions/runs/1482688827" to "https://github.com/mkoeppe/sage/actions/runs/1485019210, https://github.com/mkoeppe/sage/actions/runs/1485019208"



---

archive/issue_comments_656314.json:
```json
{
    "body": "<a id='comment:21'></a>\n`ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/4274462334?check_suite_focus=true) and `ubuntu-trusty-standard`:\n\n```\n  [sagemath_doc_html-none]       from sage.symbolic.all   import *\n  [sagemath_doc_html-none]     File \"/sage/local/var/lib/sage/venv-python3.9.7/lib/python3.9/site-packages/sage/symbolic/all.py\", line 8, in <module>\n  [sagemath_doc_html-none]       import sage.symbolic.expression  # initialize pynac before .ring\n  [sagemath_doc_html-none]   ImportError: /sage/local/var/lib/sage/venv-python3.9.7/lib/python3.9/site-packages/sage/symbolic/expression.cpython-39-x86_64-linux-gnu.so: undefined symbol: fmpq_poly_inv_series_newton\n  [sagemath_doc_html-none]   Error: './sage --docbuild --all-documents' failed\n```",
    "created_at": "2021-11-21T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656314",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
`ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/4274462334?check_suite_focus=true) and `ubuntu-trusty-standard`:

```
  [sagemath_doc_html-none]       from sage.symbolic.all   import *
  [sagemath_doc_html-none]     File "/sage/local/var/lib/sage/venv-python3.9.7/lib/python3.9/site-packages/sage/symbolic/all.py", line 8, in <module>
  [sagemath_doc_html-none]       import sage.symbolic.expression  # initialize pynac before .ring
  [sagemath_doc_html-none]   ImportError: /sage/local/var/lib/sage/venv-python3.9.7/lib/python3.9/site-packages/sage/symbolic/expression.cpython-39-x86_64-linux-gnu.so: undefined symbol: fmpq_poly_inv_series_newton
  [sagemath_doc_html-none]   Error: './sage --docbuild --all-documents' failed
```



---

archive/issue_comments_656315.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-21T01:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656315",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_656316.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mkoeppe](#comment%3A21):\n> `ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/4274462334?check_suite_focus=true) and `ubuntu-trusty-standard`:\n\n\nhow can one see the singular spkg logs?",
    "created_at": "2021-11-21T08:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656316",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:23'></a>
Replying to [mkoeppe](#comment%3A21):
> `ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/4274462334?check_suite_focus=true) and `ubuntu-trusty-standard`:


how can one see the singular spkg logs?



---

archive/issue_comments_656317.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe log artifacts are now available at https://github.com/mkoeppe/sage/actions/runs/1485019210 (I had to cancel the workflow for that)",
    "created_at": "2021-11-21T08:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656317",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
The log artifacts are now available at https://github.com/mkoeppe/sage/actions/runs/1485019210 (I had to cancel the workflow for that)



---

archive/issue_comments_656318.json:
```json
{
    "body": "<a id='comment:25'></a>\nStill can't figure out where spkg logs are. Anyways, I insalled the docker image locally and this is the actual issue:\n\n```\nconfigure:24015: gcc -std=gnu11 -o conftest -I/home/sage/local/include/ -I/home/sage/local/include -I/home/sage/local/include -g -O2  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops  -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops conftest.c -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lflint -lmpfr -lgmp -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lpthread  -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lm  >&5\nIn file included from /home/sage/local/include/flint/nmod_vec.h:29:0,\n                 from /home/sage/local/include/flint/fmpz.h:31,\n                 from conftest.c:34:\n/home/sage/local/include/flint/ulong_extras.h:119:1: error: unknown type name '_Thread_local'\n extern FLINT_TLS_PREFIX ulong * _flint_primes[FLINT_BITS];\n ^\n```\nPerhaps a too old gcc?",
    "created_at": "2021-11-21T11:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656318",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:25'></a>
Still can't figure out where spkg logs are. Anyways, I insalled the docker image locally and this is the actual issue:

```
configure:24015: gcc -std=gnu11 -o conftest -I/home/sage/local/include/ -I/home/sage/local/include -I/home/sage/local/include -g -O2  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops  -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops conftest.c -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lflint -lmpfr -lgmp -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lpthread  -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lm  >&5
In file included from /home/sage/local/include/flint/nmod_vec.h:29:0,
                 from /home/sage/local/include/flint/fmpz.h:31,
                 from conftest.c:34:
/home/sage/local/include/flint/ulong_extras.h:119:1: error: unknown type name '_Thread_local'
 extern FLINT_TLS_PREFIX ulong * _flint_primes[FLINT_BITS];
 ^
```
Perhaps a too old gcc?



---

archive/issue_comments_656319.json:
```json
{
    "body": "<a id='comment:26'></a>\nBesides singular not using flint on trusty, this error shows that there's also an issue in sagelib: `symbolic.expression` uses flint functions (probably via GiNaC) and yet it only links to flint via `SINGULAR_LIBRARIES` (and therefore it underlinks if singular is built without flint). It should be linking to flint directly.",
    "created_at": "2021-11-21T11:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656319",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:26'></a>
Besides singular not using flint on trusty, this error shows that there's also an issue in sagelib: `symbolic.expression` uses flint functions (probably via GiNaC) and yet it only links to flint via `SINGULAR_LIBRARIES` (and therefore it underlinks if singular is built without flint). It should be linking to flint directly.



---

archive/issue_comments_656320.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [arojas](#comment%3A26):\n> Besides singular not using flint on trusty, this error shows that there's also an issue in sagelib: `symbolic.expression` uses flint functions (probably via GiNaC) and yet it only links to flint via `SINGULAR_LIBRARIES` (and therefore it underlinks if singular is built without flint). It should be linking to flint directly.\n\n\nOpened #32919 for this",
    "created_at": "2021-11-21T12:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656320",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:27'></a>
Replying to [arojas](#comment%3A26):
> Besides singular not using flint on trusty, this error shows that there's also an issue in sagelib: `symbolic.expression` uses flint functions (probably via GiNaC) and yet it only links to flint via `SINGULAR_LIBRARIES` (and therefore it underlinks if singular is built without flint). It should be linking to flint directly.


Opened #32919 for this



---

archive/issue_comments_656321.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [arojas](#comment%3A25):\n> {{{\n> configure:24015: gcc -std=gnu11 -o conftest -I/home/sage/local/include/ -I/home/sage/local/include -I/home/sage/local/include -g -O2  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops  -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops conftest.c -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lflint -lmpfr -lgmp -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lpthread  -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lm  >&5\n> In file included from /home/sage/local/include/flint/nmod_vec.h:29:0,\n>                  from /home/sage/local/include/flint/fmpz.h:31,\n>                  from conftest.c:34:\n> /home/sage/local/include/flint/ulong_extras.h:119:1: error: unknown type name '_Thread_local'\n>  extern FLINT_TLS_PREFIX ulong * _flint_primes[FLINT_BITS];\n>  ^\n> }}}\n> Perhaps a too old gcc?\n\n\nYes, it looks like we are running into an old problem, \nhttps://bugs.freebsd.org/bugzilla/show_bug.cgi?id=203066, \"don't use `-std=gnu11` with gcc < 4.9",
    "created_at": "2021-11-21T18:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656321",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Replying to [arojas](#comment%3A25):
> {{{
> configure:24015: gcc -std=gnu11 -o conftest -I/home/sage/local/include/ -I/home/sage/local/include -I/home/sage/local/include -g -O2  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops  -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -Wl,-rpath-link,/home/sage/local/lib -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib  -pipe -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -funroll-loops conftest.c -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lflint -lmpfr -lgmp -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lpthread  -L/home/sage/local/lib -Wl,-rpath,/home/sage/local/lib -lgmp -lm  >&5
> In file included from /home/sage/local/include/flint/nmod_vec.h:29:0,
>                  from /home/sage/local/include/flint/fmpz.h:31,
>                  from conftest.c:34:
> /home/sage/local/include/flint/ulong_extras.h:119:1: error: unknown type name '_Thread_local'
>  extern FLINT_TLS_PREFIX ulong * _flint_primes[FLINT_BITS];
>  ^
> }}}
> Perhaps a too old gcc?


Yes, it looks like we are running into an old problem, 
https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=203066, "don't use `-std=gnu11` with gcc < 4.9



---

archive/issue_comments_656322.json:
```json
{
    "body": "<a id='comment:29'></a>\nIt looks like this is showing up now simply because the new singular tarball has been generated with a newer version of autoconf.\n\nBefore:\n\n```\nConfiguring singular-4.2.1.p0\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\n```\n\n\nAfter:\n\n```\nConfiguring singular-4.2.1p2\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether the compiler supports GNU C... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to enable C11 features... -std=gnu11\n```",
    "created_at": "2021-11-21T18:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656322",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
It looks like this is showing up now simply because the new singular tarball has been generated with a newer version of autoconf.

Before:

```
Configuring singular-4.2.1.p0
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
```


After:

```
Configuring singular-4.2.1p2
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether the compiler supports GNU C... yes
checking whether gcc accepts -g... yes
checking for gcc option to enable C11 features... -std=gnu11
```



---

archive/issue_comments_656323.json:
```json
{
    "body": "Changing commit from \"cca353b70b9fdf04ca2fb1b76fff097d6bde940a\" to \"8c6c9498e236cbc6a15b3ad80830db3e5adb55de\"",
    "created_at": "2021-11-21T20:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cca353b70b9fdf04ca2fb1b76fff097d6bde940a" to "8c6c9498e236cbc6a15b3ad80830db3e5adb55de"



---

archive/issue_comments_656324.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[8c6c949](https://github.com/sagemath/sagetrac-mirror/commit/8c6c9498e236cbc6a15b3ad80830db3e5adb55de)|`build/pkgs/flint/: Add patch for threads with GCC < 4.9`|",
    "created_at": "2021-11-21T20:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[8c6c949](https://github.com/sagemath/sagetrac-mirror/commit/8c6c9498e236cbc6a15b3ad80830db3e5adb55de)|`build/pkgs/flint/: Add patch for threads with GCC < 4.9`|



---

archive/issue_comments_656325.json:
```json
{
    "body": "<a id='comment:31'></a>\nWith this patch for flint, Singular finds it, as tested with `tox -e docker-ubuntu-trusty-standard -- singular`.",
    "created_at": "2021-11-21T20:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656325",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
With this patch for flint, Singular finds it, as tested with `tox -e docker-ubuntu-trusty-standard -- singular`.



---

archive/issue_comments_656326.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-21T20:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656326",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_656327.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x\n \n+\n+PR for fixing the flint/singular problem on ubuntu-trusty:\n+https://github.com/wbhart/flint2/pull/1040\n+\n``````\n",
    "created_at": "2021-11-21T20:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656327",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
 From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x
 
+
+PR for fixing the flint/singular problem on ubuntu-trusty:
+https://github.com/wbhart/flint2/pull/1040
+
``````




---

archive/issue_comments_656328.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[eea6328](https://github.com/sagemath/sagetrac-mirror/commit/eea6328795664a3958988495c010e6431e6db5ea)|`build/pkgs/singular/spkg-install.in: singular.hlp -> singular.info`|",
    "created_at": "2021-11-22T17:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[eea6328](https://github.com/sagemath/sagetrac-mirror/commit/eea6328795664a3958988495c010e6431e6db5ea)|`build/pkgs/singular/spkg-install.in: singular.hlp -> singular.info`|



---

archive/issue_comments_656329.json:
```json
{
    "body": "Changing commit from \"8c6c9498e236cbc6a15b3ad80830db3e5adb55de\" to \"eea6328795664a3958988495c010e6431e6db5ea\"",
    "created_at": "2021-11-22T17:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8c6c9498e236cbc6a15b3ad80830db3e5adb55de" to "eea6328795664a3958988495c010e6431e6db5ea"



---

archive/issue_comments_656330.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n \n PR for fixing the flint/singular problem on ubuntu-trusty:\n-https://github.com/wbhart/flint2/pull/1040\n+https://github.com/wbhart/flint2/pull/1040 (merged)\n \n``````\n",
    "created_at": "2021-11-26T18:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656330",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 
 PR for fixing the flint/singular problem on ubuntu-trusty:
-https://github.com/wbhart/flint2/pull/1040
+https://github.com/wbhart/flint2/pull/1040 (merged)
 
``````




---

archive/issue_comments_656331.json:
```json
{
    "body": "<a id='comment:37'></a>\nIf it helps I could try this ticket out\non a few machines (Cygwin, Linux, macOS).\n\nFor now I can only offer trivial comments\n(feel free to disregard them).\n\nI would wrap this long output line:\n\n```diff\n         sage: J.hilbert_numerator(algorithm='singular')\n-        120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29 - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25 - 987193350*t^24 + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21 - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18 + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9 + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4 + 5060*t^3 - 330*t^2 + 1\n+        120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29\n+        - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25\n+        - 987193350*t^24 + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21\n+        - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18 + 752776200*t^17\n+        + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13\n+        + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9\n+        + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4\n+        + 5060*t^3 - 330*t^2 + 1\n```\nor maybe even rewrite that doctest as:\n\n```diff\n-        sage: J.hilbert_numerator(algorithm='singular')\n+        sage: p = J.hilbert_numerator(algorithm='singular')\n+        sage: p.list()\n+        [1, 0, -330, 5060, -39270, 183744, -468930, -172260, 7837830,\n+         -42299400, 146679390, -382391100, 786893250, -1294246800,\n+         1673936550, -1580830020, 752776200, 752776200, 1806623746,\n+         -471656596, -8403314, -403422496, 1372406746, 1847488500,\n+         -987193350, 445188744, -168384150, 52832780, -13522410,\n+         2753520, -429374, 48180, -3465, 120]\n```\nwhose output I personally find easier to parse visually.\n\nAnother wrapping suggestion:\n\n```diff\n-        [x + y + 57119*z + 4, y^2 + 3*y + 17220, y*z + ..., 2*y + 158864, z^2 + 17223, 2*z + 41856, 164878]\n+        [x + y + 57119*z + 4, y^2 + 3*y + 17220, y*z + ...,\n+         2*y + 158864, z^2 + 17223, 2*z + 41856, 164878]\n```\n\nSome pep8 whitespace suggestions (the last two occur several times):\n\n```diff\n-            n_Delete(&n,r.cf)\n+            n_Delete(&n, r.cf)\n```\n\n```diff\n-                p_SetCoeff(newptemp,n_Copy(p_GetCoeff(p,r),r.cf),r)\n+                p_SetCoeff(newptemp, n_Copy(p_GetCoeff(p, r), r.cf), r)\n```\n\n```diff\n-            p_SetCoeff(p, n_Init(1,_ring.cf), _ring)\n+            p_SetCoeff(p, n_Init(1, _ring.cf), _ring)\n```",
    "created_at": "2021-11-26T22:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656331",
    "user": "https://github.com/slel"
}
```

<a id='comment:37'></a>
If it helps I could try this ticket out
on a few machines (Cygwin, Linux, macOS).

For now I can only offer trivial comments
(feel free to disregard them).

I would wrap this long output line:

```diff
         sage: J.hilbert_numerator(algorithm='singular')
-        120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29 - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25 - 987193350*t^24 + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21 - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18 + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9 + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4 + 5060*t^3 - 330*t^2 + 1
+        120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29
+        - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25
+        - 987193350*t^24 + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21
+        - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18 + 752776200*t^17
+        + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13
+        + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9
+        + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4
+        + 5060*t^3 - 330*t^2 + 1
```
or maybe even rewrite that doctest as:

```diff
-        sage: J.hilbert_numerator(algorithm='singular')
+        sage: p = J.hilbert_numerator(algorithm='singular')
+        sage: p.list()
+        [1, 0, -330, 5060, -39270, 183744, -468930, -172260, 7837830,
+         -42299400, 146679390, -382391100, 786893250, -1294246800,
+         1673936550, -1580830020, 752776200, 752776200, 1806623746,
+         -471656596, -8403314, -403422496, 1372406746, 1847488500,
+         -987193350, 445188744, -168384150, 52832780, -13522410,
+         2753520, -429374, 48180, -3465, 120]
```
whose output I personally find easier to parse visually.

Another wrapping suggestion:

```diff
-        [x + y + 57119*z + 4, y^2 + 3*y + 17220, y*z + ..., 2*y + 158864, z^2 + 17223, 2*z + 41856, 164878]
+        [x + y + 57119*z + 4, y^2 + 3*y + 17220, y*z + ...,
+         2*y + 158864, z^2 + 17223, 2*z + 41856, 164878]
```

Some pep8 whitespace suggestions (the last two occur several times):

```diff
-            n_Delete(&n,r.cf)
+            n_Delete(&n, r.cf)
```

```diff
-                p_SetCoeff(newptemp,n_Copy(p_GetCoeff(p,r),r.cf),r)
+                p_SetCoeff(newptemp, n_Copy(p_GetCoeff(p, r), r.cf), r)
```

```diff
-            p_SetCoeff(p, n_Init(1,_ring.cf), _ring)
+            p_SetCoeff(p, n_Init(1, _ring.cf), _ring)
```



---

archive/issue_comments_656332.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, Singular\".",
    "created_at": "2021-11-26T22:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656332",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade, Singular".



---

archive/issue_comments_656333.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x\n \n+The FLINT/Singular problem on ubuntu-trusty\n+will be fixed by this (already merged)\n+pull request to FLINT:\n \n-PR for fixing the flint/singular problem on ubuntu-trusty:\n-https://github.com/wbhart/flint2/pull/1040 (merged)\n+- https://github.com/wbhart/flint2/pull/1040\n \n``````\n",
    "created_at": "2021-11-26T22:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656333",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 From the  [release notes](https://github.com/Singular/Singular/blob/spielwiese/doc/NEWS.texi): update for using FLINT 2.8.x
 
+The FLINT/Singular problem on ubuntu-trusty
+will be fixed by this (already merged)
+pull request to FLINT:
 
-PR for fixing the flint/singular problem on ubuntu-trusty:
-https://github.com/wbhart/flint2/pull/1040 (merged)
+- https://github.com/wbhart/flint2/pull/1040
 
``````




---

archive/issue_comments_656334.json:
```json
{
    "body": "<a id='comment:38'></a>\nCygwin testing would be valuable",
    "created_at": "2021-11-26T23:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656334",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Cygwin testing would be valuable



---

archive/issue_comments_656335.json:
```json
{
    "body": "<a id='comment:39'></a>\nAlso please feel free to push these edits to the ticket",
    "created_at": "2021-11-27T19:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656335",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Also please feel free to push these edits to the ticket



---

archive/issue_comments_656336.json:
```json
{
    "body": "<a id='comment:40'></a>\nSetting to blocker because system singular is already being picked up by our spkg-configure",
    "created_at": "2021-12-09T21:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656336",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Setting to blocker because system singular is already being picked up by our spkg-configure



---

archive/issue_comments_656337.json:
```json
{
    "body": "<a id='comment:41'></a>\nLet's get this in please",
    "created_at": "2021-12-17T23:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656337",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Let's get this in please



---

archive/issue_comments_656338.json:
```json
{
    "body": "<a id='comment:42'></a>\n4.2.1p3 is out including the commit needed for #32959",
    "created_at": "2021-12-17T23:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656338",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:42'></a>
4.2.1p3 is out including the commit needed for #32959



---

archive/issue_comments_656339.json:
```json
{
    "body": "<a id='comment:43'></a>\nyes, seems like a nice update to get: https://github.com/Singular/Singular/releases/tag/Release-4-2-1p3",
    "created_at": "2021-12-18T00:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656339",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
yes, seems like a nice update to get: https://github.com/Singular/Singular/releases/tag/Release-4-2-1p3



---

archive/issue_comments_656340.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[a137b7e](https://github.com/sagemath/sagetrac-mirror/commit/a137b7e6ff86fdf222d34ceb562d8f5fa5e4e741)|`Merge tag '9.5.beta8' into t/32907/update_singular_to_4_2_1p2`|\n|[0856554](https://github.com/sagemath/sagetrac-mirror/commit/0856554004c43d72729967a0865f795b29488da2)|`build/pkgs/singular: Update to 4.2.1p3`|",
    "created_at": "2021-12-18T04:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[a137b7e](https://github.com/sagemath/sagetrac-mirror/commit/a137b7e6ff86fdf222d34ceb562d8f5fa5e4e741)|`Merge tag '9.5.beta8' into t/32907/update_singular_to_4_2_1p2`|
|[0856554](https://github.com/sagemath/sagetrac-mirror/commit/0856554004c43d72729967a0865f795b29488da2)|`build/pkgs/singular: Update to 4.2.1p3`|



---

archive/issue_comments_656341.json:
```json
{
    "body": "Changing commit from \"eea6328795664a3958988495c010e6431e6db5ea\" to \"0856554004c43d72729967a0865f795b29488da2\"",
    "created_at": "2021-12-18T04:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eea6328795664a3958988495c010e6431e6db5ea" to "0856554004c43d72729967a0865f795b29488da2"



---

archive/issue_comments_656342.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/1485019210, https://github.com/mkoeppe/sage/actions/runs/1485019208\" to \"\"",
    "created_at": "2021-12-18T04:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656342",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/1485019210, https://github.com/mkoeppe/sage/actions/runs/1485019208" to ""



---

archive/issue_events_097838.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "rename": {
        "from": "Update singular to 4.2.1p2",
        "to": "Update singular to 4.2.1p3"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32907#event-97838"
}
```



---

archive/issue_comments_656343.json:
```json
{
    "body": "<a id='comment:46'></a>\nTests on GH Actions look fine.",
    "created_at": "2021-12-18T18:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656343",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Tests on GH Actions look fine.



---

archive/issue_comments_656344.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/1595134485\"",
    "created_at": "2021-12-18T18:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656344",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/1595134485"



---

archive/issue_comments_656345.json:
```json
{
    "body": "<a id='comment:47'></a>\nlgtm",
    "created_at": "2021-12-22T23:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656345",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
lgtm



---

archive/issue_comments_656346.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-22T23:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656346",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_656347.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/1595134485\" to \"Dima Pasechnik\"",
    "created_at": "2021-12-22T23:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656347",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/1595134485" to "Dima Pasechnik"



---

archive/issue_comments_656348.json:
```json
{
    "body": "<a id='comment:48'></a>\nThanks!",
    "created_at": "2021-12-23T00:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656348",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>
Thanks!



---

archive/issue_comments_656349.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-28T21:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656349",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_656350.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_singular_to_4_2_1p2\" to \"0856554004c43d72729967a0865f795b29488da2\"",
    "created_at": "2021-12-28T21:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656350",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/update_singular_to_4_2_1p2" to "0856554004c43d72729967a0865f795b29488da2"



---

archive/issue_events_097839.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-28T21:15:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32907#event-97839"
}
```



---

archive/issue_comments_656351.json:
```json
{
    "body": "<a id='comment:50'></a>\nupdate to 4.3.0 is dealt with on #33160",
    "created_at": "2022-01-13T13:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656351",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>
update to 4.3.0 is dealt with on #33160



---

archive/issue_comments_656352.json:
```json
{
    "body": "Changing commit from \"0856554004c43d72729967a0865f795b29488da2\" to \"\"",
    "created_at": "2022-01-13T13:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32907#issuecomment-656352",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "0856554004c43d72729967a0865f795b29488da2" to ""
