# Issue 32759: ./configure --disable-doc

archive/issues_032522.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis switch will disable the docbuild and avoid installing its many dependencies (sphinx...).\n\nIn contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.\n\nSplit out from #31396.\n\nWe also add `argon2_cffi` and `nbclient` to the packages disabled upon `--disable-notebook`.\n\n\nDepends on #29039\n\nCC:  @tobiasdiez @dimpase @jhpalmieri @sagetrac-tmonteil\n\nComponent: **build: configure**\n\nAuthor: **Matthias Koeppe, John Palmieri**\n\nBranch/Commit: **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**\n\nReviewer: **John Palmieri, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32759_\n\n",
    "closed_at": "2022-01-09T10:47:16Z",
    "created_at": "2021-10-24T22:45:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "./configure --disable-doc",
    "type": "issue",
    "updated_at": "2022-01-09T10:47:16Z",
    "url": "https://github.com/sagemath/sage/issues/32759",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

This switch will disable the docbuild and avoid installing its many dependencies (sphinx...).

In contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.

Split out from #31396.

We also add `argon2_cffi` and `nbclient` to the packages disabled upon `--disable-notebook`.


Depends on #29039

CC:  @tobiasdiez @dimpase @jhpalmieri @sagetrac-tmonteil

Component: **build: configure**

Author: **Matthias Koeppe, John Palmieri**

Branch/Commit: **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**

Reviewer: **John Palmieri, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/32759_





---

archive/issue_events_447886.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T22:45:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447886"
}
```



---

archive/issue_events_447887.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T22:45:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447887"
}
```



---

archive/issue_events_447888.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T22:45:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447888"
}
```



---

archive/issue_events_447889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T22:45:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447889"
}
```



---

archive/issue_comments_528603.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)**",
    "created_at": "2021-10-24T23:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528603",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)**



---

archive/issue_comments_528604.json:
```json
{
    "body": "Commit: **[`18b4055`](https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432)**",
    "created_at": "2021-10-25T00:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528604",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`18b4055`](https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432)**



---

archive/issue_comments_528605.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97b9fcf4ca074fc8135ff49780bd55667675a638\"><code>97b9fcf</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432\"><code>18b4055</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr></table>\n",
    "created_at": "2021-10-25T00:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528605",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97b9fcf4ca074fc8135ff49780bd55667675a638"><code>97b9fcf</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432"><code>18b4055</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr></table>




---

archive/issue_comments_528606.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n This switch will disable the docbuild and installation of its many dependencies (sphinx...)\n+\n+In contrast to other packages, `ppl`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`.\n+We conditionalize the dependency of `ppl` on this and also on `sphinx` being in the list of installed packages.\n \n Split out from #31396.\n \n``````\n",
    "created_at": "2021-10-25T01:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528606",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
 This switch will disable the docbuild and installation of its many dependencies (sphinx...)
+
+In contrast to other packages, `ppl`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`.
+We conditionalize the dependency of `ppl` on this and also on `sphinx` being in the list of installed packages.
 
 Split out from #31396.
 
``````




---

archive/issue_comments_528607.json:
```json
{
    "body": "Changed commit from **[`18b4055`](https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432)** to **[`dfd23fb`](https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f)**",
    "created_at": "2021-10-25T01:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`18b4055`](https://github.com/sagemath/sagetrac-mirror/commit/18b4055a0f5fce7a4c027f4db859b4faa522d432)** to **[`dfd23fb`](https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f)**



---

archive/issue_comments_528608.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f\"><code>dfd23fb</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr></table>\n",
    "created_at": "2021-10-25T01:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528608",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f"><code>dfd23fb</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr></table>




---

archive/issue_comments_528609.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-10-25T01:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528609",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_447890.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-25T01:56:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447890"
}
```



---

archive/issue_comments_528610.json:
```json
{
    "body": "Changed commit from **[`dfd23fb`](https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f)** to **[`7307c75`](https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93)**",
    "created_at": "2021-10-25T02:37:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dfd23fb`](https://github.com/sagemath/sagetrac-mirror/commit/dfd23fbd45fd4cbb9307925256819dc7cbdb350f)** to **[`7307c75`](https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93)**



---

archive/issue_comments_528611.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93\"><code>7307c75</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr></table>\n",
    "created_at": "2021-10-25T02:37:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93"><code>7307c75</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr></table>




---

archive/issue_comments_528612.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n \n Split out from #31396.\n \n+We also add another package to those that are disabled upon `--disable-notebook`.\n+\n``````\n",
    "created_at": "2021-10-25T02:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528612",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 
 Split out from #31396.
 
+We also add another package to those that are disabled upon `--disable-notebook`.
+
``````




---

archive/issue_comments_528613.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIf `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?",
    "created_at": "2021-10-29T23:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528613",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

If `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?



---

archive/issue_comments_528614.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAlso, after I used `./configure --disable-doc`, packages like `alabaster` and `sphinxcontrib-...` were built anyway.",
    "created_at": "2021-10-29T23:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528614",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Also, after I used `./configure --disable-doc`, packages like `alabaster` and `sphinxcontrib-...` were built anyway.



---

archive/issue_comments_528615.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jhpalmieri](#comment%3A9):\n> If `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?\n\nYes, that's a good idea.",
    "created_at": "2021-10-29T23:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528615",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jhpalmieri](#comment%3A9):
> If `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?

Yes, that's a good idea.



---

archive/issue_comments_528616.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n`config.log` says (for example)\n\n```\nconfigure:45112: result: sphinx-4.2.0:                                standard, but disabled using configure option\n```\nbut maybe the problem is that I ran `make` instead of `make build`?",
    "created_at": "2021-10-29T23:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528616",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

`config.log` says (for example)

```
configure:45112: result: sphinx-4.2.0:                                standard, but disabled using configure option
```
but maybe the problem is that I ran `make` instead of `make build`?



---

archive/issue_comments_528617.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYes, probably the `all-start` target pulled in the doc dependencies.",
    "created_at": "2021-10-29T23:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528617",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Yes, probably the `all-start` target pulled in the doc dependencies.



---

archive/issue_comments_528618.json:
```json
{
    "body": "Changed commit from **[`7307c75`](https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93)** to **[`128de23`](https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1)**",
    "created_at": "2021-11-09T01:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7307c75`](https://github.com/sagemath/sagetrac-mirror/commit/7307c7515f6d001a46fd709b4a09c1e0e5a03d93)** to **[`128de23`](https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1)**



---

archive/issue_comments_528619.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d13b8aef2200f2101dd02f8becb69a094d938767\"><code>d13b8ae</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4121cb07b4d787c551e6a7811cb17893cd03fe0c\"><code>4121cb0</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ca1189e228794cbcd4e2ae3b52278ef935dc86e\"><code>8ca1189</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccf6fb548e817105e8f70de3e76d5860e1ed6f5f\"><code>ccf6fb5</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e26780afcbe40662f27b96b7dbd563843d08452\"><code>8e26780</code></a></td><td><code>build/pkgs/sagemath_doc_{html,pdf}: New; delegate to them from targets doc-html etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeb8777b0c31bbf15f0d97171c3eccce119cffac\"><code>eeb8777</code></a></td><td><code>m4/sage_spkg_collect.m4: Determine install tree for python3 via new trees.txt mechanism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8e19a07dd6039be28f17e67e9fd2e693f14a52b\"><code>c8e19a0</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a4424b3fa0c546bc05aef5320429749f1b143e9\"><code>5a4424b</code></a></td><td><code>build/make/Makefile.in (all-sage): Do not include packages installed in SAGE_DOCS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67714b849044f1391a3f6e8ab8dfd27ead133177\"><code>67714b8</code></a></td><td><code>Merge #31356</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1\"><code>128de23</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>\n",
    "created_at": "2021-11-09T01:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d13b8aef2200f2101dd02f8becb69a094d938767"><code>d13b8ae</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4121cb07b4d787c551e6a7811cb17893cd03fe0c"><code>4121cb0</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ca1189e228794cbcd4e2ae3b52278ef935dc86e"><code>8ca1189</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccf6fb548e817105e8f70de3e76d5860e1ed6f5f"><code>ccf6fb5</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e26780afcbe40662f27b96b7dbd563843d08452"><code>8e26780</code></a></td><td><code>build/pkgs/sagemath_doc_{html,pdf}: New; delegate to them from targets doc-html etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeb8777b0c31bbf15f0d97171c3eccce119cffac"><code>eeb8777</code></a></td><td><code>m4/sage_spkg_collect.m4: Determine install tree for python3 via new trees.txt mechanism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8e19a07dd6039be28f17e67e9fd2e693f14a52b"><code>c8e19a0</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a4424b3fa0c546bc05aef5320429749f1b143e9"><code>5a4424b</code></a></td><td><code>build/make/Makefile.in (all-sage): Do not include packages installed in SAGE_DOCS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67714b849044f1391a3f6e8ab8dfd27ead133177"><code>67714b8</code></a></td><td><code>Merge #31356</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1"><code>128de23</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>




---

archive/issue_comments_528620.json:
```json
{
    "body": "Dependencies: **#31356**",
    "created_at": "2021-11-09T01:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528620",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31356**



---

archive/issue_comments_528621.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment%3A11):\n> Replying to [@jhpalmieri](#comment%3A9):\n> > If `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?\n> \n> \n> Yes, that's a good idea.\n\nThis is implemented now, via #31356",
    "created_at": "2021-11-09T01:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528621",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment%3A11):
> Replying to [@jhpalmieri](#comment%3A9):
> > If `--disable-doc` is given, then should `doc` be removed from the `all-start` target, so that `make` doesn't try to build the docs?
> 
> 
> Yes, that's a good idea.

This is implemented now, via #31356



---

archive/issue_comments_528622.json:
```json
{
    "body": "Changed commit from **[`128de23`](https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1)** to **[`8a7027a`](https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5)**",
    "created_at": "2021-11-10T22:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528622",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`128de23`](https://github.com/sagemath/sagetrac-mirror/commit/128de23f9262ed5bd417fba5310d7c11e4a362c1)** to **[`8a7027a`](https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5)**



---

archive/issue_comments_528623.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb65e034bad3ec82b19c90211ca5bf70533e8fe5\"><code>eb65e03</code></a></td><td><code>build/pkgs/sagemath_doc_*/dependencies: Add sage_docbuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7989d8767056d68def98ee22116fbd24d7187d2f\"><code>7989d87</code></a></td><td><code>src/doc/Makefile: Handle errors from './sage --docbuild --all-documents'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64fb763d3f58e05954d576464a5c66cc1f5307f\"><code>d64fb76</code></a></td><td><code>build/make/Makefile.in: Undo reintroduction of SAGE_SKIP_PLOT_DIRECTIVE, SAGE_DOC_MATHJAX settings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6afc0d5535530f9f71538821ec07a7cb95d44d19\"><code>6afc0d5</code></a></td><td><code>build/pkgs/sagemath_doc_html/spkg-install: Move handling of SAGE_DOC_JSMATH environment variable here from src/bin/sage-env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2cf40c2a9b023c2449dbf4186aeb369f604390a\"><code>b2cf40c</code></a></td><td><code>build/make/Makefile.in: Undo reintroduction of SAGE_SKIP_PLOT_DIRECTIVE, SAGE_DOC_MATHJAX settings (fixup)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37a03bd94e1716af2926c30eddbaf6d38303f869\"><code>37a03bd</code></a></td><td><code>src/doc/en/developer/packaging.rst: Fix up section label</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc89a6657450c0e10c8322615f1fced0f8ebb984\"><code>fc89a66</code></a></td><td><code>build/pkgs/sagemath_doc_pdf/spkg-install: Set SAGE_DOC_MATHJAX as a workaround</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd298c4b7a6f845335b862f6dc2f8e18753937e7\"><code>fd298c4</code></a></td><td><code>build/pkgs/sagemath_doc_pdf/dependencies: Depend on sagemath_doc_html</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0593ea23446372b929104343b7ba44d95fb47a2\"><code>b0593ea</code></a></td><td><code>Merge #31356</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5\"><code>8a7027a</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>\n",
    "created_at": "2021-11-10T22:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528623",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb65e034bad3ec82b19c90211ca5bf70533e8fe5"><code>eb65e03</code></a></td><td><code>build/pkgs/sagemath_doc_*/dependencies: Add sage_docbuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7989d8767056d68def98ee22116fbd24d7187d2f"><code>7989d87</code></a></td><td><code>src/doc/Makefile: Handle errors from './sage --docbuild --all-documents'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64fb763d3f58e05954d576464a5c66cc1f5307f"><code>d64fb76</code></a></td><td><code>build/make/Makefile.in: Undo reintroduction of SAGE_SKIP_PLOT_DIRECTIVE, SAGE_DOC_MATHJAX settings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6afc0d5535530f9f71538821ec07a7cb95d44d19"><code>6afc0d5</code></a></td><td><code>build/pkgs/sagemath_doc_html/spkg-install: Move handling of SAGE_DOC_JSMATH environment variable here from src/bin/sage-env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2cf40c2a9b023c2449dbf4186aeb369f604390a"><code>b2cf40c</code></a></td><td><code>build/make/Makefile.in: Undo reintroduction of SAGE_SKIP_PLOT_DIRECTIVE, SAGE_DOC_MATHJAX settings (fixup)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37a03bd94e1716af2926c30eddbaf6d38303f869"><code>37a03bd</code></a></td><td><code>src/doc/en/developer/packaging.rst: Fix up section label</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc89a6657450c0e10c8322615f1fced0f8ebb984"><code>fc89a66</code></a></td><td><code>build/pkgs/sagemath_doc_pdf/spkg-install: Set SAGE_DOC_MATHJAX as a workaround</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd298c4b7a6f845335b862f6dc2f8e18753937e7"><code>fd298c4</code></a></td><td><code>build/pkgs/sagemath_doc_pdf/dependencies: Depend on sagemath_doc_html</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0593ea23446372b929104343b7ba44d95fb47a2"><code>b0593ea</code></a></td><td><code>Merge #31356</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5"><code>8a7027a</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>




---

archive/issue_comments_528624.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nRebased on top of updated #31356",
    "created_at": "2021-11-10T22:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528624",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Rebased on top of updated #31356



---

archive/issue_comments_528625.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nShould we expect doctests to pass with `./configure --disable-doc`? I get\n\n```\nsrc/sage/misc/sagedoc.py  # 8 doctests failed\nsrc/sage_docbuild/utils.py  # 5 doctests failed\nsrc/sage_docbuild/__init__.py  # 38 doctests failed\nsrc/sage_docbuild/sphinxbuild.py  # 13 doctests failed\nsrc/sage/docs/conf.py  # 1 doctest failed\n```\nwhich is not surprising, but should they be tagged so that they are only tested when `sagemath_doc_html` is built?",
    "created_at": "2021-11-11T04:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528625",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

Should we expect doctests to pass with `./configure --disable-doc`? I get

```
src/sage/misc/sagedoc.py  # 8 doctests failed
src/sage_docbuild/utils.py  # 5 doctests failed
src/sage_docbuild/__init__.py  # 38 doctests failed
src/sage_docbuild/sphinxbuild.py  # 13 doctests failed
src/sage/docs/conf.py  # 1 doctest failed
```
which is not surprising, but should they be tagged so that they are only tested when `sagemath_doc_html` is built?



---

archive/issue_comments_528626.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n`git grep 'dochtml'` shows that we already seem to have an optional tag for this kind of thing.\n\nWe should probably replace it by `# optional - sagemath_doc_html` and add the missing ones for the failing doctests.",
    "created_at": "2021-11-11T04:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528626",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

`git grep 'dochtml'` shows that we already seem to have an optional tag for this kind of thing.

We should probably replace it by `# optional - sagemath_doc_html` and add the missing ones for the failing doctests.



---

archive/issue_comments_528627.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nRight, and then in the top-level `Makefile`, this line needs to be changed:\n\n```\nTESTALL_FLAGS = --optional=sage,dochtml,optional,external,build\n```\nand maybe the last line in this block from `src/sage/doctest/control.py`:\n\n```\n            if have_git:\n                self.files.append(opj(SAGE_SRC, 'sage_setup'))\n                self.files.append(opj(SAGE_SRC, 'sage_docbuild'))\n```\nPerhaps define `have_docs` appropriately and have a separate `if have_docs` block. Either that or tag everything in `sage_docbuild`.",
    "created_at": "2021-11-11T04:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528627",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

Right, and then in the top-level `Makefile`, this line needs to be changed:

```
TESTALL_FLAGS = --optional=sage,dochtml,optional,external,build
```
and maybe the last line in this block from `src/sage/doctest/control.py`:

```
            if have_git:
                self.files.append(opj(SAGE_SRC, 'sage_setup'))
                self.files.append(opj(SAGE_SRC, 'sage_docbuild'))
```
Perhaps define `have_docs` appropriately and have a separate `if have_docs` block. Either that or tag everything in `sage_docbuild`.



---

archive/issue_comments_528628.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSomething like this?\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 858d8cb567..8dbb693e22 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -727,13 +727,14 @@ class DocTestController(SageObject):\n             Doctesting ...\n         \"\"\"\n         opj = os.path.join\n-        from sage.env import SAGE_SRC, SAGE_DOC_SRC, SAGE_ROOT, SAGE_ROOT_GIT\n+        from sage.env import SAGE_SRC, SAGE_DOC_SRC, SAGE_DOC, SAGE_ROOT, SAGE_ROOT_GIT\n         # SAGE_ROOT_GIT can be None on distributions which typically\n         # only have the SAGE_LOCAL install tree but not SAGE_ROOT\n         if SAGE_ROOT_GIT is not None:\n             have_git = os.path.isdir(SAGE_ROOT_GIT)\n         else:\n             have_git = False\n+        have_docs = os.path.isdir(opj(SAGE_DOC, 'html', 'en', 'tutorial'))\n \n         def all_files():\n             self.files.append(opj(SAGE_SRC, 'sage'))\n@@ -742,7 +743,8 @@ class DocTestController(SageObject):\n             # don't make sense to run outside a build environment\n             if have_git:\n                 self.files.append(opj(SAGE_SRC, 'sage_setup'))\n-                self.files.append(opj(SAGE_SRC, 'sage_docbuild'))\n+                if have_docs:\n+                    self.files.append(opj(SAGE_SRC, 'sage_docbuild'))\n             self.files.append(SAGE_DOC_SRC)\n \n         if self.options.all or (self.options.new and not have_git):\n```",
    "created_at": "2021-11-11T04:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528628",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

Something like this?

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 858d8cb567..8dbb693e22 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -727,13 +727,14 @@ class DocTestController(SageObject):
             Doctesting ...
         """
         opj = os.path.join
-        from sage.env import SAGE_SRC, SAGE_DOC_SRC, SAGE_ROOT, SAGE_ROOT_GIT
+        from sage.env import SAGE_SRC, SAGE_DOC_SRC, SAGE_DOC, SAGE_ROOT, SAGE_ROOT_GIT
         # SAGE_ROOT_GIT can be None on distributions which typically
         # only have the SAGE_LOCAL install tree but not SAGE_ROOT
         if SAGE_ROOT_GIT is not None:
             have_git = os.path.isdir(SAGE_ROOT_GIT)
         else:
             have_git = False
+        have_docs = os.path.isdir(opj(SAGE_DOC, 'html', 'en', 'tutorial'))
 
         def all_files():
             self.files.append(opj(SAGE_SRC, 'sage'))
@@ -742,7 +743,8 @@ class DocTestController(SageObject):
             # don't make sense to run outside a build environment
             if have_git:
                 self.files.append(opj(SAGE_SRC, 'sage_setup'))
-                self.files.append(opj(SAGE_SRC, 'sage_docbuild'))
+                if have_docs:
+                    self.files.append(opj(SAGE_SRC, 'sage_docbuild'))
             self.files.append(SAGE_DOC_SRC)
 
         if self.options.all or (self.options.new and not have_git):
```



---

archive/issue_comments_528629.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI think it would make more sense to just test whether `opj(SAGE_SRC, 'sage_docbuild')` exists.\n\nSame for `sage_setup`.\n\nI think we can get rid of the `have_git` logic",
    "created_at": "2021-11-11T04:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528629",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

I think it would make more sense to just test whether `opj(SAGE_SRC, 'sage_docbuild')` exists.

Same for `sage_setup`.

I think we can get rid of the `have_git` logic



---

archive/issue_comments_528630.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nBy the way, with `make distclean && ./configure --disable-doc && make build`, the various sphinx packages are still being built.",
    "created_at": "2021-11-11T04:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528630",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

By the way, with `make distclean && ./configure --disable-doc && make build`, the various sphinx packages are still being built.



---

archive/issue_comments_528631.json:
```json
{
    "body": "Changed commit from **[`8a7027a`](https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5)** to **[`b6167ca`](https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e)**",
    "created_at": "2021-11-11T05:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8a7027a`](https://github.com/sagemath/sagetrac-mirror/commit/8a7027ac2067fba77fad02db3377e60df494a0b5)** to **[`b6167ca`](https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e)**



---

archive/issue_comments_528632.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d962fa23cf3bb4bc0dc6a858e42b8dc4779725f\"><code>5d962fa</code></a></td><td><code>configure.ac (--disable-notebook): Also disable argon2_cffi</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da2f1cc3b4cbc402c4d6d147efea9072c95cbb71\"><code>da2f1cc</code></a></td><td><code>configure.ac (--disable-doc): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f0fee0b812312f869f29ce4e005281eb261b25e\"><code>4f0fee0</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92d06dc837e1c1e6c85343ac35673dfef95842fd\"><code>92d06dc</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1f1056e3680584724e0ddb1c20967c780d2b10\"><code>3b1f105</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64273d100c175024bd94dead89d90560d88ade6d\"><code>64273d1</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e\"><code>b6167ca</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>\n",
    "created_at": "2021-11-11T05:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528632",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d962fa23cf3bb4bc0dc6a858e42b8dc4779725f"><code>5d962fa</code></a></td><td><code>configure.ac (--disable-notebook): Also disable argon2_cffi</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da2f1cc3b4cbc402c4d6d147efea9072c95cbb71"><code>da2f1cc</code></a></td><td><code>configure.ac (--disable-doc): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f0fee0b812312f869f29ce4e005281eb261b25e"><code>4f0fee0</code></a></td><td><code>configure.ac (--disable-doc): Disable also 'requests' and its dependencies, and direct sphinx dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92d06dc837e1c1e6c85343ac35673dfef95842fd"><code>92d06dc</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1f1056e3680584724e0ddb1c20967c780d2b10"><code>3b1f105</code></a></td><td><code>build/pkgs/pplpy/dependencies: Fix up SAGE_SPKG_INSTALL_DOCS logic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64273d100c175024bd94dead89d90560d88ade6d"><code>64273d1</code></a></td><td><code>configure.ac (--disabled-notebook): Also disable nbclient</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e"><code>b6167ca</code></a></td><td><code>configure.ac (--disable-doc): Disable the actual docbuild on 'make'</code></td></tr></table>




---

archive/issue_comments_528633.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> Rebased on top of updated #31356\n\n... I had lost most of the commits in this rebase.\n\nFixed.",
    "created_at": "2021-11-11T05:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528633",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment%3A18):
> Rebased on top of updated #31356

... I had lost most of the commits in this rebase.

Fixed.



---

archive/issue_comments_528634.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@mkoeppe](#comment%3A23):\n> I think it would make more sense to just test whether `opj(SAGE_SRC, 'sage_docbuild')` exists.\n> \n> Same for `sage_setup`.\n> \n> I think we can get rid of the `have_git` logic\n\nEither that or test whether we can import `sage_docbuild`. I think the directory will exist (in a source distribution) regardless, but we don't want to test if we haven't at least built `sage_docbuild`. That seems cleaner than tagging everything in those files `optional - sage_docbuild`.",
    "created_at": "2021-11-11T05:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528634",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@mkoeppe](#comment%3A23):
> I think it would make more sense to just test whether `opj(SAGE_SRC, 'sage_docbuild')` exists.
> 
> Same for `sage_setup`.
> 
> I think we can get rid of the `have_git` logic

Either that or test whether we can import `sage_docbuild`. I think the directory will exist (in a source distribution) regardless, but we don't want to test if we haven't at least built `sage_docbuild`. That seems cleaner than tagging everything in those files `optional - sage_docbuild`.



---

archive/issue_comments_528635.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI think the doctesting logic is that the source tree (in SAGE_ROOT/src) is preferred over installed sources, which are only used for falling back (for example for use in downstream packaging). But I agree, when falling back to installed sources, then importing `sage_docbuild` and using its `__path__` is the right solution",
    "created_at": "2021-11-11T05:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528635",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

I think the doctesting logic is that the source tree (in SAGE_ROOT/src) is preferred over installed sources, which are only used for falling back (for example for use in downstream packaging). But I agree, when falling back to installed sources, then importing `sage_docbuild` and using its `__path__` is the right solution



---

archive/issue_comments_528636.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMy point is that the typical doctest in `sage_docbuild/*` starts with `from sage_docbuild import ...`, so we shouldn't bother to test (as part of `make testall` etc.) if we can't import `sage_docbuild`. So I suggest something like:\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 858d8cb567..2bf0a4beb4 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -740,9 +740,13 @@ class DocTestController(SageObject):\n             # Don't run these tests when not in the git repository; they are\n             # of interest for building sage, but not for runtime behavior and\n             # don't make sense to run outside a build environment\n-            if have_git:\n+            if os.path.isdir(opj(SAGE_SRC, 'sage_setup')):\n                 self.files.append(opj(SAGE_SRC, 'sage_setup'))\n+            try:\n+                import sage_docbuild\n                 self.files.append(opj(SAGE_SRC, 'sage_docbuild'))\n+            except ImportError:\n+                pass\n             self.files.append(SAGE_DOC_SRC)\n \n         if self.options.all or (self.options.new and not have_git):\n```",
    "created_at": "2021-11-11T05:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528636",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

My point is that the typical doctest in `sage_docbuild/*` starts with `from sage_docbuild import ...`, so we shouldn't bother to test (as part of `make testall` etc.) if we can't import `sage_docbuild`. So I suggest something like:

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 858d8cb567..2bf0a4beb4 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -740,9 +740,13 @@ class DocTestController(SageObject):
             # Don't run these tests when not in the git repository; they are
             # of interest for building sage, but not for runtime behavior and
             # don't make sense to run outside a build environment
-            if have_git:
+            if os.path.isdir(opj(SAGE_SRC, 'sage_setup')):
                 self.files.append(opj(SAGE_SRC, 'sage_setup'))
+            try:
+                import sage_docbuild
                 self.files.append(opj(SAGE_SRC, 'sage_docbuild'))
+            except ImportError:
+                pass
             self.files.append(SAGE_DOC_SRC)
 
         if self.options.all or (self.options.new and not have_git):
```



---

archive/issue_comments_528637.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAh ok, I agree. Same for `sage_setup` then, I think",
    "created_at": "2021-11-11T05:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528637",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Ah ok, I agree. Same for `sage_setup` then, I think



---

archive/issue_comments_528638.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1\"><code>3556181</code></a></td><td><code>git grep -l '#.*optional.*dochtml' | xargs sed -i.bak 's/# optional - dochtml/# optional - sagemath_doc_html/'</code></td></tr></table>\n",
    "created_at": "2021-11-11T05:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1"><code>3556181</code></a></td><td><code>git grep -l '#.*optional.*dochtml' | xargs sed -i.bak 's/# optional - dochtml/# optional - sagemath_doc_html/'</code></td></tr></table>




---

archive/issue_comments_528639.json:
```json
{
    "body": "Changed commit from **[`b6167ca`](https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e)** to **[`3556181`](https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1)**",
    "created_at": "2021-11-11T05:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6167ca`](https://github.com/sagemath/sagetrac-mirror/commit/b6167ca1afe1302a8bacabe321069022d28f863e)** to **[`3556181`](https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1)**



---

archive/issue_comments_528640.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a\"><code>4c11aab</code></a></td><td><code>sed -i.bak 's/dochtml/sagemath_doc_html/' Makefile src/bin/sage-runtests src/doc/en/developer/doctesting.rst</code></td></tr></table>\n",
    "created_at": "2021-11-11T05:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a"><code>4c11aab</code></a></td><td><code>sed -i.bak 's/dochtml/sagemath_doc_html/' Makefile src/bin/sage-runtests src/doc/en/developer/doctesting.rst</code></td></tr></table>




---

archive/issue_comments_528641.json:
```json
{
    "body": "Changed commit from **[`3556181`](https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1)** to **[`4c11aab`](https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a)**",
    "created_at": "2021-11-11T05:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3556181`](https://github.com/sagemath/sagetrac-mirror/commit/35561817d6458ff7591b837d14ffc55a284943c1)** to **[`4c11aab`](https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a)**



---

archive/issue_comments_528642.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nIs it possible that `SAGE_DOC_SRC` might be missing? We could do this:\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 858d8cb567..86dbd24d1a 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -737,13 +737,22 @@ class DocTestController(SageObject):\n \n         def all_files():\n             self.files.append(opj(SAGE_SRC, 'sage'))\n-            # Don't run these tests when not in the git repository; they are\n-            # of interest for building sage, but not for runtime behavior and\n-            # don't make sense to run outside a build environment\n-            if have_git:\n+            # Only test sage_setup and sage_docbuild if the relevant\n+            # imports work. They may not work if not in a build\n+            # environment or if the documentation build has been\n+            # disabled.\n+            try:\n+                import sage_setup\n                 self.files.append(opj(SAGE_SRC, 'sage_setup'))\n+            except ImportError:\n+                pass\n+            try:\n+                import sage_docbuild\n                 self.files.append(opj(SAGE_SRC, 'sage_docbuild'))\n-            self.files.append(SAGE_DOC_SRC)\n+            except ImportError:\n+                pass\n+            if os.path.isdir(SAGE_DOC_SRC):\n+                self.files.append(SAGE_DOC_SRC)\n \n         if self.options.all or (self.options.new and not have_git):\n             self.log(\"Doctesting entire Sage library.\")\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a\"><code>4c11aab</code></a></td><td><code>sed -i.bak 's/dochtml/sagemath_doc_html/' Makefile src/bin/sage-runtests src/doc/en/developer/doctesting.rst</code></td></tr></table>\n",
    "created_at": "2021-11-11T05:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528642",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">comment:33</div>

Is it possible that `SAGE_DOC_SRC` might be missing? We could do this:

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 858d8cb567..86dbd24d1a 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -737,13 +737,22 @@ class DocTestController(SageObject):
 
         def all_files():
             self.files.append(opj(SAGE_SRC, 'sage'))
-            # Don't run these tests when not in the git repository; they are
-            # of interest for building sage, but not for runtime behavior and
-            # don't make sense to run outside a build environment
-            if have_git:
+            # Only test sage_setup and sage_docbuild if the relevant
+            # imports work. They may not work if not in a build
+            # environment or if the documentation build has been
+            # disabled.
+            try:
+                import sage_setup
                 self.files.append(opj(SAGE_SRC, 'sage_setup'))
+            except ImportError:
+                pass
+            try:
+                import sage_docbuild
                 self.files.append(opj(SAGE_SRC, 'sage_docbuild'))
-            self.files.append(SAGE_DOC_SRC)
+            except ImportError:
+                pass
+            if os.path.isdir(SAGE_DOC_SRC):
+                self.files.append(SAGE_DOC_SRC)
 
         if self.options.all or (self.options.new and not have_git):
             self.log("Doctesting entire Sage library.")
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a"><code>4c11aab</code></a></td><td><code>sed -i.bak 's/dochtml/sagemath_doc_html/' Makefile src/bin/sage-runtests src/doc/en/developer/doctesting.rst</code></td></tr></table>




---

archive/issue_comments_528643.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nCan we autodetect `sagemath_doc_html` as an optional tag to add for testing?",
    "created_at": "2021-11-11T05:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528643",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Can we autodetect `sagemath_doc_html` as an optional tag to add for testing?



---

archive/issue_comments_528644.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nYes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package",
    "created_at": "2021-11-11T05:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528644",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Yes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package



---

archive/issue_comments_528645.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jhpalmieri](#comment%3A33):\n> Is it possible that `SAGE_DOC_SRC` might be missing?\n\nYes, I think so, for example in downstream packaging of sage",
    "created_at": "2021-11-11T05:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528645",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jhpalmieri](#comment%3A33):
> Is it possible that `SAGE_DOC_SRC` might be missing?

Yes, I think so, for example in downstream packaging of sage



---

archive/issue_comments_528646.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@mkoeppe](#comment%3A35):\n> Yes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package\n\nDoes that mean we shouldn't manually add it to `TESTALL_FLAGS` and let it happen automatically?",
    "created_at": "2021-11-11T05:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528646",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@mkoeppe](#comment%3A35):
> Yes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package

Does that mean we shouldn't manually add it to `TESTALL_FLAGS` and let it happen automatically?



---

archive/issue_comments_528647.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYes, that's a good point",
    "created_at": "2021-11-11T05:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528647",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Yes, that's a good point



---

archive/issue_comments_528648.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nNot sure how to implement `TESTALL_NODOC_FLAGS` then \n\n```\nTESTALL_FLAGS = --optional=sage,sagemath_doc_html,optional,external,build\nTESTALL_NODOC_FLAGS = --optional=sage,optional,external,build\n```",
    "created_at": "2021-11-11T05:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528648",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Not sure how to implement `TESTALL_NODOC_FLAGS` then 

```
TESTALL_FLAGS = --optional=sage,sagemath_doc_html,optional,external,build
TESTALL_NODOC_FLAGS = --optional=sage,optional,external,build
```



---

archive/issue_comments_528649.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\n(introduced in #31084)",
    "created_at": "2021-11-11T05:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528649",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

(introduced in #31084)



---

archive/issue_comments_528650.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nDeprecate the `nodoc` targets and tell people to use `./configure --disable-doc` instead?\n\nOr leave it with the two `FLAGS` being identical? Running `make ptest-nodoc` runs `make build` and so shouldn't build `sagemath_doc_html`, so it shouldn't run tests with that flag, while `make ptest` runs `make` and so will build `sagemath_doc_html`.",
    "created_at": "2021-11-11T06:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528650",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

Deprecate the `nodoc` targets and tell people to use `./configure --disable-doc` instead?

Or leave it with the two `FLAGS` being identical? Running `make ptest-nodoc` runs `make build` and so shouldn't build `sagemath_doc_html`, so it shouldn't run tests with that flag, while `make ptest` runs `make` and so will build `sagemath_doc_html`.



---

archive/issue_comments_528651.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThanks for the analysis, I like the 2nd option",
    "created_at": "2021-11-11T06:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528651",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Thanks for the analysis, I like the 2nd option



---

archive/issue_comments_528652.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295\"><code>afa2f80</code></a></td><td><code>Makefile: Get rid of TESTALL_NODOC_FLAGS</code></td></tr></table>\n",
    "created_at": "2021-11-11T06:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295"><code>afa2f80</code></a></td><td><code>Makefile: Get rid of TESTALL_NODOC_FLAGS</code></td></tr></table>




---

archive/issue_comments_528653.json:
```json
{
    "body": "Changed commit from **[`4c11aab`](https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a)** to **[`afa2f80`](https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295)**",
    "created_at": "2021-11-11T06:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c11aab`](https://github.com/sagemath/sagetrac-mirror/commit/4c11aab09acfc41e2bbdcbcd38c85efd673ce59a)** to **[`afa2f80`](https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295)**



---

archive/issue_comments_528654.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4\"><code>28cf775</code></a></td><td><code>src/bin/sage-runtests (_get_optional_defaults): No need to include sagemath_doc_html here</code></td></tr></table>\n",
    "created_at": "2021-11-11T06:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4"><code>28cf775</code></a></td><td><code>src/bin/sage-runtests (_get_optional_defaults): No need to include sagemath_doc_html here</code></td></tr></table>




---

archive/issue_comments_528655.json:
```json
{
    "body": "Changed commit from **[`afa2f80`](https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295)** to **[`28cf775`](https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4)**",
    "created_at": "2021-11-11T06:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`afa2f80`](https://github.com/sagemath/sagetrac-mirror/commit/afa2f80e03b7c691a7db915007d43677f468f295)** to **[`28cf775`](https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4)**



---

archive/issue_comments_528656.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nCould you push the change from [comment:33](#comment%3A33) to the ticket please?",
    "created_at": "2021-11-11T06:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528656",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Could you push the change from [comment:33](#comment%3A33) to the ticket please?



---

archive/issue_comments_528657.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)** to **[u/jhpalmieri/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/__configure___disable_doc)**",
    "created_at": "2021-11-11T17:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528657",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)** to **[u/jhpalmieri/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/__configure___disable_doc)**



---

archive/issue_comments_528658.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@jhpalmieri](#comment%3A19):\n> Should we expect doctests to pass with `./configure --disable-doc`? I get\n> \n> ```\n> src/sage/misc/sagedoc.py  # 8 doctests failed [...]\n> ```\n\nNot sure what to do with these ones. What's happening here is that `sage.misc.sagedoc.detex` has a run-time dependency on Sphinx.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77\"><code>10de6fd</code></a></td><td><code>trac 32759: doctest sage_setup and sage_docbuild conditionally</code></td></tr></table>\n",
    "created_at": "2021-11-11T18:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528658",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@jhpalmieri](#comment%3A19):
> Should we expect doctests to pass with `./configure --disable-doc`? I get
> 
> ```
> src/sage/misc/sagedoc.py  # 8 doctests failed [...]
> ```

Not sure what to do with these ones. What's happening here is that `sage.misc.sagedoc.detex` has a run-time dependency on Sphinx.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77"><code>10de6fd</code></a></td><td><code>trac 32759: doctest sage_setup and sage_docbuild conditionally</code></td></tr></table>




---

archive/issue_comments_528659.json:
```json
{
    "body": "Changed commit from **[`28cf775`](https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4)** to **[`10de6fd`](https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77)**",
    "created_at": "2021-11-11T18:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528659",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`28cf775`](https://github.com/sagemath/sagetrac-mirror/commit/28cf7759c47a166f27c978f89d17750d69c196a4)** to **[`10de6fd`](https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77)**



---

archive/issue_comments_528660.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/__configure___disable_doc)** to **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)**",
    "created_at": "2021-11-11T18:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528660",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jhpalmieri/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/__configure___disable_doc)** to **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)**



---

archive/issue_comments_528661.json:
```json
{
    "body": "Changed commit from **[`10de6fd`](https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77)** to **[`4213f8a`](https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592)**",
    "created_at": "2021-11-11T18:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528661",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`10de6fd`](https://github.com/sagemath/sagetrac-mirror/commit/10de6fd5fc65a1d52d0b08e89d0a9bd2dcb06e77)** to **[`4213f8a`](https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592)**



---

archive/issue_comments_528662.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@mkoeppe](#comment%3A35):\n> Yes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package\n\nActually, at the moment this is not true because `sage.doctest.control` only looks at the optional packages.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592\"><code>4213f8a</code></a></td><td><code>sage.misc.sagedoc: Do not fail if sphinx cannot be imported</code></td></tr></table>\n",
    "created_at": "2021-11-11T18:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528662",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@mkoeppe](#comment%3A35):
> Yes, I think it should be autodetected already because `sagemath_doc_html` is just an installed package

Actually, at the moment this is not true because `sage.doctest.control` only looks at the optional packages.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592"><code>4213f8a</code></a></td><td><code>sage.misc.sagedoc: Do not fail if sphinx cannot be imported</code></td></tr></table>




---

archive/issue_comments_528663.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nWhat mechanism adds `sage.geometry.polyhedron` and `sage_spkg` to the list of tags?",
    "created_at": "2021-11-11T19:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528663",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:50" align="right">comment:50</div>

What mechanism adds `sage.geometry.polyhedron` and `sage_spkg` to the list of tags?



---

archive/issue_comments_528664.json:
```json
{
    "body": "Changed commit from **[`4213f8a`](https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592)** to **[`80513e3`](https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135)**",
    "created_at": "2021-11-11T20:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4213f8a`](https://github.com/sagemath/sagetrac-mirror/commit/4213f8abd992732bcba950ddbbe35e2fcaeda592)** to **[`80513e3`](https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135)**



---

archive/issue_comments_528665.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b142e3491447b66394b136cd649eede03c43305d\"><code>b142e34</code></a></td><td><code>sage.features.sphinx: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135\"><code>80513e3</code></a></td><td><code>src/sage/doctest/control.py: Add test for Sphinx feature</code></td></tr></table>\n",
    "created_at": "2021-11-11T20:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528665",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b142e3491447b66394b136cd649eede03c43305d"><code>b142e34</code></a></td><td><code>sage.features.sphinx: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135"><code>80513e3</code></a></td><td><code>src/sage/doctest/control.py: Add test for Sphinx feature</code></td></tr></table>




---

archive/issue_comments_528666.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nIt's happening in the lines of code in the middle of which I have just inserted a test for `sphinx`",
    "created_at": "2021-11-11T20:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528666",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

It's happening in the lines of code in the middle of which I have just inserted a test for `sphinx`



---

archive/issue_comments_528667.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nIn #32174 I am hoping to unify all that",
    "created_at": "2021-11-11T20:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528667",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

In #32174 I am hoping to unify all that



---

archive/issue_comments_528668.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5\"><code>7d26e21</code></a></td><td><code>sage.features.sagemath.sagemath_doc_html: New</code></td></tr></table>\n",
    "created_at": "2021-11-11T20:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528668",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5"><code>7d26e21</code></a></td><td><code>sage.features.sagemath.sagemath_doc_html: New</code></td></tr></table>




---

archive/issue_comments_528669.json:
```json
{
    "body": "Changed commit from **[`80513e3`](https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135)** to **[`7d26e21`](https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5)**",
    "created_at": "2021-11-11T20:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528669",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`80513e3`](https://github.com/sagemath/sagetrac-mirror/commit/80513e3dafaadb8b1c69b965a73f078153ada135)** to **[`7d26e21`](https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5)**



---

archive/issue_comments_528670.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1\"><code>bb1626a</code></a></td><td><code>sage.features.sagemath.sagemath_doc_html: Fixup</code></td></tr></table>\n",
    "created_at": "2021-11-11T20:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528670",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1"><code>bb1626a</code></a></td><td><code>sage.features.sagemath.sagemath_doc_html: Fixup</code></td></tr></table>




---

archive/issue_comments_528671.json:
```json
{
    "body": "Changed commit from **[`7d26e21`](https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5)** to **[`bb1626a`](https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1)**",
    "created_at": "2021-11-11T20:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528671",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d26e21`](https://github.com/sagemath/sagetrac-mirror/commit/7d26e21630769acbeba4ba6b8207a8d6af4c98e5)** to **[`bb1626a`](https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1)**



---

archive/issue_comments_528672.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3\"><code>a24c3bd</code></a></td><td><code>src/sage/misc/sagedoc.py: Mark some doctests # optional - sphinx</code></td></tr></table>\n",
    "created_at": "2021-11-11T21:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528672",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3"><code>a24c3bd</code></a></td><td><code>src/sage/misc/sagedoc.py: Mark some doctests # optional - sphinx</code></td></tr></table>




---

archive/issue_comments_528673.json:
```json
{
    "body": "Changed commit from **[`bb1626a`](https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1)** to **[`a24c3bd`](https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3)**",
    "created_at": "2021-11-11T21:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528673",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bb1626a`](https://github.com/sagemath/sagetrac-mirror/commit/bb1626ae21a4dcdf286ec50595350b677104cff1)** to **[`a24c3bd`](https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3)**



---

archive/issue_comments_528674.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b\"><code>3e9770b</code></a></td><td><code>sage.features.StaticFile: Accept directories too</code></td></tr></table>\n",
    "created_at": "2021-11-11T21:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528674",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b"><code>3e9770b</code></a></td><td><code>sage.features.StaticFile: Accept directories too</code></td></tr></table>




---

archive/issue_comments_528675.json:
```json
{
    "body": "Changed commit from **[`a24c3bd`](https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3)** to **[`3e9770b`](https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b)**",
    "created_at": "2021-11-11T21:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a24c3bd`](https://github.com/sagemath/sagetrac-mirror/commit/a24c3bd8209ade6a2385105aebaad4cc282415f3)** to **[`3e9770b`](https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b)**



---

archive/issue_comments_528676.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**",
    "created_at": "2021-11-11T21:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528676",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**



---

archive/issue_comments_528677.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nBy the way, this fails:\n\n```\nmake distclean\n./configure --disable-doc\nmake\nmake doc-html\n```\nI think the error boils down to\n\n```\n[reference] intersphinx inventory '/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta5/local/share/doc/pplpy/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta5/local/share/doc/pplpy/objects.inv'\n```\nThe problem is that `pplpy` doesn't build its documentation the first time, and then it doesn't get rebuilt when `make doc-html` is run. I don't know how to fix this.",
    "created_at": "2021-11-11T21:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528677",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:59" align="right">comment:59</div>

By the way, this fails:

```
make distclean
./configure --disable-doc
make
make doc-html
```
I think the error boils down to

```
[reference] intersphinx inventory '/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta5/local/share/doc/pplpy/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta5/local/share/doc/pplpy/objects.inv'
```
The problem is that `pplpy` doesn't build its documentation the first time, and then it doesn't get rebuilt when `make doc-html` is run. I don't know how to fix this.



---

archive/issue_comments_528678.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nWith `make distclean && ./configure && make ptestlong`, I get two doctest failures:\n\n```\nFile \"src/sage/all.py\", line 31, in sage.all\nFailed example:\n    [inspect.getmodule(f).__name__ for f in frames if is_not_allowed(f)]\nExpected:\n    []\nGot:\n    ['pytz', 'importlib.resources']\n```\nand\n\n```\nFile \"src/sage/misc/sagedoc.py\", line 31, in sage.misc.sagedoc\nFailed example:\n    \"sphinx\" in sys.modules\nExpected:\n    False\nGot:\n    True\n```",
    "created_at": "2021-11-11T22:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528678",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:60" align="right">comment:60</div>

With `make distclean && ./configure && make ptestlong`, I get two doctest failures:

```
File "src/sage/all.py", line 31, in sage.all
Failed example:
    [inspect.getmodule(f).__name__ for f in frames if is_not_allowed(f)]
Expected:
    []
Got:
    ['pytz', 'importlib.resources']
```
and

```
File "src/sage/misc/sagedoc.py", line 31, in sage.misc.sagedoc
Failed example:
    "sphinx" in sys.modules
Expected:
    False
Got:
    True
```



---

archive/issue_comments_528679.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@jhpalmieri](#comment%3A59):\n> The problem is that `pplpy` doesn't build its documentation the first time, and then it doesn't get rebuilt when `make doc-html` is run. I don't know how to fix this.\n\nWe can introduce a separate package `pplpy_doc`, something that would actually also make sense for the upstream Python package.",
    "created_at": "2021-11-11T23:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528679",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@jhpalmieri](#comment%3A59):
> The problem is that `pplpy` doesn't build its documentation the first time, and then it doesn't get rebuilt when `make doc-html` is run. I don't know how to fix this.

We can introduce a separate package `pplpy_doc`, something that would actually also make sense for the upstream Python package.



---

archive/issue_comments_528680.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4a729091eb2f99d934ec9b319b840a888c283e1\"><code>e4a7290</code></a></td><td><code>build/pkgs/pplpy_doc: Split pplpy docbuild out as a separate package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd\"><code>ee4e50a</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add pplpy_doc</code></td></tr></table>\n",
    "created_at": "2021-11-11T23:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528680",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4a729091eb2f99d934ec9b319b840a888c283e1"><code>e4a7290</code></a></td><td><code>build/pkgs/pplpy_doc: Split pplpy docbuild out as a separate package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd"><code>ee4e50a</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add pplpy_doc</code></td></tr></table>




---

archive/issue_comments_528681.json:
```json
{
    "body": "Changed commit from **[`3e9770b`](https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b)** to **[`ee4e50a`](https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd)**",
    "created_at": "2021-11-11T23:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528681",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e9770b`](https://github.com/sagemath/sagetrac-mirror/commit/3e9770b0dce5d3f42e45f263cdb0be5cc15bcb3b)** to **[`ee4e50a`](https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd)**



---

archive/issue_comments_528682.json:
```json
{
    "body": "Changed dependencies from **#31356** to **#31356, #32745**",
    "created_at": "2021-11-12T00:11:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528682",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31356** to **#31356, #32745**



---

archive/issue_comments_528683.json:
```json
{
    "body": "Changed commit from **[`ee4e50a`](https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd)** to **[`810f26f`](https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107)**",
    "created_at": "2021-11-12T00:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ee4e50a`](https://github.com/sagemath/sagetrac-mirror/commit/ee4e50abd062e7259d47dea982d1cc306825c5cd)** to **[`810f26f`](https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107)**



---

archive/issue_comments_528684.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f681abb442a578c5fa5686a337fc5adf5ae2485d\"><code>f681abb</code></a></td><td><code>build/bin/sage-spkg: Also source sage-src-env-config so that SAGE_VENV is available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7438449576052a809cfa460d7d21ee9338fcaef0\"><code>7438449</code></a></td><td><code>src/bin/sage-env: Do not skip the script if SAGE_ENV_SOURCED was set but SAGE_VENV has changed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b07c8e3a33d235e1fd2879e2e6808a1ced1bcd4a\"><code>b07c8e3</code></a></td><td><code>build/bin/sage-spkg: Remove workaround of setting of PATH in the generated package scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4af9a2432fd37e72248167802f890ef344d224fd\"><code>4af9a24</code></a></td><td><code>Merge #32745</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107\"><code>810f26f</code></a></td><td><code>src/sage/misc/sagedoc.py: Test that sphinx is not imported in a fresh Sage copy</code></td></tr></table>\n",
    "created_at": "2021-11-12T00:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f681abb442a578c5fa5686a337fc5adf5ae2485d"><code>f681abb</code></a></td><td><code>build/bin/sage-spkg: Also source sage-src-env-config so that SAGE_VENV is available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7438449576052a809cfa460d7d21ee9338fcaef0"><code>7438449</code></a></td><td><code>src/bin/sage-env: Do not skip the script if SAGE_ENV_SOURCED was set but SAGE_VENV has changed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b07c8e3a33d235e1fd2879e2e6808a1ced1bcd4a"><code>b07c8e3</code></a></td><td><code>build/bin/sage-spkg: Remove workaround of setting of PATH in the generated package scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4af9a2432fd37e72248167802f890ef344d224fd"><code>4af9a24</code></a></td><td><code>Merge #32745</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107"><code>810f26f</code></a></td><td><code>src/sage/misc/sagedoc.py: Test that sphinx is not imported in a fresh Sage copy</code></td></tr></table>




---

archive/issue_comments_528685.json:
```json
{
    "body": "Changed commit from **[`810f26f`](https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107)** to **[`d280c9c`](https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33)**",
    "created_at": "2021-11-12T00:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528685",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`810f26f`](https://github.com/sagemath/sagetrac-mirror/commit/810f26fd57168ba4174466037b75df8aa17b3107)** to **[`d280c9c`](https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33)**



---

archive/issue_comments_528686.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f75d33f3dae372048920a95bbf4e2dddb467a8a4\"><code>f75d33f</code></a></td><td><code>Trac #32836: don't let libSingular clobber the user's PATH.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33\"><code>d280c9c</code></a></td><td><code>Merge #32836</code></td></tr></table>\n",
    "created_at": "2021-11-12T00:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528686",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f75d33f3dae372048920a95bbf4e2dddb467a8a4"><code>f75d33f</code></a></td><td><code>Trac #32836: don't let libSingular clobber the user's PATH.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33"><code>d280c9c</code></a></td><td><code>Merge #32836</code></td></tr></table>




---

archive/issue_comments_528687.json:
```json
{
    "body": "Changed dependencies from **#31356, #32745** to **#31356, #32745, #32836**",
    "created_at": "2021-11-12T00:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528687",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31356, #32745** to **#31356, #32745, #32836**



---

archive/issue_comments_528688.json:
```json
{
    "body": "Changed commit from **[`d280c9c`](https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33)** to **[`7960b90`](https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3)**",
    "created_at": "2021-11-12T00:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528688",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d280c9c`](https://github.com/sagemath/sagetrac-mirror/commit/d280c9c52b2816d23bb77703929cdefa115c0a33)** to **[`7960b90`](https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3)**



---

archive/issue_comments_528689.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3\"><code>7960b90</code></a></td><td><code>src/sage/all.py: Update doctest</code></td></tr></table>\n",
    "created_at": "2021-11-12T00:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528689",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3"><code>7960b90</code></a></td><td><code>src/sage/all.py: Update doctest</code></td></tr></table>




---

archive/issue_comments_528690.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@jhpalmieri](#comment%3A60):\n> With `make distclean && ./configure && make ptestlong`, I get two doctest failures:\n> \n> ```\n> File \"src/sage/all.py\", line 31, in sage.all\n> Failed example:\n>     [inspect.getmodule(f).__name__ for f in frames if is_not_allowed(f)]\n> Expected:\n>     []\n> Got:\n>     ['pytz', 'importlib.resources']\n> ```\n\nI've updated this doctest for the stuff that is pulled in by the doctest framework via Sphinx.\n\n> and\n> \n> ```\n> File \"src/sage/misc/sagedoc.py\", line 31, in sage.misc.sagedoc\n> Failed example:\n>     \"sphinx\" in sys.modules\n> Expected:\n>     False\n> Got:\n>     True\n> ```\n\nFixed by starting a fresh interpreter for this test. Had to pull in 2 tickets that fixed issues with recursive invocation of sage",
    "created_at": "2021-11-12T00:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528690",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@jhpalmieri](#comment%3A60):
> With `make distclean && ./configure && make ptestlong`, I get two doctest failures:
> 
> ```
> File "src/sage/all.py", line 31, in sage.all
> Failed example:
>     [inspect.getmodule(f).__name__ for f in frames if is_not_allowed(f)]
> Expected:
>     []
> Got:
>     ['pytz', 'importlib.resources']
> ```

I've updated this doctest for the stuff that is pulled in by the doctest framework via Sphinx.

> and
> 
> ```
> File "src/sage/misc/sagedoc.py", line 31, in sage.misc.sagedoc
> Failed example:
>     "sphinx" in sys.modules
> Expected:
>     False
> Got:
>     True
> ```

Fixed by starting a fresh interpreter for this test. Had to pull in 2 tickets that fixed issues with recursive invocation of sage



---

archive/issue_comments_528691.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e\"><code>687e5ba</code></a></td><td><code>src/sage/features/sagemath.py: Add doctests</code></td></tr></table>\n",
    "created_at": "2021-11-12T03:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e"><code>687e5ba</code></a></td><td><code>src/sage/features/sagemath.py: Add doctests</code></td></tr></table>




---

archive/issue_comments_528692.json:
```json
{
    "body": "Changed commit from **[`7960b90`](https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3)** to **[`687e5ba`](https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e)**",
    "created_at": "2021-11-12T03:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7960b90`](https://github.com/sagemath/sagetrac-mirror/commit/7960b9077bb482160095160ed9fa788181547ac3)** to **[`687e5ba`](https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e)**



---

archive/issue_comments_528693.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nWith `--disable-doc`, `make doc-html` goes through but ends with\n\n```\ntouch: /var/lib/sage/installed/sagemath_doc_html-none: No such file or directory\nmake[2]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 1\n```",
    "created_at": "2021-11-12T03:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528693",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

With `--disable-doc`, `make doc-html` goes through but ends with

```
touch: /var/lib/sage/installed/sagemath_doc_html-none: No such file or directory
make[2]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 1
```



---

archive/issue_events_447891.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-12T04:49:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447891"
}
```



---

archive/issue_events_447892.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-12T04:49:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447892"
}
```



---

archive/issue_comments_528694.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nFor reasons I don't understand, my computer is now refusing to build the plots in the documentation \u2014\u00a0it keeps hanging in `references/plotting`. After fighting with this for a while, I've given in and am resuming testing using `export SAGE_DOCBUILD_OPTS=' --no-plot'`.\n\n(Not related to this ticket: this happens with the `develop` branch, too.)",
    "created_at": "2021-11-12T18:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528694",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:72" align="right">comment:72</div>

For reasons I don't understand, my computer is now refusing to build the plots in the documentation — it keeps hanging in `references/plotting`. After fighting with this for a while, I've given in and am resuming testing using `export SAGE_DOCBUILD_OPTS=' --no-plot'`.

(Not related to this ticket: this happens with the `develop` branch, too.)



---

archive/issue_comments_528695.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0\"><code>40a9760</code></a></td><td><code>build/make/Makefile.in: Raise an error if installation into disabled installation tree is attempted</code></td></tr></table>\n",
    "created_at": "2021-11-12T18:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0"><code>40a9760</code></a></td><td><code>build/make/Makefile.in: Raise an error if installation into disabled installation tree is attempted</code></td></tr></table>




---

archive/issue_comments_528696.json:
```json
{
    "body": "Changed commit from **[`687e5ba`](https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e)** to **[`40a9760`](https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0)**",
    "created_at": "2021-11-12T18:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`687e5ba`](https://github.com/sagemath/sagetrac-mirror/commit/687e5ba730d96e97d9b6fa435c66d83f8d42f14e)** to **[`40a9760`](https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0)**



---

archive/issue_comments_528697.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@mkoeppe](#comment%3A70):\n> With `--disable-doc`, `make doc-html` goes through but ends with\n> \n> ```\n> touch: /var/lib/sage/installed/sagemath_doc_html-none: No such file or directory\n> make[2]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 1\n> ```\n\nFixed now by explicitly raising a clear error.\n\nDo we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?",
    "created_at": "2021-11-12T18:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528697",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@mkoeppe](#comment%3A70):
> With `--disable-doc`, `make doc-html` goes through but ends with
> 
> ```
> touch: /var/lib/sage/installed/sagemath_doc_html-none: No such file or directory
> make[2]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 1
> ```

Fixed now by explicitly raising a clear error.

Do we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?



---

archive/issue_comments_528698.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@mkoeppe](#comment%3A74):\n> Do we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?\n\nGood question, I don't know. Should the following work? Does it work?\n\n```\nmake distclean\n./configure --disable-doc\nmake\n./configure --enable-doc # without make distclean or similar\nmake doc-html\n```",
    "created_at": "2021-11-12T19:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528698",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@mkoeppe](#comment%3A74):
> Do we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?

Good question, I don't know. Should the following work? Does it work?

```
make distclean
./configure --disable-doc
make
./configure --enable-doc # without make distclean or similar
make doc-html
```



---

archive/issue_comments_528699.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@jhpalmieri](#comment%3A75):\n> Replying to [@mkoeppe](#comment%3A74):\n> > Do we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?\n> \n> \n> Good question, I don't know.\n\nI think I would be happy if it didn't work but if there were a clear error message.\n\n```\n% make doc\n...\nError: Sage build configured with --disable-doc, so building the documentation will not work. To fix this, ...\n```",
    "created_at": "2021-11-12T19:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528699",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@jhpalmieri](#comment%3A75):
> Replying to [@mkoeppe](#comment%3A74):
> > Do we want `make doc`, `make doc-html` to work when `--disable-doc` has been configured?
> 
> 
> Good question, I don't know.

I think I would be happy if it didn't work but if there were a clear error message.

```
% make doc
...
Error: Sage build configured with --disable-doc, so building the documentation will not work. To fix this, ...
```



---

archive/issue_comments_528700.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@jhpalmieri](#comment%3A75):\n> Should the following work? Does it work?\n> \n> ```\n> make distclean\n> ./configure --disable-doc\n> make\n> ./configure --enable-doc # without make distclean or similar\n> make doc-html\n> ```\n\nYes, I think this works",
    "created_at": "2021-11-12T19:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528700",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@jhpalmieri](#comment%3A75):
> Should the following work? Does it work?
> 
> ```
> make distclean
> ./configure --disable-doc
> make
> ./configure --enable-doc # without make distclean or similar
> make doc-html
> ```

Yes, I think this works



---

archive/issue_comments_528701.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b\"><code>51f3002</code></a></td><td><code>build/make/Makefile.in: Better error message when docbuild is attempted but configure --disable-doc has been used</code></td></tr></table>\n",
    "created_at": "2021-11-12T20:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528701",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b"><code>51f3002</code></a></td><td><code>build/make/Makefile.in: Better error message when docbuild is attempted but configure --disable-doc has been used</code></td></tr></table>




---

archive/issue_comments_528702.json:
```json
{
    "body": "Changed commit from **[`40a9760`](https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0)** to **[`51f3002`](https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b)**",
    "created_at": "2021-11-12T20:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528702",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`40a9760`](https://github.com/sagemath/sagetrac-mirror/commit/40a97601f4649f853252236268f7affb10d537b0)** to **[`51f3002`](https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b)**



---

archive/issue_events_447893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-12T20:12:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447893"
}
```



---

archive/issue_events_447894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-12T20:12:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447894"
}
```



---

archive/issue_comments_528703.json:
```json
{
    "body": "Changed commit from **[`51f3002`](https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b)** to **[`b9da161`](https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558)**",
    "created_at": "2021-11-12T23:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51f3002`](https://github.com/sagemath/sagetrac-mirror/commit/51f300290d9f648dfc4a4b64c710901c7c564a7b)** to **[`b9da161`](https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558)**



---

archive/issue_comments_528704.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558\"><code>b9da161</code></a></td><td><code>Merge tag '9.5.beta6' into t/32759/__configure___disable_doc</code></td></tr></table>\n",
    "created_at": "2021-11-12T23:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528704",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558"><code>b9da161</code></a></td><td><code>Merge tag '9.5.beta6' into t/32759/__configure___disable_doc</code></td></tr></table>




---

archive/issue_comments_528705.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nWith `./configure --disable-docs && make`, I'm getting\n\n```\n[pplpy-0.8.6] Finished installing pplpy-0.8.6\nmake --no-print-directory pplpy_doc-SAGE_DOCS-no-deps\nError: The installation tree SAGE_DOCS has been disabled\nThis Sage build is configured with configure --disable-doc, so building the documentation will not work.\nmake[4]: *** [pplpy_doc-SAGE_DOCS-no-deps] Error 1\nmake[3]: *** [/var/lib/sage/installed/pplpy_doc-0.8.6] Error 2\nmake[3]: *** Waiting for unfinished jobs....\n```\nThis even happens after I made this change:\n\n```diff\ndiff --git a/configure.ac b/configure.ac\nindex cec63aa918..fab7171839 100644\n--- a/configure.ac\n+++ b/configure.ac\n@@ -475,7 +475,7 @@ AC_ARG_ENABLE([doc],\n   AS_HELP_STRING([--disable-doc],\n                  [disable build of the Sage documentation and packages depending on it]), [\n     dnl Disable packages needed for docbuilding\n-    for pkg in sage_docbuild alabaster babel snowballstemmer idna urllib3 certifi charset_normalizer requests imagesize sphinx sphinxcontrib_devhelp sphinxcontrib_jsmath sphinxcontrib_serializinghtml sphinxcontrib_applehelp sphinxcontrib_htmlhelp sphinxcontrib_qthelp sphinxcontrib_websupport; do\n+    for pkg in sage_docbuild alabaster babel snowballstemmer idna urllib3 certifi charset_normalizer requests imagesize sphinx sphinxcontrib_devhelp sphinxcontrib_jsmath sphinxcontrib_serializinghtml sphinxcontrib_applehelp sphinxcontrib_htmlhelp sphinxcontrib_qthelp sphinxcontrib_websupport pplpy_doc; do\n       AS_VAR_SET([SAGE_ENABLE_$pkg], [$enableval])\n     done\n     dnl Disable the docbuild by disabling the install tree for documentation\n```",
    "created_at": "2021-11-13T00:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528705",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:81" align="right">comment:81</div>

With `./configure --disable-docs && make`, I'm getting

```
[pplpy-0.8.6] Finished installing pplpy-0.8.6
make --no-print-directory pplpy_doc-SAGE_DOCS-no-deps
Error: The installation tree SAGE_DOCS has been disabled
This Sage build is configured with configure --disable-doc, so building the documentation will not work.
make[4]: *** [pplpy_doc-SAGE_DOCS-no-deps] Error 1
make[3]: *** [/var/lib/sage/installed/pplpy_doc-0.8.6] Error 2
make[3]: *** Waiting for unfinished jobs....
```
This even happens after I made this change:

```diff
diff --git a/configure.ac b/configure.ac
index cec63aa918..fab7171839 100644
--- a/configure.ac
+++ b/configure.ac
@@ -475,7 +475,7 @@ AC_ARG_ENABLE([doc],
   AS_HELP_STRING([--disable-doc],
                  [disable build of the Sage documentation and packages depending on it]), [
     dnl Disable packages needed for docbuilding
-    for pkg in sage_docbuild alabaster babel snowballstemmer idna urllib3 certifi charset_normalizer requests imagesize sphinx sphinxcontrib_devhelp sphinxcontrib_jsmath sphinxcontrib_serializinghtml sphinxcontrib_applehelp sphinxcontrib_htmlhelp sphinxcontrib_qthelp sphinxcontrib_websupport; do
+    for pkg in sage_docbuild alabaster babel snowballstemmer idna urllib3 certifi charset_normalizer requests imagesize sphinx sphinxcontrib_devhelp sphinxcontrib_jsmath sphinxcontrib_serializinghtml sphinxcontrib_applehelp sphinxcontrib_htmlhelp sphinxcontrib_qthelp sphinxcontrib_websupport pplpy_doc; do
       AS_VAR_SET([SAGE_ENABLE_$pkg], [$enableval])
     done
     dnl Disable the docbuild by disabling the install tree for documentation
```



---

archive/issue_comments_528706.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nIt seems to be okay now. Maybe I need to run `./bootstrap` or something similar (although the old `config.log` said that it wasn't building `pplpy_doc`.)",
    "created_at": "2021-11-13T00:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528706",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:82" align="right">comment:82</div>

It seems to be okay now. Maybe I need to run `./bootstrap` or something similar (although the old `config.log` said that it wasn't building `pplpy_doc`.)



---

archive/issue_comments_528707.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nYes, it sounds like `bootstrap` wasn't run.",
    "created_at": "2021-11-13T00:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528707",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:83" align="right">comment:83</div>

Yes, it sounds like `bootstrap` wasn't run.



---

archive/issue_comments_528708.json:
```json
{
    "body": "<div id=\"comment:84\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d626aa8517395d30f9db813246a1204856398bfd\"><code>d626aa8</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82ce5390f94475b3941c69524280fb5a36fa7052\"><code>82ce539</code></a></td><td><code>configure.ac: If --disable-notebook and --disable-sagelib, do not build zeromq etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02505ca6d353e44253f8e461055fe1f2ca6bb995\"><code>02505ca</code></a></td><td><code>pkgs/sage-conf_pypi/MANIFEST.in: Update from #31396</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16\"><code>aeca1a0</code></a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459\"><code>cd3dce9</code></a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b\"><code>c695921</code></a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010\"><code>cebcda3</code></a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5\"><code>0026892</code></a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5cf9f6bbf64dfa27fe434f6b82f4776abcfe3c2\"><code>b5cf9f6</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d\"><code>04df2b7</code></a></td><td><code>build/make/Makefile.in (all-start): Use all-sage-docs, not doc</code></td></tr></table>\n",
    "created_at": "2021-11-13T01:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:84"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d626aa8517395d30f9db813246a1204856398bfd"><code>d626aa8</code></a></td><td><code>build/pkgs/pplpy/dependencies: Depend on sphinx only if SAGE_SPKG_INSTALL_DOCS!=no</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82ce5390f94475b3941c69524280fb5a36fa7052"><code>82ce539</code></a></td><td><code>configure.ac: If --disable-notebook and --disable-sagelib, do not build zeromq etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02505ca6d353e44253f8e461055fe1f2ca6bb995"><code>02505ca</code></a></td><td><code>pkgs/sage-conf_pypi/MANIFEST.in: Update from #31396</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16"><code>aeca1a0</code></a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459"><code>cd3dce9</code></a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b"><code>c695921</code></a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010"><code>cebcda3</code></a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5"><code>0026892</code></a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5cf9f6bbf64dfa27fe434f6b82f4776abcfe3c2"><code>b5cf9f6</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d"><code>04df2b7</code></a></td><td><code>build/make/Makefile.in (all-start): Use all-sage-docs, not doc</code></td></tr></table>




---

archive/issue_comments_528709.json:
```json
{
    "body": "Changed commit from **[`b9da161`](https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558)** to **[`04df2b7`](https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d)**",
    "created_at": "2021-11-13T01:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b9da161`](https://github.com/sagemath/sagetrac-mirror/commit/b9da16194f49cefa76b81041f001588350c68558)** to **[`04df2b7`](https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d)**



---

archive/issue_comments_528710.json:
```json
{
    "body": "Changed dependencies from **#31356, #32745, #32836** to **#31356, #32745, #32836, #29039**",
    "created_at": "2021-11-13T01:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528710",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31356, #32745, #32836** to **#31356, #32745, #32836, #29039**



---

archive/issue_comments_528711.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nMerged #29039 to resolve a merge conflict",
    "created_at": "2021-11-13T01:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528711",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">comment:85</div>

Merged #29039 to resolve a merge conflict



---

archive/issue_comments_528712.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nPossibly the last commit also fixed [comment:81](#comment%3A81)",
    "created_at": "2021-11-13T01:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528712",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:86" align="right">comment:86</div>

Possibly the last commit also fixed [comment:81](#comment%3A81)



---

archive/issue_comments_528713.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nEverything builds for me, but my computer continues to misbehave, so I am not getting meaningful output on doctests. This is with OS X Monterey, and I have merged #32852. Many doctests involving plotting are timing out, so I get lots of doctest failures, and I don't know why. I tried a few sample plots interactively and they work.",
    "created_at": "2021-11-13T16:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528713",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:87" align="right">comment:87</div>

Everything builds for me, but my computer continues to misbehave, so I am not getting meaningful output on doctests. This is with OS X Monterey, and I have merged #32852. Many doctests involving plotting are timing out, so I get lots of doctest failures, and I don't know why. I tried a few sample plots interactively and they work.



---

archive/issue_comments_528714.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nRunning some tests with `EXTRA_CONFIGURE_ARGS=\"--disable-doc\" tox -e docker-ubuntu-focal-standard`.\n\nBuild went through but I am getting these failures on `make ptestlong`:\n\n```\nsage -t --long --random-seed=28205743117922504880455715083835945768 src/doc/en/tutorial/conf.py\n    ModuleNotFoundError in doctesting framework\n**********************************************************************\nTraceback (most recent call last):\n  File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2465, in __call__\n    doctests, extras = self._run(runner, options, results)\n  File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2513, in _run\n    doctests, extras = self.source.create_doctests(sage_namespace)\n  File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/sources.py\", line 733, in create_doctests\n    load(filename, namespace) # errors raised here will be caught in DocTestTask\n  File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/repl/load.py\", line 252, in load\n    exec(code, globals)\n  File \"./conf.py\", line 12, in <module>\n  File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/docs/conf.py\", line 3, in <module>\n    import sphinx\nModuleNotFoundError: No module named 'sphinx'\n\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 1457, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    Sandpile.help()\n[formatting details]\n```",
    "created_at": "2021-11-13T19:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528714",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Running some tests with `EXTRA_CONFIGURE_ARGS="--disable-doc" tox -e docker-ubuntu-focal-standard`.

Build went through but I am getting these failures on `make ptestlong`:

```
sage -t --long --random-seed=28205743117922504880455715083835945768 src/doc/en/tutorial/conf.py
    ModuleNotFoundError in doctesting framework
**********************************************************************
Traceback (most recent call last):
  File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 2465, in __call__
    doctests, extras = self._run(runner, options, results)
  File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 2513, in _run
    doctests, extras = self.source.create_doctests(sage_namespace)
  File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/sources.py", line 733, in create_doctests
    load(filename, namespace) # errors raised here will be caught in DocTestTask
  File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/repl/load.py", line 252, in load
    exec(code, globals)
  File "./conf.py", line 12, in <module>
  File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/docs/conf.py", line 3, in <module>
    import sphinx
ModuleNotFoundError: No module named 'sphinx'

File "src/doc/en/thematic_tutorials/sandpile.rst", line 1457, in doc.en.thematic_tutorials.sandpile
Failed example:
    Sandpile.help()
[formatting details]
```



---

archive/issue_comments_528715.json:
```json
{
    "body": "Changed commit from **[`04df2b7`](https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d)** to **[`7e980b1`](https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1)**",
    "created_at": "2021-11-13T20:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04df2b7`](https://github.com/sagemath/sagetrac-mirror/commit/04df2b704edb7a6e2a3988d815e654f781cba87d)** to **[`7e980b1`](https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1)**



---

archive/issue_comments_528716.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1\"><code>7e980b1</code></a></td><td><code>src/doc: Mark conf.py files # nodoctest</code></td></tr></table>\n",
    "created_at": "2021-11-13T20:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528716",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1"><code>7e980b1</code></a></td><td><code>src/doc: Mark conf.py files # nodoctest</code></td></tr></table>




---

archive/issue_comments_528717.json:
```json
{
    "body": "<div id=\"comment:90\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d\"><code>4fd9a83</code></a></td><td><code>src/doc/en/thematic_tutorials/sandpile.rst: Do not include the full output of Sandpile.help() in the doctest</code></td></tr></table>\n",
    "created_at": "2021-11-13T20:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:90"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d"><code>4fd9a83</code></a></td><td><code>src/doc/en/thematic_tutorials/sandpile.rst: Do not include the full output of Sandpile.help() in the doctest</code></td></tr></table>




---

archive/issue_comments_528718.json:
```json
{
    "body": "Changed commit from **[`7e980b1`](https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1)** to **[`4fd9a83`](https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d)**",
    "created_at": "2021-11-13T20:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528718",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e980b1`](https://github.com/sagemath/sagetrac-mirror/commit/7e980b114700189c70a1e5c1dbb1f76d5e8b10b1)** to **[`4fd9a83`](https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d)**



---

archive/issue_comments_528719.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nA few more failures\n\n```\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/databases/findstat.py  # 94 doctests failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/doctest/test.py  # 7 doctests failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/doctest/sources.py  # 1 doctest failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/bindable_class.py  # 2 doctests failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sagedoc.py  # 1 doctest failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sphinxify.py  # 7 doctests failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sageinspect.py  # 1 doctest failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/repl/ipython_tests.py  # 2 doctests failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/sandpiles/sandpile.py  # 1 doctest failed\nsage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/tests/lazy_imports.py  # 1 doctest failed\n```",
    "created_at": "2021-11-13T22:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528719",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:91" align="right">comment:91</div>

A few more failures

```
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/databases/findstat.py  # 94 doctests failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/doctest/test.py  # 7 doctests failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/doctest/sources.py  # 1 doctest failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/bindable_class.py  # 2 doctests failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sagedoc.py  # 1 doctest failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sphinxify.py  # 7 doctests failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/misc/sageinspect.py  # 1 doctest failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/repl/ipython_tests.py  # 2 doctests failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/sandpiles/sandpile.py  # 1 doctest failed
sage -t --long --random-seed=184472493071993940636041244744568712523 src/sage/tests/lazy_imports.py  # 1 doctest failed
```



---

archive/issue_comments_528720.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nThe `findstat` failures are:\n\n```\n      File \"/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/databases/findstat.py\", line 240, in <module>\n        import requests\n    ModuleNotFoundError: No module named 'requests'\n```",
    "created_at": "2021-11-13T22:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528720",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">comment:92</div>

The `findstat` failures are:

```
      File "/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/databases/findstat.py", line 240, in <module>
        import requests
    ModuleNotFoundError: No module named 'requests'
```



---

archive/issue_comments_528721.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0e161217f9af609e1fbdf0e21c890a22154aff2\"><code>b0e1612</code></a></td><td><code>src/setup.cfg.m4, src/requirements.txt.m4, build/pkgs/sagelib/dependencies: Add requests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e\"><code>f6ba517</code></a></td><td><code>configure.ac (--disable-doc): Do not disable requests and its dependencies, needed for sage.databases.findstat</code></td></tr></table>\n",
    "created_at": "2021-11-13T23:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528721",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0e161217f9af609e1fbdf0e21c890a22154aff2"><code>b0e1612</code></a></td><td><code>src/setup.cfg.m4, src/requirements.txt.m4, build/pkgs/sagelib/dependencies: Add requests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e"><code>f6ba517</code></a></td><td><code>configure.ac (--disable-doc): Do not disable requests and its dependencies, needed for sage.databases.findstat</code></td></tr></table>




---

archive/issue_comments_528722.json:
```json
{
    "body": "Changed commit from **[`4fd9a83`](https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d)** to **[`f6ba517`](https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e)**",
    "created_at": "2021-11-13T23:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528722",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fd9a83`](https://github.com/sagemath/sagetrac-mirror/commit/4fd9a832cc9f6ba15374bb1212a57337db53238d)** to **[`f6ba517`](https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e)**



---

archive/issue_comments_528723.json:
```json
{
    "body": "<div id=\"comment:94\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465\"><code>be64b25</code></a></td><td><code>src/sage/sandpiles/sandpile.py: Make doctest pass even if sphinx formatting is not available</code></td></tr></table>\n",
    "created_at": "2021-11-13T23:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528723",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465"><code>be64b25</code></a></td><td><code>src/sage/sandpiles/sandpile.py: Make doctest pass even if sphinx formatting is not available</code></td></tr></table>




---

archive/issue_comments_528724.json:
```json
{
    "body": "Changed commit from **[`f6ba517`](https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e)** to **[`be64b25`](https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465)**",
    "created_at": "2021-11-13T23:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528724",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6ba517`](https://github.com/sagemath/sagetrac-mirror/commit/f6ba517420e776451fd8a273a03c115c29cdc83e)** to **[`be64b25`](https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465)**



---

archive/issue_comments_528725.json:
```json
{
    "body": "<div id=\"comment:95\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4cb681d2acdbb2be95ee00ea82a97990c88cffd\"><code>e4cb681</code></a></td><td><code>src/sage/misc/sagedoc.py: Fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c\"><code>be532a2</code></a></td><td><code>src/sage/misc/sphinxify.py: Use module-level # sage.doctest: optional - sphinx</code></td></tr></table>\n",
    "created_at": "2021-11-13T23:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:95"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4cb681d2acdbb2be95ee00ea82a97990c88cffd"><code>e4cb681</code></a></td><td><code>src/sage/misc/sagedoc.py: Fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c"><code>be532a2</code></a></td><td><code>src/sage/misc/sphinxify.py: Use module-level # sage.doctest: optional - sphinx</code></td></tr></table>




---

archive/issue_comments_528726.json:
```json
{
    "body": "Changed commit from **[`be64b25`](https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465)** to **[`be532a2`](https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c)**",
    "created_at": "2021-11-13T23:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be64b25`](https://github.com/sagemath/sagetrac-mirror/commit/be64b2551bc387870859565de7fef9bf9bb0b465)** to **[`be532a2`](https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c)**



---

archive/issue_comments_528727.json:
```json
{
    "body": "Changed commit from **[`be532a2`](https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c)** to **[`6f8f8e0`](https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff)**",
    "created_at": "2021-11-13T23:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be532a2`](https://github.com/sagemath/sagetrac-mirror/commit/be532a2ea74892a93e0a713531c84680da31ca9c)** to **[`6f8f8e0`](https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff)**



---

archive/issue_comments_528728.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86db7579d0b57a2981473b310163b5e38672e681\"><code>86db757</code></a></td><td><code>src/sage/misc/bindable_class.py: In doctests, strip output of sage_getdoc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0df932da537bb3424ae994dd05c9a1ea53256f0f\"><code>0df932d</code></a></td><td><code>src/sage/misc/sageinspect.py: Make doctest pass even if sphinx formatting is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff\"><code>6f8f8e0</code></a></td><td><code>src/sage/repl/ipython_tests.py: Make doctest pass even if sphinx formatting is not available</code></td></tr></table>\n",
    "created_at": "2021-11-13T23:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528728",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86db7579d0b57a2981473b310163b5e38672e681"><code>86db757</code></a></td><td><code>src/sage/misc/bindable_class.py: In doctests, strip output of sage_getdoc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0df932da537bb3424ae994dd05c9a1ea53256f0f"><code>0df932d</code></a></td><td><code>src/sage/misc/sageinspect.py: Make doctest pass even if sphinx formatting is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff"><code>6f8f8e0</code></a></td><td><code>src/sage/repl/ipython_tests.py: Make doctest pass even if sphinx formatting is not available</code></td></tr></table>




---

archive/issue_comments_528729.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nOn an Ubuntu virtual machine, I'm getting doctest failures (with `./configure --disable-doc`) because the `alabaster` package is not installed:\n\n```\nFile \"src/sage/misc/package.py\", line 388, in sage.misc.package.installed_packages\nFailed example:\n    sorted(installed_packages().keys())  # optional - build\nExpected:\n    [...'alabaster', ...'sage_conf', ...]\nGot:\n    ['appnope',\n     'arb',\n     'argcomplete',\n     'argon2_cffi',\n     'attrs',\n     'backcall',\n     'bleach',\n     'cddlib',\n     'certifi',\n     'cffi',\n     'charset_normalizer',\n     'combinatorial_designs',\n     'conway_polynomials',\n     'cvxopt',\n     'cycler',\n     'cypari',\n     'cysignals',\n     'cython',\n     'dateutil',\n     'debugpy',\n     'decorator',\n     'defusedxml',\n     'docutils',\n     'ecl',\n     'eclib',\n     'elliptic_curves',\n     'entrypoints',\n     'flint',\n     'flit_core',\n     'fplll',\n     'fpylll',\n     'gap',\n     'gengetopt',\n     'giac',\n     'gmpy2',\n     'graphs',\n     'html5lib',\n     'idna',\n     'importlib_metadata',\n     'importlib_resources',\n     'ipykernel',\n     'ipython',\n     'ipython_genutils',\n     'ipywidgets',\n     'jedi',\n     'jinja2',\n     'jmol',\n     'jsonschema',\n     'jupyter_client',\n     'jupyter_core',\n     'jupyter_jsmol',\n     'jupyterlab_pygments',\n     'kiwisolver',\n     'lcalc',\n     'linbox',\n     'markupsafe',\n     'mathjax',\n     'matplotlib',\n     'matplotlib_inline',\n     'maxima',\n     'memory_allocator',\n     'mistune',\n     'mpmath',\n     'nbclient',\n     'nbconvert',\n     'nbformat',\n     'nest_asyncio',\n     'networkx',\n     'notebook',\n     'numpy',\n     'packaging',\n     'pandocfilters',\n     'pari',\n     'pari_galdata',\n     'pari_seadata_small',\n     'parso',\n     'pexpect',\n     'pickleshare',\n     'pillow',\n     'pip',\n     'pkgconfig',\n     'pluggy',\n     'polytopes_db',\n     'pplpy',\n     'prometheus_client',\n     'prompt_toolkit',\n     'ptyprocess',\n     'py',\n     'pybind11',\n     'pycparser',\n     'pycygwin',\n     'pygments',\n     'pyparsing',\n     'pyrsistent',\n     'pytz',\n     'pyzmq',\n     'ratpoints',\n     'requests',\n     'rpy2',\n     'sage_conf',\n     'sage_setup',\n     'sagelib',\n     'sagenb_export',\n     'sagetex',\n     'scipy',\n     'send2trash',\n     'setuptools',\n     'setuptools_scm',\n     'setuptools_wheel',\n     'simplegeneric',\n     'singular',\n     'six',\n     'sympy',\n     'terminado',\n     'testpath',\n     'thebe',\n     'threejs',\n     'tomli',\n     'tornado',\n     'traitlets',\n     'typing_extensions',\n     'tzlocal',\n     'urllib3',\n     'vcversioner',\n     'wcwidth',\n     'webencodings',\n     'wheel',\n     'widgetsnbextension',\n     'zipp']\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 390, in sage.misc.package.installed_packages\nFailed example:\n    installed_packages()['alabaster']  # optional - build, random\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/Sage/sage-9.5.beta5/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/john/Sage/sage-9.5.beta5/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.installed_packages[1]>\", line 1, in <module>\n        installed_packages()['alabaster']  # optional - build, random\n    KeyError: 'alabaster'\n*********************************************************************\n```",
    "created_at": "2021-11-14T03:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528729",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:97" align="right">comment:97</div>

On an Ubuntu virtual machine, I'm getting doctest failures (with `./configure --disable-doc`) because the `alabaster` package is not installed:

```
File "src/sage/misc/package.py", line 388, in sage.misc.package.installed_packages
Failed example:
    sorted(installed_packages().keys())  # optional - build
Expected:
    [...'alabaster', ...'sage_conf', ...]
Got:
    ['appnope',
     'arb',
     'argcomplete',
     'argon2_cffi',
     'attrs',
     'backcall',
     'bleach',
     'cddlib',
     'certifi',
     'cffi',
     'charset_normalizer',
     'combinatorial_designs',
     'conway_polynomials',
     'cvxopt',
     'cycler',
     'cypari',
     'cysignals',
     'cython',
     'dateutil',
     'debugpy',
     'decorator',
     'defusedxml',
     'docutils',
     'ecl',
     'eclib',
     'elliptic_curves',
     'entrypoints',
     'flint',
     'flit_core',
     'fplll',
     'fpylll',
     'gap',
     'gengetopt',
     'giac',
     'gmpy2',
     'graphs',
     'html5lib',
     'idna',
     'importlib_metadata',
     'importlib_resources',
     'ipykernel',
     'ipython',
     'ipython_genutils',
     'ipywidgets',
     'jedi',
     'jinja2',
     'jmol',
     'jsonschema',
     'jupyter_client',
     'jupyter_core',
     'jupyter_jsmol',
     'jupyterlab_pygments',
     'kiwisolver',
     'lcalc',
     'linbox',
     'markupsafe',
     'mathjax',
     'matplotlib',
     'matplotlib_inline',
     'maxima',
     'memory_allocator',
     'mistune',
     'mpmath',
     'nbclient',
     'nbconvert',
     'nbformat',
     'nest_asyncio',
     'networkx',
     'notebook',
     'numpy',
     'packaging',
     'pandocfilters',
     'pari',
     'pari_galdata',
     'pari_seadata_small',
     'parso',
     'pexpect',
     'pickleshare',
     'pillow',
     'pip',
     'pkgconfig',
     'pluggy',
     'polytopes_db',
     'pplpy',
     'prometheus_client',
     'prompt_toolkit',
     'ptyprocess',
     'py',
     'pybind11',
     'pycparser',
     'pycygwin',
     'pygments',
     'pyparsing',
     'pyrsistent',
     'pytz',
     'pyzmq',
     'ratpoints',
     'requests',
     'rpy2',
     'sage_conf',
     'sage_setup',
     'sagelib',
     'sagenb_export',
     'sagetex',
     'scipy',
     'send2trash',
     'setuptools',
     'setuptools_scm',
     'setuptools_wheel',
     'simplegeneric',
     'singular',
     'six',
     'sympy',
     'terminado',
     'testpath',
     'thebe',
     'threejs',
     'tomli',
     'tornado',
     'traitlets',
     'typing_extensions',
     'tzlocal',
     'urllib3',
     'vcversioner',
     'wcwidth',
     'webencodings',
     'wheel',
     'widgetsnbextension',
     'zipp']
**********************************************************************
File "src/sage/misc/package.py", line 390, in sage.misc.package.installed_packages
Failed example:
    installed_packages()['alabaster']  # optional - build, random
Exception raised:
    Traceback (most recent call last):
      File "/home/john/Sage/sage-9.5.beta5/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/john/Sage/sage-9.5.beta5/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.installed_packages[1]>", line 1, in <module>
        installed_packages()['alabaster']  # optional - build, random
    KeyError: 'alabaster'
*********************************************************************
```



---

archive/issue_comments_528730.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nAlso, and maybe this is just how it will have to be, if I use `./configure --disable-doc` and then `make` and then `make doc`, it installs `sphinx` and various other packages, prints a good error message when trying to install `pplpy_doc`, but of continues to install whatever it's in the middle of, so the error message gets buried.",
    "created_at": "2021-11-14T03:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528730",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:98" align="right">comment:98</div>

Also, and maybe this is just how it will have to be, if I use `./configure --disable-doc` and then `make` and then `make doc`, it installs `sphinx` and various other packages, prints a good error message when trying to install `pplpy_doc`, but of continues to install whatever it's in the middle of, so the error message gets buried.



---

archive/issue_comments_528731.json:
```json
{
    "body": "<div id=\"comment:99\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c\"><code>1807446</code></a></td><td><code>src/sage/misc/package.py: Use gmpy2 instead of alabaster as example in doctest</code></td></tr></table>\n",
    "created_at": "2021-11-14T03:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528731",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:99"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c"><code>1807446</code></a></td><td><code>src/sage/misc/package.py: Use gmpy2 instead of alabaster as example in doctest</code></td></tr></table>




---

archive/issue_comments_528732.json:
```json
{
    "body": "Changed commit from **[`6f8f8e0`](https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff)** to **[`1807446`](https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c)**",
    "created_at": "2021-11-14T03:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f8f8e0`](https://github.com/sagemath/sagetrac-mirror/commit/6f8f8e05093d599ec50fcfacae067acbfe13ecff)** to **[`1807446`](https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c)**



---

archive/issue_comments_528733.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@jhpalmieri](#comment%3A98):\n> Also, and maybe this is just how it will have to be, if I use `./configure --disable-doc` and then `make` and then `make doc`, it installs `sphinx` and various other packages, prints a good error message when trying to install `pplpy_doc`, but of continues to install whatever it's in the middle of, so the error message gets buried.\n\nI think it would be too complicated to check for disable-doc earlier",
    "created_at": "2021-11-14T03:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528733",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@jhpalmieri](#comment%3A98):
> Also, and maybe this is just how it will have to be, if I use `./configure --disable-doc` and then `make` and then `make doc`, it installs `sphinx` and various other packages, prints a good error message when trying to install `pplpy_doc`, but of continues to install whatever it's in the middle of, so the error message gets buried.

I think it would be too complicated to check for disable-doc earlier



---

archive/issue_comments_528734.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@jhpalmieri](#comment%3A97):\n> On an Ubuntu virtual machine, I'm getting doctest failures (with `./configure --disable-doc`) because the `alabaster` package is not installed\n\nThis was also the last failure on my test with macOS, fixed in 1807446 above.",
    "created_at": "2021-11-14T18:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528734",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@jhpalmieri](#comment%3A97):
> On an Ubuntu virtual machine, I'm getting doctest failures (with `./configure --disable-doc`) because the `alabaster` package is not installed

This was also the last failure on my test with macOS, fixed in 1807446 above.



---

archive/issue_comments_528735.json:
```json
{
    "body": "Changed commit from **[`1807446`](https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c)** to **[`f4aaa81`](https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6)**",
    "created_at": "2021-11-14T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528735",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1807446`](https://github.com/sagemath/sagetrac-mirror/commit/180744645a429facd31a3400de228af174760f4c)** to **[`f4aaa81`](https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6)**



---

archive/issue_comments_528736.json:
```json
{
    "body": "<div id=\"comment:102\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6\"><code>f4aaa81</code></a></td><td><code>README.md, build/make/install: Update - documentation no longer has special log file location</code></td></tr></table>\n",
    "created_at": "2021-11-14T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528736",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:102"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6"><code>f4aaa81</code></a></td><td><code>README.md, build/make/install: Update - documentation no longer has special log file location</code></td></tr></table>




---

archive/issue_comments_528737.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\n`make doc` now builds both html and pdf, whereas before it just built html. How many people will this surprise?",
    "created_at": "2021-11-15T03:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528737",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:103" align="right">comment:103</div>

`make doc` now builds both html and pdf, whereas before it just built html. How many people will this surprise?



---

archive/issue_comments_528738.json:
```json
{
    "body": "Changed commit from **[`f4aaa81`](https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6)** to **[`651c986`](https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181)**",
    "created_at": "2021-11-15T03:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528738",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f4aaa81`](https://github.com/sagemath/sagetrac-mirror/commit/f4aaa81007d7a9882d495784ce2635c5c989eed6)** to **[`651c986`](https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181)**



---

archive/issue_comments_528739.json:
```json
{
    "body": "<div id=\"comment:104\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181\"><code>651c986</code></a></td><td><code>build/make/Makefile.in (doc): Revert to just doc-html (not both doc-html and doc-pdf)</code></td></tr></table>\n",
    "created_at": "2021-11-15T03:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528739",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:104"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181"><code>651c986</code></a></td><td><code>build/make/Makefile.in (doc): Revert to just doc-html (not both doc-html and doc-pdf)</code></td></tr></table>




---

archive/issue_comments_528740.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nThanks for catching this; an unnecessary change",
    "created_at": "2021-11-15T03:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528740",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:105" align="right">comment:105</div>

Thanks for catching this; an unnecessary change



---

archive/issue_comments_528741.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n This switch will disable the docbuild and installation of its many dependencies (sphinx...)\n \n-In contrast to other packages, `ppl`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`.\n-We conditionalize the dependency of `ppl` on this and also on `sphinx` being in the list of installed packages.\n+In contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.\n \n Split out from #31396.\n \n``````\n",
    "created_at": "2021-11-15T04:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528741",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 This switch will disable the docbuild and installation of its many dependencies (sphinx...)
 
-In contrast to other packages, `ppl`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`.
-We conditionalize the dependency of `ppl` on this and also on `sphinx` being in the list of installed packages.
+In contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.
 
 Split out from #31396.
 
``````




---

archive/issue_comments_528742.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nThis part obviously works, but let me see if I understand the syntax:\n\n```\n$(1)-$(4)-no-deps:\n\t+@if [ -z '$$($(4))' ]; then \\\n\t    echo \"Error: The installation tree $(4) has been disabled\" 2>&1; \\\n\t    echo \"$$($(4)_DISABLED_MESSAGE)\" 2>&1; \\\n\t    exit 1; \\\n```\nIs the following right? In the case of this ticket, `$(4)` is `SAGE_DOCS`, and then `$$($(4))` evaluates the Makefile variable `SAGE_DOCS`, which will be empty if docs have been disabled.",
    "created_at": "2021-11-16T04:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528742",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:107" align="right">comment:107</div>

This part obviously works, but let me see if I understand the syntax:

```
$(1)-$(4)-no-deps:
	+@if [ -z '$$($(4))' ]; then \
	    echo "Error: The installation tree $(4) has been disabled" 2>&1; \
	    echo "$$($(4)_DISABLED_MESSAGE)" 2>&1; \
	    exit 1; \
```
Is the following right? In the case of this ticket, `$(4)` is `SAGE_DOCS`, and then `$$($(4))` evaluates the Makefile variable `SAGE_DOCS`, which will be empty if docs have been disabled.



---

archive/issue_comments_528743.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nThat's right.",
    "created_at": "2021-11-16T04:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528743",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:108" align="right">comment:108</div>

That's right.



---

archive/issue_comments_528744.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nOkay, let's merge it.",
    "created_at": "2021-11-16T05:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528744",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:109" align="right">comment:109</div>

Okay, let's merge it.



---

archive/issue_comments_528745.json:
```json
{
    "body": "Reviewer: **John Palmieri, Matthias Koeppe**",
    "created_at": "2021-11-16T05:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528745",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri, Matthias Koeppe**



---

archive/issue_events_447895.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-11-16T05:15:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447895"
}
```



---

archive/issue_events_447896.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-11-16T05:15:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447896"
}
```



---

archive/issue_comments_528746.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nThank you!",
    "created_at": "2021-11-16T05:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528746",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:110" align="right">comment:110</div>

Thank you!



---

archive/issue_comments_528747.json:
```json
{
    "body": "Changed commit from **[`651c986`](https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181)** to **[`edaa3e6`](https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c)**",
    "created_at": "2021-12-12T17:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528747",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`651c986`](https://github.com/sagemath/sagetrac-mirror/commit/651c986a80923ac973c69b1ab7c2b6dada468181)** to **[`edaa3e6`](https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c)**



---

archive/issue_comments_528748.json:
```json
{
    "body": "<div id=\"comment:111\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c\"><code>edaa3e6</code></a></td><td><code>Merge tag '9.5.beta8' into t/32759/__configure___disable_doc</code></td></tr></table>\n",
    "created_at": "2021-12-12T17:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528748",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:111"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c"><code>edaa3e6</code></a></td><td><code>Merge tag '9.5.beta8' into t/32759/__configure___disable_doc</code></td></tr></table>




---

archive/issue_events_447897.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-12-12T17:56:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447897"
}
```



---

archive/issue_events_447898.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-12-12T17:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447898"
}
```



---

archive/issue_events_447899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-12T17:57:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447899"
}
```



---

archive/issue_events_447900.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-12T17:57:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447900"
}
```



---

archive/issue_comments_528749.json:
```json
{
    "body": "Changed dependencies from **#31356, #32745, #32836, #29039** to **#29039**",
    "created_at": "2021-12-12T17:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528749",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31356, #32745, #32836, #29039** to **#29039**



---

archive/issue_comments_528750.json:
```json
{
    "body": "Changed commit from **[`edaa3e6`](https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c)** to **[`2dd7cf5`](https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa)**",
    "created_at": "2021-12-23T21:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`edaa3e6`](https://github.com/sagemath/sagetrac-mirror/commit/edaa3e621a85485d7a5536aa2e476d4ec9b3635c)** to **[`2dd7cf5`](https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa)**



---

archive/issue_events_447901.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-12-23T21:22:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447901"
}
```



---

archive/issue_events_447902.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-12-23T21:22:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447902"
}
```



---

archive/issue_comments_528751.json:
```json
{
    "body": "<div id=\"comment:113\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087\"><code>2a4a323</code></a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7fa5aa6eaa9af232a0fffb53cd023c30bfc17f2\"><code>a7fa5aa</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa\"><code>2dd7cf5</code></a></td><td><code>Merge tag '9.5.beta9' into t/32759/__configure___disable_doc</code></td></tr></table>\n",
    "created_at": "2021-12-23T21:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:113"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087"><code>2a4a323</code></a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7fa5aa6eaa9af232a0fffb53cd023c30bfc17f2"><code>a7fa5aa</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa"><code>2dd7cf5</code></a></td><td><code>Merge tag '9.5.beta9' into t/32759/__configure___disable_doc</code></td></tr></table>




---

archive/issue_comments_528752.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nMerged latest beta to resolve merge conflicts.",
    "created_at": "2021-12-23T21:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528752",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:114" align="right">comment:114</div>

Merged latest beta to resolve merge conflicts.



---

archive/issue_events_447903.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-12-23T23:15:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447903"
}
```



---

archive/issue_events_447904.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-12-23T23:15:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447904"
}
```



---

archive/issue_comments_528753.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nThanks!",
    "created_at": "2021-12-24T00:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528753",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:116" align="right">comment:116</div>

Thanks!



---

archive/issue_comments_528754.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nThere seems to be a merge gone wrong in `src/sage/doctest/control.py`.",
    "created_at": "2021-12-26T23:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528754",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:117" align="right">comment:117</div>

There seems to be a merge gone wrong in `src/sage/doctest/control.py`.



---

archive/issue_events_447905.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-26T23:43:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447905"
}
```



---

archive/issue_events_447906.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-26T23:43:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447906"
}
```



---

archive/issue_comments_528755.json:
```json
{
    "body": "Changed commit from **[`2dd7cf5`](https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa)** to **[`2e0b91d`](https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc)**",
    "created_at": "2021-12-26T23:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2dd7cf5`](https://github.com/sagemath/sagetrac-mirror/commit/2dd7cf5bb2166cd25cb87ff48e46c722ecb841fa)** to **[`2e0b91d`](https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc)**



---

archive/issue_comments_528756.json:
```json
{
    "body": "<div id=\"comment:119\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc\"><code>2e0b91d</code></a></td><td><code>src/sage/doctest/control.py: Fix up merge</code></td></tr></table>\n",
    "created_at": "2021-12-26T23:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528756",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:119"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc"><code>2e0b91d</code></a></td><td><code>src/sage/doctest/control.py: Fix up merge</code></td></tr></table>




---

archive/issue_events_447907.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-26T23:53:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447907"
}
```



---

archive/issue_events_447908.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-26T23:53:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447908"
}
```



---

archive/issue_events_447909.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-29T19:33:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447909"
}
```



---

archive/issue_events_447910.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-29T19:33:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447910"
}
```



---

archive/issue_comments_528757.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-This switch will disable the docbuild and installation of its many dependencies (sphinx...)\n+This switch will disable the docbuild and avoid installing its many dependencies (sphinx...).\n \n In contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.\n \n Split out from #31396.\n \n-We also add another package to those that are disabled upon `--disable-notebook`.\n+We also add `argon2_cffi` and `nbclient` to the packages disabled upon `--disable-notebook`.\n \n``````\n",
    "created_at": "2021-12-30T01:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528757",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-This switch will disable the docbuild and installation of its many dependencies (sphinx...)
+This switch will disable the docbuild and avoid installing its many dependencies (sphinx...).
 
 In contrast to other packages, `pplpy`'s docbuild is enabled unless explicitly disabled by setting `SAGE_SPKG_INSTALL_DOCS=no`. We move it to a separate package `pplpy_doc` and make it a dependency of `sagemath_doc_html`.
 
 Split out from #31396.
 
-We also add another package to those that are disabled upon `--disable-notebook`.
+We also add `argon2_cffi` and `nbclient` to the packages disabled upon `--disable-notebook`.
 
``````




---

archive/issue_events_447911.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-31T10:30:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447911"
}
```



---

archive/issue_events_447912.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-31T10:30:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447912"
}
```



---

archive/issue_comments_528758.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nthis fixes pdf building in the latest beta, hence blocker",
    "created_at": "2021-12-31T10:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528758",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:123" align="right">comment:123</div>

this fixes pdf building in the latest beta, hence blocker



---

archive/issue_events_447913.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-01T20:15:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447913"
}
```



---

archive/issue_events_447914.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-01T20:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447914"
}
```



---

archive/issue_comments_528759.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nStill broken for me\n\n```\n$ make doc-clean\n$ make doc-pdf\n[...]\n[sagemath_doc_pdf-none] LaTeX2e <2020-10-01> patch level 4\n[sagemath_doc_pdf-none] L3 programming layer <2021-05-07>\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/hypcap.sty))))\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/titlesec/titlesec.sty [91\n[sagemath_doc_pdf-none] (./sphinxlatexnumfig.sty (./sphinxmanual.cls])\n[sagemath_doc_pdf-none] (./sphinxmessages.sty\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/babel.sty) (./sphinxlatexlists.sty)\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/amsfonts/umsb.fd)\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/babel.def\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/jknapltx/ursfs.fd))) (./sphinxpackagefootnote.sty\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] (./sphinxlatexstyletext.sty\n[sagemath_doc_pdf-none] Document Class: sphinxmanual 2019/12/01 v2.3.0 Document class (Sphinx manual)\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/report.cls))\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/jknapltx/mathrsfs.sty) (./sphinxlatexobjects.sty\n[sagemath_doc_pdf-none] Document Class: report 2020/04/10 v1.4m Standard LaTeX document class\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/size10.clo\n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/txtbabel.def) [1 (./sphinxlatexindbibtoc.sty){/usr/share/texli\n[sagemath_doc_pdf-none] ve/texmf-var/fonts/map/pdftex/updmap/pdftex.map)))\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] LaTeX Warning: File `{../../../../../local/share/doc/sage/doctrees/en/reference\n[sagemath_doc_pdf-none] /plot_directive/sage/combinat/crystals/mv_polytopes-1}.pdf' not found on input \n[sagemath_doc_pdf-none] line 47273.\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] LaTeX Warning: File `{../../../../../local/share/doc/sage/doctrees/en/reference\n[sagemath_doc_pdf-none] /plot_directive/sage/combinat/crystals/mv_polytopes-1}.pdf' not found on input \n[sagemath_doc_pdf-none] line 47273.\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] ! Package pdftex.def Error: File `../../../../../local/share/doc/sage/doctrees/\n[sagemath_doc_pdf-none] en/reference/plot_directive/sage/combinat/crystals/mv_polytopes-1.pdf' not foun\n[sagemath_doc_pdf-none] d: using draft setting.\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] See the pdftex.def package documentation for explanation.\n[sagemath_doc_pdf-none] Type  H <return>  for immediate help.\n[sagemath_doc_pdf-none]  ...                                              \n[sagemath_doc_pdf-none]                                                   \n[sagemath_doc_pdf-none] l.47273 .../combinat/crystals/mv_polytopes-1}.pdf}\n[sagemath_doc_pdf-none]                                                   \n[sagemath_doc_pdf-none] ? Latexmk: Index file 'constructions.idx' was written\n[sagemath_doc_pdf-none] \n[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/makeidx.sty))))\n[sagemath_doc_pdf-none] ! Emergency stop.\n```\nAlso this runs in `/home/release/Sage/local/share/doc/sage/latex/en/reference/combinat` and `../../../../../local/share/doc/sage/doctrees/en/reference/plot_directive/sage/combinat/crystals/mv_polytopes-1` is missing `../../..`, how can that ever work?",
    "created_at": "2022-01-01T20:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528759",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:124" align="right">comment:124</div>

Still broken for me

```
$ make doc-clean
$ make doc-pdf
[...]
[sagemath_doc_pdf-none] LaTeX2e <2020-10-01> patch level 4
[sagemath_doc_pdf-none] L3 programming layer <2021-05-07>
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/hypcap.sty))))
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/titlesec/titlesec.sty [91
[sagemath_doc_pdf-none] (./sphinxlatexnumfig.sty (./sphinxmanual.cls])
[sagemath_doc_pdf-none] (./sphinxmessages.sty
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/babel.sty) (./sphinxlatexlists.sty)
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/amsfonts/umsb.fd)
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/babel.def
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/jknapltx/ursfs.fd))) (./sphinxpackagefootnote.sty
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] (./sphinxlatexstyletext.sty
[sagemath_doc_pdf-none] Document Class: sphinxmanual 2019/12/01 v2.3.0 Document class (Sphinx manual)
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/report.cls))
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/jknapltx/mathrsfs.sty) (./sphinxlatexobjects.sty
[sagemath_doc_pdf-none] Document Class: report 2020/04/10 v1.4m Standard LaTeX document class
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/size10.clo
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/generic/babel/txtbabel.def) [1 (./sphinxlatexindbibtoc.sty){/usr/share/texli
[sagemath_doc_pdf-none] ve/texmf-var/fonts/map/pdftex/updmap/pdftex.map)))
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] LaTeX Warning: File `{../../../../../local/share/doc/sage/doctrees/en/reference
[sagemath_doc_pdf-none] /plot_directive/sage/combinat/crystals/mv_polytopes-1}.pdf' not found on input 
[sagemath_doc_pdf-none] line 47273.
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] LaTeX Warning: File `{../../../../../local/share/doc/sage/doctrees/en/reference
[sagemath_doc_pdf-none] /plot_directive/sage/combinat/crystals/mv_polytopes-1}.pdf' not found on input 
[sagemath_doc_pdf-none] line 47273.
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] ! Package pdftex.def Error: File `../../../../../local/share/doc/sage/doctrees/
[sagemath_doc_pdf-none] en/reference/plot_directive/sage/combinat/crystals/mv_polytopes-1.pdf' not foun
[sagemath_doc_pdf-none] d: using draft setting.
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] See the pdftex.def package documentation for explanation.
[sagemath_doc_pdf-none] Type  H <return>  for immediate help.
[sagemath_doc_pdf-none]  ...                                              
[sagemath_doc_pdf-none]                                                   
[sagemath_doc_pdf-none] l.47273 .../combinat/crystals/mv_polytopes-1}.pdf}
[sagemath_doc_pdf-none]                                                   
[sagemath_doc_pdf-none] ? Latexmk: Index file 'constructions.idx' was written
[sagemath_doc_pdf-none] 
[sagemath_doc_pdf-none] (/usr/share/texlive/texmf-dist/tex/latex/base/makeidx.sty))))
[sagemath_doc_pdf-none] ! Emergency stop.
```
Also this runs in `/home/release/Sage/local/share/doc/sage/latex/en/reference/combinat` and `../../../../../local/share/doc/sage/doctrees/en/reference/plot_directive/sage/combinat/crystals/mv_polytopes-1` is missing `../../..`, how can that ever work?



---

archive/issue_comments_528760.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nHow is this `needs_work` for this ticket if it's already broken in 9.5.beta9?",
    "created_at": "2022-01-01T20:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528760",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:125" align="right">comment:125</div>

How is this `needs_work` for this ticket if it's already broken in 9.5.beta9?



---

archive/issue_events_447915.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T20:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447915"
}
```



---

archive/issue_events_447916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T20:46:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447916"
}
```



---

archive/issue_comments_528761.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nNote that since #29310, you need to use `make doc-uninstall` to get rid of the stuff in `local/share/doc/sage`.",
    "created_at": "2022-01-01T21:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528761",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:127" align="right">comment:127</div>

Note that since #29310, you need to use `make doc-uninstall` to get rid of the stuff in `local/share/doc/sage`.



---

archive/issue_comments_528762.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nSo `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.\n\nThis ticket was supposed to fix #33076 but apparently didn't (or, possibly, the ...-clean targets are totally broken). Are incremental builds still supported?",
    "created_at": "2022-01-01T23:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528762",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:128" align="right">comment:128</div>

So `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.

This ticket was supposed to fix #33076 but apparently didn't (or, possibly, the ...-clean targets are totally broken). Are incremental builds still supported?



---

archive/issue_comments_528763.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@vbraun](#comment%3A128):\n> This ticket was supposed to fix #33076 but apparently didn't \n\nI don't think anyone has been able to reproduce the failure that you reported in #33076.",
    "created_at": "2022-01-01T23:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528763",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@vbraun](#comment%3A128):
> This ticket was supposed to fix #33076 but apparently didn't 

I don't think anyone has been able to reproduce the failure that you reported in #33076.



---

archive/issue_comments_528764.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nReplying to [@vbraun](#comment%3A128):\n> So `make doc-clean` doesn't clean any more? \n\nWasn't me, but I think it was intended as a step in the direction of fixing the \"clean\" vs. \"uninstall\" confusion in the Sage build system. More in #21775 and #29097.",
    "created_at": "2022-01-01T23:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528764",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:130" align="right">comment:130</div>

Replying to [@vbraun](#comment%3A128):
> So `make doc-clean` doesn't clean any more? 

Wasn't me, but I think it was intended as a step in the direction of fixing the "clean" vs. "uninstall" confusion in the Sage build system. More in #21775 and #29097.



---

archive/issue_comments_528765.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nReplying to [@vbraun](#comment%3A128):\n> So `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.\n\nThat's a good point: see #33104.",
    "created_at": "2022-01-01T23:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528765",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:131" align="right">comment:131</div>

Replying to [@vbraun](#comment%3A128):
> So `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.

That's a good point: see #33104.



---

archive/issue_comments_528766.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nReplying to [@vbraun](#comment%3A128):\n> So `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.\n\nAfter #29310, `make doc-clean` removes the autogenerated stuff in `src/doc/en/reference`, and `make doc-uninstall` removes the built documentation.",
    "created_at": "2022-01-01T23:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528766",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:132" align="right">comment:132</div>

Replying to [@vbraun](#comment%3A128):
> So `make doc-clean` doesn't clean any more? We tell people (in the console output, among other places, to run that if they are having trouble with incremental doc builds.

After #29310, `make doc-clean` removes the autogenerated stuff in `src/doc/en/reference`, and `make doc-uninstall` removes the built documentation.



---

archive/issue_comments_528767.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nSee also [#29097 comment:9](https://github.com/sagemath/sage/issues/29097#comment:9).",
    "created_at": "2022-01-01T23:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528767",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:133" align="right">comment:133</div>

See also [#29097 comment:9](https://github.com/sagemath/sage/issues/29097#comment:9).



---

archive/issue_comments_528768.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nOf course a bit of weirdness there is that the inventories / pickles are both input and output for the docbuild.",
    "created_at": "2022-01-01T23:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528768",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:134" align="right">comment:134</div>

Of course a bit of weirdness there is that the inventories / pickles are both input and output for the docbuild.



---

archive/issue_comments_528769.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nI did a full rebuild after `git clean -f -d -x` and pdf docs still don't build, same failure.",
    "created_at": "2022-01-02T00:52:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528769",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:135" align="right">comment:135</div>

I did a full rebuild after `git clean -f -d -x` and pdf docs still don't build, same failure.



---

archive/issue_comments_528770.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nReplying to [@vbraun](#comment%3A135):\n> I did a full rebuild after `git clean -f -d -x` and pdf docs still don't build, same failure.\n\nWhat OS etc are you running this on? Any manually tweaked TeX stuff?",
    "created_at": "2022-01-02T09:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528770",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:136" align="right">comment:136</div>

Replying to [@vbraun](#comment%3A135):
> I did a full rebuild after `git clean -f -d -x` and pdf docs still don't build, same failure.

What OS etc are you running this on? Any manually tweaked TeX stuff?



---

archive/issue_comments_528771.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nI'm running Fedora 35, standard OS-wide latex installation. Also the path is wrong inside the TeX file, so the issue is already there before TeX runs.",
    "created_at": "2022-01-02T11:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528771",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:137" align="right">comment:137</div>

I'm running Fedora 35, standard OS-wide latex installation. Also the path is wrong inside the TeX file, so the issue is already there before TeX runs.



---

archive/issue_events_447917.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-02T17:20:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447917"
}
```



---

archive/issue_events_447918.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-02T17:20:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447918"
}
```



---

archive/issue_comments_528772.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nTests fail",
    "created_at": "2022-01-02T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528772",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:138" align="right">comment:138</div>

Tests fail



---

archive/issue_events_447919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-02T22:10:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447919"
}
```



---

archive/issue_events_447920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-02T22:10:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447920"
}
```



---

archive/issue_comments_528773.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nWhich ones.",
    "created_at": "2022-01-02T22:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528773",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:139" align="right">comment:139</div>

Which ones.



---

archive/issue_comments_528774.json:
```json
{
    "body": "<div id=\"comment:140\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976\"><code>43221d0</code></a></td><td><code>src/sage/features/sagemath.py: Fix doctest output</code></td></tr></table>\n",
    "created_at": "2022-01-02T22:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528774",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:140"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976"><code>43221d0</code></a></td><td><code>src/sage/features/sagemath.py: Fix doctest output</code></td></tr></table>




---

archive/issue_events_447921.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-02T22:59:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447921"
}
```



---

archive/issue_events_447922.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-02T22:59:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447922"
}
```



---

archive/issue_comments_528775.json:
```json
{
    "body": "Changed commit from **[`2e0b91d`](https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc)** to **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**",
    "created_at": "2022-01-02T22:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528775",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2e0b91d`](https://github.com/sagemath/sagetrac-mirror/commit/2e0b91d13779f3797d8a93cd0e8f805ef3717ebc)** to **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**



---

archive/issue_events_447923.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-02T23:01:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447923"
}
```



---

archive/issue_events_447924.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-02T23:01:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447924"
}
```



---

archive/issue_events_447925.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-09T10:47:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447925"
}
```



---

archive/issue_events_447926.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "22001aa722fefc04f2a377718383fc8cba67debd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-09T10:47:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32759#event-447926"
}
```



---

archive/issue_comments_528776.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)** to **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**",
    "created_at": "2022-01-09T10:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32759#issuecomment-528776",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/__configure___disable_doc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___disable_doc)** to **[`43221d0`](https://github.com/sagemath/sagetrac-mirror/commit/43221d0e3dca1c33687d5073e1f1d7a446eed976)**
