# Issue 32340: document behavior of .is_prime() for number fields

archive/issues_032103.json:
```json
{
    "assignees": [],
    "body": "This patch addresses the issue raised in [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15).\n\n(I am creating a new ticket for this because #7596 is about something much more general.)\n\nCC:  @nbruin\n\nKeywords: **number fields, prime elements, documentation**\n\nBranch/Commit: **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Lorenz Panny**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32340_\n\n",
    "closed_at": "2022-06-21T23:22:57Z",
    "created_at": "2021-08-06T05:55:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "document behavior of .is_prime() for number fields",
    "type": "issue",
    "updated_at": "2022-06-21T23:22:57Z",
    "url": "https://github.com/sagemath/sage/issues/32340",
    "user": "https://github.com/yyyyx4"
}
```
This patch addresses the issue raised in [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15).

(I am creating a new ticket for this because #7596 is about something much more general.)

CC:  @nbruin

Keywords: **number fields, prime elements, documentation**

Branch/Commit: **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**

Reviewer: **Travis Scrimshaw**

Author: **Lorenz Panny**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/32340_





---

archive/issue_events_446117.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-06T05:55:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446117"
}
```



---

archive/issue_events_446118.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-06T05:55:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446118"
}
```



---

archive/issue_events_446119.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-06T05:55:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446119"
}
```



---

archive/issue_events_446120.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-06T05:55:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446120"
}
```



---

archive/issue_events_446121.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2021-08-06T05:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446121"
}
```



---

archive/issue_events_446122.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446122"
}
```



---

archive/issue_events_446123.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446123"
}
```



---

archive/issue_events_446124.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446124"
}
```



---

archive/issue_events_446125.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446125"
}
```



---

archive/issue_comments_521158.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521158",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_446126.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446126"
}
```



---

archive/issue_events_446127.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446127"
}
```



---

archive/issue_comments_521159.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-This patch addresses the issue raised in comment 15 of #7596.\n+This patch addresses the issue raised in [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15).\n \n (I am creating a new ticket for this because #7596 is about something much more general.)\n``````\n",
    "created_at": "2022-05-31T14:30:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521159",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-This patch addresses the issue raised in comment 15 of #7596.
+This patch addresses the issue raised in [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15).
 
 (I am creating a new ticket for this because #7596 is about something much more general.)
``````




---

archive/issue_comments_521160.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI am suspicious that this is the correct place to put this documentation since the method just is calling the super one. That suggests it should go in the implementation of the base class.",
    "created_at": "2022-06-16T01:05:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521160",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

I am suspicious that this is the correct place to put this documentation since the method just is calling the super one. That suggests it should go in the implementation of the base class.



---

archive/issue_comments_521161.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI did it like this because [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15) said:\n> In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.\n\nPresumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.",
    "created_at": "2022-06-16T07:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521161",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:7" align="right">comment:7</div>

I did it like this because [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15) said:
> In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.

Presumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.



---

archive/issue_comments_521162.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@yyyyx4](#comment:7):\n> I did it like this because [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15) said:\n> > In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.\n\n> \n> Presumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.\n\nI don\u2019t quite buy that argument. From the interactive documentation with `?`, you see it all the same. I don\u2019t think it makes that much difference in the online doc. It does add an extra (Python) indirection, which means the code it (albeit likely just marginally) slower. The same message would, in principle, apply for anything using the base class as well.",
    "created_at": "2022-06-16T08:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521162",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@yyyyx4](#comment:7):
> I did it like this because [#7596 comment:15](https://github.com/sagemath/sage/issues/7596#comment:15) said:
> > In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.

> 
> Presumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.

I don’t quite buy that argument. From the interactive documentation with `?`, you see it all the same. I don’t think it makes that much difference in the online doc. It does add an extra (Python) indirection, which means the code it (albeit likely just marginally) slower. The same message would, in principle, apply for anything using the base class as well.



---

archive/issue_comments_521163.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3\"><code>5c0a348</code></a></td><td><code>document that number fields implement is_prime() incompatibly</code></td></tr></table>\n",
    "created_at": "2022-06-16T11:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521163",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3"><code>5c0a348</code></a></td><td><code>document that number fields implement is_prime() incompatibly</code></td></tr></table>




---

archive/issue_comments_521164.json:
```json
{
    "body": "Changed commit from **[`5e4aeef`](https://github.com/sagemath/sagetrac-mirror/commit/5e4aeef7dfe1893c6edadeccf890de8caec95032)** to **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**",
    "created_at": "2022-06-16T11:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521164",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e4aeef`](https://github.com/sagemath/sagetrac-mirror/commit/5e4aeef7dfe1893c6edadeccf890de8caec95032)** to **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**



---

archive/issue_comments_521165.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAlright, how about this?",
    "created_at": "2022-06-16T11:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521165",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:10" align="right">comment:10</div>

Alright, how about this?



---

archive/issue_events_446128.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-06-16T23:31:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446128"
}
```



---

archive/issue_events_446129.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-06-16T23:31:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446129"
}
```



---

archive/issue_comments_521166.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-06-16T23:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521166",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_521167.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThank you. I think that is a much more natural place to put it (which reflects the fact that it uses the `ideal()` method).\n\nPerhaps interesting, we get oddities like this:\n\n```\nsage: z = QQ['z'].0\nsage: K = NumberField(z - 1,'s'); K\nNumber Field in s with defining polynomial z - 1\nsage: K(7).is_prime()\nTrue\n```\nI guess that is what structure you want to put on it: a number field or a usual field. Perhaps this is one way out of #7596, to have `QQ.number_field()` return the object above.",
    "created_at": "2022-06-16T23:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521167",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Thank you. I think that is a much more natural place to put it (which reflects the fact that it uses the `ideal()` method).

Perhaps interesting, we get oddities like this:

```
sage: z = QQ['z'].0
sage: K = NumberField(z - 1,'s'); K
Number Field in s with defining polynomial z - 1
sage: K(7).is_prime()
True
```
I guess that is what structure you want to put on it: a number field or a usual field. Perhaps this is one way out of #7596, to have `QQ.number_field()` return the object above.



---

archive/issue_comments_521168.json:
```json
{
    "body": "Changed branch from **[public/document_is_prime_behavior_in_number_fields](https://github.com/sagemath/sagetrac-mirror/tree/public/document_is_prime_behavior_in_number_fields)** to **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**",
    "created_at": "2022-06-21T23:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32340#issuecomment-521168",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/document_is_prime_behavior_in_number_fields](https://github.com/sagemath/sagetrac-mirror/tree/public/document_is_prime_behavior_in_number_fields)** to **[`5c0a348`](https://github.com/sagemath/sagetrac-mirror/commit/5c0a3486c017bfa81c7afdbc8afa155270e428d3)**



---

archive/issue_events_446130.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-21T23:22:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446130"
}
```



---

archive/issue_events_446131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7ab174a70dd67056c993485eb7251f906ffe7d3a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-06-21T23:22:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32340",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32340#event-446131"
}
```
