# Issue 32788: Permanently get rid of bare except: statements

archive/issues_032551.json:
```json
{
    "body": "A while ago, `@`jdemeyer used to regularly take care of removing bare `except:` statements constantly introduced in Sage source code, se e.g. #27427, #14028, #11310, #21687, #24274.\n\nThe goal of this ticket (perhaps should it be a task ticket ?) is to take over the work without self-abnegation by:\n\n- removing the existing bare `except:` statements.\n- ensure that those will not be reintroduced by adding a dedicated plugin to the patchbot (i have code for it but it could only be merged once the exisiting bare `except:` statements are removed).\n\n\nCC:  @kliem @frederichan-IMJPRG @videlec\n\nBranch/Commit: de4faf6146521e81991677edb6743449343d8f96\n\nReviewer: Jonathan Kliem, Markus Wageringel\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton, Jonathan Kliem, Thierry Monteil\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32788\n\n",
    "closed_at": "2022-02-12T22:05:36Z",
    "created_at": "2021-10-28T17:37:14Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Permanently get rid of bare except: statements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32788",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
A while ago, `@`jdemeyer used to regularly take care of removing bare `except:` statements constantly introduced in Sage source code, se e.g. #27427, #14028, #11310, #21687, #24274.

The goal of this ticket (perhaps should it be a task ticket ?) is to take over the work without self-abnegation by:

- removing the existing bare `except:` statements.
- ensure that those will not be reintroduced by adding a dedicated plugin to the patchbot (i have code for it but it could only be merged once the exisiting bare `except:` statements are removed).


CC:  @kliem @frederichan-IMJPRG @videlec

Branch/Commit: de4faf6146521e81991677edb6743449343d8f96

Reviewer: Jonathan Kliem, Markus Wageringel

Author: Frédéric Chapoton, Jonathan Kliem, Thierry Monteil

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32788





---

archive/issue_comments_463777.json:
```json
{
    "body": "<a id='comment:1'></a>this should rather be done using the pycodestyle linter : code E722\n\nhttps://pycodestyle.pycqa.org/en/latest/intro.html#error-codes",
    "created_at": "2021-10-28T18:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463777",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>this should rather be done using the pycodestyle linter : code E722

https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes



---

archive/issue_comments_463778.json:
```json
{
    "body": "<a id='comment:2'></a>see #32680 and src/tox.ini",
    "created_at": "2021-10-28T18:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463778",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>see #32680 and src/tox.ini



---

archive/issue_comments_463779.json:
```json
{
    "body": "<a id='comment:3'></a>but in fact, I would like that the linters first turn both green before switching on the check for E722,\n\nso, let us hope that #32757 will at last give us green linters..",
    "created_at": "2021-10-28T18:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463779",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>but in fact, I would like that the linters first turn both green before switching on the check for E722,

so, let us hope that #32757 will at last give us green linters..



---

archive/issue_comments_463780.json:
```json
{
    "body": "<a id='comment:4'></a>another aim is to turn on E713 and E714, several recent tickets  move on that way : #32766",
    "created_at": "2021-10-28T18:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463780",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>another aim is to turn on E713 and E714, several recent tickets  move on that way : #32766



---

archive/issue_comments_463781.json:
```json
{
    "body": "<a id='comment:5'></a>Current status of E722:\n\n```\nsrc/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'\nsrc/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'\nsrc/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'\nsrc/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'\nsrc/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'\nsrc/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'\nsrc/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'\nsrc/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'\nsrc/sage/modules/free_module.py:466:9: E722 do not use bare 'except'\nsrc/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'\nsrc/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'\n```",
    "created_at": "2021-10-28T18:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463781",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>Current status of E722:

```
src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'
src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'
src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'
src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'
src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'
src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'
src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'
src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'
src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'
src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'
src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'
src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'
src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'
src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'
```



---

archive/issue_comments_463782.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 chapoton]:\n> Current status of E722:\n> \n> ```\n> src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'\n> src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'\n> src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'\n> src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'\n> src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'\n> src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'\n> src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'\n> src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'\n> src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'\n> src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'\n> src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'\n> ```\n\n\n\nA basic `grep -R \"except:\" src/sage` returns a few more cases:\n\n```\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:          except:\nsrc/sage/libs/giac/giac.pyx:                except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:               except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:     #     except:\nsrc/sage/libs/giac/giac.pyx:            except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:               except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/graphs/digraph.py:                except:\nsrc/sage/graphs/digraph.py:            except:\nsrc/sage/graphs/digraph.py:            except:\nsrc/sage/graphs/graph_decompositions/tree_decomposition.pyx:        except:\nsrc/sage/interfaces/polymake.py:            except:\nsrc/sage/interfaces/polymake.py:        except:\nsrc/sage/geometry/polyhedron/base.py:                except:\nsrc/sage/geometry/polyhedron/library.py:        except:\nsrc/sage/modules/free_module.py:        except:\nsrc/sage/modules/matrix_morphism.py:        except:\nsrc/sage/modules/matrix_morphism.py:        except:\nsrc/sage/schemes/product_projective/rational_point.py:            except:\nsrc/sage/schemes/berkovich/berkovich_space.py:            except:\nsrc/sage/schemes/projective/projective_space.py:                    except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                        except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:    except:\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:                except:\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:    except:\nsrc/sage/rings/ring_extension_element.pyx:            except:\nsrc/sage/rings/complex_arb.pyx:        except:\nsrc/sage/rings/qqbar.py:    except:\nsrc/sage/plot/plot3d/shapes.pyx:        except:\n```",
    "created_at": "2021-10-28T19:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463782",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:6'></a>Replying to [comment:5 chapoton]:
> Current status of E722:
> 
> ```
> src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'
> src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'
> src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'
> src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'
> src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'
> src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'
> src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'
> src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'
> src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'
> src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'
> src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'
> ```



A basic `grep -R "except:" src/sage` returns a few more cases:

```
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:          except:
src/sage/libs/giac/giac.pyx:                except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:               except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:     #     except:
src/sage/libs/giac/giac.pyx:            except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:               except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/graphs/digraph.py:                except:
src/sage/graphs/digraph.py:            except:
src/sage/graphs/digraph.py:            except:
src/sage/graphs/graph_decompositions/tree_decomposition.pyx:        except:
src/sage/interfaces/polymake.py:            except:
src/sage/interfaces/polymake.py:        except:
src/sage/geometry/polyhedron/base.py:                except:
src/sage/geometry/polyhedron/library.py:        except:
src/sage/modules/free_module.py:        except:
src/sage/modules/matrix_morphism.py:        except:
src/sage/modules/matrix_morphism.py:        except:
src/sage/schemes/product_projective/rational_point.py:            except:
src/sage/schemes/berkovich/berkovich_space.py:            except:
src/sage/schemes/projective/projective_space.py:                    except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                        except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:    except:
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:                except:
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:    except:
src/sage/rings/ring_extension_element.pyx:            except:
src/sage/rings/complex_arb.pyx:        except:
src/sage/rings/qqbar.py:    except:
src/sage/plot/plot3d/shapes.pyx:        except:
```



---

archive/issue_comments_463783.json:
```json
{
    "body": "<a id='comment:7'></a>pycodestyle probably only looks at py files\n\n---\nNew commits:",
    "created_at": "2021-10-28T19:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463783",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>pycodestyle probably only looks at py files

---
New commits:



---

archive/issue_comments_463784.json:
```json
{
    "body": "<a id='comment:8'></a>after my branch for py files, there remains\n\n```\ngit grep -c \"except\\s*:\" src/\nsrc/doc/en/developer/coding_in_python.rst:1\nsrc/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\nsrc/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\nsrc/sage/libs/giac/giac.pyx:27\nsrc/sage/plot/plot3d/shapes.pyx:1\nsrc/sage/rings/complex_arb.pyx:1\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\nsrc/sage/rings/ring_extension_element.pyx:1\n```\n\nEDIT: the one in the doc is explaining that one should not do that..",
    "created_at": "2021-10-28T19:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463784",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>after my branch for py files, there remains

```
git grep -c "except\s*:" src/
src/doc/en/developer/coding_in_python.rst:1
src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
src/sage/libs/giac/giac.pyx:27
src/sage/plot/plot3d/shapes.pyx:1
src/sage/rings/complex_arb.pyx:1
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
src/sage/rings/ring_extension_element.pyx:1
```

EDIT: the one in the doc is explaining that one should not do that..



---

archive/issue_comments_463785.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-28T19:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463786.json:
```json
{
    "body": "<a id='comment:10'></a>new commit for pyx files except the giac.pyx mess.",
    "created_at": "2021-10-28T19:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463786",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>new commit for pyx files except the giac.pyx mess.



---

archive/issue_comments_463787.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-28T19:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463788.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:8 chapoton]:\n> after my branch for py files, there remains\n> \n> ```\n> git grep -c \"except\\s*:\" src/\n> src/doc/en/developer/coding_in_python.rst:1\n> src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\n> src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\n> src/sage/libs/giac/giac.pyx:27\n> src/sage/plot/plot3d/shapes.pyx:1\n> src/sage/rings/complex_arb.pyx:1\n> src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\n> src/sage/rings/ring_extension_element.pyx:1\n> ```\n> \n> EDIT: the one in the doc is explaining that one should not do that..\n\n\nOut of curiosity, did the branch comes from a script ?",
    "created_at": "2021-10-28T19:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463788",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:12'></a>Replying to [comment:8 chapoton]:
> after my branch for py files, there remains
> 
> ```
> git grep -c "except\s*:" src/
> src/doc/en/developer/coding_in_python.rst:1
> src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
> src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
> src/sage/libs/giac/giac.pyx:27
> src/sage/plot/plot3d/shapes.pyx:1
> src/sage/rings/complex_arb.pyx:1
> src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
> src/sage/rings/ring_extension_element.pyx:1
> ```
> 
> EDIT: the one in the doc is explaining that one should not do that..


Out of curiosity, did the branch comes from a script ?



---

archive/issue_comments_463789.json:
```json
{
    "body": "<a id='comment:13'></a>After a diagonal view at the commit, the `except Exception:` in `src/sage/interfaces/polymake.py` is dubious, and seems to be a consequence of a `try:/except:` encompassing a pretty long list of tests, which is not recommended as it might mask bugs, see https://www.python.org/dev/peps/pep-0008/#programming-recommendations",
    "created_at": "2021-10-28T19:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463789",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:13'></a>After a diagonal view at the commit, the `except Exception:` in `src/sage/interfaces/polymake.py` is dubious, and seems to be a consequence of a `try:/except:` encompassing a pretty long list of tests, which is not recommended as it might mask bugs, see https://www.python.org/dev/peps/pep-0008/#programming-recommendations



---

archive/issue_comments_463790.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:12 tmonteil]:\n> Replying to [comment:8 chapoton]:\n> > after my branch for py files, there remains\n> > \n> > ```\n> > git grep -c \"except\\s*:\" src/\n> > src/doc/en/developer/coding_in_python.rst:1\n> > src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\n> > src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\n> > src/sage/libs/giac/giac.pyx:27\n> > src/sage/plot/plot3d/shapes.pyx:1\n> > src/sage/rings/complex_arb.pyx:1\n> > src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\n> > src/sage/rings/ring_extension_element.pyx:1\n> > ```\n> > \n> > EDIT: the one in the doc is explaining that one should not do that..\n\n> \n> Out of curiosity, did the branch comes from a script ?\n\n\nNot a script, just my poor old hands and fatiguated brain..",
    "created_at": "2021-10-28T19:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463790",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>Replying to [comment:12 tmonteil]:
> Replying to [comment:8 chapoton]:
> > after my branch for py files, there remains
> > 
> > ```
> > git grep -c "except\s*:" src/
> > src/doc/en/developer/coding_in_python.rst:1
> > src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
> > src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
> > src/sage/libs/giac/giac.pyx:27
> > src/sage/plot/plot3d/shapes.pyx:1
> > src/sage/rings/complex_arb.pyx:1
> > src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
> > src/sage/rings/ring_extension_element.pyx:1
> > ```
> > 
> > EDIT: the one in the doc is explaining that one should not do that..

> 
> Out of curiosity, did the branch comes from a script ?


Not a script, just my poor old hands and fatiguated brain..



---

archive/issue_comments_463791.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-28T19:48:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463792.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:14 chapoton]:\n> Replying to [comment:12 tmonteil]:\n> > Out of curiosity, did the branch comes from a script ?\n\n> \n> Not a script, just my poor old hands and fatiguated brain..\n\n\nThen i should stop developing for Sage given my extremely weak relative productivity in inspecting such issues.",
    "created_at": "2021-10-28T20:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463792",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:16'></a>Replying to [comment:14 chapoton]:
> Replying to [comment:12 tmonteil]:
> > Out of curiosity, did the branch comes from a script ?

> 
> Not a script, just my poor old hands and fatiguated brain..


Then i should stop developing for Sage given my extremely weak relative productivity in inspecting such issues.



---

archive/issue_comments_463793.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:10 chapoton]:\n> new commit for pyx files except the giac.pyx mess.\n\n\nI am trying to look at it, it seems that all indentation is shifted by one.",
    "created_at": "2021-10-28T20:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463793",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:17'></a>Replying to [comment:10 chapoton]:
> new commit for pyx files except the giac.pyx mess.


I am trying to look at it, it seems that all indentation is shifted by one.



---

archive/issue_comments_463794.json:
```json
{
    "body": "<a id='comment:19'></a>I added 2 commits dealing with `giac.pyx` to your branch. The first commit only fixes bad indentation that made my editor crazy, the second one fixes most `try/except` statements (most of them seem just useless).\n\nThe last two remaining cases are related with some `pari_lock` and need to be explored.\n\n---\nNew commits:",
    "created_at": "2021-10-28T21:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463794",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:19'></a>I added 2 commits dealing with `giac.pyx` to your branch. The first commit only fixes bad indentation that made my editor crazy, the second one fixes most `try/except` statements (most of them seem just useless).

The last two remaining cases are related with some `pari_lock` and need to be explored.

---
New commits:



---

archive/issue_comments_463795.json:
```json
{
    "body": "<a id='comment:20'></a>---",
    "created_at": "2021-10-28T22:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463795",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:20'></a>---



---

archive/issue_comments_463796.json:
```json
{
    "body": "<a id='comment:21'></a>Sur ta branche, j'ai ajout\u00e9 un commit pour corriger les doctests.\n\n---\nNew commits:",
    "created_at": "2021-10-29T11:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463796",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>Sur ta branche, j'ai ajouté un commit pour corriger les doctests.

---
New commits:



---

archive/issue_comments_463797.json:
```json
{
    "body": "<a id='comment:22'></a>I hope that makes any sense:\n\n- Cleaned up the syntax.\n- `pari_unlock` shouldn't haven been called like that, because we are in `sig_on ... sig_off` and one should not call python functions in that case: https://cysignals.readthedocs.io/en/latest/interrupt.html.\n- `_wrap_gen(result)` doesn't belong in the `try ... except` block, because it has its own error handling (and if it was to raise an error, we would slip into the except block calling `sig_off` again.\n- Use `finally` to call `sig_off` before exit.\n- Apparently `giac` raises `RuntimeError` in case something goes wrong. So I used that.\n \n---\nNew commits:",
    "created_at": "2021-10-29T13:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463797",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'></a>I hope that makes any sense:

- Cleaned up the syntax.
- `pari_unlock` shouldn't haven been called like that, because we are in `sig_on ... sig_off` and one should not call python functions in that case: https://cysignals.readthedocs.io/en/latest/interrupt.html.
- `_wrap_gen(result)` doesn't belong in the `try ... except` block, because it has its own error handling (and if it was to raise an error, we would slip into the except block calling `sig_off` again.
- Use `finally` to call `sig_off` before exit.
- Apparently `giac` raises `RuntimeError` in case something goes wrong. So I used that.
 
---
New commits:



---

archive/issue_comments_463798.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T20:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463799.json:
```json
{
    "body": "<a id='comment:24'></a>bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?",
    "created_at": "2021-10-30T06:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463799",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?



---

archive/issue_comments_463800.json:
```json
{
    "body": "<a id='comment:25'></a>one should look more into the case of `src/sage/interfaces/polymake.py`",
    "created_at": "2021-10-30T06:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463800",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>one should look more into the case of `src/sage/interfaces/polymake.py`



---

archive/issue_comments_463801.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:24 chapoton]:\n> bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?\n\n\nSure, I only touched the `__call__` function that made trouble here. And I didn't feel like we should keep two copies of the same function, if we modify it anyway. I thought it was entirely the same, but there is a tiny difference, which should be more apparent with the current version. I don't think we should work further on this then necessary.",
    "created_at": "2021-10-30T08:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463801",
    "user": "https://github.com/kliem"
}
```

<a id='comment:26'></a>Replying to [comment:24 chapoton]:
> bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?


Sure, I only touched the `__call__` function that made trouble here. And I didn't feel like we should keep two copies of the same function, if we modify it anyway. I thought it was entirely the same, but there is a tiny difference, which should be more apparent with the current version. I don't think we should work further on this then necessary.



---

archive/issue_comments_463802.json:
```json
{
    "body": "<a id='comment:27'></a>new branch on top of u/gh-kliem/32788, where I removed a try/except in singular interface\n\n---\nNew commits:",
    "created_at": "2021-10-30T09:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463802",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>new branch on top of u/gh-kliem/32788, where I removed a try/except in singular interface

---
New commits:



---

archive/issue_comments_463803.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 chapoton]:\n> |                                                                                                                                          |                                             |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n> |[9368c2d](https://git.sagemath.org/sage.git/commit?id=9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|\n\n\n\n+1, this try/except was too wide.",
    "created_at": "2021-10-30T09:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463803",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:28'></a>Replying to [comment:27 chapoton]:
> |                                                                                                                                          |                                             |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
> |[9368c2d](https://git.sagemath.org/sage.git/commit?id=9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|



+1, this try/except was too wide.



---

archive/issue_comments_463804.json:
```json
{
    "body": "<a id='comment:29'></a>bot is morally green. Ready to go ?",
    "created_at": "2021-10-30T11:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463804",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>bot is morally green. Ready to go ?



---

archive/issue_comments_463805.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-30T12:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463806.json:
```json
{
    "body": "<a id='comment:31'></a>I added E722 to `src/tox.ini` so that the second part of the ticked get fixed too (using tox as `@`chapoton suggested). Regarding [comment:7 comment 7], will the `pyx` be tested as well ? Otherwise, how to deal with them ?",
    "created_at": "2021-10-30T12:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463806",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:31'></a>I added E722 to `src/tox.ini` so that the second part of the ticked get fixed too (using tox as `@`chapoton suggested). Regarding [comment:7 comment 7], will the `pyx` be tested as well ? Otherwise, how to deal with them ?



---

archive/issue_comments_463807.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-30T20:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463807",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_463808.json:
```json
{
    "body": "<a id='comment:33'></a>Les fichiers pyx ne sont pas regard\u00e9s par tox, il me semble. Tu peux ajouter un plugin au patchbot qui ne regarde que les fichiers pyx. Un m\u00e9canisme pour ca est en place dans le patchbot.",
    "created_at": "2021-10-31T06:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463808",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>Les fichiers pyx ne sont pas regardés par tox, il me semble. Tu peux ajouter un plugin au patchbot qui ne regarde que les fichiers pyx. Un mécanisme pour ca est en place dans le patchbot.



---

archive/issue_comments_463809.json:
```json
{
    "body": "<a id='comment:34'></a>there seems to be something broken in polyhedron..",
    "created_at": "2021-10-31T16:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463809",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>there seems to be something broken in polyhedron..



---

archive/issue_comments_463810.json:
```json
{
    "body": "<a id='comment:35'></a>But not by our current ticket, this also appears in other reports of the same bot.",
    "created_at": "2021-10-31T17:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463810",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'></a>But not by our current ticket, this also appears in other reports of the same bot.



---

archive/issue_comments_463811.json:
```json
{
    "body": "<a id='comment:36'></a>Indeed, I stopped the patchbot and will see if i can restart it cleanly.",
    "created_at": "2021-10-31T18:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463811",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:36'></a>Indeed, I stopped the patchbot and will see if i can restart it cleanly.



---

archive/issue_comments_463812.json:
```json
{
    "body": "<a id='comment:37'></a>Well, I would surely be interested in that bug. Looks like it's my code causing the problems...",
    "created_at": "2021-10-31T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463812",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>Well, I would surely be interested in that bug. Looks like it's my code causing the problems...



---

archive/issue_comments_463813.json:
```json
{
    "body": "<a id='comment:38'></a>I made a distclean, but the logs are still available on the tickets, let us see if it reappears.",
    "created_at": "2021-10-31T18:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463813",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:38'></a>I made a distclean, but the logs are still available on the tickets, let us see if it reappears.



---

archive/issue_comments_463814.json:
```json
{
    "body": "<a id='comment:39'></a>Regarding `src/sage/geometry/polyhedron/base.py` there are serious doctesting issues in 32bit architectures as well.",
    "created_at": "2021-10-31T20:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463814",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:39'></a>Regarding `src/sage/geometry/polyhedron/base.py` there are serious doctesting issues in 32bit architectures as well.



---

archive/issue_comments_463815.json:
```json
{
    "body": "<a id='comment:40'></a>there is at least one green patchbot. Good to go ?",
    "created_at": "2021-11-07T10:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463815",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:40'></a>there is at least one green patchbot. Good to go ?



---

archive/issue_comments_463816.json:
```json
{
    "body": "<a id='comment:41'></a>\n```\n./sage -tp --optional=sage,polymake,jupymake src/sage/interfaces/polymake.py src/sage/geometry/polyhedron/\n\n\n\nsage -t --random-seed=193726426221037022828737471270892163828 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 1534, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    PP.F_VECTOR.sage()      # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeElement._sage_[11]>\", line 1, in <module>\n        PP.F_VECTOR.sage()      # optional - polymake\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py\", line 1106, in sage\n        return self._sage_(*args, **kwds)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py\", line 1587, in _sage_\n        return vector(base_ring, [str_to_base_ring(s)\n    UnboundLocalError: local variable 'base_ring' referenced before assignment\n\nFile \"src/sage/interfaces/polymake.py\", line 1551, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    polymake.icosahedron().sage() # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeElement._sage_[16]>\", line 1, in <module>\n        polymake.icosahedron().sage() # optional - polymake\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py\", line 1106, in sage\n        return self._sage_(*args, **kwds)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py\", line 1569, in _sage_\n        d = int(r[i + 1: i + i1])\n    ValueError: invalid literal for int() with base 10: 'aticExtension<Rational>>[SAGE2]'\n```",
    "created_at": "2021-11-08T02:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463816",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
```
./sage -tp --optional=sage,polymake,jupymake src/sage/interfaces/polymake.py src/sage/geometry/polyhedron/



sage -t --random-seed=193726426221037022828737471270892163828 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 1534, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    PP.F_VECTOR.sage()      # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeElement._sage_[11]>", line 1, in <module>
        PP.F_VECTOR.sage()      # optional - polymake
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py", line 1106, in sage
        return self._sage_(*args, **kwds)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py", line 1587, in _sage_
        return vector(base_ring, [str_to_base_ring(s)
    UnboundLocalError: local variable 'base_ring' referenced before assignment

File "src/sage/interfaces/polymake.py", line 1551, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    polymake.icosahedron().sage() # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeElement._sage_[16]>", line 1, in <module>
        polymake.icosahedron().sage() # optional - polymake
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py", line 1106, in sage
        return self._sage_(*args, **kwds)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py", line 1569, in _sage_
        d = int(r[i + 1: i + i1])
    ValueError: invalid literal for int() with base 10: 'aticExtension<Rational>>[SAGE2]'
```



---

archive/issue_comments_463817.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-08T02:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463817",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_463818.json:
```json
{
    "body": "<a id='comment:42'></a>I propose, as a strategy, to undo the changes in polymake interface and keep them for another ticket. This would also mean not to activate E722 here, but later.\n\nOtherwise, somebody should stand up and fix now the polymake issues. I will not.",
    "created_at": "2021-11-09T18:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463818",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:42'></a>I propose, as a strategy, to undo the changes in polymake interface and keep them for another ticket. This would also mean not to activate E722 here, but later.

Otherwise, somebody should stand up and fix now the polymake issues. I will not.



---

archive/issue_comments_463819.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-10T19:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463820.json:
```json
{
    "body": "<a id='comment:44'></a>There first change was necessary, because it changed `polymake` to `polymake_expect`, which does not work for me at all.\n\nI still get one failure and I'm really confused, that I get this and you don't:\n\n```\nsage -t --random-seed=226050575114945871045540898771575845983 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 1544, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    _.parent()              # optional - polymake\nExpected:\n    Full MatrixSpace of 2 by 2 dense matrices over Integer Ring\nGot:\n    Full MatrixSpace of 2 by 2 dense matrices over Rational Field\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.interfaces.polymake.PolymakeElement._sage_\n    [282 tests, 1 failure, 3.17 s]\n```",
    "created_at": "2021-11-10T19:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463820",
    "user": "https://github.com/kliem"
}
```

<a id='comment:44'></a>There first change was necessary, because it changed `polymake` to `polymake_expect`, which does not work for me at all.

I still get one failure and I'm really confused, that I get this and you don't:

```
sage -t --random-seed=226050575114945871045540898771575845983 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 1544, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    _.parent()              # optional - polymake
Expected:
    Full MatrixSpace of 2 by 2 dense matrices over Integer Ring
Got:
    Full MatrixSpace of 2 by 2 dense matrices over Rational Field
**********************************************************************
1 item had failures:
   1 of  18 in sage.interfaces.polymake.PolymakeElement._sage_
    [282 tests, 1 failure, 3.17 s]
```



---

archive/issue_comments_463821.json:
```json
{
    "body": "<a id='comment:45'></a>The changes to `PolymakeElement` look nontrivial, so I would agree with the suggestion to defer them to a separate ticket.",
    "created_at": "2021-11-10T20:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463821",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>The changes to `PolymakeElement` look nontrivial, so I would agree with the suggestion to defer them to a separate ticket.



---

archive/issue_comments_463822.json:
```json
{
    "body": "<a id='comment:46'></a>... or just try the minimal change that changes `except:` to `except Exception:`",
    "created_at": "2021-11-10T20:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463822",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>... or just try the minimal change that changes `except:` to `except Exception:`



---

archive/issue_comments_463823.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463823",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_463824.json:
```json
{
    "body": "<a id='comment:47'></a>I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. \n\n---\nNew commits:",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463824",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. 

---
New commits:



---

archive/issue_comments_463825.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-14T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463826.json:
```json
{
    "body": "<a id='comment:49'></a>Polymake works OK now with this branch, thanks.",
    "created_at": "2021-11-14T18:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463826",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Polymake works OK now with this branch, thanks.



---

archive/issue_comments_463827.json:
```json
{
    "body": "<a id='comment:50'></a>green bot, can we move on here, please ?",
    "created_at": "2021-11-17T16:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463827",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:50'></a>green bot, can we move on here, please ?



---

archive/issue_comments_463828.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:43 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                         |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n> |[30b8dca](https://git.sagemath.org/sage.git/commit/?id=30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|\n\n\nCan we please keep this commit.\nPexpect does not work in my case and importing `polymake_expect as polymake` is not a good idea in that case.",
    "created_at": "2021-11-17T16:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463828",
    "user": "https://github.com/kliem"
}
```

<a id='comment:51'></a>Replying to [comment:43 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                         |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
> |[30b8dca](https://git.sagemath.org/sage.git/commit/?id=30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|


Can we please keep this commit.
Pexpect does not work in my case and importing `polymake_expect as polymake` is not a good idea in that case.



---

archive/issue_comments_463829.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-17T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463830.json:
```json
{
    "body": "<a id='comment:53'></a>ok, done",
    "created_at": "2021-11-17T18:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463830",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:53'></a>ok, done



---

archive/issue_comments_463831.json:
```json
{
    "body": "<a id='comment:54'></a>I think the comment should move before the code and not after:\n\n```diff\n-                rat_points.add(X(point)) # checks if this point lies on X or not\n-            except:\n+                rat_points.add(X(point))\n+                # checks if this point lies on X or not\n```\n\nSo instead we should have something as\n\n```\n                # checks if this point lies on X or not\n                rat_points.add(X(point))\n```",
    "created_at": "2021-11-17T19:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463831",
    "user": "https://github.com/kliem"
}
```

<a id='comment:54'></a>I think the comment should move before the code and not after:

```diff
-                rat_points.add(X(point)) # checks if this point lies on X or not
-            except:
+                rat_points.add(X(point))
+                # checks if this point lies on X or not
```

So instead we should have something as

```
                # checks if this point lies on X or not
                rat_points.add(X(point))
```



---

archive/issue_comments_463832.json:
```json
{
    "body": "<a id='comment:56'></a>Replying to [comment:47 chapoton]:\n> I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. \n\n\nI do not see the benefit of such squashing, but i see the drawbacks: we get a mixed bomb of changes without understanding which change is done for which reason. For example, i split the changes on `giac.pyx` as follows in order to ease reviewing:\n\n```\n\u200bbcdb620\t#32788 : fix intentations for libs/giac/giac.pyx\n\u200bda3e437\t#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx\n```\n\nSimilarly, it is important to have separate commits when you rename a file and modify it.",
    "created_at": "2021-11-17T22:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463832",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:56'></a>Replying to [comment:47 chapoton]:
> I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. 


I do not see the benefit of such squashing, but i see the drawbacks: we get a mixed bomb of changes without understanding which change is done for which reason. For example, i split the changes on `giac.pyx` as follows in order to ease reviewing:

```
​bcdb620	#32788 : fix intentations for libs/giac/giac.pyx
​da3e437	#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx
```

Similarly, it is important to have separate commits when you rename a file and modify it.



---

archive/issue_comments_463833.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-18T10:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463834.json:
```json
{
    "body": "<a id='comment:58'></a>comment:54 is now fixed\n\nconcerning squashing, I thought it was a good idea to simplify the commit history. I agree this was maybe not a so good idea. If you think this matters enough to spend your time on that, please provide a better branch",
    "created_at": "2021-11-18T10:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463834",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:58'></a>comment:54 is now fixed

concerning squashing, I thought it was a good idea to simplify the commit history. I agree this was maybe not a so good idea. If you think this matters enough to spend your time on that, please provide a better branch



---

archive/issue_comments_463835.json:
```json
{
    "body": "<a id='comment:59'></a>green bot again",
    "created_at": "2021-11-18T12:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463835",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:59'></a>green bot again



---

archive/issue_comments_463836.json:
```json
{
    "body": "<a id='comment:60'></a>can we please move on here ?",
    "created_at": "2021-11-21T19:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463836",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:60'></a>can we please move on here ?



---

archive/issue_comments_463837.json:
```json
{
    "body": "<a id='comment:62'></a>I cherry-picked the relevant commits and merged with `9.5.beta6` so that `git diff trac/u/chapoton/except_fix_branch trac/u/tmonteil/except_fix_branch` leads to:\n\n\n```diff\n--- a/src/sage/interfaces/polymake.py\n+++ b/src/sage/interfaces/polymake.py\n@@ -364,7 +364,7 @@ class PolymakeAbstract(ExtraTabCompletion, Interface):\n             try:\n                 x = RDF(x)\n                 return '{}'.format(x)\n-            except Exception:\n+            except (TypeError, ValueError):\n                 pass\n \n             raise NotImplementedError\n```\n\nI am not sure if i have to revert that change.\n\n---\nLast 10 new commits:",
    "created_at": "2021-11-29T19:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463837",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:62'></a>I cherry-picked the relevant commits and merged with `9.5.beta6` so that `git diff trac/u/chapoton/except_fix_branch trac/u/tmonteil/except_fix_branch` leads to:


```diff
--- a/src/sage/interfaces/polymake.py
+++ b/src/sage/interfaces/polymake.py
@@ -364,7 +364,7 @@ class PolymakeAbstract(ExtraTabCompletion, Interface):
             try:
                 x = RDF(x)
                 return '{}'.format(x)
-            except Exception:
+            except (TypeError, ValueError):
                 pass
 
             raise NotImplementedError
```

I am not sure if i have to revert that change.

---
Last 10 new commits:



---

archive/issue_events_086752.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32788#event-86752"
}
```



---

archive/issue_comments_463838.json:
```json
{
    "body": "<a id='comment:63'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463838",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_463839.json:
```json
{
    "body": "<a id='comment:64'></a>red branch => needs work",
    "created_at": "2021-12-28T16:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463839",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:64'></a>red branch => needs work



---

archive/issue_comments_463840.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-28T16:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463840",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_463841.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463841",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_463842.json:
```json
{
    "body": "<a id='comment:65'></a>rebased on 9.5.rc1\n\n---\nNew commits:",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463842",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:65'></a>rebased on 9.5.rc1

---
New commits:



---

archive/issue_comments_463843.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-01-14T19:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_463844.json:
```json
{
    "body": "<a id='comment:67'></a>now correctly rebased, needs test by somebody having polymake",
    "created_at": "2022-01-14T19:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463844",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:67'></a>now correctly rebased, needs test by somebody having polymake



---

archive/issue_comments_463845.json:
```json
{
    "body": "<a id='comment:68'></a>There are two polymake test failures (see below), but they are not related to this ticket, so are best dealt with in another ticket.\n\nI am ready to set this ticket to positive, if someone could confirm that the new pycodestyle check still passes with 9.5 merged. Unfortunately, I have difficulties in running tox on my machine.\n\nBy the way, this ticket will also fix a random [doctest failure](https://patchbot.sagemath.org/log/33217/Linux/29~20.04.1-Ubuntu_SMP_Fri_Jan_14_00:32:30_UTC_2022/x86_64/5.13.0-27-generic/r640/2022-01-26%2017:49:49) in `coding/linear_code.py` which is due to an `AlarmInterrupt` being swallowed by a bare except.\n\n\n\n---\n\n```\nsage -t --long --warn-long 69.2 --random-seed=17721019333867817533235853689613643341 src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst\", line 650, in doc.en.thematic_tutorials.geometry.polyhedra_tutorial\nFailed example:\n    Polyhedron(vertices=V, backend='polymake')               # optional - polymake\nExpected:\n    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices\nGot:\n    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 20 v\nertices\n\nsage -t --long --warn-long 69.2 --random-seed=201256750698610760769760302766889916051 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 2189, in sage.interfaces.polymake.PolymakeExpect._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake_expect\nExpected:\n    32768\nGot:\n    Can't locate object method \"description\" via package \"32768\" (perhaps you forgot to load \"32768\"?) at input line 1.\n```",
    "created_at": "2022-02-01T19:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463845",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:68'></a>There are two polymake test failures (see below), but they are not related to this ticket, so are best dealt with in another ticket.

I am ready to set this ticket to positive, if someone could confirm that the new pycodestyle check still passes with 9.5 merged. Unfortunately, I have difficulties in running tox on my machine.

By the way, this ticket will also fix a random [doctest failure](https://patchbot.sagemath.org/log/33217/Linux/29~20.04.1-Ubuntu_SMP_Fri_Jan_14_00:32:30_UTC_2022/x86_64/5.13.0-27-generic/r640/2022-01-26%2017:49:49) in `coding/linear_code.py` which is due to an `AlarmInterrupt` being swallowed by a bare except.



---

```
sage -t --long --warn-long 69.2 --random-seed=17721019333867817533235853689613643341 src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst", line 650, in doc.en.thematic_tutorials.geometry.polyhedra_tutorial
Failed example:
    Polyhedron(vertices=V, backend='polymake')               # optional - polymake
Expected:
    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices
Got:
    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 20 v
ertices

sage -t --long --warn-long 69.2 --random-seed=201256750698610760769760302766889916051 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 2189, in sage.interfaces.polymake.PolymakeExpect._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake_expect
Expected:
    32768
Got:
    Can't locate object method "description" via package "32768" (perhaps you forgot to load "32768"?) at input line 1.
```



---

archive/issue_comments_463846.json:
```json
{
    "body": "<a id='comment:69'></a>Never mind. I have tried it on a different machine and `pycodestyle-minimal` passes, so I think this is good to go.",
    "created_at": "2022-02-01T19:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463846",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:69'></a>Never mind. I have tried it on a different machine and `pycodestyle-minimal` passes, so I think this is good to go.



---

archive/issue_comments_463847.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-01T19:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463847",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463848.json:
```json
{
    "body": "<a id='comment:70'></a>In `src/sage/libs/giac/giac.pyx`, docstring\nindentation for `loadgiacgen` seems off.",
    "created_at": "2022-02-01T20:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463848",
    "user": "https://github.com/slel"
}
```

<a id='comment:70'></a>In `src/sage/libs/giac/giac.pyx`, docstring
indentation for `loadgiacgen` seems off.



---

archive/issue_comments_463849.json:
```json
{
    "body": "<a id='comment:71'></a>Replying to [comment:70 slelievre]:\n> In `src/sage/libs/giac/giac.pyx`, docstring\n> indentation for `loadgiacgen` seems off.\n\n\nI am happy to review it if anyone wants to change that, but I do not think it is necessary here.",
    "created_at": "2022-02-02T19:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463849",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:71'></a>Replying to [comment:70 slelievre]:
> In `src/sage/libs/giac/giac.pyx`, docstring
> indentation for `loadgiacgen` seems off.


I am happy to review it if anyone wants to change that, but I do not think it is necessary here.



---

archive/issue_events_086753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:05:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32788#event-86753"
}
```



---

archive/issue_comments_463850.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-12T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-463850",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
