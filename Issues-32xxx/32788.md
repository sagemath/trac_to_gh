# Issue 32788: Permanently get rid of bare except: statements

archive/issues_032551.json:
```json
{
    "body": "A while ago, `@`jdemeyer used to regularly take care of removing bare `except:` statements constantly introduced in Sage source code, se e.g. #27427, #14028, #11310, #21687, #24274.\n\nThe goal of this ticket (perhaps should it be a task ticket ?) is to take over the work without self-abnegation by:\n\n- removing the existing bare `except:` statements.\n- ensure that those will not be reintroduced by adding a dedicated plugin to the patchbot (i have code for it but it could only be merged once the exisiting bare `except:` statements are removed).\n\n\nCC:  @kliem @frederichan-IMJPRG @videlec\n\nBranch/Commit: de4faf6146521e81991677edb6743449343d8f96\n\nReviewer: Jonathan Kliem, Markus Wageringel\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton, Jonathan Kliem, Thierry Monteil\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32788\n\n",
    "closed_at": "2022-02-12T22:05:36Z",
    "created_at": "2021-10-28T17:37:14Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Permanently get rid of bare except: statements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32788",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
A while ago, `@`jdemeyer used to regularly take care of removing bare `except:` statements constantly introduced in Sage source code, se e.g. #27427, #14028, #11310, #21687, #24274.

The goal of this ticket (perhaps should it be a task ticket ?) is to take over the work without self-abnegation by:

- removing the existing bare `except:` statements.
- ensure that those will not be reintroduced by adding a dedicated plugin to the patchbot (i have code for it but it could only be merged once the exisiting bare `except:` statements are removed).


CC:  @kliem @frederichan-IMJPRG @videlec

Branch/Commit: de4faf6146521e81991677edb6743449343d8f96

Reviewer: Jonathan Kliem, Markus Wageringel

Author: Frédéric Chapoton, Jonathan Kliem, Thierry Monteil

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32788





---

archive/issue_comments_653621.json:
```json
{
    "body": "<a id='comment:1'></a>\nthis should rather be done using the pycodestyle linter : code E722\n\nhttps://pycodestyle.pycqa.org/en/latest/intro.html#error-codes",
    "created_at": "2021-10-28T18:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653621",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
this should rather be done using the pycodestyle linter : code E722

https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes



---

archive/issue_comments_653622.json:
```json
{
    "body": "<a id='comment:2'></a>\nsee #32680 and src/tox.ini",
    "created_at": "2021-10-28T18:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653622",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
see #32680 and src/tox.ini



---

archive/issue_comments_653623.json:
```json
{
    "body": "<a id='comment:3'></a>\nbut in fact, I would like that the linters first turn both green before switching on the check for E722,\n\nso, let us hope that #32757 will at last give us green linters..",
    "created_at": "2021-10-28T18:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653623",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
but in fact, I would like that the linters first turn both green before switching on the check for E722,

so, let us hope that #32757 will at last give us green linters..



---

archive/issue_comments_653624.json:
```json
{
    "body": "<a id='comment:4'></a>\nanother aim is to turn on E713 and E714, several recent tickets  move on that way : #32766",
    "created_at": "2021-10-28T18:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653624",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
another aim is to turn on E713 and E714, several recent tickets  move on that way : #32766



---

archive/issue_comments_653625.json:
```json
{
    "body": "<a id='comment:5'></a>\nCurrent status of E722:\n\n```\nsrc/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'\nsrc/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'\nsrc/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'\nsrc/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'\nsrc/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'\nsrc/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'\nsrc/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'\nsrc/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'\nsrc/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'\nsrc/sage/modules/free_module.py:466:9: E722 do not use bare 'except'\nsrc/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'\nsrc/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'\n```",
    "created_at": "2021-10-28T18:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653625",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
Current status of E722:

```
src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'
src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'
src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'
src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'
src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'
src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'
src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'
src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'
src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'
src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'
src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'
src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'
src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'
src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'
```



---

archive/issue_comments_653626.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [chapoton](#comment%3A5):\n> Current status of E722:\n> \n> ```\n> src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'\n> src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'\n> src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'\n> src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'\n> src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'\n> src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'\n> src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'\n> src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'\n> src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'\n> src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'\n> src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'\n> src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'\n> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'\n> ```\n\n\n\nA basic `grep -R \"except:\" src/sage` returns a few more cases:\n\n```\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:          except:\nsrc/sage/libs/giac/giac.pyx:                except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:               except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:     #     except:\nsrc/sage/libs/giac/giac.pyx:            except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:#    except:\nsrc/sage/libs/giac/giac.pyx:         except:\nsrc/sage/libs/giac/giac.pyx:               except:\nsrc/sage/libs/giac/giac.pyx:        except:\nsrc/sage/graphs/digraph.py:                except:\nsrc/sage/graphs/digraph.py:            except:\nsrc/sage/graphs/digraph.py:            except:\nsrc/sage/graphs/graph_decompositions/tree_decomposition.pyx:        except:\nsrc/sage/interfaces/polymake.py:            except:\nsrc/sage/interfaces/polymake.py:        except:\nsrc/sage/geometry/polyhedron/base.py:                except:\nsrc/sage/geometry/polyhedron/library.py:        except:\nsrc/sage/modules/free_module.py:        except:\nsrc/sage/modules/matrix_morphism.py:        except:\nsrc/sage/modules/matrix_morphism.py:        except:\nsrc/sage/schemes/product_projective/rational_point.py:            except:\nsrc/sage/schemes/berkovich/berkovich_space.py:            except:\nsrc/sage/schemes/projective/projective_space.py:                    except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                        except:\nsrc/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:\nsrc/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:    except:\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:                except:\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:    except:\nsrc/sage/rings/ring_extension_element.pyx:            except:\nsrc/sage/rings/complex_arb.pyx:        except:\nsrc/sage/rings/qqbar.py:    except:\nsrc/sage/plot/plot3d/shapes.pyx:        except:\n```",
    "created_at": "2021-10-28T19:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653626",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:6'></a>
Replying to [chapoton](#comment%3A5):
> Current status of E722:
> 
> ```
> src/sage/schemes/projective/projective_space.py:1696:21: E722 do not use bare 'except'
> src/sage/schemes/berkovich/berkovich_space.py:622:13: E722 do not use bare 'except'
> src/sage/schemes/product_projective/rational_point.py:498:13: E722 do not use bare 'except'
> src/sage/geometry/polyhedron/base.py:5278:17: E722 do not use bare 'except'
> src/sage/geometry/polyhedron/library.py:2723:9: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:3355:17: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:4000:13: E722 do not use bare 'except'
> src/sage/graphs/digraph.py:4217:13: E722 do not use bare 'except'
> src/sage/rings/qqbar.py:2653:5: E722 do not use bare 'except'
> src/sage/interfaces/polymake.py:365:13: E722 do not use bare 'except'
> src/sage/interfaces/polymake.py:1596:9: E722 do not use bare 'except'
> src/sage/modules/free_module.py:466:9: E722 do not use bare 'except'
> src/sage/modules/matrix_morphism.py:1421:9: E722 do not use bare 'except'
> src/sage/modules/matrix_morphism.py:1506:9: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:241:17: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:248:17: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:255:13: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:806:13: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:896:25: E722 do not use bare 'except'
> src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:1081:13: E722 do not use bare 'except'
> ```



A basic `grep -R "except:" src/sage` returns a few more cases:

```
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:          except:
src/sage/libs/giac/giac.pyx:                except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:               except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:     #     except:
src/sage/libs/giac/giac.pyx:            except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:#    except:
src/sage/libs/giac/giac.pyx:         except:
src/sage/libs/giac/giac.pyx:               except:
src/sage/libs/giac/giac.pyx:        except:
src/sage/graphs/digraph.py:                except:
src/sage/graphs/digraph.py:            except:
src/sage/graphs/digraph.py:            except:
src/sage/graphs/graph_decompositions/tree_decomposition.pyx:        except:
src/sage/interfaces/polymake.py:            except:
src/sage/interfaces/polymake.py:        except:
src/sage/geometry/polyhedron/base.py:                except:
src/sage/geometry/polyhedron/library.py:        except:
src/sage/modules/free_module.py:        except:
src/sage/modules/matrix_morphism.py:        except:
src/sage/modules/matrix_morphism.py:        except:
src/sage/schemes/product_projective/rational_point.py:            except:
src/sage/schemes/berkovich/berkovich_space.py:            except:
src/sage/schemes/projective/projective_space.py:                    except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:                        except:
src/sage/dynamics/arithmetic_dynamics/berkovich_ds.py:            except:
src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:    except:
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:                except:
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:    except:
src/sage/rings/ring_extension_element.pyx:            except:
src/sage/rings/complex_arb.pyx:        except:
src/sage/rings/qqbar.py:    except:
src/sage/plot/plot3d/shapes.pyx:        except:
```



---

archive/issue_comments_653627.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/32788\"",
    "created_at": "2021-10-28T19:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653627",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/32788"



---

archive/issue_comments_653628.json:
```json
{
    "body": "<a id='comment:7'></a>\npycodestyle probably only looks at py files\n\n---\nNew commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[db41390](https://github.com/sagemath/sagetrac-mirror/commit/db4139091e9c524779271c45aa8450892107fc3e)|`fix most E722 (first pass)`|",
    "created_at": "2021-10-28T19:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653628",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
pycodestyle probably only looks at py files

---
New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[db41390](https://github.com/sagemath/sagetrac-mirror/commit/db4139091e9c524779271c45aa8450892107fc3e)|`fix most E722 (first pass)`|



---

archive/issue_comments_653629.json:
```json
{
    "body": "Changing commit from \"\" to \"db4139091e9c524779271c45aa8450892107fc3e\"",
    "created_at": "2021-10-28T19:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653629",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "db4139091e9c524779271c45aa8450892107fc3e"



---

archive/issue_comments_653630.json:
```json
{
    "body": "<a id='comment:8'></a>\nafter my branch for py files, there remains\n\n```\ngit grep -c \"except\\s*:\" src/\nsrc/doc/en/developer/coding_in_python.rst:1\nsrc/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\nsrc/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\nsrc/sage/libs/giac/giac.pyx:27\nsrc/sage/plot/plot3d/shapes.pyx:1\nsrc/sage/rings/complex_arb.pyx:1\nsrc/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\nsrc/sage/rings/ring_extension_element.pyx:1\n```\n\nEDIT: the one in the doc is explaining that one should not do that..",
    "created_at": "2021-10-28T19:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653630",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
after my branch for py files, there remains

```
git grep -c "except\s*:" src/
src/doc/en/developer/coding_in_python.rst:1
src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
src/sage/libs/giac/giac.pyx:27
src/sage/plot/plot3d/shapes.pyx:1
src/sage/rings/complex_arb.pyx:1
src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
src/sage/rings/ring_extension_element.pyx:1
```

EDIT: the one in the doc is explaining that one should not do that..



---

archive/issue_comments_653631.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[cffd35e](https://github.com/sagemath/sagetrac-mirror/commit/cffd35e12c9fd4ef535654947ee167d3f9dfe55a)|`no except: in most pyx files`|",
    "created_at": "2021-10-28T19:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[cffd35e](https://github.com/sagemath/sagetrac-mirror/commit/cffd35e12c9fd4ef535654947ee167d3f9dfe55a)|`no except: in most pyx files`|



---

archive/issue_comments_653632.json:
```json
{
    "body": "Changing commit from \"db4139091e9c524779271c45aa8450892107fc3e\" to \"cffd35e12c9fd4ef535654947ee167d3f9dfe55a\"",
    "created_at": "2021-10-28T19:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db4139091e9c524779271c45aa8450892107fc3e" to "cffd35e12c9fd4ef535654947ee167d3f9dfe55a"



---

archive/issue_comments_653633.json:
```json
{
    "body": "<a id='comment:10'></a>\nnew commit for pyx files except the giac.pyx mess.",
    "created_at": "2021-10-28T19:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653633",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
new commit for pyx files except the giac.pyx mess.



---

archive/issue_comments_653634.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[279b592](https://github.com/sagemath/sagetrac-mirror/commit/279b5927981a98f698b7fc7a90ac842b0b3a7721)|`fix typo`|",
    "created_at": "2021-10-28T19:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[279b592](https://github.com/sagemath/sagetrac-mirror/commit/279b5927981a98f698b7fc7a90ac842b0b3a7721)|`fix typo`|



---

archive/issue_comments_653635.json:
```json
{
    "body": "Changing commit from \"cffd35e12c9fd4ef535654947ee167d3f9dfe55a\" to \"279b5927981a98f698b7fc7a90ac842b0b3a7721\"",
    "created_at": "2021-10-28T19:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cffd35e12c9fd4ef535654947ee167d3f9dfe55a" to "279b5927981a98f698b7fc7a90ac842b0b3a7721"



---

archive/issue_comments_653636.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [chapoton](#comment%3A8):\n> after my branch for py files, there remains\n> \n> ```\n> git grep -c \"except\\s*:\" src/\n> src/doc/en/developer/coding_in_python.rst:1\n> src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\n> src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\n> src/sage/libs/giac/giac.pyx:27\n> src/sage/plot/plot3d/shapes.pyx:1\n> src/sage/rings/complex_arb.pyx:1\n> src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\n> src/sage/rings/ring_extension_element.pyx:1\n> ```\n> \n> EDIT: the one in the doc is explaining that one should not do that..\n\n\nOut of curiosity, did the branch comes from a script ?",
    "created_at": "2021-10-28T19:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653636",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:12'></a>
Replying to [chapoton](#comment%3A8):
> after my branch for py files, there remains
> 
> ```
> git grep -c "except\s*:" src/
> src/doc/en/developer/coding_in_python.rst:1
> src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
> src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
> src/sage/libs/giac/giac.pyx:27
> src/sage/plot/plot3d/shapes.pyx:1
> src/sage/rings/complex_arb.pyx:1
> src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
> src/sage/rings/ring_extension_element.pyx:1
> ```
> 
> EDIT: the one in the doc is explaining that one should not do that..


Out of curiosity, did the branch comes from a script ?



---

archive/issue_comments_653637.json:
```json
{
    "body": "<a id='comment:13'></a>\nAfter a diagonal view at the commit, the `except Exception:` in `src/sage/interfaces/polymake.py` is dubious, and seems to be a consequence of a `try:/except:` encompassing a pretty long list of tests, which is not recommended as it might mask bugs, see https://www.python.org/dev/peps/pep-0008/#programming-recommendations",
    "created_at": "2021-10-28T19:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653637",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:13'></a>
After a diagonal view at the commit, the `except Exception:` in `src/sage/interfaces/polymake.py` is dubious, and seems to be a consequence of a `try:/except:` encompassing a pretty long list of tests, which is not recommended as it might mask bugs, see https://www.python.org/dev/peps/pep-0008/#programming-recommendations



---

archive/issue_comments_653638.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [tmonteil](#comment%3A12):\n> Replying to [chapoton](#comment%3A8):\n> > after my branch for py files, there remains\n> > \n> > ```\n> > git grep -c \"except\\s*:\" src/\n> > src/doc/en/developer/coding_in_python.rst:1\n> > src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1\n> > src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1\n> > src/sage/libs/giac/giac.pyx:27\n> > src/sage/plot/plot3d/shapes.pyx:1\n> > src/sage/rings/complex_arb.pyx:1\n> > src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2\n> > src/sage/rings/ring_extension_element.pyx:1\n> > ```\n> > \n> > EDIT: the one in the doc is explaining that one should not do that..\n\n> \n> Out of curiosity, did the branch comes from a script ?\n\n\nNot a script, just my poor old hands and fatiguated brain..",
    "created_at": "2021-10-28T19:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653638",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
Replying to [tmonteil](#comment%3A12):
> Replying to [chapoton](#comment%3A8):
> > after my branch for py files, there remains
> > 
> > ```
> > git grep -c "except\s*:" src/
> > src/doc/en/developer/coding_in_python.rst:1
> > src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx:1
> > src/sage/graphs/graph_decompositions/tree_decomposition.pyx:1
> > src/sage/libs/giac/giac.pyx:27
> > src/sage/plot/plot3d/shapes.pyx:1
> > src/sage/rings/complex_arb.pyx:1
> > src/sage/rings/polynomial/multi_polynomial_libsingular.pyx:2
> > src/sage/rings/ring_extension_element.pyx:1
> > ```
> > 
> > EDIT: the one in the doc is explaining that one should not do that..

> 
> Out of curiosity, did the branch comes from a script ?


Not a script, just my poor old hands and fatiguated brain..



---

archive/issue_comments_653639.json:
```json
{
    "body": "Changing commit from \"279b5927981a98f698b7fc7a90ac842b0b3a7721\" to \"eb4ae950f6caa27cef7b1d04c5b0473d36139ae3\"",
    "created_at": "2021-10-28T19:48:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "279b5927981a98f698b7fc7a90ac842b0b3a7721" to "eb4ae950f6caa27cef7b1d04c5b0473d36139ae3"



---

archive/issue_comments_653640.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[eb4ae95](https://github.com/sagemath/sagetrac-mirror/commit/eb4ae950f6caa27cef7b1d04c5b0473d36139ae3)|`add import`|",
    "created_at": "2021-10-28T19:48:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[eb4ae95](https://github.com/sagemath/sagetrac-mirror/commit/eb4ae950f6caa27cef7b1d04c5b0473d36139ae3)|`add import`|



---

archive/issue_comments_653641.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [chapoton](#comment%3A14):\n> Replying to [tmonteil](#comment%3A12):\n> > Out of curiosity, did the branch comes from a script ?\n\n> \n> Not a script, just my poor old hands and fatiguated brain..\n\n\nThen i should stop developing for Sage given my extremely weak relative productivity in inspecting such issues.",
    "created_at": "2021-10-28T20:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653641",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:16'></a>
Replying to [chapoton](#comment%3A14):
> Replying to [tmonteil](#comment%3A12):
> > Out of curiosity, did the branch comes from a script ?

> 
> Not a script, just my poor old hands and fatiguated brain..


Then i should stop developing for Sage given my extremely weak relative productivity in inspecting such issues.



---

archive/issue_comments_653642.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [chapoton](#comment%3A10):\n> new commit for pyx files except the giac.pyx mess.\n\n\nI am trying to look at it, it seems that all indentation is shifted by one.",
    "created_at": "2021-10-28T20:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653642",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:17'></a>
Replying to [chapoton](#comment%3A10):
> new commit for pyx files except the giac.pyx mess.


I am trying to look at it, it seems that all indentation is shifted by one.



---

archive/issue_comments_653643.json:
```json
{
    "body": "Changing branch from \"u/chapoton/32788\" to \"u/tmonteil/32788\"",
    "created_at": "2021-10-28T21:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653643",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing branch from "u/chapoton/32788" to "u/tmonteil/32788"



---

archive/issue_comments_653644.json:
```json
{
    "body": "<a id='comment:19'></a>\nI added 2 commits dealing with `giac.pyx` to your branch. The first commit only fixes bad indentation that made my editor crazy, the second one fixes most `try/except` statements (most of them seem just useless).\n\nThe last two remaining cases are related with some `pari_lock` and need to be explored.\n\n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[bcdb620](https://github.com/sagemath/sagetrac-mirror/commit/bcdb6201a705715c7b995270064b1d734b9ef81c)|`#32788 : fix intentations for libs/giac/giac.pyx`|\n|[da3e437](https://github.com/sagemath/sagetrac-mirror/commit/da3e43762af6b5d0b40547d382cbbac3375988fc)|`#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx`|",
    "created_at": "2021-10-28T21:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653644",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:19'></a>
I added 2 commits dealing with `giac.pyx` to your branch. The first commit only fixes bad indentation that made my editor crazy, the second one fixes most `try/except` statements (most of them seem just useless).

The last two remaining cases are related with some `pari_lock` and need to be explored.

---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[bcdb620](https://github.com/sagemath/sagetrac-mirror/commit/bcdb6201a705715c7b995270064b1d734b9ef81c)|`#32788 : fix intentations for libs/giac/giac.pyx`|
|[da3e437](https://github.com/sagemath/sagetrac-mirror/commit/da3e43762af6b5d0b40547d382cbbac3375988fc)|`#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx`|



---

archive/issue_comments_653645.json:
```json
{
    "body": "Changing commit from \"eb4ae950f6caa27cef7b1d04c5b0473d36139ae3\" to \"da3e43762af6b5d0b40547d382cbbac3375988fc\"",
    "created_at": "2021-10-28T21:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653645",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing commit from "eb4ae950f6caa27cef7b1d04c5b0473d36139ae3" to "da3e43762af6b5d0b40547d382cbbac3375988fc"



---

archive/issue_comments_653646.json:
```json
{
    "body": "<a id='comment:20'></a>\n---",
    "created_at": "2021-10-28T22:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653646",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:20'></a>
---



---

archive/issue_comments_653647.json:
```json
{
    "body": "Changing commit from \"da3e43762af6b5d0b40547d382cbbac3375988fc\" to \"be872c16d193602a548c98b1b18deb24dc2e0d37\"",
    "created_at": "2021-10-29T11:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653647",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "da3e43762af6b5d0b40547d382cbbac3375988fc" to "be872c16d193602a548c98b1b18deb24dc2e0d37"



---

archive/issue_comments_653648.json:
```json
{
    "body": "<a id='comment:21'></a>\nSur ta branche, j'ai ajout\u00e9 un commit pour corriger les doctests.\n\n---\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[e98b6e3](https://github.com/sagemath/sagetrac-mirror/commit/e98b6e3b84ade9fe9e2a59106bd854a9cd1c08bf)|`Merge branch 'u/tmonteil/32788' in 9.5.beta5`|\n|[be872c1](https://github.com/sagemath/sagetrac-mirror/commit/be872c16d193602a548c98b1b18deb24dc2e0d37)|`some fixes in giac, schemes, geometry`|",
    "created_at": "2021-10-29T11:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653648",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
Sur ta branche, j'ai ajouté un commit pour corriger les doctests.

---
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[e98b6e3](https://github.com/sagemath/sagetrac-mirror/commit/e98b6e3b84ade9fe9e2a59106bd854a9cd1c08bf)|`Merge branch 'u/tmonteil/32788' in 9.5.beta5`|
|[be872c1](https://github.com/sagemath/sagetrac-mirror/commit/be872c16d193602a548c98b1b18deb24dc2e0d37)|`some fixes in giac, schemes, geometry`|



---

archive/issue_comments_653649.json:
```json
{
    "body": "Changing branch from \"u/tmonteil/32788\" to \"u/chapoton/32788\"",
    "created_at": "2021-10-29T11:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653649",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/tmonteil/32788" to "u/chapoton/32788"



---

archive/issue_comments_653650.json:
```json
{
    "body": "<a id='comment:22'></a>\nI hope that makes any sense:\n\n- Cleaned up the syntax.\n- `pari_unlock` shouldn't haven been called like that, because we are in `sig_on ... sig_off` and one should not call python functions in that case: https://cysignals.readthedocs.io/en/latest/interrupt.html.\n- `_wrap_gen(result)` doesn't belong in the `try ... except` block, because it has its own error handling (and if it was to raise an error, we would slip into the except block calling `sig_off` again.\n- Use `finally` to call `sig_off` before exit.\n- Apparently `giac` raises `RuntimeError` in case something goes wrong. So I used that.\n \n---\nNew commits:\n|                                                                                                                                          |                                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n|[fadbade](https://github.com/sagemath/sagetrac-mirror/commit/fadbadef8a30968f7fb50ab43c84eed48e630085)|`Merge branch 'u/tmonteil/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|\n|[66ec40e](https://github.com/sagemath/sagetrac-mirror/commit/66ec40edd4ac85ab46852a7d79b9f1ea68b4e17f)|`codestyle`|\n|[35cab30](https://github.com/sagemath/sagetrac-mirror/commit/35cab30d9976d9d58d45e3f648747a8ddeb25fd9)|`Merge branch 'u/chapoton/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|\n|[0113b72](https://github.com/sagemath/sagetrac-mirror/commit/0113b72725babbf822e7be0831c8281db4253a57)|`code style again`|\n|[6c08ce1](https://github.com/sagemath/sagetrac-mirror/commit/6c08ce185d4a44e89cf8d2804f0be658a8e95dee)|`remove blank except in GIAC call`|",
    "created_at": "2021-10-29T13:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653650",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'></a>
I hope that makes any sense:

- Cleaned up the syntax.
- `pari_unlock` shouldn't haven been called like that, because we are in `sig_on ... sig_off` and one should not call python functions in that case: https://cysignals.readthedocs.io/en/latest/interrupt.html.
- `_wrap_gen(result)` doesn't belong in the `try ... except` block, because it has its own error handling (and if it was to raise an error, we would slip into the except block calling `sig_off` again.
- Use `finally` to call `sig_off` before exit.
- Apparently `giac` raises `RuntimeError` in case something goes wrong. So I used that.
 
---
New commits:
|                                                                                                                                          |                                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
|[fadbade](https://github.com/sagemath/sagetrac-mirror/commit/fadbadef8a30968f7fb50ab43c84eed48e630085)|`Merge branch 'u/tmonteil/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|
|[66ec40e](https://github.com/sagemath/sagetrac-mirror/commit/66ec40edd4ac85ab46852a7d79b9f1ea68b4e17f)|`codestyle`|
|[35cab30](https://github.com/sagemath/sagetrac-mirror/commit/35cab30d9976d9d58d45e3f648747a8ddeb25fd9)|`Merge branch 'u/chapoton/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|
|[0113b72](https://github.com/sagemath/sagetrac-mirror/commit/0113b72725babbf822e7be0831c8281db4253a57)|`code style again`|
|[6c08ce1](https://github.com/sagemath/sagetrac-mirror/commit/6c08ce185d4a44e89cf8d2804f0be658a8e95dee)|`remove blank except in GIAC call`|



---

archive/issue_comments_653651.json:
```json
{
    "body": "Changing commit from \"be872c16d193602a548c98b1b18deb24dc2e0d37\" to \"6c08ce185d4a44e89cf8d2804f0be658a8e95dee\"",
    "created_at": "2021-10-29T13:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653651",
    "user": "https://github.com/kliem"
}
```

Changing commit from "be872c16d193602a548c98b1b18deb24dc2e0d37" to "6c08ce185d4a44e89cf8d2804f0be658a8e95dee"



---

archive/issue_comments_653652.json:
```json
{
    "body": "Changing branch from \"u/chapoton/32788\" to \"u/gh-kliem/32788\"",
    "created_at": "2021-10-29T13:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653652",
    "user": "https://github.com/kliem"
}
```

Changing branch from "u/chapoton/32788" to "u/gh-kliem/32788"



---

archive/issue_comments_653653.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[04a1f01](https://github.com/sagemath/sagetrac-mirror/commit/04a1f01de963dbc6a7c8f67bcbcfadbf1cd9a9c7)|`fix distinction between two calls`|\n|[9905930](https://github.com/sagemath/sagetrac-mirror/commit/9905930022910ded1dbd483896a4a171968eded1)|`remove code duplication`|",
    "created_at": "2021-10-29T20:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[04a1f01](https://github.com/sagemath/sagetrac-mirror/commit/04a1f01de963dbc6a7c8f67bcbcfadbf1cd9a9c7)|`fix distinction between two calls`|
|[9905930](https://github.com/sagemath/sagetrac-mirror/commit/9905930022910ded1dbd483896a4a171968eded1)|`remove code duplication`|



---

archive/issue_comments_653654.json:
```json
{
    "body": "Changing commit from \"6c08ce185d4a44e89cf8d2804f0be658a8e95dee\" to \"9905930022910ded1dbd483896a4a171968eded1\"",
    "created_at": "2021-10-29T20:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6c08ce185d4a44e89cf8d2804f0be658a8e95dee" to "9905930022910ded1dbd483896a4a171968eded1"



---

archive/issue_comments_653655.json:
```json
{
    "body": "<a id='comment:24'></a>\nbot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?",
    "created_at": "2021-10-30T06:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653655",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?



---

archive/issue_comments_653656.json:
```json
{
    "body": "<a id='comment:25'></a>\none should look more into the case of `src/sage/interfaces/polymake.py`",
    "created_at": "2021-10-30T06:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653656",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
one should look more into the case of `src/sage/interfaces/polymake.py`



---

archive/issue_comments_653657.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [chapoton](#comment%3A24):\n> bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?\n\n\nSure, I only touched the `__call__` function that made trouble here. And I didn't feel like we should keep two copies of the same function, if we modify it anyway. I thought it was entirely the same, but there is a tiny difference, which should be more apparent with the current version. I don't think we should work further on this then necessary.",
    "created_at": "2021-10-30T08:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653657",
    "user": "https://github.com/kliem"
}
```

<a id='comment:26'></a>
Replying to [chapoton](#comment%3A24):
> bot is morally green, linter is green. Maybe we can stop here and keep further care for giac for another ticket ?


Sure, I only touched the `__call__` function that made trouble here. And I didn't feel like we should keep two copies of the same function, if we modify it anyway. I thought it was entirely the same, but there is a tiny difference, which should be more apparent with the current version. I don't think we should work further on this then necessary.



---

archive/issue_comments_653658.json:
```json
{
    "body": "Changing branch from \"u/gh-kliem/32788\" to \"public/ticket/32788\"",
    "created_at": "2021-10-30T09:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653658",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/gh-kliem/32788" to "public/ticket/32788"



---

archive/issue_comments_653659.json:
```json
{
    "body": "<a id='comment:27'></a>\nnew branch on top of u/gh-kliem/32788, where I removed a try/except in singular interface\n\n---\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[9368c2d](https://github.com/sagemath/sagetrac-mirror/commit/9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|",
    "created_at": "2021-10-30T09:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653659",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
new branch on top of u/gh-kliem/32788, where I removed a try/except in singular interface

---
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[9368c2d](https://github.com/sagemath/sagetrac-mirror/commit/9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|



---

archive/issue_comments_653660.json:
```json
{
    "body": "Changing commit from \"9905930022910ded1dbd483896a4a171968eded1\" to \"9368c2dd7719fcf25e81e78b0b081039bc73f84c\"",
    "created_at": "2021-10-30T09:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653660",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "9905930022910ded1dbd483896a4a171968eded1" to "9368c2dd7719fcf25e81e78b0b081039bc73f84c"



---

archive/issue_comments_653661.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [chapoton](#comment%3A27):\n> |                                                                                                                                          |                                             |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n> |[9368c2d](https://github.com/sagemath/sagetrac-mirror/commit/9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|\n\n\n\n+1, this try/except was too wide.",
    "created_at": "2021-10-30T09:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653661",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:28'></a>
Replying to [chapoton](#comment%3A27):
> |                                                                                                                                          |                                             |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
> |[9368c2d](https://github.com/sagemath/sagetrac-mirror/commit/9368c2dd7719fcf25e81e78b0b081039bc73f84c)|`remove one try/except in singular interface`|



+1, this try/except was too wide.



---

archive/issue_comments_653662.json:
```json
{
    "body": "<a id='comment:29'></a>\nbot is morally green. Ready to go ?",
    "created_at": "2021-10-30T11:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653662",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
bot is morally green. Ready to go ?



---

archive/issue_comments_653663.json:
```json
{
    "body": "Changing commit from \"9368c2dd7719fcf25e81e78b0b081039bc73f84c\" to \"a903f72bbcaaf6430947e51dc413caa3ed9fea62\"",
    "created_at": "2021-10-30T12:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9368c2dd7719fcf25e81e78b0b081039bc73f84c" to "a903f72bbcaaf6430947e51dc413caa3ed9fea62"



---

archive/issue_comments_653664.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[a903f72](https://github.com/sagemath/sagetrac-mirror/commit/a903f72bbcaaf6430947e51dc413caa3ed9fea62)|`#32788 : ensure bare except: statements will not reappear`|",
    "created_at": "2021-10-30T12:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[a903f72](https://github.com/sagemath/sagetrac-mirror/commit/a903f72bbcaaf6430947e51dc413caa3ed9fea62)|`#32788 : ensure bare except: statements will not reappear`|



---

archive/issue_comments_653665.json:
```json
{
    "body": "<a id='comment:31'></a>\nI added E722 to `src/tox.ini` so that the second part of the ticked get fixed too (using tox as `@`chapoton suggested). Regarding [comment 7](#comment%3A7), will the `pyx` be tested as well ? Otherwise, how to deal with them ?",
    "created_at": "2021-10-30T12:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653665",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:31'></a>
I added E722 to `src/tox.ini` so that the second part of the ticked get fixed too (using tox as `@`chapoton suggested). Regarding [comment 7](#comment%3A7), will the `pyx` be tested as well ? Otherwise, how to deal with them ?



---

archive/issue_comments_653666.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton, Jonathan Kliem, Thierry Monteil\"",
    "created_at": "2021-10-30T20:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653666",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing author from "" to "Frédéric Chapoton, Jonathan Kliem, Thierry Monteil"



---

archive/issue_comments_653667.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-30T20:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653667",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_653668.json:
```json
{
    "body": "<a id='comment:33'></a>\nLes fichiers pyx ne sont pas regard\u00e9s par tox, il me semble. Tu peux ajouter un plugin au patchbot qui ne regarde que les fichiers pyx. Un m\u00e9canisme pour ca est en place dans le patchbot.",
    "created_at": "2021-10-31T06:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653668",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
Les fichiers pyx ne sont pas regardés par tox, il me semble. Tu peux ajouter un plugin au patchbot qui ne regarde que les fichiers pyx. Un mécanisme pour ca est en place dans le patchbot.



---

archive/issue_comments_653669.json:
```json
{
    "body": "<a id='comment:34'></a>\nthere seems to be something broken in polyhedron..",
    "created_at": "2021-10-31T16:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653669",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
there seems to be something broken in polyhedron..



---

archive/issue_comments_653670.json:
```json
{
    "body": "<a id='comment:35'></a>\nBut not by our current ticket, this also appears in other reports of the same bot.",
    "created_at": "2021-10-31T17:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653670",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'></a>
But not by our current ticket, this also appears in other reports of the same bot.



---

archive/issue_comments_653671.json:
```json
{
    "body": "<a id='comment:36'></a>\nIndeed, I stopped the patchbot and will see if i can restart it cleanly.",
    "created_at": "2021-10-31T18:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653671",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:36'></a>
Indeed, I stopped the patchbot and will see if i can restart it cleanly.



---

archive/issue_comments_653672.json:
```json
{
    "body": "<a id='comment:37'></a>\nWell, I would surely be interested in that bug. Looks like it's my code causing the problems...",
    "created_at": "2021-10-31T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653672",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>
Well, I would surely be interested in that bug. Looks like it's my code causing the problems...



---

archive/issue_comments_653673.json:
```json
{
    "body": "<a id='comment:38'></a>\nI made a distclean, but the logs are still available on the tickets, let us see if it reappears.",
    "created_at": "2021-10-31T18:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653673",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:38'></a>
I made a distclean, but the logs are still available on the tickets, let us see if it reappears.



---

archive/issue_comments_653674.json:
```json
{
    "body": "<a id='comment:39'></a>\nRegarding `src/sage/geometry/polyhedron/base.py` there are serious doctesting issues in 32bit architectures as well.",
    "created_at": "2021-10-31T20:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653674",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:39'></a>
Regarding `src/sage/geometry/polyhedron/base.py` there are serious doctesting issues in 32bit architectures as well.



---

archive/issue_comments_653675.json:
```json
{
    "body": "<a id='comment:40'></a>\nthere is at least one green patchbot. Good to go ?",
    "created_at": "2021-11-07T10:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653675",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:40'></a>
there is at least one green patchbot. Good to go ?



---

archive/issue_comments_653676.json:
```json
{
    "body": "<a id='comment:41'></a>\n\n```\n./sage -tp --optional=sage,polymake,jupymake src/sage/interfaces/polymake.py src/sage/geometry/polyhedron/\n\n\n\nsage -t --random-seed=193726426221037022828737471270892163828 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 1534, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    PP.F_VECTOR.sage()      # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeElement._sage_[11]>\", line 1, in <module>\n        PP.F_VECTOR.sage()      # optional - polymake\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py\", line 1106, in sage\n        return self._sage_(*args, **kwds)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py\", line 1587, in _sage_\n        return vector(base_ring, [str_to_base_ring(s)\n    UnboundLocalError: local variable 'base_ring' referenced before assignment\n\nFile \"src/sage/interfaces/polymake.py\", line 1551, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    polymake.icosahedron().sage() # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeElement._sage_[16]>\", line 1, in <module>\n        polymake.icosahedron().sage() # optional - polymake\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py\", line 1106, in sage\n        return self._sage_(*args, **kwds)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py\", line 1569, in _sage_\n        d = int(r[i + 1: i + i1])\n    ValueError: invalid literal for int() with base 10: 'aticExtension<Rational>>[SAGE2]'\n```",
    "created_at": "2021-11-08T02:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653676",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>

```
./sage -tp --optional=sage,polymake,jupymake src/sage/interfaces/polymake.py src/sage/geometry/polyhedron/



sage -t --random-seed=193726426221037022828737471270892163828 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 1534, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    PP.F_VECTOR.sage()      # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeElement._sage_[11]>", line 1, in <module>
        PP.F_VECTOR.sage()      # optional - polymake
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py", line 1106, in sage
        return self._sage_(*args, **kwds)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py", line 1587, in _sage_
        return vector(base_ring, [str_to_base_ring(s)
    UnboundLocalError: local variable 'base_ring' referenced before assignment

File "src/sage/interfaces/polymake.py", line 1551, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    polymake.icosahedron().sage() # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeElement._sage_[16]>", line 1, in <module>
        polymake.icosahedron().sage() # optional - polymake
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/interface.py", line 1106, in sage
        return self._sage_(*args, **kwds)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/sage/interfaces/polymake.py", line 1569, in _sage_
        d = int(r[i + 1: i + i1])
    ValueError: invalid literal for int() with base 10: 'aticExtension<Rational>>[SAGE2]'
```



---

archive/issue_comments_653677.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-08T02:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653677",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_653678.json:
```json
{
    "body": "<a id='comment:42'></a>\nI propose, as a strategy, to undo the changes in polymake interface and keep them for another ticket. This would also mean not to activate E722 here, but later.\n\nOtherwise, somebody should stand up and fix now the polymake issues. I will not.",
    "created_at": "2021-11-09T18:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653678",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:42'></a>
I propose, as a strategy, to undo the changes in polymake interface and keep them for another ticket. This would also mean not to activate E722 here, but later.

Otherwise, somebody should stand up and fix now the polymake issues. I will not.



---

archive/issue_comments_653679.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[30b8dca](https://github.com/sagemath/sagetrac-mirror/commit/30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|\n|[40b8827](https://github.com/sagemath/sagetrac-mirror/commit/40b8827227f50e9df6279af6428456458a97e02e)|`two fixes in polymake type conversion`|",
    "created_at": "2021-11-10T19:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[30b8dca](https://github.com/sagemath/sagetrac-mirror/commit/30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|
|[40b8827](https://github.com/sagemath/sagetrac-mirror/commit/40b8827227f50e9df6279af6428456458a97e02e)|`two fixes in polymake type conversion`|



---

archive/issue_comments_653680.json:
```json
{
    "body": "Changing commit from \"a903f72bbcaaf6430947e51dc413caa3ed9fea62\" to \"40b8827227f50e9df6279af6428456458a97e02e\"",
    "created_at": "2021-11-10T19:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a903f72bbcaaf6430947e51dc413caa3ed9fea62" to "40b8827227f50e9df6279af6428456458a97e02e"



---

archive/issue_comments_653681.json:
```json
{
    "body": "<a id='comment:44'></a>\nThere first change was necessary, because it changed `polymake` to `polymake_expect`, which does not work for me at all.\n\nI still get one failure and I'm really confused, that I get this and you don't:\n\n```\nsage -t --random-seed=226050575114945871045540898771575845983 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 1544, in sage.interfaces.polymake.PolymakeElement._sage_\nFailed example:\n    _.parent()              # optional - polymake\nExpected:\n    Full MatrixSpace of 2 by 2 dense matrices over Integer Ring\nGot:\n    Full MatrixSpace of 2 by 2 dense matrices over Rational Field\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.interfaces.polymake.PolymakeElement._sage_\n    [282 tests, 1 failure, 3.17 s]\n```",
    "created_at": "2021-11-10T19:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653681",
    "user": "https://github.com/kliem"
}
```

<a id='comment:44'></a>
There first change was necessary, because it changed `polymake` to `polymake_expect`, which does not work for me at all.

I still get one failure and I'm really confused, that I get this and you don't:

```
sage -t --random-seed=226050575114945871045540898771575845983 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 1544, in sage.interfaces.polymake.PolymakeElement._sage_
Failed example:
    _.parent()              # optional - polymake
Expected:
    Full MatrixSpace of 2 by 2 dense matrices over Integer Ring
Got:
    Full MatrixSpace of 2 by 2 dense matrices over Rational Field
**********************************************************************
1 item had failures:
   1 of  18 in sage.interfaces.polymake.PolymakeElement._sage_
    [282 tests, 1 failure, 3.17 s]
```



---

archive/issue_comments_653682.json:
```json
{
    "body": "<a id='comment:45'></a>\nThe changes to `PolymakeElement` look nontrivial, so I would agree with the suggestion to defer them to a separate ticket.",
    "created_at": "2021-11-10T20:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653682",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
The changes to `PolymakeElement` look nontrivial, so I would agree with the suggestion to defer them to a separate ticket.



---

archive/issue_comments_653683.json:
```json
{
    "body": "<a id='comment:46'></a>\n... or just try the minimal change that changes `except:` to `except Exception:`",
    "created_at": "2021-11-10T20:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653683",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
... or just try the minimal change that changes `except:` to `except Exception:`



---

archive/issue_comments_653684.json:
```json
{
    "body": "Changing branch from \"public/ticket/32788\" to \"u/chapoton/except_fix_branch\"",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653684",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "public/ticket/32788" to "u/chapoton/except_fix_branch"



---

archive/issue_comments_653685.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653685",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_653686.json:
```json
{
    "body": "<a id='comment:47'></a>\nI have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. \n\n---\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[1afd3a3](https://github.com/sagemath/sagetrac-mirror/commit/1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2)|`fix all E722 and activate the check`|",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653686",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>
I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. 

---
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[1afd3a3](https://github.com/sagemath/sagetrac-mirror/commit/1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2)|`fix all E722 and activate the check`|



---

archive/issue_comments_653687.json:
```json
{
    "body": "Changing commit from \"40b8827227f50e9df6279af6428456458a97e02e\" to \"1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2\"",
    "created_at": "2021-11-14T09:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653687",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "40b8827227f50e9df6279af6428456458a97e02e" to "1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2"



---

archive/issue_comments_653688.json:
```json
{
    "body": "Changing commit from \"1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2\" to \"de356d6ad561427653969c5b1fd147af7eeb7ccc\"",
    "created_at": "2021-11-14T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1afd3a3cd62b550844d2fcd6a5412f0ef5b987c2" to "de356d6ad561427653969c5b1fd147af7eeb7ccc"



---

archive/issue_comments_653689.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[de356d6](https://github.com/sagemath/sagetrac-mirror/commit/de356d6ad561427653969c5b1fd147af7eeb7ccc)|`forgotten one`|",
    "created_at": "2021-11-14T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[de356d6](https://github.com/sagemath/sagetrac-mirror/commit/de356d6ad561427653969c5b1fd147af7eeb7ccc)|`forgotten one`|



---

archive/issue_comments_653690.json:
```json
{
    "body": "<a id='comment:49'></a>\nPolymake works OK now with this branch, thanks.",
    "created_at": "2021-11-14T18:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653690",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
Polymake works OK now with this branch, thanks.



---

archive/issue_comments_653691.json:
```json
{
    "body": "<a id='comment:50'></a>\ngreen bot, can we move on here, please ?",
    "created_at": "2021-11-17T16:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653691",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:50'></a>
green bot, can we move on here, please ?



---

archive/issue_comments_653692.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [git](#comment%3A43):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                         |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n> |[30b8dca](https://github.com/sagemath/sagetrac-mirror/commit/30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|\n\n\nCan we please keep this commit.\nPexpect does not work in my case and importing `polymake_expect as polymake` is not a good idea in that case.",
    "created_at": "2021-11-17T16:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653692",
    "user": "https://github.com/kliem"
}
```

<a id='comment:51'></a>
Replying to [git](#comment%3A43):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                         |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
> |[30b8dca](https://github.com/sagemath/sagetrac-mirror/commit/30b8dcaa7d84615657d0dd00290718e293276d89)|`mark polymake_expect import as optional`|


Can we please keep this commit.
Pexpect does not work in my case and importing `polymake_expect as polymake` is not a good idea in that case.



---

archive/issue_comments_653693.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[2ec7374](https://github.com/sagemath/sagetrac-mirror/commit/2ec7374092ee2b537ff9b0657451c03786cdfa2d)|`add one tag in polymake interface`|",
    "created_at": "2021-11-17T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[2ec7374](https://github.com/sagemath/sagetrac-mirror/commit/2ec7374092ee2b537ff9b0657451c03786cdfa2d)|`add one tag in polymake interface`|



---

archive/issue_comments_653694.json:
```json
{
    "body": "Changing commit from \"de356d6ad561427653969c5b1fd147af7eeb7ccc\" to \"2ec7374092ee2b537ff9b0657451c03786cdfa2d\"",
    "created_at": "2021-11-17T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "de356d6ad561427653969c5b1fd147af7eeb7ccc" to "2ec7374092ee2b537ff9b0657451c03786cdfa2d"



---

archive/issue_comments_653695.json:
```json
{
    "body": "<a id='comment:53'></a>\nok, done",
    "created_at": "2021-11-17T18:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653695",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:53'></a>
ok, done



---

archive/issue_comments_653696.json:
```json
{
    "body": "<a id='comment:54'></a>\nI think the comment should move before the code and not after:\n\n```diff\n-                rat_points.add(X(point)) # checks if this point lies on X or not\n-            except:\n+                rat_points.add(X(point))\n+                # checks if this point lies on X or not\n```\n\nSo instead we should have something as\n\n```\n                # checks if this point lies on X or not\n                rat_points.add(X(point))\n```",
    "created_at": "2021-11-17T19:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653696",
    "user": "https://github.com/kliem"
}
```

<a id='comment:54'></a>
I think the comment should move before the code and not after:

```diff
-                rat_points.add(X(point)) # checks if this point lies on X or not
-            except:
+                rat_points.add(X(point))
+                # checks if this point lies on X or not
```

So instead we should have something as

```
                # checks if this point lies on X or not
                rat_points.add(X(point))
```



---

archive/issue_comments_653697.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2021-11-17T19:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653697",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_653698.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [chapoton](#comment%3A47):\n> I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. \n\n\nI do not see the benefit of such squashing, but i see the drawbacks: we get a mixed bomb of changes without understanding which change is done for which reason. For example, i split the changes on `giac.pyx` as follows in order to ease reviewing:\n\n```\n\u200bbcdb620\t#32788 : fix intentations for libs/giac/giac.pyx\n\u200bda3e437\t#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx\n```\n\nSimilarly, it is important to have separate commits when you rename a file and modify it.",
    "created_at": "2021-11-17T22:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653698",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:56'></a>
Replying to [chapoton](#comment%3A47):
> I have made a branch with only a minimal change to polymake file. And squashed all the commits into one single commit. 


I do not see the benefit of such squashing, but i see the drawbacks: we get a mixed bomb of changes without understanding which change is done for which reason. For example, i split the changes on `giac.pyx` as follows in order to ease reviewing:

```
​bcdb620	#32788 : fix intentations for libs/giac/giac.pyx
​da3e437	#32788 : remove useless try/except statements in src/sage/libs/giac/giac.pyx
```

Similarly, it is important to have separate commits when you rename a file and modify it.



---

archive/issue_comments_653699.json:
```json
{
    "body": "<a id='comment:57'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[ec236ec](https://github.com/sagemath/sagetrac-mirror/commit/ec236ec43466e74d29670afb25ce2612bd3e9bb0)|`comment before`|",
    "created_at": "2021-11-18T10:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[ec236ec](https://github.com/sagemath/sagetrac-mirror/commit/ec236ec43466e74d29670afb25ce2612bd3e9bb0)|`comment before`|



---

archive/issue_comments_653700.json:
```json
{
    "body": "Changing commit from \"2ec7374092ee2b537ff9b0657451c03786cdfa2d\" to \"ec236ec43466e74d29670afb25ce2612bd3e9bb0\"",
    "created_at": "2021-11-18T10:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2ec7374092ee2b537ff9b0657451c03786cdfa2d" to "ec236ec43466e74d29670afb25ce2612bd3e9bb0"



---

archive/issue_comments_653701.json:
```json
{
    "body": "<a id='comment:58'></a>\ncomment:54 is now fixed\n\nconcerning squashing, I thought it was a good idea to simplify the commit history. I agree this was maybe not a so good idea. If you think this matters enough to spend your time on that, please provide a better branch",
    "created_at": "2021-11-18T10:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653701",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:58'></a>
comment:54 is now fixed

concerning squashing, I thought it was a good idea to simplify the commit history. I agree this was maybe not a so good idea. If you think this matters enough to spend your time on that, please provide a better branch



---

archive/issue_comments_653702.json:
```json
{
    "body": "<a id='comment:59'></a>\ngreen bot again",
    "created_at": "2021-11-18T12:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653702",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:59'></a>
green bot again



---

archive/issue_comments_653703.json:
```json
{
    "body": "<a id='comment:60'></a>\ncan we please move on here ?",
    "created_at": "2021-11-21T19:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653703",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:60'></a>
can we please move on here ?



---

archive/issue_comments_653704.json:
```json
{
    "body": "Changing branch from \"u/chapoton/except_fix_branch\" to \"u/tmonteil/except_fix_branch\"",
    "created_at": "2021-11-29T19:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653704",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing branch from "u/chapoton/except_fix_branch" to "u/tmonteil/except_fix_branch"



---

archive/issue_comments_653705.json:
```json
{
    "body": "Changing commit from \"ec236ec43466e74d29670afb25ce2612bd3e9bb0\" to \"9522357774ad8fb36eb7c997997b5c30f7af3ea5\"",
    "created_at": "2021-11-29T19:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653705",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing commit from "ec236ec43466e74d29670afb25ce2612bd3e9bb0" to "9522357774ad8fb36eb7c997997b5c30f7af3ea5"



---

archive/issue_comments_653706.json:
```json
{
    "body": "<a id='comment:62'></a>\nI cherry-picked the relevant commits and merged with `9.5.beta6` so that `git diff trac/u/chapoton/except_fix_branch trac/u/tmonteil/except_fix_branch` leads to:\n\n\n```diff\n--- a/src/sage/interfaces/polymake.py\n+++ b/src/sage/interfaces/polymake.py\n@@ -364,7 +364,7 @@ class PolymakeAbstract(ExtraTabCompletion, Interface):\n             try:\n                 x = RDF(x)\n                 return '{}'.format(x)\n-            except Exception:\n+            except (TypeError, ValueError):\n                 pass\n \n             raise NotImplementedError\n```\n\nI am not sure if i have to revert that change.\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[be872c1](https://github.com/sagemath/sagetrac-mirror/commit/be872c16d193602a548c98b1b18deb24dc2e0d37)|`some fixes in giac, schemes, geometry`|\n|[35cab30](https://github.com/sagemath/sagetrac-mirror/commit/35cab30d9976d9d58d45e3f648747a8ddeb25fd9)|`Merge branch 'u/chapoton/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|\n|[0113b72](https://github.com/sagemath/sagetrac-mirror/commit/0113b72725babbf822e7be0831c8281db4253a57)|`code style again`|\n|[6c08ce1](https://github.com/sagemath/sagetrac-mirror/commit/6c08ce185d4a44e89cf8d2804f0be658a8e95dee)|`remove blank except in GIAC call`|\n|[04a1f01](https://github.com/sagemath/sagetrac-mirror/commit/04a1f01de963dbc6a7c8f67bcbcfadbf1cd9a9c7)|`fix distinction between two calls`|\n|[9905930](https://github.com/sagemath/sagetrac-mirror/commit/9905930022910ded1dbd483896a4a171968eded1)|`remove code duplication`|\n|[d3df701](https://github.com/sagemath/sagetrac-mirror/commit/d3df701affc8d1b24775fca5d1ae9bb8d9135e1a)|`#32788 : ensure bare except: statements will not reappear`|\n|[e92b905](https://github.com/sagemath/sagetrac-mirror/commit/e92b905a359977dce92a0b8118d26fd41877ac48)|`mark polymake_expect import as optional`|\n|[f463e49](https://github.com/sagemath/sagetrac-mirror/commit/f463e49b287475f9751e16d8d241fc030b606953)|`comment before`|\n|[9522357](https://github.com/sagemath/sagetrac-mirror/commit/9522357774ad8fb36eb7c997997b5c30f7af3ea5)|`Merge branch 'develop.9.5.beta6' into HEAD`|",
    "created_at": "2021-11-29T19:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653706",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:62'></a>
I cherry-picked the relevant commits and merged with `9.5.beta6` so that `git diff trac/u/chapoton/except_fix_branch trac/u/tmonteil/except_fix_branch` leads to:


```diff
--- a/src/sage/interfaces/polymake.py
+++ b/src/sage/interfaces/polymake.py
@@ -364,7 +364,7 @@ class PolymakeAbstract(ExtraTabCompletion, Interface):
             try:
                 x = RDF(x)
                 return '{}'.format(x)
-            except Exception:
+            except (TypeError, ValueError):
                 pass
 
             raise NotImplementedError
```

I am not sure if i have to revert that change.

---
Last 10 new commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[be872c1](https://github.com/sagemath/sagetrac-mirror/commit/be872c16d193602a548c98b1b18deb24dc2e0d37)|`some fixes in giac, schemes, geometry`|
|[35cab30](https://github.com/sagemath/sagetrac-mirror/commit/35cab30d9976d9d58d45e3f648747a8ddeb25fd9)|`Merge branch 'u/chapoton/32788' of git://trac.sagemath.org/sage into u/gh-kliem/32788`|
|[0113b72](https://github.com/sagemath/sagetrac-mirror/commit/0113b72725babbf822e7be0831c8281db4253a57)|`code style again`|
|[6c08ce1](https://github.com/sagemath/sagetrac-mirror/commit/6c08ce185d4a44e89cf8d2804f0be658a8e95dee)|`remove blank except in GIAC call`|
|[04a1f01](https://github.com/sagemath/sagetrac-mirror/commit/04a1f01de963dbc6a7c8f67bcbcfadbf1cd9a9c7)|`fix distinction between two calls`|
|[9905930](https://github.com/sagemath/sagetrac-mirror/commit/9905930022910ded1dbd483896a4a171968eded1)|`remove code duplication`|
|[d3df701](https://github.com/sagemath/sagetrac-mirror/commit/d3df701affc8d1b24775fca5d1ae9bb8d9135e1a)|`#32788 : ensure bare except: statements will not reappear`|
|[e92b905](https://github.com/sagemath/sagetrac-mirror/commit/e92b905a359977dce92a0b8118d26fd41877ac48)|`mark polymake_expect import as optional`|
|[f463e49](https://github.com/sagemath/sagetrac-mirror/commit/f463e49b287475f9751e16d8d241fc030b606953)|`comment before`|
|[9522357](https://github.com/sagemath/sagetrac-mirror/commit/9522357774ad8fb36eb7c997997b5c30f7af3ea5)|`Merge branch 'develop.9.5.beta6' into HEAD`|



---

archive/issue_events_097572.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32788#event-97572"
}
```



---

archive/issue_comments_653707.json:
```json
{
    "body": "<a id='comment:63'></a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653707",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_653708.json:
```json
{
    "body": "<a id='comment:64'></a>\nred branch => needs work",
    "created_at": "2021-12-28T16:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653708",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:64'></a>
red branch => needs work



---

archive/issue_comments_653709.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-28T16:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653709",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_653710.json:
```json
{
    "body": "Changing branch from \"u/tmonteil/except_fix_branch\" to \"public/except_fix_branch\"",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653710",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/tmonteil/except_fix_branch" to "public/except_fix_branch"



---

archive/issue_comments_653711.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653711",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_653712.json:
```json
{
    "body": "Changing commit from \"9522357774ad8fb36eb7c997997b5c30f7af3ea5\" to \"db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa\"",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653712",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "9522357774ad8fb36eb7c997997b5c30f7af3ea5" to "db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa"



---

archive/issue_comments_653713.json:
```json
{
    "body": "<a id='comment:65'></a>\nrebased on 9.5.rc1\n\n---\nNew commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[58865ce](https://github.com/sagemath/sagetrac-mirror/commit/58865ceee554f2cf263bc541fd003ba40b72b274)|`various lgtm-suggested details`|\n|[db57c4f](https://github.com/sagemath/sagetrac-mirror/commit/db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa)|`Merge branch 'u/tmonteil/except_fix_branch' in 9.5.rc1`|",
    "created_at": "2022-01-14T19:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653713",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:65'></a>
rebased on 9.5.rc1

---
New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[58865ce](https://github.com/sagemath/sagetrac-mirror/commit/58865ceee554f2cf263bc541fd003ba40b72b274)|`various lgtm-suggested details`|
|[db57c4f](https://github.com/sagemath/sagetrac-mirror/commit/db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa)|`Merge branch 'u/tmonteil/except_fix_branch' in 9.5.rc1`|



---

archive/issue_comments_653714.json:
```json
{
    "body": "Changing commit from \"db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa\" to \"de4faf6146521e81991677edb6743449343d8f96\"",
    "created_at": "2022-01-14T19:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db57c4f7b5be2590a8cfa1e4878b4b88525f6aaa" to "de4faf6146521e81991677edb6743449343d8f96"



---

archive/issue_comments_653715.json:
```json
{
    "body": "<a id='comment:66'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[de4faf6](https://github.com/sagemath/sagetrac-mirror/commit/de4faf6146521e81991677edb6743449343d8f96)|`Merge branch 'u/tmonteil/except_fix_branch' in 9.5.rc1`|",
    "created_at": "2022-01-14T19:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[de4faf6](https://github.com/sagemath/sagetrac-mirror/commit/de4faf6146521e81991677edb6743449343d8f96)|`Merge branch 'u/tmonteil/except_fix_branch' in 9.5.rc1`|



---

archive/issue_comments_653716.json:
```json
{
    "body": "<a id='comment:67'></a>\nnow correctly rebased, needs test by somebody having polymake",
    "created_at": "2022-01-14T19:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653716",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:67'></a>
now correctly rebased, needs test by somebody having polymake



---

archive/issue_comments_653717.json:
```json
{
    "body": "<a id='comment:68'></a>\nThere are two polymake test failures (see below), but they are not related to this ticket, so are best dealt with in another ticket.\n\nI am ready to set this ticket to positive, if someone could confirm that the new pycodestyle check still passes with 9.5 merged. Unfortunately, I have difficulties in running tox on my machine.\n\nBy the way, this ticket will also fix a random [doctest failure](https://patchbot.sagemath.org/log/33217/Linux/29~20.04.1-Ubuntu_SMP_Fri_Jan_14_00:32:30_UTC_2022/x86_64/5.13.0-27-generic/r640/2022-01-26%2017:49:49) in `coding/linear_code.py` which is due to an `AlarmInterrupt` being swallowed by a bare except.\n\n\n\n---\n\n```\nsage -t --long --warn-long 69.2 --random-seed=17721019333867817533235853689613643341 src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst\", line 650, in doc.en.thematic_tutorials.geometry.polyhedra_tutorial\nFailed example:\n    Polyhedron(vertices=V, backend='polymake')               # optional - polymake\nExpected:\n    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices\nGot:\n    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 20 v\nertices\n\nsage -t --long --warn-long 69.2 --random-seed=201256750698610760769760302766889916051 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 2189, in sage.interfaces.polymake.PolymakeExpect._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake_expect\nExpected:\n    32768\nGot:\n    Can't locate object method \"description\" via package \"32768\" (perhaps you forgot to load \"32768\"?) at input line 1.\n```",
    "created_at": "2022-02-01T19:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653717",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:68'></a>
There are two polymake test failures (see below), but they are not related to this ticket, so are best dealt with in another ticket.

I am ready to set this ticket to positive, if someone could confirm that the new pycodestyle check still passes with 9.5 merged. Unfortunately, I have difficulties in running tox on my machine.

By the way, this ticket will also fix a random [doctest failure](https://patchbot.sagemath.org/log/33217/Linux/29~20.04.1-Ubuntu_SMP_Fri_Jan_14_00:32:30_UTC_2022/x86_64/5.13.0-27-generic/r640/2022-01-26%2017:49:49) in `coding/linear_code.py` which is due to an `AlarmInterrupt` being swallowed by a bare except.



---

```
sage -t --long --warn-long 69.2 --random-seed=17721019333867817533235853689613643341 src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/polyhedra_tutorial.rst", line 650, in doc.en.thematic_tutorials.geometry.polyhedra_tutorial
Failed example:
    Polyhedron(vertices=V, backend='polymake')               # optional - polymake
Expected:
    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices
Got:
    A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 20 v
ertices

sage -t --long --warn-long 69.2 --random-seed=201256750698610760769760302766889916051 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 2189, in sage.interfaces.polymake.PolymakeExpect._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake_expect
Expected:
    32768
Got:
    Can't locate object method "description" via package "32768" (perhaps you forgot to load "32768"?) at input line 1.
```



---

archive/issue_comments_653718.json:
```json
{
    "body": "Changing reviewer from \"Jonathan Kliem\" to \"Jonathan Kliem, Markus Wageringel\"",
    "created_at": "2022-02-01T19:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653718",
    "user": "https://github.com/mwageringel"
}
```

Changing reviewer from "Jonathan Kliem" to "Jonathan Kliem, Markus Wageringel"



---

archive/issue_comments_653719.json:
```json
{
    "body": "<a id='comment:69'></a>\nNever mind. I have tried it on a different machine and `pycodestyle-minimal` passes, so I think this is good to go.",
    "created_at": "2022-02-01T19:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653719",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:69'></a>
Never mind. I have tried it on a different machine and `pycodestyle-minimal` passes, so I think this is good to go.



---

archive/issue_comments_653720.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-01T19:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653720",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_653721.json:
```json
{
    "body": "<a id='comment:70'></a>\nIn `src/sage/libs/giac/giac.pyx`, docstring\nindentation for `loadgiacgen` seems off.",
    "created_at": "2022-02-01T20:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653721",
    "user": "https://github.com/slel"
}
```

<a id='comment:70'></a>
In `src/sage/libs/giac/giac.pyx`, docstring
indentation for `loadgiacgen` seems off.



---

archive/issue_comments_653722.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [slelievre](#comment%3A70):\n> In `src/sage/libs/giac/giac.pyx`, docstring\n> indentation for `loadgiacgen` seems off.\n\n\nI am happy to review it if anyone wants to change that, but I do not think it is necessary here.",
    "created_at": "2022-02-02T19:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653722",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:71'></a>
Replying to [slelievre](#comment%3A70):
> In `src/sage/libs/giac/giac.pyx`, docstring
> indentation for `loadgiacgen` seems off.


I am happy to review it if anyone wants to change that, but I do not think it is necessary here.



---

archive/issue_events_097573.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:05:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32788#event-97573"
}
```



---

archive/issue_comments_653723.json:
```json
{
    "body": "Changing branch from \"public/except_fix_branch\" to \"de4faf6146521e81991677edb6743449343d8f96\"",
    "created_at": "2022-02-12T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653723",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/except_fix_branch" to "de4faf6146521e81991677edb6743449343d8f96"



---

archive/issue_comments_653724.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-12T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32788#issuecomment-653724",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
