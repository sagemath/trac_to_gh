# Issue 32749: Enable gitpod integration

archive/issues_032512.json:
```json
{
    "assignees": [],
    "body": "[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. \n\nYou can try this out by going to https://gitpod.io/#https://github.com/sagemath/sagetrac-mirror/tree/public/build%2Fgitpod. \n\nIt currently takes a bit more than 1 hour until everything is setup. After this ticket is merged, we can enable the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push to the develop branch would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env in a matter of a few seconds.\n\n\n---\n\nWhile setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.\n- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.\n- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv. This is now  #29285.\n- Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.\n- Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with \n\n```\n;;; Loading \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/../lisp-utils/defsystem.lisp\"\n;;; Loading #P\"/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/lib/ecl-21.2.1/cmp.fas\"\n#P\"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/lisp-utils/defsystem.lisp\"\n> \n(\"../src/\" \"./\" (MAKE::HOME-SUBDIRECTORY \"lisp/systems/\")\n \"/usr/local/lisp/Registry/\")\n> \n;;; Loading \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima.system\"\n\n;  - Compiling defsystem \"maxima\" \n;    - Compiling module \"package\" \n;      - Compiling source file\n;        \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp\"\n;;;\n;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.\n;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n;;;\n;;; End of Pass 1.\n;;; Internal error:\n;;;   ** Error code 1 when executing\n;;; (EXT:RUN-PROGRAM \"gcc-5\" (\"-I.\" \"-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/\" \"-I/home/linuxbrew/.linuxbrew/opt/gmp/include\" \"-I/home/linuxbrew/.linuxbrew/opt/libffi/include\" \"-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include\" \"-D_GNU_SOURCE\" \"-D_FILE_OFFSET_BITS=64\" \"-g\" \"-O2\" \"-fPIC\" \"-D_THREAD_SAFE\" \"-Dlinux\" \"-O2\" \"-c\" \"binary-ecl/maxima-package.c\" \"-o\" \"binary-ecl/maxima-package.o\")):\n;;; exec: No such file or directory\n;      - Binary file binary-ecl/maxima-package.fas is old or does not exist. \n;        Compile (and load) source file /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp instead? y\n;      - Should I bother you if this happens again? y\n;      - Compiling source file\n;        \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp\"\n;;;\n;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.\n;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n;;;\n;;; End of Pass 1.\n;;; Internal error:\n;;;   ** Error code 1 when executing\n;;; (EXT:RUN-PROGRAM \"gcc-5\" (\"-I.\" \"-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/\" \"-I/home/linuxbrew/.linuxbrew/opt/gmp/include\" \"-I/home/linuxbrew/.linuxbrew/opt/libffi/include\" \"-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include\" \"-D_GNU_SOURCE\" \"-D_FILE_OFFSET_BITS=64\" \"-g\" \"-O2\" \"-fPIC\" \"-D_THREAD_SAFE\" \"-Dlinux\" \"-O2\" \"-c\" \"binary-ecl/maxima-package.c\" \"-o\" \"binary-ecl/maxima-package.o\")):\n;;; exec: No such file or directory\n;      - Loading binary file \"binary-ecl/maxima-package.fas\" \nCondition of type: FILE-ERROR\nFilesystem error with pathname #P\"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas\".\n```\nThis should be investigated as part of #29159.\n\nDepends on #33068\nDepends on #30933\n\nCC:  @mkoeppe @saraedum @koffie\n\nBranch/Commit: **[public/build/gitpod](https://github.com/sagemath/sagetrac-mirror/tree/public/build/gitpod) @ [974eb4c](https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109)**\n\nReviewer: **Tobias Diez**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32749_\n\n",
    "closed_at": "2022-01-08T21:27:14Z",
    "created_at": "2021-10-23T21:07:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Enable gitpod integration",
    "type": "issue",
    "updated_at": "2022-01-08T21:27:14Z",
    "url": "https://github.com/sagemath/sage/issues/32749",
    "user": "https://github.com/tobiasdiez"
}
```
[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. 

You can try this out by going to https://gitpod.io/#https://github.com/sagemath/sagetrac-mirror/tree/public/build%2Fgitpod. 

It currently takes a bit more than 1 hour until everything is setup. After this ticket is merged, we can enable the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push to the develop branch would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env in a matter of a few seconds.


---

While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.
- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.
- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv. This is now  #29285.
- Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.
- Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with 

```
;;; Loading "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/../lisp-utils/defsystem.lisp"
;;; Loading #P"/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/lib/ecl-21.2.1/cmp.fas"
#P"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/lisp-utils/defsystem.lisp"
> 
("../src/" "./" (MAKE::HOME-SUBDIRECTORY "lisp/systems/")
 "/usr/local/lisp/Registry/")
> 
;;; Loading "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima.system"

;  - Compiling defsystem "maxima" 
;    - Compiling module "package" 
;      - Compiling source file
;        "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp"
;;;
;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.
;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
;;;
;;; End of Pass 1.
;;; Internal error:
;;;   ** Error code 1 when executing
;;; (EXT:RUN-PROGRAM "gcc-5" ("-I." "-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/" "-I/home/linuxbrew/.linuxbrew/opt/gmp/include" "-I/home/linuxbrew/.linuxbrew/opt/libffi/include" "-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include" "-D_GNU_SOURCE" "-D_FILE_OFFSET_BITS=64" "-g" "-O2" "-fPIC" "-D_THREAD_SAFE" "-Dlinux" "-O2" "-c" "binary-ecl/maxima-package.c" "-o" "binary-ecl/maxima-package.o")):
;;; exec: No such file or directory
;      - Binary file binary-ecl/maxima-package.fas is old or does not exist. 
;        Compile (and load) source file /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp instead? y
;      - Should I bother you if this happens again? y
;      - Compiling source file
;        "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp"
;;;
;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.
;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
;;;
;;; End of Pass 1.
;;; Internal error:
;;;   ** Error code 1 when executing
;;; (EXT:RUN-PROGRAM "gcc-5" ("-I." "-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/" "-I/home/linuxbrew/.linuxbrew/opt/gmp/include" "-I/home/linuxbrew/.linuxbrew/opt/libffi/include" "-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include" "-D_GNU_SOURCE" "-D_FILE_OFFSET_BITS=64" "-g" "-O2" "-fPIC" "-D_THREAD_SAFE" "-Dlinux" "-O2" "-c" "binary-ecl/maxima-package.c" "-o" "binary-ecl/maxima-package.o")):
;;; exec: No such file or directory
;      - Loading binary file "binary-ecl/maxima-package.fas" 
Condition of type: FILE-ERROR
Filesystem error with pathname #P"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas".
```
This should be investigated as part of #29159.

Depends on #33068
Depends on #30933

CC:  @mkoeppe @saraedum @koffie

Branch/Commit: **[public/build/gitpod](https://github.com/sagemath/sagetrac-mirror/tree/public/build/gitpod) @ [974eb4c](https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109)**

Reviewer: **Tobias Diez**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/32749_





---

archive/issue_events_451038.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-23T21:07:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451038"
}
```



---

archive/issue_events_451039.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-23T21:07:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451039"
}
```



---

archive/issue_events_451040.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-23T21:07:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451040"
}
```



---

archive/issue_events_451041.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-23T21:07:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451041"
}
```



---

archive/issue_comments_528445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,6 @@\n ---\n \n While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.\n-- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages.\n+- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?\n - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.\n - Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. \n``````\n",
    "created_at": "2021-10-23T21:09:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528445",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,6 @@
 ---
 
 While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.
-- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages.
+- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?
 - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.
 - Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. 
``````




---

archive/issue_comments_528446.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,47 @@\n While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.\n - gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?\n - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.\n-- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. \n+- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally.\n+- Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with \n+\n+```\n+;;; Loading \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/../lisp-utils/defsystem.lisp\"\n+;;; Loading #P\"/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/lib/ecl-21.2.1/cmp.fas\"\n+#P\"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/lisp-utils/defsystem.lisp\"\n+> \n+(\"../src/\" \"./\" (MAKE::HOME-SUBDIRECTORY \"lisp/systems/\")\n+ \"/usr/local/lisp/Registry/\")\n+> \n+;;; Loading \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima.system\"\n+\n+;  - Compiling defsystem \"maxima\" \n+;    - Compiling module \"package\" \n+;      - Compiling source file\n+;        \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp\"\n+;;;\n+;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.\n+;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n+;;;\n+;;; End of Pass 1.\n+;;; Internal error:\n+;;;   ** Error code 1 when executing\n+;;; (EXT:RUN-PROGRAM \"gcc-5\" (\"-I.\" \"-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/\" \"-I/home/linuxbrew/.linuxbrew/opt/gmp/include\" \"-I/home/linuxbrew/.linuxbrew/opt/libffi/include\" \"-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include\" \"-D_GNU_SOURCE\" \"-D_FILE_OFFSET_BITS=64\" \"-g\" \"-O2\" \"-fPIC\" \"-D_THREAD_SAFE\" \"-Dlinux\" \"-O2\" \"-c\" \"binary-ecl/maxima-package.c\" \"-o\" \"binary-ecl/maxima-package.o\")):\n+;;; exec: No such file or directory\n+;      - Binary file binary-ecl/maxima-package.fas is old or does not exist. \n+;        Compile (and load) source file /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp instead? y\n+;      - Should I bother you if this happens again? y\n+;      - Compiling source file\n+;        \"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp\"\n+;;;\n+;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.\n+;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n+;;;\n+;;; End of Pass 1.\n+;;; Internal error:\n+;;;   ** Error code 1 when executing\n+;;; (EXT:RUN-PROGRAM \"gcc-5\" (\"-I.\" \"-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/\" \"-I/home/linuxbrew/.linuxbrew/opt/gmp/include\" \"-I/home/linuxbrew/.linuxbrew/opt/libffi/include\" \"-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include\" \"-D_GNU_SOURCE\" \"-D_FILE_OFFSET_BITS=64\" \"-g\" \"-O2\" \"-fPIC\" \"-D_THREAD_SAFE\" \"-Dlinux\" \"-O2\" \"-c\" \"binary-ecl/maxima-package.c\" \"-o\" \"binary-ecl/maxima-package.o\")):\n+;;; exec: No such file or directory\n+;      - Loading binary file \"binary-ecl/maxima-package.fas\" \n+Condition of type: FILE-ERROR\n+Filesystem error with pathname #P\"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas\".\n+```\n``````\n",
    "created_at": "2021-10-23T21:37:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528446",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,47 @@
 While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.
 - gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?
 - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.
-- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. 
+- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally.
+- Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with 
+
+```
+;;; Loading "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/../lisp-utils/defsystem.lisp"
+;;; Loading #P"/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/lib/ecl-21.2.1/cmp.fas"
+#P"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/lisp-utils/defsystem.lisp"
+> 
+("../src/" "./" (MAKE::HOME-SUBDIRECTORY "lisp/systems/")
+ "/usr/local/lisp/Registry/")
+> 
+;;; Loading "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima.system"
+
+;  - Compiling defsystem "maxima" 
+;    - Compiling module "package" 
+;      - Compiling source file
+;        "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp"
+;;;
+;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.
+;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
+;;;
+;;; End of Pass 1.
+;;; Internal error:
+;;;   ** Error code 1 when executing
+;;; (EXT:RUN-PROGRAM "gcc-5" ("-I." "-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/" "-I/home/linuxbrew/.linuxbrew/opt/gmp/include" "-I/home/linuxbrew/.linuxbrew/opt/libffi/include" "-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include" "-D_GNU_SOURCE" "-D_FILE_OFFSET_BITS=64" "-g" "-O2" "-fPIC" "-D_THREAD_SAFE" "-Dlinux" "-O2" "-c" "binary-ecl/maxima-package.c" "-o" "binary-ecl/maxima-package.o")):
+;;; exec: No such file or directory
+;      - Binary file binary-ecl/maxima-package.fas is old or does not exist. 
+;        Compile (and load) source file /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp instead? y
+;      - Should I bother you if this happens again? y
+;      - Compiling source file
+;        "/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp"
+;;;
+;;; Compiling /workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/maxima-package.lisp.
+;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
+;;;
+;;; End of Pass 1.
+;;; Internal error:
+;;;   ** Error code 1 when executing
+;;; (EXT:RUN-PROGRAM "gcc-5" ("-I." "-I/home/linuxbrew/.linuxbrew/Cellar/ecl/21.2.1_1/include/" "-I/home/linuxbrew/.linuxbrew/opt/gmp/include" "-I/home/linuxbrew/.linuxbrew/opt/libffi/include" "-I/home/linuxbrew/.linuxbrew/opt/bdw-gc/include" "-D_GNU_SOURCE" "-D_FILE_OFFSET_BITS=64" "-g" "-O2" "-fPIC" "-D_THREAD_SAFE" "-Dlinux" "-O2" "-c" "binary-ecl/maxima-package.c" "-o" "binary-ecl/maxima-package.o")):
+;;; exec: No such file or directory
+;      - Loading binary file "binary-ecl/maxima-package.fas" 
+Condition of type: FILE-ERROR
+Filesystem error with pathname #P"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas".
+```
``````




---

archive/issue_comments_528447.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nUse of linuxbrew is entirely untested; see #29159",
    "created_at": "2021-10-23T22:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528447",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Use of linuxbrew is entirely untested; see #29159



---

archive/issue_comments_528448.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe problem with `ecl` is clearly due to a broken `ecl` package in linuxbrew - it tries to use a nonexisting compiler.",
    "created_at": "2021-10-23T22:07:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528448",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

The problem with `ecl` is clearly due to a broken `ecl` package in linuxbrew - it tries to use a nonexisting compiler.



---

archive/issue_comments_528449.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nProbably `build/bin/sage-guess-package-system` should be changed so that `brew` is only tested after the Linux package managers.",
    "created_at": "2021-10-23T22:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528449",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Probably `build/bin/sage-guess-package-system` should be changed so that `brew` is only tested after the Linux package managers.



---

archive/issue_comments_528450.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bb485fcc8be870ceb1af9bd42259b6acaebdbcc\">6bb485f</a></td><td><code>Do not install ecl from brew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea950dc983dd926cae46c2dc40ca6e01766b907\">1ea950d</a></td><td><code>Cleanup gitpod config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a\">d792c6b</a></td><td><code>Add docs</code></td></tr></table>\n",
    "created_at": "2021-10-24T12:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528450",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bb485fcc8be870ceb1af9bd42259b6acaebdbcc">6bb485f</a></td><td><code>Do not install ecl from brew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea950dc983dd926cae46c2dc40ca6e01766b907">1ea950d</a></td><td><code>Cleanup gitpod config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a">d792c6b</a></td><td><code>Add docs</code></td></tr></table>




---

archive/issue_comments_528451.json:
```json
{
    "body": "Changed commit from **[bd1fe07](https://github.com/sagemath/sagetrac-mirror/commit/bd1fe072c2e993713243495a820240c27aa616fe)** to **[d792c6b](https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a)**",
    "created_at": "2021-10-24T12:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528451",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd1fe07](https://github.com/sagemath/sagetrac-mirror/commit/bd1fe072c2e993713243495a820240c27aa616fe)** to **[d792c6b](https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a)**



---

archive/issue_comments_528452.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03\">1ae507d</a></td><td><code>Remove uunnecessary changes to sage-venv</code></td></tr></table>\n",
    "created_at": "2021-10-24T12:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528452",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03">1ae507d</a></td><td><code>Remove uunnecessary changes to sage-venv</code></td></tr></table>




---

archive/issue_comments_528453.json:
```json
{
    "body": "Changed commit from **[d792c6b](https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a)** to **[1ae507d](https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03)**",
    "created_at": "2021-10-24T12:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528453",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d792c6b](https://github.com/sagemath/sagetrac-mirror/commit/d792c6b2a8b13ceb99834c045ff3fa652695ab5a)** to **[1ae507d](https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03)**



---

archive/issue_comments_528454.json:
```json
{
    "body": "Changed work issues from **Cleanup config, add vs extensions and add docs** to none",
    "created_at": "2021-10-24T12:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528454",
    "user": "https://github.com/tobiasdiez"
}
```

Changed work issues from **Cleanup config, add vs extensions and add docs** to none



---

archive/issue_comments_528455.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks for the feedback. I've now removed the linuxbrew install of ecl and opened tickets for the other things. So this is now ready for review.",
    "created_at": "2021-10-24T12:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528455",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks for the feedback. I've now removed the linuxbrew install of ecl and opened tickets for the other things. So this is now ready for review.



---

archive/issue_events_451042.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-24T12:43:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451042"
}
```



---

archive/issue_comments_528456.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n ---\n \n While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.\n-- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?\n+- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.\n - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.\n-- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally.\n+- Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.\n - Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with \n \n ```\n@@ -54,3 +54,4 @@\n Condition of type: FILE-ERROR\n Filesystem error with pathname #P\"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas\".\n ```\n+This should be investigated as part of #29159.\n``````\n",
    "created_at": "2021-10-24T12:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528456",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 ---
 
 While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.
-- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get?
+- gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.
 - gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.
-- Curretly gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally.
+- Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.
 - Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with 
 
 ```
@@ -54,3 +54,4 @@
 Condition of type: FILE-ERROR
 Filesystem error with pathname #P"/workspace/sagetrac-mirror/local/var/tmp/sage/build/maxima-5.45.0.p0/src/src/binary-ecl/maxima-package.fas".
 ```
+This should be investigated as part of #29159.
``````




---

archive/issue_comments_528457.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDoes it work?",
    "created_at": "2021-10-24T17:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528457",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Does it work?



---

archive/issue_comments_528458.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nConsider opening a bug report against the ecl packaging on linuxbrew",
    "created_at": "2021-10-24T17:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528458",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Consider opening a bug report against the ecl packaging on linuxbrew



---

archive/issue_comments_528459.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nLet's resolve the `pyenv` issues in #29285",
    "created_at": "2021-10-24T17:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528459",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Let's resolve the `pyenv` issues in #29285



---

archive/issue_comments_528460.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment:9):\n> Does it work?\n\nYes! You can also test this out using the above link. Currently one has to wait for the build to finish. This waiting time can be removed by activating the github integration after this ticket is merged.",
    "created_at": "2021-10-24T22:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528460",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment:9):
> Does it work?

Yes! You can also test this out using the above link. Currently one has to wait for the build to finish. This waiting time can be removed by activating the github integration after this ticket is merged.



---

archive/issue_comments_528461.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mkoeppe](#comment:10):\n> Consider opening a bug report against the ecl packaging on linuxbrew\n\nWill do after this ticket is merged (since I can then reference the gitpod workspace as a reproducible example).",
    "created_at": "2021-10-24T22:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528461",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mkoeppe](#comment:10):
> Consider opening a bug report against the ecl packaging on linuxbrew

Will do after this ticket is merged (since I can then reference the gitpod workspace as a reproducible example).



---

archive/issue_comments_528462.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n \n While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.\n - gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.\n-- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.\n+- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv. This is now  #29285.\n - Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.\n - Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with \n \n``````\n",
    "created_at": "2021-10-24T22:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528462",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 
 While setting things up, I noticed a few issues. Not sure if they are known problems or even by design. Please let me know if I should open a ticket for them to improve things.
 - gitpod has brew installed on linux by default. Sagemath thinks this is the primary package manager and, e.g., configure suggests to run `brew xyz` to install new packages. Is brew indeed preferred over apt-get? This is now #32753.
-- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv.
+- gitpod comes also with pyenv preinstalled. This breaks the build unless one sets `pyenv global system`. Otherwise all python packages will be installed in the python env set by pyenv. This is now  #29285.
 - Currently gitpod prebuild has a time limit of 1 hour (with the plan to increase it in the future). To improve our build time I propose to add a new `make` option that uses prebuilt wheels from pypi instead of compiling everything locally. This is now #32754.
 - Maxima doesn't work with the homebrew version of ecl? From #29617 I got the impression it should work, but it fails with 
 
``````




---

archive/issue_comments_528463.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIt is asking: \"We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?\"\n\nAdd the correct answer to the documentation?",
    "created_at": "2021-10-24T22:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528463",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

It is asking: "We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?"

Add the correct answer to the documentation?



---

archive/issue_comments_528464.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nMaybe you want to use `make V=0` so that there's less output during build?",
    "created_at": "2021-10-24T22:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528464",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Maybe you want to use `make V=0` so that there's less output during build?



---

archive/issue_comments_528465.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nDoes this need Sage's Jupyter notebook or does it bring its own?\n\n`configure --disable-notebook` can be used to avoid building notebook and its many Python deps",
    "created_at": "2021-10-24T22:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528465",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Does this need Sage's Jupyter notebook or does it bring its own?

`configure --disable-notebook` can be used to avoid building notebook and its many Python deps



---

archive/issue_comments_528466.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nGiven that the preinstalled linux is old and the linuxbrew has some broken packages, one could wonder whether it would be better to use `conda` to set up a richer environment with much shorter time for building.\nThe scipy people seem to be doing that - https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html - but I haven't looked at any details.",
    "created_at": "2021-10-24T22:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528466",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Given that the preinstalled linux is old and the linuxbrew has some broken packages, one could wonder whether it would be better to use `conda` to set up a richer environment with much shorter time for building.
The scipy people seem to be doing that - https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html - but I haven't looked at any details.



---

archive/issue_comments_528467.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with \n`ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.\nAm I doing something wrong?",
    "created_at": "2021-10-25T02:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528467",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

The build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with 
`ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.
Am I doing something wrong?



---

archive/issue_comments_528468.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mkoeppe](#comment:15):\n> It is asking: \"We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?\"\n> \n> Add the correct answer to the documentation?\n\nThis will be no longer necessary once we have added the VS config.",
    "created_at": "2021-10-25T07:49:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528468",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mkoeppe](#comment:15):
> It is asking: "We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?"
> 
> Add the correct answer to the documentation?

This will be no longer necessary once we have added the VS config.



---

archive/issue_comments_528469.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mkoeppe](#comment:16):\n> Maybe you want to use `make V=0` so that there's less output during build?\n\nNormally the user wouldn't see this, and everything that is printed during the init stage would become the prebuilt log that can be viewed in the admin interface. So I think its fine to have it more detailed, in case something goes wrong.",
    "created_at": "2021-10-25T07:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528469",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mkoeppe](#comment:16):
> Maybe you want to use `make V=0` so that there's less output during build?

Normally the user wouldn't see this, and everything that is printed during the init stage would become the prebuilt log that can be viewed in the admin interface. So I think its fine to have it more detailed, in case something goes wrong.



---

archive/issue_comments_528470.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@mkoeppe](#comment:18):\n> Given that the preinstalled linux is old and the linuxbrew has some broken packages, one could wonder whether it would be better to use `conda` to set up a richer environment with much shorter time for building.\n> The scipy people seem to be doing that - https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html - but I haven't looked at any details.\n\nThat might indeed something to consider. I would keep it for now using plain ubuntu to get some experience how it goes with the prebuilt. We can change it to conda later if necessary.",
    "created_at": "2021-10-25T07:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528470",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@mkoeppe](#comment:18):
> Given that the preinstalled linux is old and the linuxbrew has some broken packages, one could wonder whether it would be better to use `conda` to set up a richer environment with much shorter time for building.
> The scipy people seem to be doing that - https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html - but I haven't looked at any details.

That might indeed something to consider. I would keep it for now using plain ubuntu to get some experience how it goes with the prebuilt. We can change it to conda later if necessary.



---

archive/issue_comments_528471.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mkoeppe](#comment:19):\n> The build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with \n> `ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.\n> Am I doing something wrong?\n> \n\nI can confirm this. \n\nI also sometimes had other problems with re-started workspaces. For example, when the build was interrupted then next time `make` tried to install packages (e.g. python) that were using system packages during the first run and thus didn't needed to run. I'm not sure ifs a bug with gitpod (i.e. some important files are not correctly restored) or an issue with sage's build system. Do you have an idea what's going wrong?",
    "created_at": "2021-10-25T07:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528471",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mkoeppe](#comment:19):
> The build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with 
> `ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.
> Am I doing something wrong?
> 

I can confirm this. 

I also sometimes had other problems with re-started workspaces. For example, when the build was interrupted then next time `make` tried to install packages (e.g. python) that were using system packages during the first run and thus didn't needed to run. I'm not sure ifs a bug with gitpod (i.e. some important files are not correctly restored) or an issue with sage's build system. Do you have an idea what's going wrong?



---

archive/issue_comments_528472.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment:17):\n> Does this need Sage's Jupyter notebook or does it bring its own?\n> \n> `configure --disable-notebook` can be used to avoid building notebook and its many Python deps\n\nIf you want to use VS codes Jupyter notebook integration, jupyter needs to be installed in the venv used.",
    "created_at": "2021-10-25T08:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528472",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment:17):
> Does this need Sage's Jupyter notebook or does it bring its own?
> 
> `configure --disable-notebook` can be used to avoid building notebook and its many Python deps

If you want to use VS codes Jupyter notebook integration, jupyter needs to be installed in the venv used.



---

archive/issue_comments_528473.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412\">a973734</a></td><td><code>Move system setup to dockerfile</code></td></tr></table>\n",
    "created_at": "2021-10-25T12:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528473",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412">a973734</a></td><td><code>Move system setup to dockerfile</code></td></tr></table>




---

archive/issue_comments_528474.json:
```json
{
    "body": "Changed commit from **[1ae507d](https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03)** to **[a973734](https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412)**",
    "created_at": "2021-10-25T12:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1ae507d](https://github.com/sagemath/sagetrac-mirror/commit/1ae507de86dcd8f8bcc992138451976eda8a6f03)** to **[a973734](https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412)**



---

archive/issue_comments_528475.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60\">5d3e6da</a></td><td><code>Disable brew prio</code></td></tr></table>\n",
    "created_at": "2021-10-25T12:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528475",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60">5d3e6da</a></td><td><code>Disable brew prio</code></td></tr></table>




---

archive/issue_comments_528476.json:
```json
{
    "body": "Changed commit from **[a973734](https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412)** to **[5d3e6da](https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60)**",
    "created_at": "2021-10-25T12:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528476",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a973734](https://github.com/sagemath/sagetrac-mirror/commit/a973734cc6855fb4a162fd3e6c24230784eb7412)** to **[5d3e6da](https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60)**



---

archive/issue_comments_528477.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@tobiasdiez](#comment:23):\n> Replying to [@mkoeppe](#comment:19):\n> > The build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with \n> > `ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.\n> > Am I doing something wrong?\n> > \n\n> \n> I can confirm this. \n> \n> I also sometimes had other problems with re-started workspaces. For example, when the build was interrupted then next time `make` tried to install packages (e.g. python) that were using system packages during the first run and thus didn't needed to run. I'm not sure ifs a bug with gitpod (i.e. some important files are not correctly restored) or an issue with sage's build system. Do you have an idea what's going wrong?\n\nThat was in fact my mistake. Only stuff under the workspace directory is restored by gitpod. Thus, the apt-get installed packages got lost. I've now moved the system setup into a dockerfile which should fix this.",
    "created_at": "2021-10-25T14:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528477",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@tobiasdiez](#comment:23):
> Replying to [@mkoeppe](#comment:19):
> > The build on Gitpod finished for me, but then the workspace timed out; on opening it again, starting `./sage` fails with 
> > `ImportError: libzmq.so.5: cannot open shared object file: No such file or directory`.
> > Am I doing something wrong?
> > 

> 
> I can confirm this. 
> 
> I also sometimes had other problems with re-started workspaces. For example, when the build was interrupted then next time `make` tried to install packages (e.g. python) that were using system packages during the first run and thus didn't needed to run. I'm not sure ifs a bug with gitpod (i.e. some important files are not correctly restored) or an issue with sage's build system. Do you have an idea what's going wrong?

That was in fact my mistake. Only stuff under the workspace directory is restored by gitpod. Thus, the apt-get installed packages got lost. I've now moved the system setup into a dockerfile which should fix this.



---

archive/issue_comments_528478.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAs a follow-up to reduce the build duration, is it possible to build certain libraries (say `make ecl`), store the result somewhere in the docker image and then on `make build` reuse the previously built ecl?",
    "created_at": "2021-10-27T09:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528478",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:28" align="right">comment:28</div>

As a follow-up to reduce the build duration, is it possible to build certain libraries (say `make ecl`), store the result somewhere in the docker image and then on `make build` reuse the previously built ecl?



---

archive/issue_comments_528479.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nSorry that I haven't had the time to look at the new version in the past weeks. If this is ready for testing by developers, I'd suggest that you post on sage-devel to invite people to try it out.",
    "created_at": "2021-11-13T20:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528479",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Sorry that I haven't had the time to look at the new version in the past weeks. If this is ready for testing by developers, I'd suggest that you post on sage-devel to invite people to try it out.



---

archive/issue_comments_528480.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNo worries!\n\nIt's working for me and ready for review. However, it currently needs to build everything on each start of the workspace. Thus, that's not very friendly for other devs to try out. But after it is merged and the Gitpod github action is activated, the workspaces are prebuild and thus instantly ready. That's then a better point to advertise it on the developer mailing list.\n\n(Caveat: Currently gitpod only allows prebuilds of up to 1h; I'm not sure if we manage this)",
    "created_at": "2021-11-17T21:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528480",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:30" align="right">comment:30</div>

No worries!

It's working for me and ready for review. However, it currently needs to build everything on each start of the workspace. Thus, that's not very friendly for other devs to try out. But after it is merged and the Gitpod github action is activated, the workspaces are prebuild and thus instantly ready. That's then a better point to advertise it on the developer mailing list.

(Caveat: Currently gitpod only allows prebuilds of up to 1h; I'm not sure if we manage this)



---

archive/issue_comments_528481.json:
```json
{
    "body": "Changed commit from **[5d3e6da](https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60)** to **[51c69e3](https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f)**",
    "created_at": "2021-11-26T15:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528481",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5d3e6da](https://github.com/sagemath/sagetrac-mirror/commit/5d3e6da15d0406b5139a9ad54d99d07876ecbb60)** to **[51c69e3](https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f)**



---

archive/issue_comments_528482.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f\">51c69e3</a></td><td><code>No need to intstall git again</code></td></tr></table>\n",
    "created_at": "2021-11-26T15:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528482",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f">51c69e3</a></td><td><code>No need to intstall git again</code></td></tr></table>




---

archive/issue_comments_528483.json:
```json
{
    "body": "Changed commit from **[51c69e3](https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f)** to **[7d64908](https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059)**",
    "created_at": "2021-11-26T15:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528483",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[51c69e3](https://github.com/sagemath/sagetrac-mirror/commit/51c69e3ffdbeff930e810e6df6492542d4b8269f)** to **[7d64908](https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059)**



---

archive/issue_comments_528484.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059\">7d64908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/gitpod</code></td></tr></table>\n",
    "created_at": "2021-11-26T15:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059">7d64908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/gitpod</code></td></tr></table>




---

archive/issue_comments_528485.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\ndo you know if gitpod allows sharing these prebuilds across accounts?",
    "created_at": "2021-11-28T14:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528485",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

do you know if gitpod allows sharing these prebuilds across accounts?



---

archive/issue_comments_528486.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNormally, the prebuilds are build centrally by a github application that notifies gitpod about changes to certain branches (currently only the default branch). These prebuilds are then used by everyone that starts a new environment based on these branches.\n\nBut you do can share a workspace, see https://www.gitpod.io/docs/sharing-and-collaboration. Thus, say you update a dependency in a workspace and this leads to errors, then you can make a snapshot and share it with other developers so that can investigate the issue.",
    "created_at": "2021-11-28T17:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528486",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:34" align="right">comment:34</div>

Normally, the prebuilds are build centrally by a github application that notifies gitpod about changes to certain branches (currently only the default branch). These prebuilds are then used by everyone that starts a new environment based on these branches.

But you do can share a workspace, see https://www.gitpod.io/docs/sharing-and-collaboration. Thus, say you update a dependency in a workspace and this leads to errors, then you can make a snapshot and share it with other developers so that can investigate the issue.



---

archive/issue_comments_528487.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098\">8cf8b38</a></td><td><code>Prebuild non-python packages in docker</code></td></tr></table>\n",
    "created_at": "2021-12-08T22:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098">8cf8b38</a></td><td><code>Prebuild non-python packages in docker</code></td></tr></table>




---

archive/issue_comments_528488.json:
```json
{
    "body": "Changed commit from **[7d64908](https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059)** to **[8cf8b38](https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098)**",
    "created_at": "2021-12-08T22:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7d64908](https://github.com/sagemath/sagetrac-mirror/commit/7d649089bbd61e0da221734e0d8e6039fdc5d059)** to **[8cf8b38](https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098)**



---

archive/issue_comments_528489.json:
```json
{
    "body": "Changed commit from **[8cf8b38](https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098)** to **[1aa9500](https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81)**",
    "created_at": "2021-12-09T12:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528489",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8cf8b38](https://github.com/sagemath/sagetrac-mirror/commit/8cf8b387a768ead8f391b3f909e6fc212d002098)** to **[1aa9500](https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81)**



---

archive/issue_comments_528490.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81\">1aa9500</a></td><td><code>Fix log output</code></td></tr></table>\n",
    "created_at": "2021-12-09T12:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528490",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81">1aa9500</a></td><td><code>Fix log output</code></td></tr></table>




---

archive/issue_comments_528491.json:
```json
{
    "body": "Changed commit from **[1aa9500](https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81)** to **[8c83420](https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5)**",
    "created_at": "2021-12-09T15:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528491",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1aa9500](https://github.com/sagemath/sagetrac-mirror/commit/1aa950023bb150c47099f6e820658a9d1d652f81)** to **[8c83420](https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5)**



---

archive/issue_comments_528492.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5\">8c83420</a></td><td><code>Reduce image build time</code></td></tr></table>\n",
    "created_at": "2021-12-09T15:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528492",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5">8c83420</a></td><td><code>Reduce image build time</code></td></tr></table>




---

archive/issue_comments_528493.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd\">ea6c0a3</a></td><td><code>Prebuild a few more libs</code></td></tr></table>\n",
    "created_at": "2021-12-09T16:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528493",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd">ea6c0a3</a></td><td><code>Prebuild a few more libs</code></td></tr></table>




---

archive/issue_comments_528494.json:
```json
{
    "body": "Changed commit from **[8c83420](https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5)** to **[ea6c0a3](https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd)**",
    "created_at": "2021-12-09T16:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528494",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8c83420](https://github.com/sagemath/sagetrac-mirror/commit/8c83420d615be972979f62f0a148b8ee3f3f2ce5)** to **[ea6c0a3](https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd)**



---

archive/issue_comments_528495.json:
```json
{
    "body": "Changed commit from **[ea6c0a3](https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd)** to **[40a07dd](https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d)**",
    "created_at": "2021-12-09T18:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528495",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ea6c0a3](https://github.com/sagemath/sagetrac-mirror/commit/ea6c0a3f8c30aedf53b39fde71edb23947645efd)** to **[40a07dd](https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d)**



---

archive/issue_comments_528496.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d\">40a07dd</a></td><td><code>Install pari instead of gap, and set env correctly</code></td></tr></table>\n",
    "created_at": "2021-12-09T18:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d">40a07dd</a></td><td><code>Install pari instead of gap, and set env correctly</code></td></tr></table>




---

archive/issue_comments_528497.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311\">2ec7921</a></td><td><code>Fix syntax</code></td></tr></table>\n",
    "created_at": "2021-12-09T18:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528497",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311">2ec7921</a></td><td><code>Fix syntax</code></td></tr></table>




---

archive/issue_comments_528498.json:
```json
{
    "body": "Changed commit from **[40a07dd](https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d)** to **[2ec7921](https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311)**",
    "created_at": "2021-12-09T18:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528498",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[40a07dd](https://github.com/sagemath/sagetrac-mirror/commit/40a07dd6aefeb01f930e633f53406a7be627ec9d)** to **[2ec7921](https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311)**



---

archive/issue_comments_528499.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b\">00394d2</a></td><td><code>Don't need to install sudo</code></td></tr></table>\n",
    "created_at": "2021-12-09T19:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528499",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b">00394d2</a></td><td><code>Don't need to install sudo</code></td></tr></table>




---

archive/issue_comments_528500.json:
```json
{
    "body": "Changed commit from **[2ec7921](https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311)** to **[00394d2](https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b)**",
    "created_at": "2021-12-09T19:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2ec7921](https://github.com/sagemath/sagetrac-mirror/commit/2ec7921c5297d3306a0d1e691777c158b0f51311)** to **[00394d2](https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b)**



---

archive/issue_comments_528501.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393\">e43768f</a></td><td><code>Try again without pari</code></td></tr></table>\n",
    "created_at": "2021-12-09T21:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528501",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393">e43768f</a></td><td><code>Try again without pari</code></td></tr></table>




---

archive/issue_comments_528502.json:
```json
{
    "body": "Changed commit from **[00394d2](https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b)** to **[e43768f](https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393)**",
    "created_at": "2021-12-09T21:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528502",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[00394d2](https://github.com/sagemath/sagetrac-mirror/commit/00394d2ff668acb13563761e14889788bd5c040b)** to **[e43768f](https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393)**



---

archive/issue_comments_528503.json:
```json
{
    "body": "Changed commit from **[e43768f](https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393)** to **[962ab18](https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800)**",
    "created_at": "2021-12-09T21:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528503",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e43768f](https://github.com/sagemath/sagetrac-mirror/commit/e43768f7839a862c85d47a5298ccbafc5a673393)** to **[962ab18](https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800)**



---

archive/issue_comments_528504.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800\">962ab18</a></td><td><code>Try disabling most of the docker build...</code></td></tr></table>\n",
    "created_at": "2021-12-09T21:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528504",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800">962ab18</a></td><td><code>Try disabling most of the docker build...</code></td></tr></table>




---

archive/issue_comments_528505.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2\">22d0462</a></td><td><code>Reenable env config</code></td></tr></table>\n",
    "created_at": "2021-12-09T22:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528505",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2">22d0462</a></td><td><code>Reenable env config</code></td></tr></table>




---

archive/issue_comments_528506.json:
```json
{
    "body": "Changed commit from **[962ab18](https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800)** to **[22d0462](https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2)**",
    "created_at": "2021-12-09T22:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528506",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[962ab18](https://github.com/sagemath/sagetrac-mirror/commit/962ab18db098ef638a7aa2fa36c242e0a9981800)** to **[22d0462](https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2)**



---

archive/issue_comments_528507.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27\">743e8fc</a></td><td><code>Reenable everything</code></td></tr></table>\n",
    "created_at": "2021-12-09T22:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528507",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27">743e8fc</a></td><td><code>Reenable everything</code></td></tr></table>




---

archive/issue_comments_528508.json:
```json
{
    "body": "Changed commit from **[22d0462](https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2)** to **[743e8fc](https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27)**",
    "created_at": "2021-12-09T22:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528508",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[22d0462](https://github.com/sagemath/sagetrac-mirror/commit/22d046267b1fd7a7e8bc368ae67f8bfc216a13a2)** to **[743e8fc](https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27)**



---

archive/issue_comments_528509.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75\">12cdb6a</a></td><td><code>More bisecting...</code></td></tr></table>\n",
    "created_at": "2021-12-09T22:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528509",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75">12cdb6a</a></td><td><code>More bisecting...</code></td></tr></table>




---

archive/issue_comments_528510.json:
```json
{
    "body": "Changed commit from **[743e8fc](https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27)** to **[12cdb6a](https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75)**",
    "created_at": "2021-12-09T22:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528510",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[743e8fc](https://github.com/sagemath/sagetrac-mirror/commit/743e8fc91bf74cd0f236bbd4543cc34e11916b27)** to **[12cdb6a](https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75)**



---

archive/issue_comments_528511.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce\">23a210c</a></td><td><code>Another one...</code></td></tr></table>\n",
    "created_at": "2021-12-09T22:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528511",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce">23a210c</a></td><td><code>Another one...</code></td></tr></table>




---

archive/issue_comments_528512.json:
```json
{
    "body": "Changed commit from **[12cdb6a](https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75)** to **[23a210c](https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce)**",
    "created_at": "2021-12-09T22:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528512",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[12cdb6a](https://github.com/sagemath/sagetrac-mirror/commit/12cdb6acc6be7bfd3f4cef8edfe153604ec38b75)** to **[23a210c](https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce)**



---

archive/issue_comments_528513.json:
```json
{
    "body": "Changed commit from **[23a210c](https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce)** to **[5eeae07](https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c)**",
    "created_at": "2021-12-09T22:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528513",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[23a210c](https://github.com/sagemath/sagetrac-mirror/commit/23a210cf3d032072c3f6649f5eb8b8003b362cce)** to **[5eeae07](https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c)**



---

archive/issue_comments_528514.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c\">5eeae07</a></td><td><code>Reactivate everything?</code></td></tr></table>\n",
    "created_at": "2021-12-09T22:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528514",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c">5eeae07</a></td><td><code>Reactivate everything?</code></td></tr></table>




---

archive/issue_comments_528515.json:
```json
{
    "body": "Changed commit from **[5eeae07](https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c)** to **[8f578ef](https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1)**",
    "created_at": "2021-12-09T23:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528515",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5eeae07](https://github.com/sagemath/sagetrac-mirror/commit/5eeae07b406ebcb74187ead704bd20167998b21c)** to **[8f578ef](https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1)**



---

archive/issue_comments_528516.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1\">8f578ef</a></td><td><code>Try to ignore workspace folder</code></td></tr></table>\n",
    "created_at": "2021-12-09T23:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528516",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1">8f578ef</a></td><td><code>Try to ignore workspace folder</code></td></tr></table>




---

archive/issue_comments_528517.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b\">c0ce19e</a></td><td><code>Copy only what we need</code></td></tr></table>\n",
    "created_at": "2021-12-09T23:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b">c0ce19e</a></td><td><code>Copy only what we need</code></td></tr></table>




---

archive/issue_comments_528518.json:
```json
{
    "body": "Changed commit from **[8f578ef](https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1)** to **[c0ce19e](https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b)**",
    "created_at": "2021-12-09T23:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8f578ef](https://github.com/sagemath/sagetrac-mirror/commit/8f578efbc097517b66c442750647fbaf453781c1)** to **[c0ce19e](https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b)**



---

archive/issue_comments_528519.json:
```json
{
    "body": "Changed commit from **[c0ce19e](https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b)** to **[6402252](https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1)**",
    "created_at": "2021-12-10T11:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c0ce19e](https://github.com/sagemath/sagetrac-mirror/commit/c0ce19ed03806b6b636b3af5762d3fd4bf32247b)** to **[6402252](https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1)**



---

archive/issue_comments_528520.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0ba1d263cc5483d4c2d3d8e7ddf6f15444780c9\">a0ba1d2</a></td><td><code>Only create ssh folder if it not exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1\">6402252</a></td><td><code>Install other pari packages as wel</code></td></tr></table>\n",
    "created_at": "2021-12-10T11:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528520",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0ba1d263cc5483d4c2d3d8e7ddf6f15444780c9">a0ba1d2</a></td><td><code>Only create ssh folder if it not exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1">6402252</a></td><td><code>Install other pari packages as wel</code></td></tr></table>




---

archive/issue_comments_528521.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a382c87af8d8d89da37a3bd23a297890e1f97a5c\">a382c87</a></td><td><code>Disable pyenv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496\">3bd6512</a></td><td><code>Add LD_lib path so that pari finds everything correctly</code></td></tr></table>\n",
    "created_at": "2021-12-10T12:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528521",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a382c87af8d8d89da37a3bd23a297890e1f97a5c">a382c87</a></td><td><code>Disable pyenv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496">3bd6512</a></td><td><code>Add LD_lib path so that pari finds everything correctly</code></td></tr></table>




---

archive/issue_comments_528522.json:
```json
{
    "body": "Changed commit from **[6402252](https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1)** to **[3bd6512](https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496)**",
    "created_at": "2021-12-10T12:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528522",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6402252](https://github.com/sagemath/sagetrac-mirror/commit/64022527b1d740efbefc4d31ea51d04b45bbfda1)** to **[3bd6512](https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496)**



---

archive/issue_comments_528523.json:
```json
{
    "body": "Changed commit from **[3bd6512](https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496)** to **[1ce6c77](https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e)**",
    "created_at": "2021-12-10T15:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528523",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3bd6512](https://github.com/sagemath/sagetrac-mirror/commit/3bd6512cd2b1f310d313f16eef431b2acfdf4496)** to **[1ce6c77](https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e)**



---

archive/issue_comments_528524.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0961ed31981bbc3d8dd492a660c585bf6671f661\">0961ed3</a></td><td><code>Also install simple-rst for rst support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e\">1ce6c77</a></td><td><code>Also preinstall singular</code></td></tr></table>\n",
    "created_at": "2021-12-10T15:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528524",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0961ed31981bbc3d8dd492a660c585bf6671f661">0961ed3</a></td><td><code>Also install simple-rst for rst support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e">1ce6c77</a></td><td><code>Also preinstall singular</code></td></tr></table>




---

archive/issue_comments_528525.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI've moved the compilation of most non-python packages to the docker file (as they are relatively constant) to minimize the time one has to wait until the gitpod workspace is completely initialized.",
    "created_at": "2021-12-10T21:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528525",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:54" align="right">comment:54</div>

I've moved the compilation of most non-python packages to the docker file (as they are relatively constant) to minimize the time one has to wait until the gitpod workspace is completely initialized.



---

archive/issue_comments_528526.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThis could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).",
    "created_at": "2021-12-23T20:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528526",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).



---

archive/issue_comments_528527.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\n-1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it",
    "created_at": "2021-12-23T20:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528527",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

-1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it



---

archive/issue_comments_528528.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nOverall I think it's too slow to fit well in the \"ephemeral workspace\" philosophy of gitpod",
    "created_at": "2021-12-23T20:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528528",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Overall I think it's too slow to fit well in the "ephemeral workspace" philosophy of gitpod



---

archive/issue_events_451043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-23T20:44:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451043"
}
```



---

archive/issue_events_451044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-23T20:44:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451044"
}
```



---

archive/issue_comments_528529.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.",
    "created_at": "2021-12-23T20:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528529",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.



---

archive/issue_comments_528530.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@mkoeppe](#comment:55):\n> This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).\n\nCould you please expand on this idea. Since the current code already use the `prefix` idea:\n> RUN ./configure --prefix=/home/gitpod/sage-prebuild\n\nNote also that the final build (in gitpod.yml) should preferably use a normal build (without a special prefix) to be as close as possible to a \"normal\" dev setup.",
    "created_at": "2021-12-25T19:56:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528530",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@mkoeppe](#comment:55):
> This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).

Could you please expand on this idea. Since the current code already use the `prefix` idea:
> RUN ./configure --prefix=/home/gitpod/sage-prebuild

Note also that the final build (in gitpod.yml) should preferably use a normal build (without a special prefix) to be as close as possible to a "normal" dev setup.



---

archive/issue_comments_528531.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@mkoeppe](#comment:56):\n> -1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it\n\nOkay, but I couldn't figure out how to use this in a Docker file that needs to be static (and not be generated). What do you propose to do?",
    "created_at": "2021-12-25T19:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528531",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@mkoeppe](#comment:56):
> -1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it

Okay, but I couldn't figure out how to use this in a Docker file that needs to be static (and not be generated). What do you propose to do?



---

archive/issue_comments_528532.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@mkoeppe](#comment:58):\n> I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.\n\nThe dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.",
    "created_at": "2021-12-25T19:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528532",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@mkoeppe](#comment:58):
> I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.

The dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.



---

archive/issue_comments_528533.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@mkoeppe](#comment:57):\n> Overall I think it's too slow to fit well in the \"ephemeral workspace\" philosophy of gitpod\n\nIt's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature that does this in the background automatically, so that starting the workspace is a matter of seconds (which are mainly spent to load the custom docker image + the prebuild files). See the ticket description.",
    "created_at": "2021-12-25T20:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528533",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@mkoeppe](#comment:57):
> Overall I think it's too slow to fit well in the "ephemeral workspace" philosophy of gitpod

It's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature that does this in the background automatically, so that starting the workspace is a matter of seconds (which are mainly spent to load the custom docker image + the prebuild files). See the ticket description.



---

archive/issue_comments_528534.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@tobiasdiez](#comment:59):\n> Replying to [@mkoeppe](#comment:55):\n> > This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).\n\n> \n> Could you please expand on this idea. Since the current code already use the `prefix` idea:\n> > RUN ./configure --prefix=/home/gitpod/sage-prebuild\n\nChange this to `./configure --prefix=/home/gitpod/sage-local`\n\nand change `./configure -enable-editable` in `.gitpod.yml` to `./configure --prefix=/home/gitpod/sage-local --enable-editable`\n\n> Note also that the final build (in gitpod.yml) should preferably use a normal build (without a special prefix) to be as close as possible to a \"normal\" dev setup. \n\nUsing `--prefix` is normal - it's step 4 of our install instructions in README.md",
    "created_at": "2021-12-25T20:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528534",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@tobiasdiez](#comment:59):
> Replying to [@mkoeppe](#comment:55):
> > This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).

> 
> Could you please expand on this idea. Since the current code already use the `prefix` idea:
> > RUN ./configure --prefix=/home/gitpod/sage-prebuild

Change this to `./configure --prefix=/home/gitpod/sage-local`

and change `./configure -enable-editable` in `.gitpod.yml` to `./configure --prefix=/home/gitpod/sage-local --enable-editable`

> Note also that the final build (in gitpod.yml) should preferably use a normal build (without a special prefix) to be as close as possible to a "normal" dev setup. 

Using `--prefix` is normal - it's step 4 of our install instructions in README.md



---

archive/issue_comments_528535.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@tobiasdiez](#comment:61):\n> Replying to [@mkoeppe](#comment:58):\n> > I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.\n\n> \n> The dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.\n\nIs there a particular reason why you cannot use the existing Docker build https://hub.docker.com/r/sagemath/sagemath/tags",
    "created_at": "2021-12-25T20:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528535",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@tobiasdiez](#comment:61):
> Replying to [@mkoeppe](#comment:58):
> > I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.

> 
> The dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.

Is there a particular reason why you cannot use the existing Docker build https://hub.docker.com/r/sagemath/sagemath/tags



---

archive/issue_comments_528536.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@mkoeppe](#comment:63):\n> Replying to [@tobiasdiez](#comment:59):\n> > Replying to [@mkoeppe](#comment:55):\n> > > This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).\n\n> > \n> > Could you please expand on this idea. Since the current code already use the `prefix` idea:\n> > > RUN ./configure --prefix=/home/gitpod/sage-prebuild\n\n> \n> Change this to `./configure --prefix=/home/gitpod/sage-local`\n> \n> and change `./configure -enable-editable` in `.gitpod.yml` to `./configure --prefix=/home/gitpod/sage-local --enable-editable`\n\nThat's a good suggestion. Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder. https://www.gitpod.io/docs/prebuilds#workspace-directory-only",
    "created_at": "2021-12-27T20:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528536",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@mkoeppe](#comment:63):
> Replying to [@tobiasdiez](#comment:59):
> > Replying to [@mkoeppe](#comment:55):
> > > This could be much simplified by just configuring `sage-prebuild` and the actual build to use the same prefix (`configure --prefix=...`).

> > 
> > Could you please expand on this idea. Since the current code already use the `prefix` idea:
> > > RUN ./configure --prefix=/home/gitpod/sage-prebuild

> 
> Change this to `./configure --prefix=/home/gitpod/sage-local`
> 
> and change `./configure -enable-editable` in `.gitpod.yml` to `./configure --prefix=/home/gitpod/sage-local --enable-editable`

That's a good suggestion. Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder. https://www.gitpod.io/docs/prebuilds#workspace-directory-only



---

archive/issue_comments_528537.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@mkoeppe](#comment:64):\n> Replying to [@tobiasdiez](#comment:61):\n> > Replying to [@mkoeppe](#comment:58):\n> > > I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.\n\n> > \n> > The dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.\n\n> \n> Is there a particular reason why you cannot use the existing Docker build https://hub.docker.com/r/sagemath/sagemath/tags\n\nFirst of all, the end goal is different: the gitpod docker serves as a developer enviroment, and the existing docker config is a means to distribute sage. Concretely, gitpod has a hard timeout of 1h, so everything is optimized to fit into this timeframe (for example, only a handful of non-python packages are built). Also the current docker seems to use a very minimal installation of system packages, while the gitpod image tries to install all relevant system packages; the base image is also different. It seems to be also hard to reuse an existing docker file with gitpod, since one only can specify a dockerfile and not the exact docker build command (in particular not the specific target / build stage). But in the end, there is also not much code duplication between the docker images, so I don't think thats a big issue.",
    "created_at": "2021-12-27T20:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528537",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@mkoeppe](#comment:64):
> Replying to [@tobiasdiez](#comment:61):
> > Replying to [@mkoeppe](#comment:58):
> > > I'd suggest to integrate with the Docker image stuff described in `docker/README.md` - a lot of work has been done there to make incremental builds fast.

> > 
> > The dockerbuild here is however not meant to be incremental. It's build once and then is reused as a basis for every workspace. It also needs to run below 1h as this is current timeout of gitpod.

> 
> Is there a particular reason why you cannot use the existing Docker build https://hub.docker.com/r/sagemath/sagemath/tags

First of all, the end goal is different: the gitpod docker serves as a developer enviroment, and the existing docker config is a means to distribute sage. Concretely, gitpod has a hard timeout of 1h, so everything is optimized to fit into this timeframe (for example, only a handful of non-python packages are built). Also the current docker seems to use a very minimal installation of system packages, while the gitpod image tries to install all relevant system packages; the base image is also different. It seems to be also hard to reuse an existing docker file with gitpod, since one only can specify a dockerfile and not the exact docker build command (in particular not the specific target / build stage). But in the end, there is also not much code duplication between the docker images, so I don't think thats a big issue.



---

archive/issue_comments_528538.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@tobiasdiez](#comment:65):\n> Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder.\n\nIs all of `/home/gitpod` in the workspace?",
    "created_at": "2021-12-27T21:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528538",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@tobiasdiez](#comment:65):
> Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder.

Is all of `/home/gitpod` in the workspace?



---

archive/issue_comments_528539.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@tobiasdiez](#comment:62):\n> Replying to [@mkoeppe](#comment:57):\n> > Overall I think it's too slow to fit well in the \"ephemeral workspace\" philosophy of gitpod\n\n> \n> It's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature [...] \n\nWhy does this have to wait for the ticket being merged? Can it not be done from an arbitrary branch?",
    "created_at": "2021-12-27T21:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528539",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@tobiasdiez](#comment:62):
> Replying to [@mkoeppe](#comment:57):
> > Overall I think it's too slow to fit well in the "ephemeral workspace" philosophy of gitpod

> 
> It's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature [...] 

Why does this have to wait for the ticket being merged? Can it not be done from an arbitrary branch?



---

archive/issue_comments_528540.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@mkoeppe](#comment:67):\n> Replying to [@tobiasdiez](#comment:65):\n> > Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder.\n\n> \n> Is all of `/home/gitpod` in the workspace?\n\nThe \"workspace\" is in `/workspace/sagetrac-mirror`, and only changes to this folder are preserved in prebuilds. On the other hand, the docker image can change system folders such as `/home/gitpod` and those changes are accessible during the prebuild. I couldn't find out a way to change something in `/workspace` using the docker image (gitpod also handles the git checkout for you etc).",
    "created_at": "2021-12-28T12:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528540",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@mkoeppe](#comment:67):
> Replying to [@tobiasdiez](#comment:65):
> > Sadly gitpod only preserves changes to the workspace folder during prebuilds, so the the `make` in `.gitpod.yml` needs to write everything in the local workspace folder and not in some global/system folder.

> 
> Is all of `/home/gitpod` in the workspace?

The "workspace" is in `/workspace/sagetrac-mirror`, and only changes to this folder are preserved in prebuilds. On the other hand, the docker image can change system folders such as `/home/gitpod` and those changes are accessible during the prebuild. I couldn't find out a way to change something in `/workspace` using the docker image (gitpod also handles the git checkout for you etc).



---

archive/issue_comments_528541.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@mkoeppe](#comment:68):\n> Replying to [@tobiasdiez](#comment:62):\n> > Replying to [@mkoeppe](#comment:57):\n> > > Overall I think it's too slow to fit well in the \"ephemeral workspace\" philosophy of gitpod\n\n> > \n> > It's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature [...] \n\n> \n> Why does this have to wait for the ticket being merged? Can it not be done from an arbitrary branch?\n\nWhat needs to be done is to activate the gitpod app for github on the org level. This could be done also before this ticket is merged, but I'm not sure if it would pick up the gitpod config or if that one needs to be present in the default branch.\n\nThe prebuild can be configured to run for certain branches, see https://www.gitpod.io/docs/prebuilds#github-specific-configuration. Currently, it uses the default config which enables prebuilds only for the default branch (= develop).",
    "created_at": "2021-12-28T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528541",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@mkoeppe](#comment:68):
> Replying to [@tobiasdiez](#comment:62):
> > Replying to [@mkoeppe](#comment:57):
> > > Overall I think it's too slow to fit well in the "ephemeral workspace" philosophy of gitpod

> > 
> > It's only slow currently as the whole build of sage is triggered everytime a workspace is started. Once this ticket is merged, one could activate gitpods 'prebuild' feature [...] 

> 
> Why does this have to wait for the ticket being merged? Can it not be done from an arbitrary branch?

What needs to be done is to activate the gitpod app for github on the org level. This could be done also before this ticket is merged, but I'm not sure if it would pick up the gitpod config or if that one needs to be present in the default branch.

The prebuild can be configured to run for certain branches, see https://www.gitpod.io/docs/prebuilds#github-specific-configuration. Currently, it uses the default config which enables prebuilds only for the default branch (= develop).



---

archive/issue_comments_528542.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nWould https://www.gitpod.io/docs/prebuilds#manual-prebuilds work, or does this also depend on the org-level activation?",
    "created_at": "2021-12-28T18:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528542",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:71" align="right">comment:71</div>

Would https://www.gitpod.io/docs/prebuilds#manual-prebuilds work, or does this also depend on the org-level activation?



---

archive/issue_comments_528543.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba\">eab7958</a></td><td><code>docker/.gitpod.Dockerfile: Use sage-get-system-packages</code></td></tr></table>\n",
    "created_at": "2021-12-28T19:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba">eab7958</a></td><td><code>docker/.gitpod.Dockerfile: Use sage-get-system-packages</code></td></tr></table>




---

archive/issue_comments_528544.json:
```json
{
    "body": "Changed commit from **[1ce6c77](https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e)** to **[eab7958](https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba)**",
    "created_at": "2021-12-28T19:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1ce6c77](https://github.com/sagemath/sagetrac-mirror/commit/1ce6c771f512f9ba481318f7dec43aa20d4b2a4e)** to **[eab7958](https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba)**



---

archive/issue_comments_528545.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@tobiasdiez](#comment:60):\n> Replying to [@mkoeppe](#comment:56):\n> > -1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it\n\n> \n> Okay, but I couldn't figure out how to use this in a Docker file that needs to be static (and not be generated). \n\nI've pushed a change that implements it, take a look",
    "created_at": "2021-12-28T19:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528545",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@tobiasdiez](#comment:60):
> Replying to [@mkoeppe](#comment:56):
> > -1 on hardcoding (again) the list of Debian packages. We have infrastructure for that - use it

> 
> Okay, but I couldn't figure out how to use this in a Docker file that needs to be static (and not be generated). 

I've pushed a change that implements it, take a look



---

archive/issue_comments_528546.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\n(I've only tested this locally with `DOCKER_BUILDKIT=0 docker build . -f docker/.gitpod.Dockerfile ` to the end of the configure run)",
    "created_at": "2021-12-28T19:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528546",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">comment:74</div>

(I've only tested this locally with `DOCKER_BUILDKIT=0 docker build . -f docker/.gitpod.Dockerfile ` to the end of the configure run)



---

archive/issue_comments_528547.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThanks, this looks good but for some reason the docker build on gitpod doesn't succeed. Still have to investigate why (maybe some system package is not installed and now needs to be built, which increases the built time too much?).\n\nFor the record, these are the system packages that are installed now\n\n```\n#9 2.646 The following additional packages will be installed:\n#9 2.646   binutils-common binutils-x86-64-linux-gnu cmake-data fflas-ffpack-common\n#9 2.646   gcc-10-base gettext-base gfortran-9 libamd2 libarchive13 libatlas3-base\n#9 2.646   libatomic1 libbinutils libblas-dev libblas3 libboost1.71-dev libbraiding0\n#9 2.646   libbrial-groebner3 libbrial3 libbtf1 libcamd2 libcc1-0 libccolamd2 libcdd0d\n#9 2.646   libcholmod3 libcliquer1 libcolamd2 libcroco3 libctf0 libcurl4 libcxsparse3\n#9 2.646   libdrm-amdgpu1 libdrm-common libdrm-intel1 libdrm-nouveau2 libdrm-radeon1\n#9 2.646   libdrm2 libec5 libecm1 libecm1-dev libecm1-dev-common libflint-2.5.2\n#9 2.646   libflint-arb2 libfltk-gl1.3 libfltk-images1.3 libfltk1.3 libgc1c2 libgcc-s1\n#9 2.646   libgd3 libgf2x3 libgfortran-9-dev libgfortran5 libgiac0 libgivaro9 libgl1\n#9 2.646   libgl1-mesa-dri libgl2ps1.4 libglapi-mesa libglpk40 libglvnd0 libglx-mesa0\n#9 2.646   libglx0 libgomp1 libgraphblas3 libgsl23 libgslcblas0 libhomfly0 libiml0\n#9 2.646   libitm1 libjsoncpp1 libklu1 liblapack-dev liblapack3 libldl2 liblfunction0\n#9 2.646   libllvm12 liblrcalc1 liblsan0 libm4ri-0.0.20200125 libm4ri-dev\n#9 2.646   libm4rie-0.0.20200125 libmetis5 libmongoose2 libmpfi-dev-common libmpfi0\n#9 2.646   libnauty2 libnorm-dev libnorm1 libntl43 libopenblas-pthread-dev libopenblas0\n#9 2.646   libopenblas0-pthread libpaper-utils libpaper1 libpari-gmp-tls6 libpciaccess0\n#9 2.646   libpcre16-3 libpcre3 libpcre32-3 libpcrecpp0v5 libpgm-5.2-0 libpgm-dev\n#9 2.646   libplanarity0 libppl-c4 libppl14 libpython3.8 libpython3.8-dev\n#9 2.650   libpython3.8-minimal libpython3.8-stdlib libquadmath0 librbio2 librhash0\n#9 2.650   librw0 libsensors-config libsensors5 libsingular4-dev-common libsingular4m1\n#9 2.650   libsodium-dev libsodium23 libspqr2 libssl1.1 libstdc++6\n#9 2.650   libsuitesparseconfig5 libsymmetrica2 libtachyon-mt-0 libtcl8.6 libtk8.6\n#9 2.650   libtsan0 libubsan1 libumfpack5 libuv1 libvpx-dev libvpx6 libvulkan1\n#9 2.650   libx11-xcb1 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0\n#9 2.650   libxcb-sync1 libxcb-xfixes0 libxcursor1 libxfixes3 libxft2 libxinerama1\n#9 2.650   libxmuu1 libxpm-dev libxpm4 libxshmfence1 libxss1 libxxf86vm1 libzmq5\n#9 2.650   libzn-poly-0.9 pari-gp python3-lib2to3 python3.8 python3.8-minimal\n#9 2.650   r-base-core singular-data singular-modules singular-ui sympow-data\n#9 2.650   tachyon-bin-nox xauth xdg-utils\n```",
    "created_at": "2021-12-29T12:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528547",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:75" align="right">comment:75</div>

Thanks, this looks good but for some reason the docker build on gitpod doesn't succeed. Still have to investigate why (maybe some system package is not installed and now needs to be built, which increases the built time too much?).

For the record, these are the system packages that are installed now

```
#9 2.646 The following additional packages will be installed:
#9 2.646   binutils-common binutils-x86-64-linux-gnu cmake-data fflas-ffpack-common
#9 2.646   gcc-10-base gettext-base gfortran-9 libamd2 libarchive13 libatlas3-base
#9 2.646   libatomic1 libbinutils libblas-dev libblas3 libboost1.71-dev libbraiding0
#9 2.646   libbrial-groebner3 libbrial3 libbtf1 libcamd2 libcc1-0 libccolamd2 libcdd0d
#9 2.646   libcholmod3 libcliquer1 libcolamd2 libcroco3 libctf0 libcurl4 libcxsparse3
#9 2.646   libdrm-amdgpu1 libdrm-common libdrm-intel1 libdrm-nouveau2 libdrm-radeon1
#9 2.646   libdrm2 libec5 libecm1 libecm1-dev libecm1-dev-common libflint-2.5.2
#9 2.646   libflint-arb2 libfltk-gl1.3 libfltk-images1.3 libfltk1.3 libgc1c2 libgcc-s1
#9 2.646   libgd3 libgf2x3 libgfortran-9-dev libgfortran5 libgiac0 libgivaro9 libgl1
#9 2.646   libgl1-mesa-dri libgl2ps1.4 libglapi-mesa libglpk40 libglvnd0 libglx-mesa0
#9 2.646   libglx0 libgomp1 libgraphblas3 libgsl23 libgslcblas0 libhomfly0 libiml0
#9 2.646   libitm1 libjsoncpp1 libklu1 liblapack-dev liblapack3 libldl2 liblfunction0
#9 2.646   libllvm12 liblrcalc1 liblsan0 libm4ri-0.0.20200125 libm4ri-dev
#9 2.646   libm4rie-0.0.20200125 libmetis5 libmongoose2 libmpfi-dev-common libmpfi0
#9 2.646   libnauty2 libnorm-dev libnorm1 libntl43 libopenblas-pthread-dev libopenblas0
#9 2.646   libopenblas0-pthread libpaper-utils libpaper1 libpari-gmp-tls6 libpciaccess0
#9 2.646   libpcre16-3 libpcre3 libpcre32-3 libpcrecpp0v5 libpgm-5.2-0 libpgm-dev
#9 2.646   libplanarity0 libppl-c4 libppl14 libpython3.8 libpython3.8-dev
#9 2.650   libpython3.8-minimal libpython3.8-stdlib libquadmath0 librbio2 librhash0
#9 2.650   librw0 libsensors-config libsensors5 libsingular4-dev-common libsingular4m1
#9 2.650   libsodium-dev libsodium23 libspqr2 libssl1.1 libstdc++6
#9 2.650   libsuitesparseconfig5 libsymmetrica2 libtachyon-mt-0 libtcl8.6 libtk8.6
#9 2.650   libtsan0 libubsan1 libumfpack5 libuv1 libvpx-dev libvpx6 libvulkan1
#9 2.650   libx11-xcb1 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0
#9 2.650   libxcb-sync1 libxcb-xfixes0 libxcursor1 libxfixes3 libxft2 libxinerama1
#9 2.650   libxmuu1 libxpm-dev libxpm4 libxshmfence1 libxss1 libxxf86vm1 libzmq5
#9 2.650   libzn-poly-0.9 pari-gp python3-lib2to3 python3.8 python3.8-minimal
#9 2.650   r-base-core singular-data singular-modules singular-ui sympow-data
#9 2.650   tachyon-bin-nox xauth xdg-utils
```



---

archive/issue_comments_528548.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nwhy does it want `libatlas3-base` ? Besides, `flint-2.5.2` is too old.\nOne should also be able to install `mpfr`, `mpc` - assuming they are not too old.",
    "created_at": "2021-12-29T12:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528548",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:76" align="right">comment:76</div>

why does it want `libatlas3-base` ? Besides, `flint-2.5.2` is too old.
One should also be able to install `mpfr`, `mpc` - assuming they are not too old.



---

archive/issue_comments_528549.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThanks for looking into this.\nmpfr and mpc are probably already installed (in the gitpod base image). At least configure says \n\n```\n#18 41.11 mpc-1.1.0:                                   using system package; SPKG will not be installed\n#18 41.15 mpfi-1.5.2:                                  using system package; SPKG will not be installed\n#18 41.19 mpfr-4.0.1.p0:                               using system package; SPKG will not be installed\n```",
    "created_at": "2021-12-29T12:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528549",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:77" align="right">comment:77</div>

Thanks for looking into this.
mpfr and mpc are probably already installed (in the gitpod base image). At least configure says 

```
#18 41.11 mpc-1.1.0:                                   using system package; SPKG will not be installed
#18 41.15 mpfi-1.5.2:                                  using system package; SPKG will not be installed
#18 41.19 mpfr-4.0.1.p0:                               using system package; SPKG will not be installed
```



---

archive/issue_comments_528550.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb\">ecaa007</a></td><td><code>docker/.gitpod.Dockerfile: Filter out flint</code></td></tr></table>\n",
    "created_at": "2021-12-29T18:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb">ecaa007</a></td><td><code>docker/.gitpod.Dockerfile: Filter out flint</code></td></tr></table>




---

archive/issue_comments_528551.json:
```json
{
    "body": "Changed commit from **[eab7958](https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba)** to **[ecaa007](https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb)**",
    "created_at": "2021-12-29T18:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528551",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eab7958](https://github.com/sagemath/sagetrac-mirror/commit/eab7958341e493f2fe95952783412900e1b916ba)** to **[ecaa007](https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb)**



---

archive/issue_comments_528552.json:
```json
{
    "body": "Changed commit from **[ecaa007](https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb)** to **[689882d](https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c)**",
    "created_at": "2021-12-30T05:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528552",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ecaa007](https://github.com/sagemath/sagetrac-mirror/commit/ecaa007affce524ed7c7f77ee22b9992c3a938fb)** to **[689882d](https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c)**



---

archive/issue_comments_528553.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c\">689882d</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Use prefix=/workspace/sage-local</code></td></tr></table>\n",
    "created_at": "2021-12-30T05:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528553",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c">689882d</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Use prefix=/workspace/sage-local</code></td></tr></table>




---

archive/issue_comments_528554.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11\">20617a4</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Use prefix=/workspace/sage-local</code></td></tr></table>\n",
    "created_at": "2021-12-30T06:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528554",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11">20617a4</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Use prefix=/workspace/sage-local</code></td></tr></table>




---

archive/issue_comments_528555.json:
```json
{
    "body": "Changed commit from **[689882d](https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c)** to **[20617a4](https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11)**",
    "created_at": "2021-12-30T06:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[689882d](https://github.com/sagemath/sagetrac-mirror/commit/689882dbfd2959693836b62e385a2808cb04cb1c)** to **[20617a4](https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11)**



---

archive/issue_comments_528556.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nUnfortunately `/workspace/sage-local` does not seem to make it from the prebuild to the running image",
    "created_at": "2021-12-30T07:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528556",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

Unfortunately `/workspace/sage-local` does not seem to make it from the prebuild to the running image



---

archive/issue_comments_528557.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609\">a0ffed5</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Stage SAGE_LOCAL in /home/gitpod/sage-local, move into place in 'before' script</code></td></tr></table>\n",
    "created_at": "2021-12-30T07:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528557",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609">a0ffed5</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Stage SAGE_LOCAL in /home/gitpod/sage-local, move into place in 'before' script</code></td></tr></table>




---

archive/issue_comments_528558.json:
```json
{
    "body": "Changed commit from **[20617a4](https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11)** to **[a0ffed5](https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609)**",
    "created_at": "2021-12-30T07:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528558",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20617a4](https://github.com/sagemath/sagetrac-mirror/commit/20617a4af28236bd35a466ef3a9403eb7f341a11)** to **[a0ffed5](https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609)**



---

archive/issue_comments_528559.json:
```json
{
    "body": "Changed commit from **[a0ffed5](https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609)** to **[cfa47b0](https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163)**",
    "created_at": "2021-12-30T07:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528559",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a0ffed5](https://github.com/sagemath/sagetrac-mirror/commit/a0ffed57aa4ae4a011ec4370b0a971815521a609)** to **[cfa47b0](https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163)**



---

archive/issue_comments_528560.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163\">cfa47b0</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Stage SAGE_LOCAL in /home/gitpod/sage-local, move into place in 'before' script</code></td></tr></table>\n",
    "created_at": "2021-12-30T07:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528560",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163">cfa47b0</a></td><td><code>.gitpod.yml, .gitpod.Dockerfile: Stage SAGE_LOCAL in /home/gitpod/sage-local, move into place in 'before' script</code></td></tr></table>




---

archive/issue_comments_528561.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nThis seems to work now",
    "created_at": "2021-12-30T09:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528561",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

This seems to work now



---

archive/issue_comments_528562.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nThanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). Do you really think that the solution with the prefix + symbolic link + moving around sage-local is easier than setting a few env variables?\n\nMaybe it would make sense to introduce a `base-prefix` setting that can be set to find packages installed there, but which doesn't overwrite the `prefix`. That could be also handy for the multi-stage github action.",
    "created_at": "2021-12-30T12:48:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528562",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:85" align="right">comment:85</div>

Thanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). Do you really think that the solution with the prefix + symbolic link + moving around sage-local is easier than setting a few env variables?

Maybe it would make sense to introduce a `base-prefix` setting that can be set to find packages installed there, but which doesn't overwrite the `prefix`. That could be also handy for the multi-stage github action.



---

archive/issue_comments_528563.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nI think also the `mv` command should be in `init` and not `before` as the latter is invoked also after a prebuild and would thus overwrite the changes to sage-local during the prebuild. https://www.gitpod.io/docs/config-start-tasks",
    "created_at": "2021-12-30T12:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528563",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:86" align="right">comment:86</div>

I think also the `mv` command should be in `init` and not `before` as the latter is invoked also after a prebuild and would thus overwrite the changes to sage-local during the prebuild. https://www.gitpod.io/docs/config-start-tasks



---

archive/issue_comments_528564.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@tobiasdiez](#comment:85):\n> Thanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). \n\nAre you saying that `/workspace` is not the workspace?",
    "created_at": "2021-12-30T16:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528564",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@tobiasdiez](#comment:85):
> Thanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). 

Are you saying that `/workspace` is not the workspace?



---

archive/issue_comments_528565.json:
```json
{
    "body": "Changed commit from **[cfa47b0](https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163)** to **[7ba5aad](https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe)**",
    "created_at": "2021-12-30T16:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cfa47b0](https://github.com/sagemath/sagetrac-mirror/commit/cfa47b0dd3cd498103bf67103c3c32c168773163)** to **[7ba5aad](https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe)**



---

archive/issue_comments_528566.json:
```json
{
    "body": "<div id=\"comment:88\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af6472f24e119683a4c3bd6ba9413d5528bc0cfe\">af6472f</a></td><td><code>.gitpod.yml: sage-local setup in 'init', not 'before'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ca50a000079d495063b523710654e7c7e6a1f08\">8ca50a0</a></td><td><code>.gitpod.yml: Use make V=0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe\">7ba5aad</a></td><td><code>docker/.gitpod.Dockerfile: Set ownership of sage-local</code></td></tr></table>\n",
    "created_at": "2021-12-30T16:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:88"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af6472f24e119683a4c3bd6ba9413d5528bc0cfe">af6472f</a></td><td><code>.gitpod.yml: sage-local setup in 'init', not 'before'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ca50a000079d495063b523710654e7c7e6a1f08">8ca50a0</a></td><td><code>.gitpod.yml: Use make V=0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe">7ba5aad</a></td><td><code>docker/.gitpod.Dockerfile: Set ownership of sage-local</code></td></tr></table>




---

archive/issue_comments_528567.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@tobiasdiez](#comment:85):\n> Do you really think that the solution with the prefix + symbolic link + moving around sage-local is easier than setting a few env variables?\n\nYes, because it avoids the complexity - visible to developers - of having a third tier of packages between system packages and SPKGs.",
    "created_at": "2021-12-30T16:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528567",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@tobiasdiez](#comment:85):
> Do you really think that the solution with the prefix + symbolic link + moving around sage-local is easier than setting a few env variables?

Yes, because it avoids the complexity - visible to developers - of having a third tier of packages between system packages and SPKGs.



---

archive/issue_comments_528568.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nApart from these details:\n\nEven with the 1 hour saved by pushing package builds into the prebuild phase saved, the initialization of the workspace still takes much too long for this whole thing to be convenient enough.\n\nI see two directions how to fix this:\n- Orchestrate the prebuild on our own on GH Actions - so that we are not constrained by the gitpod time limit of 1h. This could maybe use the incremental build infrastructure from our `docker/Dockerfile` (`sagemath-dev`) -- just replacing `FROM ubuntu:focal as run-time-dependencies` by `FROM gitpod/workspace-full`... \n\n- Use conda to provide most packages. Then the prebuild easily fits into the 1 hour time limit.",
    "created_at": "2021-12-30T17:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528568",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

Apart from these details:

Even with the 1 hour saved by pushing package builds into the prebuild phase saved, the initialization of the workspace still takes much too long for this whole thing to be convenient enough.

I see two directions how to fix this:
- Orchestrate the prebuild on our own on GH Actions - so that we are not constrained by the gitpod time limit of 1h. This could maybe use the incremental build infrastructure from our `docker/Dockerfile` (`sagemath-dev`) -- just replacing `FROM ubuntu:focal as run-time-dependencies` by `FROM gitpod/workspace-full`... 

- Use conda to provide most packages. Then the prebuild easily fits into the 1 hour time limit.



---

archive/issue_comments_528569.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@mkoeppe](#comment:87):\n> Replying to [@tobiasdiez](#comment:85):\n> > Thanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). \n\n> \n> Are you saying that `/workspace` is not the workspace? \n\nYes, the source code was placed somewhere like `/workspace/sagetrac-mirror` if I remember correctly. Cannot check currently as the recent changes triggered a rebuild of the docker image.",
    "created_at": "2021-12-30T17:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528569",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@mkoeppe](#comment:87):
> Replying to [@tobiasdiez](#comment:85):
> > Thanks! But now the sage-local folder is outside of the actual workspace (which seems to be something like `workspace/<some name based on the branch/repo>`). 

> 
> Are you saying that `/workspace` is not the workspace? 

Yes, the source code was placed somewhere like `/workspace/sagetrac-mirror` if I remember correctly. Cannot check currently as the recent changes triggered a rebuild of the docker image.



---

archive/issue_comments_528570.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nI think from https://www.gitpod.io/docs/checkout-location it's clear that `/workspace` is the workspace. Yes, the source is cloned into a subdirectory of it, but all of `/workspace` is saved.",
    "created_at": "2021-12-30T17:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">comment:92</div>

I think from https://www.gitpod.io/docs/checkout-location it's clear that `/workspace` is the workspace. Yes, the source is cloned into a subdirectory of it, but all of `/workspace` is saved.



---

archive/issue_comments_528571.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@mkoeppe](#comment:90):\n> Even with the 1 hour saved by pushing package builds into the prebuild phase saved, the initialization of the workspace still takes much too long for this whole thing to be convenient enough.\n\nTo make sure we are talking about the same thing: the docker image builds most system (non-python) packages, while the prebuild (everything in `init`) mostly builds the python packages and compiles sage. Both builds have currently a timeout of 1h (so in total the build can take 2h).\n\nWhat takes most time in the second prebuild phase is the compilation of scipy (and of maxima). That's why I proposed to use pypi wheels #32754.",
    "created_at": "2021-12-30T17:13:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528571",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@mkoeppe](#comment:90):
> Even with the 1 hour saved by pushing package builds into the prebuild phase saved, the initialization of the workspace still takes much too long for this whole thing to be convenient enough.

To make sure we are talking about the same thing: the docker image builds most system (non-python) packages, while the prebuild (everything in `init`) mostly builds the python packages and compiles sage. Both builds have currently a timeout of 1h (so in total the build can take 2h).

What takes most time in the second prebuild phase is the compilation of scipy (and of maxima). That's why I proposed to use pypi wheels #32754.



---

archive/issue_comments_528572.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@mkoeppe](#comment:92):\n> I think from https://www.gitpod.io/docs/checkout-location it's clear that `/workspace` is the workspace. Yes, the source is cloned into a subdirectory of it, but all of `/workspace` is saved.\n\nIt's probably a question of what a \"workspace\" folder is, but at least only `/workspace/sagetrac-mirror` was shown in the right source file browser. Of course everything in `/workspace` is available but people need to use bash commands to investigate it. Then one could also put sage-local directly in `/home/gitpod/sage-local`.",
    "created_at": "2021-12-30T17:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528572",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@mkoeppe](#comment:92):
> I think from https://www.gitpod.io/docs/checkout-location it's clear that `/workspace` is the workspace. Yes, the source is cloned into a subdirectory of it, but all of `/workspace` is saved.

It's probably a question of what a "workspace" folder is, but at least only `/workspace/sagetrac-mirror` was shown in the right source file browser. Of course everything in `/workspace` is available but people need to use bash commands to investigate it. Then one could also put sage-local directly in `/home/gitpod/sage-local`.



---

archive/issue_comments_528573.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@tobiasdiez](#comment:93):\n> What takes most time in the second prebuild phase \n\n(you mean the `init` script)\n> is the compilation of scipy (and of maxima).\n\n... also the build of sagelib itself from scratch takes pretty long.",
    "created_at": "2021-12-30T17:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528573",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@tobiasdiez](#comment:93):
> What takes most time in the second prebuild phase 

(you mean the `init` script)
> is the compilation of scipy (and of maxima).

... also the build of sagelib itself from scratch takes pretty long.



---

archive/issue_comments_528574.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@tobiasdiez](#comment:95):\n> Then one could also put sage-local directly in `/home/gitpod/sage-local`.\n\nDidn't you explain to me that stuff outside of `/workspace` is not saved?",
    "created_at": "2021-12-30T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528574",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@tobiasdiez](#comment:95):
> Then one could also put sage-local directly in `/home/gitpod/sage-local`.

Didn't you explain to me that stuff outside of `/workspace` is not saved?



---

archive/issue_comments_528575.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@mkoeppe](#comment:96):\n> Replying to [@tobiasdiez](#comment:93):\n> > What takes most time in the second prebuild phase \n\n> (you mean the `init` script)\n\nYes\n\n> > is the compilation of scipy (and of maxima).\n\n> ... also the build of sagelib itself from scratch takes pretty long.\n\nYes, but that's something you probably cannot optimize/outsource. And I think scipy took longer to compile for me.",
    "created_at": "2021-12-30T18:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528575",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@mkoeppe](#comment:96):
> Replying to [@tobiasdiez](#comment:93):
> > What takes most time in the second prebuild phase 

> (you mean the `init` script)

Yes

> > is the compilation of scipy (and of maxima).

> ... also the build of sagelib itself from scratch takes pretty long.

Yes, but that's something you probably cannot optimize/outsource. And I think scipy took longer to compile for me.



---

archive/issue_comments_528576.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@mkoeppe](#comment:97):\n> Replying to [@tobiasdiez](#comment:95):\n> > Then one could also put sage-local directly in `/home/gitpod/sage-local`.\n\n> \n> Didn't you explain to me that stuff outside of `/workspace` is not saved?\n\nYes, sorry, I've forgotten about this one :-). Still, the issue of not having sage-local in the IDE remains.",
    "created_at": "2021-12-30T18:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528576",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@mkoeppe](#comment:97):
> Replying to [@tobiasdiez](#comment:95):
> > Then one could also put sage-local directly in `/home/gitpod/sage-local`.

> 
> Didn't you explain to me that stuff outside of `/workspace` is not saved?

Yes, sorry, I've forgotten about this one :-). Still, the issue of not having sage-local in the IDE remains.



---

archive/issue_comments_528577.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> the issue of not having sage-local in the IDE remains.\n\nThere are the symlinks `prefix` and `venv`, which can be used",
    "created_at": "2021-12-30T19:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528577",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@tobiasdiez](#comment:99):
> the issue of not having sage-local in the IDE remains.

There are the symlinks `prefix` and `venv`, which can be used



---

archive/issue_comments_528578.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tobiasdiez](#comment:98):\n> Replying to [@mkoeppe](#comment:96):\n> > ... also the build of sagelib itself from scratch takes pretty long.\n\n> \n> Yes, but that's something you probably cannot optimize/outsource. \n\nWell, I think this has actually all been implemented already in the Sage GitLab Docker build. I've opened #33099 to bring it to GH Actions and then we can extend it to provide variants using `FROM gitpod/workspace-full`.",
    "created_at": "2021-12-30T19:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528578",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tobiasdiez](#comment:98):
> Replying to [@mkoeppe](#comment:96):
> > ... also the build of sagelib itself from scratch takes pretty long.

> 
> Yes, but that's something you probably cannot optimize/outsource. 

Well, I think this has actually all been implemented already in the Sage GitLab Docker build. I've opened #33099 to bring it to GH Actions and then we can extend it to provide variants using `FROM gitpod/workspace-full`.



---

archive/issue_comments_528579.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c\">74eeddb</a></td><td><code>Use timeout to make sure docker build and prebuild don't fail</code></td></tr></table>\n",
    "created_at": "2021-12-30T20:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528579",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c">74eeddb</a></td><td><code>Use timeout to make sure docker build and prebuild don't fail</code></td></tr></table>




---

archive/issue_comments_528580.json:
```json
{
    "body": "Changed commit from **[7ba5aad](https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe)** to **[74eeddb](https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c)**",
    "created_at": "2021-12-30T20:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ba5aad](https://github.com/sagemath/sagetrac-mirror/commit/7ba5aadf7bdf31efab0cadc6b9d44dd771e6dbbe)** to **[74eeddb](https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c)**



---

archive/issue_comments_528581.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAccording to `top`, the system seems to be idling a lot during build. I think you can go higher than `make -j8`, perhaps 16?",
    "created_at": "2021-12-30T20:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528581",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

According to `top`, the system seems to be idling a lot during build. I think you can go higher than `make -j8`, perhaps 16?



---

archive/issue_comments_528582.json:
```json
{
    "body": "Changed commit from **[74eeddb](https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c)** to **[f686b2e](https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae)**",
    "created_at": "2021-12-30T20:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[74eeddb](https://github.com/sagemath/sagetrac-mirror/commit/74eeddbaab16de675af2642d0a4ea4434d32e80c)** to **[f686b2e](https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae)**



---

archive/issue_comments_528583.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b96111f30954d9086a6f9b5b81f05e0c64df0f\">d5b9611</a></td><td><code>Fix ssh key format</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae\">f686b2e</a></td><td><code>We also don't want new lines in our ssh key</code></td></tr></table>\n",
    "created_at": "2021-12-30T20:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528583",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b96111f30954d9086a6f9b5b81f05e0c64df0f">d5b9611</a></td><td><code>Fix ssh key format</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae">f686b2e</a></td><td><code>We also don't want new lines in our ssh key</code></td></tr></table>




---

archive/issue_comments_528584.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@mkoeppe](#comment:100):\n> Replying to [@tobiasdiez](#comment:99):\n> > the issue of not having sage-local in the IDE remains.\n\n> \n> There are the symlinks `prefix` and `venv`, which can be used\n\nGood point.",
    "created_at": "2021-12-30T20:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528584",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@mkoeppe](#comment:100):
> Replying to [@tobiasdiez](#comment:99):
> > the issue of not having sage-local in the IDE remains.

> 
> There are the symlinks `prefix` and `venv`, which can be used

Good point.



---

archive/issue_comments_528585.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@mkoeppe](#comment:103):\n> According to `top`, the system seems to be idling a lot during build. I think you can go higher than `make -j8`, perhaps 16?\n\nWill try.",
    "created_at": "2021-12-30T20:43:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528585",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@mkoeppe](#comment:103):
> According to `top`, the system seems to be idling a lot during build. I think you can go higher than `make -j8`, perhaps 16?

Will try.



---

archive/issue_comments_528586.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094\">1fa1165</a></td><td><code>Use more build jobs</code></td></tr></table>\n",
    "created_at": "2021-12-30T20:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528586",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094">1fa1165</a></td><td><code>Use more build jobs</code></td></tr></table>




---

archive/issue_comments_528587.json:
```json
{
    "body": "Changed commit from **[f686b2e](https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae)** to **[1fa1165](https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094)**",
    "created_at": "2021-12-30T20:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f686b2e](https://github.com/sagemath/sagetrac-mirror/commit/f686b2ed2df93506186f08479a1c929dd1aad6ae)** to **[1fa1165](https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094)**



---

archive/issue_comments_528588.json:
```json
{
    "body": "Changed commit from **[1fa1165](https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094)** to **[4b760c8](https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a)**",
    "created_at": "2021-12-31T11:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528588",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1fa1165](https://github.com/sagemath/sagetrac-mirror/commit/1fa1165120b6fcf8f81aa4875eb856438de77094)** to **[4b760c8](https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a)**



---

archive/issue_comments_528589.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f07f04a8d247386811518185d738a06b6bd8dec7\">f07f04a</a></td><td><code>Use minimal gitpod docker image as base</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052d8fed36f6f81083da8f7503050df798b2ada3\">052d8fe</a></td><td><code>Remove PRIVATE_SSH_KEY after we made use of it for security reasons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a\">4b760c8</a></td><td><code>Sligtly reduce prebuild timeout</code></td></tr></table>\n",
    "created_at": "2021-12-31T11:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f07f04a8d247386811518185d738a06b6bd8dec7">f07f04a</a></td><td><code>Use minimal gitpod docker image as base</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052d8fed36f6f81083da8f7503050df798b2ada3">052d8fe</a></td><td><code>Remove PRIVATE_SSH_KEY after we made use of it for security reasons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a">4b760c8</a></td><td><code>Sligtly reduce prebuild timeout</code></td></tr></table>




---

archive/issue_comments_528590.json:
```json
{
    "body": "Changed commit from **[4b760c8](https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a)** to **[d9babe8](https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76)**",
    "created_at": "2021-12-31T12:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4b760c8](https://github.com/sagemath/sagetrac-mirror/commit/4b760c8ff6f944f7854f60ecd8a33f732154233a)** to **[d9babe8](https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76)**



---

archive/issue_comments_528591.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76\">d9babe8</a></td><td><code>Create workspace folder</code></td></tr></table>\n",
    "created_at": "2021-12-31T12:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76">d9babe8</a></td><td><code>Create workspace folder</code></td></tr></table>




---

archive/issue_comments_528592.json:
```json
{
    "body": "Changed commit from **[d9babe8](https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76)** to **[312a364](https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f)**",
    "created_at": "2021-12-31T12:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528592",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d9babe8](https://github.com/sagemath/sagetrac-mirror/commit/d9babe8d5d5a487784ff6bd5defd7f2233d85f76)** to **[312a364](https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f)**



---

archive/issue_comments_528593.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f\">312a364</a></td><td><code>Add trac to known hosts</code></td></tr></table>\n",
    "created_at": "2021-12-31T12:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528593",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f">312a364</a></td><td><code>Add trac to known hosts</code></td></tr></table>




---

archive/issue_comments_528594.json:
```json
{
    "body": "Changed commit from **[312a364](https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f)** to **[d3e4ede](https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5)**",
    "created_at": "2021-12-31T12:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528594",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[312a364](https://github.com/sagemath/sagetrac-mirror/commit/312a3643f827573e35619b2a66845fe24de1417f)** to **[d3e4ede](https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5)**



---

archive/issue_comments_528595.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5\">d3e4ede</a></td><td><code>Create folder with sudo</code></td></tr></table>\n",
    "created_at": "2021-12-31T12:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5">d3e4ede</a></td><td><code>Create folder with sudo</code></td></tr></table>




---

archive/issue_comments_528596.json:
```json
{
    "body": "Changed commit from **[d3e4ede](https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5)** to **[7481266](https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c)**",
    "created_at": "2021-12-31T13:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d3e4ede](https://github.com/sagemath/sagetrac-mirror/commit/d3e4ede68b3dd53d9bfbc8daadd5b6068cedd6a5)** to **[7481266](https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c)**



---

archive/issue_comments_528597.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb7f7f6d0b2b3a2e05fb5b09f946ee17df2cd889\">fb7f7f6</a></td><td><code>Don't set pyenv when using workspace-base</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c\">7481266</a></td><td><code>Slightly increase build timeout</code></td></tr></table>\n",
    "created_at": "2021-12-31T13:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528597",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb7f7f6d0b2b3a2e05fb5b09f946ee17df2cd889">fb7f7f6</a></td><td><code>Don't set pyenv when using workspace-base</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c">7481266</a></td><td><code>Slightly increase build timeout</code></td></tr></table>




---

archive/issue_comments_528598.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310\">3ef2a76</a></td><td><code>Uncomment pyenv stuff</code></td></tr></table>\n",
    "created_at": "2021-12-31T16:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528598",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310">3ef2a76</a></td><td><code>Uncomment pyenv stuff</code></td></tr></table>




---

archive/issue_comments_528599.json:
```json
{
    "body": "Changed commit from **[7481266](https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c)** to **[3ef2a76](https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310)**",
    "created_at": "2021-12-31T16:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528599",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7481266](https://github.com/sagemath/sagetrac-mirror/commit/7481266f6278de218f38ceabf4c97e0a22f5a22c)** to **[3ef2a76](https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310)**



---

archive/issue_comments_528600.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f\">fcb7f92</a></td><td><code>Try again with smaller timeout</code></td></tr></table>\n",
    "created_at": "2021-12-31T17:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528600",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f">fcb7f92</a></td><td><code>Try again with smaller timeout</code></td></tr></table>




---

archive/issue_comments_528601.json:
```json
{
    "body": "Changed commit from **[3ef2a76](https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310)** to **[fcb7f92](https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f)**",
    "created_at": "2021-12-31T17:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3ef2a76](https://github.com/sagemath/sagetrac-mirror/commit/3ef2a76f235c4da7719399741df2ae147d14c310)** to **[fcb7f92](https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f)**



---

archive/issue_comments_528602.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@mkoeppe](#comment:71):\n> Would https://www.gitpod.io/docs/prebuilds#manual-prebuilds work, or does this also depend on the org-level activation?\n\nI tried this now, but after about 40 mins it displays the following error:\n\n```\n\n<html><head>\n            <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n                                                                              <title>502 Server Error</title>\n                                                                                                             </head>\n                                                                                                                    <body text=#000000 bgcolor=#ffffff>\n                                <h1>Error: Server Error</h1>\n                                                            <h2>The server encountered a temporary error and could not complete your request.<p>Please try again in 30 seconds.</h2>\n                                                             <h2></h2>\n                                                                      </body></html>\n\n```\n\nI'm not sure if that's an issue with gitpod or something going wrong in sage's build script. According to the logs, matplotlib, scipy, fpylll, sagelib and were still compiling when this error is displayed. Do you have a guess where this message is coming from?",
    "created_at": "2022-01-01T12:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528602",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@mkoeppe](#comment:71):
> Would https://www.gitpod.io/docs/prebuilds#manual-prebuilds work, or does this also depend on the org-level activation?

I tried this now, but after about 40 mins it displays the following error:

```

<html><head>
            <meta http-equiv="content-type" content="text/html;charset=utf-8">
                                                                              <title>502 Server Error</title>
                                                                                                             </head>
                                                                                                                    <body text=#000000 bgcolor=#ffffff>
                                <h1>Error: Server Error</h1>
                                                            <h2>The server encountered a temporary error and could not complete your request.<p>Please try again in 30 seconds.</h2>
                                                             <h2></h2>
                                                                      </body></html>

```

I'm not sure if that's an issue with gitpod or something going wrong in sage's build script. According to the logs, matplotlib, scipy, fpylll, sagelib and were still compiling when this error is displayed. Do you have a guess where this message is coming from?



---

archive/issue_comments_528603.json:
```json
{
    "body": "Changed commit from **[fcb7f92](https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f)** to **[e3adf51](https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f)**",
    "created_at": "2022-01-01T12:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fcb7f92](https://github.com/sagemath/sagetrac-mirror/commit/fcb7f92136932d43021875a334028eaa78aa449f)** to **[e3adf51](https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f)**



---

archive/issue_comments_528604.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f\">e3adf51</a></td><td><code>Try with way shorter timeout</code></td></tr></table>\n",
    "created_at": "2022-01-01T12:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528604",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f">e3adf51</a></td><td><code>Try with way shorter timeout</code></td></tr></table>




---

archive/issue_comments_528605.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAs there seems to be not enough momentum to get #33099 done, another approach would be to reuse the Docker images built already by our portability suite. Pushing the images to `ghcr.io` was just repaired in #30933. I can just add a variant of `ubuntu-focal` that uses `FROM gitpod/workspace-full` and adjusts `SAGE_LOCAL` so it is suitable for gitpod.",
    "created_at": "2022-01-01T17:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528605",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

As there seems to be not enough momentum to get #33099 done, another approach would be to reuse the Docker images built already by our portability suite. Pushing the images to `ghcr.io` was just repaired in #30933. I can just add a variant of `ubuntu-focal` that uses `FROM gitpod/workspace-full` and adjusts `SAGE_LOCAL` so it is suitable for gitpod.



---

archive/issue_comments_528606.json:
```json
{
    "body": "Changed commit from **[e3adf51](https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f)** to **[93150ce](https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f)**",
    "created_at": "2022-01-01T18:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528606",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e3adf51](https://github.com/sagemath/sagetrac-mirror/commit/e3adf517761e492663abc2d4d37d6fe07631ed8f)** to **[93150ce](https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f)**



---

archive/issue_comments_528607.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f\">93150ce</a></td><td><code>tox.ini: Add docker-gitpod-standard</code></td></tr></table>\n",
    "created_at": "2022-01-01T18:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f">93150ce</a></td><td><code>tox.ini: Add docker-gitpod-standard</code></td></tr></table>




---

archive/issue_comments_528608.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nBasically like this (use `tox -e docker-gitpod-standard -- build-local`), except I'd need to put some `sudo` in front of the `apt-get`)",
    "created_at": "2022-01-01T18:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528608",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Basically like this (use `tox -e docker-gitpod-standard -- build-local`), except I'd need to put some `sudo` in front of the `apt-get`)



---

archive/issue_comments_528609.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3116a125a3283b84240c783d3d19900ca740614\">f3116a1</a></td><td><code>tox.ini (conda): Force use of conda's python3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64185798705c4416db04fff577b0abb392445d35\">6418579</a></td><td><code>Merge #32113</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/933134c1d91239b0f633795a5e55b656362fec96\">933134c</a></td><td><code>build/pkgs/gfortran/distros/homebrew.txt: Use gfortran</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1aa9328f098181ab6b9a1c143a52875a797048e6\">1aa9328</a></td><td><code>Merge #32947</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065\">e99a09e</a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b\">edb4364</a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e\">e27e161</a></td><td><code>Merge #32703</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b\">96a45d1</a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157\">59ec3d0</a></td><td><code>Merge #33068</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd\">cbf03d1</a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr></table>\n",
    "created_at": "2022-01-01T18:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528609",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3116a125a3283b84240c783d3d19900ca740614">f3116a1</a></td><td><code>tox.ini (conda): Force use of conda's python3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64185798705c4416db04fff577b0abb392445d35">6418579</a></td><td><code>Merge #32113</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/933134c1d91239b0f633795a5e55b656362fec96">933134c</a></td><td><code>build/pkgs/gfortran/distros/homebrew.txt: Use gfortran</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1aa9328f098181ab6b9a1c143a52875a797048e6">1aa9328</a></td><td><code>Merge #32947</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065">e99a09e</a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b">edb4364</a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e">e27e161</a></td><td><code>Merge #32703</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b">96a45d1</a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157">59ec3d0</a></td><td><code>Merge #33068</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd">cbf03d1</a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr></table>




---

archive/issue_comments_528610.json:
```json
{
    "body": "Changed commit from **[93150ce](https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f)** to **[cbf03d1](https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd)**",
    "created_at": "2022-01-01T18:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[93150ce](https://github.com/sagemath/sagetrac-mirror/commit/93150cec8ecfb56e1777af787a8bdb48bf93262f)** to **[cbf03d1](https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd)**



---

archive/issue_comments_528611.json:
```json
{
    "body": "Dependencies: **#33068**",
    "created_at": "2022-01-01T18:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528611",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33068**



---

archive/issue_comments_528612.json:
```json
{
    "body": "Changed commit from **[cbf03d1](https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd)** to **[4a9edfc](https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f)**",
    "created_at": "2022-01-01T18:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cbf03d1](https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd)** to **[4a9edfc](https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f)**



---

archive/issue_comments_528613.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f\">4a9edfc</a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr></table>\n",
    "created_at": "2022-01-01T18:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f">4a9edfc</a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr></table>




---

archive/issue_comments_528614.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23\">d697d94</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b\">c7cc5cd</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda\">bde9f74</a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>\n",
    "created_at": "2022-01-01T19:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23">d697d94</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b">c7cc5cd</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda">bde9f74</a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>




---

archive/issue_comments_528615.json:
```json
{
    "body": "Changed commit from **[4a9edfc](https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f)** to **[bde9f74](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)**",
    "created_at": "2022-01-01T19:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528615",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4a9edfc](https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f)** to **[bde9f74](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)**



---

archive/issue_comments_528616.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for thinking along. The problem is more this strange 502 error that I now get during the prebuild. I've now opened https://github.com/gitpod-io/gitpod/issues/7413 to investigate where the error comes from. We also might merging this ticket and activate the github app, because then you should also have access to the prebuild logs (which is not possible for the manual prebuild).\n\nHowever, the docker build already works and has not much room for improvement (the only non-Python packages that are currently not finished is singular and maxima). For this I would just wait until gitpod increases its time limit. Using github actions to build docker images, that are then reused by gitpod sounds pretty complicated to me. Gitpod also handles caching and invalidating of the images for you (one needs to rebuild the base docker images for branches that change non-Python packages or if the docker file changes). \n\nWhat still has room for improvement (but also almost fits into the 1h limit) is the prebuild of the Python packages. For this it would be good to reuse wheels to decrease the build time, or maybe use conda. But maybe we should first try it withput this optimization and also wait for gitpod to increase the time limit.   \n\nMay I ask you to push changes to the gitpod docker and yml files to a different branch. Everytime one changes the docker file, one has to sit through 1h. Thanks.",
    "created_at": "2022-01-01T19:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528616",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for thinking along. The problem is more this strange 502 error that I now get during the prebuild. I've now opened https://github.com/gitpod-io/gitpod/issues/7413 to investigate where the error comes from. We also might merging this ticket and activate the github app, because then you should also have access to the prebuild logs (which is not possible for the manual prebuild).

However, the docker build already works and has not much room for improvement (the only non-Python packages that are currently not finished is singular and maxima). For this I would just wait until gitpod increases its time limit. Using github actions to build docker images, that are then reused by gitpod sounds pretty complicated to me. Gitpod also handles caching and invalidating of the images for you (one needs to rebuild the base docker images for branches that change non-Python packages or if the docker file changes). 

What still has room for improvement (but also almost fits into the 1h limit) is the prebuild of the Python packages. For this it would be good to reuse wheels to decrease the build time, or maybe use conda. But maybe we should first try it withput this optimization and also wait for gitpod to increase the time limit.   

May I ask you to push changes to the gitpod docker and yml files to a different branch. Everytime one changes the docker file, one has to sit through 1h. Thanks.



---

archive/issue_comments_528617.json:
```json
{
    "body": "Changed dependencies from **#33068** to **#33068, #30933**",
    "created_at": "2022-01-01T19:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528617",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068** to **#33068, #30933**



---

archive/issue_comments_528618.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSure, I'll work in #33103.",
    "created_at": "2022-01-01T19:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528618",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Sure, I'll work in #33103.



---

archive/issue_comments_528619.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFeel free to revert the branch on the ticket here to what works for you.",
    "created_at": "2022-01-01T19:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528619",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Feel free to revert the branch on the ticket here to what works for you.



---

archive/issue_comments_528620.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@tobiasdiez](#comment:124):\n> We also might merging this ticket and activate the github app, because then you should also have access to the prebuild logs (which is not possible for the manual prebuild).\n\nI think you may want to try this first in your personal [GitHub](../wiki/GitHub) account. Getting this to work shouldn't require to make org-level changes to the `sagemath` organization on [GitHub](../wiki/GitHub).",
    "created_at": "2022-01-01T19:40:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528620",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@tobiasdiez](#comment:124):
> We also might merging this ticket and activate the github app, because then you should also have access to the prebuild logs (which is not possible for the manual prebuild).

I think you may want to try this first in your personal [GitHub](../wiki/GitHub) account. Getting this to work shouldn't require to make org-level changes to the `sagemath` organization on [GitHub](../wiki/GitHub).



---

archive/issue_comments_528621.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nReplying to [@tobiasdiez](#comment:124):\n> or maybe use conda\n\nLooking at https://github.com/gitpod-io/workspace-images/blob/master/full/Dockerfile, nix seems to be available, so this may be another option",
    "created_at": "2022-01-01T20:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528621",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:128" align="right">comment:128</div>

Replying to [@tobiasdiez](#comment:124):
> or maybe use conda

Looking at https://github.com/gitpod-io/workspace-images/blob/master/full/Dockerfile, nix seems to be available, so this may be another option



---

archive/issue_comments_528622.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@mkoeppe](#comment:126):\n> Feel free to revert the branch on the ticket here to what works for you.\n\nCould you maybe revert to 3adf51 for me pls? I don't have a dev pc available and used gitpod to make the necessary changes...\nI was wondering if one should keep your changes to the symlink (commit \u200bc7cc5cd). What was the reason for this change?",
    "created_at": "2022-01-01T21:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528622",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@mkoeppe](#comment:126):
> Feel free to revert the branch on the ticket here to what works for you.

Could you maybe revert to 3adf51 for me pls? I don't have a dev pc available and used gitpod to make the necessary changes...
I was wondering if one should keep your changes to the symlink (commit c7cc5cd). What was the reason for this change?



---

archive/issue_comments_528623.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nReplying to [@mkoeppe](#comment:128):\n> Replying to [@tobiasdiez](#comment:124):\n> > or maybe use conda\n\n> \n> Looking at https://github.com/gitpod-io/workspace-images/blob/master/full/Dockerfile, nix seems to be available, so this may be another option\n\nIs this usually quicker or are the more system packages available?",
    "created_at": "2022-01-01T21:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528623",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:130" align="right">comment:130</div>

Replying to [@mkoeppe](#comment:128):
> Replying to [@tobiasdiez](#comment:124):
> > or maybe use conda

> 
> Looking at https://github.com/gitpod-io/workspace-images/blob/master/full/Dockerfile, nix seems to be available, so this may be another option

Is this usually quicker or are the more system packages available?



---

archive/issue_comments_528624.json:
```json
{
    "body": "Changed commit from **[bde9f74](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)** to **[974eb4c](https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109)**",
    "created_at": "2022-01-01T21:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bde9f74](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)** to **[974eb4c](https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109)**



---

archive/issue_comments_528625.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109\">974eb4c</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr></table>\n",
    "created_at": "2022-01-01T21:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528625",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/974eb4c7a4ac3945e4305d5b5408b2512f536109">974eb4c</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr></table>




---

archive/issue_comments_528626.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nReplying to [@tobiasdiez](#comment:129):\n> Could you maybe revert to 3adf51 for me pls? I don't have a dev pc available and used gitpod to make the necessary changes...\n> I was wondering if one should keep your changes to the symlink (commit \u200bc7cc5cd). \n\nDone, with that change cherry-picked.\n\n> What was the reason for this change?\n\nJust an easier solution that works without using `sudo`, and integrates better with #33103",
    "created_at": "2022-01-01T21:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528626",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:132" align="right">comment:132</div>

Replying to [@tobiasdiez](#comment:129):
> Could you maybe revert to 3adf51 for me pls? I don't have a dev pc available and used gitpod to make the necessary changes...
> I was wondering if one should keep your changes to the symlink (commit c7cc5cd). 

Done, with that change cherry-picked.

> What was the reason for this change?

Just an easier solution that works without using `sudo`, and integrates better with #33103



---

archive/issue_comments_528627.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nReplying to [@tobiasdiez](#comment:130):\n> Replying to [@mkoeppe](#comment:128):\n> > nix seems to be available, so this may be another option\n\n> \n> Is this usually quicker or are the more system packages available?\n\nMore packages, because someone made an effort to package all of sage not so long ago. Not sure in what shape it is though",
    "created_at": "2022-01-01T21:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528627",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:133" align="right">comment:133</div>

Replying to [@tobiasdiez](#comment:130):
> Replying to [@mkoeppe](#comment:128):
> > nix seems to be available, so this may be another option

> 
> Is this usually quicker or are the more system packages available?

More packages, because someone made an effort to package all of sage not so long ago. Not sure in what shape it is though



---

archive/issue_comments_528628.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe nix package for Sage seems maintained up to date.\n\n- https://github.com/NixOS/nixpkgs/tree/master/pkgs/applications/science/math/sage\n- https://github.com/NixOS/nixpkgs/commits/master/pkgs/applications/science/math/sage",
    "created_at": "2022-01-02T09:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528628",
    "user": "https://github.com/slel"
}
```

<div id="comment:4" align="right">comment:4</div>

The nix package for Sage seems maintained up to date.

- https://github.com/NixOS/nixpkgs/tree/master/pkgs/applications/science/math/sage
- https://github.com/NixOS/nixpkgs/commits/master/pkgs/applications/science/math/sage



---

archive/issue_comments_528629.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks for the pointer. Nix seems promising indeed, but I think it would make sense to first create a workable nix environment (e.g. `shell.nix` file) and test it for 'normal' local building before using for gitpod.\n\nThe approach with prefix + symlink was not working for me. Every prebuild that I triggered timed-out without any error message; also when running it from my own fork using the gitpod app integration. I guess something from the gitpod build context slips into the image/prebuild setup. Thus, I've reverted to use of the prebuild of system packages in `home/gitpod/sage-prebuild` and setting env variables so that the prebuild packages are found. That works. Interestingly, this is somewhat similar to how nix works. Current state can be found at https://github.com/tobiasdiez/sagetrac-mirror.\n\nDuring the docker build it suggests to install the following packages\n\n```\nsudo apt-get install  libflint-arb-dev libcdd-dev libcdd-tools ecl libec-dev eclib-tools libflint-dev flintqs libgiac-dev xcas lcalc liblfunction-dev pari-gp2c libpari-dev pari-doc pari-elldata pari-galdata pari-galpol pari-seadata libprimesieve-dev singular libsingular4-dev tox\n```\nSome are excluded (like pari and flint) but other would make sense to install I guess. Should I try manually adding them, or should the `sage-get-system-packages` command perhaps be changed?\n\nWe now have three possible options for the gitpod integration and before we invest more time working on them separately it is probably worthwhile to choose on one of them to proceed further:\n- 1) Only use the gitpod infrastructure to build docker images (non-python packages) and prebuilds (python packages). This is the current version of this ticket.\n- 2) Use github action to build a docker image containing all sage packages. This is #33103.\n- 3) Use version 1, but install non-python packages using nix.",
    "created_at": "2022-01-03T16:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528629",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks for the pointer. Nix seems promising indeed, but I think it would make sense to first create a workable nix environment (e.g. `shell.nix` file) and test it for 'normal' local building before using for gitpod.

The approach with prefix + symlink was not working for me. Every prebuild that I triggered timed-out without any error message; also when running it from my own fork using the gitpod app integration. I guess something from the gitpod build context slips into the image/prebuild setup. Thus, I've reverted to use of the prebuild of system packages in `home/gitpod/sage-prebuild` and setting env variables so that the prebuild packages are found. That works. Interestingly, this is somewhat similar to how nix works. Current state can be found at https://github.com/tobiasdiez/sagetrac-mirror.

During the docker build it suggests to install the following packages

```
sudo apt-get install  libflint-arb-dev libcdd-dev libcdd-tools ecl libec-dev eclib-tools libflint-dev flintqs libgiac-dev xcas lcalc liblfunction-dev pari-gp2c libpari-dev pari-doc pari-elldata pari-galdata pari-galpol pari-seadata libprimesieve-dev singular libsingular4-dev tox
```
Some are excluded (like pari and flint) but other would make sense to install I guess. Should I try manually adding them, or should the `sage-get-system-packages` command perhaps be changed?

We now have three possible options for the gitpod integration and before we invest more time working on them separately it is probably worthwhile to choose on one of them to proceed further:
- 1) Only use the gitpod infrastructure to build docker images (non-python packages) and prebuilds (python packages). This is the current version of this ticket.
- 2) Use github action to build a docker image containing all sage packages. This is #33103.
- 3) Use version 1, but install non-python packages using nix.



---

archive/issue_comments_528630.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI would suggest that we go with 2) (#33103) because its maintenance basically comes for free from the portability test infrastructure.",
    "created_at": "2022-01-03T18:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528630",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

I would suggest that we go with 2) (#33103) because its maintenance basically comes for free from the portability test infrastructure.



---

archive/issue_comments_528631.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIs fine with me. However, that approach has a few disadvantages as far as I can see:\n- The relevant github action might only be triggered after quite some time upon a new (beta) relase as all other github workflows are then also triggered. During this time one would still use the old docker image.\n- The docker image is quite big and thus it takes longer to open a new gitpod workspace.\n- It is harder to add gitpod-specific customization to the docker image (e.g. installing tools that are only needed in this context).\n\nThese are certainly not deal breakers but should be kept in mind.\n\nThe first approach has also a few disadvantages:\n- Currently less packages are built due to the gitpod timeout of 1h\n- Not automatically tested (although this would probably be easy to do)",
    "created_at": "2022-01-03T19:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528631",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:7" align="right">comment:7</div>

Is fine with me. However, that approach has a few disadvantages as far as I can see:
- The relevant github action might only be triggered after quite some time upon a new (beta) relase as all other github workflows are then also triggered. During this time one would still use the old docker image.
- The docker image is quite big and thus it takes longer to open a new gitpod workspace.
- It is harder to add gitpod-specific customization to the docker image (e.g. installing tools that are only needed in this context).

These are certainly not deal breakers but should be kept in mind.

The first approach has also a few disadvantages:
- Currently less packages are built due to the gitpod timeout of 1h
- Not automatically tested (although this would probably be easy to do)



---

archive/issue_comments_528632.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nGreat points. I think we can address the current disadvantages of approach 2 in a follow-up ticket (#33113). In particular, as discussed in [#33103 comment:19](https://github.com/sagemath/sage/issues/33103#comment:19), could use `docker/.gitpod.Dockerfile` again with COPY --from to make the final image smaller (e.g., currently /home/gitpod/sage has the old source tree)",
    "created_at": "2022-01-03T19:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528632",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Great points. I think we can address the current disadvantages of approach 2 in a follow-up ticket (#33113). In particular, as discussed in [#33103 comment:19](https://github.com/sagemath/sage/issues/33103#comment:19), could use `docker/.gitpod.Dockerfile` again with COPY --from to make the final image smaller (e.g., currently /home/gitpod/sage has the old source tree)



---

archive/issue_comments_528633.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nReplying to [@mkoeppe](#comment:138):\n> Great points. I think we can address the current disadvantages of approach 2 in a follow-up ticket (#33113). In particular, as discussed in [#33103 comment:19](https://github.com/sagemath/sage/issues/33103#comment:19), could use `docker/.gitpod.Dockerfile` again with COPY --from to make the final image smaller (e.g., currently /home/gitpod/sage has the old source tree)\n\nBut you also need to transfer the installation of the system packages to the final image, so this may be quite complicated. Probably you end up with something quite close to the dockerfile of this ticket. Maybe that's actually the best of the two worlds: essentially use the docker file from this ticket, but instead of the `prebuild` layer just copy the sage-local directory from the github docker image?",
    "created_at": "2022-01-03T19:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528633",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:139" align="right">comment:139</div>

Replying to [@mkoeppe](#comment:138):
> Great points. I think we can address the current disadvantages of approach 2 in a follow-up ticket (#33113). In particular, as discussed in [#33103 comment:19](https://github.com/sagemath/sage/issues/33103#comment:19), could use `docker/.gitpod.Dockerfile` again with COPY --from to make the final image smaller (e.g., currently /home/gitpod/sage has the old source tree)

But you also need to transfer the installation of the system packages to the final image, so this may be quite complicated. Probably you end up with something quite close to the dockerfile of this ticket. Maybe that's actually the best of the two worlds: essentially use the docker file from this ticket, but instead of the `prebuild` layer just copy the sage-local directory from the github docker image?



---

archive/issue_comments_528634.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nNo, it could just use `FROM` with the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-configured (or `...-with-system-packages` - which is currently not pushed)\nand then `COPY --from` the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-with-targets.",
    "created_at": "2022-01-03T20:33:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528634",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

No, it could just use `FROM` with the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-configured (or `...-with-system-packages` - which is currently not pushed)
and then `COPY --from` the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-with-targets.



---

archive/issue_comments_528635.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nReplying to [@mkoeppe](#comment:140):\n> No, it could just use `FROM` with the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-configured (or `...-with-system-packages` - which is currently not pushed)\n> and then `COPY --from` the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-with-targets.\n\nNow implemented in [#33103 comment:95](https://github.com/sagemath/sage/issues/33103#comment:95)",
    "created_at": "2022-01-05T19:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528635",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:141" align="right">comment:141</div>

Replying to [@mkoeppe](#comment:140):
> No, it could just use `FROM` with the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-configured (or `...-with-system-packages` - which is currently not pushed)
> and then `COPY --from` the build stage https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-gitpod-standard-with-targets.

Now implemented in [#33103 comment:95](https://github.com/sagemath/sage/issues/33103#comment:95)



---

archive/issue_events_451045.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-08T19:48:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451045"
}
```



---

archive/issue_events_451046.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-08T19:48:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451046"
}
```



---

archive/issue_events_451047.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-08T19:48:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451047"
}
```



---

archive/issue_events_451048.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-08T19:48:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451048"
}
```



---

archive/issue_events_451049.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-08T19:48:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451049"
}
```



---

archive/issue_comments_528636.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLet's close this in favor of #33103.",
    "created_at": "2022-01-08T19:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528636",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:2" align="right">comment:2</div>

Let's close this in favor of #33103.



---

archive/issue_comments_528637.json:
```json
{
    "body": "Changed author from **Tobias Diez** to none",
    "created_at": "2022-01-08T19:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528637",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Tobias Diez** to none



---

archive/issue_comments_528638.json:
```json
{
    "body": "Reviewer: **Tobias Diez**",
    "created_at": "2022-01-08T19:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32749#issuecomment-528638",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Tobias Diez**



---

archive/issue_events_451050.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-08T21:27:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451050"
}
```



---

archive/issue_events_451051.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-08T21:27:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32749",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32749#event-451051"
}
```
