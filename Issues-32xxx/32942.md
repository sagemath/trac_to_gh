# Issue 32942: Introduce `align_latex` option that allows latex displays aligned left or centered

archive/issues_032705.json:
```json
{
    "body": "This  \n\n```sage\n%display latex\ndm = get_display_manager()   \ndm.preferences.align_latex = 'left'  # or 'center' or None\n(1+x)^10/(1+x+x^2)\n```\ndisplays the expression flush left, which is the new default.\n\nMotivated by ticket:32859#comment:32.\n\nCC:  @egourgoulhon\n\nBranch/Commit: 3427da09ec598d8b4284a250c2d077d3bef941cf\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Kwankyu Lee\n\nDependencies: #33475\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32942\n\n",
    "closed_at": "2022-03-21T23:34:43Z",
    "created_at": "2021-11-27T13:05:46Z",
    "labels": [
        "component: notebook"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Introduce `align_latex` option that allows latex displays aligned left or centered",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32942",
    "user": "https://github.com/kwankyu"
}
```
This  

```sage
%display latex
dm = get_display_manager()   
dm.preferences.align_latex = 'left'  # or 'center' or None
(1+x)^10/(1+x+x^2)
```
displays the expression flush left, which is the new default.

Motivated by ticket:32859#comment:32.

CC:  @egourgoulhon

Branch/Commit: 3427da09ec598d8b4284a250c2d077d3bef941cf

Reviewer: Eric Gourgoulhon

Author: Kwankyu Lee

Dependencies: #33475

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32942





---

archive/issue_comments_656888.json:
```json
{
    "body": "Changing dependencies from \"\" to \"u/klee/32942\"",
    "created_at": "2021-11-27T13:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656888",
    "user": "https://github.com/kwankyu"
}
```

Changing dependencies from "" to "u/klee/32942"



---

archive/issue_comments_656889.json:
```json
{
    "body": "Changing branch from \"\" to \"u/klee/32942\"",
    "created_at": "2021-11-27T13:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656889",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "u/klee/32942"



---

archive/issue_comments_656890.json:
```json
{
    "body": "Changing dependencies from \"u/klee/32942\" to \"\"",
    "created_at": "2021-11-27T13:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656890",
    "user": "https://github.com/kwankyu"
}
```

Changing dependencies from "u/klee/32942" to ""



---

archive/issue_comments_656891.json:
```json
{
    "body": "Changing commit from \"\" to \"6ef43a0eba5a86a8ad33932bb0cfe89924b3f525\"",
    "created_at": "2021-11-27T13:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656891",
    "user": "https://github.com/kwankyu"
}
```

Changing commit from "" to "6ef43a0eba5a86a8ad33932bb0cfe89924b3f525"



---

archive/issue_comments_656892.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2021-11-27T13:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656892",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_656893.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This works \n \n+```sage\n+from sage.repl.rich_output.display_manager import get_display_manager\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'\n+(1+x)^10/(1+x+x^2)\n+```\n+in jupyterlab\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-11-27T13:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656893",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This works 
 
+```sage
+from sage.repl.rich_output.display_manager import get_display_manager
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'
+(1+x)^10/(1+x+x^2)
+```
+in jupyterlab
 
 Comment: 1
 
``````




---

archive/issue_comments_656894.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-27T13:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656894",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_656895.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2021-11-27T13:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656895",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_656896.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This works \n \n+```sage\n+from sage.repl.rich_output.display_manager import get_display_manager\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+in jupyterlab\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-11-27T13:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656896",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This works 
 
+```sage
+from sage.repl.rich_output.display_manager import get_display_manager
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+in jupyterlab
 
 Comment: 1
 
``````




---

archive/issue_comments_656897.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-27T22:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_656898.json:
```json
{
    "body": "Changing commit from \"6ef43a0eba5a86a8ad33932bb0cfe89924b3f525\" to \"5ebf3e552eaa9b095a0a66e34f5915c3baf91136\"",
    "created_at": "2021-11-27T22:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6ef43a0eba5a86a8ad33932bb0cfe89924b3f525" to "5ebf3e552eaa9b095a0a66e34f5915c3baf91136"



---

archive/issue_comments_656899.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+This  \n+\n+```sage\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left.\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-11-27T23:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656899",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
+This  
+
+```sage
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left.
 
 
 Comment: 1
``````




---

archive/issue_comments_656900.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+This  \n \n+```sage\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left.\n+\n+Motivated by ticket:32859#comment:33.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-11-30T12:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656900",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+This  
 
+```sage
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left.
+
+Motivated by ticket:32859#comment:33.
 
 Comment: 1
 
``````




---

archive/issue_comments_656901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+This  \n \n+```sage\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left.\n+\n+Motivated by ticket:32859#comment:32.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-11-30T13:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656901",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+This  
 
+```sage
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left.
+
+Motivated by ticket:32859#comment:32.
 
 Comment: 1
 
``````




---

archive/issue_comments_656902.json:
```json
{
    "body": "Changing commit from \"5ebf3e552eaa9b095a0a66e34f5915c3baf91136\" to \"4fbbeb76b4d2830e02326caa2c31917b2eb89245\"",
    "created_at": "2021-12-14T04:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5ebf3e552eaa9b095a0a66e34f5915c3baf91136" to "4fbbeb76b4d2830e02326caa2c31917b2eb89245"



---

archive/issue_comments_656903.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-12-14T04:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_087051.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32942#event-87051"
}
```



---

archive/issue_comments_656904.json:
```json
{
    "body": "<a id='comment:12'></a>Sorry for the delay in reviewing!\n\nA few comments:\n- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!\n- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at ticket:32859#comment:16 and setting `dm.preferences.display_latex = 'center'` does not change this...\n- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.",
    "created_at": "2022-03-10T09:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656904",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:12'></a>Sorry for the delay in reviewing!

A few comments:
- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?
- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!
- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at ticket:32859#comment:16 and setting `dm.preferences.display_latex = 'center'` does not change this...
- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.



---

archive/issue_comments_656905.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 egourgoulhon]:\n> A few comments:\n> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n\n\nI agree. \n\n> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at ticket:32859#comment:16 and setting `dm.preferences.display_latex = 'center'` does not change this...\n\n\n\"left\" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.\n\n> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\n\nI personally agree. But since \"center\" alignment has been de facto default in jupyterlab, and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?",
    "created_at": "2022-03-10T11:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656905",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>Replying to [comment:12 egourgoulhon]:
> A few comments:
> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?


I agree. 

> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at ticket:32859#comment:16 and setting `dm.preferences.display_latex = 'center'` does not change this...


"left" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.

> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 


I personally agree. But since "center" alignment has been de facto default in jupyterlab, and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?



---

archive/issue_comments_656906.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 klee]:\n> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n \n> \n> I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\n\nWhat do you mean by \"de facto default\"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n\n```\nimport sympy\nsympy.sqrt(2)\n```\n\n```\nfrom IPython.display import Latex\nLatex(r\"$\\sqrt{2+x}$\")\n```\n\n```\nLatex(r\"$$\\sqrt{2+x}$$\")\n```\n\n```\nLatex(r\"\\[\\sqrt{2+x}\\]\")\n```\n\n```\nLatex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n```\n\n\n\n> and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\nYes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n>\n>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> \n\nDespite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?",
    "created_at": "2022-03-10T13:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656906",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:14'></a>Replying to [comment:13 klee]:
> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 
 
> 
> I personally agree. But since "center" alignment has been de facto default in jupyterlab,


What do you mean by "de facto default"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:

```
import sympy
sympy.sqrt(2)
```

```
from IPython.display import Latex
Latex(r"$\sqrt{2+x}$")
```

```
Latex(r"$$\sqrt{2+x}$$")
```

```
Latex(r"\[\sqrt{2+x}\]")
```

```
Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
```



> and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
>
>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> 

Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?



---

archive/issue_comments_656907.json:
```json
{
    "body": "Changing commit from \"4fbbeb76b4d2830e02326caa2c31917b2eb89245\" to \"45e530a346e6b16d7dbf81c22b569ff46686a1d1\"",
    "created_at": "2022-03-10T14:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4fbbeb76b4d2830e02326caa2c31917b2eb89245" to "45e530a346e6b16d7dbf81c22b569ff46686a1d1"



---

archive/issue_comments_656908.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-10T14:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_656909.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+This  \n \n+```sage\n+dm = get_display_manager()   \n+dm.preferences.align_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left.\n+\n+Motivated by ticket:32859#comment:32.\n \n Comment: 1\n \n``````\n",
    "created_at": "2022-03-10T14:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656909",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+This  
 
+```sage
+dm = get_display_manager()   
+dm.preferences.align_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left.
+
+Motivated by ticket:32859#comment:32.
 
 Comment: 1
 
``````




---

archive/issue_comments_656910.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:14 egourgoulhon]:\n> Replying to [comment:13 klee]:\n> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n \n> > \n> > I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\n> \n> What do you mean by \"de facto default\"? \n\n\nI meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).\n\n> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n> \n> ```\n> import sympy\n> sympy.sqrt(2)\n> ```\n> \n> ```\n> from IPython.display import Latex\n> Latex(r\"$\\sqrt{2+x}$\")\n> ```\n> \n> ```\n> Latex(r\"$$\\sqrt{2+x}$$\")\n> ```\n> \n> ```\n> Latex(r\"\\[\\sqrt{2+x}\\]\")\n> ```\n> \n> ```\n> Latex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n> ```\n> \n> \n> \n> > and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\n> Yes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n> >\n> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> > \n\n> Despite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?\n\nI agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.",
    "created_at": "2022-03-10T14:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656910",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:17'></a>Replying to [comment:14 egourgoulhon]:
> Replying to [comment:13 klee]:
> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 
 
> > 
> > I personally agree. But since "center" alignment has been de facto default in jupyterlab,

> 
> What do you mean by "de facto default"? 


I meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).

> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:
> 
> ```
> import sympy
> sympy.sqrt(2)
> ```
> 
> ```
> from IPython.display import Latex
> Latex(r"$\sqrt{2+x}$")
> ```
> 
> ```
> Latex(r"$$\sqrt{2+x}$$")
> ```
> 
> ```
> Latex(r"\[\sqrt{2+x}\]")
> ```
> 
> ```
> Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
> ```
> 
> 
> 
> > and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

> Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
> >
> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> > 

> Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?

I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.



---

archive/issue_comments_656911.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 klee]:\n> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.\n\n\nOK. Thanks for the changes. \n\nThere are 2 doctests failures in `src/sage/misc/html.py`.",
    "created_at": "2022-03-10T18:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656911",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:19'></a>Replying to [comment:17 klee]:
> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.


OK. Thanks for the changes. 

There are 2 doctests failures in `src/sage/misc/html.py`.



---

archive/issue_comments_656912.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#33475\"",
    "created_at": "2022-03-10T23:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656912",
    "user": "https://github.com/kwankyu"
}
```

Changing dependencies from "" to "#33475"



---

archive/issue_comments_656913.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:19 egourgoulhon]:\n> There are 2 doctests failures in `src/sage/misc/html.py`. \n\n\nFixed. Thanks\n\nI preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.",
    "created_at": "2022-03-10T23:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656913",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'></a>Replying to [comment:19 egourgoulhon]:
> There are 2 doctests failures in `src/sage/misc/html.py`. 


Fixed. Thanks

I preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.



---

archive/issue_comments_656914.json:
```json
{
    "body": "Changing commit from \"45e530a346e6b16d7dbf81c22b569ff46686a1d1\" to \"74e26967a878d845b97ece4183f731decfd81e60\"",
    "created_at": "2022-03-10T23:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "45e530a346e6b16d7dbf81c22b569ff46686a1d1" to "74e26967a878d845b97ece4183f731decfd81e60"



---

archive/issue_comments_656915.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-10T23:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_656916.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n+This  \n \n+```sage\n+%display latex\n+dm = get_display_manager()   \n+dm.preferences.align_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left.\n+\n+Motivated by ticket:32859#comment:32.\n \n Comment: 1\n \n``````\n",
    "created_at": "2022-03-11T00:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656916",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
+This  
 
+```sage
+%display latex
+dm = get_display_manager()   
+dm.preferences.align_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left.
+
+Motivated by ticket:32859#comment:32.
 
 Comment: 1
 
``````




---

archive/issue_comments_656917.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n+This  \n \n+```sage\n+%display latex\n+dm = get_display_manager()   \n+dm.preferences.align_latex = 'left'  # or 'center' or None\n+(1+x)^10/(1+x+x^2)\n+```\n+displays the expression flush left, which is the new default.\n+\n+Motivated by ticket:32859#comment:32.\n \n Comment: 1\n \n``````\n",
    "created_at": "2022-03-11T00:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656917",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
+This  
 
+```sage
+%display latex
+dm = get_display_manager()   
+dm.preferences.align_latex = 'left'  # or 'center' or None
+(1+x)^10/(1+x+x^2)
+```
+displays the expression flush left, which is the new default.
+
+Motivated by ticket:32859#comment:32.
 
 Comment: 1
 
``````




---

archive/issue_comments_656918.json:
```json
{
    "body": "<a id='comment:25'></a>The following notebook cell\n\n```\n%display latex\nx\n```\nyields\n\n```\n\\displaystylex\n```\nIn `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.",
    "created_at": "2022-03-11T10:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656918",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:25'></a>The following notebook cell

```
%display latex
x
```
yields

```
\displaystylex
```
In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.



---

archive/issue_comments_656919.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2022-03-11T10:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656919",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_656920.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-11T10:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656920",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_656921.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 egourgoulhon]:\n> The following notebook cell\n> \n> ```\n> %display latex\n> x\n> ```\n> yields\n> \n> ```\n> \\displaystylex\n> ```\n> In `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.\n\n\n`\\displaystyle` does not take an argument. I put a space after `\\displaystyle` to prevent it from being combined with the following string. I am running doctesting.",
    "created_at": "2022-03-11T11:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656921",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'></a>Replying to [comment:25 egourgoulhon]:
> The following notebook cell
> 
> ```
> %display latex
> x
> ```
> yields
> 
> ```
> \displaystylex
> ```
> In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.


`\displaystyle` does not take an argument. I put a space after `\displaystyle` to prevent it from being combined with the following string. I am running doctesting.



---

archive/issue_comments_656922.json:
```json
{
    "body": "Changing commit from \"74e26967a878d845b97ece4183f731decfd81e60\" to \"3427da09ec598d8b4284a250c2d077d3bef941cf\"",
    "created_at": "2022-03-11T11:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "74e26967a878d845b97ece4183f731decfd81e60" to "3427da09ec598d8b4284a250c2d077d3bef941cf"



---

archive/issue_comments_656923.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-11T11:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_656924.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-11T11:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656924",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_656925.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-12T17:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656925",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_656926.json:
```json
{
    "body": "<a id='comment:29'></a>Looks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.\nThanks!",
    "created_at": "2022-03-12T17:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656926",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:29'></a>Looks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.
Thanks!



---

archive/issue_comments_656927.json:
```json
{
    "body": "<a id='comment:30'></a>Thank you! \n\nI will announce this change on sage-devel.",
    "created_at": "2022-03-12T23:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656927",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:30'></a>Thank you! 

I will announce this change on sage-devel.



---

archive/issue_comments_656928.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-21T23:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656928",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087052.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-21T23:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32942#event-87052"
}
```



---

archive/issue_comments_656929.json:
```json
{
    "body": "Changing branch from \"u/klee/32942\" to \"3427da09ec598d8b4284a250c2d077d3bef941cf\"",
    "created_at": "2022-03-21T23:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32942#issuecomment-656929",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/klee/32942" to "3427da09ec598d8b4284a250c2d077d3bef941cf"
