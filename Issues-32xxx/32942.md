# Issue 32942: Introduce `align_latex` option that allows latex displays aligned left or centered

archive/issues_032705.json:
```json
{
    "assignees": [],
    "body": "This  \n\n```sage\n%display latex\ndm = get_display_manager()   \ndm.preferences.align_latex = 'left'  # or 'center' or None\n(1+x)^10/(1+x+x^2)\n```\ndisplays the expression flush left, which is the new default.\n\nMotivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n\nDepends on #33475\n\nCC:  @egourgoulhon\n\nBranch/Commit: **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**\n\nReviewer: **Eric Gourgoulhon**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **notebook**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32942_\n\n",
    "closed_at": "2022-03-21T23:34:43Z",
    "created_at": "2021-11-27T13:05:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Introduce `align_latex` option that allows latex displays aligned left or centered",
    "type": "issue",
    "updated_at": "2022-03-21T23:34:43Z",
    "url": "https://github.com/sagemath/sage/issues/32942",
    "user": "https://github.com/kwankyu"
}
```
This  

```sage
%display latex
dm = get_display_manager()   
dm.preferences.align_latex = 'left'  # or 'center' or None
(1+x)^10/(1+x+x^2)
```
displays the expression flush left, which is the new default.

Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).

Depends on #33475

CC:  @egourgoulhon

Branch/Commit: **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**

Reviewer: **Eric Gourgoulhon**

Author: **Kwankyu Lee**

Component: **notebook**

_Issue created by migration from https://trac.sagemath.org/ticket/32942_





---

archive/issue_events_450132.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450132"
}
```



---

archive/issue_events_450133.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "0000b0",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450133"
}
```



---

archive/issue_events_450134.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450134"
}
```



---

archive/issue_events_450135.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450135"
}
```



---

archive/issue_comments_531932.json:
```json
{
    "body": "Dependencies: **u/klee/32942**",
    "created_at": "2021-11-27T13:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531932",
    "user": "https://github.com/kwankyu"
}
```

Dependencies: **u/klee/32942**



---

archive/issue_comments_531933.json:
```json
{
    "body": "Branch: **[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)**",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531933",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)**



---

archive/issue_comments_531934.json:
```json
{
    "body": "Changed dependencies from **u/klee/32942** to none",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531934",
    "user": "https://github.com/kwankyu"
}
```

Changed dependencies from **u/klee/32942** to none



---

archive/issue_comments_531935.json:
```json
{
    "body": "Commit: **[`6ef43a0`](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)**",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531935",
    "user": "https://github.com/kwankyu"
}
```

Commit: **[`6ef43a0`](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)**



---

archive/issue_comments_531936.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525\"><code>6ef43a0</code></a></td><td><code>Introduce display_latex preference</code></td></tr></table>\n",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531936",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525"><code>6ef43a0</code></a></td><td><code>Introduce display_latex preference</code></td></tr></table>




---

archive/issue_comments_531937.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+This works \n \n+```sage\n+from sage.repl.rich_output.display_manager import get_display_manager\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'\n+(1+x)^10/(1+x+x^2)\n+```\n+in jupyterlab\n``````\n",
    "created_at": "2021-11-27T13:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531937",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+This works 
 
+```sage
+from sage.repl.rich_output.display_manager import get_display_manager
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'
+(1+x)^10/(1+x+x^2)
+```
+in jupyterlab
``````




---

archive/issue_events_450136.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:28:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450136"
}
```



---

archive/issue_comments_531938.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2021-11-27T13:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531938",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_531939.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n ```sage\n from sage.repl.rich_output.display_manager import get_display_manager\n dm = get_display_manager()   \n-dm.preferences.display_latex = 'left'\n+dm.preferences.display_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n in jupyterlab\n``````\n",
    "created_at": "2021-11-27T13:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531939",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 ```sage
 from sage.repl.rich_output.display_manager import get_display_manager
 dm = get_display_manager()   
-dm.preferences.display_latex = 'left'
+dm.preferences.display_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
 in jupyterlab
``````




---

archive/issue_comments_531940.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136\"><code>5ebf3e5</code></a></td><td><code>Fix doctest failures</code></td></tr></table>\n",
    "created_at": "2021-11-27T22:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531940",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136"><code>5ebf3e5</code></a></td><td><code>Fix doctest failures</code></td></tr></table>




---

archive/issue_comments_531941.json:
```json
{
    "body": "Changed commit from **[`6ef43a0`](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)** to **[`5ebf3e5`](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)**",
    "created_at": "2021-11-27T22:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ef43a0`](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)** to **[`5ebf3e5`](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)**



---

archive/issue_comments_531942.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n-This works \n+This  \n \n ```sage\n-from sage.repl.rich_output.display_manager import get_display_manager\n dm = get_display_manager()   \n dm.preferences.display_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n-in jupyterlab\n+displays the expression flush left.\n+\n``````\n",
    "created_at": "2021-11-27T23:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531942",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
-This works 
+This  
 
 ```sage
-from sage.repl.rich_output.display_manager import get_display_manager
 dm = get_display_manager()   
 dm.preferences.display_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
-in jupyterlab
+displays the expression flush left.
+
``````




---

archive/issue_comments_531943.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,4 @@\n ```\n displays the expression flush left.\n \n+Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).\n``````\n",
    "created_at": "2021-11-30T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531943",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,4 @@
 ```
 displays the expression flush left.
 
+Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).
``````




---

archive/issue_comments_531944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ```\n displays the expression flush left.\n \n-Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).\n+Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n``````\n",
    "created_at": "2021-11-30T13:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531944",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ```
 displays the expression flush left.
 
-Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).
+Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).
``````




---

archive/issue_comments_531945.json:
```json
{
    "body": "Changed commit from **[`5ebf3e5`](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)** to **[`4fbbeb7`](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)**",
    "created_at": "2021-12-14T04:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531945",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5ebf3e5`](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)** to **[`4fbbeb7`](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)**



---

archive/issue_comments_531946.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a968e39d15b7fe7d9b506bde2f880557e6c8a057\"><code>a968e39</code></a></td><td><code>Introduce display_latex preference</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245\"><code>4fbbeb7</code></a></td><td><code>Fix doctest failures</code></td></tr></table>\n",
    "created_at": "2021-12-14T04:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531946",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a968e39d15b7fe7d9b506bde2f880557e6c8a057"><code>a968e39</code></a></td><td><code>Introduce display_latex preference</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245"><code>4fbbeb7</code></a></td><td><code>Fix doctest failures</code></td></tr></table>




---

archive/issue_events_450137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450137"
}
```



---

archive/issue_events_450138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450138"
}
```



---

archive/issue_comments_531947.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry for the delay in reviewing!\n\nA few comments:\n- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!\n- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...\n- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.",
    "created_at": "2022-03-10T09:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531947",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry for the delay in reviewing!

A few comments:
- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?
- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!
- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...
- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.



---

archive/issue_comments_531948.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@egourgoulhon](#comment%3A12):\n> A few comments:\n> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n\nI agree. \n\n> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...\n\n\"left\" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.\n\n> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\nI personally agree. But since \"center\" alignment has been de facto default in jupyterlab, and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?",
    "created_at": "2022-03-10T11:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531948",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@egourgoulhon](#comment%3A12):
> A few comments:
> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?

I agree. 

> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...

"left" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.

> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

I personally agree. But since "center" alignment has been de facto default in jupyterlab, and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?



---

archive/issue_comments_531949.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kwankyu](#comment%3A13):\n> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\n> \n> I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\nWhat do you mean by \"de facto default\"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n\n```\nimport sympy\nsympy.sqrt(2)\n```\n\n```\nfrom IPython.display import Latex\nLatex(r\"$\\sqrt{2+x}$\")\n```\n\n```\nLatex(r\"$$\\sqrt{2+x}$$\")\n```\n\n```\nLatex(r\"\\[\\sqrt{2+x}\\]\")\n```\n\n```\nLatex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n```\n\n\n\n> and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\nYes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n>\n>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> \n\nDespite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?",
    "created_at": "2022-03-10T13:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531949",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kwankyu](#comment%3A13):
> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

> 
> I personally agree. But since "center" alignment has been de facto default in jupyterlab,

What do you mean by "de facto default"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:

```
import sympy
sympy.sqrt(2)
```

```
from IPython.display import Latex
Latex(r"$\sqrt{2+x}$")
```

```
Latex(r"$$\sqrt{2+x}$$")
```

```
Latex(r"\[\sqrt{2+x}\]")
```

```
Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
```



> and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
>
>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> 

Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?



---

archive/issue_comments_531950.json:
```json
{
    "body": "Changed commit from **[`4fbbeb7`](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)** to **[`45e530a`](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)**",
    "created_at": "2022-03-10T14:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fbbeb7`](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)** to **[`45e530a`](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)**



---

archive/issue_comments_531951.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de883c1977237b9f27b472d258a65f360b29581e\"><code>de883c1</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1\"><code>45e530a</code></a></td><td><code>Rename to align_latex</code></td></tr></table>\n",
    "created_at": "2022-03-10T14:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de883c1977237b9f27b472d258a65f360b29581e"><code>de883c1</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1"><code>45e530a</code></a></td><td><code>Rename to align_latex</code></td></tr></table>




---

archive/issue_comments_531952.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n ```sage\n dm = get_display_manager()   \n-dm.preferences.display_latex = 'left'  # or 'center' or None\n+dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n displays the expression flush left.\n``````\n",
    "created_at": "2022-03-10T14:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531952",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 ```sage
 dm = get_display_manager()   
-dm.preferences.display_latex = 'left'  # or 'center' or None
+dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
 displays the expression flush left.
``````




---

archive/issue_comments_531953.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@egourgoulhon](#comment%3A14):\n> Replying to [@kwankyu](#comment%3A13):\n> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\n> > \n> > I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\n> \n> What do you mean by \"de facto default\"? \n\nI meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).\n\n> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n> \n> ```\n> import sympy\n> sympy.sqrt(2)\n> ```\n> \n> ```\n> from IPython.display import Latex\n> Latex(r\"$\\sqrt{2+x}$\")\n> ```\n> \n> ```\n> Latex(r\"$$\\sqrt{2+x}$$\")\n> ```\n> \n> ```\n> Latex(r\"\\[\\sqrt{2+x}\\]\")\n> ```\n> \n> ```\n> Latex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n> ```\n> \n> \n> \n> > and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\n> Yes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n> >\n> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> > \n\n> Despite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?\n\nI agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.",
    "created_at": "2022-03-10T14:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531953",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@egourgoulhon](#comment%3A14):
> Replying to [@kwankyu](#comment%3A13):
> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

> > 
> > I personally agree. But since "center" alignment has been de facto default in jupyterlab,

> 
> What do you mean by "de facto default"? 

I meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).

> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:
> 
> ```
> import sympy
> sympy.sqrt(2)
> ```
> 
> ```
> from IPython.display import Latex
> Latex(r"$\sqrt{2+x}$")
> ```
> 
> ```
> Latex(r"$$\sqrt{2+x}$$")
> ```
> 
> ```
> Latex(r"\[\sqrt{2+x}\]")
> ```
> 
> ```
> Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
> ```
> 
> 
> 
> > and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

> Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
> >
> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> > 

> Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?

I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.



---

archive/issue_events_450139.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-10T18:23:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "title_is": "Introduce `align_latex` option that allows latex displays aligned left or centered",
    "title_was": "Introduce `display_latex` option that allows latex displays aligned left",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450139"
}
```



---

archive/issue_comments_531954.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@kwankyu](#comment%3A17):\n> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.\n\nOK. Thanks for the changes. \n\nThere are 2 doctests failures in `src/sage/misc/html.py`.",
    "created_at": "2022-03-10T18:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531954",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@kwankyu](#comment%3A17):
> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.

OK. Thanks for the changes. 

There are 2 doctests failures in `src/sage/misc/html.py`.



---

archive/issue_comments_531955.json:
```json
{
    "body": "Dependencies: **#33475**",
    "created_at": "2022-03-10T23:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531955",
    "user": "https://github.com/kwankyu"
}
```

Dependencies: **#33475**



---

archive/issue_comments_531956.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@egourgoulhon](#comment%3A19):\n> There are 2 doctests failures in `src/sage/misc/html.py`. \n\nFixed. Thanks\n\nI preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.",
    "created_at": "2022-03-10T23:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531956",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@egourgoulhon](#comment%3A19):
> There are 2 doctests failures in `src/sage/misc/html.py`. 

Fixed. Thanks

I preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.



---

archive/issue_comments_531957.json:
```json
{
    "body": "Changed commit from **[`45e530a`](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)** to **[`74e2696`](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)**",
    "created_at": "2022-03-10T23:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531957",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`45e530a`](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)** to **[`74e2696`](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)**



---

archive/issue_comments_531958.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecac525632b9b2bd00c8c6e6fb5748907648737c\"><code>ecac525</code></a></td><td><code>Fix two doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d3fda341910e08e4ac13eade556a750cced84f\"><code>f3d3fda</code></a></td><td><code>deTeX documentation title</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/528ef65e849929d44eb66439483251da5e7f0ec2\"><code>528ef65</code></a></td><td><code>Use new commands \\SL and \\PSL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9187bf142e47b4dff49667eea5fc966c9b6bbee0\"><code>9187bf1</code></a></td><td><code>Fix a glitch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eff36ec770efb94ef24a836f953e40dad8ec854e\"><code>eff36ec</code></a></td><td><code>Fix another  glitch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe4811c9f38bf2a8a8d0524eebe0ec72fc691df6\"><code>fe4811c</code></a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7285ad34ec33b9acbd3639fa0c8a0837146cbe7a\"><code>7285ad3</code></a></td><td><code>Fix more doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11ed990bf29384923f180b3f65c25de22671ffa5\"><code>11ed990</code></a></td><td><code>Speed up macro parsing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7da2b5fc8ca217c6645a12b894e1bdb481361dda\"><code>7da2b5f</code></a></td><td><code>Fix an error in removing $</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60\"><code>74e2696</code></a></td><td><code>Merge branch 'trac33475'</code></td></tr></table>\n",
    "created_at": "2022-03-10T23:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecac525632b9b2bd00c8c6e6fb5748907648737c"><code>ecac525</code></a></td><td><code>Fix two doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d3fda341910e08e4ac13eade556a750cced84f"><code>f3d3fda</code></a></td><td><code>deTeX documentation title</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/528ef65e849929d44eb66439483251da5e7f0ec2"><code>528ef65</code></a></td><td><code>Use new commands \SL and \PSL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9187bf142e47b4dff49667eea5fc966c9b6bbee0"><code>9187bf1</code></a></td><td><code>Fix a glitch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eff36ec770efb94ef24a836f953e40dad8ec854e"><code>eff36ec</code></a></td><td><code>Fix another  glitch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe4811c9f38bf2a8a8d0524eebe0ec72fc691df6"><code>fe4811c</code></a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7285ad34ec33b9acbd3639fa0c8a0837146cbe7a"><code>7285ad3</code></a></td><td><code>Fix more doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11ed990bf29384923f180b3f65c25de22671ffa5"><code>11ed990</code></a></td><td><code>Speed up macro parsing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7da2b5fc8ca217c6645a12b894e1bdb481361dda"><code>7da2b5f</code></a></td><td><code>Fix an error in removing $</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60"><code>74e2696</code></a></td><td><code>Merge branch 'trac33475'</code></td></tr></table>




---

archive/issue_comments_531959.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n This  \n \n ```sage\n+%display latex\n dm = get_display_manager()   \n dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n``````\n",
    "created_at": "2022-03-11T00:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531959",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 This  
 
 ```sage
+%display latex
 dm = get_display_manager()   
 dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
``````




---

archive/issue_comments_531960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n-displays the expression flush left.\n+displays the expression flush left, which is the new default.\n \n Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n``````\n",
    "created_at": "2022-03-11T00:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531960",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
-displays the expression flush left.
+displays the expression flush left, which is the new default.
 
 Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).
``````




---

archive/issue_comments_531961.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThe following notebook cell\n\n```\n%display latex\nx\n```\nyields\n\n```\n\\displaystylex\n```\nIn `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.",
    "created_at": "2022-03-11T10:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531961",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:25" align="right">comment:25</div>

The following notebook cell

```
%display latex
x
```
yields

```
\displaystylex
```
In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.



---

archive/issue_comments_531962.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon**",
    "created_at": "2022-03-11T10:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531962",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon**



---

archive/issue_events_450140.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-11T10:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450140"
}
```



---

archive/issue_events_450141.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-11T10:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450141"
}
```



---

archive/issue_comments_531963.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@egourgoulhon](#comment%3A25):\n> The following notebook cell\n> \n> ```\n> %display latex\n> x\n> ```\n> yields\n> \n> ```\n> \\displaystylex\n> ```\n> In `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.\n\n`\\displaystyle` does not take an argument. I put a space after `\\displaystyle` to prevent it from being combined with the following string. I am running doctesting.",
    "created_at": "2022-03-11T11:21:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531963",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@egourgoulhon](#comment%3A25):
> The following notebook cell
> 
> ```
> %display latex
> x
> ```
> yields
> 
> ```
> \displaystylex
> ```
> In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.

`\displaystyle` does not take an argument. I put a space after `\displaystyle` to prevent it from being combined with the following string. I am running doctesting.



---

archive/issue_comments_531964.json:
```json
{
    "body": "Changed commit from **[`74e2696`](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)** to **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**",
    "created_at": "2022-03-11T11:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531964",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74e2696`](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)** to **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**



---

archive/issue_comments_531965.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf\"><code>3427da0</code></a></td><td><code>Put a space after \\displaystyle</code></td></tr></table>\n",
    "created_at": "2022-03-11T11:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531965",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf"><code>3427da0</code></a></td><td><code>Put a space after \displaystyle</code></td></tr></table>




---

archive/issue_events_450142.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-11T11:50:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450142"
}
```



---

archive/issue_events_450143.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-11T11:50:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450143"
}
```



---

archive/issue_events_450144.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-12T17:53:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450144"
}
```



---

archive/issue_events_450145.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-12T17:53:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450145"
}
```



---

archive/issue_comments_531966.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLooks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.\nThanks!",
    "created_at": "2022-03-12T17:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531966",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:29" align="right">comment:29</div>

Looks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.
Thanks!



---

archive/issue_comments_531967.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThank you! \n\nI will announce this change on sage-devel.",
    "created_at": "2022-03-12T23:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531967",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:30" align="right">comment:30</div>

Thank you! 

I will announce this change on sage-devel.



---

archive/issue_events_450146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-21T23:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450146"
}
```



---

archive/issue_events_450147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f30a4c8b06c4e63b82bb7dd0f54e28482d94186c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-21T23:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-450147"
}
```



---

archive/issue_comments_531968.json:
```json
{
    "body": "Changed branch from **[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)** to **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**",
    "created_at": "2022-03-21T23:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-531968",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)** to **[`3427da0`](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)**
