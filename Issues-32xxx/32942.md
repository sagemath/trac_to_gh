# Issue 32942: Introduce `align_latex` option that allows latex displays aligned left or centered

archive/issues_032705.json:
```json
{
    "assignees": [],
    "body": "This  \n\n```sage\n%display latex\ndm = get_display_manager()   \ndm.preferences.align_latex = 'left'  # or 'center' or None\n(1+x)^10/(1+x+x^2)\n```\ndisplays the expression flush left, which is the new default.\n\nMotivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n\nDepends on #33475\n\n**CC:**  @egourgoulhon\n\n**Branch/Commit:** [3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)\n\n**Reviewer:** Eric Gourgoulhon\n\n**Author:** Kwankyu Lee\n\nIssue created by migration from https://trac.sagemath.org/ticket/32942\n\n",
    "closed_at": "2022-03-21T23:34:43Z",
    "created_at": "2021-11-27T13:05:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Introduce `align_latex` option that allows latex displays aligned left or centered",
    "type": "issue",
    "updated_at": "2022-03-21T23:34:43Z",
    "url": "https://github.com/sagemath/sage/issues/32942",
    "user": "https://github.com/kwankyu"
}
```
This  

```sage
%display latex
dm = get_display_manager()   
dm.preferences.align_latex = 'left'  # or 'center' or None
(1+x)^10/(1+x+x^2)
```
displays the expression flush left, which is the new default.

Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).

Depends on #33475

**CC:**  @egourgoulhon

**Branch/Commit:** [3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)

**Reviewer:** Eric Gourgoulhon

**Author:** Kwankyu Lee

Issue created by migration from https://trac.sagemath.org/ticket/32942





---

archive/issue_events_399402.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399402"
}
```



---

archive/issue_events_399403.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "08517b",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399403"
}
```



---

archive/issue_events_399404.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399404"
}
```



---

archive/issue_comments_534714.json:
```json
{
    "body": "**Dependencies:** u/klee/32942",
    "created_at": "2021-11-27T13:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534714",
    "user": "https://github.com/kwankyu"
}
```

**Dependencies:** u/klee/32942



---

archive/issue_comments_534715.json:
```json
{
    "body": "**Branch:** [u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534715",
    "user": "https://github.com/kwankyu"
}
```

**Branch:** [u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)



---

archive/issue_comments_534716.json:
```json
{
    "body": "**Changing dependencies** from \"u/klee/32942\" to \"\".",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534716",
    "user": "https://github.com/kwankyu"
}
```

**Changing dependencies** from "u/klee/32942" to "".



---

archive/issue_comments_534717.json:
```json
{
    "body": "**Commit:** [6ef43a0eba5a86a8ad33932bb0cfe89924b3f525](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534717",
    "user": "https://github.com/kwankyu"
}
```

**Commit:** [6ef43a0eba5a86a8ad33932bb0cfe89924b3f525](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)



---

archive/issue_comments_534718.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525\">6ef43a0</a></td><td><code>Introduce display_latex preference</code></td></tr></table>\n",
    "created_at": "2021-11-27T13:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534718",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525">6ef43a0</a></td><td><code>Introduce display_latex preference</code></td></tr></table>




---

archive/issue_comments_534719.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+This works \n \n+```sage\n+from sage.repl.rich_output.display_manager import get_display_manager\n+dm = get_display_manager()   \n+dm.preferences.display_latex = 'left'\n+(1+x)^10/(1+x+x^2)\n+```\n+in jupyterlab\n``````\n",
    "created_at": "2021-11-27T13:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534719",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+This works 
 
+```sage
+from sage.repl.rich_output.display_manager import get_display_manager
+dm = get_display_manager()   
+dm.preferences.display_latex = 'left'
+(1+x)^10/(1+x+x^2)
+```
+in jupyterlab
``````




---

archive/issue_events_399405.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-27T13:28:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399405"
}
```



---

archive/issue_comments_534720.json:
```json
{
    "body": "**Author:** Kwankyu Lee",
    "created_at": "2021-11-27T13:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534720",
    "user": "https://github.com/kwankyu"
}
```

**Author:** Kwankyu Lee



---

archive/issue_comments_534721.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n ```sage\n from sage.repl.rich_output.display_manager import get_display_manager\n dm = get_display_manager()   \n-dm.preferences.display_latex = 'left'\n+dm.preferences.display_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n in jupyterlab\n``````\n",
    "created_at": "2021-11-27T13:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534721",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 ```sage
 from sage.repl.rich_output.display_manager import get_display_manager
 dm = get_display_manager()   
-dm.preferences.display_latex = 'left'
+dm.preferences.display_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
 in jupyterlab
``````




---

archive/issue_comments_534722.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136\">5ebf3e5</a></td><td><code>Fix doctest failures</code></td></tr></table>\n",
    "created_at": "2021-11-27T22:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534722",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136">5ebf3e5</a></td><td><code>Fix doctest failures</code></td></tr></table>




---

archive/issue_comments_534723.json:
```json
{
    "body": "**Changing commit** from \"[6ef43a0eba5a86a8ad33932bb0cfe89924b3f525](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)\" to \"[5ebf3e552eaa9b095a0a66e34f5915c3baf91136](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)\".",
    "created_at": "2021-11-27T22:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534723",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6ef43a0eba5a86a8ad33932bb0cfe89924b3f525](https://github.com/sagemath/sagetrac-mirror/commit/6ef43a0eba5a86a8ad33932bb0cfe89924b3f525)" to "[5ebf3e552eaa9b095a0a66e34f5915c3baf91136](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)".



---

archive/issue_comments_534724.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n-This works \n+This  \n \n ```sage\n-from sage.repl.rich_output.display_manager import get_display_manager\n dm = get_display_manager()   \n dm.preferences.display_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n-in jupyterlab\n+displays the expression flush left.\n+\n``````\n",
    "created_at": "2021-11-27T23:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534724",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
-This works 
+This  
 
 ```sage
-from sage.repl.rich_output.display_manager import get_display_manager
 dm = get_display_manager()   
 dm.preferences.display_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
-in jupyterlab
+displays the expression flush left.
+
``````




---

archive/issue_comments_534725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,3 +7,4 @@\n ```\n displays the expression flush left.\n \n+Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).\n``````\n",
    "created_at": "2021-11-30T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534725",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,3 +7,4 @@
 ```
 displays the expression flush left.
 
+Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).
``````




---

archive/issue_comments_534726.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ```\n displays the expression flush left.\n \n-Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).\n+Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n``````\n",
    "created_at": "2021-11-30T13:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534726",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ```
 displays the expression flush left.
 
-Motivated by [#32859 comment:33](https://github.com/sagemath/sage/issues/32859#comment:33).
+Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).
``````




---

archive/issue_comments_534727.json:
```json
{
    "body": "**Changing commit** from \"[5ebf3e552eaa9b095a0a66e34f5915c3baf91136](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)\" to \"[4fbbeb76b4d2830e02326caa2c31917b2eb89245](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)\".",
    "created_at": "2021-12-14T04:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534727",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5ebf3e552eaa9b095a0a66e34f5915c3baf91136](https://github.com/sagemath/sagetrac-mirror/commit/5ebf3e552eaa9b095a0a66e34f5915c3baf91136)" to "[4fbbeb76b4d2830e02326caa2c31917b2eb89245](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)".



---

archive/issue_comments_534728.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a968e39d15b7fe7d9b506bde2f880557e6c8a057\">a968e39</a></td><td><code>Introduce display_latex preference</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245\">4fbbeb7</a></td><td><code>Fix doctest failures</code></td></tr></table>\n",
    "created_at": "2021-12-14T04:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534728",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a968e39d15b7fe7d9b506bde2f880557e6c8a057">a968e39</a></td><td><code>Introduce display_latex preference</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245">4fbbeb7</a></td><td><code>Fix doctest failures</code></td></tr></table>




---

archive/issue_events_399406.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399406"
}
```



---

archive/issue_events_399407.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399407"
}
```



---

archive/issue_comments_534729.json:
```json
{
    "body": "<a id='comment:12'></a>\nSorry for the delay in reviewing!\n\nA few comments:\n- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!\n- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...\n- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.",
    "created_at": "2022-03-10T09:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534729",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:12'></a>
Sorry for the delay in reviewing!

A few comments:
- the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?
- I've tested the new feature with Jupyterlab 3.3 (cf. #32069), it works well!
- Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...
- Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`.



---

archive/issue_comments_534730.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@egourgoulhon](#comment%3A12):\n> A few comments:\n> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?\n\nI agree. \n\n> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...\n\n\"left\" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.\n\n> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\nI personally agree. But since \"center\" alignment has been de facto default in jupyterlab, and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?",
    "created_at": "2022-03-10T11:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534730",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>
Replying to [@egourgoulhon](#comment%3A12):
> A few comments:
> - the option name `display_latex` sounds a little too vague and also may - introduce some confusion with the magic `%display latex`. Wouldn't `align_latex` be a better name?

I agree. 

> - Regarding Jupyter (classic), LaTeX outputs are always left-aligned for me (on two distinct Ubuntu 20.04 computers), as discussed at [#32859 comment:16](https://github.com/sagemath/sage/issues/32859#comment:16) and setting `dm.preferences.display_latex = 'center'` does not change this...

"left" alignment is forced in the classic notebook. It seems developers decided so. Hence `align_latex` is only for jupyterlab.

> - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

I personally agree. But since "center" alignment has been de facto default in jupyterlab, and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell, I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?



---

archive/issue_comments_534731.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@kwankyu](#comment%3A13):\n> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\n> \n> I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\nWhat do you mean by \"de facto default\"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n\n```\nimport sympy\nsympy.sqrt(2)\n```\n\n```\nfrom IPython.display import Latex\nLatex(r\"$\\sqrt{2+x}$\")\n```\n\n```\nLatex(r\"$$\\sqrt{2+x}$$\")\n```\n\n```\nLatex(r\"\\[\\sqrt{2+x}\\]\")\n```\n\n```\nLatex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n```\n\n\n\n> and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\nYes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n>\n>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> \n\nDespite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?",
    "created_at": "2022-03-10T13:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534731",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:14'></a>
Replying to [@kwankyu](#comment%3A13):
> > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

> 
> I personally agree. But since "center" alignment has been de facto default in jupyterlab,

What do you mean by "de facto default"? I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:

```
import sympy
sympy.sqrt(2)
```

```
from IPython.display import Latex
Latex(r"$\sqrt{2+x}$")
```

```
Latex(r"$$\sqrt{2+x}$$")
```

```
Latex(r"\[\sqrt{2+x}\]")
```

```
Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
```



> and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
>
>I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> 

Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?



---

archive/issue_comments_534732.json:
```json
{
    "body": "**Changing commit** from \"[4fbbeb76b4d2830e02326caa2c31917b2eb89245](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)\" to \"[45e530a346e6b16d7dbf81c22b569ff46686a1d1](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)\".",
    "created_at": "2022-03-10T14:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534732",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4fbbeb76b4d2830e02326caa2c31917b2eb89245](https://github.com/sagemath/sagetrac-mirror/commit/4fbbeb76b4d2830e02326caa2c31917b2eb89245)" to "[45e530a346e6b16d7dbf81c22b569ff46686a1d1](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)".



---

archive/issue_comments_534733.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de883c1977237b9f27b472d258a65f360b29581e\">de883c1</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1\">45e530a</a></td><td><code>Rename to align_latex</code></td></tr></table>\n",
    "created_at": "2022-03-10T14:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534733",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de883c1977237b9f27b472d258a65f360b29581e">de883c1</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1">45e530a</a></td><td><code>Rename to align_latex</code></td></tr></table>




---

archive/issue_comments_534734.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n ```sage\n dm = get_display_manager()   \n-dm.preferences.display_latex = 'left'  # or 'center' or None\n+dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n displays the expression flush left.\n``````\n",
    "created_at": "2022-03-10T14:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534734",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 ```sage
 dm = get_display_manager()   
-dm.preferences.display_latex = 'left'  # or 'center' or None
+dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
 displays the expression flush left.
``````




---

archive/issue_comments_534735.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [@egourgoulhon](#comment%3A14):\n> Replying to [@kwankyu](#comment%3A13):\n> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. \n\n> > \n> > I personally agree. But since \"center\" alignment has been de facto default in jupyterlab,\n\n> \n> What do you mean by \"de facto default\"? \n\nI meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).\n\n> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:\n> \n> ```\n> import sympy\n> sympy.sqrt(2)\n> ```\n> \n> ```\n> from IPython.display import Latex\n> Latex(r\"$\\sqrt{2+x}$\")\n> ```\n> \n> ```\n> Latex(r\"$$\\sqrt{2+x}$$\")\n> ```\n> \n> ```\n> Latex(r\"\\[\\sqrt{2+x}\\]\")\n> ```\n> \n> ```\n> Latex(r\"\\begin{equation}\\sqrt{2+x}\\end{equation}\")\n> ```\n> \n> \n> \n> > and \"left\" alignment is expensive in that the additional code `\\displaystyle\" is inserted in every output cell\n\n> Yes this is (one more!) drawback of our \"%display latex\" magic; instead of relying on Jupyter's native latex display...\n> >\n> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?\n> > \n\n> Despite the \\displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?\n\nI agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.",
    "created_at": "2022-03-10T14:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534735",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:17'></a>
Replying to [@egourgoulhon](#comment%3A14):
> Replying to [@kwankyu](#comment%3A13):
> > > - Shouldn't `'left'` be the default, instead of `'center'`? Left-align is the default for SymPy MathJax display in a pure Python 3 notebook and I see no reason to deviate from SymPy policy here.  It also better (more readable) for short outputs, like `0`. 

> > 
> > I personally agree. But since "center" alignment has been de facto default in jupyterlab,

> 
> What do you mean by "de facto default"? 

I meant center alignment is status quo, and is what users got used to in jupyterlab (including myself).

> I have the impression that, on the contrary,  Jupyterlab's default is left-aligned, see e.g. the discussion [LaTeX display math in output cells should be left-aligned](https://github.com/jupyterlab/jupyterlab/issues/3938) on Jupyterlab github. For instance, in Jupyterlab with Python 3 kernel, the following cells all result in a left-aligned output:
> 
> ```
> import sympy
> sympy.sqrt(2)
> ```
> 
> ```
> from IPython.display import Latex
> Latex(r"$\sqrt{2+x}$")
> ```
> 
> ```
> Latex(r"$$\sqrt{2+x}$$")
> ```
> 
> ```
> Latex(r"\[\sqrt{2+x}\]")
> ```
> 
> ```
> Latex(r"\begin{equation}\sqrt{2+x}\end{equation}")
> ```
> 
> 
> 
> > and "left" alignment is expensive in that the additional code `\displaystyle" is inserted in every output cell

> Yes this is (one more!) drawback of our "%display latex" magic; instead of relying on Jupyter's native latex display...
> >
> >I am not sure if changing the default is a right thing... If you strongly insist, then I would follow. Do you?
> > 

> Despite the \displaystyle burden, I would vote in favor on the left-aligned default, for compatibility both with the display in Sage classic Jupyter and with the default for SymPy and Latex in Jupyterlab. It seems also that users prefer left-aligned, cf. https://ask.sagemath.org/question/59775/. Shall we organize a vote on sage-devel?

I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.



---

archive/issue_events_399408.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-10T18:23:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "rename": {
        "from": "Introduce `display_latex` option that allows latex displays aligned left",
        "to": "Introduce `align_latex` option that allows latex displays aligned left or centered"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399408"
}
```



---

archive/issue_comments_534736.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@kwankyu](#comment%3A17):\n> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.\n\nOK. Thanks for the changes. \n\nThere are 2 doctests failures in `src/sage/misc/html.py`.",
    "created_at": "2022-03-10T18:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534736",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:19'></a>
Replying to [@kwankyu](#comment%3A17):
> I agree. The current default center alignment may be regarded as a defect. No vote in fixing a defect. But perhaps we need to advertise (in release tour?) how to change the behavior for those users that do not like the new default.

OK. Thanks for the changes. 

There are 2 doctests failures in `src/sage/misc/html.py`.



---

archive/issue_comments_534737.json:
```json
{
    "body": "**Dependencies:** #33475",
    "created_at": "2022-03-10T23:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534737",
    "user": "https://github.com/kwankyu"
}
```

**Dependencies:** #33475



---

archive/issue_comments_534738.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [@egourgoulhon](#comment%3A19):\n> There are 2 doctests failures in `src/sage/misc/html.py`. \n\nFixed. Thanks\n\nI preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.",
    "created_at": "2022-03-10T23:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534738",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'></a>
Replying to [@egourgoulhon](#comment%3A19):
> There are 2 doctests failures in `src/sage/misc/html.py`. 

Fixed. Thanks

I preemptively solved merge conflicts with already positively reviewed #33475, by adding it as dependency.



---

archive/issue_comments_534739.json:
```json
{
    "body": "**Changing commit** from \"[45e530a346e6b16d7dbf81c22b569ff46686a1d1](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)\" to \"[74e26967a878d845b97ece4183f731decfd81e60](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)\".",
    "created_at": "2022-03-10T23:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534739",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[45e530a346e6b16d7dbf81c22b569ff46686a1d1](https://github.com/sagemath/sagetrac-mirror/commit/45e530a346e6b16d7dbf81c22b569ff46686a1d1)" to "[74e26967a878d845b97ece4183f731decfd81e60](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)".



---

archive/issue_comments_534740.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecac525632b9b2bd00c8c6e6fb5748907648737c\">ecac525</a></td><td><code>Fix two doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d3fda341910e08e4ac13eade556a750cced84f\">f3d3fda</a></td><td><code>deTeX documentation title</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/528ef65e849929d44eb66439483251da5e7f0ec2\">528ef65</a></td><td><code>Use new commands \\SL and \\PSL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9187bf142e47b4dff49667eea5fc966c9b6bbee0\">9187bf1</a></td><td><code>Fix a glitch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eff36ec770efb94ef24a836f953e40dad8ec854e\">eff36ec</a></td><td><code>Fix another  glitch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe4811c9f38bf2a8a8d0524eebe0ec72fc691df6\">fe4811c</a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7285ad34ec33b9acbd3639fa0c8a0837146cbe7a\">7285ad3</a></td><td><code>Fix more doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11ed990bf29384923f180b3f65c25de22671ffa5\">11ed990</a></td><td><code>Speed up macro parsing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7da2b5fc8ca217c6645a12b894e1bdb481361dda\">7da2b5f</a></td><td><code>Fix an error in removing $</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60\">74e2696</a></td><td><code>Merge branch 'trac33475'</code></td></tr></table>\n",
    "created_at": "2022-03-10T23:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534740",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecac525632b9b2bd00c8c6e6fb5748907648737c">ecac525</a></td><td><code>Fix two doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d3fda341910e08e4ac13eade556a750cced84f">f3d3fda</a></td><td><code>deTeX documentation title</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/528ef65e849929d44eb66439483251da5e7f0ec2">528ef65</a></td><td><code>Use new commands \SL and \PSL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9187bf142e47b4dff49667eea5fc966c9b6bbee0">9187bf1</a></td><td><code>Fix a glitch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eff36ec770efb94ef24a836f953e40dad8ec854e">eff36ec</a></td><td><code>Fix another  glitch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe4811c9f38bf2a8a8d0524eebe0ec72fc691df6">fe4811c</a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7285ad34ec33b9acbd3639fa0c8a0837146cbe7a">7285ad3</a></td><td><code>Fix more doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11ed990bf29384923f180b3f65c25de22671ffa5">11ed990</a></td><td><code>Speed up macro parsing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7da2b5fc8ca217c6645a12b894e1bdb481361dda">7da2b5f</a></td><td><code>Fix an error in removing $</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60">74e2696</a></td><td><code>Merge branch 'trac33475'</code></td></tr></table>




---

archive/issue_comments_534741.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n This  \n \n ```sage\n+%display latex\n dm = get_display_manager()   \n dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n``````\n",
    "created_at": "2022-03-11T00:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534741",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 This  
 
 ```sage
+%display latex
 dm = get_display_manager()   
 dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
``````




---

archive/issue_comments_534742.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n dm.preferences.align_latex = 'left'  # or 'center' or None\n (1+x)^10/(1+x+x^2)\n ```\n-displays the expression flush left.\n+displays the expression flush left, which is the new default.\n \n Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).\n``````\n",
    "created_at": "2022-03-11T00:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534742",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 dm.preferences.align_latex = 'left'  # or 'center' or None
 (1+x)^10/(1+x+x^2)
 ```
-displays the expression flush left.
+displays the expression flush left, which is the new default.
 
 Motivated by [#32859 comment:32](https://github.com/sagemath/sage/issues/32859#comment:32).
``````




---

archive/issue_comments_534743.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe following notebook cell\n\n```\n%display latex\nx\n```\nyields\n\n```\n\\displaystylex\n```\nIn `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.",
    "created_at": "2022-03-11T10:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534743",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:25'></a>
The following notebook cell

```
%display latex
x
```
yields

```
\displaystylex
```
In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.



---

archive/issue_comments_534744.json:
```json
{
    "body": "**Reviewer:** Eric Gourgoulhon",
    "created_at": "2022-03-11T10:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534744",
    "user": "https://github.com/egourgoulhon"
}
```

**Reviewer:** Eric Gourgoulhon



---

archive/issue_events_399409.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-11T10:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399409"
}
```



---

archive/issue_events_399410.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-11T10:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399410"
}
```



---

archive/issue_comments_534745.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [@egourgoulhon](#comment%3A25):\n> The following notebook cell\n> \n> ```\n> %display latex\n> x\n> ```\n> yields\n> \n> ```\n> \\displaystylex\n> ```\n> In `src/sage/misc/html.py`, the argument of `\\displaystyle` should be wrapped into curly brackets.\n\n`\\displaystyle` does not take an argument. I put a space after `\\displaystyle` to prevent it from being combined with the following string. I am running doctesting.",
    "created_at": "2022-03-11T11:21:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534745",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'></a>
Replying to [@egourgoulhon](#comment%3A25):
> The following notebook cell
> 
> ```
> %display latex
> x
> ```
> yields
> 
> ```
> \displaystylex
> ```
> In `src/sage/misc/html.py`, the argument of `\displaystyle` should be wrapped into curly brackets.

`\displaystyle` does not take an argument. I put a space after `\displaystyle` to prevent it from being combined with the following string. I am running doctesting.



---

archive/issue_comments_534746.json:
```json
{
    "body": "**Changing commit** from \"[74e26967a878d845b97ece4183f731decfd81e60](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)\" to \"[3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)\".",
    "created_at": "2022-03-11T11:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534746",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[74e26967a878d845b97ece4183f731decfd81e60](https://github.com/sagemath/sagetrac-mirror/commit/74e26967a878d845b97ece4183f731decfd81e60)" to "[3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)".



---

archive/issue_comments_534747.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf\">3427da0</a></td><td><code>Put a space after \\displaystyle</code></td></tr></table>\n",
    "created_at": "2022-03-11T11:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534747",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf">3427da0</a></td><td><code>Put a space after \displaystyle</code></td></tr></table>




---

archive/issue_events_399411.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-11T11:50:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399411"
}
```



---

archive/issue_events_399412.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-11T11:50:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399412"
}
```



---

archive/issue_events_399413.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-12T17:53:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399413"
}
```



---

archive/issue_events_399414.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-12T17:53:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399414"
}
```



---

archive/issue_comments_534748.json:
```json
{
    "body": "<a id='comment:29'></a>\nLooks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.\nThanks!",
    "created_at": "2022-03-12T17:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534748",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:29'></a>
Looks good. I've tested the latest version on various notebooks, both with Jupyter and Jupyterlab.
Thanks!



---

archive/issue_comments_534749.json:
```json
{
    "body": "<a id='comment:30'></a>\nThank you! \n\nI will announce this change on sage-devel.",
    "created_at": "2022-03-12T23:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534749",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:30'></a>
Thank you! 

I will announce this change on sage-devel.



---

archive/issue_events_399415.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-21T23:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399415"
}
```



---

archive/issue_events_399416.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f30a4c8b06c4e63b82bb7dd0f54e28482d94186c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-21T23:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32942#event-399416"
}
```



---

archive/issue_comments_534750.json:
```json
{
    "body": "**Changing branch** from \"[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)\" to \"[3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)\".",
    "created_at": "2022-03-21T23:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32942#issuecomment-534750",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/klee/32942](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/32942)" to "[3427da09ec598d8b4284a250c2d077d3bef941cf](https://github.com/sagemath/sagetrac-mirror/commit/3427da09ec598d8b4284a250c2d077d3bef941cf)".
