# Issue 32472: Give an `algorithm` keyword to (some?) `simplify` methods/functions

archive/issues_032235.json:
```json
{
    "body": "Case in point (many other examples exist...) :\n\n```\nsage: var(\"x\", domain=\"positive\")\nx\nsage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u.simplify()\n-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u._giac_().simplify()._sage_()\nI*sqrt(x^2 - 1)\nsage: u._fricas_().simplify()._sage_()\n-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))\nsage: u._sympy_().simplify()._sage_()\n-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))\nsage: mathematica.FullSimplify(u).sage()\nI*sqrt(x^2 - 1)\n```\n\nSuggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our \"default\" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).\n\nThis might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...\n\nAdvice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...\n\nCC:  @slel\n\nAuthor: Emmanuel Charpentier\n\nBranch: u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions\n\nStatus: needs_review\n\nCommit: 6472588cc04b8a4cefc402a640aa09d947b114a7\n\nIssue created by migration from https://trac.sagemath.org/ticket/32472\n\n",
    "created_at": "2021-09-05T10:09:42Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Give an `algorithm` keyword to (some?) `simplify` methods/functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32472",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Case in point (many other examples exist...) :

```
sage: var("x", domain="positive")
x
sage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u.simplify()
-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u._giac_().simplify()._sage_()
I*sqrt(x^2 - 1)
sage: u._fricas_().simplify()._sage_()
-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))
sage: u._sympy_().simplify()._sage_()
-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))
sage: mathematica.FullSimplify(u).sage()
I*sqrt(x^2 - 1)
```

Suggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our "default" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).

This might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...

Advice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...

CC:  @slel

Author: Emmanuel Charpentier

Branch: u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions

Status: needs_review

Commit: 6472588cc04b8a4cefc402a640aa09d947b114a7

Issue created by migration from https://trac.sagemath.org/ticket/32472





---

archive/issue_comments_647044.json:
```json
{
    "body": "Changing branch from \"\" to \"u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions\"",
    "created_at": "2021-09-07T12:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647044",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing branch from "" to "u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions"



---

archive/issue_comments_647045.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 charpent]:\n\nThis does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.\n\nPasses `ptestlong` without failure ==> `needs_review`.\n\n---\nNew commits:",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647045",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:2'></a>Replying to [comment:1 charpent]:

This does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.

Passes `ptestlong` without failure ==> `needs_review`.

---
New commits:



---

archive/issue_comments_647046.json:
```json
{
    "body": "Changing commit from \"\" to \"56372862af845541b7aab3624770c5118a361413\"",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647046",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing commit from "" to "56372862af845541b7aab3624770c5118a361413"



---

archive/issue_comments_647047.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647047",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_647048.json:
```json
{
    "body": "Changing author from \"\" to \"Emmanuel Charpentier\"",
    "created_at": "2021-09-23T22:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647048",
    "user": "https://github.com/slel"
}
```

Changing author from "" to "Emmanuel Charpentier"



---

archive/issue_comments_647049.json:
```json
{
    "body": "<a id='comment:4'></a>Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)",
    "created_at": "2021-12-15T10:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647049",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:4'></a>Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.

(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)



---

archive/issue_comments_647050.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 mmezzarobba]:\n> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n\n\nRight. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.\n\nDone, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)\n\n\nToo bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.",
    "created_at": "2021-12-15T12:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647050",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:5'></a>Replying to [comment:4 mmezzarobba]:
> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.



Right. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.

Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)


Too bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.



---

archive/issue_comments_647051.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 charpent]:\n\n...\n\n> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n\n`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.\n\nTemporarily setting `needs work` , I'll set `needs_review` after pushing my edits.",
    "created_at": "2021-12-15T18:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647051",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>Replying to [comment:5 charpent]:

...

> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...


`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.

Temporarily setting `needs work` , I'll set `needs_review` after pushing my edits.



---

archive/issue_comments_647052.json:
```json
{
    "body": "Changing commit from \"56372862af845541b7aab3624770c5118a361413\" to \"6472588cc04b8a4cefc402a640aa09d947b114a7\"",
    "created_at": "2021-12-15T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "56372862af845541b7aab3624770c5118a361413" to "6472588cc04b8a4cefc402a640aa09d947b114a7"



---

archive/issue_comments_647053.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-15T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_647054.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-15T18:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647054",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_647055.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-15T18:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647055",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_086136.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T18:10:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-86136"
}
```



---

archive/issue_events_086137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-86137"
}
```



---

archive/issue_events_086138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-86138"
}
```



---

archive/issue_events_086139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-86139"
}
```



---

archive/issue_events_086140.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-86140"
}
```
