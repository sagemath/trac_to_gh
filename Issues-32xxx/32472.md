# Issue 32472: Give an `algorithm` keyword to (some?) `simplify` methods/functions

archive/issues_032235.json:
```json
{
    "body": "Case in point (many other examples exist...) :\n\n```\nsage: var(\"x\", domain=\"positive\")\nx\nsage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u.simplify()\n-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u._giac_().simplify()._sage_()\nI*sqrt(x^2 - 1)\nsage: u._fricas_().simplify()._sage_()\n-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))\nsage: u._sympy_().simplify()._sage_()\n-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))\nsage: mathematica.FullSimplify(u).sage()\nI*sqrt(x^2 - 1)\n```\n\nSuggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our \"default\" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).\n\nThis might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...\n\nAdvice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...\n\nCC:  @slel\n\nBranch: [u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions)\n\nAuthor: Emmanuel Charpentier\n\nStatus: needs_review\n\nCommit: 6472588cc04b8a4cefc402a640aa09d947b114a7\n\nIssue created by migration from https://trac.sagemath.org/ticket/32472\n\n",
    "created_at": "2021-09-05T10:09:42Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Give an `algorithm` keyword to (some?) `simplify` methods/functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32472",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Case in point (many other examples exist...) :

```
sage: var("x", domain="positive")
x
sage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u.simplify()
-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u._giac_().simplify()._sage_()
I*sqrt(x^2 - 1)
sage: u._fricas_().simplify()._sage_()
-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))
sage: u._sympy_().simplify()._sage_()
-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))
sage: mathematica.FullSimplify(u).sage()
I*sqrt(x^2 - 1)
```

Suggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our "default" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).

This might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...

Advice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...

CC:  @slel

Branch: [u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions)

Author: Emmanuel Charpentier

Status: needs_review

Commit: 6472588cc04b8a4cefc402a640aa09d947b114a7

Issue created by migration from https://trac.sagemath.org/ticket/32472





---

archive/issue_comments_647201.json:
```json
{
    "body": "Changing branch from \"\" to \"u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions\"",
    "created_at": "2021-09-07T12:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647201",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing branch from "" to "u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions"



---

archive/issue_comments_647202.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [charpent](#comment%3A1):\n\nThis does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.\n\nPasses `ptestlong` without failure ==> `needs_review`.\n\n---\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[5637286](https://github.com/sagemath/sagetrac-mirror/commit/56372862af845541b7aab3624770c5118a361413)|`Add an algorithm keyword to simplify.`|",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647202",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:2'></a>
Replying to [charpent](#comment%3A1):

This does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.

Passes `ptestlong` without failure ==> `needs_review`.

---
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[5637286](https://github.com/sagemath/sagetrac-mirror/commit/56372862af845541b7aab3624770c5118a361413)|`Add an algorithm keyword to simplify.`|



---

archive/issue_comments_647203.json:
```json
{
    "body": "Changing commit from \"\" to \"56372862af845541b7aab3624770c5118a361413\"",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647203",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing commit from "" to "56372862af845541b7aab3624770c5118a361413"



---

archive/issue_comments_647204.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647204",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_647205.json:
```json
{
    "body": "Changing author from \"\" to \"Emmanuel Charpentier\"",
    "created_at": "2021-09-23T22:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647205",
    "user": "https://github.com/slel"
}
```

Changing author from "" to "Emmanuel Charpentier"



---

archive/issue_comments_647206.json:
```json
{
    "body": "<a id='comment:4'></a>\nLgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)",
    "created_at": "2021-12-15T10:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647206",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:4'></a>
Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.

(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)



---

archive/issue_comments_647207.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [mmezzarobba](#comment%3A4):\n> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n\n\nRight. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.\n\nDone, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)\n\n\nToo bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.",
    "created_at": "2021-12-15T12:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647207",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:5'></a>
Replying to [mmezzarobba](#comment%3A4):
> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.



Right. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.

Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)


Too bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.



---

archive/issue_comments_647208.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [charpent](#comment%3A5):\n\n...\n\n> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n\n`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.\n\nTemporarily setting `needs work` , I'll set `needs_review` after pushing my edits.",
    "created_at": "2021-12-15T18:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647208",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>
Replying to [charpent](#comment%3A5):

...

> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...


`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.

Temporarily setting `needs work` , I'll set `needs_review` after pushing my edits.



---

archive/issue_comments_647209.json:
```json
{
    "body": "Changing commit from \"56372862af845541b7aab3624770c5118a361413\" to \"6472588cc04b8a4cefc402a640aa09d947b114a7\"",
    "created_at": "2021-12-15T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "56372862af845541b7aab3624770c5118a361413" to "6472588cc04b8a4cefc402a640aa09d947b114a7"



---

archive/issue_comments_647210.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[419aaa9](https://github.com/sagemath/sagetrac-mirror/commit/419aaa96fc8d0b75f054ac6add3c2a51fd96af38)|`Add an algorithm keyword to simplify.`|\n|[16c7733](https://github.com/sagemath/sagetrac-mirror/commit/16c7733f78de5952714ac5b5f4d6d565726272cf)|`Trac#39472 : fix example for the simplify function (rebased on 9.5.beta7)`|\n|[6472588](https://github.com/sagemath/sagetrac-mirror/commit/6472588cc04b8a4cefc402a640aa09d947b114a7)|`Merge branch 'u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions' of trac.sagemath.org:sage into t/32472/give_an__algorithm__keyword_to__some____simplify__methods_functions`|",
    "created_at": "2021-12-15T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[419aaa9](https://github.com/sagemath/sagetrac-mirror/commit/419aaa96fc8d0b75f054ac6add3c2a51fd96af38)|`Add an algorithm keyword to simplify.`|
|[16c7733](https://github.com/sagemath/sagetrac-mirror/commit/16c7733f78de5952714ac5b5f4d6d565726272cf)|`Trac#39472 : fix example for the simplify function (rebased on 9.5.beta7)`|
|[6472588](https://github.com/sagemath/sagetrac-mirror/commit/6472588cc04b8a4cefc402a640aa09d947b114a7)|`Merge branch 'u/charpent/give_an__algorithm__keyword_to__some____simplify__methods_functions' of trac.sagemath.org:sage into t/32472/give_an__algorithm__keyword_to__some____simplify__methods_functions`|



---

archive/issue_comments_647211.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-15T18:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647211",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_647212.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-15T18:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32472#issuecomment-647212",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_096858.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T18:10:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-96858"
}
```



---

archive/issue_events_096859.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-96859"
}
```



---

archive/issue_events_096860.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-96860"
}
```



---

archive/issue_events_096861.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-96861"
}
```



---

archive/issue_events_096862.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32472",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32472#event-96862"
}
```
