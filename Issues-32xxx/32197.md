# Issue 32197: MixedIntegerLinearProgram.get_values: Add options convert, tolerance.

archive/issues_031960.json:
```json
{
    "body": "Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n\nWe apply it to one use of MIP in `sage.graphs`.\n\nOther fixes using the new option will be tracked in #32191.\n\n\nCC:  @mkoeppe @tscrim @dimpase @davewittemorris @seblabbe\n\nBranch/Commit: db83853c6df0ed792b4b011b842cf5fd01444765\n\nReviewer: David Coudert\n\nAuthor: David Coudert, Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32197\n\n",
    "closed_at": "2021-07-25T13:26:47Z",
    "created_at": "2021-07-13T17:04:24Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "MixedIntegerLinearProgram.get_values: Add options convert, tolerance.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32197",
    "user": "https://github.com/dcoudert"
}
```
Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.

We apply it to one use of MIP in `sage.graphs`.

Other fixes using the new option will be tracked in #32191.


CC:  @mkoeppe @tscrim @dimpase @davewittemorris @seblabbe

Branch/Commit: db83853c6df0ed792b4b011b842cf5fd01444765

Reviewer: David Coudert

Author: David Coudert, Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32197





---

archive/issue_comments_487519.json:
```json
{
    "body": "<a id='comment:1'></a>If you agree with this solution, I will use it everywhere in sage.graphs\n\n---\nNew commits:",
    "created_at": "2021-07-13T17:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487519",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>If you agree with this solution, I will use it everywhere in sage.graphs

---
New commits:



---

archive/issue_comments_487520.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-13T17:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487520",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487521.json:
```json
{
    "body": "<a id='comment:2'></a>I would suggest to distinguish two cases explicitly:\n\na) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:\n   {{{\n   if abs(value) < tolerance:\n       return False\n   if abs(value - 1) < tolerance:\n       return True\n   raise RuntimeError(\"integrality tolerance exceeded - modeling error or numerical difficulties?\")\n   }}}\n\nb) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.\n\n\nThe default tolerances for the two cases a) and b) could be chosen quite differently.",
    "created_at": "2021-07-13T17:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>I would suggest to distinguish two cases explicitly:

a) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:
   {{{
   if abs(value) < tolerance:
       return False
   if abs(value - 1) < tolerance:
       return True
   raise RuntimeError("integrality tolerance exceeded - modeling error or numerical difficulties?")
   }}}

b) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.


The default tolerances for the two cases a) and b) could be chosen quite differently.



---

archive/issue_comments_487522.json:
```json
{
    "body": "<a id='comment:3'></a>For case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?",
    "created_at": "2021-07-13T21:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487522",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>For case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?



---

archive/issue_comments_487523.json:
```json
{
    "body": "<a id='comment:4'></a>For case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?\n\n```\ndef group_by_zero_fractional_one_value(mapping, tolerance):\n    return ({ index: value \n              for index, value in mapping.items() \n              if abs(value) < tolerance },\n            ...)\n```\n\n\nBy the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.",
    "created_at": "2021-07-13T22:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487523",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>For case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?

```
def group_by_zero_fractional_one_value(mapping, tolerance):
    return ({ index: value 
              for index, value in mapping.items() 
              if abs(value) < tolerance },
            ...)
```


By the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.



---

archive/issue_comments_487524.json:
```json
{
    "body": "<a id='comment:5'></a>I think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.",
    "created_at": "2021-07-13T22:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487524",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>I think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.



---

archive/issue_comments_487525.json:
```json
{
    "body": "<a id='comment:6'></a>\"this\" being exactly?",
    "created_at": "2021-07-13T23:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487525",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>"this" being exactly?



---

archive/issue_comments_487526.json:
```json
{
    "body": "<a id='comment:7'></a>The problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?",
    "created_at": "2021-07-14T10:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487526",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>The problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?



---

archive/issue_comments_487527.json:
```json
{
    "body": "<a id='comment:8'></a>Definitely does not belong into the backends. This is an application-specific fix. See #30635#comment:31\n\nIf you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.",
    "created_at": "2021-07-14T16:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487527",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Definitely does not belong into the backends. This is an application-specific fix. See #30635#comment:31

If you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.



---

archive/issue_comments_487528.json:
```json
{
    "body": "<a id='comment:9'></a>Could this be a better proposal ?\n\n---\nNew commits:",
    "created_at": "2021-07-14T18:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487528",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'></a>Could this be a better proposal ?

---
New commits:



---

archive/issue_comments_487529.json:
```json
{
    "body": "<a id='comment:10'></a>I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.",
    "created_at": "2021-07-14T19:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487529",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.



---

archive/issue_comments_487530.json:
```json
{
    "body": "<a id='comment:11'></a>The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\nHowever, I'm not sure it can help solving the issue with glpk",
    "created_at": "2021-07-14T19:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487530",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.
However, I'm not sure it can help solving the issue with glpk



---

archive/issue_comments_487531.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 dcoudert]:\n> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\n\n\nYes, this is what I was referring to.\n\nThe point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.",
    "created_at": "2021-07-14T19:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487531",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:11 dcoudert]:
> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.


Yes, this is what I was referring to.

The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.



---

archive/issue_comments_487532.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:10 mkoeppe]:\n> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.\n\n\nInteger structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.",
    "created_at": "2021-07-15T11:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487532",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>Replying to [comment:10 mkoeppe]:
> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.


Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.



---

archive/issue_comments_487533.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 dimpase]:\n> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. \n\n\nOutside of the scope of this ticket.",
    "created_at": "2021-07-15T16:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487533",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Replying to [comment:13 dimpase]:
> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. 


Outside of the scope of this ticket.



---

archive/issue_comments_487534.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T16:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487535.json:
```json
{
    "body": "<a id='comment:16'></a>> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.\n\n\nIn this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?",
    "created_at": "2021-07-15T16:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487535",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.


In this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?



---

archive/issue_comments_487536.json:
```json
{
    "body": "<a id='comment:17'></a>Here's a proposed interface:\n\n```\n    def get_values(self, *lists, convert=None, tolerance=None):\n        r\"\"\"\n        Return values found by the previous call to ``solve()``.\n\n        INPUT:\n\n        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),\n          or lists of them.\n\n        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.\n\n          - if ``convert=None``, return all variable values as elements of the\n            :meth:`base_ring`.\n\n          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`\n            by rounding to the nearest integer.\n\n          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`\n            by rounding to 0/1 and converting to ``bool``.\n\n          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary\n            and ``None`` for all other variables.\n\n        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is\n          not ``None``.  If the variable value differs from the nearest integer by\n          more than ``tolerance``, raise a ``RuntimeError``.\n\n```\nSimpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.",
    "created_at": "2021-07-15T17:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Here's a proposed interface:

```
    def get_values(self, *lists, convert=None, tolerance=None):
        r"""
        Return values found by the previous call to ``solve()``.

        INPUT:

        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),
          or lists of them.

        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.

          - if ``convert=None``, return all variable values as elements of the
            :meth:`base_ring`.

          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`
            by rounding to the nearest integer.

          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`
            by rounding to 0/1 and converting to ``bool``.

          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary
            and ``None`` for all other variables.

        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is
          not ``None``.  If the variable value differs from the nearest integer by
          more than ``tolerance``, raise a ``RuntimeError``.

```
Simpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.



---

archive/issue_comments_487537.json:
```json
{
    "body": "<a id='comment:18'></a>In fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.",
    "created_at": "2021-07-15T18:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487537",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>In fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.



---

archive/issue_comments_487538.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T18:47:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487539.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T19:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487540.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T20:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487541.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T21:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487542.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T21:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487543.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.\n+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n+\n+We use it to fix code using MIP models in `sage.graphs`.\n+\n \n Author: David Coudert\n \n```\n",
    "created_at": "2021-07-15T21:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487543",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,7 @@
-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.
+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
+
+We use it to fix code using MIP models in `sage.graphs`.
+
 
 Author: David Coudert
 
```




---

archive/issue_comments_487544.json:
```json
{
    "body": "<a id='comment:25'></a>Here's a new version, please take a look",
    "created_at": "2021-07-15T21:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487544",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Here's a new version, please take a look



---

archive/issue_comments_487545.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T21:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487546.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T21:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487547.json:
```json
{
    "body": "<a id='comment:28'></a>I like it !\n\nMay be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.",
    "created_at": "2021-07-15T21:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487547",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>I like it !

May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.



---

archive/issue_comments_487548.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T22:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487549.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:28 dcoudert]:\n> I like it !\n> \n> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.\n\n\nGood idea, let's keep just the one example application.",
    "created_at": "2021-07-15T22:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487549",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Replying to [comment:28 dcoudert]:
> I like it !
> 
> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.


Good idea, let's keep just the one example application.



---

archive/issue_comments_487550.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n+\n+We apply it to one use of MIP in `sage.graphs`.\n+\n+Other fixes using the new option will be tracked in #32191.\n \n \n Author: David Coudert\n```\n",
    "created_at": "2021-07-15T22:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487550",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,8 @@
+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
+
+We apply it to one use of MIP in `sage.graphs`.
+
+Other fixes using the new option will be tracked in #32191.
 
 
 Author: David Coudert
```




---

archive/issue_comments_487551.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T22:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487552.json:
```json
{
    "body": "<a id='comment:33'></a>The other helper functions will also need docstrings (and tests)",
    "created_at": "2021-07-15T22:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487552",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>The other helper functions will also need docstrings (and tests)



---

archive/issue_comments_487553.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T00:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487554.json:
```json
{
    "body": "<a id='comment:35'></a>Ready for review",
    "created_at": "2021-07-16T00:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487554",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Ready for review



---

archive/issue_comments_487555.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T06:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487556.json:
```json
{
    "body": "<a id='comment:37'></a>Shouldn't we do something like that to avoid errors on 32 bits machines ?\n\n```diff\n-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000\n+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...\n```\nand may be also for numbers like `5.333333333333333`",
    "created_at": "2021-07-16T06:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487556",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'></a>Shouldn't we do something like that to avoid errors on 32 bits machines ?

```diff
-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000
+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...
```
and may be also for numbers like `5.333333333333333`



---

archive/issue_comments_487557.json:
```json
{
    "body": "<a id='comment:38'></a>Sure, go ahead, it's fine with me to use some `...`",
    "created_at": "2021-07-16T07:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487557",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Sure, go ahead, it's fine with me to use some `...`



---

archive/issue_comments_487558.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T07:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487559.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-16T07:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487559",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487560.json:
```json
{
    "body": "<a id='comment:40'></a>For me, this is now good to go.",
    "created_at": "2021-07-16T07:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487560",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:40'></a>For me, this is now good to go.



---

archive/issue_comments_487561.json:
```json
{
    "body": "<a id='comment:41'></a>Great, thanks.",
    "created_at": "2021-07-16T07:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487561",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>Great, thanks.



---

archive/issue_comments_487562.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-25T13:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32197#issuecomment-487562",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_085289.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-25T13:26:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32197",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32197#event-85289"
}
```
