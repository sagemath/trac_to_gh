# Issue 32197: MixedIntegerLinearProgram.get_values: Add options convert, tolerance.

archive/issues_031960.json:
```json
{
    "assignees": [],
    "body": "Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n\nWe apply it to one use of MIP in `sage.graphs`.\n\nOther fixes using the new option will be tracked in #32191.\n\n\nCC:  @mkoeppe @tscrim @dimpase @DaveWitteMorris @seblabbe\n\nBranch/Commit: **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**\n\nReviewer: **David Coudert**\n\nAuthor: **David Coudert, Matthias Koeppe**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32197_\n\n",
    "closed_at": "2021-07-25T13:26:47Z",
    "created_at": "2021-07-13T17:04:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "MixedIntegerLinearProgram.get_values: Add options convert, tolerance.",
    "type": "issue",
    "updated_at": "2021-07-25T13:26:47Z",
    "url": "https://github.com/sagemath/sage/issues/32197",
    "user": "https://github.com/dcoudert"
}
```
Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.

We apply it to one use of MIP in `sage.graphs`.

Other fixes using the new option will be tracked in #32191.


CC:  @mkoeppe @tscrim @dimpase @DaveWitteMorris @seblabbe

Branch/Commit: **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**

Reviewer: **David Coudert**

Author: **David Coudert, Matthias Koeppe**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/32197_





---

archive/issue_events_444122.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444122"
}
```



---

archive/issue_events_444123.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444123"
}
```



---

archive/issue_events_444124.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444124"
}
```



---

archive/issue_events_444125.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444125"
}
```



---

archive/issue_comments_518713.json:
```json
{
    "body": "Branch: **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)**",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518713",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)**



---

archive/issue_comments_518714.json:
```json
{
    "body": "Commit: **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)**",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518714",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)**



---

archive/issue_comments_518715.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIf you agree with this solution, I will use it everywhere in sage.graphs\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7\">f4e744f</a></td><td><code>trac #32197: helper function to convert numerical 0/1 values to boolean</code></td></tr></table>\n",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518715",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1" align="right">comment:1</div>

If you agree with this solution, I will use it everywhere in sage.graphs

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7">f4e744f</a></td><td><code>trac #32197: helper function to convert numerical 0/1 values to boolean</code></td></tr></table>




---

archive/issue_events_444126.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:08:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444126"
}
```



---

archive/issue_comments_518716.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI would suggest to distinguish two cases explicitly:\n\na) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:\n\n   ```\n   if abs(value) < tolerance:\n       return False\n   if abs(value - 1) < tolerance:\n       return True\n   raise RuntimeError(\"integrality tolerance exceeded - modeling error or numerical difficulties?\")\n   ```\n\nb) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.\n\n\nThe default tolerances for the two cases a) and b) could be chosen quite differently.",
    "created_at": "2021-07-13T17:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518716",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

I would suggest to distinguish two cases explicitly:

a) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:

   ```
   if abs(value) < tolerance:
       return False
   if abs(value - 1) < tolerance:
       return True
   raise RuntimeError("integrality tolerance exceeded - modeling error or numerical difficulties?")
   ```

b) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.


The default tolerances for the two cases a) and b) could be chosen quite differently.



---

archive/issue_comments_518717.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFor case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?",
    "created_at": "2021-07-13T21:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518717",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

For case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?



---

archive/issue_comments_518718.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?\n\n```\ndef group_by_zero_fractional_one_value(mapping, tolerance):\n    return ({ index: value \n              for index, value in mapping.items() \n              if abs(value) < tolerance },\n            ...)\n```\n\n\nBy the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.",
    "created_at": "2021-07-13T22:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518718",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

For case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?

```
def group_by_zero_fractional_one_value(mapping, tolerance):
    return ({ index: value 
              for index, value in mapping.items() 
              if abs(value) < tolerance },
            ...)
```


By the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.



---

archive/issue_comments_518719.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.",
    "created_at": "2021-07-13T22:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518719",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

I think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.



---

archive/issue_comments_518720.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\"this\" being exactly?",
    "created_at": "2021-07-13T23:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518720",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

"this" being exactly?



---

archive/issue_comments_518721.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?",
    "created_at": "2021-07-14T10:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518721",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

The problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?



---

archive/issue_comments_518722.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDefinitely does not belong into the backends. This is an application-specific fix. See [#30635 comment:31](https://github.com/sagemath/sage/issues/30635#comment:31)\n\nIf you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.",
    "created_at": "2021-07-14T16:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518722",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Definitely does not belong into the backends. This is an application-specific fix. See [#30635 comment:31](https://github.com/sagemath/sage/issues/30635#comment:31)

If you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.



---

archive/issue_comments_518723.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCould this be a better proposal ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0\">9f4c7a5</a></td><td><code>trac #32197: another trial</code></td></tr></table>\n",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518723",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

Could this be a better proposal ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0">9f4c7a5</a></td><td><code>trac #32197: another trial</code></td></tr></table>




---

archive/issue_comments_518724.json:
```json
{
    "body": "Changed branch from **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)** to **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)**",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518724",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)** to **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)**



---

archive/issue_comments_518725.json:
```json
{
    "body": "Changed commit from **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)** to **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)**",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518725",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)** to **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)**



---

archive/issue_comments_518726.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.",
    "created_at": "2021-07-14T19:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518726",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.



---

archive/issue_comments_518727.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\nHowever, I'm not sure it can help solving the issue with glpk",
    "created_at": "2021-07-14T19:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518727",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.
However, I'm not sure it can help solving the issue with glpk



---

archive/issue_comments_518728.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dcoudert](#comment:11):\n> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\n\nYes, this is what I was referring to.\n\nThe point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.",
    "created_at": "2021-07-14T19:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518728",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dcoudert](#comment:11):
> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.

Yes, this is what I was referring to.

The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.



---

archive/issue_comments_518729.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mkoeppe](#comment:10):\n> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.\n\nInteger structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.",
    "created_at": "2021-07-15T11:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518729",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mkoeppe](#comment:10):
> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.

Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.



---

archive/issue_comments_518730.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@dimpase](#comment:13):\n> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. \n\nOutside of the scope of this ticket.",
    "created_at": "2021-07-15T16:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518730",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@dimpase](#comment:13):
> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. 

Outside of the scope of this ticket.



---

archive/issue_comments_518731.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb\">4892ca6</a></td><td><code>trac #32197: fix doctests</code></td></tr></table>\n",
    "created_at": "2021-07-15T16:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518731",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb">4892ca6</a></td><td><code>trac #32197: fix doctests</code></td></tr></table>




---

archive/issue_comments_518732.json:
```json
{
    "body": "Changed commit from **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)** to **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)**",
    "created_at": "2021-07-15T16:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)** to **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)**



---

archive/issue_comments_518733.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.\n\nIn this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?",
    "created_at": "2021-07-15T16:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518733",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.

In this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?



---

archive/issue_comments_518734.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHere's a proposed interface:\n\n```\n    def get_values(self, *lists, convert=None, tolerance=None):\n        r\"\"\"\n        Return values found by the previous call to ``solve()``.\n\n        INPUT:\n\n        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),\n          or lists of them.\n\n        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.\n\n          - if ``convert=None``, return all variable values as elements of the\n            :meth:`base_ring`.\n\n          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`\n            by rounding to the nearest integer.\n\n          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`\n            by rounding to 0/1 and converting to ``bool``.\n\n          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary\n            and ``None`` for all other variables.\n\n        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is\n          not ``None``.  If the variable value differs from the nearest integer by\n          more than ``tolerance``, raise a ``RuntimeError``.\n\n```\nSimpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.",
    "created_at": "2021-07-15T17:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518734",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Here's a proposed interface:

```
    def get_values(self, *lists, convert=None, tolerance=None):
        r"""
        Return values found by the previous call to ``solve()``.

        INPUT:

        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),
          or lists of them.

        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.

          - if ``convert=None``, return all variable values as elements of the
            :meth:`base_ring`.

          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`
            by rounding to the nearest integer.

          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`
            by rounding to 0/1 and converting to ``bool``.

          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary
            and ``None`` for all other variables.

        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is
          not ``None``.  If the variable value differs from the nearest integer by
          more than ``tolerance``, raise a ``RuntimeError``.

```
Simpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.



---

archive/issue_comments_518735.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIn fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.",
    "created_at": "2021-07-15T18:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518735",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

In fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.



---

archive/issue_comments_518736.json:
```json
{
    "body": "Changed commit from **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)** to **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)**",
    "created_at": "2021-07-15T18:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518736",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)** to **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)**



---

archive/issue_comments_518737.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911\">777dc0e</a></td><td><code>MixedIntegerLinearProgram.get_values: Add new parameters and input validation for them</code></td></tr></table>\n",
    "created_at": "2021-07-15T18:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518737",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911">777dc0e</a></td><td><code>MixedIntegerLinearProgram.get_values: Add new parameters and input validation for them</code></td></tr></table>




---

archive/issue_comments_518738.json:
```json
{
    "body": "Changed commit from **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)** to **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)**",
    "created_at": "2021-07-15T19:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518738",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)** to **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)**



---

archive/issue_comments_518739.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c\">6d06900</a></td><td><code>MixedIntegerLinearProgram.get_values: Handle convert and tolerance, add example</code></td></tr></table>\n",
    "created_at": "2021-07-15T19:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518739",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c">6d06900</a></td><td><code>MixedIntegerLinearProgram.get_values: Handle convert and tolerance, add example</code></td></tr></table>




---

archive/issue_comments_518740.json:
```json
{
    "body": "Changed commit from **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)** to **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)**",
    "created_at": "2021-07-15T20:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518740",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)** to **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)**



---

archive/issue_comments_518741.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9\">220a346</a></td><td><code>MixedIntegerLinearProgram.get_values: Add example with implied integrality</code></td></tr></table>\n",
    "created_at": "2021-07-15T20:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518741",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9">220a346</a></td><td><code>MixedIntegerLinearProgram.get_values: Add example with implied integrality</code></td></tr></table>




---

archive/issue_comments_518742.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b\">3dca4e9</a></td><td><code>MixedIntegerLinearProgram.get_values: If convert=True, convert real variables from float to base_ring</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518742",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b">3dca4e9</a></td><td><code>MixedIntegerLinearProgram.get_values: If convert=True, convert real variables from float to base_ring</code></td></tr></table>




---

archive/issue_comments_518743.json:
```json
{
    "body": "Changed commit from **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)** to **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)**",
    "created_at": "2021-07-15T21:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518743",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)** to **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)**



---

archive/issue_comments_518744.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc\">9ad3fa8</a></td><td><code>MixedIntegerLinearProgram.get_converted_values; subsumed by get_values</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518744",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc">9ad3fa8</a></td><td><code>MixedIntegerLinearProgram.get_converted_values; subsumed by get_values</code></td></tr></table>




---

archive/issue_comments_518745.json:
```json
{
    "body": "Changed commit from **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)** to **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)**",
    "created_at": "2021-07-15T21:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)** to **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)**



---

archive/issue_comments_518746.json:
```json
{
    "body": "Changed author from **David Coudert** to **David Coudert, Matthias Koeppe**",
    "created_at": "2021-07-15T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518746",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **David Coudert** to **David Coudert, Matthias Koeppe**



---

archive/issue_comments_518747.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.\n+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n+\n+We use it to fix code using MIP models in `sage.graphs`.\n+\n``````\n",
    "created_at": "2021-07-15T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518747",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.
+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
+
+We use it to fix code using MIP models in `sage.graphs`.
+
``````




---

archive/issue_comments_518748.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHere's a new version, please take a look",
    "created_at": "2021-07-15T21:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518748",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Here's a new version, please take a look



---

archive/issue_comments_518749.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a\">f62a777</a></td><td><code>src/sage/numerical/mip.pyx: Remove unused imports</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a">f62a777</a></td><td><code>src/sage/numerical/mip.pyx: Remove unused imports</code></td></tr></table>




---

archive/issue_comments_518750.json:
```json
{
    "body": "Changed commit from **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)** to **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)**",
    "created_at": "2021-07-15T21:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)** to **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)**



---

archive/issue_comments_518751.json:
```json
{
    "body": "Changed commit from **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)** to **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)**",
    "created_at": "2021-07-15T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518751",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)** to **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)**



---

archive/issue_comments_518752.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e\">cfd8c7b</a></td><td><code>trac #32197: remove another useless import</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518752",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e">cfd8c7b</a></td><td><code>trac #32197: remove another useless import</code></td></tr></table>




---

archive/issue_comments_518753.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI like it !\n\nMay be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.",
    "created_at": "2021-07-15T21:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518753",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">comment:28</div>

I like it !

May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.



---

archive/issue_comments_518754.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c\">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr></table>\n",
    "created_at": "2021-07-15T22:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518754",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr></table>




---

archive/issue_comments_518755.json:
```json
{
    "body": "Changed commit from **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)** to **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)**",
    "created_at": "2021-07-15T22:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)** to **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)**



---

archive/issue_comments_518756.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@dcoudert](#comment:28):\n> I like it !\n> \n> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.\n\nGood idea, let's keep just the one example application.",
    "created_at": "2021-07-15T22:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518756",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@dcoudert](#comment:28):
> I like it !
> 
> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.

Good idea, let's keep just the one example application.



---

archive/issue_events_444127.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T22:03:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "title_is": "MixedIntegerLinearProgram.get_values: Add options convert, tolerance.",
    "title_was": "MixedIntegerLinearProgram: fix tests of binary variables in sage.graphs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444127"
}
```



---

archive/issue_comments_518757.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n \n-We use it to fix code using MIP models in `sage.graphs`.\n+We apply it to one use of MIP in `sage.graphs`.\n \n+Other fixes using the new option will be tracked in #32191.\n+\n``````\n",
    "created_at": "2021-07-15T22:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518757",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
 
-We use it to fix code using MIP models in `sage.graphs`.
+We apply it to one use of MIP in `sage.graphs`.
 
+Other fixes using the new option will be tracked in #32191.
+
``````




---

archive/issue_comments_518758.json:
```json
{
    "body": "Changed commit from **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)** to **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)**",
    "created_at": "2021-07-15T22:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518758",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)** to **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)**



---

archive/issue_comments_518759.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39\">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr></table>\n",
    "created_at": "2021-07-15T22:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr></table>




---

archive/issue_comments_518760.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe other helper functions will also need docstrings (and tests)",
    "created_at": "2021-07-15T22:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518760",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

The other helper functions will also need docstrings (and tests)



---

archive/issue_comments_518761.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc\">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr></table>\n",
    "created_at": "2021-07-16T00:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518761",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr></table>




---

archive/issue_comments_518762.json:
```json
{
    "body": "Changed commit from **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)** to **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)**",
    "created_at": "2021-07-16T00:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518762",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)** to **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)**



---

archive/issue_comments_518763.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReady for review",
    "created_at": "2021-07-16T00:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518763",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Ready for review



---

archive/issue_comments_518764.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6\">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr></table>\n",
    "created_at": "2021-07-16T06:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518764",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr></table>




---

archive/issue_comments_518765.json:
```json
{
    "body": "Changed commit from **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)** to **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)**",
    "created_at": "2021-07-16T06:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518765",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)** to **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)**



---

archive/issue_comments_518766.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nShouldn't we do something like that to avoid errors on 32 bits machines ?\n\n```diff\n-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000\n+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...\n```\nand may be also for numbers like `5.333333333333333`",
    "created_at": "2021-07-16T06:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518766",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:37" align="right">comment:37</div>

Shouldn't we do something like that to avoid errors on 32 bits machines ?

```diff
-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000
+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...
```
and may be also for numbers like `5.333333333333333`



---

archive/issue_comments_518767.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nSure, go ahead, it's fine with me to use some `...`",
    "created_at": "2021-07-16T07:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518767",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Sure, go ahead, it's fine with me to use some `...`



---

archive/issue_comments_518768.json:
```json
{
    "body": "Changed commit from **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**",
    "created_at": "2021-07-16T07:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518768",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**



---

archive/issue_comments_518769.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765\">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr></table>\n",
    "created_at": "2021-07-16T07:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518769",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr></table>




---

archive/issue_events_444128.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-16T07:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444128"
}
```



---

archive/issue_events_444129.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-16T07:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444129"
}
```



---

archive/issue_comments_518770.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2021-07-16T07:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518770",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_518771.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nFor me, this is now good to go.",
    "created_at": "2021-07-16T07:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518771",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:40" align="right">comment:40</div>

For me, this is now good to go.



---

archive/issue_comments_518772.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nGreat, thanks.",
    "created_at": "2021-07-16T07:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518772",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Great, thanks.



---

archive/issue_events_444130.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-25T13:26:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444130"
}
```



---

archive/issue_events_444131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e98992134ba9b12e69cbad4f7f47ec8731954fa4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-07-25T13:26:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-444131"
}
```



---

archive/issue_comments_518773.json:
```json
{
    "body": "Changed branch from **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**",
    "created_at": "2021-07-25T13:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-518773",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**
