# Issue 32197: MixedIntegerLinearProgram.get_values: Add options convert, tolerance.

archive/issues_031960.json:
```json
{
    "assignees": [],
    "body": "Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n\nWe apply it to one use of MIP in `sage.graphs`.\n\nOther fixes using the new option will be tracked in #32191.\n\n\nCC:  @mkoeppe @tscrim @dimpase @DaveWitteMorris @seblabbe\n\nBranch/Commit: **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**\n\nReviewer: **David Coudert**\n\nAuthor: **David Coudert, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32197_\n\n",
    "closed_at": "2021-07-25T13:26:47Z",
    "created_at": "2021-07-13T17:04:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "MixedIntegerLinearProgram.get_values: Add options convert, tolerance.",
    "type": "issue",
    "updated_at": "2021-07-25T13:26:47Z",
    "url": "https://github.com/sagemath/sage/issues/32197",
    "user": "https://github.com/dcoudert"
}
```
Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.

We apply it to one use of MIP in `sage.graphs`.

Other fixes using the new option will be tracked in #32191.


CC:  @mkoeppe @tscrim @dimpase @DaveWitteMorris @seblabbe

Branch/Commit: **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**

Reviewer: **David Coudert**

Author: **David Coudert, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/32197_





---

archive/issue_events_411643.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411643"
}
```



---

archive/issue_events_411644.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411644"
}
```



---

archive/issue_events_411645.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411645"
}
```



---

archive/issue_events_411646.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411646"
}
```



---

archive/issue_comments_521644.json:
```json
{
    "body": "Branch: **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)**",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521644",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)**



---

archive/issue_comments_521645.json:
```json
{
    "body": "Commit: **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)**",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521645",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)**



---

archive/issue_comments_521646.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nIf you agree with this solution, I will use it everywhere in sage.graphs\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7\">f4e744f</a></td><td><code>trac #32197: helper function to convert numerical 0/1 values to boolean</code></td></tr></table>\n",
    "created_at": "2021-07-13T17:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521646",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'>Comment 1:</a>
If you agree with this solution, I will use it everywhere in sage.graphs

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7">f4e744f</a></td><td><code>trac #32197: helper function to convert numerical 0/1 values to boolean</code></td></tr></table>




---

archive/issue_events_411647.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-13T17:08:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411647"
}
```



---

archive/issue_comments_521647.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI would suggest to distinguish two cases explicitly:\n\na) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:\n\n   ```\n   if abs(value) < tolerance:\n       return False\n   if abs(value - 1) < tolerance:\n       return True\n   raise RuntimeError(\"integrality tolerance exceeded - modeling error or numerical difficulties?\")\n   ```\n\nb) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.\n\n\nThe default tolerances for the two cases a) and b) could be chosen quite differently.",
    "created_at": "2021-07-13T17:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521647",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'>Comment 2:</a>
I would suggest to distinguish two cases explicitly:

a) if it is known that in an exact LP/MIP computation, the value would be either 0 or 1, then:

   ```
   if abs(value) < tolerance:
       return False
   if abs(value - 1) < tolerance:
       return True
   raise RuntimeError("integrality tolerance exceeded - modeling error or numerical difficulties?")
   ```

b) if in an exact computation, the value would be either 0, 1, or a fractional value, a separate helper function should be used in order to distinguish these three outcomes. This is a typical situation in iterative rounding algorithms.


The default tolerances for the two cases a) and b) could be chosen quite differently.



---

archive/issue_comments_521648.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nFor case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?",
    "created_at": "2021-07-13T21:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521648",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'>Comment 3:</a>
For case b), I'm not sure of what to return when the expected value is fractional. The value itself or something else ? Also, how to name this function ?



---

archive/issue_comments_521649.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFor case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?\n\n```\ndef group_by_zero_fractional_one_value(mapping, tolerance):\n    return ({ index: value \n              for index, value in mapping.items() \n              if abs(value) < tolerance },\n            ...)\n```\n\n\nBy the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.",
    "created_at": "2021-07-13T22:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521649",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
For case b), maybe just two functions `is_zero`, `is_one`; or perhaps in some cases a function like this would be useful?

```
def group_by_zero_fractional_one_value(mapping, tolerance):
    return ({ index: value 
              for index, value in mapping.items() 
              if abs(value) < tolerance },
            ...)
```


By the way, I don't like the idea of having such helper functions in `sage.numerical.mip`, in particular defining there a default for the tolerance. The default is really application-specific, so the helper function should go somewhere in `sage.graphs`.



---

archive/issue_comments_521650.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.",
    "created_at": "2021-07-13T22:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521650",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'>Comment 5:</a>
I think this opens a can of bugs. If you want an exact value 0/1, use binary variables, not floats.



---

archive/issue_comments_521651.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n\"this\" being exactly?",
    "created_at": "2021-07-13T23:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521651",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'>Comment 6:</a>
"this" being exactly?



---

archive/issue_comments_521652.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThe problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?",
    "created_at": "2021-07-14T10:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521652",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'>Comment 7:</a>
The problem is that the backends return values of type double even for binary variables. Should we patch the backends ? add a method like `get_cast_values` that casts the values to the type of the variable ?



---

archive/issue_comments_521653.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nDefinitely does not belong into the backends. This is an application-specific fix. See [#30635 comment:31](https://github.com/sagemath/sage/issues/30635#comment:31)\n\nIf you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.",
    "created_at": "2021-07-14T16:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521653",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'>Comment 8:</a>
Definitely does not belong into the backends. This is an application-specific fix. See [#30635 comment:31](https://github.com/sagemath/sage/issues/30635#comment:31)

If you really want to put a solution into `sage.numerical.mip`, it should go into the frontend (`MixedIntegerLinearProgram.get_values`) and be enabled explicitly and per instance of `MIPVariable`. New keyword arguments for `MixedIntegerLinearProgram.new_variable`, perhaps `convert_to=bool`, `convert_tolerance` (without default) could enable this behavior.



---

archive/issue_comments_521654.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nCould this be a better proposal ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0\">9f4c7a5</a></td><td><code>trac #32197: another trial</code></td></tr></table>\n",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521654",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'>Comment 9:</a>
Could this be a better proposal ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0">9f4c7a5</a></td><td><code>trac #32197: another trial</code></td></tr></table>




---

archive/issue_comments_521655.json:
```json
{
    "body": "Changed branch from **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)** to **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)**",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521655",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/graphs/32197_binary_variables_in_MIP](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_binary_variables_in_MIP)** to **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)**



---

archive/issue_comments_521656.json:
```json
{
    "body": "Changed commit from **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)** to **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)**",
    "created_at": "2021-07-14T18:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521656",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[f4e744f](https://github.com/sagemath/sagetrac-mirror/commit/f4e744fcf91274af81f4ad9cd8effd2ec61978a7)** to **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)**



---

archive/issue_comments_521657.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.",
    "created_at": "2021-07-14T19:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521657",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'>Comment 10:</a>
I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.



---

archive/issue_comments_521658.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThe idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\nHowever, I'm not sure it can help solving the issue with glpk",
    "created_at": "2021-07-14T19:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521658",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'>Comment 11:</a>
The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.
However, I'm not sure it can help solving the issue with glpk



---

archive/issue_comments_521659.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@dcoudert](#comment%3A11):\n> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.\n\nYes, this is what I was referring to.\n\nThe point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.",
    "created_at": "2021-07-14T19:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521659",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@dcoudert](#comment%3A11):
> The idea here is that the user can choose between the previous method (``get_values``) returning double values or this new method (``get_converted_values``) which tries to cast to declared type.

Yes, this is what I was referring to.

The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.



---

archive/issue_comments_521660.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@mkoeppe](#comment%3A10):\n> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.\n\nInteger structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.",
    "created_at": "2021-07-15T11:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521660",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@mkoeppe](#comment%3A10):
> I don't like keying this behavior to the declared type of a MIP variable (binary or integer). Using LP and MIP models in which integrality of variable values is implied by the structure of the model is a central modeling technique. For example, in single-commodity network flow models with integer data, expert modelers would not use integer variables, so that a pure LP solver can be used. Integrality is automatic because of the structure of the model.

Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. Then with floating point YMMV.



---

archive/issue_comments_521661.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@dimpase](#comment%3A13):\n> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. \n\nOutside of the scope of this ticket.",
    "created_at": "2021-07-15T16:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521661",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@dimpase](#comment%3A13):
> Integer structure of the polyhedron might be automatic, but the objective function might be non-integer. 

Outside of the scope of this ticket.



---

archive/issue_comments_521662.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb\">4892ca6</a></td><td><code>trac #32197: fix doctests</code></td></tr></table>\n",
    "created_at": "2021-07-15T16:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521662",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb">4892ca6</a></td><td><code>trac #32197: fix doctests</code></td></tr></table>




---

archive/issue_comments_521663.json:
```json
{
    "body": "Changed commit from **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)** to **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)**",
    "created_at": "2021-07-15T16:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521663",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9f4c7a5](https://github.com/sagemath/sagetrac-mirror/commit/9f4c7a58a6b8d72a902a9545a3ac3ed3a5fe6db0)** to **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)**



---

archive/issue_comments_521664.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\n> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.\n\nIn this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?",
    "created_at": "2021-07-15T16:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521664",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'>Comment 16:</a>
> The point is that users need to be able to do this conversion with error checking even for certain variables that are NOT declared as integer/binary to the solver.

In this case, we can have a hidden function in mip to convert the values of a variable to bool and another to convert to integer (both with tolerance). But this should be accessible to experts only. Is it what you expect ?



---

archive/issue_comments_521665.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nHere's a proposed interface:\n\n```\n    def get_values(self, *lists, convert=None, tolerance=None):\n        r\"\"\"\n        Return values found by the previous call to ``solve()``.\n\n        INPUT:\n\n        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),\n          or lists of them.\n\n        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.\n\n          - if ``convert=None``, return all variable values as elements of the\n            :meth:`base_ring`.\n\n          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`\n            by rounding to the nearest integer.\n\n          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`\n            by rounding to 0/1 and converting to ``bool``.\n\n          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary\n            and ``None`` for all other variables.\n\n        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is\n          not ``None``.  If the variable value differs from the nearest integer by\n          more than ``tolerance``, raise a ``RuntimeError``.\n\n```\nSimpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.",
    "created_at": "2021-07-15T17:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521665",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
Here's a proposed interface:

```
    def get_values(self, *lists, convert=None, tolerance=None):
        r"""
        Return values found by the previous call to ``solve()``.

        INPUT:

        - ``*lists`` -- any instance of ``MIPVariable`` (or one of its elements),
          or lists of them.

        - ``convert`` -- ``None`` (default), ``ZZ``, ``bool``, or ``True``.

          - if ``convert=None``, return all variable values as elements of the
            :meth:`base_ring`.

          - if ``convert=ZZ``, convert all variable values from the :meth:`base_ring`
            by rounding to the nearest integer.

          - if ``convert=bool``, convert all variable values from the :meth:`base_ring`
            by rounding to 0/1 and converting to ``bool``.

          - if ``convert=True``, use ``ZZ`` for MIP variables declared integer or binary
            and ``None`` for all other variables.

        - ``tolerance`` -- nonnegative real number.  Required if ``convert`` is
          not ``None``.  If the variable value differs from the nearest integer by
          more than ``tolerance``, raise a ``RuntimeError``.

```
Simpler than what I suggested in comment 8 above and more discoverable than putting this in a separate method.



---

archive/issue_comments_521666.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nIn fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.",
    "created_at": "2021-07-15T18:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521666",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'>Comment 18:</a>
In fact, I would suggest to make it an error to pass `tolerance=0` when `base_ring` is not an exact ring.



---

archive/issue_comments_521667.json:
```json
{
    "body": "Changed commit from **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)** to **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)**",
    "created_at": "2021-07-15T18:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521667",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4892ca6](https://github.com/sagemath/sagetrac-mirror/commit/4892ca69b5a3e2536b8b81e920a4a5c680000ccb)** to **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)**



---

archive/issue_comments_521668.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911\">777dc0e</a></td><td><code>MixedIntegerLinearProgram.get_values: Add new parameters and input validation for them</code></td></tr></table>\n",
    "created_at": "2021-07-15T18:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521668",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911">777dc0e</a></td><td><code>MixedIntegerLinearProgram.get_values: Add new parameters and input validation for them</code></td></tr></table>




---

archive/issue_comments_521669.json:
```json
{
    "body": "Changed commit from **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)** to **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)**",
    "created_at": "2021-07-15T19:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521669",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[777dc0e](https://github.com/sagemath/sagetrac-mirror/commit/777dc0e44fe1634fb7db587637132354e2ae5911)** to **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)**



---

archive/issue_comments_521670.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c\">6d06900</a></td><td><code>MixedIntegerLinearProgram.get_values: Handle convert and tolerance, add example</code></td></tr></table>\n",
    "created_at": "2021-07-15T19:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521670",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c">6d06900</a></td><td><code>MixedIntegerLinearProgram.get_values: Handle convert and tolerance, add example</code></td></tr></table>




---

archive/issue_comments_521671.json:
```json
{
    "body": "Changed commit from **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)** to **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)**",
    "created_at": "2021-07-15T20:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521671",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d06900](https://github.com/sagemath/sagetrac-mirror/commit/6d06900e31839d8da926efb73633adb29654e60c)** to **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)**



---

archive/issue_comments_521672.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9\">220a346</a></td><td><code>MixedIntegerLinearProgram.get_values: Add example with implied integrality</code></td></tr></table>\n",
    "created_at": "2021-07-15T20:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521672",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9">220a346</a></td><td><code>MixedIntegerLinearProgram.get_values: Add example with implied integrality</code></td></tr></table>




---

archive/issue_comments_521673.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b\">3dca4e9</a></td><td><code>MixedIntegerLinearProgram.get_values: If convert=True, convert real variables from float to base_ring</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521673",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b">3dca4e9</a></td><td><code>MixedIntegerLinearProgram.get_values: If convert=True, convert real variables from float to base_ring</code></td></tr></table>




---

archive/issue_comments_521674.json:
```json
{
    "body": "Changed commit from **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)** to **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)**",
    "created_at": "2021-07-15T21:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[220a346](https://github.com/sagemath/sagetrac-mirror/commit/220a3465515de80998344500696917bbeb0553b9)** to **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)**



---

archive/issue_comments_521675.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc\">9ad3fa8</a></td><td><code>MixedIntegerLinearProgram.get_converted_values; subsumed by get_values</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521675",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc">9ad3fa8</a></td><td><code>MixedIntegerLinearProgram.get_converted_values; subsumed by get_values</code></td></tr></table>




---

archive/issue_comments_521676.json:
```json
{
    "body": "Changed commit from **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)** to **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)**",
    "created_at": "2021-07-15T21:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521676",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3dca4e9](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e940cfdbe84b9a301a71f263b36a01d441b)** to **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)**



---

archive/issue_comments_521677.json:
```json
{
    "body": "Changed author from **David Coudert** to **David Coudert, Matthias Koeppe**",
    "created_at": "2021-07-15T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521677",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **David Coudert** to **David Coudert, Matthias Koeppe**



---

archive/issue_comments_521678.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.\n+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n+\n+We use it to fix code using MIP models in `sage.graphs`.\n+\n``````\n",
    "created_at": "2021-07-15T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521678",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-Introduce a helper function to convert inexact 0/1 value to boolean and use it in sage.graphs.
+Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
+
+We use it to fix code using MIP models in `sage.graphs`.
+
``````




---

archive/issue_comments_521679.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nHere's a new version, please take a look",
    "created_at": "2021-07-15T21:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521679",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>Comment 25:</a>
Here's a new version, please take a look



---

archive/issue_comments_521680.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a\">f62a777</a></td><td><code>src/sage/numerical/mip.pyx: Remove unused imports</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521680",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a">f62a777</a></td><td><code>src/sage/numerical/mip.pyx: Remove unused imports</code></td></tr></table>




---

archive/issue_comments_521681.json:
```json
{
    "body": "Changed commit from **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)** to **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)**",
    "created_at": "2021-07-15T21:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521681",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9ad3fa8](https://github.com/sagemath/sagetrac-mirror/commit/9ad3fa80afd83753fe5b6445eb8338f8f885ddcc)** to **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)**



---

archive/issue_comments_521682.json:
```json
{
    "body": "Changed commit from **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)** to **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)**",
    "created_at": "2021-07-15T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521682",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f62a777](https://github.com/sagemath/sagetrac-mirror/commit/f62a7777b342bc46ecd5e4ccb1819d12bdb5db8a)** to **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)**



---

archive/issue_comments_521683.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e\">cfd8c7b</a></td><td><code>trac #32197: remove another useless import</code></td></tr></table>\n",
    "created_at": "2021-07-15T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521683",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'>Comment 27:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e">cfd8c7b</a></td><td><code>trac #32197: remove another useless import</code></td></tr></table>




---

archive/issue_comments_521684.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI like it !\n\nMay be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.",
    "created_at": "2021-07-15T21:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521684",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'>Comment 28:</a>
I like it !

May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.



---

archive/issue_comments_521685.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c\">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr></table>\n",
    "created_at": "2021-07-15T22:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521685",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>Comment 29:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c">cf16293</a></td><td><code>MixedIntegerLinearProgram.get_values: Fix up for tolerance=None</code></td></tr></table>




---

archive/issue_comments_521686.json:
```json
{
    "body": "Changed commit from **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)** to **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)**",
    "created_at": "2021-07-15T22:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cfd8c7b](https://github.com/sagemath/sagetrac-mirror/commit/cfd8c7becb47cbe3ad9ad5cf9b6fb2b12122657e)** to **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)**



---

archive/issue_comments_521687.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@dcoudert](#comment%3A28):\n> I like it !\n> \n> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.\n\nGood idea, let's keep just the one example application.",
    "created_at": "2021-07-15T22:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521687",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@dcoudert](#comment%3A28):
> I like it !
> 
> May be we should change the title of the ticket and let other corrections in sage.graphs for other tickets.

Good idea, let's keep just the one example application.



---

archive/issue_events_411648.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-15T22:03:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "title_is": "MixedIntegerLinearProgram.get_values: Add options convert, tolerance.",
    "title_was": "MixedIntegerLinearProgram: fix tests of binary variables in sage.graphs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411648"
}
```



---

archive/issue_comments_521688.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.\n \n-We use it to fix code using MIP models in `sage.graphs`.\n+We apply it to one use of MIP in `sage.graphs`.\n \n+Other fixes using the new option will be tracked in #32191.\n+\n``````\n",
    "created_at": "2021-07-15T22:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521688",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Extend `MixedIntegerLinearProgram.get_values` so it can convert inexact integer values from numerical solvers to `ZZ` and `bool`, with tolerance checking.
 
-We use it to fix code using MIP models in `sage.graphs`.
+We apply it to one use of MIP in `sage.graphs`.
 
+Other fixes using the new option will be tracked in #32191.
+
``````




---

archive/issue_comments_521689.json:
```json
{
    "body": "Changed commit from **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)** to **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)**",
    "created_at": "2021-07-15T22:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521689",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf16293](https://github.com/sagemath/sagetrac-mirror/commit/cf16293c1131db37f0ed1274eded6717c819989c)** to **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)**



---

archive/issue_comments_521690.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39\">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr></table>\n",
    "created_at": "2021-07-15T22:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521690",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39">5a74113</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value: Add docstring</code></td></tr></table>




---

archive/issue_comments_521691.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nThe other helper functions will also need docstrings (and tests)",
    "created_at": "2021-07-15T22:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521691",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'>Comment 33:</a>
The other helper functions will also need docstrings (and tests)



---

archive/issue_comments_521692.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc\">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr></table>\n",
    "created_at": "2021-07-16T00:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521692",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc">aa4eed5</a></td><td><code>MixedIntegerLinearProgram._backend_variable_value*: Add docstrings, examples</code></td></tr></table>




---

archive/issue_comments_521693.json:
```json
{
    "body": "Changed commit from **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)** to **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)**",
    "created_at": "2021-07-16T00:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5a74113](https://github.com/sagemath/sagetrac-mirror/commit/5a74113233bba7b0ac689f576849c9c36dd6cb39)** to **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)**



---

archive/issue_comments_521694.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nReady for review",
    "created_at": "2021-07-16T00:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521694",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'>Comment 35:</a>
Ready for review



---

archive/issue_comments_521695.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6\">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr></table>\n",
    "created_at": "2021-07-16T06:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521695",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'>Comment 36:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6">00b34aa</a></td><td><code>trac #32197: review commit</code></td></tr></table>




---

archive/issue_comments_521696.json:
```json
{
    "body": "Changed commit from **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)** to **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)**",
    "created_at": "2021-07-16T06:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa4eed5](https://github.com/sagemath/sagetrac-mirror/commit/aa4eed5843bce5bbb022ef79577e266d2ef41bfc)** to **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)**



---

archive/issue_comments_521697.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nShouldn't we do something like that to avoid errors on 32 bits machines ?\n\n```diff\n-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000\n+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...\n```\nand may be also for numbers like `5.333333333333333`",
    "created_at": "2021-07-16T06:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521697",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'>Comment 37:</a>
Shouldn't we do something like that to avoid errors on 32 bits machines ?

```diff
-            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100000000000000
+            RuntimeError: variable x_1 exceeds integrality tolerance 0.0100...
```
and may be also for numbers like `5.333333333333333`



---

archive/issue_comments_521698.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nSure, go ahead, it's fine with me to use some `...`",
    "created_at": "2021-07-16T07:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521698",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'>Comment 38:</a>
Sure, go ahead, it's fine with me to use some `...`



---

archive/issue_comments_521699.json:
```json
{
    "body": "Changed commit from **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**",
    "created_at": "2021-07-16T07:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[00b34aa](https://github.com/sagemath/sagetrac-mirror/commit/00b34aaedbefbdfa7d431868f20055fd6d3572b6)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**



---

archive/issue_comments_521700.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765\">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr></table>\n",
    "created_at": "2021-07-16T07:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521700",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765">db83853</a></td><td><code>trac #32197: another review commit</code></td></tr></table>




---

archive/issue_events_411649.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-16T07:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411649"
}
```



---

archive/issue_events_411650.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-07-16T07:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411650"
}
```



---

archive/issue_comments_521701.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2021-07-16T07:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521701",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_521702.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nFor me, this is now good to go.",
    "created_at": "2021-07-16T07:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521702",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:40'>Comment 40:</a>
For me, this is now good to go.



---

archive/issue_comments_521703.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nGreat, thanks.",
    "created_at": "2021-07-16T07:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521703",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'>Comment 41:</a>
Great, thanks.



---

archive/issue_events_411651.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-25T13:26:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411651"
}
```



---

archive/issue_events_411652.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e98992134ba9b12e69cbad4f7f47ec8731954fa4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-07-25T13:26:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32197#event-411652"
}
```



---

archive/issue_comments_521704.json:
```json
{
    "body": "Changed branch from **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**",
    "created_at": "2021-07-25T13:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32197#issuecomment-521704",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/32197_v2](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/32197_v2)** to **[db83853](https://github.com/sagemath/sagetrac-mirror/commit/db83853c6df0ed792b4b011b842cf5fd01444765)**
