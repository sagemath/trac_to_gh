# Issue 32352: Efficient algorithm to compute products in the C' basis of an Iwahori-Hecke algebra

archive/issues_032115.json:
```json
{
    "body": "> **(Update after review completed)** The `Cp_Coxeter3` class mentioned below was eventually merged into the `Cp` class, and the `Cp_Coxeter3.product_on_basis` method is moved into the latter. \n\n\nThis ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n\n```python\nsage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\nsage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3\nsage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\nsage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3\nsage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3\n(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]\n+ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]\n+ (v^-1+v)*Cp[3,4,1,2,3,4]\n+ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]\n+ (v^-1+v)*Cp[3,4,1,2]\nsage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3\n(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]\n+ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]\n+ (v^-1+v)*CpC[3,4,1,2,3,4]\n+ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]\n+ (v^-1+v)*CpC[3,4,1,2]\n```\n\nThe following computation also seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but it is again instant in `Cp_Coxeter3`:\n\n```python\nsage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3\nsage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\nsage: CpC = H.Cp_Coxeter3()                                 # optional - coxeter3\nsage: CpC[1,2,1,8,9,8]*CpC[1,2,3,7,8,9]                     # optional - coxeter3\n(v^-2+2+v^2)*CpC[1,2,1,3,7,8,7,9,8,7]\n+ (v^-2+2+v^2)*CpC[1,2,1,3,8,9,8,7]\n+ (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]\n```\n \nThe main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n\nThe product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to determine all cells in any finite Coxeter group. We have included functions in `sage/categories/coxeter_groups.py` that can calculate the cells containing an element or compute all cells within a finite Coxeter group. Some example computations are given below.\n\n\n```python\nsage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3\nsage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3\nsage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3\n{[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}\nsage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3\n{[3], [3, 2], [3, 2, 1], [3, 2, 3]}\nsage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3\n{[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],\n [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}\n```\n\nCC:  @tscrim @AndrewAtLarge\n\nKeywords: Coxeter systems,Coxeter groups,Iwahori-Hecke algebra,Kazhdan-Lusztig cells,Kazhdan-Lusztig basis\n\nBranch/Commit: 901699badeb305cdfbbfd52cc8427a3ea53512b8\n\nReviewer: Travis Scrimshaw\n\nAuthor: Chase Meadors, Tianyuan Xu\n\nDependencies: #32266\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32352\n\n",
    "closed_at": "2021-10-19T20:30:43Z",
    "created_at": "2021-08-09T22:37:49Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Efficient algorithm to compute products in the C' basis of an Iwahori-Hecke algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32352",
    "user": "https://github.com/cemulate"
}
```
> **(Update after review completed)** The `Cp_Coxeter3` class mentioned below was eventually merged into the `Cp` class, and the `Cp_Coxeter3.product_on_basis` method is moved into the latter. 


This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:

```python
sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3
sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3
sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3
(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]
+ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]
+ (v^-1+v)*Cp[3,4,1,2,3,4]
+ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]
+ (v^-1+v)*Cp[3,4,1,2]
sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3
(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]
+ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]
+ (v^-1+v)*CpC[3,4,1,2,3,4]
+ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]
+ (v^-1+v)*CpC[3,4,1,2]
```

The following computation also seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but it is again instant in `Cp_Coxeter3`:

```python
sage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3
sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
sage: CpC = H.Cp_Coxeter3()                                 # optional - coxeter3
sage: CpC[1,2,1,8,9,8]*CpC[1,2,3,7,8,9]                     # optional - coxeter3
(v^-2+2+v^2)*CpC[1,2,1,3,7,8,7,9,8,7]
+ (v^-2+2+v^2)*CpC[1,2,1,3,8,9,8,7]
+ (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]
```
 
The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.

The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to determine all cells in any finite Coxeter group. We have included functions in `sage/categories/coxeter_groups.py` that can calculate the cells containing an element or compute all cells within a finite Coxeter group. Some example computations are given below.


```python
sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3
sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3
sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3
{[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}
sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3
{[3], [3, 2], [3, 2, 1], [3, 2, 3]}
sage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3
{[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],
 [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}
```

CC:  @tscrim @AndrewAtLarge

Keywords: Coxeter systems,Coxeter groups,Iwahori-Hecke algebra,Kazhdan-Lusztig cells,Kazhdan-Lusztig basis

Branch/Commit: 901699badeb305cdfbbfd52cc8427a3ea53512b8

Reviewer: Travis Scrimshaw

Author: Chase Meadors, Tianyuan Xu

Dependencies: #32266

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32352





---

archive/issue_events_096518.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "rename": {
        "from": "Efficient algorithm to compute products in the C' basis of a Iwahori-Hecke algebra",
        "to": "Efficient algorithm to compute products in the C' basis of an Iwahori-Hecke algebra"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32352#event-96518"
}
```



---

archive/issue_comments_644252.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-cemulate/cpc_basis\"",
    "created_at": "2021-08-09T22:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644252",
    "user": "https://github.com/cemulate"
}
```

Changing branch from "" to "u/gh-cemulate/cpc_basis"



---

archive/issue_comments_644253.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[067c103](https://github.com/sagemath/sagetrac-mirror/commit/067c103876b528e0b0f3685554be59dd80d21d88)|`Cp-to-CpC label changes`|\n|[32a240e](https://github.com/sagemath/sagetrac-mirror/commit/32a240ef91023a35cb6e096ddc5d0a60e2c77985)|`Format and fix docstrings; get tests passing`|\n|[32d0a2a](https://github.com/sagemath/sagetrac-mirror/commit/32d0a2aa2af1afb47c783b1b471c6e84c4064dcb)|`Change side to be last argument in all methods that take it; default 'left'`|\n|[efc5b0e](https://github.com/sagemath/sagetrac-mirror/commit/efc5b0e698649f8a11b3b139485bb71509911dfa)|`Fix typos; handle some TODOs`|\n|[e7eecf6](https://github.com/sagemath/sagetrac-mirror/commit/e7eecf675e687eb3dded1873e1fa475ce217555d)|`Better examples for speed up demonstration`|\n|[4fd9688](https://github.com/sagemath/sagetrac-mirror/commit/4fd9688af683669ff60e2eea4978e897c5da39b8)|`Mark doctests throughout with # optional - coxeter3. Tweak _to_T_basis() tests`|\n|[6acc0ec](https://github.com/sagemath/sagetrac-mirror/commit/6acc0ec637f92790dd4c249b2c2ab0f4772fa71d)|`Move ALGORITHM to the docstring of product_on_basis`|\n|[7d9d809](https://github.com/sagemath/sagetrac-mirror/commit/7d9d80916d722b5533160d53c840d40c080ca227)|`Tweak class docs`|\n|[dca76a3](https://github.com/sagemath/sagetrac-mirror/commit/dca76a307b95862314b7e07492e6b92f134662f4)|`very minor changes to doc strings`|\n|[4d94901](https://github.com/sagemath/sagetrac-mirror/commit/4d949013a3e9e248ade7aeef04abb5d486cd0d9a)|`Include basic cell computations using the CpC basis.`|",
    "created_at": "2021-08-09T22:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[067c103](https://github.com/sagemath/sagetrac-mirror/commit/067c103876b528e0b0f3685554be59dd80d21d88)|`Cp-to-CpC label changes`|
|[32a240e](https://github.com/sagemath/sagetrac-mirror/commit/32a240ef91023a35cb6e096ddc5d0a60e2c77985)|`Format and fix docstrings; get tests passing`|
|[32d0a2a](https://github.com/sagemath/sagetrac-mirror/commit/32d0a2aa2af1afb47c783b1b471c6e84c4064dcb)|`Change side to be last argument in all methods that take it; default 'left'`|
|[efc5b0e](https://github.com/sagemath/sagetrac-mirror/commit/efc5b0e698649f8a11b3b139485bb71509911dfa)|`Fix typos; handle some TODOs`|
|[e7eecf6](https://github.com/sagemath/sagetrac-mirror/commit/e7eecf675e687eb3dded1873e1fa475ce217555d)|`Better examples for speed up demonstration`|
|[4fd9688](https://github.com/sagemath/sagetrac-mirror/commit/4fd9688af683669ff60e2eea4978e897c5da39b8)|`Mark doctests throughout with # optional - coxeter3. Tweak _to_T_basis() tests`|
|[6acc0ec](https://github.com/sagemath/sagetrac-mirror/commit/6acc0ec637f92790dd4c249b2c2ab0f4772fa71d)|`Move ALGORITHM to the docstring of product_on_basis`|
|[7d9d809](https://github.com/sagemath/sagetrac-mirror/commit/7d9d80916d722b5533160d53c840d40c080ca227)|`Tweak class docs`|
|[dca76a3](https://github.com/sagemath/sagetrac-mirror/commit/dca76a307b95862314b7e07492e6b92f134662f4)|`very minor changes to doc strings`|
|[4d94901](https://github.com/sagemath/sagetrac-mirror/commit/4d949013a3e9e248ade7aeef04abb5d486cd0d9a)|`Include basic cell computations using the CpC basis.`|



---

archive/issue_comments_644254.json:
```json
{
    "body": "Changing commit from \"\" to \"4d949013a3e9e248ade7aeef04abb5d486cd0d9a\"",
    "created_at": "2021-08-09T22:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "4d949013a3e9e248ade7aeef04abb5d486cd0d9a"



---

archive/issue_comments_644255.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#32266\"",
    "created_at": "2021-08-09T23:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644255",
    "user": "https://github.com/cemulate"
}
```

Changing dependencies from "" to "#32266"



---

archive/issue_comments_644256.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,74 @@\n+This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.\n \n+The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.\n+This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of \"mu-coefficients\" is delegated to coxeter3).\n+It uses an algorithm to compute products of basis elements directly in the C' basis (without conversion), and is able to achieve computations that seem infeasable or prohibitively long in the existing `Cp` basis.\n+A description of the ideas and algorithm can be found in the class documentation for `IwahoriHeckeAlgebra.Cp_Coxeter3`; the main content of the algorithm occurs in `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. \n+\n+To use the `Cp_Coxeter3` basis, the `IwahoriHeckeAlgebra` must be created with a `coxeter3`-implemented Coxeter group.\n+As `IwahoriHeckeAlgebra.Cp_Coxeter3` is an alternative implementation of the C' basis, it has identical usage to the existing implementation `IwahoriHeckeAlgebra.Cp`.\n+See the `Cp_Coxeter3` class documentation a thorough introduction to the implementation; we include here two examples from the class documentation that demonstrate the improvement in computational power:\n+\n+First, an example of a computation that takes 5 seconds in `Cp` and is instant in `Cp_Coxeter3`:\n+\n+```python\n+sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\n+sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3\n+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\n+sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3\n+sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3\n+(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]\n++ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]\n++ (v^-1+v)*Cp[3,4,1,2,3,4]\n++ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]\n++ (v^-1+v)*Cp[3,4,1,2]\n+sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3\n+(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]\n++ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]\n++ (v^-1+v)*CpC[3,4,1,2,3,4]\n++ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]\n++ (v^-1+v)*CpC[3,4,1,2]\n+```\n+\n+Secondly, a computation in `H4` that seems infeasible in the existing `Cp` implementation (that is, it did not terminate in any reasonable time):\n+\n+```python\n+sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3\n+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\n+sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3\n+sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3\n+(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]\n++ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]\n++ (v^-1+v)*Cp[3,4,1,2,3,4]\n++ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]\n++ (v^-1+v)*Cp[3,4,1,2]\n+sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3\n+(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]\n++ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]\n++ (v^-1+v)*CpC[3,4,1,2,3,4]\n++ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]\n++ (v^-1+v)*CpC[3,4,1,2]\n+```\n+\n+The main content of this ticket is the addition of the `Cp_Coxeter3` basis to `iwahori_hecke_algebra.py`.\n+We also implement conversions to and from the other existing bases.\n+As an application, we have included a method to compute Kazhdan-Lusztig left, right, and two-sided cells of Coxeter group elements, that uses the `Cp_Coxeter3` basis to compute products.\n+Its usage is as follows:\n+\n+```\n+sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3\n+sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3\n+sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3\n+{[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}\n+sage: W.kazhdan_lusztig_cell(s2*s3*s2)                      # optional - coxeter3\n+{[1, 2], [1, 2, 3, 2], [2], [2, 3, 2], [3, 2]}\n+sage: W.kazhdan_lusztig_cell(s1*s2*s3)                      # optional - coxeter3\n+{[1, 2, 3], [2, 3], [3], [3, 2, 3]}\n+sage: W.kazhdan_lusztig_cell(s3)                            # optional - coxeter3\n+{[1, 2, 3], [2, 3], [3], [3, 2, 3]}\n+sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3\n+{[3], [3, 2], [3, 2, 1], [3, 2, 3]}\n+sage: W.kazhdan_lusztig_cell(s3, side='both')               # optional - coxeter3\n+{[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],\n+ [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}\n+```\n``````\n",
    "created_at": "2021-08-09T23:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644256",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,74 @@
+This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.
 
+The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.
+This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of "mu-coefficients" is delegated to coxeter3).
+It uses an algorithm to compute products of basis elements directly in the C' basis (without conversion), and is able to achieve computations that seem infeasable or prohibitively long in the existing `Cp` basis.
+A description of the ideas and algorithm can be found in the class documentation for `IwahoriHeckeAlgebra.Cp_Coxeter3`; the main content of the algorithm occurs in `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. 
+
+To use the `Cp_Coxeter3` basis, the `IwahoriHeckeAlgebra` must be created with a `coxeter3`-implemented Coxeter group.
+As `IwahoriHeckeAlgebra.Cp_Coxeter3` is an alternative implementation of the C' basis, it has identical usage to the existing implementation `IwahoriHeckeAlgebra.Cp`.
+See the `Cp_Coxeter3` class documentation a thorough introduction to the implementation; we include here two examples from the class documentation that demonstrate the improvement in computational power:
+
+First, an example of a computation that takes 5 seconds in `Cp` and is instant in `Cp_Coxeter3`:
+
+```python
+sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
+sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3
+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
+sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3
+sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3
+(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]
++ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]
++ (v^-1+v)*Cp[3,4,1,2,3,4]
++ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]
++ (v^-1+v)*Cp[3,4,1,2]
+sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3
+(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]
++ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]
++ (v^-1+v)*CpC[3,4,1,2,3,4]
++ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]
++ (v^-1+v)*CpC[3,4,1,2]
+```
+
+Secondly, a computation in `H4` that seems infeasible in the existing `Cp` implementation (that is, it did not terminate in any reasonable time):
+
+```python
+sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3
+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
+sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3
+sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3
+(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]
++ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]
++ (v^-1+v)*Cp[3,4,1,2,3,4]
++ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]
++ (v^-1+v)*Cp[3,4,1,2]
+sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3
+(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]
++ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]
++ (v^-1+v)*CpC[3,4,1,2,3,4]
++ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]
++ (v^-1+v)*CpC[3,4,1,2]
+```
+
+The main content of this ticket is the addition of the `Cp_Coxeter3` basis to `iwahori_hecke_algebra.py`.
+We also implement conversions to and from the other existing bases.
+As an application, we have included a method to compute Kazhdan-Lusztig left, right, and two-sided cells of Coxeter group elements, that uses the `Cp_Coxeter3` basis to compute products.
+Its usage is as follows:
+
+```
+sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3
+sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3
+sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3
+{[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}
+sage: W.kazhdan_lusztig_cell(s2*s3*s2)                      # optional - coxeter3
+{[1, 2], [1, 2, 3, 2], [2], [2, 3, 2], [3, 2]}
+sage: W.kazhdan_lusztig_cell(s1*s2*s3)                      # optional - coxeter3
+{[1, 2, 3], [2, 3], [3], [3, 2, 3]}
+sage: W.kazhdan_lusztig_cell(s3)                            # optional - coxeter3
+{[1, 2, 3], [2, 3], [3], [3, 2, 3]}
+sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3
+{[3], [3, 2], [3, 2, 1], [3, 2, 3]}
+sage: W.kazhdan_lusztig_cell(s3, side='both')               # optional - coxeter3
+{[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],
+ [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}
+```
``````




---

archive/issue_comments_644257.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.\n+\n+\n This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.\n \n The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.\n``````\n",
    "created_at": "2021-08-09T23:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644257",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.
+
+
 This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.
 
 The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.
``````




---

archive/issue_comments_644258.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.\n \n \n-This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.\n+This ticket introduces a feature to perform complex and highly non-trivial calculations in the Kazhdan-Lusztig C' basis of an Iwahori-Hecke algebra.\n \n The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.\n This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of \"mu-coefficients\" is delegated to coxeter3).\n``````\n",
    "created_at": "2021-08-09T23:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644258",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.
 
 
-This ticket introduces a feature to perform complex and highly-nontrivial calculations in the Kazhdan-Lusztig basis of an Iwahori-Hecke algebra.
+This ticket introduces a feature to perform complex and highly non-trivial calculations in the Kazhdan-Lusztig C' basis of an Iwahori-Hecke algebra.
 
 The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.
 This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of "mu-coefficients" is delegated to coxeter3).
``````




---

archive/issue_comments_644259.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,7 @@\n-> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.\n+> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.\n \n \n-This ticket introduces a feature to perform complex and highly non-trivial calculations in the Kazhdan-Lusztig C' basis of an Iwahori-Hecke algebra.\n-\n-The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.\n-This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of \"mu-coefficients\" is delegated to coxeter3).\n-It uses an algorithm to compute products of basis elements directly in the C' basis (without conversion), and is able to achieve computations that seem infeasable or prohibitively long in the existing `Cp` basis.\n-A description of the ideas and algorithm can be found in the class documentation for `IwahoriHeckeAlgebra.Cp_Coxeter3`; the main content of the algorithm occurs in `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. \n-\n-To use the `Cp_Coxeter3` basis, the `IwahoriHeckeAlgebra` must be created with a `coxeter3`-implemented Coxeter group.\n-As `IwahoriHeckeAlgebra.Cp_Coxeter3` is an alternative implementation of the C' basis, it has identical usage to the existing implementation `IwahoriHeckeAlgebra.Cp`.\n-See the `Cp_Coxeter3` class documentation a thorough introduction to the implementation; we include here two examples from the class documentation that demonstrate the improvement in computational power:\n-\n-First, an example of a computation that takes 5 seconds in `Cp` and is instant in `Cp_Coxeter3`:\n+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n \n ```python\n sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\n@@ -33,7 +22,7 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n \n-Secondly, a computation in `H4` that seems infeasible in the existing `Cp` implementation (that is, it did not terminate in any reasonable time):\n+The next example seems infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3`:\n \n ```python\n sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3\n@@ -52,11 +41,11 @@\n + (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n+ \n+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. \n \n-The main content of this ticket is the addition of the `Cp_Coxeter3` basis to `iwahori_hecke_algebra.py`.\n-We also implement conversions to and from the other existing bases.\n-As an application, we have included a method to compute Kazhdan-Lusztig left, right, and two-sided cells of Coxeter group elements, that uses the `Cp_Coxeter3` basis to compute products.\n-Its usage is as follows:\n+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. \n+\n \n ```\n sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3\n``````\n",
    "created_at": "2021-08-10T00:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644259",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,7 @@
-> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, viewing the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, I can rebase or reorganize branches in the appropriate way as directed by a reviewer.
+> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.
 
 
-This ticket introduces a feature to perform complex and highly non-trivial calculations in the Kazhdan-Lusztig C' basis of an Iwahori-Hecke algebra.
-
-The existing implementation of the C' basis (`IwahoriHeckeAlgebra.Cp`) works by converting elements to the T-basis, performing multiplication there, and converting back.
-This ticket introduces a new basis, `IwahoriHeckeAlgebra.Cp_Coxeter3`, that provides an alternative implementation of the C' basis that relies on the package coxeter3 for its computations (specifically, computation of "mu-coefficients" is delegated to coxeter3).
-It uses an algorithm to compute products of basis elements directly in the C' basis (without conversion), and is able to achieve computations that seem infeasable or prohibitively long in the existing `Cp` basis.
-A description of the ideas and algorithm can be found in the class documentation for `IwahoriHeckeAlgebra.Cp_Coxeter3`; the main content of the algorithm occurs in `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. 
-
-To use the `Cp_Coxeter3` basis, the `IwahoriHeckeAlgebra` must be created with a `coxeter3`-implemented Coxeter group.
-As `IwahoriHeckeAlgebra.Cp_Coxeter3` is an alternative implementation of the C' basis, it has identical usage to the existing implementation `IwahoriHeckeAlgebra.Cp`.
-See the `Cp_Coxeter3` class documentation a thorough introduction to the implementation; we include here two examples from the class documentation that demonstrate the improvement in computational power:
-
-First, an example of a computation that takes 5 seconds in `Cp` and is instant in `Cp_Coxeter3`:
+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
 
 ```python
 sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
@@ -33,7 +22,7 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
 
-Secondly, a computation in `H4` that seems infeasible in the existing `Cp` implementation (that is, it did not terminate in any reasonable time):
+The next example seems infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3`:
 
 ```python
 sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3
@@ -52,11 +41,11 @@
 + (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]
 + (v^-1+v)*CpC[3,4,1,2]
 ```
+ 
+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. 
 
-The main content of this ticket is the addition of the `Cp_Coxeter3` basis to `iwahori_hecke_algebra.py`.
-We also implement conversions to and from the other existing bases.
-As an application, we have included a method to compute Kazhdan-Lusztig left, right, and two-sided cells of Coxeter group elements, that uses the `Cp_Coxeter3` basis to compute products.
-Its usage is as follows:
+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. 
+
 
 ```
 sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3
``````




---

archive/issue_comments_644260.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.\n \n \n-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. The new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the direct method is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n \n ```python\n sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\n@@ -42,7 +42,7 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n  \n-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. \n+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanation of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same basis in a trivial way. \n \n The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. \n \n``````\n",
    "created_at": "2021-08-10T00:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644260",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.
 
 
-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. The new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the direct method is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
 
 ```python
 sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
@@ -42,7 +42,7 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
  
-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. 
+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanation of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same basis in a trivial way. 
 
 The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. 
 
``````




---

archive/issue_comments_644261.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -47,7 +47,7 @@\n The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. \n \n \n-```\n+```python\n sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3\n sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3\n sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3\n``````\n",
    "created_at": "2021-08-10T00:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644261",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -47,7 +47,7 @@
 The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. 
 
 
-```
+```python
 sage: W = CoxeterGroup('B3', implementation='coxeter3')     # optional - coxeter3
 sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3
 sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3
``````




---

archive/issue_comments_644262.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.\n \n \n-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. The new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the direct method is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n \n ```python\n sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\n@@ -22,29 +22,43 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n \n-The next example seems infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3`:\n+The next examples in type `B_9` seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):\n \n ```python\n-sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3\n-sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\n-sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3\n-sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3\n-(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]\n-+ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]\n-+ (v^-1+v)*Cp[3,4,1,2,3,4]\n-+ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]\n-+ (v^-1+v)*Cp[3,4,1,2]\n-sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3\n-(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]\n-+ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]\n-+ (v^-1+v)*CpC[3,4,1,2,3,4]\n-+ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]\n-+ (v^-1+v)*CpC[3,4,1,2]\n+sage: B9 = CoxeterType(['B', 9])\n+sage: B9 = B9.relabel({ i: 9-i+1 for i in range(1, 10) })    # optional - coxeter3\n+sage: W = CoxeterGroup(B9, implementation='coxeter3')        # optional - coxeter3\n+sage: H = IwahoriHeckeAlgebra(W, v, -1/v)                    # optional - coxeter3\n+sage: CpC, Cp = H.Cp_Coxeter3(), H.Cp()                      # optional - coxeter3\n+sage: s = W.simple_reflections()                             # optional - coxeter3\n+sage: Cp(s[1]*s[2]*s[1]*s[2])                                # optional - coxeter3\n+Cp[1,2,1,2]\n+sage: Cp[3,2,3,4,5] * Cp[2,3]                                # optional - coxeter3\n+(v^-1+v)*Cp[2,3,2,4,3,5] + (v^-1+v)*Cp[2,3,2,5]\n+sage: CpC[3,2,3,4,5] * CpC[2,3]                              # optional - coxeter3\n+(v^-1+v)*CpC[2,3,2,4,3,5] + (v^-1+v)*CpC[2,3,2,5]\n+sage: CpC[9,5,6,7,8,9,2,3,4,5,6,7,8,9] * CpC[9,8,7,6]        # optional - coxeter3\n+(v^-3+3*v^-1+3*v+v^3)*CpC[2,3,4,5,4,6,5,7,6,8,7,9,8,7,6]\n+sage: CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1] * CpC[1,2,3,4]        # long time (4 seconds) # optional - coxeter3\n+(v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1,2,3,4]\n++ (v^-1+v)*CpC[1,2,1,5,4,3,2,1,2,3,8,7,6,5,4]\n++ (v^-1+v)*CpC[1,3,2,1,5,4,3,2,1,2,3,4,8,7,6]\n++ (v^-1+v)*CpC[1,4,3,2,1,5,4,3,2,1,2,3,4,8,7]\n++ (v^-1+v)*CpC[1,5,4,3,2,1,2,3,8,7,6,5,4,3,2]\n++ (v^-1+v)*CpC[1,2,5,4,3,2,1,8,7,6,5,4,3]\n++ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4,3,2]\n++ (v^-1+v)*CpC[1,2,3,2,5,4,3,2,8,7,6]\n++ (v^-1+v)*CpC[1,2,4,3,2,5,4,3,2,8,7]\n++ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4]\n++ (v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4]\n++ (v^-1+v)*CpC[1,5,4,3,8,7,6,5,4,3,2]\n++ (v^-1+v)*CpC[1,3,5,4,3,2,8,7,6]\n++ (v^-1+v)*CpC[1,4,3,5,4,3,2,8,7]\n ```\n  \n-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanation of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same basis in a trivial way. \n+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. \n \n-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. \n+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:\n \n \n ```python\n``````\n",
    "created_at": "2021-08-10T00:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644262",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.
 
 
-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. The new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the direct method is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
 
 ```python
 sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
@@ -22,29 +22,43 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
 
-The next example seems infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3`:
+The next examples in type `B_9` seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):
 
 ```python
-sage: W = CoxeterGroup('H4', implementation='coxeter3')     # optional - coxeter3
-sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
-sage: Cp = H.Cp(); CpC = H.Cp_Coxeter3()                    # optional - coxeter3
-sage: Cp[3,4,3]*Cp[3,4,3,4]*Cp[1,2,3,4]                     # long time (5 seconds) # optional - coxeter3
-(v^-2+2+v^2)*Cp[4,3,4,3,4,1,2,3,4]
-+ (v^-2+2+v^2)*Cp[4,3,4,3,4,1,2]
-+ (v^-1+v)*Cp[3,4,1,2,3,4]
-+ (v^-3+3*v^-1+3*v+v^3)*Cp[4,3,4,3,4,1]
-+ (v^-1+v)*Cp[3,4,1,2]
-sage: CpC[3,4,3]*CpC[3,4,3,4]*CpC[1,2,3,4]                  # optional - coxeter3
-(v^-2+2+v^2)*CpC[4,3,4,3,4,1,2,3,4]
-+ (v^-2+2+v^2)*CpC[4,3,4,3,4,1,2]
-+ (v^-1+v)*CpC[3,4,1,2,3,4]
-+ (v^-3+3*v^-1+3*v+v^3)*CpC[4,3,4,3,4,1]
-+ (v^-1+v)*CpC[3,4,1,2]
+sage: B9 = CoxeterType(['B', 9])
+sage: B9 = B9.relabel({ i: 9-i+1 for i in range(1, 10) })    # optional - coxeter3
+sage: W = CoxeterGroup(B9, implementation='coxeter3')        # optional - coxeter3
+sage: H = IwahoriHeckeAlgebra(W, v, -1/v)                    # optional - coxeter3
+sage: CpC, Cp = H.Cp_Coxeter3(), H.Cp()                      # optional - coxeter3
+sage: s = W.simple_reflections()                             # optional - coxeter3
+sage: Cp(s[1]*s[2]*s[1]*s[2])                                # optional - coxeter3
+Cp[1,2,1,2]
+sage: Cp[3,2,3,4,5] * Cp[2,3]                                # optional - coxeter3
+(v^-1+v)*Cp[2,3,2,4,3,5] + (v^-1+v)*Cp[2,3,2,5]
+sage: CpC[3,2,3,4,5] * CpC[2,3]                              # optional - coxeter3
+(v^-1+v)*CpC[2,3,2,4,3,5] + (v^-1+v)*CpC[2,3,2,5]
+sage: CpC[9,5,6,7,8,9,2,3,4,5,6,7,8,9] * CpC[9,8,7,6]        # optional - coxeter3
+(v^-3+3*v^-1+3*v+v^3)*CpC[2,3,4,5,4,6,5,7,6,8,7,9,8,7,6]
+sage: CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1] * CpC[1,2,3,4]        # long time (4 seconds) # optional - coxeter3
+(v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1,2,3,4]
++ (v^-1+v)*CpC[1,2,1,5,4,3,2,1,2,3,8,7,6,5,4]
++ (v^-1+v)*CpC[1,3,2,1,5,4,3,2,1,2,3,4,8,7,6]
++ (v^-1+v)*CpC[1,4,3,2,1,5,4,3,2,1,2,3,4,8,7]
++ (v^-1+v)*CpC[1,5,4,3,2,1,2,3,8,7,6,5,4,3,2]
++ (v^-1+v)*CpC[1,2,5,4,3,2,1,8,7,6,5,4,3]
++ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4,3,2]
++ (v^-1+v)*CpC[1,2,3,2,5,4,3,2,8,7,6]
++ (v^-1+v)*CpC[1,2,4,3,2,5,4,3,2,8,7]
++ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4]
++ (v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4]
++ (v^-1+v)*CpC[1,5,4,3,8,7,6,5,4,3,2]
++ (v^-1+v)*CpC[1,3,5,4,3,2,8,7,6]
++ (v^-1+v)*CpC[1,4,3,5,4,3,2,8,7]
 ```
  
-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanation of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same basis in a trivial way. 
+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. 
 
-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in ``. A typical example is given below. 
+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:
 
 
 ```python
``````




---

archive/issue_comments_644263.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,7 +22,7 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n \n-The next examples in type `B_9` seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):\n+The final two computations in this example seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant or quite quick in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):\n \n ```python\n sage: B9 = CoxeterType(['B', 9])\n``````\n",
    "created_at": "2021-08-10T00:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644263",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,7 +22,7 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
 
-The next examples in type `B_9` seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):
+The final two computations in this example seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant or quite quick in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):
 
 ```python
 sage: B9 = CoxeterType(['B', 9])
``````




---

archive/issue_comments_644264.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|\n|[8baaf18](https://github.com/sagemath/sagetrac-mirror/commit/8baaf18793a5f9ff37d70dad92a1f942ab91051b)|`Change kazhdan_lusztig_cell side argument to accept 'two-sided' instead of 'both'`|\n|[79d843f](https://github.com/sagemath/sagetrac-mirror/commit/79d843fe1484a951b09ee9eb3c84c93fc74e5ac2)|`Improve kazhdan_lusztig_cell docstring`|",
    "created_at": "2021-08-10T01:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
|[8baaf18](https://github.com/sagemath/sagetrac-mirror/commit/8baaf18793a5f9ff37d70dad92a1f942ab91051b)|`Change kazhdan_lusztig_cell side argument to accept 'two-sided' instead of 'both'`|
|[79d843f](https://github.com/sagemath/sagetrac-mirror/commit/79d843fe1484a951b09ee9eb3c84c93fc74e5ac2)|`Improve kazhdan_lusztig_cell docstring`|



---

archive/issue_comments_644265.json:
```json
{
    "body": "Changing commit from \"4d949013a3e9e248ade7aeef04abb5d486cd0d9a\" to \"79d843fe1484a951b09ee9eb3c84c93fc74e5ac2\"",
    "created_at": "2021-08-10T01:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4d949013a3e9e248ade7aeef04abb5d486cd0d9a" to "79d843fe1484a951b09ee9eb3c84c93fc74e5ac2"



---

archive/issue_comments_644266.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,41 +22,19 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n \n-The final two computations in this example seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant or quite quick in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):\n+The following is an example of a computation that seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but is instant in `Cp_Coxeter3`:\n \n ```python\n-sage: B9 = CoxeterType(['B', 9])\n-sage: B9 = B9.relabel({ i: 9-i+1 for i in range(1, 10) })    # optional - coxeter3\n-sage: W = CoxeterGroup(B9, implementation='coxeter3')        # optional - coxeter3\n-sage: H = IwahoriHeckeAlgebra(W, v, -1/v)                    # optional - coxeter3\n-sage: CpC, Cp = H.Cp_Coxeter3(), H.Cp()                      # optional - coxeter3\n-sage: s = W.simple_reflections()                             # optional - coxeter3\n-sage: Cp(s[1]*s[2]*s[1]*s[2])                                # optional - coxeter3\n-Cp[1,2,1,2]\n-sage: Cp[3,2,3,4,5] * Cp[2,3]                                # optional - coxeter3\n-(v^-1+v)*Cp[2,3,2,4,3,5] + (v^-1+v)*Cp[2,3,2,5]\n-sage: CpC[3,2,3,4,5] * CpC[2,3]                              # optional - coxeter3\n-(v^-1+v)*CpC[2,3,2,4,3,5] + (v^-1+v)*CpC[2,3,2,5]\n-sage: CpC[9,5,6,7,8,9,2,3,4,5,6,7,8,9] * CpC[9,8,7,6]        # optional - coxeter3\n-(v^-3+3*v^-1+3*v+v^3)*CpC[2,3,4,5,4,6,5,7,6,8,7,9,8,7,6]\n-sage: CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1] * CpC[1,2,3,4]        # long time (4 seconds) # optional - coxeter3\n-(v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1,2,3,4]\n-+ (v^-1+v)*CpC[1,2,1,5,4,3,2,1,2,3,8,7,6,5,4]\n-+ (v^-1+v)*CpC[1,3,2,1,5,4,3,2,1,2,3,4,8,7,6]\n-+ (v^-1+v)*CpC[1,4,3,2,1,5,4,3,2,1,2,3,4,8,7]\n-+ (v^-1+v)*CpC[1,5,4,3,2,1,2,3,8,7,6,5,4,3,2]\n-+ (v^-1+v)*CpC[1,2,5,4,3,2,1,8,7,6,5,4,3]\n-+ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4,3,2]\n-+ (v^-1+v)*CpC[1,2,3,2,5,4,3,2,8,7,6]\n-+ (v^-1+v)*CpC[1,2,4,3,2,5,4,3,2,8,7]\n-+ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4]\n-+ (v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4]\n-+ (v^-1+v)*CpC[1,5,4,3,8,7,6,5,4,3,2]\n-+ (v^-1+v)*CpC[1,3,5,4,3,2,8,7,6]\n-+ (v^-1+v)*CpC[1,4,3,5,4,3,2,8,7]\n+sage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3\n+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3\n+sage: CpC = H.Cp_Coxeter3()                                 # optional - coxeter3\n+sage: CpC[1,2,1,8,9,8]*CpC[1,2,3,7,8,9]                     # optional - coxeter3\n+(v^-2+2+v^2)*CpC[1,2,1,3,7,8,7,9,8,7]\n++ (v^-2+2+v^2)*CpC[1,2,1,3,8,9,8,7]\n++ (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]\n ```\n  \n-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. \n+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n \n The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:\n \n@@ -74,7 +52,7 @@\n {[1, 2, 3], [2, 3], [3], [3, 2, 3]}\n sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3\n {[3], [3, 2], [3, 2, 1], [3, 2, 3]}\n-sage: W.kazhdan_lusztig_cell(s3, side='both')               # optional - coxeter3\n+sage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3\n {[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],\n  [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}\n ```\n``````\n",
    "created_at": "2021-08-10T01:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644266",
    "user": "https://github.com/cemulate"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,41 +22,19 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
 
-The final two computations in this example seem infeasible in the existing `Cp` implementation (it did not terminate in any reasonable time) but is again instant or quite quick in `Cp_Coxeter3` (here, we work with a relabled type `B_9` where the strong bond is between generators 1 and 2):
+The following is an example of a computation that seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but is instant in `Cp_Coxeter3`:
 
 ```python
-sage: B9 = CoxeterType(['B', 9])
-sage: B9 = B9.relabel({ i: 9-i+1 for i in range(1, 10) })    # optional - coxeter3
-sage: W = CoxeterGroup(B9, implementation='coxeter3')        # optional - coxeter3
-sage: H = IwahoriHeckeAlgebra(W, v, -1/v)                    # optional - coxeter3
-sage: CpC, Cp = H.Cp_Coxeter3(), H.Cp()                      # optional - coxeter3
-sage: s = W.simple_reflections()                             # optional - coxeter3
-sage: Cp(s[1]*s[2]*s[1]*s[2])                                # optional - coxeter3
-Cp[1,2,1,2]
-sage: Cp[3,2,3,4,5] * Cp[2,3]                                # optional - coxeter3
-(v^-1+v)*Cp[2,3,2,4,3,5] + (v^-1+v)*Cp[2,3,2,5]
-sage: CpC[3,2,3,4,5] * CpC[2,3]                              # optional - coxeter3
-(v^-1+v)*CpC[2,3,2,4,3,5] + (v^-1+v)*CpC[2,3,2,5]
-sage: CpC[9,5,6,7,8,9,2,3,4,5,6,7,8,9] * CpC[9,8,7,6]        # optional - coxeter3
-(v^-3+3*v^-1+3*v+v^3)*CpC[2,3,4,5,4,6,5,7,6,8,7,9,8,7,6]
-sage: CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1] * CpC[1,2,3,4]        # long time (4 seconds) # optional - coxeter3
-(v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4,3,2,1,2,3,4]
-+ (v^-1+v)*CpC[1,2,1,5,4,3,2,1,2,3,8,7,6,5,4]
-+ (v^-1+v)*CpC[1,3,2,1,5,4,3,2,1,2,3,4,8,7,6]
-+ (v^-1+v)*CpC[1,4,3,2,1,5,4,3,2,1,2,3,4,8,7]
-+ (v^-1+v)*CpC[1,5,4,3,2,1,2,3,8,7,6,5,4,3,2]
-+ (v^-1+v)*CpC[1,2,5,4,3,2,1,8,7,6,5,4,3]
-+ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4,3,2]
-+ (v^-1+v)*CpC[1,2,3,2,5,4,3,2,8,7,6]
-+ (v^-1+v)*CpC[1,2,4,3,2,5,4,3,2,8,7]
-+ (v^-1+v)*CpC[1,2,5,4,3,2,8,7,6,5,4]
-+ (v^-1+v)*CpC[1,5,4,3,2,1,8,7,6,5,4]
-+ (v^-1+v)*CpC[1,5,4,3,8,7,6,5,4,3,2]
-+ (v^-1+v)*CpC[1,3,5,4,3,2,8,7,6]
-+ (v^-1+v)*CpC[1,4,3,5,4,3,2,8,7]
+sage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3
+sage: H = IwahoriHeckeAlgebra(W, v**2)                      # optional - coxeter3
+sage: CpC = H.Cp_Coxeter3()                                 # optional - coxeter3
+sage: CpC[1,2,1,8,9,8]*CpC[1,2,3,7,8,9]                     # optional - coxeter3
+(v^-2+2+v^2)*CpC[1,2,1,3,7,8,7,9,8,7]
++ (v^-2+2+v^2)*CpC[1,2,1,3,8,9,8,7]
++ (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]
 ```
  
-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples are given in the documentation for this function and the class. The class also handles conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way. 
+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.
 
 The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:
 
@@ -74,7 +52,7 @@
 {[1, 2, 3], [2, 3], [3], [3, 2, 3]}
 sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3
 {[3], [3, 2], [3, 2, 1], [3, 2, 3]}
-sage: W.kazhdan_lusztig_cell(s3, side='both')               # optional - coxeter3
+sage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3
 {[1], [1, 2], [1, 2, 3], [1, 2, 3, 2], [1, 2, 3, 2, 1], [2], [2, 1],
  [2, 3], [2, 3, 2], [2, 3, 2, 1], [3], [3, 2], [3, 2, 1], [3, 2, 3]}
 ```
``````




---

archive/issue_comments_644267.json:
```json
{
    "body": "Changing commit from \"79d843fe1484a951b09ee9eb3c84c93fc74e5ac2\" to \"863520c57c6e728eccd4269b82cef7d4e576d932\"",
    "created_at": "2021-08-10T01:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "79d843fe1484a951b09ee9eb3c84c93fc74e5ac2" to "863520c57c6e728eccd4269b82cef7d4e576d932"



---

archive/issue_comments_644268.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[863520c](https://github.com/sagemath/sagetrac-mirror/commit/863520c57c6e728eccd4269b82cef7d4e576d932)|`Add A9 example to class docs`|",
    "created_at": "2021-08-10T01:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[863520c](https://github.com/sagemath/sagetrac-mirror/commit/863520c57c6e728eccd4269b82cef7d4e576d932)|`Add A9 example to class docs`|



---

archive/issue_comments_644269.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.\n \n \n-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n \n ```python\n sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3\n@@ -22,7 +22,7 @@\n + (v^-1+v)*CpC[3,4,1,2]\n ```\n \n-The following is an example of a computation that seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but is instant in `Cp_Coxeter3`:\n+The following computation also seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but it is again instant in `Cp_Coxeter3`:\n \n ```python\n sage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3\n``````\n",
    "created_at": "2021-08-11T21:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644269",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 > **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.
 
 
-This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
+This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
 
 ```python
 sage: R.<v> = LaurentPolynomialRing(ZZ)                     # optional - coxeter3
@@ -22,7 +22,7 @@
 + (v^-1+v)*CpC[3,4,1,2]
 ```
 
-The following is an example of a computation that seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but is instant in `Cp_Coxeter3`:
+The following computation also seems infeasible in the existing `Cp` basis (it did not terminate in any reasonable time), but it is again instant in `Cp_Coxeter3`:
 
 ```python
 sage: W = CoxeterGroup('A9', implementation='coxeter3')     # optional - coxeter3
``````




---

archive/issue_comments_644270.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -44,12 +44,6 @@\n sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3\n sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3\n {[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}\n-sage: W.kazhdan_lusztig_cell(s2*s3*s2)                      # optional - coxeter3\n-{[1, 2], [1, 2, 3, 2], [2], [2, 3, 2], [3, 2]}\n-sage: W.kazhdan_lusztig_cell(s1*s2*s3)                      # optional - coxeter3\n-{[1, 2, 3], [2, 3], [3], [3, 2, 3]}\n-sage: W.kazhdan_lusztig_cell(s3)                            # optional - coxeter3\n-{[1, 2, 3], [2, 3], [3], [3, 2, 3]}\n sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3\n {[3], [3, 2], [3, 2, 1], [3, 2, 3]}\n sage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3\n``````\n",
    "created_at": "2021-08-11T21:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644270",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -44,12 +44,6 @@
 sage: s1,s2,s3 = W.simple_reflections()                     # optional - coxeter3
 sage: W.kazhdan_lusztig_cell(s1*s2*s1)                      # optional - coxeter3
 {[2, 1, 2], [2, 3, 2, 1, 2], [3, 2, 1, 2]}
-sage: W.kazhdan_lusztig_cell(s2*s3*s2)                      # optional - coxeter3
-{[1, 2], [1, 2, 3, 2], [2], [2, 3, 2], [3, 2]}
-sage: W.kazhdan_lusztig_cell(s1*s2*s3)                      # optional - coxeter3
-{[1, 2, 3], [2, 3], [3], [3, 2, 3]}
-sage: W.kazhdan_lusztig_cell(s3)                            # optional - coxeter3
-{[1, 2, 3], [2, 3], [3], [3, 2, 3]}
 sage: W.kazhdan_lusztig_cell(s3, side='right')              # optional - coxeter3
 {[3], [3, 2], [3, 2, 1], [3, 2, 3]}
 sage: W.kazhdan_lusztig_cell(s3, side='two-sided')          # optional - coxeter3
``````




---

archive/issue_comments_644271.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,7 +36,7 @@\n  \n The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n \n-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:\n+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.\n \n \n ```python\n``````\n",
    "created_at": "2021-08-11T22:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644271",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,7 +36,7 @@
  
 The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.
 
-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. A typical example is given below:
+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.
 
 
 ```python
``````




---

archive/issue_comments_644272.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,7 +34,7 @@\n + (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]\n ```\n  \n-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n \n The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.\n \n``````\n",
    "created_at": "2021-08-11T22:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644272",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,7 +34,7 @@
 + (v^-3+3*v^-1+3*v+v^3)*CpC[1,2,1,3,8,9,8]
 ```
  
-The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously-infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.
+The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.
 
 The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.
 
``````




---

archive/issue_events_096519.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-11T22:19:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32352#event-96519"
}
```



---

archive/issue_comments_644273.json:
```json
{
    "body": "Changing commit from \"863520c57c6e728eccd4269b82cef7d4e576d932\" to \"c34b92aa952f2892fc0e89f02c76aee3432f9e85\"",
    "created_at": "2021-08-11T23:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "863520c57c6e728eccd4269b82cef7d4e576d932" to "c34b92aa952f2892fc0e89f02c76aee3432f9e85"



---

archive/issue_comments_644274.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[c34b92a](https://github.com/sagemath/sagetrac-mirror/commit/c34b92aa952f2892fc0e89f02c76aee3432f9e85)|`slight change to doc string for KL cell function`|",
    "created_at": "2021-08-11T23:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[c34b92a](https://github.com/sagemath/sagetrac-mirror/commit/c34b92aa952f2892fc0e89f02c76aee3432f9e85)|`slight change to doc string for KL cell function`|



---

archive/issue_comments_644275.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[01ce92a](https://github.com/sagemath/sagetrac-mirror/commit/01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1)|`Remove unused import`|",
    "created_at": "2021-08-12T00:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[01ce92a](https://github.com/sagemath/sagetrac-mirror/commit/01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1)|`Remove unused import`|



---

archive/issue_comments_644276.json:
```json
{
    "body": "Changing commit from \"c34b92aa952f2892fc0e89f02c76aee3432f9e85\" to \"01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1\"",
    "created_at": "2021-08-12T00:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c34b92aa952f2892fc0e89f02c76aee3432f9e85" to "01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1"



---

archive/issue_comments_644277.json:
```json
{
    "body": "Changing commit from \"01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1\" to \"7428c98b5d8c11bb35dbcd6bc2528198de2174be\"",
    "created_at": "2021-08-12T17:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "01ce92a7f9cfad0169e2fb3b959b8fe39b7486f1" to "7428c98b5d8c11bb35dbcd6bc2528198de2174be"



---

archive/issue_comments_644278.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[7428c98](https://github.com/sagemath/sagetrac-mirror/commit/7428c98b5d8c11bb35dbcd6bc2528198de2174be)|`Trim whitespace / fix pycodestyle errors`|",
    "created_at": "2021-08-12T17:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[7428c98](https://github.com/sagemath/sagetrac-mirror/commit/7428c98b5d8c11bb35dbcd6bc2528198de2174be)|`Trim whitespace / fix pycodestyle errors`|



---

archive/issue_comments_644279.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-12T17:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644279",
    "user": "https://github.com/cemulate"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_644280.json:
```json
{
    "body": "Changing commit from \"7428c98b5d8c11bb35dbcd6bc2528198de2174be\" to \"8a3d7593ca30b6694cd15711bc88afa46468ebc4\"",
    "created_at": "2021-08-14T23:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644280",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7428c98b5d8c11bb35dbcd6bc2528198de2174be" to "8a3d7593ca30b6694cd15711bc88afa46468ebc4"



---

archive/issue_comments_644281.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[ee2edc7](https://github.com/sagemath/sagetrac-mirror/commit/ee2edc72bbfd2bec46ed002b802626228bec40c6)|`Tweak/fix some docstrings`|\n|[eea7340](https://github.com/sagemath/sagetrac-mirror/commit/eea7340fdfef566a1984bf8883f1553d4b8de6a3)|`Make auxiliary product_on_basis helpers public`|\n|[6dbd2e9](https://github.com/sagemath/sagetrac-mirror/commit/6dbd2e932db732806a2a599965d9591712dea16f)|`Fix doctest`|\n|[a785b1c](https://github.com/sagemath/sagetrac-mirror/commit/a785b1c45aaa0b1e0c5064506ebebe38095b65bc)|`Add function to compute all KL cells to Coxeter groups`|\n|[f570615](https://github.com/sagemath/sagetrac-mirror/commit/f5706152df1f3545dc265ab6236f6b7ebdbdd263)|`Tweak doctests for KL cell computation methods`|\n|[0137c82](https://github.com/sagemath/sagetrac-mirror/commit/0137c82b840cc3a7f7fceaa28cd27875242bc11a)|`doc string changes, more examples`|\n|[3530853](https://github.com/sagemath/sagetrac-mirror/commit/35308531866b23360a29dbbd09d7bb02d6973c0c)|`Complete docstrings`|\n|[7a73b82](https://github.com/sagemath/sagetrac-mirror/commit/7a73b82edb3ad184955829a73ec66ba74c7a9724)|`Document 'side' arguments`|\n|[1070fd4](https://github.com/sagemath/sagetrac-mirror/commit/1070fd42ae2edd4d13c701bb976f42c3c9f9814f)|`doc string changes to cells function`|\n|[8a3d759](https://github.com/sagemath/sagetrac-mirror/commit/8a3d7593ca30b6694cd15711bc88afa46468ebc4)|`Format docstrings`|",
    "created_at": "2021-08-14T23:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[ee2edc7](https://github.com/sagemath/sagetrac-mirror/commit/ee2edc72bbfd2bec46ed002b802626228bec40c6)|`Tweak/fix some docstrings`|
|[eea7340](https://github.com/sagemath/sagetrac-mirror/commit/eea7340fdfef566a1984bf8883f1553d4b8de6a3)|`Make auxiliary product_on_basis helpers public`|
|[6dbd2e9](https://github.com/sagemath/sagetrac-mirror/commit/6dbd2e932db732806a2a599965d9591712dea16f)|`Fix doctest`|
|[a785b1c](https://github.com/sagemath/sagetrac-mirror/commit/a785b1c45aaa0b1e0c5064506ebebe38095b65bc)|`Add function to compute all KL cells to Coxeter groups`|
|[f570615](https://github.com/sagemath/sagetrac-mirror/commit/f5706152df1f3545dc265ab6236f6b7ebdbdd263)|`Tweak doctests for KL cell computation methods`|
|[0137c82](https://github.com/sagemath/sagetrac-mirror/commit/0137c82b840cc3a7f7fceaa28cd27875242bc11a)|`doc string changes, more examples`|
|[3530853](https://github.com/sagemath/sagetrac-mirror/commit/35308531866b23360a29dbbd09d7bb02d6973c0c)|`Complete docstrings`|
|[7a73b82](https://github.com/sagemath/sagetrac-mirror/commit/7a73b82edb3ad184955829a73ec66ba74c7a9724)|`Document 'side' arguments`|
|[1070fd4](https://github.com/sagemath/sagetrac-mirror/commit/1070fd42ae2edd4d13c701bb976f42c3c9f9814f)|`doc string changes to cells function`|
|[8a3d759](https://github.com/sagemath/sagetrac-mirror/commit/8a3d7593ca30b6694cd15711bc88afa46468ebc4)|`Format docstrings`|



---

archive/issue_comments_644282.json:
```json
{
    "body": "Changing branch from \"u/gh-cemulate/cpc_basis\" to \"public/algebra/Cprime_product_algorithm-32352\"",
    "created_at": "2021-08-16T01:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644282",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/gh-cemulate/cpc_basis" to "public/algebra/Cprime_product_algorithm-32352"



---

archive/issue_comments_644283.json:
```json
{
    "body": "Changing commit from \"8a3d7593ca30b6694cd15711bc88afa46468ebc4\" to \"\"",
    "created_at": "2021-08-16T01:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644283",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "8a3d7593ca30b6694cd15711bc88afa46468ebc4" to ""



---

archive/issue_comments_644284.json:
```json
{
    "body": "<a id='comment:26'></a>\nI made some changes to improve the speed by creating fewer transient objects and using more efficient code paths. I also tweaked the doctests so that everything is tested on systems without coxeter3 and all tests pass both with and without coxeter3. I also tweaked the documentation accordingly and hid the internal computational methods. If my changes are good, then positive review.",
    "created_at": "2021-08-16T01:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644284",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
I made some changes to improve the speed by creating fewer transient objects and using more efficient code paths. I also tweaked the doctests so that everything is tested on systems without coxeter3 and all tests pass both with and without coxeter3. I also tweaked the documentation accordingly and hid the internal computational methods. If my changes are good, then positive review.



---

archive/issue_comments_644285.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-08-16T01:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644285",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_644286.json:
```json
{
    "body": "Changing branch from \"public/algebra/Cprime_product_algorithm-32352\" to \"public/algebras/Cprime_product_algorithm-32352\"",
    "created_at": "2021-08-16T01:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644286",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "public/algebra/Cprime_product_algorithm-32352" to "public/algebras/Cprime_product_algorithm-32352"



---

archive/issue_comments_644287.json:
```json
{
    "body": "Changing commit from \"\" to \"3cff1f67b580ef0e24f12a8a48c735f2050d20be\"",
    "created_at": "2021-08-16T01:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644287",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "3cff1f67b580ef0e24f12a8a48c735f2050d20be"



---

archive/issue_comments_644288.json:
```json
{
    "body": "<a id='comment:27'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[f570615](https://github.com/sagemath/sagetrac-mirror/commit/f5706152df1f3545dc265ab6236f6b7ebdbdd263)|`Tweak doctests for KL cell computation methods`|\n|[0137c82](https://github.com/sagemath/sagetrac-mirror/commit/0137c82b840cc3a7f7fceaa28cd27875242bc11a)|`doc string changes, more examples`|\n|[3530853](https://github.com/sagemath/sagetrac-mirror/commit/35308531866b23360a29dbbd09d7bb02d6973c0c)|`Complete docstrings`|\n|[7a73b82](https://github.com/sagemath/sagetrac-mirror/commit/7a73b82edb3ad184955829a73ec66ba74c7a9724)|`Document 'side' arguments`|\n|[1070fd4](https://github.com/sagemath/sagetrac-mirror/commit/1070fd42ae2edd4d13c701bb976f42c3c9f9814f)|`doc string changes to cells function`|\n|[8a3d759](https://github.com/sagemath/sagetrac-mirror/commit/8a3d7593ca30b6694cd15711bc88afa46468ebc4)|`Format docstrings`|\n|[d3abdf7](https://github.com/sagemath/sagetrac-mirror/commit/d3abdf767962fb66d4882c3988f23c5973c15e59)|`Merge branch 'u/gh-cemulate/cpc_basis' of git://trac.sagemath.org/sage into public/algebra/Cprime_product_algorithm-32352`|\n|[f0fb7e2](https://github.com/sagemath/sagetrac-mirror/commit/f0fb7e245bb0594bfccf27b50a62807d459f6ccd)|`Adding back build/pkgs/sage_sws2rst/src file.`|\n|[67c7b3a](https://github.com/sagemath/sagetrac-mirror/commit/67c7b3ab302e8d1db3091fda70f7153695020697)|`Reviewer changes to improve speed and other various doc tweaks.`|\n|[3cff1f6](https://github.com/sagemath/sagetrac-mirror/commit/3cff1f67b580ef0e24f12a8a48c735f2050d20be)|`More reviewer changes to make tests and all test pass when coxeter3 is not installed.`|",
    "created_at": "2021-08-16T01:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644288",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Last 10 new commits:
|                                                                                                                                          |                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[f570615](https://github.com/sagemath/sagetrac-mirror/commit/f5706152df1f3545dc265ab6236f6b7ebdbdd263)|`Tweak doctests for KL cell computation methods`|
|[0137c82](https://github.com/sagemath/sagetrac-mirror/commit/0137c82b840cc3a7f7fceaa28cd27875242bc11a)|`doc string changes, more examples`|
|[3530853](https://github.com/sagemath/sagetrac-mirror/commit/35308531866b23360a29dbbd09d7bb02d6973c0c)|`Complete docstrings`|
|[7a73b82](https://github.com/sagemath/sagetrac-mirror/commit/7a73b82edb3ad184955829a73ec66ba74c7a9724)|`Document 'side' arguments`|
|[1070fd4](https://github.com/sagemath/sagetrac-mirror/commit/1070fd42ae2edd4d13c701bb976f42c3c9f9814f)|`doc string changes to cells function`|
|[8a3d759](https://github.com/sagemath/sagetrac-mirror/commit/8a3d7593ca30b6694cd15711bc88afa46468ebc4)|`Format docstrings`|
|[d3abdf7](https://github.com/sagemath/sagetrac-mirror/commit/d3abdf767962fb66d4882c3988f23c5973c15e59)|`Merge branch 'u/gh-cemulate/cpc_basis' of git://trac.sagemath.org/sage into public/algebra/Cprime_product_algorithm-32352`|
|[f0fb7e2](https://github.com/sagemath/sagetrac-mirror/commit/f0fb7e245bb0594bfccf27b50a62807d459f6ccd)|`Adding back build/pkgs/sage_sws2rst/src file.`|
|[67c7b3a](https://github.com/sagemath/sagetrac-mirror/commit/67c7b3ab302e8d1db3091fda70f7153695020697)|`Reviewer changes to improve speed and other various doc tweaks.`|
|[3cff1f6](https://github.com/sagemath/sagetrac-mirror/commit/3cff1f67b580ef0e24f12a8a48c735f2050d20be)|`More reviewer changes to make tests and all test pass when coxeter3 is not installed.`|



---

archive/issue_comments_644289.json:
```json
{
    "body": "<a id='comment:28'></a>\nEverything looks good! Thanks!\n\nWe've set the ticket to positive review.",
    "created_at": "2021-08-16T06:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644289",
    "user": "https://github.com/cemulate"
}
```

<a id='comment:28'></a>
Everything looks good! Thanks!

We've set the ticket to positive review.



---

archive/issue_comments_644290.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-16T06:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644290",
    "user": "https://github.com/cemulate"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_644291.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.\n+> **(Update after review completed)** The `Cp_Coxeter3` class was eventually merged into the `Cp` class and the `Cp_Coxeter3.product_on_basis` method described below is eventually moved into the latter. \n \n \n This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n@@ -36,7 +36,7 @@\n  \n The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.\n \n-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.\n+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to determine all cells in any finite Coxeter group. We have included functions in `sage/categories/coxeter_groups.py` that can calculate the cells containing an element or compute all cells within a finite Coxeter group. Some example computations are given below.\n \n \n ```python\n``````\n",
    "created_at": "2021-08-16T20:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644291",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-> **(technical note)** the branch associated with this ticket is based off of the branch associated to its dependency, #32266 (a bug fix). As such, the change-set of this branch includes the changes in that ticket. If this is not the usual way to handle ticket dependencies, or if that ticket should be merged first, please let us know so that we can rebase or reorganize branches in the appropriate way as directed.
+> **(Update after review completed)** The `Cp_Coxeter3` class was eventually merged into the `Cp` class and the `Cp_Coxeter3.product_on_basis` method described below is eventually moved into the latter. 
 
 
 This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
@@ -36,7 +36,7 @@
  
 The main function for the class `IwahoriHeckeAlgebra.Cp_Coxeter3` is `IwahoriHeckeAlgebra.Cp_Coxeter3.product_on_basis`. Explanations of the relevant algorithms and detailed examples (including more previously infeasible computations) are given in the documentation for this function and the class. We also handle conversions between the C'-basis (implemented in `Cp_Coxeter3`) and other bases of the Iwahori--Hecke algebra, by building on existing conversions involving the `Cp` implementation of the same C'-basis in a trivial way.
 
-The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to detemine all cells in any finite Coxeter group. We have included a function for calculating the cells containing a given element in `sage/libs/coxeter3/coxeter_group.py`. Some example computations are given below.
+The product computations introduced in this ticket can potentially be used to calculate the left, right, or two-sided Kazhdan-Lusztig cell containing arbitrary Coxeter group elements, which can in turn be used to determine all cells in any finite Coxeter group. We have included functions in `sage/categories/coxeter_groups.py` that can calculate the cells containing an element or compute all cells within a finite Coxeter group. Some example computations are given below.
 
 
 ```python
``````




---

archive/issue_comments_644292.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-> **(Update after review completed)** The `Cp_Coxeter3` class was eventually merged into the `Cp` class and the `Cp_Coxeter3.product_on_basis` method described below is eventually moved into the latter. \n+> **(Update after review completed)** The `Cp_Coxeter3` class mentioned below was eventually merged into the `Cp` class, and the `Cp_Coxeter3.product_on_basis` method is moved into the latter. \n \n \n This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:\n``````\n",
    "created_at": "2021-08-16T20:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644292",
    "user": "https://github.com/TianyuanX"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-> **(Update after review completed)** The `Cp_Coxeter3` class was eventually merged into the `Cp` class and the `Cp_Coxeter3.product_on_basis` method described below is eventually moved into the latter. 
+> **(Update after review completed)** The `Cp_Coxeter3` class mentioned below was eventually merged into the `Cp` class, and the `Cp_Coxeter3.product_on_basis` method is moved into the latter. 
 
 
 This ticket introduces, in the class `IwahoriHeckeAlgebra.Cp_Coxeter3`, an alternative implementation of the Kazhdan--Lusztig C'-basis in an Iwahori--Hecke algebra. This new implementation is to be contrasted with the existing implementation of the same C'-basis via the class `IwahoriHeckeAlgebra.Cp`. The latter class computes products in the C'-basis indirectly by converting elements to the T-basis, performing multiplication there, and converting back, while the main feature of our new class is the direct computation of products in the C'-basis. By delegating some computations to the optional package coxeter3, the new class is able to compute products in the C'-basis more quickly, including some products that take prohibitively long in the existing `Cp` class. For example, the following calculation takes 5 seconds in `Cp` but is instant in `Cp_Coxeter3`:
``````




---

archive/issue_comments_644293.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-08-16T23:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_644294.json:
```json
{
    "body": "Changing commit from \"3cff1f67b580ef0e24f12a8a48c735f2050d20be\" to \"901699badeb305cdfbbfd52cc8427a3ea53512b8\"",
    "created_at": "2021-08-16T23:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3cff1f67b580ef0e24f12a8a48c735f2050d20be" to "901699badeb305cdfbbfd52cc8427a3ea53512b8"



---

archive/issue_comments_644295.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[901699b](https://github.com/sagemath/sagetrac-mirror/commit/901699badeb305cdfbbfd52cc8427a3ea53512b8)|`Fix kazhdan_lusztig_cell[s] documentation`|",
    "created_at": "2021-08-16T23:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[901699b](https://github.com/sagemath/sagetrac-mirror/commit/901699badeb305cdfbbfd52cc8427a3ea53512b8)|`Fix kazhdan_lusztig_cell[s] documentation`|



---

archive/issue_comments_644296.json:
```json
{
    "body": "<a id='comment:33'></a>\n(After `make` finished I discovered a couple docstring errors)",
    "created_at": "2021-08-16T23:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644296",
    "user": "https://github.com/cemulate"
}
```

<a id='comment:33'></a>
(After `make` finished I discovered a couple docstring errors)



---

archive/issue_comments_644297.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-16T23:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644297",
    "user": "https://github.com/cemulate"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_096520.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-19T20:30:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32352#event-96520"
}
```



---

archive/issue_comments_644298.json:
```json
{
    "body": "Changing branch from \"public/algebras/Cprime_product_algorithm-32352\" to \"901699badeb305cdfbbfd52cc8427a3ea53512b8\"",
    "created_at": "2021-10-19T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644298",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/algebras/Cprime_product_algorithm-32352" to "901699badeb305cdfbbfd52cc8427a3ea53512b8"



---

archive/issue_comments_644299.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-19T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32352#issuecomment-644299",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
