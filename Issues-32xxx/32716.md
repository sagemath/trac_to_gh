# Issue 32716: pkgs/sagemath-*/tox.ini: Create environment that uses Sage's python as the basepython, fix sagemath-standard deps

archive/issues_032479.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nNewer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't necessarily fit.\n\nFor this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). \n\nWe now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples, such as:\n\n```\n./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'\n```\n(to be run after `make build`)\n\nDepends on #33936\n\nCC:  @dimpase @kwankyu\n\nComponent: **refactoring**\n\nAuthor: **Matthias Koeppe**\n\nBranch: **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32716_\n\n",
    "closed_at": "2022-07-10T22:34:59Z",
    "created_at": "2021-10-18T22:08:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "pkgs/sagemath-*/tox.ini: Create environment that uses Sage's python as the basepython, fix sagemath-standard deps",
    "type": "issue",
    "updated_at": "2022-07-27T01:36:40Z",
    "url": "https://github.com/sagemath/sage/issues/32716",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

Newer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't necessarily fit.

For this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). 

We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples, such as:

```
./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'
```
(to be run after `make build`)

Depends on #33936

CC:  @dimpase @kwankyu

Component: **refactoring**

Author: **Matthias Koeppe**

Branch: **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/32716_





---

archive/issue_events_447354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-18T22:08:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447354"
}
```



---

archive/issue_events_447355.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-18T22:08:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447355"
}
```



---

archive/issue_events_447356.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-18T22:08:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447356"
}
```



---

archive/issue_events_447357.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-18T22:08:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447357"
}
```



---

archive/issue_events_447358.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-18T22:34:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "title_is": "pkgs/sagemath-standard/tox.ini: Use Sage's python by default",
    "title_was": "pkg/sagemath-standard/tox.ini: Use Sage's python by default",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447358"
}
```



---

archive/issue_events_447359.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447359"
}
```



---

archive/issue_events_447360.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447360"
}
```



---

archive/issue_events_447361.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447361"
}
```



---

archive/issue_events_447362.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447362"
}
```



---

archive/issue_comments_527813.json:
```json
{
    "body": "Branch: **[u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default)**",
    "created_at": "2022-05-07T23:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527813",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default)**



---

archive/issue_comments_527814.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-05-07T23:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527814",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_527815.json:
```json
{
    "body": "Commit: **[`9db6b2f`](https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb)**",
    "created_at": "2022-05-07T23:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527815",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`9db6b2f`](https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb)**



---

archive/issue_comments_527816.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n-Newer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't fit.\n+Newer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't necessarily fit.\n \n+For this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). \n+\n+We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples.\n+\n``````\n",
    "created_at": "2022-05-07T23:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527816",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
-Newer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't fit.
+Newer versions of `tox` seem to provision python 3.10 when the environment `python` is used, but then our wheels don't necessarily fit.
 
+For this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). 
+
+We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples.
+
``````




---

archive/issue_events_447363.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-07T23:06:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447363"
}
```



---

archive/issue_comments_527817.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ce30b8415cc104723c2a4850ca3c33064259959\"><code>5ce30b8</code></a></td><td><code>pkgs/sage-setup, sagemath-{objects,categories,standard}: Add tox environment sagepython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb\"><code>9db6b2f</code></a></td><td><code>src/doc/en/developer/packaging_sage_library.rst: Use sagepython instead of hardcoded py39</code></td></tr></table>\n",
    "created_at": "2022-05-07T23:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527817",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ce30b8415cc104723c2a4850ca3c33064259959"><code>5ce30b8</code></a></td><td><code>pkgs/sage-setup, sagemath-{objects,categories,standard}: Add tox environment sagepython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb"><code>9db6b2f</code></a></td><td><code>src/doc/en/developer/packaging_sage_library.rst: Use sagepython instead of hardcoded py39</code></td></tr></table>




---

archive/issue_events_447364.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-07T23:07:18Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "title_is": "pkgs/sagemath-standard/tox.ini: Create environment that uses Sage's python as the basepython",
    "title_was": "pkgs/sagemath-standard/tox.ini: Use Sage's python by default",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447364"
}
```



---

archive/issue_comments_527818.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,9 @@\n \n For this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). \n \n-We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples.\n+We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples, such as:\n \n+```\n+./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'\n+```\n+\n``````\n",
    "created_at": "2022-05-30T19:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527818",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,9 @@
 
 For this reason, the examples shown in the developer's manual hardcoded the Python version (`tox -e py39`). 
 
-We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples.
+We now define tox environments `sagepython` in `tox.ini`, which takes Python as `SAGE_VENV/bin/python3` and change the manual to use this environment in examples, such as:
 
+```
+./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'
+```
+
``````




---

archive/issue_events_447365.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-10T11:27:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447365"
}
```



---

archive/issue_events_447366.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-10T11:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447366"
}
```



---

archive/issue_comments_527819.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\ncommand in the ticket description fails with\n\n```\nWARNING: Url 'file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/../../../../venv/var/lib/sage/wheels' is ignored: it is neither a file nor a directory.\nERROR: Could not find a version that satisfies the requirement sage-conf==9.7.beta1\nERROR: No matching distribution found for sage-conf==9.7.beta1\nERROR: invocation failed (exit code 1)\nERROR: could not install deps [-rrequirements.txt]; v = InvocationError('/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -m pip install -rrequirements.txt', 1)\nsagepython-sagewheels-nopypi finish: getenv /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi after 0.69 seconds\n...\n```",
    "created_at": "2022-06-10T11:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527819",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

command in the ticket description fails with

```
WARNING: Url 'file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/../../../../venv/var/lib/sage/wheels' is ignored: it is neither a file nor a directory.
ERROR: Could not find a version that satisfies the requirement sage-conf==9.7.beta1
ERROR: No matching distribution found for sage-conf==9.7.beta1
ERROR: invocation failed (exit code 1)
ERROR: could not install deps [-rrequirements.txt]; v = InvocationError('/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -m pip install -rrequirements.txt', 1)
sagepython-sagewheels-nopypi finish: getenv /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi after 0.69 seconds
...
```



---

archive/issue_comments_527820.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDid you run `make build` as the manual explains?",
    "created_at": "2022-06-10T19:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Did you run `make build` as the manual explains?



---

archive/issue_comments_527821.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ```\n ./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'\n ```\n-\n+(to be run after `make build`)\n``````\n",
    "created_at": "2022-06-12T18:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527821",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ```
 ./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-standard && SAGE_NUM_THREADS=16 tox -v -v -v -e sagepython-sagewheels-nopypi)'
 ```
-
+(to be run after `make build`)
``````




---

archive/issue_events_447367.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-12T18:47:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447367"
}
```



---

archive/issue_events_447368.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-12T18:47:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447368"
}
```



---

archive/issue_events_447369.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-13T11:11:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447369"
}
```



---

archive/issue_events_447370.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-13T11:11:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447370"
}
```



---

archive/issue_comments_527822.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nbesides `make build`, I also needed to apply\n\n```diff\ndiff --git a/build/pkgs/sage_conf/install-requires.txt b/build/pkgs/sage_conf/install-requires.txt\nindex 83ad7e641fa..3d4ff51d565 100644\n--- a/build/pkgs/sage_conf/install-requires.txt\n+++ b/build/pkgs/sage_conf/install-requires.txt\n@@ -1 +1 @@\n-sage-conf ~= 9.5.b6\n+sage-conf\ndiff --git a/build/pkgs/sage_setup/install-requires.txt b/build/pkgs/sage_setup/install-requires.txt\nindex 01a931f5eb5..9d4666c07f4 100644\n--- a/build/pkgs/sage_setup/install-requires.txt\n+++ b/build/pkgs/sage_setup/install-requires.txt\n@@ -1 +1 @@\n-sage-setup ~= 9.5.b6\n+sage-setup\n```\nthat `9.5.b6` seemed to come from an obsolete workaround anyway.",
    "created_at": "2022-06-13T11:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527822",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

besides `make build`, I also needed to apply

```diff
diff --git a/build/pkgs/sage_conf/install-requires.txt b/build/pkgs/sage_conf/install-requires.txt
index 83ad7e641fa..3d4ff51d565 100644
--- a/build/pkgs/sage_conf/install-requires.txt
+++ b/build/pkgs/sage_conf/install-requires.txt
@@ -1 +1 @@
-sage-conf ~= 9.5.b6
+sage-conf
diff --git a/build/pkgs/sage_setup/install-requires.txt b/build/pkgs/sage_setup/install-requires.txt
index 01a931f5eb5..9d4666c07f4 100644
--- a/build/pkgs/sage_setup/install-requires.txt
+++ b/build/pkgs/sage_setup/install-requires.txt
@@ -1 +1 @@
-sage-setup ~= 9.5.b6
+sage-setup
```
that `9.5.b6` seemed to come from an obsolete workaround anyway.



---

archive/issue_comments_527823.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAnd after these changes, it errors out (much later) with\n\n```\nModuleNotFoundError: No module named 'primecountpy'\nERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all; print(sage.all.__file__)' (exited with code 1)\n```",
    "created_at": "2022-06-13T11:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527823",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

And after these changes, it errors out (much later) with

```
ModuleNotFoundError: No module named 'primecountpy'
ERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all; print(sage.all.__file__)' (exited with code 1)
```



---

archive/issue_comments_527824.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nthe latter is probably a config error, as the module is there and well:\n\n```\nsage: import primecountpy\nsage: primecountpy.primecount.prime_pi(100)\n25\n```",
    "created_at": "2022-06-13T11:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527824",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

the latter is probably a config error, as the module is there and well:

```
sage: import primecountpy
sage: primecountpy.primecount.prime_pi(100)
25
```



---

archive/issue_comments_527825.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5\"><code>b030e7a</code></a></td><td><code>Merge tag '9.7.beta2' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>\n",
    "created_at": "2022-06-17T19:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527825",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5"><code>b030e7a</code></a></td><td><code>Merge tag '9.7.beta2' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>




---

archive/issue_comments_527826.json:
```json
{
    "body": "Changed commit from **[`9db6b2f`](https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb)** to **[`b030e7a`](https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5)**",
    "created_at": "2022-06-17T19:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527826",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9db6b2f`](https://github.com/sagemath/sagetrac-mirror/commit/9db6b2f9dfc496edfcf955b3b66bf62919587ddb)** to **[`b030e7a`](https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5)**



---

archive/issue_comments_527827.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b\"><code>c9ca4e4</code></a></td><td><code>pkgs/sagemath-standard/tox.ini: Set basepython correctly for all supported sagepython-* environments</code></td></tr></table>\n",
    "created_at": "2022-06-18T00:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527827",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b"><code>c9ca4e4</code></a></td><td><code>pkgs/sagemath-standard/tox.ini: Set basepython correctly for all supported sagepython-* environments</code></td></tr></table>




---

archive/issue_comments_527828.json:
```json
{
    "body": "Changed commit from **[`b030e7a`](https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5)** to **[`c9ca4e4`](https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b)**",
    "created_at": "2022-06-18T00:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527828",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b030e7a`](https://github.com/sagemath/sagetrac-mirror/commit/b030e7a306b6433d13b910119ea215556c6e53a5)** to **[`c9ca4e4`](https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b)**



---

archive/issue_comments_527829.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks for testing. Indeed it didn't work with sagemath-standard because I made a mistake in the tox configuration. Fixed now",
    "created_at": "2022-06-18T00:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527829",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks for testing. Indeed it didn't work with sagemath-standard because I made a mistake in the tox configuration. Fixed now



---

archive/issue_events_447371.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-18T00:34:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447371"
}
```



---

archive/issue_events_447372.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-18T00:34:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447372"
}
```



---

archive/issue_events_447373.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-18T00:43:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "title_is": "pkgs/sagemath-*/tox.ini: Create environment that uses Sage's python as the basepython",
    "title_was": "pkgs/sagemath-standard/tox.ini: Create environment that uses Sage's python as the basepython",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447373"
}
```



---

archive/issue_comments_527830.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec\"><code>01bd09c</code></a></td><td><code>pkgs/sagemath-{environment,repl}/tox.ini: Add sagepython toxenv</code></td></tr></table>\n",
    "created_at": "2022-06-18T00:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527830",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec"><code>01bd09c</code></a></td><td><code>pkgs/sagemath-{environment,repl}/tox.ini: Add sagepython toxenv</code></td></tr></table>




---

archive/issue_comments_527831.json:
```json
{
    "body": "Changed commit from **[`c9ca4e4`](https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b)** to **[`01bd09c`](https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec)**",
    "created_at": "2022-06-18T00:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527831",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9ca4e4`](https://github.com/sagemath/sagetrac-mirror/commit/c9ca4e4f0d7c76c41c8afb3a882c92abc0cac85b)** to **[`01bd09c`](https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec)**



---

archive/issue_comments_527832.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI'm not a big yaml/tompl expert, but why\n\n```\nbasepython = {env:SAGE_VENV}/bin/python3\n``` \n\nis repeated 7 times? Can't it be set once and for all?",
    "created_at": "2022-06-18T07:50:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527832",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

I'm not a big yaml/tompl expert, but why

```
basepython = {env:SAGE_VENV}/bin/python3
``` 

is repeated 7 times? Can't it be set once and for all?



---

archive/issue_comments_527833.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe `basepython` variable has useful defaulting behavior: Environment names that include a `pyNM` factor configure `basepython = pythonN.M` etc., see https://tox.wiki/en/latest/config.html#tox-environments\n\nI want to override it only for environments with the `sagepython` factor. Unfortunately I haven't found a more elegant solution than repeating it for the listed environments.",
    "created_at": "2022-06-18T17:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527833",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

The `basepython` variable has useful defaulting behavior: Environment names that include a `pyNM` factor configure `basepython = pythonN.M` etc., see https://tox.wiki/en/latest/config.html#tox-environments

I want to override it only for environments with the `sagepython` factor. Unfortunately I haven't found a more elegant solution than repeating it for the listed environments.



---

archive/issue_comments_527834.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745\"><code>3839cee</code></a></td><td><code>Merge tag '9.7.beta3' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>\n",
    "created_at": "2022-06-25T23:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745"><code>3839cee</code></a></td><td><code>Merge tag '9.7.beta3' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>




---

archive/issue_comments_527835.json:
```json
{
    "body": "Changed commit from **[`01bd09c`](https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec)** to **[`3839cee`](https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745)**",
    "created_at": "2022-06-25T23:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527835",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`01bd09c`](https://github.com/sagemath/sagetrac-mirror/commit/01bd09cc6a6f276941975c8fb163b70fa1c04cec)** to **[`3839cee`](https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745)**



---

archive/issue_comments_527836.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\non Fedora 34:\n\n```\nsage: import sage_conf\nsage: sage_conf.VERSION\n'9.7.beta3'\n```\nbut\n\n```\n...\nSkipping link: wrong project name (not sage-conf): file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/sphinxcontrib_serializinghtml-1.1.5-py2.py3-none-any.whl\n  Local files found: /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/sage_conf-9.7b3-py3-none-any.whl\n  Given no hashes to check 0 links for project 'sage-conf': discarding no candidates\n  ERROR: Could not find a version that satisfies the requirement sage-conf~=9.5.b6\n  ERROR: No matching distribution found for sage-conf~=9.5.b6\n  Exception information:\n  Traceback (most recent call last):\n    File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib/python3.9/site-packages/pip/_vendor/resolvelib/resolvers.py\", line 171, in _merge_into_criterion\n \n     crit = self.state.criteria[name]\n  KeyError: 'sage-conf'\n```",
    "created_at": "2022-06-29T10:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527836",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

on Fedora 34:

```
sage: import sage_conf
sage: sage_conf.VERSION
'9.7.beta3'
```
but

```
...
Skipping link: wrong project name (not sage-conf): file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/sphinxcontrib_serializinghtml-1.1.5-py2.py3-none-any.whl
  Local files found: /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/sage_conf-9.7b3-py3-none-any.whl
  Given no hashes to check 0 links for project 'sage-conf': discarding no candidates
  ERROR: Could not find a version that satisfies the requirement sage-conf~=9.5.b6
  ERROR: No matching distribution found for sage-conf~=9.5.b6
  Exception information:
  Traceback (most recent call last):
    File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib/python3.9/site-packages/pip/_vendor/resolvelib/resolvers.py", line 171, in _merge_into_criterion
 
     crit = self.state.criteria[name]
  KeyError: 'sage-conf'
```



---

archive/issue_events_447374.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-29T10:43:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447374"
}
```



---

archive/issue_events_447375.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-29T10:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447375"
}
```



---

archive/issue_comments_527837.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nit seems that `sage-conf` is not looked up in the right place, i.e. in `venv/`.",
    "created_at": "2022-06-29T10:45:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527837",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

it seems that `sage-conf` is not looked up in the right place, i.e. in `venv/`.



---

archive/issue_comments_527838.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nDo you happen to use `--enable-editable` in this build?",
    "created_at": "2022-06-29T15:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527838",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Do you happen to use `--enable-editable` in this build?



---

archive/issue_comments_527839.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment%3A24):\n> Do you happen to use `--enable-editable` in this build?\n\nno",
    "created_at": "2022-06-29T16:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527839",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment%3A24):
> Do you happen to use `--enable-editable` in this build?

no



---

archive/issue_comments_527840.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOK, I guess I have to make changes to `build/pkgs/sage_conf/install-requires.txt` so it does not reject the wheel",
    "created_at": "2022-06-30T00:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527840",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

OK, I guess I have to make changes to `build/pkgs/sage_conf/install-requires.txt` so it does not reject the wheel



---

archive/issue_comments_527841.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a\"><code>fe510ef</code></a></td><td><code>build/pkgs/sage_{conf,setup}/install-requires: Use ~= 9.7.b3</code></td></tr></table>\n",
    "created_at": "2022-06-30T00:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527841",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a"><code>fe510ef</code></a></td><td><code>build/pkgs/sage_{conf,setup}/install-requires: Use ~= 9.7.b3</code></td></tr></table>




---

archive/issue_comments_527842.json:
```json
{
    "body": "Changed commit from **[`3839cee`](https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745)** to **[`fe510ef`](https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a)**",
    "created_at": "2022-06-30T00:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527842",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3839cee`](https://github.com/sagemath/sagetrac-mirror/commit/3839ceec11ae8397cf923464354fdf1d68287745)** to **[`fe510ef`](https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a)**



---

archive/issue_events_447376.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-30T00:40:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447376"
}
```



---

archive/issue_events_447377.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-30T00:40:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447377"
}
```



---

archive/issue_comments_527843.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nfor some reason, in this branch `./configure` was hanging (!) at testing for `giac` version. I did the following obvious change, and it passed\n\n```diff\n--- a/build/pkgs/giac/spkg-configure.m4\n+++ b/build/pkgs/giac/spkg-configure.m4\n@@ -23,5 +23,6 @@ SAGE_SPKG_CONFIGURE([giac], [\n         ], [sage_spkg_install_giac=yes])\n        ], [sage_spkg_install_giac=yes])\n        m4_popdef([GIAC_MIN_VERSION])\n+       m4_popdef([GIAC_MAX_VERSION])\n     ])\n ])\n```",
    "created_at": "2022-06-30T18:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527843",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

for some reason, in this branch `./configure` was hanging (!) at testing for `giac` version. I did the following obvious change, and it passed

```diff
--- a/build/pkgs/giac/spkg-configure.m4
+++ b/build/pkgs/giac/spkg-configure.m4
@@ -23,5 +23,6 @@ SAGE_SPKG_CONFIGURE([giac], [
         ], [sage_spkg_install_giac=yes])
        ], [sage_spkg_install_giac=yes])
        m4_popdef([GIAC_MIN_VERSION])
+       m4_popdef([GIAC_MAX_VERSION])
     ])
 ])
```



---

archive/issue_comments_527844.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThat's very strange",
    "created_at": "2022-06-30T18:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527844",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

That's very strange



---

archive/issue_comments_527845.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nDo you want to push this change to the branch here or open a new ticket for it? Either way is fine with me",
    "created_at": "2022-06-30T18:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527845",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Do you want to push this change to the branch here or open a new ticket for it? Either way is fine with me



---

archive/issue_comments_527846.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nnow something is not right with `primecountpy` (which works fine with \"normal\" sage, e.g.\n`./sage -tp 16 src/sage/functions/prime_pi.pyx` passes just fine)\n\n```\nsagepython-sagewheels-nopypi finish: envreport  after 0.16 seconds\nsagepython-sagewheels-nopypi installed: DEPRECATION: --find-links option in pip freeze is deprecated. pip 21.2 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/9069.,-f file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels,alabaster==0.7.12,Babel==2.9.1,backcall==0.2.0,certifi==2021.10.8,cffi==1.15.0,charset-normalizer==2.0.4,cvxopt==1.2.7,cycler==0.11.0,cypari2==2.1.2,cysignals==1.11.2,Cython==0.29.30,decorator==5.0.9,docutils==0.17.1,entrypoints==0.3,fonttools==4.28.4,fpylll==0.5.7,gmpy2==2.1.1,idna==3.2,imagesize==1.2.0,importlib-metadata==4.8.2,ipykernel==6.6.0,ipython==7.29.0,ipython-genutils==0.2.0,ipywidgets==7.6.5,jedi==0.18.1,Jinja2==3.1.2,jupyter-client==7.1.0,jupyter-core==4.9.1,kiwisolver==1.3.2,MarkupSafe==2.1.1,matplotlib==3.5.1,matplotlib-inline==0.1.2,memory-allocator==0.1.3,mpmath==1.2.1,nest-asyncio==1.5.4,networkx==2.6.3,numpy==1.21.4,packaging==21.3,parso==0.8.2,pexpect==4.8.0,pickleshare==0.7.5,Pillow==9.0.1,pkgconfig==1.5.5,pplpy==0.8.6,prompt-toolkit==3.0.22,ptyprocess==0.5.1,pycparser==2.21,Pygments==2.10.0,pyparsing==3.0.6,python-dateutil==2.8.2,pytz==2021.3,pyzmq==22.3.0,requests==2.26.0,rpy2==3.3.6,sage-conf==9.7b3,sagemath-standard @ file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/.tmp/package/1/sagemath-standard-9.7b3.zip,scipy==1.7.3,six==1.16.0,snowballstemmer==2.1.0,Sphinx==4.4.0,sphinxcontrib-applehelp==1.0.2,sphinxcontrib-devhelp==1.0.2,sphinxcontrib-htmlhelp==2.0.0,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-qthelp==1.0.3,sphinxcontrib-serializinghtml==1.1.5,sympy==1.10.1,tornado==6.1,traitlets==5.1.1,tzlocal==2.1,urllib3==1.26.6,wcwidth==0.2.5,widgetsnbextension==3.5.2,zipp==3.5.0\n  removing /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/tmp\nsagepython-sagewheels-nopypi start: run-test-pre \nsagepython-sagewheels-nopypi run-test-pre: PYTHONHASHSEED='632737325'\nsagepython-sagewheels-nopypi finish: run-test-pre  after 0.00 seconds\nsagepython-sagewheels-nopypi start: run-test \nsagepython-sagewheels-nopypi run-test: commands[0] | python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all; print(sage.all.__file__)'\nsetting PATH=/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/src/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/bin:/home/scratch2/dimpase/mambaforge/bin:/users/dimpase/perl5/bin:/users/dimpase/bin:/usr/lib64/qt-3.3/bin:/usr/lib64/ccache:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/auto/users/dimpase/bin\n[3346474] /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard$ /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all; print(sage.all.__file__)'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/all.py\", line 138, in <module>\n    from sage.algebras.all   import *\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/all.py\", line 21, in <module>\n    import sage.algebras.catalog as algebras\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/catalog.py\", line 84, in <module>\n    from sage.algebras.clifford_algebra import CliffordAlgebra as Clifford\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/clifford_algebra.py\", line 35, in <module>\n    from sage.quadratic_forms.quadratic_form import QuadraticForm\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form.py\", line 192, in <module>\n    class QuadraticForm(SageObject):\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form.py\", line 323, in QuadraticForm\n    from sage.quadratic_forms.quadratic_form__local_field_invariants import \\\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form__local_field_invariants.py\", line 30, in <module>\n    from sage.functions.all import sgn\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/functions/all.py\", line 68, in <module>\n    from .prime_pi import legendre_phi, partial_sieve_function, prime_pi\n  File \"sage/functions/prime_pi.pyx\", line 37, in init sage.functions.prime_pi (build/cythonized/sage/functions/prime_pi.c:5947)\n    from primecountpy.primecount import prime_pi as _prime_pi\nModuleNotFoundError: No module named 'primecountpy'\nERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all; print(sage.all.__file__)' (exited with code 1)\nsagepython-sagewheels-nopypi finish: run-test  after 0.34 seconds\nsagepython-sagewheels-nopypi start: run-test-post \nsagepython-sagewheels-nopypi finish: run-test-post  after 0.00 seconds\n_______________________________________________ summary _______________________________________________\nERROR:   sagepython-sagewheels-nopypi: commands failed\ncleanup /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/.tmp/package/1/sagemath-standard-9.7b3.zip\n```\n\niirc I saw this earlier...",
    "created_at": "2022-06-30T19:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527846",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

now something is not right with `primecountpy` (which works fine with "normal" sage, e.g.
`./sage -tp 16 src/sage/functions/prime_pi.pyx` passes just fine)

```
sagepython-sagewheels-nopypi finish: envreport  after 0.16 seconds
sagepython-sagewheels-nopypi installed: DEPRECATION: --find-links option in pip freeze is deprecated. pip 21.2 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/9069.,-f file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels,alabaster==0.7.12,Babel==2.9.1,backcall==0.2.0,certifi==2021.10.8,cffi==1.15.0,charset-normalizer==2.0.4,cvxopt==1.2.7,cycler==0.11.0,cypari2==2.1.2,cysignals==1.11.2,Cython==0.29.30,decorator==5.0.9,docutils==0.17.1,entrypoints==0.3,fonttools==4.28.4,fpylll==0.5.7,gmpy2==2.1.1,idna==3.2,imagesize==1.2.0,importlib-metadata==4.8.2,ipykernel==6.6.0,ipython==7.29.0,ipython-genutils==0.2.0,ipywidgets==7.6.5,jedi==0.18.1,Jinja2==3.1.2,jupyter-client==7.1.0,jupyter-core==4.9.1,kiwisolver==1.3.2,MarkupSafe==2.1.1,matplotlib==3.5.1,matplotlib-inline==0.1.2,memory-allocator==0.1.3,mpmath==1.2.1,nest-asyncio==1.5.4,networkx==2.6.3,numpy==1.21.4,packaging==21.3,parso==0.8.2,pexpect==4.8.0,pickleshare==0.7.5,Pillow==9.0.1,pkgconfig==1.5.5,pplpy==0.8.6,prompt-toolkit==3.0.22,ptyprocess==0.5.1,pycparser==2.21,Pygments==2.10.0,pyparsing==3.0.6,python-dateutil==2.8.2,pytz==2021.3,pyzmq==22.3.0,requests==2.26.0,rpy2==3.3.6,sage-conf==9.7b3,sagemath-standard @ file:///home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/.tmp/package/1/sagemath-standard-9.7b3.zip,scipy==1.7.3,six==1.16.0,snowballstemmer==2.1.0,Sphinx==4.4.0,sphinxcontrib-applehelp==1.0.2,sphinxcontrib-devhelp==1.0.2,sphinxcontrib-htmlhelp==2.0.0,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-qthelp==1.0.3,sphinxcontrib-serializinghtml==1.1.5,sympy==1.10.1,tornado==6.1,traitlets==5.1.1,tzlocal==2.1,urllib3==1.26.6,wcwidth==0.2.5,widgetsnbextension==3.5.2,zipp==3.5.0
  removing /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/tmp
sagepython-sagewheels-nopypi start: run-test-pre 
sagepython-sagewheels-nopypi run-test-pre: PYTHONHASHSEED='632737325'
sagepython-sagewheels-nopypi finish: run-test-pre  after 0.00 seconds
sagepython-sagewheels-nopypi start: run-test 
sagepython-sagewheels-nopypi run-test: commands[0] | python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all; print(sage.all.__file__)'
setting PATH=/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/src/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/bin:/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/bin:/home/scratch2/dimpase/mambaforge/bin:/users/dimpase/perl5/bin:/users/dimpase/bin:/usr/lib64/qt-3.3/bin:/usr/lib64/ccache:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/auto/users/dimpase/bin
[3346474] /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard$ /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all; print(sage.all.__file__)'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/all.py", line 138, in <module>
    from sage.algebras.all   import *
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/all.py", line 21, in <module>
    import sage.algebras.catalog as algebras
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/catalog.py", line 84, in <module>
    from sage.algebras.clifford_algebra import CliffordAlgebra as Clifford
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/algebras/clifford_algebra.py", line 35, in <module>
    from sage.quadratic_forms.quadratic_form import QuadraticForm
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form.py", line 192, in <module>
    class QuadraticForm(SageObject):
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form.py", line 323, in QuadraticForm
    from sage.quadratic_forms.quadratic_form__local_field_invariants import \
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/quadratic_forms/quadratic_form__local_field_invariants.py", line 30, in <module>
    from sage.functions.all import sgn
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/functions/all.py", line 68, in <module>
    from .prime_pi import legendre_phi, partial_sieve_function, prime_pi
  File "sage/functions/prime_pi.pyx", line 37, in init sage.functions.prime_pi (build/cythonized/sage/functions/prime_pi.c:5947)
    from primecountpy.primecount import prime_pi as _prime_pi
ModuleNotFoundError: No module named 'primecountpy'
ERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all; print(sage.all.__file__)' (exited with code 1)
sagepython-sagewheels-nopypi finish: run-test  after 0.34 seconds
sagepython-sagewheels-nopypi start: run-test-post 
sagepython-sagewheels-nopypi finish: run-test-post  after 0.00 seconds
_______________________________________________ summary _______________________________________________
ERROR:   sagepython-sagewheels-nopypi: commands failed
cleanup /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/.tmp/package/1/sagemath-standard-9.7b3.zip
```

iirc I saw this earlier...



---

archive/issue_events_447378.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-30T19:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447378"
}
```



---

archive/issue_events_447379.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-06-30T19:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447379"
}
```



---

archive/issue_comments_527847.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@mkoeppe](#comment%3A31):\n> Do you want to push this change to the branch here or open a new ticket for it? Either way is fine with me\n\nas more changes seem to be needed, perhaps just add it here?",
    "created_at": "2022-06-30T19:27:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527847",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@mkoeppe](#comment%3A31):
> Do you want to push this change to the branch here or open a new ticket for it? Either way is fine with me

as more changes seem to be needed, perhaps just add it here?



---

archive/issue_comments_527848.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nok",
    "created_at": "2022-06-30T19:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527848",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

ok



---

archive/issue_comments_527849.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a\"><code>b5fedff</code></a></td><td><code>build/pkgs/giac/spkg-configure.m4: Pop what was pushed</code></td></tr></table>\n",
    "created_at": "2022-07-01T00:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527849",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a"><code>b5fedff</code></a></td><td><code>build/pkgs/giac/spkg-configure.m4: Pop what was pushed</code></td></tr></table>




---

archive/issue_comments_527850.json:
```json
{
    "body": "Changed commit from **[`fe510ef`](https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a)** to **[`b5fedff`](https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a)**",
    "created_at": "2022-07-01T00:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe510ef`](https://github.com/sagemath/sagetrac-mirror/commit/fe510ef42ceb7f9c25c838d8bb952019a246ac5a)** to **[`b5fedff`](https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a)**



---

archive/issue_comments_527851.json:
```json
{
    "body": "Changed commit from **[`b5fedff`](https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a)** to **[`74f1e10`](https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2)**",
    "created_at": "2022-07-01T20:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527851",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5fedff`](https://github.com/sagemath/sagetrac-mirror/commit/b5fedffa3d46f099109a75368f2a18151c31980a)** to **[`74f1e10`](https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2)**



---

archive/issue_comments_527852.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2\"><code>74f1e10</code></a></td><td><code>src/requirements.txt.m4, src/setup.cfg.m4 (install_requires): Add primecountpy</code></td></tr></table>\n",
    "created_at": "2022-07-01T20:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527852",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2"><code>74f1e10</code></a></td><td><code>src/requirements.txt.m4, src/setup.cfg.m4 (install_requires): Add primecountpy</code></td></tr></table>




---

archive/issue_comments_527853.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@dimpase](#comment%3A32):\n> now something is not right with `primecountpy`\n\nI have added it as a runtime dependency. Strange, I thought I did this a long time ago already",
    "created_at": "2022-07-01T20:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527853",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@dimpase](#comment%3A32):
> now something is not right with `primecountpy`

I have added it as a runtime dependency. Strange, I thought I did this a long time ago already



---

archive/issue_events_447380.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-01T20:28:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447380"
}
```



---

archive/issue_events_447381.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-01T20:28:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447381"
}
```



---

archive/issue_comments_527854.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nnow this fails with a similar error for `lrcalc`:\n\n```\nFile \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/combinat/sf/schur.py\", line 21, in <module>\n    import sage.libs.lrcalc.lrcalc as lrcalc\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/libs/lrcalc/lrcalc.py\", line 193, in <module>\n    import lrcalc\nModuleNotFoundError: No module named 'lrcalc'\nERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all; print(sage.all.__file__)' (exited with code 1)\nsagepython-sagewheels-nopypi finish: run-test  after 0.51 seconds\nsagepython-sagewheels-nopypi start: run-test-post \nsagepython-sagewheels-nopypi finish: run-test-post  after 0.00 seconds\n_______________________________________________ summary _______________________________________________\nERROR:   sagepython-sagewheels-nopypi: commands failed\n```",
    "created_at": "2022-07-02T09:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527854",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

now this fails with a similar error for `lrcalc`:

```
File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/combinat/sf/schur.py", line 21, in <module>
    import sage.libs.lrcalc.lrcalc as lrcalc
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/lib64/python3.9/site-packages/sage/libs/lrcalc/lrcalc.py", line 193, in <module>
    import lrcalc
ModuleNotFoundError: No module named 'lrcalc'
ERROR: InvocationError for command /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard/.tox/sagepython-sagewheels-nopypi/bin/python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all; print(sage.all.__file__)' (exited with code 1)
sagepython-sagewheels-nopypi finish: run-test  after 0.51 seconds
sagepython-sagewheels-nopypi start: run-test-post 
sagepython-sagewheels-nopypi finish: run-test-post  after 0.00 seconds
_______________________________________________ summary _______________________________________________
ERROR:   sagepython-sagewheels-nopypi: commands failed
```



---

archive/issue_events_447382.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-02T09:21:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447382"
}
```



---

archive/issue_events_447383.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-02T09:21:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447383"
}
```



---

archive/issue_comments_527855.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI'm trying the change for `lrcalc` analogous to the one for `primecountpy`.",
    "created_at": "2022-07-02T09:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527855",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

I'm trying the change for `lrcalc` analogous to the one for `primecountpy`.



---

archive/issue_comments_527856.json:
```json
{
    "body": "Dependencies: **#33936**",
    "created_at": "2022-07-02T20:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527856",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33936**



---

archive/issue_comments_527857.json:
```json
{
    "body": "Changed commit from **[`74f1e10`](https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2)** to **[`1c2f41b`](https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244)**",
    "created_at": "2022-07-02T20:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527857",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74f1e10`](https://github.com/sagemath/sagetrac-mirror/commit/74f1e102a3c7c50ab00fba8f9e823f30b54bf3a2)** to **[`1c2f41b`](https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244)**



---

archive/issue_comments_527858.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ea0035cdc9e46939d1d06cdc9b192273d6ff0b4\"><code>5ea0035</code></a></td><td><code>src/requirements.txt.m4, src/setup.cfg.m4 (install_requires): Add lrcalc_python</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b17c2dd255c579aaf8f20427c3501951bc7fed4\"><code>7b17c2d</code></a></td><td><code>Split sage_docbuild.conf to sage.misc.sagedoc_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282270fdf5e591777f911cab875d7cad46e4ba72\"><code>282270f</code></a></td><td><code>Fix docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2766bf33ecbd487f39eace9a8cc9ddb2102a0d2\"><code>c2766bf</code></a></td><td><code>Move skip_member() to sage_docbuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4296851301ae10eb9420af835a3247f2921d5b77\"><code>4296851</code></a></td><td><code>Move the remnants of skip_member from sagedoc_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45f9ff368b6e2e49804fb67a78d82606bba8f2f5\"><code>45f9ff3</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a02496aaa29dec6c431e421bee3f5bfc1f9c1eb\"><code>0a02496</code></a></td><td><code>Change assert back to if</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244\"><code>1c2f41b</code></a></td><td><code>Merge #33936</code></td></tr></table>\n",
    "created_at": "2022-07-02T20:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ea0035cdc9e46939d1d06cdc9b192273d6ff0b4"><code>5ea0035</code></a></td><td><code>src/requirements.txt.m4, src/setup.cfg.m4 (install_requires): Add lrcalc_python</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b17c2dd255c579aaf8f20427c3501951bc7fed4"><code>7b17c2d</code></a></td><td><code>Split sage_docbuild.conf to sage.misc.sagedoc_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282270fdf5e591777f911cab875d7cad46e4ba72"><code>282270f</code></a></td><td><code>Fix docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2766bf33ecbd487f39eace9a8cc9ddb2102a0d2"><code>c2766bf</code></a></td><td><code>Move skip_member() to sage_docbuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4296851301ae10eb9420af835a3247f2921d5b77"><code>4296851</code></a></td><td><code>Move the remnants of skip_member from sagedoc_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45f9ff368b6e2e49804fb67a78d82606bba8f2f5"><code>45f9ff3</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a02496aaa29dec6c431e421bee3f5bfc1f9c1eb"><code>0a02496</code></a></td><td><code>Change assert back to if</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244"><code>1c2f41b</code></a></td><td><code>Merge #33936</code></td></tr></table>




---

archive/issue_comments_527859.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@dimpase](#comment%3A40):\n> I'm trying the change for `lrcalc` analogous to the one for `primecountpy`.\n\nIndeed, that was missing too, fixed now.",
    "created_at": "2022-07-02T20:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527859",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@dimpase](#comment%3A40):
> I'm trying the change for `lrcalc` analogous to the one for `primecountpy`.

Indeed, that was missing too, fixed now.



---

archive/issue_events_447384.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-02T21:11:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "title_is": "pkgs/sagemath-*/tox.ini: Create environment that uses Sage's python as the basepython, fix sagemath-standard deps",
    "title_was": "pkgs/sagemath-*/tox.ini: Create environment that uses Sage's python as the basepython",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447384"
}
```



---

archive/issue_events_447385.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-02T22:03:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447385"
}
```



---

archive/issue_events_447386.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-02T22:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447386"
}
```



---

archive/issue_comments_527860.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@dimpase](#comment%3A40):\n> I'm trying the change for `lrcalc` analogous to the one for `primecountpy`.\n\nthat appeared to suffice (but now the branch got updated)",
    "created_at": "2022-07-03T07:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527860",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@dimpase](#comment%3A40):
> I'm trying the change for `lrcalc` analogous to the one for `primecountpy`.

that appeared to suffice (but now the branch got updated)



---

archive/issue_comments_527861.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nwhat I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`\n\nObviously there should be an automated way.",
    "created_at": "2022-07-03T07:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527861",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

what I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`

Obviously there should be an automated way.



---

archive/issue_comments_527862.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-07-03T08:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527862",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_447387.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-03T08:23:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447387"
}
```



---

archive/issue_events_447388.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-03T08:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447388"
}
```



---

archive/issue_comments_527863.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nOK, otherwise it looks good. Perhaps deal with versions mentioned in the last comment on another ticket (unless it can be trivially fixed).",
    "created_at": "2022-07-03T08:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527863",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

OK, otherwise it looks good. Perhaps deal with versions mentioned in the last comment on another ticket (unless it can be trivially fixed).



---

archive/issue_comments_527864.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@dimpase](#comment%3A47):\n> what I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`\n> \n> Obviously there should be an automated way.\n\n`src/requirements.txt` is already generated from `src/requirements.txt.m4`\n\nIf you mean `build/pkgs/sage_conf/install-requires.txt` and `build/pkgs/sage_setup/install-requires.txt`, yes, that will need a better solution but it's way beyond the scope of this ticket",
    "created_at": "2022-07-03T16:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527864",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@dimpase](#comment%3A47):
> what I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`
> 
> Obviously there should be an automated way.

`src/requirements.txt` is already generated from `src/requirements.txt.m4`

If you mean `build/pkgs/sage_conf/install-requires.txt` and `build/pkgs/sage_setup/install-requires.txt`, yes, that will need a better solution but it's way beyond the scope of this ticket



---

archive/issue_events_447389.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-03T16:42:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447389"
}
```



---

archive/issue_events_447390.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-03T16:42:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447390"
}
```



---

archive/issue_events_447391.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-03T17:29:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447391"
}
```



---

archive/issue_events_447392.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-03T17:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447392"
}
```



---

archive/issue_comments_527865.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nOK",
    "created_at": "2022-07-03T17:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527865",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">comment:51</div>

OK



---

archive/issue_comments_527866.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThanks!",
    "created_at": "2022-07-03T17:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527866",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Thanks!



---

archive/issue_comments_527867.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nMerge failure on top of:\n\n662aaf256a Trac #32423: Update numpy to 1.22.x, scipy 1.8.x, networkx 2.8.x\n\nd98aa7304d Trac #29549: bootstrap: Clean up use of gettextize\n\n24b4eeba5e Trac #13321: FreeModule.hom stores its matrix over the wrong ring\n\n93357f31bf Trac #34104: Build & Test workflow: Run apt-get update first\n\n23e4bbe7d5 Trac #34092: Docbuild workflow broken because furo is too new\n\n9440e71d60 Trac #34088: cygwin python3 missing ensurepip\n\n9879ff4e0c Trac #33936: Remove runtime dependency on sage_docbuild introduced in #33763\n\n55d05c97cb Trac #31403: giac: Make cliquer a dependency, libnauty an optional dependency\n\n843eb03e7e Updated [SageMath](../wiki/SageMath) version to 9.7.beta4\n\n\n\nmerge was not clean: conflicts in pkgs/sagemath-standard/tox.ini",
    "created_at": "2022-07-08T21:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527867",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Merge failure on top of:

662aaf256a Trac #32423: Update numpy to 1.22.x, scipy 1.8.x, networkx 2.8.x

d98aa7304d Trac #29549: bootstrap: Clean up use of gettextize

24b4eeba5e Trac #13321: FreeModule.hom stores its matrix over the wrong ring

93357f31bf Trac #34104: Build & Test workflow: Run apt-get update first

23e4bbe7d5 Trac #34092: Docbuild workflow broken because furo is too new

9440e71d60 Trac #34088: cygwin python3 missing ensurepip

9879ff4e0c Trac #33936: Remove runtime dependency on sage_docbuild introduced in #33763

55d05c97cb Trac #31403: giac: Make cliquer a dependency, libnauty an optional dependency

843eb03e7e Updated [SageMath](../wiki/SageMath) version to 9.7.beta4



merge was not clean: conflicts in pkgs/sagemath-standard/tox.ini



---

archive/issue_events_447393.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-08T21:13:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447393"
}
```



---

archive/issue_events_447394.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-08T21:13:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447394"
}
```



---

archive/issue_comments_527868.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9\"><code>ca9d6ce</code></a></td><td><code>Merge tag '9.7.beta4' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>\n",
    "created_at": "2022-07-08T23:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9"><code>ca9d6ce</code></a></td><td><code>Merge tag '9.7.beta4' into t/32716/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default</code></td></tr></table>




---

archive/issue_comments_527869.json:
```json
{
    "body": "Changed commit from **[`1c2f41b`](https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244)** to **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**",
    "created_at": "2022-07-08T23:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527869",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1c2f41b`](https://github.com/sagemath/sagetrac-mirror/commit/1c2f41b50463da33cac86c15105e70b2be6e2244)** to **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**



---

archive/issue_events_447395.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-08T23:37:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447395"
}
```



---

archive/issue_events_447396.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-08T23:37:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447396"
}
```



---

archive/issue_comments_527870.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default)** to **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**",
    "created_at": "2022-07-10T22:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527870",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pkgs_sagemath_standard_tox_ini__use_sage_s_python_by_default)** to **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)**



---

archive/issue_events_447397.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-10T22:34:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447397"
}
```



---

archive/issue_events_447398.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "720adde3bb0292dce4ae76a5e631c845b06a7e21",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-07-10T22:34:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32716#event-447398"
}
```



---

archive/issue_comments_527871.json:
```json
{
    "body": "Changed commit from **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)** to none",
    "created_at": "2022-07-27T01:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527871",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`ca9d6ce`](https://github.com/sagemath/sagetrac-mirror/commit/ca9d6ce3fc81bc816b7c5bdbe24533b14acee4d9)** to none



---

archive/issue_comments_527872.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment%3A49):\n> Replying to [@dimpase](#comment%3A47):\n> > what I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`\n> > \n> > Obviously there should be an automated way.\n> \n> \n> `src/requirements.txt` is already generated from `src/requirements.txt.m4`\n> \n> If you mean `build/pkgs/sage_conf/install-requires.txt` and `build/pkgs/sage_setup/install-requires.txt`, yes, that will need a better solution but it's way beyond the scope of this ticket\n\nImplemented now in #33817",
    "created_at": "2022-07-27T01:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32716#issuecomment-527872",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment%3A49):
> Replying to [@dimpase](#comment%3A47):
> > what I don't like are explicit versions of `sage-conf` and `sage-setup` in `requirements.txt`
> > 
> > Obviously there should be an automated way.
> 
> 
> `src/requirements.txt` is already generated from `src/requirements.txt.m4`
> 
> If you mean `build/pkgs/sage_conf/install-requires.txt` and `build/pkgs/sage_setup/install-requires.txt`, yes, that will need a better solution but it's way beyond the scope of this ticket

Implemented now in #33817
