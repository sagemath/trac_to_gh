# Issue 32887: update sagetex to version 3.6.1

archive/issues_032650.json:
```json
{
    "assignees": [],
    "body": "Previous update: #30342, merged 2020-08-20.\n\nDepends on #34219\n\nCC:  @kcrisman @mkoeppe @orlitzky @slel @jhpalmieri @EmmanuelCharpentier\n\nBranch/Commit: **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**\n\nReviewer: **Emmanuel Charpentier**\n\nAuthor: **Dima Pasechnik, Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32887_\n\n",
    "closed_at": "2022-08-30T19:05:32Z",
    "created_at": "2021-11-16T19:23:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update sagetex to version 3.6.1",
    "type": "issue",
    "updated_at": "2022-08-30T19:05:32Z",
    "url": "https://github.com/sagemath/sage/issues/32887",
    "user": "https://github.com/dimpase"
}
```
Previous update: #30342, merged 2020-08-20.

Depends on #34219

CC:  @kcrisman @mkoeppe @orlitzky @slel @jhpalmieri @EmmanuelCharpentier

Branch/Commit: **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**

Reviewer: **Emmanuel Charpentier**

Author: **Dima Pasechnik, Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/32887_





---

archive/issue_events_452690.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T19:23:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452690"
}
```



---

archive/issue_events_452691.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452691"
}
```



---

archive/issue_events_452692.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452692"
}
```



---

archive/issue_events_452693.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452693"
}
```



---

archive/issue_comments_530972.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2021-11-16T19:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530972",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_530973.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281\">9e26d0a</a></td><td><code>update sagetex to version 3.6</code></td></tr></table>\n",
    "created_at": "2021-11-16T19:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530973",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281">9e26d0a</a></td><td><code>update sagetex to version 3.6</code></td></tr></table>




---

archive/issue_events_452694.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-16T19:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452694"
}
```



---

archive/issue_comments_530974.json:
```json
{
    "body": "Commit: **[`9e26d0a`](https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281)**",
    "created_at": "2021-11-16T19:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530974",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`9e26d0a`](https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281)**



---

archive/issue_comments_530975.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)**",
    "created_at": "2021-11-16T19:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530975",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)**



---

archive/issue_events_452695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-16T23:31:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452695"
}
```



---

archive/issue_events_452696.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-16T23:31:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452696"
}
```



---

archive/issue_comments_530976.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n`sagetex` has a new dependency, `pyparsing`, that also needs to be added as dependency of the SPKG. - https://github.com/sagemath/sagetex/blob/master/setup.py#L16\n\nAnd the 3.6 release is defective - it still identifies itself as 3.5 - https://github.com/sagemath/sagetex/blob/master/setup.py#L7",
    "created_at": "2021-11-16T23:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530976",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

`sagetex` has a new dependency, `pyparsing`, that also needs to be added as dependency of the SPKG. - https://github.com/sagemath/sagetex/blob/master/setup.py#L16

And the 3.6 release is defective - it still identifies itself as 3.5 - https://github.com/sagemath/sagetex/blob/master/setup.py#L7



---

archive/issue_comments_530977.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOr, rather, what is on https://github.com/sagemath/sagetex/ does not match what is packaged up in the release tarball",
    "created_at": "2021-11-16T23:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530977",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Or, rather, what is on https://github.com/sagemath/sagetex/ does not match what is packaged up in the release tarball



---

archive/issue_comments_530978.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374\">180f8a1</a></td><td><code>correct version in setup.py, and deps</code></td></tr></table>\n",
    "created_at": "2021-11-17T09:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530978",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374">180f8a1</a></td><td><code>correct version in setup.py, and deps</code></td></tr></table>




---

archive/issue_comments_530979.json:
```json
{
    "body": "Changed commit from **[`9e26d0a`](https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281)** to **[`180f8a1`](https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374)**",
    "created_at": "2021-11-17T09:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530979",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e26d0a`](https://github.com/sagemath/sagetrac-mirror/commit/9e26d0acfba49aefcef02ca177a4426bc8440281)** to **[`180f8a1`](https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374)**



---

archive/issue_events_452697.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-17T09:45:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452697"
}
```



---

archive/issue_events_452698.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-11-17T09:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452698"
}
```



---

archive/issue_comments_530980.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nshould all be fixed now, sorry. To much different metadata to tie up manually here...",
    "created_at": "2021-11-17T09:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530980",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

should all be fixed now, sorry. To much different metadata to tie up manually here...



---

archive/issue_comments_530981.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think I'll eventually add a small configure script to set up all the versions right.\nIf only there was a way to put tarballs up on [GitHub](../wiki/GitHub) and creating [GitHub](../wiki/GitHub) releases from\nthe command line.",
    "created_at": "2021-11-17T11:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530981",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

I think I'll eventually add a small configure script to set up all the versions right.
If only there was a way to put tarballs up on [GitHub](../wiki/GitHub) and creating [GitHub](../wiki/GitHub) releases from
the command line.



---

archive/issue_comments_530982.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhat is the tarball doing on [GitHub](../wiki/GitHub)? \nIs it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?",
    "created_at": "2021-11-17T18:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530982",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

What is the tarball doing on [GitHub](../wiki/GitHub)? 
Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?



---

archive/issue_comments_530983.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mkoeppe](#comment:7):\n> What is the tarball doing on [GitHub](../wiki/GitHub)? \n> Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?\n\nthere is something called sagetex.zip on CTAN - but the process of publishing there is manual, and I have not put this there yet.\n\nAnd I don't know anything about PyPI publishing.",
    "created_at": "2021-11-17T19:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530983",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mkoeppe](#comment:7):
> What is the tarball doing on [GitHub](../wiki/GitHub)? 
> Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?

there is something called sagetex.zip on CTAN - but the process of publishing there is manual, and I have not put this there yet.

And I don't know anything about PyPI publishing.



---

archive/issue_comments_530984.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> > Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?\n\nUnless something has changed, we do not want it on CTAN, because that will not match versions with Sage.  Dan always made sure that the versions matched (indeed, I think this is in the release instructions for SageTeX?) and so one has to manually move the .sty file, or did have to do.",
    "created_at": "2021-11-17T20:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530984",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

> > Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?

Unless something has changed, we do not want it on CTAN, because that will not match versions with Sage.  Dan always made sure that the versions matched (indeed, I think this is in the release instructions for SageTeX?) and so one has to manually move the .sty file, or did have to do.



---

archive/issue_comments_530985.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHmm, what do you mean by \"we don't want it on CTAN\"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)",
    "created_at": "2021-11-17T20:19:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530985",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Hmm, what do you mean by "we don't want it on CTAN"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)



---

archive/issue_comments_530986.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@dimpase](#comment:6):\n> I think I'll eventually add a small configure script to set up all the versions right.\n> If only there was a way to put tarballs up on [GitHub](../wiki/GitHub) and creating [GitHub](../wiki/GitHub) releases from\n> the command line.\n\nHave you looked into rever? I use it to create tarballs for autoconfiscated packages, release them on [GitHub](../wiki/GitHub) and on PyPI. See, e.g., https://github.com/flatsurf/flatsurf/blob/master/rever.xsh.",
    "created_at": "2021-11-17T21:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530986",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@dimpase](#comment:6):
> I think I'll eventually add a small configure script to set up all the versions right.
> If only there was a way to put tarballs up on [GitHub](../wiki/GitHub) and creating [GitHub](../wiki/GitHub) releases from
> the command line.

Have you looked into rever? I use it to create tarballs for autoconfiscated packages, release them on [GitHub](../wiki/GitHub) and on PyPI. See, e.g., https://github.com/flatsurf/flatsurf/blob/master/rever.xsh.



---

archive/issue_comments_530987.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> Unless something has changed,\n\nApparently it has.\n\n> Hmm, what do you mean by \"we don't want it on CTAN\"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)\n\nThat is good news, and I hope it will keep track with the Sage versions well.",
    "created_at": "2021-11-18T02:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530987",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

> Unless something has changed,

Apparently it has.

> Hmm, what do you mean by "we don't want it on CTAN"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)

That is good news, and I hope it will keep track with the Sage versions well.



---

archive/issue_comments_530988.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kcrisman](#comment:12):\n> > Unless something has changed,\n\n> \n> Apparently it has.\n> \n> > Hmm, what do you mean by \"we don't want it on CTAN\"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)\n\n> \n> That is good news, and I hope it will keep track with the Sage versions well.\n\nKarl, it's almost 2 years old news:\n\n```\nDate: Thu, 24 Jan 2019 18:50:56 +0000\nReferences: <CAKqbAeFMwHMHYbOfA7SOXOJuuv6aBU=89R0Cz8iddJxkmg+64g@mail.gmail.com>\nIn-Reply-To: <CAKqbAeFMwHMHYbOfA7SOXOJuuv6aBU=89R0Cz8iddJxkmg+64g@mail.gmail.com>\nMessage-ID: <CAAWYfq211+bChdmArcJAPwK62opKnSxEfERmtS_xBbcV3kEH_A@mail.gmail.com>\nSubject: Re: are you guys the CTAN maintainers for SageTeX now?\nFrom: Dima Pasechnik <...>\nTo: Dan Drake <...>\nCc: Karl-Dieter Crisman <...>\nContent-Type: text/plain; charset=\"UTF-8\"\n\nHi Dan,\nthe update is in! cf https://ctan.org/pkg/sagetex?lang=en\nCheers,\nDima\n\nOn Wed, Jan 23, 2019 at 1:45 AM Dan Drake <> wrote:\n>\n> Hi Karl-Dieter, Dima,\n>\n> Following up -- I see the reply from the CTAN guy. Are you guys now considered the CTAN maintainers for SageTeX? Can you update or remove it?\n>\n> --\n> Ceci n'est pas une .signature.\n```",
    "created_at": "2021-11-18T10:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530988",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kcrisman](#comment:12):
> > Unless something has changed,

> 
> Apparently it has.
> 
> > Hmm, what do you mean by "we don't want it on CTAN"? Have you forgotten how we started putting in on CTAN few years ago? (And I did it for versions 3.4 and 3.5, and will do for 3.6)

> 
> That is good news, and I hope it will keep track with the Sage versions well.

Karl, it's almost 2 years old news:

```
Date: Thu, 24 Jan 2019 18:50:56 +0000
References: <CAKqbAeFMwHMHYbOfA7SOXOJuuv6aBU=89R0Cz8iddJxkmg+64g@mail.gmail.com>
In-Reply-To: <CAKqbAeFMwHMHYbOfA7SOXOJuuv6aBU=89R0Cz8iddJxkmg+64g@mail.gmail.com>
Message-ID: <CAAWYfq211+bChdmArcJAPwK62opKnSxEfERmtS_xBbcV3kEH_A@mail.gmail.com>
Subject: Re: are you guys the CTAN maintainers for SageTeX now?
From: Dima Pasechnik <...>
To: Dan Drake <...>
Cc: Karl-Dieter Crisman <...>
Content-Type: text/plain; charset="UTF-8"

Hi Dan,
the update is in! cf https://ctan.org/pkg/sagetex?lang=en
Cheers,
Dima

On Wed, Jan 23, 2019 at 1:45 AM Dan Drake <> wrote:
>
> Hi Karl-Dieter, Dima,
>
> Following up -- I see the reply from the CTAN guy. Are you guys now considered the CTAN maintainers for SageTeX? Can you update or remove it?
>
> --
> Ceci n'est pas une .signature.
```



---

archive/issue_comments_530989.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> Karl, it's almost 2 years old news:\n\nI give up.  I clearly can no longer keep 'Trac'.",
    "created_at": "2021-11-18T12:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530989",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

> Karl, it's almost 2 years old news:

I give up.  I clearly can no longer keep 'Trac'.



---

archive/issue_comments_530990.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dimpase](#comment:8):\n> Replying to [@mkoeppe](#comment:7):\n> > What is the tarball doing on [GitHub](../wiki/GitHub)? \n> > Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?\n\n> \n> there is something called sagetex.zip on CTAN - but the process of publishing there is manual, and I have not put this there yet.\n> \n> And I don't know anything about PyPI publishing.\n\nThe package's Python code (apart from setup.py) is generated by TeX from a .dtx file.\nAnyhow, I tried  uploading its Makefile-created tarball (one used by Sage) anf got\n\n```\n$ twine upload  dist/*\nUploading distributions to https://upload.pypi.org/legacy/\nUploading sagetex-3.6.tar.gz\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 71.0k/71.0k [00:00<00:00, 73.0kB/s]\nError during upload. Retry with the --verbose option for more details.\nHTTPError: 400 Bad Request from https://upload.pypi.org/legacy/\nThe name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.\n```\n\nPerhaps some metadata is missing, I don't know. There is no sagetex project on PyPI as far as I can tell.\n\nLet's get this in as is, and deal with a better distribution mechanism later.",
    "created_at": "2021-12-03T11:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530990",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dimpase](#comment:8):
> Replying to [@mkoeppe](#comment:7):
> > What is the tarball doing on [GitHub](../wiki/GitHub)? 
> > Is it not supposed to be on CTAN (https://ctan.org/pkg/sagetex?lang=en) or on PyPI?

> 
> there is something called sagetex.zip on CTAN - but the process of publishing there is manual, and I have not put this there yet.
> 
> And I don't know anything about PyPI publishing.

The package's Python code (apart from setup.py) is generated by TeX from a .dtx file.
Anyhow, I tried  uploading its Makefile-created tarball (one used by Sage) anf got

```
$ twine upload  dist/*
Uploading distributions to https://upload.pypi.org/legacy/
Uploading sagetex-3.6.tar.gz
100%|████████████████████████| 71.0k/71.0k [00:00<00:00, 73.0kB/s]
Error during upload. Retry with the --verbose option for more details.
HTTPError: 400 Bad Request from https://upload.pypi.org/legacy/
The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.
```

Perhaps some metadata is missing, I don't know. There is no sagetex project on PyPI as far as I can tell.

Let's get this in as is, and deal with a better distribution mechanism later.



---

archive/issue_comments_530991.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIs sagetex actually used by sage? TBH I've managed to avoid it until now.",
    "created_at": "2021-12-05T21:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530991",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:17" align="right">comment:17</div>

Is sagetex actually used by sage? TBH I've managed to avoid it until now.



---

archive/issue_comments_530992.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNo, sagetex is a !Sage/Latex package.\nIt's hard to spin it off, cause as a Python package, almost all of it is generated by running TeX on a .dtx file.",
    "created_at": "2021-12-05T22:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530992",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

No, sagetex is a !Sage/Latex package.
It's hard to spin it off, cause as a Python package, almost all of it is generated by running TeX on a .dtx file.



---

archive/issue_comments_530993.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOk, I see what's happening. Sage needs the python bits installed before the user can use the latex package. Earlier I was wondering why we install this into sage at all, as opposed to just installing it as a latex package. Still, I think it should be optional.\n\nI'll test it out when I get a chance.",
    "created_at": "2021-12-05T23:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530993",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:19" align="right">comment:19</div>

Ok, I see what's happening. Sage needs the python bits installed before the user can use the latex package. Earlier I was wondering why we install this into sage at all, as opposed to just installing it as a latex package. Still, I think it should be optional.

I'll test it out when I get a chance.



---

archive/issue_events_452699.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-06T18:50:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452699"
}
```



---

archive/issue_events_452700.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-06T18:50:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452700"
}
```



---

archive/issue_comments_530994.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis version is still not on CTAN.",
    "created_at": "2021-12-06T18:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530994",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

This version is still not on CTAN.



---

archive/issue_events_452701.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-06T19:56:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452701"
}
```



---

archive/issue_events_452702.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-06T19:56:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452702"
}
```



---

archive/issue_comments_530995.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWe do it in lockstep. I don't want to put anything on CTAN ahead of the update here.\n\n(CTAN updates are pretty quick)",
    "created_at": "2021-12-06T19:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530995",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

We do it in lockstep. I don't want to put anything on CTAN ahead of the update here.

(CTAN updates are pretty quick)



---

archive/issue_comments_530996.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nDoes sagetex do anything that depends on the version of Sage?\n\nAs far as I can see, it imports nothing from the Sage library and only runs whatever `sage` can be found on PATH (or what is provided using the ``--sage`` option).",
    "created_at": "2021-12-06T20:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530996",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Does sagetex do anything that depends on the version of Sage?

As far as I can see, it imports nothing from the Sage library and only runs whatever `sage` can be found on PATH (or what is provided using the ``--sage`` option).



---

archive/issue_comments_530997.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nItself it does not, but examples and docs do import stuff from Sage. Also, there is a version check: see #8035 (Sage \"knows\" the version of sagetex it should be using). Maybe it's obsolete.",
    "created_at": "2021-12-06T20:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530997",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Itself it does not, but examples and docs do import stuff from Sage. Also, there is a version check: see #8035 (Sage "knows" the version of sagetex it should be using). Maybe it's obsolete.



---

archive/issue_comments_530998.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> Itself it does not, but examples and docs do import stuff from Sage. Also, there is a version check: see #8035 (Sage \"knows\" the version of sagetex it should be using). \n\nThat was what I referred to above.\n> Maybe it's obsolete.\n\nThat is possible; no one has checked that out recently.  It would definitely be worth knowing if we could get rid of that requirement (see point 2 in [HACKING.md](https://github.com/sagemath/sagetex/blob/master/HACKING.md)).\n\nThe idea (Dan called it \"one of the biggest problems with SageTeX\") was that if you have the wrong style file, bad things might happen.  Presumably some of those bad things would be different behavior of certain (ST) commands, or some not working at all?  Cc:ing John, who originally suggested this [here](https://github.com/sagemath/sage/issues/7617#comment:21) a dozen years ago; I never had that experience personally, but I don't use all the advanced capabilities of ST either.",
    "created_at": "2021-12-06T21:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530998",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

> Itself it does not, but examples and docs do import stuff from Sage. Also, there is a version check: see #8035 (Sage "knows" the version of sagetex it should be using). 

That was what I referred to above.
> Maybe it's obsolete.

That is possible; no one has checked that out recently.  It would definitely be worth knowing if we could get rid of that requirement (see point 2 in [HACKING.md](https://github.com/sagemath/sagetex/blob/master/HACKING.md)).

The idea (Dan called it "one of the biggest problems with SageTeX") was that if you have the wrong style file, bad things might happen.  Presumably some of those bad things would be different behavior of certain (ST) commands, or some not working at all?  Cc:ing John, who originally suggested this [here](https://github.com/sagemath/sage/issues/7617#comment:21) a dozen years ago; I never had that experience personally, but I don't use all the advanced capabilities of ST either.



---

archive/issue_comments_530999.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nBy the way, the information in https://doc.sagemath.org/html/en/tutorial/sagetex.html about the location of `sagetex` is out of date: it should say `SAGEROOT/venv/share/texmf/tex/latex/sagetex/`, and this occurs in several places.",
    "created_at": "2021-12-06T21:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-530999",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">comment:25</div>

By the way, the information in https://doc.sagemath.org/html/en/tutorial/sagetex.html about the location of `sagetex` is out of date: it should say `SAGEROOT/venv/share/texmf/tex/latex/sagetex/`, and this occurs in several places.



---

archive/issue_comments_531000.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)** to **[u/jhpalmieri/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/sagetex/v3.6)**",
    "created_at": "2021-12-06T23:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531000",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)** to **[u/jhpalmieri/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/sagetex/v3.6)**



---

archive/issue_comments_531001.json:
```json
{
    "body": "Changed commit from **[`180f8a1`](https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374)** to **[`48f33a2`](https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2)**",
    "created_at": "2021-12-06T23:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531001",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`180f8a1`](https://github.com/sagemath/sagetrac-mirror/commit/180f8a16ab5f0717b1957b75f2b5219673a67374)** to **[`48f33a2`](https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2)**



---

archive/issue_comments_531002.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI don't have time to think about any of this deeply, but here are changes to the location of the `sagetex` installation in the Sage tree. `git grep \"local/share.*sagetex\" .` found no more hits.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2\">48f33a2</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr></table>\n",
    "created_at": "2021-12-06T23:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531002",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

I don't have time to think about any of this deeply, but here are changes to the location of the `sagetex` installation in the Sage tree. `git grep "local/share.*sagetex" .` found no more hits.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2">48f33a2</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr></table>




---

archive/issue_comments_531003.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWith both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.",
    "created_at": "2021-12-06T23:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531003",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

With both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.



---

archive/issue_comments_531004.json:
```json
{
    "body": "Attachment: **[sagetex-3.6.log](https://github.com/sagemath/sage/files/ticket32887/sagetex-3.6.log)**",
    "created_at": "2021-12-06T23:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531004",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[sagetex-3.6.log](https://github.com/sagemath/sage/files/ticket32887/sagetex-3.6.log)**



---

archive/issue_comments_531005.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jhpalmieri](#comment:28):\n> With both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.\n\nYou are running a development version of TeX:\n\n```\npdfTeX 3.141592653-2.6-1.40.23 (TeX Live 2022/dev)\n...\nLaTeX2e <2021-11-15>\nL3 programming layer <2021-11-12>\n(/usr/local/texlive/2021/texmf-dist/tex/latex/base/article.cls\n...\n```\n\nI can't reproduce your error (which is probably about broken/improved(?) TeXLive `xcolor` package):\n\n```\n[11] (/usr/local/texlive/2021/texmf-dist/tex/latex/listings/lstlang1.sty)\n(./sagetex.sagetex.scmd\nconsecutive:\n\n! Package xcolor Error: Undefined color `dbluecolor'.\n\nSee the xcolor package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n```\n\nI'm running a 2020/21 stable version, and where you got your error I see warnings like\n\n```\nPackage xcolor Warning: Incompatible color definition on input line 3.\n...\n```\n\nThese color definitions there are very old, from 2010 or so.\n\nPerhaps something has changed in xcolor. I'll get back to this tomorrow...",
    "created_at": "2021-12-07T00:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531005",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jhpalmieri](#comment:28):
> With both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.

You are running a development version of TeX:

```
pdfTeX 3.141592653-2.6-1.40.23 (TeX Live 2022/dev)
...
LaTeX2e <2021-11-15>
L3 programming layer <2021-11-12>
(/usr/local/texlive/2021/texmf-dist/tex/latex/base/article.cls
...
```

I can't reproduce your error (which is probably about broken/improved(?) TeXLive `xcolor` package):

```
[11] (/usr/local/texlive/2021/texmf-dist/tex/latex/listings/lstlang1.sty)
(./sagetex.sagetex.scmd
consecutive:

! Package xcolor Error: Undefined color `dbluecolor'.

See the xcolor package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
```

I'm running a 2020/21 stable version, and where you got your error I see warnings like

```
Package xcolor Warning: Incompatible color definition on input line 3.
...
```

These color definitions there are very old, from 2010 or so.

Perhaps something has changed in xcolor. I'll get back to this tomorrow...



---

archive/issue_comments_531006.json:
```json
{
    "body": "Work Issues: **local->venv in the spkg**",
    "created_at": "2021-12-07T00:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531006",
    "user": "https://github.com/dimpase"
}
```

Work Issues: **local->venv in the spkg**



---

archive/issue_comments_531007.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jhpalmieri](#comment:27):\n> I don't have time to think about any of this deeply, but here are changes to the location of the `sagetex` installation in the Sage tree. `git grep \"local/share.*sagetex\" .` found no more hits.\n> \n> ---\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2\">48f33a2</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr></table>\n\nOh, OK, there is at least one such place in the package itself, should be fixed too.",
    "created_at": "2021-12-07T00:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531007",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jhpalmieri](#comment:27):
> I don't have time to think about any of this deeply, but here are changes to the location of the `sagetex` installation in the Sage tree. `git grep "local/share.*sagetex" .` found no more hits.
> 
> ---
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2">48f33a2</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr></table>

Oh, OK, there is at least one such place in the package itself, should be fixed too.



---

archive/issue_events_452703.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-07T00:22:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452703"
}
```



---

archive/issue_events_452704.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-07T00:22:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452704"
}
```



---

archive/issue_comments_531008.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nInstead of linking to a private path that will change every once in a while, maybe we should just link to the CTAN for the PDF docs?\n\nIf we're uploading to CTAN again, is the advice at the end of the tutorial (avoiding the texlive copy of sagetex) obsolete now? The suggested method of making sagetex visible to latex also gives remarkably bad advice, but I suppose we don't have to fix all of this stuff before doing the upgrade.",
    "created_at": "2021-12-07T00:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531008",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">comment:31</div>

Instead of linking to a private path that will change every once in a while, maybe we should just link to the CTAN for the PDF docs?

If we're uploading to CTAN again, is the advice at the end of the tutorial (avoiding the texlive copy of sagetex) obsolete now? The suggested method of making sagetex visible to latex also gives remarkably bad advice, but I suppose we don't have to fix all of this stuff before doing the upgrade.



---

archive/issue_comments_531009.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFor reference, https://tug.org/texlive/pkgcontrib.html#exec gives guidance how to prepare a TeX package with executable scripts.",
    "created_at": "2021-12-07T01:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531009",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

For reference, https://tug.org/texlive/pkgcontrib.html#exec gives guidance how to prepare a TeX package with executable scripts.



---

archive/issue_comments_531010.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@dimpase](#comment:29):\n> Replying to [@jhpalmieri](#comment:28):\n> > With both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.\n\n> \n> You are running a development version of TeX:\n\nStrange, I wonder why. On another machine, tests pass.",
    "created_at": "2021-12-07T04:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531010",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@dimpase](#comment:29):
> Replying to [@jhpalmieri](#comment:28):
> > With both the old and the new versions of `sagetex`, `./sage -f -c sagetex` fails the testsuite. Log uploaded.

> 
> You are running a development version of TeX:

Strange, I wonder why. On another machine, tests pass.



---

archive/issue_comments_531011.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nthe color warning vs error in [comment:29](#comment:29) comes from `xcolor` (the warning, for sure). `xcolor` manual says:\n\n```\nNote that whenever a color is used that has been defined via color\u2019s \\definecolor\ncommand rather than xcolor\u2019s new \\definecolor and friends, a warning message\n\u2018Incompatible color definition\u2019 will be issued.\n```\nAs `tikz` loads `xcolor` anyway, perhaps we should just use it.",
    "created_at": "2021-12-07T13:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531011",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

the color warning vs error in [comment:29](#comment:29) comes from `xcolor` (the warning, for sure). `xcolor` manual says:

```
Note that whenever a color is used that has been defined via color’s \definecolor
command rather than xcolor’s new \definecolor and friends, a warning message
‘Incompatible color definition’ will be issued.
```
As `tikz` loads `xcolor` anyway, perhaps we should just use it.



---

archive/issue_comments_531012.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThe following patch to sagetex removes the warning for me (checked with the current xcolor version 2021/10/31, as well as the previous one, from 2016).\n\nJohn, does it fix the error on your development TeXLive machine?\n\n```diff\n--- a/py-and-sty.dtx\n+++ b/py-and-sty.dtx\n@@ -29,7 +29,7 @@\n % and |listings| for the |sagecommandline| environment.\n %    \\begin{macrocode}\n \\RequirePackage{listings}\n-\\RequirePackage{color}\n+\\RequirePackage{xcolor}\n \\lstdefinelanguage{Sage}[]{Python}\n   {morekeywords={False,sage,True},sensitive=true}\n \\lstdefinelanguage{SageOutput}[]{}\n@@ -68,9 +68,9 @@\n \\lstdefinestyle{SageOutput}{\n   style=DefaultSageOutput,\n }\n-\\definecolor{dbluecolor}{rgb}{0.01,0.02,0.7}\n-\\definecolor{dgreencolor}{rgb}{0.2,0.4,0.0}\n-\\definecolor{dgraycolor}{rgb}{0.30,0.3,0.30}\n+\\providecolor{dbluecolor}{rgb}{0.01,0.02,0.7}\n+\\providecolor{dgreencolor}{rgb}{0.2,0.4,0.0}\n+\\providecolor{dgraycolor}{rgb}{0.30,0.3,0.30}\n %    \\end{macrocode}\n % Unsurprisingly, the |\\sageplot| command works poorly without graphics\n % support.\n```",
    "created_at": "2021-12-07T14:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531012",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

The following patch to sagetex removes the warning for me (checked with the current xcolor version 2021/10/31, as well as the previous one, from 2016).

John, does it fix the error on your development TeXLive machine?

```diff
--- a/py-and-sty.dtx
+++ b/py-and-sty.dtx
@@ -29,7 +29,7 @@
 % and |listings| for the |sagecommandline| environment.
 %    \begin{macrocode}
 \RequirePackage{listings}
-\RequirePackage{color}
+\RequirePackage{xcolor}
 \lstdefinelanguage{Sage}[]{Python}
   {morekeywords={False,sage,True},sensitive=true}
 \lstdefinelanguage{SageOutput}[]{}
@@ -68,9 +68,9 @@
 \lstdefinestyle{SageOutput}{
   style=DefaultSageOutput,
 }
-\definecolor{dbluecolor}{rgb}{0.01,0.02,0.7}
-\definecolor{dgreencolor}{rgb}{0.2,0.4,0.0}
-\definecolor{dgraycolor}{rgb}{0.30,0.3,0.30}
+\providecolor{dbluecolor}{rgb}{0.01,0.02,0.7}
+\providecolor{dgreencolor}{rgb}{0.2,0.4,0.0}
+\providecolor{dgraycolor}{rgb}{0.30,0.3,0.30}
 %    \end{macrocode}
 % Unsurprisingly, the |\sageplot| command works poorly without graphics
 % support.
```



---

archive/issue_comments_531013.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/sagetex/v3.6)** to **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)**",
    "created_at": "2021-12-07T17:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531013",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/jhpalmieri/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/sagetex/v3.6)** to **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)**



---

archive/issue_comments_531014.json:
```json
{
    "body": "Changed commit from **[`48f33a2`](https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2)** to **[`b6ba36a`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa)**",
    "created_at": "2021-12-07T17:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531014",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`48f33a2`](https://github.com/sagemath/sagetrac-mirror/commit/48f33a281998753d3a369a2823fd6a620b8a64d2)** to **[`b6ba36a`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa)**



---

archive/issue_comments_531015.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nthis is the fixed v3.6.\n\nOne still has to deal with [comment:31](#comment:31)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa\">b6ba36a</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>\n",
    "created_at": "2021-12-07T17:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531015",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

this is the fixed v3.6.

One still has to deal with [comment:31](#comment:31)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa">b6ba36a</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>




---

archive/issue_comments_531016.json:
```json
{
    "body": "Changed commit from **[`b6ba36a`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa)** to **[`2cd5b89`](https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb)**",
    "created_at": "2021-12-07T17:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6ba36a`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba36add6d6f430d5de5fee187f554d0479f0aa)** to **[`2cd5b89`](https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb)**



---

archive/issue_comments_531017.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df57cffa0fc72e51bfce30ab0a949fb6836f802b\">df57cff</a></td><td><code>update sagetex to version 3.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/005e44379ec1eabfa7267acd3787b62fa0c9eb4a\">005e443</a></td><td><code>correct version in setup.py, and deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab7aea47f249047ef1f63cf7246d1bcbdac00218\">ab7aea4</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb\">2cd5b89</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>\n",
    "created_at": "2021-12-07T17:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df57cffa0fc72e51bfce30ab0a949fb6836f802b">df57cff</a></td><td><code>update sagetex to version 3.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/005e44379ec1eabfa7267acd3787b62fa0c9eb4a">005e443</a></td><td><code>correct version in setup.py, and deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab7aea47f249047ef1f63cf7246d1bcbdac00218">ab7aea4</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb">2cd5b89</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>




---

archive/issue_comments_531018.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nrebased over latest beta",
    "created_at": "2021-12-07T17:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531018",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

rebased over latest beta



---

archive/issue_comments_531019.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThat `build/pkgs/sagetex/install-requires.txt` exists (which triggers installation in `SAGE_VENV` instead of `SAGE_LOCAL`) is a mistake introduced in #30719. `sagetex` does not exist on PyPI, so the contents of `install-requires.txt` are wrong.\n\nOverall, I'm skeptical about treating sagetex as a Python package.\nAs the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. So I would suggest to refocus sagetex as a TeX package and consider CTAN and texlive as the main distribution strategy. Python is merely used as a scripting language.\n\nThe section https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex should just be moved to the sagetex README.\n\nI would think that `sagetex` works with any version of Sage released in the past 5 years at least. This compatibility should probably be documented in sagetex.\n\n\n(Disclaimer: I have never used sagetex and don't plan to use it.)",
    "created_at": "2021-12-07T18:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531019",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

That `build/pkgs/sagetex/install-requires.txt` exists (which triggers installation in `SAGE_VENV` instead of `SAGE_LOCAL`) is a mistake introduced in #30719. `sagetex` does not exist on PyPI, so the contents of `install-requires.txt` are wrong.

Overall, I'm skeptical about treating sagetex as a Python package.
As the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. So I would suggest to refocus sagetex as a TeX package and consider CTAN and texlive as the main distribution strategy. Python is merely used as a scripting language.

The section https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex should just be moved to the sagetex README.

I would think that `sagetex` works with any version of Sage released in the past 5 years at least. This compatibility should probably be documented in sagetex.


(Disclaimer: I have never used sagetex and don't plan to use it.)



---

archive/issue_comments_531020.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nIf it gets installed in SAGE_LOCAL, then my changes to the documentation need to be reverted.",
    "created_at": "2021-12-07T19:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531020",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">comment:40</div>

If it gets installed in SAGE_LOCAL, then my changes to the documentation need to be reverted.



---

archive/issue_comments_531021.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe new version doesn't build for me:\n\n```\n[sagetex-3.6]   error: can't copy 'sagetex.pdf': doesn't exist or not a regular file\n```\nand indeed that file is missing from the tarball.",
    "created_at": "2021-12-07T19:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531021",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

The new version doesn't build for me:

```
[sagetex-3.6]   error: can't copy 'sagetex.pdf': doesn't exist or not a regular file
```
and indeed that file is missing from the tarball.



---

archive/issue_comments_531022.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nIf I add the missing pdf files and rebuild the tarball, then the test suite passes with this dev version of TeX.",
    "created_at": "2021-12-07T19:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531022",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">comment:42</div>

If I add the missing pdf files and rebuild the tarball, then the test suite passes with this dev version of TeX.



---

archive/issue_comments_531023.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@mkoeppe](#comment:39):\n> That `build/pkgs/sagetex/install-requires.txt` exists (which triggers installation in `SAGE_VENV` instead of `SAGE_LOCAL`) is a mistake introduced in #30719. `sagetex` does not exist on PyPI, so the contents of `install-requires.txt` are wrong.\n\ndo you understand the error I get while trying to upload sagetex on PyPI?\n\n```\n$ twine upload dist/* --verbose\nUsing configuration from /home/dima/.pypirc\nUploading distributions to https://upload.pypi.org/legacy/\n  dist/sagetex-3.6-py3-none-any.whl (834.0 KB)\n  dist/sagetex-3.6.tar.gz (816.7 KB)\nusername set from config file\npassword set from config file\nusername: __token__\npassword: <hidden>\nUploading sagetex-3.6-py3-none-any.whl\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 837k/837k [00:01<00:00, 644kB/s]\nContent received from server:\n<html>\n <head>\n  <title>400 The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.</title>\n </head>\n <body>\n  <h1>400 The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.</h1>\n  The server could not comply with the request since it is either malformed or otherwise incorrect.<br/><br/>\nThe name &#x27;sagetex&#x27; isn&#x27;t allowed. See https://pypi.org/help/#project-name for more information.\n\n\n </body>\n</html>\nHTTPError: 400 Bad Request from https://upload.pypi.org/legacy/\nThe name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.\n```\nIs it a metadata error, or indeed somehow the name is \"reserved\"?\n> \n> Overall, I'm skeptical about treating sagetex as a Python package.\n> As the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. \n\nIf SageTeX (ctan package) is installed and has right version (assuming we drop the version check)\nthen no manual action is needed.\n\nElse, one needs to `export TEXINPUTS=\"SAGE_ROOT/venv/share/texmf//:$TEXINPUTS\"`\nwhich is obviously scriptable.",
    "created_at": "2021-12-07T21:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531023",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@mkoeppe](#comment:39):
> That `build/pkgs/sagetex/install-requires.txt` exists (which triggers installation in `SAGE_VENV` instead of `SAGE_LOCAL`) is a mistake introduced in #30719. `sagetex` does not exist on PyPI, so the contents of `install-requires.txt` are wrong.

do you understand the error I get while trying to upload sagetex on PyPI?

```
$ twine upload dist/* --verbose
Using configuration from /home/dima/.pypirc
Uploading distributions to https://upload.pypi.org/legacy/
  dist/sagetex-3.6-py3-none-any.whl (834.0 KB)
  dist/sagetex-3.6.tar.gz (816.7 KB)
username set from config file
password set from config file
username: __token__
password: <hidden>
Uploading sagetex-3.6-py3-none-any.whl
100%|██████████████████████████████████████████████████████████████████████████████████████████████| 837k/837k [00:01<00:00, 644kB/s]
Content received from server:
<html>
 <head>
  <title>400 The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.</title>
 </head>
 <body>
  <h1>400 The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.</h1>
  The server could not comply with the request since it is either malformed or otherwise incorrect.<br/><br/>
The name &#x27;sagetex&#x27; isn&#x27;t allowed. See https://pypi.org/help/#project-name for more information.


 </body>
</html>
HTTPError: 400 Bad Request from https://upload.pypi.org/legacy/
The name 'sagetex' isn't allowed. See https://pypi.org/help/#project-name for more information.
```
Is it a metadata error, or indeed somehow the name is "reserved"?
> 
> Overall, I'm skeptical about treating sagetex as a Python package.
> As the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. 

If SageTeX (ctan package) is installed and has right version (assuming we drop the version check)
then no manual action is needed.

Else, one needs to `export TEXINPUTS="SAGE_ROOT/venv/share/texmf//:$TEXINPUTS"`
which is obviously scriptable.



---

archive/issue_comments_531024.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@mkoeppe](#comment:39):\n> \n> Overall, I'm skeptical about treating sagetex as a Python package.\n> As the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. So I would suggest to refocus sagetex as a TeX package and consider CTAN and texlive as the main distribution strategy. Python is merely used as a scripting language.\n> \n\nAlas. When you run pdflatex on your latex document, no computation is done. Instead it outputs a `.sage` file, and you have to stop what you're doing, run the `.sage` file (with sage), and then go back and re-run pdflatex some more.\n\nThe first few lines of that `.sage` file are...\n\n\n```python\n## -*- encoding: utf-8 -*-\n## This file (my.sagetex.sage) was *autogenerated* from my.tex with sagetex.sty version 2020/08/12 v3.5.\nimport sagetex\n```\n\nSo, the \"latex package\" actually requires some special python bits to be installed and visible to sage. That's why it's probably better to have this be a python package that installs some latex bits rather than a latex package that installs some python bits.",
    "created_at": "2021-12-07T23:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531024",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@mkoeppe](#comment:39):
> 
> Overall, I'm skeptical about treating sagetex as a Python package.
> As the instructions in https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex show, after installing it with pip (or Sage package), still manual installation work is needed for the TeX style files. So I would suggest to refocus sagetex as a TeX package and consider CTAN and texlive as the main distribution strategy. Python is merely used as a scripting language.
> 

Alas. When you run pdflatex on your latex document, no computation is done. Instead it outputs a `.sage` file, and you have to stop what you're doing, run the `.sage` file (with sage), and then go back and re-run pdflatex some more.

The first few lines of that `.sage` file are...


```python
## -*- encoding: utf-8 -*-
## This file (my.sagetex.sage) was *autogenerated* from my.tex with sagetex.sty version 2020/08/12 v3.5.
import sagetex
```

So, the "latex package" actually requires some special python bits to be installed and visible to sage. That's why it's probably better to have this be a python package that installs some latex bits rather than a latex package that installs some python bits.



---

archive/issue_comments_531025.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI see, thanks for the explanation, I missed this when I looked at the package.",
    "created_at": "2021-12-08T00:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531025",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

I see, thanks for the explanation, I missed this when I looked at the package.



---

archive/issue_comments_531026.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI opened https://github.com/pypa/pypi-support/issues/1516\nto possibly release `sagetex` for our use.",
    "created_at": "2021-12-08T00:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531026",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

I opened https://github.com/pypa/pypi-support/issues/1516
to possibly release `sagetex` for our use.



---

archive/issue_comments_531027.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI am able to put sagetex to testpypi: https://test.pypi.org/project/sagetex/3.6\n\nCan Sage use more than one PyPI repository?",
    "created_at": "2021-12-08T23:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531027",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

I am able to put sagetex to testpypi: https://test.pypi.org/project/sagetex/3.6

Can Sage use more than one PyPI repository?



---

archive/issue_events_452705.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-10T22:03:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452705"
}
```



---

archive/issue_events_452706.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-10T22:03:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452706"
}
```



---

archive/issue_comments_531028.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nOK, I have a working prototype, which invokes either `ninja` or `make` from within `setup.py`.\n\n1) If we use `make`, which is OK for building from source, but not so for modularisation, then there is no pressing need to work on #32992 \n\n2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).\n\nPlease tell me whether should we do 1) or 2) here.",
    "created_at": "2021-12-10T22:03:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531028",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

OK, I have a working prototype, which invokes either `ninja` or `make` from within `setup.py`.

1) If we use `make`, which is OK for building from source, but not so for modularisation, then there is no pressing need to work on #32992 

2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).

Please tell me whether should we do 1) or 2) here.



---

archive/issue_comments_531029.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nWhat do you use these build systems for? There is nothing to be built",
    "created_at": "2021-12-10T22:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531029",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

What do you use these build systems for? There is nothing to be built



---

archive/issue_comments_531030.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nWell, we build Python modules and scripts from TeX .dtx files. And then we build documentation of `sagetex` using `sagetex`.",
    "created_at": "2021-12-10T22:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531030",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

Well, we build Python modules and scripts from TeX .dtx files. And then we build documentation of `sagetex` using `sagetex`.



---

archive/issue_comments_531031.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@dimpase](#comment:48):\n> \n> 2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).\n\nIt's not really a python package, someone just uploaded a bunch of exe files to PyPI.",
    "created_at": "2021-12-10T22:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531031",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@dimpase](#comment:48):
> 
> 2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).

It's not really a python package, someone just uploaded a bunch of exe files to PyPI.



---

archive/issue_comments_531032.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@orlitzky](#comment:51):\n> Replying to [@dimpase](#comment:48):\n> > \n> > 2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).\n\n> \n> It's not really a python package, someone just uploaded a bunch of exe files to PyPI.\n\nNo. It is a Python package all right nowadays. In my updated `setup.py` I do\n\n```\n...\nimport ninja\n\nclass pre_develop(develop):\n    \"\"\"Pre-installation for development mode.\"\"\"\n    def run(self):\n        ninja.subprocess.run(['ninja'],check=True)\n        develop.run(self)\n...\n```\nand I have `pyproject.toml` that says\n\n```\n[build-system]\nrequires = [\"setuptools\", \"wheel\", \"ninja\"]\nbuild-backend = \"setuptools.build_meta\"\n```",
    "created_at": "2021-12-10T22:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531032",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@orlitzky](#comment:51):
> Replying to [@dimpase](#comment:48):
> > 
> > 2) if we use `ninja`, then it's more work, but we get a more modular setup, as `ninja` is a Python package, and can be listed as a dependency in a Pythonic way - then we need #32992 (which would make `ninja` a proper Python package, and promote it to `standard`).

> 
> It's not really a python package, someone just uploaded a bunch of exe files to PyPI.

No. It is a Python package all right nowadays. In my updated `setup.py` I do

```
...
import ninja

class pre_develop(develop):
    """Pre-installation for development mode."""
    def run(self):
        ninja.subprocess.run(['ninja'],check=True)
        develop.run(self)
...
```
and I have `pyproject.toml` that says

```
[build-system]
requires = ["setuptools", "wheel", "ninja"]
build-backend = "setuptools.build_meta"
```



---

archive/issue_comments_531033.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nWhat I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).\n\nWith `sagetex 3.5`, I only get a zombie process from `SAGE_CHECK=yes make sagetex`, but not from `make sagetex` without `SAGE_CHECK=yes`, so this is a regression, but the problem is apparently already there in 3.5. (Invoking `sage` from a script, I guess?)",
    "created_at": "2021-12-10T22:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531033",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">comment:53</div>

What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).

With `sagetex 3.5`, I only get a zombie process from `SAGE_CHECK=yes make sagetex`, but not from `make sagetex` without `SAGE_CHECK=yes`, so this is a regression, but the problem is apparently already there in 3.5. (Invoking `sage` from a script, I guess?)



---

archive/issue_comments_531034.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\n> What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).\n\nMaybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.",
    "created_at": "2021-12-11T02:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531034",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:54" align="right">comment:54</div>

> What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).

Maybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.



---

archive/issue_comments_531035.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@dimpase](#comment:52):\n> > \n> > It's not really a python package, someone just uploaded a bunch of exe files to PyPI.\n\n> \n> No. It is a Python package all right nowadays. In my updated `setup.py` I do\n> \n> ```\n> ...\n> import ninja\n> \n> ```\n>         ninja.subprocess.run(['ninja'],check=True)\n\n>}}}\n\nThe pre-built \"ninja\" executable is zipped into the whl as `data/bin/ninja`. That python module is a small wrapper to make that executable runnable without knowing where it was installed to.\n\nSince sagetex can't be used without sage, and since sage and POSIX both require Make, I think Make is the better option.  Neither Make nor ninja can truly be installed with pip, and Make should already be there.",
    "created_at": "2021-12-12T02:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531035",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@dimpase](#comment:52):
> > 
> > It's not really a python package, someone just uploaded a bunch of exe files to PyPI.

> 
> No. It is a Python package all right nowadays. In my updated `setup.py` I do
> 
> ```
> ...
> import ninja
> 
> ```
>         ninja.subprocess.run(['ninja'],check=True)

>}}}

The pre-built "ninja" executable is zipped into the whl as `data/bin/ninja`. That python module is a small wrapper to make that executable runnable without knowing where it was installed to.

Since sagetex can't be used without sage, and since sage and POSIX both require Make, I think Make is the better option.  Neither Make nor ninja can truly be installed with pip, and Make should already be there.



---

archive/issue_comments_531036.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@orlitzky](#comment:55):\n> Replying to [@dimpase](#comment:52):\n> > > \n> > > It's not really a python package, someone just uploaded a bunch of exe files to PyPI.\n\n> > \n> > No. It is a Python package all right nowadays. In my updated `setup.py` I do\n> > \n> > ```\n> > ...\n> > import ninja\n> > \n> > ```\n> >         ninja.subprocess.run(['ninja'],check=True)\n\n> >}}}\n\n> \n> The pre-built \"ninja\" executable is zipped into the whl as `data/bin/ninja`. That python module is a small wrapper to make that executable runnable without knowing where it was installed to.\n\nSo what, are you surprised? It's most probably exactly how is should be down in that gehakte tsores (aka Python wheels) format.\n\nIt might be instructive to look at ninja package source. It has a cmake file, used by\na Python package `scikit-build`: https://scikit-build.readthedocs.io/en/latest/index.html, which lets you in run `cmake` from `setup.py`.\nAs you can see in `pyproject.toml`    \n\n```\n[build-system]\nrequires = [\n    \"setuptools>=42\",\n    \"wheel\",\n    \"scikit-build>=0.12\",\n]...\n```\n> \n> Since sagetex can't be used without sage, and since sage and POSIX both require Make, I think Make is the better option.  Neither Make nor ninja can truly be installed with pip, and Make should already be there.\n\n`Make`, I don't know. But `ninja` - yes, it can. Even on, yes, Windows :-)\n\nIn a modular world, with Sage installed from wheels, it's not inconsievable to have no Make around. But yes, ninja is there. \n\nAnyhow, updating our ninja to be able to do this will need `scikit-build` as a dependency, and to speed up this ticket let's stick to `make` for the time being.",
    "created_at": "2021-12-12T09:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531036",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@orlitzky](#comment:55):
> Replying to [@dimpase](#comment:52):
> > > 
> > > It's not really a python package, someone just uploaded a bunch of exe files to PyPI.

> > 
> > No. It is a Python package all right nowadays. In my updated `setup.py` I do
> > 
> > ```
> > ...
> > import ninja
> > 
> > ```
> >         ninja.subprocess.run(['ninja'],check=True)

> >}}}

> 
> The pre-built "ninja" executable is zipped into the whl as `data/bin/ninja`. That python module is a small wrapper to make that executable runnable without knowing where it was installed to.

So what, are you surprised? It's most probably exactly how is should be down in that gehakte tsores (aka Python wheels) format.

It might be instructive to look at ninja package source. It has a cmake file, used by
a Python package `scikit-build`: https://scikit-build.readthedocs.io/en/latest/index.html, which lets you in run `cmake` from `setup.py`.
As you can see in `pyproject.toml`    

```
[build-system]
requires = [
    "setuptools>=42",
    "wheel",
    "scikit-build>=0.12",
]...
```
> 
> Since sagetex can't be used without sage, and since sage and POSIX both require Make, I think Make is the better option.  Neither Make nor ninja can truly be installed with pip, and Make should already be there.

`Make`, I don't know. But `ninja` - yes, it can. Even on, yes, Windows :-)

In a modular world, with Sage installed from wheels, it's not inconsievable to have no Make around. But yes, ninja is there. 

Anyhow, updating our ninja to be able to do this will need `scikit-build` as a dependency, and to speed up this ticket let's stick to `make` for the time being.



---

archive/issue_comments_531037.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nDima, it's not quite clear to me what problem you are trying to solve with all this complexity. Why can the sdist not just contain the .py files?",
    "created_at": "2021-12-12T17:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531037",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Dima, it's not quite clear to me what problem you are trying to solve with all this complexity. Why can the sdist not just contain the .py files?



---

archive/issue_comments_531038.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nMost of the sources of the package are in .dtx files. Do we install from source, or not?",
    "created_at": "2021-12-12T17:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531038",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">comment:58</div>

Most of the sources of the package are in .dtx files. Do we install from source, or not?



---

archive/issue_comments_531039.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n3.5 and previous releases hackishly contained generated pdf files, which certainly have no place in a proper Python package. \n\nIn 3.6 we strive for purity. :-)",
    "created_at": "2021-12-12T18:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531039",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

3.5 and previous releases hackishly contained generated pdf files, which certainly have no place in a proper Python package. 

In 3.6 we strive for purity. :-)



---

archive/issue_comments_531040.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@dimpase](#comment:58):\n> Most of the sources of the package are in .dtx files. Do we install from source, or not?\n\nI think extracting the .py files should simply be done by developers, perhaps in a \"./bootstrap\" script before \"setup.py sdist\" is run.\n\nRegardless of the build system that you use to script it, in the end the `.dtx` is extracted by a run of `latex`. Requiring a user to have an installation of `latex` just to install the `sagetex` python scripts does not seem to be a good idea.",
    "created_at": "2021-12-12T18:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531040",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@dimpase](#comment:58):
> Most of the sources of the package are in .dtx files. Do we install from source, or not?

I think extracting the .py files should simply be done by developers, perhaps in a "./bootstrap" script before "setup.py sdist" is run.

Regardless of the build system that you use to script it, in the end the `.dtx` is extracted by a run of `latex`. Requiring a user to have an installation of `latex` just to install the `sagetex` python scripts does not seem to be a good idea.



---

archive/issue_comments_531041.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nPerhaps it would be a good idea to generate 2 separate, non-overlapping distributions from the git repository: \n\n1) The TeX package, which is to be installed on the computer that runs LaTeX. Distributed via CTAN / texlive\n\n2) The Python package, which is to be installed on the computer that runs Sage, in the virtual environment where Sage is installed. Distributed via pip.",
    "created_at": "2021-12-12T19:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531041",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Perhaps it would be a good idea to generate 2 separate, non-overlapping distributions from the git repository: 

1) The TeX package, which is to be installed on the computer that runs LaTeX. Distributed via CTAN / texlive

2) The Python package, which is to be installed on the computer that runs Sage, in the virtual environment where Sage is installed. Distributed via pip.



---

archive/issue_comments_531042.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThere in no point in installing sagetex if there is no LaTeX available.",
    "created_at": "2021-12-12T19:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531042",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:62" align="right">comment:62</div>

There in no point in installing sagetex if there is no LaTeX available.



---

archive/issue_comments_531043.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nPerhaps make installation of sagetex conditional on availability of LaTeX.",
    "created_at": "2021-12-12T19:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531043",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">comment:63</div>

Perhaps make installation of sagetex conditional on availability of LaTeX.



---

archive/issue_comments_531044.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThe Python part does not need latex.\n\nUse case: Sage runs on a server. LaTeX runs on overleaf.",
    "created_at": "2021-12-12T20:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531044",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

The Python part does not need latex.

Use case: Sage runs on a server. LaTeX runs on overleaf.



---

archive/issue_comments_531045.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@mkoeppe](#comment:64):\n> The Python part does not need latex.\n> \n> Use case: Sage runs on a server. LaTeX runs on overleaf.\n\nDoes this work? I guess not. Anyhow, installing LaTeX on a server is trivial.\n\nAnyway, the work is done already, was just asking in what way I should change 2 or 3  lines, to use either `make`, or `ninja`.\nI don't want to throw all this away and do a refactoring because you find the prsent design \"complex\". It is not complex in a true sense of this word.\n\nIt was complex for me because I didn't know how these things work. Now I know, and it's not complex, in fact. All the complexity there is due to idiotic `setuptools`refusal of having built-in pre-install hooks.",
    "created_at": "2021-12-12T20:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531045",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@mkoeppe](#comment:64):
> The Python part does not need latex.
> 
> Use case: Sage runs on a server. LaTeX runs on overleaf.

Does this work? I guess not. Anyhow, installing LaTeX on a server is trivial.

Anyway, the work is done already, was just asking in what way I should change 2 or 3  lines, to use either `make`, or `ninja`.
I don't want to throw all this away and do a refactoring because you find the prsent design "complex". It is not complex in a true sense of this word.

It was complex for me because I didn't know how these things work. Now I know, and it's not complex, in fact. All the complexity there is due to idiotic `setuptools`refusal of having built-in pre-install hooks.



---

archive/issue_comments_531046.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n-1, it does not solve any problem.\n\nThis change makes the package less pip-installable because now latex is required.",
    "created_at": "2021-12-12T20:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531046",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">comment:66</div>

-1, it does not solve any problem.

This change makes the package less pip-installable because now latex is required.



---

archive/issue_comments_531047.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nWhatever. Feel free to take over.",
    "created_at": "2021-12-12T20:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531047",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:67" align="right">comment:67</div>

Whatever. Feel free to take over.



---

archive/issue_comments_531048.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to none",
    "created_at": "2021-12-12T20:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531048",
    "user": "https://github.com/dimpase"
}
```

Changed author from **Dima Pasechnik** to none



---

archive/issue_comments_531049.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nThe problems it does solve are\n\n1) the problem of single source --- don't want unconnected versions of TeX files and Python files floating around causing trouble.\n\n2) and non-distribution of generated PDF files. Hello, distibuting PDF files? Really?",
    "created_at": "2021-12-12T21:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531049",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:68" align="right">comment:68</div>

The problems it does solve are

1) the problem of single source --- don't want unconnected versions of TeX files and Python files floating around causing trouble.

2) and non-distribution of generated PDF files. Hello, distibuting PDF files? Really?



---

archive/issue_comments_531050.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@dimpase](#comment:65):\n> `setuptools` refusal of having built-in pre-install hooks.\n\nYou only needed custom `install` and `develop` commands because you forgot to change the list of data files in the \"distribution\" in the `build` command. Take a look at the setup.py added in #29039.",
    "created_at": "2021-12-12T21:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531050",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@dimpase](#comment:65):
> `setuptools` refusal of having built-in pre-install hooks.

You only needed custom `install` and `develop` commands because you forgot to change the list of data files in the "distribution" in the `build` command. Take a look at the setup.py added in #29039.



---

archive/issue_comments_531051.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\n> The Python part does not need latex.\n> \n> Use case: Sage runs on a server. LaTeX runs on overleaf.\n\nAt least ideally, one can do the LaTeX on a separate machine from the Sage commands.  That is definitely within Dan's intended vision for SageTeX.  In practice, I think most people who have used SageTeX have ended up just installing whichever one they didn't have (which varied) on their local computer, but we have occasionally had requests for software-as-service for something along these lines, and being able to run Sage on the LaTeX-generated files on a server elsewhere from one's local computer (esp. if someone had trouble installing Sage, which has been known to happen ...) would be useful.  Having Overleaf able to call a Sage server sound cool, though i don't know if they (the OL people) would see that as a high priority ;-)\n\nFor what it's worth, similar packages in R are R packages, not TeX packages, I believe.  However, this debate has some other technical details that might override that utility in practice (e.g. `make` versus `ninja` or Python package versus TeX package).\n\nI do think that it is key for SageTeX to be \"easily accessible\" to anyone using Sage, and so I would disagree with this:\n\n> The section \u200bhttps://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex should just be moved to the sagetex README.\n\nThose instructions are easily web-discoverable, and we've certainly had plenty of questions over time asking about that process (and persevering through several false starts).  Most Sage users, especially those using it as a service in some other environment, are just downloading/using a binary and will not necessarily even know about README files; moving the style files might be the only interaction they have with the Sage file tree.",
    "created_at": "2021-12-13T13:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531051",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:70" align="right">comment:70</div>

> The Python part does not need latex.
> 
> Use case: Sage runs on a server. LaTeX runs on overleaf.

At least ideally, one can do the LaTeX on a separate machine from the Sage commands.  That is definitely within Dan's intended vision for SageTeX.  In practice, I think most people who have used SageTeX have ended up just installing whichever one they didn't have (which varied) on their local computer, but we have occasionally had requests for software-as-service for something along these lines, and being able to run Sage on the LaTeX-generated files on a server elsewhere from one's local computer (esp. if someone had trouble installing Sage, which has been known to happen ...) would be useful.  Having Overleaf able to call a Sage server sound cool, though i don't know if they (the OL people) would see that as a high priority ;-)

For what it's worth, similar packages in R are R packages, not TeX packages, I believe.  However, this debate has some other technical details that might override that utility in practice (e.g. `make` versus `ninja` or Python package versus TeX package).

I do think that it is key for SageTeX to be "easily accessible" to anyone using Sage, and so I would disagree with this:

> The section ​https://doc.sagemath.org/html/en/tutorial/sagetex.html#using-sagetex should just be moved to the sagetex README.

Those instructions are easily web-discoverable, and we've certainly had plenty of questions over time asking about that process (and persevering through several false starts).  Most Sage users, especially those using it as a service in some other environment, are just downloading/using a binary and will not necessarily even know about README files; moving the style files might be the only interaction they have with the Sage file tree.



---

archive/issue_comments_531052.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@mkoeppe](#comment:69):\n> Replying to [@dimpase](#comment:65):\n> > `setuptools` refusal of having built-in pre-install hooks.\n\n> \n> You only needed custom `install` and `develop` commands because you forgot to change the list of data files in the \"distribution\" in the `build` command. Take a look at the setup.py added in #29039.\n\nReplying to [@mkoeppe](#comment:69):\n> Replying to [@dimpase](#comment:65):\n> > `setuptools` refusal of having built-in pre-install hooks.\n\n> \n> You only needed custom `install` and `develop` commands because you forgot to change the list of data files in the \"distribution\" in the `build` command. Take a look at the setup.py added in #29039.\n\nI am not sure I understand this comment. Doing\n\n```diff\n--- a/setup.py\n+++ b/setup.py\n@@ -64,7 +64,4 @@ setup(\n          'sagetex.ins',\n          'sagetex.sty']),\n       ('', ['build.ninja']),  \n-      ('share/doc/sagetex', [\n-         'example.tex',\n-         'sagetex.pdf',\n-         'example.pdf'])])\n+      ])\n```\nhas no effect (and I'm applying this).\nRegarding `install` and `develop`, removing them results in some scripts\nno being built, for some reason (maybe due to them not being treated in pythonic way, but just via makefile rules).\n\nI tried few things, to no avail.\nPlease do a PR against https://github.com/sagemath/sagetex/tree/ninja-dev\nif you have a clear picture of how to fix this.",
    "created_at": "2021-12-13T19:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531052",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@mkoeppe](#comment:69):
> Replying to [@dimpase](#comment:65):
> > `setuptools` refusal of having built-in pre-install hooks.

> 
> You only needed custom `install` and `develop` commands because you forgot to change the list of data files in the "distribution" in the `build` command. Take a look at the setup.py added in #29039.

Replying to [@mkoeppe](#comment:69):
> Replying to [@dimpase](#comment:65):
> > `setuptools` refusal of having built-in pre-install hooks.

> 
> You only needed custom `install` and `develop` commands because you forgot to change the list of data files in the "distribution" in the `build` command. Take a look at the setup.py added in #29039.

I am not sure I understand this comment. Doing

```diff
--- a/setup.py
+++ b/setup.py
@@ -64,7 +64,4 @@ setup(
          'sagetex.ins',
          'sagetex.sty']),
       ('', ['build.ninja']),  
-      ('share/doc/sagetex', [
-         'example.tex',
-         'sagetex.pdf',
-         'example.pdf'])])
+      ])
```
has no effect (and I'm applying this).
Regarding `install` and `develop`, removing them results in some scripts
no being built, for some reason (maybe due to them not being treated in pythonic way, but just via makefile rules).

I tried few things, to no avail.
Please do a PR against https://github.com/sagemath/sagetex/tree/ninja-dev
if you have a clear picture of how to fix this.



---

archive/issue_comments_531053.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@dimpase](#comment:68):\n> 2) and non-distribution of generated PDF files. Hello, distibuting PDF files? Really?\n\nFor what it's worth, a number of Sage packages seem to include PDF files in their tarballs:\n\n```\nBabel-2.9.1.tar.gz\nR-3.6.3.tar.gz\nSphinx-4.2.0.tar.gz\nSuiteSparse-5.10.1.tar.gz\narb-2.19.0.tar.gz\nargon2-cffi-20.1.0.tar.gz\nbzip2-1.0.6-20150304.tar.gz\ncddlib-0.94m.tar.gz\ncmake-3.21.0.tar.gz\ngap-4.11.1.tar.gz\ngfan0.6.2.tar.gz\nmatplotlib-3.3.4.tar.gz\nmaxima-5.45.0.tar.gz\nnauty27r1.tar.gz\nnbconvert-6.1.0.tar.gz\nopenblas-0.3.18.tar.gz\nprimecount-7.1.tar.gz\nreadline-8.0.tar.gz\nsagetex-3.5.tar.gz\nsphinxcontrib-websupport-1.2.1.tar.gz\nxz-5.2.5.tar.gz\nzlib-1.2.11.tar.gz\ngiac-1.6.0.47p3.tar.bz2\nglpk-5.0.tar.bz2\nppl-1.2.tar.bz2\nratpoints-2.1.3.tar.bz2\ntachyon-0.98.9.tar.bz2\nnumpy-1.21.4.zip\n```\nSo while it's not a bad idea to remove PDF files from the sagetex distribution, it doesn't look (at least to me) like something that should be high priority.",
    "created_at": "2021-12-13T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531053",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@dimpase](#comment:68):
> 2) and non-distribution of generated PDF files. Hello, distibuting PDF files? Really?

For what it's worth, a number of Sage packages seem to include PDF files in their tarballs:

```
Babel-2.9.1.tar.gz
R-3.6.3.tar.gz
Sphinx-4.2.0.tar.gz
SuiteSparse-5.10.1.tar.gz
arb-2.19.0.tar.gz
argon2-cffi-20.1.0.tar.gz
bzip2-1.0.6-20150304.tar.gz
cddlib-0.94m.tar.gz
cmake-3.21.0.tar.gz
gap-4.11.1.tar.gz
gfan0.6.2.tar.gz
matplotlib-3.3.4.tar.gz
maxima-5.45.0.tar.gz
nauty27r1.tar.gz
nbconvert-6.1.0.tar.gz
openblas-0.3.18.tar.gz
primecount-7.1.tar.gz
readline-8.0.tar.gz
sagetex-3.5.tar.gz
sphinxcontrib-websupport-1.2.1.tar.gz
xz-5.2.5.tar.gz
zlib-1.2.11.tar.gz
giac-1.6.0.47p3.tar.bz2
glpk-5.0.tar.bz2
ppl-1.2.tar.bz2
ratpoints-2.1.3.tar.bz2
tachyon-0.98.9.tar.bz2
numpy-1.21.4.zip
```
So while it's not a bad idea to remove PDF files from the sagetex distribution, it doesn't look (at least to me) like something that should be high priority.



---

archive/issue_comments_531054.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@dimpase](#comment:71):\n> Please do a PR against https://github.com/sagemath/sagetex/tree/ninja-dev\n> if you have a clear picture of how to fix this.\n\nSorry, I won't work on this - the approach of requiring tooling such as `latex` (plus some build system) to be present in order to install a Python package is a dead end.",
    "created_at": "2021-12-13T20:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531054",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@dimpase](#comment:71):
> Please do a PR against https://github.com/sagemath/sagetex/tree/ninja-dev
> if you have a clear picture of how to fix this.

Sorry, I won't work on this - the approach of requiring tooling such as `latex` (plus some build system) to be present in order to install a Python package is a dead end.



---

archive/issue_comments_531055.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nsaying that using, essentially, a part of scikit-build as a building tool is \"dead end\" is, hmm, funny. \n\nscikit-build is replacing setuptools+distutils, in particular for building Python extensions, more and more.\nhttps://scikit-build.readthedocs.io/en/latest/",
    "created_at": "2021-12-13T22:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531055",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:74" align="right">comment:74</div>

saying that using, essentially, a part of scikit-build as a building tool is "dead end" is, hmm, funny. 

scikit-build is replacing setuptools+distutils, in particular for building Python extensions, more and more.
https://scikit-build.readthedocs.io/en/latest/



---

archive/issue_comments_531056.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThey are not using latex to extract files.",
    "created_at": "2021-12-13T22:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531056",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:75" align="right">comment:75</div>

They are not using latex to extract files.



---

archive/issue_comments_531057.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThey are using, you know, C compilers, cause some part of a package is written in C. Why the hell we cannot use LaTeX compilers?",
    "created_at": "2021-12-13T22:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531057",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:76" align="right">comment:76</div>

They are using, you know, C compilers, cause some part of a package is written in C. Why the hell we cannot use LaTeX compilers?



---

archive/issue_comments_531058.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@kcrisman](#comment:54):\n> > What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).\n\n> Maybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.\n\nindeed, if I get rid of that `maxima()` call in `example.tex` there are no more zombie `maxima`'s left.\nWhy is `sage-cleaner` failing to kill them?",
    "created_at": "2021-12-13T23:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531058",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@kcrisman](#comment:54):
> > What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).

> Maybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.

indeed, if I get rid of that `maxima()` call in `example.tex` there are no more zombie `maxima`'s left.
Why is `sage-cleaner` failing to kill them?



---

archive/issue_comments_531059.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@dimpase](#comment:76):\n> They are using, you know, C compilers, cause some part of a package is written in C. Why the hell we cannot use LaTeX compilers?\n\nIt sounds like you're making an argument that sagetex should become an optional package, because it is insane to add LaTeX as a requirement to build Sage just because of this one package. (MacTeX is a 4.4GB download, for example.)\n\nCan we use something like Overleaf to build the PDF files? Then systems without LaTeX could get by with internet access to build sagetex. I'm actually not sure why it's better to rebuild the PDF files on every machine rather than just building once and downloading them, though. Is it better to save a little storage and burn extra CPU cycles, or save the CPU and ship some extra files?",
    "created_at": "2021-12-14T00:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531059",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@dimpase](#comment:76):
> They are using, you know, C compilers, cause some part of a package is written in C. Why the hell we cannot use LaTeX compilers?

It sounds like you're making an argument that sagetex should become an optional package, because it is insane to add LaTeX as a requirement to build Sage just because of this one package. (MacTeX is a 4.4GB download, for example.)

Can we use something like Overleaf to build the PDF files? Then systems without LaTeX could get by with internet access to build sagetex. I'm actually not sure why it's better to rebuild the PDF files on every machine rather than just building once and downloading them, though. Is it better to save a little storage and burn extra CPU cycles, or save the CPU and ship some extra files?



---

archive/issue_comments_531060.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI'm going to add an `spkg-config.m4` which would stop sagetex from installing if no LaTeX can be found, how about this?\nThis might mean that it will become optional. Not sure at the moment how it will play with out `texlive` spkg - but see #31529.",
    "created_at": "2021-12-14T09:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531060",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:79" align="right">comment:79</div>

I'm going to add an `spkg-config.m4` which would stop sagetex from installing if no LaTeX can be found, how about this?
This might mean that it will become optional. Not sure at the moment how it will play with out `texlive` spkg - but see #31529.



---

archive/issue_comments_531061.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\n> > > What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).\n\n> > Maybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.\n\n> \n> indeed, if I get rid of that `maxima()` call in `example.tex` there are no more zombie `maxima`'s left.\n> Why is `sage-cleaner` failing to kill them? \n\nPossibly related: https://groups.google.com/g/sage-devel/c/epajAbPvg6s",
    "created_at": "2021-12-14T13:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531061",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:80" align="right">comment:80</div>

> > > What I noticed here is a zombie `maxima` process left running after `sagetex 3.6` is installed (on Debian 10).

> > Maybe from [here](https://github.com/sagemath/sagetex/blob/master/example.tex#L123)?  Because `test.sh` has `checkdotsage example`.

> 
> indeed, if I get rid of that `maxima()` call in `example.tex` there are no more zombie `maxima`'s left.
> Why is `sage-cleaner` failing to kill them? 

Possibly related: https://groups.google.com/g/sage-devel/c/epajAbPvg6s



---

archive/issue_comments_531062.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@dimpase](#comment:65):\n> Replying to [@mkoeppe](#comment:64):\n> > The Python part does not need latex.\n> > \n> > Use case: Sage runs on a server. LaTeX runs on overleaf.\n\n> \n> Does this work? I guess not. \n\nIt does because the Python part does not use latex. The Python code only uses imagemagick (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1459) and epstopdf (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1421).",
    "created_at": "2021-12-14T16:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531062",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@dimpase](#comment:65):
> Replying to [@mkoeppe](#comment:64):
> > The Python part does not need latex.
> > 
> > Use case: Sage runs on a server. LaTeX runs on overleaf.

> 
> Does this work? I guess not. 

It does because the Python part does not use latex. The Python code only uses imagemagick (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1459) and epstopdf (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1421).



---

archive/issue_comments_531063.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\n> > Does this work? I guess not. \n\n> \n> It does because the Python part does not use latex.\n\nAgain, the original vision definitely would have included this kind of use case, where one created a whole slew of the python/Sage files, processed them somewhere (batch mode?) and then used those included files.  It's not how people typically do use it, since it implies some need for efficiency of scale (and on Mac, TeXShop makes it fairly easy to have it all done in one go), but is something that there isn't any reason to remove support for.  Mostly because Sage is harder for some LaTeX users to install, not so much the other way around :)  For instance, I wonder if it would work very easily at all to do the whole thing in one shell on Windows, unless you started using WSL for everything?  Many LaTeX users on that platform only interact with it via GUI, never even realizing the depths of internal machinery involved.",
    "created_at": "2021-12-14T17:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531063",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:82" align="right">comment:82</div>

> > Does this work? I guess not. 

> 
> It does because the Python part does not use latex.

Again, the original vision definitely would have included this kind of use case, where one created a whole slew of the python/Sage files, processed them somewhere (batch mode?) and then used those included files.  It's not how people typically do use it, since it implies some need for efficiency of scale (and on Mac, TeXShop makes it fairly easy to have it all done in one go), but is something that there isn't any reason to remove support for.  Mostly because Sage is harder for some LaTeX users to install, not so much the other way around :)  For instance, I wonder if it would work very easily at all to do the whole thing in one shell on Windows, unless you started using WSL for everything?  Many LaTeX users on that platform only interact with it via GUI, never even realizing the depths of internal machinery involved.



---

archive/issue_comments_531064.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\n> It does because the Python part does not use latex. The Python code only uses imagemagick (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1459) and epstopdf (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1421).\n\nAnd I think those are run-time dependencies on a need-only basis, correct?  Does Windows have epstopdf standard (I presume not, but ...)?",
    "created_at": "2021-12-14T17:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531064",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:83" align="right">comment:83</div>

> It does because the Python part does not use latex. The Python code only uses imagemagick (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1459) and epstopdf (https://github.com/sagemath/sagetex/blob/master/py-and-sty.dtx#L1421).

And I think those are run-time dependencies on a need-only basis, correct?  Does Windows have epstopdf standard (I presume not, but ...)?



---

archive/issue_comments_531065.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@kcrisman](#comment:82):\n> I wonder if it would work very easily at all to do the whole thing in one shell on Windows, unless you started using WSL for everything?  \n\nYes, that's also a relevant use case. Sage running in WSL or Cygwin, and LaTeX done natively in Windows.",
    "created_at": "2021-12-14T17:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531065",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@kcrisman](#comment:82):
> I wonder if it would work very easily at all to do the whole thing in one shell on Windows, unless you started using WSL for everything?  

Yes, that's also a relevant use case. Sage running in WSL or Cygwin, and LaTeX done natively in Windows.



---

archive/issue_comments_531066.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nMy build process generates a wheel for the package, which, of course, contains .py files,\nand the generated scripts. It can be used for installation,\nif there is no LaTeX (or otherwise).\n\nIt doesn't contain pdf files, but that's fine IMHO.",
    "created_at": "2021-12-14T17:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531066",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:85" align="right">comment:85</div>

My build process generates a wheel for the package, which, of course, contains .py files,
and the generated scripts. It can be used for installation,
if there is no LaTeX (or otherwise).

It doesn't contain pdf files, but that's fine IMHO.



---

archive/issue_comments_531067.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nThe only complication is that one needs a replacement of `sdh_pip_install`, which 1st thing builds a wheel, but here this step should be skipped.",
    "created_at": "2021-12-14T18:15:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531067",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:86" align="right">comment:86</div>

The only complication is that one needs a replacement of `sdh_pip_install`, which 1st thing builds a wheel, but here this step should be skipped.



---

archive/issue_comments_531068.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\n-1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist.",
    "created_at": "2021-12-14T20:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531068",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:87" align="right">comment:87</div>

-1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist.



---

archive/issue_comments_531069.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nThe source installation of this package needs LaTeX, sdist or not.\nSomething **has** to give. Here are the alternatives I see:\n\n1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. \n\n2) do not install it if there is no LaTeX available.\n\n3) install it from wheel.\n\n4) install it from wheel only if there is no LaTeX available.",
    "created_at": "2021-12-14T20:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531069",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">comment:88</div>

The source installation of this package needs LaTeX, sdist or not.
Something **has** to give. Here are the alternatives I see:

1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. 

2) do not install it if there is no LaTeX available.

3) install it from wheel.

4) install it from wheel only if there is no LaTeX available.



---

archive/issue_comments_531070.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@dimpase](#comment:88):\n> The source installation of this package needs LaTeX, sdist or not.\n> Something **has** to give.\n\nYes, namely:\n0) the unnecessary idea that the sdist should ship the dtx file instead of its products.",
    "created_at": "2021-12-14T20:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531070",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@dimpase](#comment:88):
> The source installation of this package needs LaTeX, sdist or not.
> Something **has** to give.

Yes, namely:
0) the unnecessary idea that the sdist should ship the dtx file instead of its products.



---

archive/issue_comments_531071.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nNote that an `sdist` is not just a snapshot of the repository. It is prepared by the `build_sdist` build-system hook (https://www.python.org/dev/peps/pep-0517/#id10); in the case of `setuptools` this is equivalent to the invocation `setup.py sdist` (`setuptools.command.sdist`).",
    "created_at": "2021-12-14T21:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531071",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

Note that an `sdist` is not just a snapshot of the repository. It is prepared by the `build_sdist` build-system hook (https://www.python.org/dev/peps/pep-0517/#id10); in the case of `setuptools` this is equivalent to the invocation `setup.py sdist` (`setuptools.command.sdist`).



---

archive/issue_comments_531072.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@mkoeppe](#comment:87):\n> -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. \n\nThis argument is bogus.\n\nWe have no control over the PyPI packages we already use in Sage in this sense - you simply don't know without extra work whether they can be effortlessly installed with sdist, not from a wheel. E.g. they may be using autotools, so on a machine without autotools one won't be able to install them your supposedly canonical way.",
    "created_at": "2021-12-14T21:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531072",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@mkoeppe](#comment:87):
> -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. 

This argument is bogus.

We have no control over the PyPI packages we already use in Sage in this sense - you simply don't know without extra work whether they can be effortlessly installed with sdist, not from a wheel. E.g. they may be using autotools, so on a machine without autotools one won't be able to install them your supposedly canonical way.



---

archive/issue_comments_531073.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nI'm confused about the proposal now. Dima, are you talking about excluding only the PDF files, or excluding the PDF files, the .sty files, and other components? That is, will it be usable and just missing some documentation with your proposal, or will it only be usable if LaTeX is already installed? (I am imagining a situation in which someone happens to install Sage first and then LaTeX later, for example, or their LaTeX installation is temporarily broken.)",
    "created_at": "2021-12-14T22:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531073",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:92" align="right">comment:92</div>

I'm confused about the proposal now. Dima, are you talking about excluding only the PDF files, or excluding the PDF files, the .sty files, and other components? That is, will it be usable and just missing some documentation with your proposal, or will it only be usable if LaTeX is already installed? (I am imagining a situation in which someone happens to install Sage first and then LaTeX later, for example, or their LaTeX installation is temporarily broken.)



---

archive/issue_comments_531074.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nThere are a number of proposals. \n\nOne is to require LaTeX for installing sagetex (the counter-argument for this is that one may want to run Sage remotely, and then on the remote one does not need/have LaTeX. Sounds far-fetched to me...). Here,\nif sagetex does not get installed due to absense of LaTeX then certainly one can install LaTeX and run `make sagetex` to install it.\n\nAnother is to install it from a wheel. (the counter argument, [comment:87](#comment:87), is bogus IMHO).\n- there is an added complexity here that somehow the name `sagetex` is not liked by PyPI, but this should not be relevant.",
    "created_at": "2021-12-14T22:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531074",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:93" align="right">comment:93</div>

There are a number of proposals. 

One is to require LaTeX for installing sagetex (the counter-argument for this is that one may want to run Sage remotely, and then on the remote one does not need/have LaTeX. Sounds far-fetched to me...). Here,
if sagetex does not get installed due to absense of LaTeX then certainly one can install LaTeX and run `make sagetex` to install it.

Another is to install it from a wheel. (the counter argument, [comment:87](#comment:87), is bogus IMHO).
- there is an added complexity here that somehow the name `sagetex` is not liked by PyPI, but this should not be relevant.



---

archive/issue_comments_531075.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nYou could also want to run Sage locally and LaTeX remotely; kcrisman was outlining that option.",
    "created_at": "2021-12-14T22:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531075",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:94" align="right">comment:94</div>

You could also want to run Sage locally and LaTeX remotely; kcrisman was outlining that option.



---

archive/issue_comments_531076.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI figured out why we cannot use sagetex on PyPI - as Fedora blocked it for itself, in its infinite wisdom: \nsee https://github.com/pypa/pypi-support/issues/355 and\nhttps://github.com/pypa/pypi-support/issues/355#issuecomment-994116468\n\nI hope they will unblock it soon now.",
    "created_at": "2021-12-14T22:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531076",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:95" align="right">comment:95</div>

I figured out why we cannot use sagetex on PyPI - as Fedora blocked it for itself, in its infinite wisdom: 
see https://github.com/pypa/pypi-support/issues/355 and
https://github.com/pypa/pypi-support/issues/355#issuecomment-994116468

I hope they will unblock it soon now.



---

archive/issue_comments_531077.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@jhpalmieri](#comment:94):\n> You could also want to run Sage locally and LaTeX remotely; kcrisman was outlining that option.\n\nThe wheel installation proposal would work just fine for these remote cases.",
    "created_at": "2021-12-14T23:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531077",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@jhpalmieri](#comment:94):
> You could also want to run Sage locally and LaTeX remotely; kcrisman was outlining that option.

The wheel installation proposal would work just fine for these remote cases.



---

archive/issue_comments_531078.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@dimpase](#comment:91):\n> Replying to [@mkoeppe](#comment:87):\n> > -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. \n\n> \n> We have no control over the PyPI packages we already use in Sage in this sense\n\nWe are installing all Python packages from the sdist. That's what sdists are for.\n\n> E.g. they may be using autotools, so on a machine without autotools one won't be able to install them your supposedly canonical way.\n\nDima, as you know, autotools-based packages do NOT need autotools at the time of installation. Developers need it at the time of preparing a source distribution.",
    "created_at": "2021-12-14T23:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531078",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@dimpase](#comment:91):
> Replying to [@mkoeppe](#comment:87):
> > -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. 

> 
> We have no control over the PyPI packages we already use in Sage in this sense

We are installing all Python packages from the sdist. That's what sdists are for.

> E.g. they may be using autotools, so on a machine without autotools one won't be able to install them your supposedly canonical way.

Dima, as you know, autotools-based packages do NOT need autotools at the time of installation. Developers need it at the time of preparing a source distribution.



---

archive/issue_comments_531079.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@mkoeppe](#comment:97):\n> Replying to [@dimpase](#comment:91):\n> > Replying to [@mkoeppe](#comment:87):\n> > > -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. \n\n> > \n> > We have no control over the PyPI packages we already use in Sage in this sense\n\n> \n> We are installing all Python packages from the sdist.\n\nNo, not all of them. See e.g. beautifulsoap4:\n\n```\nmake[1]: Entering directory '/home/dimpase/work/sage/build/make'\nmake --no-print-directory beautifulsoup4-no-deps\nsage-logger -p 'sage --pip install -r \"/home/dimpase/work/sage/build/pkgs/beautifulsoup4/requirements.txt\"' '/home/dimpase/work/sage/logs/pkgs/beautifulsoup4.log'\n[beautifulsoup4] Collecting beautifulsoup4\n[beautifulsoup4]   Downloading beautifulsoup4-4.10.0-py3-none-any.whl (97 kB)\n[beautifulsoup4] Collecting soupsieve>1.2\n[beautifulsoup4]   Downloading soupsieve-2.3.1-py3-none-any.whl (37 kB)\n[beautifulsoup4] Installing collected packages: soupsieve, beautifulsoup4\n[beautifulsoup4] Successfully installed beautifulsoup4-4.10.0 soupsieve-2.3.1\nmake[1]: Leaving directory '/home/dimpase/work/sage/build/make'\n```\n\nIt's not a sdist build, it's a direct installation from wheels, right?",
    "created_at": "2021-12-14T23:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531079",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@mkoeppe](#comment:97):
> Replying to [@dimpase](#comment:91):
> > Replying to [@mkoeppe](#comment:87):
> > > -1. This would make `sagetex` the only Python package in the Sage distribution that cannot be installed from the sdist. 

> > 
> > We have no control over the PyPI packages we already use in Sage in this sense

> 
> We are installing all Python packages from the sdist.

No, not all of them. See e.g. beautifulsoap4:

```
make[1]: Entering directory '/home/dimpase/work/sage/build/make'
make --no-print-directory beautifulsoup4-no-deps
sage-logger -p 'sage --pip install -r "/home/dimpase/work/sage/build/pkgs/beautifulsoup4/requirements.txt"' '/home/dimpase/work/sage/logs/pkgs/beautifulsoup4.log'
[beautifulsoup4] Collecting beautifulsoup4
[beautifulsoup4]   Downloading beautifulsoup4-4.10.0-py3-none-any.whl (97 kB)
[beautifulsoup4] Collecting soupsieve>1.2
[beautifulsoup4]   Downloading soupsieve-2.3.1-py3-none-any.whl (37 kB)
[beautifulsoup4] Installing collected packages: soupsieve, beautifulsoup4
[beautifulsoup4] Successfully installed beautifulsoup4-4.10.0 soupsieve-2.3.1
make[1]: Leaving directory '/home/dimpase/work/sage/build/make'
```

It's not a sdist build, it's a direct installation from wheels, right?



---

archive/issue_comments_531080.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nYes, we have some optional packages that are directly installed from PyPI using `pip` because we have not bothered to package them as normal packages. `pip` prefers to install wheels when they are available, so this is what's happening.",
    "created_at": "2021-12-15T00:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531080",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">comment:99</div>

Yes, we have some optional packages that are directly installed from PyPI using `pip` because we have not bothered to package them as normal packages. `pip` prefers to install wheels when they are available, so this is what's happening.



---

archive/issue_comments_531081.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nRight, so why not do the same for `sagetex`, if you are squarely against it building with LaTeX? It can become optional, too.",
    "created_at": "2021-12-15T13:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531081",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:0" align="right">comment:0</div>

Right, so why not do the same for `sagetex`, if you are squarely against it building with LaTeX? It can become optional, too.



---

archive/issue_comments_531082.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRegarding zombie `maxima`, see #33027. The problem is not related to `sagetex`, it's invocation of `maxima()` in any `.sage` script which gives this.",
    "created_at": "2021-12-15T13:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531082",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

Regarding zombie `maxima`, see #33027. The problem is not related to `sagetex`, it's invocation of `maxima()` in any `.sage` script which gives this.



---

archive/issue_comments_531083.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWe've got `sagetex` back on PyPI, and now have https://pypi.org/project/sagetex/\nwith sagetex 3.5 uploaded.",
    "created_at": "2021-12-15T14:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531083",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

We've got `sagetex` back on PyPI, and now have https://pypi.org/project/sagetex/
with sagetex 3.5 uploaded.



---

archive/issue_comments_531084.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\n> Regarding zombie `maxima`, see #33027. The problem is not related to `sagetex`, it's invocation of `maxima()` in any `.sage` script which gives this.\n\nGood that this was tracked down!  Thanks.",
    "created_at": "2021-12-15T17:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531084",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:103" align="right">comment:103</div>

> Regarding zombie `maxima`, see #33027. The problem is not related to `sagetex`, it's invocation of `maxima()` in any `.sage` script which gives this.

Good that this was tracked down!  Thanks.



---

archive/issue_events_452707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452707"
}
```



---

archive/issue_events_452708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452708"
}
```



---

archive/issue_events_452709.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452709"
}
```



---

archive/issue_events_452710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452710"
}
```



---

archive/issue_comments_531085.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nDocumentation update for new `SAGE_ROOT/venv/share`\nlocation now at #34219.\n\nCan we rebase this ticket on that one, and revive it?",
    "created_at": "2022-07-25T09:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531085",
    "user": "https://github.com/slel"
}
```

<div id="comment:6" align="right">comment:6</div>

Documentation update for new `SAGE_ROOT/venv/share`
location now at #34219.

Can we rebase this ticket on that one, and revive it?



---

archive/issue_comments_531086.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAs far as the disagreement that has taken up so much of this discussion, maybe we could not distribute the PDF files and instead build them if LaTeX is present on the system. Regardless of whether LaTeX is present, we should distribute the `.sty` files (etc.) so that if someone installs Sage first and LaTeX second, `sagetex` is available to them.",
    "created_at": "2022-07-25T17:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531086",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

As far as the disagreement that has taken up so much of this discussion, maybe we could not distribute the PDF files and instead build them if LaTeX is present on the system. Regardless of whether LaTeX is present, we should distribute the `.sty` files (etc.) so that if someone installs Sage first and LaTeX second, `sagetex` is available to them.



---

archive/issue_comments_531087.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef18836e3b979903ef8e49618033186e62c1e82c\">ef18836</a></td><td><code>update sagetex to version 3.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89b2af86d21085223bcf4c221646cbbc09fc9b0b\">89b2af8</a></td><td><code>correct version in setup.py, and deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26eca99822f0d423250aa2279023b85d22826b15\">26eca99</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb\">15675e5</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>\n",
    "created_at": "2022-08-08T21:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531087",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef18836e3b979903ef8e49618033186e62c1e82c">ef18836</a></td><td><code>update sagetex to version 3.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89b2af86d21085223bcf4c221646cbbc09fc9b0b">89b2af8</a></td><td><code>correct version in setup.py, and deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26eca99822f0d423250aa2279023b85d22826b15">26eca99</a></td><td><code>trac 32887: change location of sagetex to venv/share/texmf/...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb">15675e5</a></td><td><code>fixed sagetex v3.6</code></td></tr></table>




---

archive/issue_comments_531088.json:
```json
{
    "body": "Changed commit from **[`2cd5b89`](https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb)** to **[`15675e5`](https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb)**",
    "created_at": "2022-08-08T21:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531088",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2cd5b89`](https://github.com/sagemath/sagetrac-mirror/commit/2cd5b89bbeb5f1d76e64e230eb8709e4864ad0bb)** to **[`15675e5`](https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb)**



---

archive/issue_comments_531089.json:
```json
{
    "body": "Dependencies: **#32992**",
    "created_at": "2022-08-08T21:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531089",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#32992**



---

archive/issue_comments_531090.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nnow `ninja` is going to be `standard`, we can perhaps make a progress here.",
    "created_at": "2022-08-08T21:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531090",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:0" align="right">comment:0</div>

now `ninja` is going to be `standard`, we can perhaps make a progress here.



---

archive/issue_comments_531091.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOne needs neither ninja nor cmake here. This is a Python package that installs Python scripts and data files (tex files). Just use setuptools or use something modern like https://github.com/pypa/hatch",
    "created_at": "2022-08-08T21:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531091",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

One needs neither ninja nor cmake here. This is a Python package that installs Python scripts and data files (tex files). Just use setuptools or use something modern like https://github.com/pypa/hatch



---

archive/issue_comments_531092.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNote: #34219 (Document that SageTeX is now in SAGE_ROOT/venv/share)\nnow has positive review.",
    "created_at": "2022-08-09T03:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531092",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

Note: #34219 (Document that SageTeX is now in SAGE_ROOT/venv/share)
now has positive review.



---

archive/issue_comments_531093.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-the previous update was on #30342 - over a year ago.\n+Previous update: #30342, merged 2020-08-20.\n``````\n",
    "created_at": "2022-08-09T03:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531093",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-the previous update was on #30342 - over a year ago.
+Previous update: #30342, merged 2020-08-20.
``````




---

archive/issue_comments_531094.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nReplying to [@dimpase](#comment:88):\n> The source installation of this package needs LaTeX, sdist or not.\n> Something **has** to give. Here are the alternatives I see:\n> \n> 1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. \n> \n> 2) do not install it if there is no LaTeX available.\n> \n> 3) install it from wheel.\n> \n> 4) install it from wheel only if there is no LaTeX available.\n\nThe problem in this ticket is that Dima is confused about what a \"source distribution\" (sdist) is and insists that it MUST NOT contain \"generated files\".\nBut this is a principle that is unknown to actual Python packaging practice. What goes into an sdist is determined by its purpose -- namely installability.\n\nThe `.sty` files etc. are \"generated files\" -- LaTeX is needed to extract them from the `.dtx` file, the actual source. In Dima's scheme, this makes the installation of the package dependent on LaTeX being installed. This is bad because it stops people from using the Python part of the package on a system that does not have LaTeX, which is a documented use case of sagetex.\n\nWhat Dima is missing is that there is an actual build phase for building a source distribution. The product of it is the sdist tarball, which one then deposits on PyPI. The very purpose of this build phase is to include files in the source distribution that do not appear in this form in the git repository etc.",
    "created_at": "2022-08-20T16:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531094",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:114" align="right">comment:114</div>

Replying to [@dimpase](#comment:88):
> The source installation of this package needs LaTeX, sdist or not.
> Something **has** to give. Here are the alternatives I see:
> 
> 1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. 
> 
> 2) do not install it if there is no LaTeX available.
> 
> 3) install it from wheel.
> 
> 4) install it from wheel only if there is no LaTeX available.

The problem in this ticket is that Dima is confused about what a "source distribution" (sdist) is and insists that it MUST NOT contain "generated files".
But this is a principle that is unknown to actual Python packaging practice. What goes into an sdist is determined by its purpose -- namely installability.

The `.sty` files etc. are "generated files" -- LaTeX is needed to extract them from the `.dtx` file, the actual source. In Dima's scheme, this makes the installation of the package dependent on LaTeX being installed. This is bad because it stops people from using the Python part of the package on a system that does not have LaTeX, which is a documented use case of sagetex.

What Dima is missing is that there is an actual build phase for building a source distribution. The product of it is the sdist tarball, which one then deposits on PyPI. The very purpose of this build phase is to include files in the source distribution that do not appear in this form in the git repository etc.



---

archive/issue_comments_531095.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhether `make`, `ninja`, or a simple `subprocess.run()` is used to launch latex for extracting `.sty` files from the `.dtx` files is irrelevant. Using `ninja` for this is an amusing overkill, but I don't have strong objections to it.",
    "created_at": "2022-08-20T16:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531095",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Whether `make`, `ninja`, or a simple `subprocess.run()` is used to launch latex for extracting `.sty` files from the `.dtx` files is irrelevant. Using `ninja` for this is an amusing overkill, but I don't have strong objections to it.



---

archive/issue_events_452711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T16:32:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452711"
}
```



---

archive/issue_events_452712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T16:32:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452712"
}
```



---

archive/issue_comments_531096.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nReplying to [@dimpase](#comment:88):\n> 1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. \n\nPyPI checks that the metadata of an sdist is well-formed and rejects tarballs that exceed a certain size. That's all. There's no \"purity test\".",
    "created_at": "2022-08-20T16:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531096",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:117" align="right">comment:117</div>

Replying to [@dimpase](#comment:88):
> 1) keep a hacky tarball package with pdfs and all, that cannot be installed from source in a meaningful way, and would never ever make it to PyPI in that form. 

PyPI checks that the metadata of an sdist is well-formed and rejects tarballs that exceed a certain size. That's all. There's no "purity test".



---

archive/issue_comments_531097.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFirst things first : I agree that it is easier to maintain a complex set of files if one can derive allof them from a set of sources as small as possible. I sympathize wit the idea of deriving both Python and LaTeX files from the same set of files.\n\n`Sagetex`is both a Python package and a LaTeX package, and neither. As a sick  [centaur](https://en.wikipedia.org/wiki/Centaur), who has to consult with both a physician and a veterinarian (unless he is [\u03a7\u03b5\u03af\u03c1\u03c9\u03bd](https://en.wikipedia.org/wiki/Chiron), himself physician...), we must attack both sides of the problem. \n\nAs far as I understand it, we have three distribution targets :\n\n- The Sage source tree,\n- CTAN,\n- PyPI.\n\nThe **Sage source tree** should be unproblematic.\n\n**CTAN** should also be unproblematic, since it does not insist on a `.dtx` format for the source code it distributes. For example, [PythonTeX](https://github.com/gpoore/pythontex) : if the `sagetex.sty` package itself *has* such a `.dtx`source, the associated python scripts have not : from the LaTeX point of niew, they are pure data.\n\nThe problem is therefore what can be accepted by **PyPI**. As far as I can tell, We can submit a package including :\n- all our LaTeX and Python files,\n- a `setup.py` file sufficient to install these files (problem : how to detect the target directories for `sagetex.py` ?),\n- a `README.md` file insisting on the fact that directly modifying these files is a Bad Idea(TM), and pointing to\n- a `HACKING.md` file \n  * explaining (mostly by pointers to the relevant documentation) what is a `dtx` is and how to exploit it, and\n  * explaining the dependencies and respective roles of `Makefile`, `sagetex.ins` and `sagetex.dtx`, all contained in  \n- a `sagetex-source.tar.gz` archive.\n\nThe `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.\n\nFWIW : The current `sagetex` tree, with self-compiled source, docimentatin and example (with Tikz graphs) weights in at 4.5 Mbytes, down to 2 MB in `.tar.gz` format. This shouldn't be problematic nowadays...\n\nUnless I'm missing some PyPI submission rule, this should be sufficient to fulfill our constraints :\n- no install dependencies,\n- no building before installing,\n- cleanly modifiable,\n- reasonable size.\n\nAs for `ninja` vs `make` :\n\n- I have no opinion on their respective values ;\n- I know for a fact that building Sage depends on `make` (therefore all Sage builder (are supposed to) know how to use `make`).\n\nIf building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the forst case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).\n\nCan we avoid opening yet anorher Religious War(TM) ?\n\nMy two \u20ac/100...\n\nWhat am I missing ?",
    "created_at": "2022-08-20T20:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531097",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

First things first : I agree that it is easier to maintain a complex set of files if one can derive allof them from a set of sources as small as possible. I sympathize wit the idea of deriving both Python and LaTeX files from the same set of files.

`Sagetex`is both a Python package and a LaTeX package, and neither. As a sick  [centaur](https://en.wikipedia.org/wiki/Centaur), who has to consult with both a physician and a veterinarian (unless he is [Χείρων](https://en.wikipedia.org/wiki/Chiron), himself physician...), we must attack both sides of the problem. 

As far as I understand it, we have three distribution targets :

- The Sage source tree,
- CTAN,
- PyPI.

The **Sage source tree** should be unproblematic.

**CTAN** should also be unproblematic, since it does not insist on a `.dtx` format for the source code it distributes. For example, [PythonTeX](https://github.com/gpoore/pythontex) : if the `sagetex.sty` package itself *has* such a `.dtx`source, the associated python scripts have not : from the LaTeX point of niew, they are pure data.

The problem is therefore what can be accepted by **PyPI**. As far as I can tell, We can submit a package including :
- all our LaTeX and Python files,
- a `setup.py` file sufficient to install these files (problem : how to detect the target directories for `sagetex.py` ?),
- a `README.md` file insisting on the fact that directly modifying these files is a Bad Idea(TM), and pointing to
- a `HACKING.md` file 
  * explaining (mostly by pointers to the relevant documentation) what is a `dtx` is and how to exploit it, and
  * explaining the dependencies and respective roles of `Makefile`, `sagetex.ins` and `sagetex.dtx`, all contained in  
- a `sagetex-source.tar.gz` archive.

The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.

FWIW : The current `sagetex` tree, with self-compiled source, docimentatin and example (with Tikz graphs) weights in at 4.5 Mbytes, down to 2 MB in `.tar.gz` format. This shouldn't be problematic nowadays...

Unless I'm missing some PyPI submission rule, this should be sufficient to fulfill our constraints :
- no install dependencies,
- no building before installing,
- cleanly modifiable,
- reasonable size.

As for `ninja` vs `make` :

- I have no opinion on their respective values ;
- I know for a fact that building Sage depends on `make` (therefore all Sage builder (are supposed to) know how to use `make`).

If building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the forst case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).

Can we avoid opening yet anorher Religious War(TM) ?

My two €/100...

What am I missing ?



---

archive/issue_comments_531098.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@EmmanuelCharpentier](#comment:118):\n> The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.\n\nYes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.",
    "created_at": "2022-08-20T20:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531098",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@EmmanuelCharpentier](#comment:118):
> The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.

Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.



---

archive/issue_comments_531099.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@EmmanuelCharpentier](#comment:118):\n> If building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the first case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).\n\nThere are two things that are called `ninja`. \nWe already have in Sage the package that provides the `ninja` executable, see `build/pkgs/ninja_build`. It was needed for building an optional package, but we just recently made it a standard package because it is needed by the next SciPy upgrade (#34081).\n\nBut there is also a Python distribution package called `ninja`, which provides the executable and a Python module `ninja`.\nWe do not have this in Sage, and it is not needed for anything.\n\nDima's proposed branch (https://github.com/sagemath/sagetex/tree/ninja-dev) uses the Python package - see https://github.com/sagemath/sagetex/blob/ninja-dev/setup.py",
    "created_at": "2022-08-20T21:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531099",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@EmmanuelCharpentier](#comment:118):
> If building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the first case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).

There are two things that are called `ninja`. 
We already have in Sage the package that provides the `ninja` executable, see `build/pkgs/ninja_build`. It was needed for building an optional package, but we just recently made it a standard package because it is needed by the next SciPy upgrade (#34081).

But there is also a Python distribution package called `ninja`, which provides the executable and a Python module `ninja`.
We do not have this in Sage, and it is not needed for anything.

Dima's proposed branch (https://github.com/sagemath/sagetex/tree/ninja-dev) uses the Python package - see https://github.com/sagemath/sagetex/blob/ninja-dev/setup.py



---

archive/issue_comments_531100.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@mkoeppe](#comment:119):\n> Replying to [@EmmanuelCharpentier](#comment:118):\n> > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.\n\n> \n> Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.\n\nWe can do that. But this adds to our workload the onus of generating the package(s) submitted to PiPY and CTAN, whoich must contain the executables and LaTeX files.\n\nOf course, these can be further `Makefile` targets... ;-).",
    "created_at": "2022-08-20T21:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531100",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@mkoeppe](#comment:119):
> Replying to [@EmmanuelCharpentier](#comment:118):
> > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.

> 
> Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.

We can do that. But this adds to our workload the onus of generating the package(s) submitted to PiPY and CTAN, whoich must contain the executables and LaTeX files.

Of course, these can be further `Makefile` targets... ;-).



---

archive/issue_comments_531101.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nReplying to [@mkoeppe](#comment:120):\n> Replying to [@EmmanuelCharpentier](#comment:118):\n> > If building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the first case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).\n\n> \n> There are two things that are called `ninja`. \n> We already have in Sage the package that provides the `ninja` executable, see `build/pkgs/ninja_build`. It was needed for building an optional package, but we just recently made it a standard package because it is needed by the next SciPy upgrade (#34081).\n> \n> But there is also a Python distribution package called `ninja`, which provides the executable and a Python module `ninja`.\n> We do not have this in Sage, and it is not needed for anything.\n> \n> Dima's proposed branch (https://github.com/sagemath/sagetex/tree/ninja-dev) uses the Python package - see https://github.com/sagemath/sagetex/blob/ninja-dev/setup.py\n\nCan the `ninja` executable be substituted (easily) to the `ninja` Python package (or *vice versa*) ?\n\nIf so, coulld it be avantagous to \"standardize\" on one of them for present *and future* Sage work ?\n\nDima ?",
    "created_at": "2022-08-20T21:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531101",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:122" align="right">comment:122</div>

Replying to [@mkoeppe](#comment:120):
> Replying to [@EmmanuelCharpentier](#comment:118):
> > If building Sage depends on `ninja` in any way, a decision would depend of their respective values, a point I won't discuss. If this would be the first case of mandatory `ninja` use in Sage, I will vote for `make` : not force-introducing Yet Another building tool would be a Good Thing (C)(R).

> 
> There are two things that are called `ninja`. 
> We already have in Sage the package that provides the `ninja` executable, see `build/pkgs/ninja_build`. It was needed for building an optional package, but we just recently made it a standard package because it is needed by the next SciPy upgrade (#34081).
> 
> But there is also a Python distribution package called `ninja`, which provides the executable and a Python module `ninja`.
> We do not have this in Sage, and it is not needed for anything.
> 
> Dima's proposed branch (https://github.com/sagemath/sagetex/tree/ninja-dev) uses the Python package - see https://github.com/sagemath/sagetex/blob/ninja-dev/setup.py

Can the `ninja` executable be substituted (easily) to the `ninja` Python package (or *vice versa*) ?

If so, coulld it be avantagous to "standardize" on one of them for present *and future* Sage work ?

Dima ?



---

archive/issue_comments_531102.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@EmmanuelCharpentier](#comment:122):\n> If so, could it be avantagous to \"standardize\" on one of them for present *and future* Sage work ?\n\nIf Dima wants to use ninja, he can just do that without needing the Python package.\n\nHe can just replace\n\n```\nimport ninja\nninja.subprocess.run(['ninja'],check=True)\n```\nby\n\n```\nimport subprocess\nsubprocess.run(['ninja'],check=True)\n```",
    "created_at": "2022-08-20T21:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531102",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@EmmanuelCharpentier](#comment:122):
> If so, could it be avantagous to "standardize" on one of them for present *and future* Sage work ?

If Dima wants to use ninja, he can just do that without needing the Python package.

He can just replace

```
import ninja
ninja.subprocess.run(['ninja'],check=True)
```
by

```
import subprocess
subprocess.run(['ninja'],check=True)
```



---

archive/issue_comments_531103.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIn fact `ninja.subprocess` is just the imported `subprocess` module from the Python library.",
    "created_at": "2022-08-20T21:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531103",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

In fact `ninja.subprocess` is just the imported `subprocess` module from the Python library.



---

archive/issue_comments_531104.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@EmmanuelCharpentier](#comment:121):\n> Replying to [@mkoeppe](#comment:119):\n> > Replying to [@EmmanuelCharpentier](#comment:118):\n> > > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.\n\n> > \n> > Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.\n\n> \n> We can do that.\n\nI'm not proposing a change - that's what the repository https://github.com/sagemath/sagetex looks like.",
    "created_at": "2022-08-20T21:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531104",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@EmmanuelCharpentier](#comment:121):
> Replying to [@mkoeppe](#comment:119):
> > Replying to [@EmmanuelCharpentier](#comment:118):
> > > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.

> > 
> > Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.

> 
> We can do that.

I'm not proposing a change - that's what the repository https://github.com/sagemath/sagetex looks like.



---

archive/issue_comments_531105.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@mkoeppe](#comment:125):\n> Replying to [@EmmanuelCharpentier](#comment:121):\n> > Replying to [@mkoeppe](#comment:119):\n> > > Replying to [@EmmanuelCharpentier](#comment:118):\n> > > > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.\n\n> > > \n> > > Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.\n\n> > \n> > We can do that.\n\n> \n> I'm not proposing a change - that's what the repository https://github.com/sagemath/sagetex looks like.\n\nSo, what remains to be done in order to \"release\" this new version ?",
    "created_at": "2022-08-20T21:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531105",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@mkoeppe](#comment:125):
> Replying to [@EmmanuelCharpentier](#comment:121):
> > Replying to [@mkoeppe](#comment:119):
> > > Replying to [@EmmanuelCharpentier](#comment:118):
> > > > The `HACKING.md` should insist that only the contributions (patches) to `sagetex.ins`, `sagetex.dtx` and `Makefile` will be considered for inclusion.

> > > 
> > > Yes, and of course only these files are in the git repository (https://github.com/sagemath/sagetex), not the generated files.

> > 
> > We can do that.

> 
> I'm not proposing a change - that's what the repository https://github.com/sagemath/sagetex looks like.

So, what remains to be done in order to "release" this new version ?



---

archive/issue_comments_531106.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@EmmanuelCharpentier](#comment:126):\n> So, what remains to be done in order to \"release\" this new version ?\n\nThe release tarball on GitHub for 3.6 (sagetex-3.6.tar.gz at https://github.com/sagemath/sagetex/releases/tag/v3.6) looks OK. The initial issue raised in [comment:2](#comment:2) was fixed.\n\nWe can just use this package. I'll push a branch that does that.",
    "created_at": "2022-08-20T22:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531106",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@EmmanuelCharpentier](#comment:126):
> So, what remains to be done in order to "release" this new version ?

The release tarball on GitHub for 3.6 (sagetex-3.6.tar.gz at https://github.com/sagemath/sagetex/releases/tag/v3.6) looks OK. The initial issue raised in [comment:2](#comment:2) was fixed.

We can just use this package. I'll push a branch that does that.



---

archive/issue_comments_531107.json:
```json
{
    "body": "Changed dependencies from **#32992** to none",
    "created_at": "2022-08-20T22:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531107",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32992** to none



---

archive/issue_comments_531108.json:
```json
{
    "body": "Changed work issues from **local->venv in the spkg** to none",
    "created_at": "2022-08-20T22:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531108",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **local->venv in the spkg** to none



---

archive/issue_comments_531109.json:
```json
{
    "body": "Dependencies: **#34219**",
    "created_at": "2022-08-20T22:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531109",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34219**



---

archive/issue_comments_531110.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)** to **[u/mkoeppe/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/sagetex/v3.6)**",
    "created_at": "2022-08-20T22:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531110",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/dimpase/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sagetex/v3.6)** to **[u/mkoeppe/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/sagetex/v3.6)**



---

archive/issue_comments_531111.json:
```json
{
    "body": "Changed commit from **[`15675e5`](https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb)** to **[`3c0f87e`](https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676)**",
    "created_at": "2022-08-20T22:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531111",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`15675e5`](https://github.com/sagemath/sagetrac-mirror/commit/15675e5fa5343d6b0c1edecb6aa9dc123d1930cb)** to **[`3c0f87e`](https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676)**



---

archive/issue_comments_531112.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe update on CTAN still needs to be done - sagetex is still at 3.5: https://ctan.org/pkg/sagetex?lang=en - same status as in [comment:21](#comment:21)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d390827eea3580f9fa998d7f59127ad0dd0a964\">7d39082</a></td><td><code>build/pkgs/sagetex/dependencies: Remove ninja; it is not a dependency of sagetex 3.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fad776ebb9438d4c01df8b0df5c5e223d03dc18\">4fad776</a></td><td><code>34219: Document that SageTeX is now in SAGE_ROOT/venv/share</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676\">3c0f87e</a></td><td><code>Merge #34219</code></td></tr></table>\n",
    "created_at": "2022-08-20T22:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531112",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

The update on CTAN still needs to be done - sagetex is still at 3.5: https://ctan.org/pkg/sagetex?lang=en - same status as in [comment:21](#comment:21)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d390827eea3580f9fa998d7f59127ad0dd0a964">7d39082</a></td><td><code>build/pkgs/sagetex/dependencies: Remove ninja; it is not a dependency of sagetex 3.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fad776ebb9438d4c01df8b0df5c5e223d03dc18">4fad776</a></td><td><code>34219: Document that SageTeX is now in SAGE_ROOT/venv/share</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676">3c0f87e</a></td><td><code>Merge #34219</code></td></tr></table>




---

archive/issue_comments_531113.json:
```json
{
    "body": "Author: **Dima Pasechnik, Matthias Koeppe**",
    "created_at": "2022-08-20T22:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531113",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Dima Pasechnik, Matthias Koeppe**



---

archive/issue_events_452713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T22:28:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452713"
}
```



---

archive/issue_events_452714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T22:28:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452714"
}
```



---

archive/issue_comments_531114.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNow we need fearless centaur testers",
    "created_at": "2022-08-20T22:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531114",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Now we need fearless centaur testers



---

archive/issue_comments_531115.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI have uploaded the tarball from the GitHub release to PyPI:  https://pypi.org/project/sagetex/#history",
    "created_at": "2022-08-20T22:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531115",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

I have uploaded the tarball from the GitHub release to PyPI:  https://pypi.org/project/sagetex/#history



---

archive/issue_comments_531116.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403\">6e5af72</a></td><td><code>build/pkgs/sagetex/dependencies: Remove duplication from dependencies_check</code></td></tr></table>\n",
    "created_at": "2022-08-20T22:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531116",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403">6e5af72</a></td><td><code>build/pkgs/sagetex/dependencies: Remove duplication from dependencies_check</code></td></tr></table>




---

archive/issue_comments_531117.json:
```json
{
    "body": "Changed commit from **[`3c0f87e`](https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676)** to **[`6e5af72`](https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403)**",
    "created_at": "2022-08-20T22:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c0f87e`](https://github.com/sagemath/sagetrac-mirror/commit/3c0f87ec0f28fc3ee0f12768e92a6e3eaa042676)** to **[`6e5af72`](https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403)**



---

archive/issue_comments_531118.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\n[sagetex-3.6]   copying example.tex -> build/bdist.macosx-10.14-x86_64/wheel/sagetex-3.6.data/data/share/doc/sagetex\n[sagetex-3.6]   error: can't copy 'sagetex.pdf': doesn't exist or not a regular file\n```",
    "created_at": "2022-08-20T22:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531118",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>


```
[sagetex-3.6]   copying example.tex -> build/bdist.macosx-10.14-x86_64/wheel/sagetex-3.6.data/data/share/doc/sagetex
[sagetex-3.6]   error: can't copy 'sagetex.pdf': doesn't exist or not a regular file
```



---

archive/issue_events_452715.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T22:59:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452715"
}
```



---

archive/issue_events_452716.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T22:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452716"
}
```



---

archive/issue_comments_531119.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOK, that was pointed out in [comment:41](#comment:41) already.",
    "created_at": "2022-08-20T23:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531119",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

OK, that was pointed out in [comment:41](#comment:41) already.



---

archive/issue_comments_531120.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c\">add10cd</a></td><td><code>build/pkgs/sagetex: Use 3.6.1 release on PyPI</code></td></tr></table>\n",
    "created_at": "2022-08-20T23:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531120",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c">add10cd</a></td><td><code>build/pkgs/sagetex: Use 3.6.1 release on PyPI</code></td></tr></table>




---

archive/issue_comments_531121.json:
```json
{
    "body": "Changed commit from **[`6e5af72`](https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403)** to **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**",
    "created_at": "2022-08-20T23:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6e5af72`](https://github.com/sagemath/sagetrac-mirror/commit/6e5af728ac0f786bf426dd75b06593b1919e7403)** to **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**



---

archive/issue_events_452717.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T23:12:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452717"
}
```



---

archive/issue_events_452718.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T23:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452718"
}
```



---

archive/issue_events_452719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-20T23:19:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "title_is": "update sagetex to version 3.6.1",
    "title_was": "update sagetex to version 3.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452719"
}
```



---

archive/issue_events_452720.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-08-21T08:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452720"
}
```



---

archive/issue_events_452721.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-08-21T08:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452721"
}
```



---

archive/issue_comments_531122.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nReplying to [@mkoeppe](#comment:133):\n> Now we need fearless centaur testers\n\nThe centaur runs ... and passes `ptestlong`. Yay !\n\n==> `positive_review`.\n\nThanks a lot !",
    "created_at": "2022-08-21T08:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531122",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:141" align="right">comment:141</div>

Replying to [@mkoeppe](#comment:133):
> Now we need fearless centaur testers

The centaur runs ... and passes `ptestlong`. Yay !

==> `positive_review`.

Thanks a lot !



---

archive/issue_comments_531123.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDoes\n\n```\nSAGE_CHECK=yes make sagetex\n```\npass?",
    "created_at": "2022-08-21T09:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531123",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

Does

```
SAGE_CHECK=yes make sagetex
```
pass?



---

archive/issue_comments_531124.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nSorry for the wait (family obligations... ;-)\n\nReplying to [@dimpase](#comment:142):\n> Does\n> \n> ```\n> SAGE_CHECK=yes make sagetex\n> ```\n> pass?\n\nYep !\n\nHTH,",
    "created_at": "2022-08-21T16:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531124",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:143" align="right">comment:143</div>

Sorry for the wait (family obligations... ;-)

Replying to [@dimpase](#comment:142):
> Does
> 
> ```
> SAGE_CHECK=yes make sagetex
> ```
> pass?

Yep !

HTH,



---

archive/issue_comments_531125.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for the review!",
    "created_at": "2022-08-21T16:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531125",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for the review!



---

archive/issue_comments_531126.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier**",
    "created_at": "2022-08-21T16:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531126",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Emmanuel Charpentier**



---

archive/issue_comments_531127.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/sagetex/v3.6)** to **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**",
    "created_at": "2022-08-30T19:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32887#issuecomment-531127",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/packages/sagetex/v3.6](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/sagetex/v3.6)** to **[`add10cd`](https://github.com/sagemath/sagetrac-mirror/commit/add10cdb567858d1971ababe2114be573d76c00c)**



---

archive/issue_events_452722.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-30T19:05:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452722"
}
```



---

archive/issue_events_452723.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ae8a36d11911f854aaa869ec20dda63df47b29cf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-30T19:05:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32887#event-452723"
}
```
