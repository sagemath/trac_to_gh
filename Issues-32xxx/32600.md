# Issue 32600: sage.arith: Use sage.rings.abc and move some module-level imports into methods

archive/issues_032363.json:
```json
{
    "body": "(cherry-picked from #32432)\n\n\nCC:  @tscrim\n\nBranch/Commit: [5e5843a0c0703f0cb83c51b14c9aec8bc1450460](https://github.com/sagemath/sagetrac-mirror/commit/5e5843a0c0703f0cb83c51b14c9aec8bc1450460)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nDependencies: #32566\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32600\n\n",
    "closed_at": "2021-10-13T22:50:34Z",
    "created_at": "2021-09-30T19:12:57Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "sage.arith: Use sage.rings.abc and move some module-level imports into methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32600",
    "user": "https://github.com/mkoeppe"
}
```
(cherry-picked from #32432)


CC:  @tscrim

Branch/Commit: [5e5843a0c0703f0cb83c51b14c9aec8bc1450460](https://github.com/sagemath/sagetrac-mirror/commit/5e5843a0c0703f0cb83c51b14c9aec8bc1450460)

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Dependencies: #32566

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32600





---

archive/issue_comments_649400.json:
```json
{
    "body": "Changing dependencies from \"#32566:\" to \"#32566\"",
    "created_at": "2021-09-30T19:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649400",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32566:" to "#32566"



---

archive/issue_comments_649401.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/sage_arith__use_sage_rings_abc_and_move_some_module_level_imports_into_methods\"",
    "created_at": "2021-09-30T19:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649401",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/sage_arith__use_sage_rings_abc_and_move_some_module_level_imports_into_methods"



---

archive/issue_comments_649402.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-30T19:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649402",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_649403.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|\n|[cee081a](https://github.com/sagemath/sagetrac-mirror/commit/cee081ae73afd81ed1afb4f02e941e090ccf7988)|`sage.rings.real_mpfr.RealField_class: Inherit through a new class sage.rings.abc.RealField`|\n|[99f4f10](https://github.com/sagemath/sagetrac-mirror/commit/99f4f1057ae26cef21f7285b022e357e79607bc9)|`sage.rings.real_double.RealDoubleField_class: Inherit through a new class sage.rings.abc.RealDoubleField`|\n|[29871d0](https://github.com/sagemath/sagetrac-mirror/commit/29871d0294c797262fd267df401e64acca0bb998)|`ComplexField_class, ComplexDoubleField: Inherit through new classes sage.rings.abc.*`|\n|[e1bb944](https://github.com/sagemath/sagetrac-mirror/commit/e1bb944ac43872f5a4b180a46331245c6056f515)|`src/sage/rings/polynomial/polynomial_element.pyx: Replace use of is_RealField by isinstance(sage.rings.abc.RealField) etc.`|\n|[6e2c3c4](https://github.com/sagemath/sagetrac-mirror/commit/6e2c3c4e38e69f4c4c78dbaf99e53ab4e9ded4a9)|`src/sage/rings/abc.pyx: Add class docstrings`|\n|[2bd66e4](https://github.com/sagemath/sagetrac-mirror/commit/2bd66e44c6f2ddc39e6188555855298564f5e002)|`Merge #32566`|\n|[4e2f0ab](https://github.com/sagemath/sagetrac-mirror/commit/4e2f0ab62ea50af638d3679a8ad61350f218a4d2)|`src/sage/arith/misc.py: move pari/flint imports into methods`|\n|[5145d43](https://github.com/sagemath/sagetrac-mirror/commit/5145d43c5646f414f152e063fbbabed8854e2300)|`src/sage/arith/misc.py: Use sage.rings.abc instead of importing element classes RealNumber, ComplexNumber`|\n|[5e5843a](https://github.com/sagemath/sagetrac-mirror/commit/5e5843a0c0703f0cb83c51b14c9aec8bc1450460)|`sage.arith.misc: Fixup`|",
    "created_at": "2021-09-30T19:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649403",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|
|[cee081a](https://github.com/sagemath/sagetrac-mirror/commit/cee081ae73afd81ed1afb4f02e941e090ccf7988)|`sage.rings.real_mpfr.RealField_class: Inherit through a new class sage.rings.abc.RealField`|
|[99f4f10](https://github.com/sagemath/sagetrac-mirror/commit/99f4f1057ae26cef21f7285b022e357e79607bc9)|`sage.rings.real_double.RealDoubleField_class: Inherit through a new class sage.rings.abc.RealDoubleField`|
|[29871d0](https://github.com/sagemath/sagetrac-mirror/commit/29871d0294c797262fd267df401e64acca0bb998)|`ComplexField_class, ComplexDoubleField: Inherit through new classes sage.rings.abc.*`|
|[e1bb944](https://github.com/sagemath/sagetrac-mirror/commit/e1bb944ac43872f5a4b180a46331245c6056f515)|`src/sage/rings/polynomial/polynomial_element.pyx: Replace use of is_RealField by isinstance(sage.rings.abc.RealField) etc.`|
|[6e2c3c4](https://github.com/sagemath/sagetrac-mirror/commit/6e2c3c4e38e69f4c4c78dbaf99e53ab4e9ded4a9)|`src/sage/rings/abc.pyx: Add class docstrings`|
|[2bd66e4](https://github.com/sagemath/sagetrac-mirror/commit/2bd66e44c6f2ddc39e6188555855298564f5e002)|`Merge #32566`|
|[4e2f0ab](https://github.com/sagemath/sagetrac-mirror/commit/4e2f0ab62ea50af638d3679a8ad61350f218a4d2)|`src/sage/arith/misc.py: move pari/flint imports into methods`|
|[5145d43](https://github.com/sagemath/sagetrac-mirror/commit/5145d43c5646f414f152e063fbbabed8854e2300)|`src/sage/arith/misc.py: Use sage.rings.abc instead of importing element classes RealNumber, ComplexNumber`|
|[5e5843a](https://github.com/sagemath/sagetrac-mirror/commit/5e5843a0c0703f0cb83c51b14c9aec8bc1450460)|`sage.arith.misc: Fixup`|



---

archive/issue_comments_649404.json:
```json
{
    "body": "Changing commit from \"\" to \"5e5843a0c0703f0cb83c51b14c9aec8bc1450460\"",
    "created_at": "2021-09-30T19:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649404",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "5e5843a0c0703f0cb83c51b14c9aec8bc1450460"



---

archive/issue_comments_649405.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-09-30T19:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649405",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_649406.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhile it's not an issue here since it is not the main part of the algorithm, changes like this do incur a slight performance penalty:\n\n```diff\n-    if isinstance(z, (RealNumber, ComplexNumber)):\n+    if isinstance(z.parent(), (RealField, ComplexField)):\n```\nThis is just for future reference.",
    "created_at": "2021-10-02T01:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649406",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
While it's not an issue here since it is not the main part of the algorithm, changes like this do incur a slight performance penalty:

```diff
-    if isinstance(z, (RealNumber, ComplexNumber)):
+    if isinstance(z.parent(), (RealField, ComplexField)):
```
This is just for future reference.



---

archive/issue_comments_649407.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-10-02T01:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649407",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_649408.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-02T01:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649408",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_649409.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks! I agree with your analysis.",
    "created_at": "2021-10-02T01:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649409",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Thanks! I agree with your analysis.



---

archive/issue_comments_649410.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/sage_arith__use_sage_rings_abc_and_move_some_module_level_imports_into_methods\" to \"5e5843a0c0703f0cb83c51b14c9aec8bc1450460\"",
    "created_at": "2021-10-13T22:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649410",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/sage_arith__use_sage_rings_abc_and_move_some_module_level_imports_into_methods" to "5e5843a0c0703f0cb83c51b14c9aec8bc1450460"



---

archive/issue_events_097153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-13T22:50:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32600#event-97153"
}
```



---

archive/issue_comments_649411.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-13T22:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32600#issuecomment-649411",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
