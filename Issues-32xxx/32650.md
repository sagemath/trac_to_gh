# Issue 32650: sage.misc.latex: Replace have_... functions by Features

archive/issues_032413.json:
```json
{
    "body": "... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`\n\nCC:  @kwankyu\n\nReviewer: Matthias Koeppe\n\nAuthor: S\u00e9bastien Labb\u00e9\n\nBranch: 2ea4d9eaa99477cc248fd10bb049925d32806c1a\n\nDependencies: #32634\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32650\n\n",
    "closed_at": "2021-11-12T21:27:39Z",
    "created_at": "2021-10-07T19:10:34Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "sage.misc.latex: Replace have_... functions by Features",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32650",
    "user": "https://github.com/mkoeppe"
}
```
... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`

CC:  @kwankyu

Reviewer: Matthias Koeppe

Author: Sébastien Labbé

Branch: 2ea4d9eaa99477cc248fd10bb049925d32806c1a

Dependencies: #32634

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/32650





---

archive/issue_comments_461842.json:
```json
{
    "body": "<a id='comment:2'></a>Here is some work towards that goal removing all uses of `have_program` in `misc/latex.py`.\n\n---\nNew commits:",
    "created_at": "2021-11-02T16:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461842",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>Here is some work towards that goal removing all uses of `have_program` in `misc/latex.py`.

---
New commits:



---

archive/issue_comments_461843.json:
```json
{
    "body": "<a id='comment:3'></a>Remainings usage of `have_program` are:\n\n```\n$ git grep have_program\ninterfaces/chomp.py:        from sage.misc.sage_ostools import have_program\ninterfaces/chomp.py:        _have_chomp[program] = have_program(program)\ninterfaces/phc.py:            from sage.misc.sage_ostools import have_program\ninterfaces/phc.py:            if not have_program('phc'):\nmisc/dist.py:    from sage.misc.sage_ostools import have_program\nmisc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)\nmisc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)\nmisc/sage_ostools.pyx:def have_program(program, path=None):\nmisc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program\nmisc/sage_ostools.pyx:        sage: have_program('ls')\nmisc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')\nmisc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))\nmisc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')\nmisc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))\nmisc/viewer.py:    from sage.misc.sage_ostools import have_program\nmisc/viewer.py:    elif have_program('xdg-open'):\nmisc/viewer.py:                if have_program(cmd):\nmisc/viewer.py:                if have_program(cmd):\nmisc/viewer.py:                if have_program(cmd):\nplot/animate.py:        from sage.misc.sage_ostools import have_program\nplot/animate.py:        have_convert = have_program('convert')\nplot/animate.py:        from sage.misc.sage_ostools import have_program\nplot/animate.py:        return have_program('ffmpeg')\nplot/graphics.py:                from sage.misc.sage_ostools import have_program\nplot/graphics.py:                                         if have_program(i)]\nplot/multigraphics.py:                from sage.misc.sage_ostools import have_program\nplot/multigraphics.py:                                         if have_program(i)]\n```",
    "created_at": "2021-11-02T16:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461843",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>Remainings usage of `have_program` are:

```
$ git grep have_program
interfaces/chomp.py:        from sage.misc.sage_ostools import have_program
interfaces/chomp.py:        _have_chomp[program] = have_program(program)
interfaces/phc.py:            from sage.misc.sage_ostools import have_program
interfaces/phc.py:            if not have_program('phc'):
misc/dist.py:    from sage.misc.sage_ostools import have_program
misc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)
misc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)
misc/sage_ostools.pyx:def have_program(program, path=None):
misc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program
misc/sage_ostools.pyx:        sage: have_program('ls')
misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')
misc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))
misc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')
misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))
misc/viewer.py:    from sage.misc.sage_ostools import have_program
misc/viewer.py:    elif have_program('xdg-open'):
misc/viewer.py:                if have_program(cmd):
misc/viewer.py:                if have_program(cmd):
misc/viewer.py:                if have_program(cmd):
plot/animate.py:        from sage.misc.sage_ostools import have_program
plot/animate.py:        have_convert = have_program('convert')
plot/animate.py:        from sage.misc.sage_ostools import have_program
plot/animate.py:        return have_program('ffmpeg')
plot/graphics.py:                from sage.misc.sage_ostools import have_program
plot/graphics.py:                                         if have_program(i)]
plot/multigraphics.py:                from sage.misc.sage_ostools import have_program
plot/multigraphics.py:                                         if have_program(i)]
```



---

archive/issue_comments_461844.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-02T16:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461845.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-02T16:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461846.json:
```json
{
    "body": "<a id='comment:6'></a>I suggest this ticket should handle only the removal of `have_program` in `misc.latex.py` and `sage.plot`.\n\nTODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?",
    "created_at": "2021-11-02T16:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461846",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>I suggest this ticket should handle only the removal of `have_program` in `misc.latex.py` and `sage.plot`.

TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?



---

archive/issue_comments_461847.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-02T20:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_461848.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-02T20:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_461849.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:6 slabbe]:\n> TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?\n\n\nI decided to get rid of the `.require(needed_for_msg)`. I did a forced push to clean the commit about `plot/animate.py` file.",
    "created_at": "2021-11-02T20:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461849",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>Replying to [comment:6 slabbe]:
> TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?


I decided to get rid of the `.require(needed_for_msg)`. I did a forced push to clean the commit about `plot/animate.py` file.



---

archive/issue_comments_461850.json:
```json
{
    "body": "<a id='comment:10'></a>On my side, the command\n\n```\n$ sage -tp --optional=sage,optional,external --long src/sage/features src/sage/plot src/sage/doctest\n```\ncurrently gives:\n\n```\nGit branch: 32650\nUsing --optional=4ti2,bliss,cbc,ccache,cryptominisat,database_symbolic_data,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,libnauty,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,rubiks,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_numerical_backends_coin,sage_spkg,sage_sws2rst\nExternal software to be detected: 4ti2,cplex,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,lualatex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,pdf2svg,pdflatex,rubiks,scilab,xelatex\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 95 files using 8 threads.\n[...]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 455.6 seconds\n    cpu time: 680.6 seconds\n    cumulative wall time: 2815.7 seconds\nExternal software detected for doctesting: dvipng,ffmpeg,graphviz,imagemagick,internet,latex,lualatex,octave,pandoc,pdf2svg,pdflatex,xelatex\n```",
    "created_at": "2021-11-02T20:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461850",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>On my side, the command

```
$ sage -tp --optional=sage,optional,external --long src/sage/features src/sage/plot src/sage/doctest
```
currently gives:

```
Git branch: 32650
Using --optional=4ti2,bliss,cbc,ccache,cryptominisat,database_symbolic_data,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,libnauty,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,rubiks,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_numerical_backends_coin,sage_spkg,sage_sws2rst
External software to be detected: 4ti2,cplex,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,lualatex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,pdf2svg,pdflatex,rubiks,scilab,xelatex
Sorting sources by runtime so that slower doctests are run first....
Doctesting 95 files using 8 threads.
[...]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 455.6 seconds
    cpu time: 680.6 seconds
    cumulative wall time: 2815.7 seconds
External software detected for doctesting: dvipng,ffmpeg,graphviz,imagemagick,internet,latex,lualatex,octave,pandoc,pdf2svg,pdflatex,xelatex
```



---

archive/issue_comments_461851.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-02T20:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461851",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461852.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-02T21:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461853.json:
```json
{
    "body": "<a id='comment:12'></a>Needs review!",
    "created_at": "2021-11-02T21:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461853",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:12'></a>Needs review!



---

archive/issue_comments_461854.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T10:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461855.json:
```json
{
    "body": "<a id='comment:14'></a>I added a commit to fix a pyflakes warning.",
    "created_at": "2021-11-04T10:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461855",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:14'></a>I added a commit to fix a pyflakes warning.



---

archive/issue_comments_461856.json:
```json
{
    "body": "<a id='comment:15'></a>`@`mkoeppe: I have a question for you with respect to a choice I made I am not sure of. Within the class `class latex(Executable)`, I addded the method `is_functional` where I reused the code which was in the previous `have_latex` in `sage.misc.latex.py`. This allows to have a behavior which matches the previous behavior when `have_latex` was called. But doing so, there are now imports `from sage.misc.latex import _run_latex_, _latex_file_` within the file `sage/features/latex.py`. Is this a file dependency we want to avoid with respect to modularization?",
    "created_at": "2021-11-04T10:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461856",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:15'></a>`@`mkoeppe: I have a question for you with respect to a choice I made I am not sure of. Within the class `class latex(Executable)`, I addded the method `is_functional` where I reused the code which was in the previous `have_latex` in `sage.misc.latex.py`. This allows to have a behavior which matches the previous behavior when `have_latex` was called. But doing so, there are now imports `from sage.misc.latex import _run_latex_, _latex_file_` within the file `sage/features/latex.py`. Is this a file dependency we want to avoid with respect to modularization?



---

archive/issue_comments_461857.json:
```json
{
    "body": "<a id='comment:16'></a>Great question. In this code:\n\n```\n+    def is_functional(self):\n...\n+        from sage.misc.latex import _run_latex_, _latex_file_\n```\nit would probably be good to use `try...except` around the import and return a `False` test result if `sage.misc.latex` is not available.",
    "created_at": "2021-11-04T15:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Great question. In this code:

```
+    def is_functional(self):
...
+        from sage.misc.latex import _run_latex_, _latex_file_
```
it would probably be good to use `try...except` around the import and return a `False` test result if `sage.misc.latex` is not available.



---

archive/issue_comments_461858.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 mkoeppe]:\n> and return a `False` test result if `sage.misc.latex` is not available. \n\n\n`False`? But maybe `latex` is available and functional even if `sage.misc.latex` module is not available, so we could return `True`.",
    "created_at": "2021-11-04T16:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461858",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:17'></a>Replying to [comment:16 mkoeppe]:
> and return a `False` test result if `sage.misc.latex` is not available. 


`False`? But maybe `latex` is available and functional even if `sage.misc.latex` module is not available, so we could return `True`.



---

archive/issue_comments_461859.json:
```json
{
    "body": "<a id='comment:18'></a>Do we have code that calls `latex` without going through `sage.misc.latex`?",
    "created_at": "2021-11-04T16:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461859",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Do we have code that calls `latex` without going through `sage.misc.latex`?



---

archive/issue_comments_461860.json:
```json
{
    "body": "<a id='comment:19'></a>In fact, I hate the function `_run_latex_` as it is a bunch of spaghetti code involving everything:\n\nhttps://gitlab.com/sagemath/sage/-/blob/develop/src/sage/misc/latex.py#L643\n\nSo I think it is preferable to not call it within `features/latex.py` at all.",
    "created_at": "2021-11-04T16:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461860",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:19'></a>In fact, I hate the function `_run_latex_` as it is a bunch of spaghetti code involving everything:

https://gitlab.com/sagemath/sage/-/blob/develop/src/sage/misc/latex.py#L643

So I think it is preferable to not call it within `features/latex.py` at all.



---

archive/issue_comments_461861.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:18 mkoeppe]:\n> Do we have code that calls `latex` without going through `sage.misc.latex`?\n\n\nYes, it can be done without, by using a simple `subprocess.run`. I do that in #20343, for instance in the method `def pdf(self)`.",
    "created_at": "2021-11-04T16:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461861",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:20'></a>Replying to [comment:18 mkoeppe]:
> Do we have code that calls `latex` without going through `sage.misc.latex`?


Yes, it can be done without, by using a simple `subprocess.run`. I do that in #20343, for instance in the method `def pdf(self)`.



---

archive/issue_comments_461862.json:
```json
{
    "body": "<a id='comment:21'></a>(note to myself: I just noticed that `have_latex` should be updated in `src/sage/doctest/external.py` to use features as well.)",
    "created_at": "2021-11-04T16:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461862",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>(note to myself: I just noticed that `have_latex` should be updated in `src/sage/doctest/external.py` to use features as well.)



---

archive/issue_comments_461863.json:
```json
{
    "body": "<a id='comment:22'></a>Are you still planning to add the distro info for pdf2svg here as you wrote in #20343?",
    "created_at": "2021-11-04T20:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461863",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Are you still planning to add the distro info for pdf2svg here as you wrote in #20343?



---

archive/issue_comments_461864.json:
```json
{
    "body": "<a id='comment:23'></a>Yes.",
    "created_at": "2021-11-04T20:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461864",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:23'></a>Yes.



---

archive/issue_comments_461865.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T21:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461866.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T21:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461867.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461868.json:
```json
{
    "body": "<a id='comment:27'></a>So I created the `build/pkgs/pdf2svg` by immitating what was done for `build/pkgs/pandoc` and `build/pkgs/graphviz`. I hope it makes sense.",
    "created_at": "2021-11-04T21:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461868",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:27'></a>So I created the `build/pkgs/pdf2svg` by immitating what was done for `build/pkgs/pandoc` and `build/pkgs/graphviz`. I hope it makes sense.



---

archive/issue_comments_461869.json:
```json
{
    "body": "<a id='comment:28'></a>While testing `sage -i pdf2svg`, I noticed this strange part in the output:\n\n```\nError: pdf2svg is a dummy script package that the Sage distribution uses\nto provide information about equivalent system packages.\nIt cannot be installed using the Sage distribution.\nPlease install it manually, for example using the system packages\nrecommended at the end of a run of './configure'\nSee below for package-specific information.\n```\n\nmaybe this message should be fixed in another ticket.",
    "created_at": "2021-11-04T21:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461869",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:28'></a>While testing `sage -i pdf2svg`, I noticed this strange part in the output:

```
Error: pdf2svg is a dummy script package that the Sage distribution uses
to provide information about equivalent system packages.
It cannot be installed using the Sage distribution.
Please install it manually, for example using the system packages
recommended at the end of a run of './configure'
See below for package-specific information.
```

maybe this message should be fixed in another ticket.



---

archive/issue_comments_461870.json:
```json
{
    "body": "<a id='comment:29'></a>What did you expect to happen?",
    "created_at": "2021-11-04T21:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461870",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>What did you expect to happen?



---

archive/issue_comments_461871.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-04T21:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461872.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:29 mkoeppe]:\n> What did you expect to happen?\n\n\nWell, the part that surprised me is `Error: pdf2svg is a dummy script package`, which I attributed to `_prereq`, `_recommmended` and `_bootstrap`. But, now, rereading it again, I understand what it means. It is just that it does not contain the source. Maybe `dummy` could be replaced by another word which better describe what it is? Or just leave it as it is...",
    "created_at": "2021-11-04T22:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461872",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:31'></a>Replying to [comment:29 mkoeppe]:
> What did you expect to happen?


Well, the part that surprised me is `Error: pdf2svg is a dummy script package`, which I attributed to `_prereq`, `_recommmended` and `_bootstrap`. But, now, rereading it again, I understand what it means. It is just that it does not contain the source. Maybe `dummy` could be replaced by another word which better describe what it is? Or just leave it as it is...



---

archive/issue_comments_461873.json:
```json
{
    "body": "<a id='comment:32'></a>Ok, so this ticket now needs review. I did not have anything else in mind to be done with respect to `have_...` within `sage.misc.latex.py` and `sage.plot`.",
    "created_at": "2021-11-04T22:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461873",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:32'></a>Ok, so this ticket now needs review. I did not have anything else in mind to be done with respect to `have_...` within `sage.misc.latex.py` and `sage.plot`.



---

archive/issue_comments_461874.json:
```json
{
    "body": "<a id='comment:33'></a>While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)",
    "created_at": "2021-11-04T22:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461874",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)



---

archive/issue_comments_461875.json:
```json
{
    "body": "<a id='comment:34'></a>ok, I can do this, but next week. Going to bed now!",
    "created_at": "2021-11-04T22:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461875",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:34'></a>ok, I can do this, but next week. Going to bed now!



---

archive/issue_comments_461876.json:
```json
{
    "body": "<a id='comment:36'></a>LGTM. One green patchbot, one patchbot that is not feeling well.",
    "created_at": "2021-11-07T04:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461876",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>LGTM. One green patchbot, one patchbot that is not feeling well.



---

archive/issue_comments_461877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-07T04:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461877",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_461878.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-11-12T21:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461878",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_086477.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-12T21:27:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32650#event-86477"
}
```



---

archive/issue_comments_461879.json:
```json
{
    "body": "<a id='comment:38'></a>There does not seem to be a Cygwin package for pdf2svg.\n\nAt least I could not find one by searching Cygwin packages via\n\n- https://cygwin.com/packages/\n\nand the command `apt-cyg install pdf2svg` fails.",
    "created_at": "2021-11-18T15:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461879",
    "user": "https://github.com/slel"
}
```

<a id='comment:38'></a>There does not seem to be a Cygwin package for pdf2svg.

At least I could not find one by searching Cygwin packages via

- https://cygwin.com/packages/

and the command `apt-cyg install pdf2svg` fails.



---

archive/issue_comments_461880.json:
```json
{
    "body": "<a id='comment:39'></a>Do you mean that the file `build/pkgs/pdf2svg/distros/cygwin.txt` should be removed?",
    "created_at": "2021-11-18T16:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461880",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:39'></a>Do you mean that the file `build/pkgs/pdf2svg/distros/cygwin.txt` should be removed?



---

archive/issue_comments_461881.json:
```json
{
    "body": "<a id='comment:40'></a>Yes, otherwise configure ends with a recommendation\nto run `apt-cyg install pdf2svg`.",
    "created_at": "2021-11-18T16:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461881",
    "user": "https://github.com/slel"
}
```

<a id='comment:40'></a>Yes, otherwise configure ends with a recommendation
to run `apt-cyg install pdf2svg`.



---

archive/issue_comments_461882.json:
```json
{
    "body": "<a id='comment:41'></a>Or package pdf2svg for Cygwin...  : )",
    "created_at": "2021-11-18T16:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461882",
    "user": "https://github.com/slel"
}
```

<a id='comment:41'></a>Or package pdf2svg for Cygwin...  : )



---

archive/issue_comments_461883.json:
```json
{
    "body": "<a id='comment:42'></a>I created #32931 to deal with this issue.",
    "created_at": "2021-11-25T10:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461883",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:42'></a>I created #32931 to deal with this issue.



---

archive/issue_comments_461884.json:
```json
{
    "body": "<a id='comment:43'></a>A request on the Cygwin mailing list to package pdf2svg\nwas answered as follows:\n\n- https://cygwin.com/pipermail/cygwin/2021-November/250061.html\n\n> The pdf2svg home page recommends instead pdftocairo\n> from the poppler package, which does the same and\n> is maintained as part of the package, rather than\n> being a standalone utility which integrates the two,\n> and is not as well maintained:\n\n>\n> {{{\n> $ pdftocairo --help\n> [...]\n> }}}\n\n\nThat suggests `pdftocairo --svg file.pdf`\nwill transform `file.pdf` to `file.svg`.\n\nIt seems poppler is widely packaged:\n\n- https://repology.org/project/poppler/versions",
    "created_at": "2021-11-29T16:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461884",
    "user": "https://github.com/slel"
}
```

<a id='comment:43'></a>A request on the Cygwin mailing list to package pdf2svg
was answered as follows:

- https://cygwin.com/pipermail/cygwin/2021-November/250061.html

> The pdf2svg home page recommends instead pdftocairo
> from the poppler package, which does the same and
> is maintained as part of the package, rather than
> being a standalone utility which integrates the two,
> and is not as well maintained:

>
> {{{
> $ pdftocairo --help
> [...]
> }}}


That suggests `pdftocairo --svg file.pdf`
will transform `file.pdf` to `file.svg`.

It seems poppler is widely packaged:

- https://repology.org/project/poppler/versions



---

archive/issue_comments_461885.json:
```json
{
    "body": "<a id='comment:44'></a>Then, should we replace `pdf2svg` feature by `pdftocairo`?",
    "created_at": "2021-12-01T20:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461885",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:44'></a>Then, should we replace `pdf2svg` feature by `pdftocairo`?



---

archive/issue_comments_461886.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [comment:33 mkoeppe]:\n> While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)\n\n\nI just created #32956 for that. I will work on it tomorrow.",
    "created_at": "2021-12-01T21:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461886",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:45'></a>Replying to [comment:33 mkoeppe]:
> While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)


I just created #32956 for that. I will work on it tomorrow.



---

archive/issue_comments_461887.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:3 slabbe]:\n> Remainings usage of `have_program` are:\n\n\nI created #32957 to deal with remaining usage of `have_program`",
    "created_at": "2021-12-01T21:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461887",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:46'></a>Replying to [comment:3 slabbe]:
> Remainings usage of `have_program` are:


I created #32957 to deal with remaining usage of `have_program`



---

archive/issue_comments_461888.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:43 slelievre]:\n> That suggests `pdftocairo --svg file.pdf`\n> will transform `file.pdf` to `file.svg`.\n> \n> It seems poppler is widely packaged:\n> \n> - https://repology.org/project/poppler/versions\n\n\nI created #33005 to add the feature pdftocairo.",
    "created_at": "2021-12-09T17:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32650#issuecomment-461888",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:47'></a>Replying to [comment:43 slelievre]:
> That suggests `pdftocairo --svg file.pdf`
> will transform `file.pdf` to `file.svg`.
> 
> It seems poppler is widely packaged:
> 
> - https://repology.org/project/poppler/versions


I created #33005 to add the feature pdftocairo.
