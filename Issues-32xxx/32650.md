# Issue 32650: sage.misc.latex: Replace have_... functions by Features

archive/issues_032413.json:
```json
{
    "assignees": [],
    "body": "... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`\n\nDepends on #32634\n\nCC:  @kwankyu\n\nBranch: **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32650_\n\n",
    "closed_at": "2021-11-12T21:27:39Z",
    "created_at": "2021-10-07T19:10:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.misc.latex: Replace have_... functions by Features",
    "type": "issue",
    "updated_at": "2021-12-09T17:15:41Z",
    "url": "https://github.com/sagemath/sage/issues/32650",
    "user": "https://github.com/mkoeppe"
}
```
... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`

Depends on #32634

CC:  @kwankyu

Branch: **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**

Reviewer: **Matthias Koeppe**

Author: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/32650_





---

archive/issue_events_431490.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T19:10:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431490"
}
```



---

archive/issue_events_431491.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T19:10:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431491"
}
```



---

archive/issue_events_431492.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T19:10:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431492"
}
```



---

archive/issue_events_431493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T19:10:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431493"
}
```



---

archive/issue_comments_529613.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`\n``````\n",
    "created_at": "2021-10-07T19:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529613",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+... or more generally, replacing all uses of `sage.misc.os_tools.have_program` by `Executable`
``````




---

archive/issue_comments_529614.json:
```json
{
    "body": "Commit: **[f3291d8](https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2)**",
    "created_at": "2021-11-02T16:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529614",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[f3291d8](https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2)**



---

archive/issue_comments_529615.json:
```json
{
    "body": "Author: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2021-11-02T16:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529615",
    "user": "https://github.com/seblabbe"
}
```

Author: **Sébastien Labbé**



---

archive/issue_comments_529616.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nHere is some work towards that goal removing all uses of `have_program` in `misc/latex.py`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8068ba5d1b1e0919c9059d04dede6472b9f6bbd0\">8068ba5</a></td><td><code>32650: Creating feature dvipng</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f\">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2\">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969\">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2\">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr></table>\n",
    "created_at": "2021-11-02T16:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529616",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:2" align="right">Comment 2</div>

Here is some work towards that goal removing all uses of `have_program` in `misc/latex.py`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8068ba5d1b1e0919c9059d04dede6472b9f6bbd0">8068ba5</a></td><td><code>32650: Creating feature dvipng</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr></table>




---

archive/issue_comments_529617.json:
```json
{
    "body": "Branch: **[u/slabbe/32650](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/32650)**",
    "created_at": "2021-11-02T16:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529617",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/32650](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/32650)**



---

archive/issue_comments_529618.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nRemainings usage of `have_program` are:\n\n```\n$ git grep have_program\ninterfaces/chomp.py:        from sage.misc.sage_ostools import have_program\ninterfaces/chomp.py:        _have_chomp[program] = have_program(program)\ninterfaces/phc.py:            from sage.misc.sage_ostools import have_program\ninterfaces/phc.py:            if not have_program('phc'):\nmisc/dist.py:    from sage.misc.sage_ostools import have_program\nmisc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)\nmisc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)\nmisc/sage_ostools.pyx:def have_program(program, path=None):\nmisc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program\nmisc/sage_ostools.pyx:        sage: have_program('ls')\nmisc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')\nmisc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))\nmisc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')\nmisc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))\nmisc/viewer.py:    from sage.misc.sage_ostools import have_program\nmisc/viewer.py:    elif have_program('xdg-open'):\nmisc/viewer.py:                if have_program(cmd):\nmisc/viewer.py:                if have_program(cmd):\nmisc/viewer.py:                if have_program(cmd):\nplot/animate.py:        from sage.misc.sage_ostools import have_program\nplot/animate.py:        have_convert = have_program('convert')\nplot/animate.py:        from sage.misc.sage_ostools import have_program\nplot/animate.py:        return have_program('ffmpeg')\nplot/graphics.py:                from sage.misc.sage_ostools import have_program\nplot/graphics.py:                                         if have_program(i)]\nplot/multigraphics.py:                from sage.misc.sage_ostools import have_program\nplot/multigraphics.py:                                         if have_program(i)]\n```",
    "created_at": "2021-11-02T16:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529618",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">Comment 3</div>

Remainings usage of `have_program` are:

```
$ git grep have_program
interfaces/chomp.py:        from sage.misc.sage_ostools import have_program
interfaces/chomp.py:        _have_chomp[program] = have_program(program)
interfaces/phc.py:            from sage.misc.sage_ostools import have_program
interfaces/phc.py:            if not have_program('phc'):
misc/dist.py:    from sage.misc.sage_ostools import have_program
misc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)
misc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)
misc/sage_ostools.pyx:def have_program(program, path=None):
misc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program
misc/sage_ostools.pyx:        sage: have_program('ls')
misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')
misc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))
misc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')
misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))
misc/viewer.py:    from sage.misc.sage_ostools import have_program
misc/viewer.py:    elif have_program('xdg-open'):
misc/viewer.py:                if have_program(cmd):
misc/viewer.py:                if have_program(cmd):
misc/viewer.py:                if have_program(cmd):
plot/animate.py:        from sage.misc.sage_ostools import have_program
plot/animate.py:        have_convert = have_program('convert')
plot/animate.py:        from sage.misc.sage_ostools import have_program
plot/animate.py:        return have_program('ffmpeg')
plot/graphics.py:                from sage.misc.sage_ostools import have_program
plot/graphics.py:                                         if have_program(i)]
plot/multigraphics.py:                from sage.misc.sage_ostools import have_program
plot/multigraphics.py:                                         if have_program(i)]
```



---

archive/issue_comments_529619.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed\">a5aebb9</a></td><td><code>32650: using features in plot/animate.py (currently with .require(need_msg) which is not yet supported)</code></td></tr></table>\n",
    "created_at": "2021-11-02T16:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed">a5aebb9</a></td><td><code>32650: using features in plot/animate.py (currently with .require(need_msg) which is not yet supported)</code></td></tr></table>




---

archive/issue_comments_529620.json:
```json
{
    "body": "Changed commit from **[f3291d8](https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2)** to **[a5aebb9](https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed)**",
    "created_at": "2021-11-02T16:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529620",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f3291d8](https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2)** to **[a5aebb9](https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed)**



---

archive/issue_comments_529621.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36\">2e9a6b1</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>\n",
    "created_at": "2021-11-02T16:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529621",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36">2e9a6b1</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>




---

archive/issue_comments_529622.json:
```json
{
    "body": "Changed commit from **[a5aebb9](https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed)** to **[2e9a6b1](https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36)**",
    "created_at": "2021-11-02T16:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529622",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a5aebb9](https://github.com/sagemath/sagetrac-mirror/commit/a5aebb91127617da0d0662f43e4fdc476dbea9ed)** to **[2e9a6b1](https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36)**



---

archive/issue_comments_529623.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI suggest this ticket should handle only the removal of `have_program` in `misc.latex.py` and `sage.plot`.\n\nTODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?",
    "created_at": "2021-11-02T16:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529623",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">Comment 6</div>

I suggest this ticket should handle only the removal of `have_program` in `misc.latex.py` and `sage.plot`.

TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?



---

archive/issue_comments_529624.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddd2287595b2d3bb115767cb008b50166bd65e95\">ddd2287</a></td><td><code>32650: using features in plot/animate.py (currently with .require(need_msg) which is not yet supported)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c\">d438c45</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>\n",
    "created_at": "2021-11-02T20:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529624",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddd2287595b2d3bb115767cb008b50166bd65e95">ddd2287</a></td><td><code>32650: using features in plot/animate.py (currently with .require(need_msg) which is not yet supported)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c">d438c45</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>




---

archive/issue_comments_529625.json:
```json
{
    "body": "Changed commit from **[2e9a6b1](https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36)** to **[d438c45](https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c)**",
    "created_at": "2021-11-02T20:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2e9a6b1](https://github.com/sagemath/sagetrac-mirror/commit/2e9a6b12f61fd71a89ed6a7825971e5f96b57d36)** to **[d438c45](https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c)**



---

archive/issue_comments_529626.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0\">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a\">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>\n",
    "created_at": "2021-11-02T20:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529626",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr></table>




---

archive/issue_comments_529627.json:
```json
{
    "body": "Changed commit from **[d438c45](https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c)** to **[cf02094](https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a)**",
    "created_at": "2021-11-02T20:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529627",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d438c45](https://github.com/sagemath/sagetrac-mirror/commit/d438c45692954fe96403301ff52b9e781edfd24c)** to **[cf02094](https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a)**



---

archive/issue_comments_529628.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@seblabbe](#comment%3A6):\n> TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?\n\nI decided to get rid of the `.require(needed_for_msg)`. I did a forced push to clean the commit about `plot/animate.py` file.",
    "created_at": "2021-11-02T20:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529628",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@seblabbe](#comment%3A6):
> TODO: Answer this question: do we want `.require(needed_for_msg)` to provide an additional message explaining why the feature is needed for?

I decided to get rid of the `.require(needed_for_msg)`. I did a forced push to clean the commit about `plot/animate.py` file.



---

archive/issue_comments_529629.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nOn my side, the command\n\n```\n$ sage -tp --optional=sage,optional,external --long src/sage/features src/sage/plot src/sage/doctest\n```\ncurrently gives:\n\n```\nGit branch: 32650\nUsing --optional=4ti2,bliss,cbc,ccache,cryptominisat,database_symbolic_data,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,libnauty,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,rubiks,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_numerical_backends_coin,sage_spkg,sage_sws2rst\nExternal software to be detected: 4ti2,cplex,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,lualatex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,pdf2svg,pdflatex,rubiks,scilab,xelatex\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 95 files using 8 threads.\n[...]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 455.6 seconds\n    cpu time: 680.6 seconds\n    cumulative wall time: 2815.7 seconds\nExternal software detected for doctesting: dvipng,ffmpeg,graphviz,imagemagick,internet,latex,lualatex,octave,pandoc,pdf2svg,pdflatex,xelatex\n```",
    "created_at": "2021-11-02T20:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529629",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">Comment 10</div>

On my side, the command

```
$ sage -tp --optional=sage,optional,external --long src/sage/features src/sage/plot src/sage/doctest
```
currently gives:

```
Git branch: 32650
Using --optional=4ti2,bliss,cbc,ccache,cryptominisat,database_symbolic_data,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,libnauty,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,rubiks,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_numerical_backends_coin,sage_spkg,sage_sws2rst
External software to be detected: 4ti2,cplex,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,lualatex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,pdf2svg,pdflatex,rubiks,scilab,xelatex
Sorting sources by runtime so that slower doctests are run first....
Doctesting 95 files using 8 threads.
[...]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 455.6 seconds
    cpu time: 680.6 seconds
    cumulative wall time: 2815.7 seconds
External software detected for doctesting: dvipng,ffmpeg,graphviz,imagemagick,internet,latex,lualatex,octave,pandoc,pdf2svg,pdflatex,xelatex
```



---

archive/issue_events_431494.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-11-02T20:52:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431494"
}
```



---

archive/issue_comments_529630.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76\">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr></table>\n",
    "created_at": "2021-11-02T21:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529630",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr></table>




---

archive/issue_comments_529631.json:
```json
{
    "body": "Changed commit from **[cf02094](https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a)** to **[28f1f4a](https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76)**",
    "created_at": "2021-11-02T21:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf02094](https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a)** to **[28f1f4a](https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76)**



---

archive/issue_comments_529632.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nNeeds review!",
    "created_at": "2021-11-02T21:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529632",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:12" align="right">Comment 12</div>

Needs review!



---

archive/issue_comments_529633.json:
```json
{
    "body": "Changed commit from **[28f1f4a](https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76)** to **[5d9414d](https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab)**",
    "created_at": "2021-11-04T10:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529633",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[28f1f4a](https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76)** to **[5d9414d](https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab)**



---

archive/issue_comments_529634.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab\">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr></table>\n",
    "created_at": "2021-11-04T10:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529634",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr></table>




---

archive/issue_comments_529635.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI added a commit to fix a pyflakes warning.",
    "created_at": "2021-11-04T10:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529635",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:14" align="right">Comment 14</div>

I added a commit to fix a pyflakes warning.



---

archive/issue_comments_529636.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\n@mkoeppe: I have a question for you with respect to a choice I made I am not sure of. Within the class `class latex(Executable)`, I addded the method `is_functional` where I reused the code which was in the previous `have_latex` in `sage.misc.latex.py`. This allows to have a behavior which matches the previous behavior when `have_latex` was called. But doing so, there are now imports `from sage.misc.latex import `_run_latex_`, _latex_file_` within the file `sage/features/latex.py`. Is this a file dependency we want to avoid with respect to modularization?",
    "created_at": "2021-11-04T10:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529636",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:15" align="right">Comment 15</div>

@mkoeppe: I have a question for you with respect to a choice I made I am not sure of. Within the class `class latex(Executable)`, I addded the method `is_functional` where I reused the code which was in the previous `have_latex` in `sage.misc.latex.py`. This allows to have a behavior which matches the previous behavior when `have_latex` was called. But doing so, there are now imports `from sage.misc.latex import `_run_latex_`, _latex_file_` within the file `sage/features/latex.py`. Is this a file dependency we want to avoid with respect to modularization?



---

archive/issue_comments_529637.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nGreat question. In this code:\n\n```\n+    def is_functional(self):\n...\n+        from sage.misc.latex import _run_latex_, _latex_file_\n```\nit would probably be good to use `try...except` around the import and return a `False` test result if `sage.misc.latex` is not available.",
    "created_at": "2021-11-04T15:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529637",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">Comment 16</div>

Great question. In this code:

```
+    def is_functional(self):
...
+        from sage.misc.latex import _run_latex_, _latex_file_
```
it would probably be good to use `try...except` around the import and return a `False` test result if `sage.misc.latex` is not available.



---

archive/issue_comments_529638.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@mkoeppe](#comment%3A16):\n> and return a `False` test result if `sage.misc.latex` is not available. \n\n`False`? But maybe `latex` is available and functional even if `sage.misc.latex` module is not available, so we could return `True`.",
    "created_at": "2021-11-04T16:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529638",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@mkoeppe](#comment%3A16):
> and return a `False` test result if `sage.misc.latex` is not available. 

`False`? But maybe `latex` is available and functional even if `sage.misc.latex` module is not available, so we could return `True`.



---

archive/issue_comments_529639.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nDo we have code that calls `latex` without going through `sage.misc.latex`?",
    "created_at": "2021-11-04T16:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529639",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">Comment 18</div>

Do we have code that calls `latex` without going through `sage.misc.latex`?



---

archive/issue_comments_529640.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nIn fact, I hate the function `_run_latex_` as it is a bunch of spaghetti code involving everything:\n\nhttps://gitlab.com/sagemath/sage/-/blob/develop/src/sage/misc/latex.py#L643\n\nSo I think it is preferable to not call it within `features/latex.py` at all.",
    "created_at": "2021-11-04T16:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529640",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:19" align="right">Comment 19</div>

In fact, I hate the function `_run_latex_` as it is a bunch of spaghetti code involving everything:

https://gitlab.com/sagemath/sage/-/blob/develop/src/sage/misc/latex.py#L643

So I think it is preferable to not call it within `features/latex.py` at all.



---

archive/issue_comments_529641.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> Do we have code that calls `latex` without going through `sage.misc.latex`?\n\nYes, it can be done without, by using a simple `subprocess.run`. I do that in #20343, for instance in the method `def pdf(self)`.",
    "created_at": "2021-11-04T16:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529641",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@mkoeppe](#comment%3A18):
> Do we have code that calls `latex` without going through `sage.misc.latex`?

Yes, it can be done without, by using a simple `subprocess.run`. I do that in #20343, for instance in the method `def pdf(self)`.



---

archive/issue_comments_529642.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\n(note to myself: I just noticed that `have_latex` should be updated in `src/sage/doctest/external.py` to use features as well.)",
    "created_at": "2021-11-04T16:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529642",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:21" align="right">Comment 21</div>

(note to myself: I just noticed that `have_latex` should be updated in `src/sage/doctest/external.py` to use features as well.)



---

archive/issue_comments_529643.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nAre you still planning to add the distro info for pdf2svg here as you wrote in #20343?",
    "created_at": "2021-11-04T20:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529643",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">Comment 22</div>

Are you still planning to add the distro info for pdf2svg here as you wrote in #20343?



---

archive/issue_comments_529644.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nYes.",
    "created_at": "2021-11-04T20:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529644",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:23" align="right">Comment 23</div>

Yes.



---

archive/issue_comments_529645.json:
```json
{
    "body": "Changed commit from **[5d9414d](https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab)** to **[345c760](https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624)**",
    "created_at": "2021-11-04T21:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5d9414d](https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab)** to **[345c760](https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624)**



---

archive/issue_comments_529646.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624\">345c760</a></td><td><code>32650: using features in has_latex method of doctest/external.py</code></td></tr></table>\n",
    "created_at": "2021-11-04T21:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624">345c760</a></td><td><code>32650: using features in has_latex method of doctest/external.py</code></td></tr></table>




---

archive/issue_comments_529647.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4\">6c6b332</a></td><td><code>32650: independent and improved method latex().is_functional()</code></td></tr></table>\n",
    "created_at": "2021-11-04T21:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529647",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4">6c6b332</a></td><td><code>32650: independent and improved method latex().is_functional()</code></td></tr></table>




---

archive/issue_comments_529648.json:
```json
{
    "body": "Changed commit from **[345c760](https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624)** to **[6c6b332](https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4)**",
    "created_at": "2021-11-04T21:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529648",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[345c760](https://github.com/sagemath/sagetrac-mirror/commit/345c760b9e2e31829b995ddbb7b58bb7ce531624)** to **[6c6b332](https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4)**



---

archive/issue_comments_529649.json:
```json
{
    "body": "Changed commit from **[6c6b332](https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4)** to **[c8330fe](https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30)**",
    "created_at": "2021-11-04T21:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6c6b332](https://github.com/sagemath/sagetrac-mirror/commit/6c6b3325a0927ae00b773b34c63cd7db9c7589f4)** to **[c8330fe](https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30)**



---

archive/issue_comments_529650.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63555d2ee5280e83f14cd207a5d20d4fff3abc5a\">63555d2</a></td><td><code>32650: adding spkg pdf2svg in build/pkgs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30\">c8330fe</a></td><td><code>32650: linking pdf2svg feature to spkg pdf2svg</code></td></tr></table>\n",
    "created_at": "2021-11-04T21:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529650",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63555d2ee5280e83f14cd207a5d20d4fff3abc5a">63555d2</a></td><td><code>32650: adding spkg pdf2svg in build/pkgs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30">c8330fe</a></td><td><code>32650: linking pdf2svg feature to spkg pdf2svg</code></td></tr></table>




---

archive/issue_comments_529651.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nSo I created the `build/pkgs/pdf2svg` by immitating what was done for `build/pkgs/pandoc` and `build/pkgs/graphviz`. I hope it makes sense.",
    "created_at": "2021-11-04T21:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529651",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:27" align="right">Comment 27</div>

So I created the `build/pkgs/pdf2svg` by immitating what was done for `build/pkgs/pandoc` and `build/pkgs/graphviz`. I hope it makes sense.



---

archive/issue_comments_529652.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nWhile testing `sage -i pdf2svg`, I noticed this strange part in the output:\n\n```\nError: pdf2svg is a dummy script package that the Sage distribution uses\nto provide information about equivalent system packages.\nIt cannot be installed using the Sage distribution.\nPlease install it manually, for example using the system packages\nrecommended at the end of a run of './configure'\nSee below for package-specific information.\n```\n\nmaybe this message should be fixed in another ticket.",
    "created_at": "2021-11-04T21:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529652",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:28" align="right">Comment 28</div>

While testing `sage -i pdf2svg`, I noticed this strange part in the output:

```
Error: pdf2svg is a dummy script package that the Sage distribution uses
to provide information about equivalent system packages.
It cannot be installed using the Sage distribution.
Please install it manually, for example using the system packages
recommended at the end of a run of './configure'
See below for package-specific information.
```

maybe this message should be fixed in another ticket.



---

archive/issue_comments_529653.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nWhat did you expect to happen?",
    "created_at": "2021-11-04T21:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529653",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

What did you expect to happen?



---

archive/issue_comments_529654.json:
```json
{
    "body": "Changed commit from **[c8330fe](https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30)** to **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**",
    "created_at": "2021-11-04T21:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529654",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c8330fe](https://github.com/sagemath/sagetrac-mirror/commit/c8330fe39151df1bed83de2bfdb3376e419efc30)** to **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**



---

archive/issue_comments_529655.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a\">2ea4d9e</a></td><td><code>32650: fixing two doctests now that we latex().require() it when we use it</code></td></tr></table>\n",
    "created_at": "2021-11-04T21:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529655",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a">2ea4d9e</a></td><td><code>32650: fixing two doctests now that we latex().require() it when we use it</code></td></tr></table>




---

archive/issue_comments_529656.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@mkoeppe](#comment%3A29):\n> What did you expect to happen?\n\nWell, the part that surprised me is `Error: pdf2svg is a dummy script package`, which I attributed to `_prereq`, `_recommmended` and `_bootstrap`. But, now, rereading it again, I understand what it means. It is just that it does not contain the source. Maybe `dummy` could be replaced by another word which better describe what it is? Or just leave it as it is...",
    "created_at": "2021-11-04T22:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529656",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@mkoeppe](#comment%3A29):
> What did you expect to happen?

Well, the part that surprised me is `Error: pdf2svg is a dummy script package`, which I attributed to `_prereq`, `_recommmended` and `_bootstrap`. But, now, rereading it again, I understand what it means. It is just that it does not contain the source. Maybe `dummy` could be replaced by another word which better describe what it is? Or just leave it as it is...



---

archive/issue_comments_529657.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nOk, so this ticket now needs review. I did not have anything else in mind to be done with respect to `have_...` within `sage.misc.latex.py` and `sage.plot`.",
    "created_at": "2021-11-04T22:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529657",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:32" align="right">Comment 32</div>

Ok, so this ticket now needs review. I did not have anything else in mind to be done with respect to `have_...` within `sage.misc.latex.py` and `sage.plot`.



---

archive/issue_comments_529658.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nWhile at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)",
    "created_at": "2021-11-04T22:17:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529658",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>

While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)



---

archive/issue_comments_529659.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nok, I can do this, but next week. Going to bed now!",
    "created_at": "2021-11-04T22:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529659",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:34" align="right">Comment 34</div>

ok, I can do this, but next week. Going to bed now!



---

archive/issue_comments_529660.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-11-07T04:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529660",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_529661.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nLGTM. One green patchbot, one patchbot that is not feeling well.",
    "created_at": "2021-11-07T04:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529661",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">Comment 36</div>

LGTM. One green patchbot, one patchbot that is not feeling well.



---

archive/issue_events_431495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-07T04:35:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431495"
}
```



---

archive/issue_events_431496.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-07T04:35:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431496"
}
```



---

archive/issue_events_431497.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-11-12T21:27:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431497"
}
```



---

archive/issue_events_431498.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "470c171913b0cbadfd1da580e1948dcd4122a5d1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-11-12T21:27:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32650#event-431498"
}
```



---

archive/issue_comments_529662.json:
```json
{
    "body": "Changed branch from **[u/slabbe/32650](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/32650)** to **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**",
    "created_at": "2021-11-12T21:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529662",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/slabbe/32650](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/32650)** to **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)**



---

archive/issue_comments_529663.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nThere does not seem to be a Cygwin package for pdf2svg.\n\nAt least I could not find one by searching Cygwin packages via\n\n- https://cygwin.com/packages/\n\nand the command `apt-cyg install pdf2svg` fails.",
    "created_at": "2021-11-18T15:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529663",
    "user": "https://github.com/slel"
}
```

<div id="comment:38" align="right">Comment 38</div>

There does not seem to be a Cygwin package for pdf2svg.

At least I could not find one by searching Cygwin packages via

- https://cygwin.com/packages/

and the command `apt-cyg install pdf2svg` fails.



---

archive/issue_comments_529664.json:
```json
{
    "body": "Changed commit from **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)** to none",
    "created_at": "2021-11-18T15:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529664",
    "user": "https://github.com/slel"
}
```

Changed commit from **[2ea4d9e](https://github.com/sagemath/sagetrac-mirror/commit/2ea4d9eaa99477cc248fd10bb049925d32806c1a)** to none



---

archive/issue_comments_529665.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nDo you mean that the file `build/pkgs/pdf2svg/distros/cygwin.txt` should be removed?",
    "created_at": "2021-11-18T16:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529665",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Do you mean that the file `build/pkgs/pdf2svg/distros/cygwin.txt` should be removed?



---

archive/issue_comments_529666.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nYes, otherwise configure ends with a recommendation\nto run `apt-cyg install pdf2svg`.",
    "created_at": "2021-11-18T16:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529666",
    "user": "https://github.com/slel"
}
```

<div id="comment:40" align="right">Comment 40</div>

Yes, otherwise configure ends with a recommendation
to run `apt-cyg install pdf2svg`.



---

archive/issue_comments_529667.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nOr package pdf2svg for Cygwin...  : )",
    "created_at": "2021-11-18T16:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529667",
    "user": "https://github.com/slel"
}
```

<div id="comment:41" align="right">Comment 41</div>

Or package pdf2svg for Cygwin...  : )



---

archive/issue_comments_529668.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nI created #32931 to deal with this issue.",
    "created_at": "2021-11-25T10:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529668",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:42" align="right">Comment 42</div>

I created #32931 to deal with this issue.



---

archive/issue_comments_529669.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nA request on the Cygwin mailing list to package pdf2svg\nwas answered as follows:\n\n- https://cygwin.com/pipermail/cygwin/2021-November/250061.html\n\n> The pdf2svg home page recommends instead pdftocairo\n> from the poppler package, which does the same and\n> is maintained as part of the package, rather than\n> being a standalone utility which integrates the two,\n> and is not as well maintained:\n\n>\n> ```\n> $ pdftocairo --help\n> [...]\n> ```\n\nThat suggests `pdftocairo --svg file.pdf`\nwill transform `file.pdf` to `file.svg`.\n\nIt seems poppler is widely packaged:\n\n- https://repology.org/project/poppler/versions",
    "created_at": "2021-11-29T16:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529669",
    "user": "https://github.com/slel"
}
```

<div id="comment:43" align="right">Comment 43</div>

A request on the Cygwin mailing list to package pdf2svg
was answered as follows:

- https://cygwin.com/pipermail/cygwin/2021-November/250061.html

> The pdf2svg home page recommends instead pdftocairo
> from the poppler package, which does the same and
> is maintained as part of the package, rather than
> being a standalone utility which integrates the two,
> and is not as well maintained:

>
> ```
> $ pdftocairo --help
> [...]
> ```

That suggests `pdftocairo --svg file.pdf`
will transform `file.pdf` to `file.svg`.

It seems poppler is widely packaged:

- https://repology.org/project/poppler/versions



---

archive/issue_comments_529670.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nThen, should we replace `pdf2svg` feature by `pdftocairo`?",
    "created_at": "2021-12-01T20:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529670",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:44" align="right">Comment 44</div>

Then, should we replace `pdf2svg` feature by `pdftocairo`?



---

archive/issue_comments_529671.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nReplying to [@mkoeppe](#comment%3A33):\n> While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)\n\nI just created #32956 for that. I will work on it tomorrow.",
    "created_at": "2021-12-01T21:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529671",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:45" align="right">Comment 45</div>

Replying to [@mkoeppe](#comment%3A33):
> While at it, also dummy script packages for `ffmpeg` and `imagemagick` could be added (see #30930)

I just created #32956 for that. I will work on it tomorrow.



---

archive/issue_comments_529672.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@seblabbe](#comment%3A3):\n> Remainings usage of `have_program` are:\n\nI created #32957 to deal with remaining usage of `have_program`",
    "created_at": "2021-12-01T21:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529672",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@seblabbe](#comment%3A3):
> Remainings usage of `have_program` are:

I created #32957 to deal with remaining usage of `have_program`



---

archive/issue_comments_529673.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nReplying to [@slel](#comment%3A43):\n> That suggests `pdftocairo --svg file.pdf`\n> will transform `file.pdf` to `file.svg`.\n> \n> It seems poppler is widely packaged:\n> \n> - https://repology.org/project/poppler/versions\n\nI created #33005 to add the feature pdftocairo.",
    "created_at": "2021-12-09T17:15:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/32650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/32650#issuecomment-529673",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:47" align="right">Comment 47</div>

Replying to [@slel](#comment%3A43):
> That suggests `pdftocairo --svg file.pdf`
> will transform `file.pdf` to `file.svg`.
> 
> It seems poppler is widely packaged:
> 
> - https://repology.org/project/poppler/versions

I created #33005 to add the feature pdftocairo.
