# Issue 12105: Warnings in `plot_slope_field`

Issue created by migration from https://trac.sagemath.org/ticket/12277

Original creator: novoselt

Original creation time: 2012-01-07 04:32:13

Assignee: jason, was

CC:  jason

If I do (in Sage 4.7.2 or 4.8.alpha6)

```
plot_slope_field(1, (1,2), (3,4))
```

(or anything else that I have tried), then in front of the plot, which looks as expected, I get

```
Warning: divide by zero encountered in divide
Warning: invalid value encountered in multiply
Warning: invalid value encountered in multiply
Warning: divide by zero encountered in divide
Warning: invalid value encountered in multiply
Warning: invalid value encountered in multiply
```


My investigation so far shows: this function is a little wrapper for `plot_vector_field` which sets new defaults for three options. If `headlength` is set to 0, there are warnings.

A possible workaround is to set it to something small: 0.001 seems to work on the screen. However, since with `headaxislength=0` and `headlength=0.2` I definitely see "a hair on the end", it does not seem to be satisfactory from a perfectionist point of view (and producing vector formats that may be scaled or printed with high resolution).

Besides, current settings do produce the accurate plot, it just shows warnings that should not be there, and I have no idea how to fix it.


---

Comment by jason created at 2012-01-07 11:47:23

It seems like I remember that this was fixed in the new matplotlib 1.1.0 release (an spkg is up on trac somewhere).


---

Comment by jason created at 2012-01-07 11:48:12

Ah yes, #11915.  Do you still see the problem after applying that spkg?


---

Comment by novoselt created at 2012-01-08 02:52:09

Replying to [comment:2 jason]:
> Ah yes, #11915.  Do you still see the problem after applying that spkg?

Yes, the same issue both in 4.7.2 and 4.8.alpha6 with #11915 applied. Are these warnings coming from matplotlib? Also, what would be an appropriate doctest for this bug?


---

Comment by kcrisman created at 2012-01-10 02:02:47

This is a dup of #11208?  Probably.  See also #2922.


---

Comment by novoselt created at 2012-01-10 02:42:03

Yes, strange I couldn't find it, I tried to search... My current workaround is that I have redefined `plot_slope_field`. It is in a way good, since I also had to fix aspect ratio (for 4.7.2) and changed defaults for colour and frame to match the textbook I am using.


---

Comment by novoselt created at 2012-01-10 02:42:03

Changing status from new to needs_review.


---

Comment by novoselt created at 2012-01-10 02:42:12

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2012-01-10 02:43:14

Am I supposed to do anything with author/reviewer fields?


---

Comment by kcrisman created at 2012-01-10 02:55:05

One puts the reviewers only to those who realized, it, at least in the usage lately.  If I misspelled your name, just fix it.


---

Comment by jdemeyer created at 2012-01-13 09:01:26

Resolution: duplicate
