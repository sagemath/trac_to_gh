# Issue 16582: Implement categories for Lie algebras

archive/issues_016582.json:
```json
{
    "body": "Assignee: tscrim\n\nPart of #14901. This implements a basic version of the categories:\n\n- Lie algebras\n  - With basis\n  - Finite dimensional\n\nand examples for each.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16819\n\n",
    "created_at": "2014-08-14T10:43:38Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "title": "Implement categories for Lie algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16582",
    "user": "tscrim"
}
```
Assignee: tscrim

Part of #14901. This implements a basic version of the categories:

- Lie algebras
  - With basis
  - Finite dimensional

and examples for each.

Issue created by migration from https://trac.sagemath.org/ticket/16819





---

archive/issue_comments_218408.json:
```json
{
    "body": "Changing keywords from \"\" to \"lie algebras\".",
    "created_at": "2014-08-21T00:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218408",
    "user": "tscrim"
}
```

Changing keywords from "" to "lie algebras".



---

archive/issue_comments_218409.json:
```json
{
    "body": "Yay, the first part of Lie algebras that is ready for review!!! Next up will be #16820.\n----\nNew commits:",
    "created_at": "2014-08-21T00:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218409",
    "user": "tscrim"
}
```

Yay, the first part of Lie algebras that is ready for review!!! Next up will be #16820.
----
New commits:



---

archive/issue_comments_218410.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-21T00:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218410",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_218411.json:
```json
{
    "body": "Changing component from algebra to categories.",
    "created_at": "2014-08-21T00:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218411",
    "user": "tscrim"
}
```

Changing component from algebra to categories.



---

archive/issue_comments_218412.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-29T04:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218412",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218413.json:
```json
{
    "body": "#16820 is also ready for review (so a \"real\" implementation that can be reviewed simultaneously).",
    "created_at": "2014-11-29T04:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218413",
    "user": "tscrim"
}
```

#16820 is also ready for review (so a "real" implementation that can be reviewed simultaneously).



---

archive/issue_comments_218414.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-18T00:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218414",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218415.json:
```json
{
    "body": "\n```\n+ The Killing form is defined as the matrix corresponding to the\n+ action of `\\mathrm{ad}_x \\circ \\mathrm{ad}_y` in the basis\n+ of ``self``.\n```\n\n\nYou mean \"Killing matrix\".\n\n(Mainly posting this to get cc.)",
    "created_at": "2015-02-20T06:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218415",
    "user": "darij"
}
```


```
+ The Killing form is defined as the matrix corresponding to the
+ action of `\mathrm{ad}_x \circ \mathrm{ad}_y` in the basis
+ of ``self``.
```


You mean "Killing matrix".

(Mainly posting this to get cc.)



---

archive/issue_comments_218416.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-28T07:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218416",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218417.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-09T19:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218417",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218418.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T00:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218418",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T00:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218419",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218420.json:
```json
{
    "body": "Something to note is that each of the examples are meant to be minimal.\n\nSpecifically I made the general `LieAlgebras` example be the algebra generated by a set of elements in order to avoid not having to worry about if the associative algebra does not have a good basis method. However this is easy enough to change if you feel strongly about it. Same for the `WithBasis` example.",
    "created_at": "2015-03-13T01:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218420",
    "user": "tscrim"
}
```

Something to note is that each of the examples are meant to be minimal.

Specifically I made the general `LieAlgebras` example be the algebra generated by a set of elements in order to avoid not having to worry about if the associative algebra does not have a good basis method. However this is easy enough to change if you feel strongly about it. Same for the `WithBasis` example.



---

archive/issue_comments_218421.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T01:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218421",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218422.json:
```json
{
    "body": "The `lie_algebra_generators` is currently a lie, so yes, it should be changed. About the names, thanks for accepting a number -- that's a good step -- but I'm still unsure why I am supposed to provide names if I provide a module, and what these names are used for. But we can talk about it in Davis, which I guess will be easier.",
    "created_at": "2015-03-13T03:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218422",
    "user": "darij"
}
```

The `lie_algebra_generators` is currently a lie, so yes, it should be changed. About the names, thanks for accepting a number -- that's a good step -- but I'm still unsure why I am supposed to provide names if I provide a module, and what these names are used for. But we can talk about it in Davis, which I guess will be easier.



---

archive/issue_comments_218423.json:
```json
{
    "body": "Actually, I was stupid. The Lie algebra generators are fine, since `LieAlgebraFromAssociative` is defined to be the Lie superalgebra generated by `gens`, not the whole associative algebra. I should have actually read your post, if not the doc :/\n\nOn the other hand, I would expect to see the whole associative algebra implemented in a visible place. Is this in one of the followup tickets?",
    "created_at": "2015-03-17T21:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218423",
    "user": "darij"
}
```

Actually, I was stupid. The Lie algebra generators are fine, since `LieAlgebraFromAssociative` is defined to be the Lie superalgebra generated by `gens`, not the whole associative algebra. I should have actually read your post, if not the doc :/

On the other hand, I would expect to see the whole associative algebra implemented in a visible place. Is this in one of the followup tickets?



---

archive/issue_comments_218424.json:
```json
{
    "body": "Replying to [comment:14 darij]:\n> Actually, I was stupid. The Lie algebra generators are fine, since `LieAlgebraFromAssociative` is defined to be the Lie superalgebra generated by `gens`, not the whole associative algebra. I should have actually read your post, if not the doc :/\n> \n> On the other hand, I would expect to see the whole associative algebra implemented in a visible place. Is this in one of the followup tickets?\n\nIt's in #16820, but feel free to change it here if you want.",
    "created_at": "2015-03-17T22:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218424",
    "user": "tscrim"
}
```

Replying to [comment:14 darij]:
> Actually, I was stupid. The Lie algebra generators are fine, since `LieAlgebraFromAssociative` is defined to be the Lie superalgebra generated by `gens`, not the whole associative algebra. I should have actually read your post, if not the doc :/
> 
> On the other hand, I would expect to see the whole associative algebra implemented in a visible place. Is this in one of the followup tickets?

It's in #16820, but feel free to change it here if you want.



---

archive/issue_comments_218425.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T05:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218425",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218426.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-18T05:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218426",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_218427.json:
```json
{
    "body": "Please ignore \u200bf7ba301 \"rest\". That's an unfinished set of changes on the abelian Lie algebra example that causes 2 mysterious bugs.",
    "created_at": "2015-03-18T05:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218427",
    "user": "darij"
}
```

Please ignore â€‹f7ba301 "rest". That's an unfinished set of changes on the abelian Lie algebra example that causes 2 mysterious bugs.



---

archive/issue_comments_218428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T16:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218428",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218429.json:
```json
{
    "body": "I've removed the names now, but I'm anything but sure of the resulting code's correctness; I still need to actually review it.\n\nThere is a weird doctest failure now in the `lift` method, but I find the fact that it used to work before even weirder. Moreover it wasn't working correctly to begin with, since the lift would end up living in a noncommutative(!) multivariate polynomial ring. The universal enveloping algebra of an abelian Lie algebra is the commutative multivariate polynomial ring. But I have no idea where in the code the construction of the universal envelope is...",
    "created_at": "2015-03-18T17:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218429",
    "user": "darij"
}
```

I've removed the names now, but I'm anything but sure of the resulting code's correctness; I still need to actually review it.

There is a weird doctest failure now in the `lift` method, but I find the fact that it used to work before even weirder. Moreover it wasn't working correctly to begin with, since the lift would end up living in a noncommutative(!) multivariate polynomial ring. The universal enveloping algebra of an abelian Lie algebra is the commutative multivariate polynomial ring. But I have no idea where in the code the construction of the universal envelope is...



---

archive/issue_comments_218430.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T17:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218430",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218431.json:
```json
{
    "body": "Actually, my fixes probably break more stuff than they fix. Need to discuss where we are going with this after the talk.",
    "created_at": "2015-03-18T17:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218431",
    "user": "darij"
}
```

Actually, my fixes probably break more stuff than they fix. Need to discuss where we are going with this after the talk.



---

archive/issue_comments_218432.json:
```json
{
    "body": "The `universal_enveloping_algebra` code is in the category and it calls the `lift`, which calls the `_construct_UEA` method (where the actual construction occurs). In the case of this Abelian Lie algebra, is it calls the generic code, which it returns something which thinks it's noncommutative, but the relations should make it commutative polynomial ring. Again, I was thinking minimial implementation, but it might be useful to implement this explicitly for the example...",
    "created_at": "2015-03-18T18:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218432",
    "user": "tscrim"
}
```

The `universal_enveloping_algebra` code is in the category and it calls the `lift`, which calls the `_construct_UEA` method (where the actual construction occurs). In the case of this Abelian Lie algebra, is it calls the generic code, which it returns something which thinks it's noncommutative, but the relations should make it commutative polynomial ring. Again, I was thinking minimial implementation, but it might be useful to implement this explicitly for the example...



---

archive/issue_comments_218433.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-22T15:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218433",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218434.json:
```json
{
    "body": "Question on categories/lie_algebras.py: if the (underscored) `_bracket_` method is optional, shouldn't the other methods rely on `bracket` rather than `_bracket_`?\n\nAlso, should I keep removing unused imports found by pyflakes, or do they become necessary in further patches? e.g.:\n`from sage.structure.sage_object import have_same_parent`",
    "created_at": "2015-03-23T02:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218434",
    "user": "darij"
}
```

Question on categories/lie_algebras.py: if the (underscored) `_bracket_` method is optional, shouldn't the other methods rely on `bracket` rather than `_bracket_`?

Also, should I keep removing unused imports found by pyflakes, or do they become necessary in further patches? e.g.:
`from sage.structure.sage_object import have_same_parent`



---

archive/issue_comments_218435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-23T02:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218435",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218436.json:
```json
{
    "body": "Strictly speaking we don't want the user to override `bracket`, but instead call `_bracket_`. So it would probably be best to make `_bracket_` on the elements be a non-optional ``@`abstract_method`.\n\nYou can do the pyflakes cleanup as they can be added back in if they are needed elsewhere (they probably aren't).",
    "created_at": "2015-03-23T21:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218436",
    "user": "tscrim"
}
```

Strictly speaking we don't want the user to override `bracket`, but instead call `_bracket_`. So it would probably be best to make `_bracket_` on the elements be a non-optional ``@`abstract_method`.

You can do the pyflakes cleanup as they can be added back in if they are needed elsewhere (they probably aren't).



---

archive/issue_comments_218437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-23T22:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218437",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-24T23:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218438",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-27T08:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218440.json:
```json
{
    "body": "`universal_enveloping_algebra` automatically constructs the lift morphism and the coercion by calling the (`lazy_attribute`) `lift`, whereas `_construct_UEA` simply constructs the object. I did things this way so that the user doesn't have to worry about constructing the coercion, but if the user wants to not have a coercion, then one can just implement `universal_enveloping_algebra`.",
    "created_at": "2015-03-27T14:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218440",
    "user": "tscrim"
}
```

`universal_enveloping_algebra` automatically constructs the lift morphism and the coercion by calling the (`lazy_attribute`) `lift`, whereas `_construct_UEA` simply constructs the object. I did things this way so that the user doesn't have to worry about constructing the coercion, but if the user wants to not have a coercion, then one can just implement `universal_enveloping_algebra`.



---

archive/issue_comments_218441.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-28T07:20:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218441",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218442.json:
```json
{
    "body": "Thanks for the explanation!",
    "created_at": "2015-03-28T07:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218442",
    "user": "darij"
}
```

Thanks for the explanation!



---

archive/issue_comments_218443.json:
```json
{
    "body": "AFAIK, we don't really have any support for non-free modules. Also I use the free module for finite dimensional with basis to do the linear algebra for the algorithms. However I don't think I need it except in that category. So I'm okay with changing the name or removing the method since in fin-dim w/ basis since I added `_dense_free_module` for compatibility with `CombinatorialFreeModule`(`Element`) methods.",
    "created_at": "2015-03-28T16:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218443",
    "user": "tscrim"
}
```

AFAIK, we don't really have any support for non-free modules. Also I use the free module for finite dimensional with basis to do the linear algebra for the algorithms. However I don't think I need it except in that category. So I'm okay with changing the name or removing the method since in fin-dim w/ basis since I added `_dense_free_module` for compatibility with `CombinatorialFreeModule`(`Element`) methods.



---

archive/issue_comments_218444.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-28T17:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218444",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218445.json:
```json
{
    "body": "The `is_field` can be removed; that was a holdover from when I first made this a subcategory of `MagmaticAlgebras`. Also we should separate the test for antisymmetry from the Jacobi as this gives more information when `TestSuite` fails.",
    "created_at": "2015-03-28T17:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218445",
    "user": "tscrim"
}
```

The `is_field` can be removed; that was a holdover from when I first made this a subcategory of `MagmaticAlgebras`. Also we should separate the test for antisymmetry from the Jacobi as this gives more information when `TestSuite` fails.



---

archive/issue_comments_218446.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-28T17:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218446",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218447.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-28T22:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218447",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-29T00:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218448",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218449.json:
```json
{
    "body": "We have `module` and `to_vector` because the (fin-dim) Lie algebra (with basis) doesn't know how to do linear algebra (which requires the specialized implementations of `FreeModule`).",
    "created_at": "2015-03-29T00:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218449",
    "user": "tscrim"
}
```

We have `module` and `to_vector` because the (fin-dim) Lie algebra (with basis) doesn't know how to do linear algebra (which requires the specialized implementations of `FreeModule`).



---

archive/issue_comments_218450.json:
```json
{
    "body": "So, these methods become important when `self` does not belong to `FreeModules(self.base_ring())` ?\n\nBut shouldn't `WithBasis` automatically force it to be a `FreeModules` parent?",
    "created_at": "2015-03-29T00:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218450",
    "user": "darij"
}
```

So, these methods become important when `self` does not belong to `FreeModules(self.base_ring())` ?

But shouldn't `WithBasis` automatically force it to be a `FreeModules` parent?



---

archive/issue_comments_218451.json:
```json
{
    "body": "We don't have a category of `FreeModules` (in fact, I don't really believe this should be a category), but the methods are important when doing things like finding (a basis for) the derived subalgebra.",
    "created_at": "2015-03-29T00:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218451",
    "user": "tscrim"
}
```

We don't have a category of `FreeModules` (in fact, I don't really believe this should be a category), but the methods are important when doing things like finding (a basis for) the derived subalgebra.



---

archive/issue_comments_218452.json:
```json
{
    "body": "Uhm... don't we?\n\n```\nsage: FreeModules(QQ)\nCategory of vector spaces with basis over Rational Field\nsage: FreeModules(ZZ)\nCategory of modules with basis over Integer Ring\n```\n\n\nCan it be that what you want are *un-indexed* free modules, i.e., ones which consist of row vectors?",
    "created_at": "2015-03-29T00:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218452",
    "user": "darij"
}
```

Uhm... don't we?

```
sage: FreeModules(QQ)
Category of vector spaces with basis over Rational Field
sage: FreeModules(ZZ)
Category of modules with basis over Integer Ring
```


Can it be that what you want are *un-indexed* free modules, i.e., ones which consist of row vectors?



---

archive/issue_comments_218453.json:
```json
{
    "body": "Duh, a module with a basis is a free module by definition...(Although that specific category is just an alias.) However in this case it is somewhat stronger of a category in that there is a distinguished basis (i.e., like sets with a marked point). Perhaps we need to lower the `to_vector` into the fin-dim w/ basis category (if it's not already there)?",
    "created_at": "2015-03-29T01:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218453",
    "user": "tscrim"
}
```

Duh, a module with a basis is a free module by definition...(Although that specific category is just an alias.) However in this case it is somewhat stronger of a category in that there is a distinguished basis (i.e., like sets with a marked point). Perhaps we need to lower the `to_vector` into the fin-dim w/ basis category (if it's not already there)?



---

archive/issue_comments_218454.json:
```json
{
    "body": "OK, let me be lazy/stupid and just ask concretely what methods require `to_vector` and `module` to work and would break if these were removed. What do you mean by a \"free module\" that a `FiniteDimensionalLieAlgebraWithBasis` does not satisfy?",
    "created_at": "2015-03-29T01:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218454",
    "user": "darij"
}
```

OK, let me be lazy/stupid and just ask concretely what methods require `to_vector` and `module` to work and would break if these were removed. What do you mean by a "free module" that a `FiniteDimensionalLieAlgebraWithBasis` does not satisfy?



---

archive/issue_comments_218455.json:
```json
{
    "body": "Basically anything in `FiniteDimensionalLieAlgebraWithBasis` since they are required to do things like echelonize a matrix constructed from a set of elements in the Lie algebra, and then pull back the rows of this matrix. Although `to_vector` doesn't strictly need to be a vector, but there needs to be a way to construct a list consistently to pass to a matrix. However having the `to_vector` gives better support for a forgetful functor if such a thing gets implemented. Although perhaps it should be `_vector_` so it could be passed to to the `vector()` function...",
    "created_at": "2015-03-29T01:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218455",
    "user": "tscrim"
}
```

Basically anything in `FiniteDimensionalLieAlgebraWithBasis` since they are required to do things like echelonize a matrix constructed from a set of elements in the Lie algebra, and then pull back the rows of this matrix. Although `to_vector` doesn't strictly need to be a vector, but there needs to be a way to construct a list consistently to pass to a matrix. However having the `to_vector` gives better support for a forgetful functor if such a thing gets implemented. Although perhaps it should be `_vector_` so it could be passed to to the `vector()` function...



---

archive/issue_comments_218456.json:
```json
{
    "body": "OK... Do I then understand you correctly that `to_vector` should return a list or tuple (of coordinates) as opposed to a family or (say) an element of NSym? And `module` should return a free module in which these `to_vector`s live?",
    "created_at": "2015-03-29T15:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218456",
    "user": "darij"
}
```

OK... Do I then understand you correctly that `to_vector` should return a list or tuple (of coordinates) as opposed to a family or (say) an element of NSym? And `module` should return a free module in which these `to_vector`s live?



---

archive/issue_comments_218457.json:
```json
{
    "body": "Yes and most likely yes. At least, my use cases are what I mentioned above which will come up more with #16820 and other follow-ups, and there, `to_vector` will return an element of `module`.",
    "created_at": "2015-03-29T17:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218457",
    "user": "tscrim"
}
```

Yes and most likely yes. At least, my use cases are what I mentioned above which will come up more with #16820 and other follow-ups, and there, `to_vector` will return an element of `module`.



---

archive/issue_comments_218458.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-29T21:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218458",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218459.json:
```json
{
    "body": "I don't like stating that it is unindexed; in fact, it is typically indexed by `[n]`. Currently we don't have good support for other indexed instances of `FreeModule`, but this is something we want to change in the future. In that vein, I don't quite care for saying it is a column vector. Also I'd rather say that we pick an ordering of some basis if it exists, rather than saying if there exists one.\n\nThe reason I had an abstract method `module` in `LieAlgebras` was to say it was natural, but it was made optional for what I hope are obvious reasons.\n\nI don't really like this paradigm of `from_vector`, but instead just wanted to use the basis and/or implementing a general `_element_constructor_` in the ABC which handles the conversion (if such a conversion exists).",
    "created_at": "2015-03-29T22:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218459",
    "user": "tscrim"
}
```

I don't like stating that it is unindexed; in fact, it is typically indexed by `[n]`. Currently we don't have good support for other indexed instances of `FreeModule`, but this is something we want to change in the future. In that vein, I don't quite care for saying it is a column vector. Also I'd rather say that we pick an ordering of some basis if it exists, rather than saying if there exists one.

The reason I had an abstract method `module` in `LieAlgebras` was to say it was natural, but it was made optional for what I hope are obvious reasons.

I don't really like this paradigm of `from_vector`, but instead just wanted to use the basis and/or implementing a general `_element_constructor_` in the ABC which handles the conversion (if such a conversion exists).



---

archive/issue_comments_218460.json:
```json
{
    "body": "Can I require that (for `L` a Lie algebra and `x` an element of `L`)\n\n- the image `x.to_vector()` is an element of `L.module()`, and\n\n- elements of `L.module()`, or -- rather -- lists of them can be put into the `matrix` constructor, and\n\n- `L(x.to_vector()) == x` (I assume this is what you meant in the last paragraph)?",
    "created_at": "2015-03-29T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218460",
    "user": "darij"
}
```

Can I require that (for `L` a Lie algebra and `x` an element of `L`)

- the image `x.to_vector()` is an element of `L.module()`, and

- elements of `L.module()`, or -- rather -- lists of them can be put into the `matrix` constructor, and

- `L(x.to_vector()) == x` (I assume this is what you meant in the last paragraph)?



---

archive/issue_comments_218461.json:
```json
{
    "body": "Yes, no, and yes. However for fin-dim, the second one should be a yes.\n\nThe reason why I don't want the second in general is perhaps someone wants a free module version of the Lie algebra because there are extra features there, such as taking tensor products (which I guess is currently the only really distinct feature).",
    "created_at": "2015-03-29T23:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218461",
    "user": "tscrim"
}
```

Yes, no, and yes. However for fin-dim, the second one should be a yes.

The reason why I don't want the second in general is perhaps someone wants a free module version of the Lie algebra because there are extra features there, such as taking tensor products (which I guess is currently the only really distinct feature).



---

archive/issue_comments_218462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-13T21:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218462",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218463.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-15T15:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218463",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-15T20:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218464",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218465.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-16T11:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218465",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218466.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-16T11:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218466",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_218467.json:
```json
{
    "body": "Doc does not build, now because of a double ref",
    "created_at": "2015-04-16T11:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218467",
    "user": "chapoton"
}
```

Doc does not build, now because of a double ref



---

archive/issue_comments_218468.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-16T14:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218468",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218469.json:
```json
{
    "body": "Frederic, do you remember which reference is duplicated?",
    "created_at": "2015-04-16T14:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218469",
    "user": "tscrim"
}
```

Frederic, do you remember which reference is duplicated?



---

archive/issue_comments_218470.json:
```json
{
    "body": "I was meaning nothing else than this 'gens' problem.",
    "created_at": "2015-04-16T14:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218470",
    "user": "chapoton"
}
```

I was meaning nothing else than this 'gens' problem.



---

archive/issue_comments_218471.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-04-16T14:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218471",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_218472.json:
```json
{
    "body": "Okay, Darij also noticed this and corrected it.\n\nAlso after some discussion, we decided to just fold this into #16820 and do it all in one block.",
    "created_at": "2015-04-16T14:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218472",
    "user": "tscrim"
}
```

Okay, Darij also noticed this and corrected it.

Also after some discussion, we decided to just fold this into #16820 and do it all in one block.



---

archive/issue_comments_218473.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2015-04-18T23:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16582#issuecomment-218473",
    "user": "vbraun"
}
```

Resolution: duplicate
