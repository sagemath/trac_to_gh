# Issue 20843: Cartesian product of posets fails random doctest

Issue created by migration from https://trac.sagemath.org/ticket/21080

Original creator: jmantysalo

Original creation time: 2016-07-24 08:46:41

CC:  dkrenn

Keywords: random_test_failure

`./sage -t --randorder n src/sage/combinat/posets/` fails for `n=2` and `n=5`. I have no idea why.

For larger discussion see https://groups.google.com/forum/#!topic/sage-devel/2LsEMzIDvfw


---

Comment by jmantysalo created at 2016-07-28 12:27:40

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-07-28 12:27:40

This was just missing `import` statements on `TESTS` block. It worked when first test to run had the right import.
----
New commits:


---

Comment by jmantysalo created at 2016-07-31 17:57:54

rc0 for 7.3 is out.


---

Comment by vdelecroix created at 2016-08-01 03:01:02

Could you change the doctest for being more explicit about what should be imported/used to make the test pass. One possibility

```
sage: from sage.combinat.posets.cartesian_product import CartesianProductPoset
sage: QQ.CartesianProduct = CartesianProductPoset  # needed until #19269 is fixed
```

With your version it is quite subtle why it does not fail.


---

Comment by vdelecroix created at 2016-08-01 03:01:02

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-08-11 13:35:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-08-11 13:37:14

Better now?


---

Comment by jmantysalo created at 2016-08-11 13:37:14

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2016-08-11 15:40:55

yes


---

Comment by vdelecroix created at 2016-08-11 15:40:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-08-13 22:51:03

Resolution: fixed
