# Issue 15739: IntegerLattice class

archive/issues_015739.json:
```json
{
    "body": "This ticket implements sage.lattices.integer_lattice.IntegerLattice which represents a discrete subgroup of ZZ<sup>n</sup>.\n\nThis class is inspired by #15955 but except for the voronoi cell implementation, it is implemented anew from scratch.\n\nThis ticket also includes an updated interface to fpLLL which uses Cython's C++ features, uses the fpLLL 4.0 API and interfaces not only with LLL but also with fpLLL's BKZ and shortest vector enumeration.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15976\n\n",
    "created_at": "2014-03-19T16:28:48Z",
    "labels": [
        "linear algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "IntegerLattice class",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15739",
    "user": "@malb"
}
```
This ticket implements sage.lattices.integer_lattice.IntegerLattice which represents a discrete subgroup of ZZ<sup>n</sup>.

This class is inspired by #15955 but except for the voronoi cell implementation, it is implemented anew from scratch.

This ticket also includes an updated interface to fpLLL which uses Cython's C++ features, uses the fpLLL 4.0 API and interfaces not only with LLL but also with fpLLL's BKZ and shortest vector enumeration.


Issue created by migration from https://trac.sagemath.org/ticket/15976





---

archive/issue_comments_203670.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-03-19T16:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203670",
    "user": "@malb"
}
```

New commits:



---

archive/issue_comments_203671.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-19T17:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203671",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203672.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-19T17:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203672",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203673.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-20T12:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203673",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203674.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-20T13:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203674",
    "user": "@malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_203675.json:
```json
{
    "body": "Hi Martin!\n\nYou asked me to have a look at your code from the categorical point of view.\n\nIt really depends what you want to model.\n\nCurrently, you start on top of `SageObject`, which is about as basic as it can be. A `SageObject` hasn't even support for different categories. So, if for you a lattice is not more than an object, then it's fine.\n\nA bit less basic is `CategoryObject`, which is for objects in arbitrary categories. In particular, it would be a suitable starting point for objects that do not have elements (i.e., whose category is not a sub-category of the category of sets). So, if you want that your lattice is a semigroup, but you do not want to implement elements of the semigroup, then it's fine---almost. AFAIK, it *is* mathematically possible to define the notion of a semigroup just in terms of morphisms and direct products, and it is not needed to refer to elements in the definition. However, Sage's category framework expects semigroups to be sets, and thus the `TestSuite` would complain that element creation fails.\n\nIf your lattices are supposed to be groups (in particular, sets), then the lattice should inherit from `Parent`, and you should implement elements as well, inheriting from `Element` (or rather `ModuleElement`, since you want to add elements). I guess it would be fine to import some implementation of integer vectors (I am sure those things exist somewhere in Sage), and assign it as a class attribute `IntegerLattice.Element`.\n\nNext, *if* you decide to inherit from `Parent` and assign `.Element`, you should do `self._init_category_(Groups())` (or a better category, if there is any) during initialisation of your lattice. This should be enough to enable element creation and let the test suites (`TestSuite(YourLattice).run()`) pass. If it isn't---well, then we'll take care of it later.\n\nIt could make sense to have a look at `sage.combinat.free_module.CombinatorialFreeModule` and `sage.combinat.free_module.CombinatorialFreeModuleElement`. I have not much experience with it, but I know that people use it to implement all kind of things, including algebras. And it does inherit from `Parent`.\n\nOn a different note: Would it make sense to use `UniqueRepresentation` or at least `CachedRepresentation` for lattices? It seems strange to me to have a function `Lattice` that does nothing more than hand the arguments to the `IntegerLattice` constructor and return the result.\n\nProvided that you want some kind of caching for your lattices, you could do\n\n```python\nclass Lattice(CachedRepresentation, Parent):\n    \"This is a stub, non-integral lattices will be implemented later\"\n    Element = some.suitable.VectorClass\n    @staticmethod\n    def __classcall_private__(cls, basis, lll_reduce):\n        # do some preprocessing of arguments, throw\n        # an error if the basis is not integral\n        return IntegerLattice(preprocessed_basis, lll_reduce)\n    def __cmp__(...):\n        # We don't inherit from UniqueRepresentation, hence, we admit the\n        # possibility that different bases result in the same lattice.\n        # Perhaps move this to IntegerLattice, unless the same algorithm\n        # would work for general lattices.\n\nclass IntegerLattice(Lattice):\n    ...\n```\n",
    "created_at": "2014-03-20T15:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203675",
    "user": "@simon-king-jena"
}
```

Hi Martin!

You asked me to have a look at your code from the categorical point of view.

It really depends what you want to model.

Currently, you start on top of `SageObject`, which is about as basic as it can be. A `SageObject` hasn't even support for different categories. So, if for you a lattice is not more than an object, then it's fine.

A bit less basic is `CategoryObject`, which is for objects in arbitrary categories. In particular, it would be a suitable starting point for objects that do not have elements (i.e., whose category is not a sub-category of the category of sets). So, if you want that your lattice is a semigroup, but you do not want to implement elements of the semigroup, then it's fine---almost. AFAIK, it *is* mathematically possible to define the notion of a semigroup just in terms of morphisms and direct products, and it is not needed to refer to elements in the definition. However, Sage's category framework expects semigroups to be sets, and thus the `TestSuite` would complain that element creation fails.

If your lattices are supposed to be groups (in particular, sets), then the lattice should inherit from `Parent`, and you should implement elements as well, inheriting from `Element` (or rather `ModuleElement`, since you want to add elements). I guess it would be fine to import some implementation of integer vectors (I am sure those things exist somewhere in Sage), and assign it as a class attribute `IntegerLattice.Element`.

Next, *if* you decide to inherit from `Parent` and assign `.Element`, you should do `self._init_category_(Groups())` (or a better category, if there is any) during initialisation of your lattice. This should be enough to enable element creation and let the test suites (`TestSuite(YourLattice).run()`) pass. If it isn't---well, then we'll take care of it later.

It could make sense to have a look at `sage.combinat.free_module.CombinatorialFreeModule` and `sage.combinat.free_module.CombinatorialFreeModuleElement`. I have not much experience with it, but I know that people use it to implement all kind of things, including algebras. And it does inherit from `Parent`.

On a different note: Would it make sense to use `UniqueRepresentation` or at least `CachedRepresentation` for lattices? It seems strange to me to have a function `Lattice` that does nothing more than hand the arguments to the `IntegerLattice` constructor and return the result.

Provided that you want some kind of caching for your lattices, you could do

```python
class Lattice(CachedRepresentation, Parent):
    "This is a stub, non-integral lattices will be implemented later"
    Element = some.suitable.VectorClass
    @staticmethod
    def __classcall_private__(cls, basis, lll_reduce):
        # do some preprocessing of arguments, throw
        # an error if the basis is not integral
        return IntegerLattice(preprocessed_basis, lll_reduce)
    def __cmp__(...):
        # We don't inherit from UniqueRepresentation, hence, we admit the
        # possibility that different bases result in the same lattice.
        # Perhaps move this to IntegerLattice, unless the same algorithm
        # would work for general lattices.

class IntegerLattice(Lattice):
    ...
```




---

archive/issue_comments_203676.json:
```json
{
    "body": "Replying to [comment:6 SimonKing]:\n\nHi Simon,\n\nthanks a lot for your comments!\n\n \n> If your lattices are supposed to be groups (in particular, sets), then the lattice should inherit from `Parent`, and you should implement elements as well, inheriting from `Element` (or rather `ModuleElement`, since you want to add elements). I guess it would be fine to import some implementation of integer vectors (I am sure those things exist somewhere in Sage), and assign it as a class attribute `IntegerLattice.Element`.\n> \n> Next, *if* you decide to inherit from `Parent` and assign `.Element`, you should do `self._init_category_(Groups())` (or a better category, if there is any) during initialisation of your lattice. This should be enough to enable element creation and let the test suites (`TestSuite(YourLattice).run()`) pass. If it isn't---well, then we'll take care of it later.\n\nI tried to go down this route: I inherited from `Parent` and set         `self._init_category_(CommutativeAdditiveGroups())`. The `TestSuite(L).run()` now first complaints that there is no `_an_element_()` which is easily fixable. However, the next complaint is that elements created by `some_element()` do not live in the lattice but in **Z**<sup>n</sup>. I am not sure I want my lattice vectors to live in the lattice, but if I wanted to do that, I'd have to define my lattice as a proper submodule of **Z**<sup>n</sup>? I'd view the lattice somewhat analogously to an ideal in a multivariate ring, would we want our ideal elements to live anywhere but the ring?\n\n> On a different note: Would it make sense to use `UniqueRepresentation` or at least `CachedRepresentation` for lattices? It seems strange to me to have a function `Lattice` that does nothing more than hand the arguments to the `IntegerLattice` constructor and return the result.\n\nI don't want to cache my representations or make lattices unique. It is useful to have two objects representing the same lattice: one with a good basis and one with a bad basis (that's the secret and public key respectively in many crypto systems). I'd expect `Lattice` to grow when the need arises: lattices over **Q**, over **R**, over polynomial rings and stuff.",
    "created_at": "2014-03-20T21:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203676",
    "user": "@malb"
}
```

Replying to [comment:6 SimonKing]:

Hi Simon,

thanks a lot for your comments!

 
> If your lattices are supposed to be groups (in particular, sets), then the lattice should inherit from `Parent`, and you should implement elements as well, inheriting from `Element` (or rather `ModuleElement`, since you want to add elements). I guess it would be fine to import some implementation of integer vectors (I am sure those things exist somewhere in Sage), and assign it as a class attribute `IntegerLattice.Element`.
> 
> Next, *if* you decide to inherit from `Parent` and assign `.Element`, you should do `self._init_category_(Groups())` (or a better category, if there is any) during initialisation of your lattice. This should be enough to enable element creation and let the test suites (`TestSuite(YourLattice).run()`) pass. If it isn't---well, then we'll take care of it later.

I tried to go down this route: I inherited from `Parent` and set         `self._init_category_(CommutativeAdditiveGroups())`. The `TestSuite(L).run()` now first complaints that there is no `_an_element_()` which is easily fixable. However, the next complaint is that elements created by `some_element()` do not live in the lattice but in **Z**<sup>n</sup>. I am not sure I want my lattice vectors to live in the lattice, but if I wanted to do that, I'd have to define my lattice as a proper submodule of **Z**<sup>n</sup>? I'd view the lattice somewhat analogously to an ideal in a multivariate ring, would we want our ideal elements to live anywhere but the ring?

> On a different note: Would it make sense to use `UniqueRepresentation` or at least `CachedRepresentation` for lattices? It seems strange to me to have a function `Lattice` that does nothing more than hand the arguments to the `IntegerLattice` constructor and return the result.

I don't want to cache my representations or make lattices unique. It is useful to have two objects representing the same lattice: one with a good basis and one with a bad basis (that's the secret and public key respectively in many crypto systems). I'd expect `Lattice` to grow when the need arises: lattices over **Q**, over **R**, over polynomial rings and stuff.



---

archive/issue_comments_203677.json:
```json
{
    "body": "Replying to [comment:7 malb]:\n> However, the next complaint is that elements created by `some_element()` do not live in the lattice but in **Z**<sup>n</sup>. I am not sure I want my lattice vectors to live in the lattice, but if I wanted to do that, I'd have to define my lattice as a proper submodule of **Z**<sup>n</sup>?\n\nThere is something called \"facade\". I didn't try to fully understand it, but I think the idea is: If you have the set of prime numbers, then its elements are just natural numbers. That's to say, the parent of the elements of `Primes()` is `ZZ`, not `Primes()`:\n\n```\nsage: P = Primes()\nsage: p = P.an_element()\nsage: p\n43\nsage: p.parent()\nInteger Ring\n```\n\nThis is done by telling that `Primes()` is a \"facade set\":\n\n```\nsage: P.category()\nCategory of facade infinite enumerated sets\n```\n\n\nYour situation could be similar: You have a lattice `L` in `RR^n`, and the parent of the elements of `L` wouldn't be `L` but `RR^n` (but please not `ZZ^n`, since you need the embedding!).\n\nSo, could be that using\n\n```\nsage: Category.join([FacadeSets(),CommutativeAdditiveGroups()])\nCategory of facade commutative additive groups\n```\n\nto initialise your lattice's category would suffice.\n\n> I'd view the lattice somewhat analogously to an ideal in a multivariate ring, would we want our ideal elements to live anywhere but the ring?\n\nNo, see above. But for historical reasons, we have\n\n```\nsage: P.<x,y> = QQ[]\nsage: I = P*[x^2+y,y^2+x]\nsage: x^2 in I\nFalse\nsage: x^2+y in I\nTrue\nsage: I.category()\nCategory of ring ideals in Multivariate Polynomial Ring in x, y over Rational Field\n```\n\nwithout facade. I think today it would be implemented using facades.\n\n> I don't want to cache my representations or make lattices unique. It is useful to have two objects representing the same lattice: one with a good basis and one with a bad basis (that's the secret and public key respectively in many crypto systems).\n\nThat's why I suggested `CachedRepresentation` rather than `UniqueRepresentation`. If you use `CachedRepresentation` than starting twice with the same basis yields identical lattices, but starting with different bases will yield non-identical lattices that may still be equal. Only `UniqueRepresentation` would imply a \"comparison by identity\".",
    "created_at": "2014-03-21T08:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203677",
    "user": "@simon-king-jena"
}
```

Replying to [comment:7 malb]:
> However, the next complaint is that elements created by `some_element()` do not live in the lattice but in **Z**<sup>n</sup>. I am not sure I want my lattice vectors to live in the lattice, but if I wanted to do that, I'd have to define my lattice as a proper submodule of **Z**<sup>n</sup>?

There is something called "facade". I didn't try to fully understand it, but I think the idea is: If you have the set of prime numbers, then its elements are just natural numbers. That's to say, the parent of the elements of `Primes()` is `ZZ`, not `Primes()`:

```
sage: P = Primes()
sage: p = P.an_element()
sage: p
43
sage: p.parent()
Integer Ring
```

This is done by telling that `Primes()` is a "facade set":

```
sage: P.category()
Category of facade infinite enumerated sets
```


Your situation could be similar: You have a lattice `L` in `RR^n`, and the parent of the elements of `L` wouldn't be `L` but `RR^n` (but please not `ZZ^n`, since you need the embedding!).

So, could be that using

```
sage: Category.join([FacadeSets(),CommutativeAdditiveGroups()])
Category of facade commutative additive groups
```

to initialise your lattice's category would suffice.

> I'd view the lattice somewhat analogously to an ideal in a multivariate ring, would we want our ideal elements to live anywhere but the ring?

No, see above. But for historical reasons, we have

```
sage: P.<x,y> = QQ[]
sage: I = P*[x^2+y,y^2+x]
sage: x^2 in I
False
sage: x^2+y in I
True
sage: I.category()
Category of ring ideals in Multivariate Polynomial Ring in x, y over Rational Field
```

without facade. I think today it would be implemented using facades.

> I don't want to cache my representations or make lattices unique. It is useful to have two objects representing the same lattice: one with a good basis and one with a bad basis (that's the secret and public key respectively in many crypto systems).

That's why I suggested `CachedRepresentation` rather than `UniqueRepresentation`. If you use `CachedRepresentation` than starting twice with the same basis yields identical lattices, but starting with different bases will yield non-identical lattices that may still be equal. Only `UniqueRepresentation` would imply a "comparison by identity".



---

archive/issue_comments_203678.json:
```json
{
    "body": "Replying to [comment:8 SimonKing]:\n> Your situation could be similar: You have a lattice `L` in `RR^n`, and the parent of the elements of `L` wouldn't be `L` but `RR^n` (but please not `ZZ^n`, since you need the embedding!).\n\nAhm, or actually it *should* be `ZZ^n`, since you have integer lattices. But this `ZZ^n` is a subset of `RR^n` and should not be confused with the fact that the lattice itself is isomorphic to `ZZ^n`.",
    "created_at": "2014-03-21T08:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203678",
    "user": "@simon-king-jena"
}
```

Replying to [comment:8 SimonKing]:
> Your situation could be similar: You have a lattice `L` in `RR^n`, and the parent of the elements of `L` wouldn't be `L` but `RR^n` (but please not `ZZ^n`, since you need the embedding!).

Ahm, or actually it *should* be `ZZ^n`, since you have integer lattices. But this `ZZ^n` is a subset of `RR^n` and should not be confused with the fact that the lattice itself is isomorphic to `ZZ^n`.



---

archive/issue_comments_203679.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-21T10:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203679",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203680.json:
```json
{
    "body": "Thanks Simon, \n\n`Facade` seems to be exactly what I needed!\n\nOn the `CachedRepresentation` I think even that is too much. One could, for example, construct the same lattice twice and then run lattice reduction on one instance in order to get a good basis. The design is somewhat unusual as it changes the basis during the life-time of an object.",
    "created_at": "2014-03-21T10:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203680",
    "user": "@malb"
}
```

Thanks Simon, 

`Facade` seems to be exactly what I needed!

On the `CachedRepresentation` I think even that is too much. One could, for example, construct the same lattice twice and then run lattice reduction on one instance in order to get a good basis. The design is somewhat unusual as it changes the basis during the life-time of an object.



---

archive/issue_comments_203681.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-21T10:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203681",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203682.json:
```json
{
    "body": "Replying to [comment:11 malb]:\n> On the `CachedRepresentation` I think even that is too much. One could, for example, construct the same lattice twice and then run lattice reduction on one instance in order to get a good basis. The design is somewhat unusual as it changes the basis during the life-time of an object.\n\nOK, it sounds like caching would be bad in such situation.",
    "created_at": "2014-03-21T11:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203682",
    "user": "@simon-king-jena"
}
```

Replying to [comment:11 malb]:
> On the `CachedRepresentation` I think even that is too much. One could, for example, construct the same lattice twice and then run lattice reduction on one instance in order to get a good basis. The design is somewhat unusual as it changes the basis during the life-time of an object.

OK, it sounds like caching would be bad in such situation.



---

archive/issue_comments_203683.json:
```json
{
    "body": "Okay, excellent. So - as far as I am concerned - our work here is done :)",
    "created_at": "2014-03-21T12:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203683",
    "user": "@malb"
}
```

Okay, excellent. So - as far as I am concerned - our work here is done :)



---

archive/issue_comments_203684.json:
```json
{
    "body": "Are you guys sure that special characters (such as \u00b7 and \u03b4) don't break the PDF documentation? Just asking.\n\nWhat exactly does the `jacobi` method do? Sage does have a Cholesky decomposition method, but that's different (yours is rational, which is why I'm curious). Any references or explanations? (They should also go into the docstring -- also, a doctest on something other than a scalar matrix would be nice...)\n\nFinally, I'd suggest not using such a short and generic name for a class like `Lattice` which is not likely to be implemented in foreseeable future (shouldn't the inexactness of the reals prevent such class from being implementable?).",
    "created_at": "2014-03-30T02:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203684",
    "user": "@darijgr"
}
```

Are you guys sure that special characters (such as · and δ) don't break the PDF documentation? Just asking.

What exactly does the `jacobi` method do? Sage does have a Cholesky decomposition method, but that's different (yours is rational, which is why I'm curious). Any references or explanations? (They should also go into the docstring -- also, a doctest on something other than a scalar matrix would be nice...)

Finally, I'd suggest not using such a short and generic name for a class like `Lattice` which is not likely to be implemented in foreseeable future (shouldn't the inexactness of the reals prevent such class from being implementable?).



---

archive/issue_comments_203685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-30T22:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203686.json:
```json
{
    "body": "Replying to [comment:15 darij]:\n> Are you guys sure that special characters (such as \u00b7 and \u03b4) don't break the PDF documentation? Just asking.\n\nIt didn't, but now it does. Thanks!\n \n> What exactly does the `jacobi` method do? Sage does have a Cholesky decomposition method, but that's different (yours is rational, which is why I'm curious). Any references or explanations? (They should also go into the docstring -- also, a doctest on something other than a scalar matrix would be nice...)\n\nI cannot speak for that part of the code as it was taken on-board from the 2012 GSoC project. It seemed like the only non-trivial contribution and I didn't want to delete it. I never touched it. If no-one is comfortable with it, we can drop it though. I asked Daniel Krenn to comment (he was the mentor on that GSoC project)\n\n> Finally, I'd suggest not using such a short and generic name for a class like `Lattice` which is not likely to be implemented in foreseeable future (shouldn't the inexactness of the reals prevent such class from being implementable?).\n\nI don't see the problem with the class itself, that's what namespaces are for, right? Lattice as the basic class for lattices (as discrete subgroups of RR<sup>n</sup>) seems about right. However, I do take your point with Lattice is in the global namespace (i.e. the constructor). Any recommendation?\n----\nNew commits:\n----\nNew commits:",
    "created_at": "2014-03-30T22:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203686",
    "user": "@malb"
}
```

Replying to [comment:15 darij]:
> Are you guys sure that special characters (such as · and δ) don't break the PDF documentation? Just asking.

It didn't, but now it does. Thanks!
 
> What exactly does the `jacobi` method do? Sage does have a Cholesky decomposition method, but that's different (yours is rational, which is why I'm curious). Any references or explanations? (They should also go into the docstring -- also, a doctest on something other than a scalar matrix would be nice...)

I cannot speak for that part of the code as it was taken on-board from the 2012 GSoC project. It seemed like the only non-trivial contribution and I didn't want to delete it. I never touched it. If no-one is comfortable with it, we can drop it though. I asked Daniel Krenn to comment (he was the mentor on that GSoC project)

> Finally, I'd suggest not using such a short and generic name for a class like `Lattice` which is not likely to be implemented in foreseeable future (shouldn't the inexactness of the reals prevent such class from being implementable?).

I don't see the problem with the class itself, that's what namespaces are for, right? Lattice as the basic class for lattices (as discrete subgroups of RR<sup>n</sup>) seems about right. However, I do take your point with Lattice is in the global namespace (i.e. the constructor). Any recommendation?
----
New commits:
----
New commits:



---

archive/issue_comments_203687.json:
```json
{
    "body": "Oh, if it's not in the global namespace, then it's fine. Otherwise, what about `RealLattice`?",
    "created_at": "2014-03-31T00:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203687",
    "user": "@darijgr"
}
```

Oh, if it's not in the global namespace, then it's fine. Otherwise, what about `RealLattice`?



---

archive/issue_comments_203688.json:
```json
{
    "body": "*ignore this one*",
    "created_at": "2014-03-31T00:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203688",
    "user": "@darijgr"
}
```

*ignore this one*



---

archive/issue_comments_203689.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-31T01:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203689",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_203690.json:
```json
{
    "body": "OK, so the method does do something like Cholesky decomposition, except that it never takes square roots and has some diagonal factors. (Don't get me wrong: this makes the method more useful, not wrong.) I've added documentation. Warning: branch change.\n\nI fear this is all I can do for this ticket, though...",
    "created_at": "2014-03-31T01:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203690",
    "user": "@darijgr"
}
```

OK, so the method does do something like Cholesky decomposition, except that it never takes square roots and has some diagonal factors. (Don't get me wrong: this makes the method more useful, not wrong.) I've added documentation. Warning: branch change.

I fear this is all I can do for this ticket, though...



---

archive/issue_comments_203691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-02T10:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203691",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203692.json:
```json
{
    "body": "I renamed `Lattice` to `RealLattice`",
    "created_at": "2014-04-02T10:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203692",
    "user": "@malb"
}
```

I renamed `Lattice` to `RealLattice`



---

archive/issue_comments_203693.json:
```json
{
    "body": "Replying to [comment:23 malb]:\n> I renamed `Lattice` to `RealLattice`\n\nbad choice, IMHO. People will want to have lattices in things like C^n",
    "created_at": "2014-04-03T09:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203693",
    "user": "@dimpase"
}
```

Replying to [comment:23 malb]:
> I renamed `Lattice` to `RealLattice`

bad choice, IMHO. People will want to have lattices in things like C^n



---

archive/issue_comments_203694.json:
```json
{
    "body": "Suggestions? `Lattice` seems to be too general for many, `RealLattice` too specific for others. `ComplexLattice` doesn't really seem to make much sense because one normally thinks of a lattice as a discrete subgroup of R<sup>n</sup> (at least in my neck of the woods).",
    "created_at": "2014-04-03T10:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203694",
    "user": "@malb"
}
```

Suggestions? `Lattice` seems to be too general for many, `RealLattice` too specific for others. `ComplexLattice` doesn't really seem to make much sense because one normally thinks of a lattice as a discrete subgroup of R<sup>n</sup> (at least in my neck of the woods).



---

archive/issue_comments_203695.json:
```json
{
    "body": "How about `VectorSpaceLattice` ?  (well, not all fields might be supported, but still).",
    "created_at": "2014-04-03T11:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203695",
    "user": "@dimpase"
}
```

How about `VectorSpaceLattice` ?  (well, not all fields might be supported, but still).



---

archive/issue_comments_203696.json:
```json
{
    "body": "Wouldn't people confuse that with vector lattices? Or is that not a common notion? cf. http://www.stat.yale.edu/~pollard/Books/Asymptopia/old-Vectorlattice.pdf\n\nI do have to admit that I also find it a bit awkward but that's clearly a question of taste.",
    "created_at": "2014-04-03T13:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203696",
    "user": "@malb"
}
```

Wouldn't people confuse that with vector lattices? Or is that not a common notion? cf. http://www.stat.yale.edu/~pollard/Books/Asymptopia/old-Vectorlattice.pdf

I do have to admit that I also find it a bit awkward but that's clearly a question of taste.



---

archive/issue_comments_203697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-03T14:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203697",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203698.json:
```json
{
    "body": "Replying to [comment:27 malb]:\n> Wouldn't people confuse that with vector lattices? Or is that not a common notion? cf. http://www.stat.yale.edu/~pollard/Books/Asymptopia/old-Vectorlattice.pdf\n> \n> I do have to admit that I also find it a bit awkward but that's clearly a question of taste. \n\nhmm, OK, how about `AdditiveTorsionFreeAbelianGroup` ? This would avoid that other lattices all together...",
    "created_at": "2014-04-03T14:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203698",
    "user": "@dimpase"
}
```

Replying to [comment:27 malb]:
> Wouldn't people confuse that with vector lattices? Or is that not a common notion? cf. http://www.stat.yale.edu/~pollard/Books/Asymptopia/old-Vectorlattice.pdf
> 
> I do have to admit that I also find it a bit awkward but that's clearly a question of taste. 

hmm, OK, how about `AdditiveTorsionFreeAbelianGroup` ? This would avoid that other lattices all together...



---

archive/issue_comments_203699.json:
```json
{
    "body": "now that's just mean \u2026 for now `VectorSpaceLattice` seems to be a winner.",
    "created_at": "2014-04-03T15:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203699",
    "user": "@malb"
}
```

now that's just mean … for now `VectorSpaceLattice` seems to be a winner.



---

archive/issue_comments_203700.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-07T11:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203700",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203701.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-07T11:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203701",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203702.json:
```json
{
    "body": "The patch is a lot less invasive now, anyone up for reviewing it?",
    "created_at": "2014-04-11T09:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203702",
    "user": "@malb"
}
```

The patch is a lot less invasive now, anyone up for reviewing it?



---

archive/issue_comments_203703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T10:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203703",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T10:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203704",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203705.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-12T17:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203705",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203706.json:
```json
{
    "body": "I've uploaded a couple of minor changes made during review (most of them are whitespace corrections, PEP8, rewriting of long lines, adding ``...`` in documentation.\n\nHere some further comments:\n\n* \n\n```\ndiff --git a/src/doc/common/conf.py b/src/doc/common/conf.py\nindex 25dd9f0..ff9efe3 100644\n--- a/src/doc/common/conf.py\n+++ b/src/doc/common/conf.py\n@@ -296,6 +296,13 @@ latex_elements['preamble'] = r\"\"\"\n \\DeclareUnicodeCharacter{2510}{+}\n \\DeclareUnicodeCharacter{2514}{+}\n \\DeclareUnicodeCharacter{2518}{+}\n+\\DeclareUnicodeCharacter{03BC}{\\mu}\n+\\DeclareUnicodeCharacter{03B4}{\\delta}\n+\\DeclareUnicodeCharacter{03B7}{\\eta}\n+\\DeclareUnicodeCharacter{03BB}{\\lambda}\n+\\DeclareUnicodeCharacter{2266}{\\le}\n+\\DeclareUnicodeCharacter{221A}{\\sqrt}\n```\n\nI'd appreciate if someone else can make a short review on this part, since I do not know what should be done. (It seems that the code works, but I just don't know if this is how it is done; probably yes).\n\n* changes in fplll.*: The changes look fine for me and the code seem to work. I have to say, I am not really familiar with the fplll interface, so maybe someone else can look at this code (but for me it is positive_review on this part).\n\n* \n\n```\ndiff --git a/src/sage/libs/fplll/fplll.pyx b/src/sage/libs/fplll/fplll.pyx\nindex 59cd53e..b28f5c9 100644\n--- a/src/sage/libs/fplll/fplll.pyx\n+++ b/src/sage/libs/fplll/fplll.pyx\n@@ -18,6 +18,7 @@ AUTHORS:\n+#       Copyright (C) 2014 Martin Albrecht <martinralbecht@googlemailc.om>\n                                                   ^^^^               ^^^^\n```\n\nIs this on purpose?\n\n* fplll.pyx: OUTPUT-blocks are missing (although, most of them will state \"Nothing\") (The developerguide does not say that those can be skipped if nothing is returned...)\n\n* fplll.pyx: Sometimes there are empty lines between two input-descriptions (in INPUT-block), sometimes not. This should be done in the same way everywhere.\n\n* fplll.pyx: def BKZ: In the INPUT-block you can find the following:\n\n```\n        - ``block_size`` - 0 < block size <= nrows\n\n        - ``no_lll`` - \n        - ``bounded_lll`` -\n```\n\nThe first line looks a bit weird, since this is a mixture of math and verbated text written plain. Maybe add ``...`` or `...` there?\nThe last two don't have any description.\n\n* I am not sure which of the following one should prefer for `default: 0`: `0` or ``0`` or 0?\n(I have a slight preference for `0`). But this should be done in the same way everywhere.\n\n* matrix_integer_dense.pyx:\n\n```\n        - ``prune`` - The optional parameter ``prune`` can be set to any\n           positive number to invoke the Volume Heuristic from [Schnorr and\n           Horner, Eurocrypt '95]. This can significantly reduce the running\n           time, and hence allow much bigger block size, but the quality of the\n           reduction is of course not as good in general. Higher values of\n           ``prune`` mean better quality, and slower running time. When\n           ``prune`` == 0, pruning is disabled. Recommended usage: for\n           ``block_size`` = 30, set 10 = ``prune`` = 15.\n```\n\nThe last few lines (== 0, = 30, 10 = ``prune`` = 15) look a bit weird.\n\n* matrix_integer_dense.pyx:\n\n```\n        fpLLL SPECIFIC INPUTS:\n\n        - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)\n                                             = here ^^^^^^^^ ?\n```\n\n\n* in matrix_integer_dense.pyx: Sometimes there is `OUTPUT: an integer`. Shouldn't this be in separate lines?\n\n* A couple of times the descriptions in the INPUT-block end with a full-stop; most of the times not.\n\n* free_module_integer.py: Some missing OUTPUT-blocks\n\n* \n\n```\nSCORE src/sage/libs/fplll/fplll.pyx: 89.5% (17 of 19)\n\nMissing documentation:\n     * line 492: def HKZ(self)\n\nMissing doctests:\n     * line 499: def shortest_vector(self, method=None)\n```\n\n\nApart from those minor things, everything else looks good.",
    "created_at": "2014-05-12T17:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203706",
    "user": "@dkrenn"
}
```

I've uploaded a couple of minor changes made during review (most of them are whitespace corrections, PEP8, rewriting of long lines, adding ``...`` in documentation.

Here some further comments:

* 

```
diff --git a/src/doc/common/conf.py b/src/doc/common/conf.py
index 25dd9f0..ff9efe3 100644
--- a/src/doc/common/conf.py
+++ b/src/doc/common/conf.py
@@ -296,6 +296,13 @@ latex_elements['preamble'] = r"""
 \DeclareUnicodeCharacter{2510}{+}
 \DeclareUnicodeCharacter{2514}{+}
 \DeclareUnicodeCharacter{2518}{+}
+\DeclareUnicodeCharacter{03BC}{\mu}
+\DeclareUnicodeCharacter{03B4}{\delta}
+\DeclareUnicodeCharacter{03B7}{\eta}
+\DeclareUnicodeCharacter{03BB}{\lambda}
+\DeclareUnicodeCharacter{2266}{\le}
+\DeclareUnicodeCharacter{221A}{\sqrt}
```

I'd appreciate if someone else can make a short review on this part, since I do not know what should be done. (It seems that the code works, but I just don't know if this is how it is done; probably yes).

* changes in fplll.*: The changes look fine for me and the code seem to work. I have to say, I am not really familiar with the fplll interface, so maybe someone else can look at this code (but for me it is positive_review on this part).

* 

```
diff --git a/src/sage/libs/fplll/fplll.pyx b/src/sage/libs/fplll/fplll.pyx
index 59cd53e..b28f5c9 100644
--- a/src/sage/libs/fplll/fplll.pyx
+++ b/src/sage/libs/fplll/fplll.pyx
@@ -18,6 +18,7 @@ AUTHORS:
+#       Copyright (C) 2014 Martin Albrecht <martinralbecht@googlemailc.om>
                                                   ^^^^               ^^^^
```

Is this on purpose?

* fplll.pyx: OUTPUT-blocks are missing (although, most of them will state "Nothing") (The developerguide does not say that those can be skipped if nothing is returned...)

* fplll.pyx: Sometimes there are empty lines between two input-descriptions (in INPUT-block), sometimes not. This should be done in the same way everywhere.

* fplll.pyx: def BKZ: In the INPUT-block you can find the following:

```
        - ``block_size`` - 0 < block size <= nrows

        - ``no_lll`` - 
        - ``bounded_lll`` -
```

The first line looks a bit weird, since this is a mixture of math and verbated text written plain. Maybe add ``...`` or `...` there?
The last two don't have any description.

* I am not sure which of the following one should prefer for `default: 0`: `0` or ``0`` or 0?
(I have a slight preference for `0`). But this should be done in the same way everywhere.

* matrix_integer_dense.pyx:

```
        - ``prune`` - The optional parameter ``prune`` can be set to any
           positive number to invoke the Volume Heuristic from [Schnorr and
           Horner, Eurocrypt '95]. This can significantly reduce the running
           time, and hence allow much bigger block size, but the quality of the
           reduction is of course not as good in general. Higher values of
           ``prune`` mean better quality, and slower running time. When
           ``prune`` == 0, pruning is disabled. Recommended usage: for
           ``block_size`` = 30, set 10 = ``prune`` = 15.
```

The last few lines (== 0, = 30, 10 = ``prune`` = 15) look a bit weird.

* matrix_integer_dense.pyx:

```
        fpLLL SPECIFIC INPUTS:

        - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)
                                             = here ^^^^^^^^ ?
```


* in matrix_integer_dense.pyx: Sometimes there is `OUTPUT: an integer`. Shouldn't this be in separate lines?

* A couple of times the descriptions in the INPUT-block end with a full-stop; most of the times not.

* free_module_integer.py: Some missing OUTPUT-blocks

* 

```
SCORE src/sage/libs/fplll/fplll.pyx: 89.5% (17 of 19)

Missing documentation:
     * line 492: def HKZ(self)

Missing doctests:
     * line 499: def shortest_vector(self, method=None)
```


Apart from those minor things, everything else looks good.



---

archive/issue_comments_203707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-12T19:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203707",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203708.json:
```json
{
    "body": "Replying to [comment:38 dkrenn]:\n> I've uploaded a couple of minor changes made during review (most of them are whitespace corrections, PEP8, rewriting of long lines, adding ``...`` in documentation.\n\nThanks!\n \n> Here some further comments:\n> \n> * \n> {{{\n> diff --git a/src/doc/common/conf.py b/src/doc/common/conf.py\n> index 25dd9f0..ff9efe3 100644\n> --- a/src/doc/common/conf.py\n> +++ b/src/doc/common/conf.py\n> `@``@` -296,6 +296,13 `@``@` latex_elements['preamble'] = r\"\"\"\n>  \\DeclareUnicodeCharacter{2510}{+}\n>  \\DeclareUnicodeCharacter{2514}{+}\n>  \\DeclareUnicodeCharacter{2518}{+}\n> +\\DeclareUnicodeCharacter{03BC}{\\mu}\n> +\\DeclareUnicodeCharacter{03B4}{\\delta}\n> +\\DeclareUnicodeCharacter{03B7}{\\eta}\n> +\\DeclareUnicodeCharacter{03BB}{\\lambda}\n> +\\DeclareUnicodeCharacter{2266}{\\le}\n> +\\DeclareUnicodeCharacter{221A}{\\sqrt}\n> }}}\n> I'd appreciate if someone else can make a short review on this part, since I do not know what should be done. (It seems that the code works, but I just don't know if this is how it is done; probably yes).\n\nThis essentially allows to write UTF-8 characters like \u03b4 directly, which makes the documentation easier to read.\n \n> \n> * \n> {{{\n> diff --git a/src/sage/libs/fplll/fplll.pyx b/src/sage/libs/fplll/fplll.pyx\n> index 59cd53e..b28f5c9 100644\n> --- a/src/sage/libs/fplll/fplll.pyx\n> +++ b/src/sage/libs/fplll/fplll.pyx\n> `@``@` -18,6 +18,7 `@``@` AUTHORS:\n> +#       Copyright (C) 2014 Martin Albrecht <martinralbecht`@`googlemailc.om>\n>                                                    <sup>^</sup>^               <sup>^</sup>^\n> }}}\n> Is this on purpose?\n\nFixed.\n\n> * fplll.pyx: OUTPUT-blocks are missing (although, most of them will state \"Nothing\") (The developerguide does not say that those can be skipped if nothing is returned...)\n\nI added those.\n\n> * fplll.pyx: Sometimes there are empty lines between two input-descriptions (in INPUT-block), sometimes not. This should be done in the same way everywhere.\n\nI should have fixed all of those.\n\n> * fplll.pyx: def BKZ: In the INPUT-block you can find the following:\n> {{{\n>         - ``block_size`` - 0 < block size <= nrows\n> \n>         - ``no_lll`` - \n>         - ``bounded_lll`` -\n> }}}\n> The first line looks a bit weird, since this is a mixture of math and verbated text written plain. Maybe add ``...`` or `...` there?\n> The last two don't have any description.\n\nFixed.\n \n> * I am not sure which of the following one should prefer for `default: 0`: `0` or ``0`` or 0?\n> (I have a slight preference for `0`). But this should be done in the same way everywhere.\n\nI opted for ``0`` so that ``True`` etc. look the same?\n\n> * matrix_integer_dense.pyx:\n> {{{\n>         - ``prune`` - The optional parameter ``prune`` can be set to any\n>            positive number to invoke the Volume Heuristic from [Schnorr and\n>            Horner, Eurocrypt '95]. This can significantly reduce the running\n>            time, and hence allow much bigger block size, but the quality of the\n>            reduction is of course not as good in general. Higher values of\n>            ``prune`` mean better quality, and slower running time. When\n>            ``prune`` == 0, pruning is disabled. Recommended usage: for\n>            ``block_size`` = 30, set 10 = ``prune`` = 15.\n> }}}\n> The last few lines (== 0, = 30, 10 = ``prune`` = 15) look a bit weird.\n\nFixed.\n\n> * matrix_integer_dense.pyx:\n> {{{\n>         fpLLL SPECIFIC INPUTS:\n> \n>         - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)\n>                                              = here <sup>^</sup><sup>^</sup>^^ ?\n> }}}\n\nI don't understand this point, fp='rr' is a valid parameter.\n\n> * in matrix_integer_dense.pyx: Sometimes there is `OUTPUT: an integer`. Shouldn't this be in separate lines?\n\nI fixed those.\n \n> * A couple of times the descriptions in the INPUT-block end with a full-stop; most of the times not.\n\nI tried to unify those.\n\n> * free_module_integer.py: Some missing OUTPUT-blocks\n\nFixed.\n\n> * \n> {{{\n> SCORE src/sage/libs/fplll/fplll.pyx: 89.5% (17 of 19)\n> \n> Missing documentation:\n>      * line 492: def HKZ(self)\n> \n> Missing doctests:\n>      * line 499: def shortest_vector(self, method=None)\n> }}}\n\nFixed.\n\n> Apart from those minor things, everything else looks good.",
    "created_at": "2014-05-12T20:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203708",
    "user": "@malb"
}
```

Replying to [comment:38 dkrenn]:
> I've uploaded a couple of minor changes made during review (most of them are whitespace corrections, PEP8, rewriting of long lines, adding ``...`` in documentation.

Thanks!
 
> Here some further comments:
> 
> * 
> {{{
> diff --git a/src/doc/common/conf.py b/src/doc/common/conf.py
> index 25dd9f0..ff9efe3 100644
> --- a/src/doc/common/conf.py
> +++ b/src/doc/common/conf.py
> `@``@` -296,6 +296,13 `@``@` latex_elements['preamble'] = r"""
>  \DeclareUnicodeCharacter{2510}{+}
>  \DeclareUnicodeCharacter{2514}{+}
>  \DeclareUnicodeCharacter{2518}{+}
> +\DeclareUnicodeCharacter{03BC}{\mu}
> +\DeclareUnicodeCharacter{03B4}{\delta}
> +\DeclareUnicodeCharacter{03B7}{\eta}
> +\DeclareUnicodeCharacter{03BB}{\lambda}
> +\DeclareUnicodeCharacter{2266}{\le}
> +\DeclareUnicodeCharacter{221A}{\sqrt}
> }}}
> I'd appreciate if someone else can make a short review on this part, since I do not know what should be done. (It seems that the code works, but I just don't know if this is how it is done; probably yes).

This essentially allows to write UTF-8 characters like δ directly, which makes the documentation easier to read.
 
> 
> * 
> {{{
> diff --git a/src/sage/libs/fplll/fplll.pyx b/src/sage/libs/fplll/fplll.pyx
> index 59cd53e..b28f5c9 100644
> --- a/src/sage/libs/fplll/fplll.pyx
> +++ b/src/sage/libs/fplll/fplll.pyx
> `@``@` -18,6 +18,7 `@``@` AUTHORS:
> +#       Copyright (C) 2014 Martin Albrecht <martinralbecht`@`googlemailc.om>
>                                                    <sup>^</sup>^               <sup>^</sup>^
> }}}
> Is this on purpose?

Fixed.

> * fplll.pyx: OUTPUT-blocks are missing (although, most of them will state "Nothing") (The developerguide does not say that those can be skipped if nothing is returned...)

I added those.

> * fplll.pyx: Sometimes there are empty lines between two input-descriptions (in INPUT-block), sometimes not. This should be done in the same way everywhere.

I should have fixed all of those.

> * fplll.pyx: def BKZ: In the INPUT-block you can find the following:
> {{{
>         - ``block_size`` - 0 < block size <= nrows
> 
>         - ``no_lll`` - 
>         - ``bounded_lll`` -
> }}}
> The first line looks a bit weird, since this is a mixture of math and verbated text written plain. Maybe add ``...`` or `...` there?
> The last two don't have any description.

Fixed.
 
> * I am not sure which of the following one should prefer for `default: 0`: `0` or ``0`` or 0?
> (I have a slight preference for `0`). But this should be done in the same way everywhere.

I opted for ``0`` so that ``True`` etc. look the same?

> * matrix_integer_dense.pyx:
> {{{
>         - ``prune`` - The optional parameter ``prune`` can be set to any
>            positive number to invoke the Volume Heuristic from [Schnorr and
>            Horner, Eurocrypt '95]. This can significantly reduce the running
>            time, and hence allow much bigger block size, but the quality of the
>            reduction is of course not as good in general. Higher values of
>            ``prune`` mean better quality, and slower running time. When
>            ``prune`` == 0, pruning is disabled. Recommended usage: for
>            ``block_size`` = 30, set 10 = ``prune`` = 15.
> }}}
> The last few lines (== 0, = 30, 10 = ``prune`` = 15) look a bit weird.

Fixed.

> * matrix_integer_dense.pyx:
> {{{
>         fpLLL SPECIFIC INPUTS:
> 
>         - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)
>                                              = here <sup>^</sup><sup>^</sup>^^ ?
> }}}

I don't understand this point, fp='rr' is a valid parameter.

> * in matrix_integer_dense.pyx: Sometimes there is `OUTPUT: an integer`. Shouldn't this be in separate lines?

I fixed those.
 
> * A couple of times the descriptions in the INPUT-block end with a full-stop; most of the times not.

I tried to unify those.

> * free_module_integer.py: Some missing OUTPUT-blocks

Fixed.

> * 
> {{{
> SCORE src/sage/libs/fplll/fplll.pyx: 89.5% (17 of 19)
> 
> Missing documentation:
>      * line 492: def HKZ(self)
> 
> Missing doctests:
>      * line 499: def shortest_vector(self, method=None)
> }}}

Fixed.

> Apart from those minor things, everything else looks good.



---

archive/issue_comments_203709.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-12T20:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203709",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203710.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-12T21:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203710",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203711.json:
```json
{
    "body": "I figured I should make a conservative choice and removed `IntegerLattice` from the global name space. This way, the stakes of accepting this ticket are a lot lower.",
    "created_at": "2014-05-12T21:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203711",
    "user": "@malb"
}
```

I figured I should make a conservative choice and removed `IntegerLattice` from the global name space. This way, the stakes of accepting this ticket are a lot lower.



---

archive/issue_comments_203712.json:
```json
{
    "body": "Replying to [comment:40 malb]:\n> > * matrix_integer_dense.pyx:\n> > {{{\n> >         fpLLL SPECIFIC INPUTS:\n> > \n> >         - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)\n> >                                              = here <sup>^</sup><sup>^</sup>^^ ?\n> > }}}\n> \n> I don't understand this point, fp='rr' is a valid parameter.\n\nYes it is. Therefore I'd prefer `fp='rr'`, since this parameter is specified like this and not testing for equality with `==`.",
    "created_at": "2014-05-13T07:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203712",
    "user": "@dkrenn"
}
```

Replying to [comment:40 malb]:
> > * matrix_integer_dense.pyx:
> > {{{
> >         fpLLL SPECIFIC INPUTS:
> > 
> >         - ``precision`` - bit precision to use if ``fp=='rr'`` (default: 0 for automatic choice)
> >                                              = here <sup>^</sup><sup>^</sup>^^ ?
> > }}}
> 
> I don't understand this point, fp='rr' is a valid parameter.

Yes it is. Therefore I'd prefer `fp='rr'`, since this parameter is specified like this and not testing for equality with `==`.



---

archive/issue_comments_203713.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-13T08:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203713",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203714.json:
```json
{
    "body": "Replying to [comment:44 dkrenn]:\n> Yes it is. Therefore I'd prefer `fp='rr'`, since this parameter is specified like this and not testing for equality with `==`.\n\nAh, gotcha. Fixed. Thanks!",
    "created_at": "2014-05-13T08:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203714",
    "user": "@malb"
}
```

Replying to [comment:44 dkrenn]:
> Yes it is. Therefore I'd prefer `fp='rr'`, since this parameter is specified like this and not testing for equality with `==`.

Ah, gotcha. Fixed. Thanks!



---

archive/issue_comments_203715.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-14T09:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203715",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203716.json:
```json
{
    "body": "Thanks for your changes. Look good. \n\nThere is one problem: the documentation does not build:\n\n```\n[modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n[modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:6: WARNING: Block quote ends without a blank line; unexpected unindent.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/local/data/krenn/sage-develop/src/doc/common/builder.py\", line 1477, in <module>\n    getattr(get_builder(name), type)()\n  File \"/local/data/krenn/sage-develop/src/doc/common/builder.py\", line 276, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/local/data/krenn/sage-develop/src/doc/common/builder.py\", line 487, in _wrapper\n    x.get(99999)\n  File \"/local/data/krenn/sage-develop/local/lib/python/multiprocessing/pool.py\", line 554, in get\n    raise self._value\nOSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n\nmake: *** [doc-html] Fehler 1\n```\n",
    "created_at": "2014-05-14T09:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203716",
    "user": "@dkrenn"
}
```

Thanks for your changes. Look good. 

There is one problem: the documentation does not build:

```
[modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
[modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:6: WARNING: Block quote ends without a blank line; unexpected unindent.
Error building the documentation.
Traceback (most recent call last):
  File "/local/data/krenn/sage-develop/src/doc/common/builder.py", line 1477, in <module>
    getattr(get_builder(name), type)()
  File "/local/data/krenn/sage-develop/src/doc/common/builder.py", line 276, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/local/data/krenn/sage-develop/src/doc/common/builder.py", line 487, in _wrapper
    x.get(99999)
  File "/local/data/krenn/sage-develop/local/lib/python/multiprocessing/pool.py", line 554, in get
    raise self._value
OSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.

make: *** [doc-html] Fehler 1
```




---

archive/issue_comments_203717.json:
```json
{
    "body": "Thanks! I'm trying to fix it, but the error message doesn't seem very helpful:\n\n\n```\nOSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n```\n\n\nThe error doesn't seem to actually be in line 3 of the file.",
    "created_at": "2014-05-14T10:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203717",
    "user": "@malb"
}
```

Thanks! I'm trying to fix it, but the error message doesn't seem very helpful:


```
OSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
```


The error doesn't seem to actually be in line 3 of the file.



---

archive/issue_comments_203718.json:
```json
{
    "body": "Replying to [comment:49 malb]:\n> Thanks! I'm trying to fix it, but the error message doesn't seem very helpful:\n> \n> {{{\n> OSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n> }}}\n> \n> The error doesn't seem to actually be in line 3 of the file.\n\nThat is true. I had this (and similar error messages) a couple of times and amost every time I had to solve it by a divide-and-conquer-comment-out procedure...",
    "created_at": "2014-05-14T10:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203718",
    "user": "@dkrenn"
}
```

Replying to [comment:49 malb]:
> Thanks! I'm trying to fix it, but the error message doesn't seem very helpful:
> 
> {{{
> OSError: [modules  ] /local/data/krenn/sage-develop/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py:docstring of sage.modules.free_module_integer:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
> }}}
> 
> The error doesn't seem to actually be in line 3 of the file.

That is true. I had this (and similar error messages) a couple of times and amost every time I had to solve it by a divide-and-conquer-comment-out procedure...



---

archive/issue_comments_203719.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-14T11:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203719",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203720.json:
```json
{
    "body": "Maybe one should also rewrite references like \n\n```\n[Schnorr and Horner, Eurocrypt '95]\n```\n\ninto a true reference as in \n\n```\nThis docstring is referencing [SC]_. Just remember that references\nare global, so we can also reference to [Nat2000]_ in the ALGORITHM\nblock, even if it is in a separate file. However we would not\ninclude the reference here since it would cause a conflict.\n\nREFERENCES:\n\n.. [SC] Conventions for coding in sage.\n   http://www.sagemath.org/doc/developer/conventions.html.\n```\n\n(copied from the developer guide)",
    "created_at": "2014-05-14T11:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203720",
    "user": "@dkrenn"
}
```

Maybe one should also rewrite references like 

```
[Schnorr and Horner, Eurocrypt '95]
```

into a true reference as in 

```
This docstring is referencing [SC]_. Just remember that references
are global, so we can also reference to [Nat2000]_ in the ALGORITHM
block, even if it is in a separate file. However we would not
include the reference here since it would cause a conflict.

REFERENCES:

.. [SC] Conventions for coding in sage.
   http://www.sagemath.org/doc/developer/conventions.html.
```

(copied from the developer guide)



---

archive/issue_comments_203721.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-14T11:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203721",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_203722.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-14T12:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203722",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203723.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-14T12:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203723",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203724.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-14T12:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203724",
    "user": "@malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_203725.json:
```json
{
    "body": "I think it got them all now.",
    "created_at": "2014-05-14T12:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203725",
    "user": "@malb"
}
```

I think it got them all now.



---

archive/issue_comments_203726.json:
```json
{
    "body": "Everything looks good now. Doctests are still running...",
    "created_at": "2014-05-14T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203726",
    "user": "@dkrenn"
}
```

Everything looks good now. Doctests are still running...



---

archive/issue_comments_203727.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-14T15:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203727",
    "user": "@dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_203728.json:
```json
{
    "body": "Whooohoo! Thank you so much!",
    "created_at": "2014-05-14T15:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203728",
    "user": "@malb"
}
```

Whooohoo! Thank you so much!



---

archive/issue_comments_203729.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-16T09:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203729",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_203730.json:
```json
{
    "body": "Please merge in the latest beta and resolve the doctest failurues\n\n```\nsage -t --long src/sage/modules/free_module_integer.py\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 437, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\nFailed example:\n    L.LLL()\nExpected:\n    100 x 100 dense matrix over Integer Ring\nGot:\n    100 x 100 dense matrix over Integer Ring (use the '.str()' method to see the entries)\n```\n\nOn a related note, how is the doctest runtime on 100x100 matrices... is this the smallest example that provides adequate test coverage?",
    "created_at": "2014-05-16T09:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203730",
    "user": "@vbraun"
}
```

Please merge in the latest beta and resolve the doctest failurues

```
sage -t --long src/sage/modules/free_module_integer.py
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 437, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
Failed example:
    L.LLL()
Expected:
    100 x 100 dense matrix over Integer Ring
Got:
    100 x 100 dense matrix over Integer Ring (use the '.str()' method to see the entries)
```

On a related note, how is the doctest runtime on 100x100 matrices... is this the smallest example that provides adequate test coverage?



---

archive/issue_comments_203731.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-16T11:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203731",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203732.json:
```json
{
    "body": "Running times are okay, but I reduced the dimension to 60 anyway. Also, I marked a long doctest as long (a voronoi cell computation).\n\n\n```python\nsage: from sage.modules.free_module_integer import IntegerLattice\nsage: A = sage.crypto.gen_lattice(type='random', n=1, m=100, q=2^60, seed=42)\nsage: L = IntegerLattice(A, lll_reduce=False)\nsage: min(v.norm().n() for v in L.reduced_basis)\n4.17330740711759e15\n\nsage: %time L.LLL()\nCPU times: user 268 ms, sys: 0 ns, total: 268 ms\nWall time: 269 ms\n100 x 100 dense matrix over Integer Ring\n\nsage: %time L.BKZ(block_size=10)\nCPU times: user 1.25 s, sys: 0 ns, total: 1.25 s\nWall time: 1.25 s\n100 x 100 dense matrix over Integer Ring\n```\n\n\nHowever, doctests pass on my machine, which is strange.\n\n\n```bash\n$./sage -version\nSage Version 6.3.beta0, Release Date: 2014-05-10\n```\n\n----\nNew commits:",
    "created_at": "2014-05-16T11:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203732",
    "user": "@malb"
}
```

Running times are okay, but I reduced the dimension to 60 anyway. Also, I marked a long doctest as long (a voronoi cell computation).


```python
sage: from sage.modules.free_module_integer import IntegerLattice
sage: A = sage.crypto.gen_lattice(type='random', n=1, m=100, q=2^60, seed=42)
sage: L = IntegerLattice(A, lll_reduce=False)
sage: min(v.norm().n() for v in L.reduced_basis)
4.17330740711759e15

sage: %time L.LLL()
CPU times: user 268 ms, sys: 0 ns, total: 268 ms
Wall time: 269 ms
100 x 100 dense matrix over Integer Ring

sage: %time L.BKZ(block_size=10)
CPU times: user 1.25 s, sys: 0 ns, total: 1.25 s
Wall time: 1.25 s
100 x 100 dense matrix over Integer Ring
```


However, doctests pass on my machine, which is strange.


```bash
$./sage -version
Sage Version 6.3.beta0, Release Date: 2014-05-10
```

----
New commits:



---

archive/issue_comments_203733.json:
```json
{
    "body": "Latest beta = 6.3.beta1",
    "created_at": "2014-05-16T11:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203733",
    "user": "@vbraun"
}
```

Latest beta = 6.3.beta1



---

archive/issue_comments_203734.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-16T11:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203734",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203735.json:
```json
{
    "body": "Doctests fixed ... sorry, I missed beta1 somehow before.",
    "created_at": "2014-05-16T11:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203735",
    "user": "@malb"
}
```

Doctests fixed ... sorry, I missed beta1 somehow before.



---

archive/issue_comments_203736.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-19T13:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203736",
    "user": "@malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_203737.json:
```json
{
    "body": "Reviewed changes.....positive.",
    "created_at": "2014-05-21T12:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203737",
    "user": "@dkrenn"
}
```

Reviewed changes.....positive.



---

archive/issue_comments_203738.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-21T12:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203738",
    "user": "@dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_203739.json:
```json
{
    "body": "There's a couple of little things scattered throughout that I think should be fixed before this gets merged. For example, in the `LLL` definition, you have non-ascii characters where I think you should just use the latex equivalents. The reference should be:\n\n```\n.. [Ref] blah on first line that needs continuing on\n   the second line\n```\n\n(you have one space less and would be slightly surprised the doc builds and has well-formatted output). You could likely benefit from raw string formatting:\n\n```\ndef foo():\n    r\"\"\"\n    The r in front makes this a \"raw\" string, so the backslash isn't an\n    escape character. So you can do things like this: `\\ZZ` and `\\alpha`.\n    \"\"\"\n    pass\n```\n\nBring stuff up to python3 compliance. I can go through and do these things tomorrow morning if you don't mind the tweaks (and/or don't do it while I sleep `:P`).",
    "created_at": "2014-05-22T06:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203739",
    "user": "@tscrim"
}
```

There's a couple of little things scattered throughout that I think should be fixed before this gets merged. For example, in the `LLL` definition, you have non-ascii characters where I think you should just use the latex equivalents. The reference should be:

```
.. [Ref] blah on first line that needs continuing on
   the second line
```

(you have one space less and would be slightly surprised the doc builds and has well-formatted output). You could likely benefit from raw string formatting:

```
def foo():
    r"""
    The r in front makes this a "raw" string, so the backslash isn't an
    escape character. So you can do things like this: `\ZZ` and `\alpha`.
    """
    pass
```

Bring stuff up to python3 compliance. I can go through and do these things tomorrow morning if you don't mind the tweaks (and/or don't do it while I sleep `:P`).



---

archive/issue_comments_203740.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-22T07:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203740",
    "user": "@dkrenn"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_203741.json:
```json
{
    "body": "Replying to [comment:68 tscrim]:\n> There's a couple of little things scattered throughout that I think should be fixed before this gets merged. For example, in the `LLL` definition, you have non-ascii characters where I think you should just use the latex equivalents. \n\nI disagree, using UTF-8 makes it a lot more readable and compact. Changing it to TeX would be a step backward IMHO.\n\n> The reference should be:\n> {{{\n> .. [Ref] blah on first line that needs continuing on\n>    the second line\n> }}}\n> (you have one space less and would be slightly surprised the doc builds and has well-formatted output). \n\nThe documentation builds and - as far as I can tell - has well formated output. If you'd prefer it to be aligned for consistency, I'm not objecting.\n\n> You could likely benefit from raw string formatting:\n> {{{\n> def foo():\n>     r\"\"\"\n>     The r in front makes this a \"raw\" string, so the backslash isn't an\n>     escape character. So you can do things like this: `\\ZZ` and `\\alpha`.\n>     \"\"\"\n>     pass\n> }}}\n\nI know this exists, but I find ``\\\\ZZ`` more straight-forward. I don't think it needs to be changed, but if you prefer it differently, feel free to go ahead.\n\n> Bring stuff up to python3 compliance. \n\nPython 3 compliance would be good :)\n\n> I can go through and do these things tomorrow morning if you don't mind the tweaks (and/or don't do it while I sleep `:P`).\n\nThanks.",
    "created_at": "2014-05-22T07:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203741",
    "user": "@malb"
}
```

Replying to [comment:68 tscrim]:
> There's a couple of little things scattered throughout that I think should be fixed before this gets merged. For example, in the `LLL` definition, you have non-ascii characters where I think you should just use the latex equivalents. 

I disagree, using UTF-8 makes it a lot more readable and compact. Changing it to TeX would be a step backward IMHO.

> The reference should be:
> {{{
> .. [Ref] blah on first line that needs continuing on
>    the second line
> }}}
> (you have one space less and would be slightly surprised the doc builds and has well-formatted output). 

The documentation builds and - as far as I can tell - has well formated output. If you'd prefer it to be aligned for consistency, I'm not objecting.

> You could likely benefit from raw string formatting:
> {{{
> def foo():
>     r"""
>     The r in front makes this a "raw" string, so the backslash isn't an
>     escape character. So you can do things like this: `\ZZ` and `\alpha`.
>     """
>     pass
> }}}

I know this exists, but I find ``\\ZZ`` more straight-forward. I don't think it needs to be changed, but if you prefer it differently, feel free to go ahead.

> Bring stuff up to python3 compliance. 

Python 3 compliance would be good :)

> I can go through and do these things tomorrow morning if you don't mind the tweaks (and/or don't do it while I sleep `:P`).

Thanks.



---

archive/issue_comments_203742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-22T20:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203742",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203743.json:
```json
{
    "body": "Okay, I've made a bunch of fixes and tweaks. I've created a separate branch which changes the UTF to latex and adds fplll to the doc as well. IMO, the latex version looks better in the html doc (and in the pdf, you've made it so they are the same). However if you really prefer to keep it with the UTF, then you can switch the branch back and set a positive review on that one (after checking it of course).\n\nPS - I remember that it used to be that the references would fail to build if they weren't aligned properly. Good to know it's more robust now.\n----\nNew commits:",
    "created_at": "2014-05-22T20:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203743",
    "user": "@tscrim"
}
```

Okay, I've made a bunch of fixes and tweaks. I've created a separate branch which changes the UTF to latex and adds fplll to the doc as well. IMO, the latex version looks better in the html doc (and in the pdf, you've made it so they are the same). However if you really prefer to keep it with the UTF, then you can switch the branch back and set a positive review on that one (after checking it of course).

PS - I remember that it used to be that the references would fail to build if they weren't aligned properly. Good to know it's more robust now.
----
New commits:



---

archive/issue_comments_203744.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-22T20:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203744",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_203745.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-23T11:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203745",
    "user": "@malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_203746.json:
```json
{
    "body": "looks okay, thanks.",
    "created_at": "2014-05-23T11:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203746",
    "user": "@malb"
}
```

looks okay, thanks.



---

archive/issue_comments_203747.json:
```json
{
    "body": "Conflicts with #16216",
    "created_at": "2014-05-23T11:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203747",
    "user": "@vbraun"
}
```

Conflicts with #16216



---

archive/issue_comments_203748.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-23T11:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203748",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_203749.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-23T12:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203749",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203750.json:
```json
{
    "body": "merged",
    "created_at": "2014-05-23T12:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203750",
    "user": "@malb"
}
```

merged



---

archive/issue_comments_203751.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-23T12:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203751",
    "user": "@malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_203752.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-23T13:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203752",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_203753.json:
```json
{
    "body": "PDF docs fail:\n\n```\n! Package inputenc Error: Unicode char \\u8:\u0323 not set up for use with LaTeX.\n\nSee the inputenc package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.24326 A lattice $(b_1, b_2, ..., b_d)$ is $(\u0323\n                                                \u03b4, \u03b7)$-LLL-reduced\n? \n! Emergency stop.\n```\n\nI think there is a zero-width space or something like that before the delta. But really, why did you remove the original TeX codes?",
    "created_at": "2014-05-24T13:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203753",
    "user": "@vbraun"
}
```

PDF docs fail:

```
! Package inputenc Error: Unicode char \u8:̣ not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.24326 A lattice $(b_1, b_2, ..., b_d)$ is $(̣
                                                δ, η)$-LLL-reduced
? 
! Emergency stop.
```

I think there is a zero-width space or something like that before the delta. But really, why did you remove the original TeX codes?



---

archive/issue_comments_203754.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-05-24T13:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203754",
    "user": "@vbraun"
}
```

Last 10 new commits:



---

archive/issue_comments_203755.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2014-05-24T13:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203755",
    "user": "@vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_203756.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-05-24T13:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203756",
    "user": "@vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_203757.json:
```json
{
    "body": "In fact, there is a http://www.fileformat.info/info/unicode/char/0323/index.htm before the delta (depending on your editor you see a dot below the delta)",
    "created_at": "2014-05-24T13:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203757",
    "user": "@vbraun"
}
```

In fact, there is a http://www.fileformat.info/info/unicode/char/0323/index.htm before the delta (depending on your editor you see a dot below the delta)



---

archive/issue_comments_203758.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-24T16:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203758",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_203759.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-24T16:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203759",
    "user": "@malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_203760.json:
```json
{
    "body": "should be fixed now.",
    "created_at": "2014-05-24T16:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203760",
    "user": "@malb"
}
```

should be fixed now.



---

archive/issue_comments_203761.json:
```json
{
    "body": "What's the policy on such \"doctest failure\" like fixes? Does someone have to review them or is it enough to check it again using the automatic tools checking such things?",
    "created_at": "2014-05-25T12:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203761",
    "user": "@malb"
}
```

What's the policy on such "doctest failure" like fixes? Does someone have to review them or is it enough to check it again using the automatic tools checking such things?



---

archive/issue_comments_203762.json:
```json
{
    "body": "Use your own judgement... but if you set it back to positive review you better be sure that it works ;-)",
    "created_at": "2014-05-25T13:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203762",
    "user": "@vbraun"
}
```

Use your own judgement... but if you set it back to positive review you better be sure that it works ;-)



---

archive/issue_comments_203763.json:
```json
{
    "body": "living on the edge \u2026 it did work on my machine :)",
    "created_at": "2014-05-25T13:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203763",
    "user": "@malb"
}
```

living on the edge … it did work on my machine :)



---

archive/issue_comments_203764.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-25T13:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203764",
    "user": "@malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_203765.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-25T17:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203765",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_203766.json:
```json
{
    "body": "there is a strange rounding going on in\n\n```\nhv = [QQ(round(elmt, 6)) for elmt in hv]\n```\n\n\nCan anyone explain it? A careless change there initiated #29866,\nbut still why `6`, and not `42` - or better, something input-dependent?",
    "created_at": "2020-06-17T09:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203766",
    "user": "@dimpase"
}
```

there is a strange rounding going on in

```
hv = [QQ(round(elmt, 6)) for elmt in hv]
```


Can anyone explain it? A careless change there initiated #29866,
but still why `6`, and not `42` - or better, something input-dependent?



---

archive/issue_comments_203767.json:
```json
{
    "body": "This is in `diamond_cut` in `diamond_cutting.py`, right? Maybe the underlying software uses single precision floats and this is meant to approximate that?",
    "created_at": "2020-06-17T10:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203767",
    "user": "@malb"
}
```

This is in `diamond_cut` in `diamond_cutting.py`, right? Maybe the underlying software uses single precision floats and this is meant to approximate that?



---

archive/issue_comments_203768.json:
```json
{
    "body": "Replying to [comment:89 malb]:\n> This is in `diamond_cut` in `diamond_cutting.py`, right? \nyes\n\n> Maybe the underlying software uses single precision floats and this is meant to approximate that?\n\nNo, since ages (libppl interface was added in 2011 or 2012, I gather - although it could have taken more time for it to become default) `Polyhedron()` uses ppl as backend, if given rational data, so it's exact.\nI thought that line does some clever rounding to speed things up, but still I can't imagine a maths statement which could make it rigorous.\n\nShould we just drop the rounding?",
    "created_at": "2020-06-17T12:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203768",
    "user": "@dimpase"
}
```

Replying to [comment:89 malb]:
> This is in `diamond_cut` in `diamond_cutting.py`, right? 
yes

> Maybe the underlying software uses single precision floats and this is meant to approximate that?

No, since ages (libppl interface was added in 2011 or 2012, I gather - although it could have taken more time for it to become default) `Polyhedron()` uses ppl as backend, if given rational data, so it's exact.
I thought that line does some clever rounding to speed things up, but still I can't imagine a maths statement which could make it rigorous.

Should we just drop the rounding?



---

archive/issue_comments_203769.json:
```json
{
    "body": "It's actually quite strange - you first convert your data to `float()`, and then build a polyhedron with coodinates obtained by rounding these floats and converting them into QQ.\n\nIt's a miracle to me that it (mostly) works.",
    "created_at": "2020-06-17T12:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15739#issuecomment-203769",
    "user": "@dimpase"
}
```

It's actually quite strange - you first convert your data to `float()`, and then build a polyhedron with coodinates obtained by rounding these floats and converting them into QQ.

It's a miracle to me that it (mostly) works.
