# Issue 15647: Fix in Stanley symmetric functions

Issue created by migration from https://trac.sagemath.org/ticket/15884

Original creator: aschilling

Original creation time: 2014-03-02 22:08:30

CC:  sage-combinat tscrim

Keywords: stanley symmetric functions, unit, one

Currently, Stanley symmetric functions use unit instead of one which makes the following fail:

```
sage: A = AffinePermutationGroup(['A',4,1])
sage: a = A([-2,0,1,4,12])
sage: a.stanley_symmetric_function()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-3-21372b62dff6> in <module>()
----> 1 a.stanley_symmetric_function()

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/weyl_groups.pyc in stanley_symmetric_function(self)
    355             import sage.combinat.sf
    356             m = sage.combinat.sf.sf.SymmetricFunctions(QQ).monomial()
--> 357             return m.from_polynomial_exp(self.stanley_symmetric_function_as_polynomial())
    358 
    359         @cached_in_parent_method

/Applications/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedMethodCaller.__call__ (sage/misc/cachefunc.c:8248)()

/Applications/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedMethod._instance_call (sage/misc/cachefunc.c:10738)()

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/weyl_groups.pyc in stanley_symmetric_function_as_polynomial(self, max_length)
    308 
    309             return R(sum(2**(pieri_factors.stanley_symm_poly_weight(u))*x[u.length()-1] * v.stanley_symmetric_function_as_polynomial(max_length = u.length())
--> 310                            for (u,v) in self.left_pieri_factorizations(max_length)
    311                            if u != W.unit()))
    312 

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/weyl_groups.pyc in <genexpr>((u, v))
    309             return R(sum(2**(pieri_factors.stanley_symm_poly_weight(u))*x[u.length()-1] * v.stanley_symmetric_function_as_polynomial(max_length = u.length())
    310                            for (u,v) in self.left_pieri_factorizations(max_length)
--> 311                            if u != W.unit()))
    312 
    313 

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:6997)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (sage/structure/misc.c:1606)()

AttributeError: 'AffinePermutationGroupTypeA_with_category' object has no attribute 'unit'
```



---

Comment by aschilling created at 2014-03-02 22:17:29

New commits:


---

Comment by aschilling created at 2014-03-02 22:17:29

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-03-03 04:43:11

LGTM.


---

Comment by tscrim created at 2014-03-03 04:43:34

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-03-04 16:58:46

Resolution: fixed
