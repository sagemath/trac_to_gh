# Issue 11330: Maxima fails to build on Cygwin on XP

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2011-06-16 14:05:54

Assignee: tbd

CC:  mhansen dimpase was

This is NOT the same as #11260, as far as I can tell.

```
test -d binary-ecl || mkdir binary-ecl
ecl -norc -eval '(progn (load "../lisp-utils/defsystem.lisp") (funcall (intern (symbol-name :operate-on-system) :mk) "maxima" :compile :verbose t) (build-maxima-lib))' -eval '(ext:quit)'
;;; Loading */home/.../build/maxima-5.23.p2.p0/src/src/../lisp-utils/defsystem.lisp"
An error occurred during initialization:
Filesystem error with pathname #P"SYS:CMP.NEWEST".
Either
 1) the file does not exist, or
 2) we are not allow to access the file, or
 3) the pathname points to a broken symbolic link.
```

and then the build quits.


---

Comment by kcrisman created at 2011-06-16 14:15:08

A similar bug was reported at one point on #6517, though it seems to have been resolved without that occurring again.

A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.

A similar, but probably not that closely related, problem is also reported [here](http://compgroups.net/comp.lang.lisp/ECL+Windows+MinGW32), where it seems to be related to mismatched versions of something as well.


---

Comment by kcrisman created at 2011-06-16 14:52:06

> A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.

Interestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.


---

Comment by kcrisman created at 2011-06-16 14:55:17

See also [this Maxima bug report](https://sourceforge.net/tracker/?func=detail&aid=3317347&group_id=4933&atid=104933) and a post to the ECL list.


---

Comment by kcrisman created at 2011-06-16 17:03:14

Here is the [ECL list thread](http://sourceforge.net/mailarchive/message.php?msg_id=27660684).


---

Comment by kcrisman created at 2011-06-26 02:45:31

Replying to [comment:2 kcrisman]:
> 
> > A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.
> 
> Interestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.

The bug report for that report ([here](http://sourceforge.net/tracker/index.php?func=detail&aid=2803755&group_id=4933&atid=104933)), by the way, was closed after no one followed up on it and Maxima had upgrade a fair amount in the meantime.  But it's not clear that particular issue was resolved.  

Also, it's very hard to find defsystem.lisp.  Apparently it's still being developed, but it's very hard to find out where...


---

Comment by kcrisman created at 2011-06-26 03:34:24

Weirdly, I also now have a successful build of Maxima on Cygwin on the same XP machine.  It even works from `./sage -maxima`!  

This is not a positive review or anything; probably the error once in a while doesn't happen.  Just reporting.


---

Comment by kcrisman created at 2011-06-30 02:15:28

This once again happened (the correct building with no problems).

Incidentally, all of this is with Cygwin 1.7.3.


---

Comment by kcrisman created at 2011-08-03 10:43:00

Once again correctly built with no intervention on this same virtual machine.


---

Comment by kcrisman created at 2011-12-01 17:04:03

Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.


---

Comment by dimpase created at 2011-12-03 07:06:19

Changing status from new to needs_info.


---

Comment by dimpase created at 2011-12-03 07:06:19

Replying to [comment:9 kcrisman]:
> Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  

if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.


---

Comment by kcrisman created at 2011-12-03 15:25:44

Replying to [comment:10 dimpase]:
> Replying to [comment:9 kcrisman]:
> > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> 
> if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.

Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.

Mike, do you think you could start a Sage build from scratch with the new (Lion, #11884) Maxima package on the XP image you have access to and see what happens?


---

Comment by kcrisman created at 2011-12-13 01:56:29

Replying to [comment:11 kcrisman]:
> Replying to [comment:10 dimpase]:
> > Replying to [comment:9 kcrisman]:
> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> > 
> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.
> 
> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.
> 

With sage-4.7.2 and the newest Cygwin and the new Maxima and ECL packages for Lion, I didn't have problems getting this to work.  

```
User 1`@`GC02635 /home/SageUser/sage-4.7.2
$ ./sage -maxima
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas"
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp ECL 11.1.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 2+2;
(%o1)                                  4
```

I think we'll have to close this as invalid - we can always open a new ticket some other time if it does turn out to happen, and if we actually need things.


---

Comment by kcrisman created at 2011-12-13 01:56:29

Changing status from needs_info to needs_review.


---

Comment by kcrisman created at 2011-12-13 01:58:22

Replying to [comment:11 kcrisman]:
> Replying to [comment:10 dimpase]:
> > Replying to [comment:9 kcrisman]:
> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> > 
> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.
> 
> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.

I didn't have any problems with this on Sage 4.7.2 with the latest Maxima and ECL spkgs.

```
User 1`@`GC02635 /home/SageUser/sage-4.7.2
$ ./sage -maxima
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas"
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp ECL 11.1.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 2+2;
(%o1)                                  4
```

I think this will have to go into sage-invalid for now.  We can open another ticket if we really want to some other time, but apparently that problem was a once-off.


---

Comment by kcrisman created at 2011-12-13 01:58:33

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-01-05 13:28:32

Resolution: worksforme
