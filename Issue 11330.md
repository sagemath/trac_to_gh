# Issue 11330: Maxima fails to build on Cygwin on XP

archive/issues_011330.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @mwhansen @dimpase @williamstein\n\nThis is NOT the same as #11260, as far as I can tell.\n\n```\ntest -d binary-ecl || mkdir binary-ecl\necl -norc -eval '(progn (load \"../lisp-utils/defsystem.lisp\") (funcall (intern (symbol-name :operate-on-system) :mk) \"maxima\" :compile :verbose t) (build-maxima-lib))' -eval '(ext:quit)'\n;;; Loading */home/.../build/maxima-5.23.p2.p0/src/src/../lisp-utils/defsystem.lisp\"\nAn error occurred during initialization:\nFilesystem error with pathname #P\"SYS:CMP.NEWEST\".\nEither\n 1) the file does not exist, or\n 2) we are not allow to access the file, or\n 3) the pathname points to a broken symbolic link.\n```\n\nand then the build quits.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11502\n\n",
    "created_at": "2011-06-16T14:05:54Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Maxima fails to build on Cygwin on XP",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11330",
    "user": "https://github.com/kcrisman"
}
```
Assignee: tbd

CC:  @mwhansen @dimpase @williamstein

This is NOT the same as #11260, as far as I can tell.

```
test -d binary-ecl || mkdir binary-ecl
ecl -norc -eval '(progn (load "../lisp-utils/defsystem.lisp") (funcall (intern (symbol-name :operate-on-system) :mk) "maxima" :compile :verbose t) (build-maxima-lib))' -eval '(ext:quit)'
;;; Loading */home/.../build/maxima-5.23.p2.p0/src/src/../lisp-utils/defsystem.lisp"
An error occurred during initialization:
Filesystem error with pathname #P"SYS:CMP.NEWEST".
Either
 1) the file does not exist, or
 2) we are not allow to access the file, or
 3) the pathname points to a broken symbolic link.
```

and then the build quits.

Issue created by migration from https://trac.sagemath.org/ticket/11502





---

archive/issue_comments_124927.json:
```json
{
    "body": "A similar bug was reported at one point on #6517, though it seems to have been resolved without that occurring again.\n\nA very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.\n\nA similar, but probably not that closely related, problem is also reported [here](http://compgroups.net/comp.lang.lisp/ECL+Windows+MinGW32), where it seems to be related to mismatched versions of something as well.",
    "created_at": "2011-06-16T14:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124927",
    "user": "https://github.com/kcrisman"
}
```

A similar bug was reported at one point on #6517, though it seems to have been resolved without that occurring again.

A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.

A similar, but probably not that closely related, problem is also reported [here](http://compgroups.net/comp.lang.lisp/ECL+Windows+MinGW32), where it seems to be related to mismatched versions of something as well.



---

archive/issue_comments_124928.json:
```json
{
    "body": "> A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.\n\nInterestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.",
    "created_at": "2011-06-16T14:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124928",
    "user": "https://github.com/kcrisman"
}
```

> A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.

Interestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.



---

archive/issue_comments_124929.json:
```json
{
    "body": "See also [this Maxima bug report](https://sourceforge.net/tracker/?func=detail&aid=3317347&group_id=4933&atid=104933) and a post to the ECL list.",
    "created_at": "2011-06-16T14:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124929",
    "user": "https://github.com/kcrisman"
}
```

See also [this Maxima bug report](https://sourceforge.net/tracker/?func=detail&aid=3317347&group_id=4933&atid=104933) and a post to the ECL list.



---

archive/issue_comments_124930.json:
```json
{
    "body": "Here is the [ECL list thread](http://sourceforge.net/mailarchive/message.php?msg_id=27660684).",
    "created_at": "2011-06-16T17:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124930",
    "user": "https://github.com/kcrisman"
}
```

Here is the [ECL list thread](http://sourceforge.net/mailarchive/message.php?msg_id=27660684).



---

archive/issue_comments_124931.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]:\n> \n> > A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.\n> \n> Interestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.\n\nThe bug report for that report ([here](http://sourceforge.net/tracker/index.php?func=detail&aid=2803755&group_id=4933&atid=104933)), by the way, was closed after no one followed up on it and Maxima had upgrade a fair amount in the meantime.  But it's not clear that particular issue was resolved.  \n\nAlso, it's very hard to find defsystem.lisp.  Apparently it's still being developed, but it's very hard to find out where...",
    "created_at": "2011-06-26T02:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124931",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:2 kcrisman]:
> 
> > A very similar problem was reported at [this Maxima list thread](http://www.math.utexas.edu/pipermail/maxima/2009/017432.html), and it was resolved by updating defsystem.lisp.  We have defsystem 3.4 interim 3 in our current spkg.
> 
> Interestingly, that is exactly the version that is problematic in the thread.  But nothing in the code seems obvious with respect to this message.

The bug report for that report ([here](http://sourceforge.net/tracker/index.php?func=detail&aid=2803755&group_id=4933&atid=104933)), by the way, was closed after no one followed up on it and Maxima had upgrade a fair amount in the meantime.  But it's not clear that particular issue was resolved.  

Also, it's very hard to find defsystem.lisp.  Apparently it's still being developed, but it's very hard to find out where...



---

archive/issue_comments_124932.json:
```json
{
    "body": "Weirdly, I also now have a successful build of Maxima on Cygwin on the same XP machine.  It even works from `./sage -maxima`!  \n\nThis is not a positive review or anything; probably the error once in a while doesn't happen.  Just reporting.",
    "created_at": "2011-06-26T03:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124932",
    "user": "https://github.com/kcrisman"
}
```

Weirdly, I also now have a successful build of Maxima on Cygwin on the same XP machine.  It even works from `./sage -maxima`!  

This is not a positive review or anything; probably the error once in a while doesn't happen.  Just reporting.



---

archive/issue_comments_124933.json:
```json
{
    "body": "This once again happened (the correct building with no problems).\n\nIncidentally, all of this is with Cygwin 1.7.3.",
    "created_at": "2011-06-30T02:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124933",
    "user": "https://github.com/kcrisman"
}
```

This once again happened (the correct building with no problems).

Incidentally, all of this is with Cygwin 1.7.3.



---

archive/issue_comments_124934.json:
```json
{
    "body": "Once again correctly built with no intervention on this same virtual machine.",
    "created_at": "2011-08-03T10:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124934",
    "user": "https://github.com/kcrisman"
}
```

Once again correctly built with no intervention on this same virtual machine.



---

archive/issue_comments_124935.json:
```json
{
    "body": "Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.",
    "created_at": "2011-12-01T17:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124935",
    "user": "https://github.com/kcrisman"
}
```

Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.



---

archive/issue_comments_124936.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-12-03T07:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124936",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_124937.json:
```json
{
    "body": "Replying to [comment:9 kcrisman]:\n> Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  \n\nif this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.",
    "created_at": "2011-12-03T07:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124937",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:9 kcrisman]:
> Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  

if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.



---

archive/issue_comments_124938.json:
```json
{
    "body": "Replying to [comment:10 dimpase]:\n> Replying to [comment:9 kcrisman]:\n> > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  \n> \n> if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.\n\nWell, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.\n\nMike, do you think you could start a Sage build from scratch with the new (Lion, #11884) Maxima package on the XP image you have access to and see what happens?",
    "created_at": "2011-12-03T15:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124938",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:10 dimpase]:
> Replying to [comment:9 kcrisman]:
> > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> 
> if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.

Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.

Mike, do you think you could start a Sage build from scratch with the new (Lion, #11884) Maxima package on the XP image you have access to and see what happens?



---

archive/issue_comments_124939.json:
```json
{
    "body": "Replying to [comment:11 kcrisman]:\n> Replying to [comment:10 dimpase]:\n> > Replying to [comment:9 kcrisman]:\n> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  \n> > \n> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.\n> \n> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.\n> \n\nWith sage-4.7.2 and the newest Cygwin and the new Maxima and ECL packages for Lion, I didn't have problems getting this to work.  \n\n```\nUser 1@GC02635 /home/SageUser/sage-4.7.2\n$ ./sage -maxima\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas\"\nMaxima 5.23.2 http://maxima.sourceforge.net\nusing Lisp ECL 11.1.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) 2+2;\n(%o1)                                  4\n```\n\nI think we'll have to close this as invalid - we can always open a new ticket some other time if it does turn out to happen, and if we actually need things.",
    "created_at": "2011-12-13T01:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124939",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:11 kcrisman]:
> Replying to [comment:10 dimpase]:
> > Replying to [comment:9 kcrisman]:
> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> > 
> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.
> 
> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.
> 

With sage-4.7.2 and the newest Cygwin and the new Maxima and ECL packages for Lion, I didn't have problems getting this to work.  

```
User 1@GC02635 /home/SageUser/sage-4.7.2
$ ./sage -maxima
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas"
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp ECL 11.1.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 2+2;
(%o1)                                  4
```

I think we'll have to close this as invalid - we can always open a new ticket some other time if it does turn out to happen, and if we actually need things.



---

archive/issue_comments_124940.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-12-13T01:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124940",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_124941.json:
```json
{
    "body": "Replying to [comment:11 kcrisman]:\n> Replying to [comment:10 dimpase]:\n> > Replying to [comment:9 kcrisman]:\n> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  \n> > \n> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.\n> \n> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.\n\nI didn't have any problems with this on Sage 4.7.2 with the latest Maxima and ECL spkgs.\n\n```\nUser 1@GC02635 /home/SageUser/sage-4.7.2\n$ ./sage -maxima\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas\"\n;;; Loading #P\"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas\"\nMaxima 5.23.2 http://maxima.sourceforge.net\nusing Lisp ECL 11.1.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) 2+2;\n(%o1)                                  4\n```\n\nI think this will have to go into sage-invalid for now.  We can open another ticket if we really want to some other time, but apparently that problem was a once-off.",
    "created_at": "2011-12-13T01:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124941",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:11 kcrisman]:
> Replying to [comment:10 dimpase]:
> > Replying to [comment:9 kcrisman]:
> > > Although #11260 seems to be solved due to #11884, this ticket should remain open until we verify that that fix also took care of it on XP.  
> > 
> > if this cannot be reproduced on XP with a recent Cygwin (1.7.9-1 or better), we should close this ticket.
> 
> Well, I first have to get a working Cygwin on XP again, which will take at least another week.    Let's say if I don't by the new year, we close the ticket.

I didn't have any problems with this on Sage 4.7.2 with the latest Maxima and ECL spkgs.

```
User 1@GC02635 /home/SageUser/sage-4.7.2
$ ./sage -maxima
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/SageUser/sage-4.7.2/local/lib/ecl/cmp.fas"
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp ECL 11.1.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 2+2;
(%o1)                                  4
```

I think this will have to go into sage-invalid for now.  We can open another ticket if we really want to some other time, but apparently that problem was a once-off.



---

archive/issue_comments_124942.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-13T01:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124942",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_124943.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2012-01-05T13:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11330#issuecomment-124943",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: worksforme
