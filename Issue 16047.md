# Issue 16047: Remove some deprecated code

Issue created by migration from Trac.

Original creator: aapitzsch

Original creation time: 2014-05-03 14:01:38

Remove deprecated code from #7371, #8930, #10334, #11033, #12587, #13211 and from `coxeter_groups.py`.


---

Comment by aapitzsch created at 2014-05-03 14:04:24

Changing status from new to needs_review.


---

Comment by ncohen created at 2014-05-03 14:13:01

Did you check that all long tests pass ? If so, it can go `:-)`

(sorry, I cannot do this with my computer right now `^^;`)

Nathann


---

Comment by aapitzsch created at 2014-05-03 14:43:09

All long tests pass, but I'm not happy with

```diff
--- a/src/sage/homology/simplicial_complex.py
+++ b/src/sage/homology/simplicial_complex.py
`@``@` -816,21 +798,9 `@``@`
          C = None
+         vertex_set = []
          if maximal_faces is None:
-             vertex_set = []
              maximal_faces = []
```

Without this change testing `src/sage/schemes/toric/divisor.py` will fail.


---

Comment by ncohen created at 2014-05-03 14:59:41

Why don't you leave this `vertex_set = [] ` where it is and define `vertex_set=None` before, as it is the current default value ?

Nathann


---

Comment by aapitzsch created at 2014-05-03 15:28:47

Replying to [comment:4 ncohen]:
> Why don't you leave this `vertex_set = [] ` where it is and define `vertex_set=None` before, as it is the current default value ?
> 
> Nathann

I tried this, but it also failed.
The problematic line in `src/sage/schemes/toric/divisor.py` is

```
SimplicialComplex([c.ambient_ray_indices() for c in negative_cones])
```

The passed list previously became `vertex_set` and now it becomes `maximal_faces`.

So maybe we should do

```diff
--- a/src/sage/homology/simplicial_complex.py
+++ b/src/sage/homology/simplicial_complex.py
`@``@` -816,21 +798,9 `@``@`
          C = None
+         vertex_set = maximal_faces
          if maximal_faces is None:
              vertex_set = []
              maximal_faces = []
```


What do you think?


---

Comment by ncohen created at 2014-05-03 15:39:17

> What do you think?

I don't understand.... If there is a function which defined this parameter then it raised a deprecation warning, didn't it ? `O_o`

Nathann


---

Comment by aapitzsch created at 2014-05-03 15:53:47

Replying to [comment:6 ncohen]:
> > What do you think?
> 
> I don't understand.... If there is a function which defined this parameter then it raised a deprecation warning, didn't it ? `O_o`

The deprecation warning was only raised if `vertex_set` and `maximal_faces` were defined, which was not the case in
`SimplicialComplex([c.ambient_ray_indices() for c in negative_cones])`.


---

Comment by ncohen created at 2014-05-03 15:56:54

Oh. Then can't you just do the replacement above, and fix the broken doctest by replacing 


```
SimplicialComplex([c.ambient_ray_indices() for c in negative_cones])
```


By


```
SimplicialComplex(maximal_faces=[c.ambient_ray_indices() for c in negative_cones])
```


Nathann


---

Comment by aapitzsch created at 2014-05-03 16:26:50

Replying to [comment:8 ncohen]:
> Oh. Then can't you just do the replacement above, and fix the broken doctest by replacing 
> 
> {{{
> SimplicialComplex([c.ambient_ray_indices() for c in negative_cones])
> }}}
> 
> By
> 
> {{{
> SimplicialComplex(maximal_faces=[c.ambient_ray_indices() for c in negative_cones])
> }}}
> 

Adding `maximal_faces=` won't change anything because it's (beside `**kwds`) the only remaining parameter passed to `__init__()` after applying this patch.


---

Comment by ncohen created at 2014-05-03 16:30:05

Oh right, sorry. Then I guess this cannot be solved without understanding the meaning of the command. The only way out is to get in touch with somebody who understands what this is about.

Nathann


---

Comment by tscrim created at 2014-05-05 22:01:04

FTR, this is on my todo list. I will try to get to this tonight or tomorrow.


---

Comment by tscrim created at 2014-05-06 05:49:47

I think this is what should've been done in the first place (either that or it needs to be put in its original place and in the big block with the `reduce`).


---

Comment by tscrim created at 2014-05-07 21:21:58

Is this a positive review?


---

Comment by ncohen created at 2014-05-08 09:03:19

I didn't get your earlier comment : do you think that this branch correctly deals with the code around `vertex_set` ? If so, then it is a positive review from the both of us `:-)`

Nathann


---

Comment by tscrim created at 2014-05-08 15:27:27

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-05-08 15:27:27

Yes.


---

Comment by vbraun created at 2014-05-12 09:55:54

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-05-12 09:55:54

Merge conflict, please fix


---

Comment by git created at 2014-05-12 15:44:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aapitzsch created at 2014-05-12 16:00:16

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-05-12 22:21:15

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-05-13 08:42:13

Resolution: fixed
