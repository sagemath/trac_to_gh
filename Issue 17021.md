# Issue 17021: 3d graphics: unintentional mutation

Issue created by migration from Trac.

Original creator: was

Original creation time: 2014-10-30 00:32:10

This is a significant bug in the 3d graphics that Theron Hitchman found.  It's easy to replicate on the command line, and doesn't involve actually rendering anything.    Basically, in some cases, if g and h are 3d scenes, then doing "k = g+h" actually *mutates* g itself.   This ends up breaking multi-step constructions of scenes (e.g., [1]).


```
sage: g = point3d([0,-2,-2]); g += point3d([2,-2,-2])
sage: print len(g.all)
2
sage: h = g + arrow([0,-2,-2], [2,-2,-2])   # this should *NOT* change g
sage: print len(g.all)   # it changed g
3
```


[1] https://cloud.sagemath.com/projects/d115ee6d-f378-4f70-b400-0f2aba16f10c/files/ProjectionOntoAPlane.sagews


---

Comment by chapoton created at 2014-11-02 20:11:29

New commits:


---

Comment by chapoton created at 2014-11-02 20:11:29

Changing status from new to needs_review.


---

Comment by kcrisman created at 2014-11-13 15:43:10

Wow, interesting bug, and relatively subtle since people usually just add plots willy-nilly.  I'll try to confirm this works right in a few minutes, but the code seems fine.


---

Comment by kcrisman created at 2014-11-13 17:49:29

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2014-11-13 17:49:29

Great, this is very helpful.   I don't see any problems with this.


---

Comment by vbraun created at 2014-11-15 16:22:11

Resolution: fixed
