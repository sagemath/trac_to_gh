# Issue 11053: improve piecewise plotting

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2011-04-20 15:52:28

Assignee: jason, was

CC:  wdj jason jondo kcrisman vbraun slelievre mkoeppe eviatarbach rws

Until we actual totally rewrite piecewise functions, we should improve some things.

For concreteness, here is one thing that should work but doesn't. I'm sure there are more - add to this list, and then whatever isn't fixed in this ticket can be moved to another ticket.  I just want to make sure they're listed in one place, not ten tickets.
 * plotting more than one

```
sage: f = Piecewise([[(0,1),x^3], [(1,2),x^2]], x)
sage: plot([f,x^3],(x,0,2))
```



---

Comment by kcrisman created at 2011-11-03 15:52:38

Regarding the first item (can't plot two of them), It probably wouldn't even be that hard to fix.  The problem is that `setup_for_eval_on_grid` wants to use `fast_float` but `Piecewise` guys don't have that, or more precisely don't have `__float__`.


---

Comment by kcrisman created at 2011-11-22 17:44:56

From DSM on [this ask.sagemath.org question](http://ask.sagemath.org/question/925/piecewise-functions-and-legend-label):

```
# monkeypatch legend duplication of trac #11225
def fix_piecewise(fn):
    import types
    def fixed_plot(self, *args, **kwargs): 
        from sage.plot.all import plot
        return sum([plot(f, a, b, *args, **(dict((k,v) for k,v in kwargs.items() if i == 0 or k != 'legend_label')))
                    for i, ((a,b),f) in enumerate(self.list())])
    def fn2(*args, **kwargs):
        ans = fn(*args, **kwargs)
        ans.plot = types.MethodType(fixed_plot, ans)
        return ans
    return fn2

Piecewise = fix_piecewise(Piecewise)
```

Nice protopatch, perhaps?


---

Comment by mjo created at 2012-03-10 18:32:11

I removed the last bullet point and created #12651 where I'll post a patch with dsm's fix.


---

Comment by mkoeppe created at 2016-06-25 18:33:21

Changing keywords from "" to "piecewise".


---

Comment by mkoeppe created at 2016-06-25 18:33:21

Updated description for new `piecewise` (#14801).
Didn't check the xmin/xmax etc. behavior that is mentioned in the description.

This can probably be closed when the old `Piecewise` (now deprecated) is removed completely.
