# Issue 19191: Add support for MPFR_RNDA rounding mode

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-10-17 09:51:44

This rounding mode is "new" since MPFR 3.


---

Comment by jdemeyer created at 2015-10-17 14:16:39

New commits:


---

Comment by jdemeyer created at 2015-10-17 14:16:39

Changing status from new to needs_review.


---

Comment by git created at 2015-10-17 15:40:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-10-29 11:29:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-11-12 14:25:54

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-11-12 14:25:54

Wrong syntax

```
+        TESTS::
+
+        Test the various rounding modes::
```



---

Comment by git created at 2015-11-12 18:11:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-11-12 18:48:40

Changing status from needs_work to needs_review.


---

Comment by git created at 2016-01-06 15:36:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2016-01-08 09:08:03

RNDA is marked experimental in the MPFR manual, and Vincent Lefèvre recently insisted on mpfr-devel that it "is not part of the API" and "could disappear entirely without notice", so I'm not sure it is such a good idea to start supporting it unless we have a real use for it.


---

Comment by jdemeyer created at 2016-01-08 13:00:27

Replying to [comment:10 mmezzarobba]:
> RNDA is marked experimental in the MPFR manual

I cannot find anything like that in the manual of mpfr-3.1.3 (are you using an outdated version?). What is your reference?


---

Comment by mmezzarobba created at 2016-01-08 13:13:25

Replying to [comment:11 jdemeyer]:
> Replying to [comment:10 mmezzarobba]:
> > RNDA is marked experimental in the MPFR manual
> 
> I cannot find anything like that in the manual of mpfr-3.1.3 (are you using an outdated version?). What is your reference?

First paragraph of Section 4.4 (or just grep for "experimental").

Edit: oh, no, sorry, it _was_ marked as such in the manual of MPFR 3.0, but that no longer seems to be the case with the current release. Well, then I don't know why Vincent said that.


---

Comment by jdemeyer created at 2016-01-08 13:18:36

Replying to [comment:12 mmezzarobba]:
> Edit: oh, no, sorry, it _was_ marked as such in the manual of MPFR 3.0

Well, it was a new feature in MPFR 3.0, so it's not surprising that it was experimental initially.

Do you have a link to the post of Vincent Lefèvre?


---

Comment by mmezzarobba created at 2016-01-08 13:25:25

Replying to [comment:13 jdemeyer]:
> Replying to [comment:12 mmezzarobba]:
> > Edit: oh, no, sorry, it _was_ marked as such in the manual of MPFR 3.0
> 
> Well, it was a new feature in MPFR 3.0, so it's not surprising that it was experimental initially.
> 
> Do you have a link to the post of Vincent Lefèvre?

https://sympa.inria.fr/sympa/arc/mpfr/2015-12/msg00071.html

I just saw he was talking abound MPFR_RND*N*A, which I didn't even know existed. False alarm, sorry.


---

Comment by mmezzarobba created at 2016-01-08 14:14:23

If you're replacing `GMP_RNDx` by `MPFR_RNDx` everywhere, I guess you may also want to replace `mp_rnd_t` by `mpfr_rnd_t` (and perhaps `mp_prec_t` by `mpfr_prec_t`) in `mpfr.pxd`. Unless there is a particular reason not to do it?


---

Comment by jdemeyer created at 2016-01-08 15:49:33

Replying to [comment:15 mmezzarobba]:
> If you're replacing `GMP_RNDx` by `MPFR_RNDx` everywhere, I guess you may also want to replace `mp_rnd_t` by `mpfr_rnd_t` (and perhaps `mp_prec_t` by `mpfr_prec_t`) in `mpfr.pxd`. Unless there is a particular reason not to do it?

There is no particular reason, I just didn't bother. Will you review it if I make those replacements?


---

Comment by mmezzarobba created at 2016-01-08 20:46:31

Replying to [comment:16 jdemeyer]:
> There is no particular reason, I just didn't bother. Will you review it if I make those replacements?

I don't have much time, but yes, I can try to review it (hopefully next Monday) in any case.


---

Comment by git created at 2016-01-10 08:43:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2016-01-12 05:57:14

I added two commits with minor improvements (or so I hope!) in `u/mmezzarobba/add_support_for_mpfr_rnda_rounding_mode`. Please merge that branch if you agree with the changes. Whether you merge them or not, feel free to set the ticket to positive review if all tests pass.


---

Comment by jdemeyer created at 2016-01-12 09:46:07

New commits:


---

Comment by jdemeyer created at 2016-01-12 09:51:29

Your changes look good to me. Did you run doctests with your changes?


---

Comment by mmezzarobba created at 2016-01-12 10:29:02

Replying to [comment:24 jdemeyer]:
> Your changes look good to me. Did you run doctests with your changes?

Only the tests in `rings/` and `libs/`.


---

Comment by jdemeyer created at 2016-01-12 10:49:05

To be sure, I will run `make ptestlong` and set positive review if it passes.


---

Comment by jdemeyer created at 2016-01-12 12:40:36

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-12 22:07:14

Resolution: fixed
