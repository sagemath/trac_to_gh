# Issue 16805: Improvement to subsets_with_hereditary_property

archive/issues_016805.json:
```json
{
    "body": "CC:  @drvinceknight @kcrisman @dimpase @jdemeyer @nthiery @videlec @jhpalmieri\n\nI just noticed something useful I could use for my current problem, and it may also be useful to others. I hope it's not too \"custom\".\n\nIt can also be applied to Dima's example in the doc, as in his case the obstructions have size 3.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17042\n\n",
    "created_at": "2014-09-25T16:27:48Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Improvement to subsets_with_hereditary_property",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16805",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @drvinceknight @kcrisman @dimpase @jdemeyer @nthiery @videlec @jhpalmieri

I just noticed something useful I could use for my current problem, and it may also be useful to others. I hope it's not too "custom".

It can also be applied to Dima's example in the doc, as in his case the obstructions have size 3.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17042





---

archive/issue_comments_222193.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-09-25T16:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222193",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_222194.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-25T16:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222195.json:
```json
{
    "body": "In the same vein, don't you want to have `min_obstruction_size`, too? I.e. if you know that your function returns true on any set of size at most that, you shouldn't even call it.",
    "created_at": "2014-09-25T18:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222195",
    "user": "https://github.com/dimpase"
}
```

In the same vein, don't you want to have `min_obstruction_size`, too? I.e. if you know that your function returns true on any set of size at most that, you shouldn't even call it.



---

archive/issue_comments_222196.json:
```json
{
    "body": "Yo !\n\n> In the same vein, don't you want to have `min_obstruction_size`, too? I.e. if you know that your function returns true on any set of size at most that, you shouldn't even call it.\n\n\nWell, it is true but in this case you can change the function itself to always return True on <min_size input. While if you do the same with the max_size, your function is not monotone anymore.\n\nWell, it cannot hurt. Add a commit if you like.\n\nNathann",
    "created_at": "2014-09-26T08:13:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222196",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> In the same vein, don't you want to have `min_obstruction_size`, too? I.e. if you know that your function returns true on any set of size at most that, you shouldn't even call it.


Well, it is true but in this case you can change the function itself to always return True on <min_size input. While if you do the same with the max_size, your function is not monotone anymore.

Well, it cannot hurt. Add a commit if you like.

Nathann



---

archive/issue_comments_222197.json:
```json
{
    "body": "You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.\n\n(and as soon as it is there, you can speed up the long doctest I added)",
    "created_at": "2014-09-26T08:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222197",
    "user": "https://github.com/dimpase"
}
```

You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.

(and as soon as it is there, you can speed up the long doctest I added)



---

archive/issue_comments_222198.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-09-26T08:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222198",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_222199.json:
```json
{
    "body": "> You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.\n> \n> (and as soon as it is there, you can speed up the long doctest I added)\n\n\nI did not intend to. You can also see I did not expose the 'ncpus' argument. Just thought I would keep the constructor simple... What do you think ?\n\nNathann",
    "created_at": "2014-09-26T08:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222199",
    "user": "https://github.com/nathanncohen"
}
```

> You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.
> 
> (and as soon as it is there, you can speed up the long doctest I added)


I did not intend to. You can also see I did not expose the 'ncpus' argument. Just thought I would keep the constructor simple... What do you think ?

Nathann



---

archive/issue_comments_222200.json:
```json
{
    "body": "That's also why I put a link from the constructor to this function, so that interested users can find it.\n\nNathann",
    "created_at": "2014-09-26T08:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222200",
    "user": "https://github.com/nathanncohen"
}
```

That's also why I put a link from the constructor to this function, so that interested users can find it.

Nathann



---

archive/issue_comments_222201.json:
```json
{
    "body": "By the way\n\n```\nsage: %time  l1=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21)))\nCPU times: user 7.98 s, sys: 36 ms, total: 8.02 s\nWall time: 7.96 s\nsage: %time  l2=list(subsets_with_hereditary_property(lambda S:not any(len(set(S).intersection(x))>2 for x in l), range(21)))         \nCPU times: user 436 ms, sys: 60 ms, total: 496 ms\nWall time: 426 ms\nsage: l1==l2\nTrue\n```\n\n`Set->set`. never use combinat code if you can avoid it.\n\nNathann",
    "created_at": "2014-09-26T08:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222201",
    "user": "https://github.com/nathanncohen"
}
```

By the way

```
sage: %time  l1=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21)))
CPU times: user 7.98 s, sys: 36 ms, total: 8.02 s
Wall time: 7.96 s
sage: %time  l2=list(subsets_with_hereditary_property(lambda S:not any(len(set(S).intersection(x))>2 for x in l), range(21)))         
CPU times: user 436 ms, sys: 60 ms, total: 496 ms
Wall time: 426 ms
sage: l1==l2
True
```

`Set->set`. never use combinat code if you can avoid it.

Nathann



---

archive/issue_comments_222202.json:
```json
{
    "body": "This being said the combinat code is better to observe the speedups `:-D`\n\n```\nsage: %time  l1=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21)))                       \nCPU times: user 7.97 s, sys: 72 ms, total: 8.04 s\nWall time: 7.96 s\nsage: %time  l2=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21),max_obstruction_size=3))\nCPU times: user 2.46 s, sys: 44 ms, total: 2.51 s\nWall time: 2.43 s\nsage: l1==l2\nTrue\n```",
    "created_at": "2014-09-26T08:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222202",
    "user": "https://github.com/nathanncohen"
}
```

This being said the combinat code is better to observe the speedups `:-D`

```
sage: %time  l1=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21)))                       
CPU times: user 7.97 s, sys: 72 ms, total: 8.04 s
Wall time: 7.96 s
sage: %time  l2=list(subsets_with_hereditary_property(lambda S:not any(Set(S).intersection(x).cardinality()>2 for x in l), range(21),max_obstruction_size=3))
CPU times: user 2.46 s, sys: 44 ms, total: 2.51 s
Wall time: 2.43 s
sage: l1==l2
True
```



---

archive/issue_comments_222203.json:
```json
{
    "body": "Replying to [comment:6 ncohen]:\n> > You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.\n> > \n> > (and as soon as it is there, you can speed up the long doctest I added)\n\n> \n> I did not intend to. You can also see I did not expose the 'ncpus' argument. Just thought I would keep the constructor simple... What do you think ?\n\n\nOK, then keep it as it is. But could you do the changes Set->set in that doctest?",
    "created_at": "2014-09-26T09:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222203",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:6 ncohen]:
> > You haven't added `max_obstruction_size` parameter to the `SimplicialComplex` constructor.
> > 
> > (and as soon as it is there, you can speed up the long doctest I added)

> 
> I did not intend to. You can also see I did not expose the 'ncpus' argument. Just thought I would keep the constructor simple... What do you think ?


OK, then keep it as it is. But could you do the changes Set->set in that doctest?



---

archive/issue_comments_222204.json:
```json
{
    "body": "> OK, then keep it as it is. But could you do the changes Set->set in that doctest?\n\n\nOf course !\n\nNathann",
    "created_at": "2014-09-26T09:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222204",
    "user": "https://github.com/nathanncohen"
}
```

> OK, then keep it as it is. But could you do the changes Set->set in that doctest?


Of course !

Nathann



---

archive/issue_comments_222205.json:
```json
{
    "body": "It still takes a LONG time afterwards, because SimplicialComplex removes non-maximal faces `-_-`\n\n```\nsage: %time SimplicialComplex(from_characteristic_function=(f, range(21)))\nCPU times: user 6.2 s, sys: 184 ms, total: 6.38 s\nWall time: 6.34 s\nSimplicial complex with 21 vertices and 168 facets\n```\n\nNathann",
    "created_at": "2014-09-26T09:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222205",
    "user": "https://github.com/nathanncohen"
}
```

It still takes a LONG time afterwards, because SimplicialComplex removes non-maximal faces `-_-`

```
sage: %time SimplicialComplex(from_characteristic_function=(f, range(21)))
CPU times: user 6.2 s, sys: 184 ms, total: 6.38 s
Wall time: 6.34 s
Simplicial complex with 21 vertices and 168 facets
```

Nathann



---

archive/issue_comments_222206.json:
```json
{
    "body": "Fixed\n\n```\nsage: l=map(Set, designs.ProjectiveGeometryDesign(2,1,GF(4,name='a'))) \nsage: f = lambda S: not any(len(set(S).intersection(x))>2 for x in l)\nsage: %time SimplicialComplex(from_characteristic_function=(f, range(21)))\nCPU times: user 584 ms, sys: 4 ms, total: 588 ms\nWall time: 587 ms\nSimplicial complex with 21 vertices and 168 facets\n```\n\nIt is like everybody has gave up thinking of algorithms.\n\nMaybe I should change my job. I would be more useful to the world going over other people's loops.\n\nAnyway, the constructor is now faster. It could be made faster, but at the cost of trying to understand why there is a `sort_faces` flag in this constructor, and I am convinced that it would make me angry.\n\nJust to illustrate the speedup:\n\nBefore\n\n```\nsage: S=list(Subsets(range(13)))\nsage: %time SimplicialComplex(S)\nCPU times: user 6.72 s, sys: 64 ms, total: 6.79 s\nWall time: 6.72 s\nSimplicial complex with 13 vertices and facets {(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)}\n```\n\nAfter\n\n```\nsage: %time SimplicialComplex(S)\nCPU times: user 172 ms, sys: 12 ms, total: 184 ms\nWall time: 172 ms\nSimplicial complex with 13 vertices and facets {(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)}\n```\n\nNathann",
    "created_at": "2014-09-26T09:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222206",
    "user": "https://github.com/nathanncohen"
}
```

Fixed

```
sage: l=map(Set, designs.ProjectiveGeometryDesign(2,1,GF(4,name='a'))) 
sage: f = lambda S: not any(len(set(S).intersection(x))>2 for x in l)
sage: %time SimplicialComplex(from_characteristic_function=(f, range(21)))
CPU times: user 584 ms, sys: 4 ms, total: 588 ms
Wall time: 587 ms
Simplicial complex with 21 vertices and 168 facets
```

It is like everybody has gave up thinking of algorithms.

Maybe I should change my job. I would be more useful to the world going over other people's loops.

Anyway, the constructor is now faster. It could be made faster, but at the cost of trying to understand why there is a `sort_faces` flag in this constructor, and I am convinced that it would make me angry.

Just to illustrate the speedup:

Before

```
sage: S=list(Subsets(range(13)))
sage: %time SimplicialComplex(S)
CPU times: user 6.72 s, sys: 64 ms, total: 6.79 s
Wall time: 6.72 s
Simplicial complex with 13 vertices and facets {(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)}
```

After

```
sage: %time SimplicialComplex(S)
CPU times: user 172 ms, sys: 12 ms, total: 184 ms
Wall time: 172 ms
Simplicial complex with 13 vertices and facets {(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)}
```

Nathann



---

archive/issue_comments_222207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-26T09:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-09-26T09:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222208",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222209.json:
```json
{
    "body": "just one more Set to go, in \n\n```\nsage: l=map(Set, designs.ProjectiveGeometryDesign(2,1,GF(4,name='a')))\n```",
    "created_at": "2014-09-26T10:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222209",
    "user": "https://github.com/dimpase"
}
```

just one more Set to go, in 

```
sage: l=map(Set, designs.ProjectiveGeometryDesign(2,1,GF(4,name='a')))
```



---

archive/issue_comments_222210.json:
```json
{
    "body": "What's the point ?.. It costs nothing.\n\nNathann",
    "created_at": "2014-09-26T10:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222210",
    "user": "https://github.com/nathanncohen"
}
```

What's the point ?.. It costs nothing.

Nathann



---

archive/issue_comments_222211.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-09-26T10:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222212.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> Maybe I should change my job. I would be more useful to the world going over other people's loops.\n\n\nyou'd ran into the problem of what to do with about 10-fold increase in income :-)",
    "created_at": "2014-09-26T10:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222212",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:13 ncohen]:
> Maybe I should change my job. I would be more useful to the world going over other people's loops.


you'd ran into the problem of what to do with about 10-fold increase in income :-)



---

archive/issue_comments_222213.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-26T10:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222213",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222214.json:
```json
{
    "body": "> you'd ran into the problem of what to do with about 10-fold increase in income :-)\n\n\nHonestly, do you know who I could do such a job for ? I am getting tired of working alone in my office, day after day.\n\nNathann",
    "created_at": "2014-09-26T10:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222214",
    "user": "https://github.com/nathanncohen"
}
```

> you'd ran into the problem of what to do with about 10-fold increase in income :-)


Honestly, do you know who I could do such a job for ? I am getting tired of working alone in my office, day after day.

Nathann



---

archive/issue_comments_222215.json:
```json
{
    "body": "Replying to [comment:20 ncohen]:\n> > you'd ran into the problem of what to do with about 10-fold increase in income :-)\n\n> \n> Honestly, do you know who I could do such a job for ? I am getting tired of working alone in my office, day after day.\n\n\nname your favourite Evil Empire... Oh, wait, you can also teach practical CS to undergrads - you'll see so much bad code it will make your head spin :-)\n\nAt least you should go to Sage Days more often, I presume...",
    "created_at": "2014-09-26T10:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222215",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:20 ncohen]:
> > you'd ran into the problem of what to do with about 10-fold increase in income :-)

> 
> Honestly, do you know who I could do such a job for ? I am getting tired of working alone in my office, day after day.


name your favourite Evil Empire... Oh, wait, you can also teach practical CS to undergrads - you'll see so much bad code it will make your head spin :-)

At least you should go to Sage Days more often, I presume...



---

archive/issue_comments_222216.json:
```json
{
    "body": "> At least you should go to Sage Days more often, I presume...\n\n\nI am paid to do research, not to take holidays.\n\nI should take holidays, though. But the plane tickets are expensive too.\n\nNathann",
    "created_at": "2014-09-26T11:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222216",
    "user": "https://github.com/nathanncohen"
}
```

> At least you should go to Sage Days more often, I presume...


I am paid to do research, not to take holidays.

I should take holidays, though. But the plane tickets are expensive too.

Nathann



---

archive/issue_comments_222217.json:
```json
{
    "body": "Replying to [comment:22 ncohen]:\n> > At least you should go to Sage Days more often, I presume...\n\n> \n> I am paid to do research, not to take holidays.\n\n\nI guess you only went to \"wrong\" in this respect Sage Days...\nOne in Seattle I went to was like working 12+ hours a day on Sage code...",
    "created_at": "2014-09-26T11:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222217",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:22 ncohen]:
> > At least you should go to Sage Days more often, I presume...

> 
> I am paid to do research, not to take holidays.


I guess you only went to "wrong" in this respect Sage Days...
One in Seattle I went to was like working 12+ hours a day on Sage code...



---

archive/issue_comments_222218.json:
```json
{
    "body": "Hmmm... Perhaps I should go next time..\n\nNathann",
    "created_at": "2014-09-26T13:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222218",
    "user": "https://github.com/nathanncohen"
}
```

Hmmm... Perhaps I should go next time..

Nathann



---

archive/issue_comments_222219.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-09-26T13:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222219",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_222220.json:
```json
{
    "body": "You shouldn't use `assert` to validate user input:\n\n```python\nassert (maximal_faces is None) or (from_characteristic_function is None)\n```\nas any assertion being raised is supposed to indicate a bug (plus they can be turned off). Instead raise an error\n\n```python\nif maximal_faces is None and from_characteristic_function is None:\n    raise ValueError(\"maximal_faces and from_characteristic_function cannot both be specified\")\n```\n(with perhaps a better error message).\n\nHowever I do like the speedup of `SimplicialComplex`.\n\nPS - This made me chuckle `:p`:\n\n> I am convinced that it would make me angry.",
    "created_at": "2014-09-26T13:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222220",
    "user": "https://github.com/tscrim"
}
```

You shouldn't use `assert` to validate user input:

```python
assert (maximal_faces is None) or (from_characteristic_function is None)
```
as any assertion being raised is supposed to indicate a bug (plus they can be turned off). Instead raise an error

```python
if maximal_faces is None and from_characteristic_function is None:
    raise ValueError("maximal_faces and from_characteristic_function cannot both be specified")
```
(with perhaps a better error message).

However I do like the speedup of `SimplicialComplex`.

PS - This made me chuckle `:p`:

> I am convinced that it would make me angry.



---

archive/issue_comments_222221.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-26T14:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222222.json:
```json
{
    "body": "> You shouldn't use `assert` to validate user input:\n\n\nWhyyyyyyyyyyyyyyyyyyyy had it been declared bad ?.... How can it hurt anybody ?...\n\nWe should have rules about rules.\n\n> However I do like the speedup of `SimplicialComplex`.\n\n\nYep, that's cool !\n\nBranch updated.\n\nNathann",
    "created_at": "2014-09-26T14:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222222",
    "user": "https://github.com/nathanncohen"
}
```

> You shouldn't use `assert` to validate user input:


Whyyyyyyyyyyyyyyyyyyyy had it been declared bad ?.... How can it hurt anybody ?...

We should have rules about rules.

> However I do like the speedup of `SimplicialComplex`.


Yep, that's cool !

Branch updated.

Nathann



---

archive/issue_comments_222223.json:
```json
{
    "body": "Replying to [comment:27 ncohen]:\n> > You shouldn't use `assert` to validate user input:\n\n> \n> Whyyyyyyyyyyyyyyyyyyyy had it been declared bad ?.... How can it hurt anybody ?...\n> \n> We should have rules about rules.\n\n\nAssert statements are to check statements within the code that are (suppose to be) always true, and hence, should not depend on (the always potentially bad) user input. Thus if an assertion error is raised, there's a bug in the code. It's more of a general programming thing. (It was also something Jeroen enforced when he was release manager; IDK if Volker continues this.) Also they can be turned off (IDR offhand if it's at compile or run time) to encourage programmers to use them (or leave them in code) more.\n\nAnyways, thanks for changing it.",
    "created_at": "2014-09-26T19:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222223",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:27 ncohen]:
> > You shouldn't use `assert` to validate user input:

> 
> Whyyyyyyyyyyyyyyyyyyyy had it been declared bad ?.... How can it hurt anybody ?...
> 
> We should have rules about rules.


Assert statements are to check statements within the code that are (suppose to be) always true, and hence, should not depend on (the always potentially bad) user input. Thus if an assertion error is raised, there's a bug in the code. It's more of a general programming thing. (It was also something Jeroen enforced when he was release manager; IDK if Volker continues this.) Also they can be turned off (IDR offhand if it's at compile or run time) to encourage programmers to use them (or leave them in code) more.

Anyways, thanks for changing it.



---

archive/issue_comments_222224.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-09-26T19:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222224",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_222225.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-29T11:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16805#issuecomment-222225",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-29T11:17:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16805",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16805#event-49590"
}
```
