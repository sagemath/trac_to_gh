# Issue 23685: patch eclib to compile with xcode 9

archive/issues_023685.json:
```json
{
    "body": "CC:  @jhpalmieri @isuruf\n\nThe need for the patch will disappear with the next release of eclib. We fix \n https://github.com/JohnCremona/eclib/issues/28 with https://github.com/JohnCremona/eclib/pull/29 already merged upstream.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23922\n\n",
    "created_at": "2017-09-23T04:51:05Z",
    "labels": [
        "packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "patch eclib to compile with xcode 9",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23685",
    "user": "@kiwifb"
}
```
CC:  @jhpalmieri @isuruf

The need for the patch will disappear with the next release of eclib. We fix 
 https://github.com/JohnCremona/eclib/issues/28 with https://github.com/JohnCremona/eclib/pull/29 already merged upstream.

Issue created by migration from https://trac.sagemath.org/ticket/23922





---

archive/issue_comments_331779.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-23T04:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331779",
    "user": "@kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_331780.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-09-23T04:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331780",
    "user": "@kiwifb"
}
```

New commits:



---

archive/issue_comments_331781.json:
```json
{
    "body": "Put an actual link in the patch instead of \"PR29\".",
    "created_at": "2017-09-23T16:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331781",
    "user": "@jdemeyer"
}
```

Put an actual link in the patch instead of "PR29".



---

archive/issue_comments_331782.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-09-23T16:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331782",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_331783.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-09-23T16:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331783",
    "user": "@jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_331784.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-09-23T16:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331784",
    "user": "@jhpalmieri"
}
```

New commits:



---

archive/issue_comments_331785.json:
```json
{
    "body": "I meant inside the `.patch` file: please put the link there.",
    "created_at": "2017-09-23T16:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331785",
    "user": "@jdemeyer"
}
```

I meant inside the `.patch` file: please put the link there.



---

archive/issue_comments_331786.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-09-23T16:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331786",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_331787.json:
```json
{
    "body": "Like that?",
    "created_at": "2017-09-23T16:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331787",
    "user": "@jhpalmieri"
}
```

Like that?



---

archive/issue_comments_331788.json:
```json
{
    "body": "I just made a new eclib release v20171002 which includes the fixes here, so perhaps it would be better to replace this with that.  I have not yet tried making a new spkg from it but someone else is welcome to (I will not before tomorrow)",
    "created_at": "2017-10-02T18:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331788",
    "user": "@JohnCremona"
}
```

I just made a new eclib release v20171002 which includes the fixes here, so perhaps it would be better to replace this with that.  I have not yet tried making a new spkg from it but someone else is welcome to (I will not before tomorrow)



---

archive/issue_comments_331789.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-05T12:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331789",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_331790.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-10-05T12:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331790",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_331791.json:
```json
{
    "body": "John, is there a proper source tarball for this new version? Earlier versions were at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/",
    "created_at": "2017-10-05T12:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331791",
    "user": "@jdemeyer"
}
```

John, is there a proper source tarball for this new version? Earlier versions were at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/



---

archive/issue_comments_331792.json:
```json
{
    "body": "John: from reading http://homepages.warwick.ac.uk/staff/J.E.Cremona/mwrank/index.html it seems that you are confusing a git repo with a source tarball. The latter is usually created by the former by running a command like `make dist`. It differs from a git repo by including also some auto-generated files (for example, `configure` in your case).\n\nNote that it is possible to use Travis CI to automatically create proper releases, see https://docs.travis-ci.com/user/deployment/releases/",
    "created_at": "2017-10-05T12:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331792",
    "user": "@jdemeyer"
}
```

John: from reading http://homepages.warwick.ac.uk/staff/J.E.Cremona/mwrank/index.html it seems that you are confusing a git repo with a source tarball. The latter is usually created by the former by running a command like `make dist`. It differs from a git repo by including also some auto-generated files (for example, `configure` in your case).

Note that it is possible to use Travis CI to automatically create proper releases, see https://docs.travis-ci.com/user/deployment/releases/



---

archive/issue_comments_331793.json:
```json
{
    "body": "THanks for the comments.  I use github to make \"proper releases\".   The tarball which I now realise that I forgot to put in the usual place is made using \"make dist\" (actually \"make dist-bzip2\") .  It is there now and I updated the link.",
    "created_at": "2017-10-05T13:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331793",
    "user": "@JohnCremona"
}
```

THanks for the comments.  I use github to make "proper releases".   The tarball which I now realise that I forgot to put in the usual place is made using "make dist" (actually "make dist-bzip2") .  It is there now and I updated the link.



---

archive/issue_comments_331794.json:
```json
{
    "body": "Remember to update also http://homepages.warwick.ac.uk/staff/J.E.Cremona/mwrank/index.html",
    "created_at": "2017-10-05T13:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331794",
    "user": "@jdemeyer"
}
```

Remember to update also http://homepages.warwick.ac.uk/staff/J.E.Cremona/mwrank/index.html



---

archive/issue_comments_331795.json:
```json
{
    "body": "Unfortunately, it doesn't build:\n\n```\n[eclib-20171002] mat.cc:1485:28: fatal error: flint/hmod_mat.h: No such file or directory\n[eclib-20171002]  #include \"flint/hmod_mat.h\"\n```\n\n\nDoes this require a more recent version of FLINT?\n----\nNew commits:",
    "created_at": "2017-10-05T13:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331795",
    "user": "@jdemeyer"
}
```

Unfortunately, it doesn't build:

```
[eclib-20171002] mat.cc:1485:28: fatal error: flint/hmod_mat.h: No such file or directory
[eclib-20171002]  #include "flint/hmod_mat.h"
```


Does this require a more recent version of FLINT?
----
New commits:



---

archive/issue_comments_331796.json:
```json
{
    "body": "The latest release of FLINT is 2.5.2, released 2015-08-07\n\nIt does not contain a file `hmod_mat.h`",
    "created_at": "2017-10-05T13:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331796",
    "user": "@jdemeyer"
}
```

The latest release of FLINT is 2.5.2, released 2015-08-07

It does not contain a file `hmod_mat.h`



---

archive/issue_comments_331797.json:
```json
{
    "body": "In fact, I couldn't find any version of FLINT containing a file `hmod_mat.h` (I tried some older versions and git master).",
    "created_at": "2017-10-05T14:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331797",
    "user": "@jdemeyer"
}
```

In fact, I couldn't find any version of FLINT containing a file `hmod_mat.h` (I tried some older versions and git master).



---

archive/issue_comments_331798.json:
```json
{
    "body": "Here is the explanation.  There is an optional FLINT module called hmod_mat which is a 32-bit version of nmod_mat which Fredrik wrote for me so that I can do modular linear algebra modulo a 32-bit prime without using double the memory.  It would be quite nice if Sage's FLINT had that installed, but until then here's what we (or at least I) do.   eclib's configure script sets a parameter called FLINT_LEVEL which should be 0 for \"don't use FLINT\" or 1 for \"use standard FLINT\".  If it is set to 2 then it means \"use FLINT with hmod_mat module installed\".  For my own used I do the latter but when creating a Sage tarball I should remember for its configure script to halve FLINT_LEVEL set to 1 not 2.  \n\nI can make a new tarball with this changed (lines 19176 and 19187 in configure).\n\nBy the way the README file has this information :)",
    "created_at": "2017-10-05T15:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331798",
    "user": "@JohnCremona"
}
```

Here is the explanation.  There is an optional FLINT module called hmod_mat which is a 32-bit version of nmod_mat which Fredrik wrote for me so that I can do modular linear algebra modulo a 32-bit prime without using double the memory.  It would be quite nice if Sage's FLINT had that installed, but until then here's what we (or at least I) do.   eclib's configure script sets a parameter called FLINT_LEVEL which should be 0 for "don't use FLINT" or 1 for "use standard FLINT".  If it is set to 2 then it means "use FLINT with hmod_mat module installed".  For my own used I do the latter but when creating a Sage tarball I should remember for its configure script to halve FLINT_LEVEL set to 1 not 2.  

I can make a new tarball with this changed (lines 19176 and 19187 in configure).

By the way the README file has this information :)



---

archive/issue_comments_331799.json:
```json
{
    "body": "I have changed the tarball to have the standard setting in configure.  Could you try biulding again please?",
    "created_at": "2017-10-05T15:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331799",
    "user": "@JohnCremona"
}
```

I have changed the tarball to have the standard setting in configure.  Could you try biulding again please?



---

archive/issue_comments_331800.json:
```json
{
    "body": "This builds for me with OS X + Xcode 9 + clang, but the test suite has some numerical noise:\n\n```\nTesting comptest...\n5c5\n< AGM((3.125,4.25),(1,0)) = (2.07831617217326684,1.5633615899065958201)\n---\n> AGM((3.125,4.25),(1,0)) = (2.07831617217326684,1.56336158990659582)\n14c14\n< whose cube is    (2.9999999999999999998,3.9999999999999999999)\n---\n> whose cube is    (2.9999999999999999999,4)\n16c16\n< whose cube is    (2.9999999999999999997,3.9999999999999999999)\n---\n> whose cube is    (2.9999999999999999996,3.9999999999999999998)\nmake[4]: *** [check_procs] Error 1\nmake[4]: *** Waiting for unfinished jobs....\nTesting theight...\nTesting hecketest...\nTesting mhcount...\nTesting thtconst...\nTesting tmanin...\nTesting tegr...\nTesting telog...\nTesting nftest...\nTesting oftest...\n59,61c59,61\n< Periods: [w_1,w_2] = [(-0.51317082433770156405898300169308452073251780098017e-48,-0.63277902985143330237168013012161275230207585428624),(2.0131613909534741204308876218764326959565176646346,-0.31638951492571665118584006506080637615103792714312)]\n< tau       = (0.49999999999999999999999999999999999999999999999742,3.1814603455271474113187811974948516017119213527377) (abs(tau)=3.220510818202869536114214880382970192586945735383)\n< w_R = (4.0263227819069482408617752437528653919130353292697,0)\tw_IR = (2.0131613909534741204308876218764326959565176646351,0.31638951492571665118584006506080637615103792714312)\n---\n> Periods: [w_1,w_2] = [(0,0.6327790298514333023716801301216127523020758542864),(-2.0131613909534741204308876218764326959565176646351,-0.3163895149257166511858400650608063761510379271432)]\n> tau       = (-0.5,3.1814603455271474113187811974948516017119213527374) (abs(tau)=3.2205108182028695361142148803829701925869457353831)\n> w_R = (4.0263227819069482408617752437528653919130353292703,0)\tw_IR = (2.0131613909534741204308876218764326959565176646351,0.3163895149257166511858400650608063761510379271432)\n65c65\n< Elliptic log of P is (2.1525156669616024162853317818644956119079357950699,0)\n---\n> Elliptic log of P is (2.1525156669616024162853317818644956119079357950702,0)\n68c68\n< Elliptic log of P is (3.4017204102584996326696274231234087985780021511049,0)\n---\n> Elliptic log of P is (3.4017204102584996326696274231234087985780021513184,0)\nmake[4]: *** [check_qcurves] Error 1\nTesting tnfd...\nrm -rf nftmp\nrm -rf snftmp\nrm -rf tcurves\nTesting tequiv...\nTesting d2...\nrm -f PRIMES 1\nmake[3]: *** [check] Error 2\nmake[2]: *** [check-recursive] Error 1\nError: eclib's test suite failed to pass.\n```\n",
    "created_at": "2017-10-05T16:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331800",
    "user": "@jhpalmieri"
}
```

This builds for me with OS X + Xcode 9 + clang, but the test suite has some numerical noise:

```
Testing comptest...
5c5
< AGM((3.125,4.25),(1,0)) = (2.07831617217326684,1.5633615899065958201)
---
> AGM((3.125,4.25),(1,0)) = (2.07831617217326684,1.56336158990659582)
14c14
< whose cube is    (2.9999999999999999998,3.9999999999999999999)
---
> whose cube is    (2.9999999999999999999,4)
16c16
< whose cube is    (2.9999999999999999997,3.9999999999999999999)
---
> whose cube is    (2.9999999999999999996,3.9999999999999999998)
make[4]: *** [check_procs] Error 1
make[4]: *** Waiting for unfinished jobs....
Testing theight...
Testing hecketest...
Testing mhcount...
Testing thtconst...
Testing tmanin...
Testing tegr...
Testing telog...
Testing nftest...
Testing oftest...
59,61c59,61
< Periods: [w_1,w_2] = [(-0.51317082433770156405898300169308452073251780098017e-48,-0.63277902985143330237168013012161275230207585428624),(2.0131613909534741204308876218764326959565176646346,-0.31638951492571665118584006506080637615103792714312)]
< tau       = (0.49999999999999999999999999999999999999999999999742,3.1814603455271474113187811974948516017119213527377) (abs(tau)=3.220510818202869536114214880382970192586945735383)
< w_R = (4.0263227819069482408617752437528653919130353292697,0)	w_IR = (2.0131613909534741204308876218764326959565176646351,0.31638951492571665118584006506080637615103792714312)
---
> Periods: [w_1,w_2] = [(0,0.6327790298514333023716801301216127523020758542864),(-2.0131613909534741204308876218764326959565176646351,-0.3163895149257166511858400650608063761510379271432)]
> tau       = (-0.5,3.1814603455271474113187811974948516017119213527374) (abs(tau)=3.2205108182028695361142148803829701925869457353831)
> w_R = (4.0263227819069482408617752437528653919130353292703,0)	w_IR = (2.0131613909534741204308876218764326959565176646351,0.3163895149257166511858400650608063761510379271432)
65c65
< Elliptic log of P is (2.1525156669616024162853317818644956119079357950699,0)
---
> Elliptic log of P is (2.1525156669616024162853317818644956119079357950702,0)
68c68
< Elliptic log of P is (3.4017204102584996326696274231234087985780021511049,0)
---
> Elliptic log of P is (3.4017204102584996326696274231234087985780021513184,0)
make[4]: *** [check_qcurves] Error 1
Testing tnfd...
rm -rf nftmp
rm -rf snftmp
rm -rf tcurves
Testing tequiv...
Testing d2...
rm -f PRIMES 1
make[3]: *** [check] Error 2
make[2]: *** [check-recursive] Error 1
Error: eclib's test suite failed to pass.
```




---

archive/issue_comments_331801.json:
```json
{
    "body": "The test suite passes when building with GCC 7.2.0 (see #23898).",
    "created_at": "2017-10-05T16:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331801",
    "user": "@jhpalmieri"
}
```

The test suite passes when building with GCC 7.2.0 (see #23898).



---

archive/issue_comments_331802.json:
```json
{
    "body": "Oh, and now I remember that numerical noise problems in the eclib test suite with clang are not new, so they should not be an obstacle here: see https://github.com/JohnCremona/eclib/issues/19.",
    "created_at": "2017-10-05T17:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331802",
    "user": "@jhpalmieri"
}
```

Oh, and now I remember that numerical noise problems in the eclib test suite with clang are not new, so they should not be an obstacle here: see https://github.com/JohnCremona/eclib/issues/19.



---

archive/issue_comments_331803.json:
```json
{
    "body": "Yes, there is numerical noise with some Mac compilers.  eclib uses TravisCI now but the Mac test cheat by passing even when it fails for this reason. See https://travis-ci.org/JohnCremona/eclib",
    "created_at": "2017-10-05T18:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331803",
    "user": "@JohnCremona"
}
```

Yes, there is numerical noise with some Mac compilers.  eclib uses TravisCI now but the Mac test cheat by passing even when it fails for this reason. See https://travis-ci.org/JohnCremona/eclib



---

archive/issue_comments_331804.json:
```json
{
    "body": "The numerical noise is not particular to OS X but to clang. I get it on linux+clang too.",
    "created_at": "2017-10-06T04:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331804",
    "user": "@kiwifb"
}
```

The numerical noise is not particular to OS X but to clang. I get it on linux+clang too.



---

archive/issue_comments_331805.json:
```json
{
    "body": "md5 of the linked tarball does not match the one in the branch. I get\n\n```\nMD5 (eclib-20171002.tar.bz2) = 2c6e90c61f49cf9c38a5c9fd9a1ebcef\n```\n",
    "created_at": "2017-10-11T09:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331805",
    "user": "@dimpase"
}
```

md5 of the linked tarball does not match the one in the branch. I get

```
MD5 (eclib-20171002.tar.bz2) = 2c6e90c61f49cf9c38a5c9fd9a1ebcef
```




---

archive/issue_comments_331806.json:
```json
{
    "body": "Probably my fault, indirectly: I left Jeroen to package up the tarball and when testing found that I had done something wrong so replaced the tarball with another with the same filename.  Perhaps he forgot to recompute the hash.",
    "created_at": "2017-10-11T10:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331806",
    "user": "@JohnCremona"
}
```

Probably my fault, indirectly: I left Jeroen to package up the tarball and when testing found that I had done something wrong so replaced the tarball with another with the same filename.  Perhaps he forgot to recompute the hash.



---

archive/issue_comments_331807.json:
```json
{
    "body": "No, I just haven't revisited this ticket since you fixed the tarball.",
    "created_at": "2017-10-11T10:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331807",
    "user": "@jdemeyer"
}
```

No, I just haven't revisited this ticket since you fixed the tarball.



---

archive/issue_comments_331808.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-10-11T12:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331808",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_331809.json:
```json
{
    "body": "Replying to [comment:18 cremona]:\n> Here is the explanation.  There is an optional FLINT module called hmod_mat which is a 32-bit version of nmod_mat which Fredrik wrote for me so that I can do modular linear algebra modulo a 32-bit prime without using double the memory.  It would be quite nice if Sage's FLINT had that installed, but until then here's what we (or at least I) do.   eclib's configure script sets a parameter called FLINT_LEVEL which should be 0 for \"don't use FLINT\" or 1 for \"use standard FLINT\".  If it is set to 2 then it means \"use FLINT with hmod_mat module installed\".  For my own used I do the latter but when creating a Sage tarball I should remember for its configure script to halve FLINT_LEVEL set to 1 not 2.  \n> \n> I can make a new tarball with this changed (lines 19176 and 19187 in configure).\n> \n> By the way the README file has this information :)\n\nIt is very easy to [check for headers](https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Generic-Headers.html#Generic-Headers) in a `configure` script. You could check for `flint/hmod_mat.h` and set `FLINT_LEVEL` accordingly.\n\nCan you tell me more about this special version of FLINT? Is this officially released somewhere, or is it for John Cremona's eyes only?",
    "created_at": "2017-10-11T12:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331809",
    "user": "@jdemeyer"
}
```

Replying to [comment:18 cremona]:
> Here is the explanation.  There is an optional FLINT module called hmod_mat which is a 32-bit version of nmod_mat which Fredrik wrote for me so that I can do modular linear algebra modulo a 32-bit prime without using double the memory.  It would be quite nice if Sage's FLINT had that installed, but until then here's what we (or at least I) do.   eclib's configure script sets a parameter called FLINT_LEVEL which should be 0 for "don't use FLINT" or 1 for "use standard FLINT".  If it is set to 2 then it means "use FLINT with hmod_mat module installed".  For my own used I do the latter but when creating a Sage tarball I should remember for its configure script to halve FLINT_LEVEL set to 1 not 2.  
> 
> I can make a new tarball with this changed (lines 19176 and 19187 in configure).
> 
> By the way the README file has this information :)

It is very easy to [check for headers](https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Generic-Headers.html#Generic-Headers) in a `configure` script. You could check for `flint/hmod_mat.h` and set `FLINT_LEVEL` accordingly.

Can you tell me more about this special version of FLINT? Is this officially released somewhere, or is it for John Cremona's eyes only?



---

archive/issue_comments_331810.json:
```json
{
    "body": "See https://github.com/fredrik-johansson/hmod_mat\n\nThanks for the other tip, I did once try without success but it would be good to have this automatic.It would also be good if Sage could have the hmod_mat module in its FLINT.",
    "created_at": "2017-10-11T12:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331810",
    "user": "@JohnCremona"
}
```

See https://github.com/fredrik-johansson/hmod_mat

Thanks for the other tip, I did once try without success but it would be good to have this automatic.It would also be good if Sage could have the hmod_mat module in its FLINT.



---

archive/issue_comments_331811.json:
```json
{
    "body": "PR29.patch should be removed in this branch, too.",
    "created_at": "2017-10-11T13:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331811",
    "user": "@dimpase"
}
```

PR29.patch should be removed in this branch, too.



---

archive/issue_comments_331812.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-10-11T13:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331812",
    "user": "@jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_331813.json:
```json
{
    "body": "Fixed checksum, this now works for me on Linux x86_64.",
    "created_at": "2017-10-11T13:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331813",
    "user": "@jdemeyer"
}
```

Fixed checksum, this now works for me on Linux x86_64.



---

archive/issue_comments_331814.json:
```json
{
    "body": "Replying to [comment:31 dimpase]:\n> PR29.patch should be removed in this branch, too.\n\nWhat is `PR29.patch`?",
    "created_at": "2017-10-11T13:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331814",
    "user": "@jdemeyer"
}
```

Replying to [comment:31 dimpase]:
> PR29.patch should be removed in this branch, too.

What is `PR29.patch`?



---

archive/issue_comments_331815.json:
```json
{
    "body": "Replying to [comment:33 jdemeyer]:\n> Replying to [comment:31 dimpase]:\n> > PR29.patch should be removed in this branch, too.\n> \n> What is `PR29.patch`?\n\nOh, never mind - it's a meanwhile merged eclib PR that is included in #12426 that I am working on ATM...",
    "created_at": "2017-10-11T13:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331815",
    "user": "@dimpase"
}
```

Replying to [comment:33 jdemeyer]:
> Replying to [comment:31 dimpase]:
> > PR29.patch should be removed in this branch, too.
> 
> What is `PR29.patch`?

Oh, never mind - it's a meanwhile merged eclib PR that is included in #12426 that I am working on ATM...



---

archive/issue_comments_331816.json:
```json
{
    "body": "It's fine with me. Any objections to a positive review?",
    "created_at": "2017-10-11T14:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331816",
    "user": "@jhpalmieri"
}
```

It's fine with me. Any objections to a positive review?



---

archive/issue_comments_331817.json:
```json
{
    "body": "on a clang I see\n\n```\n[eclib-20171002] sieve_search.cc:819:23: warning: logical not is only applied to the left hand side of this bitwise operator [-Wlogical-not-parentheses]\n[eclib-20171002]                 if(!use_odd_nums && !b&1)\n[eclib-20171002]                                     ^ ~\n[eclib-20171002] sieve_search.cc:819:23: note: add parentheses after the '!' to evaluate the bitwise operator first\n[eclib-20171002]                 if(!use_odd_nums && !b&1)\n[eclib-20171002]                                     ^\n[eclib-20171002]                                      (  )\n[eclib-20171002] sieve_search.cc:819:23: note: add parentheses around left hand side expression to silence this warning\n[eclib-20171002]                 if(!use_odd_nums && !b&1)\n[eclib-20171002]                                     ^\n[eclib-20171002]                                     ( )\n```\n\nOnly the author knows for sure where () should go...",
    "created_at": "2017-10-11T16:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331817",
    "user": "@dimpase"
}
```

on a clang I see

```
[eclib-20171002] sieve_search.cc:819:23: warning: logical not is only applied to the left hand side of this bitwise operator [-Wlogical-not-parentheses]
[eclib-20171002]                 if(!use_odd_nums && !b&1)
[eclib-20171002]                                     ^ ~
[eclib-20171002] sieve_search.cc:819:23: note: add parentheses after the '!' to evaluate the bitwise operator first
[eclib-20171002]                 if(!use_odd_nums && !b&1)
[eclib-20171002]                                     ^
[eclib-20171002]                                      (  )
[eclib-20171002] sieve_search.cc:819:23: note: add parentheses around left hand side expression to silence this warning
[eclib-20171002]                 if(!use_odd_nums && !b&1)
[eclib-20171002]                                     ^
[eclib-20171002]                                     ( )
```

Only the author knows for sure where () should go...



---

archive/issue_comments_331818.json:
```json
{
    "body": "This particular piece of code was borrowed from an old version of Stoll's ratpoints so the author is not quite who you think it is.  It should probably be \n\n\n```\nif((!use_odd_nums) && !(b&1))\n```\n\n\nbut it might be a good idea to look into ratpoints (already built for Sage)... around line 118 of ratpoints' sift.c.  But this if() statement is no longer there.\n\nYour next question will be: why does eclib not actually use ratpoints itself?  I don't have time to answer that now.",
    "created_at": "2017-10-11T18:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331818",
    "user": "@JohnCremona"
}
```

This particular piece of code was borrowed from an old version of Stoll's ratpoints so the author is not quite who you think it is.  It should probably be 


```
if((!use_odd_nums) && !(b&1))
```


but it might be a good idea to look into ratpoints (already built for Sage)... around line 118 of ratpoints' sift.c.  But this if() statement is no longer there.

Your next question will be: why does eclib not actually use ratpoints itself?  I don't have time to answer that now.



---

archive/issue_comments_331819.json:
```json
{
    "body": "Replying to [comment:35 jhpalmieri]:\n> It's fine with me. Any objections to a positive review?\n\nCan I take this comment as positive_review?",
    "created_at": "2017-10-13T08:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331819",
    "user": "@jdemeyer"
}
```

Replying to [comment:35 jhpalmieri]:
> It's fine with me. Any objections to a positive review?

Can I take this comment as positive_review?



---

archive/issue_comments_331820.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-13T09:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331820",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_331821.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-16T22:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23685#issuecomment-331821",
    "user": "@vbraun"
}
```

Resolution: fixed
