# Issue 23065: Implement UniqueFactory.__reduce__

Issue created by migration from https://trac.sagemath.org/ticket/23302

Original creator: jdemeyer

Original creation time: 2017-06-22 09:02:36

The class `UniqueFactory` (see `src/sage/structure/factory.pyx`) has a strange way of implementing `__reduce__`:

```
            obj._factory_data = self, version, key, extra_args
            if obj.__class__.__reduce__.__objclass__ is object:
                # replace the generic object __reduce__ to use this one
                obj.__reduce_ex__ = types.MethodType(generic_factory_reduce, obj)
```

It dynamically sets the `__reduce_ex__` attribute on the _instance_ to implement pickling. It is not clear to me why this needs to be so special: couldn't we do this with a normal `__reduce__` method on `UniqueFactory`?

I am bringing this up because this breaks with Cython 0.26.


---

Comment by jdemeyer created at 2017-06-22 09:24:33

Changing component from misc to cython.


---

Comment by jdemeyer created at 2017-06-22 13:10:59

New commits:


---

Comment by jdemeyer created at 2017-06-22 13:10:59

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-06-23 00:04:12

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-06-23 00:04:12

LGTM.


---

Comment by vbraun created at 2017-06-25 15:45:06

Resolution: fixed
