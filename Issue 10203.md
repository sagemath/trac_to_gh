# Issue 10203: cddlib fails to build on iras

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2010-11-02 16:32:04

Assignee: GeorgSWeber

CC:  vbraun

Keywords: cddlib

On the Skynet machine iras (SUSE ES 10 SP1 ia64), cddlib-094f.p8 fails to build with the message:

```
make[2]: Entering directory `/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src'
make[2]: warning: -jN forced in submake: disabling jobserver mode.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing --run aclocal-1.11 -I m4
/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing: line 52: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
 cd . && /bin/sh /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing --run automake-1.11 --gnu
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing --run autoconf
/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing: line 52: automake-1.11: command not found
/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src/missing: line 52: autoconf: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.
WARNING: `autoconf' is missing on your system.  You should only need it if
         you modified `configure.ac'.  You might want to install the
         `Autoconf' and `GNU m4' packages.  Grab them from any GNU
         archive site.
/bin/sh ./config.status --recheck
running CONFIG_SHELL=/bin/sh /bin/sh ./configure --prefix=/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/local --with-gmp=/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/local CC=gcc LDFLAGS= CXX=g++ --no-create --no-recursion
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... configure: error: newly created file is older than distributed files!
Check your system clock
make[2]: *** [config.status] Error 1
make[2]: Leaving directory `/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.6.1.alpha0/spkg/build/cddlib-094f.p8/src'
Error building cddlib
```



---

Comment by vbraun created at 2010-11-04 21:04:17

The problem is that the ctime of newly-created files over NFS is wrong:

```
vbraun`@`iras:~> rm -f test && touch test && stat test 
  File: `test' 
  Size: 0               Blocks: 0          IO Block: 8192   regular empty 
file 
Device: 14h/20d Inode: 11175765    Links: 1 
Access: (0644/-rw-r--r--)  Uid: ( 1036/  vbraun)   Gid: ( 1024/    sage) 
Access: 2010-10-23 09:59:05.009964000 -0400 
Modify: 2010-10-23 09:59:05.009964000 -0400 
Change: 2010-10-23 09:58:47.918997000 -0400 
```

There is a nfs bug related to nfs time stamps 
https://bugzilla.kernel.org/show_bug.cgi?id=6127 
which is likely the culprit here. That bug was fixed in 2.6.17 (iras runs 
2.6.16). 

A possible workaround would be to build sage in `/tmp`, which is a local disk and where file creation times are correct.


---

Comment by mpatel created at 2010-11-06 10:17:03

Replying to [comment:2 vbraun]:
> The problem is that the ctime of newly-created files over NFS is wrong:

> ...

> A possible workaround would be to build sage in `/tmp`, which is a local disk and where file creation times are correct.

Thanks, Volker.  Sage 4.6.1.alpha0 indeed builds successfully under iras' small `/tmp` and the long doctests pass.


---

Comment by jdemeyer created at 2012-06-19 10:29:33

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-06-19 10:29:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-06-19 13:34:17

Resolution: worksforme
