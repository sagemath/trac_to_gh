# Issue 16254: Fix output of trigonometric functions for complex input

Issue created by migration from Trac.

Original creator: ppurka

Original creation time: 2014-06-17 13:21:55

CC:  burcin kcrisman rws

This is a follow up to #16439.

1. The functions `atan, acos, asin` give `TypeError` on Python `complex` input.

2. The output of trigonometric functions are inconsistent depending on whether `complex` or `CDF` or `CC` is used as the input type.

From #16439 discussion by `@`kcrisman:
Just one point - almost certainly some of those digits are 'extra' from Python. Compare (after this):

sage: sec(1.+i)
0.498337030555187 + 0.591083841721045*I
sage: sec(complex(1,1))
(0.49833703055518686+0.5910838417210451j)
sage: sec(CDF(complex(1,1)))
0.498337030555 + 0.591083841721*I
Interesting.

Here is something else I don't know what to do with.

sage: arccot(1.+i)
arccot(1.00000000000000 + 1.00000000000000*I)  # in SR
sage: cot(1.+i)
0.217621561854403 - 0.868014142895925*I
One would think this should be the same type of output.

That said, SR is useful for some other cases of exact input.

I'm wondering whether we want to try to fix all of this here, though.


---

Comment by rws created at 2015-01-31 17:02:55

Everything except point 2 seems to be fixed so I'm changing the title.

```
sage: atan(complex(1,1))
(1.0172219678978514+0.4023594781085251j)
sage: acos(complex(1,1))
(0.9045568943023814-1.0612750619050357j)
sage: asin(complex(1,1))
(0.6662394324925152+1.0612750619050357j)
sage: asin(CDF(complex(1,1)))
0.6662394324925152 + 1.0612750619050357*I
sage: asin(CC(complex(1,1)))
0.666239432492515 + 1.06127506190504*I
sage: arccot(1.+i)
arccot(i + 1.00000000000000)
sage: cot(1.+i)
cot(i + 1.00000000000000)
```



---

Comment by rws created at 2015-12-20 08:41:21

Changing status from new to needs_review.


---

Comment by rws created at 2015-12-20 08:41:21

I get now:

```
sage: arccot(1.+i)
0.553574358897045 - 0.402359478108525*I
sage: cot(1.+i)
0.217621561854403 - 0.868014142895925*I
```

So this seems fixed.


---

Comment by vdelecroix created at 2016-04-06 17:24:19

What about adding doctests?


---

Comment by rws created at 2016-04-07 05:51:56

New commits:


---

Comment by vdelecroix created at 2016-04-07 15:10:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-04-08 00:25:53

Resolution: fixed
