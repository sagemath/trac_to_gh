# Issue 17129: for multivariate polynomial rings, degree method should convert its argument

Issue created by migration from Trac.

Original creator: jhpalmieri

Original creation time: 2014-11-18 21:32:21

As reported at #17205:

```
    sage: x, y = ZZ['x','y'].gens()
    sage: GF(1091)['x','y'].random_element().degree(x) ### works
    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails
```

The 2nd and 3rd lines are handled by different code, one from `multi_polynomial_libsingular.pyx` and one from `multi_polynomial_element.py`. The first tries to convert the argument `x` into the parent ring, but the second does not. 

The point here is to reconcile the approaches: always try to convert the argument into the parent ring.


---

Comment by jhpalmieri created at 2014-11-18 21:42:33

New commits:


---

Comment by jhpalmieri created at 2014-11-18 21:42:33

Changing status from new to needs_review.


---

Comment by git created at 2014-11-18 21:45:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-11-19 08:31:22

Why not just convert (i tried to say that in my sage-devel post, was probably too terse ;-) instead of coercing. E.g. it might be convenient to specify the generator as string if you haven't injected the variables into the current session.


---

Comment by jhpalmieri created at 2014-11-19 18:15:50

This was the path of least resistance: I just copied the code from `multi_polynomial_libsingular.pyx`. It was therefore the easiest way to make the behavior consistent regardless of the size of the characteristic of the base field.


---

Comment by jhpalmieri created at 2014-11-19 18:16:55

By "convert", do you mean just doing `self.parent()(x)`?


---

Comment by vbraun created at 2014-11-19 19:02:19

Yes, thats what I meant.


---

Comment by jhpalmieri created at 2014-11-19 20:42:55

Making this change in `multi_polynomial_libsingular.pyx` breaks a doctest which is supposed to test exactly this:

```
        The following example is inspired by trac 11652::

            sage: R.<p,q,t> = ZZ[]
            sage: poly = p+q^2+t^3
            sage: poly = poly.polynomial(t)[0]
            sage: poly
            q^2 + p

        There is no canonical coercion from ``R`` to the parent of ``poly``, so
        this doesn't work::

            sage: poly.degree(q)
            Traceback (most recent call last):
            ...
            TypeError: argument must canonically coerce to parent
```

At #11652, there was some debate about this, and the conclusion was that coercion was appropriate, not conversion. (In the above example, q obviously converts to an element of the parent of `poly`, but there is no coercion.)


---

Comment by vbraun created at 2014-11-20 11:58:49

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-20 11:58:49

sounds good


---

Comment by vbraun created at 2014-11-20 16:35:03

Resolution: fixed
