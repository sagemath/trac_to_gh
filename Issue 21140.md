# Issue 21140: Update FriCAS to 1.3.0 (current)

archive/issues_021140.json:
```json
{
    "body": "CC:  @dkrenn @mantepse @hemmecke @rwst\n\nsubject says it all, see \u200bhttp://fricas.sourceforge.net/\n\nhttps://groups.google.com/forum/#!topic/fricas-devel/0FP3qYECuDY\n\nI assume that this version needs less patching.\n\nUpstream source tarball:\nhttps://sourceforge.net/projects/fricas/files/fricas/1.3.0/fricas-1.3.0-full.tar.bz2/download\n\n(with ads, but automatic download after a few seconds)\n\nIssue created by migration from https://trac.sagemath.org/ticket/21377\n\n",
    "created_at": "2016-08-31T06:05:30Z",
    "labels": [
        "component: packages: experimental"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Update FriCAS to 1.3.0 (current)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21140",
    "user": "https://github.com/mantepse"
}
```
CC:  @dkrenn @mantepse @hemmecke @rwst

subject says it all, see â€‹http://fricas.sourceforge.net/

https://groups.google.com/forum/#!topic/fricas-devel/0FP3qYECuDY

I assume that this version needs less patching.

Upstream source tarball:
https://sourceforge.net/projects/fricas/files/fricas/1.3.0/fricas-1.3.0-full.tar.bz2/download

(with ads, but automatic download after a few seconds)

Issue created by migration from https://trac.sagemath.org/ticket/21377





---

archive/issue_comments_292572.json:
```json
{
    "body": "Changing keywords from \"\" to \"FriCAS\".",
    "created_at": "2017-02-16T06:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292572",
    "user": "https://github.com/mantepse"
}
```

Changing keywords from "" to "FriCAS".



---

archive/issue_events_056848.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-02-16T06:41:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21140#event-56848"
}
```



---

archive/issue_events_056849.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-05T06:38:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21140#event-56849"
}
```



---

archive/issue_events_056850.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-05T06:38:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21140#event-56850"
}
```



---

archive/issue_comments_292573.json:
```json
{
    "body": "I made a branch, removing one patch that failed to apply. Maybe this patch must be kept.\n----\nNew commits:",
    "created_at": "2017-09-05T06:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292573",
    "user": "https://github.com/fchapoton"
}
```

I made a branch, removing one patch that failed to apply. Maybe this patch must be kept.
----
New commits:



---

archive/issue_comments_292574.json:
```json
{
    "body": "Note that it's meanwhile 1.3.2.  No idea whether there are significant changes.",
    "created_at": "2017-09-05T07:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292574",
    "user": "https://github.com/mantepse"
}
```

Note that it's meanwhile 1.3.2.  No idea whether there are significant changes.



---

archive/issue_comments_292575.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-09-05T11:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_292576.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-05T11:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292576",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_292577.json:
```json
{
    "body": "This installs correctly and passes the \"# optional fricas\" doctests. Can someone double check please ?",
    "created_at": "2017-09-06T11:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292577",
    "user": "https://github.com/fchapoton"
}
```

This installs correctly and passes the "# optional fricas" doctests. Can someone double check please ?



---

archive/issue_comments_292578.json:
```json
{
    "body": "I am currently compiling!",
    "created_at": "2017-09-06T13:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292578",
    "user": "https://github.com/mantepse"
}
```

I am currently compiling!



---

archive/issue_comments_292579.json:
```json
{
    "body": "Hm, when trying to do `sage -i fricas` with this ticket, I get an error saying that it couldn't be downloaded...\n\nHow should I try this?",
    "created_at": "2017-09-06T13:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292579",
    "user": "https://github.com/mantepse"
}
```

Hm, when trying to do `sage -i fricas` with this ticket, I get an error saying that it couldn't be downloaded...

How should I try this?



---

archive/issue_comments_292580.json:
```json
{
    "body": "I think I figured it out: download and put it into `upstream`",
    "created_at": "2017-09-06T13:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292580",
    "user": "https://github.com/mantepse"
}
```

I think I figured it out: download and put it into `upstream`



---

archive/issue_comments_292581.json:
```json
{
    "body": "you need to put yourself the tar file in $SAGEHOME/upstream",
    "created_at": "2017-09-06T14:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292581",
    "user": "https://github.com/fchapoton"
}
```

you need to put yourself the tar file in $SAGEHOME/upstream



---

archive/issue_comments_292582.json:
```json
{
    "body": "I actually have most tests failing now, because of bad indentation.  For example:\n\n\n```\nFile \"src/sage/interfaces/fricas.py\", line 1104, in sage.interfaces.fricas.FriCASElement._sage_\nFailed example:\n    a = fricas('(1 + sqrt(2))^5'); a                              # optional - fricas\nExpected:\n       +-+\n    29\\|2  + 41\nGot:\n    +-+\n    29 \\|2  + 41\n\n```\n\nHowever, I cannot tell whether the tests passed before the switch to FriCAS 1.3.2.",
    "created_at": "2017-09-06T16:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292582",
    "user": "https://github.com/mantepse"
}
```

I actually have most tests failing now, because of bad indentation.  For example:


```
File "src/sage/interfaces/fricas.py", line 1104, in sage.interfaces.fricas.FriCASElement._sage_
Failed example:
    a = fricas('(1 + sqrt(2))^5'); a                              # optional - fricas
Expected:
       +-+
    29\|2  + 41
Got:
    +-+
    29 \|2  + 41

```

However, I cannot tell whether the tests passed before the switch to FriCAS 1.3.2.



---

archive/issue_comments_292583.json:
```json
{
    "body": "I guess the \"+-+\" part got a bit shifted when you copied the result into the ticket. The difference is the space after 29. This has recently been added.",
    "created_at": "2017-09-06T18:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292583",
    "user": "https://github.com/hemmecke"
}
```

I guess the "+-+" part got a bit shifted when you copied the result into the ticket. The difference is the space after 29. This has recently been added.



---

archive/issue_comments_292584.json:
```json
{
    "body": "I am not sure how to proceed - on the one hand, I think it makes sense to merge this, because I do not know what made the output break (I do *not* mean the additional space) - it was broken before the upgrade, too.\n\nFrederic, can you confirm that the tests pass on your computer?  It's strange that the space introduced in FriCAS would not show up on your system.",
    "created_at": "2017-09-09T13:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292584",
    "user": "https://github.com/mantepse"
}
```

I am not sure how to proceed - on the one hand, I think it makes sense to merge this, because I do not know what made the output break (I do *not* mean the additional space) - it was broken before the upgrade, too.

Frederic, can you confirm that the tests pass on your computer?  It's strange that the space introduced in FriCAS would not show up on your system.



---

archive/issue_comments_292585.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-12T08:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292585",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_292586.json:
```json
{
    "body": "I can confirm it works and fixes part of #23782",
    "created_at": "2017-09-12T08:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292586",
    "user": "https://github.com/mantepse"
}
```

I can confirm it works and fixes part of #23782



---

archive/issue_comments_292587.json:
```json
{
    "body": "Replying to [ticket:21377 mantepse]:\n> (with ads, but automatic download after a few seconds)\n\nI'm not sure that this will be acceptable for the release manager.",
    "created_at": "2017-09-14T11:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292587",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:21377 mantepse]:
> (with ads, but automatic download after a few seconds)

I'm not sure that this will be acceptable for the release manager.



---

archive/issue_comments_292588.json:
```json
{
    "body": "Replying to [comment:17 jdemeyer]:\n> Replying to [ticket:21377 mantepse]:\n> > (with ads, but automatic download after a few seconds)\n> \n> I'm not sure that this will be acceptable for the release manager.\n\nAre you saying that sourceforge is not acceptable anymore?",
    "created_at": "2017-09-14T11:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292588",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:17 jdemeyer]:
> Replying to [ticket:21377 mantepse]:
> > (with ads, but automatic download after a few seconds)
> 
> I'm not sure that this will be acceptable for the release manager.

Are you saying that sourceforge is not acceptable anymore?



---

archive/issue_comments_292589.json:
```json
{
    "body": "Replying to [comment:18 mantepse]:\n> Are you saying that sourceforge is not acceptable anymore?\n\nhttps://en.wikipedia.org/wiki/SourceForge#Country_restrictions\n\nThey seem to at least willing to improve the site that declined after 2012:\nhttps://www.reddit.com/r/sysadmin/comments/4n3e1s/the_state_of_sourceforge_since_its_acquisition_in/",
    "created_at": "2017-09-14T12:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292589",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:18 mantepse]:
> Are you saying that sourceforge is not acceptable anymore?

https://en.wikipedia.org/wiki/SourceForge#Country_restrictions

They seem to at least willing to improve the site that declined after 2012:
https://www.reddit.com/r/sysadmin/comments/4n3e1s/the_state_of_sourceforge_since_its_acquisition_in/



---

archive/issue_comments_292590.json:
```json
{
    "body": "Is https://github.com/fricas/fricas acceptable?  But I have no idea how to package from there.",
    "created_at": "2017-09-14T13:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292590",
    "user": "https://github.com/mantepse"
}
```

Is https://github.com/fricas/fricas acceptable?  But I have no idea how to package from there.



---

archive/issue_comments_292591.json:
```json
{
    "body": "Note that https://github.com/fricas/fricas is a only source repository. As far as I know, the release tarball is not identical to the git version that is tagged with the version number. The release tarball contains some precompiled stuff. (I'm not 100% sure since I compile myself from source.) \nAsk on https://groups.google.com/forum/#!forum/fricas-devel how one can package from the source tree.",
    "created_at": "2017-09-14T13:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292591",
    "user": "https://github.com/hemmecke"
}
```

Note that https://github.com/fricas/fricas is a only source repository. As far as I know, the release tarball is not identical to the git version that is tagged with the version number. The release tarball contains some precompiled stuff. (I'm not 100% sure since I compile myself from source.) 
Ask on https://groups.google.com/forum/#!forum/fricas-devel how one can package from the source tree.



---

archive/issue_comments_292592.json:
```json
{
    "body": "OK, I shot myself into the foot here.  No, I'm sure we should want the sourceforge version here.  PLEASE!",
    "created_at": "2017-09-14T13:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292592",
    "user": "https://github.com/mantepse"
}
```

OK, I shot myself into the foot here.  No, I'm sure we should want the sourceforge version here.  PLEASE!



---

archive/issue_comments_292593.json:
```json
{
    "body": "Replying to [comment:21 hemmecke]:\n> Note that https://github.com/fricas/fricas is a only source repository.\n\nSo is https://github.com/pynac/pynac. The maintainer just uploads a suitable tarball when doing a release. This means you need to do at least one release in the repo.",
    "created_at": "2017-09-14T14:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292593",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:21 hemmecke]:
> Note that https://github.com/fricas/fricas is a only source repository.

So is https://github.com/pynac/pynac. The maintainer just uploads a suitable tarball when doing a release. This means you need to do at least one release in the repo.



---

archive/issue_comments_292594.json:
```json
{
    "body": "I am not the release manager. I am only saying that it *might* be a problem for the release manager, just to save you some time before the release manager looks at this ticket.",
    "created_at": "2017-09-14T15:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292594",
    "user": "https://github.com/jdemeyer"
}
```

I am not the release manager. I am only saying that it *might* be a problem for the release manager, just to save you some time before the release manager looks at this ticket.



---

archive/issue_events_056851.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-15T07:31:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21140#event-56851"
}
```



---

archive/issue_comments_292595.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-15T07:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292595",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_292596.json:
```json
{
    "body": "This is wonderful, wonderful, wonderful!  Thank you!",
    "created_at": "2017-09-15T11:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21140#issuecomment-292596",
    "user": "https://github.com/mantepse"
}
```

This is wonderful, wonderful, wonderful!  Thank you!
