# Issue 21140: Update FriCAS to 1.3.0 (current)

Issue created by migration from https://trac.sagemath.org/ticket/21377

Original creator: mantepse

Original creation time: 2016-08-31 06:05:30

CC:  dkrenn mantepse hemmecke rws

subject says it all, see â€‹http://fricas.sourceforge.net/

https://groups.google.com/forum/#!topic/fricas-devel/0FP3qYECuDY

I assume that this version needs less patching.

Upstream source tarball:
https://sourceforge.net/projects/fricas/files/fricas/1.3.0/fricas-1.3.0-full.tar.bz2/download

(with ads, but automatic download after a few seconds)


---

Comment by mantepse created at 2017-02-16 06:41:39

Changing keywords from "" to "FriCAS".


---

Comment by chapoton created at 2017-09-05 06:38:55

I made a branch, removing one patch that failed to apply. Maybe this patch must be kept.
----
New commits:


---

Comment by mantepse created at 2017-09-05 07:31:49

Note that it's meanwhile 1.3.2.  No idea whether there are significant changes.


---

Comment by git created at 2017-09-05 11:20:57

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2017-09-05 11:34:35

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-09-06 11:42:16

This installs correctly and passes the "# optional fricas" doctests. Can someone double check please ?


---

Comment by mantepse created at 2017-09-06 13:19:30

I am currently compiling!


---

Comment by mantepse created at 2017-09-06 13:41:03

Hm, when trying to do `sage -i fricas` with this ticket, I get an error saying that it couldn't be downloaded...

How should I try this?


---

Comment by mantepse created at 2017-09-06 13:45:49

I think I figured it out: download and put it into `upstream`


---

Comment by chapoton created at 2017-09-06 14:02:42

you need to put yourself the tar file in $SAGEHOME/upstream


---

Comment by mantepse created at 2017-09-06 16:39:41

I actually have most tests failing now, because of bad indentation.  For example:


```
File "src/sage/interfaces/fricas.py", line 1104, in sage.interfaces.fricas.FriCASElement._sage_
Failed example:
    a = fricas('(1 + sqrt(2))^5'); a                              # optional - fricas
Expected:
       +-+
    29\|2  + 41
Got:
    +-+
    29 \|2  + 41

```

However, I cannot tell whether the tests passed before the switch to FriCAS 1.3.2.


---

Comment by hemmecke created at 2017-09-06 18:36:13

I guess the "+-+" part got a bit shifted when you copied the result into the ticket. The difference is the space after 29. This has recently been added.


---

Comment by mantepse created at 2017-09-09 13:11:20

I am not sure how to proceed - on the one hand, I think it makes sense to merge this, because I do not know what made the output break (I do *not* mean the additional space) - it was broken before the upgrade, too.

Frederic, can you confirm that the tests pass on your computer?  It's strange that the space introduced in FriCAS would not show up on your system.


---

Comment by mantepse created at 2017-09-12 08:23:16

Changing status from needs_review to positive_review.


---

Comment by mantepse created at 2017-09-12 08:23:16

I can confirm it works and fixes part of #23782


---

Comment by jdemeyer created at 2017-09-14 11:48:06

Replying to [ticket:21377 mantepse]:
> (with ads, but automatic download after a few seconds)

I'm not sure that this will be acceptable for the release manager.


---

Comment by mantepse created at 2017-09-14 11:53:31

Replying to [comment:17 jdemeyer]:
> Replying to [ticket:21377 mantepse]:
> > (with ads, but automatic download after a few seconds)
> 
> I'm not sure that this will be acceptable for the release manager.

Are you saying that sourceforge is not acceptable anymore?


---

Comment by rws created at 2017-09-14 12:48:43

Replying to [comment:18 mantepse]:
> Are you saying that sourceforge is not acceptable anymore?

https://en.wikipedia.org/wiki/SourceForge#Country_restrictions

They seem to at least willing to improve the site that declined after 2012:
https://www.reddit.com/r/sysadmin/comments/4n3e1s/the_state_of_sourceforge_since_its_acquisition_in/


---

Comment by mantepse created at 2017-09-14 13:24:39

Is https://github.com/fricas/fricas acceptable?  But I have no idea how to package from there.


---

Comment by hemmecke created at 2017-09-14 13:31:36

Note that https://github.com/fricas/fricas is a only source repository. As far as I know, the release tarball is not identical to the git version that is tagged with the version number. The release tarball contains some precompiled stuff. (I'm not 100% sure since I compile myself from source.) 
Ask on https://groups.google.com/forum/#!forum/fricas-devel how one can package from the source tree.


---

Comment by mantepse created at 2017-09-14 13:58:02

OK, I shot myself into the foot here.  No, I'm sure we should want the sourceforge version here.  PLEASE!


---

Comment by rws created at 2017-09-14 14:55:24

Replying to [comment:21 hemmecke]:
> Note that https://github.com/fricas/fricas is a only source repository.

So is https://github.com/pynac/pynac. The maintainer just uploads a suitable tarball when doing a release. This means you need to do at least one release in the repo.


---

Comment by jdemeyer created at 2017-09-14 15:00:19

I am not the release manager. I am only saying that it _might_ be a problem for the release manager, just to save you some time before the release manager looks at this ticket.


---

Comment by vbraun created at 2017-09-15 07:31:02

Resolution: fixed


---

Comment by mantepse created at 2017-09-15 11:49:06

This is wonderful, wonderful, wonderful!  Thank you!
