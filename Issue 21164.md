# Issue 21164: py3 get rid of some xrange outside combinat

Issue created by migration from https://trac.sagemath.org/ticket/21401

Original creator: chapoton

Original creation time: 2016-09-02 14:37:04

sequel to #21375

as a step towards python3

using six.moves.range, as fast as xrange


---

Comment by chapoton created at 2016-09-02 14:37:49

New commits:


---

Comment by chapoton created at 2016-09-02 14:37:49

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2016-09-02 17:52:27


```diff
--- a/src/sage/calculus/riemann.pyx
+++ b/src/sage/calculus/riemann.pyx
@@ -1090,11 +1090,9 @@ cdef comp_pt(clist, loop=True):
         sage: m.plot_spiderweb()
         Graphics object consisting of 21 graphics primitives
     """
-    list2 = list(range(len(clist) + 1)) if loop else list(range(len(clist)))
-    for i in range(len(clist)):
-        list2[i] = (clist[i].real, clist[i].imag)
+    list2 = [(c.real, c.imag) for c in clist]
     if loop:
-        list2[len(clist)] = list2[0]
+        list2.append(list2[0])
     return list2
 
 cpdef get_derivatives(np.ndarray[COMPLEX_T, ndim=2] z_values, FLOAT_T xstep,
```



---

Comment by git created at 2016-09-02 18:24:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-09-02 18:26:49

Done. Indeed, this was not a beautiful piece of code.


---

Comment by aapitzsch created at 2016-09-02 19:07:34

Changing status from needs_review to positive_review.


---

Comment by aapitzsch created at 2016-09-02 19:07:34

LGTM.


---

Comment by vbraun created at 2016-09-04 00:13:20

Resolution: fixed
