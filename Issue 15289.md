# Issue 15289: banner is not updated

archive/issues_015289.json:
```json
{
    "body": "Starting up sage-6.0.rc0 still shows the wrong version.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15526\n\n",
    "created_at": "2013-12-16T17:13:38Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.0",
    "title": "banner is not updated",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15289",
    "user": "https://github.com/vbraun"
}
```
Starting up sage-6.0.rc0 still shows the wrong version.

Issue created by migration from https://trac.sagemath.org/ticket/15526





---

archive/issue_comments_196413.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-16T17:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196414.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-16T17:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196414",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196415.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-12-16T17:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196415",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_events_045360.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:05:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15289#event-45360"
}
```



---

archive/issue_comments_196416.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-16T18:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196416",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_196417.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2013-12-16T18:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196417",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_196418.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2013-12-16T18:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196418",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_045361.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:08:30Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15289#event-45361"
}
```



---

archive/issue_comments_196419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-16T18:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196419",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196420.json:
```json
{
    "body": "Sorry wrong button... needs review",
    "created_at": "2013-12-16T18:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196420",
    "user": "https://github.com/vbraun"
}
```

Sorry wrong button... needs review



---

archive/issue_comments_196421.json:
```json
{
    "body": "Please be patient, this is the first time I have ever tried to review a git ticket.\n\nI had an up-to-date sage git build with precisely  branches, master (the current HEAD) and build_system (presumably obsolete).  I did \n\n```\n ./sage -dev checkout --ticket 15526  \n```\n\nand saw this:\n\n```\nOn ticket #15526 with associated local branch \"ticket/15526\".\n\n#  Use \"sage --dev merge\" to include another ticket/branch.\n#  Use \"sage --dev commit\" to save changes into a new commit.\n```\n\nbut now\n\n```\n./sage -dev diff\n```\n\nshows no changes.  However \"git diff HEAD master\" does show the expected diffs.  Is this a bug in \"./sage -dev diff\" or did I do something wrong already?",
    "created_at": "2013-12-16T19:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196421",
    "user": "https://github.com/JohnCremona"
}
```

Please be patient, this is the first time I have ever tried to review a git ticket.

I had an up-to-date sage git build with precisely  branches, master (the current HEAD) and build_system (presumably obsolete).  I did 

```
 ./sage -dev checkout --ticket 15526  
```

and saw this:

```
On ticket #15526 with associated local branch "ticket/15526".

#  Use "sage --dev merge" to include another ticket/branch.
#  Use "sage --dev commit" to save changes into a new commit.
```

but now

```
./sage -dev diff
```

shows no changes.  However "git diff HEAD master" does show the expected diffs.  Is this a bug in "./sage -dev diff" or did I do something wrong already?



---

archive/issue_comments_196422.json:
```json
{
    "body": "Thats the expected behavior:\n\n```\n$ sage -dev help diff\nusage: sage-dev diff [-h] [--base BASE]\n\nShow how the current file system differs from \"base\".\n\noptional arguments:\n  -h, --help   show this help message and exit\n  --base BASE  a string; show the differences against the latest \"'commit'\"\n               (the default), against the branch \"'master'\" (or any other\n               branch name), or the merge of the \"'dependencies'\" of the\n               current ticket (if the dependencies merge cleanly)\n```\n\nIt matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.",
    "created_at": "2013-12-16T20:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196422",
    "user": "https://github.com/vbraun"
}
```

Thats the expected behavior:

```
$ sage -dev help diff
usage: sage-dev diff [-h] [--base BASE]

Show how the current file system differs from "base".

optional arguments:
  -h, --help   show this help message and exit
  --base BASE  a string; show the differences against the latest "'commit'"
               (the default), against the branch "'master'" (or any other
               branch name), or the merge of the "'dependencies'" of the
               current ticket (if the dependencies merge cleanly)
```

It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.



---

archive/issue_comments_196423.json:
```json
{
    "body": "Replying to [comment:8 vbraun]:\n> Thats the expected behavior:\n> {{{\n> $ sage -dev help diff\n> usage: sage-dev diff [-h] [--base BASE]\n> \n> Show how the current file system differs from \"base\".\n> \n> optional arguments:\n>   -h, --help   show this help message and exit\n>   --base BASE  a string; show the differences against the latest \"'commit'\"\n>                (the default), against the branch \"'master'\" (or any other\n>                branch name), or the merge of the \"'dependencies'\" of the\n>                current ticket (if the dependencies merge cleanly)\n> }}}\n> It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.\n\n\nOK, that makes perfect sense, though it is not what I was expecting after reading the development guide which says that (with nothing after the diff) \"which lists all source code changes that are part of the current branch. That is, it lists the changes from the current master to the current branch.\"   I'm learning, but I think the dev. guide could be clearer.",
    "created_at": "2013-12-16T20:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196423",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:8 vbraun]:
> Thats the expected behavior:
> {{{
> $ sage -dev help diff
> usage: sage-dev diff [-h] [--base BASE]
> 
> Show how the current file system differs from "base".
> 
> optional arguments:
>   -h, --help   show this help message and exit
>   --base BASE  a string; show the differences against the latest "'commit'"
>                (the default), against the branch "'master'" (or any other
>                branch name), or the merge of the "'dependencies'" of the
>                current ticket (if the dependencies merge cleanly)
> }}}
> It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.


OK, that makes perfect sense, though it is not what I was expecting after reading the development guide which says that (with nothing after the diff) "which lists all source code changes that are part of the current branch. That is, it lists the changes from the current master to the current branch."   I'm learning, but I think the dev. guide could be clearer.



---

archive/issue_comments_196424.json:
```json
{
    "body": "OK, so after applying the patch (in oldspeak) i.e. creating the branch from this ticket and waiting for \"make\" to finish, the banner is exactly the same: 5.13.  So, I don't know what to do to test this.  At least it passes the \"patch applies ok\"  test since that seens automatic with git.\n\nI am running a \"make ptestlong\" and see the string \"sage-6.0.rc0\" appearing,  but I don't know if that is a waste of time.",
    "created_at": "2013-12-16T20:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196424",
    "user": "https://github.com/JohnCremona"
}
```

OK, so after applying the patch (in oldspeak) i.e. creating the branch from this ticket and waiting for "make" to finish, the banner is exactly the same: 5.13.  So, I don't know what to do to test this.  At least it passes the "patch applies ok"  test since that seens automatic with git.

I am running a "make ptestlong" and see the string "sage-6.0.rc0" appearing,  but I don't know if that is a waste of time.



---

archive/issue_comments_196425.json:
```json
{
    "body": "Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.",
    "created_at": "2013-12-16T20:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196425",
    "user": "https://github.com/vbraun"
}
```

Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.



---

archive/issue_comments_196426.json:
```json
{
    "body": "Replying to [comment:11 vbraun]:\n> Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.\n\nThis seems to suggest that people other than release managers will have difficulties in testing this, then!  I get 3 errors in cmdline.py, all like\n\n```\nFile \"src/sage/tests/cmdline.py\", line 185, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected: \n    True\nGot:\n    False\n```\n\n\nI'll go and look for a different and more normal ticket to test out my reviewing skills.",
    "created_at": "2013-12-16T22:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196426",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:11 vbraun]:
> Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.

This seems to suggest that people other than release managers will have difficulties in testing this, then!  I get 3 errors in cmdline.py, all like

```
File "src/sage/tests/cmdline.py", line 185, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected: 
    True
Got:
    False
```


I'll go and look for a different and more normal ticket to test out my reviewing skills.



---

archive/issue_comments_196427.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-16T22:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196427",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_196428.json:
```json
{
    "body": "The test failures are to be expected...  I guess there is nothing to review here after all ;-)",
    "created_at": "2013-12-16T22:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196428",
    "user": "https://github.com/vbraun"
}
```

The test failures are to be expected...  I guess there is nothing to review here after all ;-)



---

archive/issue_events_045362.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:54:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15289#event-45362"
}
```



---

archive/issue_comments_196429.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-16T22:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15289#issuecomment-196429",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
