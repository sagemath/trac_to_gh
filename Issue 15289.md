# Issue 15289: banner is not updated

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-12-16 17:13:38

Starting up sage-6.0.rc0 still shows the wrong version.


---

Comment by git created at 2013-12-16 17:34:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2013-12-16 17:36:23

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-12-16 17:36:23

New commits:


---

Comment by vbraun created at 2013-12-16 18:05:09

Resolution: fixed


---

Comment by vbraun created at 2013-12-16 18:08:30

Resolution changed from fixed to 


---

Comment by vbraun created at 2013-12-16 18:08:30

Changing status from closed to new.


---

Comment by vbraun created at 2013-12-16 18:08:36

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-12-16 18:08:36

Sorry wrong button... needs review


---

Comment by cremona created at 2013-12-16 19:58:18

Please be patient, this is the first time I have ever tried to review a git ticket.

I had an up-to-date sage git build with precisely  branches, master (the current HEAD) and build_system (presumably obsolete).  I did 

```
 ./sage -dev checkout --ticket 15526  
```

and saw this:

```
On ticket #15526 with associated local branch "ticket/15526".

#  Use "sage --dev merge" to include another ticket/branch.
#  Use "sage --dev commit" to save changes into a new commit.
```

but now

```
./sage -dev diff
```

shows no changes.  However "git diff HEAD master" does show the expected diffs.  Is this a bug in "./sage -dev diff" or did I do something wrong already?


---

Comment by vbraun created at 2013-12-16 20:02:59

Thats the expected behavior:

```
$ sage -dev help diff
usage: sage-dev diff [-h] [--base BASE]

Show how the current file system differs from "base".

optional arguments:
  -h, --help   show this help message and exit
  --base BASE  a string; show the differences against the latest "'commit'"
               (the default), against the branch "'master'" (or any other
               branch name), or the merge of the "'dependencies'" of the
               current ticket (if the dependencies merge cleanly)
```

It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.


---

Comment by cremona created at 2013-12-16 20:34:45

Replying to [comment:8 vbraun]:
> Thats the expected behavior:
> {{{
> $ sage -dev help diff
> usage: sage-dev diff [-h] [--base BASE]
> 
> Show how the current file system differs from "base".
> 
> optional arguments:
>   -h, --help   show this help message and exit
>   --base BASE  a string; show the differences against the latest "'commit'"
>                (the default), against the branch "'master'" (or any other
>                branch name), or the merge of the "'dependencies'" of the
>                current ticket (if the dependencies merge cleanly)
> }}}
> It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.


OK, that makes perfect sense, though it is not what I was expecting after reading the development guide which says that (with nothing after the diff) "which lists all source code changes that are part of the current branch. That is, it lists the changes from the current master to the current branch."   I'm learning, but I think the dev. guide could be clearer.


---

Comment by cremona created at 2013-12-16 20:42:01

OK, so after applying the patch (in oldspeak) i.e. creating the branch from this ticket and waiting for "make" to finish, the banner is exactly the same: 5.13.  So, I don't know what to do to test this.  At least it passes the "patch applies ok"  test since that seens automatic with git.

I am running a "make ptestlong" and see the string "sage-6.0.rc0" appearing,  but I don't know if that is a waste of time.


---

Comment by vbraun created at 2013-12-16 20:50:38

Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.


---

Comment by cremona created at 2013-12-16 22:04:05

Replying to [comment:11 vbraun]:
> Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.

This seems to suggest that people other than release managers will have difficulties in testing this, then!  I get 3 errors in cmdline.py, all like

```
File "src/sage/tests/cmdline.py", line 185, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected: 
    True
Got:
    False
```


I'll go and look for a different and more normal ticket to test out my reviewing skills.


---

Comment by vbraun created at 2013-12-16 22:51:57

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-16 22:51:57

The test failures are to be expected...  I guess there is nothing to review here after all ;-)


---

Comment by vbraun created at 2013-12-16 22:54:04

Resolution: fixed
