# Issue 24969: Update README and installation documentation on Windows

Issue created by migration from https://trac.sagemath.org/ticket/25206

Original creator: embray

Original creation time: 2018-04-18 12:28:23

CC:  mjo tscrim @darijgr soehms @tobiasdiez dimpase jhpalmieri vbraun

Followup to #22450 to improve any hard-coded (e.g. in the official Sage docs, as opposed to on a the wiki) documentation concerning installing Sage for Windows, in particular to emphasize the native binary.


---

Comment by embray created at 2018-04-18 12:28:40

Set assignee to embray.


---

Comment by embray created at 2018-12-28 14:09:23

Retargeting some of my tickets.


---

Comment by embray created at 2019-03-25 10:44:36

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.


---

Comment by mkoeppe created at 2020-04-18 16:40:54

README needs some updates regarding Windows


---

Comment by mkoeppe created at 2020-04-27 18:19:27

Changing priority from major to critical.


---

Comment by mkoeppe created at 2020-04-27 18:39:06

First edit.
----
New commits:


---

Comment by git created at 2020-05-05 21:41:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-06 02:42:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 02:47:04

Changing priority from critical to blocker.


---

Comment by mkoeppe created at 2020-05-06 02:56:33

I'm also updating the general installation from source instructions some more.


---

Comment by git created at 2020-05-06 03:16:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 04:51:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 05:02:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 06:49:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 06:58:29

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-05-06 06:58:29

I'm setting this to review already even though I want to make a few more changes tomorrow. 

Feedback in particular on the discussion of the Windows issues in README.md would be welcome.


---

Comment by mkoeppe created at 2020-05-06 07:02:55

TBD: 
- Refer to the txt files in src/doc/en/installation/ from README.md
- Absorb all remaining non-outdated parts of https://trac.sagemath.org/wiki/Cygwin64Port into README.md and install manual


---

Comment by @timokau created at 2020-05-06 11:50:01

For what its worth, the Nix package should also work fine on WSL. I have not tested that though and I'm not able to offer any real support for that since I have no machine to test it on. Not sure if that belongs in this documentation.


---

Comment by git created at 2020-05-06 16:02:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 16:16:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 16:49:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 16:52:41

Changes to README.md are complete


---

Comment by mkoeppe created at 2020-05-06 17:14:38

TBD: 

- Add from README.md to the Installation Manual.

- Absorb all remaining non-outdated troubleshooting hints from â€‹https://trac.sagemath.org/wiki/Cygwin64Port into install manual


---

Comment by git created at 2020-05-06 18:08:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-05-06 18:44:00

`your Cygwin home directory does not contain spaces`

~/vectorspace.txt will spell doom :P

make it `the path to your Cygwin home directory does not contain spaces`


---

Comment by mkoeppe created at 2020-05-06 19:31:16

nontrivial spaces


---

Comment by git created at 2020-05-06 19:57:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2020-05-06 20:00:15

Just a few small things:

1. "lineendings" should be two words.
2. This is ambiguous: "This will build Sage based on Python 2 rather than based on Python 3, which is the default since sage 9.0."
3. Pretty please don't use 1. 1. 1. 1. for ordered lists, not everyone reads the README on github.


---

Comment by git created at 2020-05-06 20:49:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 20:50:07

Thanks!


---

Comment by git created at 2020-05-06 20:57:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 21:02:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 21:07:08

TODO in src/doc/en/installation/source.rst:

section "Using alternative compilers" should be merged into "Fortran and compiler suites".


---

Comment by git created at 2020-05-06 21:22:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-06 21:36:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-06 21:37:19

OK I'll just stop here.


---

Comment by mkoeppe created at 2020-05-06 21:37:27

Needs review


---

Comment by git created at 2020-05-06 21:44:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-07 00:46:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-07 00:46:32

(last change)


---

Comment by mjo created at 2020-05-07 00:51:33

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2020-05-07 00:51:33

LGTM, now quit changing it =P


---

Comment by mkoeppe created at 2020-05-07 02:16:57

Thanks!


---

Comment by vbraun created at 2020-05-08 19:40:44


```
[dochtml] OSError: /var/lib/buildbot/slave/sage_git/build/src/doc/en/installation/troubles.rst:4: WARNING: Duplicate explicit target name: "sage-support mailing list".
```



---

Comment by vbraun created at 2020-05-08 19:40:44

Changing status from positive_review to needs_work.


---

Comment by mkoeppe created at 2020-05-08 20:50:57

Sorry, fix coming shortly


---

Comment by git created at 2020-05-08 21:46:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-08 21:46:48

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2020-05-09 08:17:38

Resolution: fixed


---

Comment by @tobiasdiez created at 2020-05-25 13:12:12

Thanks for updating the help. I just followed the instructions and came up with the following detailed step-by-step procedure to get sage running under Windows using WLS (which is the updated version from #28549). I think it would be worthwhile to add it to the documentation to make it easier for Windows-folks to contribute. However, I'm not sure which files to edit (in fact, I'm not even able to find the readme edited in this PR).

## Prerequisites
* [Install WSL 2 (Ubuntu 20.04 LTS)](https://docs.microsoft.com/en-us/windows/wsl/install-win10)
* Activate OpenSSH as described in https://stackoverflow.com/a/40720527/873661

## Git (run everything in the Windows command line / Powershell console)
* Clone repository (preserving symlinks)
  {{{
  git clone -c core.symlinks=true git://github.com/sagemath/sage.git
  cd sage
}}}

* Correct line endings (necessary if global core.autocrlf is set to true; this should be obsolete with #29733):
  {{{
git config --local core.autocrlf false 
git rm --cached -r .
git reset --hard
}}}
* Setup remote trac (nessary if you want to contribute)
  
  Follow the instructions to set-up the ssh key https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent and then follow http://doc.sagemath.org/html/en/developer/trac.html#trac-authentication-through-ssh and http://doc.sagemath.org/html/en/developer/manual_git.html#chapter-manual-git

```
git remote add trac git://trac.sagemath.org/sage.git -t master
git remote set-url --push trac git@trac.sagemath.org:sage.git
```

* Switch to development branch
  {{{
git checkout develop
}}}

## Build sage (run everything from Ubuntu bash)
* Switch to Ubuntu: ` wsl `
* Install prerequisites as described in [corresponding script for Linux](http://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation). (Without the Python 3.7 dependencies, which apt-get couldn't find.)
   {{{
sudo apt-get update

sudo apt-get install ***as in the link***
}}}
* Make sure you are still in the sage folder
* Set how many cores you want to use for building (important, otherwise it will take ages)
  {{{
export MAKE="make -j4"
}}}

* Build
  {{{ 
make
}}}
* Test sage
  {{{
./sage
2+2
}}}
* Register git credentials (necessary if you want to commit from WSL)
  {{{
git config --global user.name "<your name>"
git config --global user.email <your email>
}}}

## Develop (using VS Code)
* Start Visual Studio Code.
* Install "Remote-WSL" extension.
* Press F1, enter Remote-WSL: New Window, and hit enter.
* Use the File menu to open your folder.
* For running & debuging, follow https://code.visualstudio.com/remote-tutorials/wsl/edit-and-debug
* Use `./sage -br` to trigger a rebuild of sage.


---

Comment by embray created at 2020-05-28 11:19:34

I was about to note in the wiki page that by default when you install the `ccache` package on Cygwin it does not configure the system to use ccache.  Of course it's possible to install the Sage `ccache` package but this is unnecessary.  So the documentation should be updated to explain how to configure ccache on Cygwin.  Should I open a new ticket for that?


---

Comment by mkoeppe created at 2020-05-28 13:49:45

Replying to [comment:64 embray]:
> I was about to note in the wiki page that by default when you install the `ccache` package on Cygwin it does not configure the system to use ccache.  Of course it's possible to install the Sage `ccache` package but this is unnecessary.  So the documentation should be updated to explain how to configure ccache on Cygwin.  Should I open a new ticket for that?
Yes, that would be great


---

Comment by slelievre created at 2020-07-25 19:13:54

Note: a follow-up ticket was opened by `@`embray:

- #29751: Cygwin: add ccache configuration instructions to installation manual
