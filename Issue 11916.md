# Issue 11916: Make use of PALP for different dimensions

archive/issues_011916.json:
```json
{
    "body": "Assignee: mhampton\n\nCC:  @vbraun\n\nKeywords: toric\n\nIn #12055 Volker made several copies of PALP for working with different dimensions. This patch exposes this functionality in Sage.\n\nNo attempt is made so far to pick the appropriate dimension automatically, since it is not entirely trivial and can have unpleasant consequences (some of the PALP other limits change automatically with dimension). However users can call `lattice_polytope.set_palp_dimension` function to make a global choice for their session.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12088\n\n",
    "created_at": "2011-11-26T17:22:06Z",
    "labels": [
        "geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "Make use of PALP for different dimensions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11916",
    "user": "@novoselt"
}
```
Assignee: mhampton

CC:  @vbraun

Keywords: toric

In #12055 Volker made several copies of PALP for working with different dimensions. This patch exposes this functionality in Sage.

No attempt is made so far to pick the appropriate dimension automatically, since it is not entirely trivial and can have unpleasant consequences (some of the PALP other limits change automatically with dimension). However users can call `lattice_polytope.set_palp_dimension` function to make a global choice for their session.

Issue created by migration from https://trac.sagemath.org/ticket/12088





---

archive/issue_comments_136580.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-26T17:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136580",
    "user": "@novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_136581.json:
```json
{
    "body": "Sounds good, I'll try to review it.\n\nFor the record, I'm writing \n* A lattice polytope class based on PPL\n* Support for accessing the PALP database files through cws.x though an iterator with customizable polytope class as output\nI do have it working but I need to clean up the patches. The current state is as always on my bitbucket repo:\nhttps://bitbucket.org/vbraun/mq-for-sage-toric-varieties/src/f1c83df616d8/trac_xxxx_palp_database.patch",
    "created_at": "2011-11-26T17:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136581",
    "user": "@vbraun"
}
```

Sounds good, I'll try to review it.

For the record, I'm writing 
* A lattice polytope class based on PPL
* Support for accessing the PALP database files through cws.x though an iterator with customizable polytope class as output
I do have it working but I need to clean up the patches. The current state is as always on my bitbucket repo:
https://bitbucket.org/vbraun/mq-for-sage-toric-varieties/src/f1c83df616d8/trac_xxxx_palp_database.patch



---

archive/issue_comments_136582.json:
```json
{
    "body": "Looks nice! For the record, I still think that instead of tuples of vectors for, say, vertices, it would be nice to return a container from #11400, which is supposed to be \"a customizable tuple with extra features but without performance penalty\" ;-)",
    "created_at": "2011-11-26T18:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136582",
    "user": "@novoselt"
}
```

Looks nice! For the record, I still think that instead of tuples of vectors for, say, vertices, it would be nice to return a container from #11400, which is supposed to be "a customizable tuple with extra features but without performance penalty" ;-)



---

archive/issue_comments_136583.json:
```json
{
    "body": "(I added a dependency on #12055 in the ticket's description, +cc me) `:-)`",
    "created_at": "2011-12-10T19:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136583",
    "user": "@nathanncohen"
}
```

(I added a dependency on #12055 in the ticket's description, +cc me) `:-)`



---

archive/issue_comments_136584.json:
```json
{
    "body": "Works great on Sage-5.0.beta7, as expected ;-)",
    "created_at": "2012-03-07T22:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136584",
    "user": "@novoselt"
}
```

Works great on Sage-5.0.beta7, as expected ;-)



---

archive/issue_comments_136585.json:
```json
{
    "body": "Attachment [trac_12088_palp_dimension.patch](tarball://root/attachments/some-uuid/ticket12088/trac_12088_palp_dimension.patch) by @novoselt created at 2012-03-23 23:06:49\n\nFixed whitespaces.",
    "created_at": "2012-03-23T23:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136585",
    "user": "@novoselt"
}
```

Attachment [trac_12088_palp_dimension.patch](tarball://root/attachments/some-uuid/ticket12088/trac_12088_palp_dimension.patch) by @novoselt created at 2012-03-23 23:06:49

Fixed whitespaces.



---

archive/issue_comments_136586.json:
```json
{
    "body": "I've deleted dependencies to help the patchbot in testing - the current development release already has everything necessary.",
    "created_at": "2012-03-27T17:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136586",
    "user": "@novoselt"
}
```

I've deleted dependencies to help the patchbot in testing - the current development release already has everything necessary.



---

archive/issue_comments_136587.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-02T15:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136587",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136588.json:
```json
{
    "body": "Looks good!",
    "created_at": "2012-05-02T15:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136588",
    "user": "@vbraun"
}
```

Looks good!



---

archive/issue_comments_136589.json:
```json
{
    "body": "On OS X 10.4 PPC as well as OS X 10.6 x86_64, I get:\n\n```\nsage -t  --long -force_lib devel/sage/sage/geometry/lattice_polytope.py\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/devel/sage-main/sage/geometry/lattice_polytope.py\", line 4896:\n    sage: LatticePolytope(identity_matrix(8))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_117[4]>\", line 1, in <module>\n        LatticePolytope(identity_matrix(Integer(8)))###line 4896:\n    sage: LatticePolytope(identity_matrix(8))\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 291, in LatticePolytope\n        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 457, in __init__\n        self._compute_dim(compute_vertices=True)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 663, in _compute_dim\n        compute_vertices=True)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 291, in LatticePolytope\n        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 457, in __init__\n        self._compute_dim(compute_vertices=True)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 657, in _compute_dim\n        self._vertices = read_palp_matrix(self.poly_x(\"v\"))\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 2661, in poly_x\n        return self._palp(\"poly.x -f\" + keys, reduce_dimension)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 1024, in _palp\n        self, self.vertices(), result)\n    ValueError: Error executing \"poly-11d.x -fv\" for the given polytope!\n\n    Polytope: A lattice polytope: 7-dimensional, 8 vertices.\n    Vertices:\n    [ 0 -1 -1 -1 -1 -1 -1 -1]\n    [ 0  1  0  0  0  0  0  0]\n    [ 0  0  1  0  0  0  0  0]\n    [ 0  0  0  1  0  0  0  0]\n    [ 0  0  0  0  1  0  0  0]\n    [ 0  0  0  0  0  1  0  0]\n    [ 0  0  0  0  0  0  1  0]\n    Output:\n    increase POLY_Dmax!\n\n**********************************************************************\n```\n",
    "created_at": "2012-05-04T11:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136589",
    "user": "@jdemeyer"
}
```

On OS X 10.4 PPC as well as OS X 10.6 x86_64, I get:

```
sage -t  --long -force_lib devel/sage/sage/geometry/lattice_polytope.py
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/devel/sage-main/sage/geometry/lattice_polytope.py", line 4896:
    sage: LatticePolytope(identity_matrix(8))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_117[4]>", line 1, in <module>
        LatticePolytope(identity_matrix(Integer(8)))###line 4896:
    sage: LatticePolytope(identity_matrix(8))
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 291, in LatticePolytope
        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 457, in __init__
        self._compute_dim(compute_vertices=True)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 663, in _compute_dim
        compute_vertices=True)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 291, in LatticePolytope
        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 457, in __init__
        self._compute_dim(compute_vertices=True)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 657, in _compute_dim
        self._vertices = read_palp_matrix(self.poly_x("v"))
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 2661, in poly_x
        return self._palp("poly.x -f" + keys, reduce_dimension)
      File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-5.1.beta0/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 1024, in _palp
        self, self.vertices(), result)
    ValueError: Error executing "poly-11d.x -fv" for the given polytope!

    Polytope: A lattice polytope: 7-dimensional, 8 vertices.
    Vertices:
    [ 0 -1 -1 -1 -1 -1 -1 -1]
    [ 0  1  0  0  0  0  0  0]
    [ 0  0  1  0  0  0  0  0]
    [ 0  0  0  1  0  0  0  0]
    [ 0  0  0  0  1  0  0  0]
    [ 0  0  0  0  0  1  0  0]
    [ 0  0  0  0  0  0  1  0]
    Output:
    increase POLY_Dmax!

**********************************************************************
```




---

archive/issue_comments_136590.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-04T11:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136590",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_136591.json:
```json
{
    "body": "This means that dimension adjustments during compilation of PALP didn't work. Volker, can you figure out why not? Sage code did what it was supposed to do.",
    "created_at": "2012-05-04T14:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136591",
    "user": "@novoselt"
}
```

This means that dimension adjustments during compilation of PALP didn't work. Volker, can you figure out why not? Sage code did what it was supposed to do.



---

archive/issue_comments_136592.json:
```json
{
    "body": "OSX sed doesn't understand `\\s` (whitespace). Hence the spkg-install fails to change `POLY_Dmax`...",
    "created_at": "2012-05-04T16:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136592",
    "user": "@vbraun"
}
```

OSX sed doesn't understand `\s` (whitespace). Hence the spkg-install fails to change `POLY_Dmax`...



---

archive/issue_comments_136593.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-04T16:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136593",
    "user": "@vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136594.json:
```json
{
    "body": "Updated spkg uses the more portable `[This is the Trac macro *:space:* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#:space:-macro)` instead. This is the only change that needs review. I tested it on bsd.math and it works on OSX.",
    "created_at": "2012-05-04T16:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136594",
    "user": "@vbraun"
}
```

Updated spkg uses the more portable `[This is the Trac macro *:space:* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#:space:-macro)` instead. This is the only change that needs review. I tested it on bsd.math and it works on OSX.



---

archive/issue_comments_136595.json:
```json
{
    "body": "spkg diff for review purposes only",
    "created_at": "2012-05-04T16:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136595",
    "user": "@vbraun"
}
```

spkg diff for review purposes only



---

archive/issue_comments_136596.json:
```json
{
    "body": "Attachment [palp-2.0.p1-p2.diff](tarball://root/attachments/some-uuid/ticket12088/palp-2.0.p1-p2.diff) by @novoselt created at 2012-05-18 19:18:34\n\nHi Jeroen,\n\nDoes it work on that machine now?",
    "created_at": "2012-05-18T19:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136596",
    "user": "@novoselt"
}
```

Attachment [palp-2.0.p1-p2.diff](tarball://root/attachments/some-uuid/ticket12088/palp-2.0.p1-p2.diff) by @novoselt created at 2012-05-18 19:18:34

Hi Jeroen,

Does it work on that machine now?



---

archive/issue_comments_136597.json:
```json
{
    "body": "I prefer for somebody to review the package first, then I'll test.",
    "created_at": "2012-05-18T21:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136597",
    "user": "@jdemeyer"
}
```

I prefer for somebody to review the package first, then I'll test.



---

archive/issue_comments_136598.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-18T22:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136598",
    "user": "@novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136599.json:
```json
{
    "body": "OK, the package works fine for me under Linux and the change is reasonable.",
    "created_at": "2012-05-18T22:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136599",
    "user": "@novoselt"
}
```

OK, the package works fine for me under Linux and the change is reasonable.



---

archive/issue_comments_136600.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-02T12:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136600",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_136601.json:
```json
{
    "body": "This seems to fail on `hawk` (OpenSolaris 06.2009-32):\n\n```\nsage -t  --long -force_lib devel/sage/sage/geometry/lattice_polytope.py\n**********************************************************************\nFile \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/devel/sage-main/sage/geometry/lattice_polytope.py\", line 4896:\n    sage: LatticePolytope(identity_matrix(8))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_117[4]>\", line 1, in <module>\n        LatticePolytope(identity_matrix(Integer(8)))###line 4896:\n    sage: LatticePolytope(identity_matrix(8))\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 291, in LatticePolytope\n        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 457, in __init__\n        self._compute_dim(compute_vertices=True)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 663, in _compute_dim\n        compute_vertices=True)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 291, in LatticePolytope\n        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 457, in __init__\n        self._compute_dim(compute_vertices=True)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 657, in _compute_dim\n        self._vertices = read_palp_matrix(self.poly_x(\"v\"))\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 2661, in poly_x\n        return self._palp(\"poly.x -f\" + keys, reduce_dimension)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py\", line 1024, in _palp\n        self, self.vertices(), result)\n    ValueError: Error executing \"poly-11d.x -fv\" for the given polytope!\n    Polytope: A lattice polytope: 7-dimensional, 8 vertices.\n    Vertices:\n    [ 0 -1 -1 -1 -1 -1 -1 -1]\n    [ 0  1  0  0  0  0  0  0]\n    [ 0  0  1  0  0  0  0  0]\n    [ 0  0  0  1  0  0  0  0]\n    [ 0  0  0  0  1  0  0  0]\n    [ 0  0  0  0  0  1  0  0]\n    [ 0  0  0  0  0  0  1  0]\n    Output:\n    increase POLY_Dmax!\n\n**********************************************************************\n```\n",
    "created_at": "2012-06-02T12:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136601",
    "user": "@jdemeyer"
}
```

This seems to fail on `hawk` (OpenSolaris 06.2009-32):

```
sage -t  --long -force_lib devel/sage/sage/geometry/lattice_polytope.py
**********************************************************************
File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/devel/sage-main/sage/geometry/lattice_polytope.py", line 4896:
    sage: LatticePolytope(identity_matrix(8))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_117[4]>", line 1, in <module>
        LatticePolytope(identity_matrix(Integer(8)))###line 4896:
    sage: LatticePolytope(identity_matrix(8))
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 291, in LatticePolytope
        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 457, in __init__
        self._compute_dim(compute_vertices=True)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 663, in _compute_dim
        compute_vertices=True)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 291, in LatticePolytope
        return LatticePolytopeClass(data, desc, compute_vertices, copy_vertices, n)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 457, in __init__
        self._compute_dim(compute_vertices=True)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 657, in _compute_dim
        self._vertices = read_palp_matrix(self.poly_x("v"))
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 2661, in poly_x
        return self._palp("poly.x -f" + keys, reduce_dimension)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_suncc/build/sage-5.1.beta2/local/lib/python/site-packages/sage/geometry/lattice_polytope.py", line 1024, in _palp
        self, self.vertices(), result)
    ValueError: Error executing "poly-11d.x -fv" for the given polytope!
    Polytope: A lattice polytope: 7-dimensional, 8 vertices.
    Vertices:
    [ 0 -1 -1 -1 -1 -1 -1 -1]
    [ 0  1  0  0  0  0  0  0]
    [ 0  0  1  0  0  0  0  0]
    [ 0  0  0  1  0  0  0  0]
    [ 0  0  0  0  1  0  0  0]
    [ 0  0  0  0  0  1  0  0]
    [ 0  0  0  0  0  0  1  0]
    Output:
    increase POLY_Dmax!

**********************************************************************
```




---

archive/issue_comments_136602.json:
```json
{
    "body": "Volker, this seems like the same problem as before. Is spacing different in different files that it is necessary to use regular expressions for it?",
    "created_at": "2012-06-04T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136602",
    "user": "@novoselt"
}
```

Volker, this seems like the same problem as before. Is spacing different in different files that it is necessary to use regular expressions for it?



---

archive/issue_comments_136603.json:
```json
{
    "body": "I'm looking into this as we speak. I don't have an account on hawk but the same thing failed on mark/skynet.",
    "created_at": "2012-06-04T16:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136603",
    "user": "@vbraun"
}
```

I'm looking into this as we speak. I don't have an account on hawk but the same thing failed on mark/skynet.



---

archive/issue_comments_136604.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-04T16:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136604",
    "user": "@vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136605.json:
```json
{
    "body": "I've updated to the latest upstream version and dumbed down the regexp to modify `POLY_Dmax` even further. I've tested it on bsd (OSX) and mark (Sun Solaris) and both work now.",
    "created_at": "2012-06-04T16:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136605",
    "user": "@vbraun"
}
```

I've updated to the latest upstream version and dumbed down the regexp to modify `POLY_Dmax` even further. I've tested it on bsd (OSX) and mark (Sun Solaris) and both work now.



---

archive/issue_comments_136606.json:
```json
{
    "body": "Attachment [from_palp-2.0.p1.diff](tarball://root/attachments/some-uuid/ticket12088/from_palp-2.0.p1.diff) by @vbraun created at 2012-06-04 16:46:23\n\nfor review purposes only",
    "created_at": "2012-06-04T16:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136606",
    "user": "@vbraun"
}
```

Attachment [from_palp-2.0.p1.diff](tarball://root/attachments/some-uuid/ticket12088/from_palp-2.0.p1.diff) by @vbraun created at 2012-06-04 16:46:23

for review purposes only



---

archive/issue_comments_136607.json:
```json
{
    "body": "Detection of errors in PALP output is currently achieved by looking for exclamation signs, the new version dropped it, which is unfortunate. I'll need to come up with a patch that fixes it.",
    "created_at": "2012-06-05T12:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136607",
    "user": "@novoselt"
}
```

Detection of errors in PALP output is currently achieved by looking for exclamation signs, the new version dropped it, which is unfortunate. I'll need to come up with a patch that fixes it.



---

archive/issue_comments_136608.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-05T12:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136608",
    "user": "@novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_136609.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-05T12:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136609",
    "user": "@novoselt"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136610.json:
```json
{
    "body": "Attachment [trac_12088_extend_PALP_error_detetion.patch](tarball://root/attachments/some-uuid/ticket12088/trac_12088_extend_PALP_error_detetion.patch) by @novoselt created at 2012-06-05 12:42:16\n\nPositive review to Volker's new spkg, my new patch needs review: it just looks for more substrings indicating an error.",
    "created_at": "2012-06-05T12:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136610",
    "user": "@novoselt"
}
```

Attachment [trac_12088_extend_PALP_error_detetion.patch](tarball://root/attachments/some-uuid/ticket12088/trac_12088_extend_PALP_error_detetion.patch) by @novoselt created at 2012-06-05 12:42:16

Positive review to Volker's new spkg, my new patch needs review: it just looks for more substrings indicating an error.



---

archive/issue_comments_136611.json:
```json
{
    "body": "Looks good to me and passes all doctests!\n\nApply trac_12088_palp_dimension.patch, trac_12088_extend_PALP_error_detetion.patch",
    "created_at": "2012-06-11T16:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136611",
    "user": "@vbraun"
}
```

Looks good to me and passes all doctests!

Apply trac_12088_palp_dimension.patch, trac_12088_extend_PALP_error_detetion.patch



---

archive/issue_comments_136612.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-11T16:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136612",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136613.json:
```json
{
    "body": "Could you please make all files in `src/` world-readable (mode 0644 or 0755)?",
    "created_at": "2012-06-18T10:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136613",
    "user": "@jdemeyer"
}
```

Could you please make all files in `src/` world-readable (mode 0644 or 0755)?



---

archive/issue_comments_136614.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-18T10:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136614",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_136615.json:
```json
{
    "body": "Ok, done. The `sage -pkg` still doesn't do that automatically? Should I patch it in?\n\nI'll set this ticket back to positive review since there isn't anything new to review.",
    "created_at": "2012-06-18T10:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136615",
    "user": "@vbraun"
}
```

Ok, done. The `sage -pkg` still doesn't do that automatically? Should I patch it in?

I'll set this ticket back to positive review since there isn't anything new to review.



---

archive/issue_comments_136616.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-06-18T10:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136616",
    "user": "@vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_136617.json:
```json
{
    "body": "Replying to [comment:26 vbraun]:\n> Ok, done. The `sage -pkg` still doesn't do that automatically? Should I patch it in?\nI would be in favor of adding a check and warning during `sage -pkg` (just like we check `hg status` currently) in case of files with weird permissions (essentially, anything which isn't 0644 or 0755).",
    "created_at": "2012-06-18T10:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136617",
    "user": "@jdemeyer"
}
```

Replying to [comment:26 vbraun]:
> Ok, done. The `sage -pkg` still doesn't do that automatically? Should I patch it in?
I would be in favor of adding a check and warning during `sage -pkg` (just like we check `hg status` currently) in case of files with weird permissions (essentially, anything which isn't 0644 or 0755).



---

archive/issue_comments_136618.json:
```json
{
    "body": "Such a change would need to be on top of #13113 obviously.",
    "created_at": "2012-06-18T10:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136618",
    "user": "@jdemeyer"
}
```

Such a change would need to be on top of #13113 obviously.



---

archive/issue_comments_136619.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-18T22:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11916#issuecomment-136619",
    "user": "@jdemeyer"
}
```

Resolution: fixed
