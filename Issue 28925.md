# Issue 28925: gfortran compile error on debian-jessie

Issue created by migration from https://trac.sagemath.org/ticket/29162

Original creator: mkoeppe

Original creation time: 2020-02-07 04:07:05

CC:  dimpase fbissey vbraun

This is with gcc version 4.9.2 (Debian 4.9.2-10+deb8u2).

https://github.com/mkoeppe/sage/runs/430688708?check_suite_focus=true

```
2020-02-07T01:07:37.4585503Z In file included from ../../src/gcc/config/i386/i386.c:98:0:
2020-02-07T01:07:37.4586109Z ../../src/gcc/config/i386/x86-tune-costs.h:32:56: error: uninitialized const member 'stringop_algs::stringop_strategy::max'
2020-02-07T01:07:37.4586420Z    {rep_prefix_1_byte, {{-1, rep_prefix_1_byte, false}}}};
2020-02-07T01:07:37.4586500Z                                                         ^
```



---

Comment by dimpase created at 2020-02-23 15:28:44

so, Sage's gfortran cannot be built with an ancient gcc. Nothing really new about it.

Perhaps the most meaningful fix would be to gfortran's spkg-configure to error out on not finding a system gfortran and finding an old gcc...


---

Comment by mkoeppe created at 2020-02-23 21:42:41

On this system, the `gcc` package (including fortran) can be installed successfully, but not `gfortran`.


---

Comment by dimpase created at 2020-02-23 21:48:44

if gcc is built then gfortran will be built with the new gcc.

apparently gfortran is more picky.

I really don't see a point of not having gfortran as a pre-req on Linux.


---

Comment by mkoeppe created at 2020-02-24 01:33:37

What's happening here is that gfortran 9.2 cannot build without bootstrapping when the old g++ is invoked as `g++ -std=gnu++11`. This is apparently a build configuration untested by upstream.  The ticket fixes it by avoiding the `-std=gnu++11` flag (which is globally added to `$CXX` by `build/pkgs/gcc/spkg-configure.m4` on old compilers).

The ticket is on top of #29052 (which needs review...)

Tests at https://github.com/mkoeppe/sage/actions/runs/44025504
----
New commits:


---

Comment by mkoeppe created at 2020-02-24 02:47:05

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-02-24 08:01:58

For the unrelated `gfortran` compile errors on `*-i386-minimal` that appear in https://github.com/mkoeppe/sage/runs/463683795, see #29241 (gfortran on 32bit: Configure for the same ABI as gcc).


---

Comment by git created at 2020-02-27 23:42:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-03-02 01:37:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2020-03-02 23:26:56

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-02 23:32:47

Thank you.


---

Comment by vbraun created at 2020-03-03 23:21:24

Resolution: fixed
