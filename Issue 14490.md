# Issue 14490: Update SymPy to 0.7.2

archive/issues_014490.json:
```json
{
    "body": "Assignee: jdemeyer\n\nCC:  fbissey\n\nSymPy 0.7.2 was released on October 16, 2012. The release notes are at https://github.com/sympy/sympy/wiki/Release-Notes-for-0.7.2.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14694\n\n",
    "created_at": "2013-06-06T01:04:41Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Update SymPy to 0.7.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14490",
    "user": "eviatarbach"
}
```
Assignee: jdemeyer

CC:  fbissey

SymPy 0.7.2 was released on October 16, 2012. The release notes are at https://github.com/sympy/sympy/wiki/Release-Notes-for-0.7.2.

Issue created by migration from https://trac.sagemath.org/ticket/14694





---

archive/issue_comments_183399.json:
```json
{
    "body": "SymPy is now on version 0.7.3, so that's what the Sage version should be updated to.",
    "created_at": "2013-07-14T21:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183399",
    "user": "eviatarbach"
}
```

SymPy is now on version 0.7.3, so that's what the Sage version should be updated to.



---

archive/issue_comments_183400.json:
```json
{
    "body": "I created the new SPKG, it's up at http://www.phas.ubc.ca/~eviatarb/sympy-0.7.3.spkg.\n\nThe patch fixes the only doctest failure I could find.",
    "created_at": "2013-08-17T21:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183400",
    "user": "eviatarbach"
}
```

I created the new SPKG, it's up at http://www.phas.ubc.ca/~eviatarb/sympy-0.7.3.spkg.

The patch fixes the only doctest failure I could find.



---

archive/issue_comments_183401.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-17T21:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183401",
    "user": "eviatarbach"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_183402.json:
```json
{
    "body": "Yes the pretty printing test. There was another one that was broken with 0.7.2 in sage-on-gentoo I will have to chase it to check it is gone away.",
    "created_at": "2013-08-17T21:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183402",
    "user": "fbissey"
}
```

Yes the pretty printing test. There was another one that was broken with 0.7.2 in sage-on-gentoo I will have to chase it to check it is gone away.



---

archive/issue_comments_183403.json:
```json
{
    "body": "OK, I check on a vanilla 5.12.beta1 and there is one more doctest failure as with 0.7.2 on sage-on-gentoo:\n\n```\nsage -t --long devel/sage/sage/symbolic/constants.py\n**********************************************************************\nFile \"devel/sage/sage/symbolic/constants.py\", line 715, in sage.symbolic.constants.NotANumber._sympy_\nFailed example:\n    sympy.nan == NaN # indirect doctest\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.symbolic.constants.NotANumber._sympy_\n```\n\nThe other patch works fine. We may want to get upstream involved with that one.",
    "created_at": "2013-08-20T21:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183403",
    "user": "fbissey"
}
```

OK, I check on a vanilla 5.12.beta1 and there is one more doctest failure as with 0.7.2 on sage-on-gentoo:

```
sage -t --long devel/sage/sage/symbolic/constants.py
**********************************************************************
File "devel/sage/sage/symbolic/constants.py", line 715, in sage.symbolic.constants.NotANumber._sympy_
Failed example:
    sympy.nan == NaN # indirect doctest
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   3 in sage.symbolic.constants.NotANumber._sympy_
```

The other patch works fine. We may want to get upstream involved with that one.



---

archive/issue_comments_183404.json:
```json
{
    "body": "Okay. Do you think we could still merge it though? I don't think users should be comparing SymPy and Sage objects too often anyway.",
    "created_at": "2013-08-21T00:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183404",
    "user": "eviatarbach"
}
```

Okay. Do you think we could still merge it though? I don't think users should be comparing SymPy and Sage objects too often anyway.



---

archive/issue_comments_183405.json:
```json
{
    "body": "Sure but the doctest has to be fixed one way or another before we merge. I am not giving a positive review while there is a known doctest breakage.",
    "created_at": "2013-08-21T00:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183405",
    "user": "fbissey"
}
```

Sure but the doctest has to be fixed one way or another before we merge. I am not giving a positive review while there is a known doctest breakage.



---

archive/issue_comments_183406.json:
```json
{
    "body": "Yeah that's what I meant. Patch coming up.",
    "created_at": "2013-08-21T00:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183406",
    "user": "eviatarbach"
}
```

Yeah that's what I meant. Patch coming up.



---

archive/issue_comments_183407.json:
```json
{
    "body": "Attachment [trac14694_2.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_2.patch) by eviatarbach created at 2013-08-21 00:30:08\n\nNew patch.",
    "created_at": "2013-08-21T00:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183407",
    "user": "eviatarbach"
}
```

Attachment [trac14694_2.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_2.patch) by eviatarbach created at 2013-08-21 00:30:08

New patch.



---

archive/issue_comments_183408.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-22T21:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183408",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_183409.json:
```json
{
    "body": "Not sure what to do with the old doctest but it all passes now. LEt's try to make it for beta4.",
    "created_at": "2013-08-22T21:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183409",
    "user": "fbissey"
}
```

Not sure what to do with the old doctest but it all passes now. LEt's try to make it for beta4.



---

archive/issue_comments_183410.json:
```json
{
    "body": "Sorry forgot to also include the patch in the description. Only the last patch should be applied.",
    "created_at": "2013-08-23T06:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183410",
    "user": "fbissey"
}
```

Sorry forgot to also include the patch in the description. Only the last patch should be applied.



---

archive/issue_comments_183411.json:
```json
{
    "body": "\n```\nsage -t devel/sage/sage/misc/displayhook.py\n**********************************************************************\nFile \"devel/sage/sage/misc/displayhook.py\", line 25, in sage.misc.displayhook\nFailed example:\n    shell.run_cell('integral(x^2/pi^x, x)')\nExpected:\n     / 2    2                      \\  -x*log(pi)\n    -\\x *log (pi) + 2*x*log(pi) + 2/*e\n    --------------------------------------------\n                         3\n                      log (pi)\nGot:\n     / 2    2                      \\  -x*log(pi) \n    -\\x *log (pi) + 2*x*log(pi) + 2/*e           \n    ---------------------------------------------\n                          3                      \n                       log (pi)                  \n**********************************************************************\n```\n\n\n```\nsage -t devel/sage/sage/misc/ascii_art.py\n**********************************************************************\nFile \"devel/sage/sage/misc/ascii_art.py\", line 807, in sage.misc.ascii_art.ascii_art\nFailed example:\n    ascii_art(sum(binomial(2*n,n+1)*x^n, n, 0, oo))\nExpected:\n     /        __________    \\\n    -\\2*x + \\/ -4*x + 1  - 1/\n    -------------------------\n               __________\n         2*x*\\/ -4*x + 1\nGot:\n     /        __________    \\ \n    -\\2*x + \\/ -4*x + 1  - 1/ \n    --------------------------\n               __________     \n         2*x*\\/ -4*x + 1      \n**********************************************************************\n```\n\n(note the number of hypens)\n\n\n```\nsage -t devel/sage/sage/symbolic/integration/integral.py\n**********************************************************************\nFile \"devel/sage/sage/symbolic/integration/integral.py\", line 474, in sage.symbolic.integration.integral.integrate\nFailed example:\n    (x^y-z).integrate(y,algorithm=\"sympy\")\nException raised:\n    Traceback (most recent call last):\n      File \"/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.symbolic.integration.integral.integrate[41]>\", line 1, in <module>\n        (x**y-z).integrate(y,algorithm=\"sympy\")\n      File \"expression.pyx\", line 9759, in sage.symbolic.expression.Expression.integral (sage/symbolic/expression.cpp:40828)\n      File \"/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/symbolic/integration/integral.py\", line 683, in integrate\n        return integrator(expression, v, a, b)\n      File \"/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/symbolic/integration/external.py\", line 39, in sympy_integrator\n        return result._sage_()\n      File \"/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sympy/core/add.py\", line 721, in _sage_\n        s += x._sage_()\n    AttributeError: 'Piecewise' object has no attribute '_sage_'\n**********************************************************************\n```\n",
    "created_at": "2013-08-23T09:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183411",
    "user": "jdemeyer"
}
```


```
sage -t devel/sage/sage/misc/displayhook.py
**********************************************************************
File "devel/sage/sage/misc/displayhook.py", line 25, in sage.misc.displayhook
Failed example:
    shell.run_cell('integral(x^2/pi^x, x)')
Expected:
     / 2    2                      \  -x*log(pi)
    -\x *log (pi) + 2*x*log(pi) + 2/*e
    --------------------------------------------
                         3
                      log (pi)
Got:
     / 2    2                      \  -x*log(pi) 
    -\x *log (pi) + 2*x*log(pi) + 2/*e           
    ---------------------------------------------
                          3                      
                       log (pi)                  
**********************************************************************
```


```
sage -t devel/sage/sage/misc/ascii_art.py
**********************************************************************
File "devel/sage/sage/misc/ascii_art.py", line 807, in sage.misc.ascii_art.ascii_art
Failed example:
    ascii_art(sum(binomial(2*n,n+1)*x^n, n, 0, oo))
Expected:
     /        __________    \
    -\2*x + \/ -4*x + 1  - 1/
    -------------------------
               __________
         2*x*\/ -4*x + 1
Got:
     /        __________    \ 
    -\2*x + \/ -4*x + 1  - 1/ 
    --------------------------
               __________     
         2*x*\/ -4*x + 1      
**********************************************************************
```

(note the number of hypens)


```
sage -t devel/sage/sage/symbolic/integration/integral.py
**********************************************************************
File "devel/sage/sage/symbolic/integration/integral.py", line 474, in sage.symbolic.integration.integral.integrate
Failed example:
    (x^y-z).integrate(y,algorithm="sympy")
Exception raised:
    Traceback (most recent call last):
      File "/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.symbolic.integration.integral.integrate[41]>", line 1, in <module>
        (x**y-z).integrate(y,algorithm="sympy")
      File "expression.pyx", line 9759, in sage.symbolic.expression.Expression.integral (sage/symbolic/expression.cpp:40828)
      File "/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/symbolic/integration/integral.py", line 683, in integrate
        return integrator(expression, v, a, b)
      File "/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sage/symbolic/integration/external.py", line 39, in sympy_integrator
        return result._sage_()
      File "/mazur/release/merger/sage-5.12.beta4/local/lib/python2.7/site-packages/sympy/core/add.py", line 721, in _sage_
        s += x._sage_()
    AttributeError: 'Piecewise' object has no attribute '_sage_'
**********************************************************************
```




---

archive/issue_comments_183412.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-23T09:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183412",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_183413.json:
```json
{
    "body": "Hum. I assumed the new patch was correct for the first one on the basis that it was correct in the first version. Not sure how the second one escaped unless eviatarbach used 5.10, it is also specifc to 0.7.3, 0.7.2 just works. The last one is also showing a difference between 0.7.2 and 0.7.3.",
    "created_at": "2013-08-23T10:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183413",
    "user": "fbissey"
}
```

Hum. I assumed the new patch was correct for the first one on the basis that it was correct in the first version. Not sure how the second one escaped unless eviatarbach used 5.10, it is also specifc to 0.7.3, 0.7.2 just works. The last one is also showing a difference between 0.7.2 and 0.7.3.



---

archive/issue_comments_183414.json:
```json
{
    "body": "Sorry, I should have run `testall`. New patch fixes all the tests that were failing.",
    "created_at": "2013-08-24T15:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183414",
    "user": "eviatarbach"
}
```

Sorry, I should have run `testall`. New patch fixes all the tests that were failing.



---

archive/issue_comments_183415.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-24T15:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183415",
    "user": "eviatarbach"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_183416.json:
```json
{
    "body": "Attachment [trac14694_3.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_3.patch) by eviatarbach created at 2013-08-24 15:31:51",
    "created_at": "2013-08-24T15:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183416",
    "user": "eviatarbach"
}
```

Attachment [trac14694_3.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_3.patch) by eviatarbach created at 2013-08-24 15:31:51



---

archive/issue_comments_183417.json:
```json
{
    "body": "Attachment [trac14694_3.2.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_3.2.patch) by eviatarbach created at 2013-08-24 15:32:38",
    "created_at": "2013-08-24T15:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183417",
    "user": "eviatarbach"
}
```

Attachment [trac14694_3.2.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_3.2.patch) by eviatarbach created at 2013-08-24 15:32:38



---

archive/issue_comments_183418.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-08-26T06:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183418",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_183419.json:
```json
{
    "body": "Why did you change\n\n```\n(x^y-z).integrate(y,algorithm=\"sympy\")\n```\n\nto\n\n```\n(x*y-z).integrate(y,algorithm=\"sympy\")\n```\n\nOne needs a good reason to remove doctests.",
    "created_at": "2013-08-26T06:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183419",
    "user": "jdemeyer"
}
```

Why did you change

```
(x^y-z).integrate(y,algorithm="sympy")
```

to

```
(x*y-z).integrate(y,algorithm="sympy")
```

One needs a good reason to remove doctests.



---

archive/issue_comments_183420.json:
```json
{
    "body": "Because now SymPy returns a `Piecewise` object for that integral, which can't be converted back to Sage. Making the conversion work would actually require a change in SymPy, since currently we look for the `_sage_` method in SymPy objects, which isn't defined for `Piecewise`.\n\nI couldn't think of anything else to do except modifying the doctest, at least until the conversions are fixed upstream. What do you suggest?",
    "created_at": "2013-08-26T16:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183420",
    "user": "eviatarbach"
}
```

Because now SymPy returns a `Piecewise` object for that integral, which can't be converted back to Sage. Making the conversion work would actually require a change in SymPy, since currently we look for the `_sage_` method in SymPy objects, which isn't defined for `Piecewise`.

I couldn't think of anything else to do except modifying the doctest, at least until the conversions are fixed upstream. What do you suggest?



---

archive/issue_comments_183421.json:
```json
{
    "body": "Replying to [comment:23 eviatarbach]:\n> I couldn't think of anything else to do except modifying the doctest, at least until the conversions are fixed upstream. What do you suggest?\nAt least, mark the existing doctest `# known bug`.",
    "created_at": "2013-08-26T17:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183421",
    "user": "jdemeyer"
}
```

Replying to [comment:23 eviatarbach]:
> I couldn't think of anything else to do except modifying the doctest, at least until the conversions are fixed upstream. What do you suggest?
At least, mark the existing doctest `# known bug`.



---

archive/issue_comments_183422.json:
```json
{
    "body": "I would catch instead of changing it so we can know when it is fixed. In any case I will contact sympy upstream shortly about it.",
    "created_at": "2013-08-26T19:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183422",
    "user": "fbissey"
}
```

I would catch instead of changing it so we can know when it is fixed. In any case I will contact sympy upstream shortly about it.



---

archive/issue_comments_183423.json:
```json
{
    "body": "See Aaron interesting answer at [https://groups.google.com/forum/#!topic/sympy/VRNKUeJATNs](https://groups.google.com/forum/#!topic/sympy/VRNKUeJATNs)",
    "created_at": "2013-08-26T23:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183423",
    "user": "fbissey"
}
```

See Aaron interesting answer at [https://groups.google.com/forum/#!topic/sympy/VRNKUeJATNs](https://groups.google.com/forum/#!topic/sympy/VRNKUeJATNs)



---

archive/issue_comments_183424.json:
```json
{
    "body": "I might repeat my request here for people to help out adding _sage_ methods to unsupported objects in SymPy. The number of SymPy users who know the corresponding Sage methods is rather low, unfortunately. But SymPy currently has a lot of special functions and special objects like Piecewise which won't convert directly (even for the special functions, a direct name conversion might not work because of convention differences).",
    "created_at": "2013-08-27T00:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183424",
    "user": "asmeurer"
}
```

I might repeat my request here for people to help out adding _sage_ methods to unsupported objects in SymPy. The number of SymPy users who know the corresponding Sage methods is rather low, unfortunately. But SymPy currently has a lot of special functions and special objects like Piecewise which won't convert directly (even for the special functions, a direct name conversion might not work because of convention differences).



---

archive/issue_comments_183425.json:
```json
{
    "body": "Also, feel free to CC me on any SymPy related issue in this issue tracker.",
    "created_at": "2013-08-27T01:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183425",
    "user": "asmeurer"
}
```

Also, feel free to CC me on any SymPy related issue in this issue tracker.



---

archive/issue_comments_183426.json:
```json
{
    "body": "Attachment [trac14694_4.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_4.patch) by eviatarbach created at 2013-08-27 15:47:26",
    "created_at": "2013-08-27T15:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183426",
    "user": "eviatarbach"
}
```

Attachment [trac14694_4.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_4.patch) by eviatarbach created at 2013-08-27 15:47:26



---

archive/issue_comments_183427.json:
```json
{
    "body": "Thank you Aaron, I will see if I can submit a pull request adding `_sage_` methods. It would be good for SymPy and Sage to interface better to each other.\n\nNew patch added. How does this one look?",
    "created_at": "2013-08-27T15:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183427",
    "user": "eviatarbach"
}
```

Thank you Aaron, I will see if I can submit a pull request adding `_sage_` methods. It would be good for SymPy and Sage to interface better to each other.

New patch added. How does this one look?



---

archive/issue_comments_183428.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-27T15:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183428",
    "user": "eviatarbach"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_183429.json:
```json
{
    "body": "When marking a test `# known bug`, you should add the doctest result what you **want** to get, not what you actually get. In other words, just add `# known bug` without changing the result of the test.",
    "created_at": "2013-08-28T07:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183429",
    "user": "jdemeyer"
}
```

When marking a test `# known bug`, you should add the doctest result what you **want** to get, not what you actually get. In other words, just add `# known bug` without changing the result of the test.



---

archive/issue_comments_183430.json:
```json
{
    "body": "Okay. I removed the `# known bug` then, since now SymPy returns a piecewise function and `-y*z + x^y/log(x)` is no longer the \"expected\" output. How SymPy's Piecewise is converted to Sage's piecewise is left to be implemented, so it's not clear exactly what the expected output will be.",
    "created_at": "2013-08-28T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183430",
    "user": "eviatarbach"
}
```

Okay. I removed the `# known bug` then, since now SymPy returns a piecewise function and `-y*z + x^y/log(x)` is no longer the "expected" output. How SymPy's Piecewise is converted to Sage's piecewise is left to be implemented, so it's not clear exactly what the expected output will be.



---

archive/issue_comments_183431.json:
```json
{
    "body": "Attachment [trac14694_5.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_5.patch) by eviatarbach created at 2013-08-28 17:04:21",
    "created_at": "2013-08-28T17:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183431",
    "user": "eviatarbach"
}
```

Attachment [trac14694_5.patch](tarball://root/attachments/some-uuid/ticket14694/trac14694_5.patch) by eviatarbach created at 2013-08-28 17:04:21



---

archive/issue_comments_183432.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-09-04T08:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14490#issuecomment-183432",
    "user": "jdemeyer"
}
```

Resolution: fixed
