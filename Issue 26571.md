# Issue 26571: fix bug in RandomChordalGraph

Issue created by migration from https://trac.sagemath.org/ticket/26808

Original creator: dcoudert

Original creation time: 2018-12-03 20:52:53

CC:  tscrim chapoton

Error raised in [#26730#comment:32](https://trac.sagemath.org/ticket/26730#comment:32). It occurs randomly.

```
sage: from sage.graphs.generators.random import connecting_nodes
sage: T = graphs.RandomTree(10)
sage: while True:
....:     S = connecting_nodes(T, 5)
....:     
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-32-396131f7c478> in <module>()
      1 while True:
----> 2     S = connecting_nodes(T, Integer(5))
      3 

/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/generators/random.pyc in connecting_nodes(T, l)
    971             Ti = frozenset(Vi)
    972 
--> 973         S.append(Ti)
    974 
    975     return S

UnboundLocalError: local variable 'Ti' referenced before assignment
```



---

Comment by dcoudert created at 2018-12-03 20:57:03

It's easy to fix the bug. However, I don't know how to make an appropriate doctest to show that this bug is fixed. Any suggestion ?
----
New commits:


---

Comment by dcoudert created at 2018-12-03 20:57:03

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-12-05 14:51:18

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2018-12-05 14:51:18

Changing priority from major to critical.


---

Comment by chapoton created at 2018-12-05 14:51:18

ok

set to critical as this gives random doctest failures


---

Comment by vbraun created at 2018-12-05 23:56:41

Reviewer name


---

Comment by vbraun created at 2018-12-05 23:56:49

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2018-12-06 03:23:17

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2018-12-08 02:54:31

Resolution: fixed
