# Issue 20656: improving live documentation in the Jupyter notebook

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2016-06-27 16:15:17

CC:  vbraun rbeezer nthiery fhivert slelievre fcayre jdemeyer dimpase klee

Since #20690 we have access to documentation (with live execution) within the Jupyter notebook. It was decided to keep the code simple. There are two ongoing projects within Jupyter for having this working. It might be wiser to wait for them...

Some of the improvements mentioned in #20690 were:

- [  ] Configure Sphinx to add a small header to our html page with Thebe configuration: use the Jupyter instance serving the page. We currently use `window.location.origin`; is this the right thing?

- [ ] Currently it takes 10s for 100 prompts while some sage files
      contain up to 1000 prompts. Profile Thebe and optimize it or use
      a separate thread to properly support large files.

- [ ] Expand the activate button with a menu or other widgets for user
      customization of the Jupyter server. This typically would
      let the user choose between:
      - tmpnb (will only be useful for Sage when tmpnb will include a
        Sage kernel)
      - A local Jupyter server
      - Whichever Jupyter server the browser is currently connected to?
      - a user specified server

- [ ] Check whether Jupyter could be configured to dynamically
      negotiate incoming connections that don't fall within the
      `-NotebookApp.allow_origin pattern`, by opening a user dialog such
      as "Page xxx requests starting a new kernel on this server; do
      you accept? yes/no/always for this site"

- [ ] Add support in Thebe for customizable (continuation) prompts, with
      striping and splitting as above, and automatic setting of the kernel.
      The customization option could look like:

      {{{
         prompts = {
            "sage: ": {continuations=["....:", "...  "], kernel="sagemath"},
            ">>>> ": {continuation="...  ", kernel="python"}
         }
      }}}

- [ ] Contribute support for Thebe upstream in Sphinx, with:

      - [ ] Explicit markup to specify which code blocks are editable
            and with which kernel, or setup kernel auto-detection from
            the prompt.

      - [ ] The possibility for setting a default value for the above

- [ ] Refactor the Sage sphinx configuration to use the above

- [ ] Add support in Thebe for basic export to Jupyter notebooks. A
      quality loss (in particular in terms of the hierarchical
      structure) is acceptable.


---

Comment by slelievre created at 2016-08-30 09:04:59

Fix formatting in ticket description.

Regarding "There are two ongoing projects within Jupyter for having this working",
would someone add links?


---

Comment by slelievre created at 2016-08-30 09:12:01

Editing ticket description to add link to
[tmpnb issue 203: "Octave kernel and SageMath kernel"](https://github.com/jupyter/tmpnb/issues/203).


---

Comment by nthiery created at 2017-05-04 14:25:06

Update: Min RK reported to me that he had started reimplementing Thebe on top of JupyterLab. At this stage, this seemed to confirm our hope that Thebe will become just a thin layer on top of plain JupyterLab, making it sustainable.


---

Comment by nthiery created at 2017-05-04 14:37:41

A source of inspiration: [sympylive](http://live.sympy.org/).


---

Comment by tmonteil created at 2017-05-04 15:59:05

Replying to [comment:11 nthiery]:
> Update: Min RK reported to me that he had started reimplementing Thebe on top of JupyterLab. At this stage, this seemed to confirm our hope that Thebe will become just a thin layer on top of plain JupyterLab, making it sustainable.

Is an export to a standalone .ipynb file part of the plan (so that people can save their work on some live doc) ?


---

Comment by nthiery created at 2017-05-08 20:46:47

Replying to [comment:15 tmonteil]:
> Is an export to a standalone .ipynb file part of the plan (so that people can save their work on some live doc) ?

Ah, shoot, I forgot to discuss this specific point.

That being said, Thebe is meant to be embedded in any web page. So, at the level of Thebe itself, and without a minimum of structure specified, I believe it would be hard to define a meaningful export to .ipynb.

Plausibly we would instead be shooting for a link "download document as ipynb" pointing to the notebook generated from the original sources, either statically or on the fly. The inconvenient being of course that users won't keep their history in this scenario if they play with Thebe before switching to the notebook.


---

Comment by nthiery created at 2018-03-07 13:53:33

Changing keywords from "" to "thebe, thebelab".


---

Comment by mkoeppe created at 2020-08-19 20:30:46

This ticket needs clarification / update. Is it a meta ticket?


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.
