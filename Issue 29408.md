# Issue 29408: precision bug in elliptic curve periods (complex embeddings)

Issue created by migration from https://trac.sagemath.org/ticket/29645

Original creator: cremona

Original creation time: 2020-05-04 10:03:50

Keywords: elliptic curve period lattice

Possibly missed by #28057.   The method `omega()` for elliptic curve period lattices has a precision parameter `prec` which is correctly passed on to the function `real_period()` for real embeddings, but not to the function `complex_area()` for complex emneddings.

A one-line fix is needed (line 914 of period_lattice.py) which I will do and add a doctest.


---

Comment by slelievre created at 2020-05-04 12:38:59

Changing component from PLEASE CHANGE to elliptic curves.


---

Comment by cremona created at 2020-05-04 13:27:43

Before:

```
sage: K.<i> = NumberField(x^2+1)
sage: E = EllipticCurve(K,[1,2,3,4,5])
sage: embs = K.embeddings(CC)
sage: L = E.period_lattice(embs[0])
sage: L.omega()
2.97191526781791
sage: L.omega(prec=100)
2.97191526781791
```

and after:

```
sage: L.omega()
2.97191526781791
sage: L.omega(prec=100)
2.9719152678179096707716479509
sage: L.omega(prec=200)
2.9719152678179096707716479509361896059626536269952341358397
```



---

Comment by cremona created at 2020-05-04 13:33:34

New commits:


---

Comment by cremona created at 2020-05-04 13:33:50

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2020-05-04 18:25:16

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2020-05-04 18:25:16

Ok, this looks good to me.


---

Comment by git created at 2020-05-05 15:37:48

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-05-05 15:37:48

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by cremona created at 2020-05-05 15:38:39

I only added a few newlines on seeing the pycodestyle errors.  No need to re-review -- thanks.


---

Comment by chapoton created at 2020-05-05 17:04:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-06-03 22:32:28

Resolution: fixed
