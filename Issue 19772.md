# Issue 19772: string monoid class one not defined

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2016-02-04 13:46:08

From [this ask.sagemath question](http://ask.sagemath.org/question/32438/string-monoid-class-should-define-one/):

```
sage: BinaryStrings().one()

TypeError: Argument x (= 1) is of the wrong type.
```



---

Comment by karandesai-96 created at 2016-02-04 16:07:16

Changing status from new to needs_review.


---

Comment by karandesai-96 created at 2016-02-04 16:10:59

Hi `@`kcrisman
Does my commit serve the purpose ?


---

Comment by kcrisman created at 2016-02-04 16:52:01

Looks good to me, but I'm not an expert in such things so I'll let those who are give the final review.  I will say that you need a docstring and examples...
----
New commits:


---

Comment by tmonteil created at 2016-02-04 22:22:51

Changing status from needs_review to needs_work.


---

Comment by tmonteil created at 2016-02-04 22:22:51

`BinaryStrings().one()` should be an element of `BinaryStrings()`, not a Python string. Indeed, you want to be able to write things like:


```
sage: b = BinaryStrings()
sage: b.one() * b("101") == b("101")
True
```



---

Comment by git created at 2016-02-05 02:35:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by karandesai-96 created at 2016-02-05 02:38:03

This should do the work.


```
self._identity_element = StringMonoidElement(self, [int(1)])
```

This makes it aÂ StringMonoidElement, and not a python string.


---

Comment by tmonteil created at 2016-02-05 18:35:06

This does not work. As such it returns the second element of the alphabet, as an element of the string monoid:


```
sage: b = BinaryStrings()
sage: b.one()
1
sage: b.one() * b('001')
1001

sage: b = AlphabeticStrings()
sage: b.one()
B
```



What we are looking here is the neutral element for the multiplication, which you can get as `StringMonoidElement(self, '')`.

You still need to add some doctests.

Also, why creating a `_identity_element` attribute while it is used only once, why not directly define the identity element in the `one` method ?


---

Comment by karandesai-96 created at 2016-02-05 18:38:01

The identity element might be required somewhere else, so I thought let it be declared as a member of the class, though for now I'll move it locally.

Oh, I didn't think about this happening ! I will fix it in a commit quickly.


---

Comment by tmonteil created at 2016-02-05 18:43:47

Replying to [comment:10 karandesai-96]:
> The identity element might be required somewhere else, so I thought let it be declared as a member of the class, though for now I'll move it locally.

Let me suggest not doing things unless you actually need it, since this make some noise in the source code. Also, since no other monoid has such an attribute, it is likely that if someone once needs something like that, she will create an attribute with another name higher in the hierarchy, and the information will be stored twice. I guess that if someone needs the identity element, she will just call self.one() since it is the standard notation for monoids within Sage.


---

Comment by git created at 2016-02-05 18:48:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by karandesai-96 created at 2016-02-05 18:53:00

Replying to [comment:11 tmonteil]:
Yes, you are correct, I now understand why creating it within one() itself is better.

Also, I am new to development for Sage, I want to ask you whether you build Sage completely again to review my code ? Building Sage takes a lot of time on my laptop, how did you manage to test my code ?

> Let me suggest not doing things unless you actually need it, since this make some noise in the source code. Also, since no other monoid has such an attribute, it is likely that if someone once needs something like that, she will create an attribute with another name higher in the hierarchy, and the information will be stored twice. I guess that if someone needs the identity element, she will just call self.one() since it is the standard notation for monoids within Sage.


---

Comment by tmonteil created at 2016-02-05 20:46:55

Replying to [comment:13 karandesai-96]:
> Also, I am new to development for Sage, I want to ask you whether you build Sage completely again to review my code ? Building Sage takes a lot of time on my laptop, how did you manage to test my code ?

Since your branch is based on `develop.7.1.beta1` which i compiled already, Sage only had to compile a few files when i type `make` after applying your branch.


---

Comment by karandesai-96 created at 2016-02-06 02:56:39

Hi,

Does this ticket need further work ?


---

Comment by karandesai-96 created at 2016-02-06 16:35:59

Changing status from needs_work to needs_review.


---

Comment by karandesai-96 created at 2016-02-10 18:04:54

`@`tmonteil `@`kcrisman A gentle reminder. Is the current work fit to be merged ? This ticket will go stale and sit here as is for long if not reviewed... :/

Please direct me to further needed work if any, I will do it quickly.


---

Comment by tmonteil created at 2016-02-12 01:18:49

It looks much better now.

Perhaps could you just replace the current description `Create an identity StringMonoid Element`, by the more common `Return the identity element of ``self```.


---

Comment by karandesai-96 created at 2016-02-12 04:05:32

Replying to [comment:18 tmonteil]:

> Perhaps could you just replace the current description `Create an identity StringMonoid Element`, by the more common `Return the identity element of ``self```.

Oh yes, this is better. I will push my __tentatively__ final commit here. :-)


---

Comment by git created at 2016-02-12 16:08:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2016-02-12 22:22:41

I added a missing dot, apart from that it is good to go!
----
New commits:


---

Comment by tmonteil created at 2016-02-12 22:22:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-02-13 23:56:09

Resolution: fixed
