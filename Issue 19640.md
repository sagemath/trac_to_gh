# Issue 19640: Add SageNB exporter, Jupyter extension

archive/issues_019640.json:
```json
{
    "body": "CC:  kcrisman vdelecroix\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19877\n\n",
    "created_at": "2016-01-12T22:15:22Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Add SageNB exporter, Jupyter extension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19640",
    "user": "vbraun"
}
```
CC:  kcrisman vdelecroix



Issue created by migration from https://trac.sagemath.org/ticket/19877





---

archive/issue_comments_269902.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-12T23:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269902",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_269903.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2016-01-12T23:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269903",
    "user": "vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_269904.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-01-12T23:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269904",
    "user": "vbraun"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_269905.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-12T23:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269905",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_269906.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-12T23:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269906",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_269907.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-02-24T10:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269907",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_269908.json:
```json
{
    "body": "Is the `notebook` patch included in the latest `notebook` upgrade? If yes, it should be removed. If no, then this branch here should bump the version to force a re-install of `notebook`.",
    "created_at": "2016-02-24T10:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269908",
    "user": "jdemeyer"
}
```

Is the `notebook` patch included in the latest `notebook` upgrade? If yes, it should be removed. If no, then this branch here should bump the version to force a re-install of `notebook`.



---

archive/issue_comments_269909.json:
```json
{
    "body": "\n```\nAttempting to download package sagenb_export-1.0.tar.gz from mirrors\nhttp://www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/sagenb_export/sagenb_export-1.0.tar.gz\n[......................................................................]\n************************************************************************\nTraceback (most recent call last):\n  File \"/home/jdemeyer/sage/build/bin/../sage_bootstrap/cmdline.py\", line 228, in run\n    tarball.download()\n  File \"/home/jdemeyer/sage/build/bin/../sage_bootstrap/tarball.py\", line 164, in download\n    raise ChecksumError('checksum does not match')\nChecksumError: checksum does not match\n************************************************************************\nError downloading sagenb_export-1.0.tar.gz\n************************************************************************\n```\n",
    "created_at": "2016-02-24T11:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269909",
    "user": "jdemeyer"
}
```


```
Attempting to download package sagenb_export-1.0.tar.gz from mirrors
http://www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/sagenb_export/sagenb_export-1.0.tar.gz
[......................................................................]
************************************************************************
Traceback (most recent call last):
  File "/home/jdemeyer/sage/build/bin/../sage_bootstrap/cmdline.py", line 228, in run
    tarball.download()
  File "/home/jdemeyer/sage/build/bin/../sage_bootstrap/tarball.py", line 164, in download
    raise ChecksumError('checksum does not match')
ChecksumError: checksum does not match
************************************************************************
Error downloading sagenb_export-1.0.tar.gz
************************************************************************
```




---

archive/issue_comments_269910.json:
```json
{
    "body": "The patch is going to be in notebook-4.2.0 which is 3h old now; In short: no",
    "created_at": "2016-04-15T22:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269910",
    "user": "vbraun"
}
```

The patch is going to be in notebook-4.2.0 which is 3h old now; In short: no



---

archive/issue_comments_269911.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-15T23:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269911",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269912.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-15T23:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269912",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_269913.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-15T23:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269913",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269914.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-04-16T09:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269914",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_269915.json:
```json
{
    "body": "Tarball is now correct (mirrors might have to catch up)",
    "created_at": "2016-04-16T09:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269915",
    "user": "vbraun"
}
```

Tarball is now correct (mirrors might have to catch up)



---

archive/issue_comments_269916.json:
```json
{
    "body": "I've installed the package atop sage 7.3.beta2 on Ubuntu 14.04 LTS with\n\n```\ngit pull trac u/vbraun/add_sagenb_exporter__jupyter_extension\nmake\n```\n\nEverything seemed OK, but when I run\n\n```\n./sage --notebook=export --list\n```\n\nI get the error message\n\n```\n[C 14:58:52.386 NotebookApp] Bad config encountered during initialization:\n[C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'\n```\n\nMaybe unrelated, but running the command without the flad `--list` (i.e. just `./sage --notebook=export`) yields\n\n```\n[W 14:59:48.618 NotebookApp] Error loading server extension sagenb_export.nbextension\n    Traceback (most recent call last):\n      File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/notebook/notebookapp.py\", line 1042, in init_server_extensions\n        mod = importlib.import_module(modulename)\n      File \"/home/eric/sage-git/beta8/local/lib/python/importlib/__init__.py\", line 37, in import_module\n        __import__(name)\n      File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/nbextension/__init__.py\", line 6, in <module>\n        from sagenb_export.nbextension.list_handler import ListSageNBHandler\n      File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/nbextension/list_handler.py\", line 7, in <module>\n        from sagenb_export.sagenb_reader import NotebookSageNB\n      File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/sagenb_reader.py\", line 7, in <module>\n        from sagenb_export.unescape import unescape\n      File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/unescape.py\", line 16, in <module>\n        unescape = html.unescape\n    AttributeError: 'module' object has no attribute 'unescape'\n```\n",
    "created_at": "2016-06-04T13:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269916",
    "user": "egourgoulhon"
}
```

I've installed the package atop sage 7.3.beta2 on Ubuntu 14.04 LTS with

```
git pull trac u/vbraun/add_sagenb_exporter__jupyter_extension
make
```

Everything seemed OK, but when I run

```
./sage --notebook=export --list
```

I get the error message

```
[C 14:58:52.386 NotebookApp] Bad config encountered during initialization:
[C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'
```

Maybe unrelated, but running the command without the flad `--list` (i.e. just `./sage --notebook=export`) yields

```
[W 14:59:48.618 NotebookApp] Error loading server extension sagenb_export.nbextension
    Traceback (most recent call last):
      File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/notebook/notebookapp.py", line 1042, in init_server_extensions
        mod = importlib.import_module(modulename)
      File "/home/eric/sage-git/beta8/local/lib/python/importlib/__init__.py", line 37, in import_module
        __import__(name)
      File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/nbextension/__init__.py", line 6, in <module>
        from sagenb_export.nbextension.list_handler import ListSageNBHandler
      File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/nbextension/list_handler.py", line 7, in <module>
        from sagenb_export.sagenb_reader import NotebookSageNB
      File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/sagenb_reader.py", line 7, in <module>
        from sagenb_export.unescape import unescape
      File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/unescape.py", line 16, in <module>
        unescape = html.unescape
    AttributeError: 'module' object has no attribute 'unescape'
```




---

archive/issue_comments_269917.json:
```json
{
    "body": "Replying to [comment:15 egourgoulhon]:\n> I've installed the package atop sage 7.3.beta2 on Ubuntu 14.04 LTS with\n> {{{\n> git pull trac u/vbraun/add_sagenb_exporter__jupyter_extension\n> make\n> }}}\n> Everything seemed OK, but when I run\n> {{{\n> ./sage --notebook=export --list\n> }}}\n> I get the error message\n> {{{\n> [C 14:58:52.386 NotebookApp] Bad config encountered during initialization:\n> [C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'\n> }}}\n\nSame issue after the install in a fresh 7.3.beta3 on Ubuntu 15.10.",
    "created_at": "2016-06-10T09:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269917",
    "user": "egourgoulhon"
}
```

Replying to [comment:15 egourgoulhon]:
> I've installed the package atop sage 7.3.beta2 on Ubuntu 14.04 LTS with
> {{{
> git pull trac u/vbraun/add_sagenb_exporter__jupyter_extension
> make
> }}}
> Everything seemed OK, but when I run
> {{{
> ./sage --notebook=export --list
> }}}
> I get the error message
> {{{
> [C 14:58:52.386 NotebookApp] Bad config encountered during initialization:
> [C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'
> }}}

Same issue after the install in a fresh 7.3.beta3 on Ubuntu 15.10.



---

archive/issue_comments_269918.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-06-10T09:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269918",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_269919.json:
```json
{
    "body": "Hi Volker,\n\nI just gave it a shot with Min. Thanks for your work on this!\n\nI have been using a lot the live documentation, and apparently this left out a whole lot of fake notebooks:\n\n```\nnthiery@mistral:~$ sagenb-export --list\nUnique ID       | Notebook Name\n-------------------------------------------------------------------------------\n_sage_:0        | doc_browser_0\n_sage_:1        | doc_browser_0\n_sage_:2        | doc_browser_0\n...\n```\n\n\nWhat about having sagenb-export ignore all notebooks owned by the user Sage?",
    "created_at": "2016-06-29T21:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269919",
    "user": "nthiery"
}
```

Hi Volker,

I just gave it a shot with Min. Thanks for your work on this!

I have been using a lot the live documentation, and apparently this left out a whole lot of fake notebooks:

```
nthiery@mistral:~$ sagenb-export --list
Unique ID       | Notebook Name
-------------------------------------------------------------------------------
_sage_:0        | doc_browser_0
_sage_:1        | doc_browser_0
_sage_:2        | doc_browser_0
...
```


What about having sagenb-export ignore all notebooks owned by the user Sage?



---

archive/issue_comments_269920.json:
```json
{
    "body": "After blasting away my `_sage_` notebooks:\n\n\n```\nsagenb-export --list\nUnique ID       | Notebook Name\n-------------------------------------------------------------------------------\nadmin:3         | Running the sage -combinat script\nadmin:11        | Sage Intro - Hagenberg\nadmin:12        | Sorting monoids and algebras on Coxeter groups\nadmin:15        | Crystal pictures and view\nadmin:21        | Root systems\nadmin:22        | Alain Maumejean\nTraceback (most recent call last):\n  File \"/opt/sage-git/local/bin/sagenb-export\", line 9, in <module>\n    load_entry_point('sagenb-export==1.0', 'console_scripts', 'sagenb-export')()\n  File \"/opt/ExportSageNB/sagenb_export/cmdline.py\", line 49, in main\n    action_list(dot_sage)\n  File \"/opt/ExportSageNB/sagenb_export/actions.py\", line 18, in action_list\n    tr(notebook.unique_id, notebook.name)\n  File \"/opt/ExportSageNB/sagenb_export/actions.py\", line 9, in tr\n    print('{0:<15} | {1}'.format(unique_id, name))\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe9' in position 16: ordinal not in range(128)\n```\n\n\nThis is presumably coming from a worksheet of mine whose name includes an accent. Most likely this is an utf-8 accent. I can investigate further if useful.\n\nCheers,",
    "created_at": "2016-06-29T21:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269920",
    "user": "nthiery"
}
```

After blasting away my `_sage_` notebooks:


```
sagenb-export --list
Unique ID       | Notebook Name
-------------------------------------------------------------------------------
admin:3         | Running the sage -combinat script
admin:11        | Sage Intro - Hagenberg
admin:12        | Sorting monoids and algebras on Coxeter groups
admin:15        | Crystal pictures and view
admin:21        | Root systems
admin:22        | Alain Maumejean
Traceback (most recent call last):
  File "/opt/sage-git/local/bin/sagenb-export", line 9, in <module>
    load_entry_point('sagenb-export==1.0', 'console_scripts', 'sagenb-export')()
  File "/opt/ExportSageNB/sagenb_export/cmdline.py", line 49, in main
    action_list(dot_sage)
  File "/opt/ExportSageNB/sagenb_export/actions.py", line 18, in action_list
    tr(notebook.unique_id, notebook.name)
  File "/opt/ExportSageNB/sagenb_export/actions.py", line 9, in tr
    print('{0:<15} | {1}'.format(unique_id, name))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 16: ordinal not in range(128)
```


This is presumably coming from a worksheet of mine whose name includes an accent. Most likely this is an utf-8 accent. I can investigate further if useful.

Cheers,



---

archive/issue_comments_269921.json:
```json
{
    "body": "That was trivial in fact. I'll do a pull request shortly.",
    "created_at": "2016-06-29T21:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269921",
    "user": "nthiery"
}
```

That was trivial in fact. I'll do a pull request shortly.



---

archive/issue_comments_269922.json:
```json
{
    "body": "I converted a couple of my worksheets, some being quite non trivial (all sorts of formatting, maths, links, ...), and overall this looks very promising!\n\nNote for Eric: I installed with:\n\n```\n    git clone git@github.com:vbraun/ExportSageNB.git\n    cd ExportSageNB\n    sage -python install setup.py\n```\n\nAnd used with\n\n```\n    sage -sh\n    sagenb-export ...\n```\n\nand that worked fine (modulo the PR by Min an myself)",
    "created_at": "2016-06-29T22:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269922",
    "user": "nthiery"
}
```

I converted a couple of my worksheets, some being quite non trivial (all sorts of formatting, maths, links, ...), and overall this looks very promising!

Note for Eric: I installed with:

```
    git clone git@github.com:vbraun/ExportSageNB.git
    cd ExportSageNB
    sage -python install setup.py
```

And used with

```
    sage -sh
    sagenb-export ...
```

and that worked fine (modulo the PR by Min an myself)



---

archive/issue_comments_269923.json:
```json
{
    "body": "Minor point: in some of the worksheets, the outputs appear litteraly as:\n\n```\n<html><span class=\"math\">\\newcommand{\\Bold}[1]{\\mathbf{#1}}2</span></html>\n```\n",
    "created_at": "2016-06-29T22:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269923",
    "user": "nthiery"
}
```

Minor point: in some of the worksheets, the outputs appear litteraly as:

```
<html><span class="math">\newcommand{\Bold}[1]{\mathbf{#1}}2</span></html>
```




---

archive/issue_comments_269924.json:
```json
{
    "body": "Feature requests:\n\n```\n    sagenb-export --ipynb admin:13\n```\n\nwhich chooses the out file name based on the worksheet title.\n\n\n```\n    sagenb-export --ipynb --all\n```\n\nExports all notebooks, using the  worksheet titles as file names, using something like `bla.ipynb`, `bla-2.ipynb`, ... in case of name conflict.",
    "created_at": "2016-06-29T22:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269924",
    "user": "nthiery"
}
```

Feature requests:

```
    sagenb-export --ipynb admin:13
```

which chooses the out file name based on the worksheet title.


```
    sagenb-export --ipynb --all
```

Exports all notebooks, using the  worksheet titles as file names, using something like `bla.ipynb`, `bla-2.ipynb`, ... in case of name conflict.



---

archive/issue_comments_269925.json:
```json
{
    "body": "Thanks for trying this out, Nicolas!  You are motivating me to do so this week too.  Question before I start: did this still keep all the notebooks from sagenb in the same state?  (That is, can you still use sage -n with the \"original\" notebook and nothing has changed?)\n\nPS I'd love that extra PR to use so I don't have to worry about any weird characters.",
    "created_at": "2016-06-30T01:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269925",
    "user": "kcrisman"
}
```

Thanks for trying this out, Nicolas!  You are motivating me to do so this week too.  Question before I start: did this still keep all the notebooks from sagenb in the same state?  (That is, can you still use sage -n with the "original" notebook and nothing has changed?)

PS I'd love that extra PR to use so I don't have to worry about any weird characters.



---

archive/issue_comments_269926.json:
```json
{
    "body": "The one-line install would be\n\n```\nsage -pip install git+https://github.com/vbraun/ExportSageNB.git\n```\n",
    "created_at": "2016-06-30T22:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269926",
    "user": "vbraun"
}
```

The one-line install would be

```
sage -pip install git+https://github.com/vbraun/ExportSageNB.git
```




---

archive/issue_comments_269927.json:
```json
{
    "body": "> Minor point: in some of the worksheets, the outputs appear litteraly as:\n> {{{\n> <html><span class=\"math\">\\newcommand{\\Bold}[1]{\\mathbf{#1}}2</span></html>\n> }}}\n\nI think this is this note in the readme?\n> SageNB html input cells are converted to Jupyter raw NBConvert cells; In the interactive Jupyter notebook these are not rendered as html but shown as their html source code. If you export to HTML (File -> Download as -> HTML) they are rendered as html, though.",
    "created_at": "2016-07-01T13:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269927",
    "user": "kcrisman"
}
```

> Minor point: in some of the worksheets, the outputs appear litteraly as:
> {{{
> <html><span class="math">\newcommand{\Bold}[1]{\mathbf{#1}}2</span></html>
> }}}

I think this is this note in the readme?
> SageNB html input cells are converted to Jupyter raw NBConvert cells; In the interactive Jupyter notebook these are not rendered as html but shown as their html source code. If you export to HTML (File -> Download as -> HTML) they are rendered as html, though.



---

archive/issue_comments_269928.json:
```json
{
    "body": "> PS I'd love that extra PR to use so I don't have to worry about any weird characters.\nI see now that this is already in upstream, so I'll try it out today.",
    "created_at": "2016-07-01T13:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269928",
    "user": "kcrisman"
}
```

> PS I'd love that extra PR to use so I don't have to worry about any weird characters.
I see now that this is already in upstream, so I'll try it out today.



---

archive/issue_comments_269929.json:
```json
{
    "body": "> Everything seemed OK, but when I run\n> {{{\n> ./sage --notebook=export --list\n> }}}\n> I get the error message\n> {{{\n> [C 14:58:52.386 NotebookApp] Bad config encountered during initialization:\n> [C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'\n> }}}\n\nI have exactly the same problem on Mac OS X 10.11, Sage 7.3.beta5.  Any ideas?\n\nI'll also note that, if this is indeed the syntax (the github site indicates something different but I'm not sure how to invoke it here) it should be added to `sage -advanced`:\n\n```\nRunning the notebook:\n  --notebook=[...]    -- start the Sage notebook (valid options are\n                         'default', 'sagenb', and 'jupyter'). See the output\n                         of sage --notebook --help for more details and\n                         examples of how to pass optional arguments\n  -bn, -build-and-notebook [...] -- build the Sage library then start\n                         the Sage notebook\n  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)\n  -n, -notebook [...] -- start the default Sage notebook (options are the\n                         same as for the notebook command in Sage).  See the\n                         output of sage -n -h for more details\n\n```\n\nThere *is* something minimal in `sage -n -h`, though, where I note the syntax is claimed to be `sage --notebook option` not `sage --notebook=option`.  I am reluctant to run any of these lest I destroy my notebooks...",
    "created_at": "2016-07-01T13:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269929",
    "user": "kcrisman"
}
```

> Everything seemed OK, but when I run
> {{{
> ./sage --notebook=export --list
> }}}
> I get the error message
> {{{
> [C 14:58:52.386 NotebookApp] Bad config encountered during initialization:
> [C 14:58:52.386 NotebookApp] Unrecognized flag: '--list'
> }}}

I have exactly the same problem on Mac OS X 10.11, Sage 7.3.beta5.  Any ideas?

I'll also note that, if this is indeed the syntax (the github site indicates something different but I'm not sure how to invoke it here) it should be added to `sage -advanced`:

```
Running the notebook:
  --notebook=[...]    -- start the Sage notebook (valid options are
                         'default', 'sagenb', and 'jupyter'). See the output
                         of sage --notebook --help for more details and
                         examples of how to pass optional arguments
  -bn, -build-and-notebook [...] -- build the Sage library then start
                         the Sage notebook
  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)
  -n, -notebook [...] -- start the default Sage notebook (options are the
                         same as for the notebook command in Sage).  See the
                         output of sage -n -h for more details

```

There *is* something minimal in `sage -n -h`, though, where I note the syntax is claimed to be `sage --notebook option` not `sage --notebook=option`.  I am reluctant to run any of these lest I destroy my notebooks...



---

archive/issue_comments_269930.json:
```json
{
    "body": "> And used with\n> {{{\n>     sage -sh\n>     sagenb-export ...\n> }}}\n\nGot it.  However, there should be something that works straight from `sage -n`, so my feeling is \"needs work\".",
    "created_at": "2016-07-01T13:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269930",
    "user": "kcrisman"
}
```

> And used with
> {{{
>     sage -sh
>     sagenb-export ...
> }}}

Got it.  However, there should be something that works straight from `sage -n`, so my feeling is "needs work".



---

archive/issue_comments_269931.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-07-01T13:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269931",
    "user": "kcrisman"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_269932.json:
```json
{
    "body": "Question to vbraun: is it possible to save the notebook (with some syntax, perhaps) in a different location than the cwd?  Or should one navigate to the location you want to save them first, and then export?  I haven't used Jupyter much but I guess you can save notebooks wherever you want, right?",
    "created_at": "2016-07-01T14:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269932",
    "user": "kcrisman"
}
```

Question to vbraun: is it possible to save the notebook (with some syntax, perhaps) in a different location than the cwd?  Or should one navigate to the location you want to save them first, and then export?  I haven't used Jupyter much but I guess you can save notebooks wherever you want, right?



---

archive/issue_comments_269933.json:
```json
{
    "body": "Here's another weird thing.  Listing works fine (thanks to Nicolas and Min's work, presumably), but this doesn't:\n\n```\n$ sagenb-export --list > list.txt\nTraceback (most recent call last):\n...\n  File \"/Users/.../sage/local/lib/python2.7/site-packages/sagenb_export/actions.py\", line 9, in tr\n    print(u'{0:<15} | {1}'.format(unique_id, name))\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u2019' in position 33: ordinal not in range(128)\n```\n\nI'm not sure why this would differ.",
    "created_at": "2016-07-01T19:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269933",
    "user": "kcrisman"
}
```

Here's another weird thing.  Listing works fine (thanks to Nicolas and Min's work, presumably), but this doesn't:

```
$ sagenb-export --list > list.txt
Traceback (most recent call last):
...
  File "/Users/.../sage/local/lib/python2.7/site-packages/sagenb_export/actions.py", line 9, in tr
    print(u'{0:<15} | {1}'.format(unique_id, name))
UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 33: ordinal not in range(128)
```

I'm not sure why this would differ.



---

archive/issue_comments_269934.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-02T09:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269934",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_269935.json:
```json
{
    "body": "Replying to [comment:31 kcrisman]:\n> Question to vbraun: is it possible to save the notebook (with some syntax, perhaps) in a different location than the cwd? \n\nYou can specify any path `sage --notebook=export --ipynb=/path/to/Output.ipynb admin:10`",
    "created_at": "2016-07-02T09:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269935",
    "user": "vbraun"
}
```

Replying to [comment:31 kcrisman]:
> Question to vbraun: is it possible to save the notebook (with some syntax, perhaps) in a different location than the cwd? 

You can specify any path `sage --notebook=export --ipynb=/path/to/Output.ipynb admin:10`



---

archive/issue_comments_269936.json:
```json
{
    "body": "Replying to [comment:25 kcrisman]:\n> Thanks for trying this out, Nicolas!  You are motivating me to do so this week too.  Question before I start: did this still keep all the notebooks from sagenb in the same state?  (That is, can you still use sage -n with the \"original\" notebook and nothing has changed?)\n\nYes, the old sagenb notebooks are only read and never written to.",
    "created_at": "2016-07-02T09:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269936",
    "user": "vbraun"
}
```

Replying to [comment:25 kcrisman]:
> Thanks for trying this out, Nicolas!  You are motivating me to do so this week too.  Question before I start: did this still keep all the notebooks from sagenb in the same state?  (That is, can you still use sage -n with the "original" notebook and nothing has changed?)

Yes, the old sagenb notebooks are only read and never written to.



---

archive/issue_comments_269937.json:
```json
{
    "body": "Replying to [comment:22 nthiery]:\n> Minor point: in some of the worksheets, the outputs appear litteraly as:\n> {{{\n> <html><span class=\"math\">\\newcommand{\\Bold}[1]{\\mathbf{#1}}2</span></html>\n> }}}\n\nThats SageNB works, \"typeset\" output is just plain text output that happens to start with `<html>`, the SageNB format does not have distinguished output types.",
    "created_at": "2016-07-02T09:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269937",
    "user": "vbraun"
}
```

Replying to [comment:22 nthiery]:
> Minor point: in some of the worksheets, the outputs appear litteraly as:
> {{{
> <html><span class="math">\newcommand{\Bold}[1]{\mathbf{#1}}2</span></html>
> }}}

Thats SageNB works, "typeset" output is just plain text output that happens to start with `<html>`, the SageNB format does not have distinguished output types.



---

archive/issue_comments_269938.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-02T09:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269938",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_269939.json:
```json
{
    "body": "I fixed the command line handling, should be good now.",
    "created_at": "2016-07-02T09:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269939",
    "user": "vbraun"
}
```

I fixed the command line handling, should be good now.



---

archive/issue_comments_269940.json:
```json
{
    "body": "I've pulled the latest commit and compiled it (by make). There is no error in the build, but both \n\n```\n./sage --notebook=export --list\n```\n\nand\n\n```\n./sage -sh\nsagenb-export --list\n```\n\nresult in the same error:\n\n```\nTraceback (most recent call last):\n  File \"/home/eric/sage-git/beta8/local/bin/sagenb-export\", line 9, in <module>\n    load_entry_point('sagenb-export==1.0', 'console_scripts', 'sagenb-export')()\n  File \"build/bdist.linux-x86_64/egg/pkg_resources/__init__.py\", line 542, in load_entry_point\n  File \"build/bdist.linux-x86_64/egg/pkg_resources/__init__.py\", line 2569, in load_entry_point\n  File \"build/bdist.linux-x86_64/egg/pkg_resources/__init__.py\", line 2229, in load\n  File \"build/bdist.linux-x86_64/egg/pkg_resources/__init__.py\", line 2235, in resolve\n  File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/cmdline.py\", line 12, in <module>\n    from sagenb_export.sagenb_reader import NotebookSageNB\n  File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/sagenb_reader.py\", line 7, in <module>\n    from sagenb_export.unescape import unescape\n  File \"/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/unescape.py\", line 16, in <module>\n    unescape = html.unescape\nAttributeError: 'module' object has no attribute 'unescape'\n```\n",
    "created_at": "2016-07-02T19:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269940",
    "user": "egourgoulhon"
}
```

I've pulled the latest commit and compiled it (by make). There is no error in the build, but both 

```
./sage --notebook=export --list
```

and

```
./sage -sh
sagenb-export --list
```

result in the same error:

```
Traceback (most recent call last):
  File "/home/eric/sage-git/beta8/local/bin/sagenb-export", line 9, in <module>
    load_entry_point('sagenb-export==1.0', 'console_scripts', 'sagenb-export')()
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 542, in load_entry_point
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2569, in load_entry_point
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2229, in load
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2235, in resolve
  File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/cmdline.py", line 12, in <module>
    from sagenb_export.sagenb_reader import NotebookSageNB
  File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/sagenb_reader.py", line 7, in <module>
    from sagenb_export.unescape import unescape
  File "/home/eric/sage-git/beta8/local/lib/python2.7/site-packages/sagenb_export-1.0-py2.7.egg/sagenb_export/unescape.py", line 16, in <module>
    unescape = html.unescape
AttributeError: 'module' object has no attribute 'unescape'
```




---

archive/issue_comments_269941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-02T23:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269941",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269942.json:
```json
{
    "body": "Yes that was fixed last week though not in the packaged tarball, I made a new release. Should work now.",
    "created_at": "2016-07-02T23:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269942",
    "user": "vbraun"
}
```

Yes that was fixed last week though not in the packaged tarball, I made a new release. Should work now.



---

archive/issue_comments_269943.json:
```json
{
    "body": "Replying to [comment:40 vbraun]:\n> Yes that was fixed last week though not in the packaged tarball, I made a new release. Should work now.\n\nIndeed `./sage --notebook=export --list` works now. Thanks! \nI will test the export on my notebooks and will report here.",
    "created_at": "2016-07-03T17:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269943",
    "user": "egourgoulhon"
}
```

Replying to [comment:40 vbraun]:
> Yes that was fixed last week though not in the packaged tarball, I made a new release. Should work now.

Indeed `./sage --notebook=export --list` works now. Thanks! 
I will test the export on my notebooks and will report here.



---

archive/issue_comments_269944.json:
```json
{
    "body": "I've tested the export on various notebooks (some of them quite long and rich in text). It works very well. Thank you very much for this very desired tool! I've only two minor comments:\n- the displayed mathematical formulas typed between \\[ and \\] in text cells of sws notebooks\n  are not properly rendered in the corresponding Markdown cells of jupyter notebooks: \n  the delimiters \\[ and \\] are interpreted as ordinary brackets and not as LaTeX markers; \n  they have to be replaced manually by $$ for the displayed math to appear correctly.\n- for sws notebooks with the \"Typeset\" button turned on, it would be nice to have the jupyter\n  notebook start by a code cell with \n  {{{\n  %display latex\n  }}}\n  so that all outputs are actually typeset, as requested in the original notebook.",
    "created_at": "2016-07-04T19:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269944",
    "user": "egourgoulhon"
}
```

I've tested the export on various notebooks (some of them quite long and rich in text). It works very well. Thank you very much for this very desired tool! I've only two minor comments:
- the displayed mathematical formulas typed between \[ and \] in text cells of sws notebooks
  are not properly rendered in the corresponding Markdown cells of jupyter notebooks: 
  the delimiters \[ and \] are interpreted as ordinary brackets and not as LaTeX markers; 
  they have to be replaced manually by $$ for the displayed math to appear correctly.
- for sws notebooks with the "Typeset" button turned on, it would be nice to have the jupyter
  notebook start by a code cell with 
  {{{
  %display latex
  }}}
  so that all outputs are actually typeset, as requested in the original notebook.



---

archive/issue_comments_269945.json:
```json
{
    "body": "Replying to [comment:36 vbraun]:\n> Replying to [comment:22 nthiery]:\n> > Minor point: in some of the worksheets, the outputs appear litteraly as:\n> > {{{\n> > <html><span class=\"math\">\\newcommand{\\Bold}[1]{\\mathbf{#1}}2</span></html>\n> > }}}\n> \n> Thats SageNB works, \"typeset\" output is just plain text output that happens to start with `<html>`, the SageNB format does not have distinguished output types. \n\nOk. No big deal, since anyway it's just about the output which can be regenerated. Still it could be an easy addition in case we could easily circumvent the lack of metadata. Would it be simple and reasonably robust to check whether the output text starts with <html>?",
    "created_at": "2016-07-05T06:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269945",
    "user": "nthiery"
}
```

Replying to [comment:36 vbraun]:
> Replying to [comment:22 nthiery]:
> > Minor point: in some of the worksheets, the outputs appear litteraly as:
> > {{{
> > <html><span class="math">\newcommand{\Bold}[1]{\mathbf{#1}}2</span></html>
> > }}}
> 
> Thats SageNB works, "typeset" output is just plain text output that happens to start with `<html>`, the SageNB format does not have distinguished output types. 

Ok. No big deal, since anyway it's just about the output which can be regenerated. Still it could be an easy addition in case we could easily circumvent the lack of metadata. Would it be simple and reasonably robust to check whether the output text starts with <html>?



---

archive/issue_comments_269946.json:
```json
{
    "body": "Various comments.   Some are specific to this and others probably are more about whether Jupyter should be default without some work.  I appreciate any comments more experienced Jupyter folks can make.\n\nIn general I think this branch is a good tool for those intent upon converting (perhaps except the `DATA` issue).  The fairly different nature of the Jupyter notebook (among other things) will note necessarily make it optimal to just convert all worksheets for many people (as opposed to new users who may wish to learn the different interaction from the start), though.\n\n----\nMost important:  When one has a notebook that had data, one gets\n\n```\nNameError: name 'DATA' is not defined\n```\n\nI have no idea how to fix this, or if Jupyter even supports something like a data folder.\n----\nHelp link is good, but unfortunately it doesn't have a local copy of some of the help files (e.g., the \"Notebook help\" gives [this link](http://nbviewer.jupyter.org/github/ipython/ipython/blob/3.x/examples/Notebook/Index.ipynb)).  Since a lot of people (presumably still) occasionally need offline notebooks, that is unfortunate.\n----\n> for sws notebooks with the \"Typeset\" button turned on, it would be nice to have the jupyter notebook start by a code cell with `%display latex` so that all outputs are actually typeset, as requested in the original notebook.\n\nOr even that html output would be recognized as such... that's probably too much to ask and sed through.\n\n\n----\nNo `%auto` - just mentioning, not a killer.\n\n----\n\nIs there a way to close a notebook without turning off the server?  I didn't see something under \"File\".\n----\nDoing a basic interact:\n\n```\nNameError: name 'slider' is not defined\n```\n\n----\nI can't figure out how to do interacts at all, in fact.  Even \n\n```\n@interact\ndef _(n=3):\n    print n^2\n```\n\ngives just some html, which I guess makes sense since that is what it does in sagenb.\n\n----\n\nSilly but necessary requests:\n\n```\n./sage -h\n```\n\nstill gives \n\n```\n  --notebook=[...]    -- start the Sage notebook (valid options are\n                         'default', 'sagenb', and 'jupyter')\n```\n\n\n```\n ./sage -n -h\n```\n\ncould use an example syntax and where to look for full syntax for `export`\n\n----\nWhen I make this change\n\n```\n%display latex\nfor n in range(1,20):\n    (n,sigma(n,2))\n```\n\nit doesn't typeset.  Not sure if this is just different.",
    "created_at": "2016-07-08T01:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269946",
    "user": "kcrisman"
}
```

Various comments.   Some are specific to this and others probably are more about whether Jupyter should be default without some work.  I appreciate any comments more experienced Jupyter folks can make.

In general I think this branch is a good tool for those intent upon converting (perhaps except the `DATA` issue).  The fairly different nature of the Jupyter notebook (among other things) will note necessarily make it optimal to just convert all worksheets for many people (as opposed to new users who may wish to learn the different interaction from the start), though.

----
Most important:  When one has a notebook that had data, one gets

```
NameError: name 'DATA' is not defined
```

I have no idea how to fix this, or if Jupyter even supports something like a data folder.
----
Help link is good, but unfortunately it doesn't have a local copy of some of the help files (e.g., the "Notebook help" gives [this link](http://nbviewer.jupyter.org/github/ipython/ipython/blob/3.x/examples/Notebook/Index.ipynb)).  Since a lot of people (presumably still) occasionally need offline notebooks, that is unfortunate.
----
> for sws notebooks with the "Typeset" button turned on, it would be nice to have the jupyter notebook start by a code cell with `%display latex` so that all outputs are actually typeset, as requested in the original notebook.

Or even that html output would be recognized as such... that's probably too much to ask and sed through.


----
No `%auto` - just mentioning, not a killer.

----

Is there a way to close a notebook without turning off the server?  I didn't see something under "File".
----
Doing a basic interact:

```
NameError: name 'slider' is not defined
```

----
I can't figure out how to do interacts at all, in fact.  Even 

```
@interact
def _(n=3):
    print n^2
```

gives just some html, which I guess makes sense since that is what it does in sagenb.

----

Silly but necessary requests:

```
./sage -h
```

still gives 

```
  --notebook=[...]    -- start the Sage notebook (valid options are
                         'default', 'sagenb', and 'jupyter')
```


```
 ./sage -n -h
```

could use an example syntax and where to look for full syntax for `export`

----
When I make this change

```
%display latex
for n in range(1,20):
    (n,sigma(n,2))
```

it doesn't typeset.  Not sure if this is just different.



---

archive/issue_comments_269947.json:
```json
{
    "body": "Replying to [comment:44 kcrisman]:\n> \n> Is there a way to close a notebook without turning off the server?  I didn't see something under \"File\".\n\nThere is \"Close and halt\" as the last item of the \"File\" menu (under sage 7.3.beta6).\n> When I make this change\n> {{{\n> %display latex\n> for n in range(1,20):\n>     (n,sigma(n,2))\n> }}}\n> it doesn't typeset.  Not sure if this is just different.\n\nEven without `%display latex`, there is no output. To have some output in the notebook, one has to type\n\n```\nfor n in range(1,20):\n    print((n,sigma(n,2)))\n```\n\nto get text output, and\n\n```\nfor n in range(1,20):\n    show((n,sigma(n,2)))\n```\n\nto get displayed output. Note that one can replace `show` by `pretty_print`.",
    "created_at": "2016-07-08T09:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269947",
    "user": "egourgoulhon"
}
```

Replying to [comment:44 kcrisman]:
> 
> Is there a way to close a notebook without turning off the server?  I didn't see something under "File".

There is "Close and halt" as the last item of the "File" menu (under sage 7.3.beta6).
> When I make this change
> {{{
> %display latex
> for n in range(1,20):
>     (n,sigma(n,2))
> }}}
> it doesn't typeset.  Not sure if this is just different.

Even without `%display latex`, there is no output. To have some output in the notebook, one has to type

```
for n in range(1,20):
    print((n,sigma(n,2)))
```

to get text output, and

```
for n in range(1,20):
    show((n,sigma(n,2)))
```

to get displayed output. Note that one can replace `show` by `pretty_print`.



---

archive/issue_comments_269948.json:
```json
{
    "body": "> > Is there a way to close a notebook without turning off the server?  I didn't see something under \"File\".\n> \n> There is \"Close and halt\" as the last item of the \"File\" menu (under sage 7.3.beta6).\n\nYes, I used that, but what does \"halt\" mean?  I thought that meant something more drastic than it does...\n\n> > When I make this change\n> > {{{\n> > %display latex\n> > for n in range(1,20):\n> >     (n,sigma(n,2))\n> > }}}\n> > it doesn't typeset.  Not sure if this is just different.\n\nOkay, that means the behavior here is different than in sagenb (or at least in some version of sagenb).",
    "created_at": "2016-07-08T13:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269948",
    "user": "kcrisman"
}
```

> > Is there a way to close a notebook without turning off the server?  I didn't see something under "File".
> 
> There is "Close and halt" as the last item of the "File" menu (under sage 7.3.beta6).

Yes, I used that, but what does "halt" mean?  I thought that meant something more drastic than it does...

> > When I make this change
> > {{{
> > %display latex
> > for n in range(1,20):
> >     (n,sigma(n,2))
> > }}}
> > it doesn't typeset.  Not sure if this is just different.

Okay, that means the behavior here is different than in sagenb (or at least in some version of sagenb).



---

archive/issue_comments_269949.json:
```json
{
    "body": "Replying to [comment:46 kcrisman]:\n> > > Is there a way to close a notebook without turning off the server?  I didn't see something under \"File\".\n> > \n> > There is \"Close and halt\" as the last item of the \"File\" menu (under sage 7.3.beta6).\n> \n> Yes, I used that, but what does \"halt\" mean?  I thought that meant something more drastic than it does...\n\n\"halt\" simply means \"halt the kernel\", not the server. I agree this is not very explicit...\n\n> \n> > > When I make this change\n> > > {{{\n> > > %display latex\n> > > for n in range(1,20):\n> > >     (n,sigma(n,2))\n> > > }}}\n> > > it doesn't typeset.  Not sure if this is just different.\n> \n> Okay, that means the behavior here is different than in sagenb (or at least in some version of sagenb).\n\nYes indeed.",
    "created_at": "2016-07-08T13:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269949",
    "user": "egourgoulhon"
}
```

Replying to [comment:46 kcrisman]:
> > > Is there a way to close a notebook without turning off the server?  I didn't see something under "File".
> > 
> > There is "Close and halt" as the last item of the "File" menu (under sage 7.3.beta6).
> 
> Yes, I used that, but what does "halt" mean?  I thought that meant something more drastic than it does...

"halt" simply means "halt the kernel", not the server. I agree this is not very explicit...

> 
> > > When I make this change
> > > {{{
> > > %display latex
> > > for n in range(1,20):
> > >     (n,sigma(n,2))
> > > }}}
> > > it doesn't typeset.  Not sure if this is just different.
> 
> Okay, that means the behavior here is different than in sagenb (or at least in some version of sagenb).

Yes indeed.



---

archive/issue_comments_269950.json:
```json
{
    "body": "Okay, after thinking about it, here is my list of \"needs work\".  Some may disagree, open to various outcomes.\n----\n> Most important:  When one has a notebook that had data, one gets\n> {{{\n> NameError: name 'DATA' is not defined\n> }}}\n> I have no idea how to fix this, or if Jupyter even supports something like a data folder.\nThis really breaks some worksheets that depend on it, so there should be some way to bring the data along for the ride. \n----\n> I can't figure out how to do interacts at all, in fact.  Even \n> {{{\n> `@`interact\n> def _(n=3):\n>     print n^2\n> }}}\n> gives just some html, which I guess makes sense since that is what it does in sagenb.\nBut unfortunately it still means they don't work.  I thought someone had implemented this with Jupyter?  Maybe I am remembering something else unrelated.  Anyway (in my view) it sort of defeats the purpose of exporting if there isn't anything equivalent to export to.\n----\n> Silly but necessary requests:\n> {{{\n> ./sage -h\n> }}}\n> still gives \n> {{{\n>   --notebook=[...]    -- start the Sage notebook (valid options are\n>                          'default', 'sagenb', and 'jupyter')\n> }}}\n> {{{\n>  ./sage -n -h\n> }}}\n> could use an example syntax and where to look for full syntax for `export`",
    "created_at": "2016-07-13T15:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269950",
    "user": "kcrisman"
}
```

Okay, after thinking about it, here is my list of "needs work".  Some may disagree, open to various outcomes.
----
> Most important:  When one has a notebook that had data, one gets
> {{{
> NameError: name 'DATA' is not defined
> }}}
> I have no idea how to fix this, or if Jupyter even supports something like a data folder.
This really breaks some worksheets that depend on it, so there should be some way to bring the data along for the ride. 
----
> I can't figure out how to do interacts at all, in fact.  Even 
> {{{
> `@`interact
> def _(n=3):
>     print n^2
> }}}
> gives just some html, which I guess makes sense since that is what it does in sagenb.
But unfortunately it still means they don't work.  I thought someone had implemented this with Jupyter?  Maybe I am remembering something else unrelated.  Anyway (in my view) it sort of defeats the purpose of exporting if there isn't anything equivalent to export to.
----
> Silly but necessary requests:
> {{{
> ./sage -h
> }}}
> still gives 
> {{{
>   --notebook=[...]    -- start the Sage notebook (valid options are
>                          'default', 'sagenb', and 'jupyter')
> }}}
> {{{
>  ./sage -n -h
> }}}
> could use an example syntax and where to look for full syntax for `export`



---

archive/issue_comments_269951.json:
```json
{
    "body": "Jupyter notebooks are a single file and not an opaque directory full of stuff. This is a fundamental design choice and not going to change. About the only thing we can do is prevent people from writing new SageNB notebooks so their data doesn't end up in an evolutionary dead end.\n\nJupyter interacts have a slightly different syntax\n\n```\nfrom ipywidgets import interact, IntSlider \n@interact\ndef _(n=IntSlider(3)):\n    print n^2\n```\n\nOne might write a compatibility layer so that the old SageNB interact syntax still works, thats not something that belongs on this ticket.",
    "created_at": "2016-07-13T18:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269951",
    "user": "vbraun"
}
```

Jupyter notebooks are a single file and not an opaque directory full of stuff. This is a fundamental design choice and not going to change. About the only thing we can do is prevent people from writing new SageNB notebooks so their data doesn't end up in an evolutionary dead end.

Jupyter interacts have a slightly different syntax

```
from ipywidgets import interact, IntSlider 
@interact
def _(n=IntSlider(3)):
    print n^2
```

One might write a compatibility layer so that the old SageNB interact syntax still works, thats not something that belongs on this ticket.



---

archive/issue_comments_269952.json:
```json
{
    "body": "IMHO, it would be nice if the SageNB exporter is shipped with Sage 7.3. It will be useful to many users. The missing features could be postponed to another ticket, except maybe the documentation one (i.e. the `export` option should appear in the output of `./sage -h`). Accordingly, I would suggest to set the ticket to positive review. Do you agree?",
    "created_at": "2016-07-27T15:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269952",
    "user": "egourgoulhon"
}
```

IMHO, it would be nice if the SageNB exporter is shipped with Sage 7.3. It will be useful to many users. The missing features could be postponed to another ticket, except maybe the documentation one (i.e. the `export` option should appear in the output of `./sage -h`). Accordingly, I would suggest to set the ticket to positive review. Do you agree?



---

archive/issue_comments_269953.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-27T19:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269953",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269954.json:
```json
{
    "body": "Done",
    "created_at": "2016-07-27T19:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269954",
    "user": "vbraun"
}
```

Done



---

archive/issue_comments_269955.json:
```json
{
    "body": "(+1 for having it in the next release. however I did not participate in any way to the review)",
    "created_at": "2016-07-27T19:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269955",
    "user": "vdelecroix"
}
```

(+1 for having it in the next release. however I did not participate in any way to the review)



---

archive/issue_comments_269956.json:
```json
{
    "body": "> Jupyter notebooks are a single file and not an opaque directory full of stuff. This is a fundamental design choice and not going to change. About the only thing we can do is prevent people from writing new SageNB notebooks so their data doesn't end up in an evolutionary dead end.\n\nSo in a Jupyter notebook one would include other data in a more 'Pythonic' way?  We'd want fairly good documentation on how to do that (as well as the below).\n\n> \n> Jupyter interacts have a slightly different syntax\n> {{{\n> from ipywidgets import interact, IntSlider \n> `@`interact\n> def _(n=IntSlider(3)):\n>     print n^2\n> }}}\n> One might write a compatibility layer so that the old SageNB interact syntax still works, thats not something that belongs on this ticket.\nI see.  That's too bad that it's not in the global namespace for Sage Jupyter worksheets, perhaps could be addressed there.  Making interacts more difficult to do is a regression (completely irrespective of the whole default or exporting question).  As a different question, would Jupyter notebooks be able to support the \"extended\" syntax that SMC and Sage cell support (e.g. nested interacts)?\n\n> Accordingly, I would suggest to set the ticket to positive review. Do you agree?\n\nI think I'm okay with that as long as it's not (yet) the default notebook for continuing users.  We need a solution of some kind for the above two issues before that.  Please cc: me on any such tickets - once created I think we can set this to positive review, yes.",
    "created_at": "2016-07-28T12:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269956",
    "user": "kcrisman"
}
```

> Jupyter notebooks are a single file and not an opaque directory full of stuff. This is a fundamental design choice and not going to change. About the only thing we can do is prevent people from writing new SageNB notebooks so their data doesn't end up in an evolutionary dead end.

So in a Jupyter notebook one would include other data in a more 'Pythonic' way?  We'd want fairly good documentation on how to do that (as well as the below).

> 
> Jupyter interacts have a slightly different syntax
> {{{
> from ipywidgets import interact, IntSlider 
> `@`interact
> def _(n=IntSlider(3)):
>     print n^2
> }}}
> One might write a compatibility layer so that the old SageNB interact syntax still works, thats not something that belongs on this ticket.
I see.  That's too bad that it's not in the global namespace for Sage Jupyter worksheets, perhaps could be addressed there.  Making interacts more difficult to do is a regression (completely irrespective of the whole default or exporting question).  As a different question, would Jupyter notebooks be able to support the "extended" syntax that SMC and Sage cell support (e.g. nested interacts)?

> Accordingly, I would suggest to set the ticket to positive review. Do you agree?

I think I'm okay with that as long as it's not (yet) the default notebook for continuing users.  We need a solution of some kind for the above two issues before that.  Please cc: me on any such tickets - once created I think we can set this to positive review, yes.



---

archive/issue_comments_269957.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-28T12:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269957",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_269958.json:
```json
{
    "body": "Replying to [comment:52 vbraun]:\n> Done\nThanks!\n\n>>Accordingly, I would suggest to set the ticket to positive review. Do you agree?\n>I think I'm okay with that as long as it's not (yet) the default notebook for continuing users.\nOK, very good.",
    "created_at": "2016-07-28T12:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269958",
    "user": "egourgoulhon"
}
```

Replying to [comment:52 vbraun]:
> Done
Thanks!

>>Accordingly, I would suggest to set the ticket to positive review. Do you agree?
>I think I'm okay with that as long as it's not (yet) the default notebook for continuing users.
OK, very good.



---

archive/issue_comments_269959.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-28T17:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269959",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_269960.json:
```json
{
    "body": "Don't forget the followup tickets! :-)",
    "created_at": "2016-07-29T13:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19640#issuecomment-269960",
    "user": "kcrisman"
}
```

Don't forget the followup tickets! :-)
