# Issue 27893: MR28: Add orthographic camera option to three.js renderer.

Issue created by migration from https://trac.sagemath.org/ticket/28130

Original creator: galois

Original creation time: 2019-07-07 22:06:50

CC:  â€‹egourgoulhon

Joshua Campbell ([`@`jcamp0x2a](https://gitlab.com/jcamp0x2a)) opened a merge request at https://gitlab.com/sagemath/sage/merge_requests/28:
----

```markdown
I've found such camera views useful in the past for comparing the sizes of near and far objects in 3D scenes, and I recently found myself wanting to do something similar when plotting in Sage, so I took a stab at implementing it. I hope my changes prove useful to others.

Please let me know if you have further suggestions or encounter any problems, and I'd be happy to look into addressing them. Thank you for your time reviewing this MR.
```







---

Comment by paulmasson created at 2019-07-08 21:20:11

Most excellent! This a feature I wouldn't have thought to add any time soon, so thanks for putting this together. Thanks also for keeping the coding style consistent in the template.

Before setting this to positive review, I'm curious about the handling of sizes of points. As I recall I divided the size coming from Sage by 100 simply to produce something about the right visual size. Did you remove that factor for pretty much the same reason or is there more to it?

CCing Eric in the event he'd like to comment on the behavior of the new projection.


---

Comment by paulmasson created at 2019-07-08 21:20:11

Changing keywords from "" to "threejs".


---

Comment by paulmasson created at 2019-07-08 21:20:11

Changing component from PLEASE CHANGE to graphics.


---

Comment by @jcamp0x2a created at 2019-07-09 20:07:32

Thanks for taking a look at this!

Yes, I noticed that with the orthographic projection the points were exceptionally small, almost impossible to see. I believe this is because the point size isn't scaled based on camera distance as with perspective (as per the [Three.js docs](https://threejs.org/docs/index.html#api/en/materials/PointsMaterial.sizeAttenuation)). Removing the division by 100 and using the original size seemed to produce points that were roughly the same size as those using perspective projection at reasonable camera distances.

Replying to [comment:1 paulmasson]:
> Most excellent! This a feature I wouldn't have thought to add any time soon, so thanks for putting this together. Thanks also for keeping the coding style consistent in the template.
> 
> Before setting this to positive review, I'm curious about the handling of sizes of points. As I recall I divided the size coming from Sage by 100 simply to produce something about the right visual size. Did you remove that factor for pretty much the same reason or is there more to it?
> 
> CCing Eric in the event he'd like to comment on the behavior of the new projection.


---

Comment by paulmasson created at 2019-07-09 21:54:54

After looking at the code some more, we don't need to test whether the `projection` value is supported in the JavaScript template, since that's already being done in Python. Please remove that test and warning from the `createCamera()` function.

Please also indent the second line evaluating the variable `adjust` (currently line 344) at bit more for legibility. Thanks!


---

Comment by galois created at 2019-07-10 00:11:34

New commits added to merge request.  I updated the commit SHA-1.  New commits:


---

Comment by @jcamp0x2a created at 2019-07-10 00:15:28

No problem, I've pushed a couple changes that address both of those points, and I did a quick sanity check re-running a few of my plots to make sure everything's still working fine.

Replying to [comment:3 paulmasson]:
> After looking at the code some more, we don't need to test whether the `projection` value is supported in the JavaScript template, since that's already being done in Python. Please remove that test and warning from the `createCamera()` function.
> 
> Please also indent the second line evaluating the variable `adjust` (currently line 344) at bit more for legibility. Thanks!


---

Comment by paulmasson created at 2019-07-10 00:46:04

Thanks Joshua. Looks good!

At some point we'll want to add additional enhancements like specifying materials and lighting. Since you clearly are familiar with Three.js, feel free to think about ways to implement such options.

In my experience, after a major change like this it's good to wait until it is merged in an upcoming beta and then work off the most current development branch. That avoids merge conflicts and speeds the build process for the reviewer.


---

Comment by paulmasson created at 2019-07-10 00:46:04

Changing type from PLEASE CHANGE to enhancement.


---

Comment by paulmasson created at 2019-07-10 00:46:04

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-07-11 18:54:02

Resolution: fixed


---

Comment by embray created at 2019-07-11 19:46:57

Replying to [comment:6 paulmasson]:
> Thanks Joshua. Looks good!
> 
> At some point we'll want to add additional enhancements like specifying materials and lighting. Since you clearly are familiar with Three.js, feel free to think about ways to implement such options.

We really need a good way to specify materials for ThreeJS models.  This would be needed to properly fix #22408#comment:38
