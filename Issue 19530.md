# Issue 19530: rpath trouble building ATLAS

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-12-23 13:55:45

CC:  vbraun

ATLAS builds lots of executables during the build/tuning process. Not all these use rpath correctly. This causes in particular problems with a GCC installed in `$SAGE_LOCAL`:

```
./xf77test: error while loading shared libraries: libgfortran.so.3: cannot open shared object file: No such file or directory
```



---

Comment by jdemeyer created at 2015-12-23 13:57:58

Changing priority from blocker to major.


---

Comment by jdemeyer created at 2015-12-23 14:01:37

Are there any obstructions to setting `LD_LIBRARY_PATH` just for the build process?


---

Comment by vbraun created at 2015-12-23 15:44:59

If gcc were installed in a separate directory then that would be fine, but since we install its libraries next to a huge pile of unrelated libraries we'll just run into the conflicts again. A cleaner solution is probably to use an atlas-specific compiler wrapper since atlas is at least pretty good about specifying the compiler used.


---

Comment by vbraun created at 2015-12-23 15:52:41

It is a regression in the new ATLAS, apparently


---

Comment by jdemeyer created at 2015-12-24 09:06:47

New commits:


---

Comment by jdemeyer created at 2015-12-24 09:17:00

Changing status from new to needs_review.


---

Comment by vbraun created at 2015-12-24 10:52:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-12-24 10:52:23

lgtm


---

Comment by vbraun created at 2015-12-24 23:46:34

Resolution: fixed
