# Issue 19530: rpath trouble building ATLAS

archive/issues_019530.json:
```json
{
    "body": "CC:  vbraun\n\nATLAS builds lots of executables during the build/tuning process. Not all these use rpath correctly. This causes in particular problems with a GCC installed in `$SAGE_LOCAL`:\n\n```\n./xf77test: error while loading shared libraries: libgfortran.so.3: cannot open shared object file: No such file or directory\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19767\n\n",
    "created_at": "2015-12-23T13:55:45Z",
    "labels": [
        "packages: standard",
        "blocker",
        "bug"
    ],
    "title": "rpath trouble building ATLAS",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19530",
    "user": "jdemeyer"
}
```
CC:  vbraun

ATLAS builds lots of executables during the build/tuning process. Not all these use rpath correctly. This causes in particular problems with a GCC installed in `$SAGE_LOCAL`:

```
./xf77test: error while loading shared libraries: libgfortran.so.3: cannot open shared object file: No such file or directory
```


Issue created by migration from https://trac.sagemath.org/ticket/19767





---

archive/issue_comments_268348.json:
```json
{
    "body": "Changing priority from blocker to major.",
    "created_at": "2015-12-23T13:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268348",
    "user": "jdemeyer"
}
```

Changing priority from blocker to major.



---

archive/issue_comments_268349.json:
```json
{
    "body": "Are there any obstructions to setting `LD_LIBRARY_PATH` just for the build process?",
    "created_at": "2015-12-23T14:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268349",
    "user": "jdemeyer"
}
```

Are there any obstructions to setting `LD_LIBRARY_PATH` just for the build process?



---

archive/issue_comments_268350.json:
```json
{
    "body": "If gcc were installed in a separate directory then that would be fine, but since we install its libraries next to a huge pile of unrelated libraries we'll just run into the conflicts again. A cleaner solution is probably to use an atlas-specific compiler wrapper since atlas is at least pretty good about specifying the compiler used.",
    "created_at": "2015-12-23T15:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268350",
    "user": "vbraun"
}
```

If gcc were installed in a separate directory then that would be fine, but since we install its libraries next to a huge pile of unrelated libraries we'll just run into the conflicts again. A cleaner solution is probably to use an atlas-specific compiler wrapper since atlas is at least pretty good about specifying the compiler used.



---

archive/issue_comments_268351.json:
```json
{
    "body": "It is a regression in the new ATLAS, apparently",
    "created_at": "2015-12-23T15:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268351",
    "user": "vbraun"
}
```

It is a regression in the new ATLAS, apparently



---

archive/issue_comments_268352.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-12-24T09:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268352",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_268353.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-24T09:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268353",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_268354.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-24T10:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268354",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_268355.json:
```json
{
    "body": "lgtm",
    "created_at": "2015-12-24T10:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268355",
    "user": "vbraun"
}
```

lgtm



---

archive/issue_comments_268356.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-24T23:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19530#issuecomment-268356",
    "user": "vbraun"
}
```

Resolution: fixed
