# Issue 23554: Make pynac build with Python 3

archive/issues_023554.json:
```json
{
    "body": "CC:  @kiwifb @fchapoton\n\nAs discussed in the past (e.g. #15530) pynac does not work, at least at one time with Python 3.  #18537 apparently at least got it to build with Python 3 headers, but nothing working beyond that.  When pynac is built in Sage, even with `SAGE_PYTHON3=yes`, it builds pynac against Python 2.\n\nThis breaks horribly more or less as soon as pynac is invoked in Sage with Python 3, because the way libpynac works it assumes it's being loaded into an already initialized Python interpreter--well we do have a Python 3 interpreter running, but the Python 2 interpreter it's trying to use is not initialized.  And in any case I don't want to think about what will happen if we try to pass `PyObject *`s between different Python interpreters.  Obviously pynac should be made to work with Python 3.  Somehow I couldn't find an existing ticket specifically for this though.\n\nIt looks like some work has already done to make pynac work with Python 3, but Sage doesn't seem to be using it properly yet.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23791\n\n",
    "created_at": "2017-09-06T11:43:59Z",
    "labels": [
        "python3",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Make pynac build with Python 3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23554",
    "user": "@embray"
}
```
CC:  @kiwifb @fchapoton

As discussed in the past (e.g. #15530) pynac does not work, at least at one time with Python 3.  #18537 apparently at least got it to build with Python 3 headers, but nothing working beyond that.  When pynac is built in Sage, even with `SAGE_PYTHON3=yes`, it builds pynac against Python 2.

This breaks horribly more or less as soon as pynac is invoked in Sage with Python 3, because the way libpynac works it assumes it's being loaded into an already initialized Python interpreter--well we do have a Python 3 interpreter running, but the Python 2 interpreter it's trying to use is not initialized.  And in any case I don't want to think about what will happen if we try to pass `PyObject *`s between different Python interpreters.  Obviously pynac should be made to work with Python 3.  Somehow I couldn't find an existing ticket specifically for this though.

It looks like some work has already done to make pynac work with Python 3, but Sage doesn't seem to be using it properly yet.

Issue created by migration from https://trac.sagemath.org/ticket/23791





---

archive/issue_comments_329979.json:
```json
{
    "body": "Oh, I think this was actually fixed by #23325.  Confirming...",
    "created_at": "2017-09-06T12:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23554#issuecomment-329979",
    "user": "@embray"
}
```

Oh, I think this was actually fixed by #23325.  Confirming...



---

archive/issue_comments_329980.json:
```json
{
    "body": "Yes, #23325 fixed it--libpynac links with libpython3.6 now.  I didn't see that ticket since it was closed, but not really \"merged\" into the \"develop\" branch.  Sorry for the noise.",
    "created_at": "2017-09-06T12:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23554#issuecomment-329980",
    "user": "@embray"
}
```

Yes, #23325 fixed it--libpynac links with libpython3.6 now.  I didn't see that ticket since it was closed, but not really "merged" into the "develop" branch.  Sorry for the noise.



---

archive/issue_comments_329981.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2017-09-06T12:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23554#issuecomment-329981",
    "user": "@embray"
}
```

Resolution: worksforme
