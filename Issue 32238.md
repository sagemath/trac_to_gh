# Issue 32238: Faster perfect matchings iterator

Issue created by migration from https://trac.sagemath.org/ticket/32475

Original creator: dcoudert

Original creation time: 2021-09-05 17:07:11

CC:  tscrim

An iterator over all perfect matchings of a graph has been added in #20061.
In this ticket, we improve it using ideas from #17132#comment:28

Before

```
sage: G = graphs.ChvatalGraph()                                                                                                                    
sage: len(list(G.perfect_matchings()))                                                                                                             
52
sage: %timeit len(list(G.perfect_matchings()))                                                                                                     
15.7 ms ± 779 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: G = graphs.CompleteGraph(8)                                                                                                                  
sage: len(list(G.perfect_matchings()))                                                                                                             
105
sage: %timeit len(list(G.perfect_matchings()))                                                                                                     
11.8 ms ± 287 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
```


With this ticket

```
sage: G = graphs.ChvatalGraph()                                                                                                                    
sage: len(list(G.perfect_matchings()))                                                                                                             
52
sage: %timeit len(list(G.perfect_matchings()))                                                                                                     
2.49 ms ± 100 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: G = graphs.CompleteGraph(8)                                                                                                                  
sage: len(list(G.perfect_matchings()))                                                                                                             
105
sage: %timeit len(list(G.perfect_matchings()))                                                                                                     
2.58 ms ± 137 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
```



---

Comment by dcoudert created at 2021-09-05 17:08:36

Changing status from new to needs_review.


---

Comment by dcoudert created at 2021-09-05 17:08:36

New commits:


---

Comment by tscrim created at 2021-09-06 06:27:54

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-09-06 06:27:54

That is quite a good speed improvement. LGTM.


---

Comment by dcoudert created at 2021-09-06 06:38:21

Thank you.


---

Comment by vbraun created at 2021-09-19 09:58:27

Resolution: fixed
