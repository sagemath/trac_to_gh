# Issue 17656: Incorrect decomposition returned by Graph.treewidth

Issue created by migration from https://trac.sagemath.org/ticket/17893

Original creator: ncohen

Original creation time: 2015-03-04 16:17:58

CC:  dcoudert slelievre

As reported on asksage [1], the function `Graph.treewidth` can return incorrect tree decompositions.

The computations are actually done right (the width returned is correct), but my attempts to "simplify" the tree while it is being built simplified.. a bit too much.

The way it is done now is a bit more correct, though a tad more ressource-consuming. Nothing important, as the post-processing is infiinitely cheaper than the actual solving anyway.

Nathann

[1] http://ask.sagemath.org/question/26011/treewidth/


---

Comment by ncohen created at 2015-03-04 16:23:38

New commits:


---

Comment by ncohen created at 2015-03-04 16:23:38

Changing status from new to needs_review.


---

Comment by chapoton created at 2015-03-05 18:50:21

3 failing doctests


---

Comment by chapoton created at 2015-03-05 18:50:21

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-03-06 09:26:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-03-06 09:27:39

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-03-06 09:27:39

> 3 failing doctests

Sorry about that.

I just rebased the patch over the latest beta and added a commit to fix that.

It is a rather good news, by the way: it means that the decompositions are smaller than previously.

Nathann


---

Comment by chapoton created at 2015-03-06 11:07:30

ok, thanks.


---

Comment by chapoton created at 2015-03-06 11:07:30

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-03-06 12:08:31

Thaaaaaaaaanks for the review `;-)))`

Nathann

P.S. : Do you have any ticket I could review ?


---

Comment by chapoton created at 2015-03-06 12:22:25

Well, #17901 should be very easy..


---

Comment by ncohen created at 2015-03-06 12:52:24

HMmmm... Well, I am already having a very hard time checking that `q=A([1,2,3])` actually calls the `.check` function. Also, it seems that the `AffinePermutationGroup` group be a deprecated import, as we try to store them all in `groups.affine.*`. Anyway, first there is your patch to deal with `^^;`

Nathann


---

Comment by vbraun created at 2015-03-08 22:01:07

Resolution: fixed
