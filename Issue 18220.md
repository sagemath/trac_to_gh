# Issue 18220: Fix sage-download-file --print-fastest-mirror

Issue created by migration from https://trac.sagemath.org/ticket/18457

Original creator: jhpalmieri

Original creation time: 2015-05-19 21:39:30

Trac #15642 broke the command `sage-download-file --print-fastest-mirror`: that command returns

```
Downloading the Sage mirror list
Searching fastest mirror
  162ms: http://echidna.maths.usyd.edu.au/sage/
  293ms: http://ftp.leg.uct.ac.za/pub/packages/sage/
  137ms: http://ftp.riken.jp/sagemath/
  150ms: http://ftp.tsukuba.wide.ad.jp/software/sage/
  142ms: http://ftp.yz.yamagata-u.ac.jp/pub/math/sage/
  199ms: http://linorg.usp.br/sage/
  162ms: http://mirror.aarnet.edu.au/pub/sage/
  175ms: http://mirror.switch.ch/mirror/sagemath/
  370ms: http://mirror.ufs.ac.za/sagemath/
  210ms: http://mirror.yandex.ru/mirrors/sage.math.washington.edu/
  193ms: http://mirrors.fe.up.pt/pub/sage/
   74ms: http://mirrors.mit.edu/sage/
  216ms: http://mirrors.ustc.edu.cn/sagemath/
  205ms: http://sagemath.c3sl.ufpr.br/
  673ms: http://sagemath.mirror.ac.za/
  370ms: http://sagemath.polytechnic.edu.na/
  171ms: http://www-ftp.lip6.fr/pub/math/sagemath/
    8ms: http://www.cecm.sfu.ca/sage/
  171ms: http://www.mirrorservice.org/sites/www.sagemath.org/
Fastest mirror: http://www.cecm.sfu.ca/sage/
http://www.cecm.sfu.ca/sage/
```

rather than just the URL for a single server (i.e., the last line in this output).


---

Comment by jhpalmieri created at 2015-05-19 21:46:36

New commits:


---

Comment by jhpalmieri created at 2015-05-19 21:46:36

Changing status from new to needs_review.


---

Comment by vbraun created at 2015-05-19 22:06:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-19 22:06:31

I see, fails if the mirror list hasn't been downloaded yet. Passing verbose=bool flags around is kind of fugly but we can refactor it later


---

Comment by jhpalmieri created at 2015-05-19 22:33:40

Replying to [comment:3 vbraun]:
> I see, fails if the mirror list hasn't been downloaded yet. 

Right.

> Passing verbose=bool flags around is kind of fugly but we can refactor it later

Yes, I thought briefly about some other choices, like redirecting output temporarily, but this was easy to do, and it's clear what's going on.


---

Comment by vbraun created at 2015-05-20 17:45:16

Resolution: fixed
