# Issue 16444: Random doctest failures in sage/rings/algebraic_closure_finite_field.py

archive/issues_016444.json:
```json
{
    "body": "CC:  @pjbruin @defeo @videlec @miguelmarco jpflori\n\nThis is caused by #15390. \n\nFirst of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.\n\nThe following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=8)\n....:         assert p.factor().prod() == p, p.factor()\n....:     \n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n<ipython-input-22-f31a401fb53b> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=Integer(8))\n----> 3         assert p.factor().prod() == p, p.factor()\n      4 \n\nAssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)\n```\n\n\nOn a related note, a random element can be zero:\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=randint(2,8))\n....:         assert p.factor().prod() == p, p\n....:     \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-db4aacba08d5> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))\n----> 3         assert p.factor().prod() == p, p\n      4 \n\n/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()\n\nValueError: factorization of 0 not defined\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16681\n\n",
    "created_at": "2014-07-19T04:54:37Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Random doctest failures in sage/rings/algebraic_closure_finite_field.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16444",
    "user": "https://github.com/vbraun"
}
```
CC:  @pjbruin @defeo @videlec @miguelmarco jpflori

This is caused by #15390. 

First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.

The following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=8)
....:         assert p.factor().prod() == p, p.factor()
....:     
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-22-f31a401fb53b> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=Integer(8))
----> 3         assert p.factor().prod() == p, p.factor()
      4 

AssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)
```


On a related note, a random element can be zero:

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=randint(2,8))
....:         assert p.factor().prod() == p, p
....:     
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-db4aacba08d5> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))
----> 3         assert p.factor().prod() == p, p
      4 

/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()

ValueError: factorization of 0 not defined
```


Issue created by migration from https://trac.sagemath.org/ticket/16681





---

archive/issue_comments_215881.json:
```json
{
    "body": "Hi,\n\nNice catch! I am on it.\n\nFor the \"related note\", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.\n\nVincent",
    "created_at": "2014-07-19T10:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215881",
    "user": "https://github.com/videlec"
}
```

Hi,

Nice catch! I am on it.

For the "related note", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.

Vincent



---

archive/issue_comments_215882.json:
```json
{
    "body": "I do not understand...\n\n```\nsage: K = GF(5).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: while True:\n....:     p = R.random_element(degree=(2,10))\n....:     fac = p.factor()\n....:     assert fac.prod() == p, (p,fac)\nTraceback (most recent call last):\n...\nAssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))\nsage: p == fac.prod()          # fine\nFalse\nsage: p.factor() == fac        # What!?\nFalse\nsage: p.factor().prod() == p   # What again!?\nTrue\n```\n",
    "created_at": "2014-07-19T10:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215882",
    "user": "https://github.com/videlec"
}
```

I do not understand...

```
sage: K = GF(5).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: while True:
....:     p = R.random_element(degree=(2,10))
....:     fac = p.factor()
....:     assert fac.prod() == p, (p,fac)
Traceback (most recent call last):
...
AssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))
sage: p == fac.prod()          # fine
False
sage: p.factor() == fac        # What!?
False
sage: p.factor().prod() == p   # What again!?
True
```




---

archive/issue_comments_215883.json:
```json
{
    "body": "The factorization is not cached but recomputed every time. Sometimes, it is wrong.",
    "created_at": "2014-07-19T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215883",
    "user": "https://github.com/vbraun"
}
```

The factorization is not cached but recomputed every time. Sometimes, it is wrong.



---

archive/issue_comments_215884.json:
```json
{
    "body": "Changing keywords from \"\" to \"random_fail\".",
    "created_at": "2014-07-25T05:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215884",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "random_fail".



---

archive/issue_comments_215885.json:
```json
{
    "body": "All right. The root finding algorithm from #15390 was wrong.\n\nVincent\n----\nNew commits:",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215885",
    "user": "https://github.com/videlec"
}
```

All right. The root finding algorithm from #15390 was wrong.

Vincent
----
New commits:



---

archive/issue_comments_215886.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215886",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_215887.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-24T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215887",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_215888.json:
```json
{
    "body": "lgtm",
    "created_at": "2014-08-24T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215888",
    "user": "https://github.com/vbraun"
}
```

lgtm



---

archive/issue_comments_215889.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-24T20:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215889",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_215890.json:
```json
{
    "body": "\n```\nsage -t src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    ev = M.eigenvalues(); ev\nExpected:\n    [2*z3, 2*z3 + 2, 2*z3 + 1]\nGot:\n    [2*z3 + 1, 2*z3 + 2, 2*z3]\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    e.as_finite_field_element()\nExpected:\n    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\nGot:\n    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\n**********************************************************************\n1 item had failures:\n   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\n    [2116 tests, 2 failures, 8.52 s]\n----------------------------------------------------------------------\nsage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 9.1 seconds\n    cpu time: 8.4 seconds\n    cumulative wall time: 8.5 seconds\n```\n",
    "created_at": "2014-08-24T20:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215890",
    "user": "https://github.com/vbraun"
}
```


```
sage -t src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    ev = M.eigenvalues(); ev
Expected:
    [2*z3, 2*z3 + 2, 2*z3 + 1]
Got:
    [2*z3 + 1, 2*z3 + 2, 2*z3]
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    e.as_finite_field_element()
Expected:
    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
Got:
    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
**********************************************************************
1 item had failures:
   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
    [2116 tests, 2 failures, 8.52 s]
----------------------------------------------------------------------
sage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 9.1 seconds
    cpu time: 8.4 seconds
    cumulative wall time: 8.5 seconds
```




---

archive/issue_comments_215891.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-24T20:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215892.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-24T20:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215892",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_215893.json:
```json
{
    "body": "Might be a good idea to sort the eigenvalues in `.eigenvalues()`...\n\nVincent",
    "created_at": "2014-08-24T20:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215893",
    "user": "https://github.com/videlec"
}
```

Might be a good idea to sort the eigenvalues in `.eigenvalues()`...

Vincent



---

archive/issue_events_015940.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-08-25T10:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16444#event-15940"
}
```



---

archive/issue_comments_215894.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-25T10:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215894",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_215895.json:
```json
{
    "body": "Got another random failure with this ticket merged:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\nFailed example:\n    for d in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\n    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n    [175 tests, 1 failure, 5.03 s]\n```\n",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215895",
    "user": "https://github.com/vbraun"
}
```

Got another random failure with this ticket merged:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
Failed example:
    for d in xrange(10):
        p = R.random_element(degree=randint(2,8))
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
    [175 tests, 1 failure, 5.03 s]
```




---

archive/issue_comments_215896.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215896",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_215897.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215897",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_015941.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-08-25T20:48:15Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16444#event-15941"
}
```



---

archive/issue_comments_215898.json:
```json
{
    "body": "Hello,\n\nAs said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.\n\nNevertheless, the algorithm which I implemented at a first glance was wrong so:\n- either I move the branch to another ticket\n- or I open a new ticket for the bug about factorization of polynomials over finite fields\n\nVincent",
    "created_at": "2014-08-26T22:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215898",
    "user": "https://github.com/videlec"
}
```

Hello,

As said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.

Nevertheless, the algorithm which I implemented at a first glance was wrong so:
- either I move the branch to another ticket
- or I open a new ticket for the bug about factorization of polynomials over finite fields

Vincent



---

archive/issue_comments_215899.json:
```json
{
    "body": "Either way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.",
    "created_at": "2014-08-27T10:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215899",
    "user": "https://github.com/vbraun"
}
```

Either way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.



---

archive/issue_comments_215900.json:
```json
{
    "body": "The new ticket to track the bug is #16885. It is in critical, I am not sure this is right.\n\nFor the current branch, what about the random failure? Should I tag the test with a `#bug`?\n\nVincent",
    "created_at": "2014-08-27T10:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215900",
    "user": "https://github.com/videlec"
}
```

The new ticket to track the bug is #16885. It is in critical, I am not sure this is right.

For the current branch, what about the random failure? Should I tag the test with a `#bug`?

Vincent



---

archive/issue_comments_215901.json:
```json
{
    "body": "Let's keep the test as it is for now, hopefully you can figure out what is wrong ;-)",
    "created_at": "2014-08-27T10:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215901",
    "user": "https://github.com/vbraun"
}
```

Let's keep the test as it is for now, hopefully you can figure out what is wrong ;-)



---

archive/issue_comments_215902.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-27T10:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215902",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_215903.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-27T10:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215903",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_215904.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-08-27T10:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215904",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_215905.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-28T18:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215905",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_015942.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-08-28T18:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16444#event-15942"
}
```



---

archive/issue_comments_215906.json:
```json
{
    "body": "For the record, I just got this error once, with 6.4.beta 2:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi\nal\nFailed example:\n    for _ in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        for r in p.roots(K, multiplicities=False):\n            assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>\", line 4, in <module>\n        assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\n    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial\n    [175 tests, 1 failure, 5.58 s]\n```\n",
    "created_at": "2014-09-03T12:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215906",
    "user": "https://github.com/nthiery"
}
```

For the record, I just got this error once, with 6.4.beta 2:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi
al
Failed example:
    for _ in xrange(10):
        p = R.random_element(degree=randint(2,8))
        for r in p.roots(K, multiplicities=False):
            assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>", line 4, in <module>
        assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial
    [175 tests, 1 failure, 5.58 s]
```




---

archive/issue_comments_215907.json:
```json
{
    "body": "Did you try with the fix from #16885?",
    "created_at": "2014-09-03T12:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215907",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Did you try with the fix from #16885?



---

archive/issue_comments_215908.json:
```json
{
    "body": "No. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.",
    "created_at": "2014-09-03T12:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215908",
    "user": "https://github.com/nthiery"
}
```

No. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.



---

archive/issue_comments_215909.json:
```json
{
    "body": "Don't really know, it somehow looks related...\n#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.",
    "created_at": "2014-09-03T13:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215909",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Don't really know, it somehow looks related...
#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.



---

archive/issue_comments_215910.json:
```json
{
    "body": "Ok. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.",
    "created_at": "2014-09-03T13:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16444#issuecomment-215910",
    "user": "https://github.com/nthiery"
}
```

Ok. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.
