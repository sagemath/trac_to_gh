# Issue 30595: Connect RealSet to sage.manifolds

Issue created by migration from https://trac.sagemath.org/ticket/30832

Original creator: mkoeppe

Original creation time: 2020-10-26 20:09:41

CC:  @mjungmath egourgoulhon tscrim

Instances of `RealSet` that are finite unions of open intervals should be connected in some way to `sage.manifolds`, in particular to `OpenInterval`.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-05-29 19:52:25

Last 10 new commits:


---

Comment by mkoeppe created at 2021-05-29 19:52:25

Changing status from new to needs_review.


---

Comment by @mjungmath created at 2021-05-29 21:04:34

Restricted to open intervals (not closures), this is nothing but the forgetful functor from manifolds into sets. Perhaps it is a good idea to add this functor somehow?

Other than that it looks good! Let's wait for the patchbot.


---

Comment by mkoeppe created at 2021-05-29 22:06:57

... or rather from manifolds to topological spaces (see #31877).

Do we have forgetful functors anywhere already?


---

Comment by mkoeppe created at 2021-05-30 02:25:38

We may also want to consider 
- adding a method `RealSet.as_manifold_subset`
- extending the `RealSet` constructors (default constructor and `RealSet.open` etc.) so that they can build manifold objects; for example if `structure` or `name` is passed; then perhaps the global bindings `RealLine` and `OpenInterval` can be deprecated.


---

Comment by @mjungmath created at 2021-05-30 09:16:35

Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.


---

Comment by @mjungmath created at 2021-05-30 09:23:52

Moreover, you represented closed or clopen intervals by a topological closure, which is fine for now. But as soon as we have manifolds with boundary, we probably want them to be represented by those objects/instances instead (or as well).


---

Comment by @mjungmath created at 2021-05-30 09:42:19

Changing status from needs_review to positive_review.


---

Comment by @mjungmath created at 2021-05-30 09:42:19

LGTM


---

Comment by mkoeppe created at 2021-05-30 16:55:23

Replying to [comment:9 gh-mjungmath]:
> Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.

Yes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.


---

Comment by mkoeppe created at 2021-05-30 16:56:07

Thanks for the review!


---

Comment by @mjungmath created at 2021-05-30 18:08:42

Replying to [comment:12 mkoeppe]:
> Replying to [comment:9 gh-mjungmath]:
> > Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.
> 
> Yes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.

That is not what I mean. There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.


---

Comment by mkoeppe created at 2021-05-30 18:50:47

Replying to [comment:14 gh-mjungmath]:
> There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.

If you create `OpenInterval` instances with the same `ambient_interval` set, then you can take unions.


```
sage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())
sage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())
sage: I02.union(I13)
Open subset (0, 2)_union_(1, 3) of the Real number line R
```



---

Comment by @mjungmath created at 2021-05-30 19:03:51

Right, but


```
sage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())
sage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())
sage: U = I02.union(I13)
sage: RealSet(U)
```


won't work, no?


---

Comment by mkoeppe created at 2021-05-30 19:05:08

Good catch...


---

Comment by mkoeppe created at 2021-05-30 19:16:22

Folllow up in #31878.


---

Comment by tscrim created at 2021-05-30 23:05:45

Replying to [comment:7 mkoeppe]:
> ... or rather from manifolds to topological spaces (see #31877).
> 
> Do we have forgetful functors anywhere already?

`categories.functor.ForgetfulFunctor`


---

Comment by git created at 2021-06-19 18:24:21

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by git created at 2021-06-19 18:24:21

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2021-06-19 18:24:37

Trivial merge with updated dependency


---

Comment by mkoeppe created at 2021-06-19 18:24:37

Changing status from needs_review to positive_review.


---

Comment by git created at 2021-06-19 21:10:59

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2021-06-19 21:10:59

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2021-06-19 21:11:19

Another trivial merge to remove a merge conflict


---

Comment by mkoeppe created at 2021-06-19 21:24:25

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-07-01 20:45:09

Resolution: fixed
