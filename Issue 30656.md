# Issue 30656: Replace sage autodoc extension by built-in one

archive/issues_030656.json:
```json
{
    "body": "CC:  @jhpalmieri @kwankyu\n\nReplaces sage's custom autodoc extension by the built-in one. \n\nFor some reason, my local installation only wants to build the documentation for the manifold package. For this, I verified that the newly generated documentation is on par with the old one. This was the case except for parameters added with the ``@`output` decorator. This should be fixed with #30884.\nPlease let me know if there are other customization in the sage autodoc file except for the `sage_wraps` decorator support.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30893\n\n",
    "created_at": "2020-11-11T16:17:25Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Replace sage autodoc extension by built-in one",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30656",
    "user": "@tobiasdiez"
}
```
CC:  @jhpalmieri @kwankyu

Replaces sage's custom autodoc extension by the built-in one. 

For some reason, my local installation only wants to build the documentation for the manifold package. For this, I verified that the newly generated documentation is on par with the old one. This was the case except for parameters added with the ``@`output` decorator. This should be fixed with #30884.
Please let me know if there are other customization in the sage autodoc file except for the `sage_wraps` decorator support.

Issue created by migration from https://trac.sagemath.org/ticket/30893





---

archive/issue_comments_438198.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-11T16:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438198",
    "user": "@tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438199.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T16:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438199",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438200.json:
```json
{
    "body": "Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.\n\nI think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.",
    "created_at": "2020-11-11T18:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438200",
    "user": "@jhpalmieri"
}
```

Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.

I think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.



---

archive/issue_comments_438201.json:
```json
{
    "body": "My understanding is that one of the main reasons for using our own version of `autodoc` is to be able to include Cython files in the documentation, and this requires customization of the introspection code. So that is something you should test when experimenting with this: how is autodoc working on Cython files?",
    "created_at": "2020-11-11T18:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438201",
    "user": "@jhpalmieri"
}
```

My understanding is that one of the main reasons for using our own version of `autodoc` is to be able to include Cython files in the documentation, and this requires customization of the introspection code. So that is something you should test when experimenting with this: how is autodoc working on Cython files?



---

archive/issue_comments_438202.json:
```json
{
    "body": "Thanks for the input `@`jhpalmieri.\n\n> Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.\n\nThat should be fixed now.\n\n> I think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.\n\nI tried rebasing first, but there were quite a few changes which made it rather difficult. So I thought replacing it completely, and then implement the necessary changes elsewhere would be easier.\n\n> should test when experimenting with this: how is autodoc working on Cython files? \n\nI will do so! I just figured out how to convince sage to produce the documentation for something else then the manifold package. After playing around a bit, I realized that there might be quite some changes necessary (e.g. `instancedoc` doesn't play nicely with Python's `inspect`). Will keep you updated.",
    "created_at": "2020-11-11T22:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438202",
    "user": "@tobiasdiez"
}
```

Thanks for the input `@`jhpalmieri.

> Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.

That should be fixed now.

> I think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.

I tried rebasing first, but there were quite a few changes which made it rather difficult. So I thought replacing it completely, and then implement the necessary changes elsewhere would be easier.

> should test when experimenting with this: how is autodoc working on Cython files? 

I will do so! I just figured out how to convince sage to produce the documentation for something else then the manifold package. After playing around a bit, I realized that there might be quite some changes necessary (e.g. `instancedoc` doesn't play nicely with Python's `inspect`). Will keep you updated.



---

archive/issue_comments_438203.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-11T22:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438203",
    "user": "@tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_438204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T22:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438205.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438205",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_438206.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30656#issuecomment-438206",
    "user": "@mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.
