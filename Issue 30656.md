# Issue 30656: Replace sage autodoc extension by built-in one

Issue created by migration from https://trac.sagemath.org/ticket/30893

Original creator: @tobiasdiez

Original creation time: 2020-11-11 16:17:25

CC:  jhpalmieri klee

Replaces sage's custom autodoc extension by the built-in one. 

For some reason, my local installation only wants to build the documentation for the manifold package. For this, I verified that the newly generated documentation is on par with the old one. This was the case except for parameters added with the ``@`output` decorator. This should be fixed with #30884.
Please let me know if there are other customization in the sage autodoc file except for the `sage_wraps` decorator support.


---

Comment by @tobiasdiez created at 2020-11-11 16:17:37

Changing status from new to needs_review.


---

Comment by git created at 2020-11-11 16:18:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2020-11-11 18:25:44

Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.

I think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.


---

Comment by jhpalmieri created at 2020-11-11 18:28:59

My understanding is that one of the main reasons for using our own version of `autodoc` is to be able to include Cython files in the documentation, and this requires customization of the introspection code. So that is something you should test when experimenting with this: how is autodoc working on Cython files?


---

Comment by @tobiasdiez created at 2020-11-11 22:02:18

Thanks for the input `@`jhpalmieri.

> Building the docs fails immediately for me, because text roles like `:arxiv:`, `:trac:`, etc. are no longer defined.

That should be fixed now.

> I think it would be better, at least as a first step, to update `sage_autodoc` to incorporate the recent changes in Sphinx's `autodoc`.

I tried rebasing first, but there were quite a few changes which made it rather difficult. So I thought replacing it completely, and then implement the necessary changes elsewhere would be easier.

> should test when experimenting with this: how is autodoc working on Cython files? 

I will do so! I just figured out how to convince sage to produce the documentation for something else then the manifold package. After playing around a bit, I realized that there might be quite some changes necessary (e.g. `instancedoc` doesn't play nicely with Python's `inspect`). Will keep you updated.


---

Comment by @tobiasdiez created at 2020-11-11 22:02:18

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-11-11 22:02:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
