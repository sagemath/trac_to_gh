# Issue 25123: Honor global proof setting for "polynomial" in factorization code

archive/issues_025123.json:
```json
{
    "body": "Currently factorization code ignores the proof flag for polynomials:\n\n\n```\nsage: k.<u> = GF(4)\nsage: R.<v> = k[]\nsage: l.<v> = R.quo(v^3 + v + 1)\nsage: R.<x,y> = l[]\nsage: f = y^3 + x^3 + (u + 1)*x\nsage: with proof.WithProof('polynomial', True):\n....:     f.factor()\nNotImplementedError: \"proof = True factorization not implemented.  Call factor with proof=False.\"\nsage: with proof.WithProof('polynomial', False):\n....:     f.factor()\nNotImplementedError: \"proof = True factorization not implemented.  Call factor with proof=False.\"\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25360\n\n",
    "created_at": "2018-05-14T12:20:57Z",
    "labels": [
        "component: commutative algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Honor global proof setting for \"polynomial\" in factorization code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25123",
    "user": "https://github.com/saraedum"
}
```
Currently factorization code ignores the proof flag for polynomials:


```
sage: k.<u> = GF(4)
sage: R.<v> = k[]
sage: l.<v> = R.quo(v^3 + v + 1)
sage: R.<x,y> = l[]
sage: f = y^3 + x^3 + (u + 1)*x
sage: with proof.WithProof('polynomial', True):
....:     f.factor()
NotImplementedError: "proof = True factorization not implemented.  Call factor with proof=False."
sage: with proof.WithProof('polynomial', False):
....:     f.factor()
NotImplementedError: "proof = True factorization not implemented.  Call factor with proof=False."
```


Issue created by migration from https://trac.sagemath.org/ticket/25360





---

archive/issue_comments_353163.json:
```json
{
    "body": "Sage 8.3.beta0 does not build for me so I am waiting for feedback from the patchbot\u2026\n----\nNew commits:",
    "created_at": "2018-05-14T12:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353163",
    "user": "https://github.com/saraedum"
}
```

Sage 8.3.beta0 does not build for me so I am waiting for feedback from the patchbotâ€¦
----
New commits:



---

archive/issue_comments_353164.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-14T12:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353164",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_353165.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-24T22:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353166.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-24T22:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353167.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-28T12:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353168.json:
```json
{
    "body": "The magma enabled patchbot stumbled upon some things. I don't think they're related to anything that happened here.",
    "created_at": "2018-05-28T23:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353168",
    "user": "https://github.com/saraedum"
}
```

The magma enabled patchbot stumbled upon some things. I don't think they're related to anything that happened here.



---

archive/issue_comments_353169.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-11T07:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353169",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_353170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-11T16:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353171.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-11T16:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353171",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_353172.json:
```json
{
    "body": "I have a doubt about your new error message: Why do you insist on wrapping the computation in a \"withproof\" block rather than using the keyword `proof=True`? I agree that it may be more pythonic, though I guess it is simpler for users to use the keyword.",
    "created_at": "2018-06-18T17:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353172",
    "user": "https://github.com/bgrenet"
}
```

I have a doubt about your new error message: Why do you insist on wrapping the computation in a "withproof" block rather than using the keyword `proof=True`? I agree that it may be more pythonic, though I guess it is simpler for users to use the keyword.



---

archive/issue_comments_353173.json:
```json
{
    "body": "You can not pass the `proof` keyword if this bubbles up somehow indirectly (as often happens in valuations in function fields code.) The `with` block works in that case so it is the better advice to display imo.",
    "created_at": "2018-06-18T18:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353173",
    "user": "https://github.com/saraedum"
}
```

You can not pass the `proof` keyword if this bubbles up somehow indirectly (as often happens in valuations in function fields code.) The `with` block works in that case so it is the better advice to display imo.



---

archive/issue_comments_353174.json:
```json
{
    "body": "I do not get the argument with the proof keyword. Do you mean that it would be very heavy to put the `proof` keyword at each function that calls even indirectly the factorization method?",
    "created_at": "2018-06-19T07:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353174",
    "user": "https://github.com/bgrenet"
}
```

I do not get the argument with the proof keyword. Do you mean that it would be very heavy to put the `proof` keyword at each function that calls even indirectly the factorization method?



---

archive/issue_comments_353175.json:
```json
{
    "body": "Yes, essentially. I think that this was the idea of the global proof flag: you don't have to add `proof=None` to lots of places where it would be quite tedious to explain what could be not provably correct in the call tree.",
    "created_at": "2018-06-19T11:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353175",
    "user": "https://github.com/saraedum"
}
```

Yes, essentially. I think that this was the idea of the global proof flag: you don't have to add `proof=None` to lots of places where it would be quite tedious to explain what could be not provably correct in the call tree.



---

archive/issue_comments_353176.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-04T16:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353177.json:
```json
{
    "body": "There were some patchbot errors because an example that I used has been fixed somewhere else. Let's see whether the patchbot is happy now.\n----\nNew commits:",
    "created_at": "2018-07-04T16:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353177",
    "user": "https://github.com/saraedum"
}
```

There were some patchbot errors because an example that I used has been fixed somewhere else. Let's see whether the patchbot is happy now.
----
New commits:



---

archive/issue_comments_353178.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-04T16:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353179.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-30T14:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353180.json:
```json
{
    "body": "I fixed one pyflakes problem. The other one appears to be incorrect. pyflakes reports `vector_space` to be a redeclaration of an unused method but this does not make sense as both methods are in the public interface of different classes. So let's just ignore this one.",
    "created_at": "2018-07-30T14:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353180",
    "user": "https://github.com/saraedum"
}
```

I fixed one pyflakes problem. The other one appears to be incorrect. pyflakes reports `vector_space` to be a redeclaration of an unused method but this does not make sense as both methods are in the public interface of different classes. So let's just ignore this one.



---

archive/issue_comments_353181.json:
```json
{
    "body": "Stefan Wewers gave positive review here: https://github.com/MCLF/mclf/issues/13.",
    "created_at": "2018-07-30T14:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353181",
    "user": "https://github.com/saraedum"
}
```

Stefan Wewers gave positive review here: https://github.com/MCLF/mclf/issues/13.



---

archive/issue_comments_353182.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-30T19:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353182",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_063577.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-11T16:54:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25123#event-63577"
}
```



---

archive/issue_comments_353183.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-11T16:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25123#issuecomment-353183",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
