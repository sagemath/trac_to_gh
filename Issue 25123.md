# Issue 25123: Honor global proof setting for "polynomial" in factorization code

Issue created by migration from https://trac.sagemath.org/ticket/25360

Original creator: saraedum

Original creation time: 2018-05-14 12:20:57

Currently factorization code ignores the proof flag for polynomials:


```
sage: k.<u> = GF(4)
sage: R.<v> = k[]
sage: l.<v> = R.quo(v^3 + v + 1)
sage: R.<x,y> = l[]
sage: f = y^3 + x^3 + (u + 1)*x
sage: with proof.WithProof('polynomial', True):
....:     f.factor()
NotImplementedError: "proof = True factorization not implemented.  Call factor with proof=False."
sage: with proof.WithProof('polynomial', False):
....:     f.factor()
NotImplementedError: "proof = True factorization not implemented.  Call factor with proof=False."
```



---

Comment by saraedum created at 2018-05-14 12:23:53

Sage 8.3.beta0 does not build for me so I am waiting for feedback from the patchbotâ€¦
----
New commits:


---

Comment by saraedum created at 2018-05-14 12:23:53

Changing status from new to needs_review.


---

Comment by git created at 2018-05-24 22:27:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-24 22:29:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-28 12:02:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-05-28 23:28:07

The magma enabled patchbot stumbled upon some things. I don't think they're related to anything that happened here.


---

Comment by saraedum created at 2018-06-11 07:47:30

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-06-11 16:48:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-06-11 16:49:05

Changing status from needs_work to needs_review.


---

Comment by bruno created at 2018-06-18 17:07:27

I have a doubt about your new error message: Why do you insist on wrapping the computation in a "withproof" block rather than using the keyword `proof=True`? I agree that it may be more pythonic, though I guess it is simpler for users to use the keyword.


---

Comment by saraedum created at 2018-06-18 18:31:34

You can not pass the `proof` keyword if this bubbles up somehow indirectly (as often happens in valuations in function fields code.) The `with` block works in that case so it is the better advice to display imo.


---

Comment by bruno created at 2018-06-19 07:37:21

I do not get the argument with the proof keyword. Do you mean that it would be very heavy to put the `proof` keyword at each function that calls even indirectly the factorization method?


---

Comment by saraedum created at 2018-06-19 11:14:02

Yes, essentially. I think that this was the idea of the global proof flag: you don't have to add `proof=None` to lots of places where it would be quite tedious to explain what could be not provably correct in the call tree.


---

Comment by git created at 2018-07-04 16:11:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-07-04 16:33:35

There were some patchbot errors because an example that I used has been fixed somewhere else. Let's see whether the patchbot is happy now.
----
New commits:


---

Comment by git created at 2018-07-04 16:33:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-30 14:27:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-07-30 14:28:33

I fixed one pyflakes problem. The other one appears to be incorrect. pyflakes reports `vector_space` to be a redeclaration of an unused method but this does not make sense as both methods are in the public interface of different classes. So let's just ignore this one.


---

Comment by saraedum created at 2018-07-30 14:29:41

Stefan Wewers gave positive review here: https://github.com/MCLF/mclf/issues/13.


---

Comment by swewers created at 2018-07-30 19:57:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-11 16:54:54

Resolution: fixed
