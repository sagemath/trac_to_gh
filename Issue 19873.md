# Issue 19873: Speed up Polyhedron_base.graph()

Issue created by migration from Trac.

Original creator: jplitza

Original creation time: 2016-02-25 09:22:26

Currently, `Polyhedron_base.graph()` intersects with the base set of all vertices in every of the _n_ over 2 loop iterations in line 3321, where _n_ is the number of vertices. This is useless as far as I can see, because the sets that are being intersected cannot possibly ever contain something that is not a vertex.

Leaving out this additional intersection speeds up the process of constructing the graph significantly. I tested it on a 4 GHz machine for the polyhedron `polytopes.associahedron(['E', 7])`, and with my patch it only took close to two minutes instead of 5:15. Other examples like `polytopes.associahedron(['E', 8])` also suggest a _significant_ speedup, although I don't have precise measurements from the same machine.

I also tested that the resulting graph is actually the same for some polyhedra.


---

Comment by vbraun created at 2016-02-25 17:25:16

Looks good to me. I assume tests pass. You should set tickets to "needs review" when you are ready...


---

Comment by jplitza created at 2016-02-26 07:06:49

Changing status from new to needs_review.


---

Comment by vbraun created at 2016-02-26 09:22:16

Can you fill in the "Author" field with your real name?


---

Comment by vbraun created at 2016-02-27 11:30:44

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-02-28 00:52:27

Resolution: fixed
