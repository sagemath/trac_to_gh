# Issue 34480: Make some doctests optional for lrsnash

archive/issues_034480.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/34717\n\n",
    "created_at": "2022-11-03T04:25:52Z",
    "labels": [],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Make some doctests optional for lrsnash",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34480",
    "user": "https://github.com/kwankyu"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/34717





---

archive/issue_comments_487655.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to doctest coverage.",
    "created_at": "2022-11-03T04:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487655",
    "user": "https://github.com/kwankyu"
}
```

Changing component from PLEASE CHANGE to doctest coverage.



---

archive/issue_comments_487656.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2022-11-03T04:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487656",
    "user": "https://github.com/kwankyu"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_487657.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-11-03T04:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487657",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487658.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-11-03T04:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487658",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_487659.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2022-11-03T04:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487659",
    "user": "https://github.com/kwankyu"
}
```

Changing priority from major to minor.



---

archive/issue_comments_487660.json:
```json
{
    "body": "Others don't have these failures? I saw no one report them.",
    "created_at": "2022-11-03T04:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487660",
    "user": "https://github.com/kwankyu"
}
```

Others don't have these failures? I saw no one report them.



---

archive/issue_comments_487661.json:
```json
{
    "body": "I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. It seems that on your system, you have the `lrs` executable but not `lrsnash`.",
    "created_at": "2022-12-20T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487661",
    "user": "https://github.com/mkoeppe"
}
```

I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. It seems that on your system, you have the `lrs` executable but not `lrsnash`.



---

archive/issue_comments_487662.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-12-20T19:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487662",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_487663.json:
```json
{
    "body": "> It seems that on your system, you have the `lrs` executable but not `lrsnash`. \n\n\nRight.\n\n> I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. \n\n\nAccording to the exception message, it checks for `lrsnash` and says `lrsnash` is not available, which is correct, and suggests to me to install `lrslib`, which is an optional package. As `obtain_nash` is dependent on `lrsnash`, it should not be tested when the optional package was not installed. Right?\n\nWhat is the right fix?",
    "created_at": "2022-12-21T02:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487663",
    "user": "https://github.com/kwankyu"
}
```

> It seems that on your system, you have the `lrs` executable but not `lrsnash`. 


Right.

> I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. 


According to the exception message, it checks for `lrsnash` and says `lrsnash` is not available, which is correct, and suggests to me to install `lrslib`, which is an optional package. As `obtain_nash` is dependent on `lrsnash`, it should not be tested when the optional package was not installed. Right?

What is the right fix?



---

archive/issue_comments_487664.json:
```json
{
    "body": "Try this\n\n---\nNew commits:",
    "created_at": "2022-12-21T02:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487664",
    "user": "https://github.com/mkoeppe"
}
```

Try this

---
New commits:



---

archive/issue_comments_487665.json:
```json
{
    "body": "it works great. Thanks!",
    "created_at": "2022-12-21T03:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487665",
    "user": "https://github.com/kwankyu"
}
```

it works great. Thanks!



---

archive/issue_comments_487666.json:
```json
{
    "body": "Changing component from doctest coverage to game theory.",
    "created_at": "2022-12-21T03:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487666",
    "user": "https://github.com/kwankyu"
}
```

Changing component from doctest coverage to game theory.



---

archive/issue_comments_487667.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-12-21T03:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34480#issuecomment-487667",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to positive_review.
