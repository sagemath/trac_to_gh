# Issue 34480: Make some doctests optional for lrsnash

Issue created by migration from https://trac.sagemath.org/ticket/34717

Original creator: klee

Original creation time: 2022-11-03 04:25:52




---

Comment by klee created at 2022-11-03 04:34:30

Changing component from PLEASE CHANGE to doctest coverage.


---

Comment by klee created at 2022-11-03 04:34:30

Changing type from PLEASE CHANGE to defect.


---

Comment by klee created at 2022-11-03 04:34:30

Changing status from new to needs_review.


---

Comment by klee created at 2022-11-03 04:34:30

New commits:


---

Comment by klee created at 2022-11-03 04:34:30

Changing priority from major to minor.


---

Comment by klee created at 2022-11-03 04:36:22

Others don't have these failures? I saw no one report them.


---

Comment by mkoeppe created at 2022-12-20 19:41:02

I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. It seems that on your system, you have the `lrs` executable but not `lrsnash`.


---

Comment by mkoeppe created at 2022-12-20 19:41:26

Changing status from needs_review to needs_work.


---

Comment by klee created at 2022-12-21 02:38:42

> It seems that on your system, you have the `lrs` executable but not `lrsnash`. 

Right.

> I don't think this is the right fix. `obtain_nash` decides on the default algorithm to use based on a feature test; but it checks for `Lrs` when it should check for `Lrslib` or `LrsNash`. 

According to the exception message, it checks for `lrsnash` and says `lrsnash` is not available, which is correct, and suggests to me to install `lrslib`, which is an optional package. As `obtain_nash` is dependent on `lrsnash`, it should not be tested when the optional package was not installed. Right?

What is the right fix?


---

Comment by mkoeppe created at 2022-12-21 02:54:51

Try this
----
New commits:


---

Comment by klee created at 2022-12-21 03:37:53

it works great. Thanks!


---

Comment by klee created at 2022-12-21 03:37:53

Changing component from doctest coverage to game theory.


---

Comment by klee created at 2022-12-21 03:37:53

Changing status from needs_work to positive_review.
