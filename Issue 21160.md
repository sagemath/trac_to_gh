# Issue 21160: Fix (maybe) non-deterministic test failure in expect

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2016-09-02 14:00:05

Keywords: expect cygwin singular

I was occasionally getting failures in this test.  It seems that what was happening is:


```
singular('i')
```


would be called, even after a failed


```
singular._sendstr('int i = 5;')
```


Not clear if the command send with `_sendstr` actually failed, or just didn't finish sending/evaluating before the call to `singular('i')`.  But forcing a `singular._synchronize()` before the test seems to make sense.  I haven't been able to reproduce the failure since adding this, though I wasn't getting it reliably in the first place.


---

Comment by embray created at 2016-09-02 14:00:22

Changing status from new to needs_review.


---

Comment by embray created at 2016-09-09 12:17:29

Changing type from PLEASE CHANGE to defect.


---

Comment by tscrim created at 2016-09-09 13:44:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-09-10 08:59:59

Resolution: fixed
