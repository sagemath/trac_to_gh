# Issue 23827: Upgrade a few Jupyter packages

archive/issues_023827.json:
```json
{
    "body": "**Tarballs**:\n\n- https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz\n- https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz\n- https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/24064\n\n",
    "created_at": "2017-10-18T14:02:09Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "Upgrade a few Jupyter packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23827",
    "user": "jdemeyer"
}
```
**Tarballs**:

- https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz
- https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz
- https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/24064





---

archive/issue_comments_333759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-18T14:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333760.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-18T20:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333760",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_333761.json:
```json
{
    "body": "Which package introduce the deprecation of `server_extension`, do you know?",
    "created_at": "2017-10-18T20:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333761",
    "user": "fbissey"
}
```

Which package introduce the deprecation of `server_extension`, do you know?



---

archive/issue_comments_333762.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> Which package introduce the deprecation of `server_extension`, do you know?\n\n`notebook` (so it's not even a package touched on this ticket)",
    "created_at": "2017-10-18T20:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333762",
    "user": "jdemeyer"
}
```

Replying to [comment:5 fbissey]:
> Which package introduce the deprecation of `server_extension`, do you know?

`notebook` (so it's not even a package touched on this ticket)



---

archive/issue_comments_333763.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-18T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333763",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_333764.json:
```json
{
    "body": "Replying to [comment:6 jdemeyer]:\n> Replying to [comment:5 fbissey]:\n> > Which package introduce the deprecation of `server_extension`, do you know?\n> \n> `notebook` (so it's not even a package touched on this ticket)\n\nOK, that was puzzling me.  Let's move it on.",
    "created_at": "2017-10-18T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333764",
    "user": "fbissey"
}
```

Replying to [comment:6 jdemeyer]:
> Replying to [comment:5 fbissey]:
> > Which package introduce the deprecation of `server_extension`, do you know?
> 
> `notebook` (so it's not even a package touched on this ticket)

OK, that was puzzling me.  Let's move it on.



---

archive/issue_comments_333765.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-21T19:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333765",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_333766.json:
```json
{
    "body": "[At](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-96-generic/petitbonum/2017-10-22%2018:09:18?short) [least](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-97-generic/quasar/2017-10-22%2017:48:41?short) [three](https://patchbot.sagemath.org/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-10-22%2017:24:17?short) patchbots seem to fail during the build of ipykernel since 8.1.beta9. Could this ticket be the cause of that?\n\nMost relevant part of the install log (which is messed up due to parallel builds)\n\n```\n[ipykernel-4.6.1]     Traceback (most recent call last):\n[ipykernel-4.6.1]       File \"<string>\", line 1, in <module>\n[ipykernel-4.6.1]       File \"/tmp/pip-n397X9-build/setup.py\", line 91, in <module>\n[ipykernel-4.6.1]         from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME\n[ipykernel-4.6.1]       File \"ipykernel/__init__.py\", line 2, in <module>\n[ipykernel-4.6.1]         from .connect import *\n[ipykernel-4.6.1]       File \"ipykernel/connect.py\", line 13, in <module>\n[ipykernel-4.6.1]         from IPython.core.profiledir import ProfileDir\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/IPython/__init__.py\", line 48, in <module>\n[ipykernel-4.6.1]         from .core.application import Application\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/IPython/core/application.py\", line 23, in <module>\n[ipykernel-4.6.1]         from traitlets.config.application import Application, catch_config_error\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/__init__.py\", line 1, in <module>\n[numpy-1.13.3.p0] gcc: numpy/core/src/npymath/npy_math.c\n[ipykernel-4.6.1]         from .traitlets import *\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/traitlets.py\", line 60, in <module>\n[ipykernel-4.6.1]         from .utils.importstring import import_item\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/utils/importstring.py\", line 8, in <module>\n[ipykernel-4.6.1]         from ipython_genutils.py3compat import cast_bytes_py2\n[ipykernel-4.6.1]     ImportError: No module named ipython_genutils.py3compat\n```\n\nSeems that somehow a dependency is not installed correctly.",
    "created_at": "2017-10-22T19:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333766",
    "user": "mderickx"
}
```

[At](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-96-generic/petitbonum/2017-10-22%2018:09:18?short) [least](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-97-generic/quasar/2017-10-22%2017:48:41?short) [three](https://patchbot.sagemath.org/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-10-22%2017:24:17?short) patchbots seem to fail during the build of ipykernel since 8.1.beta9. Could this ticket be the cause of that?

Most relevant part of the install log (which is messed up due to parallel builds)

```
[ipykernel-4.6.1]     Traceback (most recent call last):
[ipykernel-4.6.1]       File "<string>", line 1, in <module>
[ipykernel-4.6.1]       File "/tmp/pip-n397X9-build/setup.py", line 91, in <module>
[ipykernel-4.6.1]         from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME
[ipykernel-4.6.1]       File "ipykernel/__init__.py", line 2, in <module>
[ipykernel-4.6.1]         from .connect import *
[ipykernel-4.6.1]       File "ipykernel/connect.py", line 13, in <module>
[ipykernel-4.6.1]         from IPython.core.profiledir import ProfileDir
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/IPython/__init__.py", line 48, in <module>
[ipykernel-4.6.1]         from .core.application import Application
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/IPython/core/application.py", line 23, in <module>
[ipykernel-4.6.1]         from traitlets.config.application import Application, catch_config_error
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/__init__.py", line 1, in <module>
[numpy-1.13.3.p0] gcc: numpy/core/src/npymath/npy_math.c
[ipykernel-4.6.1]         from .traitlets import *
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/traitlets.py", line 60, in <module>
[ipykernel-4.6.1]         from .utils.importstring import import_item
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/utils/importstring.py", line 8, in <module>
[ipykernel-4.6.1]         from ipython_genutils.py3compat import cast_bytes_py2
[ipykernel-4.6.1]     ImportError: No module named ipython_genutils.py3compat
```

Seems that somehow a dependency is not installed correctly.



---

archive/issue_comments_333767.json:
```json
{
    "body": "Yes, those things can go unnoticed. According to similar gentoo ebuild `ipykernel` depends on `traitlets` which brings `ipython_genutils`, we don't have the `traitlets` dependency in `ipykernel` in sage. But I'd say the `ipython_genutils` is now a direct dependency in view of these logs.",
    "created_at": "2017-10-22T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333767",
    "user": "fbissey"
}
```

Yes, those things can go unnoticed. According to similar gentoo ebuild `ipykernel` depends on `traitlets` which brings `ipython_genutils`, we don't have the `traitlets` dependency in `ipykernel` in sage. But I'd say the `ipython_genutils` is now a direct dependency in view of these logs.



---

archive/issue_comments_333768.json:
```json
{
    "body": "I'd happily review a follow up ticket fixing this.",
    "created_at": "2017-10-22T19:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333768",
    "user": "fbissey"
}
```

I'd happily review a follow up ticket fixing this.



---

archive/issue_comments_333769.json:
```json
{
    "body": "Ok, in the mean time I created the ticket #24088 for the issue.",
    "created_at": "2017-10-22T19:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23827#issuecomment-333769",
    "user": "mderickx"
}
```

Ok, in the mean time I created the ticket #24088 for the issue.
