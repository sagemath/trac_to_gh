# Issue 28838: wrong comparison of sin(something) to zero

Issue created by migration from https://trac.sagemath.org/ticket/29075

Original creator: chapoton

Original creation time: 2020-01-24 20:43:17

CC:  @davewittemorris slelievre

from https://stackoverflow.com/questions/43161381/


```

sage: a = sin(1/2*arctan2(0, sqrt(3)-1))
sage: a.n()
0.000000000000000
sage: a.n(100)
0.00000000000000000000000000000
sage: bool(a!=0)
True
sage: bool(a==0)
True
sage: bool(a)
False

```



---

Comment by chapoton created at 2020-01-24 20:44:18

Maybe not a bug, as one can do

```
sage: a = sin(1/2*arctan2(0, RIF(3).sqrt()-1))
sage: a
0
sage: a==0
True
sage: a!=0
False
```



---

Comment by mkoeppe created at 2020-05-01 04:28:42

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.


---

Comment by @cEMRSS created at 2021-04-12 18:18:29

note:

```
sage: bool(arctan2(0, sqrt(3)-1) != 0)
True
```


I would guess this would be an improper handling of symbolic expressions within the evaluation of `bool` resulting from incomplete simplification of the expression. Thus it could be seen as a bug with the simplification of `arctan2` or in the handling of symbolic expressions of `bool`.


---

Comment by slelievre created at 2021-04-12 20:13:49

Really surprising.

If `x` and `y` are real and not both zero, `arctan2(y, x)`
gives the angle (in the interval `(-pi, pi]`) from the
horizontal direction to that of the line through `(0, 0)`
and `(x, y)`.

Examples:

```
sage: arctan2(0, 1)
0
sage: arctan2(1, 1)
1/4*pi
sage: arctan2(1, 0)
1/2*pi
sage: arctan2(0, -1)
pi
```


Whenever `y > 0` the result of `arctan2(y, 0)` must be zero.

And indeed:

```
sage: arctan2(0, 2)
0
sage: arctan2(0, sqrt(3))
0
sage: arctan2(0, sqrt(3) + 1)
0
```

but the surprise comes with:

```
sage: arctan2(0, sqrt(3) - 1)
arctan2(0, sqrt(3) - 1)
```

even though

```
sage: bool(sqrt(3) - 1 > 0)
True
```

and two correct answers followed an incorrect one below:

```
sage: bool(arctan2(0, sqrt(3) - 1))  # is it nonzero
False
sage: bool(arctan2(0, sqrt(3) - 1) == 0)  # is it zero
True
sage: bool(arctan2(0, sqrt(3) - 1) != 0)  # is it nonzero
True
```



---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.
