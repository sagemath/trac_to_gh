# Issue 25299: meta-ticket: failing internet doctests in 8.3.beta3

archive/issues_025299.json:
```json
{
    "body": "CC:  slelievre vklein tmonteil\n\nAs reported on [sage-release 8.3.beta3](https://groups.google.com/d/msg/sage-release/l635YEuT7Hs/WkHCnmWhAQAJ),\n\n\n```\nsage -tp --optional=sage,internet --all\n```\n\n\ngives many failing internet doctests.\n\nRelated tickets:\n\n* #25471 (oeis)\n* #25472 (findstat)\n* #25473 (stock)\n* #25474 (6 files)\n* #25501 (mma_free_integrator)\n* #25534 (coding/databases.py)\n* #25535 (sage/repl/load.py)\n\nIssue created by migration from https://trac.sagemath.org/ticket/25536\n\n",
    "created_at": "2018-06-07T20:26:40Z",
    "labels": [
        "doctest coverage",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "meta-ticket: failing internet doctests in 8.3.beta3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25299",
    "user": "slabbe"
}
```
CC:  slelievre vklein tmonteil

As reported on [sage-release 8.3.beta3](https://groups.google.com/d/msg/sage-release/l635YEuT7Hs/WkHCnmWhAQAJ),


```
sage -tp --optional=sage,internet --all
```


gives many failing internet doctests.

Related tickets:

* #25471 (oeis)
* #25472 (findstat)
* #25473 (stock)
* #25474 (6 files)
* #25501 (mma_free_integrator)
* #25534 (coding/databases.py)
* #25535 (sage/repl/load.py)

Issue created by migration from https://trac.sagemath.org/ticket/25536





---

archive/issue_comments_356719.json:
```json
{
    "body": "I fixed #25474. I am clueless for the others.",
    "created_at": "2018-06-07T20:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356719",
    "user": "slabbe"
}
```

I fixed #25474. I am clueless for the others.



---

archive/issue_comments_356720.json:
```json
{
    "body": "added persist.pyx",
    "created_at": "2018-06-19T20:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356720",
    "user": "slabbe"
}
```

added persist.pyx



---

archive/issue_comments_356721.json:
```json
{
    "body": "See also\n\n- #26728: Remove ellipsis in one findstat doctest",
    "created_at": "2018-11-21T08:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356721",
    "user": "slelievre"
}
```

See also

- #26728: Remove ellipsis in one findstat doctest



---

archive/issue_comments_356722.json:
```json
{
    "body": "Changing keywords from \"\" to \"meta-ticket, internet, optional doctests\".",
    "created_at": "2019-01-25T01:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356722",
    "user": "slelievre"
}
```

Changing keywords from "" to "meta-ticket, internet, optional doctests".



---

archive/issue_comments_356723.json:
```json
{
    "body": "Changing keywords from \"meta-ticket, internet, optional doctests\" to \"meta-ticket, internet, optional doctests, thursdaysbdx\".",
    "created_at": "2019-03-07T08:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356723",
    "user": "slabbe"
}
```

Changing keywords from "meta-ticket, internet, optional doctests" to "meta-ticket, internet, optional doctests, thursdaysbdx".



---

archive/issue_comments_356724.json:
```json
{
    "body": "adding #28697",
    "created_at": "2019-11-05T20:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356724",
    "user": "slabbe"
}
```

adding #28697



---

archive/issue_comments_356725.json:
```json
{
    "body": "tickets merged in 9.0.beta8",
    "created_at": "2019-12-02T10:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356725",
    "user": "slabbe"
}
```

tickets merged in 9.0.beta8



---

archive/issue_comments_356726.json:
```json
{
    "body": "Would it make sense to enable the `optional=internet` doctests for our automatic tests on GitHub Actions? Or would there be concern that it causes too much network traffic?",
    "created_at": "2021-07-06T00:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356726",
    "user": "mkoeppe"
}
```

Would it make sense to enable the `optional=internet` doctests for our automatic tests on GitHub Actions? Or would there be concern that it causes too much network traffic?



---

archive/issue_comments_356727.json:
```json
{
    "body": "Replying to [comment:93 mkoeppe]:\n> Would it make sense to enable the `optional=internet` doctests for our automatic tests on GitHub Actions? Or would there be concern that it causes too much network traffic? \n\nSage relies on small public online services such as oeis or findstat. It is unfair to connect to their server at each doctest. Most failing internet doctests are due to some changes on the remote servers (e.g. when they fix a typo or when they add a line of documentation) and are not errors in the Sage library.",
    "created_at": "2021-09-12T01:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356727",
    "user": "tmonteil"
}
```

Replying to [comment:93 mkoeppe]:
> Would it make sense to enable the `optional=internet` doctests for our automatic tests on GitHub Actions? Or would there be concern that it causes too much network traffic? 

Sage relies on small public online services such as oeis or findstat. It is unfair to connect to their server at each doctest. Most failing internet doctests are due to some changes on the remote servers (e.g. when they fix a typo or when they add a line of documentation) and are not errors in the Sage library.



---

archive/issue_comments_356728.json:
```json
{
    "body": "I think this needs some quantitative context. The tests on GH Actions run automatically on every release tag (or when a developer manually triggers a CI run by clicking a button or pushing a tag). They do not run on every ticket (or every commit). On every run, around 100 copies of `make ptest` are launched. I don't know whether this would be out of proportion traffic for these services.",
    "created_at": "2021-09-17T17:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356728",
    "user": "mkoeppe"
}
```

I think this needs some quantitative context. The tests on GH Actions run automatically on every release tag (or when a developer manually triggers a CI run by clicking a button or pushing a tag). They do not run on every ticket (or every commit). On every run, around 100 copies of `make ptest` are launched. I don't know whether this would be out of proportion traffic for these services.



---

archive/issue_comments_356729.json:
```json
{
    "body": "Failures of our internet tests usually signal changes in the\nonline services we connect to, and are not platform-dependent,\nso one run of these tests per release suffices -- no need\nfor a hundred.",
    "created_at": "2021-09-18T08:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356729",
    "user": "slelievre"
}
```

Failures of our internet tests usually signal changes in the
online services we connect to, and are not platform-dependent,
so one run of these tests per release suffices -- no need
for a hundred.



---

archive/issue_comments_356730.json:
```json
{
    "body": "updated tickets merged in 9.5",
    "created_at": "2021-10-14T18:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356730",
    "user": "slabbe"
}
```

updated tickets merged in 9.5



---

archive/issue_comments_356731.json:
```json
{
    "body": "Adding 5 new tickets to the list (failures with 9.5.beta3)",
    "created_at": "2021-10-14T18:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356731",
    "user": "slabbe"
}
```

Adding 5 new tickets to the list (failures with 9.5.beta3)



---

archive/issue_comments_356732.json:
```json
{
    "body": "1 merged ticket + 1 new ticket (glucose)",
    "created_at": "2021-10-22T13:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356732",
    "user": "slabbe"
}
```

1 merged ticket + 1 new ticket (glucose)



---

archive/issue_comments_356733.json:
```json
{
    "body": "tickets merged in 9.5.beta9",
    "created_at": "2021-12-29T10:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356733",
    "user": "slabbe"
}
```

tickets merged in 9.5.beta9



---

archive/issue_comments_356734.json:
```json
{
    "body": "one ticket merged in 9.6",
    "created_at": "2022-02-16T14:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356734",
    "user": "slabbe"
}
```

one ticket merged in 9.6



---

archive/issue_comments_356735.json:
```json
{
    "body": "ticket fixed in 9.6",
    "created_at": "2022-05-03T15:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356735",
    "user": "slabbe"
}
```

ticket fixed in 9.6



---

archive/issue_comments_356736.json:
```json
{
    "body": "tickets merged in 9.8.beta1",
    "created_at": "2022-10-06T08:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356736",
    "user": "slabbe"
}
```

tickets merged in 9.8.beta1



---

archive/issue_comments_356737.json:
```json
{
    "body": "tickets merged in 9.8.beta2",
    "created_at": "2022-10-21T08:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25299#issuecomment-356737",
    "user": "slabbe"
}
```

tickets merged in 9.8.beta2
