# Issue 11947: Replace remaining __getslice__ with functionality in __getitem__ (part 3)

Issue created by migration from Trac.

Original creator: aapitzsch

Original creation time: 2011-12-04 22:30:40

Assignee: jason

`__getslice__` has been deprecated for a long time in Python. This patch adds equivalent functionality to `__getitem__`, which is where the functionality should be.

Apply #12041 and #12093.


```
sage: search_src("slice__")
rings/power_series_poly.pyx:333:                # __getslice__ isn't just called by default...
rings/power_series_poly.pyx:334:            #    return self.__getslice__(slice[0],slice[1])
rings/polynomial/polynomial_integer_dense_ntl.pyx:312:    def __getslice__(self, long i, long j):
rings/polynomial/polynomial_rational_flint.pyx:381:    def __getslice__(self, long i, long j):
rings/polynomial/polynomial_element_generic.py:316:    def __getslice__(self, i, j):
rings/polynomial/padics/polynomial_padic_capped_relative_dense.py:414:    def __getslice__(self, i, j):
databases/stein_watkins.py:257:    def __getslice__(self, min_level, max_level):
modular/modform/element.py:338:    def __getslice__(self, i, j):
modular/modform/element.py:352:            sage: f.__getslice__(10,15)
modular/abvar/abvar.py:3494:    def __getslice__(self, i, j):
structure/sequence.py:580:    def __getslice__(self, i, j):
structure/sequence.py:583:    def __setslice__(self, i, j, value):
media/wav.py:336:    def __getslice__(self, start, stop):
plot/animate.py:150:    def __getslice__(self, *args):
plot/animate.py:165:        return Animation(self.__frames.__getslice__(*args), **self.__kwds)
```


Remove remaining `__*slice__` functions except for the ones in `structure/sequence.py`. See comment:7:ticket:12093 for details.


---

Attachment


---

Comment by aapitzsch created at 2011-12-04 22:33:01

Changing status from new to needs_review.


---

Comment by davidloeffler created at 2012-03-12 16:16:44

Changing status from needs_review to needs_work.


---

Comment by davidloeffler created at 2012-03-12 16:16:44

This patch causes a doctest failure:

```
sage -t  -force_lib devel/sage-12119/sage/modular/abvar/abvar.py
**********************************************************************
File "/levi/scratch/robertwb/buildbot/sage-4.7.2/devel/sage-12119/sage/modular/abvar/abvar.py", line 3498:
    sage: J[:2]
Exception raised:
    Traceback (most recent call last):
      File "/levi/scratch/robertwb/buildbot/sage-4.7.2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/levi/scratch/robertwb/buildbot/sage-4.7.2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/levi/scratch/robertwb/buildbot/sage-4.7.2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_87[7]>", line 1, in <module>
        J[:Integer(2)]###line 3498:
    sage: J[:2]
      File "parent.pyx", line 1319, in sage.structure.parent.Parent.__getslice__ (sage/structure/parent.c:8911)
      File "parent.pyx", line 1210, in sage.structure.parent.Parent._list_from_iterator_cached (sage/structure/parent.c:8236)
      File "parent.pyx", line 811, in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:6260)
      File "parent.pyx", line 323, in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:3110)
    AttributeError: 'ModAbVar_ambient_jacobian_class_with_category' object has no attribute '__iter__'
**********************************************************************
```



---

Comment by aapitzsch created at 2012-03-12 16:49:09

Added missing dependency. Now all tests should pass.


---

Comment by aapitzsch created at 2012-03-12 16:49:09

Changing status from needs_work to needs_review.


---

Comment by davidloeffler created at 2012-03-12 17:29:52

They do indeed pass on 5.0.beta7 (the red blob is from a patchbot that's still running 4.8), and the code looks pretty uncontroversial. Positive review.


---

Comment by davidloeffler created at 2012-03-12 17:29:52

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-21 22:07:01

Resolution: fixed
