# Issue 14920: Symmetric functions: degree_negation tacitly expects the input to be in the same basis

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2013-09-05 01:42:32

CC:  tscrim sage-combinat zabrocki

Keywords: symmetric function, combinat, Sym, kronecker product

The `degree_negation` method as I implemented it in #14775 would give a wrong result when given a symmetric function in a different basis:


```
sage: Sym = SymmetricFunctions(QQ)
sage: Sym.inject_shorthands()
/home/darij/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py:1197: RuntimeWarning: redefining global value `e`
  inject_variable(shorthand, getattr(self, shorthand)())
sage: h.antipode(e[3]) # WRONG
-h[1, 1, 1] + 2*h[2, 1] - h[3]
sage: h.antipode(h(e[3])) # correct
-h[3]
sage: h.degree_negation(e[3]) # WRONG
-h[3]
sage: h.degree_negation(h(e[3])) # correct
-h[1, 1, 1] + 2*h[2, 1] - h[3]
```


The attached patch fixes this (at no visible speed cost, I believe) and also improves some documentation (I replaced "automorphism" by "endomorphism" because those maps weren't always invertible).


---

Attachment


---

Comment by darij created at 2013-09-05 01:43:14

Changing status from new to needs_review.


---

Attachment

Hey Darij,

Here's a small review patch which tweaks the doc (most important, it removes the second colon from your added `TESTS::` block). If you're happy with my changes, go ahead and set this to positive review.

Thanks,

Travis


---

Comment by darij created at 2013-09-06 20:55:42

Changing status from needs_review to positive_review.


---

Comment by darij created at 2013-09-06 20:55:42

Thanks, this is much appreciated.

patchbot:

apply trac_15157-deg-neg-dg.patch​ trac_15157-review-ts.patch​


---

Comment by tscrim created at 2013-09-06 23:16:36

Not a problem. Thank you for reviewing all of my tickets.


---

Comment by jdemeyer created at 2013-10-01 07:17:47

Resolution: fixed
