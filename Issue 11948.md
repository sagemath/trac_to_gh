# Issue 11948: Improve documentation of numerical_approx()

archive/issues_011948.json:
```json
{
    "body": "Assignee: mvngu\n\nIn a class on computer algebra, students were surprised by the behavior of the N() function. Here are some minimal examples that should illustrate the issues we ran into:\n\n\n```\nsage: x=N(pi,digits=3); x\n3.14  \nsage: y=N(3.14,digits=3); y\n3.14  \nsage: x==y\nFalse\n```\n\n\n\n```\nsage: N(pi,digits=1)\n3.2\n```\n\n\n\n```\nsage: N(pi-3,prec=2)\n0.00\n```\n\n\nImo, none of these is a bug, but I believe that the documentation should be improved.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12120\n\n",
    "created_at": "2011-12-05T10:31:00Z",
    "labels": [
        "component: documentation",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Improve documentation of numerical_approx()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11948",
    "user": "https://github.com/saraedum"
}
```
Assignee: mvngu

In a class on computer algebra, students were surprised by the behavior of the N() function. Here are some minimal examples that should illustrate the issues we ran into:


```
sage: x=N(pi,digits=3); x
3.14  
sage: y=N(3.14,digits=3); y
3.14  
sage: x==y
False
```



```
sage: N(pi,digits=1)
3.2
```



```
sage: N(pi-3,prec=2)
0.00
```


Imo, none of these is a bug, but I believe that the documentation should be improved.

Issue created by migration from https://trac.sagemath.org/ticket/12120





---

archive/issue_comments_137123.json:
```json
{
    "body": "The second example is also discussed in #11647.",
    "created_at": "2011-12-05T10:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137123",
    "user": "https://github.com/saraedum"
}
```

The second example is also discussed in #11647.



---

archive/issue_comments_137124.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-05T10:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137124",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137125.json:
```json
{
    "body": "There's some other problems with the digits argument; it accepts non-integer values and zero. Can you add a sanity check?",
    "created_at": "2011-12-17T04:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137125",
    "user": "https://github.com/eviatarbach"
}
```

There's some other problems with the digits argument; it accepts non-integer values and zero. Can you add a sanity check?



---

archive/issue_comments_137126.json:
```json
{
    "body": "The last example is odd; I made a thread about it at https://groups.google.com/forum/#!topic/sage-devel/nOdFzn6U06o.",
    "created_at": "2011-12-17T04:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137126",
    "user": "https://github.com/eviatarbach"
}
```

The last example is odd; I made a thread about it at https://groups.google.com/forum/#!topic/sage-devel/nOdFzn6U06o.



---

archive/issue_comments_137127.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-17T09:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137127",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_137128.json:
```json
{
    "body": "I'll try to incorporate what I've written on sage-devel into the patch.",
    "created_at": "2011-12-17T09:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137128",
    "user": "https://github.com/saraedum"
}
```

I'll try to incorporate what I've written on sage-devel into the patch.



---

archive/issue_comments_137129.json:
```json
{
    "body": "Replying to [comment:3 eviatarbach]:\n> There's some other problems with the digits argument; it accepts non-integer values and zero. Can you add a sanity check?\n\nThis ticket tries only to improve on the docstring of numerical_approx(). Adding sanity checks would make sense, though. I suggest you open a new ticket if you want to add sanity checks.",
    "created_at": "2011-12-17T15:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137129",
    "user": "https://github.com/saraedum"
}
```

Replying to [comment:3 eviatarbach]:
> There's some other problems with the digits argument; it accepts non-integer values and zero. Can you add a sanity check?

This ticket tries only to improve on the docstring of numerical_approx(). Adding sanity checks would make sense, though. I suggest you open a new ticket if you want to add sanity checks.



---

archive/issue_comments_137130.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-12-17T15:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137130",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137131.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-17T19:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137131",
    "user": "https://github.com/eviatarbach"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_137132.json:
```json
{
    "body": "Yes, I'll create another patch.\n\nHowever, could you change the wording from \"numerical instability\"? This suggests there is something wrong. I like how Julian R\u00fcth explained it: \"This approximates both pi and 3 with two bits of precision and then computes their difference\".",
    "created_at": "2011-12-17T19:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137132",
    "user": "https://github.com/eviatarbach"
}
```

Yes, I'll create another patch.

However, could you change the wording from "numerical instability"? This suggests there is something wrong. I like how Julian Rüth explained it: "This approximates both pi and 3 with two bits of precision and then computes their difference".



---

archive/issue_comments_137133.json:
```json
{
    "body": "Ok. I have no clue about numerical analysis, but isn't that what numerical instability is about, i.e., addition not being numerically stable? Maybe I got the term wrong here.\nIn any case, feel free to add this explanatory sentence.",
    "created_at": "2011-12-17T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137133",
    "user": "https://github.com/saraedum"
}
```

Ok. I have no clue about numerical analysis, but isn't that what numerical instability is about, i.e., addition not being numerically stable? Maybe I got the term wrong here.
In any case, feel free to add this explanatory sentence.



---

archive/issue_comments_137134.json:
```json
{
    "body": "I think \"numerical instability\" refers to propagation of errors in numerical algorithms, which is not what is occurring here. According to the sage-devel thread it is the intended behaviour, although perhaps unintuitive.",
    "created_at": "2011-12-17T22:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137134",
    "user": "https://github.com/eviatarbach"
}
```

I think "numerical instability" refers to propagation of errors in numerical algorithms, which is not what is occurring here. According to the sage-devel thread it is the intended behaviour, although perhaps unintuitive.



---

archive/issue_comments_137135.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-19T23:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137135",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137136.json:
```json
{
    "body": "Changing keywords from \"\" to \"beginner\".",
    "created_at": "2012-07-19T23:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137136",
    "user": "https://github.com/saraedum"
}
```

Changing keywords from "" to "beginner".



---

archive/issue_comments_137137.json:
```json
{
    "body": "Replying to [comment:8 eviatarbach]:\n> Yes, I'll create another patch.\n> \n> However, could you change the wording from \"numerical instability\"? This suggests there is something wrong. I like how Julian R\u00fcth explained it: \"This approximates both pi and 3 with two bits of precision and then computes their difference\".\n\nAre you happy with the wording now?",
    "created_at": "2012-07-19T23:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137137",
    "user": "https://github.com/saraedum"
}
```

Replying to [comment:8 eviatarbach]:
> Yes, I'll create another patch.
> 
> However, could you change the wording from "numerical instability"? This suggests there is something wrong. I like how Julian Rüth explained it: "This approximates both pi and 3 with two bits of precision and then computes their difference".

Are you happy with the wording now?



---

archive/issue_comments_137138.json:
```json
{
    "body": "Yes, looks good now. Sorry for delaying this.",
    "created_at": "2012-07-20T01:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137138",
    "user": "https://github.com/eviatarbach"
}
```

Yes, looks good now. Sorry for delaying this.



---

archive/issue_comments_137139.json:
```json
{
    "body": "Hi, looks nice!  This will be quite valuable.  Note that `Trac #11647` should probably use the new style of `:trac:`11647``.",
    "created_at": "2012-07-20T03:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137139",
    "user": "https://github.com/kcrisman"
}
```

Hi, looks nice!  This will be quite valuable.  Note that `Trac #11647` should probably use the new style of `:trac:`11647``.



---

archive/issue_comments_137140.json:
```json
{
    "body": "Ok. I changed Trac reference.",
    "created_at": "2012-07-20T12:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137140",
    "user": "https://github.com/saraedum"
}
```

Ok. I changed Trac reference.



---

archive/issue_comments_137141.json:
```json
{
    "body": "I like the following reviewer patch; to me, it clarifies one or two things.  If you think I've misstated them, let me know.  If it's fine with you, then click positive review!\n\nAlso, I think that #11647 probably should count as a dup of this.  My guess is that there is no way to ensure at least one correct digit without occasionally bringing along a second for the ride.\n\nEviatar, feel free to open that sanity check ticket as well.",
    "created_at": "2012-07-20T15:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137141",
    "user": "https://github.com/kcrisman"
}
```

I like the following reviewer patch; to me, it clarifies one or two things.  If you think I've misstated them, let me know.  If it's fine with you, then click positive review!

Also, I think that #11647 probably should count as a dup of this.  My guess is that there is no way to ensure at least one correct digit without occasionally bringing along a second for the ride.

Eviatar, feel free to open that sanity check ticket as well.



---

archive/issue_comments_137142.json:
```json
{
    "body": "Patchbot: apply trac_12120_numerical_approx.patch and trac_12120-review.patch",
    "created_at": "2012-07-20T15:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137142",
    "user": "https://github.com/kcrisman"
}
```

Patchbot: apply trac_12120_numerical_approx.patch and trac_12120-review.patch



---

archive/issue_comments_137143.json:
```json
{
    "body": "I would like to keep the examples without the `*100`. At least that's what my students ran into. The other changes you made are certainly an improvement.",
    "created_at": "2012-07-20T16:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137143",
    "user": "https://github.com/saraedum"
}
```

I would like to keep the examples without the `*100`. At least that's what my students ran into. The other changes you made are certainly an improvement.



---

archive/issue_comments_137144.json:
```json
{
    "body": "> I would like to keep the examples without the `*100`. At least that's what my students ran into. The other changes you made are certainly an improvement.\nOkay, I was just trying to make it clearer about the significant digits.  Otherwise one could have imagined that digits really means digits, because it so happens that with `pi`, the number of digits equals the number of significant digits!",
    "created_at": "2012-07-20T16:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137144",
    "user": "https://github.com/kcrisman"
}
```

> I would like to keep the examples without the `*100`. At least that's what my students ran into. The other changes you made are certainly an improvement.
Okay, I was just trying to make it clearer about the significant digits.  Otherwise one could have imagined that digits really means digits, because it so happens that with `pi`, the number of digits equals the number of significant digits!



---

archive/issue_comments_137145.json:
```json
{
    "body": "Attachment [trac_12120-review.patch](tarball://root/attachments/some-uuid/ticket12120/trac_12120-review.patch) by @kcrisman created at 2012-07-20 16:14:42",
    "created_at": "2012-07-20T16:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137145",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12120-review.patch](tarball://root/attachments/some-uuid/ticket12120/trac_12120-review.patch) by @kcrisman created at 2012-07-20 16:14:42



---

archive/issue_comments_137146.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-20T16:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137146",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137147.json:
```json
{
    "body": "Okay, I just kept *both*!  That can't hurt, and makes it clearer to me, at least, what's going on.\n\nNice work.",
    "created_at": "2012-07-20T16:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137147",
    "user": "https://github.com/kcrisman"
}
```

Okay, I just kept *both*!  That can't hurt, and makes it clearer to me, at least, what's going on.

Nice work.



---

archive/issue_comments_137148.json:
```json
{
    "body": "Sure. Thanks :)",
    "created_at": "2012-07-20T16:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137148",
    "user": "https://github.com/saraedum"
}
```

Sure. Thanks :)



---

archive/issue_comments_137149.json:
```json
{
    "body": "Attachment [trac_12120_numerical_approx.patch](tarball://root/attachments/some-uuid/ticket12120/trac_12120_numerical_approx.patch) by @jdemeyer created at 2012-07-31 06:47:44\n\nimprove docstring of numerical_approx()",
    "created_at": "2012-07-31T06:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137149",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [trac_12120_numerical_approx.patch](tarball://root/attachments/some-uuid/ticket12120/trac_12120_numerical_approx.patch) by @jdemeyer created at 2012-07-31 06:47:44

improve docstring of numerical_approx()



---

archive/issue_comments_137150.json:
```json
{
    "body": "Re-created the patch using `hg export` (which you should always use to create a patch).",
    "created_at": "2012-07-31T06:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137150",
    "user": "https://github.com/jdemeyer"
}
```

Re-created the patch using `hg export` (which you should always use to create a patch).



---

archive/issue_comments_137151.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-01T12:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11948#issuecomment-137151",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
