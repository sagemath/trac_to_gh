# Issue 11864: improve doctest coverage of gsl/interpolation.pyx from 0% to 100%

archive/issues_011864.json:
```json
{
    "body": "Assignee: jason, jkantor\n\nPart of metaticket #12024.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12036\n\n",
    "created_at": "2011-11-15T01:46:54Z",
    "labels": [
        "component: numerical",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "improve doctest coverage of gsl/interpolation.pyx from 0% to 100%",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11864",
    "user": "https://github.com/williamstein"
}
```
Assignee: jason, jkantor

Part of metaticket #12024.

Issue created by migration from https://trac.sagemath.org/ticket/12036





---

archive/issue_comments_135585.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-15T16:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135585",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_135586.json:
```json
{
    "body": "Attachment [trac_12036.patch](tarball://root/attachments/some-uuid/ticket12036/trac_12036.patch) by @williamstein created at 2011-11-15 16:51:47\n\nNote:  This class does not support pickling, e.g., `loads(dumps(spline(...)))` just returns None!?   And the data hiding isn't so good with it being possible to get a reference to the underlying list.  Anyway, the point of this ticket is just to get coverage up to 100%, not to try to completely rewrite the code.  Supporting pickling could be on another ticket.  It would be an easy exercise in `__reduce__`.",
    "created_at": "2011-11-15T16:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135586",
    "user": "https://github.com/williamstein"
}
```

Attachment [trac_12036.patch](tarball://root/attachments/some-uuid/ticket12036/trac_12036.patch) by @williamstein created at 2011-11-15 16:51:47

Note:  This class does not support pickling, e.g., `loads(dumps(spline(...)))` just returns None!?   And the data hiding isn't so good with it being possible to get a reference to the underlying list.  Anyway, the point of this ticket is just to get coverage up to 100%, not to try to completely rewrite the code.  Supporting pickling could be on another ticket.  It would be an easy exercise in `__reduce__`.



---

archive/issue_comments_135587.json:
```json
{
    "body": "\n```\nsage -coverage sage/gsl/interpolation.pyx \n----------------------------------------------------------------------\nsage/gsl/interpolation.pyx\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE sage/gsl/interpolation.pyx: 100% (9 of 9)\n----------------------------------------------------------------------\nsage -t  \"devel/sage-main/sage/gsl/interpolation.pyx\"       \n\t [17.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 18.0 seconds\n```\n\nI assume the error about the testsuite would be part of this other ticket.\n\nAlso, the cdef methods are not tested (which I think is supposed to be okay), and neither is the `__dealloc__` method, which apparently is ok since it didn't show up on `sage -coverage`.\n\n\n----\n\nQuestions: \n* Should this be in the reference manual?\n* Should some of the examples in this patch (I really like the `__setitem__` examples) be in the main thing, so that `spline?` is more useful?\n\nIf so, these might as well be taken care of now.\n\nOtherwise looks good.",
    "created_at": "2011-11-15T19:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135587",
    "user": "https://github.com/kcrisman"
}
```


```
sage -coverage sage/gsl/interpolation.pyx 
----------------------------------------------------------------------
sage/gsl/interpolation.pyx
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE sage/gsl/interpolation.pyx: 100% (9 of 9)
----------------------------------------------------------------------
sage -t  "devel/sage-main/sage/gsl/interpolation.pyx"       
	 [17.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 18.0 seconds
```

I assume the error about the testsuite would be part of this other ticket.

Also, the cdef methods are not tested (which I think is supposed to be okay), and neither is the `__dealloc__` method, which apparently is ok since it didn't show up on `sage -coverage`.


----

Questions: 
* Should this be in the reference manual?
* Should some of the examples in this patch (I really like the `__setitem__` examples) be in the main thing, so that `spline?` is more useful?

If so, these might as well be taken care of now.

Otherwise looks good.



---

archive/issue_comments_135588.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-11-15T19:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135588",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_135589.json:
```json
{
    "body": "Adding a `TestSuite(s).run()` run would be nice, but it will fail, since there is no support for pickling in this code.  Adding this to reference manual would be nice too, but that's other work.   \n\nRegarding __setitem__, though it is perhaps interesting that this is supported, I doubt most people would even think to want to change the points that they are interpolating through after they create the spline. \n\nBasically, I want modifications to code that I doctest to be minimal -- I'm adding tests to get the coverage score to 90% for sage-5.0.  I don't want to introduce bugs.   Say what you will about this patch, it can't introduce bugs because it only changes docstrings.  I would like it refereed on those merits.  Keep in mind that I'm not introducing a *new* class into Sage for the first time.   If that were the case, then having TestSuite, pickling support, etc., would be absolutely required.   \n\nOpening and resolving a new ticket to do everything you suggest will be easier now that this file has 100% coverage, since at least when adding some new code, you'll have some tests to run to reduce the chances the new code doesn't break things.",
    "created_at": "2011-11-16T06:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135589",
    "user": "https://github.com/williamstein"
}
```

Adding a `TestSuite(s).run()` run would be nice, but it will fail, since there is no support for pickling in this code.  Adding this to reference manual would be nice too, but that's other work.   

Regarding __setitem__, though it is perhaps interesting that this is supported, I doubt most people would even think to want to change the points that they are interpolating through after they create the spline. 

Basically, I want modifications to code that I doctest to be minimal -- I'm adding tests to get the coverage score to 90% for sage-5.0.  I don't want to introduce bugs.   Say what you will about this patch, it can't introduce bugs because it only changes docstrings.  I would like it refereed on those merits.  Keep in mind that I'm not introducing a *new* class into Sage for the first time.   If that were the case, then having TestSuite, pickling support, etc., would be absolutely required.   

Opening and resolving a new ticket to do everything you suggest will be easier now that this file has 100% coverage, since at least when adding some new code, you'll have some tests to run to reduce the chances the new code doesn't break things.



---

archive/issue_comments_135590.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-11-16T06:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135590",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_135591.json:
```json
{
    "body": "I wasn't too worried about `TestSuite`, just making sure (note I said \"this *other* ticket\", not meaning the current one).  I'll take your point on the `__setitem__` example as well, I don't use splines myself too much.\n\nThe reference manual issue is now #12045.",
    "created_at": "2011-11-16T13:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135591",
    "user": "https://github.com/kcrisman"
}
```

I wasn't too worried about `TestSuite`, just making sure (note I said "this *other* ticket", not meaning the current one).  I'll take your point on the `__setitem__` example as well, I don't use splines myself too much.

The reference manual issue is now #12045.



---

archive/issue_comments_135592.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-16T13:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135592",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_135593.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-16T20:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11864#issuecomment-135593",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
