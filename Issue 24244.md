# Issue 24244: Replace PARI stackwarn.patch with upstream version

Issue created by migration from https://trac.sagemath.org/ticket/24481

Original creator: jdemeyer

Original creation time: 2018-01-07 09:11:52

CC:  infinity0 thansen vdelecroix defeo embray fbissey

Upstream PARI has finally accepted the patch `stackwarn.patch` which has been in Sage since about 2 years. Unfortunately, they decide to revert of that patch again. In this ticket, we replace `stackwarn.patch` by the version which was accepted upstream.


---

Comment by jdemeyer created at 2018-01-07 09:47:44

New commits:


---

Comment by jdemeyer created at 2018-01-07 10:28:24

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-01-10 09:58:51

Genuine breakage on the Cygwin buildbot.


---

Comment by jdemeyer created at 2018-01-10 09:58:51

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-01-10 10:01:23

The problem is that `lcalc` is run in a different process so it is not affected by the change in the `debugmem` default.


---

Comment by git created at 2018-01-10 10:08:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2018-01-10 10:09:17

Changing status from needs_work to needs_review.


---

Comment by embray created at 2018-01-10 12:46:48

I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?


---

Comment by jdemeyer created at 2018-01-10 12:57:33

Replying to [comment:11 embray]:
> I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?

I have no idea why... I just noticed failures on the Cygwin patchbot and not on others.

In any case, the current branch should be tested on Cygwin before positive review can be given.


---

Comment by embray created at 2018-01-10 13:01:18

Oh I see--neat.  I've been having so many problems with the patchbot lately I was sort of surprised to see that it produced a useful result.  That's good to know...


---

Comment by embray created at 2018-01-11 15:35:17

See related #24516


---

Comment by jdemeyer created at 2018-01-11 15:44:26

Actually, #24516 is unrelated. I _thought_ that it was related because both this and #24516 deal with memory allocation warnings in PARI. But the warnings are different. This ticket deals with debug messages which are shown whenever the PARI stack size changes (and which can be disabled). The other ticket #24516 deals with messages which are shown when an allocation failed (and which cannot be disabled)


---

Comment by git created at 2018-01-11 15:53:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-01-11 15:54:24

I removed the last commit because it is not needed for this ticket.


---

Comment by fbissey created at 2018-01-23 20:58:51

Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?


---

Comment by jdemeyer created at 2018-01-23 21:24:32

Replying to [comment:19 fbissey]:
> Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?

Updating the patch is trivially simple compared to updating PARI as a whole. That is the reason.


---

Comment by saraedum created at 2018-04-03 20:25:32

The last time the cygwin patchbot seemed to be happy. Has this been fixed now?


---

Comment by saraedum created at 2018-04-03 20:25:32

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2018-04-03 20:29:34

Replying to [comment:21 saraedum]:
> Has _this_ been fixed now?

Has what been fixed?


---

Comment by saraedum created at 2018-04-03 21:10:15

Replying to [comment:22 jdemeyer]:
> Replying to [comment:21 saraedum]:
> > Has _this_ been fixed now?
> 
> Has what been fixed?

Sorry: Have the cygwin issues mentioned above been fixed now? i.e., could this be merged now?


---

Comment by jdemeyer created at 2018-04-04 05:27:12

Replying to [comment:23 saraedum]:
> Have the cygwin issues mentioned above been fixed now?

Yes, they turned out to be unrelated to this ticket (that is also why I did not understand your question).


---

Comment by jdemeyer created at 2018-04-04 05:27:12

Changing status from needs_info to needs_review.


---

Comment by saraedum created at 2018-04-04 20:28:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-05-08 17:26:50

Resolution: fixed
