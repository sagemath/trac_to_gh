# Issue 29517: Remove packages that handle backporting from Python 3 to Python 2

Issue created by migration from https://trac.sagemath.org/ticket/29754

Original creator: jhpalmieri

Original creation time: 2020-05-28 20:32:49

Keywords: sd109

Remove

- backports_abc
- backports_functools_lru_cache
- backports_shutil_get_terminal_size
- backports_ssl_match_hostname
- configparser
- enum34
- functools32
- future
- ipaddress
- pathlib2
- singledispatch
- subprocess32
- typing

Also remove the use of `six` in the build process. (There are still many uses of `six` in the Sage library, and also the package `traitlets` uses it, so we cannot delete `six` now.)

Should we also remove `sagenb`? That would let us remove

- flask
- flask_autoindex
- flask_babel
- flask_oldsessions
- flask_openid
- flask_silk
- sagenb
- twisted ? (it may be used by terminado when it is present, but terminado may function fine without it)
- werkzeug

If the sagenb removal is a good idea, it could also be done on a separate ticket.


---

Comment by dimpase created at 2020-05-28 20:34:31

sagenb should go, too, it doesn't work in py3.


---

Comment by jhpalmieri created at 2020-05-28 21:53:51

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2020-05-28 21:53:51

New commits:


---

Comment by git created at 2020-05-28 22:34:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-28 22:37:54

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-28 22:40:40

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-28 22:41:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-28 22:48:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2020-05-28 22:52:39

I have to test my new branch. I'll set it back to "needs review" when that's done.


---

Comment by jhpalmieri created at 2020-05-28 22:52:39

Changing status from needs_review to needs_info.


---

Comment by jhpalmieri created at 2020-05-29 01:46:23

Changing status from needs_info to needs_review.


---

Comment by jhpalmieri created at 2020-05-29 01:46:23

Okay, ready for review.
----
New commits:


---

Comment by dimpase created at 2020-05-29 22:26:08

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-05-29 22:26:08

lgtm


---

Comment by jhpalmieri created at 2020-05-29 23:06:56

Thanks, but as you and Matthias noted on another ticket, this needs rebasing. I'll work on that.


---

Comment by jhpalmieri created at 2020-05-29 23:06:56

Changing status from positive_review to needs_info.


---

Comment by git created at 2020-05-30 04:13:54

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by jhpalmieri created at 2020-05-30 04:14:54

Changing status from needs_info to needs_review.


---

Comment by jhpalmieri created at 2020-05-30 04:14:54

Rebased to #29757.


---

Comment by mkoeppe created at 2020-06-06 17:06:40

Can `zope_interface` also be removed?

```
$ grep zope_interface build/pkgs/*/dependencies
build/pkgs/twisted/dependencies:$(PYTHON) | $(PYTHON_TOOLCHAIN) zope_interface
```



---

Comment by dimpase created at 2020-06-06 17:26:01

I tested this meanwhile, it works. Most probably zope_interface may go too, it only is mentioned  in doctests (and as a dependence of removed here twisted)


---

Comment by mkoeppe created at 2020-06-06 17:42:10

If this version here works, let's get this ticket in, and do the `zope_interface` removal on a follow-up ticket.


---

Comment by mkoeppe created at 2020-06-06 17:42:52

This could happen on #29803.


---

Comment by mkoeppe created at 2020-06-06 18:19:44

Removal of `zope_interface` is now done on #29803, actually I changed it to a dummy script package there so that #29803 is independent of this one here.


---

Comment by dimpase created at 2020-06-06 20:54:32

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-06-06 20:54:32

lgtm


---

Comment by mkoeppe created at 2020-06-06 21:27:44

Conflicts with #29745


---

Comment by mkoeppe created at 2020-06-06 21:28:17

New commits:


---

Comment by mkoeppe created at 2020-06-07 21:07:53

Follow-up: #29823


---

Comment by jhpalmieri created at 2020-06-16 20:42:35

Another follow-up: #29878


---

Comment by jhpalmieri created at 2020-06-17 23:08:01

And another: #29885 (remove "sage -n sagenb" as an advertised option, and strip the SageNB code from the `sage-notebook` script).


---

Comment by vbraun created at 2020-06-24 23:39:43

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2020-06-24 23:39:43

Merge conflict


---

Comment by git created at 2020-06-25 00:02:34

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by mkoeppe created at 2020-06-25 00:03:27

Changing status from needs_work to positive_review.


---

Comment by git created at 2020-06-26 16:33:13

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-06-26 16:33:13

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by mkoeppe created at 2020-06-26 16:33:36

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-26 16:33:36

merged in the latest beta


---

Comment by vbraun created at 2020-06-27 09:26:40

Resolution: fixed
