# Issue 13940: more IPython 0.13 issues

Issue created by migration from https://trac.sagemath.org/ticket/14144

Original creator: jhpalmieri

Original creation time: 2013-02-17 16:32:11

Assignee: tbd

Another issue with the new IPython: if someone has cloned their Sage library, then previous versions of Sage would print the branch name on startup:

```
Loading Sage library. Current Mercurial branch is: my-branch
```

With #12719, the branch no longer prints on startup. The sage-combinat group, for example, use branches all the time, so this behavior should be restored.


---

Attachment


---

Comment by jhpalmieri created at 2013-02-17 16:33:16

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2013-02-17 16:33:16

Did I do this right? It works for me in limited testing.


---

Comment by vbraun created at 2013-02-17 16:58:16

In general, I don't think its a good idea to make the startup banner depend on any externalities. The more miscellaneous stuff you print at startup, the more likely you are to break the sage<->sage interface or doctests for a few users with a peculiar setup.

For the record, I removed the branch printing in #14024 because it was broken and nobody noticed (until it hit my patchbot, which uses branches). 

I don't mind putting it back in, but is view of the switch to git I don't think its worth the effort.


---

Comment by jhpalmieri created at 2013-02-17 17:07:54

I don't use branches, so it doesn't affect me, but the sage-combinat script starts by making a clone of the Sage library. So anyone who uses that uses branches. It seems like an overly hasty decision to stop printing the branches, since it affects a large group of people.


---

Comment by vbraun created at 2013-02-17 17:27:00

I agree that it'll be a cosmetic change in the startup banner for users of the combinat queue, but I fail to see the issue. If you switch branches regularly then you probably know which one you are on (and can be found out easier than to start Sage and look at the banner; its wrong to train our users to rely on that). If you just use Sage then its of no concern to you whether the sage-combinat script made a branch or not.


---

Comment by vbraun created at 2013-02-17 17:27:00

Changing component from PLEASE CHANGE to packages.


---

Comment by jdemeyer created at 2013-02-17 19:06:05

Changing type from PLEASE CHANGE to defect.


---

Comment by jhpalmieri created at 2013-02-17 20:54:53

Here's a variation on the first patch, which I hope won't interfere with doctesting.


---

Comment by jdemeyer created at 2013-05-16 07:36:58

Changing component from packages: standard to interfaces.


---

Comment by kcrisman created at 2013-07-10 19:34:49

Dare I ask if this needs a doctest?  Perhaps it's not possible, but then we should somehow indicate this...


---

Comment by vbraun created at 2013-07-10 19:36:13

I think there is no point in working on this ticket, work on the git transition instead.


---

Comment by kcrisman created at 2013-07-10 19:39:23

Well, perhaps one should say that those working on the git transition should work on the git transition.  If that goes for another year (which seems plausible if only one person is currently working hard on it) then this ticket is useful.


---

Comment by jhpalmieri created at 2013-07-10 20:00:48

Re a doctest: the code says

```
if (not DOCTEST_MODE) and branch: 
    print branch 
```

so I don't know how to make a doctest that will reveal anything helpful. Here's an updated version with a longer docstring.


---

Attachment


---

Comment by ncohen created at 2013-12-02 15:49:17

Changing status from needs_review to needs_info.


---

Comment by ncohen created at 2013-12-02 15:49:17

Hmmmm... With the first git release planned for the end of the year, does this still make sense ? I've been using sage-git for a while myself and there are no branches there `^^;`
I mean. Not the same kind `^^;`

Nathann


---

Comment by jhpalmieri created at 2014-01-31 19:42:00

Should we close this ticket? Is there any reason we should be printing the git branch as part of the banner? (I'm happy to close it.)


---

Comment by vbraun created at 2014-01-31 19:47:30

If you want to keep track of the git branch then I'd recommend putting it in the bash prompt (#15590). Thats what I'm using personally. Bonus: works for other projects using git, too.


---

Comment by vbraun created at 2014-01-31 19:47:30

Resolution: wontfix
