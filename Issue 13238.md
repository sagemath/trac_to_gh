# Issue 13238: Patchbot timeouts

Issue created by migration from https://trac.sagemath.org/ticket/13410

Original creator: vbraun

Original creation time: 2012-08-29 13:49:32

Assignee: tbd

CC:  kini dkrenn ddrake davidloeffler schilly jdemeyer

The patchbot calls 

```
  handle = urllib2.urlopen(url, timeout=5)
```

in `trac.py` instead of using the configurable timeout. If you have many dependencies then the probability that one takes 5 seconds to retrieve can get close to 100%...


---

Comment by robertwb created at 2012-08-31 11:18:41

New spkg to try out at http://sage.math.washington.edu/home/robertwb/patches/patchbot-HEAD.spkg . Lots of other improvements too: https://github.com/robertwb/sage-patchbot/


---

Comment by robertwb created at 2012-09-01 05:15:40

Changing status from new to needs_review.


---

Comment by robertwb created at 2012-09-01 05:15:40

Fixes this bug, as well as other robustness improvements, more powerful plugins, and general cleanup.

Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg


---

Comment by vbraun created at 2012-09-02 11:30:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-09-02 11:30:10

Looks good to me!


---

Comment by schilly created at 2012-09-03 14:42:12

i just put this optional spkg on the server+mirrors.


---

Comment by robertwb created at 2012-09-04 07:18:11

Thanks!


---

Comment by kini created at 2012-09-04 09:14:12

Harald, the list of packages still lists 1.0, but only 1.1 exists on the server, hence `sage -i patchbot` fails.


---

Comment by schilly created at 2012-09-04 09:24:22

what list of packages? ah, well. i have no idea what this script really does or is supposed to do. i ran it again and it works.

maybe it does create two entries, if there are two versions (and it archives the older one). in the second pass, the old one was no longer there.


---

Comment by kini created at 2012-09-04 09:33:05

I'm not sure what list of packages, but all I know is that `sage -i patchbot` said something like "found latest version is patchbot-1.0, attempting to download, 404".


---

Comment by schilly created at 2012-09-04 09:37:54

kini, just for the record, i'm pretty sure it's this list:
  http://sagemath.org/mirror/spkg/optional/list
which had two entries (one for 1.0 and one with 1.1).


---

Comment by vbraun created at 2012-09-04 10:03:27

For the record, `./sage -f patchbot` worked for me and pulled in v1.1.


---

Comment by jdemeyer created at 2012-09-05 07:20:32

Resolution: fixed
