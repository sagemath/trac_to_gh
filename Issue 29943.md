# Issue 29943: Category Modules should provide a parent method module_morphism compatible with ModulesWithBasis.module_morphism

archive/issues_029943.json:
```json
{
    "body": "CC:  tscrim egourgoulhon @mjungmath\n\nBecause there is no distinguished basis, it would only support the option `function` of `ModulesWithBasis.module_morphism`:\n\n\n```\n        def module_morphism(self, on_basis=None, matrix=None, function=None,\n                            diagonal=None, triangular=None, unitriangular=False,\n                            **keywords):\n            r\"\"\"\n            Construct a module morphism from ``self`` to ``codomain``.\n\n            Let ``self`` be a module `X` with a basis indexed by `I`.\n            This constructs a morphism `f: X \\to Y` by linearity from\n            a map `I \\to Y` which is to be its restriction to the\n            basis `(x_i)_{i \\in I}` of `X`. Some variants are possible\n            too.\n\n            INPUT:\n\n            - ``self`` -- a parent `X` in ``ModulesWithBasis(R)`` with\n              basis `x=(x_i)_{i\\in I}`.\n\n            Exactly one of the four following options must be\n            specified in order to define the morphism:\n\n            - ``on_basis`` -- a function `f` from `I` to `Y`\n            - ``diagonal`` -- a function `d` from `I` to `R`\n*KEEP*      - ``function`` -- a function `f` from `X` to `Y`\n            - ``matrix``   -- a matrix of size `\\dim Y \\times \\dim X`\n              (if the keyword ``side`` is set to ``'left'``) or\n              `\\dim Y \\times \\dim X` (if this keyword is ``'right'``)\n\n            Further options include:\n\n*KEEP*      - ``codomain`` -- the codomain `Y` of the morphism (default:\n              ``f.codomain()`` if it's defined; otherwise it must be specified)\n\n*KEEP*      - ``category`` -- a category or ``None`` (default: `None``)\n\n            - ``zero`` -- the zero of the codomain (default: ``codomain.zero()``);\n              can be used (with care) to define affine maps.\n              Only meaningful with ``on_basis``.\n\n            - ``position`` -- a non-negative integer specifying which\n              positional argument is used as the input of the function `f`\n              (default: 0); this is currently only used with ``on_basis``.\n\n            - ``triangular`` --  (default: ``None``) ``\"upper\"`` or\n              ``\"lower\"`` or ``None``:\n\n              * ``\"upper\"`` - if the\n                :meth:`~ModulesWithBasis.ElementMethods.leading_support`\n                of the image of the basis vector `x_i` is `i`, or\n\n              * ``\"lower\"`` - if the\n                :meth:`~ModulesWithBasis.ElementMethods.trailing_support`\n                of the image of the basis vector `x_i` is `i`.\n\n            - ``unitriangular`` -- (default: ``False``) a boolean.\n              Only meaningful for a triangular morphism.\n              As a shorthand, one may use ``unitriangular=\"lower\"``\n              for ``triangular=\"lower\", unitriangular=True``.\n\n            - ``side`` -- \"left\" or \"right\" (default: \"left\")\n              Only meaningful for a morphism built from a matrix.\n\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30180\n\n",
    "created_at": "2020-07-20T17:28:36Z",
    "labels": [
        "linear algebra",
        "major",
        "enhancement"
    ],
    "title": "Category Modules should provide a parent method module_morphism compatible with ModulesWithBasis.module_morphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29943",
    "user": "mkoeppe"
}
```
CC:  tscrim egourgoulhon @mjungmath

Because there is no distinguished basis, it would only support the option `function` of `ModulesWithBasis.module_morphism`:


```
        def module_morphism(self, on_basis=None, matrix=None, function=None,
                            diagonal=None, triangular=None, unitriangular=False,
                            **keywords):
            r"""
            Construct a module morphism from ``self`` to ``codomain``.

            Let ``self`` be a module `X` with a basis indexed by `I`.
            This constructs a morphism `f: X \to Y` by linearity from
            a map `I \to Y` which is to be its restriction to the
            basis `(x_i)_{i \in I}` of `X`. Some variants are possible
            too.

            INPUT:

            - ``self`` -- a parent `X` in ``ModulesWithBasis(R)`` with
              basis `x=(x_i)_{i\in I}`.

            Exactly one of the four following options must be
            specified in order to define the morphism:

            - ``on_basis`` -- a function `f` from `I` to `Y`
            - ``diagonal`` -- a function `d` from `I` to `R`
*KEEP*      - ``function`` -- a function `f` from `X` to `Y`
            - ``matrix``   -- a matrix of size `\dim Y \times \dim X`
              (if the keyword ``side`` is set to ``'left'``) or
              `\dim Y \times \dim X` (if this keyword is ``'right'``)

            Further options include:

*KEEP*      - ``codomain`` -- the codomain `Y` of the morphism (default:
              ``f.codomain()`` if it's defined; otherwise it must be specified)

*KEEP*      - ``category`` -- a category or ``None`` (default: `None``)

            - ``zero`` -- the zero of the codomain (default: ``codomain.zero()``);
              can be used (with care) to define affine maps.
              Only meaningful with ``on_basis``.

            - ``position`` -- a non-negative integer specifying which
              positional argument is used as the input of the function `f`
              (default: 0); this is currently only used with ``on_basis``.

            - ``triangular`` --  (default: ``None``) ``"upper"`` or
              ``"lower"`` or ``None``:

              * ``"upper"`` - if the
                :meth:`~ModulesWithBasis.ElementMethods.leading_support`
                of the image of the basis vector `x_i` is `i`, or

              * ``"lower"`` - if the
                :meth:`~ModulesWithBasis.ElementMethods.trailing_support`
                of the image of the basis vector `x_i` is `i`.

            - ``unitriangular`` -- (default: ``False``) a boolean.
              Only meaningful for a triangular morphism.
              As a shorthand, one may use ``unitriangular="lower"``
              for ``triangular="lower", unitriangular=True``.

            - ``side`` -- "left" or "right" (default: "left")
              Only meaningful for a morphism built from a matrix.

```



Issue created by migration from https://trac.sagemath.org/ticket/30180





---

archive/issue_comments_425322.json:
```json
{
    "body": "Providing this method would allow us to simplify #30094 a tiny bit.",
    "created_at": "2020-07-20T17:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425322",
    "user": "mkoeppe"
}
```

Providing this method would allow us to simplify #30094 a tiny bit.



---

archive/issue_comments_425323.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-07-21T17:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425323",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_425324.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-21T17:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425324",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_425325.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-21T18:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425325",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425326.json:
```json
{
    "body": "LGTM, except maybe for some pyflakes error reported by the patchbot, which are not clear to me.",
    "created_at": "2020-07-22T09:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425326",
    "user": "egourgoulhon"
}
```

LGTM, except maybe for some pyflakes error reported by the patchbot, which are not clear to me.



---

archive/issue_comments_425327.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-22T09:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425327",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425328.json:
```json
{
    "body": "You can ignore the pyflakes errors since they are unrelated to this ticket.",
    "created_at": "2020-07-22T12:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425328",
    "user": "tscrim"
}
```

You can ignore the pyflakes errors since they are unrelated to this ticket.



---

archive/issue_comments_425329.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-07-22T15:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425329",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_425330.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-28T22:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29943#issuecomment-425330",
    "user": "vbraun"
}
```

Resolution: fixed
