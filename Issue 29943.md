# Issue 29943: Category Modules should provide a parent method module_morphism compatible with ModulesWithBasis.module_morphism

Issue created by migration from https://trac.sagemath.org/ticket/30180

Original creator: mkoeppe

Original creation time: 2020-07-20 17:28:36

CC:  tscrim egourgoulhon @mjungmath

Because there is no distinguished basis, it would only support the option `function` of `ModulesWithBasis.module_morphism`:


```
        def module_morphism(self, on_basis=None, matrix=None, function=None,
                            diagonal=None, triangular=None, unitriangular=False,
                            **keywords):
            r"""
            Construct a module morphism from ``self`` to ``codomain``.

            Let ``self`` be a module `X` with a basis indexed by `I`.
            This constructs a morphism `f: X \to Y` by linearity from
            a map `I \to Y` which is to be its restriction to the
            basis `(x_i)_{i \in I}` of `X`. Some variants are possible
            too.

            INPUT:

            - ``self`` -- a parent `X` in ``ModulesWithBasis(R)`` with
              basis `x=(x_i)_{i\in I}`.

            Exactly one of the four following options must be
            specified in order to define the morphism:

            - ``on_basis`` -- a function `f` from `I` to `Y`
            - ``diagonal`` -- a function `d` from `I` to `R`
*KEEP*      - ``function`` -- a function `f` from `X` to `Y`
            - ``matrix``   -- a matrix of size `\dim Y \times \dim X`
              (if the keyword ``side`` is set to ``'left'``) or
              `\dim Y \times \dim X` (if this keyword is ``'right'``)

            Further options include:

*KEEP*      - ``codomain`` -- the codomain `Y` of the morphism (default:
              ``f.codomain()`` if it's defined; otherwise it must be specified)

*KEEP*      - ``category`` -- a category or ``None`` (default: `None``)

            - ``zero`` -- the zero of the codomain (default: ``codomain.zero()``);
              can be used (with care) to define affine maps.
              Only meaningful with ``on_basis``.

            - ``position`` -- a non-negative integer specifying which
              positional argument is used as the input of the function `f`
              (default: 0); this is currently only used with ``on_basis``.

            - ``triangular`` --  (default: ``None``) ``"upper"`` or
              ``"lower"`` or ``None``:

              * ``"upper"`` - if the
                :meth:`~ModulesWithBasis.ElementMethods.leading_support`
                of the image of the basis vector `x_i` is `i`, or

              * ``"lower"`` - if the
                :meth:`~ModulesWithBasis.ElementMethods.trailing_support`
                of the image of the basis vector `x_i` is `i`.

            - ``unitriangular`` -- (default: ``False``) a boolean.
              Only meaningful for a triangular morphism.
              As a shorthand, one may use ``unitriangular="lower"``
              for ``triangular="lower", unitriangular=True``.

            - ``side`` -- "left" or "right" (default: "left")
              Only meaningful for a morphism built from a matrix.

```




---

Comment by mkoeppe created at 2020-07-20 17:30:33

Providing this method would allow us to simplify #30094 a tiny bit.


---

Comment by mkoeppe created at 2020-07-21 17:32:00

New commits:


---

Comment by mkoeppe created at 2020-07-21 17:32:00

Changing status from new to needs_review.


---

Comment by git created at 2020-07-21 18:36:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2020-07-22 09:24:48

LGTM, except maybe for some pyflakes error reported by the patchbot, which are not clear to me.


---

Comment by egourgoulhon created at 2020-07-22 09:24:48

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2020-07-22 12:06:16

You can ignore the pyflakes errors since they are unrelated to this ticket.


---

Comment by mkoeppe created at 2020-07-22 15:32:58

Thanks!


---

Comment by vbraun created at 2020-07-28 22:32:06

Resolution: fixed
