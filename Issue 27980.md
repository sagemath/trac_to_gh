# Issue 27980: awali spkg-install wrong on Python 3

Issue created by migration from https://trac.sagemath.org/ticket/28217

Original creator: vdelecroix

Original creation time: 2019-07-19 20:39:50

CC:  slabbe tmonteil

On Python 3 the awali package tries to build with Python 2...


---

Comment by vdelecroix created at 2019-07-19 20:42:07

New commits:


---

Comment by vdelecroix created at 2019-07-19 20:42:07

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2019-07-19 20:42:42

Changing keywords from "" to "days100".


---

Comment by vdelecroix created at 2019-07-19 20:47:45

Changing keywords from "days100" to "py3 days100".


---

Comment by chapoton created at 2019-07-20 06:32:15

what about using `sdh_cmake` ? I am not sure if that uses the correct python though.


---

Comment by vdelecroix created at 2019-07-20 06:51:10

Replying to [comment:4 chapoton]:
> what about using `sdh_cmake` ? I am not sure if that uses the correct python though.

Using `sdh_cmake` is a good idea.

I am not sure whether the variable `PYTHON` is the standard option for the path to the Python executable in general.


---

Comment by vdelecroix created at 2019-07-20 07:18:59

Here is what `sdh_cmake` does

```
    echo "Configuring $PKG_NAME with cmake"
    cmake . -DCMAKE_INSTALL_PREFIX="${SAGE_LOCAL}" \
            -DCMAKE_INSTALL_LIBDIR=lib \
            "$@"
```

awali seems to use some non-standard version of this, namely `INSTALL_PREFIX`. So the `sdh_cmake` script is useless in this situation.


---

Comment by tmonteil created at 2019-07-20 10:01:12

Maybe `sdh_cmake` helps for package removal, see #28218.


---

Comment by chapoton created at 2019-07-24 09:47:07

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-07-24 09:47:07

ok, this will do the job for the moment


---

Comment by vbraun created at 2019-07-29 21:54:49

Resolution: fixed
