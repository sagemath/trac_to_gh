# Issue 13532: add content method to symbolic expressions

Issue created by migration from https://trac.sagemath.org/ticket/13736

Original creator: burcin

Original creation time: 2012-11-21 14:23:53

Assignee: burcin

Attached patch provides a thin wrapper around the `content()` method in pynac.


---

Comment by burcin created at 2012-11-21 14:25:33

Changing status from new to needs_review.


---

Attachment


---

Comment by kcrisman created at 2012-11-21 16:24:24

Is "content" a well-known thing (especially for non-polynomials)?  I did find the definition in the Ginac documentation, but this should probably be slightly clarified since it will show up in the tab-completion.    Especially since this doesn't provide the corresponding `unit` and `primpart` methods (which might even be confused with other things in algebra) I'm reluctant for this to go in by itself.  Also,

```
sage: (2*x+4*sin(y)).content(2*x)
2*x + 4*sin(y)
```

and things like that seem to not really be in the spirit of this.  If anything, shouldn't this content be `1`?  Or should this be disallowed?  I don't think it can be considered user error with such minimal doc of an unfamiliar term.

That said, I realize this is needed for #13609 and hence #13729, so I will try to be responsive to any responses!


---

Comment by burcin created at 2012-11-21 16:45:57

Thanks for looking into this.

I can rename the function to `_content()` and add a warning that the behavior is not well defined. I doubt if we will ever have proper input error checking or consistency with Sage's description of content for various domains. I definitely don't have time to implement this.


---

Comment by kcrisman created at 2012-11-23 16:19:55

Okay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?


---

Comment by burcin created at 2012-11-24 11:12:49

Replying to [comment:4 kcrisman]:
> Okay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?

Yes, it will do. I will upload a new patch once I settle on the correct solution of #13609. I don't expect to have time for this till next weekend though.


---

Comment by burcin created at 2012-11-24 11:12:49

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2013-05-07 17:16:52

This ticket seems to be a the bottom of the dependency chain for a few pynac-related patches... I'd be happy to review it when ready ;-)


---

Attachment


---

Comment by burcin created at 2013-05-07 17:33:43

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2013-05-09 09:49:13

It would be less confusing if we also wrap GiNaC unit and primpart and copy in some of the documentation

```
The methods

     ex ex::unit(const ex & x);
     ex ex::content(const ex & x);
     ex ex::primpart(const ex & x);
     ex ex::primpart(const ex & x, const ex & c);

return the unit part, content part, and primitive polynomial of a
multivariate polynomial with respect to the variable ‘x’ (the
unit part being the sign of the leading coefficient, the content
part being the GCD of the coefficients, and the primitive
polynomial being the input polynomial divided by the unit and
content parts). The second variant of primpart() expects the
previously calculated content part of the polynomial in c, which
enables it to work faster in the case where the content part has
already been computed. The product of unit, content, and
primitive part is the original polynomial.
```

This is `FactorTermsList[poly, x]` in Mathematica, so perhaps we can have a non-underscore method that returns all three?


---

Comment by vbraun created at 2013-05-09 10:21:54

I've taken the liberty to write the patch ;-) Feel free to set to positive review if you agree with it.


---

Comment by chapoton created at 2013-05-24 11:41:19

instructions for the bot:

apply trac_13736-content-take2.patch trac_13736-unit_primpart.patch


---

Attachment

Updated patch


---

Comment by burcin created at 2013-06-17 22:55:00

Looks good to me. We can switch this to positive review when the patchbot gets around to testing it.


---

Comment by burcin created at 2013-06-17 22:55:00

Changing keywords from "" to "sd48".


---

Comment by burcin created at 2013-06-17 23:22:14

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2013-06-18 19:53:45

So ... it's okay that `content` isn't a hidden method?


---

Comment by burcin created at 2013-06-18 20:18:05

Replying to [comment:13 kcrisman]:
> So ... it's okay that `content` isn't a hidden method?

Having `primpart()` and `unit()` available clarifies what these functions do. The answers they return are what one would expect as long as no exotic coefficients are involved. I don't know what would happen if you have a polynomial where the coefficients live in different domains. But this is the case for most symbolics functionality. I say we merge this and see if anyone complains. :)

That said, I don't understand why the patchbot complains about startup time. These patches should not effect that at all.


---

Comment by vbraun created at 2013-06-18 20:50:21

There might be unaccounted-for systematics in the startup timing code like hdd location and cylinder alignment. We are also talking about a tiny increase, too. And the probability is not *that* high. We have seen somewhat unexpected effects before, its not clear where it comes from.


---

Comment by jdemeyer created at 2013-06-19 12:25:01

Resolution: fixed
