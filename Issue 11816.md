# Issue 11816: Bug in LaTeX representation of Dirichlet characters

Issue created by migration from https://trac.sagemath.org/ticket/11988

Original creator: johanbosman

Original creation time: 2011-11-03 11:39:58

Assignee: craigcitro


```
sage: G = DirichletGroup(1234)
sage: latex(G.0)
Dirichlet character modulo 1234 of conductor 617 mapping $3 \mapsto \zeta_{616}$
```

When using the notebook, this will display the entire text in mathmode and add some dollar signs to it.


---

Comment by johanbosman created at 2011-11-03 14:31:26

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted


---

Comment by novoselt created at 2011-11-03 20:41:19

Changing status from needs_review to needs_work.


---

Comment by novoselt created at 2011-11-03 20:41:19

I don't think this is a very good solution: `_latex_` methods should return a string which renders the description nicely in LaTeX math mode.

Calling `latex` to wrap a string into verb environment and inserting explicit phantoms for space making purposes is not very aesthetically pleasing - the general framework does it because it seems to be the only option that works OK for general and unknown strings which may include special characters and be designed to be aligned.

Here I would suggest to use `\hbox` around the text that you want to see as text (hbox does work with jsmath, unlike other usual alternatives). This should take care of spaces as well, or you case use `\ ` etc.

I also think that it is MUCH better when the output in the doctest is complete, not just some selected piece of it. This allows to detect changes/regressions in the future.


---

Comment by johanbosman created at 2011-11-03 21:10:31

Okay, second attempt. :).


---

Comment by johanbosman created at 2011-11-03 21:10:31

Changing status from needs_work to needs_review.


---

Comment by novoselt created at 2011-11-05 22:06:09

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2011-11-05 22:06:09

Looks and works good!

Although you may want to consider

```
r'\hbox{Dirichlet character modulo } %s \hbox{ of conductor } %s \hbox{ mapping } %s' \
    %  (self.modulus(), self.conductor(), mapst)
```

so that all numbers are typeset in math mode, otherwise they look a bit different.


---

Comment by novoselt created at 2011-11-05 22:06:09

Changing keywords from "" to "latex".


---

Comment by jdemeyer created at 2011-11-06 09:53:02

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-11-06 09:53:02

I agree with Andrey's last comment.  Johan, could you make this change?


---

Attachment

Okay, although I must say that I don't see any difference in my notebook. ;).


---

Comment by johanbosman created at 2011-11-06 10:19:58

Changing status from needs_work to needs_review.


---

Comment by novoselt created at 2011-11-06 15:49:33

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2011-11-06 15:49:33

Hmmm, for me the difference was apparent! I guess my system used quite different fonts for text and math, it may be different for others. But in any case it is recommended to typeset "mathematical numbers" in math mode in LaTeX, so I think that the current version is the best one of three.


---

Comment by jdemeyer created at 2011-11-07 10:13:06

Resolution: fixed
