# Issue 32606: Saving and loading expressions with symbolic functions makes print crash

Issue created by migration from https://trac.sagemath.org/ticket/32843

Original creator: rburing

Original creation time: 2021-11-09 19:21:16

Keywords: save,load,function,expression,print

The following innocent code crashes SageMath 9.4 as well as 9.5.beta5:


```
f = function('f')(x)
save(f, 'f')
f = load('f.sobj')
print(f)
```


Output:


```
TypeError                                 Traceback (most recent call last)
~/Downloads/sage-9.5.beta5/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/symbolic/pynac_impl.pxi in sage.symbolic.expression.py_print_function_pystring (build/cythonized/sage/symbolic/expression.cpp:10229)()
    499         olist = [func._name]
    500     olist.extend(['(', ', '.join(map(repr, args)), ')'])
--> 501     return ''.join(olist)
    502 
    503 cdef stdstring* py_print_function(unsigned id, args):

TypeError: sequence item 0: expected str instance, bytes found
...
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
Segmentation Fault
```


Originally reported in [Ask SageMath question #59632](https://ask.sagemath.org/question/59632/save-tensor-in-file/).


---

Comment by mkoeppe created at 2021-11-09 19:28:42

dup of #30018


---

Comment by mkoeppe created at 2021-11-09 19:28:42

Changing status from new to needs_review.


---

Comment by mjo created at 2021-12-01 01:37:49

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-01 02:46:14

Resolution: invalid
