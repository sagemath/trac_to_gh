# Issue 23099: matrix creation: iterator exhausts

Issue created by migration from https://trac.sagemath.org/ticket/23336

Original creator: dkrenn

Original creation time: 2017-06-28 23:46:39


```
sage: Matrix(ZZ, 2, 2, iter(srange(6)))
gives a `TypeError: entries has the wrong length` because it reads all the values from the given iterable and not only the as many as needed.
(And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more)


---

Comment by jdemeyer created at 2018-02-23 20:36:50

Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries. This works:

```
sage: Matrix(ZZ, 2, 2, iter(srange(4)))
[0 1]
[2 3]
```



---

Comment by dkrenn created at 2018-02-27 07:00:32

Replying to [comment:2 jdemeyer]:
> Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries.

The answer was in the original desciption (before the modification):

> error [...] because it reads all the values from the given iterable and not only the as many as needed.
> And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more.


---

Comment by jdemeyer created at 2018-02-27 08:47:36

OK, but then what do you do with

```
sage: Matrix(ZZ, 2, 2, range(6))
```

Is that an error or should it just "truncate" the `range`?

The main problem here is that `Matrix` allows many different kinds of input in a rather loose way. If you can up with a good specification of how iterables should be handled and what should be an error and what not, I'm ready to listen. But lacking that, I consider it a feature that `Matrix(ZZ, 2, 2, iter(srange(6)))` is an error.


---

Comment by jdemeyer created at 2018-02-27 08:56:09

Do you have an actual reasonable use case for this, or is it just "it feels wrong".


---

Comment by jdemeyer created at 2018-03-01 14:51:18

I have no plans to "fix" this but if somebody does, it should be using #24742.


---

Comment by jdemeyer created at 2018-03-29 13:55:11

Resolution: wontfix
