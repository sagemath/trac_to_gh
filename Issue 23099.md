# Issue 23099: matrix creation: iterator exhausts

archive/issues_023099.json:
```json
{
    "body": "\n```\nsage: Matrix(ZZ, 2, 2, iter(srange(6)))\ngives a `TypeError: entries has the wrong length` because it reads all the values from the given iterable and not only the as many as needed.\n(And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more)\n\nIssue created by migration from https://trac.sagemath.org/ticket/23336\n\n",
    "created_at": "2017-06-28T23:46:39Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "matrix creation: iterator exhausts",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23099",
    "user": "https://github.com/dkrenn"
}
```

```
sage: Matrix(ZZ, 2, 2, iter(srange(6)))
gives a `TypeError: entries has the wrong length` because it reads all the values from the given iterable and not only the as many as needed.
(And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more)

Issue created by migration from https://trac.sagemath.org/ticket/23336





---

archive/issue_comments_322636.json:
```json
{
    "body": "Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries. This works:\n\n```\nsage: Matrix(ZZ, 2, 2, iter(srange(4)))\n[0 1]\n[2 3]\n```\n",
    "created_at": "2018-02-23T20:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322636",
    "user": "https://github.com/jdemeyer"
}
```

Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries. This works:

```
sage: Matrix(ZZ, 2, 2, iter(srange(4)))
[0 1]
[2 3]
```




---

archive/issue_comments_322637.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries.\n\nThe answer was in the original desciption (before the modification):\n\n> error [...] because it reads all the values from the given iterable and not only the as many as needed.\n> And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more.",
    "created_at": "2018-02-27T07:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322637",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:2 jdemeyer]:
> Why do you consider this a bug? You are creating a 2 x 2 matrix while giving 6 entries.

The answer was in the original desciption (before the modification):

> error [...] because it reads all the values from the given iterable and not only the as many as needed.
> And from a command which allows as input an iterator, it would be pleasant if it only reads as many elements as needed and not more.



---

archive/issue_comments_322638.json:
```json
{
    "body": "OK, but then what do you do with\n\n```\nsage: Matrix(ZZ, 2, 2, range(6))\n```\n\nIs that an error or should it just \"truncate\" the `range`?\n\nThe main problem here is that `Matrix` allows many different kinds of input in a rather loose way. If you can up with a good specification of how iterables should be handled and what should be an error and what not, I'm ready to listen. But lacking that, I consider it a feature that `Matrix(ZZ, 2, 2, iter(srange(6)))` is an error.",
    "created_at": "2018-02-27T08:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322638",
    "user": "https://github.com/jdemeyer"
}
```

OK, but then what do you do with

```
sage: Matrix(ZZ, 2, 2, range(6))
```

Is that an error or should it just "truncate" the `range`?

The main problem here is that `Matrix` allows many different kinds of input in a rather loose way. If you can up with a good specification of how iterables should be handled and what should be an error and what not, I'm ready to listen. But lacking that, I consider it a feature that `Matrix(ZZ, 2, 2, iter(srange(6)))` is an error.



---

archive/issue_comments_322639.json:
```json
{
    "body": "Do you have an actual reasonable use case for this, or is it just \"it feels wrong\".",
    "created_at": "2018-02-27T08:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322639",
    "user": "https://github.com/jdemeyer"
}
```

Do you have an actual reasonable use case for this, or is it just "it feels wrong".



---

archive/issue_comments_322640.json:
```json
{
    "body": "I have no plans to \"fix\" this but if somebody does, it should be using #24742.",
    "created_at": "2018-03-01T14:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322640",
    "user": "https://github.com/jdemeyer"
}
```

I have no plans to "fix" this but if somebody does, it should be using #24742.



---

archive/issue_comments_322641.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2018-03-29T13:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23099#issuecomment-322641",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: wontfix
