# Issue 33010: Restore quiet in `./configure -q`

Issue created by migration from https://trac.sagemath.org/ticket/33247

Original creator: slelievre

Original creation time: 2022-01-30 10:26:22

CC:  slelievre mjo jhpalmieri dimpase

Keywords: quiet

In Sage 9.5.rc4, one of the configure checks
does not respect the quiet mode:

```
$ ./configure -q
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named lzma
```



---

Comment by slelievre created at 2022-01-30 16:40:44

Changing keywords from "quiet" to "quiet, configure, qhull, xz".


---

Comment by slelievre created at 2022-01-30 16:40:44

Happens while checking the need to install xz:

```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG xz...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named lzma
checking for xz >= 4.999.0... /usr/local/bin/xz
configure: will use system package and not install SPKG xz
-----------------------------------------------------------------------------
```

and while checking the need to install qhull:

```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG qhull...
checking for qhull... /usr/local/bin/qhull
checking is qhull's version good enough? ... yes.
checking is qhull_r library and headers installed? ... checking for libqhull_r/libqhull_r.h... yes
checking for library containing qh_distplane... -lqhull_r
yes. Use system's qhull
./configure: line 42336: ,: command not found
configure: will use system package and not install SPKG qhull
-----------------------------------------------------------------------------
```



---

Comment by mjo created at 2022-02-01 01:28:20

Just a quick guess based on their spkg-configures...


```
qhull_ver=`$QHULL -V | cut -d' ' -f2 2>> config.log`
```



```
xz_version=`$ac_path_XZ --version 2>&1 | cut -d' ' -f4 | $SED -n 1p`
```


Both of those should probably be using the log descriptor (at least for stderr in the second case):

https://www.gnu.org/software/autoconf/manual/autoconf-2.71/html_node/File-Descriptor-Macros.html


---

Comment by mjo created at 2022-02-01 01:33:45

Edit: deleted the POSIX question from my previous comment. I thought I saw a space in `2> >`


---

Comment by git created at 2022-02-17 18:53:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-02-17 18:53:29

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-02-19 21:41:58

Looks good to me.


---

Comment by jhpalmieri created at 2022-02-19 21:41:58

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-02-19 21:48:37

Thank you!


---

Comment by vbraun created at 2022-02-21 21:56:12

Resolution: fixed
