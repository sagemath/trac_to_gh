# Issue 16923: Finitely generated axiom for (mutiplicative) magmas, semigroups, monoids, groups

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2014-10-15 11:43:34

CC:  tscrim sage-combinat darij virmaux




---

Comment by tscrim created at 2014-10-15 13:48:26

Also be good for rings and algebras.


---

Comment by tscrim created at 2014-10-15 13:48:26

Changing component from PLEASE CHANGE to categories.


---

Comment by tscrim created at 2014-10-15 13:48:26

Changing type from PLEASE CHANGE to enhancement.


---

Comment by nthiery created at 2014-10-15 15:30:42

Replying to [comment:1 tscrim]:
> Also be good for rings and algebras.

Yes, and additive magmas as well. And possibly crystals, ...  But I'll leave those to a later ticket. And for modules, we alreay have `FiniteDimensional`.

Cheers,
                                    Nicolas


---

Comment by tscrim created at 2014-10-16 01:09:54

I know this isn't set for review yet, but just to note that a finite magma is automatically finitely generated. So I think we should have this reflected in the category structure; in particular, so we don't have lines like this:

```
Parent.__init__(self, category = Semigroups().Finite().FinitelyGenerated())
```


If you need someone to review it, just let me know when this is ready.
----
Last 10 new commits:


---

Comment by nthiery created at 2014-10-16 07:41:55

Replying to [comment:6 tscrim]:
> I know this isn't set for review yet,

Thanks for having looked at it!

> but just to note that a finite magma is automatically finitely generated. So I think we should have this reflected in the category structure; in particular, so we don't have lines like this:
> {{{
> Parent.__init__(self, category = Semigroups().Finite().FinitelyGenerated())
> }}}

As stated in the description, the point of the ticket is precisely to
make a distinction between finite magmas (which are indeed finitely
generated by definition), and finite monoids that are explicitly
endowed with a finite set of generators. The new axiom is about the
latter. So, above, we anyway want something like:

     Semigroups().Finite().XXX()

Granted, the current name of the axiom is misleading, and I am
hesitant about it. I also considered:

    sage: Groups().Finite().WithFiniteSetOfGenerators()
    Category of groups with finite set of generators

It's very explicit but feels like heavy notation; and it does not feel
as appealing as "finitely generated" which immediately rings a bell in
a mathematician's head. Also, it seems to me that being "finitely
generated" is rather useless computationally speaking if no finite set
of generators is provided; so we would not be using that nice name for
a weaker purpose anyway.

I guess that's the main design decision to be taken in this
ticket. The rest is rather straightforward.

Ah, yes, the other design decision is whether it's acceptable to break
backward compatibility. I'll be the first one to be hurt by this
change, and I believe it's worth it ...

Opinions anyone?

> If you need someone to review it, just let me know when this is ready.

Ok, thanks! Darij would be a good candidate to give feedback too!

Cheers,
                            Nicolas


---

Comment by nthiery created at 2014-10-16 07:43:54

The dependency on #10668 is mostly for convenience: #10668 fixes the doctests in c3_controlled to not need to be updated everytime the category hierarchy changes.


---

Comment by tscrim created at 2014-10-16 15:55:41

Saying this ticket is for a specified fixed set of generators contracts this statement:

> And for modules, we alreay have `FiniteDimensional`.

I think we should make an analogy to `WithBasis` and `FiniteDimensional` by having 2 axioms, `WithGeneratingSet` and `FinitelyGenerated`. This would give `FinitelyGenerated` a purpose, would still allow the current goal of not having to specify the enumeration, and allow the option for infinitely generated objects.


---

Comment by nthiery created at 2014-10-16 21:20:22

Replying to [comment:9 tscrim]:
> I think we should make an analogy to `WithBasis` and
> `FiniteDimensional` by having 2 axioms, `WithGeneratingSet` and
> `FinitelyGenerated`. This would give `FinitelyGenerated` a purpose,
> would still allow the current goal of not having to specify the
> enumeration, and allow the option for infinitely generated objects.

I considered this and I agree that this would have the advantage of
being consistent with the basis things. However I don't see what I
would put in the categories with axiom for `FinitelyGenerated` axiom
besides the subcategories with axioms for `WithGeneratingSet`, so this
looks like overkill. Besides,

	Categories of finitely generated group with generating set

is not great. I am torn.

Opinions anyone else?

Cheers,
					Nicolas


---

Comment by tscrim created at 2014-10-16 23:43:52

Replying to [comment:10 nthiery]:
> I considered this and I agree that this would have the advantage of
> being consistent with the basis things. However I don't see what I
> would put in the categories with axiom for `FinitelyGenerated` axiom
> besides the subcategories with axioms for `WithGeneratingSet`, so this
> looks like overkill. Besides,
> 
> 	Categories of finitely generated group with generating set
> 
> is not great. I am torn.

I have things that have infinite (enumerable) distinguished generating sets (ex. free group/monoid with generators indexed by `NN` or Yangians #15484), so separating these axioms will be useful. In fact, the enumeration could be done in for the general `WithGeneratingSet` category and would (at least should) error out if the generating set is not enumerable. Although I only know of 1 thing which will be finite dimensional but doesn't come with a distinguished basis. Plus I think we could do an extra case in `_repr_object_names_static` to change the repr into:

```
Category of groups with finite generating set
```


Here's another thought, what about we look at the cardinality of the generating set? So we only have `WithGeneratingSet` which calls `is_finitely_generated`, whose default is to look at the cardinality of the generating set to determine the output of repr. At least that's the only place where I could see us (currently) using the fact that the generating set is finite. For the enumeration, all we really need is the generating set is enumerable. Although I guess we really want to add `EnumeratedSets` to the category heirachy, so this probably is not so useful of an idea...

> Opinions anyone else?

Darij, Aladin, or anyone else, your thoughts?


---

Comment by nthiery created at 2014-10-18 11:51:04

Replying to [comment:11 tscrim]:
> I have things that have infinite (enumerable) distinguished generating sets (ex. free group/monoid with generators indexed by `NN` or Yangians #15484), so separating these axioms will be useful. In fact, the enumeration could be done in for the general `WithGeneratingSet` category and would (at least should) error out if the generating set is not enumerable. Although I only know of 1 thing which will be finite dimensional but doesn't come with a distinguished basis.

Another issue: having a distinguished set of generators and being
finitely generated does not necessarily imply that the distinguished
set of generators is finite. So we would actually need three axioms:
"WithGenerators", "FinitelyGenerated", and "WithFiniteGeneratingSet".
So for a finite magma we still would need to do
"Magmas().Finite().WithFiniteGeneratingSet()".

I am not sure this is worth the complication. Especially since we will
have to do something similar for additive magmas, rings, fields, ...

> Plus I think we could do an extra case in `_repr_object_names_static` to change the repr into:
> {{{
> Category of groups with finite generating set
> }}}

That should be easy indeed.

> Here's another thought, what about we look at the cardinality of the generating set? So we only have `WithGeneratingSet` which calls `is_finitely_generated`, whose default is to look at the cardinality of the generating set to determine the output of repr. At least that's the only place where I could see us (currently) using the fact that the generating set is finite.

Well, also all the code to build the Cayley graph, to compute
J/R/L-classes, etc. In short all my finite semigroups code :-)

I oppose querying the cardinality, or even just is_finite, for this
can be super expensive if not undecidable. We really want something
declarative here.

> Darij, Aladin, or anyone else, your thoughts?

Yup?

We probably should bring the discussion to sage-dev. As usual this
takes a bit of preparation to have an efficient discussion there.
I'll try to do this soon.

Cheers,
                                    Nicolas


---

Comment by tscrim created at 2014-10-22 01:46:09

Replying to [comment:12 nthiery]:
> Another issue: having a distinguished set of generators and being
> finitely generated does not necessarily imply that the distinguished
> set of generators is finite. So we would actually need three axioms:
> "WithGenerators", "FinitelyGenerated", and "WithFiniteGeneratingSet".
> So for a finite magma we still would need to do
> "Magmas().Finite().WithFiniteGeneratingSet()".
>
> I am not sure this is worth the complication. Especially since we will
> have to do something similar for additive magmas, rings, fields, ...

...Right... Although I think the right thing is actually `WithEnumeratedGeneratingSet` as we can do the same thing for infinite enumerated generating sets. However this is mostly an empty category/axiom because we can write generic code for `WithGeneratingSet` which will error out (at the right spot) for non-enumerated generating sets. In many ways, it's just a join with `EnumeratedSets`.

Another thought, we have 2 axioms `FinitelyGenerated` and `WithGenerators` and we create new join categories such as `SemigroupWithEnumeratedGeneratingSet` which implements an `__iter__` which calls `semigroup_generators`. The reasoning would be for monoids, we'd want to `monoid_generators` and need a separate method to avoid ambiguities similar to #15381. Or would we use `gens` in this case and just push everything up to the category?

For rings, algebras, fields, I think we get this for free from the axiom magic and that they are subcategories of `Magma`. Perhaps I'm misunderstanding how things work?

> Well, also all the code to build the Cayley graph, to compute
> J/R/L-classes, etc. In short all my finite semigroups code :-)
> 
> I oppose querying the cardinality, or even just is_finite, for this
> can be super expensive if not undecidable. We really want something
> declarative here.

Yep, it's a bad idea.

> We probably should bring the discussion to sage-dev. As usual this
> takes a bit of preparation to have an efficient discussion there.
> I'll try to do this soon.

Probably.


---

Comment by git created at 2015-03-05 18:21:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-03-11 16:48:16

Replying to [comment:12 nthiery]:
> We probably should bring the discussion to sage-dev.

Done: https://groups.google.com/d/msg/sage-devel/1du_5IhxsUU/j4hr75fBb9IJ


---

Comment by git created at 2015-03-12 10:25:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-17 06:44:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-20 08:02:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-20 08:12:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-03-20 08:13:36

Changing status from new to needs_review.


---

Comment by git created at 2015-03-20 08:14:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-21 06:58:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-03-21 06:59:21

This ticket does not really depend on #17160, but the build tends to fail without it, so I merged it in.


---

Comment by tscrim created at 2015-03-21 17:03:25

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-03-21 17:03:25

LGTM.


---

Comment by tscrim created at 2015-03-21 17:18:37

Changing keywords from "" to "days64".


---

Comment by git created at 2015-04-02 02:49:39

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2015-04-02 02:49:39

Changing status from positive_review to needs_review.


---

Comment by tscrim created at 2015-04-02 04:42:05

Simple merge.


---

Comment by tscrim created at 2015-04-02 04:42:05

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-10 16:35:02

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-04-10 16:35:02

conflicts with #15852


---

Comment by tscrim created at 2015-04-11 22:19:39

Trivial rebase.
----
New commits:


---

Comment by tscrim created at 2015-04-11 22:19:39

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-04-14 19:43:50

Resolution: fixed
