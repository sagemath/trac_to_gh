# Issue 13901: all_graph_colorings should have an option to use integer colors.

Issue created by migration from https://trac.sagemath.org/ticket/14105

Original creator: rowland

Original creation time: 2013-02-13 00:52:54

Assignee: jason, ncohen, rlm

CC:  ahmorales rowland chrisjamesberg

This is ugly:

sage: from sage.graphs.graph_coloring import all_graph_colorings
sage: g = Graph([[0, 1], [1, 2]])
sage: list(all_graph_colorings(g, 3))
[{'#00ff00': [1], '#ff0000': [0, 2]}, {'#00ff00': [1], '#ff0000': [0], '#0000ff': [2]}, {'#0000ff': [1], '#ff0000': [0, 2]}, {'#0000ff': [1], '#ff0000': [0], '#00ff00': [2]}, {'#ff0000': [1], '#00ff00': [0, 2]}, {'#ff0000': [1], '#00ff00': [0], '#0000ff': [2]}, {'#0000ff': [1], '#ff0000': [2], '#00ff00': [0]}, {'#0000ff': [1], '#00ff00': [0, 2]}, {'#ff0000': [1], '#0000ff': [0], '#00ff00': [2]}, {'#ff0000': [1], '#0000ff': [0, 2]}, {'#00ff00': [1], '#ff0000': [2], '#0000ff': [0]}, {'#00ff00': [1], '#0000ff': [0, 2]}]


---

Comment by rowland created at 2013-02-14 16:27:16

Changing keywords from "" to "days45".


---

Comment by ncohen created at 2013-02-14 23:02:22

Changing status from new to needs_info.


---

Comment by ncohen created at 2013-02-14 23:02:22

Hellooooooooooooo !!

What would you think of setting `int_colors = True` to be the default ? Actually, what would you think of renaming this argument as `hex_colors = False` (as it already appears in other coloring functions) ?

Btw, lines have to be 80 characters long at most.

Have fuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuunnn ! `:-)`

Nathann


---

Comment by ahmorales created at 2013-02-15 16:53:02

Hello,

Thanks for the comment. I changed the path so that the default is hex_colors = False. 

There is another option count_only=False which returns a generator that just returns 1. Shouldn't this just return the number of colorings?

Alejandro


---

Comment by ncohen created at 2013-02-15 17:04:48

Helloooooooo !!

> Thanks for the comment. I changed the path so that the default is hex_colors = False. 

Yep, but the patch does not pass tests 

```
sage -t  "devel/sage-2/sage/graphs/graph_coloring.py"       
**********************************************************************
Error: TAB character found.
**********************************************************************
File "/home/ncohen/.Sage/devel/sage-2/sage/graphs/graph_coloring.py", line 151:
    sage: for c in all_graph_colorings(G,2, vertex_color_dict = True):
Exception raised:
    Traceback (most recent call last):
      File "/home/ncohen/.Sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/ncohen/.Sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/ncohen/.Sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[11]>", line 1
        for c in all_graph_colorings(G,Integer(2), vertex_color_dict = True):###line 151:
    sage: for c in all_graph_colorings(G,2, vertex_color_dict = True):
                                                                                                                                                                    ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
File "/home/ncohen/.Sage/devel/sage-2/sage/graphs/graph_coloring.py", line 152:
    sage:      c
Exception raised:
    Traceback (most recent call last):
      File "/home/ncohen/.Sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/ncohen/.Sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/ncohen/.Sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[12]>", line 1
        c###line 152:
    sage:      c
       ^
    IndentationError: unexpected indent
...
...
...
```


> There is another option count_only=False which returns a generator that just returns 1. Shouldn't this just return the number of colorings?

Indeed ! I guess that the best is to add a counter inside of the function, and return the result once all the colorings have been listed.

Nathann


---

Comment by ahmorales created at 2013-02-18 23:40:44

I left the case count_only of all_graph_colorings as it was since There is a function number_of_n_colorings that uses the generator of all_graph_colorings to return the number of colorings.


---

Comment by ncohen created at 2013-02-20 09:03:36

Hellooooooooooo !!

Your patch needs a proper commit message, but short of this it is good to go `:-)`

Nathann


---

Comment by ncohen created at 2013-02-20 09:14:05

Changing status from needs_info to needs_review.


---

Comment by ahmorales created at 2013-02-21 15:41:26

Thanks. I added a commit message.


---

Comment by ncohen created at 2013-02-22 09:25:40

Two doctests of graph.py do not pass

```
sage -t -long devel/sage-2/sage/graphs/graph.py
**********************************************************************
File "/home/ncohen/.Sage/devel/sage-2/sage/graphs/graph.py", line 3190:
    sage: P = G.coloring(algorithm="DLX"); P
Expected:
    [[1, 2, 3], [0, 5, 6], [4]]
Got:
    [[0, 5, 6], [1, 2, 3], [4]]
**********************************************************************
File "/home/ncohen/.Sage/devel/sage-2/sage/graphs/graph.py", line 3200:
    sage: for c in sorted(H.keys()):
          print c, H[c]
Expected:
    #0000ff [4]
    #00ff00 [1, 2, 3]
    #ff0000 [0, 5, 6]
Got:
    0 [0, 5, 6]
    1 [1, 2, 3]
    2 [4]
**********************************************************************
```


Nathann


---

Comment by ncohen created at 2013-02-22 09:25:40

Changing status from needs_review to needs_work.


---

Comment by ahmorales created at 2013-02-22 20:34:59

added commit message


---

Attachment

Hi Nathan,

Thanks for pointing out these failed tests. I have reloaded the patch.


---

Comment by ncohen created at 2013-02-22 22:59:25

Gooooooooooooood to go ! `:-)`

Nathann


---

Comment by ncohen created at 2013-02-22 22:59:25

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-02-28 10:33:51

Resolution: fixed
