# Issue 28961: Set up hypercube with both Vrep and Hrep (if backend supports it)

Issue created by migration from https://trac.sagemath.org/ticket/29198

Original creator: @kliem

Original creation time: 2020-02-14 15:24:45

CC:  jipilab @laisrast

Keywords: hypercube, polyhedron, double description

Currently, the hypercube is set up with the vertices. This is slow, as the vertices grow exponentially with dimension:


```
sage: %time _ = polytopes.hypercube(8)
CPU times: user 58.6 ms, sys: 0 ns, total: 58.6 ms
Wall time: 58.2 ms
sage: %time _ = polytopes.hypercube(14)
CPU times: user 2.74 s, sys: 19.1 ms, total: 2.76 s
Wall time: 2.76 s
```


With #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:


```
sage: %time _ = polytopes.hypercube(8)
CPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms
Wall time: 50 ms
sage: %time _ = polytopes.hypercube(14)
CPU times: user 421 ms, sys: 4.7 ms, total: 426 ms
Wall time: 425 ms
sage: %time _ = polytopes.hypercube(14, backend='field')
CPU times: user 168 ms, sys: 124 Âµs, total: 169 ms
Wall time: 168 ms
```



---

Comment by @kliem created at 2020-02-14 15:25:41

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-02-14 15:25:41

New commits:


---

Comment by git created at 2020-02-15 14:17:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2020-02-24 10:11:33

New commits:


---

Comment by git created at 2020-02-28 10:49:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2020-02-28 10:52:34

Ok, that's the doctest  from the bots. I also only got that one on my machine.

Let's see what the bots say. It looks good apart from that.


---

Comment by jipilab created at 2020-02-28 23:20:01

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-02-29 09:35:14

Merge conflict


---

Comment by vbraun created at 2020-02-29 09:35:14

Changing status from positive_review to needs_work.


---

Comment by @kliem created at 2020-03-02 12:26:12

New commits:


---

Comment by @kliem created at 2020-03-02 12:26:12

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2020-03-05 21:05:42

Changing status from needs_review to positive_review.


---

Comment by slabbe created at 2020-03-05 21:05:42

I confirm the timing improvements. I get all tests passed in `src/sage/geometry` and `src/sage/plot` except `src/sage/geometry/polyhedron/base.py` which still has a "killed due to abort" issue which is independent of this ticket.


---

Comment by vbraun created at 2020-03-08 11:27:17

Resolution: fixed
