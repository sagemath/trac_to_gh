# Issue 28961: Set up hypercube with both Vrep and Hrep (if backend supports it)

archive/issues_028961.json:
```json
{
    "body": "CC:  @jplab @laisrast\n\nKeywords: hypercube, polyhedron, double description\n\nCurrently, the hypercube is set up with the vertices. This is slow, as the vertices grow exponentially with dimension:\n\n\n```\nsage: %time _ = polytopes.hypercube(8)\nCPU times: user 58.6 ms, sys: 0 ns, total: 58.6 ms\nWall time: 58.2 ms\nsage: %time _ = polytopes.hypercube(14)\nCPU times: user 2.74 s, sys: 19.1 ms, total: 2.76 s\nWall time: 2.76 s\n```\n\n\nWith #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:\n\n\n```\nsage: %time _ = polytopes.hypercube(8)\nCPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms\nWall time: 50 ms\nsage: %time _ = polytopes.hypercube(14)\nCPU times: user 421 ms, sys: 4.7 ms, total: 426 ms\nWall time: 425 ms\nsage: %time _ = polytopes.hypercube(14, backend='field')\nCPU times: user 168 ms, sys: 124 \u00b5s, total: 169 ms\nWall time: 168 ms\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29198\n\n",
    "created_at": "2020-02-14T15:24:45Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Set up hypercube with both Vrep and Hrep (if backend supports it)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28961",
    "user": "@kliem"
}
```
CC:  @jplab @laisrast

Keywords: hypercube, polyhedron, double description

Currently, the hypercube is set up with the vertices. This is slow, as the vertices grow exponentially with dimension:


```
sage: %time _ = polytopes.hypercube(8)
CPU times: user 58.6 ms, sys: 0 ns, total: 58.6 ms
Wall time: 58.2 ms
sage: %time _ = polytopes.hypercube(14)
CPU times: user 2.74 s, sys: 19.1 ms, total: 2.76 s
Wall time: 2.76 s
```


With #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:


```
sage: %time _ = polytopes.hypercube(8)
CPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms
Wall time: 50 ms
sage: %time _ = polytopes.hypercube(14)
CPU times: user 421 ms, sys: 4.7 ms, total: 426 ms
Wall time: 425 ms
sage: %time _ = polytopes.hypercube(14, backend='field')
CPU times: user 168 ms, sys: 124 Âµs, total: 169 ms
Wall time: 168 ms
```


Issue created by migration from https://trac.sagemath.org/ticket/29198





---

archive/issue_comments_410000.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410000",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410001.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410001",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_410002.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-15T14:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410002",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410003.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-02-24T10:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410003",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_410004.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-28T10:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410004",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410005.json:
```json
{
    "body": "Ok, that's the doctest  from the bots. I also only got that one on my machine.\n\nLet's see what the bots say. It looks good apart from that.",
    "created_at": "2020-02-28T10:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410005",
    "user": "@jplab"
}
```

Ok, that's the doctest  from the bots. I also only got that one on my machine.

Let's see what the bots say. It looks good apart from that.



---

archive/issue_comments_410006.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-28T23:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410006",
    "user": "@jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410007.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2020-02-29T09:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410007",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_410008.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-02-29T09:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410008",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_410009.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410009",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_410010.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410010",
    "user": "@kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_410011.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-05T21:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410011",
    "user": "@seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410012.json:
```json
{
    "body": "I confirm the timing improvements. I get all tests passed in `src/sage/geometry` and `src/sage/plot` except `src/sage/geometry/polyhedron/base.py` which still has a \"killed due to abort\" issue which is independent of this ticket.",
    "created_at": "2020-03-05T21:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410012",
    "user": "@seblabbe"
}
```

I confirm the timing improvements. I get all tests passed in `src/sage/geometry` and `src/sage/plot` except `src/sage/geometry/polyhedron/base.py` which still has a "killed due to abort" issue which is independent of this ticket.



---

archive/issue_comments_410013.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-08T11:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28961#issuecomment-410013",
    "user": "@vbraun"
}
```

Resolution: fixed
