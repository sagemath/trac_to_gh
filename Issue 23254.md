# Issue 23254: py3: change of behaviour of bound / unbound methods and MethodType

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-07-20 10:10:10

CC:  jdemeyer

Unbound methods have been removed in Py3 ; see

http://python-future.org/what_else.html#binding-a-method-to-a-class

This also causes problems in pyx files. For example

```
/home/chapoton/sage3/src/sage/rings/padics/qadic_flint_CR.pyx in init sage.rings.padics.qadic_flint_CR (/home/chapoton/sage3/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:38543)()
     12         """
     13         Initialization.
     14 
     15         EXAMPLES::
     16 
     17             sage: R.<a> = ZqCR(125)
     18             sage: type(R.prime_pow)
     19             <type 'sage.rings.padics.qadic_flint_CR.PowComputer_'>
     20             sage: R.prime_pow._prec_type
     21             'capped-rel'
     22         """
     23         self._prec_type = 'capped-rel'
     24         PowComputer_flint_unram.__init__(self, prime, cache_limit, prec_cap, ram_prec_cap, in_field, poly)
     25 
     26 cdef class qAdicCappedRelativeElement(CRElement):
---> 27     frobenius = MethodType(frobenius_unram, None, qAdicCappedRelativeElement)
        global frobenius = undefined
        global MethodType = <class 'method'>
        global frobenius_unram = <built-in function frobenius_unram>
        global qAdicCappedRelativeElement = <class 'sage.rings.padics.qadic_flint_CR.qAdicCappedRelativeElement'>
     28     trace = MethodType(trace_unram, None, qAdicCappedRelativeElement)
     29     norm = MethodType(norm_unram, None, qAdicCappedRelativeElement)
     30 
     31     def matrix_mod_pn(self):
     32         """
     33         Returns the matrix of right multiplication by the element on
     34         the power basis `1, x, x^2, \ldots, x^{d-1}` for this
     35         extension field.  Thus the *rows* of this matrix give the
     36         images of each of the `x^i`.  The entries of the matrices are
     37         IntegerMod elements, defined modulo ``p^(self.absprec() / e)``.
     38 
     39         Raises an error if ``self`` has negative valuation.
     40 
     41         EXAMPLES::
     42 

TypeError: method expected 2 arguments, got 3

```



---

Comment by jdemeyer created at 2017-07-20 11:30:25

Changing type from PLEASE CHANGE to defect.


---

Comment by jdemeyer created at 2017-07-20 11:30:25

Changing component from PLEASE CHANGE to python3.


---

Comment by jdemeyer created at 2017-07-20 12:28:01

New commits:


---

Comment by git created at 2017-07-20 13:45:41

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-07-20 13:47:23

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-07-31 16:11:54

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2017-07-31 16:11:54

does not apply


---

Comment by git created at 2017-08-01 11:13:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-08-01 11:14:23

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-08-01 17:07:41

one failing doctest in

sage -t --long src/sage/misc/sageinspect.py


---

Comment by jdemeyer created at 2017-08-01 17:53:35

Replying to [comment:11 chapoton]:
> one failing doctest in
> 
> sage -t --long src/sage/misc/sageinspect.py

Not really, that's because of the dependency #23494 and it's fixed in that ticket.


---

Comment by jdemeyer created at 2017-08-07 10:09:23

Now that #23494 is merged in `develop`, the failing doctest is fixed.


---

Comment by chapoton created at 2017-08-07 10:14:12

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-08-07 10:14:12

ok, looks good. Let it be.


---

Comment by vbraun created at 2017-08-11 18:17:53

Resolution: fixed
