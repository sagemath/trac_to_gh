# Issue 11802: transformations don't work with a function that returns a singleton numpy array

Issue created by migration from Trac.

Original creator: jason

Original creation time: 2011-11-01 14:59:11

Assignee: jason, was

CC:  kcrisman

This patch just casts things to floats when it makes sense.  This makes things consistent with plot3d.  See http://ask.sagemath.org/question/858/2d-interpolating-function-from-numpy-arrays-to


---

Attachment


---

Comment by jason created at 2011-11-01 15:01:10

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted


---

Comment by kcrisman created at 2012-05-25 02:56:43

Amazingly, this even speeds things up.

```
# old
sage: timeit('[h(1,2) for h in T.to_cartesian(operator.mul)]')
625 loops, best of 3: 968 µs per loop
# new
sage: timeit('[h(1,2) for h in T.to_cartesian(operator.mul)]')
625 loops, best of 3: 939 µs per loop
```

Good work, sorry it took so long to get to reviewing this.

Annoyingly, all these doctests are not visible in the built docs because the entire _class_ is an underscore!


---

Comment by kcrisman created at 2012-05-25 02:56:43

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-05-25 02:56:43

Changing keywords from "" to "sd40.5".


---

Comment by jdemeyer created at 2012-06-02 12:10:27

Resolution: fixed
