# Issue 31063: doctesting of sage/interfaces/r.py prints some warnings

archive/issues_031063.json:
```json
{
    "body": "Keywords: R, statistics\n\nAs pointed out by gh-kliem in ticket #29967, doctesting the interface to R yields some warnings, even though all tests pass:\n\n```\n~/sage % ./sage -t src/sage/interfaces/r.py\nRunning doctests with ID 2021-01-28-19-03-19-0ac9e573.\nGit branch: develop\nUsing --optional=build,dochtml,homebrew,pip,sage,sage_spkg\nDoctesting 1 file.\nR[write to console]: Warning messages:\n\nR[write to console]: 1: \nR[write to console]: In sage10 + sage6 :\nR[write to console]: \n \nR[write to console]:  longer object length is not a multiple of shorter object length\n\nR[write to console]: 2: \nR[write to console]: In sqrt(sage10) :\nR[write to console]:  NaNs produced\n\nR[write to console]: 3: \nR[write to console]: In sqrt(sage4) :\nR[write to console]:  NaNs produced\n\nsage -t --warn-long 42.2 --random-seed=0 src/sage/interfaces/r.py\n    [257 tests, 3.17 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\n\nPerhaps a user of R can say whether these warnings are revealing anything that needs to be fixed.\n\n(These warnings were reported with `--random-seed=151058820726654196682836430928254760259`, but I get them even without specifying a seed.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/31300\n\n",
    "created_at": "2021-01-29T02:16:52Z",
    "labels": [
        "interfaces",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "doctesting of sage/interfaces/r.py prints some warnings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31063",
    "user": "@DaveWitteMorris"
}
```
Keywords: R, statistics

As pointed out by gh-kliem in ticket #29967, doctesting the interface to R yields some warnings, even though all tests pass:

```
~/sage % ./sage -t src/sage/interfaces/r.py
Running doctests with ID 2021-01-28-19-03-19-0ac9e573.
Git branch: develop
Using --optional=build,dochtml,homebrew,pip,sage,sage_spkg
Doctesting 1 file.
R[write to console]: Warning messages:

R[write to console]: 1: 
R[write to console]: In sage10 + sage6 :
R[write to console]: 
 
R[write to console]:  longer object length is not a multiple of shorter object length

R[write to console]: 2: 
R[write to console]: In sqrt(sage10) :
R[write to console]:  NaNs produced

R[write to console]: 3: 
R[write to console]: In sqrt(sage4) :
R[write to console]:  NaNs produced

sage -t --warn-long 42.2 --random-seed=0 src/sage/interfaces/r.py
    [257 tests, 3.17 s]
----------------------------------------------------------------------
All tests passed!
```

Perhaps a user of R can say whether these warnings are revealing anything that needs to be fixed.

(These warnings were reported with `--random-seed=151058820726654196682836430928254760259`, but I get them even without specifying a seed.)

Issue created by migration from https://trac.sagemath.org/ticket/31300





---

archive/issue_comments_443711.json:
```json
{
    "body": "The warnings are expected, so there is no problem here, so this ticket should be closed as **invalid**.\n\n1) The doctest is:\n\n```\nThe following command generates a new vector `v` of length 11 constructed\nby adding together (element by element) `2x` repeated 2.2 times, `y`\nrepeated just once, and 1 repeated 11 times::\n\n    sage: v = 2*x+y+1; v  # optional - rpy2\n    [1] 32.2 17.8 10.3 20.2 66.1 21.8 22.6 12.8 16.9 50.8 43.5\n```\n\nThis is intentionally adding two vectors whose lengths are not multiples of each other: the length of `2*x` is 5, and the length of `y` is 11.\n\n2 and 3) The doctests are:\n\n```\n    sage: r(-17).sqrt()  # optional - rpy2\n    [1] NaN\n\nThe conversion can handle \"not a number\", infintiy, imaginary values and\nmissing values:\n\n    sage: r(-17).sqrt().sage()  # optional - rpy2\n    nan\n```\n\nBoth are intentionally creating a `NaN` value by taking the square root of a negative number.\n\nRelated ticket: #34134 (typo \"infintiy\" in docstring of r interface)",
    "created_at": "2022-07-09T01:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31063#issuecomment-443711",
    "user": "@DaveWitteMorris"
}
```

The warnings are expected, so there is no problem here, so this ticket should be closed as **invalid**.

1) The doctest is:

```
The following command generates a new vector `v` of length 11 constructed
by adding together (element by element) `2x` repeated 2.2 times, `y`
repeated just once, and 1 repeated 11 times::

    sage: v = 2*x+y+1; v  # optional - rpy2
    [1] 32.2 17.8 10.3 20.2 66.1 21.8 22.6 12.8 16.9 50.8 43.5
```

This is intentionally adding two vectors whose lengths are not multiples of each other: the length of `2*x` is 5, and the length of `y` is 11.

2 and 3) The doctests are:

```
    sage: r(-17).sqrt()  # optional - rpy2
    [1] NaN

The conversion can handle "not a number", infintiy, imaginary values and
missing values:

    sage: r(-17).sqrt().sage()  # optional - rpy2
    nan
```

Both are intentionally creating a `NaN` value by taking the square root of a negative number.

Related ticket: #34134 (typo "infintiy" in docstring of r interface)



---

archive/issue_comments_443712.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-09T01:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31063#issuecomment-443712",
    "user": "@DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-09T01:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31063#issuecomment-443713",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443714.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-08-02T06:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31063#issuecomment-443714",
    "user": "@mkoeppe"
}
```

Resolution: invalid
