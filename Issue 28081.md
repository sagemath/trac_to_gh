# Issue 28081: linbox for sparse integer matrix

Issue created by migration from https://trac.sagemath.org/ticket/28318

Original creator: vdelecroix

Original creation time: 2019-08-03 13:58:36

CC:  cpernet

The following now seems to works correctly

```
sage: m = diagonal_matrix(ZZ, [2] * 46)
sage: m._det_linbox()
70368744177664
sage: m = diagonal_matrix(ZZ, [3] * 100)
sage: m._det_linbox()
515377520732011331036461129765621272702107522001
```

This ticket stands for removing the `#not tested` directive and also put the appropriate `sig_on`/`sig_off` around linbox calls.


Note however, linbox is not doing great

```
sage: M = MatrixSpace(ZZ, 100, 100, sparse=True)
sage: m = M.random_element(density=0.1)
sage: %timeit m.__copy__().det()
100 loops, best of 5: 8.45 ms per loop
sage: %timeit m._det_linbox()
10 loops, best of 5: 43.4 ms per loop
```

And it gets worse as the dimension increases

```
sage: M = MatrixSpace(ZZ, 500, 500, sparse=True)
sage: m = M.random_element(density=0.1)
sage: %time d = m.__copy__().det()
CPU times: user 796 ms, sys: 3 Âµs, total: 796 ms
Wall time: 795 ms
sage: %time m._det_linbox()
CPU times: user 25.2 s, sys: 44 ms, total: 25.3 s
Wall time: 25.3 s
```



---

Comment by vdelecroix created at 2019-08-03 14:06:08

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2019-08-03 14:06:08

New commits:


---

Comment by git created at 2019-08-04 13:53:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-08-04 13:56:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2019-08-09 19:50:24

Just a quick note: speed is one thing, but memory usage is also important. Anyways, one little change and then a positive review:

```diff
-        NOTE: This method is much slower than converting to a dense matrix and
-        computing the determinant there. There is not much point in making it
-        available. See :trac:`28318`.
+        .. NOTE::
+
+            This method is much slower than converting to a dense matrix and
+            computing the determinant there. There is not much point in making
+            it available. See :trac:`28318`.
```

Thanks.


---

Comment by git created at 2019-08-09 21:39:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-08-11 18:03:16

Thanks.


---

Comment by tscrim created at 2019-08-11 18:03:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-08-12 19:44:24

Resolution: fixed
