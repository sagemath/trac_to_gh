# Issue 19111: edge_connectivity and vertex labels

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2015-10-05 10:58:38

CC:  ncohen borassi dcoudert


```
g1 = Graph({0: [1]})
g2 = Graph({'a': ['b']})
g1.edge_connectivity(value_only=False), g2.edge_connectivity(value_only=False)
```


should output `([1, [(0, 1)]], [1, [('a', 'b')]])`, but it does not look vertex labels at all.


---

Comment by jmantysalo created at 2015-10-05 17:43:14

This at least seems to work. May not be best way to write the code.

(Btw, I don't like to have keyword `implementation` in one function and `algorithm` in another.)
----
New commits:


---

Comment by jmantysalo created at 2015-10-05 17:43:14

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-10-05 19:45:50

Hello Jori,

Sorry but the "bug" is more in the boost function that in generic_graph.py. Otherwise we still have a function somewhere that takes a vertex-labelled graph as input and returns an integer-labelled answer.

Furthermore, it is in any case better if instead of having a doctest returning 'a' you just check that the vertex belongs to the graph: the answer 'b' would be valid too.

Nathann


---

Comment by jmantysalo created at 2015-10-05 19:58:17

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2015-10-05 19:58:17

Replying to [comment:4 ncohen]:

> Sorry but the "bug" is more in the boost function that in generic_graph.py. Otherwise we still have a function somewhere that takes a vertex-labelled graph as input and returns an integer-labelled answer.

OK. I mark this as needs_work. (And let others to do it.)

> Furthermore, it is in any case better if instead of having a doctest returning 'a' you just check that the vertex belongs to the graph: the answer 'b' would be valid too.

Ah, then I misunderstood some documentation about this kind of functions.

Assuming for example that vertices are ASCII-strings, will `.vertices()` give them alphabetically?


---

Comment by ncohen created at 2015-10-05 20:00:40

> Ah, then I misunderstood some documentation about this kind of functions.
> 
> Assuming for example that vertices are ASCII-strings, will `.vertices()` give them alphabetically?

It will. But in the present case, I think that you are after a "bipartition of your vertex set", and that you could get `{a},{b}` as often as `{b},{a}`.

Nathann


---

Comment by borassi created at 2015-10-05 21:18:05

Changing status from needs_work to needs_review.


---

Comment by borassi created at 2015-10-05 21:18:05

Hello!

You are right: the edge connectivity is the first Boost algorithm I implemented, and I missed the vertex labels. Thank you very much for noting this.

Since I made the mistake, I think I should solve it: let me know if you like my solution. I replaced Jori's branch with a different one, that corrects `boost_graph.pyx` instead of `generic_graph.pyx`. I hope this is the correct procedure: if not, let me know!

Have fun!

Michele


---

Comment by vdelecroix created at 2015-10-06 00:52:45

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-10-06 00:52:45

Hello,

What is the point of making a dict to map `0, 1, 2, 3, ...` to Python objects? Use a list!

```
cdef list int_to_vertex = g.vertices()
```


Vincent
----
New commits:


---

Comment by jmantysalo created at 2015-10-06 04:05:06

Replying to [comment:7 borassi]:

> I replaced Jori's branch with a different one, that corrects `boost_graph.pyx` instead of `generic_graph.pyx`. I hope this is the correct procedure: if not, let me know!

Yes, it is good. Actually I think that whatever makes Sage better is good.


---

Comment by borassi created at 2015-10-06 07:15:58

Hello!

> What is the point of making a dict to map `0, 1, 2, 3, ...` to Python objects? Use a list!

I used a dict because (I think) lists are linked lists, and the random access time is O(n). Am I missing something?


---

Comment by jmantysalo created at 2015-10-06 07:28:53

Replying to [comment:11 borassi]:

> > What is the point of making a dict to map `0, 1, 2, 3, ...` to Python objects? Use a list!
> 
> I used a dict because (I think) lists are linked lists, and the random access time is O(n). Am I missing something?

https://wiki.python.org/moin/TimeComplexity says that it is O(1).


---

Comment by borassi created at 2015-10-06 07:41:21

Changing status from needs_work to needs_review.


---

Comment by borassi created at 2015-10-06 07:41:21

You are right! I modified everything!


---

Comment by git created at 2015-10-06 07:41:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-10-06 08:15:32

FYI I did some more testing and it seems that `vertex_connectivity()`, `line_graph()` etc etc. does not have same kind of bug.

I guess this could be on checklist for reviewers. This applies to all kind of containers, like graphs and sets.


---

Comment by borassi created at 2015-10-06 09:10:10

Sorry, I have troubles understanding your comment. After you said that lists were better than dictionaries, I transformed all dictionaries named `int_to_vertex` into lists (there were several other routines where these dictionaries were used: these routines were correct, but the new version is simpler and more efficient).

Am I missing some points?

Replying to [comment:15 jmantysalo]:


> FYI I did some more testing and it seems that `vertex_connectivity()`, `line_graph()` etc etc. does not have same kind of bug.
> 
> I guess this could be on checklist for reviewers. This applies to all kind of containers, like graphs and sets.


---

Comment by jmantysalo created at 2015-10-06 09:12:38

Replying to [comment:16 borassi]:
> Sorry, I have troubles understanding your comment.

Sorry for being unclear. My comment did not relate to this spefic ticket. (And maybe I should have write it to sage-devel instead of this.)


---

Comment by ncohen created at 2015-10-06 09:12:55

> Sorry, I have troubles understanding your comment. After you said that lists were better than dictionaries, I transformed all dictionaries named `int_to_vertex` into lists (there were several other routines where these dictionaries were used: these routines were correct, but the new version is simpler and more efficient).
> 
> Am I missing some points?

To me at least you did right. Is there any reason why you added those `<int>` cast though? Given that result is a typed vector that should not be necessary ?... `O_o`

Nathann


---

Comment by borassi created at 2015-10-06 09:18:17

I inserted them in order to avoid a compilation error, saying that there was a wrong conversion from long to int.

Replying to [comment:18 ncohen]:


> > Sorry, I have troubles understanding your comment. After you said that lists were better than dictionaries, I transformed all dictionaries named `int_to_vertex` into lists (there were several other routines where these dictionaries were used: these routines were correct, but the new version is simpler and more efficient).
> > 
> > Am I missing some points?
> > 
> 
> To me at least you did right. Is there any reason why you added those `<int>` cast though? Given that result is a typed vector that should not be necessary ?... `O_o`
> 
> Nathann


---

Comment by ncohen created at 2015-10-06 09:19:52

> I inserted them in order to avoid a compilation error, saying that there was a wrong conversion from long to int.

Okayyyyy `O_o`

Good to know. Thanks.

Nathann


---

Comment by vdelecroix created at 2015-10-06 11:12:27

Replying to [comment:12 jmantysalo]:
> Replying to [comment:11 borassi]:
> 
> > > What is the point of making a dict to map `0, 1, 2, 3, ...` to Python objects? Use a list!
> > 
> > I used a dict because (I think) lists are linked lists, and the random access time is O(n). Am I missing something?
> 
> https://wiki.python.org/moin/TimeComplexity says that it is O(1).

More precisely:
- A python object is a `PyObject *`
- A list or a tuple is a `PyObject **`
- A set/dict is a hash table
So you that you can not beat a Python list.

On the other hand, if you want faster access to `my_list[i]` you can have a look at [Cython  compiler directives](http://docs.cython.org/src/reference/compilation.html#compiler-directives).


---

Comment by jmantysalo created at 2015-10-28 18:18:46

This is still in needs_review, but the discussions seems to have end. Is there something to do, or can someone who understand the code click this to positive_review?


---

Comment by vdelecroix created at 2015-10-29 12:32:54

I am ok for a positive review. I let to the other reviewers some possible final comment.


---

Comment by ncohen created at 2015-10-29 12:40:04

I have nothing against this branch.


---

Comment by dcoudert created at 2015-10-29 12:41:40

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2015-10-29 12:41:40

Passes all tests on my computer as well, so let's go.


---

Comment by vbraun created at 2015-10-29 16:35:00

Resolution: fixed
