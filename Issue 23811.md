# Issue 23811: Unify selfdual and self_dual

Issue created by migration from https://trac.sagemath.org/ticket/24048

Original creator: jmantysalo

Original creation time: 2017-10-15 05:25:46

CC:  tscrim


```
LinearCode(Matrix(GF(2), [[1,0],[0,1]])).is_self_dual()
Poset().is_selfdual()
```


Which one is correct?


---

Comment by roed created at 2017-10-25 17:06:41

I don't know that much about the math involved here, but how are these examples comparable?


---

Comment by roed created at 2017-10-25 17:06:41

Changing component from PLEASE CHANGE to coding theory.


---

Comment by tscrim created at 2017-10-25 23:04:28

Jori, is this a matter of code output or method name? If it is the latter, then I would say `is_self_dual` because otherwise it looks like there is a word "selfdual," which there is not.


---

Comment by jmantysalo created at 2017-10-26 04:30:07

Replying to [comment:2 tscrim]:
> Jori, is this a matter of code output or method name? If it is the latter, then I would say `is_self_dual` because otherwise it looks like there is a word "selfdual," which there is not.

Sorry for being unclear. It was the method name I wondered.

I'll make a patch to change the name of function of finite posets.


---

Comment by roed created at 2017-10-26 05:15:49

Oh, I see.  I agree that it should be `self_dual` rather than `selfdual`.
----
New commits:


---

Comment by roed created at 2017-10-26 05:18:34

I think `is_self_dual = deprecated_function_alias(is_selfdual, 24048)` should be `is_selfdual = deprecated_function_alias(24048, is_self_dual)`.


---

Comment by tscrim created at 2017-10-26 05:19:58

I would also put the alias declaration below the method declaration (it makes me less worried as a programmer). Once done, and if in a (undeclared) needs review state and doctests pass, positive review.


---

Comment by git created at 2017-10-26 05:39:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2017-10-26 05:43:16

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2017-10-26 05:43:16

Changing component from coding theory to misc.


---

Comment by jmantysalo created at 2017-10-26 05:43:16

You are both right: I did the deprecation line wrong, and also put it in wrong place.

There was also two places more to change, but now everything should work.


---

Comment by tscrim created at 2017-10-26 06:26:08

Tests pass for me. Positive review.


---

Comment by tscrim created at 2017-10-26 06:26:08

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2017-10-31 03:22:47

Well I believe this test failure originates here

```
sage -t --long --warn-long 73.3 /usr/lib64/python2.7/site-packages/sage/tests/finite_poset.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/tests/finite_poset.py", line 144, in sage.tests.finite_poset.test_finite_lattice
Failed example:
    test_finite_lattice(L) is None  # Long time
Expected:
    True
Got:
    doctest:warning
      File "/usr/lib/python-exec/python2.7/sage-runtests", line 103, in <module>
        err = DC.run()
      File "/usr/lib64/python2.7/site-packages/sage/doctest/control.py", line 1093, in run
        self.run_doctests()
      File "/usr/lib64/python2.7/site-packages/sage/doctest/control.py", line 822, in run_doctests
        self.dispatcher.dispatch()
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1777, in dispatch
        self.parallel_dispatch()
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1667, in parallel_dispatch
        w.start()  # This might take some time
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1943, in start
        super(DocTestWorker, self).start()
      File "/usr/lib64/python2.7/multiprocessing/process.py", line 130, in start
        self._popen = Popen(self)
      File "/usr/lib64/python2.7/multiprocessing/forking.py", line 126, in __init__
        code = process_obj._bootstrap()
      File "/usr/lib64/python2.7/multiprocessing/process.py", line 267, in _bootstrap
        self.run()
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1916, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 2218, in __call__
        result = runner.run(test)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 663, in run
        return self._run(test, compileflags, out)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 518, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 888, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.finite_poset.test_finite_lattice[2]>", line 1, in <module>
        test_finite_lattice(L) is None  # Long time
      File "/usr/lib64/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in test_finite_lattice
        P = {x: test_attrcall('is_'+x, L) for x in all_props}
      File "/usr/lib64/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in <dictcomp>
        P = {x: test_attrcall('is_'+x, L) for x in all_props}
      File "/usr/lib64/python2.7/site-packages/sage/tests/finite_poset.py", line 117, in test_attrcall
        return attrcall(name)(L)
      File "/usr/lib64/python2.7/site-packages/sage/misc/misc.py", line 1640, in __call__
        return getattr(x, self.name)(*(self.args+args), **self.kwds)
      File "/usr/lib64/python2.7/site-packages/sage/misc/superseded.py", line 417, in __call__
        "%s is deprecated. Please use %s instead."%(self.__name__, other))
      File "/usr/lib64/python2.7/site-packages/sage/misc/superseded.py", line 101, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
      File "/usr/lib64/python2.7/site-packages/sage/misc/superseded.py", line 142, in warning
        warn(message, warning_class, stacklevel)
    :
    DeprecationWarning: is_selfdual is deprecated. Please use is_self_dual instead.
    See http://trac.sagemath.org/24048 for details.
    True
**********************************************************************
```

the warning gets in the way.


---

Comment by tscrim created at 2017-10-31 03:52:33

Indeed it does (also confirmed by the patchbots).


---

Comment by tscrim created at 2017-10-31 03:52:33

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-10-31 05:09:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2017-10-31 05:10:57

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2017-10-31 05:10:57

Good catch, my `grep` did not found that. Corrected.


---

Comment by fbissey created at 2017-10-31 06:33:24

Replying to [comment:14 jmantysalo]:
> Good catch, my `grep` did not found that. Corrected.

Yes it passes now.


---

Comment by fbissey created at 2017-10-31 06:33:24

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2017-10-31 06:40:52

Thanks!

(English language needs some unification too... `;=)` For example "Railway station" -- why not "rail way station" or "railwaystation"? In Finnish it is "rautatieasema".)


---

Comment by vbraun created at 2017-10-31 08:05:38

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-10-31 08:05:38


```
sage -t --long --warn-long 67.5 src/sage/tests/finite_poset.py
**********************************************************************
File "src/sage/tests/finite_poset.py", line 144, in sage.tests.finite_poset.test_finite_lattice
Failed example:
    test_finite_lattice(L) is None  # Long time
Expected:
    True
Got:
    doctest:warning
      File "/mnt/disk/home/release/Sage/src/bin/sage-runtests", line 125, in <module>
        err = DC.run()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 1144, in run
        self.run_doctests()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 872, in run_doctests
        self.dispatcher.dispatch()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1774, in dispatch
        self.parallel_dispatch()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1664, in parallel_dispatch
        w.start()  # This might take some time
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1940, in start
        super(DocTestWorker, self).start()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 130, in start
        self._popen = Popen(self)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/forking.py", line 126, in __init__
        code = process_obj._bootstrap()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 267, in _bootstrap
        self.run()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1913, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2215, in __call__
        result = runner.run(test)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 660, in run
        return self._run(test, compileflags, out)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 515, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 885, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.finite_poset.test_finite_lattice[2]>", line 1, in <module>
        test_finite_lattice(L) is None  # Long time
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in test_finite_lattice
        P = {x: test_attrcall('is_'+x, L) for x in all_props}
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in <dictcomp>
        P = {x: test_attrcall('is_'+x, L) for x in all_props}
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 117, in test_attrcall
        return attrcall(name)(L)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/misc.py", line 1640, in __call__
        return getattr(x, self.name)(*(self.args+args), **self.kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 417, in __call__
        "%s is deprecated. Please use %s instead."%(self.__name__, other))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 101, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 142, in warning
        warn(message, warning_class, stacklevel)
    :
    DeprecationWarning: is_selfdual is deprecated. Please use is_self_dual instead.
    See http://trac.sagemath.org/24048 for details.
    True
**********************************************************************
1 item had failures:
   1 of   4 in sage.tests.finite_poset.test_finite_lattice
    [7 tests, 1 failure, 0.83 s]
```



---

Comment by fbissey created at 2017-10-31 08:07:40

Changing status from needs_work to positive_review.


---

Comment by fbissey created at 2017-10-31 08:07:40

Replying to [comment:17 vbraun]:
> {{{
> sage -t --long --warn-long 67.5 src/sage/tests/finite_poset.py
> **********************************************************************
> File "src/sage/tests/finite_poset.py", line 144, in sage.tests.finite_poset.test_finite_lattice
> Failed example:
>     test_finite_lattice(L) is None  # Long time
> Expected:
>     True
> Got:
>     doctest:warning
>       File "/mnt/disk/home/release/Sage/src/bin/sage-runtests", line 125, in <module>
>         err = DC.run()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 1144, in run
>         self.run_doctests()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 872, in run_doctests
>         self.dispatcher.dispatch()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1774, in dispatch
>         self.parallel_dispatch()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1664, in parallel_dispatch
>         w.start()  # This might take some time
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1940, in start
>         super(DocTestWorker, self).start()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 130, in start
>         self._popen = Popen(self)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/forking.py", line 126, in __init__
>         code = process_obj._bootstrap()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 267, in _bootstrap
>         self.run()
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1913, in run
>         task(self.options, self.outtmpfile, msgpipe, self.result_queue)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2215, in __call__
>         result = runner.run(test)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 660, in run
>         return self._run(test, compileflags, out)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 515, in _run
>         self.compile_and_execute(example, compiler, test.globs)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 885, in compile_and_execute
>         exec(compiled, globs)
>       File "<doctest sage.tests.finite_poset.test_finite_lattice[2]>", line 1, in <module>
>         test_finite_lattice(L) is None  # Long time
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in test_finite_lattice
>         P = {x: test_attrcall('is_'+x, L) for x in all_props}
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 161, in <dictcomp>
>         P = {x: test_attrcall('is_'+x, L) for x in all_props}
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/tests/finite_poset.py", line 117, in test_attrcall
>         return attrcall(name)(L)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/misc.py", line 1640, in __call__
>         return getattr(x, self.name)(*(self.args+args), **self.kwds)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 417, in __call__
>         "%s is deprecated. Please use %s instead."%(self.__name__, other))
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 101, in deprecation
>         warning(trac_number, message, DeprecationWarning, stacklevel)
>       File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 142, in warning
>         warn(message, warning_class, stacklevel)
>     :
>     DeprecationWarning: is_selfdual is deprecated. Please use is_self_dual instead.
>     See http://trac.sagemath.org/24048 for details.
>     True
> **********************************************************************
> 1 item had failures:
>    1 of   4 in sage.tests.finite_poset.test_finite_lattice
>     [7 tests, 1 failure, 0.83 s]
> }}}

Already reported and fixed. May be I should have left it in "needs_work" for a bit longer for you to see.


---

Comment by vbraun created at 2017-11-02 11:05:40

Resolution: fixed
