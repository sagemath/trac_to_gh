# Issue 19158: Implement Tableau to sign matrix code

Issue created by migration from Trac.

Original creator: ssolhjem

Original creation time: 2015-10-12 16:17:32

CC:  tscrim kdilks jessicapalencia

Keywords: Tableau

I would like to add code for Sage to turn a Tableau into a Sign Matrix.


---

Comment by ssolhjem created at 2015-10-13 16:56:28

Changing status from new to needs_review.


---

Comment by ssolhjem created at 2015-10-13 16:56:28

New commits:


---

Comment by kdilks created at 2015-10-13 20:06:29

In terms of documentation:

* Change the two paragraphs after the first one into `INPUT` and `OUTPUT` blocks ( http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content ).
* Change the start of the docstring from `"""` to `r"""`. This changes the way the text is read when compiled. Then things enclosed in two graves (like ```self```) will show up kind of bolded with a background, and is used to indicate variable names in the code. Things encased in a single set of graves will be read in math-mode. So things like numbers can go in there, and you can also do `'m\times n'`, and it should tex that.

In terms of the code:
* I wouldn't use sparse matrices. Your code goes through defines what the `partial_sum_matrix` and `sign_matrix` is at every single entry, so you're not taking advantage of the structure of sparse matrices. In fact, I picked a random SSYT of shape `[1000,999,998,...,2,1]` with `max_entry=10000`, and using sparse matrices was 4 times slower than not using sparse matrices.
* Add some tests, one or two simple examples to check, one or two checking possible fringe cases (ie, making sure your code can handle things like the empty tableau, if such a thing exists).
* Is m actually a parameter, or is m always the largest entry in the tableau? If it's always going to be the largest entry in the tableau, then it shouldn't be a parameter. But sometimes you want to consider the largest *possible* entry, in which case something like the SSYT `{[[1,1],[2]]`} would be a valid member of the set of SSYT of shape `[2,1]` with largest possible entry 3. In that case, I would change the name of the parameter m to `max_entry`. Make it default to the largest entry appearing in the tableau if the user doesn't specify a parameter. Your code should also check to make sure that any `{max_entry`} parameter entered into this method is at least as big as the largest entry in the tableau.


---

Comment by kdilks created at 2015-10-13 20:06:29

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2015-10-13 20:37:46

Replying to [comment:3 kdilks]:
> In terms of the code:
> * I wouldn't use sparse matrices. Your code goes through defines what the `partial_sum_matrix` and `sign_matrix` is at every single entry, so you're not taking advantage of the structure of sparse matrices. In fact, I picked a random SSYT of shape `[1000,999,998,...,2,1]` with `max_entry=10000`, and using sparse matrices was 4 times slower than not using sparse matrices.

Just to expand on this a little bit, the way Sage creates sparse matrices is fairly bad. So just remove the `sparse=True` part from the `MatrixSpace` line.

You should also make sure that `self` is the name of the first argument to any method. This is a python convention that is very strictly followed.


---

Comment by git created at 2015-11-04 16:40:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ssolhjem created at 2015-11-04 16:44:11

I made the suggested changes and all tests have passed.


---

Comment by ssolhjem created at 2015-11-04 16:44:11

Changing status from needs_work to needs_review.


---

Comment by kdilks created at 2015-11-04 17:40:37

Cleaned up the documentation a little bit. I also added a default parameter for `max_entry`.
----
New commits:


---

Comment by chapoton created at 2015-11-04 17:59:18

* missing one blank line after `INPUT:`

* `max_entry==None` should rather be `max_entry is None`


---

Comment by ssolhjem created at 2015-12-02 16:38:04

New commits:


---

Comment by git created at 2015-12-02 17:04:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kdilks created at 2015-12-02 18:56:52

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-12-02 19:05:19

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-12-02 19:05:19

One minor thing: `'m \times n'` should be ``m \times n``.


---

Comment by git created at 2015-12-05 22:00:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ssolhjem created at 2015-12-05 22:02:46

Changing status from needs_work to needs_review.


---

Comment by kdilks created at 2015-12-05 22:11:17

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-12-07 17:27:38

Resolution: fixed
