# Issue 32435: src/setup.py: Don't cythonize everything in src/

Issue created by migration from https://trac.sagemath.org/ticket/32672

Original creator: mkoeppe

Original creation time: 2021-10-12 06:27:21

CC:  @tobiasdiez @kliem


```
 extensions = cythonize(
        ["**/*.pyx"],
```

at least it should restrict itself to `sage/**/*.pyx`
so that it does not go cythonizing in random directories that the user may have in this directory... such as a venv...


---

Comment by mkoeppe created at 2021-10-12 06:28:56

New commits:


---

Comment by git created at 2021-10-12 16:40:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-10-12 16:40:49

Changing status from new to needs_review.


---

Comment by @kliem created at 2021-10-13 07:21:31

LGTM.

Btw, this is how I verified how it works. `cythonize` calls `extended_iglob`


```
sage: _ = !cd $SAGE_SRC
sage: from Cython.Build.Dependencies import extended_iglob
sage: a = list(extended_iglob("sage/**/*.pyx"))
sage: b = list(extended_iglob("**/*.pyx"))
sage: list(t for t in b if not t in a)
['foo.pyx']
sage: list(t for t in a if not t in b)
[]
```


In my case I placed `foo.pyx` in `SAGE_SRC`.


---

Comment by @kliem created at 2021-10-13 07:21:31

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-13 16:30:20

Thank you!


---

Comment by vbraun created at 2021-10-19 20:31:20

Resolution: fixed
