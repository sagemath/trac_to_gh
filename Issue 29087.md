# Issue 29087: Translation with both Vrep and Hrep

archive/issues_029087.json:
```json
{
    "body": "CC:  @jplab @laisrast\n\nKeywords: polyhedra, translation\n\nWe set up translation of polyhedra with both Vrepresentation and Hrepresentation, if the backend supports it.\n\nThis might be faster, when the Hrepresentation is shorter (previously translation was computed from Vrepresentation). Also this is much faster, when the backend supports precomputed data (currently `field`).\n\nBefore this ticket:\n\n```\nsage: P = polytopes.hypercube(14, 'zero_one')\nsage: %time Q = P - P.center()\nCPU times: user 3.42 s, sys: 2 \u00b5s, total: 3.42 s\nWall time: 3.42 s\n\nsage: P = polytopes.hypercube(8, 'zero_one', backend='field')\nsage: %time Q = P - P.center()\nCPU times: user 13.8 s, sys: 8 \u00b5s, total: 13.8 s\nWall time: 13.8 s\n\nsage: P = polytopes.cross_polytope(12)\nsage: %timeit Q = P - P.vertices()[0].vector()\n10 loops, best of 5: 149 ms per loop\n\nsage: P = polytopes.cross_polytope(6, backend='field')\nsage: %time Q = P - P.vertices()[0].vector()\nCPU times: user 744 ms, sys: 4 \u00b5s, total: 744 ms\nWall time: 744 ms\n```\n\nWith this ticket:\n\n```\n# Hrep is shorter.\nsage: P = polytopes.hypercube(14)\nsage: %time Q = P - P.center()\nCPU times: user 1.01 s, sys: 16 ms, total: 1.02 s\nWall time: 1.02 s\n\n# Completely precomputed.\nsage: P = polytopes.hypercube(8, 'zero_one', backend='field')\nsage: %time Q = P - P.center()\nCPU times: user 16.9 ms, sys: 0 ns, total: 16.9 ms\nWall time: 16.8 ms\n\n# A bit slower (precomputed data is discarded).\nsage: P = polytopes.cross_polytope(12)\nsage: %timeit Q = P - P.vertices()[0].vector()\n10 loops, best of 5: 172 ms per loop\n\n# Completely precomputed.\nsage: P = polytopes.cross_polytope(6, backend='field')\nsage: %time Q = P - P.vertices()[0].vector()\nCPU times: user 2.12 ms, sys: 30 \u00b5s, total: 2.15 ms\nWall time: 2.15 ms\n\n# With precomputed data translations are what they should be -- trivial.\nsage: P = polytopes.hypercube(14, 'zero_one', backend='field')\nsage: %time Q = P - P.center()\nCPU times: user 404 ms, sys: 3.97 ms, total: 408 ms\nWall time: 408 ms\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/29324\n\n",
    "closed_at": "2020-04-19T19:25:19Z",
    "created_at": "2020-03-13T12:14:01Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Translation with both Vrep and Hrep",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29087",
    "user": "https://github.com/kliem"
}
```
CC:  @jplab @laisrast

Keywords: polyhedra, translation

We set up translation of polyhedra with both Vrepresentation and Hrepresentation, if the backend supports it.

This might be faster, when the Hrepresentation is shorter (previously translation was computed from Vrepresentation). Also this is much faster, when the backend supports precomputed data (currently `field`).

Before this ticket:

```
sage: P = polytopes.hypercube(14, 'zero_one')
sage: %time Q = P - P.center()
CPU times: user 3.42 s, sys: 2 µs, total: 3.42 s
Wall time: 3.42 s

sage: P = polytopes.hypercube(8, 'zero_one', backend='field')
sage: %time Q = P - P.center()
CPU times: user 13.8 s, sys: 8 µs, total: 13.8 s
Wall time: 13.8 s

sage: P = polytopes.cross_polytope(12)
sage: %timeit Q = P - P.vertices()[0].vector()
10 loops, best of 5: 149 ms per loop

sage: P = polytopes.cross_polytope(6, backend='field')
sage: %time Q = P - P.vertices()[0].vector()
CPU times: user 744 ms, sys: 4 µs, total: 744 ms
Wall time: 744 ms
```

With this ticket:

```
# Hrep is shorter.
sage: P = polytopes.hypercube(14)
sage: %time Q = P - P.center()
CPU times: user 1.01 s, sys: 16 ms, total: 1.02 s
Wall time: 1.02 s

# Completely precomputed.
sage: P = polytopes.hypercube(8, 'zero_one', backend='field')
sage: %time Q = P - P.center()
CPU times: user 16.9 ms, sys: 0 ns, total: 16.9 ms
Wall time: 16.8 ms

# A bit slower (precomputed data is discarded).
sage: P = polytopes.cross_polytope(12)
sage: %timeit Q = P - P.vertices()[0].vector()
10 loops, best of 5: 172 ms per loop

# Completely precomputed.
sage: P = polytopes.cross_polytope(6, backend='field')
sage: %time Q = P - P.vertices()[0].vector()
CPU times: user 2.12 ms, sys: 30 µs, total: 2.15 ms
Wall time: 2.15 ms

# With precomputed data translations are what they should be -- trivial.
sage: P = polytopes.hypercube(14, 'zero_one', backend='field')
sage: %time Q = P - P.center()
CPU times: user 404 ms, sys: 3.97 ms, total: 408 ms
Wall time: 408 ms
```

Issue created by migration from https://trac.sagemath.org/ticket/29324





---

archive/issue_comments_411251.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-13T12:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411251",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_411252.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-03-13T12:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411252",
    "user": "https://github.com/kliem"
}
```

New commits:



---

archive/issue_events_074653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29087#event-74653"
}
```



---

archive/issue_comments_411253.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411253",
    "user": "https://github.com/mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_411254.json:
```json
{
    "body": "It looks good to me.\nTests passed except for `pycodestyle` errors which are not caused by this ticket",
    "created_at": "2020-04-17T09:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411254",
    "user": "https://github.com/LaisRast"
}
```

It looks good to me.
Tests passed except for `pycodestyle` errors which are not caused by this ticket



---

archive/issue_comments_411255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-17T09:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411255",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_411256.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-19T19:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411256",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_074654.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-19T19:25:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29087#event-74654"
}
```



---

archive/issue_comments_411257.json:
```json
{
    "body": "I think the milestone is incorrect here and maybe in a lot of other tickets as well. This ticket is part of 9.1.rc1.",
    "created_at": "2020-04-24T08:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29087#issuecomment-411257",
    "user": "https://github.com/kliem"
}
```

I think the milestone is incorrect here and maybe in a lot of other tickets as well. This ticket is part of 9.1.rc1.



---

archive/issue_events_074655.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T02:15:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29087#event-74655"
}
```



---

archive/issue_events_074656.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T02:15:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29087",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29087#event-74656"
}
```
