# Issue 32405: enumeration of linear intervals in posets

Issue created by migration from https://trac.sagemath.org/ticket/32642

Original creator: chapoton

Original creation time: 2021-10-06 07:51:25

CC:  tscrim slelievre

as one useful tool to have


---

Comment by chapoton created at 2021-10-06 07:51:50

New commits:


---

Comment by chapoton created at 2021-10-06 07:51:50

Changing status from new to needs_review.


---

Comment by git created at 2021-10-06 07:53:46

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2021-10-06 11:52:27

green bot. Slightly interesting ticket, maybe, for once.


---

Comment by tscrim created at 2021-10-06 22:57:35

It seems like you are implementing a naïve version of `all_paths_iterator()` for `is_linear_interval`. I would probably implement it as

```python
def is_linear_interval(self, t_min, t_max):
    # We have the leq matrix, so checking comparisons is fast
    if self.is_lequal == self._alternate_is_lequal:
        if not self.is_lequal(t_min, t_max):  # very quick check
            return False
        t = t_max
        while t != t_min:
            found = False
            for u in self.neighbor_in_iterator(t):
                if self.is_lequal(t_min, u):
                    if not found:
                        found = True
                        t = u
                    else:
                        return False
        return True
    it = self.all_paths_iterator(t_min, t_max)
    try:
        next(it)
    except StopIteration:  # not comparable
        return False
    try:
        next(it)
    except StopIteration:  # one path
        return True
    return False
```

I suspect the naïve version you have is faster when the comparisons are fast, but not when we have to check for paths in the Hasse diagram digraph (the default/generic `is_lequal`).


---

Comment by tscrim created at 2021-10-06 22:58:31

Also, do we want to also expose `is_linear_interval` in the frontend?


---

Comment by git created at 2021-10-07 07:45:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-10-07 07:48:22

Thanks for the suggestions.

I have used the presence of `_leq_storage` as the check for fast comparison, as this is what is used by `_alternate_is_lequal`. Maybe at some point one should always compute this data when creating a poset ?


---

Comment by tscrim created at 2021-10-07 23:00:23

Thank you. LGTM.


---

Comment by tscrim created at 2021-10-07 23:00:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-19 20:31:52

Resolution: fixed
