# Issue 80: Clarify: version.py versus sage-version

Issue created by migration from Trac.

Original creator: was

Original creation time: 2006-09-23 15:50:59

Assignee: was


```
On Sat, 23 Sep 2006 07:55:20 -0700, David Joyner <wdjoyner`@`gmail.com> wrote:

>> To try it out in the latest SAGE (1.3.7.3.3 and not earlier!),
>> type (from <SAGE_ROOT>/deve/sage)
>>
>> sage -hg pull http://sage.math.washington.edu/sage/hg/sage-main
>> sage -hg merge    # if necessary
>> sage -hg update
>>
>>
>
> wdj`@`wooster:~/sagefiles/sage-1.2.0/devel/sage$ ../../sage -hg update
> remote changed .hgtags which local deleted
> (k)eep or (d)elete?   k
> remote changed export which local deleted
> (k)eep or (d)elete? k
> merging sage/version.py
>
> Now kdiff3 (which I mistook for a browser window) opens with some text
> highlighted
> in yellow and red. The bar at the bottom says "Number of remaining
> unsolved conflicts: 1".
> The conflict appears to be in version.py. I clicked on "merge" on the
> top bar and then
> picked "line 1 from C", which was one of the options in the pop-down  
> menu,
> then then clicked on "save" and quit. If memory serves (which is iffy),
> line C
> indicated the version was 1.3.7.3.3. However, when I start sage I get:
>
> --------------------------------------------------------
> | SAGE Version 1.3.7.3, Build Date: 2006-09-21-0448    |
> | Distributed under the GNU General Public License V2. |
> --------------------------------------------------------
>
> sage: version()
>  'SAGE Version 1.3.7.3, Build Date: 2006-09-21-0448'
>
> This is different than what
> /home/wdj/sagefiles/sage-1.2.0/devel/sage-main/sage/version.py
> indicates: version='1.3.7.3.3'; date='2006-09-21'
>
> This seems funny to me. Is there a mistake here?

The banner is not the output of version().   The banner is the output
of <SAGE_ROOT>/local/bin/sage-banner, which gets updated when you
upgrade sage_scripts.    In contrast, the version() function outputs
the version number of the SAGE library, i.e., what is in version.py,
which you just upgraded (correctly).    I should make the output
of version() much different.

William
```



---

Comment by was created at 2006-09-23 15:51:21

Changing component from algebraic geometry to user interface.


---

Comment by was created at 2006-09-23 15:51:21

Changing priority from major to minor.


---

Comment by was created at 2006-09-23 15:51:21

Changing type from defect to enhancement.


---

Comment by pdehaye created at 2007-08-21 16:28:34


```
paul-olivier-dehayes-computer:~ pdehaye$ sage
----------------------------------------------------------------------
----------------------------------------------------------------------
| SAGE Version 2.8, Release Date: 2007-08-12                         |
| Type notebook() for the GUI, and license() for information.        |
sage: version()
'SAGE Version 2.8.1, Release Date: 2007-08-18'
sage: 
```



---

Comment by mabshoff created at 2008-03-16 08:59:59

I am not sure if there is anything to fix here. Opinions?


---

Comment by was created at 2008-03-16 09:41:22

> I am not sure if there is anything to fix here. Opinions?

Yes, we need to "make the output of version() much different."


---

Comment by mabshoff created at 2008-04-12 13:08:24

Replying to [comment:5 was]:
> Yes, we need to "make the output of version() much different."

Ok, I would prefer then that version returns a dictionary with major, minor and tiny version numbers. That would make it quite easy to write a set of functions that could check for a minimum version at startup for example.

Thoughts?

Cheers,

Michael


---

Comment by jhpalmieri created at 2008-10-31 19:12:16

See #2039, to which I've just added a patch. Does this do what you want?

  John


---

Comment by mabshoff created at 2008-10-31 19:34:01

Replying to [comment:5 was]:
> > I am not sure if there is anything to fix here. Opinions?
> 
> Yes, we need to "make the output of version() much different."

Why? I don't see any reason to do so. I re-read the above email and still do not understand how making version() any different than the output from sage-banner would accomplish anything?

Cheers,

Michael


---

Comment by mabshoff created at 2008-10-31 19:44:55

In fact: banner_text() which is used for sage-banner uses version to construct the string printed at Sage startup:

```
 s += "\n| %-66s |\n"%version() 
```


I am very tempted to make this ticket invalid unless someone can actually come up with a concrete suggestion what to do and why to do it.

Cheers,

Michael


---

Comment by jhpalmieri created at 2008-10-31 20:46:45

I'm not sure I understand.  SAGE_ROOT/local/bin/sage-banner seems to be responsible for the startup message.  Is this file autogenerated from banner_text() somehow?  If I change banner_text(), the startup message is not affected.

(However, I still don't quite see the point of this ticket, and would have no objections to invalidating it.)

  John


---

Comment by mabshoff created at 2008-10-31 20:49:51

Replying to [comment:10 jhpalmieri]:
> I'm not sure I understand.  SAGE_ROOT/local/bin/sage-banner seems to be responsible for the startup message.  Is this file autogenerated from banner_text() somehow?  

Yes, in $SAGE_ROOT/local/bin/sage-sdist

> If I change banner_text(), the startup message is not affected.

It is only changed once $SAGE_ROOT/local/bin/sage-sdist is run.

> (However, I still don't quite see the point of this ticket, and would have no objections to invalidating it.)

+1 from me, but that wasn't in doubt :)
 
>   John

Cheers,

Michael


---

Comment by mabshoff created at 2008-10-31 21:08:00

William agreed via Google chat, so this is invalidated.

Cheers,

Michael


---

Comment by mabshoff created at 2008-10-31 21:08:00

Resolution: invalid
