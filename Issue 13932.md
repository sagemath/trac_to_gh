# Issue 13932: P-partition enumerators in QSym

archive/issues_013932.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  saliola\n\nKeywords: QSym, P-partitions, posets\n\nOr did someone already implement them?\n\nHere's my code. Its weakest point is probably the input; instead of an actual pair of a poset and a map from its elements to {1,2,3,...}, it takes a pair of a poset and a linear order on it represented as a tuple of its elements. (See docstring for details. By the way, I'm hoping the LaTeX does work... no idea how to check that.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/14136\n\n",
    "created_at": "2013-02-15T19:20:33Z",
    "labels": [
        "combinatorics",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "P-partition enumerators in QSym",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13932",
    "user": "darij"
}
```
Assignee: sage-combinat

CC:  saliola

Keywords: QSym, P-partitions, posets

Or did someone already implement them?

Here's my code. Its weakest point is probably the input; instead of an actual pair of a poset and a map from its elements to {1,2,3,...}, it takes a pair of a poset and a linear order on it represented as a tuple of its elements. (See docstring for details. By the way, I'm hoping the LaTeX does work... no idea how to check that.)

Issue created by migration from https://trac.sagemath.org/ticket/14136





---

archive/issue_comments_173619.json:
```json
{
    "body": "P-partition enumerators for QSym",
    "created_at": "2013-02-15T19:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173619",
    "user": "darij"
}
```

P-partition enumerators for QSym



---

archive/issue_comments_173620.json:
```json
{
    "body": "Changing keywords from \"QSym, P-partitions, posets\" to \"QSym, P-partitions, posets, days45\".",
    "created_at": "2013-02-15T19:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173620",
    "user": "darij"
}
```

Changing keywords from "QSym, P-partitions, posets" to "QSym, P-partitions, posets, days45".



---

archive/issue_comments_173621.json:
```json
{
    "body": "Attachment [ppart.py](tarball://root/attachments/some-uuid/ticket14136/ppart.py) by darij created at 2013-02-15 19:33:08",
    "created_at": "2013-02-15T19:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173621",
    "user": "darij"
}
```

Attachment [ppart.py](tarball://root/attachments/some-uuid/ticket14136/ppart.py) by darij created at 2013-02-15 19:33:08



---

archive/issue_comments_173622.json:
```json
{
    "body": "You need to choose where to put this function :\n\n- as a method of finite posets ?\n- as a method of Quasisymmetric functions ?\n\nOnce this choice is made, please upload a patch rather than a python file\n\nYou need a white line after the EXAMPLES::",
    "created_at": "2013-04-29T16:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173622",
    "user": "chapoton"
}
```

You need to choose where to put this function :

- as a method of finite posets ?
- as a method of Quasisymmetric functions ?

Once this choice is made, please upload a patch rather than a python file

You need a white line after the EXAMPLES::



---

archive/issue_comments_173623.json:
```json
{
    "body": "here is a patch. There remains a deprecation warning that need to be taken care of.",
    "created_at": "2013-04-30T16:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173623",
    "user": "chapoton"
}
```

here is a patch. There remains a deprecation warning that need to be taken care of.



---

archive/issue_comments_173624.json:
```json
{
    "body": "Thank you, Fr\u00e9d\u00e9ric! What exactly is deprecated? (I'm at work now so I can't compile.)",
    "created_at": "2013-04-30T16:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173624",
    "user": "darij"
}
```

Thank you, Frédéric! What exactly is deprecated? (I'm at work now so I can't compile.)



---

archive/issue_comments_173625.json:
```json
{
    "body": "new patch, better doc, almost pass tests, but I have not been able to solve this deprecation problem.\n\nIt may come from the line QR=QuasiSymmetric(R).",
    "created_at": "2013-04-30T19:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173625",
    "user": "chapoton"
}
```

new patch, better doc, almost pass tests, but I have not been able to solve this deprecation problem.

It may come from the line QR=QuasiSymmetric(R).



---

archive/issue_comments_173626.json:
```json
{
    "body": "I confirm that the DeprecationWarning comes from the line\n\n```\nQR = QuasiSymmetricFunctions(R)\n```\n\nBut I am not able so far to understand exactly what the problem is.",
    "created_at": "2013-05-05T18:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173626",
    "user": "chapoton"
}
```

I confirm that the DeprecationWarning comes from the line

```
QR = QuasiSymmetricFunctions(R)
```

But I am not able so far to understand exactly what the problem is.



---

archive/issue_comments_173627.json:
```json
{
    "body": "hg is driving me nuts...\n\n\n```\ndarij@travis-virtualbox:~/sage-5.9.rc1$ hg qpush -v\napplying trac_14136_p_partition_enumerator_v1.patch\n[Errno 20] Not a directory: '/home/darij/sage-5.9.rc1/sage/combinat/posets/posets.py'\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_14136_p_partition_enumerator_v1.patch\ndarij@travis-virtualbox:~/sage-5.9.rc1$ \n```\n\n\nI was trying to install the patch on a fresh sage-5.9rc1, main branch (due to QSym being involved).\n\nEDIT: Oh... should I just manually replace \"combinat\" by \"sage\" in the patch file?",
    "created_at": "2013-05-06T00:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173627",
    "user": "darij"
}
```

hg is driving me nuts...


```
darij@travis-virtualbox:~/sage-5.9.rc1$ hg qpush -v
applying trac_14136_p_partition_enumerator_v1.patch
[Errno 20] Not a directory: '/home/darij/sage-5.9.rc1/sage/combinat/posets/posets.py'
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_14136_p_partition_enumerator_v1.patch
darij@travis-virtualbox:~/sage-5.9.rc1$ 
```


I was trying to install the patch on a fresh sage-5.9rc1, main branch (due to QSym being involved).

EDIT: Oh... should I just manually replace "combinat" by "sage" in the patch file?



---

archive/issue_comments_173628.json:
```json
{
    "body": "you should be in '/home/darij/sage-5.9.rc1/devel/sage-main' to use hg",
    "created_at": "2013-05-06T07:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173628",
    "user": "chapoton"
}
```

you should be in '/home/darij/sage-5.9.rc1/devel/sage-main' to use hg



---

archive/issue_comments_173629.json:
```json
{
    "body": "Attachment [trac_14136_p_partition_enumerator_v1.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136_p_partition_enumerator_v1.patch) by chapoton created at 2013-05-08 20:31:20",
    "created_at": "2013-05-08T20:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173629",
    "user": "chapoton"
}
```

Attachment [trac_14136_p_partition_enumerator_v1.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136_p_partition_enumerator_v1.patch) by chapoton created at 2013-05-08 20:31:20



---

archive/issue_comments_173630.json:
```json
{
    "body": "still the same failing doctest with 5.10.beta1 ..",
    "created_at": "2013-05-08T20:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173630",
    "user": "chapoton"
}
```

still the same failing doctest with 5.10.beta1 ..



---

archive/issue_comments_173631.json:
```json
{
    "body": "Thanks for the help with hg!!\n\nI can confirm the annoying `     doctest:201: DeprecationWarning: object.__init__() takes no parameters ` in response to ` QR = QuasiSymmetricFunctions(R) ` (unless there is some delay between the causing of the bug and the message). I'm using sage-main, so the breakage of QSym is out of question. No idea where it comes from...",
    "created_at": "2013-05-09T03:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173631",
    "user": "darij"
}
```

Thanks for the help with hg!!

I can confirm the annoying `     doctest:201: DeprecationWarning: object.__init__() takes no parameters ` in response to ` QR = QuasiSymmetricFunctions(R) ` (unless there is some delay between the causing of the bug and the message). I'm using sage-main, so the breakage of QSym is out of question. No idea where it comes from...



---

archive/issue_comments_173632.json:
```json
{
    "body": "Attachment [trac_14136-p_partition_enumerator-review-ts.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136-p_partition_enumerator-review-ts.patch) by tscrim created at 2013-05-09 16:09:26\n\nI've uploaded a small review patch which does some additional tweaks to the documentation and removes the print statements. I'm also getting the same error, and even adding this method above it:\n\n```\ndef test(self, R):\n    \"\"\"\n    EXAMPLES::\n\n        sage: P = Poset([[],[]])\n        sage: P.test(QQ)\n    \"\"\"\n    from sage.combinat.ncsf_qsym.qsym import QuasiSymmetricFunctions\n    return QuasiSymmetricFunctions(R)\n```\n\nthe error gets pushed into this method. I'm thinking we should post something to sage-devel about this (since the error cannot be reproduced in sage), and as a possible solution, just copy the output of the doctest with a comment about it basically saying we have no idea what is happening.\n\nBest,\n\nTravis",
    "created_at": "2013-05-09T16:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173632",
    "user": "tscrim"
}
```

Attachment [trac_14136-p_partition_enumerator-review-ts.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136-p_partition_enumerator-review-ts.patch) by tscrim created at 2013-05-09 16:09:26

I've uploaded a small review patch which does some additional tweaks to the documentation and removes the print statements. I'm also getting the same error, and even adding this method above it:

```
def test(self, R):
    """
    EXAMPLES::

        sage: P = Poset([[],[]])
        sage: P.test(QQ)
    """
    from sage.combinat.ncsf_qsym.qsym import QuasiSymmetricFunctions
    return QuasiSymmetricFunctions(R)
```

the error gets pushed into this method. I'm thinking we should post something to sage-devel about this (since the error cannot be reproduced in sage), and as a possible solution, just copy the output of the doctest with a comment about it basically saying we have no idea what is happening.

Best,

Travis



---

archive/issue_comments_173633.json:
```json
{
    "body": "Hello, thanks for getting involved in this patch. \n\nHave you asked the question on sage-devel ?\n\nYou have introduced a typo \"parition\" in your review patch.",
    "created_at": "2013-05-09T17:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173633",
    "user": "chapoton"
}
```

Hello, thanks for getting involved in this patch. 

Have you asked the question on sage-devel ?

You have introduced a typo "parition" in your review patch.



---

archive/issue_comments_173634.json:
```json
{
    "body": "Hey,\n\nHere's the topic:\n\nhttps://groups.google.com/forum/?fromgroups#!topic/sage-devel/wQoCEeKrZ3w\n\nI'll fix the typo once we figure out what to do with the deprecation warning.",
    "created_at": "2013-05-09T23:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173634",
    "user": "tscrim"
}
```

Hey,

Here's the topic:

https://groups.google.com/forum/?fromgroups#!topic/sage-devel/wQoCEeKrZ3w

I'll fix the typo once we figure out what to do with the deprecation warning.



---

archive/issue_comments_173635.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-05-09T23:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173635",
    "user": "tscrim"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_173636.json:
```json
{
    "body": "Without the patches, there does appear to be deprecations associated with the `QuasiSymmetricFunctions` class that points to\n\n```\nDeprecationWarning: object.__init__() takes no parameters\n```\n\nA Traceback of the warning may be obtained by converting warnings to errors, i.e.\n\n```\nsage: import warnings\nsage: warnings.simplefilter('error', DeprecationWarning)\nsage: QuasiSymmetricFunctions(QQ)\n```\n\nwhich is fairly lengthy. It is curious that the patches now *expose* the warning. FWIW, the `SymmetricFunctions` class doesn't exhibit the warning:\n\n```\nsage: import warnings                                   \nsage: warnings.simplefilter('error', DeprecationWarning)\nsage: SymmetricFunctions(QQ)                            \nSymmetric Functions over Rational Field\n```\n",
    "created_at": "2013-05-11T00:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173636",
    "user": "strogdon"
}
```

Without the patches, there does appear to be deprecations associated with the `QuasiSymmetricFunctions` class that points to

```
DeprecationWarning: object.__init__() takes no parameters
```

A Traceback of the warning may be obtained by converting warnings to errors, i.e.

```
sage: import warnings
sage: warnings.simplefilter('error', DeprecationWarning)
sage: QuasiSymmetricFunctions(QQ)
```

which is fairly lengthy. It is curious that the patches now *expose* the warning. FWIW, the `SymmetricFunctions` class doesn't exhibit the warning:

```
sage: import warnings                                   
sage: warnings.simplefilter('error', DeprecationWarning)
sage: SymmetricFunctions(QQ)                            
Symmetric Functions over Rational Field
```




---

archive/issue_comments_173637.json:
```json
{
    "body": "Replying to [comment:15 strogdon]:\n> Without the patches, there does appear to be deprecations associated with the `QuasiSymmetricFunctions` class that points to\n> {{{\n> DeprecationWarning: object.__init__() takes no parameters\n> }}}\n\nWhere/how did you see this? In particular, was this placed in another doctest somewhere?\n\n> A Traceback of the warning may be obtained by converting warnings to errors, i.e.\n> {{{\n> sage: import warnings\n> sage: warnings.simplefilter('error', DeprecationWarning)\n> sage: QuasiSymmetricFunctions(QQ)\n> }}}\n> which is fairly lengthy. It is curious that the patches now *expose* the warning. FWIW, the `SymmetricFunctions` class doesn't exhibit the warning:\n> {{{\n> sage: import warnings                                   \n> sage: warnings.simplefilter('error', DeprecationWarning)\n> sage: SymmetricFunctions(QQ)                            \n> Symmetric Functions over Rational Field\n> }}}\n\nHmmm, I didn't know that (kinda cool). I'll take a look at it. Thanks.",
    "created_at": "2013-05-11T19:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173637",
    "user": "tscrim"
}
```

Replying to [comment:15 strogdon]:
> Without the patches, there does appear to be deprecations associated with the `QuasiSymmetricFunctions` class that points to
> {{{
> DeprecationWarning: object.__init__() takes no parameters
> }}}

Where/how did you see this? In particular, was this placed in another doctest somewhere?

> A Traceback of the warning may be obtained by converting warnings to errors, i.e.
> {{{
> sage: import warnings
> sage: warnings.simplefilter('error', DeprecationWarning)
> sage: QuasiSymmetricFunctions(QQ)
> }}}
> which is fairly lengthy. It is curious that the patches now *expose* the warning. FWIW, the `SymmetricFunctions` class doesn't exhibit the warning:
> {{{
> sage: import warnings                                   
> sage: warnings.simplefilter('error', DeprecationWarning)
> sage: SymmetricFunctions(QQ)                            
> Symmetric Functions over Rational Field
> }}}

Hmmm, I didn't know that (kinda cool). I'll take a look at it. Thanks.



---

archive/issue_comments_173638.json:
```json
{
    "body": "Here's the backtrace I got:\n\n```\nFile \"posets.py\", line 3271, in sage.combinat.posets.posets.FinitePoset.p_partition_enumerator\nFailed example:\n    FP = P.p_partition_enumerator((3,1,2,4), QQ, check=True); FP\nException raised:\n    Traceback (most recent call last):\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.posets.posets.FinitePoset.p_partition_enumerator[3]>\", line 1, in <module>\n        FP = P.p_partition_enumerator((Integer(3),Integer(1),Integer(2),Integer(4)), QQ, check=True); FP\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py\", line 3288, in p_partition_enumerator\n        QR = QuasiSymmetricFunctions(R)\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:977)\n      File \"cachefunc.pyx\", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 447, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1339)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py\", line 427, in __init__\n        Parent.__init__(self, category = category.WithRealizations())\n      File \"parent.pyx\", line 339, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4095)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/algebras.py\", line 159, in __init_extra__\n        one = self.one()\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/monoids.py\", line 270, in one\n        return self.a_realization().one()\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py\", line 480, in a_realization\n        return self.Monomial()\n      File \"classcall_metaclass.pyx\", line 429, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (sage/misc/classcall_metaclass.c:1106)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py\", line 152, in __classget__\n        return BoundClass(cls, instance)\n      File \"/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py\", line 201, in __init__\n        super(BoundClass, self).__init__(*args)\n    DeprecationWarning: object.__init__() takes no parameters\n```\n\nIt seems like the `BoundClass` (of `Monomial`) is calling up to the base `object` and at this point I don't understand why.",
    "created_at": "2013-05-12T07:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173638",
    "user": "tscrim"
}
```

Here's the backtrace I got:

```
File "posets.py", line 3271, in sage.combinat.posets.posets.FinitePoset.p_partition_enumerator
Failed example:
    FP = P.p_partition_enumerator((3,1,2,4), QQ, check=True); FP
Exception raised:
    Traceback (most recent call last):
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.combinat.posets.posets.FinitePoset.p_partition_enumerator[3]>", line 1, in <module>
        FP = P.p_partition_enumerator((Integer(3),Integer(1),Integer(2),Integer(4)), QQ, check=True); FP
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py", line 3288, in p_partition_enumerator
        QR = QuasiSymmetricFunctions(R)
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:977)
      File "cachefunc.pyx", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 447, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1339)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py", line 427, in __init__
        Parent.__init__(self, category = category.WithRealizations())
      File "parent.pyx", line 339, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4095)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/algebras.py", line 159, in __init_extra__
        one = self.one()
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/monoids.py", line 270, in one
        return self.a_realization().one()
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py", line 480, in a_realization
        return self.Monomial()
      File "classcall_metaclass.pyx", line 429, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (sage/misc/classcall_metaclass.c:1106)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py", line 152, in __classget__
        return BoundClass(cls, instance)
      File "/home/travis/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py", line 201, in __init__
        super(BoundClass, self).__init__(*args)
    DeprecationWarning: object.__init__() takes no parameters
```

It seems like the `BoundClass` (of `Monomial`) is calling up to the base `object` and at this point I don't understand why.



---

archive/issue_comments_173639.json:
```json
{
    "body": "There seems to be one other place in Sage where `QuasiSymmetricFunctions()` is called in the same manner as in p_partition_enumerator - in devel/sage/sage/combinat/dyck_word.py where when doctesting there is no apparent `DeprecationWarning`. However, after converting warnings to exceptions I get the following backtrace:\n\n```\nFile \"devel/sage/sage/combinat/dyck_word.py\", line 1542, in sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function\nFailed example:\n    f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(3)); f\nException raised:\n    Traceback (most recent call last):\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 466, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 825, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function[2]>\", line 1, in <module>\n        f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(Integer(3))); f\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/functional.py\", line 656, in symbolic_sum\n        return sum(expression, *args)\n      File \"<doctest sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function[2]>\", line 1, in <genexpr>\n        f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(Integer(3))); f\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/dyck_word.py\", line 1556, in characteristic_symmetric_function\n        F = QuasiSymmetricFunctions(R).Fundamental()\n      File \"classcall_metaclass.pyx\", line 279, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:932)\n      File \"cachefunc.pyx\", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 447, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 467, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1294)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py\", line 427, in __init__\n        Parent.__init__(self, category = category.WithRealizations())\n      File \"parent.pyx\", line 339, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4095)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/algebras.py\", line 159, in __init_extra__\n        one = self.one()\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/monoids.py\", line 270, in one\n        return self.a_realization().one()\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py\", line 480, in a_realization\n        return self.Monomial()\n      File \"classcall_metaclass.pyx\", line 378, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (sage/misc/classcall_metaclass.c:1061)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py\", line 152, in __classget__\n        return BoundClass(cls, instance)\n      File \"/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py\", line 201, in __init__\n        super(BoundClass, self).__init__(*args)\n    DeprecationWarning: object.__init__() takes no parameters\n```\n\nThis looks very much like the above backtrace, but of course the `DeprecationWarning` does not present itself under norm doctesting. So something very subtle must be happening.",
    "created_at": "2013-05-16T06:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173639",
    "user": "strogdon"
}
```

There seems to be one other place in Sage where `QuasiSymmetricFunctions()` is called in the same manner as in p_partition_enumerator - in devel/sage/sage/combinat/dyck_word.py where when doctesting there is no apparent `DeprecationWarning`. However, after converting warnings to exceptions I get the following backtrace:

```
File "devel/sage/sage/combinat/dyck_word.py", line 1542, in sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function
Failed example:
    f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(3)); f
Exception raised:
    Traceback (most recent call last):
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function[2]>", line 1, in <module>
        f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(Integer(3))); f
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/functional.py", line 656, in symbolic_sum
        return sum(expression, *args)
      File "<doctest sage.combinat.dyck_word.DyckWord_complete.characteristic_symmetric_function[2]>", line 1, in <genexpr>
        f = sum(t**D.area()*D.characteristic_symmetric_function() for D in DyckWords(Integer(3))); f
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/dyck_word.py", line 1556, in characteristic_symmetric_function
        F = QuasiSymmetricFunctions(R).Fundamental()
      File "classcall_metaclass.pyx", line 279, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:932)
      File "cachefunc.pyx", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 447, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 467, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1294)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py", line 427, in __init__
        Parent.__init__(self, category = category.WithRealizations())
      File "parent.pyx", line 339, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4095)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/algebras.py", line 159, in __init_extra__
        one = self.one()
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/categories/monoids.py", line 270, in one
        return self.a_realization().one()
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/combinat/ncsf_qsym/qsym.py", line 480, in a_realization
        return self.Monomial()
      File "classcall_metaclass.pyx", line 378, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (sage/misc/classcall_metaclass.c:1061)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py", line 152, in __classget__
        return BoundClass(cls, instance)
      File "/storage/sage/sage-5.9.beta5/local/lib/python2.7/site-packages/sage/misc/bindable_class.py", line 201, in __init__
        super(BoundClass, self).__init__(*args)
    DeprecationWarning: object.__init__() takes no parameters
```

This looks very much like the above backtrace, but of course the `DeprecationWarning` does not present itself under norm doctesting. So something very subtle must be happening.



---

archive/issue_comments_173640.json:
```json
{
    "body": "For the records, here is where the warning comes from. The BindableClass things\nuses a class BoundClass that inherit from functools.partial. And there seems to be an issue there:\n\n```\n    sage: import warnings\n    sage: warnings.simplefilter('error', DeprecationWarning)\n    sage: import functools\n    sage: def f(x): return x\n    sage: g = functools.partial(f,1)\n    sage: g()\n    1\n    sage: class mypartial(functools.partial):\n    ....:     def __init__(self, f, i):\n    ....:         functools.partial.__init__(self, f,i)\n    sage: g = mypartial(f,1)\n    Traceback (most recent call last)\n    ...\n    ----> 3                 functools.partial.__init__(self, f,i)\n    DeprecationWarning: object.__init__() takes no parameters\n    sage: g()\n    1\n```\n\n\nI had never noticed this. Please explore what's the best workaround!",
    "created_at": "2013-06-07T18:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173640",
    "user": "nthiery"
}
```

For the records, here is where the warning comes from. The BindableClass things
uses a class BoundClass that inherit from functools.partial. And there seems to be an issue there:

```
    sage: import warnings
    sage: warnings.simplefilter('error', DeprecationWarning)
    sage: import functools
    sage: def f(x): return x
    sage: g = functools.partial(f,1)
    sage: g()
    1
    sage: class mypartial(functools.partial):
    ....:     def __init__(self, f, i):
    ....:         functools.partial.__init__(self, f,i)
    sage: g = mypartial(f,1)
    Traceback (most recent call last)
    ...
    ----> 3                 functools.partial.__init__(self, f,i)
    DeprecationWarning: object.__init__() takes no parameters
    sage: g()
    1
```


I had never noticed this. Please explore what's the best workaround!



---

archive/issue_comments_173641.json:
```json
{
    "body": "This is somewhat non-intuitive but the following seems to work\n\n```\nsage: import warnings\nsage: warnings.simplefilter('error', DeprecationWarning)\nsage: import functools\nsage: def f(x, y): return x^y\nsage: g = functools.partial(f, 2, 3)\nsage: g()\n8\nsage: class mypartial(functools.partial):\n....:     def __init__(self, f, i, j):\n....:         functools.partial.__init__(self)\n....:         \nsage: g = mypartial(f, 2, 3)\nsage: g()\n8\n```\n\nor\n\n```\nsage: class mynewpartial(functools.partial):\n....:     def __init__(self, f, i, j):\n....:         super(mynewpartial, self).__init__()\n....:         \nsage: g = mynewpartial(f, 2, 3)\nsage: g()\n8\n```\n\nThis perhaps suggests the `__init__` method of the `BoundClass` should be\n\n```\n    def __init__(self, *args):\n        super(BoundClass, self).__init__()\n        self.__doc__ = self.func.__doc__\n```\n\ninstead of\n\n```\n        super(BoundClass, self).__init__(*args)\n```\n\nI don't know whether this breaks anything?",
    "created_at": "2013-06-14T18:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173641",
    "user": "strogdon"
}
```

This is somewhat non-intuitive but the following seems to work

```
sage: import warnings
sage: warnings.simplefilter('error', DeprecationWarning)
sage: import functools
sage: def f(x, y): return x^y
sage: g = functools.partial(f, 2, 3)
sage: g()
8
sage: class mypartial(functools.partial):
....:     def __init__(self, f, i, j):
....:         functools.partial.__init__(self)
....:         
sage: g = mypartial(f, 2, 3)
sage: g()
8
```

or

```
sage: class mynewpartial(functools.partial):
....:     def __init__(self, f, i, j):
....:         super(mynewpartial, self).__init__()
....:         
sage: g = mynewpartial(f, 2, 3)
sage: g()
8
```

This perhaps suggests the `__init__` method of the `BoundClass` should be

```
    def __init__(self, *args):
        super(BoundClass, self).__init__()
        self.__doc__ = self.func.__doc__
```

instead of

```
        super(BoundClass, self).__init__(*args)
```

I don't know whether this breaks anything?



---

archive/issue_comments_173642.json:
```json
{
    "body": "maybe this should be tried and solved in another ticket ? the purpose of the present one is only to introduce something new related to posets and quasi-symmetric functions ?",
    "created_at": "2013-06-14T18:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173642",
    "user": "chapoton"
}
```

maybe this should be tried and solved in another ticket ? the purpose of the present one is only to introduce something new related to posets and quasi-symmetric functions ?



---

archive/issue_comments_173643.json:
```json
{
    "body": "Replying to [comment:21 chapoton]:\n> maybe this should be tried and solved in another ticket ? the purpose of the present one is only to introduce something new related to posets and quasi-symmetric functions ?\n\nYou're right. This is now ticket #14748",
    "created_at": "2013-06-15T19:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173643",
    "user": "strogdon"
}
```

Replying to [comment:21 chapoton]:
> maybe this should be tried and solved in another ticket ? the purpose of the present one is only to introduce something new related to posets and quasi-symmetric functions ?

You're right. This is now ticket #14748



---

archive/issue_comments_173644.json:
```json
{
    "body": "Since the problem has been isolated to #14748 (I've added it as a dependency), I'm thinking we should set this to positive review. Any objections?",
    "created_at": "2013-06-16T10:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173644",
    "user": "tscrim"
}
```

Since the problem has been isolated to #14748 (I've added it as a dependency), I'm thinking we should set this to positive review. Any objections?



---

archive/issue_comments_173645.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-06-16T10:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173645",
    "user": "tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_173646.json:
```json
{
    "body": "the review patch introduces a typo \"parition\", that needs to be corrected",
    "created_at": "2013-06-17T07:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173646",
    "user": "chapoton"
}
```

the review patch introduces a typo "parition", that needs to be corrected



---

archive/issue_comments_173647.json:
```json
{
    "body": "Attachment [trac_14136-p_partition_enumerator_folded.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136-p_partition_enumerator_folded.patch) by darij created at 2013-06-17 07:51:14\n\nfolded with Travis's review",
    "created_at": "2013-06-17T07:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173647",
    "user": "darij"
}
```

Attachment [trac_14136-p_partition_enumerator_folded.patch](tarball://root/attachments/some-uuid/ticket14136/trac_14136-p_partition_enumerator_folded.patch) by darij created at 2013-06-17 07:51:14

folded with Travis's review



---

archive/issue_comments_173648.json:
```json
{
    "body": "it was not necessary to fold. The typo is still there",
    "created_at": "2013-06-17T07:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173648",
    "user": "chapoton"
}
```

it was not necessary to fold. The typo is still there



---

archive/issue_comments_173649.json:
```json
{
    "body": "Chapoton: thanks, done (edited the folded version).",
    "created_at": "2013-06-17T07:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173649",
    "user": "darij"
}
```

Chapoton: thanks, done (edited the folded version).



---

archive/issue_comments_173650.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-17T09:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173650",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173651.json:
```json
{
    "body": "I don't see the typo in the folded patch, so I'm going to set this to positive review.\n\nApply: trac_14136-p_partition_enumerator_folded.patch",
    "created_at": "2013-06-17T09:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173651",
    "user": "tscrim"
}
```

I don't see the typo in the folded patch, so I'm going to set this to positive review.

Apply: trac_14136-p_partition_enumerator_folded.patch



---

archive/issue_comments_173652.json:
```json
{
    "body": "Changing keywords from \"QSym, P-partitions, posets, days45\" to \"QSym, P-partitions, posets, days45, days49\".",
    "created_at": "2013-06-17T09:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173652",
    "user": "tscrim"
}
```

Changing keywords from "QSym, P-partitions, posets, days45" to "QSym, P-partitions, posets, days45, days49".



---

archive/issue_comments_173653.json:
```json
{
    "body": "Fr\u00e9d\u00e9ric and Travis: thank you!",
    "created_at": "2013-06-17T09:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173653",
    "user": "darij"
}
```

Frédéric and Travis: thank you!



---

archive/issue_comments_173654.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-16T21:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173654",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_173655.json:
```json
{
    "body": "missing accents",
    "created_at": "2017-07-19T11:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13932#issuecomment-173655",
    "user": "chapoton"
}
```

missing accents
