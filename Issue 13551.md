# Issue 13551: Let LinBox build with MPIR > 2.5.0

archive/issues_013551.json:
```json
{
    "body": "Assignee: @ClementPernet\n\nCC:  @malb pcpa @vbraun\n\nKeywords: linbox spkg\n\nLinBox does not build MPIR > 2.5.0 because the interface for Sage, in interface/linbox-sage.[C|h] includes some headers file in a problematic order:\n* first \"gmp.h\" without \"stdint.h\", so functions related to \"stdint.h\" types are not defined\n* at some point \"stdint.h\" through other linbox header files (if available) \n* then \"linbox/integer.h\" which in turn includes \"gmp++/gmp++.h\" which includes \"gmpxx.h\"\nAs \"stdint.h\" was included in the way, the C++ wrapper look for the C functions related to \"stdint.h\" types, but these were not defined.\n\nUse the updated spkg at\nhttp://boxen.math.washington.edu/home/jpflori/linbox-1.3.2.p0.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/13755\n\n",
    "created_at": "2012-11-25T15:13:52Z",
    "labels": [
        "component: linbox",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Let LinBox build with MPIR > 2.5.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13551",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Assignee: @ClementPernet

CC:  @malb pcpa @vbraun

Keywords: linbox spkg

LinBox does not build MPIR > 2.5.0 because the interface for Sage, in interface/linbox-sage.[C|h] includes some headers file in a problematic order:
* first "gmp.h" without "stdint.h", so functions related to "stdint.h" types are not defined
* at some point "stdint.h" through other linbox header files (if available) 
* then "linbox/integer.h" which in turn includes "gmp++/gmp++.h" which includes "gmpxx.h"
As "stdint.h" was included in the way, the C++ wrapper look for the C functions related to "stdint.h" types, but these were not defined.

Use the updated spkg at
http://boxen.math.washington.edu/home/jpflori/linbox-1.3.2.p0.spkg

Issue created by migration from https://trac.sagemath.org/ticket/13755





---

archive/issue_comments_167308.json:
```json
{
    "body": "Attachment [linbox-1.3.2.p0.diff](tarball://root/attachments/some-uuid/ticket13755/linbox-1.3.2.p0.diff) by jpflori created at 2012-11-25 15:17:58\n\nspkg diff, for review only",
    "created_at": "2012-11-25T15:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167308",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [linbox-1.3.2.p0.diff](tarball://root/attachments/some-uuid/ticket13755/linbox-1.3.2.p0.diff) by jpflori created at 2012-11-25 15:17:58

spkg diff, for review only



---

archive/issue_comments_167309.json:
```json
{
    "body": "After discussing this on mpir-devel, it appears it does not hurt and is even a good idea to prevent this in LinBox itself (although some workaround could also appear in MPIR later):\nhttps://groups.google.com/d/topic/mpir-devel/m__z0PR_wBw/discussion\n\nI've reported this on linbox-devel as well, now waiting for reactions there, but this looks clean enough to become needs_review anyway.",
    "created_at": "2012-11-26T12:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167309",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

After discussing this on mpir-devel, it appears it does not hurt and is even a good idea to prevent this in LinBox itself (although some workaround could also appear in MPIR later):
https://groups.google.com/d/topic/mpir-devel/m__z0PR_wBw/discussion

I've reported this on linbox-devel as well, now waiting for reactions there, but this looks clean enough to become needs_review anyway.



---

archive/issue_comments_167310.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-26T12:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167310",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_167311.json:
```json
{
    "body": "This looks okay to me, but I wouldn't mind if someone else more familiar with header files took a look at it.",
    "created_at": "2012-11-29T06:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167311",
    "user": "https://github.com/jhpalmieri"
}
```

This looks okay to me, but I wouldn't mind if someone else more familiar with header files took a look at it.



---

archive/issue_comments_167312.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-29T11:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167312",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_167313.json:
```json
{
    "body": "Looks good to me",
    "created_at": "2012-11-29T11:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167313",
    "user": "https://github.com/vbraun"
}
```

Looks good to me



---

archive/issue_comments_167314.json:
```json
{
    "body": "On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.",
    "created_at": "2012-12-05T16:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167314",
    "user": "https://github.com/kcrisman"
}
```

On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.



---

archive/issue_comments_167315.json:
```json
{
    "body": "Replying to [comment:5 kcrisman]:\n> On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.\nThat's some header inclusion black magic, so if somehow stdint.h was included before, the patch won't be needed.\nBut it should be safer with the patch.",
    "created_at": "2012-12-06T10:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167315",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Replying to [comment:5 kcrisman]:
> On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.
That's some header inclusion black magic, so if somehow stdint.h was included before, the patch won't be needed.
But it should be safer with the patch.



---

archive/issue_comments_167316.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-21T09:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167316",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_167317.json:
```json
{
    "body": "Just to report that the patch was applied upstream in linbox-rev5072",
    "created_at": "2014-09-05T07:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13551",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13551#issuecomment-167317",
    "user": "https://github.com/ClementPernet"
}
```

Just to report that the patch was applied upstream in linbox-rev5072
