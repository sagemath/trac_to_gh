# Issue 13551: Let LinBox build with MPIR > 2.5.0

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2012-11-25 15:13:52

Assignee: cpernet

CC:  malb pcpa vbraun

Keywords: linbox spkg

LinBox does not build MPIR > 2.5.0 because the interface for Sage, in interface/linbox-sage.[C|h] includes some headers file in a problematic order:
* first "gmp.h" without "stdint.h", so functions related to "stdint.h" types are not defined
* at some point "stdint.h" through other linbox header files (if available) 
* then "linbox/integer.h" which in turn includes "gmp++/gmp++.h" which includes "gmpxx.h"
As "stdint.h" was included in the way, the C++ wrapper look for the C functions related to "stdint.h" types, but these were not defined.

Use the updated spkg at
http://boxen.math.washington.edu/home/jpflori/linbox-1.3.2.p0.spkg


---

Attachment

spkg diff, for review only


---

Comment by jpflori created at 2012-11-26 12:37:08

After discussing this on mpir-devel, it appears it does not hurt and is even a good idea to prevent this in LinBox itself (although some workaround could also appear in MPIR later):
https://groups.google.com/d/topic/mpir-devel/m__z0PR_wBw/discussion

I've reported this on linbox-devel as well, now waiting for reactions there, but this looks clean enough to become needs_review anyway.


---

Comment by jpflori created at 2012-11-26 12:37:08

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2012-11-29 06:22:55

This looks okay to me, but I wouldn't mind if someone else more familiar with header files took a look at it.


---

Comment by vbraun created at 2012-11-29 11:42:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-11-29 11:42:45

Looks good to me


---

Comment by kcrisman created at 2012-12-05 16:02:49

On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.


---

Comment by jpflori created at 2012-12-06 10:00:43

Replying to [comment:5 kcrisman]:
> On Cygwin on XP, linbox-1.3.2 built fine with mpir-2.6.0.p0.  So maybe this isn't always necessary, but whatever.
That's some header inclusion black magic, so if somehow stdint.h was included before, the patch won't be needed.
But it should be safer with the patch.


---

Comment by jdemeyer created at 2012-12-21 09:33:16

Resolution: fixed


---

Comment by cpernet created at 2014-09-05 07:45:38

Just to report that the patch was applied upstream in linbox-rev5072
