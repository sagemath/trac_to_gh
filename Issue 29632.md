# Issue 29632: Move attrcall and friends from sage.misc.misc to new module sage.misc.call

Issue created by migration from https://trac.sagemath.org/ticket/29869

Original creator: mkoeppe

Original creation time: 2020-06-15 18:27:09

CC:  tscrim




---

Comment by mkoeppe created at 2020-06-15 18:39:51

The reimport in `sage.misc.misc` probably needs a deprecation?
----
New commits:


---

Comment by mkoeppe created at 2020-06-15 18:39:57

Changing status from new to needs_review.


---

Comment by git created at 2020-06-15 19:22:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-06-15 23:03:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-06-15 23:04:00

I think this is clean now, needs review


---

Comment by tscrim created at 2020-06-15 23:23:40

You need to add the new file to

```
src/doc/en/reference/misc/index.rst
```

It is also missing the standard header information:

```
"""
Miscellaneous calling functions
"""

# Copyright...
```



---

Comment by git created at 2020-06-15 23:52:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-06-16 02:41:06

Thanks. If the patchbot comes back green, then this is a positive review.


---

Comment by mkoeppe created at 2020-06-16 19:30:19

Well, there are all kinds of colors, but I think this is from code that was already there


---

Comment by tscrim created at 2020-06-16 23:28:52

There is one real failure:

```
sage -t --long src/sage/modules/with_basis/indexed_element.pyx  # 1 doctest failed
```



---

Comment by mkoeppe created at 2020-06-17 00:46:01


```
explain_pickle(x)
pg_dynamic_class = unpickle_global('sage.structure.dynamic_class', 'dynamic_class')
pg_CombinatorialFreeModuleElement = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModuleElement')
pg_getattr = unpickle_global('__builtin__', 'getattr')
pg_call_method = unpickle_global('sage.misc.misc', 'call_method')
pg_unreduce = unpickle_global('sage.structure.unique_representation', 'unreduce')
pg_Modules = unpickle_global('sage.categories.modules', 'Modules')
pg_IntegerRing = unpickle_global('sage.rings.integer_ring', 'IntegerRing')
pg = unpickle_instantiate(pg_IntegerRing, ())
si1 = pg_call_method(pg_unreduce(pg_Modules, (pg,), {'dispatch':False}), '_with_axiom', 'WithBasis')
si2 = unpickle_newobj(pg_dynamic_class('CombinatorialFreeModule_with_category.element_class', (pg_CombinatorialFreeModuleElement, pg_getattr(pg_call_method(si1, '_with_axiom', 'FiniteDimensional'), 'element_class')), None, None, None), ())
pg_CombinatorialFreeModule = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModule')
pg_FiniteEnumeratedSet = unpickle_global('sage.sets.finite_enumerated_set', 'FiniteEnumeratedSet')
pg_make_integer = unpickle_global('sage.rings.integer', 'make_integer')
unpickle_build(si2, (pg_unreduce(pg_CombinatorialFreeModule, (pg, pg_unreduce(pg_FiniteEnumeratedSet, (('x', 'y'),), {})), {'category':si1, 'prefix':'B'}), {'_monomial_coefficients':{'y':pg_make_integer('2'), 'x':pg_make_integer('2')}}))
si2
```

OK... I need some help here. Do I need to add `register_unpickle_override`?


---

Comment by tscrim created at 2020-06-17 00:59:55

Yes, that is correct. You can add it in the old file to redirect to the new file. The other option (which has happened) is to simply drop the backwards compatibility and tell people to find a version of Sage during the deprecation period to load it then resave as a new pickle. IMO, I would rather do the former here since it is a 1-line fix.


---

Comment by git created at 2020-06-17 01:10:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-06-17 01:11:28

Thanks. I had to add it to the new file though because `sage.misc.misc` is a dependency of `sage.misc.persist`.
----
New commits:


---

Comment by tscrim created at 2020-06-17 02:23:53

I think it doesn't matter where it is at. I just want to see one more run of the patchbot before setting a positive review.


---

Comment by tscrim created at 2020-06-17 05:21:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-17 06:05:55

Thanks!


---

Comment by vbraun created at 2020-07-02 21:30:07

Resolution: fixed
