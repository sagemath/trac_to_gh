# Issue 12526: Add a warning not to install packages using the Sage shell

Issue created by migration from https://trac.sagemath.org/ticket/12698

Original creator: jdemeyer

Original creation time: 2012-03-19 14:50:18

Assignee: leif

As we found out in [http://trac.sagemath.org/sage_trac/ticket/12369#comment:189](http://trac.sagemath.org/sage_trac/ticket/12369#comment:189), you cannot use the Sage shell to install Sage packages.

The problem is that `sage-env` has some conditional commands.  One of these commands is setting `LD_LIBRARY_PATH`.  With #12405, only existing directories are added to `LD_LIBRARY_PATH`.  Upon entering the Sage shell, `$SAGE_LOCAL/lib` might not exist yet, so that directory isn't added. Since now `SAGE_ENV_SOURCED=1`, the variable `LD_LIBRARY_PATH` is not changed anymore.  Similarly, `PYTHONHOME` and `PYTHONPATH` are only set when Python has been installed.

This ticket is about adding a warning when running `sage --sh`.


---

Comment by jdemeyer created at 2012-03-19 15:05:02

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2012-03-19 18:04:37

The comment about not running `make` seems to conflict with the error message in `sage-spkg`:

```
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '`pwd`' && '$SAGE_ROOT/sage' -sh)
When you are done debugging, you can type "exit" to leave the subshell.
```

(It's not clear what should be done to "debug the error", but running `make` seems like a natural thing to do.)  Not running `sage -i ...` makes sense, but can you clarify the issue about running `make`?


---

Comment by jdemeyer created at 2012-03-20 07:31:04

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-03-20 07:31:04

Replying to [comment:2 jhpalmieri]:
> Not running `sage -i ...` makes sense, but can you clarify the issue about running `make`?
I meant Sage's top-level "make" (or "make" inside `SAGE_ROOT/spkg` with #10492).  Running "make" inside a spkg directory is fine, and indeed one is encouraged to use the Sage shell for that.

So the wording should be improved.


---

Comment by jdemeyer created at 2012-03-20 09:19:26

Changing status from needs_work to needs_review.


---

Attachment

I think this is okay now.


---

Comment by jhpalmieri created at 2012-03-20 18:34:04

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-23 15:23:56

Resolution: fixed
