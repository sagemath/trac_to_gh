# Issue 23390: Update points() in projective_homset.py to work over CC

archive/issues_023390.json:
```json
{
    "body": "CC:  paul fili\n\nUpdated numerical point finding in the projective_homset.py file to work over the complex numbers.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23627\n\n",
    "created_at": "2017-08-16T18:30:18Z",
    "labels": [
        "dynamics",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Update points() in projective_homset.py to work over CC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23390",
    "user": "rlmiller"
}
```
CC:  paul fili

Updated numerical point finding in the projective_homset.py file to work over the complex numbers.

Issue created by migration from https://trac.sagemath.org/ticket/23627





---

archive/issue_comments_327344.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-16T18:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327344",
    "user": "rlmiller"
}
```

New commits:



---

archive/issue_comments_327345.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-16T18:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327345",
    "user": "rlmiller"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_327346.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-24T01:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327346",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327347.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-08-24T20:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327347",
    "user": "rlmiller"
}
```

Changing priority from major to minor.



---

archive/issue_comments_327348.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-08-25T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327348",
    "user": "@bhutz"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_327349.json:
```json
{
    "body": "Changing component from dynamics to algebraic geometry.",
    "created_at": "2017-08-25T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327349",
    "user": "@bhutz"
}
```

Changing component from dynamics to algebraic geometry.



---

archive/issue_comments_327350.json:
```json
{
    "body": "This ticket and #23693 have the same branch and contains both the changes for affine_homset and projective_homset. What did you mean to do with these two tickets?\n\nOtherwise, just a few minor things:\n\n- CDF should work in addition to CC\n\n- a couple of the comments in the affine_homset reference projective. Fix those.\n\n- the sorting line is commented out in affine_homset and should be restored\n\n- You need to update the docmentation of .rational_points() to describe the changes and add an example there.",
    "created_at": "2017-08-25T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327350",
    "user": "@bhutz"
}
```

This ticket and #23693 have the same branch and contains both the changes for affine_homset and projective_homset. What did you mean to do with these two tickets?

Otherwise, just a few minor things:

- CDF should work in addition to CC

- a couple of the comments in the affine_homset reference projective. Fix those.

- the sorting line is commented out in affine_homset and should be restored

- You need to update the docmentation of .rational_points() to describe the changes and add an example there.



---

archive/issue_comments_327351.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-25T14:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327351",
    "user": "@bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_327352.json:
```json
{
    "body": "Rebase from current master",
    "created_at": "2018-05-15T08:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327352",
    "user": "@raghukul01"
}
```

Rebase from current master



---

archive/issue_comments_327353.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-15T19:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327353",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327354.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc2018\".",
    "created_at": "2018-05-16T18:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327354",
    "user": "@raghukul01"
}
```

Changing keywords from "" to "gsoc2018".



---

archive/issue_comments_327355.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T17:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327355",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_327356.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T17:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327356",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_327357.json:
```json
{
    "body": "Just a couple simple comments before I test functionality.\n\nInstead of importing, its better to use members function whenever possible (i.e., .floor())\n\nThe two for loops\n\n```\nfor i in range(len(dupl_points)):\n    for j in range(len(dupl_points)):\n        if j > i:\n            u = dupl_points[i]\n```\n\ncan be simplified to\n\n```\nfor i in range(len(dupl_points)):\n    u = dupl_points[i]\n    for j in range(i+1, len(dupl_points)):\n```\n",
    "created_at": "2018-05-17T19:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327357",
    "user": "@bhutz"
}
```

Just a couple simple comments before I test functionality.

Instead of importing, its better to use members function whenever possible (i.e., .floor())

The two for loops

```
for i in range(len(dupl_points)):
    for j in range(len(dupl_points)):
        if j > i:
            u = dupl_points[i]
```

can be simplified to

```
for i in range(len(dupl_points)):
    u = dupl_points[i]
    for j in range(i+1, len(dupl_points)):
```




---

archive/issue_comments_327358.json:
```json
{
    "body": "Actually after product with tolerance, the result becomes float, and hence floor(), member function doesn't exist. So there are 2 options\n\n1) Convert tolerance to RealNumber and then use .floor()\n\n2) use floor from math\n\ncurrently I implemented using 2), should I change to 1)? or do you have any other idea?\n\nThanks\n\nReplying to [comment:12 bhutz]:\n> Just a couple simple comments before I test functionality.\n> \n> Instead of importing, its better to use members function whenever possible (i.e., .floor())\n> \n> The two for loops\n> {{{\n> for i in range(len(dupl_points)):\n>     for j in range(len(dupl_points)):\n>         if j > i:\n>             u = dupl_points[i]\n> }}}\n> can be simplified to\n> {{{\n> for i in range(len(dupl_points)):\n>     u = dupl_points[i]\n>     for j in range(i+1, len(dupl_points)):\n> }}}",
    "created_at": "2018-05-17T19:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327358",
    "user": "@raghukul01"
}
```

Actually after product with tolerance, the result becomes float, and hence floor(), member function doesn't exist. So there are 2 options

1) Convert tolerance to RealNumber and then use .floor()

2) use floor from math

currently I implemented using 2), should I change to 1)? or do you have any other idea?

Thanks

Replying to [comment:12 bhutz]:
> Just a couple simple comments before I test functionality.
> 
> Instead of importing, its better to use members function whenever possible (i.e., .floor())
> 
> The two for loops
> {{{
> for i in range(len(dupl_points)):
>     for j in range(len(dupl_points)):
>         if j > i:
>             u = dupl_points[i]
> }}}
> can be simplified to
> {{{
> for i in range(len(dupl_points)):
>     u = dupl_points[i]
>     for j in range(i+1, len(dupl_points)):
> }}}



---

archive/issue_comments_327359.json:
```json
{
    "body": "I would do 1) since you should do basic input checking on tolerance anyway, so you can convert to RealField and check that it's positive.",
    "created_at": "2018-05-17T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327359",
    "user": "@bhutz"
}
```

I would do 1) since you should do basic input checking on tolerance anyway, so you can convert to RealField and check that it's positive.



---

archive/issue_comments_327360.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T20:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327360",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_327361.json:
```json
{
    "body": "in testing, I found that the method does very poorly when the base ring is numerical such as CC or RR. For simple subschemes, it was ok, but for even mildly complicated schemes (such as projective closures of intersections of affine curves) you could easily get wildly wrong answers. So, I think the verbose warning is warranted in this case.\n\nThis also led me to separate out the case where the subscheme is defined over a number field and the user wants points numerically approximated which is much faster. This seems to work well in my testing (up to precision/tolerance).\n\nAdditionally, the documenation was significantly updated as well as normalizing all the inputs for the various points/rational_points methods.\n\nSo I'm marking this as needs-review, but it should undergo fairly extensive testing as I'm sure there are cases I missed.\n----\nNew commits:",
    "created_at": "2018-05-19T01:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327361",
    "user": "@bhutz"
}
```

in testing, I found that the method does very poorly when the base ring is numerical such as CC or RR. For simple subschemes, it was ok, but for even mildly complicated schemes (such as projective closures of intersections of affine curves) you could easily get wildly wrong answers. So, I think the verbose warning is warranted in this case.

This also led me to separate out the case where the subscheme is defined over a number field and the user wants points numerically approximated which is much faster. This seems to work well in my testing (up to precision/tolerance).

Additionally, the documenation was significantly updated as well as normalizing all the inputs for the various points/rational_points methods.

So I'm marking this as needs-review, but it should undergo fairly extensive testing as I'm sure there are cases I missed.
----
New commits:



---

archive/issue_comments_327362.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-19T01:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327362",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327363.json:
```json
{
    "body": "## There are couple of documentation updated \n- Value of dimension need to be corrected (line no := for projective_homset 74, 188, 383, 453; for affine_homset 129, 138).\n\n- Calculation of dimension in projective homset is wrong (needs to be one less than I.dimension(), line no :- 185, 380).\n\n- Subscheme should be replaced by scheme (line no: for projective homset 75, 293; for affine homset 129, 317).\n\n- Projective word should be replaced by affine in affine homset (line no := 283, 436).\n\n- Example in docstring of projective_homset for CC, and CDF are similar. different example need to be added.\n\n- For `NumberFields` embeddings should be specified during formation, this needs to be added in documentation.\n\n- In affine homset example below is better to illustrate working in CDF, compared to current example\n\n```\nsage: A.<x1, x2> = AffineSpace(CDF, 2)\nsage: E = A.subscheme([x1^2 + x2^2 + x1*x2 + 1, x1 + x2])\nsage: E(A.base_ring()).points() \nverbose 0 (124: affine_homset.py, points) Warning: computations in the\nnumerical fields are inexact;points may be computed partially or\nincorrectly.\n[(-2.77555756156e-17 + 1.0*I, 2.77555756156e-17 - 1.0*I), (-1.0*I,\n1.0*I)]\n```\n\n- There should be an example in projective and affine homset to illustrate use of tolerance, some thing like this\n\n```\nsage: A.<x1, x2> = AffineSpace(QQ, 2)\nsage: E = A.subscheme([x1^1000 + x2^2 + x1*x2 + 1, x1 + x2])\nsage: len(E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-11))\n987\nsage: len(E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-10))\n1000\n```\n\n**Following gives wrong result**\n\n```\nsage: P.<x1, x2> = ProjectiveSpace(QQ, 1)\nsage: E = A.subscheme([x1^2 -3*x1 + 2, x2])\nsage: E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-10)\n[(1.0, 0.0), (2.0, 0.0)]\nsage: E(A.base_ring()).points()\n[(1, 0), (2, 0)]\n```\n\nThey are same projective point, and hence only 1 should be returned.\n\n**This also**\n\n```\nsage: P.<x1> = ProjectiveSpace(QQ, 0)\nsage: E = A.subscheme([x1^2 -3*x1 + 2])\nsage: E(A.base_ring()).points(bound=5)\n[(1, -5), (1, -4), (1, -3), (1, -2), (1, -1), (1, 0), (1, 1), (1, 2),\n(1, 3), (1, 4), (1, 5), (2, -5), (2, -4), (2, -3), (2, -2), (2, -1), (2,\n0), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5)]\n```\n\n----\nNew commits:",
    "created_at": "2018-06-16T21:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327363",
    "user": "@raghukul01"
}
```

## There are couple of documentation updated 
- Value of dimension need to be corrected (line no := for projective_homset 74, 188, 383, 453; for affine_homset 129, 138).

- Calculation of dimension in projective homset is wrong (needs to be one less than I.dimension(), line no :- 185, 380).

- Subscheme should be replaced by scheme (line no: for projective homset 75, 293; for affine homset 129, 317).

- Projective word should be replaced by affine in affine homset (line no := 283, 436).

- Example in docstring of projective_homset for CC, and CDF are similar. different example need to be added.

- For `NumberFields` embeddings should be specified during formation, this needs to be added in documentation.

- In affine homset example below is better to illustrate working in CDF, compared to current example

```
sage: A.<x1, x2> = AffineSpace(CDF, 2)
sage: E = A.subscheme([x1^2 + x2^2 + x1*x2 + 1, x1 + x2])
sage: E(A.base_ring()).points() 
verbose 0 (124: affine_homset.py, points) Warning: computations in the
numerical fields are inexact;points may be computed partially or
incorrectly.
[(-2.77555756156e-17 + 1.0*I, 2.77555756156e-17 - 1.0*I), (-1.0*I,
1.0*I)]
```

- There should be an example in projective and affine homset to illustrate use of tolerance, some thing like this

```
sage: A.<x1, x2> = AffineSpace(QQ, 2)
sage: E = A.subscheme([x1^1000 + x2^2 + x1*x2 + 1, x1 + x2])
sage: len(E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-11))
987
sage: len(E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-10))
1000
```

**Following gives wrong result**

```
sage: P.<x1, x2> = ProjectiveSpace(QQ, 1)
sage: E = A.subscheme([x1^2 -3*x1 + 2, x2])
sage: E(A.base_ring()).numerical_points(F=CDF, zero_tolerance =1e-10)
[(1.0, 0.0), (2.0, 0.0)]
sage: E(A.base_ring()).points()
[(1, 0), (2, 0)]
```

They are same projective point, and hence only 1 should be returned.

**This also**

```
sage: P.<x1> = ProjectiveSpace(QQ, 0)
sage: E = A.subscheme([x1^2 -3*x1 + 2])
sage: E(A.base_ring()).points(bound=5)
[(1, -5), (1, -4), (1, -3), (1, -2), (1, -1), (1, 0), (1, 1), (1, 2),
(1, 3), (1, 4), (1, 5), (2, -5), (2, -4), (2, -3), (2, -2), (2, -1), (2,
0), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5)]
```

----
New commits:



---

archive/issue_comments_327364.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-17T08:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327364",
    "user": "@raghukul01"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_327365.json:
```json
{
    "body": "Changes made. A few comment below\n\n- The dimension checks are actually correct, that is why the comments are there\n\n- made doc changes where appropriate (can't really have a 0 dim scheme in sage)\n\n- I modified the examples as specified\n\n- However, the two examples above that are 'failing' are actually problems with the examples. Notice that you are defining a project space P and using subschemes of A.\n----\nNew commits:",
    "created_at": "2018-06-17T17:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327365",
    "user": "@bhutz"
}
```

Changes made. A few comment below

- The dimension checks are actually correct, that is why the comments are there

- made doc changes where appropriate (can't really have a 0 dim scheme in sage)

- I modified the examples as specified

- However, the two examples above that are 'failing' are actually problems with the examples. Notice that you are defining a project space P and using subschemes of A.
----
New commits:



---

archive/issue_comments_327366.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-17T17:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327366",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327367.json:
```json
{
    "body": "Those 2 examples were so silly of me :P",
    "created_at": "2018-06-17T18:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327367",
    "user": "@raghukul01"
}
```

Those 2 examples were so silly of me :P



---

archive/issue_comments_327368.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-17T18:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327368",
    "user": "@raghukul01"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327369.json:
```json
{
    "body": "Test failures... Always run 'make ptestlong' before setting stuff to positive review.",
    "created_at": "2018-06-19T06:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327369",
    "user": "@vbraun"
}
```

Test failures... Always run 'make ptestlong' before setting stuff to positive review.



---

archive/issue_comments_327370.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-19T06:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327370",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_327371.json:
```json
{
    "body": "I guess most of the doc test are failing due to following line in sage/coding/source-coding/hamming_code.py `PFn = [list(p) for p in X.point_set(F).points(F)]` (line no 147)",
    "created_at": "2018-06-19T12:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327371",
    "user": "@raghukul01"
}
```

I guess most of the doc test are failing due to following line in sage/coding/source-coding/hamming_code.py `PFn = [list(p) for p in X.point_set(F).points(F)]` (line no 147)



---

archive/issue_comments_327372.json:
```json
{
    "body": "Attachment [output.txt](tarball://root/attachments/some-uuid/ticket23627/output.txt) by git created at 2018-06-19 18:52:46\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-19T18:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327372",
    "user": "git"
}
```

Attachment [output.txt](tarball://root/attachments/some-uuid/ticket23627/output.txt) by git created at 2018-06-19 18:52:46

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327373.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-19T18:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327373",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327374.json:
```json
{
    "body": "looks like hamming_codes was calling .points() and trying to pass in the field. This was never possible in the first place (only could pass in `bound` or `precision`) it was only coming up since the keyword parameters were moved to *kwds and not listed explicitly.\n\n\nThis one change fixed all doctests for me.",
    "created_at": "2018-06-19T18:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327374",
    "user": "@bhutz"
}
```

looks like hamming_codes was calling .points() and trying to pass in the field. This was never possible in the first place (only could pass in `bound` or `precision`) it was only coming up since the keyword parameters were moved to *kwds and not listed explicitly.


This one change fixed all doctests for me.



---

archive/issue_comments_327375.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-20T09:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327375",
    "user": "@raghukul01"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327376.json:
```json
{
    "body": "Passed on my system as well.",
    "created_at": "2018-06-20T09:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327376",
    "user": "@raghukul01"
}
```

Passed on my system as well.



---

archive/issue_comments_327377.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-20T18:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327377",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_327378.json:
```json
{
    "body": "merge conflict",
    "created_at": "2018-06-20T18:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327378",
    "user": "@vbraun"
}
```

merge conflict



---

archive/issue_comments_327379.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-26T01:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327379",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327380.json:
```json
{
    "body": "merge conflict resolved",
    "created_at": "2018-06-26T01:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327380",
    "user": "@bhutz"
}
```

merge conflict resolved



---

archive/issue_comments_327381.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-26T01:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327381",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327382.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-27T09:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327382",
    "user": "@raghukul01"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327383.json:
```json
{
    "body": "Following doctest are failing however they are not due to this ticket, they are failing on the develop(8.3.beta7) branch as well.\n\n\n```\nsage -t --long --warn-long 91.1 src/sage/tests/cmdline.py  # 1 doctest failed\nsage -t --long --warn-long 91.1 src/sage/functions/other.py  # 1 doctest failed\nsage -t --long --warn-long 91.1 src/sage/rings/complex_arb.pyx  # 24 doctests failed\nsage -t --long --warn-long 91.1 src/sage/misc/sphinxify.py  # 1 doctest failed\nsage -t --long --warn-long 91.1 src/sage/rings/real_arb.pyx  # 7 doctests failed\nsage -t --long --warn-long 91.1 src/sage/matrix/matrix_complex_ball_dense.pyx  # 1 doctest failed\nsage -t --long --warn-long 91.1 src/sage/rings/polynomial/polynomial_complex_arb.pyx  # 2 doctests failed\n```\n",
    "created_at": "2018-06-27T09:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327383",
    "user": "@raghukul01"
}
```

Following doctest are failing however they are not due to this ticket, they are failing on the develop(8.3.beta7) branch as well.


```
sage -t --long --warn-long 91.1 src/sage/tests/cmdline.py  # 1 doctest failed
sage -t --long --warn-long 91.1 src/sage/functions/other.py  # 1 doctest failed
sage -t --long --warn-long 91.1 src/sage/rings/complex_arb.pyx  # 24 doctests failed
sage -t --long --warn-long 91.1 src/sage/misc/sphinxify.py  # 1 doctest failed
sage -t --long --warn-long 91.1 src/sage/rings/real_arb.pyx  # 7 doctests failed
sage -t --long --warn-long 91.1 src/sage/matrix/matrix_complex_ball_dense.pyx  # 1 doctest failed
sage -t --long --warn-long 91.1 src/sage/rings/polynomial/polynomial_complex_arb.pyx  # 2 doctests failed
```




---

archive/issue_comments_327384.json:
```json
{
    "body": "On 32-bit\n\n```\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_homset.py\", line 160, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points\nFailed example:\n    E(P.base_ring()).points()\nExpected:\n    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.\n    [(-1.0000000000000004*I : 1.0 : 0.0),\n     (0.0 : 0.9999999999999997*I : 1.0),\n     (0.0 : 2.7755575615628914e-17 - 1.0*I : 1.0),\n     (0.9999999999999997*I : 1.0 : 0.0),\n     (2.7755575615628914e-17 - 1.0*I : 0.0 : 1.0),\n     (2.7755575615628914e-17 + 1.0*I : 0.0 : 1.0)]\nGot:\n    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.\n    [(-1.3091741232762466e-17 - 1.0*I : 0.0 : 1.0),\n     (-1.3091741232762466e-17 + 1.0*I : 0.0 : 1.0),\n     (-1.0000000000000002*I : 1.0 : 0.0),\n     (0.0 : -1.0000000000000002*I : 1.0),\n     (0.0 : 0.9999999999999998*I : 1.0),\n     (0.9999999999999998*I : 1.0 : 0.0)]\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_homset.py\", line 335, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.numerical_points\nFailed example:\n    X(K).numerical_points(F=CDF)\nExpected:\n    [(-1.475773161594552 : 1.475773161594552 : 1.0),\n     (1.475773161594551 : 1.4757731615945517 : 1.0)]\nGot:\n    [(-1.475773161594552 : 1.475773161594552 : 1.0),\n     (1.4757731615945517 : 1.4757731615945517 : 1.0)]\n**********************************************************************\n2 items had failures:\n   1 of  22 in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.numerical_points\n   1 of  20 in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points\n    [75 tests, 2 failures, 1.65 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/schemes/projective/projective_homset.py  # 2 doctests failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2018-06-28T20:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327384",
    "user": "@vbraun"
}
```

On 32-bit

```
**********************************************************************
File "src/sage/schemes/projective/projective_homset.py", line 160, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points
Failed example:
    E(P.base_ring()).points()
Expected:
    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.
    [(-1.0000000000000004*I : 1.0 : 0.0),
     (0.0 : 0.9999999999999997*I : 1.0),
     (0.0 : 2.7755575615628914e-17 - 1.0*I : 1.0),
     (0.9999999999999997*I : 1.0 : 0.0),
     (2.7755575615628914e-17 - 1.0*I : 0.0 : 1.0),
     (2.7755575615628914e-17 + 1.0*I : 0.0 : 1.0)]
Got:
    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.
    [(-1.3091741232762466e-17 - 1.0*I : 0.0 : 1.0),
     (-1.3091741232762466e-17 + 1.0*I : 0.0 : 1.0),
     (-1.0000000000000002*I : 1.0 : 0.0),
     (0.0 : -1.0000000000000002*I : 1.0),
     (0.0 : 0.9999999999999998*I : 1.0),
     (0.9999999999999998*I : 1.0 : 0.0)]
**********************************************************************
File "src/sage/schemes/projective/projective_homset.py", line 335, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.numerical_points
Failed example:
    X(K).numerical_points(F=CDF)
Expected:
    [(-1.475773161594552 : 1.475773161594552 : 1.0),
     (1.475773161594551 : 1.4757731615945517 : 1.0)]
Got:
    [(-1.475773161594552 : 1.475773161594552 : 1.0),
     (1.4757731615945517 : 1.4757731615945517 : 1.0)]
**********************************************************************
2 items had failures:
   1 of  22 in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.numerical_points
   1 of  20 in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points
    [75 tests, 2 failures, 1.65 s]
----------------------------------------------------------------------
sage -t --long src/sage/schemes/projective/projective_homset.py  # 2 doctests failed
----------------------------------------------------------------------
```




---

archive/issue_comments_327385.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-28T20:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327385",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_327386.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-28T21:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327386",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327387.json:
```json
{
    "body": "corrected a minor whitespace typo as well.",
    "created_at": "2018-06-28T21:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327387",
    "user": "@bhutz"
}
```

corrected a minor whitespace typo as well.



---

archive/issue_comments_327388.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-28T21:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327388",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327389.json:
```json
{
    "body": "How can I run doctest for a 32-bit machine? Mine is 64.",
    "created_at": "2018-06-28T21:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327389",
    "user": "@raghukul01"
}
```

How can I run doctest for a 32-bit machine? Mine is 64.



---

archive/issue_comments_327390.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-01T03:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327390",
    "user": "@raghukul01"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327391.json:
```json
{
    "body": "tested, LGTM",
    "created_at": "2018-07-01T03:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327391",
    "user": "@raghukul01"
}
```

tested, LGTM



---

archive/issue_comments_327392.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-15T17:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327392",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_327393.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/schemes/projective/projective_homset.py\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_homset.py\", line 146, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points\nFailed example:\n    L=E(P.base_ring()).points();L\nExpected:\n    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.\n    [(-0.500000000000000 + 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),\n    (-0.500000000000000 - 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),\n    (-1.00000000000000*I : 0.000000000000000 : 1.00000000000000),\n    (0.000000000000000 : 0.000000000000000 : 1.00000000000000),\n    (1.00000000000000*I : 0.000000000000000 : 1.00000000000000),\n    (1.00000000000000 : 1.00000000000000 : 0.000000000000000)]\nGot:\n    verbose 0 (71: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.\n    [(-0.500000000000000 + 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),\n     (-0.500000000000000 - 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),\n     (-1.00000000000000*I : 0.000000000000000 : 1.00000000000000),\n     (0.000000000000000 : 0.000000000000000 : 1.00000000000000),\n     (1.00000000000000*I : 0.000000000000000 : 1.00000000000000),\n     (1.00000000000000 : 1.00000000000000 : 0.000000000000000)]\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_homset.py\", line 161, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points\n```\n",
    "created_at": "2018-07-15T17:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327393",
    "user": "@vbraun"
}
```


```
sage -t --long src/sage/schemes/projective/projective_homset.py
**********************************************************************
File "src/sage/schemes/projective/projective_homset.py", line 146, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points
Failed example:
    L=E(P.base_ring()).points();L
Expected:
    verbose 0 (70: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.
    [(-0.500000000000000 + 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),
    (-0.500000000000000 - 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),
    (-1.00000000000000*I : 0.000000000000000 : 1.00000000000000),
    (0.000000000000000 : 0.000000000000000 : 1.00000000000000),
    (1.00000000000000*I : 0.000000000000000 : 1.00000000000000),
    (1.00000000000000 : 1.00000000000000 : 0.000000000000000)]
Got:
    verbose 0 (71: projective_homset.py, points) Warning: computations in the numerical fields are inexact;points may be computed partially or incorrectly.
    [(-0.500000000000000 + 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),
     (-0.500000000000000 - 0.866025403784439*I : 1.00000000000000 : 0.000000000000000),
     (-1.00000000000000*I : 0.000000000000000 : 1.00000000000000),
     (0.000000000000000 : 0.000000000000000 : 1.00000000000000),
     (1.00000000000000*I : 0.000000000000000 : 1.00000000000000),
     (1.00000000000000 : 1.00000000000000 : 0.000000000000000)]
**********************************************************************
File "src/sage/schemes/projective/projective_homset.py", line 161, in sage.schemes.projective.projective_homset.SchemeHomset_points_projective_field.points
```




---

archive/issue_comments_327394.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-16T00:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327394",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327395.json:
```json
{
    "body": "merged in and updated doctests for latest beta",
    "created_at": "2018-07-16T01:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327395",
    "user": "@bhutz"
}
```

merged in and updated doctests for latest beta



---

archive/issue_comments_327396.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-07-16T01:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327396",
    "user": "@bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327397.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-19T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327397",
    "user": "@raghukul01"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327398.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-08T18:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23390",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23390#issuecomment-327398",
    "user": "@vbraun"
}
```

Resolution: fixed
