# Issue 24624: Option to hold for derivative

Issue created by migration from https://trac.sagemath.org/ticket/24861

Original creator: gh:vaibhavkarve

Original creation time: 2018-02-27 21:13:13

Keywords: hold

It would be nice to have the output of

```
(x^3).diff(x, hold=True)
```

look like

```
$$ \frac{\partial}{\partial x}x^3 $$
```




---

Comment by rws created at 2018-03-25 07:57:10

Although we don't exactly have already a ticket for this, see the related #17445 and #15021.


---

Comment by git created at 2018-03-25 15:54:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2018-03-25 15:56:48

Changing status from new to needs_review.


---

Comment by rws created at 2018-03-25 15:56:48

Thanks for the report. This will be a useful addition to Sage.


---

Comment by @bryangingechen created at 2018-08-01 02:04:12

Changing status from needs_review to needs_work.


---

Comment by @bryangingechen created at 2018-08-01 02:04:12

I agree this would be a nice addition; thanks for addressing this. Here are some comments.

In `src/sage/functions/other.py`:
- Something like `(x).diff(x*x, hold=True)` returns `diff(x, x^2)` instead of an error. Note also that `latex((x).diff(x*x, hold=True))` causes a segfault.
- The error message `wrong argument in diff` could be made more helpful; perhaps something like `all arguments to diff must be symbols or numerical values`. This should be tested as well.
- The LaTeX output should include parentheses around the expression (probably with `\left` and `\right`), otherwise something like `latex((x^3+y).diff(x,2,y,2, hold=True))` returns `{\frac{\partial^{4}}{{\partial x^2}{\partial y^2}} x^{3} + y}` which is incorrect.

In `src/sage/symbolic/expression.pyx`:
- the `hold` parameter should be added to the docstring of `derivative`. I also noticed a typo in the first line of the docstring as well: `this expressions` -> `this expression`.
