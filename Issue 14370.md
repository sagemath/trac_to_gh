# Issue 14370: Bender-Knuth involutions and standardization of semistandard Young tableaux

archive/issues_014370.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  @tscrim\n\nKeywords: tableaux, partitions, combinat\n\nHere is a **preliminary** patch; I will look at it with a fresh mind tomorrow and maybe catch a few bugs, as well as add the same functionality to skew semistandard tableaux. (I guess I should then replace the code in tableau.py by more or less a reference to the code in skew_tableau.py?)\n\nIssue created by migration from https://trac.sagemath.org/ticket/14574\n\n",
    "created_at": "2013-05-13T07:35:59Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Bender-Knuth involutions and standardization of semistandard Young tableaux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14370",
    "user": "@darijgr"
}
```
Assignee: sage-combinat

CC:  @tscrim

Keywords: tableaux, partitions, combinat

Here is a **preliminary** patch; I will look at it with a fresh mind tomorrow and maybe catch a few bugs, as well as add the same functionality to skew semistandard tableaux. (I guess I should then replace the code in tableau.py by more or less a reference to the code in skew_tableau.py?)

Issue created by migration from https://trac.sagemath.org/ticket/14574





---

archive/issue_comments_181562.json:
```json
{
    "body": "Attachment [trac_14574_preliminary_version.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574_preliminary_version.patch) by @darijgr created at 2013-05-13 07:37:18\n\nnot yet merge ready",
    "created_at": "2013-05-13T07:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181562",
    "user": "@darijgr"
}
```

Attachment [trac_14574_preliminary_version.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574_preliminary_version.patch) by @darijgr created at 2013-05-13 07:37:18

not yet merge ready



---

archive/issue_comments_181563.json:
```json
{
    "body": "Attachment [trac_14574-bender_knuth_et_al-v1.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth_et_al-v1.patch) by @darijgr created at 2013-05-14 21:47:57",
    "created_at": "2013-05-14T21:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181563",
    "user": "@darijgr"
}
```

Attachment [trac_14574-bender_knuth_et_al-v1.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth_et_al-v1.patch) by @darijgr created at 2013-05-14 21:47:57



---

archive/issue_comments_181564.json:
```json
{
    "body": "Attachment [trac_14574-bender_knuth_et_al-v1.2.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth_et_al-v1.2.patch) by @darijgr created at 2013-05-14 21:48:16\n\nFinished version -- please review",
    "created_at": "2013-05-14T21:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181564",
    "user": "@darijgr"
}
```

Attachment [trac_14574-bender_knuth_et_al-v1.2.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth_et_al-v1.2.patch) by @darijgr created at 2013-05-14 21:48:16

Finished version -- please review



---

archive/issue_comments_181565.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-14T21:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181565",
    "user": "@darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_181566.json:
```json
{
    "body": "[trac_14574-bender_knuth_et_al-v1.2.patch] and [trac_14574-bender_knuth_et_al-v1.patch] are the same file; I derped again when uploading.",
    "created_at": "2013-05-14T21:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181566",
    "user": "@darijgr"
}
```

[trac_14574-bender_knuth_et_al-v1.2.patch] and [trac_14574-bender_knuth_et_al-v1.patch] are the same file; I derped again when uploading.



---

archive/issue_comments_181567.json:
```json
{
    "body": "Hey Darij,\n\nI've made some changes in my review patch to the implementations. In particular, here's a comparison of my implementation of the Bender-Knuth inversions. Here's mine:\n\n```\nsage: T = SemistandardTableaux(shape=[6,3,3,1], max_entry=5)\nsage: T.cardinality()\n4000\nsage: %time L = [x.bender_knuth_involution(2) for x in T]\nCPU times: user 4.49 s, sys: 0.21 s, total: 4.70 s\nWall time: 4.94 s\n```\n\nYours:\n\n```\nsage: %time L = [x.bender_knuth_involution(2) for x in T]\nCPU times: user 4.78 s, sys: 0.11 s, total: 4.88 s\nWall time: 5.16 s\n```\n\nSo there's not much difference, but I'd guess mine could be shown (eventually) to be slightly faster on larger sets. Anyways, if you agree with my changes, you can set this to positive review.\n\nThanks,\n\nTravis\n\nPS - For future reference, you'll need your real name in the authors section.",
    "created_at": "2013-05-16T07:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181567",
    "user": "@tscrim"
}
```

Hey Darij,

I've made some changes in my review patch to the implementations. In particular, here's a comparison of my implementation of the Bender-Knuth inversions. Here's mine:

```
sage: T = SemistandardTableaux(shape=[6,3,3,1], max_entry=5)
sage: T.cardinality()
4000
sage: %time L = [x.bender_knuth_involution(2) for x in T]
CPU times: user 4.49 s, sys: 0.21 s, total: 4.70 s
Wall time: 4.94 s
```

Yours:

```
sage: %time L = [x.bender_knuth_involution(2) for x in T]
CPU times: user 4.78 s, sys: 0.11 s, total: 4.88 s
Wall time: 5.16 s
```

So there's not much difference, but I'd guess mine could be shown (eventually) to be slightly faster on larger sets. Anyways, if you agree with my changes, you can set this to positive review.

Thanks,

Travis

PS - For future reference, you'll need your real name in the authors section.



---

archive/issue_comments_181568.json:
```json
{
    "body": "Hi Travis! That was quick.\n\n`skew_tableau.py`:\n\nOops, I have no idea how I managed to add a second `to_row` method instead of changing the old one; thanks for being more attentive than I was. But could you add these tests\n\n```\n            sage: SkewTableau([[None, None, None], [None]]).to_word_by_row()\n            word: \n            sage: SkewTableau([]).to_word_by_row()\n            word: \n```\n\ninto the `to_word_by_row` method? Thanks. (Maybe also into `to_word_by_column`?)\n\nMy reasoning behind the `straight=False` keyword is that when I call standardization on a standard tableau, I don't want the output to be checked for standardness twice (once for standardness as a skew standard tableau, and then again for standardness when transformed into a standard tableau). Is this a moot point? I am not sure if our classes actually do all that checking, but even if they don't I assume they eventually will.\n\nHere's something I should have done myself: In the docstring of `to_permutation`, can you explain what \"reading order\" means? The notation is not as standard as people think it is; for instance, van Leeuwen's Littlewood-Richardson paper ( http://www-math.univ-poitiers.fr/~maavl/pdf/lrr.pdf ) defines \"a reading order\" rather than \"the reading order\". (And our reading order is neither Semitic nor Kanji; I don't think anyone ever wrote in that order...)\n\nOn line 504 in your revision, replace \"self\" by \"T\".\n\nOn the next line, \"revsersed\" should be \"reversed\".\n\nOn line 515, \"True\" should be backticked from both sides.\n\nLine 576 in your revision: \"*Bender-Knuth involution*\" should be \"*`k`-th Bender-Knuth involution*\". Sorry, that one is my own oversight.\n\nLine 587: \"over all `i`\" -> \"over all `i` ranging over this iterable\" (or however this is normally said).\n\nLine 591 of revision: Again, \"True\" needs more backticks.\n\nLine 659: Why do you import `bisect_right` when you don't use it?\n\nLines 663-694: Is the compiler smart enough that replacing all those calls of `result_tab[i]` by `result_tab_i` after first declaring `result_tab_i` to be `result_tab[i]` won't add any performance? If so, this could save me some work in the future.\n\nLine 681: Add whitespaces to `k+1` for consistency.\n\n`tableau.py`:\n\nOn the docstrings, most of the above stuff applies again (sorry for duplication).\n\nLine 885: Why the \"skew\"?\n\nLine 892: why did you add \"skew\"?\n\nLine 938: Could you pass the ``check`` variable as well? Or is this automatic?\n\nGood point that the theorems belong into the Examples, not the Tests section. Good job on the docs as well.",
    "created_at": "2013-05-16T16:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181568",
    "user": "@darijgr"
}
```

Hi Travis! That was quick.

`skew_tableau.py`:

Oops, I have no idea how I managed to add a second `to_row` method instead of changing the old one; thanks for being more attentive than I was. But could you add these tests

```
            sage: SkewTableau([[None, None, None], [None]]).to_word_by_row()
            word: 
            sage: SkewTableau([]).to_word_by_row()
            word: 
```

into the `to_word_by_row` method? Thanks. (Maybe also into `to_word_by_column`?)

My reasoning behind the `straight=False` keyword is that when I call standardization on a standard tableau, I don't want the output to be checked for standardness twice (once for standardness as a skew standard tableau, and then again for standardness when transformed into a standard tableau). Is this a moot point? I am not sure if our classes actually do all that checking, but even if they don't I assume they eventually will.

Here's something I should have done myself: In the docstring of `to_permutation`, can you explain what "reading order" means? The notation is not as standard as people think it is; for instance, van Leeuwen's Littlewood-Richardson paper ( http://www-math.univ-poitiers.fr/~maavl/pdf/lrr.pdf ) defines "a reading order" rather than "the reading order". (And our reading order is neither Semitic nor Kanji; I don't think anyone ever wrote in that order...)

On line 504 in your revision, replace "self" by "T".

On the next line, "revsersed" should be "reversed".

On line 515, "True" should be backticked from both sides.

Line 576 in your revision: "*Bender-Knuth involution*" should be "*`k`-th Bender-Knuth involution*". Sorry, that one is my own oversight.

Line 587: "over all `i`" -> "over all `i` ranging over this iterable" (or however this is normally said).

Line 591 of revision: Again, "True" needs more backticks.

Line 659: Why do you import `bisect_right` when you don't use it?

Lines 663-694: Is the compiler smart enough that replacing all those calls of `result_tab[i]` by `result_tab_i` after first declaring `result_tab_i` to be `result_tab[i]` won't add any performance? If so, this could save me some work in the future.

Line 681: Add whitespaces to `k+1` for consistency.

`tableau.py`:

On the docstrings, most of the above stuff applies again (sorry for duplication).

Line 885: Why the "skew"?

Line 892: why did you add "skew"?

Line 938: Could you pass the ``check`` variable as well? Or is this automatic?

Good point that the theorems belong into the Examples, not the Tests section. Good job on the docs as well.



---

archive/issue_comments_181569.json:
```json
{
    "body": "This should take care of everything.\n\nFor the `straight` issue, I did not like this way of doing things. However there are other issues in the safety checks being made which I think should be on another ticket. I'm pretty sure some things are checked twice, and there should be a way which naturally converts from (semi)standard skew tableaux to (semi)standard tableaux without (semi)standardness (and tableaux) checks.\n\nAnyways, if you'd want, you can pull out the involution part as a separate function which returns a list of lists. It's up to you if you're fine with my implementation or to change it.\n\nBest,\n\nTravis",
    "created_at": "2013-05-16T20:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181569",
    "user": "@tscrim"
}
```

This should take care of everything.

For the `straight` issue, I did not like this way of doing things. However there are other issues in the safety checks being made which I think should be on another ticket. I'm pretty sure some things are checked twice, and there should be a way which naturally converts from (semi)standard skew tableaux to (semi)standard tableaux without (semi)standardness (and tableaux) checks.

Anyways, if you'd want, you can pull out the involution part as a separate function which returns a list of lists. It's up to you if you're fine with my implementation or to change it.

Best,

Travis



---

archive/issue_comments_181570.json:
```json
{
    "body": "Attachment [trac_14574-bender_knuth-review-ts.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth-review-ts.patch) by @tscrim created at 2013-05-16 20:47:53",
    "created_at": "2013-05-16T20:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181570",
    "user": "@tscrim"
}
```

Attachment [trac_14574-bender_knuth-review-ts.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-bender_knuth-review-ts.patch) by @tscrim created at 2013-05-16 20:47:53



---

archive/issue_comments_181571.json:
```json
{
    "body": "just for comparison",
    "created_at": "2013-05-17T11:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181571",
    "user": "@darijgr"
}
```

just for comparison



---

archive/issue_comments_181572.json:
```json
{
    "body": "Attachment [for_comparison.patch](tarball://root/attachments/some-uuid/ticket14574/for_comparison.patch) by @darijgr created at 2013-05-17 11:07:10\n\nThanks for the speedy review. I've folded the review with my old file and thrown in a couple more corrections. I guess I'll open a separate ticket for unchecked generation of tableau objects; this makes more sense to solve on a global scale.\n\nHere [attachment:for_comparison.patch] is just the result of folding, without my corrections.",
    "created_at": "2013-05-17T11:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181572",
    "user": "@darijgr"
}
```

Attachment [for_comparison.patch](tarball://root/attachments/some-uuid/ticket14574/for_comparison.patch) by @darijgr created at 2013-05-17 11:07:10

Thanks for the speedy review. I've folded the review with my old file and thrown in a couple more corrections. I guess I'll open a separate ticket for unchecked generation of tableau objects; this makes more sense to solve on a global scale.

Here [attachment:for_comparison.patch] is just the result of folding, without my corrections.



---

archive/issue_comments_181573.json:
```json
{
    "body": "Very minor nitpick, but could you make the commit message more about what the patch does? Once you've done that, you can set this to positive review. Thanks Darij.",
    "created_at": "2013-05-17T14:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181573",
    "user": "@tscrim"
}
```

Very minor nitpick, but could you make the commit message more about what the patch does? Once you've done that, you can set this to positive review. Thanks Darij.



---

archive/issue_comments_181574.json:
```json
{
    "body": "Attachment [trac_14574-folded.patch.txt](tarball://root/attachments/some-uuid/ticket14574/trac_14574-folded.patch.txt) by @darijgr created at 2013-05-17 14:46:32",
    "created_at": "2013-05-17T14:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181574",
    "user": "@darijgr"
}
```

Attachment [trac_14574-folded.patch.txt](tarball://root/attachments/some-uuid/ticket14574/trac_14574-folded.patch.txt) by @darijgr created at 2013-05-17 14:46:32



---

archive/issue_comments_181575.json:
```json
{
    "body": "folded version with a few more corrections",
    "created_at": "2013-05-17T14:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181575",
    "user": "@darijgr"
}
```

folded version with a few more corrections



---

archive/issue_comments_181576.json:
```json
{
    "body": "Attachment [trac_14574-folded.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-folded.patch) by @darijgr created at 2013-05-17 14:47:51",
    "created_at": "2013-05-17T14:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181576",
    "user": "@darijgr"
}
```

Attachment [trac_14574-folded.patch](tarball://root/attachments/some-uuid/ticket14574/trac_14574-folded.patch) by @darijgr created at 2013-05-17 14:47:51



---

archive/issue_comments_181577.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-17T14:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181577",
    "user": "@darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_181578.json:
```json
{
    "body": "patchbot:\n\napply trac_14574-folded.patch",
    "created_at": "2013-05-18T08:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181578",
    "user": "@vbraun"
}
```

patchbot:

apply trac_14574-folded.patch



---

archive/issue_comments_181579.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-22T08:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14370#issuecomment-181579",
    "user": "@jdemeyer"
}
```

Resolution: fixed
