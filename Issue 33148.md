# Issue 33148: [Combinatorial]Polyhedron_base.vertex_adjacency_matrix: Accept keyword arguments for matrix constructor

archive/issues_033148.json:
```json
{
    "body": "CC:  @kliem\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33385\n\n",
    "created_at": "2022-02-19T23:07:26Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "[Combinatorial]Polyhedron_base.vertex_adjacency_matrix: Accept keyword arguments for matrix constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33148",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kliem



Issue created by migration from https://trac.sagemath.org/ticket/33385





---

archive/issue_comments_471704.json:
```json
{
    "body": "I don't know if it is a good idea to remove the compile time dependency on `sage.matrix.matrix_integer_dense`. I'm curious about the penalty of doing this. E.g. it would be nice to somewhat keep benchmarks for the following steps:\n\n\n```\nsage: P = polytopes.permutahedron(7, backend='field')\nsage: %time P.incidence_matrix()\nCPU times: user 78.7 ms, sys: 11.9 ms, total: 90.6 ms\nWall time: 90.5 ms\n5040 x 127 dense matrix over Integer Ring (use the '.str()' method to see the entries)\nsage: %time P.combinatorial_polyhedron()\nCPU times: user 76.4 ms, sys: 8.79 ms, total: 85.2 ms\nWall time: 109 ms\nA 6-dimensional combinatorial polyhedron with 126 facets\nsage: P = polytopes.permutahedron(8, backend='field')\nsage: %time P.incidence_matrix()\nCPU times: user 1.02 s, sys: 156 ms, total: 1.18 s\nWall time: 1.17 s\n40320 x 255 dense matrix over Integer Ring (use the '.str()' method to see the entries)\nsage: %time P.combinatorial_polyhedron()\nCPU times: user 1.32 s, sys: 164 ms, total: 1.49 s\nWall time: 1.48 s\nA 7-dimensional combinatorial polyhedron with 254 facets\n```\n\n\nThen again, this is done in `src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx`. And maybe similar timings can be achieved by depending on a more general matrix class.",
    "created_at": "2022-02-20T16:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33148#issuecomment-471704",
    "user": "https://github.com/kliem"
}
```

I don't know if it is a good idea to remove the compile time dependency on `sage.matrix.matrix_integer_dense`. I'm curious about the penalty of doing this. E.g. it would be nice to somewhat keep benchmarks for the following steps:


```
sage: P = polytopes.permutahedron(7, backend='field')
sage: %time P.incidence_matrix()
CPU times: user 78.7 ms, sys: 11.9 ms, total: 90.6 ms
Wall time: 90.5 ms
5040 x 127 dense matrix over Integer Ring (use the '.str()' method to see the entries)
sage: %time P.combinatorial_polyhedron()
CPU times: user 76.4 ms, sys: 8.79 ms, total: 85.2 ms
Wall time: 109 ms
A 6-dimensional combinatorial polyhedron with 126 facets
sage: P = polytopes.permutahedron(8, backend='field')
sage: %time P.incidence_matrix()
CPU times: user 1.02 s, sys: 156 ms, total: 1.18 s
Wall time: 1.17 s
40320 x 255 dense matrix over Integer Ring (use the '.str()' method to see the entries)
sage: %time P.combinatorial_polyhedron()
CPU times: user 1.32 s, sys: 164 ms, total: 1.49 s
Wall time: 1.48 s
A 7-dimensional combinatorial polyhedron with 254 facets
```


Then again, this is done in `src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx`. And maybe similar timings can be achieved by depending on a more general matrix class.



---

archive/issue_comments_471705.json:
```json
{
    "body": "Thanks for the benchmarks! Of course I agree performance is important.",
    "created_at": "2022-02-20T17:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33148#issuecomment-471705",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for the benchmarks! Of course I agree performance is important.



---

archive/issue_comments_471706.json:
```json
{
    "body": "Not sure what to do about caching when `immutable=False` is given\n----\nLast 10 new commits:",
    "created_at": "2022-02-22T01:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33148#issuecomment-471706",
    "user": "https://github.com/mkoeppe"
}
```

Not sure what to do about caching when `immutable=False` is given
----
Last 10 new commits:



---

archive/issue_comments_471707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-22T04:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33148#issuecomment-471707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_471708.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-03-08T19:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33148#issuecomment-471708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
