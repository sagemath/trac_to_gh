# Issue 33148: [Combinatorial]Polyhedron_base.vertex_adjacency_matrix: Accept keyword arguments for matrix constructor

Issue created by migration from https://trac.sagemath.org/ticket/33385

Original creator: mkoeppe

Original creation time: 2022-02-19 23:07:26

CC:  @kliem




---

Comment by @kliem created at 2022-02-20 16:14:15

I don't know if it is a good idea to remove the compile time dependency on `sage.matrix.matrix_integer_dense`. I'm curious about the penalty of doing this. E.g. it would be nice to somewhat keep benchmarks for the following steps:


```
sage: P = polytopes.permutahedron(7, backend='field')
sage: %time P.incidence_matrix()
CPU times: user 78.7 ms, sys: 11.9 ms, total: 90.6 ms
Wall time: 90.5 ms
5040 x 127 dense matrix over Integer Ring (use the '.str()' method to see the entries)
sage: %time P.combinatorial_polyhedron()
CPU times: user 76.4 ms, sys: 8.79 ms, total: 85.2 ms
Wall time: 109 ms
A 6-dimensional combinatorial polyhedron with 126 facets
sage: P = polytopes.permutahedron(8, backend='field')
sage: %time P.incidence_matrix()
CPU times: user 1.02 s, sys: 156 ms, total: 1.18 s
Wall time: 1.17 s
40320 x 255 dense matrix over Integer Ring (use the '.str()' method to see the entries)
sage: %time P.combinatorial_polyhedron()
CPU times: user 1.32 s, sys: 164 ms, total: 1.49 s
Wall time: 1.48 s
A 7-dimensional combinatorial polyhedron with 254 facets
```


Then again, this is done in `src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx`. And maybe similar timings can be achieved by depending on a more general matrix class.


---

Comment by mkoeppe created at 2022-02-20 17:20:15

Thanks for the benchmarks! Of course I agree performance is important.


---

Comment by mkoeppe created at 2022-02-22 01:37:21

Not sure what to do about caching when `immutable=False` is given
----
Last 10 new commits:


---

Comment by git created at 2022-02-22 04:29:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-03-08 19:48:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
