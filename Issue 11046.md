# Issue 11046: factor is broken for polynomials over relative number fields

Issue created by migration from Trac.

Original creator: lftabera

Original creation time: 2011-04-19 12:03:51

Assignee: tbd

Keywords: factorization, tower of number fields

I suspect this is a regression, but I do not have and old sage copy right now


```
sage: K=QQ[I]['x,t']
sage: K.inject_variables()
Defining x, t
sage: f=t^2+1
sage: f.factor()
(t + (-I)) * (t + (I))
sage: K=QQ[sqrt(5),I]['t']  
sage: K.inject_variables()
Defining t
sage: f=t^2+1   
sage: f.factor()
(x + I) * (x - I)
sage: prod(f.factor())==f
False
sage: f.parent()
Univariate Polynomial Ring in t over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field
sage: prod(f.factor()).parent()
Univariate Polynomial Ring in x over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field
```


Factor of uni-variate polynomials in polynomial rings (uni and multivariate) over towers of number fields are broken, since the output variable is always 'x', so it the output is in the wrong ring.


---

Attachment


---

Comment by fwclarke created at 2011-05-04 20:22:12

Changing type from PLEASE CHANGE to defect.


---

Comment by fwclarke created at 2011-05-04 20:22:12

In the attached patch this defect is corrected very easily and a doctest is altered to demonstrate that the problem is solved.


---

Comment by fwclarke created at 2011-05-04 20:22:12

Changing status from new to needs_review.


---

Comment by lftabera created at 2011-06-07 09:29:32

The problem has been solved. It was an easy mistake in the code. The doctest shows that the problem has disapeared and the documentation looks god.

Buildbot says that doctest pass.

Positive review.


---

Comment by lftabera created at 2011-06-07 09:29:32

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-06-08 20:54:40

Resolution: fixed
