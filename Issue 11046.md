# Issue 11046: factor is broken for polynomials over relative number fields

archive/issues_011046.json:
```json
{
    "body": "Assignee: tbd\n\nKeywords: factorization, tower of number fields\n\nI suspect this is a regression, but I do not have and old sage copy right now\n\n\n```\nsage: K=QQ[I]['x,t']\nsage: K.inject_variables()\nDefining x, t\nsage: f=t^2+1\nsage: f.factor()\n(t + (-I)) * (t + (I))\nsage: K=QQ[sqrt(5),I]['t']  \nsage: K.inject_variables()\nDefining t\nsage: f=t^2+1   \nsage: f.factor()\n(x + I) * (x - I)\nsage: prod(f.factor())==f\nFalse\nsage: f.parent()\nUnivariate Polynomial Ring in t over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field\nsage: prod(f.factor()).parent()\nUnivariate Polynomial Ring in x over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field\n```\n\n\nFactor of uni-variate polynomials in polynomial rings (uni and multivariate) over towers of number fields are broken, since the output variable is always 'x', so it the output is in the wrong ring.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11218\n\n",
    "created_at": "2011-04-19T12:03:51Z",
    "labels": [
        "factorization",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.1",
    "title": "factor is broken for polynomials over relative number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11046",
    "user": "lftabera"
}
```
Assignee: tbd

Keywords: factorization, tower of number fields

I suspect this is a regression, but I do not have and old sage copy right now


```
sage: K=QQ[I]['x,t']
sage: K.inject_variables()
Defining x, t
sage: f=t^2+1
sage: f.factor()
(t + (-I)) * (t + (I))
sage: K=QQ[sqrt(5),I]['t']  
sage: K.inject_variables()
Defining t
sage: f=t^2+1   
sage: f.factor()
(x + I) * (x - I)
sage: prod(f.factor())==f
False
sage: f.parent()
Univariate Polynomial Ring in t over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field
sage: prod(f.factor()).parent()
Univariate Polynomial Ring in x over Number Field in sqrt5 with defining polynomial x^2 - 5 over its base field
```


Factor of uni-variate polynomials in polynomial rings (uni and multivariate) over towers of number fields are broken, since the output variable is always 'x', so it the output is in the wrong ring.

Issue created by migration from https://trac.sagemath.org/ticket/11218





---

archive/issue_comments_120390.json:
```json
{
    "body": "Attachment [trac_11218_factorization_fix.patch](tarball://root/attachments/some-uuid/ticket11218/trac_11218_factorization_fix.patch) by fwclarke created at 2011-05-04 20:20:45",
    "created_at": "2011-05-04T20:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120390",
    "user": "fwclarke"
}
```

Attachment [trac_11218_factorization_fix.patch](tarball://root/attachments/some-uuid/ticket11218/trac_11218_factorization_fix.patch) by fwclarke created at 2011-05-04 20:20:45



---

archive/issue_comments_120391.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-05-04T20:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120391",
    "user": "fwclarke"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_120392.json:
```json
{
    "body": "In the attached patch this defect is corrected very easily and a doctest is altered to demonstrate that the problem is solved.",
    "created_at": "2011-05-04T20:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120392",
    "user": "fwclarke"
}
```

In the attached patch this defect is corrected very easily and a doctest is altered to demonstrate that the problem is solved.



---

archive/issue_comments_120393.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-05-04T20:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120393",
    "user": "fwclarke"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_120394.json:
```json
{
    "body": "The problem has been solved. It was an easy mistake in the code. The doctest shows that the problem has disapeared and the documentation looks god.\n\nBuildbot says that doctest pass.\n\nPositive review.",
    "created_at": "2011-06-07T09:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120394",
    "user": "lftabera"
}
```

The problem has been solved. It was an easy mistake in the code. The doctest shows that the problem has disapeared and the documentation looks god.

Buildbot says that doctest pass.

Positive review.



---

archive/issue_comments_120395.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-06-07T09:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120395",
    "user": "lftabera"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120396.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-06-08T20:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11046",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11046#issuecomment-120396",
    "user": "jdemeyer"
}
```

Resolution: fixed
