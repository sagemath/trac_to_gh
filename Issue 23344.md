# Issue 23344: LLL_gram, clarifying and handling undefined behavior when `self` is not positive definite

Issue created by migration from Trac.

Original creator: edgarcosta

Original creation time: 2017-08-04 19:53:16

I tried to make it clear that `self` must be positive definite and showed some examples where things can go awry if that is not the case.

I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through {magma_free}


```
map(eval, magma_free("G, U, r := LLLGram(Matrix(2,2,[0,1,1,0])); print ElementToSequence(G); print ElementToSequence(U); print r;").splitlines())
```



---

Comment by edgarcosta created at 2017-08-05 02:39:59

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-08-05 06:28:26

Doc does not build :

```
+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:3: ERROR: Unexpected indentation.
+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:11: WARNING: Bullet list ends without a blank line; unexpected unindent.
```

You need to respect the doc syntax (http://doc.sagemath.org/html/en/developer/coding_basics.html).


---

Comment by edgarcosta created at 2017-08-07 15:01:12

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-08-07 15:32:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-07 15:51:01

there should be an empty line after `.. WARNING::`

and for the reference to pari, you can use the trac role, that creates an hyperlink:

```
:pari:`qfllgram`
```



---

Comment by chapoton created at 2017-08-07 15:52:23

in the doctests, the syntax is

```
here we go::

    sage: 2+2
    4
```

you forgot the double colon and the empty line just after it.


---

Comment by git created at 2017-08-07 15:54:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-07 15:55:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-07 15:58:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by edgarcosta created at 2017-08-07 15:59:46

Thanks for the tips!
I'm now double checking that everything builds fine.

Only after doing `make doc-clean` I managed to see the errors that you mentioned.


---

Comment by git created at 2017-08-07 21:02:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by edgarcosta created at 2017-08-07 21:04:02

I think it is all good now.


---

Comment by edgarcosta created at 2017-08-07 21:04:02

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-08-08 06:42:23

There is a mixture of qfllgram and qflllgram. How many l's are there ?


---

Comment by git created at 2017-08-22 19:53:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by edgarcosta created at 2017-08-22 19:57:27

I have fixed the number of l's.

Sorry for the delay, totally missed your comment.

Cheers,
Edgar


---

Comment by git created at 2017-08-25 14:11:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-25 14:17:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-08-25 14:22:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aly.deines created at 2017-08-25 14:34:19

Looks good.  Just a few changes.

I think


```
sage: Matrix(ZZ, [-5, -1, -1, -5]).LLL_gram() # not tested
```


should be


```
sage: Matrix(ZZ, 2, 2, [-5, -1, -1, -5]).LLL_gram() # not tested
```


If you change that and remove all trailing whitespace, I'll give you a positive review.


---

Comment by aly.deines created at 2017-08-25 14:34:19

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-08-25 14:48:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by edgarcosta created at 2017-08-25 17:36:44

Changing keywords from "" to "days88".


---

Comment by edgarcosta created at 2017-08-25 17:36:44

Changing status from needs_work to needs_review.


---

Comment by aly.deines created at 2017-08-25 20:03:56

Changing status from needs_review to positive_review.


---

Comment by aly.deines created at 2017-08-25 20:03:56

Thanks!


---

Comment by vbraun created at 2017-09-10 11:56:25

Resolution: fixed
