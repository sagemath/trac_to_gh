# Issue 31720: Slow gcd for sparse polynomials

archive/issues_031720.json:
```json
{
    "body": "CC:  katestange\n\nKeywords: gcd, polynomials, sparse\n\nThe following code produces a couple small sparse polynomials and times the gcd function:\n\n```\nR.<Z> = PolynomialRing(ZZ, sparse=True)\ng = R(0)\nf = R(0)\nfor i in range(10):\n    g += Z^randint(1,10^5)\n    f += Z^randint(1,10^5)\ntimeit(\"gcd(f,g)\")\n```\n\nThe results are disappointing:\n\n```\n5 loops, best of 3: 880 ms per loop\n```\n\nHowever, if we remove the \"sparse=True\" tag, the results are much better:\n\n```\n5 loops, best of 3: 46.6 ms per loop\n```\n\nThis is highly repeatable, on my laptop and on the single cell server, on both larger and smaller examples.  I don't see any essential reason this ought to be true, so I'm calling it a defect, but perhaps the community knows more about the efficiency issues of sparse polynomials...\n\nIssue created by migration from https://trac.sagemath.org/ticket/31957\n\n",
    "created_at": "2021-06-11T14:18:28Z",
    "labels": [
        "basic arithmetic",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Slow gcd for sparse polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31720",
    "user": "katestange"
}
```
CC:  katestange

Keywords: gcd, polynomials, sparse

The following code produces a couple small sparse polynomials and times the gcd function:

```
R.<Z> = PolynomialRing(ZZ, sparse=True)
g = R(0)
f = R(0)
for i in range(10):
    g += Z^randint(1,10^5)
    f += Z^randint(1,10^5)
timeit("gcd(f,g)")
```

The results are disappointing:

```
5 loops, best of 3: 880 ms per loop
```

However, if we remove the "sparse=True" tag, the results are much better:

```
5 loops, best of 3: 46.6 ms per loop
```

This is highly repeatable, on my laptop and on the single cell server, on both larger and smaller examples.  I don't see any essential reason this ought to be true, so I'm calling it a defect, but perhaps the community knows more about the efficiency issues of sparse polynomials...

Issue created by migration from https://trac.sagemath.org/ticket/31957


