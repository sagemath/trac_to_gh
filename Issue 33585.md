# Issue 33585: python3 spkg-configure.m4: Require ensure-pip

Issue created by migration from https://trac.sagemath.org/ticket/33822

Original creator: mkoeppe

Original creation time: 2022-05-08 04:54:55

CC:  dimpase

On Debian, package `python3-venv` needs to be installed to un-sabotage python3.

Needed in #33812.


---

Comment by mkoeppe created at 2022-05-08 04:56:51

New commits:


---

Comment by mkoeppe created at 2022-05-08 04:56:51

Changing status from new to needs_review.


---

Comment by git created at 2022-05-08 05:57:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2022-05-08 22:19:52

Shouldn't python3-venv then be better included in the base image, then installing it manually in the build workflow?


---

Comment by mkoeppe created at 2022-05-08 22:29:43

It will already be in all future base images by the change in build/pkgs/python3/distros/debian.txt


---

Comment by @tobiasdiez created at 2022-05-09 20:45:36

Replying to [comment:6 mkoeppe]:
> It will already be in all future base images by the change in build/pkgs/python3/distros/debian.txt

Okay, then why add it manually in the build workflow? For testing purposes this is fine, but I guess it should be removed before merging this ticket.


---

Comment by mkoeppe created at 2022-05-09 20:51:21

It's a no-op in the future and we can remove it in a later ticket, but not now because I want to use it for the tests of all the tickets that depend on it.


---

Comment by @tobiasdiez created at 2022-05-10 18:23:53

Makes sense. Then I would propose to squash the current commits and remove python3-venv from the build workflow in a new commit. Then you could cherry pick the squashed commit in other tickets that depend on this one here.

Or at least add a comment in the workflow that it should be removed in the future.

Otherwise this looks good to me.


---

Comment by git created at 2022-05-10 18:27:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-05-10 18:27:27

I've added the comment, good idea.


---

Comment by mkoeppe created at 2022-05-29 22:19:50

Let's get this in please


---

Comment by dimpase created at 2022-05-30 09:12:11

lgtm


---

Comment by dimpase created at 2022-05-30 09:12:11

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-05-30 19:04:55

Thanks!


---

Comment by vbraun created at 2022-06-12 12:17:10

Resolution: fixed
