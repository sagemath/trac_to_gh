# Issue 14820: SymPy conversions for symbolic functions that are missing them

Issue created by migration from Trac.

Original creator: eviatarbach

Original creation time: 2013-08-17 20:14:06

CC:  burcin asmeurer

Some symbolic functions are missing SymPy conversions.


---

Attachment


---

Comment by eviatarbach created at 2013-08-17 20:16:29

Changing status from new to needs_review.


---

Comment by eviatarbach created at 2013-08-17 20:16:29

The patch adds conversions for all the symbolic functions in Sage that I could find that have a SymPy equivalent.

Patchbot apply trac15057.patchâ€‹


---

Comment by asmeurer created at 2013-08-27 05:08:15

You must be using an old version of SymPy. KroneckerDelta is just KroneckerDelta. The rest look fine.


---

Attachment

Ah, alright. I was using 0.7.1, which is the version currently in Sage. This should be merged after #14694 then. I also added doctests in case the names change again in the future.


---

Comment by asmeurer created at 2013-08-27 16:32:09

A bunch of new special functions have been added since then too, so this is probably not complete.


---

Comment by eviatarbach created at 2013-08-27 17:00:22

I think I checked fairly thoroughly (I believe that I automatically ran through all the functions in `sage/functions` and tried to call their `_sympy_` method, and if it failed I checked if there was a SymPy equivalent), and with the current SymPy documentation. I may have missed a few though.


---

Comment by asmeurer created at 2013-08-27 17:02:47

Can you provide the list of functions without equivalents?


---

Comment by eviatarbach created at 2013-08-27 17:41:52

Actually, I didn't include the conversions for the exponential integrals and `lambert_w`. Patch for that coming up.

Here are the functions in Sage that are not in SymPy as far as I can tell. I haven't checked the ones in `sage/rings/arith.py` yet, and of course there are tons of combinatorial functions.

* Dickman's function (`dickman_rho` in Sage)
* Heaviside step function and unit step function (`heaviside` and `unit_step` in Sage; they only seem to differ in that `heaviside` is undefined at 0)
* Inverse Jacobi functions (`inverse_jacobi` in Sage)
* Jacobi amplitude function (to be added in #14996 as `jacobi_am`)
* Spherical Bessel and spherical Hankel functions (`spherical_bessel_J`, `spherical_bessel_Y`, `spherical_hankel1`, and `spherical_hankel2` in Sage)
* Symmetric zeta function (`zeta_symmetric` in Sage)
* Derivatives of the zeta function (`zetaderiv` in Sage)

Note that some SymPy conversions are going to be added in pending tickets that transition functions to use Sage's `BuiltinFunction` instead of being simple Maxima wrappers. For example, #15046 and #14996.


---

Comment by asmeurer created at 2013-08-27 21:22:27

SymPy has Heaviside, which gives 1/2 at 0. It also has (I believe all) the bessel functions (I don't remember, but some of them may be new in the most recent version). 

I opened https://code.google.com/p/sympy/issues/detail?id=3992 to implement the rest :)


---

Comment by eviatarbach created at 2013-08-28 03:28:34

Right, the spherical Bessel functions are implemented, but not the spherical Hankel functions. They're not in mpmath, but numeric evaluation is quite trivial to implement; see the function `spherical_bessel_f` at http://trac.sagemath.org/attachment/ticket/15024/trac15024.patch.


---

Comment by eviatarbach created at 2013-08-29 06:42:29

This patch adds conversions for exponential integrals as well. I didn't add a Lambert W conversion since it has a different number of arguments in SymPy (Sage allows you to choose the branch), and there doesn't seem to be a good way of doing more complicated conversions yet. It should be easy to add functionality for doing so, however.


---

Attachment

Apparently SymPy doesn't have Jacobi elliptic functions at all. That's another one to add to the list.


---

Comment by rws created at 2014-08-12 12:33:17

See also #14723


---

Comment by rws created at 2014-08-12 13:22:52

It's all straightforward addition of conversions. Long doctests pass in `functions`.
----
New commits:


---

Comment by rws created at 2014-08-12 13:22:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-09-09 14:59:52

My release management script doesn't understand dependencies that predate the git transition ;-)


---

Comment by vbraun created at 2014-09-09 22:01:04

Resolution: fixed
