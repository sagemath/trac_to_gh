# Issue 29054: Check for more strictly required extension module "ssl" in Python build

Issue created by migration from https://trac.sagemath.org/ticket/29291

Original creator: mkoeppe

Original creation time: 2020-03-06 22:38:50

CC:  dimpase embray jhpalmieri slelievre dunfield tmonteil

Follow up from #27705.

A warning should be shown, perhaps already at the end of the configure phase.

Of course, we will need to be careful regarding the macOS SSL problems.


---

Comment by @Shlokatadistance created at 2020-03-13 14:09:08

Can this also work with certifi package?
I had issues previously with some other packages on Mac, and certifi seemed to fix it


---

Comment by mkoeppe created at 2020-04-14 06:33:01

pushing these forward to 9.2


---

Comment by mkoeppe created at 2021-03-15 22:07:04

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-08-13 04:01:54

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-08-13 04:01:54

New commits:


---

Comment by git created at 2021-08-13 18:47:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slelievre created at 2021-08-22 09:49:20

In `build/pkgs/python3/spkg-build.in`, line 32,
the (preexisting) typo explicitely -> explicitly
could be fixed since we're editing that file.

Any suggestions on how to review this ticket?


---

Comment by jhpalmieri created at 2021-09-14 04:20:44

Replying to [comment:11 slelievre]:
> In `build/pkgs/python3/spkg-build.in`, line 32,
> the (preexisting) typo explicitely -> explicitly
> could be fixed since we're editing that file.
> 
> Any suggestions on how to review this ticket?

I guess if we can't find systems without the Python module ssl already installed, maybe we should just merge it and move on?


---

Comment by mkoeppe created at 2021-09-14 04:34:23

Right, I'm not aware of a distribution whose python would be missing the ssl module. The new configuration tests here on the ticket protect against broken pythons compiled by users. The most likely scenario could be that a user configures the source from within the `sage -sh` of some old installation of Sage. 
Probably not useful to replicate something like this in order to review the ticket.


---

Comment by jhpalmieri created at 2021-09-14 17:56:55

Why not just remove `PREREQUISITE_ERROR` completely?


---

Comment by git created at 2021-09-14 18:38:07

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2021-09-14 21:23:58

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2021-09-14 21:23:58

This works for me, but my Python isn't broken (nor do I want to build a broken one), so I can't test the error messages. The code all makes sense, though.


---

Comment by vbraun created at 2021-09-15 22:06:18

Resolution: fixed
