# Issue 29054: Check for more strictly required extension module "ssl" in Python build

archive/issues_029054.json:
```json
{
    "body": "CC:  @dimpase @embray @jhpalmieri @slel @NathanDunfield tmonteil\n\nFollow up from #27705.\n\nA warning should be shown, perhaps already at the end of the configure phase.\n\nOf course, we will need to be careful regarding the macOS SSL problems.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29291\n\n",
    "created_at": "2020-03-06T22:38:50Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Check for more strictly required extension module \"ssl\" in Python build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29054",
    "user": "@mkoeppe"
}
```
CC:  @dimpase @embray @jhpalmieri @slel @NathanDunfield tmonteil

Follow up from #27705.

A warning should be shown, perhaps already at the end of the configure phase.

Of course, we will need to be careful regarding the macOS SSL problems.

Issue created by migration from https://trac.sagemath.org/ticket/29291





---

archive/issue_comments_411242.json:
```json
{
    "body": "Can this also work with certifi package?\nI had issues previously with some other packages on Mac, and certifi seemed to fix it",
    "created_at": "2020-03-13T14:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411242",
    "user": "@Shlokatadistance"
}
```

Can this also work with certifi package?
I had issues previously with some other packages on Mac, and certifi seemed to fix it



---

archive/issue_comments_411243.json:
```json
{
    "body": "pushing these forward to 9.2",
    "created_at": "2020-04-14T06:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411243",
    "user": "@mkoeppe"
}
```

pushing these forward to 9.2



---

archive/issue_comments_411244.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411244",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_411245.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-13T04:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411245",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_411246.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-13T04:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411246",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_411247.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T18:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411247",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_411248.json:
```json
{
    "body": "In `build/pkgs/python3/spkg-build.in`, line 32,\nthe (preexisting) typo explicitely -> explicitly\ncould be fixed since we're editing that file.\n\nAny suggestions on how to review this ticket?",
    "created_at": "2021-08-22T09:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411248",
    "user": "@slel"
}
```

In `build/pkgs/python3/spkg-build.in`, line 32,
the (preexisting) typo explicitely -> explicitly
could be fixed since we're editing that file.

Any suggestions on how to review this ticket?



---

archive/issue_comments_411249.json:
```json
{
    "body": "Replying to [comment:11 slelievre]:\n> In `build/pkgs/python3/spkg-build.in`, line 32,\n> the (preexisting) typo explicitely -> explicitly\n> could be fixed since we're editing that file.\n> \n> Any suggestions on how to review this ticket?\n\nI guess if we can't find systems without the Python module ssl already installed, maybe we should just merge it and move on?",
    "created_at": "2021-09-14T04:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411249",
    "user": "@jhpalmieri"
}
```

Replying to [comment:11 slelievre]:
> In `build/pkgs/python3/spkg-build.in`, line 32,
> the (preexisting) typo explicitely -> explicitly
> could be fixed since we're editing that file.
> 
> Any suggestions on how to review this ticket?

I guess if we can't find systems without the Python module ssl already installed, maybe we should just merge it and move on?



---

archive/issue_comments_411250.json:
```json
{
    "body": "Right, I'm not aware of a distribution whose python would be missing the ssl module. The new configuration tests here on the ticket protect against broken pythons compiled by users. The most likely scenario could be that a user configures the source from within the `sage -sh` of some old installation of Sage. \nProbably not useful to replicate something like this in order to review the ticket.",
    "created_at": "2021-09-14T04:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411250",
    "user": "@mkoeppe"
}
```

Right, I'm not aware of a distribution whose python would be missing the ssl module. The new configuration tests here on the ticket protect against broken pythons compiled by users. The most likely scenario could be that a user configures the source from within the `sage -sh` of some old installation of Sage. 
Probably not useful to replicate something like this in order to review the ticket.



---

archive/issue_comments_411251.json:
```json
{
    "body": "Why not just remove `PREREQUISITE_ERROR` completely?",
    "created_at": "2021-09-14T17:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411251",
    "user": "@jhpalmieri"
}
```

Why not just remove `PREREQUISITE_ERROR` completely?



---

archive/issue_comments_411252.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-09-14T18:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411252",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_411253.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-14T21:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411253",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_411254.json:
```json
{
    "body": "This works for me, but my Python isn't broken (nor do I want to build a broken one), so I can't test the error messages. The code all makes sense, though.",
    "created_at": "2021-09-14T21:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411254",
    "user": "@jhpalmieri"
}
```

This works for me, but my Python isn't broken (nor do I want to build a broken one), so I can't test the error messages. The code all makes sense, though.



---

archive/issue_comments_411255.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-15T22:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29054#issuecomment-411255",
    "user": "@vbraun"
}
```

Resolution: fixed
