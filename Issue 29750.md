# Issue 29750: build/: Do not depend on src/bin/sage-version.sh

Issue created by migration from https://trac.sagemath.org/ticket/29987

Original creator: mkoeppe

Original creation time: 2020-06-24 22:23:31

CC:  jhpalmieri vdelecroix @kliem


```
find build -type f -exec fgrep  -nH -e sage-version.sh \{\} +
build/bin/sage-starts:12:. src/bin/sage-version.sh
build/bin/write-dockerfile.sh:160:ADD src/bin/sage-version.sh src/bin/sage-version.sh
build/make/install:22:. "$SAGE_SRC"/bin/sage-version.sh

find src -type f -exec fgrep  -nH -e -version.sh \{\} +
src/bin/sage-update-version:48:# Update Sage version file for shell scripts in SAGE_SRC/bin/sage-version.sh
src/bin/sage-update-version:49:cat <<EOF > "$SAGE_SRC/bin/sage-version.sh"
src/bin/sage-update-version:67:    "$SAGE_SRC/bin/sage-version.sh" \
src/bin/sage-sdist:40:source "$SAGE_SRC/bin/sage-version.sh"
src/bin/sage:7:    if [ -f "$0-version.sh" ]; then
src/bin/sage:8:        . "$0-version.sh"
src/bin/sage:10:        . "$SAGE_ROOT/src/bin/sage-version.sh"
src/doc/en/developer/portability_testing.rst:349:  ADD src/bin/sage-version.sh src/bin/sage-version.sh
src/mac-app/Makefile:23:    SAGE_VERSION:=$(shell source ../bin/sage-version.sh && echo $$SAGE_VERSION)
```


Previous tickets:
 - #25150 (Eliminate dependence on `VERSION.txt` within Sage)
 - #17857 (enhanced `sage -version` script)


---

Comment by mkoeppe created at 2020-06-25 07:40:58

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-06-25 07:40:58

Last 10 new commits:


---

Comment by mkoeppe created at 2020-06-25 07:42:21

Branch is 1 commit on top of #29411. Tests run at https://github.com/mkoeppe/sage/actions/runs/147135221


---

Comment by jhpalmieri created at 2020-06-30 01:21:03

Looks good.


---

Comment by jhpalmieri created at 2020-06-30 01:21:03

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-30 01:53:37

Thanks!


---

Comment by vbraun created at 2020-07-08 19:33:16

Resolution: fixed
