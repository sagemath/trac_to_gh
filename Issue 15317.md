# Issue 15317: enhance ratpoints interface

Issue created by migration from https://trac.sagemath.org/ticket/15554

Original creator: cremona

Original creation time: 2013-12-20 11:49:17

In sage/libs/ratpoints there is a cython interface to the standard ratpoints package (Michael Stoll's efficient C library for point searching on curves of the form `y^2=f(x)` for polynomials `f(x)` of any degree).

The interface currently only allows the user to specify the coefficients of the polynomial, a height bound, and a maximum number of points to be found.  But ratpoints has other parameters, in particular upper and lower bounds for the denominator of `x` (useful in searching for integralpoints) and the ability to search only for `x` in one or more real intervals.

We propose to enhance the interface to allow non-defaults for all the ratpoints parameters, while remaining completely backwards compatible.


---

Comment by cremona created at 2013-12-20 15:41:19

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-12-20 16:03:07

The commit should be filled in automatically...


---

Comment by cremona created at 2013-12-20 16:21:17

Replying to [comment:4 vbraun]:
> The commit should be filled in automatically...
Thanks!


---

Comment by cremona created at 2013-12-21 12:48:00

I pushed branch u/cremona/ticket/15554 to trac.


---

Comment by tscrim created at 2013-12-21 20:23:43

I'm going to try removing the branch and then reset it.


---

Comment by tscrim created at 2013-12-21 20:24:40

Hmmm...Perhaps try rebasing it off the `develop` branch and see if that works?


---

Comment by tscrim created at 2013-12-21 20:36:05

From http://git.sagemath.org/sage.git/log/?h=u/cremona/ticket/15554 it seems like this is the master branch, so there's no differences in the commits (and possibly is why there's no (commit) tag).


---

Comment by vbraun created at 2013-12-21 21:24:51

Correct, 3472a854df051b57d1cb7e4934913f17f1fef820 is Sage-6.0 master.


---

Comment by cremona created at 2013-12-21 23:14:19

Replying to [comment:11 vbraun]:
> Correct, 3472a854df051b57d1cb7e4934913f17f1fef820 is Sage-6.0 master.

Volker, you set that commit field manually!  The hash of the commit I actually pushed is
8527d9fecac247012d1bf4dd843edffff90344e3

If you cannot see that it must not have pushed properly, I am pushing it again now using git directly and not sage -dev.  But it failed:

```
jec@atkin:~/sage (branch: trac15554-ratpoints)$ git push trac u/cremona/ticket/15554
X11 forwarding request failed on channel 0
error: src refspec u/cremona/ticket/15554 does not match any.
error: failed to push some refs to 'ssh://git@trac.sagemath.org:2222/sage.git'
```



---

Comment by vbraun created at 2013-12-21 23:19:49

Try

```
git push trac HEAD:u/cremona/ticket/15554
```



---

Comment by vbraun created at 2013-12-21 23:21:19

PS: I didn't set the commit field myself, that was a trac plugin (though its a bit confusing that it shows up under my name)


---

Comment by tscrim created at 2013-12-22 05:26:15

You might also want to try:

```
git push --set-upstream trac u/cremona/ticket/15554
```

then you can just use `git push` on every subsequent time.


---

Comment by git created at 2013-12-22 10:33:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2013-12-22 10:45:41

Replying to [comment:15 tscrim]:
> You might also want to try:
> {{{
> git push --set-upstream trac u/cremona/ticket/15554
> }}}
> then you can just use `git push` on every subsequent time.

Thanks, I had forgotten that syntax.  I think it has now pushed ok, but as usual the push command takes  a very long time and has not given me back a prompt yet.

Thanks to both for the help.


---

Comment by tscrim created at 2013-12-22 18:34:42

Replying to [comment:17 cremona]:
> I think it has now pushed ok, but as usual the push command takes  a very long time and has not given me back a prompt yet.

This is "known" (at least to Volker and me -- I forget which sage-devel/sage-git topic Volker mentioned having this problem), and if it hangs, you can just `ctrl-C`. By that point it usually has already pushed.

I will make some review changes in a minute.

Best,

Travis


---

Comment by tscrim created at 2013-12-22 20:22:28

Okay, I've made a (trivial) review change, I broke up the one lone line. If you're happy with my change, then this is a positive review.
----
New commits:


---

Comment by cremona created at 2013-12-22 22:48:23

I am happy.  I pulled your additional commit and was able to view the diff using 

```
git diff HEAD^ HEAD
```

and it is as you say.  Thanks for the review, and feel free to give this a positive review!


---

Comment by tscrim created at 2013-12-23 16:11:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-24 20:24:02

Resolution: fixed
