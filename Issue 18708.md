# Issue 18708: Game Theory: Build class for extensive form games

Issue created by migration from https://trac.sagemath.org/ticket/18945

Original creator: hhlorrimore

Original creation time: 2015-07-23 14:25:31

CC:  vinceknight ptigwe jcampbell frward

Keywords: Game Theory, Extensive Form Games

Include class for extensive form games:

- Ability to generate tree like structure.
- Have graphical representation.
- Implement conversion to and from Gambit, which include ability to find Nash using Gambit. 


---

Comment by hhlorrimore created at 2015-07-23 14:45:20

Last 10 new commits:


---

Comment by hhlorrimore created at 2015-07-23 14:45:20

Changing status from new to needs_review.


---

Comment by hhlorrimore created at 2015-07-23 14:49:55

This is ready for review. The file is long but this is due to an extensive test suite that requires a lot of boiler plate code (setup of gambit games etc).

Note that the docs don't build at present, but I believe that this is due to the version of develop that is merged in.


---

Comment by vinceknight created at 2015-07-23 15:19:26

Changing type from defect to enhancement.


---

Comment by git created at 2015-07-25 00:30:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-08-09 14:53:21

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by jcampbell created at 2015-08-09 18:54:50

Is this now ready for review?


---

Comment by vinceknight created at 2015-08-10 06:24:50

Yes, it's now ready for review. As this is a large ticket, Hannah suggests the following break up of the review process (which could be done by multiple people):

Part 1:

   `ExtensiveFormGame`
        1. __init__ (not worrying about having a gambit Game generator)
        2. _check_node_names_and_find_players (as a direct result of looking at __init__)

   `EFG_Node`, `EFG_Leaf`, `EFG_Player`:
        1. (all of their methods)

Part 2:
   `ExtensiveFormGame`
        1. _gambit_to_sage and all its own methods (and hence might want to look at __init and generating the game with a gambit Game)
        2. sage_to_gambit and all its own methods

Part 3:
   `ExtensiveFormGame`
        1. set_info_set
        2. remove_info_set
        3. perfect_info
        4. plot (and all its related hidden methods, i.e. _grow_tree, _grow_tree_dictionary)
        5. plot_info_sets (and all its related hidden methods i.e. _grow_info_set_graph, _grow_info_set_graph_dictionary)
        6. obtain_nash
        7. is_constant_sum


---

Comment by ptigwe created at 2015-11-28 02:53:09

Just a few observations from looking at the initialization methods:
 
 * Would it be possible to automatically name the players, in a similar manner that the nodes are automatically named if no name is given.
 * The function "_player_check" needs a test for the case where a player is correctly passed as a parameter
 * It might be better if the '_player_check' function was called when the node is created rather than when multiple nodes have been created. This way you can easily tell which node caused the error.
 * Test the structure of the graph generated in '_grow_tree_dictionary'
 * Indicate in the documentation that the current implementation doesn't support chance (nature) nodes. And possibly catch the error generated when trying to convert a gambit game with a chance node. For example, (https://github.com/gambitproject/gambit/blob/0860191f942fb81f296232b2064456806ed1341c/contrib/games/bayes1a.efg)


```
ExtensiveFormGame(gambit.Game.read_game("bayes1a.efg"))
```

yields

```
KeyError: <Player [CHANCE] in game 'General Bayes game, one stage'>
```



---

Comment by vinceknight created at 2015-11-29 15:29:45

Super helpful Tobenna. Immediate thoughts below (mainly agreeing). I will get on this as soon as I get a moment.

Replying to [comment:10 ptigwe]:
> Just a few observations from looking at the initialization methods:
>  
>  * Would it be possible to automatically name the players, in a similar manner that the nodes are automatically named if no name is given.

Good idea!

>  * The function "_player_check" needs a test for the case where a player is correctly passed as a parameter

Yup.

>  * It might be better if the '_player_check' function was called when the node is created rather than when multiple nodes have been created. This way you can easily tell which node caused the error.

Sounds sensible.

>  * Test the structure of the graph generated in '_grow_tree_dictionary'

Yup.

>  * Indicate in the documentation that the current implementation doesn't support chance (nature) nodes. And possibly catch the error generated when trying to convert a gambit game with a chance node. For example, (https://github.com/gambitproject/gambit/blob/0860191f942fb81f296232b2064456806ed1341c/contrib/games/bayes1a.efg)
> 
> {{{
> ExtensiveFormGame(gambit.Game.read_game("bayes1a.efg"))
> }}}
> yields
> {{{
> KeyError: <Player [CHANCE] in game 'General Bayes game, one stage'>
> }}}


Ah excellent catch! Yes this is needed.


---

Comment by @bryangingechen created at 2018-07-28 09:18:06

This no longer merges.


---

Comment by @bryangingechen created at 2018-07-28 09:18:06

Changing status from needs_review to needs_work.


---

Comment by @bryangingechen created at 2018-07-28 14:45:13

... but it was easy enough to get it to merge and I went ahead and fixed some doctests as well. I will leave this as needs_work though since there are some unaddressed issues from the comments above.
----
Last 10 new commits:
