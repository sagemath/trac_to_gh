# Issue 16808: Poset directed_subset() doesn't check for 2. argument

Issue created by migration from https://trac.sagemath.org/ticket/17045

Original creator: jmantysalo

Original creation time: 2014-09-26 09:32:40


```
Poset({0:[1]}).directed_subset([1], 'cat-says-meow')
```


does not give error message. Only 'up' and 'down' should be accepted.



---

Comment by jmantysalo created at 2014-09-26 09:47:24

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2014-09-26 09:47:24

New commits:


---

Comment by ncohen created at 2014-09-26 11:57:18

Could you close #17046 and make all modifications in this ticket ?

Nathann


---

Comment by jmantysalo created at 2014-09-26 12:00:57

Replying to [comment:4 ncohen]:
> Could you close #17046 and make all modifications in this ticket ?

Yes. Or at least try, let's see if it works.


---

Comment by git created at 2014-09-26 12:05:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-09-26 12:27:52

Thank you for merging them ! Usually we split tickets when they are very big and/or hard to review, or when they do very unrelated things, but in this case it's all very simple and it is less work for the release manager (who checks ALL of Sage's tests for every ticket, i.e. a LOT of computations).

Let me finish a ticket I am writing and I will review that immediately after.

Nathann


---

Comment by jmantysalo created at 2014-09-26 12:37:23

Replying to [comment:7 ncohen]:
 
> Let me finish a ticket I am writing and I will review that immediately after.

No hurry. This one would have "extremely trivial" priority if we would have it.

In future I'll try to make slightly bigger chunks when correcting minor things like this one.


---

Comment by ncohen created at 2014-09-26 12:39:46

Hello again !

Two comments:

1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your "x <> y" last time will come and tell you that it is not "PEP-<whatever>". Could you change it into `raise ValueError("message")` ?

2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?

Nathann


---

Comment by ncohen created at 2014-09-26 12:39:46

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-09-26 12:54:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2014-09-26 12:57:19

Replying to [comment:9 ncohen]:

> 1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your "x <> y" last time will come and tell you that it is not "PEP-<whatever>". Could you change it into `raise ValueError("message")` ?

Done this. Good to obey PEP-rules, nothing to be sorry about.

> 2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?

I don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.


---

Comment by jmantysalo created at 2014-09-26 12:57:19

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2014-09-26 13:01:25

> I don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.

My mistake, I had not noticed.

Nathann


---

Comment by ncohen created at 2014-09-26 13:04:05

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-09-26 13:04:05

Thennnnnnnn it's good to go !

Thank you very much for taking the time to clean this code, by the way.

Nathann


---

Comment by jmantysalo created at 2014-09-26 13:05:25

Btw, if `raise type, text` is against some PEP, then also http://www.sagemath.org/doc/thematic_tutorials/tutorial-programming-python.html#control-structures should be changed.

Also at least on `graphs/graph_plot.py` function `layout_tree` should be changed, see parameter `orientation`. I left that for now.


---

Comment by ncohen created at 2014-09-26 13:08:11

Well, change it if you like but as far as I am concerned this can all be changed automatically if we want to. Though apparently people also fear big change sets like that.

I just don't care much either way `:-P`

Nathann


---

Comment by vbraun created at 2014-09-27 12:56:56

Resolution: fixed
