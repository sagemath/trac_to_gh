# Issue 18618: breadth_first_search return edges

Issue created by migration from https://trac.sagemath.org/ticket/18855

Original creator: chaoxu

Original creation time: 2015-07-07 05:10:09

There is no easy way to get the set of edges in a `breadth_first_search` traversal of the graph.
What about an optional parameter so it also return a set of edges of some breadth first search?

Similarly, for the other set of searches too. 
This is useful if there are information stored on the edges instead of vertices.


---

Comment by @JhaPrajjwal created at 2019-03-06 16:50:15

Can anyone clarify what exactly this enhancement expects? Maybe through an example. I am willing to work on it.
Thanks.


---

Comment by chaoxu created at 2019-03-06 17:02:55

Say the graph has edges ab, ac, cd, bd, bc


```

a----b--\
 \   |   \
  \--c----d
```



If we do a breadth first search from `a`, one of the possible breadth first search trees is


```

a----b--\
 \       \
  \--c    d
```


The edges in the tree are ab, ac, bd. The function should return those edges.


---

Comment by @JhaPrajjwal created at 2019-03-06 17:05:30

Replying to [comment:2 chaoxu]:
> Say the graph has edges ab, ac, cd, bd, bc
> 
> {{{
> 
> a----b--\
>  \   |   \
>   \--c----d
> }}}
> 

Thank you! I will start working on it.
> 
> If we do a breadth first search from `a`, one of the possible breadth first search trees is
> 
> {{{
> 
> a----b--\
>  \       \
>   \--c    d
> }}}
> 
> The edges in the tree are ab, ac, bd. The function should return those edges.


---

Comment by @JhaPrajjwal created at 2019-03-12 20:04:49

Hello,
I have implemented this, but how do I check my code. I mean how do I build sage again so that my implemented changes can checked by me locally?


---

Comment by dcoudert created at 2019-03-13 10:44:18

Have you read the [Sage Developerâ€™s Guide](http://doc.sagemath.org/html/en/developer/index.html) ?


---

Comment by @JhaPrajjwal created at 2019-03-15 14:22:48

Hello,
Lets say I use a new parameter get_edges. If I pass get_edges=True, should I only output the edges through the generators or should I output the edges as well as vertices. If we go for the latter option, can you please guide me on how to use 'yield' to output both of them.


---

Comment by dcoudert created at 2019-03-15 16:04:22

I suggest to return only edges. 

To name the parameter may be simple `edges`?


---

Comment by git created at 2019-03-15 17:14:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @JhaPrajjwal created at 2019-03-15 17:16:20

Changing status from new to needs_review.


---

Comment by dcoudert created at 2019-03-15 17:19:33

There is a merge conflict between your branch and the last beta version. To see that, click on the branch name on top of this page.


---

Comment by git created at 2019-03-15 17:46:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @JhaPrajjwal created at 2019-03-18 07:22:56

I am not able to find the merge conflict. I am trying to rebase with trac master but the branch is already up-to date. Can you please tell me which branch I need to rebase with?


---

Comment by dcoudert created at 2019-03-18 07:30:59

You should rebase on the develop branch. It is the most recent branch.


---

Comment by git created at 2019-03-19 21:26:57

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @JhaPrajjwal created at 2019-03-19 21:29:29

Please check and let me know if any more changes needs to be done? Also if the gets merged shall I update the documentation?


---

Comment by dcoudert created at 2019-03-21 07:44:06

Why are you first building a list of edges and later iterate over that list to yield edges ?


---

Comment by git created at 2019-03-21 13:00:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @JhaPrajjwal created at 2019-03-21 13:02:59

Initially I was trying to output both edges and vertices so I was storing it in a list for some reason. But I forgot to change it when I switched to returning only the edges. Made the changes. Please check. Also, if it is correct shall I make a similar ticket for dfs?
----
New commits:


---

Comment by dcoudert created at 2019-03-21 16:56:58

Some more comments

- you must document parameter edges

- you must document the fact that some combinations of parameters are not possible like `edges=True` and `report_distance=True`

- some spaces are needed for the quality of the code. See http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style for more details

```diff
-                             report_distance=False,edges=False):
+                             report_distance=False, edges=False):
```


- remove

```
-            edges_list = []
-
```


Have you tested your changes with more graphs / digraphs ?


---

Comment by git created at 2019-03-21 18:31:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @JhaPrajjwal created at 2019-03-21 18:34:11

Yes I have checked my changes for many graphs including digraphs. Please check the changes.


---

Comment by dcoudert created at 2019-03-22 14:04:36

General remarks: documentation and comments must be formatted in 80 columns mode. Some text editors can be configured to ease this

- I propose an improved version of the text

```diff
-        - ``edges`` -- boolean (default ``False``); if ``True``,
-          returns edges ``(start, end)`` in the breadth_first_search tree instead of vertices, where
-          the direction of edge is from ``start`` node to ``end`` node.
-          If ``False`` only the vertices are reported.
-          Note: ``edges`` and  ``report_distance`` cannot be ``True`` simultaneously.
+        - ``edges`` -- boolean (default ``False``); whether to return the edges
+          of the BFS tree in the order of visit or the vertices (default).
+          Edges are directed in root to leaf orientation of the tree.
+
+          Note that parameters ``edges`` and  ``report_distance`` cannot be ``True`` 
+          simultaneously.
}}} 
{{{#!diff
-        You can get edges in the breadth_first_search tree instead of the vertices using the
-        ``edges`` parameter::
+        You can get edges of the BFS tree instead of the vertices using the
+        ``edges`` parameter::
}}}

- error message don't start with a capital letter, and don't end with a `.`, unless the message has several sentences.
{{{#!diff
-        if (report_distance and edges):
-            raise Exception("The parameters edges and report_distance cannot be True simultaneously.")
+        if report_distance and edges:
+            raise Exception("parameters edges and report_distance cannot be True simultaneously")
}}}


---

Comment by git created at 2019-03-22 18:30:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2019-03-25 10:56:15

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)


---

Comment by dcoudert created at 2019-03-28 17:18:20

There are remaining comments which are not formatted in 80 columns mode, for instance 

```
+          Note that parameters ``edges`` and  ``report_distance`` cannot be ``True`` 
```

Please check.


---

Comment by git created at 2019-03-28 22:06:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-04-20 09:40:24

I forgot to review the last version.

- We usually use `ValueError` and not `Exception` and I think it is more appropriate here
- in the `TESTS::` block, can you add a test showing that the error is raised in such case
- at the end of the method, you added 2 extra empty lines before `def depth_first_search`. There is no need for that.


---

Comment by git created at 2019-04-21 09:55:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-04-21 15:45:13

Hello,

for doctests raising errors, the correct way to write it is:

```diff
-            sage: G = Graph({1:[2,3],2:[4,5],3:[6,7]})
-            sage: list(G.breadth_first_search(1, report_distance=True, edges=True))
-            ValueError: parameters edges and report_distance cannot be True simultaneously
+            sage: G = Graph([(0, 1)])
+            sage: list(G.breadth_first_search(1, report_distance=True, edges=True))
+            Traceback (most recent call last):
+            ...
+            ValueError: parameters edges and report_distance cannot be True simultaneously
```

Have you checked that your code passes doctests before pushing the last commit ? For instance, you can do 
`sage -btp --long src/sage/graphs/generic_graph.py` to tests `generic_graph.py` (including doctests marked as long), or `sage -btp --long src/sage/graphs/` to test the full graph module.


---

Comment by git created at 2019-04-22 17:02:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @JhaPrajjwal created at 2019-04-22 17:04:26

Hello,

```
./sage -t src/sage/graphs/generic_graph.py
```


I used this command and received 4 failed doctests but none of them were related to bfs.
----
New commits:


---

Comment by dcoudert created at 2019-04-22 20:37:35

Replying to [comment:32 gh-JhaPrajjwal]:
> 
> I used this command and received 4 failed doctests but none of them were related to bfs.

Which one ? if you are working with Python2, you should not have any failing doctests except for those related to what is modified in this ticket.


---

Comment by @JhaPrajjwal created at 2019-04-22 21:27:36

Replying to [comment:33 dcoudert]:
> 
> Which one ? if you are working with Python2, you should not have any failing doctests except for those related to what is modified in this ticket.

I just checked again, it was actually a single error which is related to 

```
OperationalError: unable to open database file
```

I have not downloaded any database (if it needs to be downloaded explicitly).
\\
Also, no doctests failed related to the modified ticket.


---

Comment by dcoudert created at 2019-04-23 06:38:02

LGTM.

Please add your full name in the "Authors" field.


---

Comment by dcoudert created at 2019-04-23 06:38:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-04-27 17:43:51

Resolution: fixed
