# Issue 15926: Fix converion from AA to RealField()

archive/issues_015926.json:
```json
{
    "body": "Assignee: tmonteil\n\nCC:  @videlec\n\nKeywords: mpfr, RIF\n\nAs discussed in #16120, the conversion from `AA` to `RR` is not accurate:\n\n\n```\nsage: UCF.<E> = UniversalCyclotomicField()\nsage: e = AA(3/2*E(7) + E(7)^3 + E(7)^4 + 3/2*E(7)^6)\nsage: RR(e).exact_rational() - e\n1.328?e-17\nsage: RR(e).nextbelow().exact_rational() - e\n-6.0?e-19\n```\n\n\nThe aim of this ticket is to fix this.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16163\n\n",
    "created_at": "2014-04-14T21:11:03Z",
    "labels": [
        "numerical",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Fix converion from AA to RealField()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15926",
    "user": "tmonteil"
}
```
Assignee: tmonteil

CC:  @videlec

Keywords: mpfr, RIF

As discussed in #16120, the conversion from `AA` to `RR` is not accurate:


```
sage: UCF.<E> = UniversalCyclotomicField()
sage: e = AA(3/2*E(7) + E(7)^3 + E(7)^4 + 3/2*E(7)^6)
sage: RR(e).exact_rational() - e
1.328?e-17
sage: RR(e).nextbelow().exact_rational() - e
-6.0?e-19
```


The aim of this ticket is to fix this.


Issue created by migration from https://trac.sagemath.org/ticket/16163





---

archive/issue_comments_206829.json:
```json
{
    "body": "Why should it be accurate? The documentation of the method `real_number` is\n\n```\nGiven a ``RealField``, compute a good approximation to self in\nthat field. The approximation will be off by at most two\nulp's, except for numbers which are very close to 0, which\nwill have an absolute error at most\n``2**(-(field.prec()-1))``. Also, the rounding mode of the\nfield is respected.\n```\n",
    "created_at": "2015-04-11T23:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15926#issuecomment-206829",
    "user": "@videlec"
}
```

Why should it be accurate? The documentation of the method `real_number` is

```
Given a ``RealField``, compute a good approximation to self in
that field. The approximation will be off by at most two
ulp's, except for numbers which are very close to 0, which
will have an absolute error at most
``2**(-(field.prec()-1))``. Also, the rounding mode of the
field is respected.
```

