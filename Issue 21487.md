# Issue 21487: sage-progress-meter (for builds silenced with `make V=0`)

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2016-10-18 21:43:16

CC:  vbraun jdemeyer jhpalmieri embray

#21539 added support for `make V=0` to silence the build.
This helps, for example, with Travis CI builds, which have a limit on the allowed output.

However, with some long-running spkg builds (such as gcc) it could be nice to have some indication of progress (for example, with a Travis CI build, to avoid the 10-minute-no-output kill).

This could be done by calling something like pv (the Pipe Viewer) in `sage-logger`. We can implement what we need in a few lines of basic Python, no need to add a pv dependency (note, for example, the Ubuntu pv package is not whitelisted for Travis CI container-based builds).

The opportunities for bikeshedding are endless on this one. I have a first implementation that just reads lines from stdin and discards them and checks the elapsed time; prints a 'still here' message to stderr every 5 minutes. (Good enough for a Travis CI build.) But could add: 
 - an optional prefix such as `[gcc-4.3.4]`
 - progress indication, measured by output number of lines divided by expected number of lines
 - watching for regex that indicate progress milestones (e.g., `Comparing stages 2 and 3`)




---

Comment by embray created at 2016-11-07 13:12:43

This seems to be combining several things....  Since when are we trying to build Sage on Travis?  
----
New commits:


---

Comment by mkoeppe created at 2016-11-10 06:42:38

Yes, it's combining it with some experimental Travis build scripts, because this was my main use case for the progress meter. The ticket is not ready for review.
