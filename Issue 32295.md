# Issue 32295: remove gcc and gfortran spkgs

archive/issues_032295.json:
```json
{
    "body": "CC:  mkoeppe vbraun mjo jhpalmieri\n\nThis is a followup to #32060. Building gcc from source is very hard, and unnecessary for any platform Sage supports now. \n\nSame applies to gfortran, with macOS being an exception - there is no (g)fortran coming from the system.\n\nSo we need such an easy to install replacement (as opposed to ones provided by Conda, Homebrew, MacPorts, etc. which come as a part of a complete distro).\n\nThere are standalone distributions of gfortran for macOS, by the gfortran maintainer of the Homebrew package. To me this offers a way to entirety remove gcc and gfortran spkgs from Sage.\n\n\u200bhttps://github.com/fxcoudert/gfortran-for-macOS\n\nother Fortran possibilities are various closed source offers, e.g. from Intel and NAG,\nas well as open-source flang, etc.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32532\n\n",
    "created_at": "2021-09-18T14:12:42Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "remove gcc and gfortran spkgs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32295",
    "user": "dimpase"
}
```
CC:  mkoeppe vbraun mjo jhpalmieri

This is a followup to #32060. Building gcc from source is very hard, and unnecessary for any platform Sage supports now. 

Same applies to gfortran, with macOS being an exception - there is no (g)fortran coming from the system.

So we need such an easy to install replacement (as opposed to ones provided by Conda, Homebrew, MacPorts, etc. which come as a part of a complete distro).

There are standalone distributions of gfortran for macOS, by the gfortran maintainer of the Homebrew package. To me this offers a way to entirety remove gcc and gfortran spkgs from Sage.

​https://github.com/fxcoudert/gfortran-for-macOS

other Fortran possibilities are various closed source offers, e.g. from Intel and NAG,
as well as open-source flang, etc.

Issue created by migration from https://trac.sagemath.org/ticket/32532





---

archive/issue_comments_461066.json:
```json
{
    "body": "Dima's original ticket description:\n\nThis is a followup to #32060. Building gcc from source is very hard, and unnecessary for any platform Sage supports now. \n\nSame applies to gfortran, with macOS being an exception - there is no (g)fortran coming from the system.\n\nSo we need such an easy to install replacement, e.g. one provided by Conda, Homebrew, MacPorts, etc.\n\nShould the need arise for something more isolated, (hopefully not), there are experimental standalone distributions of gfortran for macOS, by the gfortran maintainer of the Homebrew package. This offers a way to entirety remove gcc and gfortran spkgs from Sage. \n\n\u200bhttps://github.com/fxcoudert/gfortran-for-macOS - specifically, \nhttps://github.com/fxcoudert/gfortran-for-macOS/releases/tag/11.2-bigsur-intel\nprovides a signed and notarized installed of gcc 11.1 to `/usr/local` (I tested it, it works)\n\nOther Fortran possibilities are various closed source offers, e.g. from Intel and NAG,\nas well as open-source flang, etc.",
    "created_at": "2021-09-18T14:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461066",
    "user": "dimpase"
}
```

Dima's original ticket description:

This is a followup to #32060. Building gcc from source is very hard, and unnecessary for any platform Sage supports now. 

Same applies to gfortran, with macOS being an exception - there is no (g)fortran coming from the system.

So we need such an easy to install replacement, e.g. one provided by Conda, Homebrew, MacPorts, etc.

Should the need arise for something more isolated, (hopefully not), there are experimental standalone distributions of gfortran for macOS, by the gfortran maintainer of the Homebrew package. This offers a way to entirety remove gcc and gfortran spkgs from Sage. 

​https://github.com/fxcoudert/gfortran-for-macOS - specifically, 
https://github.com/fxcoudert/gfortran-for-macOS/releases/tag/11.2-bigsur-intel
provides a signed and notarized installed of gcc 11.1 to `/usr/local` (I tested it, it works)

Other Fortran possibilities are various closed source offers, e.g. from Intel and NAG,
as well as open-source flang, etc.



---

archive/issue_comments_461067.json:
```json
{
    "body": "There are no build problems with gfortran - #32060#comment:36",
    "created_at": "2021-09-18T16:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461067",
    "user": "mkoeppe"
}
```

There are no build problems with gfortran - #32060#comment:36



---

archive/issue_comments_461068.json:
```json
{
    "body": "yet, building gfortran is useless waste of resources - it takes a lot of time, etc.",
    "created_at": "2021-09-18T22:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461068",
    "user": "dimpase"
}
```

yet, building gfortran is useless waste of resources - it takes a lot of time, etc.



---

archive/issue_comments_461069.json:
```json
{
    "body": "Removing it puts a fresh obstacle in the way of pip-installability -- no, thanks.",
    "created_at": "2021-09-18T23:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461069",
    "user": "mkoeppe"
}
```

Removing it puts a fresh obstacle in the way of pip-installability -- no, thanks.



---

archive/issue_comments_461070.json:
```json
{
    "body": "Since removing gfortran is controversial, please drop the idea or discuss on sage-devel. It should not be settled here.",
    "created_at": "2021-09-19T00:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461070",
    "user": "jhpalmieri"
}
```

Since removing gfortran is controversial, please drop the idea or discuss on sage-devel. It should not be settled here.



---

archive/issue_comments_461071.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> Removing it puts a fresh obstacle in the way of pip-installability -- no, thanks.\n> \nhow come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?\n\nBesides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.",
    "created_at": "2021-09-19T04:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461071",
    "user": "dimpase"
}
```

Replying to [comment:6 mkoeppe]:
> Removing it puts a fresh obstacle in the way of pip-installability -- no, thanks.
> 
how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?

Besides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.



---

archive/issue_comments_461072.json:
```json
{
    "body": "still needs adding some Fortran to CI for the minimal macOS configuration.\n----\nLast 10 new commits:",
    "created_at": "2021-09-19T16:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461072",
    "user": "dimpase"
}
```

still needs adding some Fortran to CI for the minimal macOS configuration.
----
Last 10 new commits:



---

archive/issue_comments_461073.json:
```json
{
    "body": "also, CI tests for obsolete gcc-4 based distros are gone, about time.",
    "created_at": "2021-09-19T16:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461073",
    "user": "dimpase"
}
```

also, CI tests for obsolete gcc-4 based distros are gone, about time.



---

archive/issue_comments_461074.json:
```json
{
    "body": "Replying to [comment:8 dimpase]:\n> how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?\n\nPython dev environments have a gcc. If they don't, we can't help them anyway.\n\nPython dev environments don't have gfortran. gfortran is not pip-installable. The few Python packages that use gfortran have high-quality deployments of wheels to PyPI, which are widely used. \n\nSage does not (yet?) have a working strategy that would enable us to use wheels from PyPI. The first step to pip-installability in #29039 builds everything from source.\n\n> Besides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.\n\nCome again? No, we don't do that on any platform.",
    "created_at": "2021-09-19T16:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461074",
    "user": "mkoeppe"
}
```

Replying to [comment:8 dimpase]:
> how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?

Python dev environments have a gcc. If they don't, we can't help them anyway.

Python dev environments don't have gfortran. gfortran is not pip-installable. The few Python packages that use gfortran have high-quality deployments of wheels to PyPI, which are widely used. 

Sage does not (yet?) have a working strategy that would enable us to use wheels from PyPI. The first step to pip-installability in #29039 builds everything from source.

> Besides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.

Come again? No, we don't do that on any platform.



---

archive/issue_comments_461075.json:
```json
{
    "body": "Replying to [comment:11 mkoeppe]:\n> Replying to [comment:8 dimpase]:\n> > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?\n> \n> Python dev environments have a gcc. If they don't, we can't help them anyway.\n> \n> Python dev environments don't have gfortran. gfortran is not pip-installable. \n\ngcc is not pip-installable, either. The only scenario where developers have no Fortran, but \"gcc\" (for some value of \"gcc\", e.g. Apple clang) is on macOS, as far as I know.\nOn macOS they'd have to help themselves by installing (g, or some other)fortran in some way.\n\nNeedless to say, we should test that this is feasible without using !Homebrew/Conda/macports,\nsay with the gfortran installer linked in the ticket description.\n\n\n> The few Python packages that use gfortran have high-quality deployments of wheels to PyPI, which are widely used. \n> \n> Sage does not (yet?) have a working strategy that would enable us to use wheels from PyPI. The first step to pip-installability in #29039 builds everything from source.\n\nOK, and this setting will need a Fortran compiler in addition to a C/C++ compiler.\nWhy is it an extra obstacle? It's an improvement, as it makes building a lot quicker.\n\n> \n> > Besides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.\n> \n> Come again? No, we don't do that on any platform.\non gcc-4-based platforms we build gcc+gfortran, no?\n(well, I am not worried about this obsolete case)",
    "created_at": "2021-09-19T17:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461075",
    "user": "dimpase"
}
```

Replying to [comment:11 mkoeppe]:
> Replying to [comment:8 dimpase]:
> > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?
> 
> Python dev environments have a gcc. If they don't, we can't help them anyway.
> 
> Python dev environments don't have gfortran. gfortran is not pip-installable. 

gcc is not pip-installable, either. The only scenario where developers have no Fortran, but "gcc" (for some value of "gcc", e.g. Apple clang) is on macOS, as far as I know.
On macOS they'd have to help themselves by installing (g, or some other)fortran in some way.

Needless to say, we should test that this is feasible without using !Homebrew/Conda/macports,
say with the gfortran installer linked in the ticket description.


> The few Python packages that use gfortran have high-quality deployments of wheels to PyPI, which are widely used. 
> 
> Sage does not (yet?) have a working strategy that would enable us to use wheels from PyPI. The first step to pip-installability in #29039 builds everything from source.

OK, and this setting will need a Fortran compiler in addition to a C/C++ compiler.
Why is it an extra obstacle? It's an improvement, as it makes building a lot quicker.

> 
> > Besides, if you need to build gcc in order to build gfortran, the latter cannot be counted as unproblematic.
> 
> Come again? No, we don't do that on any platform.
on gcc-4-based platforms we build gcc+gfortran, no?
(well, I am not worried about this obsolete case)



---

archive/issue_comments_461076.json:
```json
{
    "body": "Replying to [comment:12 dimpase]:\n> Replying to [comment:11 mkoeppe]:\n> > Replying to [comment:8 dimpase]:\n> > > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?\n> > \n> > Python dev environments have a gcc. If they don't, we can't help them anyway.\n> > \n> > Python dev environments don't have gfortran. gfortran is not pip-installable. \n> \n> gcc is not pip-installable, either. \n\nPlease... I just explained it. \n\n\"Python dev environments have a gcc\". Why? Because lots of Python packages need a working C/C++ compiler.\n\nI explained why the gfortran situation is different.",
    "created_at": "2021-09-19T17:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461076",
    "user": "mkoeppe"
}
```

Replying to [comment:12 dimpase]:
> Replying to [comment:11 mkoeppe]:
> > Replying to [comment:8 dimpase]:
> > > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?
> > 
> > Python dev environments have a gcc. If they don't, we can't help them anyway.
> > 
> > Python dev environments don't have gfortran. gfortran is not pip-installable. 
> 
> gcc is not pip-installable, either. 

Please... I just explained it. 

"Python dev environments have a gcc". Why? Because lots of Python packages need a working C/C++ compiler.

I explained why the gfortran situation is different.



---

archive/issue_comments_461077.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> Replying to [comment:12 dimpase]:\n> > Replying to [comment:11 mkoeppe]:\n> > > Replying to [comment:8 dimpase]:\n> > > > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?\n> > > \n> > > Python dev environments have a gcc. If they don't, we can't help them anyway.\n> > > \n> > > Python dev environments don't have gfortran. gfortran is not pip-installable. \n> > \n> > gcc is not pip-installable, either. \n> \n> Please... I just explained it. \n> \n> \"Python dev environments have a gcc\". Why? Because lots of Python packages need a working C/C++ compiler.\n> \n> I explained why the gfortran situation is different.\n\nIt's not different, as Fortran compilers are easy to come by these days.\n\nThe philosophy of this ticket is that we should cut our losses we had while trying to vendor everything imaginable, spending human resources on thankless tasks such as vendoring gcc/gfortran,\nsomething that 99.9% of Sage users don't care about.",
    "created_at": "2021-09-19T17:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461077",
    "user": "dimpase"
}
```

Replying to [comment:13 mkoeppe]:
> Replying to [comment:12 dimpase]:
> > Replying to [comment:11 mkoeppe]:
> > > Replying to [comment:8 dimpase]:
> > > > how come removing gcc spkg does not create such an obstacle, whereas it does for gfortran?
> > > 
> > > Python dev environments have a gcc. If they don't, we can't help them anyway.
> > > 
> > > Python dev environments don't have gfortran. gfortran is not pip-installable. 
> > 
> > gcc is not pip-installable, either. 
> 
> Please... I just explained it. 
> 
> "Python dev environments have a gcc". Why? Because lots of Python packages need a working C/C++ compiler.
> 
> I explained why the gfortran situation is different.

It's not different, as Fortran compilers are easy to come by these days.

The philosophy of this ticket is that we should cut our losses we had while trying to vendor everything imaginable, spending human resources on thankless tasks such as vendoring gcc/gfortran,
something that 99.9% of Sage users don't care about.



---

archive/issue_comments_461078.json:
```json
{
    "body": "-1 on creating new real problems in order to fix imaginary problems.",
    "created_at": "2021-09-19T17:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461078",
    "user": "mkoeppe"
}
```

-1 on creating new real problems in order to fix imaginary problems.



---

archive/issue_comments_461079.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> -1 on creating new real problems in order to fix imaginary problems.\n\nNo Python project I know vendors compilers. Lack  of developer time is very real problem, and you keep perpetuating this problem\nby refusing to shed the ballast.",
    "created_at": "2021-09-19T17:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461079",
    "user": "dimpase"
}
```

Replying to [comment:15 mkoeppe]:
> -1 on creating new real problems in order to fix imaginary problems.

No Python project I know vendors compilers. Lack  of developer time is very real problem, and you keep perpetuating this problem
by refusing to shed the ballast.



---

archive/issue_comments_461080.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-23T09:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461080",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461081.json:
```json
{
    "body": "I did a run on [GitHub](GitHub) Actions: https://github.com/dimpase/sagetrac-mirror/actions/runs/1258945033\n(our macOS actions are broken, so no surprise it's not working there)",
    "created_at": "2021-09-23T09:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461081",
    "user": "dimpase"
}
```

I did a run on [GitHub](GitHub) Actions: https://github.com/dimpase/sagetrac-mirror/actions/runs/1258945033
(our macOS actions are broken, so no surprise it's not working there)



---

archive/issue_comments_461082.json:
```json
{
    "body": "Let's please drop this.",
    "created_at": "2021-09-23T13:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461082",
    "user": "mkoeppe"
}
```

Let's please drop this.



---

archive/issue_comments_461083.json:
```json
{
    "body": "you have not explained why it should be dropped, and what kind of difficulty it'd present if it were merged.",
    "created_at": "2021-09-23T13:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461083",
    "user": "dimpase"
}
```

you have not explained why it should be dropped, and what kind of difficulty it'd present if it were merged.



---

archive/issue_comments_461084.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-09-23T16:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461084",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_461085.json:
```json
{
    "body": "Take the discussion to sage-devel.",
    "created_at": "2021-09-23T16:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461085",
    "user": "jhpalmieri"
}
```

Take the discussion to sage-devel.



---

archive/issue_comments_461086.json:
```json
{
    "body": "given that M1 cannot use Sage's gcc/gfortran, perhaps it's high time to move here?",
    "created_at": "2022-09-19T20:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461086",
    "user": "@dimpase"
}
```

given that M1 cannot use Sage's gcc/gfortran, perhaps it's high time to move here?



---

archive/issue_comments_461087.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-09-19T21:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461087",
    "user": "mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_461088.json:
```json
{
    "body": "Time for \"wontfix\"",
    "created_at": "2022-09-19T21:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461088",
    "user": "mkoeppe"
}
```

Time for "wontfix"



---

archive/issue_comments_461089.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2022-09-20T06:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461089",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_461090.json:
```json
{
    "body": "Huh? If we support platforms on which a package doesn't work, it can't be standard,or even optional.\n\neither go forward with this ticket and remove it,or make it experimental.",
    "created_at": "2022-09-20T06:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461090",
    "user": "dimpase"
}
```

Huh? If we support platforms on which a package doesn't work, it can't be standard,or even optional.

either go forward with this ticket and remove it,or make it experimental.



---

archive/issue_comments_461091.json:
```json
{
    "body": "#33816 allows the `gfortran` package to build on M1/M2.",
    "created_at": "2022-09-21T17:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461091",
    "user": "jhpalmieri"
}
```

#33816 allows the `gfortran` package to build on M1/M2.



---

archive/issue_comments_461092.json:
```json
{
    "body": "As far as OS X is concerned, we could drop the `gcc` package. I don't know if that would create issues on other platforms, but we could ask on `sage-devel`.",
    "created_at": "2022-09-21T17:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461092",
    "user": "jhpalmieri"
}
```

As far as OS X is concerned, we could drop the `gcc` package. I don't know if that would create issues on other platforms, but we could ask on `sage-devel`.



---

archive/issue_comments_461093.json:
```json
{
    "body": "I think it makes sense to downgrade the `gcc` package to \"experimental\", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.",
    "created_at": "2022-09-21T18:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461093",
    "user": "mkoeppe"
}
```

I think it makes sense to downgrade the `gcc` package to "experimental", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.



---

archive/issue_comments_461094.json:
```json
{
    "body": "For what it's worth, it took about 10 minutes for `gfortran` to build on two different machines, one m2 (9 minutes), one Intel (11 minutes). So it's long but faster than `sagelib` and not much slower than `scipy`. It's much faster than building Sage's `gcc` used to be, if I remember correctly.",
    "created_at": "2022-09-21T18:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461094",
    "user": "jhpalmieri"
}
```

For what it's worth, it took about 10 minutes for `gfortran` to build on two different machines, one m2 (9 minutes), one Intel (11 minutes). So it's long but faster than `sagelib` and not much slower than `scipy`. It's much faster than building Sage's `gcc` used to be, if I remember correctly.



---

archive/issue_comments_461095.json:
```json
{
    "body": "Replying to [comment:30 Matthias K\u00f6ppe]:\n> I think it makes sense to downgrade the `gcc` package to \"experimental\", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.\n\ndowngrading to experimental means inevitable bitrot - happening already, right? If noone uses it in practice, I see no point in keeping it, however quick it can be built.",
    "created_at": "2022-09-23T13:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461095",
    "user": "dimpase"
}
```

Replying to [comment:30 Matthias Köppe]:
> I think it makes sense to downgrade the `gcc` package to "experimental", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.

downgrading to experimental means inevitable bitrot - happening already, right? If noone uses it in practice, I see no point in keeping it, however quick it can be built.



---

archive/issue_comments_461096.json:
```json
{
    "body": "Replying to [comment:32 Dima Pasechnik]:\n> Replying to [comment:30 Matthias K\u00f6ppe]:\n> > I think it makes sense to downgrade the `gcc` package to \"experimental\", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.\n> \n> downgrading to experimental means inevitable bitrot - happening already, right? If noone uses it in practice, I see no point in keeping it, however quick it can be built.\n\nOur experimental packages are a mess in general, so our `gcc` package would fit right in, the more bitrot the better. I also don't object to removing it altogether \u2014\u00a0I don't really care one way or the other. But I think we should keep `gfortran` since it builds on a range of platforms and serves a purpose, at least on OS X.",
    "created_at": "2022-09-23T18:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461096",
    "user": "jhpalmieri"
}
```

Replying to [comment:32 Dima Pasechnik]:
> Replying to [comment:30 Matthias Köppe]:
> > I think it makes sense to downgrade the `gcc` package to "experimental", which would reflect the fact that we no longer test `gcc_spkg` configurations on our CI.
> 
> downgrading to experimental means inevitable bitrot - happening already, right? If noone uses it in practice, I see no point in keeping it, however quick it can be built.

Our experimental packages are a mess in general, so our `gcc` package would fit right in, the more bitrot the better. I also don't object to removing it altogether — I don't really care one way or the other. But I think we should keep `gfortran` since it builds on a range of platforms and serves a purpose, at least on OS X.



---

archive/issue_comments_461097.json:
```json
{
    "body": "removing gcc package, while retaining gfortran package, would be a step in right direction. Would we like to proceed with this? \n\nIt'd certainly simplify the convoluted build logic of potentially having two C compilers around, and lead to less reports of build failures.",
    "created_at": "2022-09-24T10:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461097",
    "user": "dimpase"
}
```

removing gcc package, while retaining gfortran package, would be a step in right direction. Would we like to proceed with this? 

It'd certainly simplify the convoluted build logic of potentially having two C compilers around, and lead to less reports of build failures.



---

archive/issue_comments_461098.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-10-09T08:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461098",
    "user": "dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_461099.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-10-09T08:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461099",
    "user": "dimpase"
}
```

New commits:



---

archive/issue_comments_461100.json:
```json
{
    "body": "Replying to [comment:30 Matthias K\u00f6ppe]:\n> I think it makes sense to downgrade the `gcc` package to \"experimental\"\n\nI withdraw this suggestion. Since gcc is a prerequisite of standard packages, it cannot be anything but standard. Likewise for gfortran.",
    "created_at": "2022-10-09T16:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461100",
    "user": "mkoeppe"
}
```

Replying to [comment:30 Matthias Köppe]:
> I think it makes sense to downgrade the `gcc` package to "experimental"

I withdraw this suggestion. Since gcc is a prerequisite of standard packages, it cannot be anything but standard. Likewise for gfortran.



---

archive/issue_comments_461101.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-10-09T16:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461101",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_461102.json:
```json
{
    "body": "The question is whether it should be viewed as a prerequisite, something that Sage should not at all be responsible for installing. `gfortran` is not directly available on OS X, so I can see why we would keep that, but `gcc` is not so clear. I am not up to date on linux distributions; are there distributions that we support that do not provide a sufficiently current `gcc`?",
    "created_at": "2022-10-09T16:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461102",
    "user": "jhpalmieri"
}
```

The question is whether it should be viewed as a prerequisite, something that Sage should not at all be responsible for installing. `gfortran` is not directly available on OS X, so I can see why we would keep that, but `gcc` is not so clear. I am not up to date on linux distributions; are there distributions that we support that do not provide a sufficiently current `gcc`?



---

archive/issue_comments_461103.json:
```json
{
    "body": "Also, I think our `gcc` package currently fails to build to M1/M2. Is the work involved to fix it worth the effort?",
    "created_at": "2022-10-09T16:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461103",
    "user": "jhpalmieri"
}
```

Also, I think our `gcc` package currently fails to build to M1/M2. Is the work involved to fix it worth the effort?



---

archive/issue_comments_461104.json:
```json
{
    "body": "Replying to [comment:42 John Palmieri]:\n> I am not up to date on linux distributions; are there distributions that we support that do not provide a sufficiently current `gcc`? \n\nI think by definition we only support distributions that provide a suitable gcc.\n\nBut keeping `gcc` costs us nothing, given that its build script is shared with `gfortran` and we promise nothing about it other than providing it as a last resort for users as described https://trac.sagemath.org/wiki/ReleaseTours/sage-9.8#SupportforGCC8droppedC17featuresnowavailable.",
    "created_at": "2022-10-09T17:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461104",
    "user": "mkoeppe"
}
```

Replying to [comment:42 John Palmieri]:
> I am not up to date on linux distributions; are there distributions that we support that do not provide a sufficiently current `gcc`? 

I think by definition we only support distributions that provide a suitable gcc.

But keeping `gcc` costs us nothing, given that its build script is shared with `gfortran` and we promise nothing about it other than providing it as a last resort for users as described https://trac.sagemath.org/wiki/ReleaseTours/sage-9.8#SupportforGCC8droppedC17featuresnowavailable.



---

archive/issue_comments_461105.json:
```json
{
    "body": "Replying to [comment:43 John Palmieri]:\n> I think our `gcc` package currently fails to build to M1/M2. Is the work involved to fix it worth the effort?\n\nI don't know a use case for `gcc` on macOS, so I don't plan to work on it.",
    "created_at": "2022-10-09T17:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461105",
    "user": "mkoeppe"
}
```

Replying to [comment:43 John Palmieri]:
> I think our `gcc` package currently fails to build to M1/M2. Is the work involved to fix it worth the effort?

I don't know a use case for `gcc` on macOS, so I don't plan to work on it.



---

archive/issue_comments_461106.json:
```json
{
    "body": "As we don't have gcc working on macOS, it cannot be a standard package. Therefore the only logical step is to remove it (convert to a script package, maybe, or not even this).",
    "created_at": "2022-10-09T21:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461106",
    "user": "dimpase"
}
```

As we don't have gcc working on macOS, it cannot be a standard package. Therefore the only logical step is to remove it (convert to a script package, maybe, or not even this).



---

archive/issue_comments_461107.json:
```json
{
    "body": "Replying to [comment:40 Matthias K\u00f6ppe]:\n> Replying to [comment:30 Matthias K\u00f6ppe]:\n> > I think it makes sense to downgrade the `gcc` package to \"experimental\"\n> \n> I withdraw this suggestion. Since gcc is a prerequisite of standard packages, it cannot be anything but standard. \n\nI went to check, and there is no `gcc` in `build/pkgs/*/dependencies`. Thus I don't understand this remark.\n(It does pop up in the (dreadful) `*toochain*` targets in `build/make/Makefile.in`, but this is it) \n\n\n> Likewise for gfortran.\n\nOK, we can keep `gfortran` standard for the time being.",
    "created_at": "2022-10-10T11:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461107",
    "user": "dimpase"
}
```

Replying to [comment:40 Matthias Köppe]:
> Replying to [comment:30 Matthias Köppe]:
> > I think it makes sense to downgrade the `gcc` package to "experimental"
> 
> I withdraw this suggestion. Since gcc is a prerequisite of standard packages, it cannot be anything but standard. 

I went to check, and there is no `gcc` in `build/pkgs/*/dependencies`. Thus I don't understand this remark.
(It does pop up in the (dreadful) `*toochain*` targets in `build/make/Makefile.in`, but this is it) 


> Likewise for gfortran.

OK, we can keep `gfortran` standard for the time being.



---

archive/issue_comments_461108.json:
```json
{
    "body": "Replying to [comment:47 Dima Pasechnik]:\n> Since gcc is a prerequisite of standard packages, it cannot be anything but standard. \n> \n> I went to check, and there is no `gcc` in `build/pkgs/*/dependencies`. Thus I don't understand this remark.\n> (It does pop up in the (dreadful) `*toochain*` targets in `build/make/Makefile.in`, but this is it) \n\nAh, this is a common confusion. `gcc` is a standard package - in this case the word is *spelled* \"standard\" but it's pronounced \"base\". I think this complicated situation is due to the 1918 spelling reform.",
    "created_at": "2022-10-10T22:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461108",
    "user": "mkoeppe"
}
```

Replying to [comment:47 Dima Pasechnik]:
> Since gcc is a prerequisite of standard packages, it cannot be anything but standard. 
> 
> I went to check, and there is no `gcc` in `build/pkgs/*/dependencies`. Thus I don't understand this remark.
> (It does pop up in the (dreadful) `*toochain*` targets in `build/make/Makefile.in`, but this is it) 

Ah, this is a common confusion. `gcc` is a standard package - in this case the word is *spelled* "standard" but it's pronounced "base". I think this complicated situation is due to the 1918 spelling reform.



---

archive/issue_comments_461109.json:
```json
{
    "body": "The only purpose served by our `gcc` package since quite a while is to complicate the build system, and occasionally trip up people who end up trying and failing to build it.\n\nWhile you might have a sentimental attachment to it, there is no point in having it in the system.\nLet us remove it. It is useless on macOS, and on Linux there is an abundant supply of options to have a modern enough gcc one way or another.",
    "created_at": "2022-10-11T08:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461109",
    "user": "dimpase"
}
```

The only purpose served by our `gcc` package since quite a while is to complicate the build system, and occasionally trip up people who end up trying and failing to build it.

While you might have a sentimental attachment to it, there is no point in having it in the system.
Let us remove it. It is useless on macOS, and on Linux there is an abundant supply of options to have a modern enough gcc one way or another.



---

archive/issue_comments_461110.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-11-17T09:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461110",
    "user": "dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_461111.json:
```json
{
    "body": "the branch still does not do what's advertised in Summary, but I'd like to hear a go ahead first.",
    "created_at": "2022-11-17T09:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461111",
    "user": "dimpase"
}
```

the branch still does not do what's advertised in Summary, but I'd like to hear a go ahead first.



---

archive/issue_comments_461112.json:
```json
{
    "body": "-1",
    "created_at": "2022-11-17T17:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32295#issuecomment-461112",
    "user": "mkoeppe"
}
```

-1
