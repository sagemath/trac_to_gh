# Issue 11298: Re-enable at symbol in notebook username

archive/issues_011298.json:
```json
{
    "body": "Assignee: jason, mpatel, was\n\nCC:  jason\n\nWe had to disable the '`@`' symbol in the notebook because it breaks TinyMCE.\n\nSee #11343 and the links in [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059) on sage-notebook for further work.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11470\n\n",
    "created_at": "2011-06-13T23:57:26Z",
    "labels": [
        "notebook",
        "major",
        "enhancement"
    ],
    "title": "Re-enable at symbol in notebook username",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11298",
    "user": "kcrisman"
}
```
Assignee: jason, mpatel, was

CC:  jason

We had to disable the '`@`' symbol in the notebook because it breaks TinyMCE.

See #11343 and the links in [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059) on sage-notebook for further work.

Issue created by migration from https://trac.sagemath.org/ticket/11470





---

archive/issue_comments_124585.json:
```json
{
    "body": "no such problem in flask. see http://code.google.com/p/sagenb/issues/detail?id=26&can=1\nyou can test on sagenb.org",
    "created_at": "2011-06-19T00:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124585",
    "user": "rkirov"
}
```

no such problem in flask. see http://code.google.com/p/sagenb/issues/detail?id=26&can=1
you can test on sagenb.org



---

archive/issue_comments_124586.json:
```json
{
    "body": "Not true, at least not at demo2.sagenb.org or sagenb.org (I tried both)\n\n```\nhttp://demo2.sagenb.org/home/b%40b/0/\n```\n\nis the name but it still causes problems.   You can try this with password 'abc123'.  Note that the user name at the top (next to Toggle) is still `b`@`b`, this could be relevant?  \n\nSo *please* either fix it or merge #11343 into the flask \"main\" body.  Many, many beginning users like to use their email addresses for usernames.",
    "created_at": "2011-06-23T03:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124586",
    "user": "kcrisman"
}
```

Not true, at least not at demo2.sagenb.org or sagenb.org (I tried both)

```
http://demo2.sagenb.org/home/b%40b/0/
```

is the name but it still causes problems.   You can try this with password 'abc123'.  Note that the user name at the top (next to Toggle) is still `b`@`b`, this could be relevant?  

So *please* either fix it or merge #11343 into the flask "main" body.  Many, many beginning users like to use their email addresses for usernames.



---

archive/issue_comments_124587.json:
```json
{
    "body": "mac os - chrome 12",
    "created_at": "2011-06-23T04:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124587",
    "user": "rkirov"
}
```

mac os - chrome 12



---

archive/issue_comments_124588.json:
```json
{
    "body": "Attachment [Screen shot 2011-06-22 at 9.16.42 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-22 at 9.16.42 PM.png) by rkirov created at 2011-06-23 04:24:01\n\nmac os - firefox 3.6",
    "created_at": "2011-06-23T04:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124588",
    "user": "rkirov"
}
```

Attachment [Screen shot 2011-06-22 at 9.16.42 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-22 at 9.16.42 PM.png) by rkirov created at 2011-06-23 04:24:01

mac os - firefox 3.6



---

archive/issue_comments_124589.json:
```json
{
    "body": "Attachment [Screen shot 2011-06-22 at 9.20.32 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-22 at 9.20.32 PM.png) by rkirov created at 2011-06-23 04:29:15\n\nhmmm, can't reproduce the bug in either chrome or firefox on mac os *screenshots attached*. Can we get more people to test it?",
    "created_at": "2011-06-23T04:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124589",
    "user": "rkirov"
}
```

Attachment [Screen shot 2011-06-22 at 9.20.32 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-22 at 9.20.32 PM.png) by rkirov created at 2011-06-23 04:29:15

hmmm, can't reproduce the bug in either chrome or firefox on mac os *screenshots attached*. Can we get more people to test it?



---

archive/issue_comments_124590.json:
```json
{
    "body": "[works for me](http://img857.imageshack.us/img857/4143/201106222208581280x800s.png) (see bottom of the screenshot for system info)",
    "created_at": "2011-06-23T05:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124590",
    "user": "kini"
}
```

[works for me](http://img857.imageshack.us/img857/4143/201106222208581280x800s.png) (see bottom of the screenshot for system info)



---

archive/issue_comments_124591.json:
```json
{
    "body": "[works for me on sagenb.org](http://img36.imageshack.us/img36/7434/201106222218521276x782s.png), in fact.",
    "created_at": "2011-06-23T05:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124591",
    "user": "kini"
}
```

[works for me on sagenb.org](http://img36.imageshack.us/img36/7434/201106222218521276x782s.png), in fact.



---

archive/issue_comments_124592.json:
```json
{
    "body": "Works [in Chromium](http://img28.imageshack.us/img28/2613/201106222231551276x782s.png) too, btw.",
    "created_at": "2011-06-23T06:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124592",
    "user": "kini"
}
```

Works [in Chromium](http://img28.imageshack.us/img28/2613/201106222231551276x782s.png) too, btw.



---

archive/issue_comments_124593.json:
```json
{
    "body": "Very interesting.  I use Safari.  Hang on a second...",
    "created_at": "2011-06-23T12:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124593",
    "user": "kcrisman"
}
```

Very interesting.  I use Safari.  Hang on a second...



---

archive/issue_comments_124594.json:
```json
{
    "body": "Attachment [Screen shot 2011-06-23 at 8.57.43 AM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 8.57.43 AM.png) by kcrisman created at 2011-06-23 12:59:08\n\nMac OS 10.6 with Safari 5, reopening existing text cell",
    "created_at": "2011-06-23T12:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124594",
    "user": "kcrisman"
}
```

Attachment [Screen shot 2011-06-23 at 8.57.43 AM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 8.57.43 AM.png) by kcrisman created at 2011-06-23 12:59:08

Mac OS 10.6 with Safari 5, reopening existing text cell



---

archive/issue_comments_124595.json:
```json
{
    "body": "Attachment [Screen shot 2011-06-23 at 8.58.09 AM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 8.58.09 AM.png) by kcrisman created at 2011-06-23 12:59:34\n\nMac OS 10.6 with Safari 5, opening new text cell",
    "created_at": "2011-06-23T12:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124595",
    "user": "kcrisman"
}
```

Attachment [Screen shot 2011-06-23 at 8.58.09 AM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 8.58.09 AM.png) by kcrisman created at 2011-06-23 12:59:34

Mac OS 10.6 with Safari 5, opening new text cell



---

archive/issue_comments_124596.json:
```json
{
    "body": "I can confirm that FF works fine.  Safari is in bad shape.\n\nSo what should we do regarding #11343?  I'm a little torn, as this is browser-specific, but a lot of current Sage folks use Safari since they are on Mac OS X.",
    "created_at": "2011-06-23T13:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124596",
    "user": "kcrisman"
}
```

I can confirm that FF works fine.  Safari is in bad shape.

So what should we do regarding #11343?  I'm a little torn, as this is browser-specific, but a lot of current Sage folks use Safari since they are on Mac OS X.



---

archive/issue_comments_124597.json:
```json
{
    "body": "Attachment [Screen shot 2011-06-23 at 6.17.33 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 6.17.33 PM.png) by rkirov created at 2011-06-24 01:20:44\n\nmac os - safari - problem with error stack",
    "created_at": "2011-06-24T01:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124597",
    "user": "rkirov"
}
```

Attachment [Screen shot 2011-06-23 at 6.17.33 PM.png](tarball://root/attachments/some-uuid/ticket11470/Screen shot 2011-06-23 at 6.17.33 PM.png) by rkirov created at 2011-06-24 01:20:44

mac os - safari - problem with error stack



---

archive/issue_comments_124598.json:
```json
{
    "body": "aha, I can reproduce this on Safari 5. You can see in the error trace below that TinyMCE is making the wrong url requests with break everything /home/b`@`/... . I will try to fix it, if not will incorporate kcrisman's patch before the spkg, gets made.\n\nOf course, help is welcome.",
    "created_at": "2011-06-24T01:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124598",
    "user": "rkirov"
}
```

aha, I can reproduce this on Safari 5. You can see in the error trace below that TinyMCE is making the wrong url requests with break everything /home/b`@`/... . I will try to fix it, if not will incorporate kcrisman's patch before the spkg, gets made.

Of course, help is welcome.



---

archive/issue_comments_124599.json:
```json
{
    "body": "It's actually `/home/b`@`demo2.sagenb.org/...` (where it should be `/home/b%40b/...`), which seems to tie this to [this](http://stackoverflow.com/questions/3726573/tinymce-bug-symbol-in-link-url-makes-http-mce-host-appear) (which I think kcrisman found earlier)...",
    "created_at": "2011-06-24T02:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124599",
    "user": "kini"
}
```

It's actually `/home/b`@`demo2.sagenb.org/...` (where it should be `/home/b%40b/...`), which seems to tie this to [this](http://stackoverflow.com/questions/3726573/tinymce-bug-symbol-in-link-url-makes-http-mce-host-appear) (which I think kcrisman found earlier)...



---

archive/issue_comments_124600.json:
```json
{
    "body": "Oops, link in the OP of that is broken - the original bug report is [here](http://tinymce.moxiecode.com/develop/bugtracker_view.php?id=3064).",
    "created_at": "2011-06-24T02:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124600",
    "user": "kini"
}
```

Oops, link in the OP of that is broken - the original bug report is [here](http://tinymce.moxiecode.com/develop/bugtracker_view.php?id=3064).



---

archive/issue_comments_124601.json:
```json
{
    "body": "So is this bug invalid, or what? #11343 has positive review. Should I merge it into the flask notebook?",
    "created_at": "2011-12-26T00:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124601",
    "user": "kini"
}
```

So is this bug invalid, or what? #11343 has positive review. Should I merge it into the flask notebook?



---

archive/issue_comments_124602.json:
```json
{
    "body": "Replying to [comment:12 kini]:\n> So is this bug invalid, or what? #11343 has positive review. Should I merge it into the flask notebook?\nSee [the Google code bug I opened recently](http://code.google.com/p/sagenb/issues/detail?id=88).  It is not in the flask notebook yet.  My feeling is that something like it should be, though.",
    "created_at": "2011-12-26T15:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124602",
    "user": "kcrisman"
}
```

Replying to [comment:12 kini]:
> So is this bug invalid, or what? #11343 has positive review. Should I merge it into the flask notebook?
See [the Google code bug I opened recently](http://code.google.com/p/sagenb/issues/detail?id=88).  It is not in the flask notebook yet.  My feeling is that something like it should be, though.



---

archive/issue_comments_124603.json:
```json
{
    "body": "As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.\n\nI'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.",
    "created_at": "2011-12-26T18:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124603",
    "user": "jason"
}
```

As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.

I'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.



---

archive/issue_comments_124604.json:
```json
{
    "body": "Replying to [comment:14 jason]:\n> As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.\n> \n> I'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.\n\nWell, this ticket is for re-enabling :) But you mean merging #11343.  \n\nNaturally, if you can just fix it, that would be even better.   Is that possible?  (I mean without fixing Safari or TinyMCE?  I assume that sagenb itself is not the problem.)",
    "created_at": "2011-12-27T05:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124604",
    "user": "kcrisman"
}
```

Replying to [comment:14 jason]:
> As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.
> 
> I'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.

Well, this ticket is for re-enabling :) But you mean merging #11343.  

Naturally, if you can just fix it, that would be even better.   Is that possible?  (I mean without fixing Safari or TinyMCE?  I assume that sagenb itself is not the problem.)



---

archive/issue_comments_124605.json:
```json
{
    "body": "Replying to [comment:14 jason]:\n> As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.\n> \n> I'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.\n\nI would rather ignore these little browser specific quirks for the time being, as they come and go as browsers get updated.",
    "created_at": "2011-12-27T05:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124605",
    "user": "dimpase"
}
```

Replying to [comment:14 jason]:
> As far as I remember, I never merged anything into the flask notebook that disabled the `@` sign in usernames because it wasn't a problem there.  However, I just checked with Safari, and indeed, it appears that the URLs still contain an `@` sign and on Safari, with the current sagenb, the tinymce doesn't work.
> 
> I'd rather just fix the URL encoding problem with the `@` sign in the flask notebook, rather than merging this.

I would rather ignore these little browser specific quirks for the time being, as they come and go as browsers get updated.



---

archive/issue_comments_124606.json:
```json
{
    "body": "Is it browser-specific?  I was under the impression it wasn't.",
    "created_at": "2011-12-27T15:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124606",
    "user": "jason"
}
```

Is it browser-specific?  I was under the impression it wasn't.



---

archive/issue_comments_124607.json:
```json
{
    "body": "Ah, I see above that FF works.\n\nWell, I don't know if this is a browser-specific  bug, or if there is a real bug that FF is being lenient on.  If the latter, we should still fix our codebase, for sure.",
    "created_at": "2011-12-27T15:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124607",
    "user": "jason"
}
```

Ah, I see above that FF works.

Well, I don't know if this is a browser-specific  bug, or if there is a real bug that FF is being lenient on.  If the latter, we should still fix our codebase, for sure.



---

archive/issue_comments_124608.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2011-12-27T15:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124608",
    "user": "dimpase"
}
```

Changing priority from major to minor.



---

archive/issue_comments_124609.json:
```json
{
    "body": "Replying to [comment:18 jason]:\n> Ah, I see above that FF works.\n> \n> Well, I don't know if this is a browser-specific  bug, or if there is a real bug that FF is being lenient on.  If the latter, we should still fix our codebase, for sure.\n\n#11343 (the 3-months old part of the discussion there) is quite informative about the browser-specific reasons for this.\nAs you see, #11343 disables new registrations using `@`, while still allowing the existing ones to work.\nSo you merged #11343 into the flask version, right? Then I would like to put this ticket on the wish-list, and be done with it for the time being.",
    "created_at": "2011-12-27T15:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124609",
    "user": "dimpase"
}
```

Replying to [comment:18 jason]:
> Ah, I see above that FF works.
> 
> Well, I don't know if this is a browser-specific  bug, or if there is a real bug that FF is being lenient on.  If the latter, we should still fix our codebase, for sure.

#11343 (the 3-months old part of the discussion there) is quite informative about the browser-specific reasons for this.
As you see, #11343 disables new registrations using `@`, while still allowing the existing ones to work.
So you merged #11343 into the flask version, right? Then I would like to put this ticket on the wish-list, and be done with it for the time being.



---

archive/issue_comments_124610.json:
```json
{
    "body": "Well, Rado reverted #11343 in the flask notebook, thinking it only applied to the old notebook (due to him testing on firefox), thus the creation of this ticket to track that fact. After we determined it is broken on Safari, nobody un-reverted #11343 in the flask notebook. Hence my bump.",
    "created_at": "2011-12-27T17:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124610",
    "user": "kini"
}
```

Well, Rado reverted #11343 in the flask notebook, thinking it only applied to the old notebook (due to him testing on firefox), thus the creation of this ticket to track that fact. After we determined it is broken on Safari, nobody un-reverted #11343 in the flask notebook. Hence my bump.



---

archive/issue_comments_124611.json:
```json
{
    "body": "Isn't the solution just a matter of URL-encoding the username when making worksheet URLs?",
    "created_at": "2011-12-27T18:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124611",
    "user": "jason"
}
```

Isn't the solution just a matter of URL-encoding the username when making worksheet URLs?



---

archive/issue_comments_124612.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-27T23:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124612",
    "user": "jason"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_124613.json:
```json
{
    "body": "I think I fixed the underlying issue in this pull request: https://github.com/sagemath/sagenb/pull/11",
    "created_at": "2011-12-27T23:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124613",
    "user": "jason"
}
```

I think I fixed the underlying issue in this pull request: https://github.com/sagemath/sagenb/pull/11



---

archive/issue_comments_124614.json:
```json
{
    "body": "By the way, I verified that this problem happens in Chrome and Firefox on OSX.",
    "created_at": "2011-12-28T01:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124614",
    "user": "jason"
}
```

By the way, I verified that this problem happens in Chrome and Firefox on OSX.



---

archive/issue_comments_124615.json:
```json
{
    "body": "Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).",
    "created_at": "2011-12-28T09:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124615",
    "user": "kini"
}
```

Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).



---

archive/issue_comments_124616.json:
```json
{
    "body": "Replying to [comment:24 kini]:\n> Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).\n\nwell, I can try to see whether I can see the bug on 4.8. I didn't manage to reproduce it on when working on #11343.",
    "created_at": "2011-12-28T09:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124616",
    "user": "dimpase"
}
```

Replying to [comment:24 kini]:
> Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).

well, I can try to see whether I can see the bug on 4.8. I didn't manage to reproduce it on when working on #11343.



---

archive/issue_comments_124617.json:
```json
{
    "body": "I wonder if the unpredictability has to do with caching, rather than the OS or browser.  The bit of code is run when the tinymce file is initialized in order to determine where to fetch the tinymce files from.  If that initialization is already set somewhere, it may not cause a problem.  It may also be a difference between browsers/OS, as it asks the window for the current URL, and maybe there are differences there.",
    "created_at": "2011-12-28T14:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124617",
    "user": "jason"
}
```

I wonder if the unpredictability has to do with caching, rather than the OS or browser.  The bit of code is run when the tinymce file is initialized in order to determine where to fetch the tinymce files from.  If that initialization is already set somewhere, it may not cause a problem.  It may also be a difference between browsers/OS, as it asks the window for the current URL, and maybe there are differences there.



---

archive/issue_comments_124618.json:
```json
{
    "body": "In fact, I remember not seeing the problem once on Chrome, but then later seeing it.  That points to caching.",
    "created_at": "2011-12-28T14:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124618",
    "user": "jason"
}
```

In fact, I remember not seeing the problem once on Chrome, but then later seeing it.  That points to caching.



---

archive/issue_comments_124619.json:
```json
{
    "body": "Replying to [comment:25 dimpase]:\n> Replying to [comment:24 kini]:\n> > Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).\n> \n> well, I can try to see whether I can see the bug on 4.8. I didn't manage to reproduce it on when working on #11343.\n\nIt looks like there isn't really a \"patch\" to apply there, and in any case I can't test it locally because my Sage installs are all ones which already disallow '`@`' from #11343!  And I'm definitely not going to try to sort out installing the flask sagenb at this point.  Sorry.  \n\nBut if this is updated on sagenb or someplace like that I'd be happy to test a before and after for you.  \n\nAlso, I can definitely confirm that it wasn't just me that saw it.   A number of students this semester saw it, because they had created usernames on our server before we upgraded, and tried to use them when I was teaching them how to use LaTeX in various places, including Sage.  I feel like there was at least one sage-support request, but I know I wouldn't find it right now.\n\nThanks very much for tracking this down, Jason!",
    "created_at": "2011-12-28T15:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124619",
    "user": "kcrisman"
}
```

Replying to [comment:25 dimpase]:
> Replying to [comment:24 kini]:
> > Awesome! Strange that it turned out to be OS X and not Safari specifically. I wonder what could be happening at the OS level to cause it to work fine on Linux. Just to be sure, maybe we should wait for kcrisman to verify that this fixes the problem, since before jason's confirmation he was the only person to see this bug (afaik).
> 
> well, I can try to see whether I can see the bug on 4.8. I didn't manage to reproduce it on when working on #11343.

It looks like there isn't really a "patch" to apply there, and in any case I can't test it locally because my Sage installs are all ones which already disallow '`@`' from #11343!  And I'm definitely not going to try to sort out installing the flask sagenb at this point.  Sorry.  

But if this is updated on sagenb or someplace like that I'd be happy to test a before and after for you.  

Also, I can definitely confirm that it wasn't just me that saw it.   A number of students this semester saw it, because they had created usernames on our server before we upgraded, and tried to use them when I was teaching them how to use LaTeX in various places, including Sage.  I feel like there was at least one sage-support request, but I know I wouldn't find it right now.

Thanks very much for tracking this down, Jason!



---

archive/issue_comments_124620.json:
```json
{
    "body": "The diff is here: https://github.com/jasongrout/sagenb/commit/5b1b4c50437db1aa3d912040d29dd33c5e24d80d.diff",
    "created_at": "2011-12-28T16:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124620",
    "user": "jason"
}
```

The diff is here: https://github.com/jasongrout/sagenb/commit/5b1b4c50437db1aa3d912040d29dd33c5e24d80d.diff



---

archive/issue_comments_124621.json:
```json
{
    "body": "Yes, I was able to view the second part of the diff before, though the first part won't view on github and seems far too long on your link as well.  My point is that it's not a patch I can import, particularly not to the old sagenb.\n\nAnyway, the bigger point is that I have no way of testing it locally.",
    "created_at": "2011-12-28T17:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124621",
    "user": "kcrisman"
}
```

Yes, I was able to view the second part of the diff before, though the first part won't view on github and seems far too long on your link as well.  My point is that it's not a patch I can import, particularly not to the old sagenb.

Anyway, the bigger point is that I have no way of testing it locally.



---

archive/issue_comments_124622.json:
```json
{
    "body": "Replying to [comment:30 kcrisman]:\n> Yes, I was able to view the second part of the diff before, though the first part won't view on github and seems far too long on your link as well.  My point is that it's not a patch I can import, particularly not to the old sagenb.\n> \n> Anyway, the bigger point is that I have no way of testing it locally.\n\nHi Karl-Dieter,\n\nThe 1st part of the diff is irrelevant, because it is the diff of the file obtained from the 2nd file, by some kind of preprocessing, called minification,  improving the performance (something akin to .pyc vs .py files in Python). \n\nJason, by the way, what is the reason to distribute the 1st file, shouldn't it be created at installation time?\n\nFor the purposes of testing, the 1st file can be replaced with the 2nd at no loss.\n\nYou can take the diff, and apply it using good old patch tool, too.\n\nYou can test with the old sagenb,  by installing the new sagenb and applying the patch via git, then replacing the tiny_mce you have in the old sagenb with this new one, that is, the whole devel/sagenb/sagenb/data/tiny_mce/\n\nOr, even easier, unpack the new sagenb spkg, and apply the patch manually, then  replace the tiny_mce you have in the old sagenb with this new one, that is, the whole devel/sagenb/sagenb/data/tiny_mce/",
    "created_at": "2011-12-29T00:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124622",
    "user": "dimpase"
}
```

Replying to [comment:30 kcrisman]:
> Yes, I was able to view the second part of the diff before, though the first part won't view on github and seems far too long on your link as well.  My point is that it's not a patch I can import, particularly not to the old sagenb.
> 
> Anyway, the bigger point is that I have no way of testing it locally.

Hi Karl-Dieter,

The 1st part of the diff is irrelevant, because it is the diff of the file obtained from the 2nd file, by some kind of preprocessing, called minification,  improving the performance (something akin to .pyc vs .py files in Python). 

Jason, by the way, what is the reason to distribute the 1st file, shouldn't it be created at installation time?

For the purposes of testing, the 1st file can be replaced with the 2nd at no loss.

You can take the diff, and apply it using good old patch tool, too.

You can test with the old sagenb,  by installing the new sagenb and applying the patch via git, then replacing the tiny_mce you have in the old sagenb with this new one, that is, the whole devel/sagenb/sagenb/data/tiny_mce/

Or, even easier, unpack the new sagenb spkg, and apply the patch manually, then  replace the tiny_mce you have in the old sagenb with this new one, that is, the whole devel/sagenb/sagenb/data/tiny_mce/



---

archive/issue_comments_124623.json:
```json
{
    "body": "To review it, it's better just to download the two files and replace your versions with them.  To do that, go to the pull request, click on  \"Diff\", and then for each file, click on \"view file\".  Then click the \"raw\" versions of the files at that commit.  Here are links to the files:\n\nhttps://raw.github.com/jasongrout/sagenb/5b1b4c50437db1aa3d912040d29dd33c5e24d80d/sagenb/data/tiny_mce/tiny_mce.js\n\nhttps://raw.github.com/jasongrout/sagenb/5b1b4c50437db1aa3d912040d29dd33c5e24d80d/sagenb/data/tiny_mce/tiny_mce_src.js\n\nTo answer dimpase: The entire tinymce directory is just an uncompressed tinymce release tarball.  I'd rather not duplicate their release process and minifying, but rather would like to just use their straight release.",
    "created_at": "2011-12-29T01:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124623",
    "user": "jason"
}
```

To review it, it's better just to download the two files and replace your versions with them.  To do that, go to the pull request, click on  "Diff", and then for each file, click on "view file".  Then click the "raw" versions of the files at that commit.  Here are links to the files:

https://raw.github.com/jasongrout/sagenb/5b1b4c50437db1aa3d912040d29dd33c5e24d80d/sagenb/data/tiny_mce/tiny_mce.js

https://raw.github.com/jasongrout/sagenb/5b1b4c50437db1aa3d912040d29dd33c5e24d80d/sagenb/data/tiny_mce/tiny_mce_src.js

To answer dimpase: The entire tinymce directory is just an uncompressed tinymce release tarball.  I'd rather not duplicate their release process and minifying, but rather would like to just use their straight release.



---

archive/issue_comments_124624.json:
```json
{
    "body": "Replying to [comment:32 jason]:\n\n> To answer dimpase: The entire tinymce directory is just an uncompressed tinymce release tarball.  I'd rather not duplicate their release process and minifying, but rather would like to just use their straight release.\n\nHi Jason,\nI wonder how do you do the minifying. Thanks,\nDima",
    "created_at": "2011-12-29T02:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124624",
    "user": "dimpase"
}
```

Replying to [comment:32 jason]:

> To answer dimpase: The entire tinymce directory is just an uncompressed tinymce release tarball.  I'd rather not duplicate their release process and minifying, but rather would like to just use their straight release.

Hi Jason,
I wonder how do you do the minifying. Thanks,
Dima



---

archive/issue_comments_124625.json:
```json
{
    "body": "I don't do any minifying.  I just extract the tinymce tarball I downloaded from the website.  The minified version is already included in the standard tinymce release tarball.",
    "created_at": "2011-12-29T02:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124625",
    "user": "jason"
}
```

I don't do any minifying.  I just extract the tinymce tarball I downloaded from the website.  The minified version is already included in the standard tinymce release tarball.



---

archive/issue_comments_124626.json:
```json
{
    "body": "Replying to [comment:34 jason]:\n> I don't do any minifying.  I just extract the tinymce tarball I downloaded from the website.  The minified version is already included in the standard tinymce release tarball.\n\nWell, but where does the diff for the minified file come from?",
    "created_at": "2011-12-29T03:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124626",
    "user": "dimpase"
}
```

Replying to [comment:34 jason]:
> I don't do any minifying.  I just extract the tinymce tarball I downloaded from the website.  The minified version is already included in the standard tinymce release tarball.

Well, but where does the diff for the minified file come from?



---

archive/issue_comments_124627.json:
```json
{
    "body": "I hand-modified both files, the minified version since it's the version we actually send to the browser, and the _src file so that it would be easier to see what the changes were.",
    "created_at": "2011-12-29T03:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124627",
    "user": "jason"
}
```

I hand-modified both files, the minified version since it's the version we actually send to the browser, and the _src file so that it would be easier to see what the changes were.



---

archive/issue_comments_124628.json:
```json
{
    "body": "Replying to [comment:36 jason]:\n> I hand-modified both files, the minified version since it's the version we actually send to the browser, and the _src file so that it would be easier to see what the changes were.\n\nWow, it comes close to fixing a bug in a, say, C program by editing the .o file. :\u2013)\nI certainly would have looked for a tool to do it...\n\nShouldn't we minify the rest of the js code in sagenb, for the same reason, minimizing load times?",
    "created_at": "2011-12-29T03:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124628",
    "user": "dimpase"
}
```

Replying to [comment:36 jason]:
> I hand-modified both files, the minified version since it's the version we actually send to the browser, and the _src file so that it would be easier to see what the changes were.

Wow, it comes close to fixing a bug in a, say, C program by editing the .o file. :â€“)
I certainly would have looked for a tool to do it...

Shouldn't we minify the rest of the js code in sagenb, for the same reason, minimizing load times?



---

archive/issue_comments_124629.json:
```json
{
    "body": "kcrisman, jason has applied the fix to `test.sagenb.org`. Can you give it a try?",
    "created_at": "2011-12-31T18:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124629",
    "user": "kini"
}
```

kcrisman, jason has applied the fix to `test.sagenb.org`. Can you give it a try?



---

archive/issue_comments_124630.json:
```json
{
    "body": "I also had to restart sagenb.org, so the fix should be there too.  Can you try it either on test.sagenb.org or just plain sagenb.org?",
    "created_at": "2011-12-31T18:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124630",
    "user": "jason"
}
```

I also had to restart sagenb.org, so the fix should be there too.  Can you try it either on test.sagenb.org or just plain sagenb.org?



---

archive/issue_comments_124631.json:
```json
{
    "body": "(remember to control-refresh or option-refresh or whatever so that your javascript cache gets overwritten)",
    "created_at": "2011-12-31T19:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124631",
    "user": "jason"
}
```

(remember to control-refresh or option-refresh or whatever so that your javascript cache gets overwritten)



---

archive/issue_comments_124632.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-02T16:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124632",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_124633.json:
```json
{
    "body": "Okay, I didn't even have to do anything with the cache - I had never seen that option before.\n\nAnyway, works on both the test accounts here and at #11343.  It does behave slightly different in terms of the default fonts and sizes, I think, but that is not very important.  At least it works now!  Thanks much.",
    "created_at": "2012-01-02T16:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124633",
    "user": "kcrisman"
}
```

Okay, I didn't even have to do anything with the cache - I had never seen that option before.

Anyway, works on both the test accounts here and at #11343.  It does behave slightly different in terms of the default fonts and sizes, I think, but that is not very important.  At least it works now!  Thanks much.



---

archive/issue_comments_124634.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2012-01-04T19:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124634",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_124635.json:
```json
{
    "body": "What should I (as release manager) do with this?  Is there anything to be merged or is it all in the flask-sagenb?",
    "created_at": "2012-01-04T19:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124635",
    "user": "jdemeyer"
}
```

What should I (as release manager) do with this?  Is there anything to be merged or is it all in the flask-sagenb?



---

archive/issue_comments_124636.json:
```json
{
    "body": "There is nothing to merge.  We've already merged the fix to the underlying problem in flask-sagenb.  I guess this isn't technically in Sage yet, so maybe this ticket should be closed when the flask notebook is merged.  That is similar to how reported bugs in other upstream projects are handled, I think.  When the new version of the upstream version is merged, the appropriate bugs are closed.",
    "created_at": "2012-01-04T22:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124636",
    "user": "jason"
}
```

There is nothing to merge.  We've already merged the fix to the underlying problem in flask-sagenb.  I guess this isn't technically in Sage yet, so maybe this ticket should be closed when the flask notebook is merged.  That is similar to how reported bugs in other upstream projects are handled, I think.  When the new version of the upstream version is merged, the appropriate bugs are closed.



---

archive/issue_comments_124637.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2012-01-05T08:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11298#issuecomment-124637",
    "user": "jdemeyer"
}
```

Resolution: duplicate
