# Issue 20925: Row standard tableaux

Issue created by migration from Trac.

Original creator: andrew.mathas

Original creation time: 2016-08-04 02:04:48

CC:  sage-combinat tscrim darij




---

Comment by andrew.mathas created at 2016-08-05 04:35:44

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by andrew.mathas created at 2016-08-05 04:35:44

Changing type from PLEASE CHANGE to enhancement.


---

Comment by andrew.mathas created at 2016-08-05 04:35:44

Changing keywords from "" to "row standard tableaux".


---

Comment by andrew.mathas created at 2016-08-05 04:35:44

Set assignee to andrew.mathas.


---

Comment by andrew.mathas created at 2016-08-10 23:55:44

New commits:


---

Comment by git created at 2016-08-15 01:22:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2016-08-15 01:37:50

Replying to [comment:8 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[af5a2be](https://git.sagemath.org/sage.git/commit/?id=af5a2be2bc3b4cc37e37c76e7fe93b0e6f616d89)||`Row standard tableau tuples with residue sequences`||
> ||[bf7646a](https://git.sagemath.org/sage.git/commit/?id=bf7646a00874c68cb8375229d2f53c68bb3326cf)||`Merge branch 'u/andrew.mathas/row_standard_tableaux' of git://trac.sagemath.org/sage into t/21162/row_standard_tableaux`||
> ||[0beb237](https://git.sagemath.org/sage.git/commit/?id=0beb23787ab087f47a2000af8c46a2cfd870d2ec)||`Refactoring StandardTableaux as a derived class of RowStandardTableaux`||

The last commit message is misleading: this commit makes `StandardTableauTuples` inherit from `RowStandardTableauTuples` but I ended up leaving `StandardTableaux` inheriting from `SemiStandardTableaux`, and not making it inherit from `RowStandardTableaux` as well, because having it inherit from both wouldn't gain anything and would probably result in a fractional slow-down. The problem is that `StandardTableaux` now has two natural parents and there is no reason to prefer one over the other so I let the code history in sage decide. Currently this doesn't affect anything because, for example,

```
sage: [[1,2,3],[4,5]] in RowStandardTableaux()
True
sage: [[1,2,3],[4,5]] in RowStandardTableaux(5)
True
sage: StandardTableau([[1,2,3],[4,5]]) in RowStandardTableaux(5)
True
```

works as one would expect.


---

Comment by andrew.mathas created at 2016-08-15 01:37:50

Changing status from new to needs_review.


---

Comment by cheuberg created at 2017-01-07 06:48:17

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2017-01-07 06:48:17

branch does not merge.


---

Comment by git created at 2018-05-04 05:28:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2018-05-04 05:31:59

Changing status from needs_work to needs_review.


---

Comment by andrew.mathas created at 2018-05-04 05:31:59

I have merged in to 8.2.rc4. All doc tests pass
----
New commits:
----
New commits:


---

Comment by chapoton created at 2018-05-04 19:21:06

patchbot is not happy at all, see the failing plugins


---

Comment by darij created at 2018-05-04 19:23:41

The patchbot is hard to please lately. But I am not happy either; a lot of the doc still is copypasted from standard (rather than row-standard) tableau classes, like this:

```
+    def cardinality(self):
+        r"""
+        Return the number of all standard tableaux of size ``n``.
+
+        The number of standard tableaux of size `n` is equal to the
+        number of involutions in the symmetric group `S_n`.
+        This is a consequence of the symmetry of the RSK
+        correspondence, that if `\sigma \mapsto (P, Q)`, then
+        `\sigma^{-1} \mapsto (Q, P)`. For more information, see
+        :wikipedia:`Robinson-Schensted-Knuth_correspondence#Symmetry`.
+
```

I'm also wondering why e.g. the `__iter__` method on class `StandardTableaux_size` has been deleted, and why there are so many seemingly unrelated changes to other classes. Did a merge go wrong?


---

Comment by andrew.mathas created at 2018-05-05 03:55:34

Replying to [comment:14 darij]:
> The patchbot is hard to please lately. 

The patchbot errors seem to all be documentation and this builds fine for me. Am missing something?

>But I am not happy either; a lot of the doc still is copypasted from standard (rather than row-standard) tableau classes, like this:

Thanks Darij! Sorry! I completely agree. I think that all of these are fixed in my soon-to-be-uploaded commit. At the same time, I have put in slightly better tests in the sense that the row standard tests now typically use tableaux that are row standard but not standard whereas previously they were often standard tableaux (which are of course also row standard, but that's not the point).

> I'm also wondering why e.g. the `__iter__` method on class `StandardTableaux_size` has been deleted, 

This ticket refactors the standard tableaux classes through the row standard classes. As part of this refactoring `StandardTableaux_size` is now a derived class of `DisjointUnionEnumeratedSets` so the iterator comes for free.

>and why there are so many seemingly unrelated changes to other classes. 

As far as I can see there is only one not directly related change and this is adding `block` methods to `Partition` and `PartitionTuple`. In fact, these are related because these classes implement the combinatorial machinery needed to index bases for the standard modules of the KLR algebras of type `A` and the `block` methods determine when these modules belong to the same block. Apart from this, this ticket only implements row standard tableau of partition and partition tuple shape together with residue sequences for these tableaux. The residue sequences are of course crucial in the KLR setting. The residue sequence classes are not described in the ticket description but they do appear in the list of new classes at the bottom. I can add a description if you'd like.


---

Comment by andrew.mathas created at 2018-05-05 04:13:54

OK, I think that I understood what the patchbot was complaining about and I have fixed those too...well, except possibly for the issues with blocks


---

Comment by git created at 2018-05-05 04:14:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-05-05 06:40:52

EXAMPLE:: should be EXAMPLES::

and to silent the other plugin, you could just remove the comments
`# pretty print`
that the patchbot is not smart enough to ignore


---

Comment by andrew.mathas created at 2018-05-05 07:39:42

Thanks Frédéric! I think that the patchbot should be happy now.

Btw, it's been a while since I submitted a patch through trac and I'm very impressed with the functionality in the patchbot now. It's really helpful!


---

Comment by git created at 2018-05-05 07:40:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-05-08 06:45:33

Now I got a little carried away with doing cleanup for `Tableau(Tuple)`, but some of it was necessary for compatibility with the changes I wanted to do here. In particular, these resulted in a 3x speedup for iteration of the tableau tuples with a fix residue sequence. I also got some other iterator speed improvements, and now the code is using more standard idioms and/or less duplicate checking. There is likely more refactoring to be done, but this overall improves the situation IMO.

TL;DR If my changes are good, then positive review.
----
New commits:


---

Comment by @darijgr created at 2018-05-08 06:53:09

Doc of class RowStandardTableaux still speaks of standard tableaux. Also this is wrong:

```
+        elif n in SkewPartitions():
+            from sage.combinat.skew_tableau import StandardSkewTableaux
+            return StandardSkewTableaux(n)
```


I see the word "semirow" used several times in the doc of tableau tuple classes, but never defined.


```
    A class for row standard tableau of shape a partition tuple. This is
    a tuple of row standard tableau with entries `1, 2, \ldots, n`, where `n`
    is the size of the underlying partition tuple, such that the entries
    increase along rows in each component of the tuple.
```

This isn't very clear. You want to say:

```
    A class for row standard tableau tuples of shape a partition tuple.

    A row standard tableau tuple of shape
    `(\lambda_1, \lambda_2, \ldots, \lambda_k)` is a tuple
    `(T_1, T_2, \ldots, T_k)`, where each `T_i` is a tableau
    of shape `\lambda_i` whose entries increase along rows, and
    with the following property: If we set
    `n = |\lambda_1| + |\lambda_2| + \cdots + |\lambda_k|`,
    then each of the numbers `1, 2, \ldots, n` appears
    in exactly one of the `T_i`, and appears exactly once in
    this `T_i`.
```


In the `tableau_tuple.py` file, shouldn't `Class RowStandardTableaux_residue` be renamed `Class RowStandardTableauTuples_residue`?


---

Comment by git created at 2018-05-08 07:12:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-05-08 07:12:30

I fixed a few things but not all.


---

Comment by git created at 2018-05-09 06:46:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-05-09 06:46:37

Okay, this takes care of the rest of comment:23.


---

Comment by git created at 2018-05-09 07:54:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2018-05-10 23:22:56

Replying to [comment:23 gh-darijgr]:

> {{{
>     A class for row standard tableau of shape a partition tuple. This is
>     a tuple of row standard tableau with entries `1, 2, \ldots, n`, where `n`
>     is the size of the underlying partition tuple, such that the entries
>     increase along rows in each component of the tuple.
> }}}
> This isn't very clear. You want to say:
> {{{
>     A class for row standard tableau tuples of shape a partition tuple.
> 
>     A row standard tableau tuple of shape
>     `(\lambda_1, \lambda_2, \ldots, \lambda_k)` is a tuple
>     `(T_1, T_2, \ldots, T_k)`, where each `T_i` is a tableau
>     of shape `\lambda_i` whose entries increase along rows, and
>     with the following property: If we set
>     `n = |\lambda_1| + |\lambda_2| + \cdots + |\lambda_k|`,
>     then each of the numbers `1, 2, \ldots, n` appears
>     in exactly one of the `T_i`, and appears exactly once in
>     this `T_i`.
> }}

I have rewritten this as:


```
    A row standard tableau tuple of size `n` is an ordered tuple of row
    standard tableaux (see :class:`RowStandardTableau`), with entries `1, 2,
    \ldots, n` such that, in each component, the entries are in increasing
    order along each row. If the tableau in component `k` has shape
    `\lambda^{(k)}` then `\lambda=(\lambda^{(1)},\ldots,\lambda^{(l)}` is a
    :class:`PartitionTuple`.

```


Using `lambda_k` to refer the the components of the partition is likely to confuse because `\lambda_k` is commonly used for a part of a partition. Having explicit references to the row
standard and partition tuple classes should remove any ambiguity.


---

Comment by @darijgr created at 2018-05-10 23:25:25

Yeah, good point Andrew (and thanks Travis for fixing the comments).


---

Comment by git created at 2018-05-10 23:31:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2018-05-10 23:35:27

Travis and Darij thanks for your work on this - especially the speed ups. I just pushed the change to the docs mentioned in comment #29. I also killed off the last `semirow` -- all of which were typos, so thanks for spotting them -- and merged into 8.3.beta0. 

The patchbot errors were confusing me but I now realise that they are related to https://groups.google.com/forum/#!searchin/sage-devel/20382%7Csort:date/sage-devel/BUKf_lI1fJw/gqHCRlpmCAAJ


---

Comment by tscrim created at 2018-05-11 00:19:20

Andrew, it looks like the changes you mentioned have not been merged in.


---

Comment by git created at 2018-05-11 00:22:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2018-05-11 00:22:31

Replying to [comment:33 tscrim]:
> Andrew, it looks like the changes you mentioned have not been merged in.

Thanks. Done now.


---

Comment by tscrim created at 2018-05-11 00:25:20

LGTM. Darij?


---

Comment by @darijgr created at 2018-05-11 00:32:05

Don't put my name in the reviewers list. I had perhaps 10 mins of eyes on the branch, and I don't know the whole rep-theory stuff it's for, so all I could do is look for obvious bugs in the doc.

I don't see any more now, little as it means. But if I were you, I'd put a definition of "quantum characteristic" and "block" into the `block` method on partition.py. (Blocks of what group? In what characteristic? Or totally unrelated?) Also maybe not talk about "partition tuple ``self``" in there, since I assume it's a 1-partition tuple?


---

Comment by andrew.mathas created at 2018-05-11 04:58:20

Replying to [comment:37 gh-darijgr]:
> Don't put my name in the reviewers list. I had perhaps 10 mins of eyes on the branch, and I don't know the whole rep-theory stuff it's for, so all I could do is look for obvious bugs in the doc.
> 
> I don't see any more now, little as it means. But if I were you, I'd put a definition of "quantum characteristic" and "block" into the `block` method on partition.py. (Blocks of what group? In what characteristic? Or totally unrelated?) 

I have rewritten the documentation for the block method. In particular, previously it said towards the end that this method is for blocks of the cyclotomic Hecke algebras of type A and it now says this at the top and with a little more detail. I have replaced `quantum characteristic` with `:meth:quantum_characteristic`

I also fixed up the referencing relating to this ticket -- there are still a few other embedded references in these files rather than in `index.rst`...

> Also maybe not talk about "partition tuple ``self``" in there, since I assume it's a 1-partition tuple?

Ah, I see that I was updating code for the block method of a residue sequence. I have now also revised the documentation for the `block` methods of partitions and partition tuples.


---

Comment by git created at 2018-05-11 04:58:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-05-11 05:35:07

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-05-11 05:35:07

Since Darij does not want to be considered as a reviewer, I've removed his name (I disagree, but as he wishes).

The current state of affairs LGTM. We can make more improvements, e.g., bringing things to the master reference file, on later tickets.


---

Comment by andrew.mathas created at 2018-05-11 05:41:43

Thanks very much Travis -- and, unofficially, Darij!

There will be merge conflicts when the Kleshchev partition ticket, which will should go in first, but I will fix those when they come.


---

Comment by git created at 2018-05-11 05:47:16

Changing status from positive_review to needs_review.


---

Comment by git created at 2018-05-11 05:47:16

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by tscrim created at 2018-05-11 05:48:30

I just decided to beat it to the punch so both tickets could be merged in the same beta. Trivial rebase.


---

Comment by tscrim created at 2018-05-11 05:48:30

Changing status from needs_review to positive_review.


---

Comment by darij created at 2018-05-11 06:19:32


```
+.. [DJM1999] \R. Dipper, G. James and A. Mathas
+             *The cyclotomic q-Schur algebra*, Math. Z, **229** (1999), 385-416.
+             :mathscinet:`MR1635149`
```

Isn't it "Cyclotomic q-Schur algebras" or am I getting two papers confused?


---

Comment by git created at 2018-05-11 08:07:02

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2018-05-11 08:07:02

Changing status from positive_review to needs_review.


---

Comment by git created at 2018-05-11 08:09:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2018-05-11 08:10:27

Changing status from needs_review to positive_review.


---

Comment by andrew.mathas created at 2018-05-11 08:10:27

That's embarrassing! I had the title wrong. The year wrong *and* the mathscinet reference wrong:(


---

Comment by fbissey created at 2018-05-16 00:54:18

Documentation fails to build

```
.. [BKW2011]_ \J. Brundan, A. Kleshchev, and W. Wang,
```

shouldn't have `_` like other entries.


---

Comment by git created at 2018-05-16 01:18:52

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2018-05-16 01:18:52

Changing status from positive_review to needs_review.


---

Comment by tscrim created at 2018-05-16 01:19:37

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-05-16 01:19:37

Fixed. Thank you for catching that.

Also rebased over the latest develop and #20564.


---

Comment by andrew.mathas created at 2018-05-16 09:42:07

Thanks Travis!


---

Comment by vbraun created at 2018-05-18 17:50:04

Resolution: fixed
