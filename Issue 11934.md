# Issue 11934: Implement sage --rsyncdist

Issue created by migration from https://trac.sagemath.org/ticket/12106

Original creator: jdemeyer

Original creation time: 2011-12-02 09:48:17

Assignee: leif

This is a script to create an _rsyncable Sage tarball_.  The spkgs are stored extracted: instead of `atlas-3.8.4.spkg`, there is a directory `atlas/`.


---

Comment by jhpalmieri created at 2011-12-02 16:02:58

What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.


---

Comment by jdemeyer created at 2011-12-02 16:10:44

Replying to [comment:1 jhpalmieri]:
> What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.
Well, I don't immediately see the "use case" for that.  Unless you mean to do the downloading/installing in parallel to save time (you could start building Sage after donwloading just a few megabytes).


---

Comment by jdemeyer created at 2011-12-03 11:02:55

Changing status from new to needs_review.


---

Attachment


---

Comment by kini created at 2011-12-10 10:59:39

Replying to [comment:2 jdemeyer]:
> Replying to [comment:1 jhpalmieri]:
> Well, I don't immediately see the "use case" for that.

Just a thought, but this would be a major step towards consolidating sage development into a small number of repositories, like how sage-on-gentoo has a single repository for all the ebuilds that do spkg installation, for example.


---

Comment by vbraun created at 2011-12-10 11:02:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2011-12-10 11:02:56

Looks good to me. 

Any further discussion about packaging should probably move to sage-devel or to a trac ticket once there is a concrete implementation. This ticket is mostly useful for testing, so lets leave it at that.


---

Comment by fbissey created at 2011-12-10 11:15:50

Don't have a gzip with --rsyncable on Gentoo :( 

A typo in sage-rsyncdist:

```
spkg/standard/atlas-3.8.4.spkg, there is a directory
spkg/standrd/atlas/ (note the directory has no version number).
```

it should be "spkg/standard" as well on the second line.
Still same file on line 44

```
if ! gzip --rsyncable </dev/null >/dev/null 2>/dev/null; then
```

Shouldn't there be some bracket somewhere?


---

Comment by jdemeyer created at 2011-12-10 11:21:58

Replying to [comment:7 fbissey]:
> Don't have a gzip with --rsyncable on Gentoo :( 
I know, it's annoying this isn't in upstream gzip.

> A typo in sage-rsyncdist:
> {{{
> spkg/standard/atlas-3.8.4.spkg, there is a directory
> spkg/standrd/atlas/ (note the directory has no version number).
> }}}
Thanks.

> Shouldn't there be some bracket somewhere?
No, brackets are for test operators, not for running executables, see
`help test`
in bash.


---

Attachment


---

Comment by jdemeyer created at 2011-12-10 23:05:49

Resolution: fixed
