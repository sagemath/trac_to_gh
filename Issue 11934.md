# Issue 11934: Implement sage --rsyncdist

archive/issues_011934.json:
```json
{
    "body": "Assignee: leif\n\nThis is a script to create an *rsyncable Sage tarball*.  The spkgs are stored extracted: instead of `atlas-3.8.4.spkg`, there is a directory `atlas/`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12106\n\n",
    "created_at": "2011-12-02T09:48:17Z",
    "labels": [
        "scripts",
        "blocker",
        "enhancement"
    ],
    "title": "Implement sage --rsyncdist",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11934",
    "user": "jdemeyer"
}
```
Assignee: leif

This is a script to create an *rsyncable Sage tarball*.  The spkgs are stored extracted: instead of `atlas-3.8.4.spkg`, there is a directory `atlas/`.

Issue created by migration from https://trac.sagemath.org/ticket/12106





---

archive/issue_comments_137072.json:
```json
{
    "body": "What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.",
    "created_at": "2011-12-02T16:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137072",
    "user": "jhpalmieri"
}
```

What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.



---

archive/issue_comments_137073.json:
```json
{
    "body": "Replying to [comment:1 jhpalmieri]:\n> What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.\nWell, I don't immediately see the \"use case\" for that.  Unless you mean to do the downloading/installing in parallel to save time (you could start building Sage after donwloading just a few megabytes).",
    "created_at": "2011-12-02T16:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137073",
    "user": "jdemeyer"
}
```

Replying to [comment:1 jhpalmieri]:
> What about an internet-access distribution?  The spkgs could include everything except the `src` directory, which would be downloaded when you build.
Well, I don't immediately see the "use case" for that.  Unless you mean to do the downloading/installing in parallel to save time (you could start building Sage after donwloading just a few megabytes).



---

archive/issue_comments_137074.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-03T11:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137074",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137075.json:
```json
{
    "body": "Attachment [12106_root_hgignore.patch](tarball://root/attachments/some-uuid/ticket12106/12106_root_hgignore.patch) by jdemeyer created at 2011-12-05 13:15:39",
    "created_at": "2011-12-05T13:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137075",
    "user": "jdemeyer"
}
```

Attachment [12106_root_hgignore.patch](tarball://root/attachments/some-uuid/ticket12106/12106_root_hgignore.patch) by jdemeyer created at 2011-12-05 13:15:39



---

archive/issue_comments_137076.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> Replying to [comment:1 jhpalmieri]:\n> Well, I don't immediately see the \"use case\" for that.\n\nJust a thought, but this would be a major step towards consolidating sage development into a small number of repositories, like how sage-on-gentoo has a single repository for all the ebuilds that do spkg installation, for example.",
    "created_at": "2011-12-10T10:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137076",
    "user": "kini"
}
```

Replying to [comment:2 jdemeyer]:
> Replying to [comment:1 jhpalmieri]:
> Well, I don't immediately see the "use case" for that.

Just a thought, but this would be a major step towards consolidating sage development into a small number of repositories, like how sage-on-gentoo has a single repository for all the ebuilds that do spkg installation, for example.



---

archive/issue_comments_137077.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-10T11:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137077",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137078.json:
```json
{
    "body": "Looks good to me. \n\nAny further discussion about packaging should probably move to sage-devel or to a trac ticket once there is a concrete implementation. This ticket is mostly useful for testing, so lets leave it at that.",
    "created_at": "2011-12-10T11:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137078",
    "user": "vbraun"
}
```

Looks good to me. 

Any further discussion about packaging should probably move to sage-devel or to a trac ticket once there is a concrete implementation. This ticket is mostly useful for testing, so lets leave it at that.



---

archive/issue_comments_137079.json:
```json
{
    "body": "Don't have a gzip with --rsyncable on Gentoo :( \n\nA typo in sage-rsyncdist:\n\n```\nspkg/standard/atlas-3.8.4.spkg, there is a directory\nspkg/standrd/atlas/ (note the directory has no version number).\n```\n\nit should be \"spkg/standard\" as well on the second line.\nStill same file on line 44\n\n```\nif ! gzip --rsyncable </dev/null >/dev/null 2>/dev/null; then\n```\n\nShouldn't there be some bracket somewhere?",
    "created_at": "2011-12-10T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137079",
    "user": "fbissey"
}
```

Don't have a gzip with --rsyncable on Gentoo :( 

A typo in sage-rsyncdist:

```
spkg/standard/atlas-3.8.4.spkg, there is a directory
spkg/standrd/atlas/ (note the directory has no version number).
```

it should be "spkg/standard" as well on the second line.
Still same file on line 44

```
if ! gzip --rsyncable </dev/null >/dev/null 2>/dev/null; then
```

Shouldn't there be some bracket somewhere?



---

archive/issue_comments_137080.json:
```json
{
    "body": "Replying to [comment:7 fbissey]:\n> Don't have a gzip with --rsyncable on Gentoo :( \nI know, it's annoying this isn't in upstream gzip.\n\n> A typo in sage-rsyncdist:\n> {{{\n> spkg/standard/atlas-3.8.4.spkg, there is a directory\n> spkg/standrd/atlas/ (note the directory has no version number).\n> }}}\nThanks.\n\n> Shouldn't there be some bracket somewhere?\nNo, brackets are for test operators, not for running executables, see\n`help test`\nin bash.",
    "created_at": "2011-12-10T11:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137080",
    "user": "jdemeyer"
}
```

Replying to [comment:7 fbissey]:
> Don't have a gzip with --rsyncable on Gentoo :( 
I know, it's annoying this isn't in upstream gzip.

> A typo in sage-rsyncdist:
> {{{
> spkg/standard/atlas-3.8.4.spkg, there is a directory
> spkg/standrd/atlas/ (note the directory has no version number).
> }}}
Thanks.

> Shouldn't there be some bracket somewhere?
No, brackets are for test operators, not for running executables, see
`help test`
in bash.



---

archive/issue_comments_137081.json:
```json
{
    "body": "Attachment [12106_rsyncdist.patch](tarball://root/attachments/some-uuid/ticket12106/12106_rsyncdist.patch) by jdemeyer created at 2011-12-10 11:26:35",
    "created_at": "2011-12-10T11:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137081",
    "user": "jdemeyer"
}
```

Attachment [12106_rsyncdist.patch](tarball://root/attachments/some-uuid/ticket12106/12106_rsyncdist.patch) by jdemeyer created at 2011-12-10 11:26:35



---

archive/issue_comments_137082.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-10T23:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11934",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11934#issuecomment-137082",
    "user": "jdemeyer"
}
```

Resolution: fixed
