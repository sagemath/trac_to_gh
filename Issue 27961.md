# Issue 27961: Add method is_bipartite to BipartiteGraph

Issue created by migration from https://trac.sagemath.org/ticket/28198

Original creator: dcoudert

Original creation time: 2019-07-14 19:54:07

A member of class `BipartiteGraph` is obviously bipartite, so we can avoid to test it.


---

Comment by dcoudert created at 2019-07-14 19:58:29

Changing status from new to needs_review.


---

Comment by dcoudert created at 2019-07-14 19:58:29

If you have in mind a smarter way to handle initialization, please share it. The branch is in public, so you can implement it directly.
----
New commits:


---

Comment by vdelecroix created at 2019-07-17 11:20:09

Insteed of having a weird and mostly useless special case

```
+        if not hasattr(self, 'left') or not hasattr(self, 'right'):
+            # This case may occur during the initialization (i.e., in __init__)
+            return GenericGraph.is_bipartite(self, certificate=certificate)
```

Why don't you call `GenericGraph.is_bipartite(self)` in `__init__` instead of `self.is_bipartite()?


---

Comment by git created at 2019-07-17 11:36:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-07-17 12:51:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-07-17 12:53:08

I agree with your improvement. I did a small correction to avoid this issue

```
sage: a = b = set()
sage: a.add(1)
sage: b
{1}
```


For me this ticket is good to go. I let you conclude. Thank you.


---

Comment by vdelecroix created at 2019-07-17 13:28:09

- I don't like so much the duplication in the `BipartiteGraph.__init__`.
- The `sets_from_colors` would be more natural if it would return `ans` instead of `ans.values()`. That is it would transform a dictionary `k -> v` in `v -> {keys with that values}`.

Is that ok if I try something to fix these.


---

Comment by dcoudert created at 2019-07-17 13:34:53

Sure, the branch is in public so that we can interact (and I'm not the author of the commit "proposition of simplification for 28198")


---

Comment by git created at 2019-07-17 14:02:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2019-07-17 14:04:02

I like it better now :-)


---

Comment by git created at 2019-07-17 14:26:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-07-17 14:54:16

we can simplify more putting the content of `sets_from_colors` inside `_upgrade_from_graph`, no ?


---

Comment by vdelecroix created at 2019-07-17 16:16:48

make sense


---

Comment by git created at 2019-07-17 16:28:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-07-17 16:29:22

Should be good now.


---

Comment by vdelecroix created at 2019-07-17 17:03:58

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2019-07-17 17:03:58

good for me at least


---

Comment by dcoudert created at 2019-07-17 18:15:58

Thank you.


---

Comment by vbraun created at 2019-07-23 21:04:05

Resolution: fixed
