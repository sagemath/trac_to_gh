# Issue 19631: interpreters build fails on cygwin

archive/issues_019631.json:
```json
{
    "body": "CC:  @jdemeyer jpflori\n\nInterpreter compilation now fails on cygwin:\n\n\n```\ngcc -shared -Wl,--enable-auto-image-base -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib/python2.7/config -L/home/Sebastien/sage22/sage/local/lib -lpython2.7 -o build/lib.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/wrapper_el.dll\nbuild/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.o: dans la fonction \u00ab __pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__ \u00bb:\n/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.c:1456: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab __imp_interp_py \u00bb\n```\n\n\nProbably due to #19796\n\nIssue created by migration from https://trac.sagemath.org/ticket/19868\n\n",
    "created_at": "2016-01-12T08:12:59Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "interpreters build fails on cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19631",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```
CC:  @jdemeyer jpflori

Interpreter compilation now fails on cygwin:


```
gcc -shared -Wl,--enable-auto-image-base -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib/python2.7/config -L/home/Sebastien/sage22/sage/local/lib -lpython2.7 -o build/lib.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/wrapper_el.dll
build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.o: dans la fonction « __pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__ »:
/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.c:1456: référence indéfinie vers « __imp_interp_py »
```


Probably due to #19796

Issue created by migration from https://trac.sagemath.org/ticket/19868





---

archive/issue_comments_269425.json:
```json
{
    "body": "This is now where I am at with my Cygwin32 build with `7.0.rc1` + #19893 + #19894.",
    "created_at": "2016-01-15T03:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269425",
    "user": "https://github.com/tscrim"
}
```

This is now where I am at with my Cygwin32 build with `7.0.rc1` + #19893 + #19894.



---

archive/issue_comments_269426.json:
```json
{
    "body": "Looks like underlinking.",
    "created_at": "2016-01-15T10:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269426",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Looks like underlinking.



---

archive/issue_comments_269427.json:
```json
{
    "body": "Apparently not underlinking, more a problem with symbol names:\n\n\n```\n$ nm wrapper_cdf.o | grep interp_cdf\n                 U __imp_interp_cdf\n\n$ nm interp_cdf.o | grep interp_cdf\n00000000000003a0 T interp_cdf\n```\n\n\n\nSeems to be the same as in #13336: the cython auto-generated `wrapper_cdf.h` and `wrapper_cdf.c` contain a DL_IMPORT directive which adds a prefix to symbol names.\nIf I desactivate this directive, then everything goes through, but I don't know how to do this in a clean way.",
    "created_at": "2016-01-24T20:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269427",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Apparently not underlinking, more a problem with symbol names:


```
$ nm wrapper_cdf.o | grep interp_cdf
                 U __imp_interp_cdf

$ nm interp_cdf.o | grep interp_cdf
00000000000003a0 T interp_cdf
```



Seems to be the same as in #13336: the cython auto-generated `wrapper_cdf.h` and `wrapper_cdf.c` contain a DL_IMPORT directive which adds a prefix to symbol names.
If I desactivate this directive, then everything goes through, but I don't know how to do this in a clean way.



---

archive/issue_comments_269428.json:
```json
{
    "body": "Is it fixed by https://github.com/cython/cython/pull/360? If yes, we should just apply that patch to Cython.",
    "created_at": "2016-01-24T22:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269428",
    "user": "https://github.com/jdemeyer"
}
```

Is it fixed by https://github.com/cython/cython/pull/360? If yes, we should just apply that patch to Cython.



---

archive/issue_comments_269429.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> Is it fixed by https://github.com/cython/cython/pull/360? If yes, we should just apply that patch to Cython.\n\nNo, this doesn't change anything.",
    "created_at": "2016-01-25T14:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269429",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Replying to [comment:5 jdemeyer]:
> Is it fixed by https://github.com/cython/cython/pull/360? If yes, we should just apply that patch to Cython.

No, this doesn't change anything.



---

archive/issue_comments_269430.json:
```json
{
    "body": "The evilish `__imp` prefix is a Cygwin hack to link to DLL through static import libraries.\nThe DLL exposes usual function names but might be problematic to directly link to, and the static import library is... well... static and provides a proxy to real function in the DLL, the proxy having the same name with `__imp`prepended.\nNote that it is not even needed anymore to go through static import libraries to link to DLL's but it is common practice to produce them.\nIn the end the results is more or less the same performance wise for the produced binaries which use the DLL although linking time is higher when import libraries are used.\n\nIn case you want to link to directly object files together you definitely don't need the `__imp` black magic.\nOr so do I think.",
    "created_at": "2016-01-25T15:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269430",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

The evilish `__imp` prefix is a Cygwin hack to link to DLL through static import libraries.
The DLL exposes usual function names but might be problematic to directly link to, and the static import library is... well... static and provides a proxy to real function in the DLL, the proxy having the same name with `__imp`prepended.
Note that it is not even needed anymore to go through static import libraries to link to DLL's but it is common practice to produce them.
In the end the results is more or less the same performance wise for the produced binaries which use the DLL although linking time is higher when import libraries are used.

In case you want to link to directly object files together you definitely don't need the `__imp` black magic.
Or so do I think.



---

archive/issue_comments_269431.json:
```json
{
    "body": "Now I'm wondering why this broke in #19796.",
    "created_at": "2016-01-25T20:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269431",
    "user": "https://github.com/jdemeyer"
}
```

Now I'm wondering why this broke in #19796.



---

archive/issue_comments_269432.json:
```json
{
    "body": "Given that this really looks like the same issue as #13336, we should come up with a solution that can be applied upstream to Cython. It doesn't make much sense to keep working around the same bug which appears in different places.",
    "created_at": "2016-01-25T20:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269432",
    "user": "https://github.com/jdemeyer"
}
```

Given that this really looks like the same issue as #13336, we should come up with a solution that can be applied upstream to Cython. It doesn't make much sense to keep working around the same bug which appears in different places.



---

archive/issue_comments_269433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-28T13:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269433",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_269434.json:
```json
{
    "body": "Not sure it is really a bug, more like an intrinsic limitation: Cython tries to guess if some declaration will be done in a DLL or not, gets it right most of the time, sometimes not, and it seems there is no keyword to force one behavior or the other (and no heuristics can always succeed).\n\nAnyway, in this case it can be fixed as in the attached branch. There were two problems:\n- cython adds `DL_IMPORT` in .h files it generates (which is rather sensible in general, but not in this use case). Solution: do not import the auto-generated header, declare directly `extern` functions, just as in #13336.\n- with `cdef extern:`, cython also adds `DL_IMPORT`. It does not if the declaration is coming from a header, since then the black magic should be done in the header (also looks rather sensible to me). So, replace `cdef extern:` with `cdef extern from *:` so that cython thinks the function is declared in some header.\n----\nNew commits:",
    "created_at": "2016-01-28T13:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269434",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Not sure it is really a bug, more like an intrinsic limitation: Cython tries to guess if some declaration will be done in a DLL or not, gets it right most of the time, sometimes not, and it seems there is no keyword to force one behavior or the other (and no heuristics can always succeed).

Anyway, in this case it can be fixed as in the attached branch. There were two problems:
- cython adds `DL_IMPORT` in .h files it generates (which is rather sensible in general, but not in this use case). Solution: do not import the auto-generated header, declare directly `extern` functions, just as in #13336.
- with `cdef extern:`, cython also adds `DL_IMPORT`. It does not if the declaration is coming from a header, since then the black magic should be done in the header (also looks rather sensible to me). So, replace `cdef extern:` with `cdef extern from *:` so that cython thinks the function is declared in some header.
----
New commits:



---

archive/issue_comments_269435.json:
```json
{
    "body": "I don't really like this patch. It seems that every time we try to use Cython-generated header files, it breaks on Cygwin. From this I conclude that the Cython-generated header files should be fixed in general, instead of adding a manual hack for every case.\n\nWhy do you say that adding `DL_IMPORT` in `.h` files is \"rather sensible in general\" if it always breaks?",
    "created_at": "2016-01-28T15:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269435",
    "user": "https://github.com/jdemeyer"
}
```

I don't really like this patch. It seems that every time we try to use Cython-generated header files, it breaks on Cygwin. From this I conclude that the Cython-generated header files should be fixed in general, instead of adding a manual hack for every case.

Why do you say that adding `DL_IMPORT` in `.h` files is "rather sensible in general" if it always breaks?



---

archive/issue_comments_269436.json:
```json
{
    "body": "Replying to [comment:11 jdemeyer]:\n> Why do you say that adding `DL_IMPORT` in `.h` files is \"rather sensible in general\" if it always breaks?\n\nSay you have a shared library `foo.dll` providing a function `bar` defined in a header `foo.h`. Then, if you want to use the function `bar` from another program, you will `#include foo.h`, and it is important that the header says the function is in a dll, so the `DL_IMPORT` in the header is what you want. This is the typical use case.\n\nThe problem happens if, when building `foo.dll`, you have several .o files, say `foo.o` with the definition of `bar` (not yet prefixed by `__imp_` since there is no dll yet), and another file that uses `bar`, and therefore includes `foo.h` for the declaration. If there is DL_IMPORT in the header, boom.\n\nThe classical solution, if I understand correctly, is to have some `#ifdef`'s in the header file, to be able to desactivate conditionnally the DL_IMPORT. This seems to require serious modifications in cython. Given that the fix I propose is very simple, I would rather go for it.",
    "created_at": "2016-01-29T20:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269436",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Replying to [comment:11 jdemeyer]:
> Why do you say that adding `DL_IMPORT` in `.h` files is "rather sensible in general" if it always breaks?

Say you have a shared library `foo.dll` providing a function `bar` defined in a header `foo.h`. Then, if you want to use the function `bar` from another program, you will `#include foo.h`, and it is important that the header says the function is in a dll, so the `DL_IMPORT` in the header is what you want. This is the typical use case.

The problem happens if, when building `foo.dll`, you have several .o files, say `foo.o` with the definition of `bar` (not yet prefixed by `__imp_` since there is no dll yet), and another file that uses `bar`, and therefore includes `foo.h` for the declaration. If there is DL_IMPORT in the header, boom.

The classical solution, if I understand correctly, is to have some `#ifdef`'s in the header file, to be able to desactivate conditionnally the DL_IMPORT. This seems to require serious modifications in cython. Given that the fix I propose is very simple, I would rather go for it.



---

archive/issue_comments_269437.json:
```json
{
    "body": "Sounds convincing. Still, I will think about a proper solution.",
    "created_at": "2016-01-29T22:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269437",
    "user": "https://github.com/jdemeyer"
}
```

Sounds convincing. Still, I will think about a proper solution.



---

archive/issue_comments_269438.json:
```json
{
    "body": "For the record (and mostly as a ping), I was able to build Sage completely with `7.0.beta1` + #19894 + the current branch here.",
    "created_at": "2016-02-02T15:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269438",
    "user": "https://github.com/tscrim"
}
```

For the record (and mostly as a ping), I was able to build Sage completely with `7.0.beta1` + #19894 + the current branch here.



---

archive/issue_comments_269439.json:
```json
{
    "body": "`@`jeroen: if you don't have a better solution in mind, would you be ok to go with the suggested one and potentially change it for a better one later?",
    "created_at": "2016-02-02T15:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269439",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

`@`jeroen: if you don't have a better solution in mind, would you be ok to go with the suggested one and potentially change it for a better one later?



---

archive/issue_comments_269440.json:
```json
{
    "body": "Replying to [comment:15 jpflori]:\n> `@`jeroen: if you don't have a better solution in mind, would you be ok to go with the suggested one and potentially change it for a better one later?\n\nI accept under two conditions:\n1. In the various places where you removed the `#include` statements, add a comment mentioning `DL_IMPORT` and refer to this ticket.\n2. This patch does not introduce compiler warnings under Linux.\n\nI will now check 2.",
    "created_at": "2016-02-02T16:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269440",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 jpflori]:
> `@`jeroen: if you don't have a better solution in mind, would you be ok to go with the suggested one and potentially change it for a better one later?

I accept under two conditions:
1. In the various places where you removed the `#include` statements, add a comment mentioning `DL_IMPORT` and refer to this ticket.
2. This patch does not introduce compiler warnings under Linux.

I will now check 2.



---

archive/issue_comments_269441.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T21:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269442.json:
```json
{
    "body": "Replying to [comment:16 jdemeyer]:\n> 1. In the various places where you removed the `#include` statements, add a comment mentioning `DL_IMPORT` and refer to this ticket.\n\nDone.",
    "created_at": "2016-02-02T21:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269442",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Replying to [comment:16 jdemeyer]:
> 1. In the various places where you removed the `#include` statements, add a comment mentioning `DL_IMPORT` and refer to this ticket.

Done.



---

archive/issue_comments_269443.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-02-03T14:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269443",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_269444.json:
```json
{
    "body": "Patchbot build failures.",
    "created_at": "2016-02-03T14:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269444",
    "user": "https://github.com/jdemeyer"
}
```

Patchbot build failures.



---

archive/issue_comments_269445.json:
```json
{
    "body": "The build failure is independent of this ticket, see #20005.",
    "created_at": "2016-02-03T14:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269445",
    "user": "https://github.com/jdemeyer"
}
```

The build failure is independent of this ticket, see #20005.



---

archive/issue_comments_269446.json:
```json
{
    "body": "As I feared, there are a lot new warnings with this branch:\n\n```diff\n--- build-old.log       2016-02-03 15:19:33.091838870 +0100\n+++ build-new.log       2016-02-03 15:16:54.125367775 +0100\n@@ -186,6 +186,10 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_cdf.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_11wrapper_cdf_11Wrapper_cdf_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_cdf.c:3755:3: warning: implicit declaration of function \u2018interp_cdf\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_5 = interp_cdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648119105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 119; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_cdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_cdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so\n [ 2/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -197,6 +201,13 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_el.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_el_10Wrapper_el_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:7: warning: implicit declaration of function \u2018interp_el\u2019 [-Wimplicit-function-declaration]\n+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+       ^\n+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:17: warning: assignment makes pointer from integer without a cast [enabled by default]\n+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+                 ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_el.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_el.so\n [ 3/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -208,6 +219,13 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_py.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:7: warning: implicit declaration of function \u2018interp_py\u2019 [-Wimplicit-function-declaration]\n+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+       ^\n+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:17: warning: assignment makes pointer from integer without a cast [enabled by default]\n+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+                 ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_py.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_py.so\n [ 4/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -219,6 +237,10 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_rdf.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_11wrapper_rdf_11Wrapper_rdf_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_rdf.c:1807:3: warning: implicit declaration of function \u2018interp_rdf\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_5 = interp_rdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648009105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 81; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lcblas -latlas -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rdf.so\n [ 5/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -230,6 +252,10 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_rr.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_rr_10Wrapper_rr_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_rr.c:3915:3: warning: implicit declaration of function \u2018interp_rr\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_2 = interp_rr(__pyx_v_c_args, __pyx_v_retval->value, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code, ((PyObject *)__pyx_v_self->_domain)); if (unlikely(__pyx_t_2 == 0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rr.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lmpfr -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rr.so\n [ 6/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/plot/plot3d/parametric_surface.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/plot/plot3d/parametric_surface.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -251,6 +277,10 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_cdf.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_11wrapper_cdf_11Wrapper_cdf_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_cdf.c:3755:3: warning: implicit declaration of function \u2018interp_cdf\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_5 = interp_cdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648119105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 119; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_cdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_cdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so\n [ 8/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -262,6 +292,13 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_el.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_el_10Wrapper_el_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:7: warning: implicit declaration of function \u2018interp_el\u2019 [-Wimplicit-function-declaration]\n+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+       ^\n+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:17: warning: assignment makes pointer from integer without a cast [enabled by default]\n+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+                 ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_el.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_el.so\n [ 9/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -273,6 +310,13 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_py.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:7: warning: implicit declaration of function \u2018interp_py\u2019 [-Wimplicit-function-declaration]\n+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+       ^\n+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:17: warning: assignment makes pointer from integer without a cast [enabled by default]\n+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}\n+                 ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_py.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_py.so\n [10/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -284,6 +328,10 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_rdf.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_11wrapper_rdf_11Wrapper_rdf_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_rdf.c:1807:3: warning: implicit declaration of function \u2018interp_rdf\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_5 = interp_rdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648009105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 81; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts\n gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lcblas -latlas -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rdf.so\n [11/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o -fno-strict-aliasing -fno-tree-dominator-opts\n@@ -295,9 +343,14 @@\n build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition\n  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)\n  ^\n+build/cythonized/sage/ext/interpreters/wrapper_rr.c: In function \u2018__pyx_pf_4sage_3ext_12interpreters_10wrapper_rr_10Wrapper_rr_4__call__\u2019:\n+build/cythonized/sage/ext/interpreters/wrapper_rr.c:3915:3: warning: implicit declaration of function \u2018interp_rr\u2019 [-Wimplicit-function-declaration]\n+   __pyx_t_2 = interp_rr(__pyx_v_c_args, __pyx_v_retval->value, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code, ((PyObject *)__pyx_v_self->_domain)); if (unlikely(__pyx_t_2 == 0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n+   ^\n gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rr.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -fno-strict-aliasing -fno-tree-dominator-opts\n-Time to execute 11 commands: 1.71 seconds.\n-Total time spent compiling C/C++ extensions: 1.77 seconds.\n+gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lmpfr -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rr.so\n+Time to execute 11 commands: 1.51 seconds.\n+Total time spent compiling C/C++ extensions: 1.57 seconds.\n running install_lib\n copying build/lib.linux-x86_64-2.7/sage/plot/plot3d/parametric_surface.so -> /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/plot/plot3d\n copying build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so -> /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/ext/interpreters\n```\n",
    "created_at": "2016-02-03T14:23:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269446",
    "user": "https://github.com/jdemeyer"
}
```

As I feared, there are a lot new warnings with this branch:

```diff
--- build-old.log       2016-02-03 15:19:33.091838870 +0100
+++ build-new.log       2016-02-03 15:16:54.125367775 +0100
@@ -186,6 +186,10 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_cdf.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_11wrapper_cdf_11Wrapper_cdf_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_cdf.c:3755:3: warning: implicit declaration of function ‘interp_cdf’ [-Wimplicit-function-declaration]
+   __pyx_t_5 = interp_cdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648119105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 119; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_cdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_cdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so
 [ 2/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -197,6 +201,13 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_el.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_el_10Wrapper_el_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:7: warning: implicit declaration of function ‘interp_el’ [-Wimplicit-function-declaration]
+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+       ^
+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:17: warning: assignment makes pointer from integer without a cast [enabled by default]
+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+                 ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_el.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_el.so
 [ 3/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -208,6 +219,13 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_py.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:7: warning: implicit declaration of function ‘interp_py’ [-Wimplicit-function-declaration]
+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+       ^
+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:17: warning: assignment makes pointer from integer without a cast [enabled by default]
+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+                 ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_py.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_py.so
 [ 4/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -219,6 +237,10 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_rdf.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_11wrapper_rdf_11Wrapper_rdf_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_rdf.c:1807:3: warning: implicit declaration of function ‘interp_rdf’ [-Wimplicit-function-declaration]
+   __pyx_t_5 = interp_rdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648009105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 81; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lcblas -latlas -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rdf.so
 [ 5/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -230,6 +252,10 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_rr.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_rr_10Wrapper_rr_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_rr.c:3915:3: warning: implicit declaration of function ‘interp_rr’ [-Wimplicit-function-declaration]
+   __pyx_t_2 = interp_rr(__pyx_v_c_args, __pyx_v_retval->value, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code, ((PyObject *)__pyx_v_self->_domain)); if (unlikely(__pyx_t_2 == 0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rr.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lmpfr -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rr.so
 [ 6/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/plot/plot3d/parametric_surface.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/plot/plot3d/parametric_surface.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -251,6 +277,10 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_cdf.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_11wrapper_cdf_11Wrapper_cdf_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_cdf.c:3755:3: warning: implicit declaration of function ‘interp_cdf’ [-Wimplicit-function-declaration]
+   __pyx_t_5 = interp_cdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648119105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 119; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_cdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_cdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_cdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so
 [ 8/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -262,6 +292,13 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_el.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_el_10Wrapper_el_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:7: warning: implicit declaration of function ‘interp_el’ [-Wimplicit-function-declaration]
+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+       ^
+build/cythonized/sage/ext/interpreters/wrapper_el.c:2722:17: warning: assignment makes pointer from integer without a cast [enabled by default]
+       __pyx_t_4 = interp_el(((PyListObject *)__pyx_v_mapped_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, ((PyObject *)__pyx_v_self->_domain), __pyx_v_self->_code); if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 76; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+                 ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_el.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_el.so
 [ 9/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -273,6 +310,13 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_py.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:7: warning: implicit declaration of function ‘interp_py’ [-Wimplicit-function-declaration]
+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+       ^
+build/cythonized/sage/ext/interpreters/wrapper_py.c:1455:17: warning: assignment makes pointer from integer without a cast [enabled by default]
+       __pyx_t_6 = interp_py(((PyTupleObject *)__pyx_v_args)->ob_item, __pyx_v_self->_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; __pyx_clineno = __LINE__; goto __pyx_L4_error;}
+                 ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_py.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_py.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_py.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_py.so
 [10/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -284,6 +328,10 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_rdf.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_11wrapper_rdf_11Wrapper_rdf_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_rdf.c:1807:3: warning: implicit declaration of function ‘interp_rdf’ [-Wimplicit-function-declaration]
+   __pyx_t_5 = interp_rdf(__pyx_v_c_args, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code); if (unlikely(__pyx_t_5 == -1094648009105371.0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 81; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rdf.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -fno-strict-aliasing -fno-tree-dominator-opts
 gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rdf.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rdf.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lcblas -latlas -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rdf.so
 [11/11] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c /usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.c -o build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o -fno-strict-aliasing -fno-tree-dominator-opts
@@ -295,9 +343,14 @@
 build/cythonized/sage/ext/interrupt/interrupt_api.h:18:0: note: this is the location of the previous definition
  #define _signals (*__pyx_api_vp_4sage_3ext_9interrupt_9interrupt__signals)
  ^
+build/cythonized/sage/ext/interpreters/wrapper_rr.c: In function ‘__pyx_pf_4sage_3ext_12interpreters_10wrapper_rr_10Wrapper_rr_4__call__’:
+build/cythonized/sage/ext/interpreters/wrapper_rr.c:3915:3: warning: implicit declaration of function ‘interp_rr’ [-Wimplicit-function-declaration]
+   __pyx_t_2 = interp_rr(__pyx_v_c_args, __pyx_v_retval->value, __pyx_v_self->_constants, __pyx_v_self->_py_constants, __pyx_v_self->_stack, __pyx_v_self->_code, ((PyObject *)__pyx_v_self->_domain)); if (unlikely(__pyx_t_2 == 0 && PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+   ^
 gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/python2.7 -I/usr/local/src/sage-config/local/lib/python2.7/site-packages/numpy/core/include -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/src/build/cythonized -I/usr/local/src/sage-config/src/build/cythonized/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c sage/ext/interpreters/interp_rr.c -o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -fno-strict-aliasing -fno-tree-dominator-opts
-Time to execute 11 commands: 1.71 seconds.
-Total time spent compiling C/C++ extensions: 1.77 seconds.
+gcc -pthread -shared -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -Wl,-rpath,/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/ext/interpreters/wrapper_rr.o build/temp.linux-x86_64-2.7/sage/ext/interpreters/interp_rr.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lmpfr -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_rr.so
+Time to execute 11 commands: 1.51 seconds.
+Total time spent compiling C/C++ extensions: 1.57 seconds.
 running install_lib
 copying build/lib.linux-x86_64-2.7/sage/plot/plot3d/parametric_surface.so -> /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/plot/plot3d
 copying build/lib.linux-x86_64-2.7/sage/ext/interpreters/wrapper_cdf.so -> /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/ext/interpreters
```




---

archive/issue_comments_269447.json:
```json
{
    "body": "OK, so it looks like we are back to step 1. A way to do things would be to generate headers with clean declarations (without DL_IMPORT, as suggested for instance in https://groups.google.com/forum/#!search/cython-users$20dll-linkage/cython-users/PehxC_cj5Ag/TJB7J-06s18J), i.e., revert partially #19796. I can do it, unless Jeroen has a better solution in mind.",
    "created_at": "2016-02-03T15:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269447",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

OK, so it looks like we are back to step 1. A way to do things would be to generate headers with clean declarations (without DL_IMPORT, as suggested for instance in https://groups.google.com/forum/#!search/cython-users$20dll-linkage/cython-users/PehxC_cj5Ag/TJB7J-06s18J), i.e., revert partially #19796. I can do it, unless Jeroen has a better solution in mind.



---

archive/issue_comments_269448.json:
```json
{
    "body": "Ideally, we should compile everything as one object file, then there are no linking issues. However, I couldn't get this to work in #19796. Maybe we should revisit this approach.",
    "created_at": "2016-02-03T21:25:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269448",
    "user": "https://github.com/jdemeyer"
}
```

Ideally, we should compile everything as one object file, then there are no linking issues. However, I couldn't get this to work in #19796. Maybe we should revisit this approach.



---

archive/issue_comments_269449.json:
```json
{
    "body": "Ok, so it turns out that this `DL_IMPORT` macro actually comes from Python:\n\nhttps://github.com/python/cpython/blob/2.7/Include/pyport.h#L806\n\nIt is defined so that by default it expands to `__declspec(dllimport)` so that in external code (extension modules, and other code that links with libpython), functions from Python are declared with `dllimport`.  However, if the special macro `Py_BUILD_CORE` is defined, `DL_IMPORT` expands, confusingly, to `__declspec(dllexport)`.  This so that when building Python itself the function declaration can be shared between translation units without incorrectly declaring the function `dllimport`.\n\nIncidentally, this macro was deprecated in Python as of Python 2.3, partly due to it being confusing (it seems to be missing outright in Python 3, so I don't know that Cython is even working properly in this case on Python 3...)\n\nWe can work around it by compiling with `-DPy_BUILD_CORE`, though I'm not sure yet what other implications that define has.\n\nIn the meantime Cython should be fixed to stop using this macro--instead it should add external declarations to a [.def file](https://msdn.microsoft.com/en-us/library/28d6s79h.aspx).  In fact distutils itself generates a `.def` when building extension modules on windows--it adds the `init<modulename>` function to the `EXPORTS` section.  gcc in Cygwin and Cygwin-derivatives know how to consume these `.def` files.\n\nIf Cython used this there might be some tension between Cython generating a .def, and the .def generated by distutils.  I don't know if there's a good way to somehow merge .def files.  But there is no doubt a solution--at worst Cython needs to monkeypatch the `cygwincompiler` in distutils.",
    "created_at": "2016-04-05T17:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269449",
    "user": "https://github.com/embray"
}
```

Ok, so it turns out that this `DL_IMPORT` macro actually comes from Python:

https://github.com/python/cpython/blob/2.7/Include/pyport.h#L806

It is defined so that by default it expands to `__declspec(dllimport)` so that in external code (extension modules, and other code that links with libpython), functions from Python are declared with `dllimport`.  However, if the special macro `Py_BUILD_CORE` is defined, `DL_IMPORT` expands, confusingly, to `__declspec(dllexport)`.  This so that when building Python itself the function declaration can be shared between translation units without incorrectly declaring the function `dllimport`.

Incidentally, this macro was deprecated in Python as of Python 2.3, partly due to it being confusing (it seems to be missing outright in Python 3, so I don't know that Cython is even working properly in this case on Python 3...)

We can work around it by compiling with `-DPy_BUILD_CORE`, though I'm not sure yet what other implications that define has.

In the meantime Cython should be fixed to stop using this macro--instead it should add external declarations to a [.def file](https://msdn.microsoft.com/en-us/library/28d6s79h.aspx).  In fact distutils itself generates a `.def` when building extension modules on windows--it adds the `init<modulename>` function to the `EXPORTS` section.  gcc in Cygwin and Cygwin-derivatives know how to consume these `.def` files.

If Cython used this there might be some tension between Cython generating a .def, and the .def generated by distutils.  I don't know if there's a good way to somehow merge .def files.  But there is no doubt a solution--at worst Cython needs to monkeypatch the `cygwincompiler` in distutils.



---

archive/issue_comments_269450.json:
```json
{
    "body": "*Update:* It turns out `Extension` objects can take an `export_symbols` argument, and `cygwincompiler` consumes this list when generating the .def file to use at link time.  So all Cython needs to do is add the appropriate symbol names to the extension's `export_symbols` during the cythonization process, rather than adding `DL_IMPORT` in the header.",
    "created_at": "2016-04-05T17:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269450",
    "user": "https://github.com/embray"
}
```

*Update:* It turns out `Extension` objects can take an `export_symbols` argument, and `cygwincompiler` consumes this list when generating the .def file to use at link time.  So all Cython needs to do is add the appropriate symbol names to the extension's `export_symbols` during the cythonization process, rather than adding `DL_IMPORT` in the header.



---

archive/issue_comments_269451.json:
```json
{
    "body": "After grepping through the source code, it looks like defining `Py_BUILD_CORE` *may* have non-trivial consequences.  For example it changes the value of `Py_TPFLAGS_DEFAULT` which could impact the behavior of classes defined in Cython.\n\nIt might be best to use a temporary workaround for `sage.interpreters` until this is fixed in Cython (see https://github.com/cython/cython/pull/360)",
    "created_at": "2016-04-08T11:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269451",
    "user": "https://github.com/embray"
}
```

After grepping through the source code, it looks like defining `Py_BUILD_CORE` *may* have non-trivial consequences.  For example it changes the value of `Py_TPFLAGS_DEFAULT` which could impact the behavior of classes defined in Cython.

It might be best to use a temporary workaround for `sage.interpreters` until this is fixed in Cython (see https://github.com/cython/cython/pull/360)



---

archive/issue_comments_269452.json:
```json
{
    "body": "FYI I'm almost finished developing a workaround to use until/when the Cython issues are improved on.  Will add some TODO comments to to remove the workaround later when we can rely on the fix in Cython.",
    "created_at": "2016-04-12T10:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269452",
    "user": "https://github.com/embray"
}
```

FYI I'm almost finished developing a workaround to use until/when the Cython issues are improved on.  Will add some TODO comments to to remove the workaround later when we can rely on the fix in Cython.



---

archive/issue_comments_269453.json:
```json
{
    "body": "Does Cython pass its test-suite on Cygwin?",
    "created_at": "2016-04-22T15:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269453",
    "user": "https://github.com/jdemeyer"
}
```

Does Cython pass its test-suite on Cygwin?



---

archive/issue_comments_269454.json:
```json
{
    "body": "That's a good question--I'll try it and see.  I think it should.\n\nSorry for the delay on the patch. Got held up by other build issues that resulted from trying to do a debug build >_<",
    "created_at": "2016-04-25T10:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269454",
    "user": "https://github.com/embray"
}
```

That's a good question--I'll try it and see.  I think it should.

Sorry for the delay on the patch. Got held up by other build issues that resulted from trying to do a debug build >_<



---

archive/issue_comments_269455.json:
```json
{
    "body": "Nope--actually quite a few test failures and outright errors in Cygwin. I don't know if that's known to be the case, or if it's just me, or if the tests are not often run on Cygwin.\n\nOne possible issue is that the laptop I'm testing on is running low on disk space.  I'll try to clean some up and try again, but I have a feeling that wasn't the only issue. (I still have ~7GB free)",
    "created_at": "2016-04-25T13:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269455",
    "user": "https://github.com/embray"
}
```

Nope--actually quite a few test failures and outright errors in Cygwin. I don't know if that's known to be the case, or if it's just me, or if the tests are not often run on Cygwin.

One possible issue is that the laptop I'm testing on is running low on disk space.  I'll try to clean some up and try again, but I have a feeling that wasn't the only issue. (I still have ~7GB free)



---

archive/issue_comments_269456.json:
```json
{
    "body": "Out of curiosity I also ran the basic tests for Numpy (1.11) and got a number of failures: https://gist.github.com/embray/41845cf29076ba3a1dc42df6c1ec5a4e\n\nI think some of these I've seen before and may even have already been reported, such as the complex function failures.  Others I'm not sure about.",
    "created_at": "2016-04-25T13:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269456",
    "user": "https://github.com/embray"
}
```

Out of curiosity I also ran the basic tests for Numpy (1.11) and got a number of failures: https://gist.github.com/embray/41845cf29076ba3a1dc42df6c1ec5a4e

I think some of these I've seen before and may even have already been reported, such as the complex function failures.  Others I'm not sure about.



---

archive/issue_comments_269457.json:
```json
{
    "body": "Replying to [comment:31 embray]:\n> Nope--actually quite a few test failures and outright errors in Cygwin. I don't know if that's known to be the case, or if it's just me, or if the tests are not often run on Cygwin.\n\nThe reason that I asked is that perhaps some of the some test failures are exactly caused by the same reason as this ticket. That would make a stronger case for upstream Cython that their `DL_IMPORT()` stuff is quite broken.",
    "created_at": "2016-04-25T13:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269457",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:31 embray]:
> Nope--actually quite a few test failures and outright errors in Cygwin. I don't know if that's known to be the case, or if it's just me, or if the tests are not often run on Cygwin.

The reason that I asked is that perhaps some of the some test failures are exactly caused by the same reason as this ticket. That would make a stronger case for upstream Cython that their `DL_IMPORT()` stuff is quite broken.



---

archive/issue_comments_269458.json:
```json
{
    "body": "I think that a lot of the test errors for Cython that I'm having on my system might be due to some local issues.  But I did see some errors that looked like they might be related.",
    "created_at": "2016-04-25T13:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269458",
    "user": "https://github.com/embray"
}
```

I think that a lot of the test errors for Cython that I'm having on my system might be due to some local issues.  But I did see some errors that looked like they might be related.



---

archive/issue_comments_269459.json:
```json
{
    "body": "Not sure the problem is from here, but the patchbot quasar got a SIGSEGV while building the documentation with the branch applied.",
    "created_at": "2016-12-27T23:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269459",
    "user": "https://github.com/videlec"
}
```

Not sure the problem is from here, but the patchbot quasar got a SIGSEGV while building the documentation with the branch applied.



---

archive/issue_comments_269460.json:
```json
{
    "body": "I wouldn't worry too much about this branch.  I already fixed this a different way, but my fix depends on #20730 which is still languishing.",
    "created_at": "2016-12-29T10:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269460",
    "user": "https://github.com/embray"
}
```

I wouldn't worry too much about this branch.  I already fixed this a different way, but my fix depends on #20730 which is still languishing.



---

archive/issue_comments_269461.json:
```json
{
    "body": "This ticket in his current state is breaking the patchbots.\n\nFor this reason, setting to needs_info as a safety measure.\n\nI would prefer it to be closed.\n\nEDIT and for good sake, let me also remove the branch: u/gouezel/DL_IMPORT",
    "created_at": "2017-03-02T16:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269461",
    "user": "https://github.com/fchapoton"
}
```

This ticket in his current state is breaking the patchbots.

For this reason, setting to needs_info as a safety measure.

I would prefer it to be closed.

EDIT and for good sake, let me also remove the branch: u/gouezel/DL_IMPORT



---

archive/issue_comments_269462.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-03-02T16:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269462",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_events_054319.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-04T08:51:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19631#event-54319"
}
```



---

archive/issue_comments_269463.json:
```json
{
    "body": "This can be closed now since #20730 was completed.",
    "created_at": "2017-07-04T08:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269463",
    "user": "https://github.com/embray"
}
```

This can be closed now since #20730 was completed.



---

archive/issue_events_054320.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-04T08:51:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19631#event-54320"
}
```



---

archive/issue_comments_269464.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2017-07-04T08:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19631#issuecomment-269464",
    "user": "https://github.com/embray"
}
```

Resolution: worksforme
