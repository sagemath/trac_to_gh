# Issue 20839: make pyx a new style pip package

Issue created by migration from https://trac.sagemath.org/ticket/21076

Original creator: vdelecroix

Original creation time: 2016-07-23 21:15:17

CC:  vbraun jdemeyer

The installation of the old style package pyx breaks pip for encoding reason.

```
$ sage - i pyx
SNIP installation log
$ sage -pip uninstall pyx
Traceback (most recent call last):
  File "/opt/sage/local/bin/pip", line 5, in <module>
    from pkg_resources import load_entry_point
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2927, in <module>
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2913, in _call_aside
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2940, in _initialize_master_working_set
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 626, in _build_master
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 619, in __init__
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 675, in add_entry
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 1982, in find_on_path
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2370, in from_location
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2687, in _reload_version
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2335, in _version_from_file
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 2503, in _get_metadata
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 1873, in get_metadata_lines
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 1863, in get_metadata
  File "/opt/sage/local/lib/python/codecs.py", line 302, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xf6 in position 165: invalid start byte in /opt/sage/local/lib/python2.7/site-packages/PyX-0.10-py2.7.egg-info
```


We propose to make pyx a "pip style" package and remove the old style spkg from the mirrors.


---

Comment by vdelecroix created at 2016-07-23 21:24:55

Sadly pyx is now Python 3 only and we need to do a version specific installation

```
$ sage -pip install pyx==0.12.1
```



---

Comment by vdelecroix created at 2016-07-23 21:55:45

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-07-23 21:55:45

New commits:


---

Comment by jdemeyer created at 2016-07-25 08:40:31

Changing type from defect to enhancement.


---

Comment by jdemeyer created at 2016-07-25 08:40:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-27 20:25:02

Resolution: fixed
