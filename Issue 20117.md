# Issue 20117: PPLBackend: Add support for integer variables

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2016-04-04 07:30:19

CC:  dimpase vdelecroix jdemeyer

Keywords: lp

PPL's solver is a rational *MIP* solver. 
Its support for integer variables should be exposed in Sage.
#20351 does this for the PPL wrapper classes.

This ticket updates the `PPLBackend` class.


---

Comment by mkoeppe created at 2016-04-05 18:56:37

Currently this branch is on top of the branches for #20351,#20303.

Needs review.
----
Last 10 new commits:


---

Comment by mkoeppe created at 2016-04-05 18:56:37

Changing status from new to needs_review.


---

Comment by dimpase created at 2016-04-05 19:46:53

hmm:

```
cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
```

should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?


---

Comment by mkoeppe created at 2016-04-05 19:55:06

Replying to [comment:5 dimpase]:
> hmm:
> {{{
> cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
> }}}
> should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?

This idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. 
I would probably express this by making all arglist-default `None` to indicate complicated defaulting semantics. But it's not the job of this ticket to make changes throughout all backends.


---

Comment by dimpase created at 2016-04-05 20:09:12

Replying to [comment:6 mkoeppe]:
> Replying to [comment:5 dimpase]:
> > hmm:
> > {{{
> > cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
> > }}}
> > should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?
> 
> This idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. 

but this is a line from your update, why do you set `continuous=False`?
Something you changed while developing and then forgot to revert?


---

Comment by mkoeppe created at 2016-04-05 20:17:41

No, `continuous=True` in the arglist cannot work
because then one cannot distinguish 
 - `add_variable(..., binary=True)` (which should create a binary variable)
 - `add_variable(..., binary=True, continuous=True)` (which should raise an error).
All backends implement the defaulting to continuous variables imperatively.

Previously it did not matter because the PPL backend was simply ignoring these parameters altogether.

(I've added a dicussion of this interface to ticket #20324.)


---

Comment by dimpase created at 2016-04-05 20:24:25

OK, I see. I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`.


---

Comment by mkoeppe created at 2016-04-05 20:28:51

Replying to [comment:9 dimpase]:
> I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`. 

I agree; at least it matches `is_variable_continuous` etc.; but see `set_variable_type`, which expresses the same thing using 1, 0, -1. 
It's one of several idiosyncrasies of the backend interface.


---

Comment by dimpase created at 2016-04-05 20:38:06

How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)
Similarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?


---

Comment by mkoeppe created at 2016-04-05 21:34:01

Replying to [comment:11 dimpase]:
> How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)
> Similarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?

Sounds good; I have created ticket #20362 for this. Let's move further discussion of backend interface redesign there.

In the meantime, this ticket still needs review.


---

Comment by dimpase created at 2016-04-05 22:17:05

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2016-04-05 22:17:05

OK, looks good.


---

Comment by vbraun created at 2016-04-06 23:03:32

Resolution: fixed
