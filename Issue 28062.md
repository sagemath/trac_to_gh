# Issue 28062: Change default values of parameters loops and multiedges

Issue created by migration from https://trac.sagemath.org/ticket/28299

Original creator: dcoudert

Original creation time: 2019-07-31 08:05:08

After the removal of deprecation warning #15706 in #28290, it is time to change the default values of parameters `loops` and `multi edges` in the (Di)Graph constructors.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by @jfraymond created at 2020-04-15 12:23:02

Hello,

After looking at this ticket in detail I am unsure of the desired changes.
When the parameters `loops` and `multiedges` have their default value (`None`), graphs built from an integer or a list of edges are already loopless and simple. From `graphs.py`:


```python
        elif format == 'int':
            self.allow_loops(bool(loops), check=False)
            self.allow_multiple_edges(bool(multiedges), check=False)
            ...
```

and

```python
        elif format == 'list_of_edges':
            self.allow_multiple_edges(bool(multiedges), check=False)
            self.allow_loops(bool(loops), check=False)
            ...
```


(Similar for digraphs.) It was changed in #15706 when removing the deprecation warning.

However having `loops=False` and `multiedges=False` by default seems dangerous because it will break the detection of the parameters when the graph is given, for instance, as an adjacency matrix:

```
sage: Graph(matrix([[0,2],[2,0]]))
Multi-graph on 2 vertices
sage: Graph(matrix([[1,2],[2,1]]))
Looped multi-graph on 2 vertices
sage: Graph(matrix([[1,0],[0,1]]))
Looped graph on 2 vertices
```

But

```
sage: Graph(matrix([[1,0],[0,1]]), loops=False)
Traceback (most recent call last):
ValueError: the adjacency matrix of a loopless graph must have zeroes on the diagonal
```

Similarily, when ones creates a graph from a sparse6 string, they have no obvious way to guess whether the graph has mutliedges/loops or not. (Currently loops and multiedges are allowed by default in this case.)


---

Comment by dcoudert created at 2020-04-15 16:49:18

You are perfectly right, I did not though about these cases. Thanks.

So may be we can set this ticket to invalid.


---

Comment by chapoton created at 2020-04-15 19:32:50

Resolution: invalid
