# Issue 13155: Allow conversion of strings to iterated polynomial rings

Issue created by migration from https://trac.sagemath.org/ticket/13327

Original creator: novoselt

Original creation time: 2012-08-02 20:32:07

Assignee: malb

It is possible to convert strings and symbolic expressions to iterated polynomial rings in a single variable, but not many if the string contains names of coefficients:

```
sage: Rs = QQ["a"]["b"]
sage: Rs("a*b")
a*b
sage: Rm = QQ["a"]["b, c"]
sage: Rm("a*b")
Traceback (most recent call last):
...
TypeError: unable to convert string
```


The patch introduces `gens_dict_recursive` method and uses it instead of `gens_dict` in the conversion code:

```
sage: Rs = QQ["a"]["b"]
sage: Rs("a*b")
a*b
sage: Rm = QQ["a"]["b, c"]
sage: Rm("a*b")
a*b
sage: Rm.gens_dict_recursive()
{'a': a, 'c': c, 'b': b}
```



---

Comment by novoselt created at 2012-08-02 20:38:35

Changing status from new to needs_review.


---

Comment by chapoton created at 2012-08-27 09:26:58

Looks good to me. Maybe one could check 

```
Rm("a*b").parent()
```

to be sure that it lands where it should ?


---

Attachment

OK, added the check!


---

Comment by chapoton created at 2012-08-27 18:02:44

Ok, looks good to me. Positive review.

By the way, what do you think of that :


```
sage: QQ["a, a"]           
Multivariate Polynomial Ring in a, a over Rational Field
```



---

Comment by chapoton created at 2012-08-27 18:02:44

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2012-08-27 19:43:28

I think this is horrible, as well as

```
sage: QQ["a"]["a"]
Univariate Polynomial Ring in a over Univariate Polynomial Ring in a over Rational Field
```

but some people think that it does not matter how something is printing and the name is meaningless.

From my point of view, all generator names should be distinct and different from generator names used in the base ring (recursively). Note that if this is enforced, then it is not possible to create polynomial rings with symbolic coefficients, since "any name is in SR". Since such polynomials are important (at least to me), the first step is to have symbolic rings with only explicitly specified names allows as variables. Then constructors can check for name collisions.


---

Comment by jdemeyer created at 2012-09-06 05:24:23

Resolution: fixed
