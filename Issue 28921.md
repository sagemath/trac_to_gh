# Issue 28921: Allow binary distributions to prevent rebuilding of sagelib

Issue created by migration from https://trac.sagemath.org/ticket/29158

Original creator: embray

Original creation time: 2020-02-06 11:51:24

CC:  vbraun dimpase jdemeyer

This slightly odd ticket is needed for the Windows version of Sage, and might be useful in other binary distributions (e.g. Docker?) in which the `src/build` directory has been stripped out.

At issue here is the fact that, if you install an optional package with `sage -i`, after the optional package is installed it runs:


```
touch "$SAGE_ROOT/configure" && $MAKE all-build
```


If `src/build` has been stripped out, this means that _all_ of sagelib gets rebuilt, even if it isn't necessary.

This solution is not perfect, however, because sagelib does have some "optional extensions", such that when installing certain optional packages it is necessary to rebuild at least part of sagelib.

So I'm open to better ideas on this, but I do need it right now for the Windows distribution.


---

Comment by embray created at 2020-02-06 11:51:29

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-02-17 01:14:34

(dup of #29055)


---

Comment by mkoeppe created at 2020-02-17 01:18:10

In the CI test of `sage-numerical-backends-coin`, I just patch this away using `sed`:
https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/Dockerfile-sage_binary#L39


---

Comment by mkoeppe created at 2020-02-17 15:32:00

Changing priority from major to critical.


---

Comment by mkoeppe created at 2020-03-29 15:10:26

Changing status from needs_review to needs_info.


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.


---

Comment by mkoeppe created at 2022-01-08 19:19:26

Work on improving the binary distribution is clearly not happening; we can close it as outdated - depending on #33131.


---

Comment by mkoeppe created at 2022-01-08 19:19:26

Changing status from needs_info to needs_review.


---

Comment by dimpase created at 2022-01-13 16:50:03

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-02-12 18:02:50

Resolution: invalid
