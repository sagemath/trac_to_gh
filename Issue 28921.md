# Issue 28921: Allow binary distributions to prevent rebuilding of sagelib

archive/issues_028921.json:
```json
{
    "body": "CC:  @vbraun @dimpase @jdemeyer\n\nThis slightly odd ticket is needed for the Windows version of Sage, and might be useful in other binary distributions (e.g. Docker?) in which the `src/build` directory has been stripped out.\n\nAt issue here is the fact that, if you install an optional package with `sage -i`, after the optional package is installed it runs:\n\n```\ntouch \"$SAGE_ROOT/configure\" && $MAKE all-build\n```\n\nIf `src/build` has been stripped out, this means that *all* of sagelib gets rebuilt, even if it isn't necessary.\n\nThis solution is not perfect, however, because sagelib does have some \"optional extensions\", such that when installing certain optional packages it is necessary to rebuild at least part of sagelib.\n\nSo I'm open to better ideas on this, but I do need it right now for the Windows distribution.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29158\n\n",
    "created_at": "2020-02-06T11:51:24Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Allow binary distributions to prevent rebuilding of sagelib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28921",
    "user": "https://github.com/embray"
}
```
CC:  @vbraun @dimpase @jdemeyer

This slightly odd ticket is needed for the Windows version of Sage, and might be useful in other binary distributions (e.g. Docker?) in which the `src/build` directory has been stripped out.

At issue here is the fact that, if you install an optional package with `sage -i`, after the optional package is installed it runs:

```
touch "$SAGE_ROOT/configure" && $MAKE all-build
```

If `src/build` has been stripped out, this means that *all* of sagelib gets rebuilt, even if it isn't necessary.

This solution is not perfect, however, because sagelib does have some "optional extensions", such that when installing certain optional packages it is necessary to rebuild at least part of sagelib.

So I'm open to better ideas on this, but I do need it right now for the Windows distribution.

Issue created by migration from https://trac.sagemath.org/ticket/29158





---

archive/issue_comments_408933.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-02-06T11:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408933",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_408934.json:
```json
{
    "body": "(dup of #29055)",
    "created_at": "2020-02-17T01:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408934",
    "user": "https://github.com/mkoeppe"
}
```

(dup of #29055)



---

archive/issue_comments_408935.json:
```json
{
    "body": "In the CI test of `sage-numerical-backends-coin`, I just patch this away using `sed`:\nhttps://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/Dockerfile-sage_binary#L39",
    "created_at": "2020-02-17T01:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408935",
    "user": "https://github.com/mkoeppe"
}
```

In the CI test of `sage-numerical-backends-coin`, I just patch this away using `sed`:
https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/Dockerfile-sage_binary#L39



---

archive/issue_comments_408936.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-02-17T15:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408936",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_408937.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-03-29T15:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408937",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_events_074017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-20T23:12:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74017"
}
```



---

archive/issue_events_074018.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T17:31:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74018"
}
```



---

archive/issue_events_074019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T17:31:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74019"
}
```



---

archive/issue_comments_408938.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408938",
    "user": "https://github.com/mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_074020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74020"
}
```



---

archive/issue_events_074021.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74021"
}
```



---

archive/issue_events_074022.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74022"
}
```



---

archive/issue_events_074023.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74023"
}
```



---

archive/issue_comments_408939.json:
```json
{
    "body": "Work on improving the binary distribution is clearly not happening; we can close it as outdated - depending on #33131.",
    "created_at": "2022-01-08T19:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408939",
    "user": "https://github.com/mkoeppe"
}
```

Work on improving the binary distribution is clearly not happening; we can close it as outdated - depending on #33131.



---

archive/issue_events_074024.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-08T19:19:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74024"
}
```



---

archive/issue_events_074025.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-08T19:19:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74025"
}
```



---

archive/issue_comments_408940.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-01-08T19:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408940",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_408941.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-01-13T16:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408941",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_408942.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-02-12T18:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28921#issuecomment-408942",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_074026.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-12T18:02:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28921",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28921#event-74026"
}
```
