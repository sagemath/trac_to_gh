# Issue 22546: add character functionality for libgap groups

Issue created by migration from Trac.

Original creator: bhutz

Original creation time: 2017-04-08 01:00:40

The character functionality for permutation groups is implemented essentially as calls to GAP.  But since it is in implemeted in permutation group, groups like finitely generated matrix groups cannot use any of that functionality. Seems like this functionality should also live in the libgap_mixin interface so that any group gap can handle can have access to character functionality.


---

Comment by bhutz created at 2017-04-08 01:07:22

Changing status from new to needs_review.


---

Comment by bhutz created at 2017-04-08 01:07:22

Since this functionality just uses GAP calls, seems like it should be callable for groups which are accepted by GAP.

All these functions implemented for permutation groups, but those don't seem to inherit from the libgap library interface, so I've just added to that interface.
----
New commits:


---

Comment by tscrim created at 2017-04-08 03:50:06

The reason why I could see this was only for permutation groups is because these won't work for infinite groups:

```
sage: G = GL(2, ZZ)
sage: G._gap_().NrConjugacyClasses()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: libGAP: Error, no method found! Error, no 4th choice method found for `ConjugacyClasses' on 1 arguments
```

So I think we should add a check if the group is infinite and raise a `NotImplementedError` if it is.

Note that things like `conjugacy_classes` results in the same error, but I think that should have a similar check (or catch the exception and raise a `NotImplementedError` in its place).

Do we also want to remove the corresponding methods from the permutation group? Is there a difference by using `ClassFunction_libgap` over `ClassFunction_gap`.

Two other little things, `Returns` -> `Return` and

```
- ``values`` -- a list of values of the character
```

with the double dash after the name.


---

Comment by bhutz created at 2017-04-08 15:50:21

A check for finite sounds good since the error from GAP isn't very informative.  I also noticed when doing this that the function

in permgroup.py

```
conjugacy_class_reprensentatives()
```


in libgap_mixin

```
conugacy_classes_reprensentatives()
```


So GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?


The class_function.py file says not to use ClassFunction_gap.


Since permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.


---

Comment by tscrim created at 2017-04-08 16:16:52

Replying to [comment:3 bhutz]:
> in permgroup.py
> {{{
> conjugacy_class_reprensentatives()
> }}}
> 
> in libgap_mixin
> {{{
> conugacy_classes_reprensentatives()
> }}}
> 
> So GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?

I only see `conjugacy_classes_reprensentatives()` for generic permutation groups (the note in the `AUTHORS` block is a typo). So there shouldn't be anything to change.

> The class_function.py file says not to use ClassFunction_gap.

Ah, I see. So it is some old code in the generic case that needs to ported over to use libgap.

> Since permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.

Ah, yes, and rightly so as a good part of the functionality is done purely on the Sage side.


---

Comment by bhutz created at 2017-04-08 21:53:37

err..sorry I got the files backwards for the function names. Regardless, they are different in the two different files and I'd like to make them the same while I'm changing related functionality. So, does that necessitate a deprecation or can I just change it?


---

Comment by tscrim created at 2017-04-09 15:29:57

It does require a deprecation because it is a part of the public interface. +1 for doing so (`deprecated_function_alias` is a good way to go).


---

Comment by git created at 2017-04-10 01:56:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2017-04-10 01:57:19

finite check added as well as function rename and deprecation.


---

Comment by tscrim created at 2017-04-10 04:32:30

LGTM modulo one nitpick: error messages should start with a lower case letter.


---

Comment by git created at 2017-04-10 11:49:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2017-04-10 11:50:59

oops. I knew that...

Fixed.


---

Comment by tscrim created at 2017-04-14 05:59:17

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-04-14 05:59:17

Thanks.


---

Comment by vbraun created at 2017-04-14 19:56:12

Resolution: fixed


---

Comment by vklein created at 2019-05-09 09:54:51

Fix the branch name after a mistake
