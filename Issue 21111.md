# Issue 21111: problems with __slots__

Issue created by migration from https://trac.sagemath.org/ticket/21348

Original creator: vdelecroix

Original creation time: 2016-08-26 15:22:57

Python `__slots__` allows to create Python classes without `__dict__` attribute (that is there is a fixed set of attributes). This is done with declaring this list as in

```
class A(object):
    __slots__ = ["attr1", "attr2"]
```

However using this feature breaks a certain number of Sage features

1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as "extension type". It might be fine but should be documented.

2. `cached_method` does not work properly

```
class A(object):
    __slots__ = []
    @cached_method
    def f(self):
        print "compute"
        return 1
```

  gives

```
sage: a = A()
sage: a.f()
compute
1
sage: a.f()
compute
1
```



---

Comment by jdemeyer created at 2016-08-26 15:29:51

Replying to [ticket:21348 vdelecroix]:
> 1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as "extension type". It might be fine but should be documented.

And the function `is_extension_type` should be renamed to what it really tests. For example, `has_writable_dict` might be a better name.


---

Comment by vdelecroix created at 2016-08-26 15:33:38

Changing type from PLEASE CHANGE to defect.


---

Comment by vdelecroix created at 2016-08-26 15:33:38

Changing component from PLEASE CHANGE to performance.


---

Comment by vdelecroix created at 2016-08-26 15:34:26

Right. I just created the ticket to weight pros and cons... and whether some of Sage features can be adapted.


---

Comment by vdelecroix created at 2016-08-26 15:36:24

And BTW, `type` has a non-zero dict offset

```
sage: from sage.structure.misc import is_extension_type
sage: is_extension_type(type)
False
```

