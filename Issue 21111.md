# Issue 21111: problems with __slots__

archive/issues_021111.json:
```json
{
    "body": "Python `__slots__` allows to create Python classes without `__dict__` attribute (that is there is a fixed set of attributes). This is done with declaring this list as in\n\n```\nclass A(object):\n    __slots__ = [\"attr1\", \"attr2\"]\n```\n\nHowever using this feature breaks a certain number of Sage features\n\n1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as \"extension type\". It might be fine but should be documented.\n\n2. `cached_method` does not work properly\n\n```\nclass A(object):\n    __slots__ = []\n    @cached_method\n    def f(self):\n        print \"compute\"\n        return 1\n```\n\n  gives\n\n```\nsage: a = A()\nsage: a.f()\ncompute\n1\nsage: a.f()\ncompute\n1\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21348\n\n",
    "created_at": "2016-08-26T15:22:57Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "problems with __slots__",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21111",
    "user": "@videlec"
}
```
Python `__slots__` allows to create Python classes without `__dict__` attribute (that is there is a fixed set of attributes). This is done with declaring this list as in

```
class A(object):
    __slots__ = ["attr1", "attr2"]
```

However using this feature breaks a certain number of Sage features

1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as "extension type". It might be fine but should be documented.

2. `cached_method` does not work properly

```
class A(object):
    __slots__ = []
    @cached_method
    def f(self):
        print "compute"
        return 1
```

  gives

```
sage: a = A()
sage: a.f()
compute
1
sage: a.f()
compute
1
```


Issue created by migration from https://trac.sagemath.org/ticket/21348





---

archive/issue_comments_292488.json:
```json
{
    "body": "Replying to [ticket:21348 vdelecroix]:\n> 1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as \"extension type\". It might be fine but should be documented.\n\nAnd the function `is_extension_type` should be renamed to what it really tests. For example, `has_writable_dict` might be a better name.",
    "created_at": "2016-08-26T15:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21111#issuecomment-292488",
    "user": "@jdemeyer"
}
```

Replying to [ticket:21348 vdelecroix]:
> 1. The function `is_extension_type` from `sage.structure.misc`. Such object would be recognized as "extension type". It might be fine but should be documented.

And the function `is_extension_type` should be renamed to what it really tests. For example, `has_writable_dict` might be a better name.



---

archive/issue_comments_292489.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-08-26T15:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21111#issuecomment-292489",
    "user": "@videlec"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_292490.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to performance.",
    "created_at": "2016-08-26T15:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21111#issuecomment-292490",
    "user": "@videlec"
}
```

Changing component from PLEASE CHANGE to performance.



---

archive/issue_comments_292491.json:
```json
{
    "body": "Right. I just created the ticket to weight pros and cons... and whether some of Sage features can be adapted.",
    "created_at": "2016-08-26T15:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21111#issuecomment-292491",
    "user": "@videlec"
}
```

Right. I just created the ticket to weight pros and cons... and whether some of Sage features can be adapted.



---

archive/issue_comments_292492.json:
```json
{
    "body": "And BTW, `type` has a non-zero dict offset\n\n```\nsage: from sage.structure.misc import is_extension_type\nsage: is_extension_type(type)\nFalse\n```\n",
    "created_at": "2016-08-26T15:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21111#issuecomment-292492",
    "user": "@videlec"
}
```

And BTW, `type` has a non-zero dict offset

```
sage: from sage.structure.misc import is_extension_type
sage: is_extension_type(type)
False
```

