# Issue 13445: Implement sigma.domain() and sigma.codomain() for sigma a permutation

archive/issues_013445.json:
```json
{
    "body": "Assignee: joyner\n\nCC:  sage-combinat @orlitzky\n\nKeywords: beginner, agregation\n\nCurrently one needs to go through the parent of a permutation to get\nits domain and codomain:\n\n```\n    sage: G = SymmetricGroup(8)\n    sage: g = G.an_element()\n    sage: g.parent().domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\nOne would want to have shorthands:\n\n```\n    sage: g.domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n    sage: g.codomain()\n```\n\nlike there are for most other maps in Sage:\n\n```\n    sage: F = FiniteSetMaps(8)\n    sage: f = F.an_element()\n    sage: f.domain()\n    {0, .., 7}\n    sage: f.codomain()\n    {0, .., 7}\n```\n\nBonus points for:\n\n```\n    sage: g.image()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13649\n\n",
    "created_at": "2012-10-24T08:50:50Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Implement sigma.domain() and sigma.codomain() for sigma a permutation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13445",
    "user": "https://github.com/nthiery"
}
```
Assignee: joyner

CC:  sage-combinat @orlitzky

Keywords: beginner, agregation

Currently one needs to go through the parent of a permutation to get
its domain and codomain:

```
    sage: G = SymmetricGroup(8)
    sage: g = G.an_element()
    sage: g.parent().domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
```

One would want to have shorthands:

```
    sage: g.domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
    sage: g.codomain()
```

like there are for most other maps in Sage:

```
    sage: F = FiniteSetMaps(8)
    sage: f = F.an_element()
    sage: f.domain()
    {0, .., 7}
    sage: f.codomain()
    {0, .., 7}
```

Bonus points for:

```
    sage: g.image()
    {1, 2, 3, 4, 5, 6, 7, 8}
```


Issue created by migration from https://trac.sagemath.org/ticket/13649





---

archive/issue_comments_165539.json:
```json
{
    "body": "Attachment [trac_13649_domain_alias.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_alias.patch) by @Lazza created at 2012-12-10 16:46:07",
    "created_at": "2012-12-10T16:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165539",
    "user": "https://github.com/Lazza"
}
```

Attachment [trac_13649_domain_alias.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_alias.patch) by @Lazza created at 2012-12-10 16:46:07



---

archive/issue_comments_165540.json:
```json
{
    "body": "I have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.",
    "created_at": "2012-12-10T16:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165540",
    "user": "https://github.com/Lazza"
}
```

I have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.



---

archive/issue_comments_165541.json:
```json
{
    "body": "codomain = range of a map. For a permutation, it is the same as the domain.",
    "created_at": "2012-12-10T18:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165541",
    "user": "https://github.com/vbraun"
}
```

codomain = range of a map. For a permutation, it is the same as the domain.



---

archive/issue_comments_165542.json:
```json
{
    "body": "Does that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?",
    "created_at": "2012-12-10T20:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165542",
    "user": "https://github.com/Lazza"
}
```

Does that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?



---

archive/issue_comments_165543.json:
```json
{
    "body": "Replying to [comment:3 lazza]:\n> Should I do it at the element level or in the parent set?\n\n\nI'd say both. Everything with a `domain()` would ideally have a `codomain()`.",
    "created_at": "2012-12-10T21:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165543",
    "user": "https://github.com/vbraun"
}
```

Replying to [comment:3 lazza]:
> Should I do it at the element level or in the parent set?


I'd say both. Everything with a `domain()` would ideally have a `codomain()`.



---

archive/issue_comments_165544.json:
```json
{
    "body": "Attachment [trac_13649_added_codomain.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_added_codomain.patch) by @Lazza created at 2012-12-11 12:18:52\n\nI think I've \"implemented\" the alias correctly. Being my first contribution of course means I'm not exactly sure.",
    "created_at": "2012-12-11T12:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165544",
    "user": "https://github.com/Lazza"
}
```

Attachment [trac_13649_added_codomain.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_added_codomain.patch) by @Lazza created at 2012-12-11 12:18:52

I think I've "implemented" the alias correctly. Being my first contribution of course means I'm not exactly sure.



---

archive/issue_comments_165545.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-12-11T12:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165545",
    "user": "https://github.com/Lazza"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_165546.json:
```json
{
    "body": "Changing keywords from \"beginner, agregation\" to \"beginner, aggregation\".",
    "created_at": "2012-12-27T04:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165546",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "beginner, agregation" to "beginner, aggregation".



---

archive/issue_comments_165547.json:
```json
{
    "body": "Replying to [comment:2 vbraun]:\n> codomain = range of a map.\n\n\nWell, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?",
    "created_at": "2013-01-07T21:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165547",
    "user": "https://github.com/kini"
}
```

Replying to [comment:2 vbraun]:
> codomain = range of a map.


Well, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?



---

archive/issue_comments_165548.json:
```json
{
    "body": "Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.",
    "created_at": "2013-01-07T21:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165548",
    "user": "https://github.com/kini"
}
```

Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.



---

archive/issue_comments_165549.json:
```json
{
    "body": "For me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid \"range\" in Sage altogether and only have domain and codomain. \n\nhttp://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology",
    "created_at": "2013-01-07T22:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165549",
    "user": "https://github.com/vbraun"
}
```

For me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid "range" in Sage altogether and only have domain and codomain. 

http://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology



---

archive/issue_comments_165550.json:
```json
{
    "body": "Replying to [comment:8 kini]:\n> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.\n\n\nAs far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.\n\nCheers,\n                             Nicolas",
    "created_at": "2013-01-09T21:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165550",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:8 kini]:
> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.


As far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.

Cheers,
                             Nicolas



---

archive/issue_comments_165551.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-03-05T06:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165551",
    "user": "https://github.com/KPanComputes"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_165552.json:
```json
{
    "body": "I am setting this to needs work for the following reasons: \n\nMAJOR:\n\n1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). \n\n2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! \n\n---\n\nMINOR:\n\n1. Fullstops please! \n2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: \"returns\"ing instead of \"return\"ing. So, you may not change this in this patch.) \n\nModulo these, your patch is good to go. ~KnS",
    "created_at": "2013-03-05T06:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165552",
    "user": "https://github.com/KPanComputes"
}
```

I am setting this to needs work for the following reasons: 

MAJOR:

1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). 

2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! 

---

MINOR:

1. Fullstops please! 
2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: "returns"ing instead of "return"ing. So, you may not change this in this patch.) 

Modulo these, your patch is good to go. ~KnS



---

archive/issue_comments_165553.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image.patch) by aanand created at 2013-05-09 17:12:45\n\nDomain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165553",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Attachment [trac_13649_domain_codomain_image.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image.patch) by aanand created at 2013-05-09 17:12:45

Domain, codomain, image of a permutation group element



---

archive/issue_comments_165554.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image.2.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image.2.patch) by aanand created at 2013-05-09 17:13:06\n\nDomain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165554",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Attachment [trac_13649_domain_codomain_image.2.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image.2.patch) by aanand created at 2013-05-09 17:13:06

Domain, codomain, image of a permutation group element



---

archive/issue_comments_165555.json:
```json
{
    "body": "aanand, make sure that you document and doctest the methods that you implement.\n\nTake a look at the sage developper's guide for the conventions to follow:\n\nhttp://www.sagemath.org/doc/developer/conventions.html#documentation-strings",
    "created_at": "2013-05-09T19:42:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165555",
    "user": "https://github.com/miguelmarco"
}
```

aanand, make sure that you document and doctest the methods that you implement.

Take a look at the sage developper's guide for the conventions to follow:

http://www.sagemath.org/doc/developer/conventions.html#documentation-strings



---

archive/issue_comments_165556.json:
```json
{
    "body": "Followed the prescribed conventions.",
    "created_at": "2013-05-10T15:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165556",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Followed the prescribed conventions.



---

archive/issue_comments_165557.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image_new.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new.patch) by @miguelmarco created at 2013-05-10 16:18:03\n\nLooks good to me.\nJust one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.",
    "created_at": "2013-05-10T16:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165557",
    "user": "https://github.com/miguelmarco"
}
```

Attachment [trac_13649_domain_codomain_image_new.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new.patch) by @miguelmarco created at 2013-05-10 16:18:03

Looks good to me.
Just one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.



---

archive/issue_comments_165558.json:
```json
{
    "body": "Now the output of .image() is same as that of .domain() and .codomain()",
    "created_at": "2013-05-10T17:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165558",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Now the output of .image() is same as that of .domain() and .codomain()



---

archive/issue_comments_165559.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image_new2.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new2.patch) by @miguelmarco created at 2013-05-10 19:55:45\n\nDoctest fail:\n\n```\nRunning doctests with ID 2013-05-10-21-51-43-875205e8.\nDoctesting 1 file.\nsage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g.domain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g.image()\nExpected:\n    {1,3,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g.codomain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\n```\n\nThat's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.",
    "created_at": "2013-05-10T19:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165559",
    "user": "https://github.com/miguelmarco"
}
```

Attachment [trac_13649_domain_codomain_image_new2.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new2.patch) by @miguelmarco created at 2013-05-10 19:55:45

Doctest fail:

```
Running doctests with ID 2013-05-10-21-51-43-875205e8.
Doctesting 1 file.
sage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g.domain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g.image()
Expected:
    {1,3,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g.codomain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
```

That's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.



---

archive/issue_comments_165560.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image_new3.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new3.patch) by aanand created at 2013-05-11 07:17:48\n\nDoctest should run fine now.",
    "created_at": "2013-05-11T07:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165560",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Attachment [trac_13649_domain_codomain_image_new3.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new3.patch) by aanand created at 2013-05-11 07:17:48

Doctest should run fine now.



---

archive/issue_comments_165561.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2013-05-12T01:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165561",
    "user": "https://github.com/miguelmarco"
}
```

Looks good to me.



---

archive/issue_comments_165562.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-05-12T01:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165562",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_165563.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-05-12T01:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165563",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_165564.json:
```json
{
    "body": "Now that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.\n\nIt would be much faster to just take it from the cycle structure.\n\nNotice the difference in timings (with your patch applied):\n\n```\n\nsage: G=SymmetricGroup(10000)                                                                                                                              \nsage: g=G('(1,2,3)(6,8,10)')                                                                                                                               \nsage: % time g.cycle_tuples()                                                                                                                              \nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n[(1, 2, 3), (6, 8, 10)]\nsage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))\nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n{1, 2, 3, 6, 8, 10}\nsage: %time g.image()                                                                                                                                      \nCPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s\nWall time: 7.82 s\n{1, 2, 3, 6, 8, 10}\n```\n\nAs the size of the group grows, this gets much worse.\n\nBesides that, i think it is ok.",
    "created_at": "2013-05-12T01:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165564",
    "user": "https://github.com/miguelmarco"
}
```

Now that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.

It would be much faster to just take it from the cycle structure.

Notice the difference in timings (with your patch applied):

```

sage: G=SymmetricGroup(10000)                                                                                                                              
sage: g=G('(1,2,3)(6,8,10)')                                                                                                                               
sage: % time g.cycle_tuples()                                                                                                                              
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
[(1, 2, 3), (6, 8, 10)]
sage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
{1, 2, 3, 6, 8, 10}
sage: %time g.image()                                                                                                                                      
CPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s
Wall time: 7.82 s
{1, 2, 3, 6, 8, 10}
```

As the size of the group grows, this gets much worse.

Besides that, i think it is ok.



---

archive/issue_comments_165565.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image_new4.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new4.patch) by aanand created at 2013-05-12 10:03:50\n\nNow the image elements are directly parsed from the string representation which should be optimal.",
    "created_at": "2013-05-12T10:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165565",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Attachment [trac_13649_domain_codomain_image_new4.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_new4.patch) by aanand created at 2013-05-12 10:03:50

Now the image elements are directly parsed from the string representation which should be optimal.



---

archive/issue_comments_165566.json:
```json
{
    "body": "Also, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.",
    "created_at": "2013-05-12T10:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165566",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Also, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.



---

archive/issue_comments_165567.json:
```json
{
    "body": "I would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...",
    "created_at": "2013-05-12T10:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165567",
    "user": "https://github.com/miguelmarco"
}
```

I would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...



---

archive/issue_comments_165568.json:
```json
{
    "body": "yes, I get the point. this would only work for single digit integers. Will upload a new patch soon.",
    "created_at": "2013-05-12T11:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165568",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

yes, I get the point. this would only work for single digit integers. Will upload a new patch soon.



---

archive/issue_comments_165569.json:
```json
{
    "body": "Used cycle_tuple().",
    "created_at": "2013-05-12T12:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165569",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Used cycle_tuple().



---

archive/issue_comments_165570.json:
```json
{
    "body": "Attachment [trac_13649_domain_codomain_image_n.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_n.patch) by @miguelmarco created at 2013-05-13 12:19:26\n\nLooks good now.",
    "created_at": "2013-05-13T12:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165570",
    "user": "https://github.com/miguelmarco"
}
```

Attachment [trac_13649_domain_codomain_image_n.patch](tarball://root/attachments/some-uuid/ticket13649/trac_13649_domain_codomain_image_n.patch) by @miguelmarco created at 2013-05-13 12:19:26

Looks good now.



---

archive/issue_comments_165571.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-05-13T12:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165571",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_165572.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-05-13T13:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165572",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_165573.json:
```json
{
    "body": "Which patches should be applied?",
    "created_at": "2013-05-13T13:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165573",
    "user": "https://github.com/jdemeyer"
}
```

Which patches should be applied?



---

archive/issue_comments_165574.json:
```json
{
    "body": "Sorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch",
    "created_at": "2013-05-17T07:39:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165574",
    "user": "https://trac.sagemath.org/admin/accounts/users/aanand"
}
```

Sorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch



---

archive/issue_comments_165575.json:
```json
{
    "body": "I was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?",
    "created_at": "2013-07-19T16:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165575",
    "user": "https://github.com/Lazza"
}
```

I was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?



---

archive/issue_events_038105.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38105"
}
```



---

archive/issue_events_038106.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38106"
}
```



---

archive/issue_events_038107.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38107"
}
```



---

archive/issue_events_038108.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38108"
}
```



---

archive/issue_events_038109.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38109"
}
```



---

archive/issue_events_038110.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38110"
}
```



---

archive/issue_events_038111.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13445#event-38111"
}
```



---

archive/issue_comments_165576.json:
```json
{
    "body": "Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n\nIs it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in comment:21)? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.",
    "created_at": "2020-03-08T00:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165576",
    "user": "https://github.com/orlitzky"
}
```

Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.

Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in comment:21)? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.



---

archive/issue_comments_165577.json:
```json
{
    "body": "Replying to [comment:30 mjo]:\n> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n> \n> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in comment:21)? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.\n\n\nFor the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?",
    "created_at": "2020-03-08T12:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165577",
    "user": "https://github.com/SagnikDey92"
}
```

Replying to [comment:30 mjo]:
> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.
> 
> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in comment:21)? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.


For the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?



---

archive/issue_comments_165578.json:
```json
{
    "body": "If you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.\n\nThe same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:\n\n* https://reference.wolfram.com/language/ref/PermutationSupport.html\n* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations\n\nThat terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.",
    "created_at": "2020-03-08T13:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165578",
    "user": "https://github.com/orlitzky"
}
```

If you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.

The same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:

* https://reference.wolfram.com/language/ref/PermutationSupport.html
* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations

That terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.



---

archive/issue_comments_165579.json:
```json
{
    "body": "Brief opinions, mostly as confirmation of what was said before.\n\nFor permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:\n\n    sage: G.domain()\n    {1, 2, 3, 4, 5}\n    sage: G.random_element().domain()\n    [5, 2, 3, 4, 1]\n    sage: G.random_element().domain()\n    [5, 3, 4, 2, 1]\n\nOf course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.\n\nFixing the support method (which should return the set of non-fixed points) would be best another ticket.\n\nThanks for the work on that ticket!",
    "created_at": "2020-03-08T17:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165579",
    "user": "https://github.com/nthiery"
}
```

Brief opinions, mostly as confirmation of what was said before.

For permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:

    sage: G.domain()
    {1, 2, 3, 4, 5}
    sage: G.random_element().domain()
    [5, 2, 3, 4, 1]
    sage: G.random_element().domain()
    [5, 3, 4, 2, 1]

Of course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.

Fixing the support method (which should return the set of non-fixed points) would be best another ticket.

Thanks for the work on that ticket!



---

archive/issue_comments_165580.json:
```json
{
    "body": "Changing keywords from \"beginner, aggregation\" to \"aggregation\".",
    "created_at": "2020-05-27T03:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165580",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing keywords from "beginner, aggregation" to "aggregation".



---

archive/issue_comments_165581.json:
```json
{
    "body": "Removing the \"beginner\" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.",
    "created_at": "2020-05-27T03:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13445#issuecomment-165581",
    "user": "https://github.com/DaveWitteMorris"
}
```

Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.
