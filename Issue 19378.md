# Issue 19378: interval-posets in Tamari again : hash and plot

archive/issues_019378.json:
```json
{
    "body": "CC:  vivianepons @rodgzilla @jm58660\n\n#19593 was a failed attempt to correct the hash\n\nand let us also introduce a nice plot method, using the same coordinates\nas the existing latex method\n\nIssue created by migration from https://trac.sagemath.org/ticket/19615\n\n",
    "created_at": "2015-11-23T09:51:54Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "interval-posets in Tamari again : hash and plot",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19378",
    "user": "https://github.com/fchapoton"
}
```
CC:  vivianepons @rodgzilla @jm58660

#19593 was a failed attempt to correct the hash

and let us also introduce a nice plot method, using the same coordinates
as the existing latex method

Issue created by migration from https://trac.sagemath.org/ticket/19615





---

archive/issue_comments_265944.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-11-23T09:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265944",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_265945.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-23T15:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265945",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265946.json:
```json
{
    "body": "bot is green.",
    "created_at": "2015-11-23T21:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265946",
    "user": "https://github.com/fchapoton"
}
```

bot is green.



---

archive/issue_events_053925.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-21T05:58:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19378#event-53925"
}
```



---

archive/issue_comments_265947.json:
```json
{
    "body": "Seems to work and passed tests, but why `graph_border=True` as a default? It differs from `plot()` of other posets and graphs, and it is not even possible to override by user.\n\n(I did not read the node positioning code, just assumed that you moved working code block to another location, which seems to be the case.)",
    "created_at": "2015-12-21T07:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265947",
    "user": "https://github.com/jm58660"
}
```

Seems to work and passed tests, but why `graph_border=True` as a default? It differs from `plot()` of other posets and graphs, and it is not even possible to override by user.

(I did not read the node positioning code, just assumed that you moved working code block to another location, which seems to be the case.)



---

archive/issue_comments_265948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-21T10:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265949.json:
```json
{
    "body": "Hello, thanks for having a look.\n\nI have removed the `border=True` option.\n\nYes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.\n\nI think the hash is good to go. This is what I really need for my work.\n\nThere remains a question about the eventual possibility to choose the colors in \"plot\".\nI do not really care, but if you want, this can be done.\n\nFrederic",
    "created_at": "2015-12-21T10:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265949",
    "user": "https://github.com/fchapoton"
}
```

Hello, thanks for having a look.

I have removed the `border=True` option.

Yes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.

I think the hash is good to go. This is what I really need for my work.

There remains a question about the eventual possibility to choose the colors in "plot".
I do not really care, but if you want, this can be done.

Frederic



---

archive/issue_comments_265950.json:
```json
{
    "body": "Replying to [comment:8 chapoton]:\n\n> Yes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.\n\n\nI did not test, but I tested with `dot2tex` installed and after `T = TamariIntervalPosets(6)` I got different pictures from `T[1350].plot()` and `T[1350]._latex_()`. Like one blue and two red lines missing. Node positioning is the same. Maybe you have tested only without `dot2tex`? (Compare for example to #18936 that has same kind of problem.)\n\n> There remains a question about the eventual possibility to choose the colors in \"plot\".\n> I do not really care, but if you want, this can be done.\n\n\nMaybe it best to start with #13827 and then think about general poset `plot()` and only after those think about colors in this one.",
    "created_at": "2015-12-21T10:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265950",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:8 chapoton]:

> Yes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.


I did not test, but I tested with `dot2tex` installed and after `T = TamariIntervalPosets(6)` I got different pictures from `T[1350].plot()` and `T[1350]._latex_()`. Like one blue and two red lines missing. Node positioning is the same. Maybe you have tested only without `dot2tex`? (Compare for example to #18936 that has same kind of problem.)

> There remains a question about the eventual possibility to choose the colors in "plot".
> I do not really care, but if you want, this can be done.


Maybe it best to start with #13827 and then think about general poset `plot()` and only after those think about colors in this one.



---

archive/issue_comments_265951.json:
```json
{
    "body": "Replying to [comment:9 jmantysalo]:\n> Replying to [comment:8 chapoton]:\n> \n> > Yes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.\n\n> \n> I did not test, but I tested with `dot2tex` installed and after `T = TamariIntervalPosets(6)` I got different pictures from `T[1350].plot()` and `T[1350]._latex_()`. Like one blue and two red lines missing. Node positioning is the same. Maybe you have tested only without `dot2tex`? (Compare for example to #18936 that has same kind of problem.)\n\n\nok, damn. I had checked on smaller examples, and the pictures were the same.\nI think one could simply add a warning/explanation that the pictures are different:\n\n* the plot is the Hasse diagram of the poset, with two colors for increasing/decreasing covers\n\n* the view is the union of two Hasse diagrams of the increasing forest and decreasing forest.\n\nWould you agree with this solution ?",
    "created_at": "2015-12-21T14:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265951",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:9 jmantysalo]:
> Replying to [comment:8 chapoton]:
> 
> > Yes indeed, I just moved the cordinate-computing code. It should not have changed anything in the view method results. You may want to check that the latex pictures before and after the ticket are the same. You can get examples to look at from the `list(TamariIntervalPosets(5))` for instance.

> 
> I did not test, but I tested with `dot2tex` installed and after `T = TamariIntervalPosets(6)` I got different pictures from `T[1350].plot()` and `T[1350]._latex_()`. Like one blue and two red lines missing. Node positioning is the same. Maybe you have tested only without `dot2tex`? (Compare for example to #18936 that has same kind of problem.)


ok, damn. I had checked on smaller examples, and the pictures were the same.
I think one could simply add a warning/explanation that the pictures are different:

* the plot is the Hasse diagram of the poset, with two colors for increasing/decreasing covers

* the view is the union of two Hasse diagrams of the increasing forest and decreasing forest.

Would you agree with this solution ?



---

archive/issue_comments_265952.json:
```json
{
    "body": "So this was *not* a `dot2tex` issue?\n\nTo be able to comment your suggestion I must understand this better. I will comment this eventually, but for now this is ready for others to comment and review.",
    "created_at": "2015-12-21T18:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265952",
    "user": "https://github.com/jm58660"
}
```

So this was *not* a `dot2tex` issue?

To be able to comment your suggestion I must understand this better. I will comment this eventually, but for now this is ready for others to comment and review.



---

archive/issue_comments_265953.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-22T08:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265954.json:
```json
{
    "body": "ping ! please someone review ! Gregory ?",
    "created_at": "2016-01-20T09:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265954",
    "user": "https://github.com/fchapoton"
}
```

ping ! please someone review ! Gregory ?



---

archive/issue_events_053926.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-21T20:13:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19378#event-53926"
}
```



---

archive/issue_events_053927.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-21T20:13:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19378#event-53927"
}
```



---

archive/issue_comments_265955.json:
```json
{
    "body": "***ping***",
    "created_at": "2016-01-21T20:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265955",
    "user": "https://github.com/fchapoton"
}
```

***ping***



---

archive/issue_comments_265956.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-21T21:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265956",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_265957.json:
```json
{
    "body": "LGTM. Perhaps as a follow-up, we could include the arrows in the latex version of a Tamari interval poset (so it matches the output of `plot`).",
    "created_at": "2016-01-21T21:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265957",
    "user": "https://github.com/tscrim"
}
```

LGTM. Perhaps as a follow-up, we could include the arrows in the latex version of a Tamari interval poset (so it matches the output of `plot`).



---

archive/issue_comments_265958.json:
```json
{
    "body": "Thanks Travis !",
    "created_at": "2016-01-22T10:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265958",
    "user": "https://github.com/fchapoton"
}
```

Thanks Travis !



---

archive/issue_events_053928.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-23T20:42:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19378#event-53928"
}
```



---

archive/issue_comments_265959.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-23T20:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19378#issuecomment-265959",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
