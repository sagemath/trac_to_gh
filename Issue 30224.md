# Issue 30224: Fully-commutative stable Grothendieck crystal

archive/issues_030224.json:
```json
{
    "body": "CC:  @anneschilling jppan @tscrim\n\nKeywords: crystal\n\nImplementation of the crystal on fully-commutative decreasing factorizations in the 0-Hecke monoid. See https://arxiv.org/abs/1911.08732.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30461\n\n",
    "created_at": "2020-08-28T23:11:35Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fully-commutative stable Grothendieck crystal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30224",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```
CC:  @anneschilling jppan @tscrim

Keywords: crystal

Implementation of the crystal on fully-commutative decreasing factorizations in the 0-Hecke monoid. See https://arxiv.org/abs/1911.08732.

Issue created by migration from https://trac.sagemath.org/ticket/30461





---

archive/issue_comments_430352.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-31T20:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430352",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```

New commits:



---

archive/issue_comments_430353.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T03:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430354.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T23:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430355.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-09T03:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430356.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T01:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430357.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T08:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430357",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430358.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T19:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430358",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430359.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T21:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430360.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T00:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430361.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T00:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430361",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430362.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T02:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430362",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430363.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-13T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430363",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_430364.json:
```json
{
    "body": "Samll remarks.\n\nAvoid having only TESTS:: in any non-underscored method, because the doc will be empty.\n\nThis\n\n```\nw.reduced_word()==[]\n```\n\ncould be\n\n```\nnot w.reduced_word()\n```\n\nwhich is faster.\n\n\n```\n+    Lists all words\n```\n\nshould be\n\n```\n+    List all words\n```\n\n\n\n```\n+    while len(queue) > 0:\n```\n\ncould be\n\n```\nwhile queue:\n```\n",
    "created_at": "2020-09-13T07:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430364",
    "user": "https://github.com/fchapoton"
}
```

Samll remarks.

Avoid having only TESTS:: in any non-underscored method, because the doc will be empty.

This

```
w.reduced_word()==[]
```

could be

```
not w.reduced_word()
```

which is faster.


```
+    Lists all words
```

should be

```
+    List all words
```



```
+    while len(queue) > 0:
```

could be

```
while queue:
```




---

archive/issue_comments_430365.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T17:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430366.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-13T18:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430366",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430367.json:
```json
{
    "body": "failing doctests in src/sage/misc/dev_tools.py\n\nThis seems to be due to a side effect of importing HeckeMonoid here.",
    "created_at": "2020-09-14T18:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430367",
    "user": "https://github.com/fchapoton"
}
```

failing doctests in src/sage/misc/dev_tools.py

This seems to be due to a side effect of importing HeckeMonoid here.



---

archive/issue_comments_430368.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-15T01:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430369.json:
```json
{
    "body": "Looks good. Thank you for this addition.\n\nSome additional comments to Fr\u00e9d\u00e9ric's:\n\n`fully_commutative_stable_grothendieck.py` is missing the file header information (module-level docstring, copyright, etc.).\n\nYou could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n\nIn the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\n\nDo you really expect this:\n\n```\n            if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):\n                raise ValueError(\"parent should be an instance of FullyCommutativeStableGrothendieckCrystal\")\n```\n\nIt seems like it would be mostly useless.\n\nIt would be good to avoid going through the coercion framework and element constructor and just directly create the element:\n\n```diff\n-self.parent()(s)\n+P = self.parent()\n+P.element_class(P, s)\n```\n\nThis is good for speed.\n\nError messages should start with a lowercase:\n\n```diff\n-raise ValueError(\"Each nonempty factor should be a strictly decreasing sequence\")\n+raise ValueError(\"each nonempty factor should be a strictly decreasing sequence\")\n```\n\nThis is a Python convention that we try to follow.\n\nYou don't need the list here (I think it is actually slightly slower):\n\n```diff\n-m = max([cell[0] for cell in cells])+1\n+m = max(cell[0] for cell in cells) + 1\n```\n\n(and in similar other places).\n\n\n```diff\n-for i in range(m)[::-1]:\n+for i in range(m-1,-1,-1):\n```\n\n\nI believe you can do this:\n\n```\n-if p not in Permutations(avoiding=[3,2,1]):\n+if p.has_pattern([3,2,1]):\n```\n\nto avoid the transient parent (and some extra unnecessary containment checks).\n\n\n```diff\n-if m == None or (len(_jumps(w))<=m-1):\n+if m is None or len(_jumps(w)) <= m-1:\n```\n\n\nI think it would be good to avoid creating the tableau and then its conjugate in `_is_valid_column_word`:\n\n```python\n            T = Tableau(L)\n            return T.conjugate().is_semistandard()\n```\n\nI would just go through and check everything directly in `L`.",
    "created_at": "2020-09-15T01:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430369",
    "user": "https://github.com/tscrim"
}
```

Looks good. Thank you for this addition.

Some additional comments to Frédéric's:

`fully_commutative_stable_grothendieck.py` is missing the file header information (module-level docstring, copyright, etc.).

You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.

In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?

Do you really expect this:

```
            if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):
                raise ValueError("parent should be an instance of FullyCommutativeStableGrothendieckCrystal")
```

It seems like it would be mostly useless.

It would be good to avoid going through the coercion framework and element constructor and just directly create the element:

```diff
-self.parent()(s)
+P = self.parent()
+P.element_class(P, s)
```

This is good for speed.

Error messages should start with a lowercase:

```diff
-raise ValueError("Each nonempty factor should be a strictly decreasing sequence")
+raise ValueError("each nonempty factor should be a strictly decreasing sequence")
```

This is a Python convention that we try to follow.

You don't need the list here (I think it is actually slightly slower):

```diff
-m = max([cell[0] for cell in cells])+1
+m = max(cell[0] for cell in cells) + 1
```

(and in similar other places).


```diff
-for i in range(m)[::-1]:
+for i in range(m-1,-1,-1):
```


I believe you can do this:

```
-if p not in Permutations(avoiding=[3,2,1]):
+if p.has_pattern([3,2,1]):
```

to avoid the transient parent (and some extra unnecessary containment checks).


```diff
-if m == None or (len(_jumps(w))<=m-1):
+if m is None or len(_jumps(w)) <= m-1:
```


I think it would be good to avoid creating the tableau and then its conjugate in `_is_valid_column_word`:

```python
            T = Tableau(L)
            return T.conjugate().is_semistandard()
```

I would just go through and check everything directly in `L`.



---

archive/issue_comments_430370.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-15T02:01:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430370",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430371.json:
```json
{
    "body": "This can be simplified:\n\n```diff\n-            for i in range(len(L)-1):\n-                for j in range(len(L[i+1])):\n-                    if L[i+1][j]<L[i][j]:\n-                        return False\n-            return True\n+            return not any(L[i+1][j] < L[i][j] for i in range(len(L)-1)\n+                           for j in range(len(L[i+1])))\n```\n\nor\n\n```diff\n+            return all(L[i+1][j] >= L[i][j] for i in range(len(L)-1)\n+                       for j in range(len(L[i+1])))\n```\n\n(Interestingly enough the latter is actually faster.)",
    "created_at": "2020-09-15T03:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430371",
    "user": "https://github.com/tscrim"
}
```

This can be simplified:

```diff
-            for i in range(len(L)-1):
-                for j in range(len(L[i+1])):
-                    if L[i+1][j]<L[i][j]:
-                        return False
-            return True
+            return not any(L[i+1][j] < L[i][j] for i in range(len(L)-1)
+                           for j in range(len(L[i+1])))
```

or

```diff
+            return all(L[i+1][j] >= L[i][j] for i in range(len(L)-1)
+                       for j in range(len(L[i+1])))
```

(Interestingly enough the latter is actually faster.)



---

archive/issue_comments_430372.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-15T03:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430372",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430373.json:
```json
{
    "body": "Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.\n\nReplying to [comment:18 tscrim]:\n> You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\nThank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\nhttps://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n\n> In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\nIt was to have the `__repr__` print\n`()(2, 1)(2)()(2)`\nrather than \n`()(2, 1)(2,)()(2,)`\nfor factors with single values. That behavior has been changed now. I'm maintaining the list casting for the _latex_ method though as it looks prettier. =)\n\n> Do you really expect this:\n> {{{\n>             if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):\n>                 raise ValueError(\"parent should be an instance of FullyCommutativeStableGrothendieckCrystal\")\n> }}}\n> It seems like it would be mostly useless.\nNo, so this has been removed.",
    "created_at": "2020-09-15T03:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430373",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```

Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.

Replying to [comment:18 tscrim]:
> You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.
Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html

> In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?
It was to have the `__repr__` print
`()(2, 1)(2)()(2)`
rather than 
`()(2, 1)(2,)()(2,)`
for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the _latex_ method though as it looks prettier. =)

> Do you really expect this:
> {{{
>             if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):
>                 raise ValueError("parent should be an instance of FullyCommutativeStableGrothendieckCrystal")
> }}}
> It seems like it would be mostly useless.
No, so this has been removed.



---

archive/issue_comments_430374.json:
```json
{
    "body": "Replying to [comment:22 wpoh]:\n> Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.\n\nThank you for your changes.\n\n> Replying to [comment:18 tscrim]:\n> > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n> Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\n> https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n\nLooks good. Thanks. Can you add a test showing that the `!=` works as expected?\n\n> > In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\n> It was to have the `__repr__` print\n> `()(2, 1)(2)()(2)`\n> rather than \n> `()(2, 1)(2,)()(2,)`\n> for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the _latex_ method though as it looks prettier. =)\n\nThat is a good point; I forgot about the singletons. For the `__repr__` it would make sense to do it like how you had before. Also, since `DecreasingHeckeFactorization` now inherits from `SageObject`, you should rename `__repr__` -> `_repr_`.\n\nI have a few more additional comments:\n\n\n```diff\n-return tuple(len(l) for l in self.value)[::-1]\n+return tuple([len(l) for l in reversed(self.value)])\n```\n\n\nYes, having the list here is strangely faster.\n\n\n```diff\n-if len(factor)>0:\n+if factor:\n```\n\n\nInstead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?\n\nThis is strange to me:\n\n```\nclass Element(DecreasingHeckeFactorization, ElementWrapper):\n```\n\nWhy inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.",
    "created_at": "2020-09-15T23:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430374",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:22 wpoh]:
> Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.

Thank you for your changes.

> Replying to [comment:18 tscrim]:
> > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.
> Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
> https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html

Looks good. Thanks. Can you add a test showing that the `!=` works as expected?

> > In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?
> It was to have the `__repr__` print
> `()(2, 1)(2)()(2)`
> rather than 
> `()(2, 1)(2,)()(2,)`
> for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the _latex_ method though as it looks prettier. =)

That is a good point; I forgot about the singletons. For the `__repr__` it would make sense to do it like how you had before. Also, since `DecreasingHeckeFactorization` now inherits from `SageObject`, you should rename `__repr__` -> `_repr_`.

I have a few more additional comments:


```diff
-return tuple(len(l) for l in self.value)[::-1]
+return tuple([len(l) for l in reversed(self.value)])
```


Yes, having the list here is strangely faster.


```diff
-if len(factor)>0:
+if factor:
```


Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?

This is strange to me:

```
class Element(DecreasingHeckeFactorization, ElementWrapper):
```

Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.



---

archive/issue_comments_430375.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-16T01:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430375",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430376.json:
```json
{
    "body": "Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).\n\nReplying to [comment:23 tscrim]:\n> > Replying to [comment:18 tscrim]:\n> > > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n> > Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\n> > https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n> \n> Looks good. Thanks. Can you add a test showing that the `!=` works as expected?\nI've added a test in the `__init__` for `DecreasingHeckeFactorization`.\n\n> Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?\nBoth remarks make sense. The code looks better now.\n\n> This is strange to me:\n> {{{\n> class Element(DecreasingHeckeFactorization, ElementWrapper):\n> }}}\n> Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.\nThe code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.\n\nI am not so familiar with the difference between `ElementWrapper` and `Element`, but trying\nfor example\n\n\n```\nclass Element(ElementWrapper):\n    def __init__()\n        # Do something to validate and process t into \n        # an instance of DecreasingHeckeFactorization u\n        ElementWrapper.__init__(self, parent, u)\n```\n\n\nand making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:\n\n\n```\nsage: S = SymmetricGroup(3+1)\nsage: w = S.from_reduced_word([1, 3, 2])\nsage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)\nsage: h = B([[3, 1], [3], [3, 2]]); h\n(3, 1)(3)(3, 2)\nsage: h.weight()\n(0, -1, 0) # expected (2, 1, 2)\n```\n",
    "created_at": "2020-09-16T04:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430376",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```

Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).

Replying to [comment:23 tscrim]:
> > Replying to [comment:18 tscrim]:
> > > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.
> > Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
> > https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html
> 
> Looks good. Thanks. Can you add a test showing that the `!=` works as expected?
I've added a test in the `__init__` for `DecreasingHeckeFactorization`.

> Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?
Both remarks make sense. The code looks better now.

> This is strange to me:
> {{{
> class Element(DecreasingHeckeFactorization, ElementWrapper):
> }}}
> Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.
The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.

I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying
for example


```
class Element(ElementWrapper):
    def __init__()
        # Do something to validate and process t into 
        # an instance of DecreasingHeckeFactorization u
        ElementWrapper.__init__(self, parent, u)
```


and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:


```
sage: S = SymmetricGroup(3+1)
sage: w = S.from_reduced_word([1, 3, 2])
sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)
sage: h = B([[3, 1], [3], [3, 2]]); h
(3, 1)(3)(3, 2)
sage: h.weight()
(0, -1, 0) # expected (2, 1, 2)
```




---

archive/issue_comments_430377.json:
```json
{
    "body": "Replying to [comment:25 wpoh]:\n> Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).\n\nThank you.\n\n> > This is strange to me:\n> > {{{\n> > class Element(DecreasingHeckeFactorization, ElementWrapper):\n> > }}}\n> > Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.\n> The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.\n> \n> I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying\n> for example\n> \n> {{{\n> class Element(ElementWrapper):\n>     def __init__()\n>         # Do something to validate and process t into \n>         # an instance of DecreasingHeckeFactorization u\n>         ElementWrapper.__init__(self, parent, u)\n> }}}\n> \n> and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:\n> \n> {{{\n> sage: S = SymmetricGroup(3+1)\n> sage: w = S.from_reduced_word([1, 3, 2])\n> sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)\n> sage: h = B([[3, 1], [3], [3, 2]]); h\n> (3, 1)(3)(3, 2)\n> sage: h.weight()\n> (0, -1, 0) # expected (2, 1, 2)\n> }}}\n\nWithout seeing what your code is, I cannot comment. You can look at the `ElementWrapper` class and see what extra features it builds upon. However, from what you (and the code) are telling me, you do not want to wrap `DecreasingHeckeFactorization` but extend its functionality, which means it should subclass it. You wrap an object if you want it to behave differently than the corresponding class, but you need the data structure and/or some functionality. Right now your code is somehow in between and you might need to disentangle it a bit.\n\nActually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n\n----\n\nSome little nitpicks with style (it wouldn't stop a positive review, but it is good to follow):\n\n```diff\n-    k, D = max(w), {}\n+    k = max(w)\n+    D = {}\n```\n\n\n```diff\n-if all(len(L[i])>=len(L[i+1]) for i in range(len(L)-1)):\n+if all(len(L[i]) >= len(L[i+1]) for i in range(len(L)-1)):\n```\n\n\n```diff\n-if p==r and q!=p and abs(p-q)==1:\n+if p == r and q != p and abs(p-q) == 1:\n```\n\n\n```diff\n-t = _apply_relations(v,position,move)\n+t = _apply_relations(v, position, move)\n```\n\nand similar.\n\nMore micro-optimizations: For `_applicable_relations`, I would do:\n\n```python\n    def _applicable_relations(word):\n        \"\"\"\n        Return all positions where a relation can be applied on ``word``\n        along with the type of relation.\n        \"\"\"\n        L = []\n        for i in range(len(word)-2):\n            p, q, r = word[i:(i+2)+1]\n            if abs(p-q) > 1:\n                L += [[i,\"pq=qp\"]]\n            elif abs(p-q) == 1:\n                if p == r:  # p != q by the abs test\n                    L += [[i,\"pqp=qpq\"]]\n            elif r != p:  # We must have p == q\n                L += [[i,\"ppq=pqq\"]]\n            if q == r and r != p:\n                L += [[i,\"pqq=ppq\"]]\n        if abs(word[-2]-word[-1]) > 1:\n           L += [[len(word)-2,\"pq=qp\"]]\n        return L\n```\n\nThe first is removing the unless if statements and pulling the last case outside of the loop. The second is removing redundant checks for the different relations.\n\nI think this can be simplified:\n\n```diff\n-w[J[i]:J[i+1]][::-1]\n+w[J[i+1]-1:J[i]-1:-1]\n```\n\n\nIn `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.\n\nYour doc is not building because you need to make this change:\n\n```diff\n-Remove all bracketed letters between `i`th and `(i+1)`th entry.\n+Remove all bracketed letters between `i`-th and `(i+1)`-th entry.\n```\n",
    "created_at": "2020-09-16T23:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430377",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:25 wpoh]:
> Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).

Thank you.

> > This is strange to me:
> > {{{
> > class Element(DecreasingHeckeFactorization, ElementWrapper):
> > }}}
> > Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.
> The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.
> 
> I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying
> for example
> 
> {{{
> class Element(ElementWrapper):
>     def __init__()
>         # Do something to validate and process t into 
>         # an instance of DecreasingHeckeFactorization u
>         ElementWrapper.__init__(self, parent, u)
> }}}
> 
> and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:
> 
> {{{
> sage: S = SymmetricGroup(3+1)
> sage: w = S.from_reduced_word([1, 3, 2])
> sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)
> sage: h = B([[3, 1], [3], [3, 2]]); h
> (3, 1)(3)(3, 2)
> sage: h.weight()
> (0, -1, 0) # expected (2, 1, 2)
> }}}

Without seeing what your code is, I cannot comment. You can look at the `ElementWrapper` class and see what extra features it builds upon. However, from what you (and the code) are telling me, you do not want to wrap `DecreasingHeckeFactorization` but extend its functionality, which means it should subclass it. You wrap an object if you want it to behave differently than the corresponding class, but you need the data structure and/or some functionality. Right now your code is somehow in between and you might need to disentangle it a bit.

Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?

----

Some little nitpicks with style (it wouldn't stop a positive review, but it is good to follow):

```diff
-    k, D = max(w), {}
+    k = max(w)
+    D = {}
```


```diff
-if all(len(L[i])>=len(L[i+1]) for i in range(len(L)-1)):
+if all(len(L[i]) >= len(L[i+1]) for i in range(len(L)-1)):
```


```diff
-if p==r and q!=p and abs(p-q)==1:
+if p == r and q != p and abs(p-q) == 1:
```


```diff
-t = _apply_relations(v,position,move)
+t = _apply_relations(v, position, move)
```

and similar.

More micro-optimizations: For `_applicable_relations`, I would do:

```python
    def _applicable_relations(word):
        """
        Return all positions where a relation can be applied on ``word``
        along with the type of relation.
        """
        L = []
        for i in range(len(word)-2):
            p, q, r = word[i:(i+2)+1]
            if abs(p-q) > 1:
                L += [[i,"pq=qp"]]
            elif abs(p-q) == 1:
                if p == r:  # p != q by the abs test
                    L += [[i,"pqp=qpq"]]
            elif r != p:  # We must have p == q
                L += [[i,"ppq=pqq"]]
            if q == r and r != p:
                L += [[i,"pqq=ppq"]]
        if abs(word[-2]-word[-1]) > 1:
           L += [[len(word)-2,"pq=qp"]]
        return L
```

The first is removing the unless if statements and pulling the last case outside of the loop. The second is removing redundant checks for the different relations.

I think this can be simplified:

```diff
-w[J[i]:J[i+1]][::-1]
+w[J[i+1]-1:J[i]-1:-1]
```


In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.

Your doc is not building because you need to make this change:

```diff
-Remove all bracketed letters between `i`th and `(i+1)`th entry.
+Remove all bracketed letters between `i`-th and `(i+1)`-th entry.
```




---

archive/issue_comments_430378.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-21T05:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430379.json:
```json
{
    "body": "Thanks again for the further comments. I have pushed all the changes according to the suggestions.\n\nReplying to [comment:26 tscrim]:\n> Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\nThere are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n\nAlso, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.\n\n> In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.\nYou're right that they were there mainly for debugging. I've removed the error handling.",
    "created_at": "2020-09-21T06:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430379",
    "user": "https://trac.sagemath.org/admin/accounts/users/wpoh"
}
```

Thanks again for the further comments. I have pushed all the changes according to the suggestions.

Replying to [comment:26 tscrim]:
> Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?
There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.

Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.

> In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.
You're right that they were there mainly for debugging. I've removed the error handling.



---

archive/issue_comments_430380.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-22T21:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430380",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430381.json:
```json
{
    "body": "Replying to [comment:28 wpoh]:\n> Thanks again for the further comments. I have pushed all the changes according to the suggestions.\n> \n> Replying to [comment:26 tscrim]:\n> > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n> There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n\nMaking this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n\n> Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.\n\nI don't see any reason why you should need this. It seems like you are fighting code that is trying to tell you to make it more simple. Have I missed something?",
    "created_at": "2020-09-23T04:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430381",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:28 wpoh]:
> Thanks again for the further comments. I have pushed all the changes according to the suggestions.
> 
> Replying to [comment:26 tscrim]:
> > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?
> There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.

Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.

> Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.

I don't see any reason why you should need this. It seems like you are fighting code that is trying to tell you to make it more simple. Have I missed something?



---

archive/issue_comments_430382.json:
```json
{
    "body": "Replying to [comment:30 tscrim]:\n> Replying to [comment:28 wpoh]:\n> > Thanks again for the further comments. I have pushed all the changes according to the suggestions.\n> > \n> > Replying to [comment:26 tscrim]:\n> > > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n> > There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n> \n> Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n\nSorry for the slow response. I could not compile Sage for a while due to Xcode12. \n\nWe need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.",
    "created_at": "2020-09-25T06:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430382",
    "user": "https://github.com/anneschilling"
}
```

Replying to [comment:30 tscrim]:
> Replying to [comment:28 wpoh]:
> > Thanks again for the further comments. I have pushed all the changes according to the suggestions.
> > 
> > Replying to [comment:26 tscrim]:
> > > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the ``@`richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?
> > There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.
> 
> Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.

Sorry for the slow response. I could not compile Sage for a while due to Xcode12. 

We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.



---

archive/issue_comments_430383.json:
```json
{
    "body": "Replying to [comment:31 aschilling]:\n> Replying to [comment:30 tscrim]:\n> > Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n> \n> Sorry for the slow response. I could not compile Sage for a while due to Xcode12. \n> \n> We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.\n\nI don't see why the insertion could not take the crystal elements. So it still feels a little over-engineered, but it is good enough for now as the element class hierarchy doesn't have any duplication.",
    "created_at": "2020-09-28T04:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430383",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:31 aschilling]:
> Replying to [comment:30 tscrim]:
> > Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.
> 
> Sorry for the slow response. I could not compile Sage for a while due to Xcode12. 
> 
> We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.

I don't see why the insertion could not take the crystal elements. So it still feels a little over-engineered, but it is good enough for now as the element class hierarchy doesn't have any duplication.



---

archive/issue_comments_430384.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-28T04:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430384",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_430385.json:
```json
{
    "body": "Thank you for the review, Travis!",
    "created_at": "2020-09-28T04:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430385",
    "user": "https://github.com/anneschilling"
}
```

Thank you for the review, Travis!



---

archive/issue_comments_430386.json:
```json
{
    "body": "Replying to [comment:33 aschilling]:\n> Thank you for the review, Travis!\n\nNo problem. Sorry it took a little longer for me to get to it. I will be on the lookout for when #30460 is ready.",
    "created_at": "2020-09-28T04:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430386",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:33 aschilling]:
> Thank you for the review, Travis!

No problem. Sorry it took a little longer for me to get to it. I will be on the lookout for when #30460 is ready.



---

archive/issue_comments_430387.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-05T20:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30224#issuecomment-430387",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079070.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-05T20:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30224#event-79070"
}
```
