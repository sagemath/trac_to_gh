# Issue 25278: Memory leak in solve_mod

Issue created by migration from https://trac.sagemath.org/ticket/25515

Original creator: @t00sh

Original creation time: 2018-06-05 22:43:42

Keywords: leak,solve_mod

I observed some memory leaks when using solve_mod function. When I try to solve a quadratic equation in Z/nZ where n is a large power of prime number I see the get_memory_usage() increase.

The attached file is a PoC which reproduce this issue.

Note : even if we use gc.collect() at each iteration, the memory usage is still increasing.

System tested : ArchLinux + Debian
Last version tested : 8.2



---

Attachment


---

Comment by nbruin created at 2018-06-06 04:43:49

The following code shows no python objects are leaking. If there's a memory leak, it's in a library

```
import gc
from collections import Counter
gc.collect()

pre={id(c) for c in gc.get_objects()}
for i in range(400,500):
    sols = solve_mod([x**2 - i*x + 125], 2**256)
gc.collect()
post=Counter(type(o) for o in gc.get_objects() if id(o) not in pre)
sorted(post.iteritems(),key=lambda t: t[1])
```

(this doesn't print many objects, so nothing is piling up on the python heap)
