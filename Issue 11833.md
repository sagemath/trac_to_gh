# Issue 11833: Relativize should take one 'name' if a morphism is given

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-11-10 13:15:52

Assignee: davidloeffler


```
sage: R.<x> = PolynomialRing(QQ)
sage: K.<i> = NumberField(x^2 + 1)
sage: L.<b> = NumberField(x^4 - x^2 + 1)
sage: phi = K.hom(b^3, L)
sage: M.<r,s> = L.relativize(phi)
sage: M
Number Field in r with defining polynomial x^2 - i*x - 1 over its base field
sage: M.base_field()
Number Field in i with defining polynomial x^2 + 1
sage: M.<r> = L.relativize(phi)
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)

/usr/local/src/sage-4.7.2.alpha2/<ipython console> in <module>()

/usr/local/src/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/rings/number_field/number_field.pyc in relativize(self, alpha, names)
   6464         from sage.all import vector, matrix
   6465
-> 6466         names = sage.structure.parent_gens.normalize_names(2, names)
   6467
   6468         from sage.categories.map import is_Map

/usr/local/src/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/parent_gens.so in sage.structure.parent_gens.normalize_names (sage/structure/parent_gens.c:2311)()

IndexError: the number of names must equal the number of generators
```



---

Comment by AlexGhitza created at 2014-04-25 12:50:40

New commits:


---

Comment by AlexGhitza created at 2014-04-25 12:50:40

Changing status from new to needs_review.


---

Comment by git created at 2014-04-25 13:07:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-12-19 16:09:16

New commits:


---

Comment by jdemeyer created at 2014-12-19 16:31:39

See #17530 for a different issue with `relativize`.


---

Comment by jdemeyer created at 2014-12-19 16:38:56

Obvious fix, looks good.


---

Comment by jdemeyer created at 2014-12-19 16:38:56

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2014-12-19 18:13:56

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2014-12-19 18:13:56


```
sage -t --long src/sage/schemes/elliptic_curves/ell_field.py
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_field.py", line 631, in sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.descend_to
Failed example:
    EF = E.descend_to(F); EF
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.descend_to[5]>", line 1, in <module>
        EF = E.descend_to(F); EF
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_field.py", line 742, in descend_to
        dlist = t.descend_mod_power(K,2)
      File "sage/rings/number_field/number_field_element.pyx", line 3605, in sage.rings.number_field.number_field_element.NumberFieldElement.descend_mod_power (build/cythonized/sage/rings/number_field/number_field_element.cpp:30743)
        LK = L.relativize(f, names='b')
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/number_field/number_field_rel.py", line 2439, in relativize
        L = K.relativize(beta, names)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 7840, in relativize
        return L.extension(f, names[0], structure=structure)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 4581, in extension
        return NumberField_relative(self, poly, str(name), check=check, embedding=embedding, latex_name=latex_name, structure=structure)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/number_field/number_field_rel.py", line 261, in __init__
        raise ValueError("Base field and extension cannot have the same name")
    ValueError: Base field and extension cannot have the same name
**********************************************************************
```



---

Comment by git created at 2014-12-19 21:15:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-12-19 21:16:13

Changing status from needs_work to needs_review.


---

Comment by lftabera created at 2015-05-28 12:11:33

The code looks good, it also takes care of come hardcoded variable names. Jeroen, do you think that taking as a new name

K.variable_name()*2

is better than, taking, for instance K.variable_name()+'0' ?

In the first case, the length of the name is doubled. I think that those methods cannot be called so many times so this growth can de an issue, but a warning always pop in my head with this kind of code.

What do you think?


---

Comment by jdemeyer created at 2015-05-28 13:57:49

Personally, I don't care much whether we should use `K.variable_name()*2` or `K.variable_name()+'0'`. I think the doubling was just the first idea which came to my mind.


---

Comment by lftabera created at 2015-06-05 07:22:47

I give a positive review to the ticket, but I have changed the way new names are created inside some methods that use relativize. Jeroen, if you agree, could you put the ticket in positive review?
----
New commits:


---

Comment by jdemeyer created at 2015-09-10 19:03:28

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2015-09-10 19:03:28

Let's finish this.


---

Comment by vbraun created at 2015-09-11 08:24:04

Resolution: fixed
