# Issue 32506: use .pair() for quaternions instead of inlining the definition

Issue created by migration from https://trac.sagemath.org/ticket/32743

Original creator: lorenz

Original creation time: 2021-10-23 04:05:25

The code in `src/sage/algebras/quatalg/quaternion_algebra.py` contains a few expressions of the form `(x.conjugate() * y).reduced_trace()`, which is in fact equal to `x.pair(y)`. This patch replaces the ad-hoc code by `.pair()`.

This is more conceptual and fixes the weird display of the default argument here:â€‚
https://doc.sagemath.org/html/en/reference/quat_algebras/sage/algebras/quatalg/quaternion_algebra.html#sage.algebras.quatalg.quaternion_algebra.normalize_basis_at_p


---

Comment by lorenz created at 2021-10-23 04:06:54

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-10-23 14:55:04

several precision failures in `src/sage/modular/modform/numerical.py`

could be related to the changes made here ?


---

Comment by lorenz created at 2021-10-23 16:58:59

Hm, the failures don't show up in the second patchbot run and there's not a single occurrence of the strings `quatalg` or `quaternion` in the entire `modular/modform/` directory... I'd say this seems unrelated.


---

Comment by chapoton created at 2021-10-23 19:51:52

ok, looks good. Merci


---

Comment by chapoton created at 2021-10-23 19:51:52

Changing status from needs_review to positive_review.


---

Comment by lorenz created at 2021-10-24 04:56:19

Thank you!


---

Comment by vbraun created at 2021-10-24 18:38:45

Resolution: fixed
