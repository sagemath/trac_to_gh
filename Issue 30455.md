# Issue 30455: _ext_p_list not implemented for lattice-precision padic elements

Issue created by migration from https://trac.sagemath.org/ticket/30692

Original creator: @n-vi

Original creation time: 2020-10-01 20:43:09

Keywords: lattice, expansion

Using version 9.2 of Sage, it seems that `_ext_p_list` is not implemented for lattice-cap or lattice-float elements.
`expansion`, on the other hand, works well. 

* 'lattice-cap' example:

```
sage: F = Qp(3, type='lattice-cap')                                                                                                                                                
sage: a = F(3)                                                                                                                                                                     
sage: a._ext_p_list(True)                                                                                                                                                          
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-8-9072220043af> in <module>
----> 1 a._ext_p_list(True)

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4703)()
    491             AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'
    492         """
--> 493         return self.getattr_from_category(name)
    494 
    495     cdef getattr_from_category(self, name):

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4815)()
    504         else:
    505             cls = P._abstract_element_class
--> 506         return getattr_from_other_class(self, cls, name)
    507 
    508     def __dir__(self):

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2553)()
    365         dummy_error_message.cls = type(self)
    366         dummy_error_message.name = name
--> 367         raise AttributeError(dummy_error_message)
    368     cdef PyObject* attr = instance_getattr(cls, name)
    369     if attr is NULL:

AttributeError: 'pAdicLatticeCapElement_with_category' object has no attribute '_ext_p_list'
sage: a.expansion()     # works well                                                                                                                                                            
[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
```


* 'lattice-float' example:

```
sage: F = Qp(3, type='lattice-float')                                                                                                                                              
sage: a = F(3)                                                                                                                                                                     
sage: a._ext_p_list(True)                                                                                                                                                          
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-12-9072220043af> in <module>
----> 1 a._ext_p_list(True)

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4703)()
    491             AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'
    492         """
--> 493         return self.getattr_from_category(name)
    494 
    495     cdef getattr_from_category(self, name):

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4815)()
    504         else:
    505             cls = P._abstract_element_class
--> 506         return getattr_from_other_class(self, cls, name)
    507 
    508     def __dir__(self):

~/workspace/padic_project/sage/local/lib/python3.7/site-packages/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2553)()
    365         dummy_error_message.cls = type(self)
    366         dummy_error_message.name = name
--> 367         raise AttributeError(dummy_error_message)
    368     cdef PyObject* attr = instance_getattr(cls, name)
    369     if attr is NULL:

AttributeError: 'pAdicLatticeFloatElement_with_category' object has no attribute '_ext_p_list'
sage: a.expansion()     # works well                                                                                                                                                            
[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
```



---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
