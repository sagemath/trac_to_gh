# Issue 32605: use PARI's fflog() for binary finite fields

Issue created by migration from https://trac.sagemath.org/ticket/32842

Original creator: lorenz

Original creation time: 2021-11-09 14:56:13

CC:  tscrim edgarcosta

Currently, `FiniteField_ntl_gf2eElement` calls generic-group `discrete_log()` to compute logarithms.

We should instead call PARI's `fflog()`, which uses an index-calculus algorithm and is dramatically faster in some cases.


---

Comment by lorenz created at 2021-11-10 02:42:05

New commits:


---

Comment by lorenz created at 2021-11-10 02:42:05

Changing status from new to needs_review.


---

Comment by edgarcosta created at 2021-11-10 09:36:44

The code looks good to me.
However, I find it odd the comment

```
Big instances used to take very long before :trac:`32842`::
```

in the examples block quite odd.

Travis, what do you think?


---

Comment by tscrim created at 2021-11-10 09:51:16

Are you referring to the English or the example itself? The English is a bit strange to me, and I would phrase it as

```
Big instances used to take a very long time before :trac:`32842`::
```



---

Comment by edgarcosta created at 2021-11-10 09:54:44

The example, as I usually only see trac tickets mentioned under tests referring to a bug that has been fixed.
This is only a minor thing, and if you think it's alright, we can give it a positive review.


---

Comment by tscrim created at 2021-11-10 10:01:21

I think the example is fine, although it could be made better by having something that takes a really long time (>10s, even better >30s) prior but finishes within 1 second now.


---

Comment by git created at 2021-11-10 10:09:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by lorenz created at 2021-11-10 10:11:02

Replying to [comment:6 tscrim]:
> I think the example is fine, although it could be made better by having something that takes a really long time (>10s, even better >30s) prior but finishes within 1 second now.

It does: The `2^61` example is a worst-case input for the generic algorithm (because the unit group order `2^61-1` is prime). On my laptop, it eats all my RAM and dies after a couple of minutes. With the patch, it finishes successfully within a few hundred milliseconds.


---

Comment by edgarcosta created at 2021-11-10 11:38:40

Changing status from needs_review to positive_review.


---

Comment by edgarcosta created at 2021-11-10 11:38:40

The patch bot was green before :)


---

Comment by lorenz created at 2021-11-10 13:58:28

Thank you!


---

Comment by vbraun created at 2021-11-14 17:05:10

Resolution: fixed
