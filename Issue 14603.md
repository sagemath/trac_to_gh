# Issue 14603: build system for sage (the library)

archive/issues_014603.json:
```json
{
    "body": "Assignee: Felix Salfelder\n\nCC:  @nexttime @kiwifb @jondo\n\nSage (\"the library\") needs a build system that works outside of sage (\"the distribution\").\n\nIssue created by migration from https://trac.sagemath.org/ticket/14807\n\n",
    "created_at": "2013-06-22T21:03:30Z",
    "labels": [
        "component: distribution",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "build system for sage (the library)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14603",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
Assignee: Felix Salfelder

CC:  @nexttime @kiwifb @jondo

Sage ("the library") needs a build system that works outside of sage ("the distribution").

Issue created by migration from https://trac.sagemath.org/ticket/14807





---

archive/issue_comments_185456.json:
```json
{
    "body": "Changing assignee from Felix Salfelder to felixs.",
    "created_at": "2013-06-22T22:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185456",
    "user": "https://github.com/nexttime"
}
```

Changing assignee from Felix Salfelder to felixs.



---

archive/issue_comments_185457.json:
```json
{
    "body": "Why would this be a blocker?",
    "created_at": "2013-07-21T21:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185457",
    "user": "https://github.com/jdemeyer"
}
```

Why would this be a blocker?



---

archive/issue_comments_185458.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> Why would this be a blocker?\n\n\nit's not, sorry.\n\ni have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.",
    "created_at": "2013-08-09T09:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185458",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Replying to [comment:5 jdemeyer]:
> Why would this be a blocker?


it's not, sorry.

i have created a dist tarball from my WIP branch. it is contained in [http://tool.em.cs.uni-frankfurt.de/~felix/sagelib](http://tool.em.cs.uni-frankfurt.de/~felix/sagelib). please comment or help to improve it.



---

archive/issue_comments_185459.json:
```json
{
    "body": "Changing keywords from \"\" to \"sagelib\".",
    "created_at": "2013-08-28T15:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185459",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Changing keywords from "" to "sagelib".



---

archive/issue_comments_185460.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-01T11:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185461.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-02T20:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185462.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-09-03T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185462",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_185463.json:
```json
{
    "body": "A clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...",
    "created_at": "2013-09-03T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185463",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

A clean `sagelib` package that works outside of sage (the distribution) requires something like #14796. I will open another ticket...



---

archive/issue_comments_185464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-06T14:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185465.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-08T09:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185466.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-12T08:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185467.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-12T10:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_185468.json:
```json
{
    "body": "Needs to be rebased.",
    "created_at": "2013-12-29T18:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185468",
    "user": "https://github.com/jdemeyer"
}
```

Needs to be rebased.



---

archive/issue_comments_185469.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-12-29T18:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185469",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_042510.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42510"
}
```



---

archive/issue_events_042511.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42511"
}
```



---

archive/issue_events_042512.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42512"
}
```



---

archive/issue_events_042513.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42513"
}
```



---

archive/issue_events_042514.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42514"
}
```



---

archive/issue_comments_185470.json:
```json
{
    "body": "I wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.\n\nWhat is the status of the Sage community's interest in this sort of work?",
    "created_at": "2016-03-01T14:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185470",
    "user": "https://github.com/embray"
}
```

I wonder if Felix could give an update on the status of this work.  Obviously it hasn't been touched in a long while and needs to be rebased.  But it seems like a lot of the heavy lifting has been done and this provides a good starting point for overhauling Sage's build.

What is the status of the Sage community's interest in this sort of work?



---

archive/issue_comments_185471.json:
```json
{
    "body": "Hi Erik.\n\nmaybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)\n\ni could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to\n\n- lack of automatic dependency tracking\n  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)\n- missing VPATH builds\n  (requirement for mere sanity, also for distcheck, cf. #21469),\n\nrendering the approach useless for debugging/development on foreign distros.\n\neventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...\n\ni am not totally up to date with the recent (last ~3 years) changes, and YMMV.",
    "created_at": "2016-09-11T08:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185471",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Hi Erik.

maybe you can reycle the configure.ac (and most path related patches) for sagelib. the canonical transition would be to reuse the python build system for a start (templatize setup.py, call it from make...)

i could not get anywhere before rewriting the whole thing to automake, as setup.py did/does not work (until today?). mostly due to

- lack of automatic dependency tracking
  (C/C++ compilers only write makefiles, setup.py does not use them. cython -MF is not ready yet)
- missing VPATH builds
  (requirement for mere sanity, also for distcheck, cf. #21469),

rendering the approach useless for debugging/development on foreign distros.

eventually all this was of no use for sage (the distribution) until a functional top-level build system would be in place. it might still facilitate packaging and use...

i am not totally up to date with the recent (last ~3 years) changes, and YMMV.



---

archive/issue_comments_185472.json:
```json
{
    "body": "`@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.",
    "created_at": "2016-09-12T15:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185472",
    "user": "https://github.com/jdemeyer"
}
```

`@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package. I don't know if that has ever been done. I agree in principle that autotools is better than whatever Python provides. However, you should weigh this against the fact that this would be very non-standard. I guess that distros would hate us for doing that.



---

archive/issue_comments_185473.json:
```json
{
    "body": "Replying to [comment:23 jdemeyer]:\n> `@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.\n\n\nhi Jeroen\n\nthe reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve \"implement a viable alternative to autotools\", which in my understanding is beyond the scope of this project.\n\n> I don't know if that has ever been done.\n\n\nautomake supports python for a loong time. i am not \"trying to use\" rather than \"suggesting\" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).\n\n> I guess that distros would hate us for doing that.\n\n\nthat i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\". cannot think of a way that would make packageing any easier. (care to explain?)",
    "created_at": "2016-09-12T16:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185473",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Replying to [comment:23 jdemeyer]:
> `@`felixs: I think it is a bit strange that you're trying to use a autotools-based build system for a Python package.


hi Jeroen

the reason i pulled in autotools was initially just autoconf. if you can make autoconf+setup.py.in work, then you don't need automake. likewise, if you reimplement autoconf in python etcpp. there are many ways, most of which involve "implement a viable alternative to autotools", which in my understanding is beyond the scope of this project.

> I don't know if that has ever been done.


automake supports python for a loong time. i am not "trying to use" rather than "suggesting" to use it. the cython rules i wrote for sagelib back then are now in use for another project (where, coincidentally, cython is used on some interface code).

> I guess that distros would hate us for doing that.


that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}". cannot think of a way that would make packageing any easier. (care to explain?)



---

archive/issue_comments_185474.json:
```json
{
    "body": "Replying to [comment:24 felixs]:\n> that i don't understand. package maintainers usually keep saying things like \"people, use auto{conf,tools,make}\".\n\n\n...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.",
    "created_at": "2016-09-12T19:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185474",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:24 felixs]:
> that i don't understand. package maintainers usually keep saying things like "people, use auto{conf,tools,make}".


...as alternative to home-brew build systems. But I have never seen a package maintainer say that as alternative to `setup.py`.



---

archive/issue_comments_185475.json:
```json
{
    "body": "> But I have never seen a package maintainer say that as alternative to setup.py.\n\n\ntrue/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.\n\nstill, i see no evidence why someone might \"hate us\" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement\n- VPATH\n- (pre build) configuration\n- (compile time) dependencies\n- a make based build process\nall of which immediately facilitate development, testing, debugging and thus packaging.",
    "created_at": "2016-09-12T20:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185475",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

> But I have never seen a package maintainer say that as alternative to setup.py.


true/plausible. the typical python package has simple dependencies and does not use cython. no need for a chainsaw.

still, i see no evidence why someone might "hate us" for using auto* (for whichever sort of package). instead (let me repeat), the autotools implement
- VPATH
- (pre build) configuration
- (compile time) dependencies
- a make based build process
all of which immediately facilitate development, testing, debugging and thus packaging.



---

archive/issue_comments_185476.json:
```json
{
    "body": "Replying to [comment:26 felixs]:\n> instead (let me repeat), the autotools implement\n> - VPATH\n> - (pre build) configuration\n> - (compile time) dependencies\n> - a make based build process\n> all of which immediately facilitate development, testing, debugging and thus packaging.\n\n\nThe autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.",
    "created_at": "2016-09-12T20:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185476",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:26 felixs]:
> instead (let me repeat), the autotools implement
> - VPATH
> - (pre build) configuration
> - (compile time) dependencies
> - a make based build process
> all of which immediately facilitate development, testing, debugging and thus packaging.


The autotools implement that for a typical C/C++ package. They don't really implement all that for Python packages. Which means that we have to implement that ourselves.



---

archive/issue_comments_185477.json:
```json
{
    "body": ">  The autotools implement that for a typical C/C++ package. \n\n\nat least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).\n\n> They don't really implement all that\n\n\nwhat exactly do you mean? please give an example.\n\nthanks\n\n[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html",
    "created_at": "2016-09-12T21:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185477",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

>  The autotools implement that for a typical C/C++ package. 


at least the four bullet points are intended to work for a lot more, including python packages [1]. arguably, to compile cython stuff, some custom (make) rules are required, but we had that. and it could be changed (=moved into automake).

> They don't really implement all that


what exactly do you mean? please give an example.

thanks

[1] http://ftp.gnu.org/old-gnu/Manuals/automake-1.6.1/html_node/automake_59.html



---

archive/issue_comments_185478.json:
```json
{
    "body": "OK, that looks interesting. I didn't know that `automake` could do that.",
    "created_at": "2016-09-12T21:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185478",
    "user": "https://github.com/jdemeyer"
}
```

OK, that looks interesting. I didn't know that `automake` could do that.



---

archive/issue_comments_185479.json:
```json
{
    "body": "Yes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. \n\nIn a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.\n\nAdmittedly software detection and so on is easier with something else than python...",
    "created_at": "2016-09-12T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185479",
    "user": "https://github.com/kiwifb"
}
```

Yes it wexist but it is not always implemented in a nice way for package maintainer. In most case I have seen that used, you have a main package using autoconf and then they have some python bindings. Typically if if the python bits support multiple versions of python, as a package maintainer I would prefer it in a separate package. 

In a distro you will usually provide bindings for all of the versions of python you support when feasible. When it is integrated as part of a bigger package it is usually a pain to cycle through different versions of python. Once it is a separate package, autotools, cmake or setup.py, I don't really care any more, I'll easily cycle on both.

Admittedly software detection and so on is easier with something else than python...



---

archive/issue_comments_185480.json:
```json
{
    "body": "Replying to [comment:30 fbissey]:\n> Admittedly software detection and so on is easier with something else than python...\n\n\nSConstruct! B)",
    "created_at": "2016-09-12T22:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185480",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:30 fbissey]:
> Admittedly software detection and so on is easier with something else than python...


SConstruct! B)



---

archive/issue_comments_185481.json:
```json
{
    "body": "<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......",
    "created_at": "2016-09-12T22:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185481",
    "user": "https://github.com/kiwifb"
}
```

<curled in a ball and rocking on his chair>I will not feed the trolls. I will not feed the trolls......



---

archive/issue_comments_185482.json:
```json
{
    "body": "Jeroen **loves** SC...",
    "created_at": "2016-09-12T22:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185482",
    "user": "https://github.com/nexttime"
}
```

Jeroen **loves** SC...



---

archive/issue_comments_185483.json:
```json
{
    "body": "Replying to [comment:30 fbissey]:\n> Admittedly software detection and so on is easier with something else than python...\n\n\nFor the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.",
    "created_at": "2016-09-13T09:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185483",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:30 fbissey]:
> Admittedly software detection and so on is easier with something else than python...


For the record: in https://github.com/sagemath/cysignals I am using `autoconf` for the configuration but I am still using `distutils` to build and install.



---

archive/issue_comments_185484.json:
```json
{
    "body": "Replying to [comment:34 jdemeyer]:\n> For the record:\n\n\nhere's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.\n\n[1] https://github.com/felix-salfelder/sage/tree/autotools\n\n[2] https://github.com/felix-salfelder/sage/tree/autotools/src",
    "created_at": "2016-09-13T10:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185484",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Replying to [comment:34 jdemeyer]:
> For the record:


here's the autotoolized sage (dist [1] + lib [2]). this is where i gave up. i never touched the sage code since then... watch out for configure.ac and various m4 scripts. note that all subdirectories in src are standalone packages.

[1] https://github.com/felix-salfelder/sage/tree/autotools

[2] https://github.com/felix-salfelder/sage/tree/autotools/src



---

archive/issue_comments_185485.json:
```json
{
    "body": "I have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the \"easiest\" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.\n\nBut there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a \"source distribution\" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.\n\nI think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.",
    "created_at": "2016-09-22T14:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185485",
    "user": "https://github.com/embray"
}
```

I have mixed feelings about the whole thing, but it's worth noting that it's getting closer and closer to the point where what's in `setup.py` won't matter as much as it does now.  distutils is still the "easiest" way to build Python modules, so somewhere in there there will still likely be a setup.py for a while.

But there's been *some* progress on better supporting binary wheels on Linux (see for example https://www.python.org/dev/peps/pep-0513/, though that obviously doesn't cut it for Sage).  There's also progress being made on standardizing a "source distribution" format for Python packages that isn't necessarily tied to any one build system.  This means it will be fine, for example, to use autoconf to build Sage.  It's fine now, even, it just doesn't fit in as as well (yet) with the Python ecosystem.

I think regardless, it will also help to further break up sage so that Python wrappers for its various dependencies are external projects themselves.  I realize that's a much bigger problem though and not always practical.



---

archive/issue_comments_185486.json:
```json
{
    "body": "Also, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py\n\nMatplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's \"hand rolled\", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<\n\nNumpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).",
    "created_at": "2016-09-22T15:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185486",
    "user": "https://github.com/embray"
}
```

Also, all that said, there are examples of Pythonic build configuration too.  One of the best is matplotlib's: https://github.com/matplotlib/matplotlib/blob/master/setupext.py

Matplotlib has quite a few external, non-Python dependencies--nowhere close to Sage, but more than most Python packages, and it handles this nicely.  Yes, it bothers me that it's "hand rolled", but most of that stuff in matplotlib can, and probably should, be factored out to an external package (with documentation!) that others can use.  And I would rather be writing Python than m4 scriptlets >_<

Numpy has a similar system (used also by Scipy), but matplotlib's is a bit cleaner (even it has a few things I would do a little differently, but the concept is sound).



---

archive/issue_comments_185487.json:
```json
{
    "body": "Outdated, should be closed",
    "created_at": "2020-09-15T18:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185487",
    "user": "https://github.com/mkoeppe"
}
```

Outdated, should be closed



---

archive/issue_events_042515.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42515"
}
```



---

archive/issue_events_042516.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T18:42:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42516"
}
```



---

archive/issue_comments_185488.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-15T18:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185488",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_185489.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-18T09:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185489",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_042517.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-09-18T10:03:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14603#event-42517"
}
```



---

archive/issue_comments_185490.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-09-18T10:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14603#issuecomment-185490",
    "user": "https://github.com/kiwifb"
}
```

Resolution: invalid
