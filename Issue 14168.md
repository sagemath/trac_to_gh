# Issue 14168: Make ccache a standard spkg

archive/issues_014168.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @roed314 @kini @jdemeyer @ppurka @ohanar @videlec\n\nIt's been optional long enough and will be especially handy when using git.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14372\n\n",
    "created_at": "2013-03-28T00:52:31Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Make ccache a standard spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14168",
    "user": "@robertwb"
}
```
Assignee: tbd

CC:  @roed314 @kini @jdemeyer @ppurka @ohanar @videlec

It's been optional long enough and will be especially handy when using git.

Issue created by migration from https://trac.sagemath.org/ticket/14372





---

archive/issue_comments_177969.json:
```json
{
    "body": "Why is this especially handy when using git?\n\nI hope that ccache will not be enabled by default, because you don't want to force 4GB of additional data in the user's home directory. And if it's not enabled by default, why should the package be standard?\n\nNote that I'm not against it being standard, it could be like GCC: shipped but not built by default.",
    "created_at": "2013-03-28T01:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177969",
    "user": "@jdemeyer"
}
```

Why is this especially handy when using git?

I hope that ccache will not be enabled by default, because you don't want to force 4GB of additional data in the user's home directory. And if it's not enabled by default, why should the package be standard?

Note that I'm not against it being standard, it could be like GCC: shipped but not built by default.



---

archive/issue_comments_177970.json:
```json
{
    "body": "One option I just discussed with Robert is to by default only turn on ccache for files in the Sage library.  This could drop the space requirement substantially.",
    "created_at": "2013-03-28T02:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177970",
    "user": "@roed314"
}
```

One option I just discussed with Robert is to by default only turn on ccache for files in the Sage library.  This could drop the space requirement substantially.



---

archive/issue_comments_177971.json:
```json
{
    "body": "Being optional for a while doesn't imply it should get standard;  there are many packages that are optional since quite a while, and you certainly won't want to include all of them.\n\nIMHO we already have too many \"standard\" packages, some are only built on a few platforms, or under certain circumstances, some only useful to (or necessary for) a few people.",
    "created_at": "2013-03-28T02:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177971",
    "user": "@nexttime"
}
```

Being optional for a while doesn't imply it should get standard;  there are many packages that are optional since quite a while, and you certainly won't want to include all of them.

IMHO we already have too many "standard" packages, some are only built on a few platforms, or under certain circumstances, some only useful to (or necessary for) a few people.



---

archive/issue_comments_177972.json:
```json
{
    "body": "Replying to [comment:3 leif]:\n> Being optional for a while doesn't imply it should get standard;  there are many packages that are optional since quite a while, and you certainly won't want to include all of them.\n> \n> IMHO we already have too many \"standard\" packages, some are only built on a few platforms, or under certain circumstances, some only useful to (or necessary for) a few people.\n\nI don't think Robert was claiming that ccache should become standard *because* it has been optional for a while, but rather that it has been optional for long enough to satisfy that requirement for becoming a standard package.\n\nWe do have a bunch of standard packages, but I agree with Robert that ccache would be useful for almost every Sage developer (which is more than can be said of some of our current standard spkgs).",
    "created_at": "2013-03-28T02:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177972",
    "user": "@roed314"
}
```

Replying to [comment:3 leif]:
> Being optional for a while doesn't imply it should get standard;  there are many packages that are optional since quite a while, and you certainly won't want to include all of them.
> 
> IMHO we already have too many "standard" packages, some are only built on a few platforms, or under certain circumstances, some only useful to (or necessary for) a few people.

I don't think Robert was claiming that ccache should become standard *because* it has been optional for a while, but rather that it has been optional for long enough to satisfy that requirement for becoming a standard package.

We do have a bunch of standard packages, but I agree with Robert that ccache would be useful for almost every Sage developer (which is more than can be said of some of our current standard spkgs).



---

archive/issue_comments_177973.json:
```json
{
    "body": "Well, it perfectly fits an *optional* package -- it doesn't require any specific support by the Sage library, just like gdb, autotools, valgrind, also GCC, or whatever, which are mostly there for convenience, but not needed by most Sage users.\n\nShipping (and reinstalling) it with each and every Sage release doesn't make sense to me;  <flame> any serious developer would have it installed [system-wide] anyway if it's of use to him/her </flame>.\n\nDon't make the horse an elephant, otherwise it'll really lose its ability to fly.",
    "created_at": "2013-03-28T02:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177973",
    "user": "@nexttime"
}
```

Well, it perfectly fits an *optional* package -- it doesn't require any specific support by the Sage library, just like gdb, autotools, valgrind, also GCC, or whatever, which are mostly there for convenience, but not needed by most Sage users.

Shipping (and reinstalling) it with each and every Sage release doesn't make sense to me;  <flame> any serious developer would have it installed [system-wide] anyway if it's of use to him/her </flame>.

Don't make the horse an elephant, otherwise it'll really lose its ability to fly.



---

archive/issue_comments_177974.json:
```json
{
    "body": "I essentially agree with leif here: it's a package which is essentially only useful for Sage *developers*, so why should we always use it?",
    "created_at": "2013-03-28T07:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177974",
    "user": "@jdemeyer"
}
```

I essentially agree with leif here: it's a package which is essentially only useful for Sage *developers*, so why should we always use it?



---

archive/issue_comments_177975.json:
```json
{
    "body": "If we switch to Portage Prefix as our build system, maybe we can have `sci-mathematics/sage-9999[dev]` (or whatever) depend on ccache and other versions of `sci-mathematics/sage` not need to. Developers would build a make target that unmasked `sci-mathematics/sage-9999` before building, say, whereas for users it would remain masked and stuff like the dev scripts and ccache would not be installed.\n\nBut of course that's not really relevant to this ticket.",
    "created_at": "2013-03-28T07:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177975",
    "user": "@kini"
}
```

If we switch to Portage Prefix as our build system, maybe we can have `sci-mathematics/sage-9999[dev]` (or whatever) depend on ccache and other versions of `sci-mathematics/sage` not need to. Developers would build a make target that unmasked `sci-mathematics/sage-9999` before building, say, whereas for users it would remain masked and stuff like the dev scripts and ccache would not be installed.

But of course that's not really relevant to this ticket.



---

archive/issue_comments_177976.json:
```json
{
    "body": "CCing a couple people I thought might be interested.",
    "created_at": "2013-03-28T07:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177976",
    "user": "@kini"
}
```

CCing a couple people I thought might be interested.



---

archive/issue_comments_177977.json:
```json
{
    "body": "I agree with the opinion that ccache shouldn't be a standard package. It is required only for developers, and maybe some developers will *not* want this to be default because of the 4G of storage it demands by default.\n\nFor those who are interested, it can be installed quite easily by setting the environment variable SAGE_INSTALL_CCACHE='yes'. This variable can be added to the `<SHELL>rc` since it doesn't clash with anything else, so that in every new sage installation or (re-)compilation ccache is used.",
    "created_at": "2013-03-28T12:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177977",
    "user": "@ppurka"
}
```

I agree with the opinion that ccache shouldn't be a standard package. It is required only for developers, and maybe some developers will *not* want this to be default because of the 4G of storage it demands by default.

For those who are interested, it can be installed quite easily by setting the environment variable SAGE_INSTALL_CCACHE='yes'. This variable can be added to the `<SHELL>rc` since it doesn't clash with anything else, so that in every new sage installation or (re-)compilation ccache is used.



---

archive/issue_comments_177978.json:
```json
{
    "body": "> I agree with the opinion that ccache shouldn't be a standard package. It is required only for developers, and maybe some developers will *not* want this to be default because of the 4G of storage it demands by default.\nIt seems like this indeed falls in the same category as the packages Leif mentioned.  We include everything needed to build but no more on the devel side.  Maybe if we do move to a more \"modular\" packaging system we could in fact *remove* standard spkgs...\n\nThat said, I don't know anything about ccache, and perhaps neither does the sage-combinat crew (?) so apparently not *all* developers need it.  But by the same token, maybe there is some compelling reason, and it sounds like it doesn't *have* to triple the size of a Sage installation.    What about Jeroen's idea to not build it by default - 185 KB is a fairly large addition, but it's not like we haven't bloated things before :)",
    "created_at": "2013-03-28T13:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177978",
    "user": "@kcrisman"
}
```

> I agree with the opinion that ccache shouldn't be a standard package. It is required only for developers, and maybe some developers will *not* want this to be default because of the 4G of storage it demands by default.
It seems like this indeed falls in the same category as the packages Leif mentioned.  We include everything needed to build but no more on the devel side.  Maybe if we do move to a more "modular" packaging system we could in fact *remove* standard spkgs...

That said, I don't know anything about ccache, and perhaps neither does the sage-combinat crew (?) so apparently not *all* developers need it.  But by the same token, maybe there is some compelling reason, and it sounds like it doesn't *have* to triple the size of a Sage installation.    What about Jeroen's idea to not build it by default - 185 KB is a fairly large addition, but it's not like we haven't bloated things before :)



---

archive/issue_comments_177979.json:
```json
{
    "body": "-1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default.",
    "created_at": "2013-03-28T15:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177979",
    "user": "@vbraun"
}
```

-1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default.



---

archive/issue_comments_177980.json:
```json
{
    "body": "Replying to [comment:11 vbraun]:\n> -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. \nNot every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).\n\nThat said, I don't have a strong opinion on the matter.",
    "created_at": "2013-03-28T15:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177980",
    "user": "@ohanar"
}
```

Replying to [comment:11 vbraun]:
> -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. 
Not every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).

That said, I don't have a strong opinion on the matter.



---

archive/issue_comments_177981.json:
```json
{
    "body": "Replying to [comment:12 ohanar]:\n> Replying to [comment:11 vbraun]:\n> > -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. \n> Not every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).\n\nIs there a section in the Sage Developer's Guide on how to setup a good Sage development environment on $OS / recommended packages, short introduction on how to setup / use $TOOL?",
    "created_at": "2013-03-28T16:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177981",
    "user": "@nexttime"
}
```

Replying to [comment:12 ohanar]:
> Replying to [comment:11 vbraun]:
> > -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. 
> Not every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).

Is there a section in the Sage Developer's Guide on how to setup a good Sage development environment on $OS / recommended packages, short introduction on how to setup / use $TOOL?



---

archive/issue_comments_177982.json:
```json
{
    "body": "Replying to [comment:12 ohanar]:\n> Replying to [comment:11 vbraun]:\n> > -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. \n> Not every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).\n\nSo... what is this ccache thing?  If it's automatic and makes `sage -b` faster, should I just use this optional spkg?  I guess I agree that one potential resolution to this ticket would be to tell people to use it.",
    "created_at": "2013-03-28T18:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177982",
    "user": "@kcrisman"
}
```

Replying to [comment:12 ohanar]:
> Replying to [comment:11 vbraun]:
> > -1 from me, too. If you are a serious developer then you hopefully use a distro that ships a working gcc+ccache by default. 
> Not every serious developer uses linux (and Sage is incompatible with macports, etc on OSX).

So... what is this ccache thing?  If it's automatic and makes `sage -b` faster, should I just use this optional spkg?  I guess I agree that one potential resolution to this ticket would be to tell people to use it.



---

archive/issue_comments_177983.json:
```json
{
    "body": "Replying to [comment:14 kcrisman]:\n> So... what is this ccache thing?\nA compiler cache. It essentially caches the output of `gcc`.\n\n> If it's automatic and makes `sage -b` faster\nThat's what it does indeed (in fact, it makes building all C/C++ code in Sage faster, not just `./sage -b`)\n\n> should I just use this optional spkg?\nIf you don't mind losing 4GB of disk space, yes you should.",
    "created_at": "2013-03-28T18:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177983",
    "user": "@jdemeyer"
}
```

Replying to [comment:14 kcrisman]:
> So... what is this ccache thing?
A compiler cache. It essentially caches the output of `gcc`.

> If it's automatic and makes `sage -b` faster
That's what it does indeed (in fact, it makes building all C/C++ code in Sage faster, not just `./sage -b`)

> should I just use this optional spkg?
If you don't mind losing 4GB of disk space, yes you should.



---

archive/issue_comments_177984.json:
```json
{
    "body": "It's automatic and makes `sage -b` faster, but it requires a lot of disk space (a few gigabytes), and the effect of making `sage -b` faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.",
    "created_at": "2013-03-28T18:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177984",
    "user": "@kini"
}
```

It's automatic and makes `sage -b` faster, but it requires a lot of disk space (a few gigabytes), and the effect of making `sage -b` faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.



---

archive/issue_comments_177985.json:
```json
{
    "body": "Yeah, I would say that one mention in the midst of [the env vars list](http://www.sagemath.org/doc/installation/source.html#environment-variables) in the *installation* (not developer) guide wouldn't be sufficient information to alert people to it.  You shouldn't expect a new (mathematically-oriented) developer to be aware of this, per se.",
    "created_at": "2013-03-28T18:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177985",
    "user": "@kcrisman"
}
```

Yeah, I would say that one mention in the midst of [the env vars list](http://www.sagemath.org/doc/installation/source.html#environment-variables) in the *installation* (not developer) guide wouldn't be sufficient information to alert people to it.  You shouldn't expect a new (mathematically-oriented) developer to be aware of this, per se.



---

archive/issue_comments_177986.json:
```json
{
    "body": "Replying to [comment:16 kini]:\n> the effect of making sage-b faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.\nSure, since it's a cache, it can only speed up compilation starting from the *second* time you build the same file.",
    "created_at": "2013-03-28T19:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177986",
    "user": "@jdemeyer"
}
```

Replying to [comment:16 kini]:
> the effect of making sage-b faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.
Sure, since it's a cache, it can only speed up compilation starting from the *second* time you build the same file.



---

archive/issue_comments_177987.json:
```json
{
    "body": "Now that we have moved to git, what is the opinion on this?",
    "created_at": "2014-04-15T10:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177987",
    "user": "@ppurka"
}
```

Now that we have moved to git, what is the opinion on this?



---

archive/issue_comments_177988.json:
```json
{
    "body": "We do have the `SAGE_INSTALL_CCACHE` variable now and I personally think that is a perfect solution.",
    "created_at": "2014-04-15T11:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177988",
    "user": "@jdemeyer"
}
```

We do have the `SAGE_INSTALL_CCACHE` variable now and I personally think that is a perfect solution.



---

archive/issue_comments_177989.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-15T13:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177989",
    "user": "@ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_177990.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-15T13:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177990",
    "user": "@ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177991.json:
```json
{
    "body": "So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)",
    "created_at": "2014-04-15T13:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177991",
    "user": "@nexttime"
}
```

So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)



---

archive/issue_comments_177992.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2014-04-15T19:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177992",
    "user": "@kcrisman"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_177993.json:
```json
{
    "body": "> So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)\nOr repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.",
    "created_at": "2014-04-15T19:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177993",
    "user": "@kcrisman"
}
```

> So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)
Or repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.



---

archive/issue_comments_177994.json:
```json
{
    "body": "Replying to [comment:26 kcrisman]:\n> > So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)\n> Or repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.\n\nI don't think the necessary additions to the Developer's Guide will get *that* large.",
    "created_at": "2014-04-15T19:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177994",
    "user": "@nexttime"
}
```

Replying to [comment:26 kcrisman]:
> > So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)
> Or repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.

I don't think the necessary additions to the Developer's Guide will get *that* large.



---

archive/issue_comments_177995.json:
```json
{
    "body": "> > > So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)\n> > Or repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.\n> \n> I don't think the necessary additions to the Developer's Guide will get *that* large.\nLOL",
    "created_at": "2014-04-15T19:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177995",
    "user": "@kcrisman"
}
```

> > > So we have to open another ticket to prominently advertise it (in the Sage *Developer's* Guide)? ;-)
> > Or repurpose this one for that, which seems fine to me.  I do agree that 4 GB is nothing to sneeze at, and will reiterate comment:17.
> 
> I don't think the necessary additions to the Developer's Guide will get *that* large.
LOL



---

archive/issue_comments_177996.json:
```json
{
    "body": "Hi,\n\n(ccing me)\n\nI am against shipping ccache in Sage (following comment:11). On the other hand, if some OS fails to have it then why not doing the same as gcc? I have no strong opinion about this as I think that everybody should use a Unix/GNU distribution (with gcc+ccache available).\n\nNevertheless, it would be fantastic to document the usage of ccache\n- for compiling **only** sage source code\n- for compiling sage source code and third-party softwares\nand I see two places where this might be important\n- the Developer guide\n- the README\n\nI started using ccache today (thanks to Robert Bradshaw). The only thing I did is\n\n```\n $ export PATH=PATH_TO_CCACHE:$PATH\n $ sage -b\n```\n\nIs that the right way to use it? (it seems so as my cache is much bigger now).\n\nTell me if I can help for something on that ticket.\n\nBest\nVincent",
    "created_at": "2014-04-24T15:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177996",
    "user": "@videlec"
}
```

Hi,

(ccing me)

I am against shipping ccache in Sage (following comment:11). On the other hand, if some OS fails to have it then why not doing the same as gcc? I have no strong opinion about this as I think that everybody should use a Unix/GNU distribution (with gcc+ccache available).

Nevertheless, it would be fantastic to document the usage of ccache
- for compiling **only** sage source code
- for compiling sage source code and third-party softwares
and I see two places where this might be important
- the Developer guide
- the README

I started using ccache today (thanks to Robert Bradshaw). The only thing I did is

```
 $ export PATH=PATH_TO_CCACHE:$PATH
 $ sage -b
```

Is that the right way to use it? (it seems so as my cache is much bigger now).

Tell me if I can help for something on that ticket.

Best
Vincent



---

archive/issue_comments_177997.json:
```json
{
    "body": "Follow up on comment:29: is there a way of caching results of Cythonization?",
    "created_at": "2014-04-24T15:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177997",
    "user": "@videlec"
}
```

Follow up on comment:29: is there a way of caching results of Cythonization?



---

archive/issue_comments_177998.json:
```json
{
    "body": "Replying to [comment:18 jdemeyer]:\n> Replying to [comment:16 kini]:\n> > the effect of making sage-b faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.\n> Sure, since it's a cache, it can only speed up compilation starting from the *second* time you build the same file.\nI'm pretty sure even the first compilation is faster, because some files are used multiple times within an install.",
    "created_at": "2014-04-25T07:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177998",
    "user": "@rwst"
}
```

Replying to [comment:18 jdemeyer]:
> Replying to [comment:16 kini]:
> > the effect of making sage-b faster is most visible if you used ccache during your initial build of sage from the source tarball, I think.
> Sure, since it's a cache, it can only speed up compilation starting from the *second* time you build the same file.
I'm pretty sure even the first compilation is faster, because some files are used multiple times within an install.



---

archive/issue_comments_177999.json:
```json
{
    "body": "Replying to [comment:30 vdelecroix]:\n> Follow up on comment:29: is there a way of caching results of Cythonization?\n\nYes, see #16148. I think every developer should use it (4GB of hard drive space really isn't that much these days) and I think every user should be considered at least a potential developer (at least the ones who compile from source).",
    "created_at": "2014-04-27T03:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-177999",
    "user": "@robertwb"
}
```

Replying to [comment:30 vdelecroix]:
> Follow up on comment:29: is there a way of caching results of Cythonization?

Yes, see #16148. I think every developer should use it (4GB of hard drive space really isn't that much these days) and I think every user should be considered at least a potential developer (at least the ones who compile from source).



---

archive/issue_comments_178000.json:
```json
{
    "body": "> > Follow up on comment:29: is there a way of caching results of Cythonization?\n> \n> Yes, see #16148. I think every developer should use it (4GB of hard drive space really isn't that much these days) and I think every user should be considered at least a potential developer (at least the ones who compile from source). \nThough I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.\n\nThat said, I still don't know how to use this properly!  Taking a chance that just using the env var in my .profile was enough...",
    "created_at": "2014-05-29T17:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178000",
    "user": "@kcrisman"
}
```

> > Follow up on comment:29: is there a way of caching results of Cythonization?
> 
> Yes, see #16148. I think every developer should use it (4GB of hard drive space really isn't that much these days) and I think every user should be considered at least a potential developer (at least the ones who compile from source). 
Though I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.

That said, I still don't know how to use this properly!  Taking a chance that just using the env var in my .profile was enough...



---

archive/issue_comments_178001.json:
```json
{
    "body": "Replying to [comment:33 kcrisman]:\n> Though I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.\nThe 4GB is the default cache size. It would sit in the user homedir, and only gets filled if something is actually compiled (which would fail in a binary distribution, I think). So, shipping ccache with a binary would be useless, but it wouldn't particularly use 4GB anywhere either.",
    "created_at": "2014-05-29T19:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178001",
    "user": "@nbruin"
}
```

Replying to [comment:33 kcrisman]:
> Though I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.
The 4GB is the default cache size. It would sit in the user homedir, and only gets filled if something is actually compiled (which would fail in a binary distribution, I think). So, shipping ccache with a binary would be useless, but it wouldn't particularly use 4GB anywhere either.



---

archive/issue_comments_178002.json:
```json
{
    "body": "Replying to [comment:34 nbruin]:\n> Replying to [comment:33 kcrisman]:\n> > Though I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.\n> The 4GB is the default cache size. It would sit in the user homedir\n\nWhich in many cases would be the wrong place.\n\n\n> and only gets filled if something is actually compiled (which would fail in a binary distribution, I think).\n\nWhile it only gets filled upon compilation, `sage -b` is sufficient, as is the installation of an optional spkg in many if not most cases.  The only difference of bdists is that they don't come with *upstream* source code (i.e., spkgs, or tarballs in `upstream/`.)\n\n\n> So, shipping ccache with a binary would be useless, but it wouldn't particularly use 4GB anywhere either.\n\nSee above.",
    "created_at": "2014-05-29T19:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178002",
    "user": "@nexttime"
}
```

Replying to [comment:34 nbruin]:
> Replying to [comment:33 kcrisman]:
> > Though I don't think it should be in binaries anyway.  On a small USB key and some other situations 4 GB is quite a bit.
> The 4GB is the default cache size. It would sit in the user homedir

Which in many cases would be the wrong place.


> and only gets filled if something is actually compiled (which would fail in a binary distribution, I think).

While it only gets filled upon compilation, `sage -b` is sufficient, as is the installation of an optional spkg in many if not most cases.  The only difference of bdists is that they don't come with *upstream* source code (i.e., spkgs, or tarballs in `upstream/`.)


> So, shipping ccache with a binary would be useless, but it wouldn't particularly use 4GB anywhere either.

See above.



---

archive/issue_comments_178003.json:
```json
{
    "body": "Changing component from packages: standard to documentation.",
    "created_at": "2014-11-13T14:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178003",
    "user": "@jdemeyer"
}
```

Changing component from packages: standard to documentation.



---

archive/issue_comments_178004.json:
```json
{
    "body": "Getting back to the original *point* of this ticket... \n\nIs [the information here](http://www.sagemath.org/doc/installation/source.html#section-envvar) sufficient?  It's true that the *developer* guide does not have any information on it, which seems odd.",
    "created_at": "2014-11-20T15:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178004",
    "user": "@kcrisman"
}
```

Getting back to the original *point* of this ticket... 

Is [the information here](http://www.sagemath.org/doc/installation/source.html#section-envvar) sufficient?  It's true that the *developer* guide does not have any information on it, which seems odd.



---

archive/issue_comments_178005.json:
```json
{
    "body": "Replying to [comment:38 kcrisman]:\n> Getting back to the original *point* of this ticket... \n> \n> Is [the information here](http://www.sagemath.org/doc/installation/source.html#section-envvar) sufficient?  It's true that the *developer* guide does not have any information on it, which seems odd.\nI added some information on `ccache` to the developer guide a couple months ago in #21500 without seeing this discussion. If that's the only point of this ticket, then it can be closed as duplicate.",
    "created_at": "2016-11-15T01:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178005",
    "user": "@paulmasson"
}
```

Replying to [comment:38 kcrisman]:
> Getting back to the original *point* of this ticket... 
> 
> Is [the information here](http://www.sagemath.org/doc/installation/source.html#section-envvar) sufficient?  It's true that the *developer* guide does not have any information on it, which seems odd.
I added some information on `ccache` to the developer guide a couple months ago in #21500 without seeing this discussion. If that's the only point of this ticket, then it can be closed as duplicate.



---

archive/issue_comments_178006.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-11-15T01:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178006",
    "user": "@paulmasson"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_178007.json:
```json
{
    "body": "I agree, it can be closed as a dup.",
    "created_at": "2016-11-15T01:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178007",
    "user": "@mkoeppe"
}
```

I agree, it can be closed as a dup.



---

archive/issue_comments_178008.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-15T01:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178008",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178009.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2017-01-21T18:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14168#issuecomment-178009",
    "user": "@vbraun"
}
```

Resolution: invalid
