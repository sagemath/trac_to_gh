# Issue 30008: FreeModuleAutomorphism should not inherit from FreeModuleTensor

archive/issues_030008.json:
```json
{
    "body": "CC:  @egourgoulhon @tscrim @mjungmath\n\nIt inherits `_add_` and `_sub_` methods that make no sense in the coercion system. \n\n(a) Instead, there should be a coercion map from `FreeModuleLinearGroup`, sending a `FreeModuleAutomorphism` to the underlying tensor.\n\n(b) Alternatively, + and - could be implemented as actions.\n\n\nMaking this change will allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30245\n\n",
    "created_at": "2020-07-29T03:10:31Z",
    "labels": [
        "linear algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "FreeModuleAutomorphism should not inherit from FreeModuleTensor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30008",
    "user": "@mkoeppe"
}
```
CC:  @egourgoulhon @tscrim @mjungmath

It inherits `_add_` and `_sub_` methods that make no sense in the coercion system. 

(a) Instead, there should be a coercion map from `FreeModuleLinearGroup`, sending a `FreeModuleAutomorphism` to the underlying tensor.

(b) Alternatively, + and - could be implemented as actions.


Making this change will allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.

Issue created by migration from https://trac.sagemath.org/ticket/30245





---

archive/issue_comments_426552.json:
```json
{
    "body": "Do you have an explicit example what goes wrong here?",
    "created_at": "2020-07-29T07:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426552",
    "user": "@mjungmath"
}
```

Do you have an explicit example what goes wrong here?



---

archive/issue_comments_426553.json:
```json
{
    "body": "I agree with most of the ticket description, except for \n\n>Making this change will also allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.\n\nIndeed, at this stage, `self._fmodule.tensor_from_comp()` is still required in `FreeModuleTensor._add_()` because it deals properly with the tensor (anti)symmetries, via the code of `CompWithSym.__add__()`. For instance, if `t1` is a (4,0)-tensor with that is fully symmetric, and `t2` is a (4,0)-tensor that is symmetric on the first two indices and antisymmetric on the last two ones, `t1 + t2` is symmetric only on the first two indices, i.e. its (anti)symmetries are different from those of `t1` or `t2`. They thus cannot be generated by `self._new_instance` (in the current stage).",
    "created_at": "2020-08-01T09:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426553",
    "user": "@egourgoulhon"
}
```

I agree with most of the ticket description, except for 

>Making this change will also allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.

Indeed, at this stage, `self._fmodule.tensor_from_comp()` is still required in `FreeModuleTensor._add_()` because it deals properly with the tensor (anti)symmetries, via the code of `CompWithSym.__add__()`. For instance, if `t1` is a (4,0)-tensor with that is fully symmetric, and `t2` is a (4,0)-tensor that is symmetric on the first two indices and antisymmetric on the last two ones, `t1 + t2` is symmetric only on the first two indices, i.e. its (anti)symmetries are different from those of `t1` or `t2`. They thus cannot be generated by `self._new_instance` (in the current stage).



---

archive/issue_comments_426554.json:
```json
{
    "body": "Thanks, that's an important point.",
    "created_at": "2020-08-01T13:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426554",
    "user": "@mkoeppe"
}
```

Thanks, that's an important point.



---

archive/issue_comments_426555.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426555",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
