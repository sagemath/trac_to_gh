# Issue 30008: FreeModuleAutomorphism should not inherit from FreeModuleTensor

Issue created by migration from https://trac.sagemath.org/ticket/30245

Original creator: mkoeppe

Original creation time: 2020-07-29 03:10:31

CC:  egourgoulhon tscrim @mjungmath

It inherits `_add_` and `_sub_` methods that make no sense in the coercion system. 

(a) Instead, there should be a coercion map from `FreeModuleLinearGroup`, sending a `FreeModuleAutomorphism` to the underlying tensor.

(b) Alternatively, + and - could be implemented as actions.


Making this change will allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.


---

Comment by @mjungmath created at 2020-07-29 07:18:45

Do you have an explicit example what goes wrong here?


---

Comment by egourgoulhon created at 2020-08-01 09:50:29

I agree with most of the ticket description, except for 

>Making this change will also allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.

Indeed, at this stage, `self._fmodule.tensor_from_comp()` is still required in `FreeModuleTensor._add_()` because it deals properly with the tensor (anti)symmetries, via the code of `CompWithSym.__add__()`. For instance, if `t1` is a (4,0)-tensor with that is fully symmetric, and `t2` is a (4,0)-tensor that is symmetric on the first two indices and antisymmetric on the last two ones, `t1 + t2` is symmetric only on the first two indices, i.e. its (anti)symmetries are different from those of `t1` or `t2`. They thus cannot be generated by `self._new_instance` (in the current stage).


---

Comment by mkoeppe created at 2020-08-01 13:09:17

Thanks, that's an important point.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
