# Issue 30008: FreeModuleAutomorphism should not inherit from FreeModuleTensor

archive/issues_030008.json:
```json
{
    "body": "CC:  @egourgoulhon @tscrim @mjungmath\n\nIt inherits `_add_` and `_sub_` methods that make no sense in the coercion system. \n\n(a) Instead, there should be a coercion map from `FreeModuleLinearGroup`, sending a `FreeModuleAutomorphism` to the underlying tensor.\n\n(b) Alternatively, + and - could be implemented as actions.\n\n\nMaking this change will allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30245\n\n",
    "created_at": "2020-07-29T03:10:31Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "FreeModuleAutomorphism should not inherit from FreeModuleTensor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30008",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @egourgoulhon @tscrim @mjungmath

It inherits `_add_` and `_sub_` methods that make no sense in the coercion system. 

(a) Instead, there should be a coercion map from `FreeModuleLinearGroup`, sending a `FreeModuleAutomorphism` to the underlying tensor.

(b) Alternatively, + and - could be implemented as actions.


Making this change will allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.

Issue created by migration from https://trac.sagemath.org/ticket/30245





---

archive/issue_comments_426076.json:
```json
{
    "body": "Do you have an explicit example what goes wrong here?",
    "created_at": "2020-07-29T07:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426076",
    "user": "https://github.com/mjungmath"
}
```

Do you have an explicit example what goes wrong here?



---

archive/issue_comments_426077.json:
```json
{
    "body": "I agree with most of the ticket description, except for \n\n>Making this change will also allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.\n\nIndeed, at this stage, `self._fmodule.tensor_from_comp()` is still required in `FreeModuleTensor._add_()` because it deals properly with the tensor (anti)symmetries, via the code of `CompWithSym.__add__()`. For instance, if `t1` is a (4,0)-tensor with that is fully symmetric, and `t2` is a (4,0)-tensor that is symmetric on the first two indices and antisymmetric on the last two ones, `t1 + t2` is symmetric only on the first two indices, i.e. its (anti)symmetries are different from those of `t1` or `t2`. They thus cannot be generated by `self._new_instance` (in the current stage).",
    "created_at": "2020-08-01T09:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426077",
    "user": "https://github.com/egourgoulhon"
}
```

I agree with most of the ticket description, except for 

>Making this change will also allow us to simplify `FreeModuleTensor._add_` and `_sub_`: Currently they go through `self._fmodule.tensor_from_comp()` when they really should use `self._new_instance`.

Indeed, at this stage, `self._fmodule.tensor_from_comp()` is still required in `FreeModuleTensor._add_()` because it deals properly with the tensor (anti)symmetries, via the code of `CompWithSym.__add__()`. For instance, if `t1` is a (4,0)-tensor with that is fully symmetric, and `t2` is a (4,0)-tensor that is symmetric on the first two indices and antisymmetric on the last two ones, `t1 + t2` is symmetric only on the first two indices, i.e. its (anti)symmetries are different from those of `t1` or `t2`. They thus cannot be generated by `self._new_instance` (in the current stage).



---

archive/issue_comments_426078.json:
```json
{
    "body": "Thanks, that's an important point.",
    "created_at": "2020-08-01T13:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426078",
    "user": "https://github.com/mkoeppe"
}
```

Thanks, that's an important point.



---

archive/issue_events_078211.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78211"
}
```



---

archive/issue_events_078212.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78212"
}
```



---

archive/issue_events_078213.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78213"
}
```



---

archive/issue_comments_426079.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30008#issuecomment-426079",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_078214.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78214"
}
```



---

archive/issue_events_078215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78215"
}
```



---

archive/issue_events_078216.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78216"
}
```



---

archive/issue_events_078217.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78217"
}
```



---

archive/issue_events_078218.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78218"
}
```



---

archive/issue_events_078219.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78219"
}
```



---

archive/issue_events_078220.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78220"
}
```



---

archive/issue_events_078221.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30008",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30008#event-78221"
}
```
