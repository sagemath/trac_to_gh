# Issue 23549: Pre-processing a MILP

archive/issues_023549.json:
```json
{
    "body": "When formulating a problem as a MILP in practice, I often end up with a problem which is stupid in different ways. I suggest that we could pre-process a MILP to fix the following:\n\n- constant contraints (`1 >= 0`).\n\n- redundant constraints (same contraint appearing more than once).\n\n- equalities (`f(x) = 0`) which should be eliminated by linear algebra.\n\n- using linear algebra to change some constraints to variable bounds.\n\nI haven't thought about the user interface of this, whether this is something that should be done by default or not...\n\nFirst I want to see to what extent the various solvers are affected by these issues.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23786\n\n",
    "created_at": "2017-09-05T13:31:29Z",
    "labels": [
        "linear programming",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Pre-processing a MILP",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23549",
    "user": "jdemeyer"
}
```
When formulating a problem as a MILP in practice, I often end up with a problem which is stupid in different ways. I suggest that we could pre-process a MILP to fix the following:

- constant contraints (`1 >= 0`).

- redundant constraints (same contraint appearing more than once).

- equalities (`f(x) = 0`) which should be eliminated by linear algebra.

- using linear algebra to change some constraints to variable bounds.

I haven't thought about the user interface of this, whether this is something that should be done by default or not...

First I want to see to what extent the various solvers are affected by these issues.

Issue created by migration from https://trac.sagemath.org/ticket/23786





---

archive/issue_comments_329913.json:
```json
{
    "body": "I see several drawbacks with your proposal\n- solvers are very efficient in eliminating redundant or useless constraints, and also propagating obvious values. You can compare the time to write and solve a MILP when adding multiple times the same constraints with `check_redundant` turn to `True` and `False`. It's usually faster with `False` (at least with `Cplex` and `Gurobi` that I'm using frequently)\n- We currently don't have access to dual variables in our framework and so it is not possible to do column generation. If you eliminate constraints, it might be even harder since the user might ask for the dual of a constraint that has been eliminated\n- The elimination of constraints might become much more complex for the user if the number of added constraints is different from the number of stored constraints\nIf you want to do that, please make it optional and not default.",
    "created_at": "2017-10-08T09:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23549#issuecomment-329913",
    "user": "dcoudert"
}
```

I see several drawbacks with your proposal
- solvers are very efficient in eliminating redundant or useless constraints, and also propagating obvious values. You can compare the time to write and solve a MILP when adding multiple times the same constraints with `check_redundant` turn to `True` and `False`. It's usually faster with `False` (at least with `Cplex` and `Gurobi` that I'm using frequently)
- We currently don't have access to dual variables in our framework and so it is not possible to do column generation. If you eliminate constraints, it might be even harder since the user might ask for the dual of a constraint that has been eliminated
- The elimination of constraints might become much more complex for the user if the number of added constraints is different from the number of stored constraints
If you want to do that, please make it optional and not default.



---

archive/issue_comments_329914.json:
```json
{
    "body": "Replying to [comment:3 dcoudert]:\n> solvers are very efficient in eliminating redundant or useless constraints, and also propagating obvious values.\n\nPart of this proposal is also to check which kinds of elimination do and do not make sense. This may be different for different solvers. I mainly use PPL, because the problems that I work with tend to be too numerically unstable for non-exact solvers.\n\n> If you want to do that, please make it optional and not default.\n\nI never said to make it default. It would be some explicit method call doing this.",
    "created_at": "2017-10-09T08:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23549#issuecomment-329914",
    "user": "jdemeyer"
}
```

Replying to [comment:3 dcoudert]:
> solvers are very efficient in eliminating redundant or useless constraints, and also propagating obvious values.

Part of this proposal is also to check which kinds of elimination do and do not make sense. This may be different for different solvers. I mainly use PPL, because the problems that I work with tend to be too numerically unstable for non-exact solvers.

> If you want to do that, please make it optional and not default.

I never said to make it default. It would be some explicit method call doing this.
