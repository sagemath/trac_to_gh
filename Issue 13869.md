# Issue 13869: Cache a bounded number of recently-created parents.

Issue created by migration from Trac.

Original creator: robertwb

Original creation time: 2013-02-06 20:20:14

Assignee: rlm

CC:  nbruin simonking jpflori

Cache a bounded number of recently-created parents to avoid repeated re-creation when strong references are not kept.

Related: #715, #14072, #14058.


---

Attachment


---

Comment by SimonKing created at 2013-02-06 20:26:43

Yep, that's about what I thought would work.


---

Comment by nbruin created at 2013-02-07 00:41:21

Apart from fixing `len(recently_created)` at compile-time this may well be a good idea. Main objections:
 - It will make debugging that much harder. Given that doctests are small, the parent deletion code will hardly be exercised.
 - Do we have good use-cases that show clear benefit from this approach? Given that the frequency of garbage collection in python is rather low, I'd expect that parents will relatively often still be around if they are required soon after deletion.


---

Comment by robertwb created at 2013-02-07 00:54:55

Replying to [comment:2 nbruin]:
> Apart from fixing `len(recently_created)` at compile-time this may well be a good idea.

len(list) is really fast, much faster than creating a parent, and allows our list to possibly grow or shrink in the future.

> Main objections:
>  - It will make debugging that much harder. Given that doctests are small, the parent deletion code will hardly be exercised.
>  - Do we have good use-cases that show clear benefit from this approach? Given that the frequency of garbage collection in python is rather low, I'd expect that parents will relatively often still be around if they are required soon after deletion.

I actually agree with both of these objections; I don't think this code should go in unless it's clearly shown to be a problem.
