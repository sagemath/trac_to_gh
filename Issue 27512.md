# Issue 27512: is_globally_equivalent_to is not symmetric

Issue created by migration from https://trac.sagemath.org/ticket/27749

Original creator: sbrandhorst

Original creation time: 2019-04-29 14:03:30

CC:  slelievre mjo @kliem


```
Q = QuadraticForm(ZZ, 2, [2,3,5])
P = QuadraticForm(ZZ, 2, [8,6,5])
Q.is_globally_equivalent_to(P)
True
P.is_globally_equivalent_to(Q)
False
```

The expected output in any case is `False`. 
The underlying computation is done with Pari.


---

Comment by slelievre created at 2019-04-29 20:32:40

Changing keywords from "" to "pari".


---

Comment by embray created at 2019-06-14 14:55:02

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).


---

Comment by chapoton created at 2020-04-28 17:26:03

This is still failing in pari 2.11.2 from May 2019 (currently in sage)

but works in pari [2, 11, 4, 23175, "e4f812ce9f"].

This will need a doctest once pari is updated.


---

Comment by mkoeppe created at 2020-04-28 17:35:27

See also discussion in #29472


---

Comment by sbrandhorst created at 2020-09-26 18:25:26


```
sage: Q = QuadraticForm(ZZ, 2, [2,3,5]) 
....: P = QuadraticForm(ZZ, 2, [8,6,5]) 
....: Q.is_globally_equivalent_to(P)                                         
False
sage: P.is_globally_equivalent_to(Q)                                         
False
sage: pari.version()                                                         
(2, 11, 4)
```



---

Comment by slelievre created at 2020-09-26 18:31:31

The pari upgrade happened in

- #29313: Upgrade to pari 2.11.4

which was merged in Sage 9.2.beta7.


---

Comment by slelievre created at 2020-09-26 18:32:48

Can someone add the doctest?


---

Comment by sbrandhorst created at 2020-09-26 18:34:37

New commits:


---

Comment by sbrandhorst created at 2020-09-26 18:34:37

Changing status from new to needs_review.


---

Comment by slelievre created at 2020-09-27 13:17:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-10-03 22:57:33

Resolution: fixed


---

Comment by dimpase created at 2020-10-20 10:43:36

Shouldn't a test be added to `spkg-configure.m4` of pari? Note that e.g. on Fedora 30 one has pari/gp version 2.11.2, which passes all the tests we currently have there, but fails the test in
`quadratic_form__equivalence_testing` added by this ticket?


---

Comment by dimpase created at 2020-10-20 11:50:21

Replying to [comment:15 dimpase]:
> Shouldn't a test be added to `spkg-configure.m4` of pari? Note that e.g. on Fedora 30 one has pari/gp version 2.11.2, which passes all the tests we currently have there, but fails the test in
> `quadratic_form__equivalence_testing` added by this ticket? 

should be fixed by #30800
