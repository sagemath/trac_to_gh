# Issue 28591: f_vector is exposed

Issue created by migration from https://trac.sagemath.org/ticket/28828

Original creator: @kliem

Original creation time: 2019-12-02 10:28:33

CC:  jipilab @laisrast

Keywords: polyhedron, f_vector

Currently the f_vector is exposed.


```
sage: P = polytopes.simplex()
sage: P.f_vector()[0] = 2
sage: P.f_vector()
(2, 4, 6, 4, 1)
```


We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.


---

Comment by @kliem created at 2019-12-02 10:46:11

Changing keywords from "polyhedron, f_vector" to "polyhedron, exposed attributes".


---

Comment by nailuj created at 2019-12-10 15:56:55

An older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.


---

Comment by @kliem created at 2019-12-10 16:50:07

Thanks for pointing this out.

As for vectors and matrices there is `set_immutable`, which should work fine here.
I just didn't get around to doing it.


---

Comment by @kliem created at 2019-12-13 07:10:05

New commits:


---

Comment by @kliem created at 2019-12-13 07:21:29

Changing status from new to needs_review.


---

Comment by @LaisRast created at 2019-12-17 10:03:26

I am not sure we need to change everything to be immutable.
But since you are doing this, you may also want to consider the following:

```
sage: P = polytopes.cube()
....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
....: P.restricted_automorphism_group(output='matrixlist')[0]
....: 
[1000    0    0    0]
[   0    1    0    0]
[   0    0    1    0]
[   0    0    0    1]
```



---

Comment by @LaisRast created at 2019-12-17 11:30:09

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-12-17 14:34:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @kliem created at 2019-12-17 14:35:03

Changing status from needs_work to needs_review.


---

Comment by @kliem created at 2019-12-17 15:15:24

As mentioned in the description of the ticket, some methods are worse than others.

E.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.

Replying to [comment:6 gh-LaisRast]:
> I am not sure we need to change everything to be immutable.
> But since you are doing this, you may also want to consider the following:
> {{{
> sage: P = polytopes.cube()
> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
> ....: P.restricted_automorphism_group(output='matrixlist')[0]
> ....: 
> [1000    0    0    0]
> [   0    1    0    0]
> [   0    0    1    0]
> [   0    0    0    1]
> }}}


---

Comment by @LaisRast created at 2019-12-17 20:51:05

Changing status from needs_review to positive_review.


---

Comment by @LaisRast created at 2019-12-17 20:51:05

I believe now it is good to go.


---

Comment by vbraun created at 2019-12-20 22:45:58

Resolution: fixed
