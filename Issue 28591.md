# Issue 28591: f_vector is exposed

archive/issues_028591.json:
```json
{
    "body": "CC:  @jplab @laisrast\n\nKeywords: polyhedron, f_vector\n\nCurrently the f_vector is exposed.\n\n\n```\nsage: P = polytopes.simplex()\nsage: P.f_vector()[0] = 2\nsage: P.f_vector()\n(2, 4, 6, 4, 1)\n```\n\n\nWe fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28828\n\n",
    "created_at": "2019-12-02T10:28:33Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "f_vector is exposed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28591",
    "user": "https://github.com/kliem"
}
```
CC:  @jplab @laisrast

Keywords: polyhedron, f_vector

Currently the f_vector is exposed.


```
sage: P = polytopes.simplex()
sage: P.f_vector()[0] = 2
sage: P.f_vector()
(2, 4, 6, 4, 1)
```


We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.

Issue created by migration from https://trac.sagemath.org/ticket/28828





---

archive/issue_comments_403104.json:
```json
{
    "body": "Changing keywords from \"polyhedron, f_vector\" to \"polyhedron, exposed attributes\".",
    "created_at": "2019-12-02T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403104",
    "user": "https://github.com/kliem"
}
```

Changing keywords from "polyhedron, f_vector" to "polyhedron, exposed attributes".



---

archive/issue_comments_403105.json:
```json
{
    "body": "An older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.",
    "created_at": "2019-12-10T15:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403105",
    "user": "https://trac.sagemath.org/admin/accounts/users/nailuj"
}
```

An older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.



---

archive/issue_comments_403106.json:
```json
{
    "body": "Thanks for pointing this out.\n\nAs for vectors and matrices there is `set_immutable`, which should work fine here.\nI just didn't get around to doing it.",
    "created_at": "2019-12-10T16:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403106",
    "user": "https://github.com/kliem"
}
```

Thanks for pointing this out.

As for vectors and matrices there is `set_immutable`, which should work fine here.
I just didn't get around to doing it.



---

archive/issue_comments_403107.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-12-13T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403107",
    "user": "https://github.com/kliem"
}
```

New commits:



---

archive/issue_comments_403108.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-13T07:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403108",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_403109.json:
```json
{
    "body": "I am not sure we need to change everything to be immutable.\nBut since you are doing this, you may also want to consider the following:\n\n```\nsage: P = polytopes.cube()\n....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n....: P.restricted_automorphism_group(output='matrixlist')[0]\n....: \n[1000    0    0    0]\n[   0    1    0    0]\n[   0    0    1    0]\n[   0    0    0    1]\n```\n",
    "created_at": "2019-12-17T10:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403109",
    "user": "https://github.com/LaisRast"
}
```

I am not sure we need to change everything to be immutable.
But since you are doing this, you may also want to consider the following:

```
sage: P = polytopes.cube()
....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
....: P.restricted_automorphism_group(output='matrixlist')[0]
....: 
[1000    0    0    0]
[   0    1    0    0]
[   0    0    1    0]
[   0    0    0    1]
```




---

archive/issue_comments_403110.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-12-17T11:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403110",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_403111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-12-17T14:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_403112.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-12-17T14:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403112",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403113.json:
```json
{
    "body": "As mentioned in the description of the ticket, some methods are worse than others.\n\nE.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.\n\nReplying to [comment:6 gh-LaisRast]:\n> I am not sure we need to change everything to be immutable.\n> But since you are doing this, you may also want to consider the following:\n> {{{\n> sage: P = polytopes.cube()\n> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n> ....: P.restricted_automorphism_group(output='matrixlist')[0]\n> ....: \n> [1000    0    0    0]\n> [   0    1    0    0]\n> [   0    0    1    0]\n> [   0    0    0    1]\n> }}}",
    "created_at": "2019-12-17T15:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403113",
    "user": "https://github.com/kliem"
}
```

As mentioned in the description of the ticket, some methods are worse than others.

E.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.

Replying to [comment:6 gh-LaisRast]:
> I am not sure we need to change everything to be immutable.
> But since you are doing this, you may also want to consider the following:
> {{{
> sage: P = polytopes.cube()
> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
> ....: P.restricted_automorphism_group(output='matrixlist')[0]
> ....: 
> [1000    0    0    0]
> [   0    1    0    0]
> [   0    0    1    0]
> [   0    0    0    1]
> }}}



---

archive/issue_comments_403114.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-17T20:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403114",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403115.json:
```json
{
    "body": "I believe now it is good to go.",
    "created_at": "2019-12-17T20:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403115",
    "user": "https://github.com/LaisRast"
}
```

I believe now it is good to go.



---

archive/issue_comments_403116.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-12-20T22:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-403116",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
