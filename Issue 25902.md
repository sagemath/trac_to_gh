# Issue 25902: Py3 doctest in hasse_diagram

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2018-08-27 11:23:01

CC:  tscrim chapoton

Is this a right way to correct iterator-related doctest failure in Python 3?


---

Comment by jmantysalo created at 2018-08-27 11:26:39

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2018-08-27 11:26:39

Just to make sure before I try to make more modifications.
----
New commits:


---

Comment by vklein created at 2018-08-27 15:58:48

It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`. 

Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).


---

Comment by jmantysalo created at 2018-08-27 16:04:44

Replying to [comment:3 vklein]:
> It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`.

Yes, but is this the Right Thing To Do(tm), compared for example `# python 3` comments?

> Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).

Good question. Should we continue from area to another (now posets, next matrices, then groups...), or from problem to another? For print function Frédéric used the latter way.


---

Comment by chapoton created at 2018-08-27 17:58:11

I would say that this is ok.

This precise issue seems to be not so frequent:

```
$ git grep -c "<generator object" src/sage
src/sage/arith/srange.pyx:1
src/sage/combinat/integer_matrices.py:1
src/sage/combinat/posets/hasse_diagram.py:3
src/sage/combinat/posets/posets.py:1
src/sage/combinat/species/stream.py:1
src/sage/combinat/words/morphism.py:1
src/sage/combinat/words/word_infinite_datatypes.py:2
src/sage/geometry/polyhedron/base_ZZ.py:1
src/sage/geometry/polyhedron/palp_database.py:1
src/sage/graphs/base/c_graph.pyx:2
src/sage/interfaces/magma.py:1
src/sage/matroids/matroid.pyx:2
src/sage/misc/lazy_list.pyx:1
src/sage/misc/misc.py:1
src/sage/misc/sage_unittest.py:1
src/sage/modules/free_module_element.pyx:1
src/sage/plot/animate.py:1
src/sage/rings/finite_rings/finite_field_base.pyx:1
src/sage/rings/valuation/developing_valuation.py:1
src/sage/schemes/toric/points.py:2
src/sage/structure/coerce_dict.pyx:4
```



---

Comment by vklein created at 2018-08-28 07:23:40

Replying to [comment:5 chapoton]:
> I would say that this is ok.
> 
> This precise issue seems to be not so frequent:
Ok to fix all doctests output with generators or ok to let this ticket as it is ?

`@`jmantysalo
I suggest to set Component field to python3 it is handy to have a global view of what is done or not in py3.


---

Comment by chapoton created at 2018-08-28 07:26:47

I would suggest

* either to let this ticket as it is now

* or to do the same correction everywhere inside combinat here


---

Comment by tscrim created at 2018-08-28 21:44:53

I would just do everything all at once since there are so few files to change (as per comment:5).


---

Comment by git created at 2018-08-29 05:51:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-08-29 05:54:47

Replying to [comment:8 tscrim]:
> I would just do everything all at once since there are so few files to change (as per comment:5).

OK. And anyways, this is perlable task so can be done again if conflicts with another patch. Done with


```
egrep '<generator object [[:alnum:]_]+ at' src/sage -R -l | xargs perl -e 's|<generator object ([[:alnum:]_]+) at |<generator object ...\1 at |g;' -p -i.bak
```


(Side question: is "perlable" a correct word derivative? `:=)`)


---

Comment by jmantysalo created at 2018-08-29 05:56:15

Changing component from combinatorics to python3.


---

Comment by tscrim created at 2018-08-29 06:54:46

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-08-29 06:54:46

Replying to [comment:10 jmantysalo]:
> Replying to [comment:8 tscrim]:
> (Side question: is "perlable" a correct word derivative? `:=)`)

Meh, probably. Although one might say that would make a nice pearl of wisdom. :P (Okay, you can hate me for that horrible pun.)


---

Comment by vbraun created at 2018-09-03 23:29:08

Resolution: fixed
