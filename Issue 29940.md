# Issue 29940: build/bin/sage-system-python: Improve check for a suitable python

archive/issues_029940.json:
```json
{
    "body": "CC:  @dimpase @embray @slel\n\n(from #29929/#30154)\n\n#29890 (build/bin/sage-system-python: Try \"python\" first) may cause failures on Cygwin if `python` is something strange coming through from the Windows installation as observed in https://github.com/mkoeppe/arb/runs/839201503:\n\n```\n+ sage-package create arb --version git --tarball arb-git.tar.gz --type=optional\nC:\\hostedtoolcache\\windows\\Python\\3.7.7\\x64\\python.exe: can't open file '/cygdrive/d/a/arb/arb/build/bin/sage-package': [Errno 2] No such file or directory\n##[error]Process completed with exit code 1.\n```\n\n  So `sage-system-python` needs better checks for the suitability of `python`.\n\nAlso, a python 2 from an outdated homebrew installation on mac needs to be rejected (https://groups.google.com/d/msg/sage-devel/DoiswEtlKs4/aCNNKBixCAAJ)\n\nIssue created by migration from https://trac.sagemath.org/ticket/30177\n\n",
    "created_at": "2020-07-20T01:41:35Z",
    "labels": [
        "build: configure",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "build/bin/sage-system-python: Improve check for a suitable python",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29940",
    "user": "@mkoeppe"
}
```
CC:  @dimpase @embray @slel

(from #29929/#30154)

#29890 (build/bin/sage-system-python: Try "python" first) may cause failures on Cygwin if `python` is something strange coming through from the Windows installation as observed in https://github.com/mkoeppe/arb/runs/839201503:

```
+ sage-package create arb --version git --tarball arb-git.tar.gz --type=optional
C:\hostedtoolcache\windows\Python\3.7.7\x64\python.exe: can't open file '/cygdrive/d/a/arb/arb/build/bin/sage-package': [Errno 2] No such file or directory
##[error]Process completed with exit code 1.
```

  So `sage-system-python` needs better checks for the suitability of `python`.

Also, a python 2 from an outdated homebrew installation on mac needs to be rejected (https://groups.google.com/d/msg/sage-devel/DoiswEtlKs4/aCNNKBixCAAJ)

Issue created by migration from https://trac.sagemath.org/ticket/30177





---

archive/issue_comments_425252.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-07-20T03:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425252",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_425253.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-20T03:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425253",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_425254.json:
```json
{
    "body": "lgtm",
    "created_at": "2020-07-20T08:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425254",
    "user": "@dimpase"
}
```

lgtm



---

archive/issue_comments_425255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-20T08:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425255",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425256.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-07-20T15:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425256",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_425257.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-07-24T19:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425257",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_425258.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-24T19:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425258",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_425259.json:
```json
{
    "body": "This was working fine but was too noisy, as I just observed in https://github.com/mkoeppe/Sources/runs/907998067:\n\n```\nsage-package create singular --version git --tarball singular-git.tar.gz --type=optional\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\nFileNotFoundError: [WinError 3] The system cannot find the path specified: '/cygdrive/d/a/Sources/Sources/upstream'\n```\n",
    "created_at": "2020-07-24T19:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425259",
    "user": "@mkoeppe"
}
```

This was working fine but was too noisy, as I just observed in https://github.com/mkoeppe/Sources/runs/907998067:

```
sage-package create singular --version git --tarball singular-git.tar.gz --type=optional
Traceback (most recent call last):
  File "<string>", line 1, in <module>
FileNotFoundError: [WinError 3] The system cannot find the path specified: '/cygdrive/d/a/Sources/Sources/upstream'
```




---

archive/issue_comments_425260.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-24T19:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425260",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425261.json:
```json
{
    "body": "ok",
    "created_at": "2020-07-24T19:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425261",
    "user": "@dimpase"
}
```

ok



---

archive/issue_comments_425262.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-07-24T20:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425262",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_425263.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2020-08-07T22:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425263",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_425264.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-07T22:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425264",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_425265.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-07T23:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425265",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425266.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-07T23:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425266",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_425267.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29940#issuecomment-425267",
    "user": "@vbraun"
}
```

Resolution: fixed
