# Issue 25819: py3: care for .iteritems

archive/issues_025819.json:
```json
{
    "body": "CC:  @embray @tscrim\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26056\n\n",
    "created_at": "2018-08-13T09:54:15Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "py3: care for .iteritems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25819",
    "user": "@fchapoton"
}
```
CC:  @embray @tscrim



Issue created by migration from https://trac.sagemath.org/ticket/26056





---

archive/issue_comments_364470.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-08-13T09:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364470",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_364471.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-13T09:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364471",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_364472.json:
```json
{
    "body": "For `free_module_element.pyx`, the `e` is assumed to be a `dict`. So I can get a little bit of a speedup too:\n\n```\nsage: from sage.modules.free_module_element import FreeModuleElement_generic_sparse\nsage: def S(R,n):\n....:     return FreeModule(R, n, sparse=True)\n....:\nsage: %timeit FreeModuleElement_generic_sparse(S(RR,5), {0:-1, 2:2/3, 3:pi, 4:oo})\nThe slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 16.4 \u00b5s per loop\n```\n\nvs before\n\n```\nsage: %timeit FreeModuleElement_generic_sparse(S(RR,5), {0:-1, 2:2/3, 3:pi, 4:oo})\nThe slowest run took 14.90 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 16.8 \u00b5s per loop\n```\n\nAt the very least, it yields cleaner Cython code.\n\nIf my changes are good, then positive review.\n----\nNew commits:",
    "created_at": "2018-08-14T01:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364472",
    "user": "@tscrim"
}
```

For `free_module_element.pyx`, the `e` is assumed to be a `dict`. So I can get a little bit of a speedup too:

```
sage: from sage.modules.free_module_element import FreeModuleElement_generic_sparse
sage: def S(R,n):
....:     return FreeModule(R, n, sparse=True)
....:
sage: %timeit FreeModuleElement_generic_sparse(S(RR,5), {0:-1, 2:2/3, 3:pi, 4:oo})
The slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 16.4 µs per loop
```

vs before

```
sage: %timeit FreeModuleElement_generic_sparse(S(RR,5), {0:-1, 2:2/3, 3:pi, 4:oo})
The slowest run took 14.90 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 16.8 µs per loop
```

At the very least, it yields cleaner Cython code.

If my changes are good, then positive review.
----
New commits:



---

archive/issue_comments_364473.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-14T06:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364473",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_364474.json:
```json
{
    "body": "ok, thanks. I have made one more commit that just fixes a wrong syntax inside one `raise TypeError`.\n\nI allow myself to set to positive.\n----\nNew commits:",
    "created_at": "2018-08-14T06:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364474",
    "user": "@fchapoton"
}
```

ok, thanks. I have made one more commit that just fixes a wrong syntax inside one `raise TypeError`.

I allow myself to set to positive.
----
New commits:



---

archive/issue_comments_364475.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-08-17T21:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364475",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_364476.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2018-08-17T21:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364476",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_364477.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-27T18:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364477",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_364478.json:
```json
{
    "body": "Travis, I have doubts about the line\n\n```\n+        cdef dict entries_dict, e\n```\n\nas it seems that e has been renamed entries ?\n\nEDIT: it's ok, in fact",
    "created_at": "2018-08-27T18:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364478",
    "user": "@fchapoton"
}
```

Travis, I have doubts about the line

```
+        cdef dict entries_dict, e
```

as it seems that e has been renamed entries ?

EDIT: it's ok, in fact



---

archive/issue_comments_364479.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-27T18:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364479",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_364480.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-27T18:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364480",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_364481.json:
```json
{
    "body": "the rebase was trivial, I am setting back to positive",
    "created_at": "2018-08-27T18:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364481",
    "user": "@fchapoton"
}
```

the rebase was trivial, I am setting back to positive



---

archive/issue_comments_364482.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-30T22:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25819#issuecomment-364482",
    "user": "@vbraun"
}
```

Resolution: fixed
