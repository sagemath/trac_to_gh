# Issue 18634: MILP formulation for cutwidth

archive/issues_018634.json:
```json
{
    "body": "CC:  @nathanncohen\n\nKeywords: cutwidth, MILP\n\nThis ticket adds a MILP formulation for computing the cutwidth of graphs. This method has no limit on the size of the input graph, but it is slower than other methods.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18871\n\n",
    "created_at": "2015-07-08T17:17:59Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "MILP formulation for cutwidth",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18634",
    "user": "https://github.com/dcoudert"
}
```
CC:  @nathanncohen

Keywords: cutwidth, MILP

This ticket adds a MILP formulation for computing the cutwidth of graphs. This method has no limit on the size of the input graph, but it is slower than other methods.

Issue created by migration from https://trac.sagemath.org/ticket/18871





---

archive/issue_comments_253450.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-08T17:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253451.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-08T17:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253451",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_253452.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-07-10T13:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253452",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_253453.json:
```json
{
    "body": "Hellooooooo David,\n\nSome comments:\n\n- Module's doc, documentation of MILP variable `z`: at the end of the line there\n  is a `y^y`. Shouldn't it be `y^k`?\n\n- Constraints: the third constraint is missing one side of the inequality.\n\n- But I am not sure that I understand the system: why wouldn't you say that:\n  a) `x_v^k <= x_v^{k+1}` (the values can only increase)\n  b) `\\sum_v x_v^k == k` (for every k)\n\n- About y: what about only having those two constraints:\n  - `y_{uv}^k >= x_v^k - x_u^k`\n  - `y_{uv}^k >= x_u^k - x_v^k`\n  It seems to me that they are sufficient to express `y_{uv}^k >= x_u^k XOR x_v^k`. And you do not really need to say that `y` has to be *equal* to the\n  XOR, the `>=` should be enough given that you minimize the cost of a cut.\n\n- If you see a better way to name the `x,y`, and `z`... `:-P`\n\n- When building the documentation, the references toward the number of the\n  constraints do not appear correctly. Neither does the 'xor'.\n\n- You call `set_binary` on a variable that you already defined as binary.\n\n- Is there any reason why you catch the `MIPSolverException`?\n\n- You do not have to int+round the value of `z['z']`. The solver should give you\n  an integer value as you defined the variable as integral: if it does not,\n  that's a bug that should be fixed.\n\nNathann",
    "created_at": "2015-07-10T13:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253453",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooo David,

Some comments:

- Module's doc, documentation of MILP variable `z`: at the end of the line there
  is a `y^y`. Shouldn't it be `y^k`?

- Constraints: the third constraint is missing one side of the inequality.

- But I am not sure that I understand the system: why wouldn't you say that:
  a) `x_v^k <= x_v^{k+1}` (the values can only increase)
  b) `\sum_v x_v^k == k` (for every k)

- About y: what about only having those two constraints:
  - `y_{uv}^k >= x_v^k - x_u^k`
  - `y_{uv}^k >= x_u^k - x_v^k`
  It seems to me that they are sufficient to express `y_{uv}^k >= x_u^k XOR x_v^k`. And you do not really need to say that `y` has to be *equal* to the
  XOR, the `>=` should be enough given that you minimize the cost of a cut.

- If you see a better way to name the `x,y`, and `z`... `:-P`

- When building the documentation, the references toward the number of the
  constraints do not appear correctly. Neither does the 'xor'.

- You call `set_binary` on a variable that you already defined as binary.

- Is there any reason why you catch the `MIPSolverException`?

- You do not have to int+round the value of `z['z']`. The solver should give you
  an integer value as you defined the variable as integral: if it does not,
  that's a bug that should be fixed.

Nathann



---

archive/issue_comments_253454.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-10T16:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253455.json:
```json
{
    "body": "> - Module's doc, documentation of MILP variable `z`: at the end of the line there\n>   is a `y^y`. Shouldn't it be `y^k`?\nRight.\n \n> - Constraints: the third constraint is missing one side of the inequality.\nAdded\n  \n> - But I am not sure that I understand the system: why wouldn't you say that:\n>   a) `x_v^k <= x_v^{k+1}` (the values can only increase)\n>   b) `\\sum_v x_v^k == k` (for every k)\nConstraint (a) can be rewritten with a sum as I did. It is sometimes faster for the solver. Don't know why.\n \n> - About y: what about only having those two constraints:\n>   - `y_{uv}^k >= x_v^k - x_u^k`\n>   - `y_{uv}^k >= x_u^k - x_v^k`\n>   It seems to me that they are sufficient to express `y_{uv}^k >= x_u^k XOR x_v^k`. And you do not really need to say that `y` has to be *equal* to the\n>   XOR, the `>=` should be enough given that you minimize the cost of a cut.\nYou are right. I have simplified the code.\n \n> - If you see a better way to name the `x,y`, and `z`... `:-P`\nunfortunately no better names in mind.\n  \n> - When building the documentation, the references toward the number of the\n>   constraints do not appear correctly. Neither does the 'xor'.\nCorrected. (and no xor anymore)\n \n> - You call `set_binary` on a variable that you already defined as binary.\nremoved.\n \n> - Is there any reason why you catch the `MIPSolverException`?\nRemoved. no particular reason.\n  \n> - You do not have to int+round the value of `z['z']`. The solver should give you\n>   an integer value as you defined the variable as integral: if it does not,\n>   that's a bug that should be fixed.\nI have removed the round.\n\nThanks for the review.",
    "created_at": "2015-07-10T16:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253455",
    "user": "https://github.com/dcoudert"
}
```

> - Module's doc, documentation of MILP variable `z`: at the end of the line there
>   is a `y^y`. Shouldn't it be `y^k`?
Right.
 
> - Constraints: the third constraint is missing one side of the inequality.
Added
  
> - But I am not sure that I understand the system: why wouldn't you say that:
>   a) `x_v^k <= x_v^{k+1}` (the values can only increase)
>   b) `\sum_v x_v^k == k` (for every k)
Constraint (a) can be rewritten with a sum as I did. It is sometimes faster for the solver. Don't know why.
 
> - About y: what about only having those two constraints:
>   - `y_{uv}^k >= x_v^k - x_u^k`
>   - `y_{uv}^k >= x_u^k - x_v^k`
>   It seems to me that they are sufficient to express `y_{uv}^k >= x_u^k XOR x_v^k`. And you do not really need to say that `y` has to be *equal* to the
>   XOR, the `>=` should be enough given that you minimize the cost of a cut.
You are right. I have simplified the code.
 
> - If you see a better way to name the `x,y`, and `z`... `:-P`
unfortunately no better names in mind.
  
> - When building the documentation, the references toward the number of the
>   constraints do not appear correctly. Neither does the 'xor'.
Corrected. (and no xor anymore)
 
> - You call `set_binary` on a variable that you already defined as binary.
removed.
 
> - Is there any reason why you catch the `MIPSolverException`?
Removed. no particular reason.
  
> - You do not have to int+round the value of `z['z']`. The solver should give you
>   an integer value as you defined the variable as integral: if it does not,
>   that's a bug that should be fixed.
I have removed the round.

Thanks for the review.



---

archive/issue_comments_253456.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-10T16:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253457.json:
```json
{
    "body": "Hello again,\n\nI added a small commit with a couple of modifications:\n\n- replaces \"A - B <= 0\" constraints with \"A <= B\"\n\n- Removed 'except:'\n\nThe problem with 'except' without any exception name is that it catches too much:\n\n\n```\nsage: try:\n....:     p.solveeeeee()\n....: except:\n....:     raise ValueError(\"Infeasible Problem\")\nValueError: Infeasible Problem\n```\n\n\nThis way, the LP solver is forwarded to the user, and it will be more meaningful that a generic error message: on my computer I get this:\n\n\n```\nsage: cutwidth.cutwidth_MILP(G, lower_bound=G.size()+1)\n...\nMIPSolverException: 'CPLEX: The primal has no feasible solution'\n```\n\n\nYou can change the ticket's status to `positive_review` unless there is something that you want to change.\n\nHave fuuuuuuun,\n\nNathann",
    "created_at": "2015-07-10T16:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253457",
    "user": "https://github.com/nathanncohen"
}
```

Hello again,

I added a small commit with a couple of modifications:

- replaces "A - B <= 0" constraints with "A <= B"

- Removed 'except:'

The problem with 'except' without any exception name is that it catches too much:


```
sage: try:
....:     p.solveeeeee()
....: except:
....:     raise ValueError("Infeasible Problem")
ValueError: Infeasible Problem
```


This way, the LP solver is forwarded to the user, and it will be more meaningful that a generic error message: on my computer I get this:


```
sage: cutwidth.cutwidth_MILP(G, lower_bound=G.size()+1)
...
MIPSolverException: 'CPLEX: The primal has no feasible solution'
```


You can change the ticket's status to `positive_review` unless there is something that you want to change.

Have fuuuuuuun,

Nathann



---

archive/issue_comments_253458.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-10T16:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253458",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_253459.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-11T09:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253460.json:
```json
{
    "body": "Hello,\n\nI agree with your modifications, and I have removed the import of MIPSolverException.\n\nI have a question because the patchbot is complaining about multiline doctest:\n\n```\n========== plugins.doctest_continuation ==========\n\n--- 6.8.beta8\n\n+++ 6.8.beta8 + #18871\n\n\n-Old-style doctest continuation inserted on 0 non-empty lines\n+inside file:  b/src/sage/graphs/graph_decompositions/cutwidth.pyx\n+@@ -258,6 +312,16 @@ def cutwidth(G, algorithm=\"exponential\", cut_off=0):\n++        ...       G = graphs.RandomGNP(10, 0.2)\n++        ...       ve, le = cutwidth.cutwidth_dyn(G)\n++        ...       vm, lm = cutwidth.cutwidth_MILP(G)\n++        ...       if ve != vm:\n++        ...          print \"Something goes wrong!\"\n+@@ -478,3 +545,157 @@ cdef inline int exists(FastDigraph g, uint8_t * neighborhoods, int S, int cost_S\n++        ...       G = graphs.RandomGNP(10, 0.2)\n++        ...       ve, le = cutwidth.cutwidth_dyn(G)\n++        ...       vm, lm = cutwidth.cutwidth_MILP(G)\n++        ...       if ve != vm:\n++        ...          print \"The solution is not optimal!\"\n+Old-style doctest continuation inserted on 10 non-empty lines\n+Traceback (most recent call last):\n+  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 906, in test_a_ticket\n+    baseline=baseline, **kwds)\n+  File \"/home/vincent/sage_patchbot/local/bin/patchbot/plugins.py\", line 310, in doctest_continuation\n+    msg=\"Old-style doctest continuation\", **kwds)\n+  File \"/home/vincent/sage_patchbot/local/bin/patchbot/plugins.py\", line 207, in exclude_new\n+    raise ValueError(full_msg)\n+ValueError: {} inserted on {} non-empty lines\n```\n\nI not sure to understand the problem. Should we use `...` or `....:` as indicated here http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings ?\nBoth style are used in the tests of method ` vertex_separation_MILP`, in file `vertex_separation.pyx`.\nLet me know what I should do.\n\nDavid.",
    "created_at": "2015-07-11T09:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253460",
    "user": "https://github.com/dcoudert"
}
```

Hello,

I agree with your modifications, and I have removed the import of MIPSolverException.

I have a question because the patchbot is complaining about multiline doctest:

```
========== plugins.doctest_continuation ==========

--- 6.8.beta8

+++ 6.8.beta8 + #18871


-Old-style doctest continuation inserted on 0 non-empty lines
+inside file:  b/src/sage/graphs/graph_decompositions/cutwidth.pyx
+@@ -258,6 +312,16 @@ def cutwidth(G, algorithm="exponential", cut_off=0):
++        ...       G = graphs.RandomGNP(10, 0.2)
++        ...       ve, le = cutwidth.cutwidth_dyn(G)
++        ...       vm, lm = cutwidth.cutwidth_MILP(G)
++        ...       if ve != vm:
++        ...          print "Something goes wrong!"
+@@ -478,3 +545,157 @@ cdef inline int exists(FastDigraph g, uint8_t * neighborhoods, int S, int cost_S
++        ...       G = graphs.RandomGNP(10, 0.2)
++        ...       ve, le = cutwidth.cutwidth_dyn(G)
++        ...       vm, lm = cutwidth.cutwidth_MILP(G)
++        ...       if ve != vm:
++        ...          print "The solution is not optimal!"
+Old-style doctest continuation inserted on 10 non-empty lines
+Traceback (most recent call last):
+  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 906, in test_a_ticket
+    baseline=baseline, **kwds)
+  File "/home/vincent/sage_patchbot/local/bin/patchbot/plugins.py", line 310, in doctest_continuation
+    msg="Old-style doctest continuation", **kwds)
+  File "/home/vincent/sage_patchbot/local/bin/patchbot/plugins.py", line 207, in exclude_new
+    raise ValueError(full_msg)
+ValueError: {} inserted on {} non-empty lines
```

I not sure to understand the problem. Should we use `...` or `....:` as indicated here http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings ?
Both style are used in the tests of method ` vertex_separation_MILP`, in file `vertex_separation.pyx`.
Let me know what I should do.

David.



---

archive/issue_comments_253461.json:
```json
{
    "body": "YOooooooo !\n\nWe should use the new-style '....:' everywhere. Old code has not been changed, but the policy is to not add more.\n\nNathann",
    "created_at": "2015-07-11T11:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253461",
    "user": "https://github.com/nathanncohen"
}
```

YOooooooo !

We should use the new-style '....:' everywhere. Old code has not been changed, but the policy is to not add more.

Nathann



---

archive/issue_comments_253462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-11T11:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253463.json:
```json
{
    "body": "Should be ok now. Thanks.",
    "created_at": "2015-07-11T11:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253463",
    "user": "https://github.com/dcoudert"
}
```

Should be ok now. Thanks.



---

archive/issue_comments_253464.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-11T14:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253464",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_253465.json:
```json
{
    "body": "Thanks.",
    "created_at": "2015-07-11T14:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253465",
    "user": "https://github.com/dcoudert"
}
```

Thanks.



---

archive/issue_comments_253466.json:
```json
{
    "body": "\n```\n! Emergency stop.\n ...                                              \n                                                  \nl.58326 \\end{alignat}\n                     \n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on graphs.log.\nMakefile:55: recipe for target 'graphs.pdf' failed\nmake[2]: *** [graphs.pdf] Error 1\n```\n",
    "created_at": "2015-07-11T22:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253466",
    "user": "https://github.com/vbraun"
}
```


```
! Emergency stop.
 ...                                              
                                                  
l.58326 \end{alignat}
                     
!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on graphs.log.
Makefile:55: recipe for target 'graphs.pdf' failed
make[2]: *** [graphs.pdf] Error 1
```




---

archive/issue_comments_253467.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-07-11T22:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253467",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_253468.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-12T07:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253469.json:
```json
{
    "body": "On my computer, command `./sage -docbuild reference/graphs pdf` produces the pdf file and the ouput is correct.\nDavid.",
    "created_at": "2015-07-12T07:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253469",
    "user": "https://github.com/dcoudert"
}
```

On my computer, command `./sage -docbuild reference/graphs pdf` produces the pdf file and the ouput is correct.
David.



---

archive/issue_comments_253470.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-12T07:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253470",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_253471.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-12T08:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253471",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_017816.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-12T13:00:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18634#event-17816"
}
```



---

archive/issue_comments_253472.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-12T13:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253472",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_253473.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2015-07-14T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253473",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_017817.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-14T23:06:54Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18634#event-17817"
}
```



---

archive/issue_comments_253474.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2015-07-14T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253474",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_253475.json:
```json
{
    "body": "This tests insanely slow, to the point of making tests time out (possibly randomly):\n\n```\nsage -t --warn-long 27.3 src/sage/graphs/graph_decompositions/cutwidth.pyx\n    Timed out\n**********************************************************************\nTests run before process (pid=23887) timed out:\nsage: from sage.graphs.graph_decompositions import cutwidth ## line 206 ##\nsage: G = graphs.CycleGraph(6) ## line 207 ##\nsage: L = G.vertices() ## line 208 ##\nsage: cutwidth.width_of_cut_decomposition(G, L) ## line 209 ##\n2\nsage: from sage.graphs.graph_decompositions import cutwidth ## line 214 ##\nsage: P = graphs.PathGraph(6) ## line 215 ##\nsage: cutwidth.width_of_cut_decomposition(P, [0, 1, 2, 3, 4, 5]) ## line 216 ##\n1\nsage: cutwidth.width_of_cut_decomposition(P, [5, 0, 1, 2, 3, 4]) ## line 218 ##\n2\nsage: cutwidth.width_of_cut_decomposition(P, [0, 2, 4, 1, 3, 5]) ## line 220 ##\n5\nsage: from sage.graphs.graph_decompositions import cutwidth ## line 227 ##\nsage: cutwidth.width_of_cut_decomposition(Graph(), ['a','b']) ## line 228 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 232 ##\n0\nsage: from sage.graphs.graph_decompositions.cutwidth import cutwidth ## line 294 ##\nsage: G = graphs.CompleteGraph(5) ## line 295 ##\nsage: cw,L = cutwidth(G, algorithm=\"exponential\"); cw ## line 296 ##\n6\nsage: K = graphs.CompleteGraph(6) ## line 298 ##\nsage: cw,L = cutwidth(K, algorithm=\"exponential\"); cw ## line 299 ##\n9\nsage: cw,L = cutwidth(K+K, algorithm=\"exponential\"); cw ## line 301 ##\n9\nsage: from sage.graphs.graph_decompositions.cutwidth import cutwidth ## line 306 ##\nsage: G = graphs.Grid2dGraph(3,3) ## line 307 ##\nsage: cw,L = cutwidth(G, algorithm=\"exponential\"); cw ## line 308 ##\n4\nsage: G = graphs.Grid2dGraph(3,5) ## line 310 ##\nsage: cw,L = cutwidth(G, algorithm=\"exponential\"); cw ## line 311 ##\n4\nsage: from sage.graphs.graph_decompositions import cutwidth ## line 318 ##\nsage: for i in range(10):  # long test\n    G = graphs.RandomGNP(10, 0.2)\n    ve, le = cutwidth.cutwidth_dyn(G)\n    vm, lm = cutwidth.cutwidth_MILP(G)\n    if ve != vm:\n       print \"Something goes wrong!\" ## line 319 ##\n\n**********************************************************************\n----------------------------------------------------------------------\nsage -t --warn-long 27.3 src/sage/graphs/graph_decompositions/cutwidth.pyx  # Timed out\n----------------------------------------------------------------------\nTotal time for all tests: 323.1 seconds\n    cpu time: 123.0 seconds\n    cumulative wall time: 231.2 seconds\n```\n\nThis was on my state of the art Haswell-E desktop fyi",
    "created_at": "2015-07-14T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253475",
    "user": "https://github.com/vbraun"
}
```

This tests insanely slow, to the point of making tests time out (possibly randomly):

```
sage -t --warn-long 27.3 src/sage/graphs/graph_decompositions/cutwidth.pyx
    Timed out
**********************************************************************
Tests run before process (pid=23887) timed out:
sage: from sage.graphs.graph_decompositions import cutwidth ## line 206 ##
sage: G = graphs.CycleGraph(6) ## line 207 ##
sage: L = G.vertices() ## line 208 ##
sage: cutwidth.width_of_cut_decomposition(G, L) ## line 209 ##
2
sage: from sage.graphs.graph_decompositions import cutwidth ## line 214 ##
sage: P = graphs.PathGraph(6) ## line 215 ##
sage: cutwidth.width_of_cut_decomposition(P, [0, 1, 2, 3, 4, 5]) ## line 216 ##
1
sage: cutwidth.width_of_cut_decomposition(P, [5, 0, 1, 2, 3, 4]) ## line 218 ##
2
sage: cutwidth.width_of_cut_decomposition(P, [0, 2, 4, 1, 3, 5]) ## line 220 ##
5
sage: from sage.graphs.graph_decompositions import cutwidth ## line 227 ##
sage: cutwidth.width_of_cut_decomposition(Graph(), ['a','b']) ## line 228 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 232 ##
0
sage: from sage.graphs.graph_decompositions.cutwidth import cutwidth ## line 294 ##
sage: G = graphs.CompleteGraph(5) ## line 295 ##
sage: cw,L = cutwidth(G, algorithm="exponential"); cw ## line 296 ##
6
sage: K = graphs.CompleteGraph(6) ## line 298 ##
sage: cw,L = cutwidth(K, algorithm="exponential"); cw ## line 299 ##
9
sage: cw,L = cutwidth(K+K, algorithm="exponential"); cw ## line 301 ##
9
sage: from sage.graphs.graph_decompositions.cutwidth import cutwidth ## line 306 ##
sage: G = graphs.Grid2dGraph(3,3) ## line 307 ##
sage: cw,L = cutwidth(G, algorithm="exponential"); cw ## line 308 ##
4
sage: G = graphs.Grid2dGraph(3,5) ## line 310 ##
sage: cw,L = cutwidth(G, algorithm="exponential"); cw ## line 311 ##
4
sage: from sage.graphs.graph_decompositions import cutwidth ## line 318 ##
sage: for i in range(10):  # long test
    G = graphs.RandomGNP(10, 0.2)
    ve, le = cutwidth.cutwidth_dyn(G)
    vm, lm = cutwidth.cutwidth_MILP(G)
    if ve != vm:
       print "Something goes wrong!" ## line 319 ##

**********************************************************************
----------------------------------------------------------------------
sage -t --warn-long 27.3 src/sage/graphs/graph_decompositions/cutwidth.pyx  # Timed out
----------------------------------------------------------------------
Total time for all tests: 323.1 seconds
    cpu time: 123.0 seconds
    cumulative wall time: 231.2 seconds
```

This was on my state of the art Haswell-E desktop fyi



---

archive/issue_comments_253476.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2015-07-15T09:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253476",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_253477.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-07-15T09:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253477",
    "user": "https://github.com/dcoudert"
}
```

New commits:



---

archive/issue_comments_253478.json:
```json
{
    "body": "Really sorry about that Volker. I forgot that my default solver is cplex and the difference of timing is impressive (on my macbook air...)\n\n```\nconfetti:sage dcoudert$ ./sage -btp src/sage/graphs/graph_decompositions/cutwidth.pyx\n...\nUsing --optional=cbc,gap_packages,gcc,mpir,python2,sage,scons\nDoctesting 1 file using 4 threads.\nsage -t src/sage/graphs/graph_decompositions/cutwidth.pyx\n    [56 tests, 2.28 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 2.3 seconds\n    cpu time: 4.7 seconds\n    cumulative wall time: 2.3 seconds\n```\n\nI will simplify the tests and check with GLPK.",
    "created_at": "2015-07-15T09:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253478",
    "user": "https://github.com/dcoudert"
}
```

Really sorry about that Volker. I forgot that my default solver is cplex and the difference of timing is impressive (on my macbook air...)

```
confetti:sage dcoudert$ ./sage -btp src/sage/graphs/graph_decompositions/cutwidth.pyx
...
Using --optional=cbc,gap_packages,gcc,mpir,python2,sage,scons
Doctesting 1 file using 4 threads.
sage -t src/sage/graphs/graph_decompositions/cutwidth.pyx
    [56 tests, 2.28 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 2.3 seconds
    cpu time: 4.7 seconds
    cumulative wall time: 2.3 seconds
```

I will simplify the tests and check with GLPK.



---

archive/issue_comments_253479.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-15T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253480.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-07-15T09:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253480",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_253481.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-15T10:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253481",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_253482.json:
```json
{
    "body": "I ran the test with GLPK as the default solver, and it went well.",
    "created_at": "2015-07-15T10:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253482",
    "user": "https://github.com/nathanncohen"
}
```

I ran the test with GLPK as the default solver, and it went well.



---

archive/issue_comments_253483.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-27T15:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18634#issuecomment-253483",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017818.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-27T15:15:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18634",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18634#event-17818"
}
```
