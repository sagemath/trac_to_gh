# Issue 31177: validate input arguments of elimination_ideal

archive/issues_031177.json:
```json
{
    "body": "CC:  @davidayotte\n\nAs explained in [ticket:31367#comment:1], this ticket adds a check that all the arguments passed to `elimination_ideal` are actually variables of the ring, to avoid silent problems like this:\n\n```\nage: R.<x,y,z> = QQ[]\nsage: R.ideal(x-y, z).elimination_ideal([y, R(0)])\nIdeal (x - y, z) of Multivariate Polynomial Ring in x, y, z over Rational Field\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31414\n\n",
    "created_at": "2021-02-17T19:00:20Z",
    "labels": [
        "commutative algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "validate input arguments of elimination_ideal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31177",
    "user": "@mwageringel"
}
```
CC:  @davidayotte

As explained in [ticket:31367#comment:1], this ticket adds a check that all the arguments passed to `elimination_ideal` are actually variables of the ring, to avoid silent problems like this:

```
age: R.<x,y,z> = QQ[]
sage: R.ideal(x-y, z).elimination_ideal([y, R(0)])
Ideal (x - y, z) of Multivariate Polynomial Ring in x, y, z over Rational Field
```


Issue created by migration from https://trac.sagemath.org/ticket/31414





---

archive/issue_comments_445710.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445710",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_445711.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445711",
    "user": "@mwageringel"
}
```

New commits:



---

archive/issue_comments_445712.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445712",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_445713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-08T15:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445713",
    "user": "@DavidAyotte"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_445714.json:
```json
{
    "body": "Everything looks good. I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):\n\n\n```\nFile \"src/sage/rings/number_field/number_field_ideal.py\", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\nFailed example:\n    list(K.ideal(8).invertible_residues())[:5]\nExpected:\n    [1, a - 1, -3*a, -2*a + 3, -a - 1]\nGot:\n    [1, a + 2, 3*a + 3, -2*a + 3, a]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\n    [685 tests, 1 failure, 6.16 s]\n```\n\n\nNote that I tested this on version 9.4.beta4.",
    "created_at": "2021-07-08T15:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445714",
    "user": "@DavidAyotte"
}
```

Everything looks good. I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):


```
File "src/sage/rings/number_field/number_field_ideal.py", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
Failed example:
    list(K.ideal(8).invertible_residues())[:5]
Expected:
    [1, a - 1, -3*a, -2*a + 3, -a - 1]
Got:
    [1, a + 2, 3*a + 3, -2*a + 3, a]
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
    [685 tests, 1 failure, 6.16 s]
```


Note that I tested this on version 9.4.beta4.



---

archive/issue_comments_445715.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-07-08T18:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445715",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_445716.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:",
    "created_at": "2021-07-08T18:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445716",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:



---

archive/issue_comments_445717.json:
```json
{
    "body": "Thank you for the review. To avoid a merge conflict, I have rebased onto #29979. Only the last commit is relevant to this ticket.\n\n\n\nReplying to [comment:3 gh-DavidAyotte]:\n> I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):\n\nI cannot reproduce it on my end, but there have been discussions about this problem in [ticket:31443#comment:119] and [ticket:30801#comment:171]. Apparently, it depends on whether Pari comes from the system or not. I could not find a ticket specifically for this problem, though maybe I have missed it.",
    "created_at": "2021-07-08T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445717",
    "user": "@mwageringel"
}
```

Thank you for the review. To avoid a merge conflict, I have rebased onto #29979. Only the last commit is relevant to this ticket.



Replying to [comment:3 gh-DavidAyotte]:
> I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):

I cannot reproduce it on my end, but there have been discussions about this problem in [ticket:31443#comment:119] and [ticket:30801#comment:171]. Apparently, it depends on whether Pari comes from the system or not. I could not find a ticket specifically for this problem, though maybe I have missed it.



---

archive/issue_comments_445718.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-08T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445718",
    "user": "@mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_445719.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-19T09:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-445719",
    "user": "vbraun"
}
```

Resolution: fixed
