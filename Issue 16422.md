# Issue 16422: Decomposition of finite dimensional associative algebras

Issue created by migration from https://trac.sagemath.org/ticket/16659

Original creator: virmaux

Original creation time: 2014-07-16 01:55:10

CC:  nthiery ncohen simonking

Keywords: representation theory

Implement methods for breaking finite dimensional associative algebras:
* Decompose a semi-simple commutative algebra into a direct sum of simple modules
* Orthogonal idempotents
* For an associative algebra A, give a list of all simple A-mod and indecomposable projective A-mod
* Decompose any associative algebra into a direct sum of projective modules
* Cartan matrix


---

Comment by git created at 2014-07-25 01:31:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-25 02:36:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-25 18:34:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-29 09:06:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-29 09:08:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-29 10:13:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-29 10:36:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-29 10:53:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-08-29 11:07:15

This may be a superfluous comment, but have you taken a look at #12141 (merged 6 months ago) and have you checked that you are not duplicating any of the functionality there?  (I'm asking because you seem to work mostly inside `sage.categories` and not to interact with `sage.algebras`.)


---

Comment by git created at 2014-09-01 11:45:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2014-09-01 12:01:01

pbruin: thanks for the hint, I will definitely check :)


---

Comment by git created at 2014-09-01 14:16:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-09-01 16:15:21

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2014-09-01 17:25:32

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2014-09-03 13:04:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-03 13:28:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-03 15:07:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-05 07:32:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-05 07:36:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-05 16:41:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-12 14:45:14

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-03-18 16:53:17

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by saliola created at 2015-03-20 00:26:07

## finite_dimensional_algebras_with_basis.py

- the code needs to be cleaned up; for details see
  http://www.sagemath.org/doc/developer/coding_basics.html#documentation-strings


```
                 Product of two elements.
                 INPUT::
```

- insert an extra line here
- also, change :: to : for INPUT blocks

```
                 INPUT::

                     - ``self``, ``right`` -- two elements
```

The beginning of descriptions of the inputs is aligned with the I in INPUT.

```
                 If B is a SubModuleWithBasis of A, then the multiplication law of B is
                 inherited from the multiplication of A.
```

The Python and Sage objects should be approperiately wrapped : `B`, `A`,
`:class:`SubModuleWithBasis``, ...

```
                 return p.retract( self.lift() * right.lift())
```

There should be no space after `p.retract(`.


Delete this line:

```
# x[i,j] = product_on_basis(x,i).coefficient(j)
```


Delete these lines:

```
# Old algorithm:
+                # mat = matrix(self.base_ring(), [
+                #        [sum(product_on_basis(x,j).coefficient(i) * c
+                #            for i in keys for j,c in product_on_basis(y,i)) for x in keys]
+                #            for y in keys ])
```


Wrap the `A` below in single backticks (for latex output):

```
Construct the ``side`` A-module generated by ``a``.
```


There is some redundancy:

```
+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example()
+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example(); A
```


Add a reference for the algorithm/formula used in `_lift_idempotent`.
There are other possibilities one could use here. Is it work implementing
some of these other ones and giving the user a choice between algorithms?

Does Python / Sage prefer `!=` to `<>`?

to be continued ...


---

Comment by saliola created at 2015-03-20 00:27:05

## finite_dimensional_algebras_with_basis.py (part 2)

I think that `cartan_invariant_matrix` should be
`cartan_invariants_matrix`; update the documentation of this method to read:

```
Return the matrix of Cartan invariants of ``self``.
```


In the method `cartan_invariant_matrix`, you compute the dimension of the
simple modules, but this is just the cartan invariants for the semisimple
quotient. Perhaps you can use this to clean up the code.

At the very least, I think that the code to compute the dimension of the simple
modules should be refactored into a separate method.

```side``-sided` should be just ```side```.

`projective_decomposition` --> `projective_indecomposables` or `projective_indecomposable_modules`

`_cartan_matrix_coef` --> `_cartan_matrix_coeff` (two fs)

missing documentation string for `_cartan_matrix_coeff`

Perhaps it is a good idea to define a method called `pierce_decomposition`
that returns the Pierce decomposition of the algebra; and maybe
`pierce_component`? This would simplify `_cartan_matrix_coef`.


---

Comment by saliola created at 2015-03-20 00:27:27

## semisimple_algebras.py

- The `orthogonal_idempotents` method returns **central** orthogonal
  idempotents, so I think that the name of this method should be changed to
  `central_orthogonal_idempotents`. For example, in the docstring the example
  `SymmetricGroup(3).algebra(QQ)` returns 3 idempotents, but I expected 4.

- Also, this example doesn't work:

```
sage: A3 = SymmetricGroup(3).algebra(QQ)
sage: A3
Symmetric group algebra of order 3 over Rational Field
sage: A3.orthogonal_idempotents()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'list' object has no attribute 'map'
```


- semisimple vs. semi-simple (be consistent)

- in the following, change the names `listGen`, `topLevel` to be consistent
  with Sage coding conventions:

```
+                    def _orthogonal_decomposition(self, listGen=None, topLevel=True):
```


- clean up the documentation of `_orthogonal_decomposition`: the last line
  ("Return a list...") should be the first line

- `orthogonal_idempotents`: what is the definition of a "minimal" idempotent?

- should there be a `test_orthogonal_idempotents` method?
  at the very least, there should be tests to test that the created idempotents
  are indeed orthogonal, sum to the identity, minimal, ....


---

Comment by saliola created at 2015-03-20 00:28:08

Changing status from new to needs_info.


---

Comment by saliola created at 2015-03-20 00:33:54

## General comments

- There are a few fixes needed to make the code conform to the Sage coding conventions. Things like proper ReST formatting of the documentation, and spaces surrounding operators and comparisons. For example:

 `len(res)<2` should be `len(res) < 2`
 `listGen==[]` should be `listGen == []`
 `map( lambda x: x.lift(), res)` should be `map(lambda x: x.lift(), res)`
 ...

- Can you add a description of the algorithm to the documentation string of `_orthogonal_decomposition`? I think it would be helpful to someone reading the code to figure out what it is trying to do.

- Good work! Thanks for implementing this! It will be very useful.


---

Comment by virmaux created at 2015-03-20 01:43:20

Hello Franco,

thank you very much for the very precise review. I agree with you on all points.

Unfortunatly the tests with `SymmetricGroup.Algebra` don't pass yet, but there is two ways to make them work for now:
* force `SymmetricGroup(n).algebra(field)` to be generic by commenting the good lines in /groups/perm_gps/permgroup_named.py
* waiting for #16926 to be in

I am working on it right now and will commit a revision as soon as possible!

Aladin


---

Comment by git created at 2015-03-20 01:47:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-03-20 03:55:37

#16926 is very close from positive review (just waiting for a green light from the patchbot). So feel free to merge it in.


---

Comment by git created at 2015-03-20 17:21:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-20 17:23:40

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-03-20 20:03:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-20 23:25:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-21 00:36:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2015-03-21 00:39:05

Hello,

I pushed many modifications according to Franco's review.

Also, #16926 had been merged so the tests all pass.

Aladin


---

Comment by git created at 2015-03-21 20:21:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-24 19:34:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-29 18:22:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-16 19:49:49

Changing status from needs_info to needs_work.


---

Comment by nthiery created at 2015-04-16 22:39:20

For the record: all tests passed on sage.math.u-psud.fr.
----
Last 10 new commits:


---

Comment by git created at 2015-04-19 08:30:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-19 21:07:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-19 21:30:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-04-20 16:27:11

I pushed some changes:

1. `radical_basis`: I removed the optional `cache_products` option since the speed up by Aladin seems not to use this [should be verified by the reviewer]. I also re-wrote the code to make it more readable (I hope it is more readable, at least).

2. `principal_ideal`:

    (a) I swapped 'left' and 'right', because they were backwards. The principal left ideal generated by `a` is `Aa`, not `aA`. I added doctests to test this.

    (b) the implementation only worked for 'triangularizable' algebras (for a suitable definition of triangularizable). I fixed the method to handle the generic case.

3. `central_orthogonal_idempotents`: I added a TESTS section to test that the idempotents constructed in the examples are "idempotents", "orthogonal" and "central". (I didn't run the tests yet though.)


Some of the above changes might break some tests in other parts of the code that rely on it (for example, `principal_ideal`). 
----
New commits:


---

Comment by saliola created at 2015-04-20 16:33:57

Here are a few more comments that came up at Sage Days 67.

`FiniteDimensionalAlgebrasWithBasis.ParentMethods.central_orthogonal_idempotents`:

    - shouldn't this be `orthogonal_idempotents` since they do not belong to the center? Or maybe I don't understand the definition: what is meant by "central"?
    - there should be a method to also compute the central orthogonal idempotents?

`SemisimpleAlgebras.Commutative.ParentMethods._orthogonal_idempotents`:

    - these are not idempotents (they are quasi-idempotents); the documentation string needs to be updated

Documentation string for Pierce decomposition:

    - needs the definition of a Pierce decomposition
    - `e_i A e_j` are *not* submodules or subalgebras in general, but subspaces

Other questions:

    - is there a method somewhere to test that a family of idempotents is a minimal family of orthogonal idempotents? if so, then the tests in `orthogonal_idempotents` need to be updated to use it

    - is there a method to test whether an idempotent is primitive?

At this point, I'll have little time to work on these over the next couple of weeks, but I will answer questions, if you have any.


---

Comment by saliola created at 2015-04-20 16:33:57

Changing keywords from "representation theory" to "representation theory, days64, sd67".


---

Comment by git created at 2015-04-21 13:34:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2015-04-21 14:06:49

Hi Franco, thank you for the remarks.

I made some changes after a discussion with Nicolas and Florent:
* Semisimple algebras:
 * In the semisimple quotient, the idempotents that we construct are central as they live in the center of the algebra. Unfortunately, lifting those idempotents does not preserve this last property. So I left the name `central_orthogonal_idempotents` for semisimple algebras.
 * I updated the documentation for `_orthogonal_decomposition`, but maybe we should change the name?

* Finite dimensional algebras with basis
 * `orthogonal_idempotents` -> `orthogonal_idempotents_central_mod_rad` because they are obtained by lifting the central_idempotents of the semisimple quotient.
 * As well, we now have a method `lifting_idempotents` instead of a subfunction in the previous method.
 * Peirce (with the correct spelling) is now splitted in two: `peirce_summand` return a sandwich subspace //e_i A e_j// and peirce_decomposition return the list of all sandwiches with the orthogonal idempotents lifted from the central ones of the semisimple quotient.

Other questions:
The idempotents we get for non semisimple algebra are not primitive. The only primitive idempotents we construct are for commutative semisimple algebras. To test if an idempotent //e// of //A// is primitive, we may construct the semisimple quotient of //eA// and test wether it is a simple module or not. In our finite dimensional case, is it enough to check that all elements of the basis generate the whole module?


---

Comment by git created at 2015-04-21 14:09:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-21 16:18:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2015-04-21 16:23:10

I reverted the radical basis. Here is a quick benchmark to show why:
Version #11111:

```
sage: D25 = DihedralGroup(25).algebra(QQ, category=Monoids().Finite())
sage: %time D25.radical()
CPU times: user 49.9 s, sys: 84 ms, total: 50 s
Wall time: 49.9 s
```

Version #16659

```
sage: %time D25.radical()
CPU times: user 572 ms, sys: 12 ms, total: 584 ms
Wall time: 590 ms
```


I am currently rewriting a lot of the documentation, I try to finish in the next hours.


---

Comment by git created at 2015-04-21 20:15:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-04-21 22:21:43

Replying to [comment:61 virmaux]:
> I reverted the radical basis. Here is a quick benchmark to show why:

That's very convincing!

I'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)


---

Comment by nthiery created at 2015-04-22 08:40:11

Replying to [comment:63 saliola]:
> I'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)

The main difference is that the reinstated version takes advantage of
the sparsity of the products. Of course this makes a bigger difference
for a monoid algebra than for an average algebra; so the benchmark is
not completely fair. But still, many of our algebras are rather
sparse, so that's good.

On another note: I actually tend to find nested list comprehensions
more readable than for loops because they highlight the intent. But
that's indeed only valid if one does not need to do weird stuff to
make it fit into the functional style.

Cheers,
                              Nicolas


---

Comment by nthiery created at 2015-04-22 12:18:38

New commits:


---

Comment by nthiery created at 2015-04-22 13:46:36

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-04-22 15:21:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-23 16:39:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 09:20:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 10:38:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 14:02:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 14:03:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 14:23:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 14:31:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-24 14:33:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-24 14:37:03

Hi Aladin, Franco, Florent,

I am done going through this ticket, and am happy with its state. Please proofread my changes, and if you are ok with them, I guess this is good to go!

Great job Aladin by the way.


---

Comment by git created at 2015-04-24 14:58:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2015-04-24 19:35:50

Hi Nicolas, thank you very much for these last commits.
I agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.


---

Comment by nthiery created at 2015-04-24 20:53:55

Replying to [comment:81 virmaux]:
> Hi Nicolas, thank you very much for these last commits.
> I agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.

Oops, fixed! Thanks for the notice!


---

Comment by virmaux created at 2015-04-25 07:25:04

There is still no commit with it ;)


---

Comment by git created at 2015-04-25 08:37:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-25 08:39:12

Gasp. I somehow managed to do the commit on develop. Luckily enough there are securities preventing from pushing there :-)


---

Comment by nthiery created at 2015-04-26 21:07:00

Aladin, do you think this is good to go, or would you like Franco or Florent to have a last round of checks?

By the way, and just to wet your appetite, I have been working on a
follow up ticket which improves the algorithmic complexity (`n^4` to
`n^3` for the radical) and further optimizes the code.

Without:

```
sage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)
sage: %time len(A.radical_basis())
CPU times: user 4.25 s, sys: 45.1 ms, total: 4.3 s
Wall time: 4.26 s
104
sage: %time A.cartan_invariants_matrix()
CPU times: user 45.2 s, sys: 267 ms, total: 45.4 s
Wall time: 45.5 s
```


With:

```
sage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)
sage: %time len(A.radical_basis())
CPU times: user 418 ms, sys: 29.5 ms, total: 447 ms
Wall time: 422 ms
104
sage: %time A.cartan_invariants_matrix_by_characters()
CPU times: user 9.39 s, sys: 208 ms, total: 9.6 s
Wall time: 9.53 s
```


(in the above, I am *not* using that this is a monoid algebra, though
of course the sparsity helps).

Cheers,
                               Nicolas


---

Comment by virmaux created at 2015-04-27 08:10:13

Hello,

well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.

This optimization on the radical is very exciting :) But maybe it deserves a new ticket ?

Also it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators = D4.basis
sage: D4.cartan_invariants_matrix()
[1 0 0 0 0]
[0 1 0 0 0]
[0 1 1 0 0]
[0 0 0 1 0]
[0 1 1 0 1]
```


I am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?

Aladin


---

Comment by nthiery created at 2015-04-27 09:17:40

Replying to [comment:87 virmaux]:
> well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.

Ok!

> This optimization on the radical is very exciting :) But maybe it deserves a new ticket ?

It definitely is for a follow up ticket. Especially since I had to do
some optimizations on ModulesWithBasis and friends which deserve a
ticket by themselves.

> Also it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:
> {{{
> sage: D4 = DescentAlgebra(QQ, 4).B()
> sage: D4.algebra_generators = D4.basis
> sage: D4.cartan_invariants_matrix()
> [1 0 0 0 0]
> [0 1 0 0 0]
> [0 1 1 0 0]
> [0 0 0 1 0]
> [0 1 1 0 1]
> }}}
> 
> I am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?

For a finite dimensional algebra with basis, it sounds quite
reasonable to use `basis` as default implementation for
`algebra_generators`. I believe we can leave that to the follow up
ticket.

Cheers,
                              Nicolas


---

Comment by saliola created at 2015-04-27 13:48:24

Replying to [comment:88 nthiery]:
> Replying to [comment:87 virmaux]:
> > well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.
> 
> Ok!

I would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.

Franco


---

Comment by nthiery created at 2015-04-27 14:32:47

Replying to [comment:90 saliola]:
> I would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.

Sure thing! Thanks in advance.


---

Comment by nthiery created at 2015-04-27 17:02:08

Gasp, I just noticed that I put a wrong ticket number (#17696 instead of #16659) in some of the commit messages.


---

Comment by saliola created at 2015-05-01 16:57:42

Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)

1. First of all, this looks great! I only have a few comments / questions.

2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent? If so then I suggest the name `complete_set_of_primitive_orthogonal_idempotents`. I think this is the standard name in the literature. Maybe I'm missing something? (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)

3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?

5. Tests: All tests passed!

*Positive review* pending the change of `right` to `left` for `S_i^*`.


---

Comment by saliola created at 2015-05-01 17:03:52

Replying to [comment:93 saliola]:
> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

For instance, it seems that one can iterate the formula `3 * a^2 - 2 * a^3` to lift the idempotents. See  Lemma 1.7.3 (Idempotent Refinement) of Benson's ['Representations and Cohomology I](http://books.google.ca/books/about/Representations_and_Cohomology_Volume_1.html?id=cezF63340GAC&redir_esc=y) (search for _refinement_).


---

Comment by nthiery created at 2015-05-02 06:46:48

Replying to [comment:93 saliola]:
> Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)

Quite impressed, I am!

:-)

> 1. First of all, this looks great! I only have a few comments / questions.

Thanks, and thanks for the review!

> 2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent?

Nope; in the case of a full nxn matrix algebra (which is semisimple,
so mod rad or not are the same), we get a single idempotent: the
identity; to get primitive idempotents, we would need to refine this
trivial decomposition into `n` orthogonal idempotents.

In general, for each simple module of dim k, we get a single
idempotent e such that eAe is the k x k block matrix corresponding to
the simple module.

We haven't found a good name for those idempotents in the literature;
suggestions welcome!

> (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)

Will do!

> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

If we have a use case for it, that is if the various lifting have each
some specific merit, then why not. For a latter ticket indeed.

> 4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?

Oops. Will fix now!

Cheers,
                                         Nicolas


---

Comment by git created at 2015-05-02 06:52:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-05-02 06:53:31

Implemented final fix requested by Franco; positive review on his behalf!
----
New commits:


---

Comment by nthiery created at 2015-05-02 06:53:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-02 17:21:07


```
Overfull \hbox (49.85445pt too wide) in paragraph at lines 44441--44442
\T1/ptm/m/n/10 Bases: \T1/pcr/m/n/10 sage.categories.category_with_axiom.Catego
ryWithAxiom_over_base_ring 

! LaTeX Error: Too deeply nested.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.44470 \begin{itemize}
                       
? >
! Emergency stop.
 ...                                              
                                                  
l.44470 \begin{itemize}
                       
!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on categories.log.
```



---

Comment by vbraun created at 2015-05-02 17:21:07

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-05-03 06:54:59

Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).


---

Comment by nthiery created at 2015-05-03 08:20:10

Good morning Travis,

Replying to [comment:99 tscrim]:
> Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).

Perfect, that's exactly what I was working on :-)

Great minds ...


---

Comment by git created at 2015-05-03 08:24:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-05-03 08:28:31

Done!

All long tests pass in sage/categories, and the pdf doc
compiles. I haven't made any change besides moving the code, and
adding the usual file/class docstrings, lazy imports, and addition to
the ref manual. If someone can briefly double check those, I believe
this can be set back to positive review.


---

Comment by nthiery created at 2015-05-03 08:28:31

Changing status from needs_work to needs_review.


---

Comment by nthiery created at 2015-05-03 08:41:04

Replying to [comment:98 vbraun]:
> {{{
> ! LaTeX Error: Too deeply nested.
> }}}

Thanks Volker for the report, and sorry for not having compiled the
pdf doc!

To reduce the risk of this happening again, I have posted a feature
request for the patchbot to build and report on the pdf doc:

https://github.com/robertwb/sage-patchbot/issues/64

Cheers,
                                  Nicolas


---

Comment by saliola created at 2015-05-03 11:49:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-03 14:53:30

Resolution: fixed


---

Comment by nthiery created at 2015-05-03 20:28:52

Thanks Franco and Volker for this final step!

Yeah, this is done! One more big feature of MuPAD-Combinat that is in Sage :-)
