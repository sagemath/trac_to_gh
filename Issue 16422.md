# Issue 16422: Decomposition of finite dimensional associative algebras

archive/issues_016422.json:
```json
{
    "body": "CC:  @nthiery @nathanncohen simonking\n\nKeywords: representation theory\n\nImplement methods for breaking finite dimensional associative algebras:\n* Decompose a semi-simple commutative algebra into a direct sum of simple modules\n* Orthogonal idempotents\n* For an associative algebra A, give a list of all simple A-mod and indecomposable projective A-mod\n* Decompose any associative algebra into a direct sum of projective modules\n* Cartan matrix\n\nIssue created by migration from https://trac.sagemath.org/ticket/16659\n\n",
    "created_at": "2014-07-16T01:55:10Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Decomposition of finite dimensional associative algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16422",
    "user": "https://github.com/avirmaux"
}
```
CC:  @nthiery @nathanncohen simonking

Keywords: representation theory

Implement methods for breaking finite dimensional associative algebras:
* Decompose a semi-simple commutative algebra into a direct sum of simple modules
* Orthogonal idempotents
* For an associative algebra A, give a list of all simple A-mod and indecomposable projective A-mod
* Decompose any associative algebra into a direct sum of projective modules
* Cartan matrix

Issue created by migration from https://trac.sagemath.org/ticket/16659





---

archive/issue_comments_215410.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-25T01:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215411.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-25T02:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215412.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-25T18:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215413.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T09:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215414.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T09:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215415.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T10:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215416.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T10:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215417.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T10:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215418.json:
```json
{
    "body": "This may be a superfluous comment, but have you taken a look at #12141 (merged 6 months ago) and have you checked that you are not duplicating any of the functionality there?  (I'm asking because you seem to work mostly inside `sage.categories` and not to interact with `sage.algebras`.)",
    "created_at": "2014-08-29T11:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215418",
    "user": "https://github.com/pjbruin"
}
```

This may be a superfluous comment, but have you taken a look at #12141 (merged 6 months ago) and have you checked that you are not duplicating any of the functionality there?  (I'm asking because you seem to work mostly inside `sage.categories` and not to interact with `sage.algebras`.)



---

archive/issue_comments_215419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-01T11:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215420.json:
```json
{
    "body": "pbruin: thanks for the hint, I will definitely check :)",
    "created_at": "2014-09-01T12:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215420",
    "user": "https://github.com/avirmaux"
}
```

pbruin: thanks for the hint, I will definitely check :)



---

archive/issue_comments_215421.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-09-01T14:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_215422.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-09-01T16:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_215423.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-09-01T17:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_215424.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-03T13:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215425.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-03T13:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215426.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-03T15:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215427.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-05T07:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-05T07:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215429.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-05T16:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215430.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-03-12T14:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215430",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_215431.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-03-18T16:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_215432.json:
```json
{
    "body": "## finite_dimensional_algebras_with_basis.py\n\n- the code needs to be cleaned up; for details see\n  http://www.sagemath.org/doc/developer/coding_basics.html#documentation-strings\n\n\n```\n                 Product of two elements.\n                 INPUT::\n```\n\n- insert an extra line here\n- also, change :: to : for INPUT blocks\n\n```\n                 INPUT::\n\n                     - ``self``, ``right`` -- two elements\n```\n\nThe beginning of descriptions of the inputs is aligned with the I in INPUT.\n\n```\n                 If B is a SubModuleWithBasis of A, then the multiplication law of B is\n                 inherited from the multiplication of A.\n```\n\nThe Python and Sage objects should be approperiately wrapped : `B`, `A`,\n`:class:`SubModuleWithBasis``, ...\n\n```\n                 return p.retract( self.lift() * right.lift())\n```\n\nThere should be no space after `p.retract(`.\n\n\nDelete this line:\n\n```\n# x[i,j] = product_on_basis(x,i).coefficient(j)\n```\n\n\nDelete these lines:\n\n```\n# Old algorithm:\n+                # mat = matrix(self.base_ring(), [\n+                #        [sum(product_on_basis(x,j).coefficient(i) * c\n+                #            for i in keys for j,c in product_on_basis(y,i)) for x in keys]\n+                #            for y in keys ])\n```\n\n\nWrap the `A` below in single backticks (for latex output):\n\n```\nConstruct the ``side`` A-module generated by ``a``.\n```\n\n\nThere is some redundancy:\n\n```\n+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example()\n+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example(); A\n```\n\n\nAdd a reference for the algorithm/formula used in `_lift_idempotent`.\nThere are other possibilities one could use here. Is it work implementing\nsome of these other ones and giving the user a choice between algorithms?\n\nDoes Python / Sage prefer `!=` to `<>`?\n\nto be continued ...",
    "created_at": "2015-03-20T00:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215432",
    "user": "https://github.com/saliola"
}
```

## finite_dimensional_algebras_with_basis.py

- the code needs to be cleaned up; for details see
  http://www.sagemath.org/doc/developer/coding_basics.html#documentation-strings


```
                 Product of two elements.
                 INPUT::
```

- insert an extra line here
- also, change :: to : for INPUT blocks

```
                 INPUT::

                     - ``self``, ``right`` -- two elements
```

The beginning of descriptions of the inputs is aligned with the I in INPUT.

```
                 If B is a SubModuleWithBasis of A, then the multiplication law of B is
                 inherited from the multiplication of A.
```

The Python and Sage objects should be approperiately wrapped : `B`, `A`,
`:class:`SubModuleWithBasis``, ...

```
                 return p.retract( self.lift() * right.lift())
```

There should be no space after `p.retract(`.


Delete this line:

```
# x[i,j] = product_on_basis(x,i).coefficient(j)
```


Delete these lines:

```
# Old algorithm:
+                # mat = matrix(self.base_ring(), [
+                #        [sum(product_on_basis(x,j).coefficient(i) * c
+                #            for i in keys for j,c in product_on_basis(y,i)) for x in keys]
+                #            for y in keys ])
```


Wrap the `A` below in single backticks (for latex output):

```
Construct the ``side`` A-module generated by ``a``.
```


There is some redundancy:

```
+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example()
+                sage: A = FiniteDimensionalAlgebrasWithBasis(QQ).example(); A
```


Add a reference for the algorithm/formula used in `_lift_idempotent`.
There are other possibilities one could use here. Is it work implementing
some of these other ones and giving the user a choice between algorithms?

Does Python / Sage prefer `!=` to `<>`?

to be continued ...



---

archive/issue_comments_215433.json:
```json
{
    "body": "## finite_dimensional_algebras_with_basis.py (part 2)\n\nI think that `cartan_invariant_matrix` should be\n`cartan_invariants_matrix`; update the documentation of this method to read:\n\n```\nReturn the matrix of Cartan invariants of ``self``.\n```\n\n\nIn the method `cartan_invariant_matrix`, you compute the dimension of the\nsimple modules, but this is just the cartan invariants for the semisimple\nquotient. Perhaps you can use this to clean up the code.\n\nAt the very least, I think that the code to compute the dimension of the simple\nmodules should be refactored into a separate method.\n\n```side``-sided` should be just ```side```.\n\n`projective_decomposition` --> `projective_indecomposables` or `projective_indecomposable_modules`\n\n`_cartan_matrix_coef` --> `_cartan_matrix_coeff` (two fs)\n\nmissing documentation string for `_cartan_matrix_coeff`\n\nPerhaps it is a good idea to define a method called `pierce_decomposition`\nthat returns the Pierce decomposition of the algebra; and maybe\n`pierce_component`? This would simplify `_cartan_matrix_coef`.",
    "created_at": "2015-03-20T00:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215433",
    "user": "https://github.com/saliola"
}
```

## finite_dimensional_algebras_with_basis.py (part 2)

I think that `cartan_invariant_matrix` should be
`cartan_invariants_matrix`; update the documentation of this method to read:

```
Return the matrix of Cartan invariants of ``self``.
```


In the method `cartan_invariant_matrix`, you compute the dimension of the
simple modules, but this is just the cartan invariants for the semisimple
quotient. Perhaps you can use this to clean up the code.

At the very least, I think that the code to compute the dimension of the simple
modules should be refactored into a separate method.

```side``-sided` should be just ```side```.

`projective_decomposition` --> `projective_indecomposables` or `projective_indecomposable_modules`

`_cartan_matrix_coef` --> `_cartan_matrix_coeff` (two fs)

missing documentation string for `_cartan_matrix_coeff`

Perhaps it is a good idea to define a method called `pierce_decomposition`
that returns the Pierce decomposition of the algebra; and maybe
`pierce_component`? This would simplify `_cartan_matrix_coef`.



---

archive/issue_comments_215434.json:
```json
{
    "body": "## semisimple_algebras.py\n\n- The `orthogonal_idempotents` method returns **central** orthogonal\n  idempotents, so I think that the name of this method should be changed to\n  `central_orthogonal_idempotents`. For example, in the docstring the example\n  `SymmetricGroup(3).algebra(QQ)` returns 3 idempotents, but I expected 4.\n\n- Also, this example doesn't work:\n\n```\nsage: A3 = SymmetricGroup(3).algebra(QQ)\nsage: A3\nSymmetric group algebra of order 3 over Rational Field\nsage: A3.orthogonal_idempotents()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n...\nAttributeError: 'list' object has no attribute 'map'\n```\n\n\n- semisimple vs. semi-simple (be consistent)\n\n- in the following, change the names `listGen`, `topLevel` to be consistent\n  with Sage coding conventions:\n\n```\n+                    def _orthogonal_decomposition(self, listGen=None, topLevel=True):\n```\n\n\n- clean up the documentation of `_orthogonal_decomposition`: the last line\n  (\"Return a list...\") should be the first line\n\n- `orthogonal_idempotents`: what is the definition of a \"minimal\" idempotent?\n\n- should there be a `test_orthogonal_idempotents` method?\n  at the very least, there should be tests to test that the created idempotents\n  are indeed orthogonal, sum to the identity, minimal, ....",
    "created_at": "2015-03-20T00:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215434",
    "user": "https://github.com/saliola"
}
```

## semisimple_algebras.py

- The `orthogonal_idempotents` method returns **central** orthogonal
  idempotents, so I think that the name of this method should be changed to
  `central_orthogonal_idempotents`. For example, in the docstring the example
  `SymmetricGroup(3).algebra(QQ)` returns 3 idempotents, but I expected 4.

- Also, this example doesn't work:

```
sage: A3 = SymmetricGroup(3).algebra(QQ)
sage: A3
Symmetric group algebra of order 3 over Rational Field
sage: A3.orthogonal_idempotents()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'list' object has no attribute 'map'
```


- semisimple vs. semi-simple (be consistent)

- in the following, change the names `listGen`, `topLevel` to be consistent
  with Sage coding conventions:

```
+                    def _orthogonal_decomposition(self, listGen=None, topLevel=True):
```


- clean up the documentation of `_orthogonal_decomposition`: the last line
  ("Return a list...") should be the first line

- `orthogonal_idempotents`: what is the definition of a "minimal" idempotent?

- should there be a `test_orthogonal_idempotents` method?
  at the very least, there should be tests to test that the created idempotents
  are indeed orthogonal, sum to the identity, minimal, ....



---

archive/issue_comments_215435.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2015-03-20T00:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215435",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_215436.json:
```json
{
    "body": "## General comments\n\n- There are a few fixes needed to make the code conform to the Sage coding conventions. Things like proper ReST formatting of the documentation, and spaces surrounding operators and comparisons. For example:\n\n  `len(res)<2` should be `len(res) < 2`\n  `listGen==[]` should be `listGen == []`\n  `map( lambda x: x.lift(), res)` should be `map(lambda x: x.lift(), res)`\n  ...\n\n- Can you add a description of the algorithm to the documentation string of `_orthogonal_decomposition`? I think it would be helpful to someone reading the code to figure out what it is trying to do.\n\n- Good work! Thanks for implementing this! It will be very useful.",
    "created_at": "2015-03-20T00:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215436",
    "user": "https://github.com/saliola"
}
```

## General comments

- There are a few fixes needed to make the code conform to the Sage coding conventions. Things like proper ReST formatting of the documentation, and spaces surrounding operators and comparisons. For example:

  `len(res)<2` should be `len(res) < 2`
  `listGen==[]` should be `listGen == []`
  `map( lambda x: x.lift(), res)` should be `map(lambda x: x.lift(), res)`
  ...

- Can you add a description of the algorithm to the documentation string of `_orthogonal_decomposition`? I think it would be helpful to someone reading the code to figure out what it is trying to do.

- Good work! Thanks for implementing this! It will be very useful.



---

archive/issue_comments_215437.json:
```json
{
    "body": "Hello Franco,\n\nthank you very much for the very precise review. I agree with you on all points.\n\nUnfortunatly the tests with `SymmetricGroup.Algebra` don't pass yet, but there is two ways to make them work for now:\n* force `SymmetricGroup(n).algebra(field)` to be generic by commenting the good lines in /groups/perm_gps/permgroup_named.py\n* waiting for #16926 to be in\n\nI am working on it right now and will commit a revision as soon as possible!\n\nAladin",
    "created_at": "2015-03-20T01:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215437",
    "user": "https://github.com/avirmaux"
}
```

Hello Franco,

thank you very much for the very precise review. I agree with you on all points.

Unfortunatly the tests with `SymmetricGroup.Algebra` don't pass yet, but there is two ways to make them work for now:
* force `SymmetricGroup(n).algebra(field)` to be generic by commenting the good lines in /groups/perm_gps/permgroup_named.py
* waiting for #16926 to be in

I am working on it right now and will commit a revision as soon as possible!

Aladin



---

archive/issue_comments_215438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T01:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215439.json:
```json
{
    "body": "#16926 is very close from positive review (just waiting for a green light from the patchbot). So feel free to merge it in.",
    "created_at": "2015-03-20T03:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215439",
    "user": "https://github.com/nthiery"
}
```

#16926 is very close from positive review (just waiting for a green light from the patchbot). So feel free to merge it in.



---

archive/issue_comments_215440.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T17:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215441.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-03-20T17:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_215442.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T20:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215443.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T23:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215444.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-21T00:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215445.json:
```json
{
    "body": "Hello,\n\nI pushed many modifications according to Franco's review.\n\nAlso, #16926 had been merged so the tests all pass.\n\nAladin",
    "created_at": "2015-03-21T00:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215445",
    "user": "https://github.com/avirmaux"
}
```

Hello,

I pushed many modifications according to Franco's review.

Also, #16926 had been merged so the tests all pass.

Aladin



---

archive/issue_comments_215446.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-21T20:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215447.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-24T19:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-29T18:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215449.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2015-04-16T19:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215449",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_215450.json:
```json
{
    "body": "For the record: all tests passed on sage.math.u-psud.fr.\n----\nLast 10 new commits:",
    "created_at": "2015-04-16T22:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215450",
    "user": "https://github.com/nthiery"
}
```

For the record: all tests passed on sage.math.u-psud.fr.
----
Last 10 new commits:



---

archive/issue_comments_215451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-19T08:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-19T21:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215453.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-19T21:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215454.json:
```json
{
    "body": "I pushed some changes:\n\n1. `radical_basis`: I removed the optional `cache_products` option since the speed up by Aladin seems not to use this [should be verified by the reviewer]. I also re-wrote the code to make it more readable (I hope it is more readable, at least).\n\n2. `principal_ideal`:\n\n    (a) I swapped 'left' and 'right', because they were backwards. The principal left ideal generated by `a` is `Aa`, not `aA`. I added doctests to test this.\n\n    (b) the implementation only worked for 'triangularizable' algebras (for a suitable definition of triangularizable). I fixed the method to handle the generic case.\n\n3. `central_orthogonal_idempotents`: I added a TESTS section to test that the idempotents constructed in the examples are \"idempotents\", \"orthogonal\" and \"central\". (I didn't run the tests yet though.)\n\n\nSome of the above changes might break some tests in other parts of the code that rely on it (for example, `principal_ideal`). \n----\nNew commits:",
    "created_at": "2015-04-20T16:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215454",
    "user": "https://github.com/saliola"
}
```

I pushed some changes:

1. `radical_basis`: I removed the optional `cache_products` option since the speed up by Aladin seems not to use this [should be verified by the reviewer]. I also re-wrote the code to make it more readable (I hope it is more readable, at least).

2. `principal_ideal`:

    (a) I swapped 'left' and 'right', because they were backwards. The principal left ideal generated by `a` is `Aa`, not `aA`. I added doctests to test this.

    (b) the implementation only worked for 'triangularizable' algebras (for a suitable definition of triangularizable). I fixed the method to handle the generic case.

3. `central_orthogonal_idempotents`: I added a TESTS section to test that the idempotents constructed in the examples are "idempotents", "orthogonal" and "central". (I didn't run the tests yet though.)


Some of the above changes might break some tests in other parts of the code that rely on it (for example, `principal_ideal`). 
----
New commits:



---

archive/issue_comments_215455.json:
```json
{
    "body": "Here are a few more comments that came up at Sage Days 67.\n\n`FiniteDimensionalAlgebrasWithBasis.ParentMethods.central_orthogonal_idempotents`:\n\n- shouldn't this be `orthogonal_idempotents` since they do not belong to the center? Or maybe I don't understand the definition: what is meant by \"central\"?\n- there should be a method to also compute the central orthogonal idempotents?\n\n`SemisimpleAlgebras.Commutative.ParentMethods._orthogonal_idempotents`:\n\n- these are not idempotents (they are quasi-idempotents); the documentation string needs to be updated\n\nDocumentation string for Pierce decomposition:\n\n- needs the definition of a Pierce decomposition\n- `e_i A e_j` are *not* submodules or subalgebras in general, but subspaces\n\nOther questions:\n\n- is there a method somewhere to test that a family of idempotents is a minimal family of orthogonal idempotents? if so, then the tests in `orthogonal_idempotents` need to be updated to use it\n\n- is there a method to test whether an idempotent is primitive?\n\nAt this point, I'll have little time to work on these over the next couple of weeks, but I will answer questions, if you have any.",
    "created_at": "2015-04-20T16:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215455",
    "user": "https://github.com/saliola"
}
```

Here are a few more comments that came up at Sage Days 67.

`FiniteDimensionalAlgebrasWithBasis.ParentMethods.central_orthogonal_idempotents`:

- shouldn't this be `orthogonal_idempotents` since they do not belong to the center? Or maybe I don't understand the definition: what is meant by "central"?
- there should be a method to also compute the central orthogonal idempotents?

`SemisimpleAlgebras.Commutative.ParentMethods._orthogonal_idempotents`:

- these are not idempotents (they are quasi-idempotents); the documentation string needs to be updated

Documentation string for Pierce decomposition:

- needs the definition of a Pierce decomposition
- `e_i A e_j` are *not* submodules or subalgebras in general, but subspaces

Other questions:

- is there a method somewhere to test that a family of idempotents is a minimal family of orthogonal idempotents? if so, then the tests in `orthogonal_idempotents` need to be updated to use it

- is there a method to test whether an idempotent is primitive?

At this point, I'll have little time to work on these over the next couple of weeks, but I will answer questions, if you have any.



---

archive/issue_comments_215456.json:
```json
{
    "body": "Changing keywords from \"representation theory\" to \"representation theory, days64, sd67\".",
    "created_at": "2015-04-20T16:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215456",
    "user": "https://github.com/saliola"
}
```

Changing keywords from "representation theory" to "representation theory, days64, sd67".



---

archive/issue_comments_215457.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T13:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215458.json:
```json
{
    "body": "Hi Franco, thank you for the remarks.\n\nI made some changes after a discussion with Nicolas and Florent:\n* Semisimple algebras:\n  * In the semisimple quotient, the idempotents that we construct are central as they live in the center of the algebra. Unfortunately, lifting those idempotents does not preserve this last property. So I left the name `central_orthogonal_idempotents` for semisimple algebras.\n  * I updated the documentation for `_orthogonal_decomposition`, but maybe we should change the name?\n\n* Finite dimensional algebras with basis\n  * `orthogonal_idempotents` -> `orthogonal_idempotents_central_mod_rad` because they are obtained by lifting the central_idempotents of the semisimple quotient.\n  * As well, we now have a method `lifting_idempotents` instead of a subfunction in the previous method.\n  * Peirce (with the correct spelling) is now splitted in two: `peirce_summand` return a sandwich subspace //e_i A e_j// and peirce_decomposition return the list of all sandwiches with the orthogonal idempotents lifted from the central ones of the semisimple quotient.\n\nOther questions:\nThe idempotents we get for non semisimple algebra are not primitive. The only primitive idempotents we construct are for commutative semisimple algebras. To test if an idempotent //e// of //A// is primitive, we may construct the semisimple quotient of //eA// and test wether it is a simple module or not. In our finite dimensional case, is it enough to check that all elements of the basis generate the whole module?",
    "created_at": "2015-04-21T14:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215458",
    "user": "https://github.com/avirmaux"
}
```

Hi Franco, thank you for the remarks.

I made some changes after a discussion with Nicolas and Florent:
* Semisimple algebras:
  * In the semisimple quotient, the idempotents that we construct are central as they live in the center of the algebra. Unfortunately, lifting those idempotents does not preserve this last property. So I left the name `central_orthogonal_idempotents` for semisimple algebras.
  * I updated the documentation for `_orthogonal_decomposition`, but maybe we should change the name?

* Finite dimensional algebras with basis
  * `orthogonal_idempotents` -> `orthogonal_idempotents_central_mod_rad` because they are obtained by lifting the central_idempotents of the semisimple quotient.
  * As well, we now have a method `lifting_idempotents` instead of a subfunction in the previous method.
  * Peirce (with the correct spelling) is now splitted in two: `peirce_summand` return a sandwich subspace //e_i A e_j// and peirce_decomposition return the list of all sandwiches with the orthogonal idempotents lifted from the central ones of the semisimple quotient.

Other questions:
The idempotents we get for non semisimple algebra are not primitive. The only primitive idempotents we construct are for commutative semisimple algebras. To test if an idempotent //e// of //A// is primitive, we may construct the semisimple quotient of //eA// and test wether it is a simple module or not. In our finite dimensional case, is it enough to check that all elements of the basis generate the whole module?



---

archive/issue_comments_215459.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T14:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215460.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T16:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215461.json:
```json
{
    "body": "I reverted the radical basis. Here is a quick benchmark to show why:\nVersion #11111:\n\n```\nsage: D25 = DihedralGroup(25).algebra(QQ, category=Monoids().Finite())\nsage: %time D25.radical()\nCPU times: user 49.9 s, sys: 84 ms, total: 50 s\nWall time: 49.9 s\n```\n\nVersion #16659\n\n```\nsage: %time D25.radical()\nCPU times: user 572 ms, sys: 12 ms, total: 584 ms\nWall time: 590 ms\n```\n\n\nI am currently rewriting a lot of the documentation, I try to finish in the next hours.",
    "created_at": "2015-04-21T16:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215461",
    "user": "https://github.com/avirmaux"
}
```

I reverted the radical basis. Here is a quick benchmark to show why:
Version #11111:

```
sage: D25 = DihedralGroup(25).algebra(QQ, category=Monoids().Finite())
sage: %time D25.radical()
CPU times: user 49.9 s, sys: 84 ms, total: 50 s
Wall time: 49.9 s
```

Version #16659

```
sage: %time D25.radical()
CPU times: user 572 ms, sys: 12 ms, total: 584 ms
Wall time: 590 ms
```


I am currently rewriting a lot of the documentation, I try to finish in the next hours.



---

archive/issue_comments_215462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T20:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215463.json:
```json
{
    "body": "Replying to [comment:61 virmaux]:\n> I reverted the radical basis. Here is a quick benchmark to show why:\n\nThat's very convincing!\n\nI'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)",
    "created_at": "2015-04-21T22:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215463",
    "user": "https://github.com/saliola"
}
```

Replying to [comment:61 virmaux]:
> I reverted the radical basis. Here is a quick benchmark to show why:

That's very convincing!

I'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)



---

archive/issue_comments_215464.json:
```json
{
    "body": "Replying to [comment:63 saliola]:\n> I'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)\n\nThe main difference is that the reinstated version takes advantage of\nthe sparsity of the products. Of course this makes a bigger difference\nfor a monoid algebra than for an average algebra; so the benchmark is\nnot completely fair. But still, many of our algebras are rather\nsparse, so that's good.\n\nOn another note: I actually tend to find nested list comprehensions\nmore readable than for loops because they highlight the intent. But\nthat's indeed only valid if one does not need to do weird stuff to\nmake it fit into the functional style.\n\nCheers,\n                              Nicolas",
    "created_at": "2015-04-22T08:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215464",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:63 saliola]:
> I'm surprised that there is such a big difference. I just took your method and re-wrote it to be easier to read (I wanted to avoid the nested list comprehensions). But speed is more important. :-)

The main difference is that the reinstated version takes advantage of
the sparsity of the products. Of course this makes a bigger difference
for a monoid algebra than for an average algebra; so the benchmark is
not completely fair. But still, many of our algebras are rather
sparse, so that's good.

On another note: I actually tend to find nested list comprehensions
more readable than for loops because they highlight the intent. But
that's indeed only valid if one does not need to do weird stuff to
make it fit into the functional style.

Cheers,
                              Nicolas



---

archive/issue_comments_215465.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-22T12:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215465",
    "user": "https://github.com/nthiery"
}
```

New commits:



---

archive/issue_comments_215466.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-22T13:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215466",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_215467.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-22T15:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215468.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-23T16:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215469.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T09:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215470.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T10:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215471.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215472.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215473.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215474.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215475.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215476.json:
```json
{
    "body": "Hi Aladin, Franco, Florent,\n\nI am done going through this ticket, and am happy with its state. Please proofread my changes, and if you are ok with them, I guess this is good to go!\n\nGreat job Aladin by the way.",
    "created_at": "2015-04-24T14:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215476",
    "user": "https://github.com/nthiery"
}
```

Hi Aladin, Franco, Florent,

I am done going through this ticket, and am happy with its state. Please proofread my changes, and if you are ok with them, I guess this is good to go!

Great job Aladin by the way.



---

archive/issue_comments_215477.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-24T14:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215478.json:
```json
{
    "body": "Hi Nicolas, thank you very much for these last commits.\nI agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.",
    "created_at": "2015-04-24T19:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215478",
    "user": "https://github.com/avirmaux"
}
```

Hi Nicolas, thank you very much for these last commits.
I agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.



---

archive/issue_comments_215479.json:
```json
{
    "body": "Replying to [comment:81 virmaux]:\n> Hi Nicolas, thank you very much for these last commits.\n> I agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.\n\nOops, fixed! Thanks for the notice!",
    "created_at": "2015-04-24T20:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215479",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:81 virmaux]:
> Hi Nicolas, thank you very much for these last commits.
> I agree with the documentation and the refactorisation you made, but I think you forgot to add sage.monoids.hecke_monoid.

Oops, fixed! Thanks for the notice!



---

archive/issue_comments_215480.json:
```json
{
    "body": "There is still no commit with it ;)",
    "created_at": "2015-04-25T07:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215480",
    "user": "https://github.com/avirmaux"
}
```

There is still no commit with it ;)



---

archive/issue_comments_215481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-25T08:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215482.json:
```json
{
    "body": "Gasp. I somehow managed to do the commit on develop. Luckily enough there are securities preventing from pushing there :-)",
    "created_at": "2015-04-25T08:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215482",
    "user": "https://github.com/nthiery"
}
```

Gasp. I somehow managed to do the commit on develop. Luckily enough there are securities preventing from pushing there :-)



---

archive/issue_comments_215483.json:
```json
{
    "body": "Aladin, do you think this is good to go, or would you like Franco or Florent to have a last round of checks?\n\nBy the way, and just to wet your appetite, I have been working on a\nfollow up ticket which improves the algorithmic complexity (`n^4` to\n`n^3` for the radical) and further optimizes the code.\n\nWithout:\n\n```\nsage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)\nsage: %time len(A.radical_basis())\nCPU times: user 4.25 s, sys: 45.1 ms, total: 4.3 s\nWall time: 4.26 s\n104\nsage: %time A.cartan_invariants_matrix()\nCPU times: user 45.2 s, sys: 267 ms, total: 45.4 s\nWall time: 45.5 s\n```\n\n\nWith:\n\n```\nsage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)\nsage: %time len(A.radical_basis())\nCPU times: user 418 ms, sys: 29.5 ms, total: 447 ms\nWall time: 422 ms\n104\nsage: %time A.cartan_invariants_matrix_by_characters()\nCPU times: user 9.39 s, sys: 208 ms, total: 9.6 s\nWall time: 9.53 s\n```\n\n\n(in the above, I am *not* using that this is a monoid algebra, though\nof course the sparsity helps).\n\nCheers,\n                               Nicolas",
    "created_at": "2015-04-26T21:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215483",
    "user": "https://github.com/nthiery"
}
```

Aladin, do you think this is good to go, or would you like Franco or Florent to have a last round of checks?

By the way, and just to wet your appetite, I have been working on a
follow up ticket which improves the algorithmic complexity (`n^4` to
`n^3` for the radical) and further optimizes the code.

Without:

```
sage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)
sage: %time len(A.radical_basis())
CPU times: user 4.25 s, sys: 45.1 ms, total: 4.3 s
Wall time: 4.26 s
104
sage: %time A.cartan_invariants_matrix()
CPU times: user 45.2 s, sys: 267 ms, total: 45.4 s
Wall time: 45.5 s
```


With:

```
sage: A = HeckeMonoid(SymmetricGroup(5)).algebra(QQ)
sage: %time len(A.radical_basis())
CPU times: user 418 ms, sys: 29.5 ms, total: 447 ms
Wall time: 422 ms
104
sage: %time A.cartan_invariants_matrix_by_characters()
CPU times: user 9.39 s, sys: 208 ms, total: 9.6 s
Wall time: 9.53 s
```


(in the above, I am *not* using that this is a monoid algebra, though
of course the sparsity helps).

Cheers,
                               Nicolas



---

archive/issue_comments_215484.json:
```json
{
    "body": "Hello,\n\nwell the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.\n\nThis optimization on the radical is very exciting :) But maybe it deserves a new ticket ?\n\nAlso it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:\n\n```\nsage: D4 = DescentAlgebra(QQ, 4).B()\nsage: D4.algebra_generators = D4.basis\nsage: D4.cartan_invariants_matrix()\n[1 0 0 0 0]\n[0 1 0 0 0]\n[0 1 1 0 0]\n[0 0 0 1 0]\n[0 1 1 0 1]\n```\n\n\nI am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?\n\nAladin",
    "created_at": "2015-04-27T08:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215484",
    "user": "https://github.com/avirmaux"
}
```

Hello,

well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.

This optimization on the radical is very exciting :) But maybe it deserves a new ticket ?

Also it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:

```
sage: D4 = DescentAlgebra(QQ, 4).B()
sage: D4.algebra_generators = D4.basis
sage: D4.cartan_invariants_matrix()
[1 0 0 0 0]
[0 1 0 0 0]
[0 1 1 0 0]
[0 0 0 1 0]
[0 1 1 0 1]
```


I am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?

Aladin



---

archive/issue_comments_215485.json:
```json
{
    "body": "Replying to [comment:87 virmaux]:\n> well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.\n\nOk!\n\n> This optimization on the radical is very exciting :) But maybe it deserves a new ticket ?\n\nIt definitely is for a follow up ticket. Especially since I had to do\nsome optimizations on ModulesWithBasis and friends which deserve a\nticket by themselves.\n\n> Also it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:\n> {{{\n> sage: D4 = DescentAlgebra(QQ, 4).B()\n> sage: D4.algebra_generators = D4.basis\n> sage: D4.cartan_invariants_matrix()\n> [1 0 0 0 0]\n> [0 1 0 0 0]\n> [0 1 1 0 0]\n> [0 0 0 1 0]\n> [0 1 1 0 1]\n> }}}\n> \n> I am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?\n\nFor a finite dimensional algebra with basis, it sounds quite\nreasonable to use `basis` as default implementation for\n`algebra_generators`. I believe we can leave that to the follow up\nticket.\n\nCheers,\n                              Nicolas",
    "created_at": "2015-04-27T09:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215485",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:87 virmaux]:
> well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.

Ok!

> This optimization on the radical is very exciting :) But maybe it deserves a new ticket ?

It definitely is for a follow up ticket. Especially since I had to do
some optimizations on ModulesWithBasis and friends which deserve a
ticket by themselves.

> Also it would be nice to add examples from the Descent Algebra (NCSF), but the current implementation does not contain a method algebra_generator. It is possible to hack the following way:
> {{{
> sage: D4 = DescentAlgebra(QQ, 4).B()
> sage: D4.algebra_generators = D4.basis
> sage: D4.cartan_invariants_matrix()
> [1 0 0 0 0]
> [0 1 0 0 0]
> [0 1 1 0 0]
> [0 0 0 1 0]
> [0 1 1 0 1]
> }}}
> 
> I am not sure how to make it proper, should we check in the `center` that `algebra_generator` returns something useful ? Or should we add this method in `descent_algebra.py` for every implemented basis, or should we define in the category to return the basis as default ? Or should we just make a new ticket :) ?

For a finite dimensional algebra with basis, it sounds quite
reasonable to use `basis` as default implementation for
`algebra_generators`. I believe we can leave that to the follow up
ticket.

Cheers,
                              Nicolas



---

archive/issue_comments_215486.json:
```json
{
    "body": "Replying to [comment:88 nthiery]:\n> Replying to [comment:87 virmaux]:\n> > well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.\n> \n> Ok!\n\nI would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.\n\nFranco",
    "created_at": "2015-04-27T13:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215486",
    "user": "https://github.com/saliola"
}
```

Replying to [comment:88 nthiery]:
> Replying to [comment:87 virmaux]:
> > well the code looks fine to me but I definitely think we need an outisde view on it, for example from Franco or Florent.
> 
> Ok!

I would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.

Franco



---

archive/issue_comments_215487.json:
```json
{
    "body": "Replying to [comment:90 saliola]:\n> I would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.\n\nSure thing! Thanks in advance.",
    "created_at": "2015-04-27T14:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215487",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:90 saliola]:
> I would love to take a look at the code and play around with it a bit more. I can do it by Friday, if you don't mind waiting until then.

Sure thing! Thanks in advance.



---

archive/issue_comments_215488.json:
```json
{
    "body": "Gasp, I just noticed that I put a wrong ticket number (#17696 instead of #16659) in some of the commit messages.",
    "created_at": "2015-04-27T17:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215488",
    "user": "https://github.com/nthiery"
}
```

Gasp, I just noticed that I put a wrong ticket number (#17696 instead of #16659) in some of the commit messages.



---

archive/issue_comments_215489.json:
```json
{
    "body": "Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)\n\n1. First of all, this looks great! I only have a few comments / questions.\n\n2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent? If so then I suggest the name `complete_set_of_primitive_orthogonal_idempotents`. I think this is the standard name in the literature. Maybe I'm missing something? (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)\n\n3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)\n\n4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?\n\n5. Tests: All tests passed!\n\n**Positive review** pending the change of `right` to `left` for `S_i^*`.",
    "created_at": "2015-05-01T16:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215489",
    "user": "https://github.com/saliola"
}
```

Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)

1. First of all, this looks great! I only have a few comments / questions.

2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent? If so then I suggest the name `complete_set_of_primitive_orthogonal_idempotents`. I think this is the standard name in the literature. Maybe I'm missing something? (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)

3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?

5. Tests: All tests passed!

**Positive review** pending the change of `right` to `left` for `S_i^*`.



---

archive/issue_comments_215490.json:
```json
{
    "body": "Replying to [comment:93 saliola]:\n> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)\n\nFor instance, it seems that one can iterate the formula `3 * a^2 - 2 * a^3` to lift the idempotents. See  Lemma 1.7.3 (Idempotent Refinement) of Benson's ['Representations and Cohomology I](http://books.google.ca/books/about/Representations_and_Cohomology_Volume_1.html?id=cezF63340GAC&redir_esc=y) (search for *refinement*).",
    "created_at": "2015-05-01T17:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215490",
    "user": "https://github.com/saliola"
}
```

Replying to [comment:93 saliola]:
> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

For instance, it seems that one can iterate the formula `3 * a^2 - 2 * a^3` to lift the idempotents. See  Lemma 1.7.3 (Idempotent Refinement) of Benson's ['Representations and Cohomology I](http://books.google.ca/books/about/Representations_and_Cohomology_Volume_1.html?id=cezF63340GAC&redir_esc=y) (search for *refinement*).



---

archive/issue_comments_215491.json:
```json
{
    "body": "Replying to [comment:93 saliola]:\n> Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)\n\nQuite impressed, I am!\n\n:-)\n\n> 1. First of all, this looks great! I only have a few comments / questions.\n\nThanks, and thanks for the review!\n\n> 2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent?\n\nNope; in the case of a full nxn matrix algebra (which is semisimple,\nso mod rad or not are the same), we get a single idempotent: the\nidentity; to get primitive idempotents, we would need to refine this\ntrivial decomposition into `n` orthogonal idempotents.\n\nIn general, for each simple module of dim k, we get a single\nidempotent e such that eAe is the k x k block matrix corresponding to\nthe simple module.\n\nWe haven't found a good name for those idempotents in the literature;\nsuggestions welcome!\n\n> (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)\n\nWill do!\n\n> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)\n\nIf we have a use case for it, that is if the various lifting have each\nsome specific merit, then why not. For a latter ticket indeed.\n\n> 4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?\n\nOops. Will fix now!\n\nCheers,\n                                         Nicolas",
    "created_at": "2015-05-02T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215491",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:93 saliola]:
> Check it out! I'm actually accomplishing this by my self-imposed deadline. It's rare when this happens. :-)

Quite impressed, I am!

:-)

> 1. First of all, this looks great! I only have a few comments / questions.

Thanks, and thanks for the review!

> 2. `orthogonal_idempotents_central_mod_rad`: Isn't this the same thing as a complete set of primitive orthogonal idempotent?

Nope; in the case of a full nxn matrix algebra (which is semisimple,
so mod rad or not are the same), we get a single idempotent: the
identity; to get primitive idempotents, we would need to refine this
trivial decomposition into `n` orthogonal idempotents.

In general, for each simple module of dim k, we get a single
idempotent e such that eAe is the k x k block matrix corresponding to
the simple module.

We haven't found a good name for those idempotents in the literature;
suggestions welcome!

> (If we stick with the original name, then I suggest `radical` instead of `rad`; the name is long so a few more characters won't be a problem)

Will do!

> 3. `idempotent_lift`: there are other possible lifts one could use here. Is it worth implementing some of these others and giving the user a choice? (doesn't have to be done on this ticket; just something I'd like to hear about)

If we have a use case for it, that is if the various lifting have each
some specific merit, then why not. For a latter ticket indeed.

> 4. `cartan_invariants_matrix`: in the documentation it is written that `S_i` and their adjoints `S_i^*` are representatives of the right simple modules; did you mean left for the latter?

Oops. Will fix now!

Cheers,
                                         Nicolas



---

archive/issue_comments_215492.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-02T06:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215493.json:
```json
{
    "body": "Implemented final fix requested by Franco; positive review on his behalf!\n----\nNew commits:",
    "created_at": "2015-05-02T06:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215493",
    "user": "https://github.com/nthiery"
}
```

Implemented final fix requested by Franco; positive review on his behalf!
----
New commits:



---

archive/issue_comments_215494.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-02T06:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215494",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_215495.json:
```json
{
    "body": "\n```\nOverfull \\hbox (49.85445pt too wide) in paragraph at lines 44441--44442\n\\T1/ptm/m/n/10 Bases: \\T1/pcr/m/n/10 sage.categories.category_with_axiom.Catego\nryWithAxiom_over_base_ring \n\n! LaTeX Error: Too deeply nested.\n\nSee the LaTeX manual or LaTeX Companion for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.44470 \\begin{itemize}\n                       \n? >\n! Emergency stop.\n ...                                              \n                                                  \nl.44470 \\begin{itemize}\n                       \n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on categories.log.\n```\n",
    "created_at": "2015-05-02T17:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215495",
    "user": "https://github.com/vbraun"
}
```


```
Overfull \hbox (49.85445pt too wide) in paragraph at lines 44441--44442
\T1/ptm/m/n/10 Bases: \T1/pcr/m/n/10 sage.categories.category_with_axiom.Catego
ryWithAxiom_over_base_ring 

! LaTeX Error: Too deeply nested.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.44470 \begin{itemize}
                       
? >
! Emergency stop.
 ...                                              
                                                  
l.44470 \begin{itemize}
                       
!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on categories.log.
```




---

archive/issue_comments_215496.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-02T17:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215496",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_215497.json:
```json
{
    "body": "Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).",
    "created_at": "2015-05-03T06:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215497",
    "user": "https://github.com/tscrim"
}
```

Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).



---

archive/issue_comments_215498.json:
```json
{
    "body": "Good morning Travis,\n\nReplying to [comment:99 tscrim]:\n> Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).\n\nPerfect, that's exactly what I was working on :-)\n\nGreat minds ...",
    "created_at": "2015-05-03T08:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215498",
    "user": "https://github.com/nthiery"
}
```

Good morning Travis,

Replying to [comment:99 tscrim]:
> Easiest way to fix this is probably to just pull out `SemisimpleAlgebras.FiniteDimensional.WithBasis` into a separate class (it seems big enough to warrant this anyways IMO).

Perfect, that's exactly what I was working on :-)

Great minds ...



---

archive/issue_comments_215499.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-03T08:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215500.json:
```json
{
    "body": "Done!\n\nAll long tests pass in sage/categories, and the pdf doc\ncompiles. I haven't made any change besides moving the code, and\nadding the usual file/class docstrings, lazy imports, and addition to\nthe ref manual. If someone can briefly double check those, I believe\nthis can be set back to positive review.",
    "created_at": "2015-05-03T08:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215500",
    "user": "https://github.com/nthiery"
}
```

Done!

All long tests pass in sage/categories, and the pdf doc
compiles. I haven't made any change besides moving the code, and
adding the usual file/class docstrings, lazy imports, and addition to
the ref manual. If someone can briefly double check those, I believe
this can be set back to positive review.



---

archive/issue_comments_215501.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-03T08:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215501",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_215502.json:
```json
{
    "body": "Replying to [comment:98 vbraun]:\n> {{{\n> ! LaTeX Error: Too deeply nested.\n> }}}\n\nThanks Volker for the report, and sorry for not having compiled the\npdf doc!\n\nTo reduce the risk of this happening again, I have posted a feature\nrequest for the patchbot to build and report on the pdf doc:\n\nhttps://github.com/robertwb/sage-patchbot/issues/64\n\nCheers,\n                                  Nicolas",
    "created_at": "2015-05-03T08:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215502",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:98 vbraun]:
> {{{
> ! LaTeX Error: Too deeply nested.
> }}}

Thanks Volker for the report, and sorry for not having compiled the
pdf doc!

To reduce the risk of this happening again, I have posted a feature
request for the patchbot to build and report on the pdf doc:

https://github.com/robertwb/sage-patchbot/issues/64

Cheers,
                                  Nicolas



---

archive/issue_comments_215503.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-03T11:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215503",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_215504.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-03T14:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215504",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_215505.json:
```json
{
    "body": "Thanks Franco and Volker for this final step!\n\nYeah, this is done! One more big feature of MuPAD-Combinat that is in Sage :-)",
    "created_at": "2015-05-03T20:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16422#issuecomment-215505",
    "user": "https://github.com/nthiery"
}
```

Thanks Franco and Volker for this final step!

Yeah, this is done! One more big feature of MuPAD-Combinat that is in Sage :-)
