# Issue 11642: Segmentation fault in dlx_solver

Issue created by migration from https://trac.sagemath.org/ticket/11814

Original creator: jdemeyer

Original creation time: 2011-09-19 08:59:58

Assignee: sage-combinat

CC:  slabbe


```
sage: from sage.combinat.matrices.dancing_links import dlx_solver
sage: rows = []
sage: x = dlx_solver(rows)
sage: x.search()
/usr/local/src/sage-4.7.2.alpha2/local/lib/libcsage.so(print_backtrace+0x31)[0x7f6c37015e02]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libcsage.so(sigdie+0x14)[0x7f6c37015e34]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler+0x20c)[0x7f6c37015a82]
/lib/libpthread.so.0(+0xf400)[0x7f6c3c26e400]
/usr/local/src/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/combinat/matrices/dancing_links.so(+0x738b)[0x7f6c1612f38b]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4c32)[0x7f6c3c55d842]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f6c3c55f912]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4ccb)[0x7f6c3c55d8db]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5364)[0x7f6c3c55df74]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5364)[0x7f6c3c55df74]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5a8a)[0x7f6c3c55e69a]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5364)[0x7f6c3c55df74]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5364)[0x7f6c3c55df74]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x5364)[0x7f6c3c55df74]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f6c3c55f819]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f6c3c55f912]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7f6c3c581d20]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdf)[0x7f6c3c58275f]
/usr/local/src/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(Py_Main+0xb23)[0x7f6c3c58fa23]
/lib/libc.so.6(__libc_start_main+0xe6)[0x7f6c3b897ba6]
python[0x4006e9]

------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
```



---

Comment by leif created at 2011-09-19 13:34:24

A bit more information on the platform, or did you try this on different systems?

On Ubuntu 10.04.3 x86_64 I get:

```
...
sage: sage: from sage.combinat.matrices.dancing_links import dlx_solver
==27537== Invalid read of size 4
==27537==    at 0x4EB5E83: PyObject_Free (obmalloc.c:931)
==27537==    by 0x4EDBE00: unicode_dealloc (unicodeobject.c:369)
==27537==    by 0x4E9C8E0: frame_dealloc (frameobject.c:420)
==27537==    by 0x4F1562E: PyEval_EvalCodeEx (ceval.c:2979)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==  Address 0x6156020 is 2,256 bytes inside a block of size 4,400 free'd
==27537==    at 0x4C27058: realloc (vg_replace_malloc.c:525)
==27537==    by 0x9F13E6A: xrealloc (xmalloc.c:74)
==27537==    by 0x9F1442E: add_history (history.c:302)
==27537==    by 0x9F1761F: read_history_range (histfile.c:270)
==27537==    by 0x9CE3089: read_history_file (readline.c:102)
==27537==    by 0x4F13E19: PyEval_EvalFrameEx (ceval.c:3706)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4E9DC2A: function_call (funcobject.c:524)
==27537== 
==27537== Invalid read of size 4
==27537==    at 0x4EB5E83: PyObject_Free (obmalloc.c:931)
==27537==    by 0x4E68C66: freechildren (node.c:135)
==27537==    by 0x4E68FAD: PyNode_Free (node.c:123)
==27537==    by 0x4F370C8: PyParser_ASTFromString (pythonrun.c:1439)
==27537==    by 0x4F37221: Py_CompileStringFlags (pythonrun.c:1382)
==27537==    by 0x4F0CE6B: builtin_compile (bltinmodule.c:546)
==27537==    by 0x4F13E19: PyEval_EvalFrameEx (ceval.c:3706)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4E9DB2E: function_call (funcobject.c:524)
==27537==    by 0x4E741A1: PyObject_Call (abstract.c:2492)
==27537==    by 0x4E868BC: instancemethod_call (classobject.c:2579)
==27537==    by 0x4E741A1: PyObject_Call (abstract.c:2492)
==27537==  Address 0xa73d020 is not stack'd, malloc'd or (recently) free'd
==27537== 
sage: sage: rows = []
sage: sage: x = dlx_solver(rows)
sage: sage: x.search()
==27537== Conditional jump or move depends on uninitialised value(s)
==27537==    at 0x2F2C3281: __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_9search(_object*, _object*) (dancing_links_c.h:75)
==27537==    by 0x4F13B46: PyEval_EvalFrameEx (ceval.c:3690)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F15A21: PyEval_EvalCode (ceval.c:522)
==27537==    by 0x4F14510: PyEval_EvalFrameEx (ceval.c:4401)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537== 
==27537== Use of uninitialised value of size 8
==27537==    at 0x2F2C32AA: __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_9search(_object*, _object*) (dancing_links_c.h:76)
==27537==    by 0x4F13B46: PyEval_EvalFrameEx (ceval.c:3690)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F15A21: PyEval_EvalCode (ceval.c:522)
==27537==    by 0x4F14510: PyEval_EvalFrameEx (ceval.c:4401)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537== 
==27537== Conditional jump or move depends on uninitialised value(s)
==27537==    at 0x2F2C32A8: __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_9search(_object*, _object*) (dancing_links_c.h:76)
==27537==    by 0x4F13B46: PyEval_EvalFrameEx (ceval.c:3690)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F15A21: PyEval_EvalCode (ceval.c:522)
==27537==    by 0x4F14510: PyEval_EvalFrameEx (ceval.c:4401)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537== 
==27537== Conditional jump or move depends on uninitialised value(s)
==27537==    at 0x2F2C3291: __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_9search(_object*, _object*) (dancing_links_c.h:76)
==27537==    by 0x4F13B46: PyEval_EvalFrameEx (ceval.c:3690)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F15A21: PyEval_EvalCode (ceval.c:522)
==27537==    by 0x4F14510: PyEval_EvalFrameEx (ceval.c:4401)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537== 
==27537== Invalid read of size 4
==27537==    at 0x2F2C328C: __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_9search(_object*, _object*) (dancing_links_c.h:76)
==27537==    by 0x4F13B46: PyEval_EvalFrameEx (ceval.c:3690)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F15A21: PyEval_EvalCode (ceval.c:522)
==27537==    by 0x4F14510: PyEval_EvalFrameEx (ceval.c:4401)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==    by 0x4F14CEE: PyEval_EvalFrameEx (ceval.c:3792)
==27537==    by 0x4F15947: PyEval_EvalCodeEx (ceval.c:2968)
==27537==    by 0x4F13BF3: PyEval_EvalFrameEx (ceval.c:3802)
==27537==  Address 0x30 is not stack'd, malloc'd or (recently) free'd
==27537== 
/tmp/Sage/sage-4.7.2.alpha2/local/lib/libcsage.so(print_backtrace+0x31)[0xbfa6817]
/tmp/Sage/sage-4.7.2.alpha2/local/lib/libcsage.so(sigdie+0x14)[0xbfa6849]
/tmp/Sage/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler+0x20e)[0xbfa6474]
/lib/libpthread.so.0(+0xf8f0)[0x52018f0]
/tmp/Sage/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/combinat/matrices/dancing_links.so(+0x828c)[0x2f2c328c]
/tmp/Sage/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4af7)[0x4f13b47]
... (same backtrace)
```



---

Comment by boothby created at 2013-10-16 06:32:32

Amusingly I found this in `add_rows`


```
        The following example would crash in Sage's debug version
        from :trac:`13864` prior to the fix from :trac:`13822`::

            sage: from sage.combinat.matrices.dancing_links import dlx_solver
            sage: x = dlx_solver([])          # indirect doctest
            sage: x.get_solution()
            []
```



---

Comment by slabbe created at 2015-07-24 13:03:13

I just pushed a branch (based on 6.6.rc2) where the segmentation fault is catch using sig_on and sig_off. 

Do we want to also solve the segmentation fault itself in this ticket?
----
New commits:


---

Comment by git created at 2015-07-24 13:13:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-07-24 13:52:05

Replying to [comment:10 slabbe]:
> I just pushed a branch (based on 6.6.rc2) where the segmentation fault is catch using sig_on and sig_off. 
> 
> Do we want to also solve the segmentation fault itself in this ticket?

First of all, I would absolutely never doctest segfaults unless you know that it's safe to do so.

I don't mind just adding the `sig_on`/`sig_off` in this ticket provided that you create a new ticket for the segmentation fault itself.


---

Comment by jdemeyer created at 2015-07-24 13:52:29

Also: add your author name please.


---

Comment by git created at 2015-07-25 07:40:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2015-07-25 07:42:45

Changing status from new to needs_review.


---

Comment by slabbe created at 2015-07-25 07:46:36

Replying to [comment:12 jdemeyer]:
> I don't mind just adding the `sig_on`/`sig_off` in this ticket provided that you create a new ticket for the segmentation fault itself.

I just created #18950 for the segmentation fault itself.


---

Comment by slabbe created at 2015-07-25 09:15:16

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-07-25 09:21:24

Why needs_work?


---

Comment by git created at 2015-07-25 09:33:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2015-07-25 09:36:51

Replying to [comment:18 jdemeyer]:
> Why needs_work?

Because I found the problem and was about to push the solution here. #18950 will not be necessary.


---

Comment by slabbe created at 2015-07-25 09:38:35

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2015-07-25 09:44:18

I also removed the `dumps` method which was broken and useless:


```
sage: x = dlx_solver([])                                                
sage: x.dumps()                                          
Traceback (most ...
...              
AttributeError: 'list' object has no attribute 'dumps'   
```


I was about to remove `make_dlxwrapper` from the sage namespace, but decided it belongs to another ticket.


---

Comment by jdemeyer created at 2015-07-25 10:10:35

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-07-25 10:10:35

The initialization of `self.rows` is a pure Python-level initialization, so I recommend to move it to `__init__` instead of `__cinit__`.


---

Comment by jdemeyer created at 2015-07-25 11:02:16

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-07-25 11:02:16

I took the opportunity to fix the initialization even more and really clean up the whole file.
----
New commits:


---

Comment by slabbe created at 2015-07-25 11:10:14

Great! I was feeling those `Py_INCREF` were not necessary and old fashion. You were the good guy to clean/update that part. I removed the `cimport Integer` which was unused.

There is one doctest failing in `combinat/tiling.py` because of the `__str__ -> __repr__` change. I did not fix the doctest because I wonder if showing a list of list is really what we want for the `__repr__`? Maybe a repr saying `Dancing links of 34 rows` would be better together with a method `rows` returning the rows?
----
New commits:


---

Comment by slabbe created at 2015-07-25 11:21:58

Note: I started to fix the repr thing. Will push something soon.


---

Comment by jdemeyer created at 2015-07-25 11:44:44

I would prefer to see the rows in `__repr__`, so maybe `Dancing links of 2 rows [0,1,2], [0,2]`.

Note: the only reason I changed it is because it looked strange to me that the class had a `__str__` method but not a `__repr__`.


---

Comment by git created at 2015-07-25 11:47:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2015-07-25 11:51:56

With the last commit we now have:


```
sage: from sage.games.quantumino import QuantuminoSolver
sage: q = QuantuminoSolver(0)                           
sage: T = q.tiling_solver()                             
sage: T.dlx_solver()                                    
Dancing links solver for 96 columns and 5484 rows
```


I think it is better like this instead of printing the whole list of rows.


---

Comment by jdemeyer created at 2015-07-25 11:56:14

There is a doctest failure in `src/sage/games/quantumino.py` related to the printing.


---

Comment by git created at 2015-07-25 12:06:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2015-07-25 12:16:44

Just to say that I agree with the changes made by Jeroen in this ticket.


---

Comment by jdemeyer created at 2015-07-25 12:23:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-26 23:48:39

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-07-26 23:48:39

When building with `SAGE_DEBUG=yes`:

```
sage: from sage.combinat.matrices.dancing_links import dlx_solver ## line 163 ##
sage: x = dlx_solver([])          # indirect doctest ## line 164 ##
python: /mnt/disk/home/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/combinat/matrices/dancing_links_c.h:217: void dancing_links::setup_columns(): Assertion `nr_columns > 0' failed.
------------------------------------------------------------------------
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/ext/interrupt/interrupt.so(+0x3747)[0x7f012e49a747]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/ext/interrupt/interrupt.so(+0x3902)[0x7f012e49a902]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/ext/interrupt/interrupt.so(+0x3257)[0x7f012e49a257]
/lib64/libpthread.so.0(+0x10430)[0x7f013a8b8430]
/lib64/libc.so.6(gsignal+0x38)[0x7f0139e0d9c8]
/lib64/libc.so.6(abort+0x16a)[0x7f0139e0f65a]
/lib64/libc.so.6(+0x2d187)[0x7f0139e06187]
/lib64/libc.so.6(+0x2d232)[0x7f0139e06232]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(_ZN13dancing_links13setup_columnsEv+0x36)[0x7f00f9ec3fe8]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(_ZN13dancing_links8add_rowsESt6vectorIS0_IiSaIiEESaIS2_EE+0x153)[0x7f00f9ec4335]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x1301a)[0x7f00f9ebf01a]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x121c9)[0x7f00f9ebe1c9]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x161b6)[0x7f00f9ec21b6]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x16378)[0x7f00f9ec2378]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x1091e)[0x7f00f9ebc91e]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x106dd)[0x7f00f9ebc6dd]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(+0xdf3ed)[0x7f013aba33ed]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x160bb)[0x7f00f9ec20bb]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x13c13)[0x7f00f9ebfc13]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/matrices/dancing_links.so(+0x13ac4)[0x7f00f9ebfac4]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(+0x15a60b)[0x7f013ac1e60b]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c85)[0x7f013ac19290]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x113f)[0x7f013ac1bd59]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(PyEval_EvalCode+0x41)[0x7f013ac115e6]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(+0x15d369)[0x7f013ac21369]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x432d)[0x7f013ac15938]
/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x113f)[0x7f013ac1bd59]
```



---

Comment by jdemeyer created at 2015-07-27 07:41:33

Sébastien, I won't have time in the coming month to look at this. If other people want to fix and to review, go ahead...


---

Comment by slabbe created at 2015-07-27 19:51:03

No problem Jeroen!

So how can I reproduce the problem? Like this?


```
make distclean
export SAGE_DEBUG="yes"
make
sage -t src/sage/combinat/matrices/dancing_links.pyx
```


or is there an easier way? Can I just recompile some packages (python and cython and gcc?) packages with `SAGE_DEBUG=yes`? Does `sage -f <package>` considers the `SAGE_DEBUG` flag?


---

Comment by vbraun created at 2015-07-27 19:57:11

You need to compile Python and everything that links to it, the only sure way is starting with make distclean imho.


---

Comment by git created at 2015-07-28 19:13:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slabbe created at 2015-07-28 19:15:28

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2015-07-28 22:47:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-29 09:22:41

Resolution: fixed
