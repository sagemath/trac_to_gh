# Issue 13714: systemwide install of cremona database permission issues

Issue created by migration from Trac.

Original creator: was

Original creation time: 2013-01-06 19:05:23

Assignee: was

CC:  cremona ohanar

I did a clean install of sage as root, then installed the cremona database optional package, but other users can't use it, because it is readable only by the owner (root):

```
root`@`01salvus:/usr/local/sage-5.3# ls -lh data/
total 24K
drwxr-xr-x  2 root root 4.0K Sep 28 10:08 conway_polynomials
drwxrwxr-x  2 root root 4.0K Jan  6 11:03 cremona
drwxr-xr-x  2 root root 4.0K Sep 28 10:15 ellcurves
drwxrwxr-x 28 root root 4.0K Sep 28 10:16 extcode
drwxr-xr-x  2 root root 4.0K Apr  4  2012 graphs
drwxr-xr-x  2 root root 4.0K Feb 10  2010 reflexive_polytopes
root`@`01salvus:/usr/local/sage-5.3# ls -lh data/cremona/
total 356M
-rw------- 1 root root 347M Jan  6 11:03 cremona.db
-rw-r--r-- 1 root root 8.2M Sep 28 10:15 cremona_mini.db
```



---

Comment by cremona created at 2013-01-06 19:40:12

Hmm, I do this all the time with no problem, but what I do is build
and install extra spkgs as me (not root), then copy all to
/usr/local/sage, then run sage as root, then change all ownerships and
permissions.

However it would be easy to change the line in the spkg-install which
copies that .db file into SAGE_DATA so that it is world-readable.  It
probably all reults in the line "umask 077" in my own .bashrc file.


---

Comment by was created at 2013-01-06 19:55:27

Replying to [comment:1 cremona]:
> Hmm, I do this all the time with no problem, but what I do is build
> and install extra spkgs as me (not root), then copy all to
> /usr/local/sage, then run sage as root, then change all ownerships and
> permissions.

Well I had absolutely no idea when I built/installed Sage that I would be installing the cremona database :-). 

> However it would be easy to change the line in the spkg-install which
> copies that .db file into SAGE_DATA so that it is world-readable.  It
> probably all results in the line "umask 077" in my own .bashrc file.

That would make a lot of sense to me. 

William


---

Comment by cremona created at 2013-01-06 20:38:54

Deal:  try the new spkg at #13547, where there is a new spkg which has been there since October waiting for a review.  I just changed 1 bit (approx) in it so that the file cremona.db now has permissions 644 (was 600), and that should work.

A positive review for #13547 would also be welcome.


---

Comment by jdemeyer created at 2013-04-22 20:24:11

Resolution: duplicate
