# Issue 18357: Add additional mutation options for clusters

archive/issues_018357.json:
```json
{
    "body": "CC:  egunawan etn40ff\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18594\n\n",
    "created_at": "2015-06-02T22:19:57Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Add additional mutation options for clusters",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18357",
    "user": "aram.dermenjian"
}
```
CC:  egunawan etn40ff



Issue created by migration from https://trac.sagemath.org/ticket/18594





---

archive/issue_comments_249191.json:
```json
{
    "body": "Changing keywords from \"\" to \"SageDays64.5, clusters, mutation, seeds, quiver\".",
    "created_at": "2015-06-02T22:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249191",
    "user": "aram.dermenjian"
}
```

Changing keywords from "" to "SageDays64.5, clusters, mutation, seeds, quiver".



---

archive/issue_comments_249192.json:
```json
{
    "body": "Changing priority from major to trivial.",
    "created_at": "2015-06-02T22:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249192",
    "user": "aram.dermenjian"
}
```

Changing priority from major to trivial.



---

archive/issue_comments_249193.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-06-02T22:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249193",
    "user": "aram.dermenjian"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_249194.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2015-06-02T22:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249194",
    "user": "aram.dermenjian"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_249195.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-03T16:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249195",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249196.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-03T16:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249196",
    "user": "aram.dermenjian"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249197.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-03T21:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249197",
    "user": "VivianePons"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249198.json:
```json
{
    "body": "I have looked at the documentation and fixed a few things. Here are some Todos:\n\n* Please fill the output section of mutation_analysis \n* Please document the new behavior of the mutate method of a quiver (accepts string) and add examples and tests\n\nAfter this is done, I can finish reviewing the documentation. I would still need someone who knows more about quivers and cluster algebras to check the mathematical content of the methods (especially mutation_analysis in cluster_seed.py and number_of_edges in quiver.py).",
    "created_at": "2015-06-03T21:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249198",
    "user": "VivianePons"
}
```

I have looked at the documentation and fixed a few things. Here are some Todos:

* Please fill the output section of mutation_analysis 
* Please document the new behavior of the mutate method of a quiver (accepts string) and add examples and tests

After this is done, I can finish reviewing the documentation. I would still need someone who knows more about quivers and cluster algebras to check the mathematical content of the methods (especially mutation_analysis in cluster_seed.py and number_of_edges in quiver.py).



---

archive/issue_comments_249199.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-03T21:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249199",
    "user": "VivianePons"
}
```

New commits:



---

archive/issue_comments_249200.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-04T23:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249200",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249201.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-05T20:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249201",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249202.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T03:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249202",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249203.json:
```json
{
    "body": "Changing priority from trivial to major.",
    "created_at": "2015-06-11T03:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249203",
    "user": "aram.dermenjian"
}
```

Changing priority from trivial to major.



---

archive/issue_comments_249204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T17:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249205.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T14:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249205",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249206.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-04T11:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249206",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249207.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-04T11:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249207",
    "user": "aram.dermenjian"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249208.json:
```json
{
    "body": "Hi,\n\nhere are a few first comments quickly glancing through the file, no proper review:\n\n* please update the author field here appropriately (using full names)\n* update #18615 to duplicate / needs review.\n* update the authors according to http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files\n* update the doc strings according to http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n* `_sanitize_init_vars` is not documented. In general, all methods, even internals, needs proper docstrings and doctests. For that, please run `sage --coverage <file>` to see the coverage of methods there.\n\nCheers, Christian",
    "created_at": "2015-07-05T00:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249208",
    "user": "stumpc5"
}
```

Hi,

here are a few first comments quickly glancing through the file, no proper review:

* please update the author field here appropriately (using full names)
* update #18615 to duplicate / needs review.
* update the authors according to http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files
* update the doc strings according to http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings
* `_sanitize_init_vars` is not documented. In general, all methods, even internals, needs proper docstrings and doctests. For that, please run `sage --coverage <file>` to see the coverage of methods there.

Cheers, Christian



---

archive/issue_comments_249209.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-05T02:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249209",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249210.json:
```json
{
    "body": "All the fields have been updated as you wanted. For the author field, I didn't know when you and Gregg did the original version and so I didn't put a date for that and instead wrote initial version. If you want, I can go ahead and add it if you provide the date? (Or Gregg provides the date)",
    "created_at": "2015-07-05T03:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249210",
    "user": "aram.dermenjian"
}
```

All the fields have been updated as you wanted. For the author field, I didn't know when you and Gregg did the original version and so I didn't put a date for that and instead wrote initial version. If you want, I can go ahead and add it if you provide the date? (Or Gregg provides the date)



---

archive/issue_comments_249211.json:
```json
{
    "body": "Some more comments:\n\n* Looking at the diff's\n\n  `git diff develop src/sage/combinat/cluster_algebra_quiver/quiver.py`\n\n  I see that you introduce tons of trailing whitespaces (both in `quiver.py` and in `cluster_seed.py`)\n\n* `quiver.py` has changed without acknowledgements in the author fields.\n\n* all tests pass, great!\n\n* 100% coverage, great!\n\n* How do you ensure that `first_sink` and `first_source` actually find the *first*, and what is the **first** (since the vertices are not necessarily labelled by something in a total order)? Do you mean to use `a_sink` and `a_source`?\n\nI don't have the time these days to actually play with the code, but I hope (and expect) that you provided well explained and good doctests! (That at least seems to be the case in the few examples I looked at.) So from my side, this is ready to go.\n\nOn the other hand, I would like to have Salvatore and/or Dylan to also look at it again, since they will be modifying the mutation methods afterwards...\n\nCheers, Christian",
    "created_at": "2015-07-10T16:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249211",
    "user": "stumpc5"
}
```

Some more comments:

* Looking at the diff's

  `git diff develop src/sage/combinat/cluster_algebra_quiver/quiver.py`

  I see that you introduce tons of trailing whitespaces (both in `quiver.py` and in `cluster_seed.py`)

* `quiver.py` has changed without acknowledgements in the author fields.

* all tests pass, great!

* 100% coverage, great!

* How do you ensure that `first_sink` and `first_source` actually find the *first*, and what is the **first** (since the vertices are not necessarily labelled by something in a total order)? Do you mean to use `a_sink` and `a_source`?

I don't have the time these days to actually play with the code, but I hope (and expect) that you provided well explained and good doctests! (That at least seems to be the case in the few examples I looked at.) So from my side, this is ready to go.

On the other hand, I would like to have Salvatore and/or Dylan to also look at it again, since they will be modifying the mutation methods afterwards...

Cheers, Christian



---

archive/issue_comments_249212.json:
```json
{
    "body": "Okay, Salvatore and Dylan had their chance. Once you treated my suggestions above, I will give it a positive review.",
    "created_at": "2015-07-27T15:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249212",
    "user": "stumpc5"
}
```

Okay, Salvatore and Dylan had their chance. Once you treated my suggestions above, I will give it a positive review.



---

archive/issue_comments_249213.json:
```json
{
    "body": "`@`Christian\nI just got to this after dealing with some other stuff. Are you in a hurry to give a positive review or do I still have some time? It will take me few days to go over all the changes being proposed\nS.",
    "created_at": "2015-07-28T16:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249213",
    "user": "etn40ff"
}
```

`@`Christian
I just got to this after dealing with some other stuff. Are you in a hurry to give a positive review or do I still have some time? It will take me few days to go over all the changes being proposed
S.



---

archive/issue_comments_249214.json:
```json
{
    "body": "I am not in a hurry -- it's only that Gregg and me are at the same conference, and Gregg would like it to be done soon...",
    "created_at": "2015-07-28T16:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249214",
    "user": "stumpc5"
}
```

I am not in a hurry -- it's only that Gregg and me are at the same conference, and Gregg would like it to be done soon...



---

archive/issue_comments_249215.json:
```json
{
    "body": "I cant promise I'll be quick but I'll try my best. Shoud the two of you feel I\nam taking too long just drop me an e-mail.",
    "created_at": "2015-07-28T16:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249215",
    "user": "etn40ff"
}
```

I cant promise I'll be quick but I'll try my best. Shoud the two of you feel I
am taking too long just drop me an e-mail.



---

archive/issue_comments_249216.json:
```json
{
    "body": "Hi Salvatore, take your time since I'm busy with the conference this week.  But if possible I would like this ticket to be closed next week or so, so that others from the Sage Days will feel more free to post their tickets (since there might be lots of rebases otherwise).\n\nAlso several people said they'd be able to contribute more to sage once clusters can have any labels.",
    "created_at": "2015-07-30T12:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249216",
    "user": "gmoose05"
}
```

Hi Salvatore, take your time since I'm busy with the conference this week.  But if possible I would like this ticket to be closed next week or so, so that others from the Sage Days will feel more free to post their tickets (since there might be lots of rebases otherwise).

Also several people said they'd be able to contribute more to sage once clusters can have any labels.



---

archive/issue_comments_249217.json:
```json
{
    "body": "Additionally, I was wondering what the status of your ticket with Dylan for adding g-vectors to cluster seed.  We tried to design this ticket to play nicely with yours based on our discussions and code sharing at sage days.\n\nCheers, Gregg",
    "created_at": "2015-07-30T12:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249217",
    "user": "gmoose05"
}
```

Additionally, I was wondering what the status of your ticket with Dylan for adding g-vectors to cluster seed.  We tried to design this ticket to play nicely with yours based on our discussions and code sharing at sage days.

Cheers, Gregg



---

archive/issue_comments_249218.json:
```json
{
    "body": "sorry not \"adding g-vectors\" but the functionalities you demoed",
    "created_at": "2015-07-30T12:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249218",
    "user": "gmoose05"
}
```

sorry not "adding g-vectors" but the functionalities you demoed



---

archive/issue_comments_249219.json:
```json
{
    "body": "i have corrected some problems in the doc\n----\nNew commits:",
    "created_at": "2015-07-30T12:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249219",
    "user": "chapoton"
}
```

i have corrected some problems in the doc
----
New commits:



---

archive/issue_comments_249220.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-21T05:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249220",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249221.json:
```json
{
    "body": "I just uploaded a new version:\n\n1) the boolean flags that were at the end of __init__ are now instead handled by the 'use' commands that were already coded.  \n\nThis required other changes to the __init__ command and examples accordingly.\n\n2) Based on Salvatore Stella's feedback, the argument of set_c_matrix() has a new name and the command mutations() has been rewritten to give an error message instead of nothing when mutations aren't being tracked.\n\nLet me know if there are other big changes that should be made before a positive review.\n\nGregg",
    "created_at": "2015-08-21T05:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249221",
    "user": "gmoose05"
}
```

I just uploaded a new version:

1) the boolean flags that were at the end of __init__ are now instead handled by the 'use' commands that were already coded.  

This required other changes to the __init__ command and examples accordingly.

2) Based on Salvatore Stella's feedback, the argument of set_c_matrix() has a new name and the command mutations() has been rewritten to give an error message instead of nothing when mutations aren't being tracked.

Let me know if there are other big changes that should be made before a positive review.

Gregg



---

archive/issue_comments_249222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-21T11:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249222",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249223.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-03T16:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249223",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249224.json:
```json
{
    "body": "If everyone agrees that the discussed problems with the stuff implemented here can and will be fixed within finite time, I will give this ticket a positive review in order to enable the SageDays participants to submit further work.",
    "created_at": "2015-09-03T18:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249224",
    "user": "stumpc5"
}
```

If everyone agrees that the discussed problems with the stuff implemented here can and will be fixed within finite time, I will give this ticket a positive review in order to enable the SageDays participants to submit further work.



---

archive/issue_comments_249225.json:
```json
{
    "body": "I actually would also be in favour of adding a list of the raised issues concerning this tickets in order to have it written down for future references.",
    "created_at": "2015-09-03T18:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249225",
    "user": "stumpc5"
}
```

I actually would also be in favour of adding a list of the raised issues concerning this tickets in order to have it written down for future references.



---

archive/issue_comments_249226.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-08T04:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249226",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249227.json:
```json
{
    "body": "For posterity, here is a list of concerns that were raised by Salvatore Stella and Christian Stump regarding the cluster_seed.py file.\n\nThese should be taken care of in a future ticket:\n\n\n* There is a lot of duplicated information in the data structures for\n  ClusterSeed. For example, the mutable part of the B matrix is stored at least\n  in _M, _B, _BC, and as part of the data structure of _quiver. Similarly\n  c-vectors are stored both in _BC and in _C. \n\n  NOTE: This is currently done to ensure backwards compatibility.  In a future ticket warnings will be set-up and then the old data structures will be phased out.\n\n\n* In the initialization code there is a jungle of if statements. For example\n  the lines in the __init__ command where self._G is defined could instead be\n\n  try:\n      self._G = data.g_matrix()\n  except:\n      pass\n\n  while data.g_matrix() should take care of failing gracefully when the g-matrix\n  can't be computed. \n\n* Did you test how much slower and how much more space-demanding it is, for example, \n  to keep track of c-matrices and g-matrices vs not keeping track of them? If the difference is not noticeable (and we think it will not be) it may be just better to always keep track of them,\n  simplify the code and spare the user few boolean flags.\n\n  NOTE: To be able to test whether or not this would speed up computations or free up space, this ticket implemented boolean flags as internal data that allow the user to keep track of less data as one mutates.  After this is successfully merged into sage, we will keep track of whether this improves users' flexibility and computational speed.  If it does not, we can revert to a version with less control and less overhead where all data is kept track of as we mutate.\n\n* Similarly the various use_* functions (and few other bits and pieces) should\n  never allow for inconsistent data.  On the one hand it would not be mathematically correct, on the other it  saves a lot of coding time and execution time because one can assume that the\n  data structure is consistent and avoid all the checks that are repeatedly done\n  right now.\n\n  NOTE: This is currently done to ensure backwards compatibility with commands like reset_cluster and set_cluster.  In these commands, the user can set cluster variables directly but in the new improved data structure, sage keeps track of g-vectors and F-polynomials instead.  This is computationally better because Sage works faster with polynomials than rational functions.  But at the moment, it would be difficult for the user to set F-polynomials directly or to have sage parse a user-chosen cluster into F-polynomials and g-vectors.\n\n  NOTE: A future ticket by Salvatore Stella and Dylan Rupel will work directly with g-vectors and F-polynomials and would allow this parsing to occur.\n\n\n* Is _sanitize_init_vars the same as (or similar to) sage.structure.parent.normalize_names ?\n  If so it might be better to remove redundant code.\n\n  NOTE: I checked this, and I do not believe they are since _sanitize_init_vars would also allow more complicated names like allowing [1,2,5] as a variable name which would be common in cluster algebra theory where Plucker coordinates are cluster variables and have such names.\n\n* cluster_index should take as input a cluster variable not a string and it\n  should actually raise an error if the input can't be cast to the right type\n  automatically.\n\n\nGregg",
    "created_at": "2015-09-15T20:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249227",
    "user": "gmoose05"
}
```

For posterity, here is a list of concerns that were raised by Salvatore Stella and Christian Stump regarding the cluster_seed.py file.

These should be taken care of in a future ticket:


* There is a lot of duplicated information in the data structures for
  ClusterSeed. For example, the mutable part of the B matrix is stored at least
  in _M, _B, _BC, and as part of the data structure of _quiver. Similarly
  c-vectors are stored both in _BC and in _C. 

  NOTE: This is currently done to ensure backwards compatibility.  In a future ticket warnings will be set-up and then the old data structures will be phased out.


* In the initialization code there is a jungle of if statements. For example
  the lines in the __init__ command where self._G is defined could instead be

  try:
      self._G = data.g_matrix()
  except:
      pass

  while data.g_matrix() should take care of failing gracefully when the g-matrix
  can't be computed. 

* Did you test how much slower and how much more space-demanding it is, for example, 
  to keep track of c-matrices and g-matrices vs not keeping track of them? If the difference is not noticeable (and we think it will not be) it may be just better to always keep track of them,
  simplify the code and spare the user few boolean flags.

  NOTE: To be able to test whether or not this would speed up computations or free up space, this ticket implemented boolean flags as internal data that allow the user to keep track of less data as one mutates.  After this is successfully merged into sage, we will keep track of whether this improves users' flexibility and computational speed.  If it does not, we can revert to a version with less control and less overhead where all data is kept track of as we mutate.

* Similarly the various use_* functions (and few other bits and pieces) should
  never allow for inconsistent data.  On the one hand it would not be mathematically correct, on the other it  saves a lot of coding time and execution time because one can assume that the
  data structure is consistent and avoid all the checks that are repeatedly done
  right now.

  NOTE: This is currently done to ensure backwards compatibility with commands like reset_cluster and set_cluster.  In these commands, the user can set cluster variables directly but in the new improved data structure, sage keeps track of g-vectors and F-polynomials instead.  This is computationally better because Sage works faster with polynomials than rational functions.  But at the moment, it would be difficult for the user to set F-polynomials directly or to have sage parse a user-chosen cluster into F-polynomials and g-vectors.

  NOTE: A future ticket by Salvatore Stella and Dylan Rupel will work directly with g-vectors and F-polynomials and would allow this parsing to occur.


* Is _sanitize_init_vars the same as (or similar to) sage.structure.parent.normalize_names ?
  If so it might be better to remove redundant code.

  NOTE: I checked this, and I do not believe they are since _sanitize_init_vars would also allow more complicated names like allowing [1,2,5] as a variable name which would be common in cluster algebra theory where Plucker coordinates are cluster variables and have such names.

* cluster_index should take as input a cluster variable not a string and it
  should actually raise an error if the input can't be cast to the right type
  automatically.


Gregg



---

archive/issue_comments_249228.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-09-17T09:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249228",
    "user": "stumpc5"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249229.json:
```json
{
    "body": "We gonna move forward!",
    "created_at": "2015-09-17T09:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249229",
    "user": "stumpc5"
}
```

We gonna move forward!



---

archive/issue_comments_249230.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-09-18T13:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18357#issuecomment-249230",
    "user": "vbraun"
}
```

Resolution: fixed
