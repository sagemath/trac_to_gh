# Issue 10460: Coercion and category framework for modules

Issue created by migration from Trac.

Original creator: SimonKing

Original creation time: 2010-12-22 09:20:06

Assignee: robertwb

CC:  vbraun novoselt jpflori

Keywords: coercion, category framework, modules

Currently, modules in Sage do not use the category framework and are based on the old coercion model. Moreover, some coercions go wrong:

Without my patch, we have

```
sage: V3 = QQ^3
sage: M = V3 / [This is the Trac macro *1,2,3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2,3-macro)
sage: V2 = QQ^2
sage: N = V3 / [This is the Trac macro *1,1,1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,1,1-macro)
# The quotient maps are of course coercions
sage: f3M = M.coerce_map_from(V3)
sage: f3N = N.coerce_map_from(V3)
# The following is a bug...
sage: V2.has_coerce_map_from(N)
True
sage: M.has_coerce_map_from(V2)
True
sage: N.has_coerce_map_from(V2)
True
#... because the composition of coercion
# from N to V2 to M should be a coercion,
# but it isn't:
sage: M.has_coerce_map_from(N)
False
# Moreover, we obtain a non-commuting triangle of
# coercions:
sage: fM2 = V2.coerce_map_from(M)
sage: fN2 = V2.coerce_map_from(N)
sage: [fM2(f3M(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1/3, -2/3)]
sage: [fN2(f3N(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1, -1)]
```


Comparison goes wrong as well without my patch:

```
sage: V2==M
True
sage: M==V2
False
```


My patch removes the coercion between abstract module `V^2` and the quotient modules. Moreover, we then have `V2!=M`.

I did not implement the "advanced" bits of coercion yet, namely the construction functor and pushout magic. This will be dealt with on a different ticket.

Note that what I propose here goes beyond what is done "on the fly" in #9713, whose main purpose isn't coercion anyway. Moreover, my patch here does hardly touch the stuff that is really important for #9713. Hence, I suggest to add the ticket here to the long list of dependencies for #9713.


---

Attachment

Implement coercion and category framework for free modules, submodules, quotient modules. Depends on #10496


---

Comment by SimonKing created at 2010-12-22 09:26:07

For the patchbot/release manager:

depends on #10496

Ready for review!


---

Comment by SimonKing created at 2010-12-22 09:26:07

Changing status from new to needs_review.


---

Comment by SimonKing created at 2010-12-22 09:26:07

Changing type from PLEASE CHANGE to defect.


---

Comment by vbraun created at 2010-12-22 11:19:20

One of the things that I did in #9713 was to replace `sage.structure.parent_gens.ParentWithAdditiveAbelianGens` with `sage.structure.parent.Parent` as the base class of `Module`. At the top of `sage/structure/parent_gens.pyx` it says that 

```
   This class is being deprecated, see
   ``sage.structure.parent.Parent`` and
   ``sage.structure.category_object.CategoryObject`` for the new
   model.
```

But your patch does not change the Module base class. So I'm a bit confused about what the right way of doing things is.


---

Comment by vbraun created at 2010-12-22 11:19:20

Changing status from needs_review to needs_info.


---

Comment by SimonKing created at 2010-12-22 11:29:05

Replying to [comment:2 vbraun]:
> At the top of `sage/structure/parent_gens.pyx` it says that 
> {{{
>    This class is being deprecated, see
>    ``sage.structure.parent.Parent`` and
>    ``sage.structure.category_object.CategoryObject`` for the new
>    model.
> }}}
> But your patch does not change the Module base class.

Thank you, I simply wasn't aware of the deprecation. Changing it now, and if tests pass I'll update my patch.


---

Comment by SimonKing created at 2010-12-22 11:34:45

I just noticed that `ParentWithBase` is requested in various other files. So, it will take a while until I can replace `ParentWithAdditiveAbelianGens` by `Parent`.


---

Comment by SimonKing created at 2010-12-22 11:34:45

Changing status from needs_info to needs_work.


---

Comment by pbruin created at 2014-06-21 13:13:50

I am trying to finish this ticket.  I currently have a branch that passes all doctests, but I am still improving some of the code and adding documentation.


---

Comment by pbruin created at 2014-06-21 23:15:58

OK, ready for review.  There is still some future work to be done:
- move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
  1. `sage.coding.linear_code.LinearCode`
  2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
  3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
  4. `sage.structure.formal_sum.FormalSums`
- make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
I think it is better to do these in separate tickets.


---

Comment by pbruin created at 2014-06-21 23:15:58

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-07-23 21:10:25

`sage.coding.linear_code.LinearCode` is taken care of in #16644.


---

Comment by git created at 2014-08-15 11:08:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-27 17:04:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-04 22:18:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-12-08 17:17:22

Could you add a little documentation about the `coercion_reverse` thing?
Or rather, move it in the actual code, rather than in comments?
Not that the category/coercion stuff is already obscure, but...


---

Comment by jpflori created at 2014-12-08 17:19:12

I guess my comment should have been made in #16507.


---

Comment by pbruin created at 2014-12-18 20:13:00

Changing status from needs_review to needs_work.


---

Comment by pbruin created at 2014-12-18 20:13:00

After merging with 6.5.beta3 (which `git` does automatically, despite Trac being unable to auto-merge), there is one failing doctest:

```
File "src/sage/modules/free_module.py", line 6074, in sage.modules.free_module.FreeModule_submodule_with_basis_field
Failed example:
    TestSuite(W).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/home/bruinpj/src/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "sage/structure/sage_object.pyx", line 543, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4553)
        tester.assertEqual(loads(dumps(self)), self)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 513, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 506, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x] != Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x]
    ------------------------------------------------------------
    The following tests failed: _test_pickling
```

This is due to the cached `echelonized_basis_matrix` behaving badly under pickling:

```
sage: K.<x> = FractionField(QQ['x'])
sage: M = K^3
sage: W = M.span_of_basis([This is the Trac macro *1, 1, x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1, 1, x-macro))
sage: W.echelonized_basis_matrix()
[1 1 x]
sage: s = dumps(W)
sage: V = loads(s)
sage: V.echelonized_basis_matrix()
[1, 1, x]
sage: type(_)
<type 'list'>
```

There does not seem to be any such problem with `basis_matrix()`:

```
sage: W.basis_matrix()
[1 1 x]
sage: V.basis_matrix()
[1 1 x]
```



---

Comment by pbruin created at 2014-12-19 10:05:49

The pickling problem is independent of this ticket, see #17527.


---

Comment by git created at 2014-12-19 12:04:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-12-19 12:06:08

The pickling problem can actually be circumvented in a more elegant way by avoiding an unnecessary caching step (the echelon form of a matrix is already cached).


---

Comment by pbruin created at 2014-12-19 12:06:08

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-12-19 14:13:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-12-23 14:36:42

I had a look at the work done here and it looks nice.


Replying to [comment:10 pbruin]:
> OK, ready for review.  There is still some future work to be done:
> - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
>   1. `sage.coding.linear_code.LinearCode`
>   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
>   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
>   4. `sage.structure.formal_sum.FormalSums`
> - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> I think it is better to do these in separate tickets.
Did you open tickets for these?

And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
Any ticket opened to implement such a coercion?


---

Comment by pbruin created at 2014-12-23 17:44:40

Replying to [comment:25 jpflori]:
> I had a look at the work done here and it looks nice.
Thanks!
> Replying to [comment:10 pbruin]:
> > OK, ready for review.  There is still some future work to be done:
> > - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
> >   1. `sage.coding.linear_code.LinearCode`
> >   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
> >   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
> >   4. `sage.structure.formal_sum.FormalSums`
> > - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> > I think it is better to do these in separate tickets.
> Did you open tickets for these?
I just created #17543 and #17544.  (See comment:11 for `LinearCode`.)
> And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
> Any ticket opened to implement such a coercion?
I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.


---

Comment by jpflori created at 2014-12-23 17:47:14

Replying to [comment:26 pbruin]:> > Any ticket opened to implement such a coercion?
> I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.
I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.


---

Comment by pbruin created at 2014-12-23 20:05:40

Replying to [comment:27 jpflori]:
> Replying to [comment:26 pbruin]:> > Any ticket opened to implement such a coercion?
> > I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.
> I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.
After looking at this again, I think the reason was as follows: a cone _C_ is a certain type of subset of a vector space _V_, and _C_ contains a largest maximal linear subspace _S_.  Now to test if an element _x_ of _C_ is in _S_, the coercion framework checks if _S_(_x_) == _x_, but when trying to comparing these two elements it cannot find a common parent for the toric lattice and the linear subspace.  This seems to be because of the following method in `ToricLattice_generic`:

```python
# We need to override this function, otherwise e.g. the sum of elements of
# different lattices of the same dimension will live in ZZ^n.
def construction(self):
    r"""
    Return the functorial construction of ``self``.

    OUTPUT:

    - ``None``, we do not think of toric lattices as constructed from
      simpler objects since we do not want to perform arithmetic involving
      different lattices.

    [...]
    """
    return None
```

The reason why it used to work with the old coercion model might have been a peculiarity of some `_coerce_impl()` method.  Trying to fix this (so that we can use `... in ...` again) will probably lead to all kind of other problems, so I'd prefer not to do that on this ticket.


---

Comment by jpflori created at 2014-12-26 10:09:11

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2014-12-26 10:09:11

Ok, I buy your explanation, thanks for digging this out.


---

Comment by vbraun created at 2015-01-02 08:25:59

I get lots of doctest failures all originating at something like

```
    TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
```



---

Comment by vbraun created at 2015-01-02 08:26:07

Changing status from positive_review to needs_work.


---

Comment by pbruin created at 2015-01-02 11:38:33

Replying to [comment:30 vbraun]:
> I get lots of doctest failures all originating at something like
> {{{
>     TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
> }}}
Can you give more details and/or a link to a log file?  I am not getting any doctest failures in `sage/modular` (which I would guess is where these failures occur) after merging this branch with 6.5.beta4, both on x86_64 and on ARM.


---

Comment by jdemeyer created at 2015-01-02 12:18:57

I think it's because of #10962.


---

Comment by jdemeyer created at 2015-01-02 12:19:36

Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?


---

Comment by pbruin created at 2015-01-02 12:57:34

Replying to [comment:34 jdemeyer]:
> Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?
No, I don't think so.  (It does solve #17576, though.)


---

Comment by pbruin created at 2015-01-02 13:08:20

Replying to [comment:33 jdemeyer]:
> I think it's because of #10962.
You're right, I'm looking into it.


---

Comment by pbruin created at 2015-01-02 19:25:23

Changing status from needs_work to positive_review.


---

Comment by pbruin created at 2015-01-02 19:25:23

The failures when applying this together with #10962 are caused by the fact that Manin symbols do not use the `Parent`/`Element` machinery.  This is fixed by #17578.


---

Comment by jdemeyer created at 2015-01-03 00:12:42

In `src/sage/modules/free_module_element.pyx`, you changed in one place

```
except TypeError:
```

to

```
except (TypeError, ValueError):
```


Is this change needed? If yes, it should also be applied to the other place with similar code (there is one `__init__` method for dense and one for sparse vectors).


---

Comment by jdemeyer created at 2015-01-03 00:12:42

Changing status from positive_review to needs_info.


---

Comment by jdemeyer created at 2015-01-03 00:14:54

(I'm asking because this is a conflict with #17561)


---

Comment by git created at 2015-01-03 08:41:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2015-01-03 08:42:16

Replying to [comment:38 jdemeyer]:
> In `src/sage/modules/free_module_element.pyx`, you changed in one place
> {{{
> except TypeError:
> }}}
> to
> {{{
> except (TypeError, ValueError):
> }}}
> 
> Is this change needed?
Apparently not; the last commit reverts it.


---

Comment by pbruin created at 2015-01-03 08:42:50

Changing status from needs_info to positive_review.


---

Comment by jdemeyer created at 2015-01-11 21:33:50

There is a minor conflict with #17561.


---

Comment by jdemeyer created at 2015-01-11 21:33:50

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2015-01-12 13:10:00

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2015-01-12 13:10:00

New commits:


---

Comment by nbruin created at 2015-01-13 16:57:01

On 6.5.beta5:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 3.63 s, sys: 28 ms, total: 3.66 s
Wall time: 3.65 s
```

With this branch:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 13.4 s, sys: 29 ms, total: 13.5 s
Wall time: 13.5 s
```

I think that's a significant regression in performance. It's probably due to the construction of the category-with-base. If you change the category to be "Category of vector spaces over Fields" or "over Finite Fields" you'll get much better performance, because there's not a new category to be constructed for every single space.

(this stuff isn't academic--such spaces really get made a lot in CRT code). See also #17360, where the issue causes a memleak (that seems to be fine here). See also [http://trac.sagemath.org/ticket/10963#comment:506](http://trac.sagemath.org/ticket/10963#comment:506) where this issue was mentioned right at the start of the development of these parametrized categories.


---

Comment by nbruin created at 2015-01-13 16:57:01

Changing status from positive_review to needs_work.


---

Comment by nbruin created at 2015-01-13 19:08:28

Yep, with

```diff
diff --git a/src/sage/modules/free_module.py b/src/sage/modules/free_module.py
index 4cf68fc..dc9248c 100644
--- a/src/sage/modules/free_module.py
+++ b/src/sage/modules/free_module.py
`@``@` -721,10 +721,11 `@``@` done from the right side.""")
 
         if category is None:
             from sage.categories.all import Fields, FreeModules, VectorSpaces
-            if base_ring in Fields():
-                category = VectorSpaces(base_ring)
+            F=Fields()
+            if base_ring in F:
+                category = VectorSpaces(F)
             else:
-                category = FreeModules(base_ring)
+                category = FreeModules(base_ring.category())
             try:
                 if base_ring.is_finite() or rank == 0:
                     # Put the module in the category of finite enumerated

```

I get

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 2.52 s, sys: 27 ms, total: 2.54 s
Wall time: 2.53 s
```

In profiling this example I'm still finding

```
    28774    0.054    0.000    0.329    0.000 category.py:2281(join)
```

so it seems we're still spending more than 10% of our time on dynamically constructing a category (taking the join with `FiniteEnumeratedSets()`) just to get a list method. This looks like another candidate to improve (a bit).

On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.


---

Comment by pbruin created at 2015-01-20 14:20:07

Replying to [comment:47 nbruin]:
> On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.
Indeed, the category of `GF(p)` is a join of three categories:

```
sage: GF(3).category()
Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
```

Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?


---

Comment by pbruin created at 2015-01-21 10:01:22

With the new commits, the category of free modules is `FreeModules(base_ring.category())` by default, and instead of taking the join with `FiniteEnumeratedSets` (if applicable), we add a `list()` method.

There are two doctest failures:

```
sage -t --long --warn-long 43.7 src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long --warn-long 43.7 src/sage/modules/free_module.py  # 1 doctest failed
```

The first is caused by #11126; the second is a `NotImplementedError` in `repr()` caused by the fact that `basis()` is not implemented for abstract free modules.
----
New commits:


---

Comment by nbruin created at 2015-01-21 18:49:35

Replying to [comment:48 pbruin]:
> Indeed, the category of `GF(p)` is a join of three categories:
> {{{
> sage: GF(3).category()
> Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
> }}}
> Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?

That's one option, but ultimately taking joins is a a rather dynamic operation that needs to investigate quite a bit of the category graph in order to ensure it's safe to use what's cached (can the result of a join depend on changes elsewhere in the graph?). In the case of finite fields, there is *no* variation in what the category is: this thing can be created up front (to accommodate GF(2), which is always present if I'm not mistaken), and just be set to be the category. The current problem is that the joining of categories happens in some of the more generic construction routines. We'd need a way of signalling that we want to shortcut that (a precise_category keyword that percolates up perhaps?). That's an optimization strategy that may have more pay-off for this particular scenario than making "join" faster (which might still be worthwhile to do). In any case, that's for another ticket. Also: premature optimization etc. Thanks for looking into this.


---

Comment by git created at 2015-03-20 20:40:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2015-03-20 20:42:15

Changing status from needs_work to needs_review.


---

Comment by pbruin created at 2015-03-20 20:42:15

Everything should work again after this update.


---

Comment by vdelecroix created at 2015-03-21 10:02:36

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-03-21 10:02:36

Not everything...

```
some tests failed:
sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
```



---

Comment by pbruin created at 2015-03-21 19:30:36

Replying to [comment:53 vdelecroix]:
> Not everything...
> {{{
> some tests failed:
> sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
> sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
> sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
> }}}
I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?


---

Comment by vdelecroix created at 2015-03-21 19:38:50

Replying to [comment:54 pbruin]:
> Replying to [comment:53 vdelecroix]:
>> ...
> I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?

Strange... I am launching the tests again.


---

Comment by jdemeyer created at 2015-03-21 20:04:40

Please be aware of #17562 which also involves modules. Given that #10513 is mostly about the parent and #17562 is mostly about the elements, there is probably no conflict but I felt like I should mention this anyway.


---

Comment by vdelecroix created at 2015-03-21 20:25:04

Results of the new test... most of the failures disappeared except one

```
sage -t --long src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
Failed example:
    m.minimal_polynomial()
Exception raised:
    Traceback (most recent call last):
    ...
    NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
**********************************************************************
```



---

Comment by pbruin created at 2015-03-23 10:36:57

Replying to [comment:57 vdelecroix]:
> Results of the new test... most of the failures disappeared except one
> {{{
> sage -t --long src/sage/matrix/matrix2.pyx
> **********************************************************************
> File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
> Failed example:
>     m.minimal_polynomial()
> Exception raised:
>     Traceback (most recent call last):
>     ...
>     NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
> **********************************************************************
> }}}
This one is fixed by #11126.  (The other failures were probably fixed by #17578 which is in 6.6.rc0.)  I deliberately did not merge #11126 into this branch since I expected some discussion about it.  Maybe this particular failure can be fixed in a more minimalistic way than as part of #11126.


---

Comment by pbruin created at 2015-03-23 13:11:37

Changing status from needs_work to needs_review.


---

Comment by pbruin created at 2015-03-23 13:11:37

Replying to [comment:56 jdemeyer]:
> Please be aware of #17562 which also involves modules.
All tests pass after merging #17562 and the new dependency #18040.


---

Comment by tscrim created at 2015-03-25 20:44:13

Is this then ready to go back to positive review? Vincent, did/could you run through the tests again?


---

Comment by pbruin created at 2015-03-25 21:01:19

Note: #17562 is actually independent of this ticket; it merges cleanly and tests pass with or without it.  Also, I intentionally did not merge #18040 (or any other dependencies) into the branch here.  The only merge conflict was with #17561, which was fixed by Jeroen.


---

Comment by vdelecroix created at 2015-03-26 21:37:34

At least on my computer

```
All tests passed!
```



---

Comment by tscrim created at 2015-03-27 07:50:52

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-03-27 07:50:52

Thanks Vincent. I'm going to set this (back) to positive review.


---

Comment by vbraun created at 2015-04-15 01:59:58

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-04-15 01:59:58

Merge conflict with 6.7.beta0


---

Comment by git created at 2015-04-15 10:30:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2015-04-15 10:33:11

There was only a minor conflict; I assume this doesn't need another review.


---

Comment by pbruin created at 2015-04-15 10:33:11

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-04-15 13:58:24

Resolution: fixed
