# Issue 27507: Make pynormaliz a Feature

archive/issues_027507.json:
```json
{
    "body": "CC:  winfried jipilab @sebasguts mkoeppe vdelecroix @kliem klee\n\nKeywords: polytopes, normaliz\n\nAs mentionned here: #25091#comment:69\n\nThe package pynormaliz should become a feature.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27744\n\n",
    "created_at": "2019-04-29T06:39:46Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Make pynormaliz a Feature",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27507",
    "user": "jipilab"
}
```
CC:  winfried jipilab @sebasguts mkoeppe vdelecroix @kliem klee

Keywords: polytopes, normaliz

As mentionned here: #25091#comment:69

The package pynormaliz should become a feature.

Issue created by migration from https://trac.sagemath.org/ticket/27744





---

archive/issue_comments_387797.json:
```json
{
    "body": "You can just write \n\n```\nfrom sage.features import PythonModule\nif PythonModule(\"PyNormaliz\").is_present() ....\n```\n",
    "created_at": "2019-04-29T07:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387797",
    "user": "mkoeppe"
}
```

You can just write 

```
from sage.features import PythonModule
if PythonModule("PyNormaliz").is_present() ....
```




---

archive/issue_comments_387798.json:
```json
{
    "body": "Replying to [comment:1 mkoeppe]:\n> You can just write \n> {{{\n> from sage.features import PythonModule\n> if PythonModule(\"PyNormaliz\").is_present() ....\n> }}}\n\nYes, that solves it for now. I thought, a long term goal is to do as was done for `latte_int`. Or I am mistaken?",
    "created_at": "2019-05-02T06:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387798",
    "user": "jipilab"
}
```

Replying to [comment:1 mkoeppe]:
> You can just write 
> {{{
> from sage.features import PythonModule
> if PythonModule("PyNormaliz").is_present() ....
> }}}

Yes, that solves it for now. I thought, a long term goal is to do as was done for `latte_int`. Or I am mistaken?



---

archive/issue_comments_387799.json:
```json
{
    "body": "As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387799",
    "user": "embray"
}
```

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_387800.json:
```json
{
    "body": "See #30647 for a new idiom - `lazy_import` with feature - that could replace code like this:\n\n```\n        PythonModule(\"PyNormaliz\", spkg=\"pynormaliz\").require()\n        import PyNormaliz\n```\n\nthroughout `backend_normaliz.py`.",
    "created_at": "2020-09-29T04:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387800",
    "user": "mkoeppe"
}
```

See #30647 for a new idiom - `lazy_import` with feature - that could replace code like this:

```
        PythonModule("PyNormaliz", spkg="pynormaliz").require()
        import PyNormaliz
```

throughout `backend_normaliz.py`.



---

archive/issue_comments_387801.json:
```json
{
    "body": "I do understand what is the goal of this ticket.\n\nDo we want to make `pynormaliz` a standard package?\n\nOr is this this new lazy import idiom better for python package that can also be installed via other sources (e.g. a pip install)?",
    "created_at": "2020-09-29T05:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387801",
    "user": "@kliem"
}
```

I do understand what is the goal of this ticket.

Do we want to make `pynormaliz` a standard package?

Or is this this new lazy import idiom better for python package that can also be installed via other sources (e.g. a pip install)?



---

archive/issue_comments_387802.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-10T02:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387802",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387803.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-11-10T02:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387803",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_387804.json:
```json
{
    "body": "It seems that `igraph` should be `PyNormaliz`.\n\nOther than this, it looks good to me.",
    "created_at": "2021-11-10T03:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387804",
    "user": "klee"
}
```

It seems that `igraph` should be `PyNormaliz`.

Other than this, it looks good to me.



---

archive/issue_comments_387805.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-10T03:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387805",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-11T00:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387806",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387807.json:
```json
{
    "body": "Another round of patchbot testing",
    "created_at": "2021-11-11T00:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387807",
    "user": "mkoeppe"
}
```

Another round of patchbot testing



---

archive/issue_comments_387808.json:
```json
{
    "body": "You may remove `PythonModule` from\n\n```\n    from sage.features import FeatureNotPresentError, PythonModule     \n```\n",
    "created_at": "2021-11-11T00:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387808",
    "user": "klee"
}
```

You may remove `PythonModule` from

```
    from sage.features import FeatureNotPresentError, PythonModule     
```




---

archive/issue_comments_387809.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-11T01:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387809",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387810.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-11-11T01:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387810",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_387811.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-11T23:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387811",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387812.json:
```json
{
    "body": "Green bot.",
    "created_at": "2021-11-11T23:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387812",
    "user": "klee"
}
```

Green bot.



---

archive/issue_comments_387813.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-11-11T23:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387813",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_387814.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-11-18T23:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27507#issuecomment-387814",
    "user": "vbraun"
}
```

Resolution: fixed
