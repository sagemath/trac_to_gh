# Issue 10581: Weighted Choice

Issue created by migration from Trac.

Original creator: eviatarbach

Original creation time: 2011-01-15 03:23:12

Assignee: jason

This adds weighted choice to the choice function in prandom.py.


---

Attachment


---

Comment by eviatarbach created at 2011-01-15 03:53:17

Changing status from new to needs_review.


---

Comment by dsm created at 2011-02-16 14:05:11

A few points:

(1) There are a few typos in the doc ("choose choose", and "if given a list" reads better than "if inputted a list").

(2) The use of factor=1/max(seq.values()) means that the code can run forever if the maximum weight is a Python integer > 1, because then factor becomes 0.


```

sage: choice({1:int(2)})
[forever..]

```


(3) I don't know if it matters, but the while True approach can be quite inefficient for large arrays, because the odds of succeeding on any given try can be pretty low:


```
sage: d = dict((i,1) for i in range(10**4))
sage: time z = choice(d)
CPU times: user 0.14 s, sys: 0.00 s, total: 0.14 s
Wall time: 0.15 s

sage: time z = choice(range(10**4))
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
```



---

Comment by ncohen created at 2011-05-08 14:49:55

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2011-05-08 14:49:55

Until the previous comments are addressed/answered... `:-)`

Oh, and it would be nice to keep the lines to less than 80 characters !

Nathann
