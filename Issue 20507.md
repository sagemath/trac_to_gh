# Issue 20507: Polynomial encoder for GRS codes fails if  variable name is not x

archive/issues_020507.json:
```json
{
    "body": "CC:  jsrn jlavauzelle panda314\n\nThe following:\n\n\n```\nsage: F = GF(11)\nsage: Fy.<y> = F[]\nsage: n, k = 10 , 5\nsage: C = codes.GeneralizedReedSolomonCode(F.list()[:n], k)\nsage: E = C.encoder(\"EvaluationPolynomial\")\nsage: p = y^2 + 3*y + 10\nsage: c = E.encode(p);\n\n<BOOM>\n```\n\n\nfails because the polynomial to encode has to be in `'x'` with the actual implementation.\n\nThis ticket fixes it, by allowing the user to specify a variable name when creating the encoder.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20744\n\n",
    "created_at": "2016-06-01T08:29:44Z",
    "labels": [
        "coding theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Polynomial encoder for GRS codes fails if  variable name is not x",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20507",
    "user": "dlucas"
}
```
CC:  jsrn jlavauzelle panda314

The following:


```
sage: F = GF(11)
sage: Fy.<y> = F[]
sage: n, k = 10 , 5
sage: C = codes.GeneralizedReedSolomonCode(F.list()[:n], k)
sage: E = C.encoder("EvaluationPolynomial")
sage: p = y^2 + 3*y + 10
sage: c = E.encode(p);

<BOOM>
```


fails because the polynomial to encode has to be in `'x'` with the actual implementation.

This ticket fixes it, by allowing the user to specify a variable name when creating the encoder.

Issue created by migration from https://trac.sagemath.org/ticket/20744





---

archive/issue_comments_283119.json:
```json
{
    "body": "I fixed the bug, this is now open for review.\n\nBest,\n\nDavid\n----\nNew commits:",
    "created_at": "2016-06-01T08:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283119",
    "user": "dlucas"
}
```

I fixed the bug, this is now open for review.

Best,

David
----
New commits:



---

archive/issue_comments_283120.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-01T08:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283120",
    "user": "dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_283121.json:
```json
{
    "body": "I was wondering whether it would make more sense to have an option to give the polynomial ring? But I'm not sure it would. For `ReedMullerCodes` (which are in the making), one could argue that it *does* make sense (since we otherwise need many names), and in this case, it would be consistent that `ReedSolomonCode` follows the same pattern.\n\nOne could also, for usability, make a method `polynomial_ring()` on the encoder which is an alias of `message_space()`.",
    "created_at": "2016-06-01T09:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283121",
    "user": "jsrn"
}
```

I was wondering whether it would make more sense to have an option to give the polynomial ring? But I'm not sure it would. For `ReedMullerCodes` (which are in the making), one could argue that it *does* make sense (since we otherwise need many names), and in this case, it would be consistent that `ReedSolomonCode` follows the same pattern.

One could also, for usability, make a method `polynomial_ring()` on the encoder which is an alias of `message_space()`.



---

archive/issue_comments_283122.json:
```json
{
    "body": "Yes, I think it's important to be consistent between similar modules.\nI'll change this so it now asks for a polynomial ring and not the variable.\nI'll also add a method `polynomial_ring()`.",
    "created_at": "2016-06-01T11:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283122",
    "user": "dlucas"
}
```

Yes, I think it's important to be consistent between similar modules.
I'll change this so it now asks for a polynomial ring and not the variable.
I'll also add a method `polynomial_ring()`.



---

archive/issue_comments_283123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-01T11:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283124.json:
```json
{
    "body": "I did what we talked about, and added related input checks and `TESTS` block.\nThis method `polynomial_ring` feels like code duplication with `message_space`, but it makes sense to provide it, so even if it's not \u00fcber-clean, I can live with that.\n\nDavid",
    "created_at": "2016-06-01T11:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283124",
    "user": "dlucas"
}
```

I did what we talked about, and added related input checks and `TESTS` block.
This method `polynomial_ring` feels like code duplication with `message_space`, but it makes sense to provide it, so even if it's not über-clean, I can live with that.

David



---

archive/issue_comments_283125.json:
```json
{
    "body": "Replying to [comment:6 dlucas]:\n> I did what we talked about, and added related input checks and `TESTS` block.\n\nCool. You also need a check that `polynomial_ring.base_ring()` is the field of the code.\n\n> This method `polynomial_ring` feels like code duplication with `message_space`, but it makes sense to provide it, so even if it's not \u00fcber-clean, I can live with that.\n\nYes, that's why I suggested making it an \"alias of `message_space`\". But now you've made a full function anyway. However, can you add in the doc-string that this is the same as the message space?",
    "created_at": "2016-06-01T12:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283125",
    "user": "jsrn"
}
```

Replying to [comment:6 dlucas]:
> I did what we talked about, and added related input checks and `TESTS` block.

Cool. You also need a check that `polynomial_ring.base_ring()` is the field of the code.

> This method `polynomial_ring` feels like code duplication with `message_space`, but it makes sense to provide it, so even if it's not über-clean, I can live with that.

Yes, that's why I suggested making it an "alias of `message_space`". But now you've made a full function anyway. However, can you add in the doc-string that this is the same as the message space?



---

archive/issue_comments_283126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-01T13:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283127.json:
```json
{
    "body": "Done.\n\nI also removed `polynomial_ring` as a full function and made it an alias of `message_space` as you suggested. \nI think it's indeed better.",
    "created_at": "2016-06-01T13:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283127",
    "user": "dlucas"
}
```

Done.

I also removed `polynomial_ring` as a full function and made it an alias of `message_space` as you suggested. 
I think it's indeed better.



---

archive/issue_comments_283128.json:
```json
{
    "body": "This looks good. I approve of the changes. However, I can't currently compile Sage on my machine, so I can't really test the patch :-S",
    "created_at": "2016-06-14T07:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283128",
    "user": "jsrn"
}
```

This looks good. I approve of the changes. However, I can't currently compile Sage on my machine, so I can't really test the patch :-S



---

archive/issue_comments_283129.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-29T09:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283129",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283130.json:
```json
{
    "body": "I updated this ticket to latest beta, and fixed a bug (`polynomial_ring.base_field()` was used instead of `polynomial_ring.base_ring()`).\n\nThis is still open for review.\n\nDavid",
    "created_at": "2016-06-29T09:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283130",
    "user": "dlucas"
}
```

I updated this ticket to latest beta, and fixed a bug (`polynomial_ring.base_field()` was used instead of `polynomial_ring.base_ring()`).

This is still open for review.

David



---

archive/issue_comments_283131.json:
```json
{
    "body": "Hi David\n\nThis new feature is not examplified when typing `codes.encoders.GRSEvaluationPolynomialEncoder?`\n\n\nI suggest there should be an example with 'y' or 'my_variable' in the EXAMPLE section of the docstring. \n\nThat could be quickly done by migrating part of the existing code in the TEST section to the EXAMPLE section.\n\nDaniel",
    "created_at": "2016-08-25T08:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283131",
    "user": "danielaugot"
}
```

Hi David

This new feature is not examplified when typing `codes.encoders.GRSEvaluationPolynomialEncoder?`


I suggest there should be an example with 'y' or 'my_variable' in the EXAMPLE section of the docstring. 

That could be quickly done by migrating part of the existing code in the TEST section to the EXAMPLE section.

Daniel



---

archive/issue_comments_283132.json:
```json
{
    "body": "Hi,\n\nI merged to the latest beta (7.4.beta3) and made the fix according to Daniel's comment. I also approve the changes.\n\nNeed someone for a definitive review (I guess).\n\nJulien",
    "created_at": "2016-09-05T14:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283132",
    "user": "jlavauzelle"
}
```

Hi,

I merged to the latest beta (7.4.beta3) and made the fix according to Daniel's comment. I also approve the changes.

Need someone for a definitive review (I guess).

Julien



---

archive/issue_comments_283133.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-05T14:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283133",
    "user": "jsrn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_283134.json:
```json
{
    "body": "The polynomial ring has to go into `__eq__`.\n----\nNew commits:",
    "created_at": "2016-09-05T14:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283134",
    "user": "jsrn"
}
```

The polynomial ring has to go into `__eq__`.
----
New commits:



---

archive/issue_comments_283135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-05T14:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283135",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283136.json:
```json
{
    "body": "Hi Johan,\n\nThat's true, sorry. Fixed.\n\nJulien",
    "created_at": "2016-09-05T14:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283136",
    "user": "jlavauzelle"
}
```

Hi Johan,

That's true, sorry. Fixed.

Julien



---

archive/issue_comments_283137.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-05T14:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283137",
    "user": "jlavauzelle"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_283138.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-05T15:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283138",
    "user": "jsrn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283139.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd75\".",
    "created_at": "2016-09-05T15:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283139",
    "user": "jsrn"
}
```

Changing keywords from "" to "sd75".



---

archive/issue_comments_283140.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-08T19:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20507#issuecomment-283140",
    "user": "vbraun"
}
```

Resolution: fixed
