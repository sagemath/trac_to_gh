# Issue 28151: qepcad installation fails on macOS

Issue created by migration from https://trac.sagemath.org/ticket/28388

Original creator: mkoeppe

Original creation time: 2019-08-23 01:12:26

CC:  dimpase vdelecroix tscrim


```
[qepcad-B.1.71] ar crvU sfexto.a BPOLSETS.o
[qepcad-B.1.71] /Library/Developer/CommandLineTools/usr/bin/ar: illegal option -- U
```



---

Comment by dimpase created at 2019-08-23 06:20:02

`+# * User ARFLAGS` -> `+# * Use ARFLAGS`
----
New commits:


---

Comment by git created at 2019-08-24 21:31:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-08-26 08:08:57

I am away from my OSX till early Sept., and so can't test it properly now.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by dimpase created at 2020-02-08 09:32:09

please add a link to the tarball


---

Comment by dimpase created at 2020-02-09 19:17:55

In case, on Debian 10 I get a linking error:

```
[qepcad-B.1.72] ranlib qepcad.a
[qepcad-B.1.72] Linking the optimized program......
[qepcad-B.1.72] g++ -O3 -g -Wl,-rpath,/home/dimpase/sage-src/local/lib -I/home/dimpase/sage-src/local/lib/saclib/include  -I. saclib/GCSI.c saclib/FAIL.c \
[qepcad-B.1.72]   qepcad.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/sfext/sfexto.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/lift2D/lift2Do.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/newadj/newadjo.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/adj2d/adj2do.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/rend/rendo.a /home/dimpase/sage-src/local/lib/saclib/lib/saclibo.a -lreadline  qepcad.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/sfext/sfexto.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/lift2D/lift2Do.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/newadj/newadjo.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/adj2d/adj2do.a /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/extensions/rend/rendo.a /home/dimpase/sage-src/local/lib/saclib/lib/saclibo.a -lreadline  -o qepcad
[qepcad-B.1.72] /usr/bin/ld: qepcad.a(MAIN.o): in function `sendSignalAfterInterval':
[qepcad-B.1.72] /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/source/main/MAIN.c:93: undefined reference to `timer_create'
[qepcad-B.1.72] /usr/bin/ld: /home/dimpase/sage-src/local/var/tmp/sage/build/qepcad-B.1.72/src/source/main/MAIN.c:102: undefined reference to `timer_settime'
[qepcad-B.1.72] collect2: error: ld returned 1 exit status
```



---

Comment by mkoeppe created at 2020-02-09 19:32:49

Same on `ubuntu-trusty` (see ticket description)


---

Comment by mkoeppe created at 2020-02-09 20:07:28

`timer_create` may need `-lrt`.


---

Comment by git created at 2020-02-11 03:03:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2020-02-11 20:55:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-02-11 20:56:49

New tests at https://github.com/mkoeppe/sage/actions/runs/37795120


---

Comment by git created at 2020-02-12 19:06:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-02-17 16:04:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-02-17 16:08:14

Rebased, no longer on top of #26351.


---

Comment by mkoeppe created at 2020-02-17 16:08:14

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-02-24 16:46:08

Ready for review.


---

Comment by tscrim created at 2020-03-02 00:11:10

I can confirm this works on Ubuntu 18.04, but I do not have a OSX platform to test. However, given that it is an experimental package and (last I knew) Matthias uses OSX, so it has at least one person testing on that, I am going to set this to a positive review.


---

Comment by tscrim created at 2020-03-02 00:11:10

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-02 00:21:26

Thank you!


---

Comment by vbraun created at 2020-03-02 23:14:44

Resolution: fixed
