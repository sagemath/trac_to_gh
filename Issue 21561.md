# Issue 21561: JH(22, [-1]).decomposition() raises ValueError

archive/issues_021561.json:
```json
{
    "body": "CC:  @koffie\n\n```\nsage: JH(22, [-1]).decomposition()\nTraceback (most recent call last):\n...\nValueError: N (=22) should be a factor of the level                of this space (=11)\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/21798\n\n",
    "created_at": "2016-11-02T10:39:11Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "JH(22, [-1]).decomposition() raises ValueError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21561",
    "user": "https://github.com/pjbruin"
}
```
CC:  @koffie

```
sage: JH(22, [-1]).decomposition()
Traceback (most recent call last):
...
ValueError: N (=22) should be a factor of the level                of this space (=11)
```

Issue created by migration from https://trac.sagemath.org/ticket/21798





---

archive/issue_comments_298982.json:
```json
{
    "body": "The funny\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 spacing in the error message should also be fixed.",
    "created_at": "2016-11-02T11:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298982",
    "user": "https://github.com/jdemeyer"
}
```

The funny                  spacing in the error message should also be fixed.



---

archive/issue_comments_298983.json:
```json
{
    "body": "It seems the following is a more immediate example:\n\n```\nsage: ModularSymbols(GammaH(11, [-1]), 2).modular_symbols_of_level(22)\nTraceback (most recent call last):\n...\nValueError: N (=22) should be a factor of the level                of this space (=11)\n```\nThis does work when replacing `GammaH(11, [-1])` by `Gamma1(11)` or `Gamma0(11)`.",
    "created_at": "2016-11-21T19:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298983",
    "user": "https://github.com/pjbruin"
}
```

It seems the following is a more immediate example:

```
sage: ModularSymbols(GammaH(11, [-1]), 2).modular_symbols_of_level(22)
Traceback (most recent call last):
...
ValueError: N (=22) should be a factor of the level                of this space (=11)
```
This does work when replacing `GammaH(11, [-1])` by `Gamma1(11)` or `Gamma0(11)`.



---

archive/issue_comments_298984.json:
```json
{
    "body": "The above error is apparently deliberate, according to the following comment in the method `sage.modular.modsym.ambient.ModularSymbolsAmbient_wtk_gamma_h.modular_symbols_of_level`:\n\n```\n# We deliberately don't allow N to be a multiple of the level here,\n# because there are many possibilities for what H could be at the\n# higher level (and we don't implement the degeneracy raising maps\n# anyway)\n```\nA canonical choice for the `H` at higher level `N` is to take the inverse image of `H` in (**Z**/*N***Z**)<sup>\u00d7</sup>.  However, we then still have to implement the degeneracy maps.  Doing this will require implementing the function `sage.modular.arithgroup.congroup.degeneracy_coset_representatives_gamma_h` and the method `sage.modular.modsym.ambient.ModularSymbolsAmbient_wtk_gamma_h._degeneracy_raising_matrix_1`.",
    "created_at": "2016-11-22T07:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298984",
    "user": "https://github.com/pjbruin"
}
```

The above error is apparently deliberate, according to the following comment in the method `sage.modular.modsym.ambient.ModularSymbolsAmbient_wtk_gamma_h.modular_symbols_of_level`:

```
# We deliberately don't allow N to be a multiple of the level here,
# because there are many possibilities for what H could be at the
# higher level (and we don't implement the degeneracy raising maps
# anyway)
```
A canonical choice for the `H` at higher level `N` is to take the inverse image of `H` in (**Z**/*N***Z**)<sup>×</sup>.  However, we then still have to implement the degeneracy maps.  Doing this will require implementing the function `sage.modular.arithgroup.congroup.degeneracy_coset_representatives_gamma_h` and the method `sage.modular.modsym.ambient.ModularSymbolsAmbient_wtk_gamma_h._degeneracy_raising_matrix_1`.



---

archive/issue_comments_298985.json:
```json
{
    "body": "After #21927, the error occurs slightly later on, and a `NotImplementedError` is raised instead of a `ValueError`.",
    "created_at": "2016-11-22T10:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298985",
    "user": "https://github.com/pjbruin"
}
```

After #21927, the error occurs slightly later on, and a `NotImplementedError` is raised instead of a `ValueError`.



---

archive/issue_comments_298986.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2016-12-20T08:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298986",
    "user": "https://github.com/pjbruin"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_298987.json:
```json
{
    "body": "A more immediate example:\n\n```\nsage: M = ModularSymbols(GammaH(22, [-1]), 2)\nsage: N = ModularSymbols(GammaH(11, [-1]), 2)\nsage: N.degeneracy_map(M, 1)\nTraceback (most recent call last):\n...\nNotImplementedError:\n```",
    "created_at": "2016-12-20T10:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21561#issuecomment-298987",
    "user": "https://github.com/pjbruin"
}
```

A more immediate example:

```
sage: M = ModularSymbols(GammaH(22, [-1]), 2)
sage: N = ModularSymbols(GammaH(11, [-1]), 2)
sage: N.degeneracy_map(M, 1)
Traceback (most recent call last):
...
NotImplementedError:
```
