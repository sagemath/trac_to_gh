# Issue 12370: Fix issues with converting symbolic expressions to polynomials

archive/issues_012370.json:
```json
{
    "body": "Assignee: burcin\n\nCC:  mjo\n\nThe following fails, but shouldn't:\n\n\n```\nsage: var('x,y')\nsage: f = pi*x^10*y+3*x\nsage: f.polynomial(SR)\n```\n\n\nAlso, you should be able to do the following\n\n\n```\nsage: var('a,x,y')\nsage: f = a*x^10*y+3*x\nsage: B = f.polynomial(ring=SR['x,y'])\nsage: B.coefficients()\n[a, 3]\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12542\n\n",
    "created_at": "2012-02-20T02:30:57Z",
    "labels": [
        "symbolics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Fix issues with converting symbolic expressions to polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12370",
    "user": "mhansen"
}
```
Assignee: burcin

CC:  mjo

The following fails, but shouldn't:


```
sage: var('x,y')
sage: f = pi*x^10*y+3*x
sage: f.polynomial(SR)
```


Also, you should be able to do the following


```
sage: var('a,x,y')
sage: f = a*x^10*y+3*x
sage: B = f.polynomial(ring=SR['x,y'])
sage: B.coefficients()
[a, 3]
```


Issue created by migration from https://trac.sagemath.org/ticket/12542





---

archive/issue_comments_145806.json:
```json
{
    "body": "Attachment [trac_12542.patch](tarball://root/attachments/some-uuid/ticket12542/trac_12542.patch) by mhansen created at 2012-02-20 02:31:33",
    "created_at": "2012-02-20T02:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145806",
    "user": "mhansen"
}
```

Attachment [trac_12542.patch](tarball://root/attachments/some-uuid/ticket12542/trac_12542.patch) by mhansen created at 2012-02-20 02:31:33



---

archive/issue_comments_145807.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-20T02:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145807",
    "user": "mhansen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_145808.json:
```json
{
    "body": "expression.pyx:\n\nCan you add documentation for the new `ring` parameter (and maybe the existing `base_ring`, too)? What's the difference between `ring` and `base_ring`?\n\nconstants.py:\n\nSame thing, we should document the parameter. It looks like it's just some ring, but not necessarily the global `SR`? In that case, we should use a different name to avoid confusion.\n\nCan we include a doctest for your second example in the description?",
    "created_at": "2012-02-20T15:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145808",
    "user": "mjo"
}
```

expression.pyx:

Can you add documentation for the new `ring` parameter (and maybe the existing `base_ring`, too)? What's the difference between `ring` and `base_ring`?

constants.py:

Same thing, we should document the parameter. It looks like it's just some ring, but not necessarily the global `SR`? In that case, we should use a different name to avoid confusion.

Can we include a doctest for your second example in the description?



---

archive/issue_comments_145809.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-20T15:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145809",
    "user": "mjo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_145810.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-20T17:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145810",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_145811.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-12-20T17:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145811",
    "user": "mhansen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_145812.json:
```json
{
    "body": "I've put a branch up with some updates.",
    "created_at": "2013-12-20T17:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145812",
    "user": "mhansen"
}
```

I've put a branch up with some updates.



---

archive/issue_comments_145813.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-09T08:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145813",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_145814.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-07-13T08:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145814",
    "user": "rws"
}
```

New commits:



---

archive/issue_comments_145815.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-13T08:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145815",
    "user": "rws"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_145816.json:
```json
{
    "body": "rws - you can feel free to review this if you feel it is okay, just merging the branch is not considered \"authorship\" so you don't have to worry about self-review :-)",
    "created_at": "2014-08-15T11:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145816",
    "user": "kcrisman"
}
```

rws - you can feel free to review this if you feel it is okay, just merging the branch is not considered "authorship" so you don't have to worry about self-review :-)



---

archive/issue_comments_145817.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-15T13:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145817",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_145818.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-15T13:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145818",
    "user": "rws"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_145819.json:
```json
{
    "body": "Well, it looks straighforward and tests ok in `symbolic`.",
    "created_at": "2014-08-15T13:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145819",
    "user": "rws"
}
```

Well, it looks straighforward and tests ok in `symbolic`.



---

archive/issue_comments_145820.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-16T09:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12370#issuecomment-145820",
    "user": "vbraun"
}
```

Resolution: fixed
