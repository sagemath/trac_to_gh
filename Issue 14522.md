# Issue 14522: build system for src/c_lib

Issue created by migration from Trac.

Original creator: felixs

Original creation time: 2013-06-12 08:14:07

Assignee: felixs

CC:  jondo

Keywords: build system, c_lib, gsoc

this patch implements a gnu build system for c_lib. no existing files are touched.
IT is indended to be merged into the git transition repo.

the glue code at toplevel is under construction. but if desired, it may be possible to hook it into the current static toplevel makefile.

(this build system might finally be merged with the python module build system. this is currently not necessary and would just complicate things due to the directory structure.)


---

Attachment

build system piece


---

Comment by leif created at 2013-06-12 11:57:07

Felix, if you buy a new harddrive, would you mind also buying a new shift key?

(I'd also appreciate that for the news groups posts, at least the longer ones.)


---

Comment by fbissey created at 2013-06-27 10:22:46

May be we could test drive this in sage-on-gentoo. We already build the thing separately after all.


---

Comment by felixs created at 2013-06-27 10:42:37

Replying to [comment:2 fbissey]:
> May be we could test drive this in sage-on-gentoo. We already build the thing separately after all.

Good idea.

this is included within the "WIP" branch at git://github.com/felix-salfelder/sage.git.

I think for distributions != sage, it should already be possible to build all parts of sagelib at once. there's a "build system" at the root of sagelib (i.e. src), which is meant to put together the pieces (currently just AC_CONFIG_SUBDIRS). if you feel adventurous, please have a look.


---

Comment by fbissey created at 2013-06-27 10:52:09

Interesting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?


---

Comment by felixs created at 2013-06-27 11:03:08

Replying to [comment:4 fbissey]:
> Interesting. I will have to look at it closely since the way sage is distributed will change radically with git. Is there an easy of creating a tarball stripped of the git repo?

`make dist`. if it doesnt work, it should in the end.

not that currently, the build system for the python part is missing (#14834), i'll push it as soon as I have a functional alpha.


---

Comment by felixs created at 2013-08-23 10:45:42

Replying to [comment:4 fbissey]:
> Is there an easy of creating a tarball stripped of the git repo?

i will provide current tarballs at http://tool.em.cs.uni-frankfurt.de/~felix/sagelib.

The part that corresponds to this ticket is ready. please comment/rewiew.


---

Comment by felixs created at 2013-08-23 10:45:42

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-12-06 10:48:42

Changing component from c_lib to build.


---

Comment by jdemeyer created at 2013-12-19 11:22:08

Needs to be rebased.


---

Comment by jdemeyer created at 2013-12-19 11:22:08

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2013-12-19 11:33:36

I also disagree with the fact that autotools should become a standard package. Autotools are meant to be used by package maintainers, not by end users.


---

Comment by felixs created at 2013-12-19 13:07:43

Replying to [comment:11 jdemeyer]:
> I also disagree with the fact that autotools should become a standard package.

what exactly do you disagree with? are packages that are required for development `standard` packages?

what would be the problem with development requiring autotools (alternatives?).

> Autotools are meant to be used by package maintainers, not by end users.

no. autotools is meant to be used by developers only, and that's the whole point. (and yes, not by end users).


---

Comment by jdemeyer created at 2013-12-19 13:10:54

I would say there are 3 levels:
 1. package maintainers
 2. normal developers
 3. end users
only package maintainers should need autotools.


---

Comment by felixs created at 2013-12-19 13:44:08

what is a `normal` developer? do you imply that a package maintainer is a different sort of developer?

usually (in my world?) no package maintainer will ever want to tinker with a build system (or other source code) if she doesn't have to. unlike make, autotools is written/designed exclusively for developers.

so clearly, 1. and 2. need to be exchanged, if a `normal` developer is a developer (?). 

are we lost in terminology? it doesn't really look that complicated... Look out for the term `software development person` and `developer` in [http://en.wikipedia.org/wiki/GNU_build_system#Usage](http://en.wikipedia.org/wiki/GNU_build_system#Usage).


---

Comment by jdemeyer created at 2013-12-19 14:01:29

OK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.


---

Comment by felixs created at 2013-12-19 15:16:44

Replying to [comment:15 jdemeyer]:
> OK, forget what I said. What I really meant was that you should not require autotools except in cases where it is obviously needed. Essentially, as long as you don't edit `configure.ac` or `Makefile.am`, you shouldn't need autotools.

yes. you shouldn't. and that should be achievable.

you will of course need autotools to expand the build system, if you don't start with a dist tarball or anything similar. is building-from-git (as opposed to building-from-tarball) not considered a development task?

is this finally what comment 11 is about?


---

Comment by fbissey created at 2015-07-01 10:30:56

Obsolete `src/c_lib` is gone.


---

Comment by fbissey created at 2015-07-01 10:30:56

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-07-17 20:10:41

Resolution: fixed
