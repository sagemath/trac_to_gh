# Issue 26070: compute DOL languages

archive/issues_026070.json:
```json
{
    "body": "CC:  \u200bsstarosta slabbe\n\nWith the patch\n\n```\nsage: s = WordMorphism({0: [0,1], 1:[0]})\nsage: %time L = s.language(10000)\nCPU times: user 221 ms, sys: 10.3 ms, total: 231 ms\nWall time: 221 ms\nsage: len(L)\n10001\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26307\n\n",
    "created_at": "2018-09-18T20:48:43Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "compute DOL languages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26070",
    "user": "vdelecroix"
}
```
CC:  â€‹sstarosta slabbe

With the patch

```
sage: s = WordMorphism({0: [0,1], 1:[0]})
sage: %time L = s.language(10000)
CPU times: user 221 ms, sys: 10.3 ms, total: 231 ms
Wall time: 221 ms
sage: len(L)
10001
```


Issue created by migration from https://trac.sagemath.org/ticket/26307





---

archive/issue_comments_367645.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367645",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_367646.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367646",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_367647.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-09-20T08:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367647",
    "user": "slabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_367648.json:
```json
{
    "body": "This is great! I remember almost 10 years ago, I suggested to write such a function and I remember you said it was not a good idea :P\n\nI would ask that you add an `INPUT` block for both `language` and `_language_naive` methods that explains both inputs `n` and `u` and also what happens when `u=None`. After this is done, it will be good to go for me (if all tests pass which I didn't check yet).",
    "created_at": "2018-09-20T08:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367648",
    "user": "slabbe"
}
```

This is great! I remember almost 10 years ago, I suggested to write such a function and I remember you said it was not a good idea :P

I would ask that you add an `INPUT` block for both `language` and `_language_naive` methods that explains both inputs `n` and `u` and also what happens when `u=None`. After this is done, it will be good to go for me (if all tests pass which I didn't check yet).



---

archive/issue_comments_367649.json:
```json
{
    "body": "I obtain two failing doctests (also reported by the patchbot report) :\n\n```\nsage -t --long src/sage/combinat/words/morphism.py  # 2 doctests failed\n```\n",
    "created_at": "2018-09-20T08:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367649",
    "user": "slabbe"
}
```

I obtain two failing doctests (also reported by the patchbot report) :

```
sage -t --long src/sage/combinat/words/morphism.py  # 2 doctests failed
```




---

archive/issue_comments_367650.json:
```json
{
    "body": "I am not 100% convinced that this patch is a good idea. The problem is that you might expect `sigma.language()` to return an object for the set of factors, because for example you want to access the words of length {100, 101, 102, 103} and for that purpose it make no sense to call three times `s.language(n)` four times. We can still make that happen in the future without breaking backward compatibility.",
    "created_at": "2018-09-20T12:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367650",
    "user": "vdelecroix"
}
```

I am not 100% convinced that this patch is a good idea. The problem is that you might expect `sigma.language()` to return an object for the set of factors, because for example you want to access the words of length {100, 101, 102, 103} and for that purpose it make no sense to call three times `s.language(n)` four times. We can still make that happen in the future without breaking backward compatibility.



---

archive/issue_comments_367651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T13:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367651",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367652.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-20T13:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367652",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_367653.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-09-20T14:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367653",
    "user": "slabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_367654.json:
```json
{
    "body": "I will be pickky, but can you use double `--` where needed please to conform with the developer manual:\n\n```diff\n- - ``n`` - non-negative inte\n+ - ``n`` -- non-negative inte\n```\n",
    "created_at": "2018-09-20T14:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367654",
    "user": "slabbe"
}
```

I will be pickky, but can you use double `--` where needed please to conform with the developer manual:

```diff
- - ``n`` - non-negative inte
+ - ``n`` -- non-negative inte
```




---

archive/issue_comments_367655.json:
```json
{
    "body": "One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.\n\n\n```diff\n- return list(L)\n+ return L\n```\n\n\nOften, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.",
    "created_at": "2018-09-20T14:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367655",
    "user": "slabbe"
}
```

One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.


```diff
- return list(L)
+ return L
```


Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.



---

archive/issue_comments_367656.json:
```json
{
    "body": "Replying to [comment:8 slabbe]:\n> One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.\n> \n> {{{\n> #!diff\n> - return list(L)\n> + return L\n> }}}\n> \n> Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.\n\nAgreed. Though `w.factor_set()` returns a \"Sage set\" and not a Python set... this is not so nice.",
    "created_at": "2018-09-20T16:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367656",
    "user": "vdelecroix"
}
```

Replying to [comment:8 slabbe]:
> One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.
> 
> {{{
> #!diff
> - return list(L)
> + return L
> }}}
> 
> Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.

Agreed. Though `w.factor_set()` returns a "Sage set" and not a Python set... this is not so nice.



---

archive/issue_comments_367657.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T16:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367657",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367658.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-20T16:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367658",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_367659.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-09-20T18:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367659",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_367660.json:
```json
{
    "body": "Thanks Sebastien!",
    "created_at": "2018-09-20T21:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367660",
    "user": "vdelecroix"
}
```

Thanks Sebastien!



---

archive/issue_comments_367661.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-22T10:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26070",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26070#issuecomment-367661",
    "user": "vbraun"
}
```

Resolution: fixed
