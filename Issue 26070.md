# Issue 26070: compute DOL languages

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2018-09-18 20:48:43

CC:  â€‹sstarosta slabbe

With the patch

```
sage: s = WordMorphism({0: [0,1], 1:[0]})
sage: %time L = s.language(10000)
CPU times: user 221 ms, sys: 10.3 ms, total: 231 ms
Wall time: 221 ms
sage: len(L)
10001
```



---

Comment by vdelecroix created at 2018-09-18 20:55:43

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2018-09-18 20:55:43

New commits:


---

Comment by slabbe created at 2018-09-20 08:31:49

Changing status from needs_review to needs_work.


---

Comment by slabbe created at 2018-09-20 08:31:49

This is great! I remember almost 10 years ago, I suggested to write such a function and I remember you said it was not a good idea :P

I would ask that you add an `INPUT` block for both `language` and `_language_naive` methods that explains both inputs `n` and `u` and also what happens when `u=None`. After this is done, it will be good to go for me (if all tests pass which I didn't check yet).


---

Comment by slabbe created at 2018-09-20 08:37:28

I obtain two failing doctests (also reported by the patchbot report) :

```
sage -t --long src/sage/combinat/words/morphism.py  # 2 doctests failed
```



---

Comment by vdelecroix created at 2018-09-20 12:17:53

I am not 100% convinced that this patch is a good idea. The problem is that you might expect `sigma.language()` to return an object for the set of factors, because for example you want to access the words of length {100, 101, 102, 103} and for that purpose it make no sense to call three times `s.language(n)` four times. We can still make that happen in the future without breaking backward compatibility.


---

Comment by git created at 2018-09-20 13:49:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2018-09-20 13:49:51

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2018-09-20 14:42:28

Changing status from needs_review to needs_work.


---

Comment by slabbe created at 2018-09-20 14:42:28

I will be pickky, but can you use double `--` where needed please to conform with the developer manual:

```diff
- - ``n`` - non-negative inte
+ - ``n`` -- non-negative inte
```



---

Comment by slabbe created at 2018-09-20 14:46:58

One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.


```diff
- return list(L)
+ return L
```


Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.


---

Comment by vdelecroix created at 2018-09-20 16:01:22

Replying to [comment:8 slabbe]:
> One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.
> 
> {{{
> #!diff
> - return list(L)
> + return L
> }}}
> 
> Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.

Agreed. Though `w.factor_set()` returns a "Sage set" and not a Python set... this is not so nice.


---

Comment by git created at 2018-09-20 16:07:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2018-09-20 16:07:34

Changing status from needs_work to needs_review.


---

Comment by slabbe created at 2018-09-20 18:08:52

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2018-09-20 21:08:12

Thanks Sebastien!


---

Comment by vbraun created at 2018-09-22 10:22:31

Resolution: fixed
