# Issue 19358: Implement a check that a hyperplane arrangement is free

archive/issues_019358.json:
```json
{
    "body": "Assignee: tscrim\n\nCC:  vbraun chapoton mmarco\n\nKeywords: free, hyperplane arrangement\n\nWe follow Barakat and Cuntz in arXiv:1011.4228 to check if a hyperplane arrangement is free.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19595\n\n",
    "created_at": "2015-11-18T05:07:54Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Implement a check that a hyperplane arrangement is free",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19358",
    "user": "tscrim"
}
```
Assignee: tscrim

CC:  vbraun chapoton mmarco

Keywords: free, hyperplane arrangement

We follow Barakat and Cuntz in arXiv:1011.4228 to check if a hyperplane arrangement is free.

Issue created by migration from https://trac.sagemath.org/ticket/19595





---

archive/issue_comments_265969.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-11-18T05:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265969",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_265970.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-18T05:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265970",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265971.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-08T06:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265971",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265972.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-08T06:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265972",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265973.json:
```json
{
    "body": "* do you check for \"freeness\" or some stronger \"inductive freeness\" ?\n* in `to_symmetric_space`\n\n```\nreturn S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))\n```\n\nwhy is there `[1:]` ?\n* maybe you should rather write\n`chordality is equivalent to freeness`\nand name the files \"`check_freeness`\"",
    "created_at": "2016-01-11T20:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265973",
    "user": "chapoton"
}
```

* do you check for "freeness" or some stronger "inductive freeness" ?
* in `to_symmetric_space`

```
return S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))
```

why is there `[1:]` ?
* maybe you should rather write
`chordality is equivalent to freeness`
and name the files "`check_freeness`"



---

archive/issue_comments_265974.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> * do you check for \"freeness\" or some stronger \"inductive freeness\" ?\n\nAs I understand it, this is just freeness, but I will make a detailed reading and double-check this.\n\n> * in `to_symmetric_space`\n> {{{\n> return S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))\n> }}}\n> why is there `[1:]` ?\n\nBecause the first coefficient of a hyperplane is the constant part (as the arrangements do not need to be central, i.e., they are allowed to be affine hyperplanes).\n\n> * maybe you should rather write\n> `chordality is equivalent to freeness`\n> and name the files \"`check_freeness`\"\n\nWill change.",
    "created_at": "2016-01-20T16:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265974",
    "user": "tscrim"
}
```

Replying to [comment:4 chapoton]:
> * do you check for "freeness" or some stronger "inductive freeness" ?

As I understand it, this is just freeness, but I will make a detailed reading and double-check this.

> * in `to_symmetric_space`
> {{{
> return S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))
> }}}
> why is there `[1:]` ?

Because the first coefficient of a hyperplane is the constant part (as the arrangements do not need to be central, i.e., they are allowed to be affine hyperplanes).

> * maybe you should rather write
> `chordality is equivalent to freeness`
> and name the files "`check_freeness`"

Will change.



---

archive/issue_comments_265975.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T21:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265975",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265976.json:
```json
{
    "body": "Replying to [comment:6 tscrim]:\n> Replying to [comment:4 chapoton]:\n> > * do you check for \"freeness\" or some stronger \"inductive freeness\" ?\n> \n> As I understand it, this is just freeness, but I will make a detailed reading and double-check this.\n\nThis does not check inductive freeness because it does not check both the exponent condition and the freeness of the restriction. However this would make for a good followup.\n\n> > * in `to_symmetric_space`\n> > {{{\n> > return S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))\n> > }}}\n> > why is there `[1:]` ?\n> \n> Because the first coefficient of a hyperplane is the constant part (as the arrangements do not need to be central, i.e., they are allowed to be affine hyperplanes).\n\nIn my recent push, I now forbid affine hyperplanes since I don't believe they make sense in the symmetric space.\n\n> > * maybe you should rather write\n> > `chordality is equivalent to freeness`\n> > and name the files \"`check_freeness`\"\n> \n> Will change.\n\nDone.",
    "created_at": "2016-01-21T21:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265976",
    "user": "tscrim"
}
```

Replying to [comment:6 tscrim]:
> Replying to [comment:4 chapoton]:
> > * do you check for "freeness" or some stronger "inductive freeness" ?
> 
> As I understand it, this is just freeness, but I will make a detailed reading and double-check this.

This does not check inductive freeness because it does not check both the exponent condition and the freeness of the restriction. However this would make for a good followup.

> > * in `to_symmetric_space`
> > {{{
> > return S.sum(G[i]*c for i,c in enumerate(self.coefficients()[1:]))
> > }}}
> > why is there `[1:]` ?
> 
> Because the first coefficient of a hyperplane is the constant part (as the arrangements do not need to be central, i.e., they are allowed to be affine hyperplanes).

In my recent push, I now forbid affine hyperplanes since I don't believe they make sense in the symmetric space.

> > * maybe you should rather write
> > `chordality is equivalent to freeness`
> > and name the files "`check_freeness`"
> 
> Will change.

Done.



---

archive/issue_comments_265977.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-22T13:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265977",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265978.json:
```json
{
    "body": "I have just given a very quick look at the code, but it seems to me that you are actually computing a free resolution of the logarithmic derivation module. Or at least the first steps of it. Is that correct?\n\nIf this is the case, maybe it would be worth doing so by using Singular, which already has this implemented.\n\nSomething like\n\n\n```\nsage: R.<x,y,z,t> = QQ[]\nsage: f = x^3 + y^3 +z^3+ t^3\nsage: I = f.jacobian_ideal()\nsage: IS = I._singular_()\nsage: res = IS.mres(0)\nsage: res\n[1]:\n   _[1]=t^2\n   _[2]=z^2\n   _[3]=y^2\n   _[4]=x^2\n[2]:\n   _[1]=z^2*gen(1)-t^2*gen(2)\n   _[2]=y^2*gen(1)-t^2*gen(3)\n   _[3]=y^2*gen(2)-z^2*gen(3)\n   _[4]=x^2*gen(1)-t^2*gen(4)\n   _[5]=x^2*gen(2)-z^2*gen(4)\n   _[6]=x^2*gen(3)-y^2*gen(4)\n[3]:\n   _[1]=y^2*gen(1)-z^2*gen(2)+t^2*gen(3)\n   _[2]=x^2*gen(1)-z^2*gen(4)+t^2*gen(5)\n   _[3]=x^2*gen(2)-y^2*gen(4)+t^2*gen(6)\n   _[4]=x^2*gen(3)-y^2*gen(5)+z^2*gen(6)\n[4]:\n   _[1]=x^2*gen(1)-y^2*gen(2)+z^2*gen(3)-t^2*gen(4)\nsage: len(res)\n4\n```\n\n\nshould give you a minimal free resolution of the logarithmic derivation module of every homogenous polynomial f, so it would be free iff len(res)<=2 .\n\nFor the  non homogenous case, one might need to work a little bit with the homogenization of the polynomial, but it can also be done.\n\nCould you please compare the timings of your code with the singular method?",
    "created_at": "2016-01-27T18:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265978",
    "user": "mmarco"
}
```

I have just given a very quick look at the code, but it seems to me that you are actually computing a free resolution of the logarithmic derivation module. Or at least the first steps of it. Is that correct?

If this is the case, maybe it would be worth doing so by using Singular, which already has this implemented.

Something like


```
sage: R.<x,y,z,t> = QQ[]
sage: f = x^3 + y^3 +z^3+ t^3
sage: I = f.jacobian_ideal()
sage: IS = I._singular_()
sage: res = IS.mres(0)
sage: res
[1]:
   _[1]=t^2
   _[2]=z^2
   _[3]=y^2
   _[4]=x^2
[2]:
   _[1]=z^2*gen(1)-t^2*gen(2)
   _[2]=y^2*gen(1)-t^2*gen(3)
   _[3]=y^2*gen(2)-z^2*gen(3)
   _[4]=x^2*gen(1)-t^2*gen(4)
   _[5]=x^2*gen(2)-z^2*gen(4)
   _[6]=x^2*gen(3)-y^2*gen(4)
[3]:
   _[1]=y^2*gen(1)-z^2*gen(2)+t^2*gen(3)
   _[2]=x^2*gen(1)-z^2*gen(4)+t^2*gen(5)
   _[3]=x^2*gen(2)-y^2*gen(4)+t^2*gen(6)
   _[4]=x^2*gen(3)-y^2*gen(5)+z^2*gen(6)
[4]:
   _[1]=x^2*gen(1)-y^2*gen(2)+z^2*gen(3)-t^2*gen(4)
sage: len(res)
4
```


should give you a minimal free resolution of the logarithmic derivation module of every homogenous polynomial f, so it would be free iff len(res)<=2 .

For the  non homogenous case, one might need to work a little bit with the homogenization of the polynomial, but it can also be done.

Could you please compare the timings of your code with the singular method?



---

archive/issue_comments_265979.json:
```json
{
    "body": "Another question: is this granted to work for non crystalographic arrangements?",
    "created_at": "2016-01-29T12:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265979",
    "user": "mmarco"
}
```

Another question: is this granted to work for non crystalographic arrangements?



---

archive/issue_comments_265980.json:
```json
{
    "body": "Replying to [comment:11 mmarco]:\n> Another question: is this granted to work for non crystalographic arrangements?\n\nBarakat and Cuntz say explicitly at the beginning of Section 6 \"free *central* arrangement\". So it works well beyond inversion arrangements.\n\nReplying to [comment:10 mmarco]:\n> I have just given a very quick look at the code, but it seems to me that you are actually computing a free resolution of the logarithmic derivation module. Or at least the first steps of it. Is that correct?\n\nFrom some quick Googling (your paper no less) and my (relatively small) understanding of this area of math, I believe so.\n\n> If this is the case, maybe it would be worth doing so by using Singular, which already has this implemented.\n\nI am not surprised, but a lot of Singular does not seem to be (well) exposed with good interface classes. (Actually, AFAIK this is the first implementation of a not-necessarily-free module in Sage.) I came across Singular's free resolution code after I had made this, but I was lazy. This did what I wanted and I didn't want to figure out the Singular interface and write the wrappers.\n\n> Something like\n> {{{\n> sage: R.<x,y,z,t> = QQ[]\n> sage: f = x^3 + y^3 +z^3+ t^3\n> sage: I = f.jacobian_ideal()\n> sage: IS = I._singular_()\n> sage: res = IS.mres(0)\n> sage: len(res)\n> 4\n> }}}\n> should give you a minimal free resolution of the logarithmic derivation module of every homogenous polynomial f, so it would be free iff len(res)<=2 .\n> \n> For the non homogenous case, one might need to work a little bit with the homogenization of the polynomial, but it can also be done.\n> \n> Could you please compare the timings of your code with the singular method?\n\nI am all but certain your code works faster when the arrangement is not free. I could (should) optimize my code by doing a backtracking algorithm too; at least that would make it a more fair comparison. On my next push, I will include an option for both algorithms.",
    "created_at": "2016-01-29T15:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265980",
    "user": "tscrim"
}
```

Replying to [comment:11 mmarco]:
> Another question: is this granted to work for non crystalographic arrangements?

Barakat and Cuntz say explicitly at the beginning of Section 6 "free *central* arrangement". So it works well beyond inversion arrangements.

Replying to [comment:10 mmarco]:
> I have just given a very quick look at the code, but it seems to me that you are actually computing a free resolution of the logarithmic derivation module. Or at least the first steps of it. Is that correct?

From some quick Googling (your paper no less) and my (relatively small) understanding of this area of math, I believe so.

> If this is the case, maybe it would be worth doing so by using Singular, which already has this implemented.

I am not surprised, but a lot of Singular does not seem to be (well) exposed with good interface classes. (Actually, AFAIK this is the first implementation of a not-necessarily-free module in Sage.) I came across Singular's free resolution code after I had made this, but I was lazy. This did what I wanted and I didn't want to figure out the Singular interface and write the wrappers.

> Something like
> {{{
> sage: R.<x,y,z,t> = QQ[]
> sage: f = x^3 + y^3 +z^3+ t^3
> sage: I = f.jacobian_ideal()
> sage: IS = I._singular_()
> sage: res = IS.mres(0)
> sage: len(res)
> 4
> }}}
> should give you a minimal free resolution of the logarithmic derivation module of every homogenous polynomial f, so it would be free iff len(res)<=2 .
> 
> For the non homogenous case, one might need to work a little bit with the homogenization of the polynomial, but it can also be done.
> 
> Could you please compare the timings of your code with the singular method?

I am all but certain your code works faster when the arrangement is not free. I could (should) optimize my code by doing a backtracking algorithm too; at least that would make it a more fair comparison. On my next push, I will include an option for both algorithms.



---

archive/issue_comments_265981.json:
```json
{
    "body": "Yes, we should probably write some parent class for these kinds of modules. And maybe also one for resolutions. Maybe a good fit for GSoC?",
    "created_at": "2016-01-29T16:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265981",
    "user": "mmarco"
}
```

Yes, we should probably write some parent class for these kinds of modules. And maybe also one for resolutions. Maybe a good fit for GSoC?



---

archive/issue_comments_265982.json:
```json
{
    "body": "Replying to [comment:14 mmarco]:\n> Yes, we should probably write some parent class for these kinds of modules. And maybe also one for resolutions. Maybe a good fit for GSoC?\n\nI agree, and also another (strongly correlated) one would be exposing more from Singular. I would also be willing to (help) mentor this project too.",
    "created_at": "2016-01-29T16:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265982",
    "user": "tscrim"
}
```

Replying to [comment:14 mmarco]:
> Yes, we should probably write some parent class for these kinds of modules. And maybe also one for resolutions. Maybe a good fit for GSoC?

I agree, and also another (strongly correlated) one would be exposing more from Singular. I would also be willing to (help) mentor this project too.



---

archive/issue_comments_265983.json:
```json
{
    "body": "I added a draft of the proposal to the wiki in https://wiki.sagemath.org/GSoC/2016 . Feel free to modify it.",
    "created_at": "2016-01-29T16:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265983",
    "user": "mmarco"
}
```

I added a draft of the proposal to the wiki in https://wiki.sagemath.org/GSoC/2016 . Feel free to modify it.



---

archive/issue_comments_265984.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-29T19:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265984",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265985.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-29T19:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265985",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265986.json:
```json
{
    "body": "The Singular code rips my implementation to shreads. It at least 2x faster (often times much more so) in the cases I tested (inversion arrangements for types A<sub>3</sub> and B<sub>3</sub>), so I am making that the default. However, I am still using it to construct the basis, but if you know how to pull that from Singular's resolution, I would be happy to include that as well.\n\nI implemented by backtracking in a recursive fashion since I didn't want to deal with managing my own stack, and if you're doing something with 1000 hyperplanes (reaching Python's recursion depth limit), then you are probably better off waiting for the universe to implode. It is possible there are further optimizations to be done with that code, but since Singular does the biggest thing, checking for freeness, really fast, I'm inclined to leaving it alone for now.",
    "created_at": "2016-01-29T19:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265986",
    "user": "tscrim"
}
```

The Singular code rips my implementation to shreads. It at least 2x faster (often times much more so) in the cases I tested (inversion arrangements for types A<sub>3</sub> and B<sub>3</sub>), so I am making that the default. However, I am still using it to construct the basis, but if you know how to pull that from Singular's resolution, I would be happy to include that as well.

I implemented by backtracking in a recursive fashion since I didn't want to deal with managing my own stack, and if you're doing something with 1000 hyperplanes (reaching Python's recursion depth limit), then you are probably better off waiting for the universe to implode. It is possible there are further optimizations to be done with that code, but since Singular does the biggest thing, checking for freeness, really fast, I'm inclined to leaving it alone for now.



---

archive/issue_comments_265987.json:
```json
{
    "body": "Hmmm, usually when I want to compute a basis I do so by taking the syzygy module of the jacobian ideal of the polynomial. This procedure has always given me a basis, but now I am not sure if it is granted to work always.\n\nLet me think about it for a few days.",
    "created_at": "2016-01-29T23:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265987",
    "user": "mmarco"
}
```

Hmmm, usually when I want to compute a basis I do so by taking the syzygy module of the jacobian ideal of the polynomial. This procedure has always given me a basis, but now I am not sure if it is granted to work always.

Let me think about it for a few days.



---

archive/issue_comments_265988.json:
```json
{
    "body": "Replying to [comment:20 mmarco]:\n> Hmmm, usually when I want to compute a basis I do so by taking the syzygy module of the jacobian ideal of the polynomial. This procedure has always given me a basis, but now I am not sure if it is granted to work always.\n\nI am pretty sure you're right. I will add this and check.",
    "created_at": "2016-01-30T01:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265988",
    "user": "tscrim"
}
```

Replying to [comment:20 mmarco]:
> Hmmm, usually when I want to compute a basis I do so by taking the syzygy module of the jacobian ideal of the polynomial. This procedure has always given me a basis, but now I am not sure if it is granted to work always.

I am pretty sure you're right. I will add this and check.



---

archive/issue_comments_265989.json:
```json
{
    "body": "If you add this method, unless you have a proof that grants to get the correct result, there should be a check. Saito criterion seems like the fastest way to check if something is a basis. That way we can fall back to other implementation if this happen to fail.",
    "created_at": "2016-01-30T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265989",
    "user": "mmarco"
}
```

If you add this method, unless you have a proof that grants to get the correct result, there should be a check. Saito criterion seems like the fastest way to check if something is a basis. That way we can fall back to other implementation if this happen to fail.



---

archive/issue_comments_265990.json:
```json
{
    "body": "Actually, from my testing using inversion arrangements, the syzygy module often results in a non-square matrix (even after passing it through `less_generators`). So I don't think this is a viable method. I did push the code to the branch\n\n```\nu/tscrim/check_free_with_basis-19595\n```\n\nif you want to take a look (and I'm not sure if I got Saito's criterion correct either).\n\nPerhaps we should just include this as-is for now and do a follow-up ticket for finding a faster way to construct the basis?",
    "created_at": "2016-02-02T17:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265990",
    "user": "tscrim"
}
```

Actually, from my testing using inversion arrangements, the syzygy module often results in a non-square matrix (even after passing it through `less_generators`). So I don't think this is a viable method. I did push the code to the branch

```
u/tscrim/check_free_with_basis-19595
```

if you want to take a look (and I'm not sure if I got Saito's criterion correct either).

Perhaps we should just include this as-is for now and do a follow-up ticket for finding a faster way to construct the basis?



---

archive/issue_comments_265991.json:
```json
{
    "body": "There is a singular command called mstd, that produces a minimal set of generators of an ideal of module. Try something like:\n\n\n```\nsage: H.<x,y,z> = HyperplaneArrangements(QQ)\nsage: A = H( x-z, y-z, x+y, x+z, y+z, x, y, z)\nsage: f = A.defining_polynomial()\nsage: I = f + f.jacobian_ideal()\nsage: IS = I._singular_()\nsage: ISS = IS.syz()\nsage: MSTD = ISS.mstd()\nsage: M = MSTD[2]._sage_().transpose().submatrix(0,1)\nsage: M\n[                              x                               y                               z]\n[                              0                     x^2*y - y^3                     x^2*z - z^3]\n[                              0 x*y^3 + y^4 - x*y*z^2 - y^2*z^2                               0]\nsage: M.determinant()/f\n-1\n```\n",
    "created_at": "2016-02-02T17:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265991",
    "user": "mmarco"
}
```

There is a singular command called mstd, that produces a minimal set of generators of an ideal of module. Try something like:


```
sage: H.<x,y,z> = HyperplaneArrangements(QQ)
sage: A = H( x-z, y-z, x+y, x+z, y+z, x, y, z)
sage: f = A.defining_polynomial()
sage: I = f + f.jacobian_ideal()
sage: IS = I._singular_()
sage: ISS = IS.syz()
sage: MSTD = ISS.mstd()
sage: M = MSTD[2]._sage_().transpose().submatrix(0,1)
sage: M
[                              x                               y                               z]
[                              0                     x^2*y - y^3                     x^2*z - z^3]
[                              0 x*y^3 + y^4 - x*y*z^2 - y^2*z^2                               0]
sage: M.determinant()/f
-1
```




---

archive/issue_comments_265992.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T17:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265992",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265993.json:
```json
{
    "body": "That worked very well. As a safety precaution, I had it fallback to the Barakat-Cuntz algorithm if the Singular method failed to produce a basis but the arrangement was determined to be free.",
    "created_at": "2016-02-02T17:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265993",
    "user": "tscrim"
}
```

That worked very well. As a safety precaution, I had it fallback to the Barakat-Cuntz algorithm if the Singular method failed to produce a basis but the arrangement was determined to be free.



---

archive/issue_comments_265994.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T18:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265994",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265995.json:
```json
{
    "body": "In some point (either the methods of the arrangement class, or the auxilar functions they call) there should be a check that the arrangement is central. Otherwise all these algorithms might not make sense. Right now things might fail at the `to_symmetric_space` function, but a more informative error would be nice. I am adding it now.\n\n\nOtherwise, it looks good. Let me pass the testsuite and check that the documentation builds correctly, and, if you are ok with my corrections, we can call it a day.\n\n----\nNew commits:",
    "created_at": "2016-02-02T18:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265995",
    "user": "mmarco"
}
```

In some point (either the methods of the arrangement class, or the auxilar functions they call) there should be a check that the arrangement is central. Otherwise all these algorithms might not make sense. Right now things might fail at the `to_symmetric_space` function, but a more informative error would be nice. I am adding it now.


Otherwise, it looks good. Let me pass the testsuite and check that the documentation builds correctly, and, if you are ok with my corrections, we can call it a day.

----
New commits:



---

archive/issue_comments_265996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T18:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265997.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T19:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265997",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265998.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T19:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265998",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265999.json:
```json
{
    "body": "That is good with me. I made some other little tweaks:\n\n- Since we are removing the trailing whitespace, I changed the indentation to make things easier to read.\n- I made the errors Python3 compatible and capitalized correctly (since they are not full sentences).\n\nIf you're happy with my changes, then positive review.\n\nThank you for doing the review.",
    "created_at": "2016-02-02T19:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-265999",
    "user": "tscrim"
}
```

That is good with me. I made some other little tweaks:

- Since we are removing the trailing whitespace, I changed the indentation to make things easier to read.
- I made the errors Python3 compatible and capitalized correctly (since they are not full sentences).

If you're happy with my changes, then positive review.

Thank you for doing the review.



---

archive/issue_comments_266000.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-03T08:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266000",
    "user": "mmarco"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266001.json:
```json
{
    "body": "Merge conflict, wait for the next beta...",
    "created_at": "2016-02-03T08:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266001",
    "user": "vbraun"
}
```

Merge conflict, wait for the next beta...



---

archive/issue_comments_266002.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-02-03T08:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266002",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_266003.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-02-03T15:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266003",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_266004.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-02-03T15:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266004",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_266005.json:
```json
{
    "body": "I looked at and merged in any ticket that was closed or on positive review that could have had a conflict with this one. Can you check again to see if this merges with your beta branch?",
    "created_at": "2016-02-03T15:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266005",
    "user": "tscrim"
}
```

I looked at and merged in any ticket that was closed or on positive review that could have had a conflict with this one. Can you check again to see if this merges with your beta branch?



---

archive/issue_comments_266006.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-02-05T15:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266006",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_266007.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2016-02-05T15:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266007",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_266008.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-05T15:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266008",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266009.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-02-05T19:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266009",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_266010.json:
```json
{
    "body": "There was no conflict, but you changed the branch anyways. Why?",
    "created_at": "2016-02-05T19:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266010",
    "user": "vbraun"
}
```

There was no conflict, but you changed the branch anyways. Why?



---

archive/issue_comments_266011.json:
```json
{
    "body": "Because it showed up as red on trac, and I wanted to make sure there would be no conflict with your branch.",
    "created_at": "2016-02-05T19:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266011",
    "user": "tscrim"
}
```

Because it showed up as red on trac, and I wanted to make sure there would be no conflict with your branch.



---

archive/issue_comments_266012.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2016-02-05T19:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266012",
    "user": "tscrim"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_266013.json:
```json
{
    "body": "Please don't make changes to positively-reviewed tickets unless there is a real issue next time. If you don't get a conflict while merging then do not push.",
    "created_at": "2016-02-05T21:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266013",
    "user": "vbraun"
}
```

Please don't make changes to positively-reviewed tickets unless there is a real issue next time. If you don't get a conflict while merging then do not push.



---

archive/issue_comments_266014.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-06T21:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19358#issuecomment-266014",
    "user": "vbraun"
}
```

Resolution: fixed
