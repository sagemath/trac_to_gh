# Issue 17767: Too small relative size of axes labels w.r.t. tick marks in 2D plots

Issue created by migration from https://trac.sagemath.org/ticket/18004

Original creator: egourgoulhon

Original creation time: 2015-03-19 23:13:43

CC:  vdelecroix kcrisman

Keywords: days64

Consider this plot:


```
sage: plot(sin(x^2), (x, -3, 3), axes_labels=['$x$','$y$'])
```


The size of the labels x and y is quite small and barely readable when the figure is reproduced in a article with moderate size (cf. the attached figure).
In the current settings, the only way to enlarge it is via the optional argument fontsize:


```
sage: plot(sin(x^2), (x, -3, 3), axes_labels=['$x$','$y$'], fontsize=20)
```


But then the tick marks are too large! 
One should be able to set separately the size of the axes labels and that of the tick marks.


---

Attachment

New commits:


---

Comment by egourgoulhon created at 2015-03-19 23:34:52

The attached commit introduces an optional parameter for 2D graphics, `axes_labels_size`, which sets the size of axes labels relative to that of tick marks. The default value of this parameter has been set to 1.7 (the previous behavior would have corresponded to `axes_labels_size=1`.).


---

Comment by egourgoulhon created at 2015-03-19 23:36:21

Changing status from new to needs_review.


---

Comment by kcrisman created at 2015-03-24 17:39:08

Seems fine on the face of it but I truly have nearly zero Sage reviewing time these days.  Wait until school lets out and I'll have a mountain of reviews for you, I'm sure :-)


---

Comment by vdelecroix created at 2015-04-11 13:25:57

Changing status from needs_review to needs_info.


---

Comment by vdelecroix created at 2015-04-11 13:25:57

Hello,

If you set

```
+ self._axes_labels_size = 1.7
```

in the class Graphics, why would you need this `try/except` block

```
+ try:
+     return self._axes_labels_size
+ except AttributeError:
+     self._axes_labels_size = 1.7
+     return self._axes_labels_size
```


Vincent


---

Comment by egourgoulhon created at 2015-04-11 14:08:20

Hi Vincent,

You are perfectly right! I am going to change this.
Btw, the same occurs for the attribute `_fontsize` (probably I did a copy-and-paste of the latter...): there is

```
self._fontsize = 10
```

in `Graphics.__init__` and

```
            try:
                return self._fontsize
            except AttributeError:
                self._fontsize = 10
                return self._fontsize
```

in `Graphics.fontsize`. 
Shall we correct it as well, although this does not pertain to the current ticket ? 

Replying to [comment:7 vdelecroix]:
> Hello,
> 
> If you set
> {{{
> + self._axes_labels_size = 1.7
> }}}
> in the class Graphics, why would you need this `try/except` block
> {{{
> + try:
> +     return self._axes_labels_size
> + except AttributeError:
> +     self._axes_labels_size = 1.7
> +     return self._axes_labels_size
> }}}
> 
> Vincent


---

Comment by vdelecroix created at 2015-04-11 14:09:09

Replying to [comment:9 egourgoulhon]:
> Hi Vincent,
> 
> You are perfectly right! I am going to change this.
> Btw, the same occurs for the attribute `_fontsize` (probably I did a copy-and-paste of the latter...): there is
> {{{
> self._fontsize = 10
> }}}
> in `Graphics.__init__` and
> {{{
>             try:
>                 return self._fontsize
>             except AttributeError:
>                 self._fontsize = 10
>                 return self._fontsize
> }}}
> in `Graphics.fontsize`. 
> Shall we correct it as well, although this does not pertain to the current ticket ? 

Sure. Do it at the same time.

Vincent


---

Comment by egourgoulhon created at 2015-04-11 14:42:19

Replying to [comment:10 vdelecroix]:
> 
> > Shall we correct it as well, although this does not pertain to the current ticket ? 
> 
> Sure. Do it at the same time.

A systematic search for `AttributeError` in graphics.py reveals that the same issue occurs for the attributes
`_show_axes`, `_axes_color`, `_axes_label_color`, `_axes_width` and `_tick_label_colors`.
So I guess we shall correct these as well?... The only possible justification is that the current implementation is more robust in case of a derived class of `Graphics`, `A` let us say, such that `A.__init__()` does not call `Graphics.__init__()` (but this is bad design IMHO).  

Eric.


---

Comment by vdelecroix created at 2015-04-11 14:44:44

Replying to [comment:11 egourgoulhon]:
> Replying to [comment:10 vdelecroix]:
> > 
> > > Shall we correct it as well, although this does not pertain to the current ticket ? 
> > 
> > Sure. Do it at the same time.
> 
> A systematic search for `AttributeError` in graphics.py reveals that the same issue occurs for the attributes
> `_show_axes`, `_axes_color`, `_axes_label_color`, `_axes_width` and `_tick_label_colors`.
> So I guess we shall correct these as well?... The only possible justification is that the current implementation is more robust in case of a derived class of `Graphics`, `A` let us say, such that `A.__init__()` does not call `Graphics.__init__()` (but this is bad design IMHO).  

Right. The simplest would be to let it as you initially did... sorry.

Vincent


---

Comment by egourgoulhon created at 2015-04-11 15:32:50

Replying to [comment:12 vdelecroix]:
> Replying to [comment:11 egourgoulhon]:
> > Replying to [comment:10 vdelecroix]:
> > > 
> > > > Shall we correct it as well, although this does not pertain to the current ticket ? 
> > > 
> > > Sure. Do it at the same time.
> > 
> > A systematic search for `AttributeError` in graphics.py reveals that the same issue occurs for the attributes
> > `_show_axes`, `_axes_color`, `_axes_label_color`, `_axes_width` and `_tick_label_colors`.
> > So I guess we shall correct these as well?... The only possible justification is that the current implementation is more robust in case of a derived class of `Graphics`, `A` let us say, such that `A.__init__()` does not call `Graphics.__init__()` (but this is bad design IMHO).  
> 
> Right. The simplest would be to let it as you initially did... sorry.

OK. 
Btw note that the case of `_axes_width` looks strange: in `Graphics.__init__()`, one has

```
        self._axes_width = 0.8
```

while in `Graphics.axes_width()` there is

```
            try:
                return self._axes_width
            except AttributeError:
                self._axes_width = True
                return self._axes_width
```

Shouldn't it be there `self._axes_width = 0.8` for consistency ? 

Eric.


> 
> Vincent


---

Comment by vdelecroix created at 2015-04-11 16:13:19

Replying to [comment:13 egourgoulhon]:
> Shouldn't it be there `self._axes_width = 0.8` for consistency ? 

True. But I suggest to not do it here and open a new ticket and get rid of all these try/except.

Vincent


---

Comment by egourgoulhon created at 2015-04-15 11:41:15

Hi,

Another point that could be discussed is the default value of the new parameter `axes_labels_size`: I've set it to 1.7 for it looks good for small labels like $x$ and $y$, but maybe it can be lowered a little bit, to 1.6 or 1.5 say, to accomodate for larger labels. Of course, this can be adjusted by the user (the whole point of this ticket!), but it's always nice if the default value fits most usages.


---

Comment by egourgoulhon created at 2015-04-20 05:47:09

Changing status from needs_info to needs_review.


---

Comment by vdelecroix created at 2015-04-20 09:32:23

Hello Eric,

You added two trailing whitespaces! This is very bad.

The problem with the right size is that it depends if the label is in math mode (like `$x$`) or not (like `x`). I would say that:
 - 1.4 is a good default for non math mode
 - 1.7 is a good default for math mode

I just tried

```
plot(x^2, (x,0,1), axes_labels=('x','$x$'), axes_labels_size=1.7)
```

There is a big difference in the aspects of both letters!

What do people use, `label='x'` or `label='$x$'`?

Vincent


---

Comment by egourgoulhon created at 2015-04-20 11:43:26

Hi Vincent, 

Replying to [comment:17 vdelecroix]:
> 
> You added two trailing whitespaces! This is very bad.

Sorry about this. Yet I've configured my editor to automatically removing trailing whitespaces while saving a file. Apparently two of them went through...

> 
> The problem with the right size is that it depends if the label is in math mode (like `$x$`) or not (like `x`). I would say that:
>  - 1.4 is a good default for non math mode
>  - 1.7 is a good default for math mode
> 
> I just tried
> {{{
> plot(x^2, (x,0,1), axes_labels=('x','$x$'), axes_labels_size=1.7)
> }}}
> There is a big difference in the aspects of both letters!

You are right!

> 
> What do people use, `label='x'` or `label='$x$'`?
> 

Probably it depends, but if you want to have nice labels (in particular labels that coincide with the symbols used in the main text of your article or labels with subscripts or Greek letters), LaTeX seems mandatory. So I would favor the math mode. Maybe lowered to 1.6 as a compromise?...
 
Eric.


---

Comment by vdelecroix created at 2015-04-20 11:47:37

Replying to [comment:18 egourgoulhon]:
> Replying to [comment:17 vdelecroix]:
> So I would favor the math mode. Maybe lowered to 1.6 as a compromise?...

Looks reasonable to me.

Vincent


---

Comment by git created at 2015-04-20 15:31:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2015-04-20 15:34:02

Replying to [comment:19 vdelecroix]:
> Replying to [comment:18 egourgoulhon]:
> > Replying to [comment:17 vdelecroix]:
> > So I would favor the math mode. Maybe lowered to 1.6 as a compromise?...
> 
> Looks reasonable to me.

All right; in the new commit, I've set the default value to 1.6. 

Eric.


---

Comment by vdelecroix created at 2015-04-20 16:00:23

Good to go then. Thanks.

Vincent


---

Comment by vdelecroix created at 2015-04-20 16:00:23

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2015-04-20 19:23:08

Thanks for the review Vincent!


---

Comment by vbraun created at 2015-04-21 00:10:55

Resolution: fixed


---

Comment by kcrisman created at 2015-05-14 15:00:18

See #18421 for followup.
