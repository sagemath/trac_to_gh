# Issue 21649: sage --gdb not working

archive/issues_021649.json:
```json
{
    "body": "\n```\nralf@ark:~/sage> ./sage --gdb\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.5.beta2, Release Date: 2016-11-09               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nUsage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\nNo debug files were found in /home/ralf/sage/src/build. Aborting.\n```\n\nThis is with gdb package installed, and Sage compiled with `SAGE_INTERNAL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21886\n\n",
    "created_at": "2016-11-17T15:11:32Z",
    "labels": [
        "scripts",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "sage --gdb not working",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21649",
    "user": "@rwst"
}
```

```
ralf@ark:~/sage> ./sage --gdb
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.5.beta2, Release Date: 2016-11-09               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
No debug files were found in /home/ralf/sage/src/build. Aborting.
```

This is with gdb package installed, and Sage compiled with `SAGE_INTERNAL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.

Issue created by migration from https://trac.sagemath.org/ticket/21886





---

archive/issue_comments_300695.json:
```json
{
    "body": "It works if I explicitly set `SAGE_DEBUG=no`. I think my problem was that here\n\n```\n    if [ \"$SAGE_DEBUG\" = \"no\" ]; then\n        gdb -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" \\\n            -args python \"$SAGE_LOCAL/bin/sage-ipython\" \"$@\" -i\n    else\n        cygdb \"$SAGE_SRC/build\" \"$SAGE_SRC/sage\" \\\n            -- -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" \\\n            -args python \"$SAGE_LOCAL/bin/sage-ipython\" \"$@\" -i\n    fi\n```\n\nis checked for \"no\" instead of not \"yes\".\n\n(EDIT) That leaves the issue of cygdb. I adapt the ticket heading.",
    "created_at": "2016-11-17T15:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300695",
    "user": "@rwst"
}
```

It works if I explicitly set `SAGE_DEBUG=no`. I think my problem was that here

```
    if [ "$SAGE_DEBUG" = "no" ]; then
        gdb -x "$SAGE_LOCAL/bin/sage-gdb-commands" \
            -args python "$SAGE_LOCAL/bin/sage-ipython" "$@" -i
    else
        cygdb "$SAGE_SRC/build" "$SAGE_SRC/sage" \
            -- -x "$SAGE_LOCAL/bin/sage-gdb-commands" \
            -args python "$SAGE_LOCAL/bin/sage-ipython" "$@" -i
    fi
```

is checked for "no" instead of not "yes".

(EDIT) That leaves the issue of cygdb. I adapt the ticket heading.



---

archive/issue_comments_300696.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-19T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300696",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_300697.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-11-19T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300697",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_300698.json:
```json
{
    "body": "Thanks, it works now.",
    "created_at": "2016-11-20T09:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300698",
    "user": "@rwst"
}
```

Thanks, it works now.



---

archive/issue_comments_300699.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-20T09:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300699",
    "user": "@rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_300700.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-21T21:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21649#issuecomment-300700",
    "user": "@vbraun"
}
```

Resolution: fixed
