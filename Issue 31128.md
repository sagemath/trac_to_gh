# Issue 31128: Add NTL to cython_aliases

Issue created by migration from https://trac.sagemath.org/ticket/31365

Original creator: mkoeppe

Original creation time: 2021-02-09 02:54:06

CC:  @zlscherr dimpase mjo vdelecroix @kliem jhpalmieri fbissey

(from #31348)

... using `SAGE_NTL_PREFIX` via `sage_conf`.


---

Comment by git created at 2021-02-09 06:22:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-02-09 06:24:09

Actually `spkg-configure.m4` needs some work too - need to use `AX_ABSOLUTE_HEADER` to set `SAGE_NTL_PREFIX`


---

Comment by git created at 2021-02-11 03:36:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-02-11 04:28:16

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-02-11 06:56:32

NTL_INCDIR, NTL_LIBDIR needs more work.

```
NTL_INCDIR = ".
.
///usr/include/NTL"
```



---

Comment by mkoeppe created at 2021-02-11 06:56:32

Changing status from needs_review to needs_work.


---

Comment by git created at 2021-02-11 07:26:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-02-11 07:27:10

Changing status from needs_work to needs_review.


---

Comment by git created at 2021-02-12 00:46:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-02-16 10:45:17

You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?


---

Comment by @kliem created at 2021-02-16 10:56:28

I'm a bit confused:

In `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?


---

Comment by @kliem created at 2021-02-16 12:08:33

Replying to [comment:16 gh-kliem]:
> You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?

Ok, I see:


```
[sagelib-9.3.beta7] cc1: warning: command line option ‘-std=c++11’ is valid for C++/ObjC++ but not for C
[sagelib-9.3.beta7] cc1: warning: command line option ‘-std=c++11’ is valid for C++/ObjC++ but not for C
```


Which raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.


---

Comment by mkoeppe created at 2021-02-16 15:10:37

Replying to [comment:17 gh-kliem]:
> In `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?

`sage.misc.cython` is only for runtime use of Cython; it is not used by the sagelib build system.


---

Comment by mkoeppe created at 2021-02-16 15:11:22

Replying to [comment:19 gh-kliem]:
> Which raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.

The names follow the conventions of `pkg-config` - which does not make this distinction.


---

Comment by @kliem created at 2021-02-16 15:18:02

Ok. LGTM.


---

Comment by @kliem created at 2021-02-16 15:18:02

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-02-16 15:53:02

Thank you!


---

Comment by vbraun created at 2021-03-09 00:01:40

Resolution: fixed
