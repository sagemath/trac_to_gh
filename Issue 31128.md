# Issue 31128: Add NTL to cython_aliases

archive/issues_031128.json:
```json
{
    "body": "CC:  @zlscherr dimpase mjo vdelecroix @kliem jhpalmieri fbissey\n\n(from #31348)\n\n... using `SAGE_NTL_PREFIX` via `sage_conf`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31365\n\n",
    "created_at": "2021-02-09T02:54:06Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "title": "Add NTL to cython_aliases",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31128",
    "user": "mkoeppe"
}
```
CC:  @zlscherr dimpase mjo vdelecroix @kliem jhpalmieri fbissey

(from #31348)

... using `SAGE_NTL_PREFIX` via `sage_conf`.

Issue created by migration from https://trac.sagemath.org/ticket/31365





---

archive/issue_comments_444696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-09T06:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444696",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444697.json:
```json
{
    "body": "Actually `spkg-configure.m4` needs some work too - need to use `AX_ABSOLUTE_HEADER` to set `SAGE_NTL_PREFIX`",
    "created_at": "2021-02-09T06:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444697",
    "user": "mkoeppe"
}
```

Actually `spkg-configure.m4` needs some work too - need to use `AX_ABSOLUTE_HEADER` to set `SAGE_NTL_PREFIX`



---

archive/issue_comments_444698.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-11T03:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444698",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444699.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-11T04:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444699",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_444700.json:
```json
{
    "body": "NTL_INCDIR, NTL_LIBDIR needs more work.\n\n```\nNTL_INCDIR = \".\n.\n///usr/include/NTL\"\n```\n",
    "created_at": "2021-02-11T06:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444700",
    "user": "mkoeppe"
}
```

NTL_INCDIR, NTL_LIBDIR needs more work.

```
NTL_INCDIR = ".
.
///usr/include/NTL"
```




---

archive/issue_comments_444701.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-11T06:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444701",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_444702.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-11T07:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444702",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444703.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-02-11T07:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444703",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_444704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-12T00:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444704",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444705.json:
```json
{
    "body": "You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?",
    "created_at": "2021-02-16T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444705",
    "user": "@kliem"
}
```

You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?



---

archive/issue_comments_444706.json:
```json
{
    "body": "I'm a bit confused:\n\nIn `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?",
    "created_at": "2021-02-16T10:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444706",
    "user": "@kliem"
}
```

I'm a bit confused:

In `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?



---

archive/issue_comments_444707.json:
```json
{
    "body": "Replying to [comment:16 gh-kliem]:\n> You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?\n\nOk, I see:\n\n\n```\n[sagelib-9.3.beta7] cc1: warning: command line option \u2018-std=c++11\u2019 is valid for C++/ObjC++ but not for C\n[sagelib-9.3.beta7] cc1: warning: command line option \u2018-std=c++11\u2019 is valid for C++/ObjC++ but not for C\n```\n\n\nWhich raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.",
    "created_at": "2021-02-16T12:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444707",
    "user": "@kliem"
}
```

Replying to [comment:16 gh-kliem]:
> You changed `src/sage/rings/rational.pyx` and `src/sage/matrix/matrix_rational_dense.pyx` to language `c++`. Is there a reason for this?

Ok, I see:


```
[sagelib-9.3.beta7] cc1: warning: command line option ‘-std=c++11’ is valid for C++/ObjC++ but not for C
[sagelib-9.3.beta7] cc1: warning: command line option ‘-std=c++11’ is valid for C++/ObjC++ but not for C
```


Which raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.



---

archive/issue_comments_444708.json:
```json
{
    "body": "Replying to [comment:17 gh-kliem]:\n> In `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?\n\n`sage.misc.cython` is only for runtime use of Cython; it is not used by the sagelib build system.",
    "created_at": "2021-02-16T15:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444708",
    "user": "mkoeppe"
}
```

Replying to [comment:17 gh-kliem]:
> In `src/sage/misc/cython.py` we add `NTL_LIBDIR` to `standard_libdirs` and likewise we add `NTL_INCDIR` to `standard_incdirs`. Why do we need to add this to every file again that uses ntl?

`sage.misc.cython` is only for runtime use of Cython; it is not used by the sagelib build system.



---

archive/issue_comments_444709.json:
```json
{
    "body": "Replying to [comment:19 gh-kliem]:\n> Which raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.\n\nThe names follow the conventions of `pkg-config` - which does not make this distinction.",
    "created_at": "2021-02-16T15:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444709",
    "user": "mkoeppe"
}
```

Replying to [comment:19 gh-kliem]:
> Which raises a bit the question, why its called `NTL_CFLAGS` and not `NTL_CXXFLAGS`.

The names follow the conventions of `pkg-config` - which does not make this distinction.



---

archive/issue_comments_444710.json:
```json
{
    "body": "Ok. LGTM.",
    "created_at": "2021-02-16T15:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444710",
    "user": "@kliem"
}
```

Ok. LGTM.



---

archive/issue_comments_444711.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-16T15:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444711",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_444712.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-02-16T15:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444712",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_444713.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-09T00:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31128#issuecomment-444713",
    "user": "vbraun"
}
```

Resolution: fixed
