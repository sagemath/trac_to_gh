# Issue 32053: Fix polytopes_db_4d optional doctest

archive/issues_032053.json:
```json
{
    "body": "Keywords: palp_database, polytopes_db_4d\n\nPart of #25536.\n\nWith optional package `polytopes_db_4d` installed:\n\n```\n$ git branch -v\n* develop  bd073b49ba  Updated SageMath version to 9.4.rc0\n$ OPT='build,dochtml,pip,polytopes_db_4d,sage,sage_spkg'\n$ alias sagetest=\"sage -t --long --optional=$OPT\"\n$ sagetest src/sage/geometry/polyhedron/palp_database.py\n...\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/palp_database.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/palp_database.py\", line 427, in sage.geometry.polyhedron.palp_database.Reflexive4dHodge.__init__\nFailed example:\n    Reflexive4dHodge(1,101)  # optional - polytopes_db_4d\nExpected:\n    <class 'sage.geometry.polyhedron.palp_database.Reflexive4dHodge'>\nGot:\n    <sage.geometry.polyhedron.palp_database.Reflexive4dHodge object at 0x7fbe34dfb828>\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.geometry.polyhedron.palp_database.Reflexive4dHodge.__init__\n    [64 tests, 1 failure, 1.63 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 1.7 seconds\n    cpu time: 1.3 seconds\n    cumulative wall time: 1.6 seconds\nPytest is not installed, skip checking tests that rely on it.\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32290\n\n",
    "created_at": "2021-07-28T15:19:13Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "title": "Fix polytopes_db_4d optional doctest",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32053",
    "user": "slelievre"
}
```
Keywords: palp_database, polytopes_db_4d

Part of #25536.

With optional package `polytopes_db_4d` installed:

```
$ git branch -v
* develop  bd073b49ba  Updated SageMath version to 9.4.rc0
$ OPT='build,dochtml,pip,polytopes_db_4d,sage,sage_spkg'
$ alias sagetest="sage -t --long --optional=$OPT"
$ sagetest src/sage/geometry/polyhedron/palp_database.py
...
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/palp_database.py
**********************************************************************
File "src/sage/geometry/polyhedron/palp_database.py", line 427, in sage.geometry.polyhedron.palp_database.Reflexive4dHodge.__init__
Failed example:
    Reflexive4dHodge(1,101)  # optional - polytopes_db_4d
Expected:
    <class 'sage.geometry.polyhedron.palp_database.Reflexive4dHodge'>
Got:
    <sage.geometry.polyhedron.palp_database.Reflexive4dHodge object at 0x7fbe34dfb828>
**********************************************************************
1 item had failures:
   1 of   3 in sage.geometry.polyhedron.palp_database.Reflexive4dHodge.__init__
    [64 tests, 1 failure, 1.63 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 1.7 seconds
    cpu time: 1.3 seconds
    cumulative wall time: 1.6 seconds
Pytest is not installed, skip checking tests that rely on it.
```


Issue created by migration from https://trac.sagemath.org/ticket/32290





---

archive/issue_comments_457640.json:
```json
{
    "body": "Here is a branch with this proposed change:\n\n```diff\n             sage: from sage.geometry.polyhedron.palp_database import Reflexive4dHodge\n             sage: Reflexive4dHodge(1,101)  # optional - polytopes_db_4d\n-            <class 'sage.geometry.polyhedron.palp_database.Reflexive4dHodge'>\n+            <sage.geometry.polyhedron.palp_database.Reflexive4dHodge object at ...>\n         \"\"\"\n         dim = 4\n         if data_basename is None:\n```\n\n\nDid that change between Python 2 and Python 3?\n\nOr among Python 3.y.z versions, can it can depend on y?\n----\nNew commits:",
    "created_at": "2021-07-28T15:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457640",
    "user": "slelievre"
}
```

Here is a branch with this proposed change:

```diff
             sage: from sage.geometry.polyhedron.palp_database import Reflexive4dHodge
             sage: Reflexive4dHodge(1,101)  # optional - polytopes_db_4d
-            <class 'sage.geometry.polyhedron.palp_database.Reflexive4dHodge'>
+            <sage.geometry.polyhedron.palp_database.Reflexive4dHodge object at ...>
         """
         dim = 4
         if data_basename is None:
```


Did that change between Python 2 and Python 3?

Or among Python 3.y.z versions, can it can depend on y?
----
New commits:



---

archive/issue_comments_457641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-28T15:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457641",
    "user": "slelievre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_457642.json:
```json
{
    "body": "LGTM",
    "created_at": "2021-08-03T01:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457642",
    "user": "mkoeppe"
}
```

LGTM



---

archive/issue_comments_457643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-03T01:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457643",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_457644.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-08-03T07:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457644",
    "user": "slelievre"
}
```

Thanks!



---

archive/issue_comments_457645.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-01T20:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32053#issuecomment-457645",
    "user": "vbraun"
}
```

Resolution: fixed
