# Issue 19279: Posets: Add add_bounds()

Issue created by migration from https://trac.sagemath.org/ticket/19516

Original creator: jmantysalo

Original creation time: 2015-11-04 05:18:32

CC:  kdilks ncohen

Add a function that adds a bottom and a top element to a poset.

(I.e. return a new poset with bounds added, as posets are immutable.)



---

Comment by jmantysalo created at 2015-11-04 05:22:02

Kevin: I am mostly interested in abstract posets, so it is fine to just relabel the result to integers.

But what about others? Should the new top element be string 'top', for example? What if the poset already contains it? Or make a pairs, so that `'a'` in the original poset would be `('a', 0)` in the new poset?


---

Comment by jmantysalo created at 2015-11-09 14:43:50

Nathann, any opinions? The code works, but

1) What should be the name of the function? This does not modify the poset, so "add"-something seems wrong.

2) What about default value of top and bottom elements?
----
New commits:


---

Comment by ncohen created at 2015-11-09 16:05:08

Hello,

1) What about `add_top_and_bottom(inplace=False)` which does both inplace and a copy?

2) `add_top_and_bottom(min_element,max_element,inplace=False)`?

Nathann


---

Comment by ncohen created at 2015-11-09 16:06:12

Oh. I forgot that posets couldn't be mutated inplace. Well.... Then `with_top_and_bottom`? I don't like it much either ... `:-/`

Nathann


---

Comment by jmantysalo created at 2015-11-09 16:28:57

Better yet: `with_bounds`.

It could be good to have `with_bounds(min_element='bottom', max_element='top')`. But to be consistent with other functions there should be way to think posets as abstract structures, i.e. something like `labels='integers'`. Is it too complicated to have three parameter? Maybe not.

I'll make some code according to this.


---

Comment by git created at 2015-11-10 07:29:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-11-10 07:32:20

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2015-11-10 07:32:20

I am not sure about this. So this interface can be extended later; there is no `integers`-option. At least the user can say `P.with_bounds().canonical_label()`.


---

Comment by chapoton created at 2015-11-15 17:23:37

please add a test to record what happens when one of the labels already exists.


---

Comment by ncohen created at 2015-11-15 17:25:26

(comment removed: I'm an idiot)


---

Comment by git created at 2015-11-15 21:13:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-11-15 21:15:25

Replying to [comment:9 chapoton]:

> please add a test to record what happens when one of the labels already exists.

Done this.


---

Comment by chapoton created at 2015-11-16 16:36:22

ok, nearly good to go. just two remaining typos:

in the first line, "Return the poset with bottom and top element*s* adjoined."

in the next line, "This functions always adds two new elements to *the* poset, i.e."

Once corrected, you can set a positive review


---

Comment by git created at 2015-11-16 18:54:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-11-16 19:00:11

Marked positive as said in comment 13.


---

Comment by jmantysalo created at 2015-11-16 19:00:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-11-16 19:10:28

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-11-16 19:10:28

Merge conflict, probably #19113


---

Comment by git created at 2015-11-23 07:30:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-11-23 07:32:23

Again needs_review. Frédéric, should I mark this kind of tickets directly as positive_review?

The only change I made is in index of functions: "cartesian product" to "Cartesian product".


---

Comment by jmantysalo created at 2015-11-23 07:32:23

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2015-11-23 08:22:15

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-11-24 13:01:29

Resolution: fixed
