# Issue 18410: Automatically update new-style optional packages

archive/issues_018410.json:
```json
{
    "body": "CC:  @vbraun @jdemeyer @jhpalmieri @kcrisman\n\nWith this branch, new-style installed optional packages which have not been installed to their latest available version are automatically updated during 'make'.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/18647\n\n",
    "created_at": "2015-06-09T14:33:19Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Automatically update new-style optional packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18410",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @vbraun @jdemeyer @jhpalmieri @kcrisman

With this branch, new-style installed optional packages which have not been installed to their latest available version are automatically updated during 'make'.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/18647





---

archive/issue_comments_249759.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-09T14:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249759",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249760.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-09T14:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249760",
    "user": "https://github.com/nathanncohen"
}
```

New commits:



---

archive/issue_comments_249761.json:
```json
{
    "body": "I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.",
    "created_at": "2015-06-09T14:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249761",
    "user": "https://github.com/jdemeyer"
}
```

I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.



---

archive/issue_comments_249762.json:
```json
{
    "body": "> I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.\n\nThen you must figure out which optional packages depend on which standard packages.\n\n(it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice)",
    "created_at": "2015-06-09T14:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249762",
    "user": "https://github.com/nathanncohen"
}
```

> I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.

Then you must figure out which optional packages depend on which standard packages.

(it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice)



---

archive/issue_comments_249763.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n> > I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.\n> \n> Then you must figure out which optional packages depend on which standard packages.\n\nIf the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.",
    "created_at": "2015-06-09T15:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249763",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 ncohen]:
> > I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.
> 
> Then you must figure out which optional packages depend on which standard packages.

If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.



---

archive/issue_comments_249764.json:
```json
{
    "body": "> If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.\n\nIndeed, this is how it should have been implemented from the start. For you will agree that the problem already exists: if some optional package does not state its dependencies and if 'pari' (to take your example) is updated, the package is not re-built. At the moment, only gcc, scons, python2 and python3 state their dependencies.\n\nThus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem. You are welcome to address it -- and I will be glad to help -- but it is not a dependency of this ticket.\n\nNathann",
    "created_at": "2015-06-09T15:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249764",
    "user": "https://github.com/nathanncohen"
}
```

> If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.

Indeed, this is how it should have been implemented from the start. For you will agree that the problem already exists: if some optional package does not state its dependencies and if 'pari' (to take your example) is updated, the package is not re-built. At the moment, only gcc, scons, python2 and python3 state their dependencies.

Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem. You are welcome to address it -- and I will be glad to help -- but it is not a dependency of this ticket.

Nathann



---

archive/issue_comments_249765.json:
```json
{
    "body": "By the way, fixing the dependencies can be done quite easily: by adding the necessary information in the build/<package/dependencies files you will get the result that you want. And we can merge the two rules together once we are sure that no dependency is missing.",
    "created_at": "2015-06-09T15:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249765",
    "user": "https://github.com/nathanncohen"
}
```

By the way, fixing the dependencies can be done quite easily: by adding the necessary information in the build/<package/dependencies files you will get the result that you want. And we can merge the two rules together once we are sure that no dependency is missing.



---

archive/issue_comments_249766.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem.\nBut setting up the right framework such that dependencies *can* be considered is within the scope of this ticket.\n\nEasy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.",
    "created_at": "2015-06-09T15:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249766",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:5 ncohen]:
> Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem.
But setting up the right framework such that dependencies *can* be considered is within the scope of this ticket.

Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.



---

archive/issue_comments_249767.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n> it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice\nSince many standard packages depend on Python, adding a dependency on `$(STANDARD_PACKAGES)` indirectly adds a dependency on Python.",
    "created_at": "2015-06-09T15:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249767",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 ncohen]:
> it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice
Since many standard packages depend on Python, adding a dependency on `$(STANDARD_PACKAGES)` indirectly adds a dependency on Python.



---

archive/issue_comments_249768.json:
```json
{
    "body": "> Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.\n\nDead right. Will be done in a second.",
    "created_at": "2015-06-09T15:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249768",
    "user": "https://github.com/nathanncohen"
}
```

> Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.

Dead right. Will be done in a second.



---

archive/issue_comments_249769.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-09T15:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249770.json:
```json
{
    "body": "Not `mpir` and `gmp`.",
    "created_at": "2015-06-09T15:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249770",
    "user": "https://github.com/jdemeyer"
}
```

Not `mpir` and `gmp`.



---

archive/issue_comments_249771.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-09T15:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249771",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249772.json:
```json
{
    "body": "As a consequence: all optional packages have (and *MUST* have) a /dependencies file.\n\nShould we check this somewhere?",
    "created_at": "2015-06-09T15:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249772",
    "user": "https://github.com/nathanncohen"
}
```

As a consequence: all optional packages have (and *MUST* have) a /dependencies file.

Should we check this somewhere?



---

archive/issue_comments_249773.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-09T15:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249774.json:
```json
{
    "body": "Right. Fixed. Cursed be those non-optional optional packages.",
    "created_at": "2015-06-09T15:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249774",
    "user": "https://github.com/nathanncohen"
}
```

Right. Fixed. Cursed be those non-optional optional packages.



---

archive/issue_comments_249775.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> Right. Fixed. Cursed be those non-optional optional packages.\nWell, I proposed a new category for these packages :-)\n\nI also wonder if we can use\n\n```\nif [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]\n```\n\nsince that will not work if there is more than 1 matching file.",
    "created_at": "2015-06-09T15:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249775",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 ncohen]:
> Right. Fixed. Cursed be those non-optional optional packages.
Well, I proposed a new category for these packages :-)

I also wonder if we can use

```
if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]
```

since that will not work if there is more than 1 matching file.



---

archive/issue_comments_249776.json:
```json
{
    "body": "> Well, I proposed a new category for these packages :-)\n\nOh. The alternative guys?\n\n> I also wonder if we can use\n> {{{\n> if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]\n> }}}\n> since that will not work if there is more than 1 matching file.\n\nI think that's okay, for you made it quite clear that a version number must be split from the name by a '-'? I don't mind adding code that checks that somewhere if you think it necessary, but renaming the packages that do not respect this may take quite some time.\n\nNathann",
    "created_at": "2015-06-09T15:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249776",
    "user": "https://github.com/nathanncohen"
}
```

> Well, I proposed a new category for these packages :-)

Oh. The alternative guys?

> I also wonder if we can use
> {{{
> if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]
> }}}
> since that will not work if there is more than 1 matching file.

I think that's okay, for you made it quite clear that a version number must be split from the name by a '-'? I don't mind adding code that checks that somewhere if you think it necessary, but renaming the packages that do not respect this may take quite some time.

Nathann



---

archive/issue_comments_249777.json:
```json
{
    "body": "Replying to [comment:16 ncohen]:\n> I think that's okay\n\nRight, I agree.",
    "created_at": "2015-06-09T17:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249777",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:16 ncohen]:
> I think that's okay

Right, I agree.



---

archive/issue_comments_249778.json:
```json
{
    "body": "I don't think this works correctly for `gcc`. If `gcc` needs to be reinstalled, it should be added to `$(TOOLCHAIN)`. The problem is that installing `gcc` while installing a different package will eventually lead to trouble.",
    "created_at": "2015-06-09T17:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249778",
    "user": "https://github.com/jdemeyer"
}
```

I don't think this works correctly for `gcc`. If `gcc` needs to be reinstalled, it should be added to `$(TOOLCHAIN)`. The problem is that installing `gcc` while installing a different package will eventually lead to trouble.



---

archive/issue_comments_249779.json:
```json
{
    "body": "For `gcc`, we already have logic in `build/install` to decide whether it should be (re-)installed. You shouldn't interfere with that.",
    "created_at": "2015-06-09T17:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249779",
    "user": "https://github.com/jdemeyer"
}
```

For `gcc`, we already have logic in `build/install` to decide whether it should be (re-)installed. You shouldn't interfere with that.



---

archive/issue_comments_249780.json:
```json
{
    "body": "So I filter it out?",
    "created_at": "2015-06-09T17:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249780",
    "user": "https://github.com/nathanncohen"
}
```

So I filter it out?



---

archive/issue_comments_249781.json:
```json
{
    "body": "Replying to [comment:20 ncohen]:\n> So I filter it out?\nOr change the `type` to something else (if you don't want to add a new type, it must be `base`)",
    "created_at": "2015-06-09T17:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249781",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:20 ncohen]:
> So I filter it out?
Or change the `type` to something else (if you don't want to add a new type, it must be `base`)



---

archive/issue_comments_249782.json:
```json
{
    "body": "HMmmmmmmm... If I rename it to 'base' it will be automatically installed. I'll just filter it out. Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...\n\nNathann",
    "created_at": "2015-06-09T18:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249782",
    "user": "https://github.com/nathanncohen"
}
```

HMmmmmmmm... If I rename it to 'base' it will be automatically installed. I'll just filter it out. Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...

Nathann



---

archive/issue_comments_249783.json:
```json
{
    "body": "Replying to [comment:22 ncohen]:\n> HMmmmmmmm... If I rename it to 'base' it will be automatically installed.\nWhy? Since when are we automatically installing `base` packages?\n\n> Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...\nRead the last sentence of [comment:18]",
    "created_at": "2015-06-09T18:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249783",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:22 ncohen]:
> HMmmmmmmm... If I rename it to 'base' it will be automatically installed.
Why? Since when are we automatically installing `base` packages?

> Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...
Read the last sentence of [comment:18]



---

archive/issue_comments_249784.json:
```json
{
    "body": "> Why? Since when are we automatically installing `base` packages?\n\nWell, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually. Probably because of gcc actually.\n\n> Read the last sentence of [comment:18]\n\nOkay, so tha's because gcc is gcc. I'll filter it out.\n\nNathann",
    "created_at": "2015-06-09T19:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249784",
    "user": "https://github.com/nathanncohen"
}
```

> Why? Since when are we automatically installing `base` packages?

Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually. Probably because of gcc actually.

> Read the last sentence of [comment:18]

Okay, so tha's because gcc is gcc. I'll filter it out.

Nathann



---

archive/issue_comments_249785.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T19:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249786.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-09T19:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249786",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249787.json:
```json
{
    "body": "I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.",
    "created_at": "2015-06-09T20:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249787",
    "user": "https://github.com/jhpalmieri"
}
```

I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.



---

archive/issue_comments_249788.json:
```json
{
    "body": "> I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.\n\nWell... There would be less things in the files for sure, but a new rule which is rather hard to figure out by yourself. Honestly I don't know... Jeroen?",
    "created_at": "2015-06-09T20:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249788",
    "user": "https://github.com/nathanncohen"
}
```

> I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.

Well... There would be less things in the files for sure, but a new rule which is rather hard to figure out by yourself. Honestly I don't know... Jeroen?



---

archive/issue_comments_249789.json:
```json
{
    "body": "If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.",
    "created_at": "2015-06-09T20:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249789",
    "user": "https://github.com/nathanncohen"
}
```

If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.



---

archive/issue_comments_249790.json:
```json
{
    "body": "Really I do not know. I don't mind implementing it if you are both convinced that it is a good idea, but really I don't know.",
    "created_at": "2015-06-09T20:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249790",
    "user": "https://github.com/nathanncohen"
}
```

Really I do not know. I don't mind implementing it if you are both convinced that it is a good idea, but really I don't know.



---

archive/issue_comments_249791.json:
```json
{
    "body": "Replying to [comment:29 ncohen]:\n> If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.\nNo, the dependency `| $(STANDARD_PACKAGES)` is not a real dependency, it's just because we are too lazy to add the correct dependencies.\n\nSo, I think John's proposal might be good (but be sure to keep the empty dependencies for `mpir` and `gmp`)",
    "created_at": "2015-06-09T20:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249791",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:29 ncohen]:
> If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.
No, the dependency `| $(STANDARD_PACKAGES)` is not a real dependency, it's just because we are too lazy to add the correct dependencies.

So, I think John's proposal might be good (but be sure to keep the empty dependencies for `mpir` and `gmp`)



---

archive/issue_comments_249792.json:
```json
{
    "body": "Okayokay, no problem then. I'll do that tomorrow morning (sorry guys, I really need to sleep `^^;`)",
    "created_at": "2015-06-09T20:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249792",
    "user": "https://github.com/nathanncohen"
}
```

Okayokay, no problem then. I'll do that tomorrow morning (sorry guys, I really need to sleep `^^;`)



---

archive/issue_comments_249793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-10T08:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249794.json:
```json
{
    "body": "Here it is. I rewrote history, so that one commit does not undo what the previous does.\n\nNathann",
    "created_at": "2015-06-10T08:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249794",
    "user": "https://github.com/nathanncohen"
}
```

Here it is. I rewrote history, so that one commit does not undo what the previous does.

Nathann



---

archive/issue_comments_249795.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-10T09:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249795",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249796.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-10T09:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249797.json:
```json
{
    "body": "Replace\n\n```\n[ \"x$(cat $TYPE_FILE)\" = \"xoptional\" ]\n```\n\nby\n\n```\n[ x`cat \"$TYPE_FILE\"` = xoptional ]\n```\n\n(the point is: you need to quote `$TYPE_FILE`)",
    "created_at": "2015-06-10T09:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249797",
    "user": "https://github.com/jdemeyer"
}
```

Replace

```
[ "x$(cat $TYPE_FILE)" = "xoptional" ]
```

by

```
[ x`cat "$TYPE_FILE"` = xoptional ]
```

(the point is: you need to quote `$TYPE_FILE`)



---

archive/issue_comments_249798.json:
```json
{
    "body": "And `\"| \\$(STANDARD_PACKAGES)\"` can be `'| $(STANDARD_PACKAGES)'` (avoid ugly backslashes if you can)",
    "created_at": "2015-06-10T09:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249798",
    "user": "https://github.com/jdemeyer"
}
```

And `"| \$(STANDARD_PACKAGES)"` can be `'| $(STANDARD_PACKAGES)'` (avoid ugly backslashes if you can)



---

archive/issue_comments_249799.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-10T10:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249800.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-10T11:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249800",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249801.json:
```json
{
    "body": "Excellent news! Thanks `;-)`",
    "created_at": "2015-06-10T11:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249801",
    "user": "https://github.com/nathanncohen"
}
```

Excellent news! Thanks `;-)`



---

archive/issue_comments_249802.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> > Why? Since when are we automatically installing `base` packages?\n> \n> Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually.\n\nDon't confuse the `base` make rule with `base` package(s) (maybe that's actually a good reason to rename the `base` packages to something else).",
    "created_at": "2015-06-11T07:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249802",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:24 ncohen]:
> > Why? Since when are we automatically installing `base` packages?
> 
> Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually.

Don't confuse the `base` make rule with `base` package(s) (maybe that's actually a good reason to rename the `base` packages to something else).



---

archive/issue_comments_249803.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-11T22:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18410#issuecomment-249803",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052299.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T22:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18410",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18410#event-52299"
}
```
