# Issue 33973: resultant over Z[x,y] are slow in Sage 9.2

Issue created by migration from https://trac.sagemath.org/ticket/34210

Original creator: zimmerma

Original creation time: 2022-07-22 07:36:07

CC:  fredrik.johansson

a student here, Lauriane Turelier, has hit the following issue. WIth Sage 9.2 on a AMD EPYC 7282:

```
$ /usr/bin/sage res.sage
1.8131059999999994
```

With Sage 9.5 on a Intel(R) Core(TM) i5-4570:

```
$ /usr/bin/sage res.sage
0.007745000000000002
```

This is the time for the computation of the resultant of two degree-9 polynomials in two variables with coefficients of up to 248 digits.
Maybe this was fixed since 9.2, but just for the record, I prefer to report it.


---

Attachment


---

Comment by @DaveWitteMorris created at 2022-07-22 20:04:33

FWIW: On [CoCalc](https://cocalc.com/), it is easy to run this calculation on all sagemath versions from 9.1 to 9.6 (and I also tried 9.7.beta5). In all cases, it took about 0.5-0.6 seconds, so it doesn't seem that the sagemath version makes much difference.  I have no idea why the i5-4570 is so much faster.


---

Comment by zimmerma created at 2022-07-25 09:45:36

now I cannot reproduce any more on the i5-4570, and I get timings of about 0.5 second on all machines (including 9.5 on the AMD EPYC 7282). This is very strange.


---

Comment by zimmerma created at 2022-07-25 12:50:30

we have investigated with Xavier Bonnetain and it might be due to an update of the Flint package in Debian, which is now Flint 2.9.0 according to `singular.version()`. Maybe the new version of Flint is slower? Can someone try with Sage 9.5, but a version of Flint before 2.9.0?


---

Comment by zimmerma created at 2022-07-25 13:02:52

in particular, if someone has a Debian machine with `libsingular4-dev:amd64` and `libsingular4m2n1:amd64`, it would be nice to compare the Flint 2.8.5 and Flint 2.9.0 packages.


---

Comment by zimmerma created at 2022-07-25 17:28:12

confirmed: when we upgrade the Debian package from libflint-2.8.5 (2.8.5-2) to libflint17 (2.9.0-4), the time increases from 0.007s to 0.5s (70 times more).


---

Comment by zimmerma created at 2022-07-26 07:24:39

Changing priority from major to critical.


---

Comment by zimmerma created at 2022-07-26 07:24:39

in fact the problem is worse: the "fast" computation is completely wrong (thanks to Xavier Bonnetain for figuring it out). The "resultant" computed has degree 0 in tau, whereas the correct resultant should have degree 81 (this can be checked by computing the resultant modulo 2<sup>29</sup>-3 for example).

This bug arises on Debian with Sage 9.5, using the Debian package for Flint 2.8.5.

Changed the priority to "critical".
