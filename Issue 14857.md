# Issue 14857: QSym: bad documentation

archive/issues_014857.json:
```json
{
    "body": "CC:  sage-combinat zabrocki saliola chrisjamesberg jbandlow\n\nKeywords: sage-combinat, qsym, quasi-symmetric functions\n\nI am talking about the docstrings in `sage/combinat/ncsf_qsym/qsym.py`, not about the manuals written later. The fundamental basis is defined incorrectly; the coproduct is *not* inherited from the polynomial ring; and it is better not to begin the introduction with the finitely-many-variables case since that case isn't implemented in Sage. I'm working on a patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15094\n\n",
    "created_at": "2013-08-24T14:11:59Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "QSym: bad documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14857",
    "user": "darij"
}
```
CC:  sage-combinat zabrocki saliola chrisjamesberg jbandlow

Keywords: sage-combinat, qsym, quasi-symmetric functions

I am talking about the docstrings in `sage/combinat/ncsf_qsym/qsym.py`, not about the manuals written later. The fundamental basis is defined incorrectly; the coproduct is *not* inherited from the polynomial ring; and it is better not to begin the introduction with the finitely-many-variables case since that case isn't implemented in Sage. I'm working on a patch.

Issue created by migration from https://trac.sagemath.org/ticket/15094





---

archive/issue_comments_189490.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-24T21:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189490",
    "user": "darij"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189491.json:
```json
{
    "body": "Attachment [trac_15094-qsym_doc-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-qsym_doc-dg.patch) by darij created at 2013-08-24 21:55:48",
    "created_at": "2013-08-24T21:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189491",
    "user": "darij"
}
```

Attachment [trac_15094-qsym_doc-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-qsym_doc-dg.patch) by darij created at 2013-08-24 21:55:48



---

archive/issue_comments_189492.json:
```json
{
    "body": "I have an initial review patch (not done yet) and without removing a few accented characters I was unable to compile the documentation.  I cannot figure out why some of the doc strings do not appear in the documentation files (e.g. anything in `Bases.ElementMethods`).  This problem seems to be a pre-existing condition, but I can't read the docstrings easily without fixing it.\n\nI haven't played with the functionality, but just a comment about the math:  If Adams / Frobenius is defined on QSym should Verschiebung be defined on NSym?  Just a thought.",
    "created_at": "2013-08-25T14:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189492",
    "user": "zabrocki"
}
```

I have an initial review patch (not done yet) and without removing a few accented characters I was unable to compile the documentation.  I cannot figure out why some of the doc strings do not appear in the documentation files (e.g. anything in `Bases.ElementMethods`).  This problem seems to be a pre-existing condition, but I can't read the docstrings easily without fixing it.

I haven't played with the functionality, but just a comment about the math:  If Adams / Frobenius is defined on QSym should Verschiebung be defined on NSym?  Just a thought.



---

archive/issue_comments_189493.json:
```json
{
    "body": "Thanks for looking into this! I copypasted the accents from the Windows host (no idea how to generate them in Ubuntu), so I'm not surprised they were causing issues; sorry for that. As for `[Mal-These]`, I prefer long identifiers to avoid collision, but if `[Mal]` is unique (and stays so until the merge) that's fine with me.\n\nYes, there are Verschiebungen on NSym, to be implemented in a later patch.",
    "created_at": "2013-08-25T14:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189493",
    "user": "darij"
}
```

Thanks for looking into this! I copypasted the accents from the Windows host (no idea how to generate them in Ubuntu), so I'm not surprised they were causing issues; sorry for that. As for `[Mal-These]`, I prefer long identifiers to avoid collision, but if `[Mal]` is unique (and stays so until the merge) that's fine with me.

Yes, there are Verschiebungen on NSym, to be implemented in a later patch.



---

archive/issue_comments_189494.json:
```json
{
    "body": "I don't think that identifiers need to be long to be unique.  Maybe it is the hyphen, but the `[Mal-These]` was causing very awkward formatting in the documentation.  Probably `[MalThese]` or `[Mal93]` are fine.\n\nI will continue to look at the code. Please see if you can figure out why the documentation for `ElementMethods` including `frobenius` and `internal_coproduct` do not appear.",
    "created_at": "2013-08-25T15:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189494",
    "user": "zabrocki"
}
```

I don't think that identifiers need to be long to be unique.  Maybe it is the hyphen, but the `[Mal-These]` was causing very awkward formatting in the documentation.  Probably `[MalThese]` or `[Mal93]` are fine.

I will continue to look at the code. Please see if you can figure out why the documentation for `ElementMethods` including `frobenius` and `internal_coproduct` do not appear.



---

archive/issue_comments_189495.json:
```json
{
    "body": "I've no idea; I'm not able to reasonably view the docs on my Ubuntu at all (neither html nor pdf which doesn't even compile) so I'm working more or less blindly as far as the markup goes.",
    "created_at": "2013-08-25T15:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189495",
    "user": "darij"
}
```

I've no idea; I'm not able to reasonably view the docs on my Ubuntu at all (neither html nor pdf which doesn't even compile) so I'm working more or less blindly as far as the markup goes.



---

archive/issue_comments_189496.json:
```json
{
    "body": "Hi Darij,\nI've finished reviewing this patch.  I have an additional handful of minor doc changes (which are harder to track down because they don't appear in the html file).\n\nI added the dependency of #13505 because it modifies qsym.py and this patch will come after and so needs to be rebased.  Can you fold the patches and rebase against it (and #14101)?  I will upload a new version in a minute.\n\nThe reason why the documentation does not appear is that `class QuasiSymmetricFunctions -> class Bases -> class ElementMethods` is nested too far and there is a bug that prevents the documentation from being compiled.  Nicolas and others are working on a patch in #9107 to make the documentation in nested classes appear.\n\nThe strangest thing I found in the documentation is that the word `itself` was replaced by `itQuasiSymmetricFunctions`.  I cannot explain that.",
    "created_at": "2013-08-27T11:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189496",
    "user": "zabrocki"
}
```

Hi Darij,
I've finished reviewing this patch.  I have an additional handful of minor doc changes (which are harder to track down because they don't appear in the html file).

I added the dependency of #13505 because it modifies qsym.py and this patch will come after and so needs to be rebased.  Can you fold the patches and rebase against it (and #14101)?  I will upload a new version in a minute.

The reason why the documentation does not appear is that `class QuasiSymmetricFunctions -> class Bases -> class ElementMethods` is nested too far and there is a bug that prevents the documentation from being compiled.  Nicolas and others are working on a patch in #9107 to make the documentation in nested classes appear.

The strangest thing I found in the documentation is that the word `itself` was replaced by `itQuasiSymmetricFunctions`.  I cannot explain that.



---

archive/issue_comments_189497.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-08-27T11:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189497",
    "user": "zabrocki"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_189498.json:
```json
{
    "body": "Attachment [trac_15094_review-mz.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094_review-mz.patch) by darij created at 2013-08-27 22:55:49\n\nThanks for the update. Commenting as I'm reading through it:\n\nSorry for the trac syntax in the docstrings; that was stupid of me.\n\nI've changed\n\n```\n\t                This example demonstrates the non-commutativity of the internal \n\t                coproduct::\n```\n\ninto\n\n```\n                This is confirmed by the following Sage computation (incidentally\n                demonstrating the non-cocommutativity of the internal\n                coproduct)::\n```\n\n\nIn contexts like\n\n```\nElement methods of the ``Monomial`` basis of ``QuasiSymmetricFunctions.``\n```\n\nthe period should be outside of the verbatim mode.\n\nI added a link to Gessel's paper in the reference list.\n\nReplaced \"degree of the power series\" by \"total degree of the power series\".\n\n\"the product by the realization within the polynomial ring\" replaced by \"the product on the realization within the ring of power series\".\n\nThe next paragraph now reads\n\n```\n    There is a coproduct on `\\mathrm{QSym}` as well, which in the Monomial \n    basis acts by cutting the composition into a left half and a right\n    half. The coproduct is not co-commutative::\n```\n",
    "created_at": "2013-08-27T22:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189498",
    "user": "darij"
}
```

Attachment [trac_15094_review-mz.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094_review-mz.patch) by darij created at 2013-08-27 22:55:49

Thanks for the update. Commenting as I'm reading through it:

Sorry for the trac syntax in the docstrings; that was stupid of me.

I've changed

```
	                This example demonstrates the non-commutativity of the internal 
	                coproduct::
```

into

```
                This is confirmed by the following Sage computation (incidentally
                demonstrating the non-cocommutativity of the internal
                coproduct)::
```


In contexts like

```
Element methods of the ``Monomial`` basis of ``QuasiSymmetricFunctions.``
```

the period should be outside of the verbatim mode.

I added a link to Gessel's paper in the reference list.

Replaced "degree of the power series" by "total degree of the power series".

"the product by the realization within the polynomial ring" replaced by "the product on the realization within the ring of power series".

The next paragraph now reads

```
    There is a coproduct on `\mathrm{QSym}` as well, which in the Monomial 
    basis acts by cutting the composition into a left half and a right
    half. The coproduct is not co-commutative::
```




---

archive/issue_comments_189499.json:
```json
{
    "body": "Attachment [trac_15094-not_rebased.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-not_rebased.patch) by darij created at 2013-08-27 23:15:48\n\nqfolded but not yet rebased. backup version in case mpatch fucks up",
    "created_at": "2013-08-27T23:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189499",
    "user": "darij"
}
```

Attachment [trac_15094-not_rebased.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-not_rebased.patch) by darij created at 2013-08-27 23:15:48

qfolded but not yet rebased. backup version in case mpatch fucks up



---

archive/issue_comments_189500.json:
```json
{
    "body": "Rebased. Positive review then?",
    "created_at": "2013-08-27T23:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189500",
    "user": "darij"
}
```

Rebased. Positive review then?



---

archive/issue_comments_189501.json:
```json
{
    "body": "patchbot:\n\napply trac_15094-rebased-QSym-dg.patch\u200b",
    "created_at": "2013-08-27T23:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189501",
    "user": "darij"
}
```

patchbot:

apply trac_15094-rebased-QSym-dg.patch​



---

archive/issue_comments_189502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-27T23:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189502",
    "user": "darij"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_189503.json:
```json
{
    "body": "I am getting 9 doctests failing\n\nPlease check, but I think that you need to add the line\n\n```\nfrom sage.combinat.ncsf_qsym.combinatorics import compositions_order\n```\n",
    "created_at": "2013-08-28T01:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189503",
    "user": "zabrocki"
}
```

I am getting 9 doctests failing

Please check, but I think that you need to add the line

```
from sage.combinat.ncsf_qsym.combinatorics import compositions_order
```




---

archive/issue_comments_189504.json:
```json
{
    "body": "Attachment [trac_15094-rebased-QSym-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-rebased-QSym-dg.patch) by darij created at 2013-08-28 01:55:52\n\nqfolded & rebased",
    "created_at": "2013-08-28T01:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189504",
    "user": "darij"
}
```

Attachment [trac_15094-rebased-QSym-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-rebased-QSym-dg.patch) by darij created at 2013-08-28 01:55:52

qfolded & rebased



---

archive/issue_comments_189505.json:
```json
{
    "body": "Oops! Thanks for catching this creepy issue (I see where it came from; it shows rebasing is not as simple as merging diffs). The tests (well, those in the ncsf_qsym subfolder) pass now.",
    "created_at": "2013-08-28T01:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189505",
    "user": "darij"
}
```

Oops! Thanks for catching this creepy issue (I see where it came from; it shows rebasing is not as simple as merging diffs). The tests (well, those in the ncsf_qsym subfolder) pass now.



---

archive/issue_comments_189506.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-28T02:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189506",
    "user": "zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189507.json:
```json
{
    "body": "I also checked and adding that line everything passes.",
    "created_at": "2013-08-28T02:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189507",
    "user": "zabrocki"
}
```

I also checked and adding that line everything passes.



---

archive/issue_comments_189508.json:
```json
{
    "body": "Thank you again!",
    "created_at": "2013-08-28T02:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189508",
    "user": "darij"
}
```

Thank you again!



---

archive/issue_comments_189509.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2013-08-28T02:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189509",
    "user": "zabrocki"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_189510.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-09-08T16:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189510",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_189511.json:
```json
{
    "body": "Attachment [trac_15094-review-ts.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-review-ts.patch) by tscrim created at 2013-09-08 16:34:07\n\nI got some docbuilder warnings and there some doc formatting issues. Here's a review patch which fixes these as well as makes one notational change from `\\mathbf{k}` to `R` since the former commonly denotes a field but we often consider (almost) arbitrary rings such as `\\ZZ`.",
    "created_at": "2013-09-08T16:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189511",
    "user": "tscrim"
}
```

Attachment [trac_15094-review-ts.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-review-ts.patch) by tscrim created at 2013-09-08 16:34:07

I got some docbuilder warnings and there some doc formatting issues. Here's a review patch which fixes these as well as makes one notational change from `\mathbf{k}` to `R` since the former commonly denotes a field but we often consider (almost) arbitrary rings such as `\ZZ`.



---

archive/issue_comments_189512.json:
```json
{
    "body": "For patchbot:\n\nApply: trac_15094-rebased-QSym-dg.patch\u200b, trac_15094-review-ts.patch",
    "created_at": "2013-09-08T16:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189512",
    "user": "tscrim"
}
```

For patchbot:

Apply: trac_15094-rebased-QSym-dg.patch​, trac_15094-review-ts.patch



---

archive/issue_comments_189513.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-09-08T16:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189513",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_189514.json:
```json
{
    "body": "Attachment [trac_15094-last-changes-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-last-changes-dg.patch) by darij created at 2013-09-08 16:44:53",
    "created_at": "2013-09-08T16:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189514",
    "user": "darij"
}
```

Attachment [trac_15094-last-changes-dg.patch](tarball://root/attachments/some-uuid/ticket15094/trac_15094-last-changes-dg.patch) by darij created at 2013-09-08 16:44:53



---

archive/issue_comments_189515.json:
```json
{
    "body": "Nice changes; here's just a couple of typos fixed. I'm setting it to positive review, OK?\n\nFor patchbot:\n\nApply: trac_15094-rebased-QSym-dg.patch\u200b, trac_15094-review-ts.patch trac_15094-last-changes-dg.patch",
    "created_at": "2013-09-08T16:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189515",
    "user": "darij"
}
```

Nice changes; here's just a couple of typos fixed. I'm setting it to positive review, OK?

For patchbot:

Apply: trac_15094-rebased-QSym-dg.patch​, trac_15094-review-ts.patch trac_15094-last-changes-dg.patch



---

archive/issue_comments_189516.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-08T16:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189516",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189517.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-02T06:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14857#issuecomment-189517",
    "user": "jdemeyer"
}
```

Resolution: fixed
