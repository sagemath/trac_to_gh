# Issue 14857: QSym: bad documentation

Issue created by migration from https://trac.sagemath.org/ticket/15094

Original creator: darij

Original creation time: 2013-08-24 14:11:59

CC:  sage-combinat zabrocki saliola chrisjamesberg jbandlow

Keywords: sage-combinat, qsym, quasi-symmetric functions

I am talking about the docstrings in `sage/combinat/ncsf_qsym/qsym.py`, not about the manuals written later. The fundamental basis is defined incorrectly; the coproduct is *not* inherited from the polynomial ring; and it is better not to begin the introduction with the finitely-many-variables case since that case isn't implemented in Sage. I'm working on a patch.


---

Comment by darij created at 2013-08-24 21:55:48

Changing status from new to needs_review.


---

Attachment


---

Comment by zabrocki created at 2013-08-25 14:15:33

I have an initial review patch (not done yet) and without removing a few accented characters I was unable to compile the documentation.  I cannot figure out why some of the doc strings do not appear in the documentation files (e.g. anything in `Bases.ElementMethods`).  This problem seems to be a pre-existing condition, but I can't read the docstrings easily without fixing it.

I haven't played with the functionality, but just a comment about the math:  If Adams / Frobenius is defined on QSym should Verschiebung be defined on NSym?  Just a thought.


---

Comment by darij created at 2013-08-25 14:41:54

Thanks for looking into this! I copypasted the accents from the Windows host (no idea how to generate them in Ubuntu), so I'm not surprised they were causing issues; sorry for that. As for `[Mal-These]`, I prefer long identifiers to avoid collision, but if `[Mal]` is unique (and stays so until the merge) that's fine with me.

Yes, there are Verschiebungen on NSym, to be implemented in a later patch.


---

Comment by zabrocki created at 2013-08-25 15:16:35

I don't think that identifiers need to be long to be unique.  Maybe it is the hyphen, but the `[Mal-These]` was causing very awkward formatting in the documentation.  Probably `[MalThese]` or `[Mal93]` are fine.

I will continue to look at the code. Please see if you can figure out why the documentation for `ElementMethods` including `frobenius` and `internal_coproduct` do not appear.


---

Comment by darij created at 2013-08-25 15:26:13

I've no idea; I'm not able to reasonably view the docs on my Ubuntu at all (neither html nor pdf which doesn't even compile) so I'm working more or less blindly as far as the markup goes.


---

Comment by zabrocki created at 2013-08-27 11:48:25

Hi Darij,
I've finished reviewing this patch.  I have an additional handful of minor doc changes (which are harder to track down because they don't appear in the html file).

I added the dependency of #13505 because it modifies qsym.py and this patch will come after and so needs to be rebased.  Can you fold the patches and rebase against it (and #14101)?  I will upload a new version in a minute.

The reason why the documentation does not appear is that `class QuasiSymmetricFunctions -> class Bases -> class ElementMethods` is nested too far and there is a bug that prevents the documentation from being compiled.  Nicolas and others are working on a patch in #9107 to make the documentation in nested classes appear.

The strangest thing I found in the documentation is that the word `itself` was replaced by `itQuasiSymmetricFunctions`.  I cannot explain that.


---

Comment by zabrocki created at 2013-08-27 11:48:25

Changing status from needs_review to needs_work.


---

Attachment

Thanks for the update. Commenting as I'm reading through it:

Sorry for the trac syntax in the docstrings; that was stupid of me.

I've changed

```
	                This example demonstrates the non-commutativity of the internal 
	                coproduct::
```

into

```
                This is confirmed by the following Sage computation (incidentally
                demonstrating the non-cocommutativity of the internal
                coproduct)::
```


In contexts like

```
Element methods of the ``Monomial`` basis of ``QuasiSymmetricFunctions.``
```

the period should be outside of the verbatim mode.

I added a link to Gessel's paper in the reference list.

Replaced "degree of the power series" by "total degree of the power series".

"the product by the realization within the polynomial ring" replaced by "the product on the realization within the ring of power series".

The next paragraph now reads

```
    There is a coproduct on `\mathrm{QSym}` as well, which in the Monomial 
    basis acts by cutting the composition into a left half and a right
    half. The coproduct is not co-commutative::
```



---

Attachment

qfolded but not yet rebased. backup version in case mpatch fucks up


---

Comment by darij created at 2013-08-27 23:29:58

Rebased. Positive review then?


---

Comment by darij created at 2013-08-27 23:30:24

patchbot:

apply trac_15094-rebased-QSym-dg.patch​


---

Comment by darij created at 2013-08-27 23:30:49

Changing status from needs_work to needs_review.


---

Comment by zabrocki created at 2013-08-28 01:50:02

I am getting 9 doctests failing

Please check, but I think that you need to add the line

```
from sage.combinat.ncsf_qsym.combinatorics import compositions_order
```



---

Attachment

qfolded & rebased


---

Comment by darij created at 2013-08-28 01:56:58

Oops! Thanks for catching this creepy issue (I see where it came from; it shows rebasing is not as simple as merging diffs). The tests (well, those in the ncsf_qsym subfolder) pass now.


---

Comment by zabrocki created at 2013-08-28 02:00:37

Changing status from needs_review to positive_review.


---

Comment by zabrocki created at 2013-08-28 02:00:37

I also checked and adding that line everything passes.


---

Comment by darij created at 2013-08-28 02:01:23

Thank you again!


---

Comment by zabrocki created at 2013-08-28 02:04:05

Changing type from defect to enhancement.


---

Comment by tscrim created at 2013-09-08 16:34:07

Changing status from positive_review to needs_work.


---

Attachment

I got some docbuilder warnings and there some doc formatting issues. Here's a review patch which fixes these as well as makes one notational change from `\mathbf{k}` to `R` since the former commonly denotes a field but we often consider (almost) arbitrary rings such as `\ZZ`.


---

Comment by tscrim created at 2013-09-08 16:34:56

For patchbot:

Apply: trac_15094-rebased-QSym-dg.patch​, trac_15094-review-ts.patch


---

Comment by tscrim created at 2013-09-08 16:34:56

Changing status from needs_work to needs_review.


---

Attachment


---

Comment by darij created at 2013-09-08 16:46:02

Nice changes; here's just a couple of typos fixed. I'm setting it to positive review, OK?

For patchbot:

Apply: trac_15094-rebased-QSym-dg.patch​, trac_15094-review-ts.patch trac_15094-last-changes-dg.patch


---

Comment by darij created at 2013-09-08 16:46:02

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-02 06:36:40

Resolution: fixed
