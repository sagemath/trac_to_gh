# Issue 18691: A new structure for Reed-Solomon codes in Sage

archive/issues_018691.json:
```json
{
    "body": "This ticket proposes a new implementation for Generalized Reed-Solomon codes in Sage.\nIt contains:\n\n- a new code class, `GeneralizedReedSolomonCode`, which wraps Reed-Solomon code in the object-oriented structure introduced in #18099,\n- a first new encoder, `GRSEvaluationVectorEncoder`, which can encode words from a message space which is a vector space, and\n- a second new encoder, `GRSEvaluationPolynomialEncoder`, which can encode words from a message space which is a polynomial ring.\n\nThis new implementation properly sets GRS codes in the object-oriented structure, which allows the user to use specific methods and algorithms to encode (and later decode) words. It also introduces the notion of generalized Reed-Solomon codes, which means that the user can now set a list of column multipliers for the code. \n\nIt also allows to compute parity-check matrix and generator matrix from the parameters of the code, through dedicated methods. \n\nAs GRS codes are now objects in Sage, it is also possible to ask a GRS code for its specific parameters (like the list of its evaluation points, or its column multipliers).\n\nThe two provided encoders follow the structure introduced in #18376.\n\nMore details about GRS codes can be found in the docstring of the provided code.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18928\n\n",
    "created_at": "2015-07-20T12:23:59Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "A new structure for Reed-Solomon codes in Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18691",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
This ticket proposes a new implementation for Generalized Reed-Solomon codes in Sage.
It contains:

- a new code class, `GeneralizedReedSolomonCode`, which wraps Reed-Solomon code in the object-oriented structure introduced in #18099,
- a first new encoder, `GRSEvaluationVectorEncoder`, which can encode words from a message space which is a vector space, and
- a second new encoder, `GRSEvaluationPolynomialEncoder`, which can encode words from a message space which is a polynomial ring.

This new implementation properly sets GRS codes in the object-oriented structure, which allows the user to use specific methods and algorithms to encode (and later decode) words. It also introduces the notion of generalized Reed-Solomon codes, which means that the user can now set a list of column multipliers for the code. 

It also allows to compute parity-check matrix and generator matrix from the parameters of the code, through dedicated methods. 

As GRS codes are now objects in Sage, it is also possible to ask a GRS code for its specific parameters (like the list of its evaluation points, or its column multipliers).

The two provided encoders follow the structure introduced in #18376.

More details about GRS codes can be found in the docstring of the provided code.

Issue created by migration from https://trac.sagemath.org/ticket/18928





---

archive/issue_comments_254445.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-07-20T12:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254445",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

New commits:



---

archive/issue_comments_254446.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-20T12:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254446",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254447.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-15T12:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254448.json:
```json
{
    "body": "I updated this ticket to latest beta, and added a few new methods, it's still in the needs_review state.",
    "created_at": "2015-09-15T12:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254448",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I updated this ticket to latest beta, and added a few new methods, it's still in the needs_review state.



---

archive/issue_comments_254449.json:
```json
{
    "body": "This is not a review: just a comment. I slightly modified the description to underline the awesomeness of your latest commit (\"overwrote a few methods\"). Perhaps you could also add to the docstring of those overwritten methods that they are fast for this code (since a user would otherwise assume they are slow)?\n\nJohan",
    "created_at": "2015-09-15T13:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254449",
    "user": "https://github.com/johanrosenkilde"
}
```

This is not a review: just a comment. I slightly modified the description to underline the awesomeness of your latest commit ("overwrote a few methods"). Perhaps you could also add to the docstring of those overwritten methods that they are fast for this code (since a user would otherwise assume they are slow)?

Johan



---

archive/issue_comments_254450.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-19T14:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254451.json:
```json
{
    "body": "I updated this ticket by resolving merge conflicts with latest beta, removing dependency to #18813 and fixing broken doctests in thematic tutorial related to coding theory.\n\nIt's now open for review as it does not depend on unmerged ticket anymore.",
    "created_at": "2015-10-19T14:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254451",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I updated this ticket by resolving merge conflicts with latest beta, removing dependency to #18813 and fixing broken doctests in thematic tutorial related to coding theory.

It's now open for review as it does not depend on unmerged ticket anymore.



---

archive/issue_comments_254452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-09T05:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254453.json:
```json
{
    "body": "Fixed merge conflicts after release of 6.10beta3. Still open for review.",
    "created_at": "2015-11-09T05:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254453",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Fixed merge conflicts after release of 6.10beta3. Still open for review.



---

archive/issue_comments_254454.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-01T09:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-01T13:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254456.json:
```json
{
    "body": "I read through everything. I've polished a number of doc-tests and doc-strings, both for clarity, correctness and paedagogy. Also, I've removed `unencode_nocheck` on the vector-style encoder (since the inherited one is much faster), and I've added input sanity checks to `encode` for the polynomial-style encoder.\n\nIf you can accept my modifications, I give this ticket the green light.\n----\nNew commits:",
    "created_at": "2015-12-02T16:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254456",
    "user": "https://github.com/johanrosenkilde"
}
```

I read through everything. I've polished a number of doc-tests and doc-strings, both for clarity, correctness and paedagogy. Also, I've removed `unencode_nocheck` on the vector-style encoder (since the inherited one is much faster), and I've added input sanity checks to `encode` for the polynomial-style encoder.

If you can accept my modifications, I give this ticket the green light.
----
New commits:



---

archive/issue_comments_254457.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-02T16:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254458.json:
```json
{
    "body": "Hello,\n\nIt seems that your changes actually broke something...\n\nIf you look in `src/doc/en/thematic_tutorials.coding_theory.rst` lines 614-619, you'll see that the following input:\n\n\n\n```\nsage: F.<a> = GF(3^2,\"a\")\nsage: pts = [0,1,a,a^2,2*a,2*a+1]\nsage: C = codes.GeneralizedReedSolomonCode(pts, 4)\n```\n\n\nis not accepted anymore.\n\nFurthermore, the following:\n\n\n```\nsage: F.<a> = GF(3^2,\"a\")\nsage: C = codes.GeneralizedReedSolomonCode(F.list()[:6], 4)\n```\n\n\nis accepted but `sage: C` returns `[6, 4, 3] Generalized Reed-Solomon Code over Finite Field of size 3` and the *over Finite Field of size 3* looks weird to me.\n\nDavid",
    "created_at": "2015-12-02T20:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254458",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello,

It seems that your changes actually broke something...

If you look in `src/doc/en/thematic_tutorials.coding_theory.rst` lines 614-619, you'll see that the following input:



```
sage: F.<a> = GF(3^2,"a")
sage: pts = [0,1,a,a^2,2*a,2*a+1]
sage: C = codes.GeneralizedReedSolomonCode(pts, 4)
```


is not accepted anymore.

Furthermore, the following:


```
sage: F.<a> = GF(3^2,"a")
sage: C = codes.GeneralizedReedSolomonCode(F.list()[:6], 4)
```


is accepted but `sage: C` returns `[6, 4, 3] Generalized Reed-Solomon Code over Finite Field of size 3` and the *over Finite Field of size 3* looks weird to me.

David



---

archive/issue_comments_254459.json:
```json
{
    "body": "Merde... Good catch.",
    "created_at": "2015-12-02T20:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254459",
    "user": "https://github.com/johanrosenkilde"
}
```

Merde... Good catch.



---

archive/issue_comments_254460.json:
```json
{
    "body": "Yup. Oh, by the way I got tricked by that quite a lot of times (until I add these into my test script), there's two external files using methods from coding, namely:\n\n- `src/doc/en/constructions/linear_codes.rst` and\n- `src/doc/en/thematic_tutorials/coding_theory.rst`.\n\nThey do contain doctests, so remember to test these as well as the `coding` folder when you make changes.",
    "created_at": "2015-12-02T20:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254460",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Yup. Oh, by the way I got tricked by that quite a lot of times (until I add these into my test script), there's two external files using methods from coding, namely:

- `src/doc/en/constructions/linear_codes.rst` and
- `src/doc/en/thematic_tutorials/coding_theory.rst`.

They do contain doctests, so remember to test these as well as the `coding` folder when you make changes.



---

archive/issue_comments_254461.json:
```json
{
    "body": "Got it, thanks.",
    "created_at": "2015-12-02T20:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254461",
    "user": "https://github.com/johanrosenkilde"
}
```

Got it, thanks.



---

archive/issue_comments_254462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-03T08:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254463.json:
```json
{
    "body": "Ok, coercion and conversion galore! I've rolled back to a refined version of your \"let the vector constructor take care of conversion for me\"-solution: now eval pts and col mults are converted simultaneously to find a common parent field. This forbids e.g. having eval pts in F(59) but col mults in F(61) (which was allowed with your version).\nI also added a check and test for sanity of the dimension parameter.",
    "created_at": "2015-12-03T08:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254463",
    "user": "https://github.com/johanrosenkilde"
}
```

Ok, coercion and conversion galore! I've rolled back to a refined version of your "let the vector constructor take care of conversion for me"-solution: now eval pts and col mults are converted simultaneously to find a common parent field. This forbids e.g. having eval pts in F(59) but col mults in F(61) (which was allowed with your version).
I also added a check and test for sanity of the dimension parameter.



---

archive/issue_comments_254464.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-03T09:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254464",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254465.json:
```json
{
    "body": "Ok, tests pass and I agree with your changes.\nI give the green light.\nI added you as an author & a reviewer.",
    "created_at": "2015-12-03T09:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254465",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Ok, tests pass and I agree with your changes.
I give the green light.
I added you as an author & a reviewer.



---

archive/issue_comments_254466.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-05T10:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18691#issuecomment-254466",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017870.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-05T10:01:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18691",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18691#event-17870"
}
```
