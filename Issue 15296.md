# Issue 15296: Making the hash of cores depend on the parameter

archive/issues_015296.json:
```json
{
    "body": "CC:  @tscrim @anneschilling @AndrewAtLarge sage-combinat\n\nKeywords: cores\n\nCurrently, a core does not hash its parameter, so having a dict with the two keys\n\n```\nsage: A = Core([2],4)\nsage: B = Core([2],5)\nsage: hash(A) == hash(B)\nTrue\n```\n\nfails to work.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15533\n\n",
    "created_at": "2013-12-17T14:11:23Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Making the hash of cores depend on the parameter",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15296",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
CC:  @tscrim @anneschilling @AndrewAtLarge sage-combinat

Keywords: cores

Currently, a core does not hash its parameter, so having a dict with the two keys

```
sage: A = Core([2],4)
sage: B = Core([2],5)
sage: hash(A) == hash(B)
True
```

fails to work.

Issue created by migration from https://trac.sagemath.org/ticket/15533





---

archive/issue_comments_196528.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-12-17T14:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196528",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

New commits:



---

archive/issue_comments_196529.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-17T14:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196529",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196530.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-17T17:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196530",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_196531.json:
```json
{
    "body": "Looks good to me!",
    "created_at": "2013-12-17T17:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196531",
    "user": "https://github.com/anneschilling"
}
```

Looks good to me!



---

archive/issue_comments_196532.json:
```json
{
    "body": "It is a requirement that if two objects compare `==` then they must have the same hash:\n\n```\nsage: A = Core([2],4)\nsage: B = Core([2],5)\nsage: A == B\nTrue\nsage: hash(A) == hash(B)\nFalse\n```\n\nSo if we want different hashes, then they must not compare `==`.",
    "created_at": "2013-12-17T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196532",
    "user": "https://github.com/tscrim"
}
```

It is a requirement that if two objects compare `==` then they must have the same hash:

```
sage: A = Core([2],4)
sage: B = Core([2],5)
sage: A == B
True
sage: hash(A) == hash(B)
False
```

So if we want different hashes, then they must not compare `==`.



---

archive/issue_comments_196533.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-12-17T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196533",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_196534.json:
```json
{
    "body": "Replying to [comment:5 tscrim]:\n> It is a requirement that if two objects compare `==` then they must have the same hash:\n> {{{\n> sage: A = Core([2],4)\n> sage: B = Core([2],5)\n> sage: A == B\n> True\n> sage: hash(A) == hash(B)\n> False\n> }}}\n> So if we want different hashes, then they must not compare `==`.\n\nYes, Christian, please make two cores with different `k` unequal and I will set a positive review again!\n\nAnne",
    "created_at": "2014-01-28T21:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196534",
    "user": "https://github.com/anneschilling"
}
```

Replying to [comment:5 tscrim]:
> It is a requirement that if two objects compare `==` then they must have the same hash:
> {{{
> sage: A = Core([2],4)
> sage: B = Core([2],5)
> sage: A == B
> True
> sage: hash(A) == hash(B)
> False
> }}}
> So if we want different hashes, then they must not compare `==`.

Yes, Christian, please make two cores with different `k` unequal and I will set a positive review again!

Anne



---

archive/issue_comments_196535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-29T08:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196536.json:
```json
{
    "body": "done, ready for review...",
    "created_at": "2014-01-29T08:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196536",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

done, ready for review...



---

archive/issue_comments_196537.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-01-29T20:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196537",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_196538.json:
```json
{
    "body": "This breaks doctests, e.g.\n\n```\nFile \"src/sage/combinat/k_tableau.py\", line 3941, in sage.combinat.k_tableau.StrongTableaux._repr_\nFailed example:\n    StrongTableaux(3, [2,2], weight=[1,1,1,1])\nExpected:\n    Set of strong 3-tableaux of shape [2, 2] and of weight (1, 1, 1, 1)\nGot:\n    Set of strong 3-tableaux of shape [[2, 2], []] and of weight (1, 1, 1, 1)\n```\n",
    "created_at": "2014-02-02T14:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196538",
    "user": "https://github.com/vbraun"
}
```

This breaks doctests, e.g.

```
File "src/sage/combinat/k_tableau.py", line 3941, in sage.combinat.k_tableau.StrongTableaux._repr_
Failed example:
    StrongTableaux(3, [2,2], weight=[1,1,1,1])
Expected:
    Set of strong 3-tableaux of shape [2, 2] and of weight (1, 1, 1, 1)
Got:
    Set of strong 3-tableaux of shape [[2, 2], []] and of weight (1, 1, 1, 1)
```




---

archive/issue_comments_196539.json:
```json
{
    "body": "Okay, the problem is that people use\n\n```\nsage: C == []\n```\n\nfor a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.\n\nTravis (or someone else), could you take over and solve this issue how ever you think it is appropriate (including to decide that we do not want this ticket to be merged)?\n\nCheers, Christian",
    "created_at": "2014-02-03T12:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196539",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Okay, the problem is that people use

```
sage: C == []
```

for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.

Travis (or someone else), could you take over and solve this issue how ever you think it is appropriate (including to decide that we do not want this ticket to be merged)?

Cheers, Christian



---

archive/issue_comments_196540.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-02-05T06:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196540",
    "user": "https://github.com/anneschilling"
}
```

New commits:



---

archive/issue_comments_196541.json:
```json
{
    "body": "Replying to [comment:12 stumpc5]:\n> Okay, the problem is that people use\n> {{{\n> sage: C == []\n> }}}\n> for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.\n\nFixed! So hopefully this can be merged now!\n\nAnne",
    "created_at": "2014-02-05T06:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196541",
    "user": "https://github.com/anneschilling"
}
```

Replying to [comment:12 stumpc5]:
> Okay, the problem is that people use
> {{{
> sage: C == []
> }}}
> for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.

Fixed! So hopefully this can be merged now!

Anne



---

archive/issue_comments_196542.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-08T14:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15296#issuecomment-196542",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
