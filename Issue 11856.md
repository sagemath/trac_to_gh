# Issue 11856: Matchpoly.pyx test sometimes hangs

Issue created by migration from https://trac.sagemath.org/ticket/12028

Original creator: jdemeyer

Original creation time: 2011-11-14 08:58:03

Assignee: jason, ncohen, rlm

CC:  rlm ncohen

The following test sometimes "hangs", or at least takes a very long time:

```
$ ./sage -t -long -verbose devel/sage/sage/graphs/matchpoly.pyx
[...]
Trying:
    from sage.graphs.matchpoly import matching_polynomial###line 99:_sage_    >>> from sage.graphs.matchpoly import matching_polynomial
Expecting nothing
ok
Trying:
    for i in (ellipsis_range(Integer(1),Ellipsis,Integer(12))):  # long time (10s on sage.math, 2011)###line 100:_sage_    >>> for i in [1..12]:  # long time (10s on sage.math, 2011)
       for t in graphs.trees(i):
           c = t.complement()
           assert matching_polynomial(t) == t.characteristic_polynomial()
           assert matching_polynomial(c, complement=False) == matching_polynomial(c)
Expecting nothing
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

         [1800.1 s]
```

This happens about once every 1000 to 10000 runs.


---

Comment by jdemeyer created at 2011-11-15 13:46:40

The problem is line 1093 in `sage/matrix/matrix_integer_dense.py``:

```
sig_on()
v = linbox.charpoly()
sig_off()
```

It is inside `linbox.charpoly()` that the test gets stuck.


---

Comment by jdemeyer created at 2013-02-08 14:30:34

Resolution: worksforme


---

Comment by jdemeyer created at 2013-02-08 14:30:34

I haven't seen this anymore recently, so I assume it has been fixed.
