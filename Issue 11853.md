# Issue 11853: get doctest coverage of monoids/monoid.py to 100%

Issue created by migration from Trac.

Original creator: was

Original creation time: 2011-11-13 20:47:33

Assignee: mvngu

CC:  mjo tmonteil




---

Comment by was created at 2011-11-13 20:47:44

See the #12024 metaticket.


---

Attachment


---

Comment by was created at 2011-11-13 20:55:53

Changing status from new to needs_review.


---

Comment by mjo created at 2011-12-02 18:40:39


```
sage: is_Monoid(ZZ)   # not technical math meaning of monoid 
False
```


Does this work for any set-like objects? Wouldn't it depend on the operation?

I think this gives the wrong impression (if I read it correctly) that the test fails due to a technicality rather than because the test simply doesn't make sense.

There are binary operations that make ZZ a monoid, right?


---

Comment by was created at 2011-12-02 18:43:46

If anything, this test gives the *right* impression, showing that is_Monoid is *only* a typecheck, and not testing whether the object has some sort of monoid structure.   There are hundreds of "is_"'s in Sage, and they are all typechecks. That's why you get a warning when you use them from the sage: prompt.   This was discussed a lot on sage-devel years ago and sorted out.


---

Comment by mjo created at 2011-12-02 18:58:11

Exactly, I only have a problem with the comment, not the test itself. The "technical math meaning" of monoid has no bearing whatsoever on the result: it's a typecheck.

My suggestion would be no comment at all, or something like "ZZ does not inherit from Monoid_class."


---

Comment by was created at 2011-12-02 19:20:05

Replying to [comment:6 mjo]:
> Exactly, I only have a problem with the comment, not the test itself. The "technical math meaning" of monoid has no bearing whatsoever on the result: it's a typecheck.
> 
> My suggestion would be no comment at all, or something like "ZZ does not inherit from Monoid_class."

The comment is "# not technical math meaning of monoid".   Perhaps a clearer comment would be:

```
   "The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class."
```


 -- William


---

Comment by mjo created at 2011-12-02 21:30:17

Replying to [comment:7 was]:
> 
> The comment is "# not technical math meaning of monoid".   Perhaps a clearer comment would be:
> {{{
>    "The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class."
> }}}
> 
>  -- William

That's even better. In hindsight, I see that the original comment was intended read "this does not test whether or not ZZ is mathematically a monoid." I missed it the first time around, though, so better to make it explicit for the next guy.


---

Comment by mjo created at 2011-12-02 23:47:27

(Ugh, I am not a clever man.)

I tried to update the patch, but it looks like it's based off a different monoid.py than I've got (4.8.alpha2).

Do I need to apply another patch first?


---

Comment by mjo created at 2011-12-04 01:52:03

Marking needs_work because it doesn't appear to be based on anything that made it into 4.8.alpha3.


---

Comment by mjo created at 2011-12-04 01:52:03

Changing status from needs_review to needs_work.


---

Comment by tmonteil created at 2012-02-09 19:27:13

I am on the review.


---

Comment by tmonteil created at 2012-02-09 22:08:46

Changing status from needs_work to needs_review.


---

Comment by tmonteil created at 2012-02-09 22:08:46

Your patch applies on 5.0.beta2 without problem. The tests pass. I added a review patch that:

 - adds an entry in /doc/en/reference/monoids.rst to appear in the doc,
 - changes the title "Base class for all monoids" to "Monoids", to be coherent with other titles of the page in the doc (Free Monoids, ...),
 - change the comment for is_Monoid(ZZ) according to the previous discussion,
 - replaces some """ to r""" (in case some latex appear next),
 - formats the variables,
 - removes trailing spaces.

As for me, it is ok to consider the ticket as solved. If you agree with the changes, i let you add a positive review.


---

Comment by tmonteil created at 2012-02-09 22:09:26

Changing keywords from "" to "Cernay2012".


---

Comment by mjo created at 2012-02-10 19:22:55

Can you please add a commit message for the review patch? With queues, I think all you have to do is,


```
sage -hg qrefresh -m 'Wolverine cages could become unlocked on 32-bit systems'
```



---

Attachment

add a commit message to the previous patch


---

Comment by kcrisman created at 2012-02-16 04:55:03


```
----------------------------------------------------------------------
sage/monoids//monoid.py
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE sage/monoids//monoid.py: 100% (3 of 3)
----------------------------------------------------------------------
```

Luckily, this is easy to fix.

```
sage: F.<a,b,c,d,e> = FreeMonoid(5)
sage: TestSuite(F).run()
sage: TestSuite(F).run(verbose=True)
running ._test_an_element() . . . pass
running ._test_associativity() . . . pass
running ._test_category() . . . pass
running ._test_elements() . . .
  Running the test suite of self.an_element()
  running ._test_category() . . . pass
  running ._test_eq() . . . pass
  running ._test_not_implemented_methods() . . . pass
  running ._test_pickling() . . . pass
  pass
running ._test_elements_eq() . . . pass
running ._test_eq() . . . pass
running ._test_not_implemented_methods() . . . pass
running ._test_one() . . . pass
running ._test_pickling() . . . pass
running ._test_prod() . . . pass
running ._test_some_elements() . . . pass
```



---

Attachment


---

Comment by kcrisman created at 2012-02-16 04:56:40

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-22 10:45:28

Resolution: fixed
