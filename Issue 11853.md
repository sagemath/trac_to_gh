# Issue 11853: get doctest coverage of monoids/monoid.py to 100%

archive/issues_011853.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  mjo tmonteil\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12025\n\n",
    "created_at": "2011-11-13T20:47:33Z",
    "labels": [
        "doctest coverage",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "get doctest coverage of monoids/monoid.py to 100%",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11853",
    "user": "was"
}
```
Assignee: mvngu

CC:  mjo tmonteil



Issue created by migration from https://trac.sagemath.org/ticket/12025





---

archive/issue_comments_135703.json:
```json
{
    "body": "See the #12024 metaticket.",
    "created_at": "2011-11-13T20:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135703",
    "user": "was"
}
```

See the #12024 metaticket.



---

archive/issue_comments_135704.json:
```json
{
    "body": "Attachment [trac_12025.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025.patch) by was created at 2011-11-13 20:55:37",
    "created_at": "2011-11-13T20:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135704",
    "user": "was"
}
```

Attachment [trac_12025.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025.patch) by was created at 2011-11-13 20:55:37



---

archive/issue_comments_135705.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-13T20:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135705",
    "user": "was"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_135706.json:
```json
{
    "body": "\n```\nsage: is_Monoid(ZZ)   # not technical math meaning of monoid \nFalse\n```\n\n\nDoes this work for any set-like objects? Wouldn't it depend on the operation?\n\nI think this gives the wrong impression (if I read it correctly) that the test fails due to a technicality rather than because the test simply doesn't make sense.\n\nThere are binary operations that make ZZ a monoid, right?",
    "created_at": "2011-12-02T18:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135706",
    "user": "mjo"
}
```


```
sage: is_Monoid(ZZ)   # not technical math meaning of monoid 
False
```


Does this work for any set-like objects? Wouldn't it depend on the operation?

I think this gives the wrong impression (if I read it correctly) that the test fails due to a technicality rather than because the test simply doesn't make sense.

There are binary operations that make ZZ a monoid, right?



---

archive/issue_comments_135707.json:
```json
{
    "body": "If anything, this test gives the *right* impression, showing that is_Monoid is *only* a typecheck, and not testing whether the object has some sort of monoid structure.   There are hundreds of \"is_\"'s in Sage, and they are all typechecks. That's why you get a warning when you use them from the sage: prompt.   This was discussed a lot on sage-devel years ago and sorted out.",
    "created_at": "2011-12-02T18:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135707",
    "user": "was"
}
```

If anything, this test gives the *right* impression, showing that is_Monoid is *only* a typecheck, and not testing whether the object has some sort of monoid structure.   There are hundreds of "is_"'s in Sage, and they are all typechecks. That's why you get a warning when you use them from the sage: prompt.   This was discussed a lot on sage-devel years ago and sorted out.



---

archive/issue_comments_135708.json:
```json
{
    "body": "Exactly, I only have a problem with the comment, not the test itself. The \"technical math meaning\" of monoid has no bearing whatsoever on the result: it's a typecheck.\n\nMy suggestion would be no comment at all, or something like \"ZZ does not inherit from Monoid_class.\"",
    "created_at": "2011-12-02T18:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135708",
    "user": "mjo"
}
```

Exactly, I only have a problem with the comment, not the test itself. The "technical math meaning" of monoid has no bearing whatsoever on the result: it's a typecheck.

My suggestion would be no comment at all, or something like "ZZ does not inherit from Monoid_class."



---

archive/issue_comments_135709.json:
```json
{
    "body": "Replying to [comment:6 mjo]:\n> Exactly, I only have a problem with the comment, not the test itself. The \"technical math meaning\" of monoid has no bearing whatsoever on the result: it's a typecheck.\n> \n> My suggestion would be no comment at all, or something like \"ZZ does not inherit from Monoid_class.\"\n\nThe comment is \"# not technical math meaning of monoid\".   Perhaps a clearer comment would be:\n\n```\n   \"The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class.\"\n```\n\n\n -- William",
    "created_at": "2011-12-02T19:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135709",
    "user": "was"
}
```

Replying to [comment:6 mjo]:
> Exactly, I only have a problem with the comment, not the test itself. The "technical math meaning" of monoid has no bearing whatsoever on the result: it's a typecheck.
> 
> My suggestion would be no comment at all, or something like "ZZ does not inherit from Monoid_class."

The comment is "# not technical math meaning of monoid".   Perhaps a clearer comment would be:

```
   "The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class."
```


 -- William



---

archive/issue_comments_135710.json:
```json
{
    "body": "Replying to [comment:7 was]:\n> \n> The comment is \"# not technical math meaning of monoid\".   Perhaps a clearer comment would be:\n> {{{\n>    \"The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class.\"\n> }}}\n> \n>  -- William\n\nThat's even better. In hindsight, I see that the original comment was intended read \"this does not test whether or not ZZ is mathematically a monoid.\" I missed it the first time around, though, so better to make it explicit for the next guy.",
    "created_at": "2011-12-02T21:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135710",
    "user": "mjo"
}
```

Replying to [comment:7 was]:
> 
> The comment is "# not technical math meaning of monoid".   Perhaps a clearer comment would be:
> {{{
>    "The technical math meaning of monoid has no bearing whatsoever on the result: it's a typecheck which is not satisfied by ZZ since it does not inherit from Monoid_class."
> }}}
> 
>  -- William

That's even better. In hindsight, I see that the original comment was intended read "this does not test whether or not ZZ is mathematically a monoid." I missed it the first time around, though, so better to make it explicit for the next guy.



---

archive/issue_comments_135711.json:
```json
{
    "body": "(Ugh, I am not a clever man.)\n\nI tried to update the patch, but it looks like it's based off a different monoid.py than I've got (4.8.alpha2).\n\nDo I need to apply another patch first?",
    "created_at": "2011-12-02T23:47:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135711",
    "user": "mjo"
}
```

(Ugh, I am not a clever man.)

I tried to update the patch, but it looks like it's based off a different monoid.py than I've got (4.8.alpha2).

Do I need to apply another patch first?



---

archive/issue_comments_135712.json:
```json
{
    "body": "Marking needs_work because it doesn't appear to be based on anything that made it into 4.8.alpha3.",
    "created_at": "2011-12-04T01:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135712",
    "user": "mjo"
}
```

Marking needs_work because it doesn't appear to be based on anything that made it into 4.8.alpha3.



---

archive/issue_comments_135713.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-04T01:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135713",
    "user": "mjo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_135714.json:
```json
{
    "body": "I am on the review.",
    "created_at": "2012-02-09T19:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135714",
    "user": "tmonteil"
}
```

I am on the review.



---

archive/issue_comments_135715.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-09T22:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135715",
    "user": "tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_135716.json:
```json
{
    "body": "Your patch applies on 5.0.beta2 without problem. The tests pass. I added a review patch that:\n\n- adds an entry in /doc/en/reference/monoids.rst to appear in the doc,\n- changes the title \"Base class for all monoids\" to \"Monoids\", to be coherent with other titles of the page in the doc (Free Monoids, ...),\n- change the comment for is_Monoid(ZZ) according to the previous discussion,\n- replaces some \"\"\" to r\"\"\" (in case some latex appear next),\n- formats the variables,\n- removes trailing spaces.\n\nAs for me, it is ok to consider the ticket as solved. If you agree with the changes, i let you add a positive review.",
    "created_at": "2012-02-09T22:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135716",
    "user": "tmonteil"
}
```

Your patch applies on 5.0.beta2 without problem. The tests pass. I added a review patch that:

- adds an entry in /doc/en/reference/monoids.rst to appear in the doc,
- changes the title "Base class for all monoids" to "Monoids", to be coherent with other titles of the page in the doc (Free Monoids, ...),
- change the comment for is_Monoid(ZZ) according to the previous discussion,
- replaces some """ to r""" (in case some latex appear next),
- formats the variables,
- removes trailing spaces.

As for me, it is ok to consider the ticket as solved. If you agree with the changes, i let you add a positive review.



---

archive/issue_comments_135717.json:
```json
{
    "body": "Changing keywords from \"\" to \"Cernay2012\".",
    "created_at": "2012-02-09T22:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135717",
    "user": "tmonteil"
}
```

Changing keywords from "" to "Cernay2012".



---

archive/issue_comments_135718.json:
```json
{
    "body": "Can you please add a commit message for the review patch? With queues, I think all you have to do is,\n\n\n```\nsage -hg qrefresh -m 'Wolverine cages could become unlocked on 32-bit systems'\n```\n",
    "created_at": "2012-02-10T19:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135718",
    "user": "mjo"
}
```

Can you please add a commit message for the review patch? With queues, I think all you have to do is,


```
sage -hg qrefresh -m 'Wolverine cages could become unlocked on 32-bit systems'
```




---

archive/issue_comments_135719.json:
```json
{
    "body": "Attachment [trac_12025_review.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025_review.patch) by tmonteil created at 2012-02-11 00:44:27\n\nadd a commit message to the previous patch",
    "created_at": "2012-02-11T00:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135719",
    "user": "tmonteil"
}
```

Attachment [trac_12025_review.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025_review.patch) by tmonteil created at 2012-02-11 00:44:27

add a commit message to the previous patch



---

archive/issue_comments_135720.json:
```json
{
    "body": "\n```\n----------------------------------------------------------------------\nsage/monoids//monoid.py\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE sage/monoids//monoid.py: 100% (3 of 3)\n----------------------------------------------------------------------\n```\n\nLuckily, this is easy to fix.\n\n```\nsage: F.<a,b,c,d,e> = FreeMonoid(5)\nsage: TestSuite(F).run()\nsage: TestSuite(F).run(verbose=True)\nrunning ._test_an_element() . . . pass\nrunning ._test_associativity() . . . pass\nrunning ._test_category() . . . pass\nrunning ._test_elements() . . .\n  Running the test suite of self.an_element()\n  running ._test_category() . . . pass\n  running ._test_eq() . . . pass\n  running ._test_not_implemented_methods() . . . pass\n  running ._test_pickling() . . . pass\n  pass\nrunning ._test_elements_eq() . . . pass\nrunning ._test_eq() . . . pass\nrunning ._test_not_implemented_methods() . . . pass\nrunning ._test_one() . . . pass\nrunning ._test_pickling() . . . pass\nrunning ._test_prod() . . . pass\nrunning ._test_some_elements() . . . pass\n```\n",
    "created_at": "2012-02-16T04:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135720",
    "user": "kcrisman"
}
```


```
----------------------------------------------------------------------
sage/monoids//monoid.py
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE sage/monoids//monoid.py: 100% (3 of 3)
----------------------------------------------------------------------
```

Luckily, this is easy to fix.

```
sage: F.<a,b,c,d,e> = FreeMonoid(5)
sage: TestSuite(F).run()
sage: TestSuite(F).run(verbose=True)
running ._test_an_element() . . . pass
running ._test_associativity() . . . pass
running ._test_category() . . . pass
running ._test_elements() . . .
  Running the test suite of self.an_element()
  running ._test_category() . . . pass
  running ._test_eq() . . . pass
  running ._test_not_implemented_methods() . . . pass
  running ._test_pickling() . . . pass
  pass
running ._test_elements_eq() . . . pass
running ._test_eq() . . . pass
running ._test_not_implemented_methods() . . . pass
running ._test_one() . . . pass
running ._test_pickling() . . . pass
running ._test_prod() . . . pass
running ._test_some_elements() . . . pass
```




---

archive/issue_comments_135721.json:
```json
{
    "body": "Attachment [trac_12025_review-TS.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025_review-TS.patch) by kcrisman created at 2012-02-16 04:56:40",
    "created_at": "2012-02-16T04:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135721",
    "user": "kcrisman"
}
```

Attachment [trac_12025_review-TS.patch](tarball://root/attachments/some-uuid/ticket12025/trac_12025_review-TS.patch) by kcrisman created at 2012-02-16 04:56:40



---

archive/issue_comments_135722.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-16T04:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135722",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_135723.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-22T10:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11853",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11853#issuecomment-135723",
    "user": "jdemeyer"
}
```

Resolution: fixed
