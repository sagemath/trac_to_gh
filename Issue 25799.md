# Issue 25799: Lie algebra morphism defined by values on a Lie generating subset

Issue created by migration from Trac.

Original creator: @ehaka

Original creation time: 2018-08-09 16:41:35

CC:  tscrim

Keywords: Lie algebras, morphisms

Implementation of a method to define a Lie algebra morphism by giving the images on any Lie-generating subset which need not be the entire basis.


---

Comment by @ehaka created at 2018-08-09 16:45:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-08-09 22:48:34

Thank you for implementing this! I will have some minor tweaks, but mostly it looks like a good first step. However, we should make this into an actual `Morphism` subclass (so we can define, e.g., compositions and coercions) and we should add a hook to a finite-dimensional Lie algebra so that it is exposed to the users. It probably a good idea to subclass `LieAlgebraHomomorphism_im_gens` for this. I can do this too if you would want or on a followup.


---

Comment by @ehaka created at 2018-08-10 03:58:21

Thanks for the comment, I am still figuring out the morphism framework, so this is very helpful information. By a hook I take it you mean adding a method named for example `lie_algebra_morphism` in `sage.categories.lie_algebras.LieAlgebras.FiniteDimensional`? I will add this and change `LieAlgebraMorphism_from_generators` to a subclass of `LieAlgebraHomomorphism_im_gens` as you suggested.

On another note, I noticed that the test suites skip `_test_elements`. Would it be valid to append

```python
if not issubclass(self.__class__, parent._abstract_element_class):
    self.__class__ = parent.__make_element_class__(self.__class__)
```

at the end of initialization as in `sage.modules.with_basis.morphism.ModuleMorphism.__init__` to make the morphisms proper subclasses of the parent Hom-space, or would this cause some problems?


---

Comment by git created at 2018-08-10 05:18:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @ehaka created at 2018-08-10 05:44:17

I converted the function to a subclass and added the hook into `sage.categories.lie_algebras.LieAlgebras.FiniteDimensional.ParentMethods`. However, the test suite for `_test_pickling` of the new class fails since the class is creating a parent `LieAlgebraHomset`, which does not have unique behavior. I opened a new ticket #26039 about this, since it seems to be an issue unrelated to the new code.


---

Comment by tscrim created at 2018-08-10 06:18:06

Thank you for making it into a class. I am planning to change the hook (yes, you interpreted correctly) to just `morphism` since we already know it is a Lie algebra. :)

As I mentioned on #26039, you should be using `Hom` to create the parent, not directly constructing `LieAlgebraHomset` (I know that is a stupid pitfall, but there are [annoying] reasons for it). I will be doing some reviewer modifications now, including fixing that. (Also, the morphism framework probably could use some larger scale refactoring now that we have been adding more types of morphisms, but that is my opinion and a large-scale project.)

In regards to your question about setting the `__class__`, that might work, but I would be very worried that will cause problems when the homset does not have an explicit `Element` set (because it can have many different types of elements).


---

Comment by tscrim created at 2018-08-10 10:48:52

Okay, this fixes the pickling issue(s), as well as gives a better interface. Now you can also use the morphism on you Lie algebra elements. If my changes are good, then you can set a positive review.
----
New commits:


---

Comment by git created at 2018-08-10 13:08:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @ehaka created at 2018-08-10 13:12:10

Looks good to me. I fixed the doctest in `finite_dimensional_lie_algebras_with_basis` to use the correct method name and the punctuation change in the error message.


---

Comment by @ehaka created at 2018-08-10 13:12:10

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-08-10 22:05:57

Whoops, forgot to test that file too. Thank you!


---

Comment by vbraun created at 2018-09-01 09:09:47

Resolution: fixed
