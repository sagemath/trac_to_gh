# Issue 19397: Implement Hochschild (co)homology

archive/issues_019397.json:
```json
{
    "body": "Assignee: tscrim\n\nCC:  jhpalmieri\n\nThis is an implementation of Hochschild (co)homology as a first approach to work with implementing infinite chain complexes.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19634\n\n",
    "created_at": "2015-11-27T16:49:40Z",
    "labels": [
        "categories",
        "major",
        "enhancement"
    ],
    "title": "Implement Hochschild (co)homology",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19397",
    "user": "tscrim"
}
```
Assignee: tscrim

CC:  jhpalmieri

This is an implementation of Hochschild (co)homology as a first approach to work with implementing infinite chain complexes.

Issue created by migration from https://trac.sagemath.org/ticket/19634





---

archive/issue_comments_266656.json:
```json
{
    "body": "Here's an initial mock-up. Thought you might be interested. Also I was wondering if you knew of a better way to compute the cohomology and how much you think we should abstract these concepts for doing more general homology computations?\n\nRelated, would you be interested in an implementation of modules and free resolutions over polynomial rings?\n----\nNew commits:",
    "created_at": "2015-11-27T17:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266656",
    "user": "tscrim"
}
```

Here's an initial mock-up. Thought you might be interested. Also I was wondering if you knew of a better way to compute the cohomology and how much you think we should abstract these concepts for doing more general homology computations?

Related, would you be interested in an implementation of modules and free resolutions over polynomial rings?
----
New commits:



---

archive/issue_comments_266657.json:
```json
{
    "body": "Hi Travis, I'm finally getting around to looking at this. I have some issues with the documentation. I don't have much experience with Hochschild homology, so some of these may just be my own ignorance.\n\n- If you're working over a base ring *R* which is not a field, do things go wrong if *M* is not projective as an *R*-module?\n\n- I think the face maps *d_i* would be better without signs, and then the boundary map would be their alternating sum (as the Wikipedia page says). The point is that the unsigned face maps would be part of a simplicial structure.\n\n- When you mention Tor and Ext, they should be over the ring *A<sup>e</sup>*, the tensor product of *A* and *A<sup>op</sup>*, instead of *A*.\n\nLooking at the code, I wonder if it would be better to use Sage's `ChainComplex` class, at least when computing homology: to compute homology in dimension *d*, construct the chain complex by\n\n```\nC = ChainComplex({d: self.boundary(d).matrix(), d+1: self.boundary(d+1).matrix()}, degree_of_differential=-1)\n```\n\nThen compute `C.homology(d)` and lift the answer back to the original Hochschild complex. I didn't try any kind of lifting, but it seemed that constructing `C` and then computing `C.homology(d)` was faster than directly computing `HH.homology(d)`, at least in the cases I tried. One possible advantage is that if some day we speed up computations with general chain complexes, then this class would benefit.",
    "created_at": "2016-01-29T19:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266657",
    "user": "jhpalmieri"
}
```

Hi Travis, I'm finally getting around to looking at this. I have some issues with the documentation. I don't have much experience with Hochschild homology, so some of these may just be my own ignorance.

- If you're working over a base ring *R* which is not a field, do things go wrong if *M* is not projective as an *R*-module?

- I think the face maps *d_i* would be better without signs, and then the boundary map would be their alternating sum (as the Wikipedia page says). The point is that the unsigned face maps would be part of a simplicial structure.

- When you mention Tor and Ext, they should be over the ring *A<sup>e</sup>*, the tensor product of *A* and *A<sup>op</sup>*, instead of *A*.

Looking at the code, I wonder if it would be better to use Sage's `ChainComplex` class, at least when computing homology: to compute homology in dimension *d*, construct the chain complex by

```
C = ChainComplex({d: self.boundary(d).matrix(), d+1: self.boundary(d+1).matrix()}, degree_of_differential=-1)
```

Then compute `C.homology(d)` and lift the answer back to the original Hochschild complex. I didn't try any kind of lifting, but it seemed that constructing `C` and then computing `C.homology(d)` was faster than directly computing `HH.homology(d)`, at least in the cases I tried. One possible advantage is that if some day we speed up computations with general chain complexes, then this class would benefit.



---

archive/issue_comments_266658.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-02-04T19:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266658",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_266659.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-04T20:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266659",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_266660.json:
```json
{
    "body": "Changing component from categories to algebra.",
    "created_at": "2016-02-04T20:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266660",
    "user": "tscrim"
}
```

Changing component from categories to algebra.



---

archive/issue_comments_266661.json:
```json
{
    "body": "Replying to [comment:2 jhpalmieri]:\n> Hi Travis, I'm finally getting around to looking at this.\n\nThanks!\n\n> I have some issues with the documentation. I don't have much experience with Hochschild homology, so some of these may just be my own ignorance.\n\nI don't so much either, but I felt this provided a nice test case for infinite chain complexes (two of the things I'd like to eventually get would be group and Lie algebra (co)homology).\n\n> - If you're working over a base ring *R* which is not a field, do things go wrong if *M* is not projective as an *R*-module?\n\nI have no idea. Wikipedia was the most general reference as (IIRC) all of the other references I had found either assumed *R* was a field or made some implicit assumption (i.e., the base ring of the algebra was not specified).\n\n> - I think the face maps *d_i* would be better without signs, and then the boundary map would be their alternating sum (as the Wikipedia page says). The point is that the unsigned face maps would be part of a simplicial structure.\n\nGood point; changed. I also added the part about the simplicial structure to the doc.\n\n> - When you mention Tor and Ext, they should be over the ring *A<sup>e</sup>*, the tensor product of *A* and *A<sup>op</sup>*, instead of *A*.\n\nFixed.\n\n> Looking at the code, I wonder if it would be better to use Sage's `ChainComplex` class, at least when computing homology: to compute homology in dimension *d*, construct the chain complex by\n> {{{\n> C = ChainComplex({d: self.boundary(d).matrix(), d+1: self.boundary(d+1).matrix()}, degree_of_differential=-1)\n> }}}\n> Then compute `C.homology(d)` and lift the answer back to the original Hochschild complex. I didn't try any kind of lifting, but it seemed that constructing `C` and then computing `C.homology(d)` was faster than directly computing `HH.homology(d)`, at least in the cases I tried. One possible advantage is that if some day we speed up computations with general chain complexes, then this class would benefit.\n\nI agree that it is both faster and avoids duplication. In an ideal world, we would have everything under a single class hierarchy, but I think that will probably require a fair bit of refactoring. I left my code as a fallback because the chain complex code currently requires working over a field or **Z**, and, a priori, it does not require it. (It currently fails for doing the symmetric group algebra over **Q**[*x*], but this could easily be fixed by making the diagonal entries `1` if they are units.)\n\nI also merged in #19613 because I used it for testing things (and it will be in the next beta).",
    "created_at": "2016-02-04T20:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266661",
    "user": "tscrim"
}
```

Replying to [comment:2 jhpalmieri]:
> Hi Travis, I'm finally getting around to looking at this.

Thanks!

> I have some issues with the documentation. I don't have much experience with Hochschild homology, so some of these may just be my own ignorance.

I don't so much either, but I felt this provided a nice test case for infinite chain complexes (two of the things I'd like to eventually get would be group and Lie algebra (co)homology).

> - If you're working over a base ring *R* which is not a field, do things go wrong if *M* is not projective as an *R*-module?

I have no idea. Wikipedia was the most general reference as (IIRC) all of the other references I had found either assumed *R* was a field or made some implicit assumption (i.e., the base ring of the algebra was not specified).

> - I think the face maps *d_i* would be better without signs, and then the boundary map would be their alternating sum (as the Wikipedia page says). The point is that the unsigned face maps would be part of a simplicial structure.

Good point; changed. I also added the part about the simplicial structure to the doc.

> - When you mention Tor and Ext, they should be over the ring *A<sup>e</sup>*, the tensor product of *A* and *A<sup>op</sup>*, instead of *A*.

Fixed.

> Looking at the code, I wonder if it would be better to use Sage's `ChainComplex` class, at least when computing homology: to compute homology in dimension *d*, construct the chain complex by
> {{{
> C = ChainComplex({d: self.boundary(d).matrix(), d+1: self.boundary(d+1).matrix()}, degree_of_differential=-1)
> }}}
> Then compute `C.homology(d)` and lift the answer back to the original Hochschild complex. I didn't try any kind of lifting, but it seemed that constructing `C` and then computing `C.homology(d)` was faster than directly computing `HH.homology(d)`, at least in the cases I tried. One possible advantage is that if some day we speed up computations with general chain complexes, then this class would benefit.

I agree that it is both faster and avoids duplication. In an ideal world, we would have everything under a single class hierarchy, but I think that will probably require a fair bit of refactoring. I left my code as a fallback because the chain complex code currently requires working over a field or **Z**, and, a priori, it does not require it. (It currently fails for doing the symmetric group algebra over **Q**[*x*], but this could easily be fixed by making the diagonal entries `1` if they are units.)

I also merged in #19613 because I used it for testing things (and it will be in the next beta).



---

archive/issue_comments_266662.json:
```json
{
    "body": "Changing keywords from \"\" to \"Hochschild, homology, chain complexes\".",
    "created_at": "2016-02-04T20:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266662",
    "user": "tscrim"
}
```

Changing keywords from "" to "Hochschild, homology, chain complexes".



---

archive/issue_comments_266663.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-17T20:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266663",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266664.json:
```json
{
    "body": "Here are a few small changes which I think are self-explanatory. A request: in the `homology` method, you have\n\n```\n        try:\n            return C.homology(d)\n        except NotImplementedError:\n            pass\n        ...\n```\n\nCould you add a doctest that tests the second part of this: an example in which a `NotImplementedError` is raised? I added a print statement after the `try ... except` block, and it never executed.",
    "created_at": "2016-03-17T20:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266664",
    "user": "jhpalmieri"
}
```

Here are a few small changes which I think are self-explanatory. A request: in the `homology` method, you have

```
        try:
            return C.homology(d)
        except NotImplementedError:
            pass
        ...
```

Could you add a doctest that tests the second part of this: an example in which a `NotImplementedError` is raised? I added a print statement after the `try ... except` block, and it never executed.



---

archive/issue_comments_266665.json:
```json
{
    "body": "(One change which may need explanation: without the statement `self._base = A.base_ring()`, a command like `H.base_ring()` has no output.)",
    "created_at": "2016-03-17T20:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266665",
    "user": "jhpalmieri"
}
```

(One change which may need explanation: without the statement `self._base = A.base_ring()`, a command like `H.base_ring()` has no output.)



---

archive/issue_comments_266666.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-18T01:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266666",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266667.json:
```json
{
    "body": "I have added a test for when homology raises a `NotImplementedError`, but I needed to add some more support for general rings for the sub and quotient modules of combinatorial free modules (#20229).",
    "created_at": "2016-03-18T01:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266667",
    "user": "tscrim"
}
```

I have added a test for when homology raises a `NotImplementedError`, but I needed to add some more support for general rings for the sub and quotient modules of combinatorial free modules (#20229).



---

archive/issue_comments_266668.json:
```json
{
    "body": "Looks good, thanks.",
    "created_at": "2016-03-22T02:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266668",
    "user": "jhpalmieri"
}
```

Looks good, thanks.



---

archive/issue_comments_266669.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-22T02:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266669",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266670.json:
```json
{
    "body": "Thank you for doing the review!",
    "created_at": "2016-03-22T02:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266670",
    "user": "tscrim"
}
```

Thank you for doing the review!



---

archive/issue_comments_266671.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-23T23:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266671",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_266672.json:
```json
{
    "body": "In #20686, I will mark `TestSuite(H).run()` as `# known bug` because `HochschildComplex` does not properly implement everything needed for its category. For example, it does not implement `zero()`.\n\nThese problems were not seen before simply because the category tests were not run. #20686 ensures that the correct tests are run, but then they fail for `HochschildComplex`.\n\nLuckily, #20686 fixes this:\n\n```\n             sage: H in ChainComplexes(QQ)\n             True\n```\n\nwhich was `# known bug` before.",
    "created_at": "2016-09-01T08:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266672",
    "user": "jdemeyer"
}
```

In #20686, I will mark `TestSuite(H).run()` as `# known bug` because `HochschildComplex` does not properly implement everything needed for its category. For example, it does not implement `zero()`.

These problems were not seen before simply because the category tests were not run. #20686 ensures that the correct tests are run, but then they fail for `HochschildComplex`.

Luckily, #20686 fixes this:

```
             sage: H in ChainComplexes(QQ)
             True
```

which was `# known bug` before.



---

archive/issue_comments_266673.json:
```json
{
    "body": "See #21386.",
    "created_at": "2016-09-01T08:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19397#issuecomment-266673",
    "user": "jdemeyer"
}
```

See #21386.
