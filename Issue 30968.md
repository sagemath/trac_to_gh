# Issue 30968: GAPError: Error, reached the pre-set memory limit (change it with the -o command line option)

Issue created by migration from https://trac.sagemath.org/ticket/31205

Original creator: guenterrote

Original creation time: 2021-01-08 02:24:20

CC:  dimpase

Keywords: options for GAP

"GAPError: Error, reached the pre-set memory limit
(change it with the -o command line option)"

A) intercept this error message and provide meaningful info for
unsuspecting users. (at least for notebook interface,
i don't know about commandline) Something like this:

"1) you can simply repeat the calculation, and it will
use a larger memory limit."
(I found this by googling, and it works)
"2) Beware however that an excessive memory consumption might slow down other processes
on the computer."

B) How is the user supposed to "change it" with a command-line option?

Maybe a way to set this can be provided

(The current status is a nuisance: I had a lengthy calculation with
subgroups in a loop. First it stopped with the "o flag" message after
30 seconds. On restart, after 1 minute or so. Eventually
I had to restart it a few times. It about took 15 minutes.
Half of it was wasted because I had the restart from scratch.
(and I had to watch whether it was proceeding.)





---

Comment by guenterrote created at 2021-03-08 12:02:55

Proposal:
Intercept this error message, and extend it by a more informative error message:

----

"There are two options.

a) If you are in an interactive session, you can run the command again. GAP with retry with twice
as much memory as before.

b) You can start a new sage session, or a new batch run, and set the memory limit in advance
with the `set_gap_memory_pool_size(size_in_bytes)` function of the `sage.interfaces.gap` module, _before_ running any commands that involve GAP.
(The standard memory pool size can be found with the function `get_gap_memory_pool_size()`.)

Beware however that an excessive memory consumption might slow down other processes
or even stall the computer completely.

----

I don't know if there is any situation where the "-o command line option" message
makes sense. If not, it should be replaced, and not extended.

----

How is the standard limit determined?
(The current test case says "# random output".)


```
sage: from sage.interfaces.gap import get_gap_memory_pool_size
sage: get_gap_memory_pool_size()
262144000
```

I get different results on different computers, and it decreases on successive calls.


---

Comment by @DaveWitteMorris created at 2021-03-13 03:19:27

Related ticket: #14779. (duplicate?)


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.


---

Comment by mkoeppe created at 2022-07-02 00:04:37

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-07-02 00:04:37

Taken care of by #34041, I think


---

Comment by dimpase created at 2022-07-02 09:47:30

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-08-02 06:31:03

Resolution: invalid
