# Issue 24443: Cleanup some deprecated functions (matrix and coding)

Issue created by migration from Trac.

Original creator: jsrn

Original creation time: 2018-02-07 10:46:18

CC:  klee dimpase

Keywords: deprecation

The following deprecations were issued in a release roughly 12 months or more ago: #21024, #20835, #21165, #20565, #20953, #20908, #20787, #20100, #18928, #21576, #19930, and can now be removed from Sage.

Note that this removes numerous functions from the top-level namespace and other unwanted places.


---

Comment by jsrn created at 2018-02-07 12:36:33

Last 10 new commits:


---

Comment by jsrn created at 2018-02-07 12:36:33

Changing status from new to needs_review.


---

Comment by klee created at 2018-02-08 04:19:25

Looks good to me. Just one question:

Now `ReedSolomonCode` is not available under `codes`. Is this intended? 

Reed-Solomon codes are of course part of Generalized Reed-Solomon codes. But I would expect to find distinct `ReedSolomonCode` under `codes`...


---

Comment by jsrn created at 2018-02-08 11:11:26

Thanks for looking at it!

> Now `ReedSolomonCode` is not available under `codes`. Is this intended? 
> 
> Reed-Solomon codes are of course part of Generalized Reed-Solomon codes. But I would expect to find distinct `ReedSolomonCode` under `codes`...

Good catch! I agree that typing `codes.ReedSo<tab>` should definitely complete to something :-) I see 3 options:

1. `ReedSolomonCode` should just be an alias of `GeneralizedReedSolomonCode`.

2. Rename `GeneralizedReedSolomonCode` to `ReedSolomonCode` (with of course a deprecation period for `GeneralizedReedSolomonCode`. 

3. `ReedSolomonCode` should only construct classical" Reed-Solomon codes, i.e. where the evaluation points are chosen as `x_i = alpha^i` for `i = 0,...,n-1` and `n | (q-1)`. These are cyclic codes and have in a few other respects nicer properties than choosing arbitrary evaluation points. If we choose this, we need to find a good signature for the function, which is not too confusing wrt. the signature of `GeneralizedReedSolomonCode`. E.g. `ReedSolomonCode(n, k, root_of_unity=None)` or something.

I'm torn between option 2. and 3. What do you think?

Best,
Johan


---

Comment by klee created at 2018-02-09 01:34:14

Replying to [comment:5 jsrn]:
> Thanks for looking at it!
> 
> > Now `ReedSolomonCode` is not available under `codes`. Is this intended? 
> > 
> > Reed-Solomon codes are of course part of Generalized Reed-Solomon codes. But I would expect to find distinct `ReedSolomonCode` under `codes`...
> 
> Good catch! I agree that typing `codes.ReedSo<tab>` should definitely complete to something :-) I see 3 options:
> 
> 1. `ReedSolomonCode` should just be an alias of `GeneralizedReedSolomonCode`.
> 
> 2. Rename `GeneralizedReedSolomonCode` to `ReedSolomonCode` (with of course a deprecation period for `GeneralizedReedSolomonCode`. 
> 
> 3. `ReedSolomonCode` should only construct classical" Reed-Solomon codes, i.e. where the evaluation points are chosen as `x_i = alpha^i` for `i = 0,...,n-1` and `n | (q-1)`. These are cyclic codes and have in a few other respects nicer properties than choosing arbitrary evaluation points. If we choose this, we need to find a good signature for the function, which is not too confusing wrt. the signature of `GeneralizedReedSolomonCode`. E.g. `ReedSolomonCode(n, k, root_of_unity=None)` or something.
> 
> I'm torn between option 2. and 3. What do you think?

I prefer 3. For the proper signature, I like your suggestion. But I remind you that in `BCHCode`, the name `primitive_root` is used in the place of`root_of_unity`. I don't know which name is prevalent in sage...


---

Comment by jsrn created at 2018-02-09 08:30:37

Replying to [comment:6 klee]: 
> I prefer 3. For the proper signature, I like your suggestion. But I remind you that in `BCHCode`, the name `primitive_root` is used in the place of`root_of_unity`. I don't know which name is prevalent in sage...

I think you're right. A convention from ancient times is that e.g. a 5th root of unity is also a 10th root of unity. So primitive is indeed a necessary adjective, and then `primitive_root` is a fairly short compromise.

I'll look at fixing this!


---

Comment by git created at 2018-02-09 09:23:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jsrn created at 2018-02-09 09:27:15

I've implemented classical Reed-Solomon codes as a wrapper-function for the constructor `GeneralizedReedSolomonCode`. One could consider making this family of codes richer by sub-classing `GeneralizedReedSolomonCode` (e.g. to gain access to some cyclic code functionality directly), but I don't see a pressing need and it's definitely not for this ticket.

Back to needs-review.


---

Comment by klee created at 2018-02-12 01:40:42

Replying to [comment:9 jsrn]:
> I've implemented classical Reed-Solomon codes as a wrapper-function for the constructor `GeneralizedReedSolomonCode`. One could consider making this family of codes richer by sub-classing `GeneralizedReedSolomonCode` (e.g. to gain access to some cyclic code functionality directly), but I don't see a pressing need and it's definitely not for this ticket.

Ok. I now see you have already deprecated `codes.ReedSolomonCode`. Sorry that I didn't realize this before. Then definitely providing it back is not for this ticket, but I would expect its comeback later.

On the other hand, it seems to me that implementing `ReedSolomonCode` by subclassing is as easy as by wrapper-function and provides better functionality as you mentioned. Then why don't you make a separate ticket and move the code there?


---

Comment by jsrn created at 2018-02-12 17:29:05

Replying to [comment:10 klee]:
> Ok. I now see you have already deprecated `codes.ReedSolomonCode`. Sorry that I didn't realize this before. Then definitely providing it back is not for this ticket, but I would expect its comeback later.

Well, I don't know. With the deprecation warning, at least `codes.ReedSol<tab>` completed to something which then gave a pointer at the right thing to call. Removing it can leave new users thinking that RS codes are not in Sage, until that future ticket would be written. Putting a base implementation in here removes that gap. Plus, now I've already written it :-)

> On the other hand, it seems to me that implementing `ReedSolomonCode` by subclassing is as easy as by wrapper-function and provides better functionality as you mentioned. Then why don't you make a separate ticket and move the code there?

Be my guest, but this doesn't personally itch me. Sub-classing it is easy but requires more docs, and is (slightly worse than) pointless unless one also implements the few extra service methods. Right now the user can access the cyclic code stuff by just wrapping the RS code in a `CyclicCode`. I've even added an example of this in the doc.

Plus I already wrote the wrapper-function code :-)

You could also green-light this code and open a new ticket about the sub-class if you care about it. As long as the sub-class implementation sticks to the same calling interface, no deprecation or anything would be needed in that new ticket.

Best,
Johan


---

Comment by klee created at 2018-02-13 00:38:37

Replying to [comment:11 jsrn]:
> Replying to [comment:10 klee]:
> > Ok. I now see you have already deprecated `codes.ReedSolomonCode`. Sorry that I didn't realize this before. Then definitely providing it back is not for this ticket, but I would expect its comeback later.
> 
> Well, I don't know. With the deprecation warning, at least `codes.ReedSol<tab>` completed to something which then gave a pointer at the right thing to call. Removing it can leave new users thinking that RS codes are not in Sage, until that future ticket would be written. Putting a base implementation in here removes that gap. Plus, now I've already written it :-)

I agree.
 
> > On the other hand, it seems to me that implementing `ReedSolomonCode` by subclassing is as easy as by wrapper-function and provides better functionality as you mentioned. Then why don't you make a separate ticket and move the code there?
> 
> Be my guest, but this doesn't personally itch me. Sub-classing it is easy but requires more docs, and is (slightly worse than) pointless unless one also implements the few extra service methods. Right now the user can access the cyclic code stuff by just wrapping the RS code in a `CyclicCode`. I've even added an example of this in the doc.
> 
> Plus I already wrote the wrapper-function code :-)
> 
> You could also green-light this code and open a new ticket about the sub-class if you care about it. As long as the sub-class implementation sticks to the same calling interface, no deprecation or anything would be needed in that new ticket.

Ok, then. I agree that the current implementation is good enough. On the other hand, I am not sure if I care about the subclass-based implementation. 

Let's wait for the patchbots then.


---

Comment by git created at 2018-02-19 21:13:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jsrn created at 2018-02-19 21:14:30

Fixed what the patchbot complained about.

`@`jdemeyer: thanks for finding the exact earliest merge date.


---

Comment by klee created at 2018-02-21 07:53:54

Changing status from needs_review to positive_review.


---

Comment by klee created at 2018-02-21 07:53:54

The patchbots are not reliable presently. So I ran all tests on my machine with no failures, other than one irrelevant timed-out. I conclude that the patch is good to go.


---

Comment by vbraun created at 2018-05-08 17:26:18

Resolution: fixed
