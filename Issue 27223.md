# Issue 27223: fix issue in graph_plot_js

Issue created by migration from https://trac.sagemath.org/ticket/27460

Original creator: dcoudert

Original creation time: 2019-03-11 08:04:26

Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs

The mapping of vertices given to `d3.js` was incorrect


---

Comment by dcoudert created at 2019-03-11 08:06:00

New commits:


---

Comment by dcoudert created at 2019-03-11 08:06:00

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-03-11 12:40:15

Having a doctest would be good..


---

Comment by git created at 2019-03-11 13:19:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-03-11 13:25:10

I added a doctest but it's not good. It works on my laptop with py3, but not with py2.
The order of the keys of the dictionaries is not the same in py2 and py3 :(

with py2, I get

```
..."links": [{"strength": 0, "target": 0, "color": "#aaa", "curve": 0, "source": 1, "name": ""}], "pos": [], "edge_thickness": 4, "loops": [], "edge_labels": false, "vertex_size": 7, "vertex_labels": true, "directed": true, "gravity": 0.04, "charge": -120, "nodes": [{"group": "0", "name": "10"}, {"group": "0", "name": "1"}]...
```

and with py3

```
..."nodes": [{"name": "10", ...}, {"name": "1", ...}], "links": [{"source": 1, "target": 0, ...}]...
```


Any suggestion is more than welcome.


---

Comment by git created at 2019-03-11 15:09:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-03-11 15:11:17

OK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.


---

Comment by chapoton created at 2019-03-11 17:03:24

ok, looks good. When patchbot is green, positive review


---

Comment by chapoton created at 2019-03-11 18:50:33

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-03-13 18:29:16

Resolution: fixed
