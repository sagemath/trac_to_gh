# Issue 29425: Clarify stats module role

archive/issues_029425.json:
```json
{
    "body": "CC:  dcoudert tscrim\n\nRight now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!\n\nThis ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29662\n\n",
    "created_at": "2020-05-08T01:14:47Z",
    "labels": [
        "statistics",
        "minor",
        "enhancement"
    ],
    "title": "Clarify stats module role",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29425",
    "user": "kcrisman"
}
```
CC:  dcoudert tscrim

Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!

This ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.

Issue created by migration from https://trac.sagemath.org/ticket/29662





---

archive/issue_comments_417465.json:
```json
{
    "body": "Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.",
    "created_at": "2020-05-08T11:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417465",
    "user": "kcrisman"
}
```

Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.



---

archive/issue_comments_417466.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]:\n> Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.\n\nthis might be an upstream bug.\nOne should check whether this works with unusual numpy types, by the way. If it doesn't we have a case...",
    "created_at": "2020-05-10T11:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417466",
    "user": "dimpase"
}
```

Replying to [comment:2 kcrisman]:
> Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.

this might be an upstream bug.
One should check whether this works with unusual numpy types, by the way. If it doesn't we have a case...



---

archive/issue_comments_417467.json:
```json
{
    "body": "Unfortunately the Python3 `statistics` module is not compatible with Sage numbers. This is coming from #28234.\n\n```\nsage: import statistics                                                                                                                                                 \nsage: statistics.mean([1, 2])                                                                                                                                           \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-c5dde83ca691> in <module>\n----> 1 statistics.mean([Integer(1), Integer(2)])\n\n/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in mean(data)\n    314     if n < 1:\n    315         raise StatisticsError('mean requires at least one data point')\n--> 316     T, total, count = _sum(data)\n    317     assert count == n\n    318     return _convert(total / n, T)\n\n/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in _sum(data, start)\n    166         for n, d in map(_exact_ratio, values):\n    167             count += 1\n--> 168             partials[d] = partials_get(d, 0) + n\n    169     if None in partials:\n    170         # The sum will be a NAN or INF. We can ignore all the finite\n\nTypeError: unsupported operand type(s) for +: 'int' and 'builtin_function_or_method'\n```\n",
    "created_at": "2021-08-27T01:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417467",
    "user": "mkoeppe"
}
```

Unfortunately the Python3 `statistics` module is not compatible with Sage numbers. This is coming from #28234.

```
sage: import statistics                                                                                                                                                 
sage: statistics.mean([1, 2])                                                                                                                                           
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-c5dde83ca691> in <module>
----> 1 statistics.mean([Integer(1), Integer(2)])

/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in mean(data)
    314     if n < 1:
    315         raise StatisticsError('mean requires at least one data point')
--> 316     T, total, count = _sum(data)
    317     assert count == n
    318     return _convert(total / n, T)

/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in _sum(data, start)
    166         for n, d in map(_exact_ratio, values):
    167             count += 1
--> 168             partials[d] = partials_get(d, 0) + n
    169     if None in partials:
    170         # The sum will be a NAN or INF. We can ignore all the finite

TypeError: unsupported operand type(s) for +: 'int' and 'builtin_function_or_method'
```




---

archive/issue_comments_417468.json:
```json
{
    "body": "So to get rid of the single use of `sage.stats` within `sage.graphs`, a workaround like in this commit is needed. I don't know if this is acceptable",
    "created_at": "2021-08-27T01:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417468",
    "user": "mkoeppe"
}
```

So to get rid of the single use of `sage.stats` within `sage.graphs`, a workaround like in this commit is needed. I don't know if this is acceptable



---

archive/issue_comments_417469.json:
```json
{
    "body": "Python 3.8 introduces [https://docs.python.org/3/library/statistics.html#statistics.fmean](https://docs.python.org/3/library/statistics.html#statistics.fmean), which coerces to `float` first and therefore works fine; but we cannot use it yet as we still support Python 3.7. Also `geometric_mean` (Python >= 3.8), `median`, `median_low`, `median_high`, `median_grouped` work fine for the same reason.\n\n`mode`, `multimode`, and `quantiles` also work fine. They do not convert to `float`.\n\nOTOH, `harmonic_mean`, `pstdev`, `pvariance`, `stdev`, `variance` all lead to the same error as `mean`.",
    "created_at": "2021-08-27T01:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417469",
    "user": "mkoeppe"
}
```

Python 3.8 introduces [https://docs.python.org/3/library/statistics.html#statistics.fmean](https://docs.python.org/3/library/statistics.html#statistics.fmean), which coerces to `float` first and therefore works fine; but we cannot use it yet as we still support Python 3.7. Also `geometric_mean` (Python >= 3.8), `median`, `median_low`, `median_high`, `median_grouped` work fine for the same reason.

`mode`, `multimode`, and `quantiles` also work fine. They do not convert to `float`.

OTOH, `harmonic_mean`, `pstdev`, `pvariance`, `stdev`, `variance` all lead to the same error as `mean`.



---

archive/issue_comments_417470.json:
```json
{
    "body": "[numpy](https://numpy.org/doc/stable/reference/routines.statistics.html) and [scipy.stats](https://docs.scipy.org/doc/scipy/reference/stats.html) functions do not have this problem; they just convert everything to `numpy.float64` first.\n\nSo if we want to deprecate `sage.stats.basic_stats`, the deprecation messages should probably send users to a combination of numpy and scipy functions.\n----\nNew commits:",
    "created_at": "2021-08-27T02:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417470",
    "user": "mkoeppe"
}
```

[numpy](https://numpy.org/doc/stable/reference/routines.statistics.html) and [scipy.stats](https://docs.scipy.org/doc/scipy/reference/stats.html) functions do not have this problem; they just convert everything to `numpy.float64` first.

So if we want to deprecate `sage.stats.basic_stats`, the deprecation messages should probably send users to a combination of numpy and scipy functions.
----
New commits:



---

archive/issue_comments_417471.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-27T06:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417471",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417472.json:
```json
{
    "body": "Currently, `clustering_coeff` returns a rational when `implementation` is `\"dense_copy\"` or `\"sparse_copy\"`. Unfortunately, the rational field of sage is currently not able to take as input the type `Fraction` from Python library `fractions`.\n\nA solution could be\n\n```\nfrom statistics import mean\nfrom fractions import Fraction\nreturn QQ(str(mean([Fraction(str(x)) for x in G.clustering_coeff(implementation=implementation).values()])))\n```\n",
    "created_at": "2021-08-27T08:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417472",
    "user": "dcoudert"
}
```

Currently, `clustering_coeff` returns a rational when `implementation` is `"dense_copy"` or `"sparse_copy"`. Unfortunately, the rational field of sage is currently not able to take as input the type `Fraction` from Python library `fractions`.

A solution could be

```
from statistics import mean
from fractions import Fraction
return QQ(str(mean([Fraction(str(x)) for x in G.clustering_coeff(implementation=implementation).values()])))
```




---

archive/issue_comments_417473.json:
```json
{
    "body": "OK. Sounds like having the result in QQ is important to you.",
    "created_at": "2021-08-27T20:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417473",
    "user": "mkoeppe"
}
```

OK. Sounds like having the result in QQ is important to you.



---

archive/issue_comments_417474.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-27T20:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417474",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_417475.json:
```json
{
    "body": "... so instead of going through `Fraction` I have just replaced it by `sum` followed by division",
    "created_at": "2021-08-27T20:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417475",
    "user": "mkoeppe"
}
```

... so instead of going through `Fraction` I have just replaced it by `sum` followed by division



---

archive/issue_comments_417476.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-27T20:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417476",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417477.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2021-08-27T20:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417477",
    "user": "mkoeppe"
}
```

Changing priority from minor to major.



---

archive/issue_comments_417478.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-27T20:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417478",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_417479.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-27T20:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417479",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417480.json:
```json
{
    "body": "LGTM. Thank you.",
    "created_at": "2021-08-27T20:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417480",
    "user": "dcoudert"
}
```

LGTM. Thank you.



---

archive/issue_comments_417481.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-08-27T21:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417481",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_417482.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-08-29T14:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417482",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_417483.json:
```json
{
    "body": "\n```\n...\n    :\n    DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\n    See https://trac.sagemath.org/29662 for details.\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.crypto.lwe.LWE.__init__\n    [111 tests, 1 failure, 0.32 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.3 --random-seed=0 src/sage/crypto/lwe.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2021-08-29T14:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417483",
    "user": "vbraun"
}
```


```
...
    :
    DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
    See https://trac.sagemath.org/29662 for details.
**********************************************************************
1 item had failures:
   1 of  14 in sage.crypto.lwe.LWE.__init__
    [111 tests, 1 failure, 0.32 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.3 --random-seed=0 src/sage/crypto/lwe.py  # 1 doctest failed
----------------------------------------------------------------------
```




---

archive/issue_comments_417484.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-29T19:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417484",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417485.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-29T19:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417485",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_417486.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-30T07:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417486",
    "user": "dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_417487.json:
```json
{
    "body": "The patchbot reports several errors due to `mean`\n\n```\nsage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_lattice.py  # 3 doctests failed\nsage -t --long --random-seed=0 src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_polynomial.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/coding/information_set_decoder.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/graphs/graph_generators_pyx.pyx  # 1 doctest failed\n```\n",
    "created_at": "2021-08-30T07:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417487",
    "user": "dcoudert"
}
```

The patchbot reports several errors due to `mean`

```
sage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_lattice.py  # 3 doctests failed
sage -t --long --random-seed=0 src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_polynomial.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/coding/information_set_decoder.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/graphs/graph_generators_pyx.pyx  # 1 doctest failed
```




---

archive/issue_comments_417488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-30T23:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417488",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417489.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-31T00:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417489",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417490.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-31T02:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417490",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_417491.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-31T02:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417491",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_417492.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-31T09:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417492",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417493.json:
```json
{
    "body": "I think it's OK now. We have a few pyflake warnings that can be fixed afterward.",
    "created_at": "2021-08-31T09:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417493",
    "user": "dcoudert"
}
```

I think it's OK now. We have a few pyflake warnings that can be fixed afterward.



---

archive/issue_comments_417494.json:
```json
{
    "body": "Thanks for reviewing!",
    "created_at": "2021-08-31T14:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417494",
    "user": "mkoeppe"
}
```

Thanks for reviewing!



---

archive/issue_comments_417495.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-01T20:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417495",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_417496.json:
```json
{
    "body": "The definition of \"numpy.mean\" is different than Sage's built in mean:\n\n```\nsage: mean([vector([1,2]),vector([3,4])])\n<ipython-input-4-37be8bb3881f>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\nSee https://trac.sagemath.org/29662 for details.\n  mean([vector([Integer(1),Integer(2)]),vector([Integer(3),Integer(4)])])\n(2, 3)\nsage: numpy.mean([vector([1,2]),vector([3,4])])\n2.5\n```\n\n\nAlso, one of the examples in the Sage docs involving mean doesn't work with numpy.mean:\n\n```\nsage: v = stats.TimeSeries([1..10])\nsage: mean(v)\n<ipython-input-13-9d6545956b1d>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\nSee https://trac.sagemath.org/29662 for details.\n  mean(v)\n5.5\nsage: numpy.mean(v)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-14-2e91276b932b> in <module>\n----> 1 numpy.mean(v)\n\n<__array_function__ internals> in mean(*args, **kwargs)\n\n/ext/sage/9.5/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/numpy/core/fromnumeric.py in mean(a, axis, dtype, out, keepdims, where)\n   3436             pass\n   3437         else:\n-> 3438             return mean(axis=axis, dtype=dtype, out=out, **kwargs)\n   3439 \n   3440     return _methods._mean(a, axis=axis, dtype=dtype,\n\nTypeError: TimeSeries.mean() takes no keyword arguments\n```\n\n\nMaybe this is an argument to improve variance, rather than delete it?\n\n>  For example, mean happens to work with vectors (which is used in some doctests elsewhere in sage), but variance does not.",
    "created_at": "2022-02-13T03:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417496",
    "user": "was"
}
```

The definition of "numpy.mean" is different than Sage's built in mean:

```
sage: mean([vector([1,2]),vector([3,4])])
<ipython-input-4-37be8bb3881f>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
See https://trac.sagemath.org/29662 for details.
  mean([vector([Integer(1),Integer(2)]),vector([Integer(3),Integer(4)])])
(2, 3)
sage: numpy.mean([vector([1,2]),vector([3,4])])
2.5
```


Also, one of the examples in the Sage docs involving mean doesn't work with numpy.mean:

```
sage: v = stats.TimeSeries([1..10])
sage: mean(v)
<ipython-input-13-9d6545956b1d>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
See https://trac.sagemath.org/29662 for details.
  mean(v)
5.5
sage: numpy.mean(v)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-14-2e91276b932b> in <module>
----> 1 numpy.mean(v)

<__array_function__ internals> in mean(*args, **kwargs)

/ext/sage/9.5/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/numpy/core/fromnumeric.py in mean(a, axis, dtype, out, keepdims, where)
   3436             pass
   3437         else:
-> 3438             return mean(axis=axis, dtype=dtype, out=out, **kwargs)
   3439 
   3440     return _methods._mean(a, axis=axis, dtype=dtype,

TypeError: TimeSeries.mean() takes no keyword arguments
```


Maybe this is an argument to improve variance, rather than delete it?

>  For example, mean happens to work with vectors (which is used in some doctests elsewhere in sage), but variance does not.



---

archive/issue_comments_417497.json:
```json
{
    "body": "perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.",
    "created_at": "2022-02-13T09:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417497",
    "user": "dimpase"
}
```

perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.



---

archive/issue_comments_417498.json:
```json
{
    "body": "Replying to [comment:34 dimpase]:\n> perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.\n\nI think that having sage versions of `mean` and `variance` in the global namespace are useful to many users. Much more than `EllipticCurve` let say.\n\nnumpy and python are floating point focused when it comes to mathematics. This is not what sage tries to teach.",
    "created_at": "2022-02-13T09:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417498",
    "user": "vdelecroix"
}
```

Replying to [comment:34 dimpase]:
> perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.

I think that having sage versions of `mean` and `variance` in the global namespace are useful to many users. Much more than `EllipticCurve` let say.

numpy and python are floating point focused when it comes to mathematics. This is not what sage tries to teach.



---

archive/issue_comments_417499.json:
```json
{
    "body": "By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.\nThis is in line with other Python packages. \n\nBy the way, one of the worst is currently `sum`, which overloads Python's sum at Sage prompt, but does not do this in the library.\n\nHaving said that, nothing then would prevent one from having \"classical Sage\" module, which populates the global namespace with stuff.",
    "created_at": "2022-02-13T10:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417499",
    "user": "dimpase"
}
```

By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.
This is in line with other Python packages. 

By the way, one of the worst is currently `sum`, which overloads Python's sum at Sage prompt, but does not do this in the library.

Having said that, nothing then would prevent one from having "classical Sage" module, which populates the global namespace with stuff.



---

archive/issue_comments_417500.json:
```json
{
    "body": "Replying to [comment:36 dimpase]:\n> By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.\n> This is in line with other Python packages.\n\nIndeed, and then with `from sage.all import *` people can get a standard set of stuff in their global namespace. And the `sage` command environment should probably preload that, just as the preparser. It's great if sage can work like a python package, but the sage-specific environment is very valuable for quick stuff. And for, for instance, teaching, it is very useful if there is a useful \"standard\" set, if only so that it's easily available in `sagecell`.\n\nIt's valuable that in maple, maxima, mathematica, you can start right away with typing in math one-liners and get results, without having to execute boiler plate. We have that in sagemath now as well. I think it would reduce the usability of sagemath in many informal settings if we were to do away with it. A python library is just not a very good match for what people expect from an interactive CAS, so I think it's good we have a shim layer that makes sagemath behave a little more like a traditional CAS.",
    "created_at": "2022-02-13T19:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417500",
    "user": "nbruin"
}
```

Replying to [comment:36 dimpase]:
> By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.
> This is in line with other Python packages.

Indeed, and then with `from sage.all import *` people can get a standard set of stuff in their global namespace. And the `sage` command environment should probably preload that, just as the preparser. It's great if sage can work like a python package, but the sage-specific environment is very valuable for quick stuff. And for, for instance, teaching, it is very useful if there is a useful "standard" set, if only so that it's easily available in `sagecell`.

It's valuable that in maple, maxima, mathematica, you can start right away with typing in math one-liners and get results, without having to execute boiler plate. We have that in sagemath now as well. I think it would reduce the usability of sagemath in many informal settings if we were to do away with it. A python library is just not a very good match for what people expect from an interactive CAS, so I think it's good we have a shim layer that makes sagemath behave a little more like a traditional CAS.



---

archive/issue_comments_417501.json:
```json
{
    "body": "Discussions after this ticket was merged:\n\n- [sage-devel, 2022-02-13, Can we restore `mean`?](https://groups.google.com/g/sage-devel/c/14L4DdJfJuw)\n- [sage-support, 2022-02-25, Basic Stats deprecated?](https://groups.google.com/g/sage-support/c/fglHtSGKFJk)",
    "created_at": "2022-02-27T17:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417501",
    "user": "slelievre"
}
```

Discussions after this ticket was merged:

- [sage-devel, 2022-02-13, Can we restore `mean`?](https://groups.google.com/g/sage-devel/c/14L4DdJfJuw)
- [sage-support, 2022-02-25, Basic Stats deprecated?](https://groups.google.com/g/sage-support/c/fglHtSGKFJk)



---

archive/issue_comments_417502.json:
```json
{
    "body": "Follow-up ticket: #33432",
    "created_at": "2022-03-01T11:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417502",
    "user": "slelievre"
}
```

Follow-up ticket: #33432



---

archive/issue_comments_417503.json:
```json
{
    "body": "Follow-up ticket: #33453",
    "created_at": "2022-03-03T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29425#issuecomment-417503",
    "user": "vdelecroix"
}
```

Follow-up ticket: #33453
