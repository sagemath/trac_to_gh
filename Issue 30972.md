# Issue 30972: Webs and spiders

Issue created by migration from https://trac.sagemath.org/ticket/31209

Original creator: Bruce

Original creation time: 2021-01-08 10:53:53

CC:  tscrim mantepse

Keywords: planar graph

The terminology of webs and spiders is due to Kuperberg. Here we implement webs as planar graphs with boundary.


---

Comment by mantepse created at 2021-01-08 12:19:04

Wonderful!

See also #25901 and #25173
----
New commits:


---

Comment by git created at 2021-01-08 14:00:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-12 10:58:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-12 15:30:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2021-01-12 19:27:55

Changing status from new to needs_info.


---

Comment by git created at 2021-01-14 10:09:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-14 20:32:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-01-15 07:54:19

WTF

```
if not Ï€ in BaxterPermutations():
```

Please avoid unicode identifiers.


---

Comment by chapoton created at 2021-01-15 10:06:23

Sorry for the "wtf", do not take it personally.

But please, please, do not do that. Let us keep the code identifiers ASCII.

Some comments on the question here:

https://stackoverflow.com/questions/2649544/unicode-identifiers-in-python


---

Comment by chapoton created at 2021-01-15 10:23:00

by the way, Gretzler is Getzler


---

Comment by Bruce created at 2021-01-15 10:56:02

Replying to [comment:11 chapoton]:
> by the way, Gretzler is Getzler

Thanks for spotting that mistake.


---

Comment by Bruce created at 2021-01-15 10:59:00

Replying to [comment:10 chapoton]:
> Sorry for the "wtf", do not take it personally.
No problem with WTF
> 
> But please, please, do not do that. Let us keep the code identifiers ASCII.
I don't have strong views on this and will change this.
> 
> Some comments on the question here:
> 
> https://stackoverflow.com/questions/2649544/unicode-identifiers-in-python
I would still like to understand why this is bad practice. The discussion in the link is interesting
and has some gotchas I didn't know about. Using unicode for function names as in
the discussion would get a WTF from me. I also would not think of using a unicode identifier
outside of a mathematical context.

I have simply used a greek letter as a local identifier
following standard practice in mathematical literature.
My understanding is that this is fine in a notebook.


---

Comment by git created at 2021-01-15 19:35:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-16 15:24:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-05-28 07:25:04

failing doctest, and pyflakes plugin not green


---

Comment by git created at 2021-06-07 10:39:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2021-06-08 10:16:16

Replying to [comment:16 chapoton]:
> failing doctest, and pyflakes plugin not green

The pyflakes is now green.

All tests passed! when I ran them locally.
The bot says four tests failed but they seem to be elsewhere.


---

Comment by chapoton created at 2021-06-08 11:47:16

sorry, but I am not going to make a full review

arxiv links could use the arxiv role `:arxiv:`....``


---

Comment by Bruce created at 2021-06-08 12:53:08

Replying to [comment:19 chapoton]:
> sorry, but I am not going to make a full review


I am not expecting a positive review as it does not yet do the calculation I want it for.
I paused here because i) I needed a break and ii) Travis said it was better to break up a large project to make life easier for the reviewer.

I am now ready to continue with this project.


---

Comment by tscrim created at 2021-06-09 04:11:06

Some quick comments:

- IMO all of the Python3 type annotation adds clutter. I would recommend using it more sparingly.
- Why are you providing a `__str__`? I don't see why this is necessary.
- `while(flag):` -> `while flag:`
- `parent` should be the first argument to any `Element` class. This is something we want across all of Sage. You then shouldn't need to implement an `_element_constructor_`.
- Use `.. TODO::`.
- Put `UniqueRepresentation` first in the MRO.
- I don't see the reason why you need the `baxter` parameter in `from_permutation`.
- Start your doc on the line after the `"""`. This is the convention we use in Sage.
- You have some inconsistent indentation.
- `set(c.keys())` -> `set(c)`
- Your doctests in `normalize` are incorrectly formatted.
- Add the file to the documentation.
- Check the formatting of the module-level documentation.
- You should not import everything from the module. There is a major conflict with `Vector`, and only `SphericalWeb` should be imported as that is the only thing directly used by the user.


---

Comment by git created at 2021-06-09 15:54:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-09 16:42:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2021-06-10 04:37:30

Thank you Travis. I think your comments have been more or less dealt with.


---

Comment by git created at 2021-06-14 12:01:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2021-06-14 12:11:26

I have now implemented SphericalSpider as a Parent parametrised by the boundary values.

There are two issues that seem to me to be "work arounds". One is that I have both Strand and halfedge. I can almost do away with halfedge and work with "is" and "equal by value". My best guess at the problem I encountered is that dictionaries don't work with "is". I have not tried overwriting __hash__. The other is that I have included four methods of SphericalSpider as static methods (namely, vertex, loop, empty, polygon). This seems clumsy.


---

Comment by git created at 2021-06-16 09:54:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-18 19:20:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2021-06-18 20:40:37

I have been making progress with adding functionality. In particular, you can almost calculate the Jones polynomial. However it seems to me that the code is getting unwieldy and I could do with some advice on making this more organised and adding more structure. For example, the next stage is to work with quotients given by skein relations.


---

Comment by git created at 2021-06-24 17:45:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-06 08:11:48

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2021-07-13 13:47:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-13 14:26:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.


---

Comment by chapoton created at 2021-07-30 18:17:31

in apply_rule and simplify, the doctest is not indented correctly


---

Comment by chapoton created at 2021-08-01 07:43:44

and the doc does not build, see patchbot report


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.


---

Comment by chapoton created at 2021-12-30 15:01:30

I have created a new branch, with just one commit, and hopefully fixing some doc-building problems.
----
New commits:


---

Comment by chapoton created at 2021-12-30 15:01:30

Changing status from needs_info to needs_review.


---

Comment by git created at 2021-12-30 15:06:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-12-30 16:27:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-01-02 10:51:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-01-02 17:58:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-02-15 20:18:08

can we remove the "experimental" part at the end ?
