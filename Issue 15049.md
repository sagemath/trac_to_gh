# Issue 15049: Latin squares

archive/issues_015049.json:
```json
{
    "body": "This patch creates a file `latin_squares.py` in combinat/designs/, and implements several constructions of mutually orthogonal latin squares, as found in Douglas Stinson's book \"Combinatorial Designs: Constructions and Analysis\".\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/15286\n\n",
    "created_at": "2013-10-16T14:43:03Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Latin squares",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15049",
    "user": "https://github.com/nathanncohen"
}
```
This patch creates a file `latin_squares.py` in combinat/designs/, and implements several constructions of mutually orthogonal latin squares, as found in Douglas Stinson's book "Combinatorial Designs: Constructions and Analysis".

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/15286





---

archive/issue_comments_192206.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-16T14:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192206",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_192207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-10-16T14:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192208.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-10-18T12:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192209.json:
```json
{
    "body": "Hi,\n\nWhy this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.\n\n- The first line in the documentation is too large (146 columns).\n- line 112: \"(cite theorem)\" is not enough for the `ValueError` message\n- optimization line 123: replace l == [] by not l\n- could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation\n\nI will have a look at the mathematics next.",
    "created_at": "2013-12-27T17:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192209",
    "user": "https://github.com/videlec"
}
```

Hi,

Why this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.

- The first line in the documentation is too large (146 columns).
- line 112: "(cite theorem)" is not enough for the `ValueError` message
- optimization line 123: replace l == [] by not l
- could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation

I will have a look at the mathematics next.



---

archive/issue_comments_192210.json:
```json
{
    "body": "Helloooooo !!\n\n> Why this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.\n\nBecause I did not know that this module existed when I wrote this one. \"fortunately\" they are unrelated : the `sage.combinat.matrix.latin_squares` module deals with operations specific to a given latin square, while this module builds \"mutually orthogonal latin squares\". I added a comment to the top of the file.\n\n> - The first line in the documentation is too large (146 columns).\n\nFixed.\n\n> - line 112: \"(cite theorem)\" is not enough for the `ValueError` message\n\n`T_T`\n\nSorry 'bout that. It is fixed. I thought this theorem has a name, but it is just a nameless one in the references I have, so I just replaced this text by `There exist at most n-1 MOLS of size n.`. And I added a doctest.\n\n> - optimization line 123: replace l == [] by not l\n\nFixed. Assuming it was `p == []`.\n\n> - could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation\n\nI do not understand your sentence very well `O_o`\nThis being said, [Stinson2004] does appear in the documentation.\n\n> I will have a look at the mathematics next.\n\nThaaaaaaaaaaaaaaaaaaaaanks. I'm very very thankful fo that, 'cause I love all this designs code and there does not seem to be many design lovers among Sage's devs' `^^;`\n\nNathann",
    "created_at": "2013-12-27T18:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192210",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooo !!

> Why this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.

Because I did not know that this module existed when I wrote this one. "fortunately" they are unrelated : the `sage.combinat.matrix.latin_squares` module deals with operations specific to a given latin square, while this module builds "mutually orthogonal latin squares". I added a comment to the top of the file.

> - The first line in the documentation is too large (146 columns).

Fixed.

> - line 112: "(cite theorem)" is not enough for the `ValueError` message

`T_T`

Sorry 'bout that. It is fixed. I thought this theorem has a name, but it is just a nameless one in the references I have, so I just replaced this text by `There exist at most n-1 MOLS of size n.`. And I added a doctest.

> - optimization line 123: replace l == [] by not l

Fixed. Assuming it was `p == []`.

> - could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation

I do not understand your sentence very well `O_o`
This being said, [Stinson2004] does appear in the documentation.

> I will have a look at the mathematics next.

Thaaaaaaaaaaaaaaaaaaaaanks. I'm very very thankful fo that, 'cause I love all this designs code and there does not seem to be many design lovers among Sage's devs' `^^;`

Nathann



---

archive/issue_comments_192211.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-27T18:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192212.json:
```json
{
    "body": "As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.\n\nCould you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.\n\nBecause of your rebase on 6.1.beta2 I need some time to compile ;-(",
    "created_at": "2013-12-27T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192212",
    "user": "https://github.com/videlec"
}
```

As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.

Could you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.

Because of your rebase on 6.1.beta2 I need some time to compile ;-(



---

archive/issue_comments_192213.json:
```json
{
    "body": "Hellooooooooo !!\n\n> As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.\n\nWell, it means that we have no idea whether it exists or not, and in particular that Sage cannot built it. I don't really think it matters, but I can change it if you want.\n\nFor instance, this paper was published not very long ago :\nhttp://onlinelibrary.wiley.com/doi/10.1002/jcd.21384/abstract;jsessionid=6D04BFDDEA53369FE1ACDF6839FB7BD5.f01t01\n\nSo you can see what these MOLS mean : some guys are actually fighting to know the maximum order of MOLS of a given size.\n\n> Could you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.\n\n`O_o`\n\nWell, the product I use is also called a direct product in Stinson's book. Only his actually takes two latin squares of sizes `n,m` and returns a latin square of size `nxm`, which makes infinitely more sense than taking `4` squares as input with disjoints sets of symbols and concatenating them in a larger matrix. Sigh.. Combinat code..\n\nAnyway. Done, too.\n\n> Because of your rebase on 6.1.beta2 I need some time to compile ;-(\n\nYeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`\n\nNathann",
    "created_at": "2013-12-27T19:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192213",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooooo !!

> As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.

Well, it means that we have no idea whether it exists or not, and in particular that Sage cannot built it. I don't really think it matters, but I can change it if you want.

For instance, this paper was published not very long ago :
http://onlinelibrary.wiley.com/doi/10.1002/jcd.21384/abstract;jsessionid=6D04BFDDEA53369FE1ACDF6839FB7BD5.f01t01

So you can see what these MOLS mean : some guys are actually fighting to know the maximum order of MOLS of a given size.

> Could you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.

`O_o`

Well, the product I use is also called a direct product in Stinson's book. Only his actually takes two latin squares of sizes `n,m` and returns a latin square of size `nxm`, which makes infinitely more sense than taking `4` squares as input with disjoints sets of symbols and concatenating them in a larger matrix. Sigh.. Combinat code..

Anyway. Done, too.

> Because of your rebase on 6.1.beta2 I need some time to compile ;-(

Yeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`

Nathann



---

archive/issue_comments_192214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-27T19:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192215.json:
```json
{
    "body": "(this patch's only dependency is now positively reviewed)",
    "created_at": "2014-01-11T21:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192215",
    "user": "https://github.com/nathanncohen"
}
```

(this patch's only dependency is now positively reviewed)



---

archive/issue_comments_192216.json:
```json
{
    "body": "Hi Nathann,\n\nI am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?",
    "created_at": "2014-01-12T20:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192216",
    "user": "https://github.com/videlec"
}
```

Hi Nathann,

I am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?



---

archive/issue_comments_192217.json:
```json
{
    "body": "Yo !\n\n> I am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?\n\nWell, I was able to read the doc when I wrote this patch but I cannot build it at the moment.\n\n\n```\n[combinat ] building [html]: targets for 247 source files that are out of date\n[combinat ] updating environment: [config changed] 255 added, 0 changed, 0 removed\n[combinat ] Sphinx error:\n[combinat ] 'ascii' codec can't decode byte 0xe2 in position 939: ordinal not in range(128)\nBuild finished. The built documents can be found in /home/ncohen/.Sage/src/doc/output/html/en/reference/combinat\n```\n\n\nThis, however, is not this ticket's branch but... beta4. I get the same bug with this ticket's branch. So it has to be fixed.\n\nNathann",
    "created_at": "2014-01-12T20:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192217",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> I am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?

Well, I was able to read the doc when I wrote this patch but I cannot build it at the moment.


```
[combinat ] building [html]: targets for 247 source files that are out of date
[combinat ] updating environment: [config changed] 255 added, 0 changed, 0 removed
[combinat ] Sphinx error:
[combinat ] 'ascii' codec can't decode byte 0xe2 in position 939: ordinal not in range(128)
Build finished. The built documents can be found in /home/ncohen/.Sage/src/doc/output/html/en/reference/combinat
```


This, however, is not this ticket's branch but... beta4. I get the same bug with this ticket's branch. So it has to be fixed.

Nathann



---

archive/issue_comments_192218.json:
```json
{
    "body": "Hello !\n\nI ended up being able to build the doc. Some accent. And Sphinx not helping much either. The doc can be obtained from \"Combinatorics -> Designs and Incidence Structures -> Mutually Orthogonal Latin Squares (MOLS)\".\n\nNathann",
    "created_at": "2014-01-13T09:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192218",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

I ended up being able to build the doc. Some accent. And Sphinx not helping much either. The doc can be obtained from "Combinatorics -> Designs and Incidence Structures -> Mutually Orthogonal Latin Squares (MOLS)".

Nathann



---

archive/issue_comments_192219.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-13T09:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192220.json:
```json
{
    "body": "The dependency of this ticket has been reviewed.\n\nNathann",
    "created_at": "2014-02-06T10:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192220",
    "user": "https://github.com/nathanncohen"
}
```

The dependency of this ticket has been reviewed.

Nathann



---

archive/issue_comments_192221.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-06T10:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192222.json:
```json
{
    "body": "There is a useless \"else\" before the last return.",
    "created_at": "2014-02-24T09:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192222",
    "user": "https://github.com/fchapoton"
}
```

There is a useless "else" before the last return.



---

archive/issue_comments_192223.json:
```json
{
    "body": "Indeed, but it works both ways so... `:-P`",
    "created_at": "2014-02-24T11:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192223",
    "user": "https://github.com/nathanncohen"
}
```

Indeed, but it works both ways so... `:-P`



---

archive/issue_comments_192224.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n> > Because of your rebase on 6.1.beta2 I need some time to compile ;-(\n> \n> Yeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`\n\nYou must do a pull:\n\n\n```\nsage: dev.checkout(ticket='15286',base='develop')\n...\n(your local branch on top of develop is created)\n...\nsage: dev.pull('15286')\nMerging the remote branch \"u/ncohen/15286\" into the local branch \"ticket/15286\".\nAutomatic merge successful.\n\n#  (use \"dev.commit()\" to commit your merge)\n```\n",
    "created_at": "2014-02-24T14:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192224",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:8 ncohen]:
> > Because of your rebase on 6.1.beta2 I need some time to compile ;-(
> 
> Yeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`

You must do a pull:


```
sage: dev.checkout(ticket='15286',base='develop')
...
(your local branch on top of develop is created)
...
sage: dev.pull('15286')
Merging the remote branch "u/ncohen/15286" into the local branch "ticket/15286".
Automatic merge successful.

#  (use "dev.commit()" to commit your merge)
```




---

archive/issue_comments_192225.json:
```json
{
    "body": "> You must do a pull:\n\nWhy did you change the branch ? If you need to do it, please give it a `public/` name. And in particular, please set meaningful commit messages.\n\nNathann",
    "created_at": "2014-02-24T15:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192225",
    "user": "https://github.com/nathanncohen"
}
```

> You must do a pull:

Why did you change the branch ? If you need to do it, please give it a `public/` name. And in particular, please set meaningful commit messages.

Nathann



---

archive/issue_comments_192226.json:
```json
{
    "body": "Apologies and thanks---I didn't know about `public/`. BTW the docs built and look fine.",
    "created_at": "2014-02-24T15:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192226",
    "user": "https://github.com/rwst"
}
```

Apologies and thanks---I didn't know about `public/`. BTW the docs built and look fine.



---

archive/issue_comments_192227.json:
```json
{
    "body": "Hi there,\n\nI finally was able to build the doc !\n\nThe branch cleanly merges on 6.2.beta4. I implemented a are_mutually_orthogonal_latin_squares. It is very naive but provide a small check to your function (if there is a better way tell me !). See `u/vdelecroix/15286`\n\nI am happy with all what you did.",
    "created_at": "2014-03-12T19:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192227",
    "user": "https://github.com/videlec"
}
```

Hi there,

I finally was able to build the doc !

The branch cleanly merges on 6.2.beta4. I implemented a are_mutually_orthogonal_latin_squares. It is very naive but provide a small check to your function (if there is a better way tell me !). See `u/vdelecroix/15286`

I am happy with all what you did.



---

archive/issue_comments_192228.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-13T09:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192228",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_192229.json:
```json
{
    "body": "Wow !! Greaaaaaaaaaat, thank you so much !! I had almost forgotten about this long sequence of tickets.... `:-)`\n\nNathann\n----\nNew commits:",
    "created_at": "2014-03-13T09:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192229",
    "user": "https://github.com/nathanncohen"
}
```

Wow !! Greaaaaaaaaaat, thank you so much !! I had almost forgotten about this long sequence of tickets.... `:-)`

Nathann
----
New commits:



---

archive/issue_comments_192230.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-22T21:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15049#issuecomment-192230",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_014737.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-03-22T21:17:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15049#event-14737"
}
```
