# Issue 15049: Latin squares

Issue created by migration from https://trac.sagemath.org/ticket/15286

Original creator: ncohen

Original creation time: 2013-10-16 14:43:03

This patch creates a file `latin_squares.py` in combinat/designs/, and implements several constructions of mutually orthogonal latin squares, as found in Douglas Stinson's book "Combinatorial Designs: Constructions and Analysis".

Nathann


---

Comment by ncohen created at 2013-10-16 14:43:45

Changing status from new to needs_review.


---

Comment by git created at 2013-10-16 14:44:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-10-18 12:01:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2013-12-27 17:55:47

Hi,

Why this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.

- The first line in the documentation is too large (146 columns).
- line 112: "(cite theorem)" is not enough for the `ValueError` message
- optimization line 123: replace l == [] by not l
- could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation

I will have a look at the mathematics next.


---

Comment by ncohen created at 2013-12-27 18:13:32

Helloooooo !!

> Why this is not included to sage.combinat.matrix.latin_squares ? If you do not want to merge, you could at least make a reference.

Because I did not know that this module existed when I wrote this one. "fortunately" they are unrelated : the `sage.combinat.matrix.latin_squares` module deals with operations specific to a given latin square, while this module builds "mutually orthogonal latin squares". I added a comment to the top of the file.

> - The first line in the documentation is too large (146 columns).

Fixed.

> - line 112: "(cite theorem)" is not enough for the `ValueError` message

`T_T`

Sorry 'bout that. It is fixed. I thought this theorem has a name, but it is just a nameless one in the references I have, so I just replaced this text by `There exist at most n-1 MOLS of size n.`. And I added a doctest.

> - optimization line 123: replace l == [] by not l

Fixed. Assuming it was `p == []`.

> - could you put the references lines 117 and 140 that are in comments and I would like better to see them in the documentation

I do not understand your sentence very well `O_o`
This being said, [Stinson2004] does appear in the documentation.

> I will have a look at the mathematics next.

Thaaaaaaaaaaaaaaaaaaaaanks. I'm very very thankful fo that, 'cause I love all this designs code and there does not seem to be many design lovers among Sage's devs' `^^;`

Nathann


---

Comment by git created at 2013-12-27 18:14:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2013-12-27 19:00:11

As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.

Could you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.

Because of your rebase on 6.1.beta2 I need some time to compile ;-(


---

Comment by ncohen created at 2013-12-27 19:25:20

Hellooooooooo !!

> As far as I understand, when you raise the ValueError at line 162, it means that the code does not exist. Not that the entries are not consistent, right ? (I guess this is the purpose of your Warning in the documentation). I would then prefer a NotImplementedError.

Well, it means that we have no idea whether it exists or not, and in particular that Sage cannot built it. I don't really think it matters, but I can change it if you want.

For instance, this paper was published not very long ago :
http://onlinelibrary.wiley.com/doi/10.1002/jcd.21384/abstract;jsessionid=6D04BFDDEA53369FE1ACDF6839FB7BD5.f01t01

So you can see what these MOLS mean : some guys are actually fighting to know the maximum order of MOLS of a given size.

> Could you give the definition of your product (in the doc) ? Note that there is also a different product in sage.combinat.matrices.latin_square called `direct_product` and needs four latin squares as entries.

`O_o`

Well, the product I use is also called a direct product in Stinson's book. Only his actually takes two latin squares of sizes `n,m` and returns a latin square of size `nxm`, which makes infinitely more sense than taking `4` squares as input with disjoints sets of symbols and concatenating them in a larger matrix. Sigh.. Combinat code..

Anyway. Done, too.

> Because of your rebase on 6.1.beta2 I need some time to compile ;-(

Yeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`

Nathann


---

Comment by git created at 2013-12-27 19:26:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-01-11 21:46:17

(this patch's only dependency is now positively reviewed)


---

Comment by vdelecroix created at 2014-01-12 20:24:30

Hi Nathann,

I am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?


---

Comment by ncohen created at 2014-01-12 20:49:57

Yo !

> I am not able to access the documentation in the reference manual. Does it work for you ? Where is it linked ?

Well, I was able to read the doc when I wrote this patch but I cannot build it at the moment.


```
[combinat ] building [html]: targets for 247 source files that are out of date
[combinat ] updating environment: [config changed] 255 added, 0 changed, 0 removed
[combinat ] Sphinx error:
[combinat ] 'ascii' codec can't decode byte 0xe2 in position 939: ordinal not in range(128)
Build finished. The built documents can be found in /home/ncohen/.Sage/src/doc/output/html/en/reference/combinat
```


This, however, is not this ticket's branch but... beta4. I get the same bug with this ticket's branch. So it has to be fixed.

Nathann


---

Comment by ncohen created at 2014-01-13 09:36:54

Hello !

I ended up being able to build the doc. Some accent. And Sphinx not helping much either. The doc can be obtained from "Combinatorics -> Designs and Incidence Structures -> Mutually Orthogonal Latin Squares (MOLS)".

Nathann


---

Comment by git created at 2014-01-13 09:37:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-02-06 10:49:57

The dependency of this ticket has been reviewed.

Nathann


---

Comment by git created at 2014-02-06 10:54:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-02-24 09:15:04

There is a useless "else" before the last return.


---

Comment by ncohen created at 2014-02-24 11:18:24

Indeed, but it works both ways so... `:-P`


---

Comment by rws created at 2014-02-24 14:59:57

Replying to [comment:8 ncohen]:
> > Because of your rebase on 6.1.beta2 I need some time to compile ;-(
> 
> Yeah, that's one of the problems with git.. If you just checkout an old patch, you recompile everything. Well, at least now your Sage is up to date `^^;`

You must do a pull:


```
sage: dev.checkout(ticket='15286',base='develop')
...
(your local branch on top of develop is created)
...
sage: dev.pull('15286')
Merging the remote branch "u/ncohen/15286" into the local branch "ticket/15286".
Automatic merge successful.

#  (use "dev.commit()" to commit your merge)
```



---

Comment by ncohen created at 2014-02-24 15:20:12

> You must do a pull:

Why did you change the branch ? If you need to do it, please give it a `public/` name. And in particular, please set meaningful commit messages.

Nathann


---

Comment by rws created at 2014-02-24 15:49:34

Apologies and thanks---I didn't know about `public/`. BTW the docs built and look fine.


---

Comment by vdelecroix created at 2014-03-12 19:46:08

Hi there,

I finally was able to build the doc !

The branch cleanly merges on 6.2.beta4. I implemented a are_mutually_orthogonal_latin_squares. It is very naive but provide a small check to your function (if there is a better way tell me !). See `u/vdelecroix/15286`

I am happy with all what you did.


---

Comment by ncohen created at 2014-03-13 09:34:18

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-03-13 09:34:18

Wow !! Greaaaaaaaaaat, thank you so much !! I had almost forgotten about this long sequence of tickets.... `:-)`

Nathann
----
New commits:


---

Comment by vbraun created at 2014-03-22 21:17:03

Resolution: fixed
