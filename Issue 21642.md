# Issue 21642: Implement is_injective for ring homomorphisms

archive/issues_021642.json:
```json
{
    "body": "CC:  @roed314 @xcaruso\n\nKeywords: Rings, injectivity, is_injective, MorphismMethods, is_subring\n\nCurrently, `is_injective` is almost never implemented:\n\n```\nsage: ZZ.hom(QQ).is_injective()\nNotImplementedError\nsage: QQ.hom(QQ).is_injective()\nNotImplementedError\n```\n\nThis makes the method `is_subring` essentially useless since it relies on `is_injective` of the \"natural map\":\n\n```\nsage: GF(3).is_subring(GF(9))\nNotImplementedError\n```\n\nThe changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/21879\n\n",
    "created_at": "2016-11-15T06:18:10Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Implement is_injective for ring homomorphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21642",
    "user": "https://github.com/saraedum"
}
```
CC:  @roed314 @xcaruso

Keywords: Rings, injectivity, is_injective, MorphismMethods, is_subring

Currently, `is_injective` is almost never implemented:

```
sage: ZZ.hom(QQ).is_injective()
NotImplementedError
sage: QQ.hom(QQ).is_injective()
NotImplementedError
```

This makes the method `is_subring` essentially useless since it relies on `is_injective` of the "natural map":

```
sage: GF(3).is_subring(GF(9))
NotImplementedError
```

The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)

Issue created by migration from https://trac.sagemath.org/ticket/21879





---

archive/issue_comments_300274.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300274",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_300275.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300275",
    "user": "https://github.com/saraedum"
}
```

New commits:



---

archive/issue_comments_300276.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-15T08:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_300277.json:
```json
{
    "body": "Note that `is_injective` is now faster even for the one case where it just returned `True` before.\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: f = K.hom(x)\nsage: %timeit f.is_injective()\n```\n\nWent down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13\u00b5s.",
    "created_at": "2016-11-15T08:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300277",
    "user": "https://github.com/saraedum"
}
```

Note that `is_injective` is now faster even for the one case where it just returned `True` before.

```
sage: K.<x> = FunctionField(QQ)
sage: f = K.hom(x)
sage: %timeit f.is_injective()
```

Went down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13µs.



---

archive/issue_comments_300278.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-15T08:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_300279.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-18T00:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_300280.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-11-18T03:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300280",
    "user": "https://github.com/saraedum"
}
```

New commits:



---

archive/issue_comments_300281.json:
```json
{
    "body": "Assuming that the patchbot is happy, I am.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300281",
    "user": "https://github.com/roed314"
}
```

Assuming that the patchbot is happy, I am.



---

archive/issue_comments_300282.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300282",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_300283.json:
```json
{
    "body": "Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.",
    "created_at": "2016-11-18T04:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300283",
    "user": "https://github.com/saraedum"
}
```

Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.



---

archive/issue_comments_300284.json:
```json
{
    "body": "You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.",
    "created_at": "2016-11-19T22:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300284",
    "user": "https://github.com/vbraun"
}
```

You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.



---

archive/issue_comments_300285.json:
```json
{
    "body": "vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.",
    "created_at": "2016-11-19T23:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300285",
    "user": "https://github.com/saraedum"
}
```

vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.



---

archive/issue_comments_300286.json:
```json
{
    "body": "So, should the #21894 dependency be removed?",
    "created_at": "2016-11-30T00:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300286",
    "user": "https://github.com/roed314"
}
```

So, should the #21894 dependency be removed?



---

archive/issue_comments_300287.json:
```json
{
    "body": "Yes, I can replace it with a easier one.",
    "created_at": "2016-11-30T01:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300287",
    "user": "https://github.com/saraedum"
}
```

Yes, I can replace it with a easier one.



---

archive/issue_comments_300288.json:
```json
{
    "body": "We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)",
    "created_at": "2016-11-30T02:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300288",
    "user": "https://github.com/saraedum"
}
```

We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)



---

archive/issue_events_020443.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-03-27T20:42:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21642#event-20443"
}
```



---

archive/issue_comments_300289.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21642#issuecomment-300289",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
