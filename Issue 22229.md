# Issue 22229: Implement deletion, star and stellar subdivision of a face of simplicial complex

archive/issues_022229.json:
```json
{
    "body": "CC:  moritz vdelecroix\n\nKeywords: days84, simplicial complex, star, stellar subdivision, deletion\n\nThis ticket provides the deletion, the star and the stellar subdivision of a face of a simplicial complex.\n\nFor the deletion, there are different definitions which give different results. The difference lies in removing **or not** the vertices of the face. This should be an optional parameter.\n\nThe star of a face is the union of the faces that contains that face. The star of the empty face is the whole complex.\n\nGiven a simplicial complex C, the stellar subdivision of a face f of C is a new simplicial complex obtained as the barycentric subdivision of the face with respect to its star.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22466\n\n",
    "created_at": "2017-02-27T22:22:11Z",
    "labels": [
        "algebraic topology",
        "major",
        "enhancement"
    ],
    "title": "Implement deletion, star and stellar subdivision of a face of simplicial complex",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22229",
    "user": "jipilab"
}
```
CC:  moritz vdelecroix

Keywords: days84, simplicial complex, star, stellar subdivision, deletion

This ticket provides the deletion, the star and the stellar subdivision of a face of a simplicial complex.

For the deletion, there are different definitions which give different results. The difference lies in removing **or not** the vertices of the face. This should be an optional parameter.

The star of a face is the union of the faces that contains that face. The star of the empty face is the whole complex.

Given a simplicial complex C, the stellar subdivision of a face f of C is a new simplicial complex obtained as the barycentric subdivision of the face with respect to its star.

Issue created by migration from https://trac.sagemath.org/ticket/22466





---

archive/issue_comments_308932.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-02-28T11:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308932",
    "user": "jipilab"
}
```

New commits:



---

archive/issue_comments_308933.json:
```json
{
    "body": "Changing keywords from \"days84, simplicial complex, star, stellar subdivision, deletion\" to \"days84, simplicial complex, star, stellar subdivision\".",
    "created_at": "2017-02-28T11:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308933",
    "user": "jipilab"
}
```

Changing keywords from "days84, simplicial complex, star, stellar subdivision, deletion" to "days84, simplicial complex, star, stellar subdivision".



---

archive/issue_comments_308934.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T13:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308934",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308935.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T13:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308935",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308936.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-28T14:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308936",
    "user": "jipilab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_308937.json:
```json
{
    "body": "First few comments/questions:\n\n* would it be pertinent to check that the provided simplex is actually a simplex in the considered simplicial complex ?\n* You could provide non-working examples/tests to check such inconsistent user inputs.\n* in `stellar_subdivision`, the `mutable` option is not taken into account (does not appear in the code).\n* what is the difference between `is_mutable` and `mutable` option ?\n* you should add an `INPUT` section in `stellar_subdivision`.",
    "created_at": "2017-02-28T16:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308937",
    "user": "tmonteil"
}
```

First few comments/questions:

* would it be pertinent to check that the provided simplex is actually a simplex in the considered simplicial complex ?
* You could provide non-working examples/tests to check such inconsistent user inputs.
* in `stellar_subdivision`, the `mutable` option is not taken into account (does not appear in the code).
* what is the difference between `is_mutable` and `mutable` option ?
* you should add an `INPUT` section in `stellar_subdivision`.



---

archive/issue_comments_308938.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T17:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308938",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308939.json:
```json
{
    "body": "missing empty line here:\n\n```\n+        EXAMPLES::\n+            sage: SC = SimplicialComplex([[0,1,2],[1,2,3]])\n```\n",
    "created_at": "2017-03-02T17:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308939",
    "user": "chapoton"
}
```

missing empty line here:

```
+        EXAMPLES::
+            sage: SC = SimplicialComplex([[0,1,2],[1,2,3]])
```




---

archive/issue_comments_308940.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T17:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308940",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T17:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308941",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308942.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-02T18:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308942",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_308943.json:
```json
{
    "body": "You should avoid lines longer than 80 characters. I see one here:\n\n```\n- `is_mutable` -- (optional) boolean, determines if the output is mutable, default ``True``\n```\n\n\nIn a line like\n\n```\ndef stellar_subdivision(self,simplex,inplace=False,is_mutable=True):\n```\n\nthe style is to put a space after each comma.\n\nIn docstrings, use single backquotes or dollar signs \u2013 ``F``, `$F$` \u2013 for math, but use double backquotes \u2013 ```simplex```, ```is_mutable``` \u2013 for code.\n\nIn doctests, you need to put a double colon `::` before each indented line, not just a single colon. For example, you need two colons at the end of this line\n\n```\nThe simplex to subdivide should be a face of self::\n```\n\n\nI'm assuming that you haven't actually looked at the built documentation or you would have realized that there were problems. It's good practice to look at the html documentation to make sure it is okay.",
    "created_at": "2017-03-02T18:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308943",
    "user": "jhpalmieri"
}
```

You should avoid lines longer than 80 characters. I see one here:

```
- `is_mutable` -- (optional) boolean, determines if the output is mutable, default ``True``
```


In a line like

```
def stellar_subdivision(self,simplex,inplace=False,is_mutable=True):
```

the style is to put a space after each comma.

In docstrings, use single backquotes or dollar signs – ``F``, `$F$` – for math, but use double backquotes – ```simplex```, ```is_mutable``` – for code.

In doctests, you need to put a double colon `::` before each indented line, not just a single colon. For example, you need two colons at the end of this line

```
The simplex to subdivide should be a face of self::
```


I'm assuming that you haven't actually looked at the built documentation or you would have realized that there were problems. It's good practice to look at the html documentation to make sure it is okay.



---

archive/issue_comments_308944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T22:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308944",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308945.json:
```json
{
    "body": "Dear jhpalmieri,\n\nThank you for the comments. Indeed, the double ticks slipped out of my mind for the code part.\n\nI fixed the documentation, hopefully it should be okay now.",
    "created_at": "2017-03-02T22:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308945",
    "user": "jipilab"
}
```

Dear jhpalmieri,

Thank you for the comments. Indeed, the double ticks slipped out of my mind for the code part.

I fixed the documentation, hopefully it should be okay now.



---

archive/issue_comments_308946.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-02T22:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308946",
    "user": "jipilab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_308947.json:
```json
{
    "body": "Okay, better, but now the indentation doesn't match in the input and output blocks. You need to make changes like\n\n```diff\ndiff --git a/src/sage/homology/simplicial_complex.py b/src/sage/homology/simplicial_complex.py\nindex 2f2e997..0c77839 100644\n--- a/src/sage/homology/simplicial_complex.py\n+++ b/src/sage/homology/simplicial_complex.py\n@@ -2776,7 +2776,7 @@ class SimplicialComplex(Parent, GenericCellComplex):\n \n         - ``simplex`` -- a simplex in this simplicial complex\n         - ``is_mutable`` -- (default: ``True``) boolean; determines if the output\n-            is mutable\n+          is mutable\n \n         EXAMPLES::\n \n```\n",
    "created_at": "2017-03-02T22:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308947",
    "user": "jhpalmieri"
}
```

Okay, better, but now the indentation doesn't match in the input and output blocks. You need to make changes like

```diff
diff --git a/src/sage/homology/simplicial_complex.py b/src/sage/homology/simplicial_complex.py
index 2f2e997..0c77839 100644
--- a/src/sage/homology/simplicial_complex.py
+++ b/src/sage/homology/simplicial_complex.py
@@ -2776,7 +2776,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
 
         - ``simplex`` -- a simplex in this simplicial complex
         - ``is_mutable`` -- (default: ``True``) boolean; determines if the output
-            is mutable
+          is mutable
 
         EXAMPLES::
 
```




---

archive/issue_comments_308948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-03T07:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308948",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308949.json:
```json
{
    "body": "Oh! Okay, my bad! Should be okay now.\n\nThanks a lot for the help.",
    "created_at": "2017-03-03T07:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308949",
    "user": "jipilab"
}
```

Oh! Okay, my bad! Should be okay now.

Thanks a lot for the help.



---

archive/issue_comments_308950.json:
```json
{
    "body": "1) The first line of the 2 new methods should rather be\n\n```\n+        \"\"\"\n+        Return the star of a simplex in this simplicial complex.\n```\n\nand\n\n```\n+        \"\"\"\n+        Return the stellar subdivision of a simplex in this simplicial complex.\n```\n\n\n2) in the raise statements the convention is not to start with a capital and not to end with a dot, so something like\n\n```\n+            raise ValueError(\"this simplicial complex is not mutable\")\n```\n\nand\n\n```\n+            raise ValueError(\"the face to subdivide is not a face of self\")\n```\n\nand then change the doctests accordingly.\n\n3) I would add \"or on a copy\" here:\n\n```\n+        - ``inplace`` -- (default: ``False``) boolean; determines if the\n+          operation is done on ``self`` or on a copy\n```\n\n\nOtherwise, this looks good.",
    "created_at": "2017-03-03T16:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308950",
    "user": "chapoton"
}
```

1) The first line of the 2 new methods should rather be

```
+        """
+        Return the star of a simplex in this simplicial complex.
```

and

```
+        """
+        Return the stellar subdivision of a simplex in this simplicial complex.
```


2) in the raise statements the convention is not to start with a capital and not to end with a dot, so something like

```
+            raise ValueError("this simplicial complex is not mutable")
```

and

```
+            raise ValueError("the face to subdivide is not a face of self")
```

and then change the doctests accordingly.

3) I would add "or on a copy" here:

```
+        - ``inplace`` -- (default: ``False``) boolean; determines if the
+          operation is done on ``self`` or on a copy
```


Otherwise, this looks good.



---

archive/issue_comments_308951.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-03T17:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308951",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_308952.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-09T13:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308952",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_308953.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2017-03-09T13:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308953",
    "user": "chapoton"
}
```

ok, let it be



---

archive/issue_comments_308954.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-10T23:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22229#issuecomment-308954",
    "user": "vbraun"
}
```

Resolution: fixed
