# Issue 22229: Implement deletion, star and stellar subdivision of a face of simplicial complex

Issue created by migration from Trac.

Original creator: jipilab

Original creation time: 2017-02-27 22:22:11

CC:  moritz vdelecroix

Keywords: days84, simplicial complex, star, stellar subdivision, deletion

This ticket provides the deletion, the star and the stellar subdivision of a face of a simplicial complex.

For the deletion, there are different definitions which give different results. The difference lies in removing *or not* the vertices of the face. This should be an optional parameter.

The star of a face is the union of the faces that contains that face. The star of the empty face is the whole complex.

Given a simplicial complex C, the stellar subdivision of a face f of C is a new simplicial complex obtained as the barycentric subdivision of the face with respect to its star.


---

Comment by jipilab created at 2017-02-28 11:48:44

New commits:


---

Comment by jipilab created at 2017-02-28 11:48:44

Changing keywords from "days84, simplicial complex, star, stellar subdivision, deletion" to "days84, simplicial complex, star, stellar subdivision".


---

Comment by git created at 2017-02-28 13:46:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-28 13:59:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-02-28 14:00:42

Changing status from new to needs_review.


---

Comment by tmonteil created at 2017-02-28 16:38:36

First few comments/questions:

* would it be pertinent to check that the provided simplex is actually a simplex in the considered simplicial complex ?
* You could provide non-working examples/tests to check such inconsistent user inputs.
* in `stellar_subdivision`, the `mutable` option is not taken into account (does not appear in the code).
* what is the difference between `is_mutable` and `mutable` option ?
* you should add an `INPUT` section in `stellar_subdivision`.


---

Comment by git created at 2017-02-28 17:14:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-03-02 17:00:30

missing empty line here:

```
+        EXAMPLES::
+            sage: SC = SimplicialComplex([[0,1,2],[1,2,3]])
```



---

Comment by git created at 2017-03-02 17:10:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-03-02 17:13:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2017-03-02 18:25:37

Changing status from needs_review to needs_work.


---

Comment by jhpalmieri created at 2017-03-02 18:25:37

You should avoid lines longer than 80 characters. I see one here:

```
- `is_mutable` -- (optional) boolean, determines if the output is mutable, default ``True``
```


In a line like

```
def stellar_subdivision(self,simplex,inplace=False,is_mutable=True):
```

the style is to put a space after each comma.

In docstrings, use single backquotes or dollar signs – ``F``, `$F$` – for math, but use double backquotes – ```simplex```, ```is_mutable``` – for code.

In doctests, you need to put a double colon `::` before each indented line, not just a single colon. For example, you need two colons at the end of this line

```
The simplex to subdivide should be a face of self::
```


I'm assuming that you haven't actually looked at the built documentation or you would have realized that there were problems. It's good practice to look at the html documentation to make sure it is okay.


---

Comment by git created at 2017-03-02 22:36:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-03-02 22:40:00

Dear jhpalmieri,

Thank you for the comments. Indeed, the double ticks slipped out of my mind for the code part.

I fixed the documentation, hopefully it should be okay now.


---

Comment by jipilab created at 2017-03-02 22:41:37

Changing status from needs_work to needs_review.


---

Comment by jhpalmieri created at 2017-03-02 22:58:06

Okay, better, but now the indentation doesn't match in the input and output blocks. You need to make changes like

```diff
diff --git a/src/sage/homology/simplicial_complex.py b/src/sage/homology/simplicial_complex.py
index 2f2e997..0c77839 100644
--- a/src/sage/homology/simplicial_complex.py
+++ b/src/sage/homology/simplicial_complex.py
`@``@` -2776,7 +2776,7 `@``@` class SimplicialComplex(Parent, GenericCellComplex):
 
         - ``simplex`` -- a simplex in this simplicial complex
         - ``is_mutable`` -- (default: ``True``) boolean; determines if the output
-            is mutable
+          is mutable
 
         EXAMPLES::
 
```



---

Comment by git created at 2017-03-03 07:55:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-03-03 07:56:46

Oh! Okay, my bad! Should be okay now.

Thanks a lot for the help.


---

Comment by chapoton created at 2017-03-03 16:30:55

1) The first line of the 2 new methods should rather be

```
+        """
+        Return the star of a simplex in this simplicial complex.
```

and

```
+        """
+        Return the stellar subdivision of a simplex in this simplicial complex.
```


2) in the raise statements the convention is not to start with a capital and not to end with a dot, so something like

```
+            raise ValueError("this simplicial complex is not mutable")
```

and

```
+            raise ValueError("the face to subdivide is not a face of self")
```

and then change the doctests accordingly.

3) I would add "or on a copy" here:

```
+        - ``inplace`` -- (default: ``False``) boolean; determines if the
+          operation is done on ``self`` or on a copy
```


Otherwise, this looks good.


---

Comment by git created at 2017-03-03 17:55:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-03-09 13:05:52

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-03-09 13:05:52

ok, let it be


---

Comment by vbraun created at 2017-03-10 23:12:54

Resolution: fixed
