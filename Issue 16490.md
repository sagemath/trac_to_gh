# Issue 16490: IncidenceStructure.__contains__

Issue created by migration from https://trac.sagemath.org/ticket/16727

Original creator: ncohen

Original creation time: 2014-07-29 12:57:57

CC:  vdelecroix knsam dimpase

Right now it is obtained through `.__iter__`, and it does not do the job


```
sage: [1,2,3,4] in IncidenceStructure([[1,2,3,4]])
True
sage: [4,3,2,1] in IncidenceStructure([[1,2,3,4]])
False
```



---

Comment by ncohen created at 2014-07-29 12:58:50

Changing status from new to needs_review.


---

Comment by git created at 2014-07-29 12:59:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2014-07-29 13:12:10

at least some tests should use some "real" incidence structures, not just 1-element examples...


---

Comment by git created at 2014-07-29 13:23:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2014-07-29 14:00:20

Replying to [comment:4 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[e7ef8c0](http://git.sagemath.org/sage.git/commit/?id=e7ef8c0e2b5f5ef36112428094faa8de2a32316c)||`trac #16727: Moloch! Time Eater!`||

Well, test on non-degenerate examples, please! Your favourite STS on 15 points will do for sure...


---

Comment by ncohen created at 2014-07-29 14:04:40

> Well, test on non-degenerate examples, please! Your favourite STS on 15 points will do for sure...

Hey Dima I have no idea what doctest you want me to write but I am not going to lose 10 minutes per try until I find out. Add a commit to the branch if you don't like my doctests.

Nathann


---

Comment by dimpase created at 2014-07-29 14:09:42

Replying to [comment:6 ncohen]:
> > Well, test on non-degenerate examples, please! Your favourite STS on 15 points will do for sure...
> 
> Hey Dima I have no idea what doctest you want me to write but I am not going to lose 10 minutes per try until I find out. Add a commit to the branch if you don't like my doctests.

A degenerate input is a corner case: one-element hypergraphs and complete uniform hypergraphs are surely degenerate inputs. Such tests don't stress much of the implementation, as you can imagine.
Test on, say, `ProjectiveGeometryDesign(3,1,GF(2))` as well.


---

Comment by ncohen created at 2014-07-29 14:11:29

> A degenerate input is a corner case: one-element hypergraphs and complete uniform hypergraphs are surely degenerate inputs. Such tests don't stress much of the implementation, as you can imagine.

Dima, are you aware that the only thing we are testing here is whether an element belongs to a LIST ? Python does not care at all what the elements are, it is all pointers as far as it is concerned.

> Test on, say, `ProjectiveGeometryDesign(3,1,GF(2))` as well.

Add your commit.

Nathann


---

Comment by dimpase created at 2014-07-29 14:28:11

Replying to [comment:8 ncohen]:
> > A degenerate input is a corner case: one-element hypergraphs and complete uniform hypergraphs are surely degenerate inputs. Such tests don't stress much of the implementation, as you can imagine.
> 
> Dima, are you aware that the only thing we are testing here is whether an element belongs to a LIST ? 
Good doctests should test the function as if it were a blackbox.
The underlying implementation might change, might become more sophisticated, and the doctests should catch bugs in such future changes. Unless you prefer bug-driven development model to the test-driven one ;-)


---

Comment by ncohen created at 2014-07-29 14:31:57

> Good doctests should test the function as if it were a blackbox.

Religion does not work on me.

> Unless you prefer bug-driven development model to the test-driven one ;-)

I am not against doctests, I am against your spending my time on this. I believe that this function is sufficiently doctested, and I already added tests because you asked. If they don't satisfy you for some reason, I do not mind it but you will have to write your own and add it to the branch.

Nathann


---

Comment by dimpase created at 2014-07-29 14:43:06

Replying to [comment:10 ncohen]:
> > Good doctests should test the function as if it were a blackbox.
> 
> Religion does not work on me.
It has nothing to do with religion, this is just common sense, sorry.

> 
> > Unless you prefer bug-driven development model to the test-driven one ;-)
> 
> I am not against doctests, I am against your spending my time on this. I believe that this function is sufficiently doctested, and I already added tests because you asked. If they don't satisfy you for some reason, I do not mind it but you will have to write your own and add it to the branch.

I believe that I explained sufficiently clear that testing only corner cases does not work, yet you added another corner case test, for a complete uniform hypergraph is a corner case, AFAIK.

And I have elected to be a reviewer, sorry. It is my job to decide what a sufficient doctest is, not yours.
Well, if you cannot add the doctests I ask for, I can surely do this too, only then you will be spending my time on this, not the other way around.


---

Comment by ncohen created at 2014-07-29 14:46:36

Yo !

> I believe that I explained sufficiently clear that testing only corner cases does not work, yet you added another corner case test, for a complete uniform hypergraph is a corner case, AFAIK.

A uniform hypergraph is a "corner case" in hypergraph theory. Not as an example of Python list. I mixed integers and strings, and order. That's how I tested non-corner cases that made sense from the point of view of what this function does. It is also a doctest of the bug I reported in this ticket's description.

> And I have elected to be a reviewer, sorry. It is my job to decide what a sufficient doctest is, not yours.

Indeed, but when you see that you cannot explain what you want without making lose the other guy's time because he apparently does not get it, you can save everybody by writing the 4 lines yourself.

Nathann


---

Comment by dimpase created at 2014-07-29 14:48:11

Replying to [comment:12 ncohen]:
> Yo !
> 
> > I believe that I explained sufficiently clear that testing only corner cases does not work, yet you added another corner case test, for a complete uniform hypergraph is a corner case, AFAIK.
> 
> A uniform hypergraph is a "corner case" in hypergraph theory. Not as an example of Python list. I mixed integers and strings, and order. That's how I tested non-corner cases that made sense from the point of view of what this function does. It is also a doctest of the bug I reported in this ticket's description.
> 
> > And I have elected to be a reviewer, sorry. It is my job to decide what a sufficient doctest is, not yours.
> 
> Indeed, but when you see that you cannot explain what you want without making lose the other guy's time because he apparently does not get it, you can save everybody by writing the 4 lines yourself.

OK, will do...

> 
> Nathann


---

Comment by dimpase created at 2014-07-29 15:00:53

Replying to [comment:13 dimpase]:

> OK, will do...

after I'm done building 6.3.beta7, that is...


---

Comment by git created at 2014-07-30 09:58:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-07-30 10:04:52

Yoooooooooooooooo !

The tests pass, so if that's okay for you... `:-)`

Nathann


---

Comment by dimpase created at 2014-07-30 10:05:49

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-31 00:44:27

Resolution: fixed
