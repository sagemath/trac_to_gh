# Issue 13637: cygwin metaticket: port Sage to Microsoft Windows (via Cygwin): stage 2 -- Sage starts and passes a lot of doctests

archive/issues_013637.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  jpflori dimpase was eviatarbach\n\nAt #6743, we are really very close to having Sage on Cygwin build with `make` and appropriate prereqs.  This ticket is that Sage also *starts* without extra intervention on Cygwin.\n\nThe current status is that #6743 actually achieves this goal, but in the past this wasn't always the case, and so it is a good idea to have a ticket for this!  Hopefully it won't be necessary, though.\n\nCurrently (with Sage 5.5.rc0) we need #11635 and the prereq of `libgc-devel` to start but *not* to build.  Also, #9167 and friends are needed for Maxima and ECL to perform properly as libraries.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13841\n\n",
    "created_at": "2012-12-18T20:49:34Z",
    "labels": [
        "porting: Cygwin",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "cygwin metaticket: port Sage to Microsoft Windows (via Cygwin): stage 2 -- Sage starts and passes a lot of doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13637",
    "user": "kcrisman"
}
```
Assignee: tbd

CC:  jpflori dimpase was eviatarbach

At #6743, we are really very close to having Sage on Cygwin build with `make` and appropriate prereqs.  This ticket is that Sage also *starts* without extra intervention on Cygwin.

The current status is that #6743 actually achieves this goal, but in the past this wasn't always the case, and so it is a good idea to have a ticket for this!  Hopefully it won't be necessary, though.

Currently (with Sage 5.5.rc0) we need #11635 and the prereq of `libgc-devel` to start but *not* to build.  Also, #9167 and friends are needed for Maxima and ECL to perform properly as libraries.

Issue created by migration from https://trac.sagemath.org/ticket/13841





---

archive/issue_comments_168762.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-08T16:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168762",
    "user": "kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_168763.json:
```json
{
    "body": "Looks like we won't need this... of course, one never knows, with all the upgrades to spkgs in every version!  Anyway, I'm setting this to sage-pending on #6743 for now.",
    "created_at": "2013-03-08T16:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168763",
    "user": "kcrisman"
}
```

Looks like we won't need this... of course, one never knows, with all the upgrades to spkgs in every version!  Anyway, I'm setting this to sage-pending on #6743 for now.



---

archive/issue_comments_168764.json:
```json
{
    "body": "I guess we should close this one.",
    "created_at": "2013-04-12T12:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168764",
    "user": "jpflori"
}
```

I guess we should close this one.



---

archive/issue_comments_168765.json:
```json
{
    "body": "Until #6743 is merged, I say never say never!  There always seems to be some crazy thing that stands in the way.",
    "created_at": "2013-04-12T12:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168765",
    "user": "kcrisman"
}
```

Until #6743 is merged, I say never say never!  There always seems to be some crazy thing that stands in the way.



---

archive/issue_comments_168766.json:
```json
{
    "body": "Given that #6743 is closed (though not merged in a specific Sage version yet), perhaps this should be as well now?   Are the 5.10 betas doing well on Cygwin?\n\nWith respect to *keeping* it working... JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?  I just don't have the access to Windows/time to mess with them often enough to guarantee this; given how finicky Cygwin is, we will likely have to keep fixing things that other tickets do - either in terms of missing includes in pyx files or in terms of spkgs which don't have proper stuff...  Thanks for all your amazing work on this!",
    "created_at": "2013-05-23T13:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168766",
    "user": "kcrisman"
}
```

Given that #6743 is closed (though not merged in a specific Sage version yet), perhaps this should be as well now?   Are the 5.10 betas doing well on Cygwin?

With respect to *keeping* it working... JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?  I just don't have the access to Windows/time to mess with them often enough to guarantee this; given how finicky Cygwin is, we will likely have to keep fixing things that other tickets do - either in terms of missing includes in pyx files or in terms of spkgs which don't have proper stuff...  Thanks for all your amazing work on this!



---

archive/issue_comments_168767.json:
```json
{
    "body": "Replying to [comment:4 kcrisman]:\n> JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?\nI think hardware shouldn't be the problem, I'm sure William can setup a VM for this if needed. Time, on the other hand, is a more valuable resource...",
    "created_at": "2013-05-24T12:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168767",
    "user": "jdemeyer"
}
```

Replying to [comment:4 kcrisman]:
> JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?
I think hardware shouldn't be the problem, I'm sure William can setup a VM for this if needed. Time, on the other hand, is a more valuable resource...



---

archive/issue_comments_168768.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> Replying to [comment:4 kcrisman]:\n> > JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?\n> I think hardware shouldn't be the problem, I'm sure William can setup a VM for this if needed.\nYeah that would be very helpful, at least for a buildbot (though it may need human intervention somehow because of rebasing issues, but also note that 64 bits cygwin is on its way and seems quite already in a usale state except for the lack of an installer and me being able to find where to downnload it!).\n>  Time, on the other hand, is a more valuable resource...\nFor at least one year, or mybe two years, i.e. until I change job, I should have some time for that.",
    "created_at": "2013-05-24T13:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168768",
    "user": "jpflori"
}
```

Replying to [comment:5 jdemeyer]:
> Replying to [comment:4 kcrisman]:
> > JP, are you saying that you have the hardware and time to commit to monitoring this for (say) 2 years?
> I think hardware shouldn't be the problem, I'm sure William can setup a VM for this if needed.
Yeah that would be very helpful, at least for a buildbot (though it may need human intervention somehow because of rebasing issues, but also note that 64 bits cygwin is on its way and seems quite already in a usale state except for the lack of an installer and me being able to find where to downnload it!).
>  Time, on the other hand, is a more valuable resource...
For at least one year, or mybe two years, i.e. until I change job, I should have some time for that.



---

archive/issue_comments_168769.json:
```json
{
    "body": "And having VMs already turned on somewhere would also be nice to run things such as \"make ptestlong\" which are incredibly slow because of forking.",
    "created_at": "2013-05-24T13:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168769",
    "user": "jpflori"
}
```

And having VMs already turned on somewhere would also be nice to run things such as "make ptestlong" which are incredibly slow because of forking.



---

archive/issue_comments_168770.json:
```json
{
    "body": "A buildbot would need a cygwin-less way to log in onto it, otherwise rebasing can't always be done. And the standard WIndows way (with a GUI -- \"remote desktop connection\") might be too slow if the work needs to be done across continents. Are there alternatives? I don't really know. There are sshd \"native\" WIndows implementations, but I never tried them.",
    "created_at": "2013-05-24T13:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168770",
    "user": "dimpase"
}
```

A buildbot would need a cygwin-less way to log in onto it, otherwise rebasing can't always be done. And the standard WIndows way (with a GUI -- "remote desktop connection") might be too slow if the work needs to be done across continents. Are there alternatives? I don't really know. There are sshd "native" WIndows implementations, but I never tried them.



---

archive/issue_comments_168771.json:
```json
{
    "body": "Using \"rebase -O\" should be possible even though other Cygwin processes are running (as long as nothing from Sage is).",
    "created_at": "2013-05-24T13:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168771",
    "user": "jpflori"
}
```

Using "rebase -O" should be possible even though other Cygwin processes are running (as long as nothing from Sage is).



---

archive/issue_comments_168772.json:
```json
{
    "body": "Replying to [comment:9 jpflori]:\n> Using \"rebase -O\" should be possible even though other Cygwin processes are running (as long as nothing from Sage is).\nyes, but if you want to install a new version of Sage, then you probably want to wipe the rebase databases and do a full, cygwin-less, rebase.",
    "created_at": "2013-05-24T13:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168772",
    "user": "dimpase"
}
```

Replying to [comment:9 jpflori]:
> Using "rebase -O" should be possible even though other Cygwin processes are running (as long as nothing from Sage is).
yes, but if you want to install a new version of Sage, then you probably want to wipe the rebase databases and do a full, cygwin-less, rebase.



---

archive/issue_comments_168773.json:
```json
{
    "body": "I'd say the trick would be to never let Sage enter the rebase database by only using \"rebase -O\" :)",
    "created_at": "2013-05-24T13:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168773",
    "user": "jpflori"
}
```

I'd say the trick would be to never let Sage enter the rebase database by only using "rebase -O" :)



---

archive/issue_comments_168774.json:
```json
{
    "body": "Replying to [comment:11 jpflori]:\n> I'd say the trick would be to never let Sage enter the rebase database by only using \"rebase -O\" :)\n\nAre you sure that \"rebase -O\" does not add stuff to the database? I thought it does, it just does not move what's already there...",
    "created_at": "2013-05-24T14:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168774",
    "user": "dimpase"
}
```

Replying to [comment:11 jpflori]:
> I'd say the trick would be to never let Sage enter the rebase database by only using "rebase -O" :)

Are you sure that "rebase -O" does not add stuff to the database? I thought it does, it just does not move what's already there...



---

archive/issue_comments_168775.json:
```json
{
    "body": "Replying to [comment:12 dimpase]:\n> Replying to [comment:11 jpflori]:\n> > I'd say the trick would be to never let Sage enter the rebase database by only using \"rebase -O\" :)\n> \n> Are you sure that \"rebase -O\" does not add stuff to the database? I thought it does, it just does not move what's already there...\nYup, completely sure, it just reads what's there to rebase after what already exists, but does not write anything.\n\nE.g. if you \"rebase -O\" two copies of sage and try to run them at the same time, it will likely fail because \"rebase -O\" will have used the same addesses.",
    "created_at": "2013-05-24T15:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168775",
    "user": "jpflori"
}
```

Replying to [comment:12 dimpase]:
> Replying to [comment:11 jpflori]:
> > I'd say the trick would be to never let Sage enter the rebase database by only using "rebase -O" :)
> 
> Are you sure that "rebase -O" does not add stuff to the database? I thought it does, it just does not move what's already there...
Yup, completely sure, it just reads what's there to rebase after what already exists, but does not write anything.

E.g. if you "rebase -O" two copies of sage and try to run them at the same time, it will likely fail because "rebase -O" will have used the same addesses.



---

archive/issue_comments_168776.json:
```json
{
    "body": "Replying to [comment:7 jpflori]:\n> And having VMs already turned on somewhere would also be nice to run things such as \"make ptestlong\" which are incredibly slow because of forking.\nWhat is \"incredibly slow\"? For me, there is no problem if Sage can be built and tested within 48 hours. Is that feasible?",
    "created_at": "2013-05-24T15:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168776",
    "user": "jdemeyer"
}
```

Replying to [comment:7 jpflori]:
> And having VMs already turned on somewhere would also be nice to run things such as "make ptestlong" which are incredibly slow because of forking.
What is "incredibly slow"? For me, there is no problem if Sage can be built and tested within 48 hours. Is that feasible?



---

archive/issue_comments_168777.json:
```json
{
    "body": "Replying to [comment:13 jpflori]:\n> Replying to [comment:12 dimpase]:\n> > Replying to [comment:11 jpflori]:\n> > > I'd say the trick would be to never let Sage enter the rebase database by only using \"rebase -O\" :)\n> > \n> > Are you sure that \"rebase -O\" does not add stuff to the database? I thought it does, it just does not move what's already there...\n> Yup, completely sure, it just reads what's there to rebase after what already exists, but does not write anything.\n\nThe mapping of dlls to addresses must be stored somewhere. (where?)\nAre you saying that the next run of \"rebase -O\" completely erases this mapping, and builds a new one from scratch?",
    "created_at": "2013-05-24T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168777",
    "user": "dimpase"
}
```

Replying to [comment:13 jpflori]:
> Replying to [comment:12 dimpase]:
> > Replying to [comment:11 jpflori]:
> > > I'd say the trick would be to never let Sage enter the rebase database by only using "rebase -O" :)
> > 
> > Are you sure that "rebase -O" does not add stuff to the database? I thought it does, it just does not move what's already there...
> Yup, completely sure, it just reads what's there to rebase after what already exists, but does not write anything.

The mapping of dlls to addresses must be stored somewhere. (where?)
Are you saying that the next run of "rebase -O" completely erases this mapping, and builds a new one from scratch?



---

archive/issue_comments_168778.json:
```json
{
    "body": "I'd say it's stored into the dlls themselves, not sure though, but not in the system-wide database for sure, my usual user doesnt have write access to it anyway.\n\nI'm not sure a second run would change everything, it just acts like a usual rebase (without -O) but does not record the results into the system-wide database, so if no dll was added into the global database and you're not adding new stuff to the list of additional files you want to rebase then nothing will change (maybe if you remove some then it will try to pack the address space used).",
    "created_at": "2013-05-25T10:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168778",
    "user": "jpflori"
}
```

I'd say it's stored into the dlls themselves, not sure though, but not in the system-wide database for sure, my usual user doesnt have write access to it anyway.

I'm not sure a second run would change everything, it just acts like a usual rebase (without -O) but does not record the results into the system-wide database, so if no dll was added into the global database and you're not adding new stuff to the list of additional files you want to rebase then nothing will change (maybe if you remove some then it will try to pack the address space used).



---

archive/issue_comments_168779.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-12-15T18:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168779",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_168780.json:
```json
{
    "body": "This ticket hasn't been updated in 4+ years, and doesn't really discuss anything that's still an open issue for the Cygwin port.\n\nThe best way right now to track progress on the Cygwin port is to just search on the [porting: Cygwin component](https://trac.sagemath.org/query?status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&component=porting%3A+Cygwin&col=id&col=summary&col=status&col=type&col=priority&col=milestone&col=component&order=priority).",
    "created_at": "2017-04-13T10:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168780",
    "user": "embray"
}
```

This ticket hasn't been updated in 4+ years, and doesn't really discuss anything that's still an open issue for the Cygwin port.

The best way right now to track progress on the Cygwin port is to just search on the [porting: Cygwin component](https://trac.sagemath.org/query?status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&component=porting%3A+Cygwin&col=id&col=summary&col=status&col=type&col=priority&col=milestone&col=component&order=priority).



---

archive/issue_comments_168781.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2017-04-13T10:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13637#issuecomment-168781",
    "user": "embray"
}
```

Resolution: worksforme
