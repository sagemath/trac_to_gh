# Issue 30368: improve cone containment tests

Issue created by migration from https://trac.sagemath.org/ticket/30605

Original creator: mjo

Original creation time: 2020-09-18 20:33:01

CC:  @kliem jipilab novoselt

If `K` is a polyhedral cone, the test `x in K` only supports `x` with rational coordinates. It is desirable in many cases to perform the same test with irrational numbers as well.

This will simplify the implementation in ticket #29169.



---

Comment by novoselt created at 2020-09-19 03:11:48

I was thinking what should be done with reals and other non-exact things, but I think it does not matter - as long as exact ones are handled correctly, it is user's responsibility to be aware that non-exact things may give wrong results without extra care.


---

Comment by mjo created at 2020-09-19 03:38:54

The difficulty is never where you think it will be...


```
sage: bool(I >= 0)                                                              
True
```



---

Comment by mjo created at 2020-09-19 12:39:43

Maybe this suffices?
----
New commits:


---

Comment by mjo created at 2020-09-19 12:39:43

Changing status from new to needs_review.


---

Comment by git created at 2020-09-19 15:33:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2020-09-23 06:44:11

Could you follow the recommendation of `pycodestyle` and do one command per line, e.g.


```diff
-        if p is not None: return p
+        if p is not None:
+            return p
```


or


```diff
-        try: return L.base_extend(ring)(data)
-        except TypeError: pass
-        except ValueError as ex:
-            if str(ex).startswith("Cannot coerce"): pass
+        try:
+            return L.base_extend(ring)(data)
+        except TypeError:
+            pass
+        except ValueError as ex:
+            if str(ex).startswith("Cannot coerce"):
+                pass
```


I think this make it easier to read.

Once done, you can set in on positive review on my behalf.


---

Comment by git created at 2020-09-23 21:28:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2020-09-23 21:30:04

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2020-09-23 21:30:04

Thanks! I fixed the indentation in one final (separate) commit if you want to take a look. But pycodestyle is happy now.


---

Comment by vbraun created at 2020-09-30 22:29:56

Resolution: fixed
