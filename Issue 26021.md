# Issue 26021: py3 : Fix doctest in enumerated_sets.py

Issue created by migration from Trac.

Original creator: vklein

Original creation time: 2018-09-12 09:33:31




---

Comment by vklein created at 2018-09-12 09:38:26

Changing status from new to needs_review.


---

Comment by vklein created at 2018-09-12 09:38:26

New commits:


---

Comment by tscrim created at 2018-09-13 00:58:34

Since they are enumerated, you should not have to call `sorted` on any of them (it iterates according to the enumeration). So none of these changes should be necessary.

The `L = list(F)` test is not very good. Perhaps a better test would be:

```
sage: F = FiniteSemigroups().example(('a','b','c'))
sage: L = list(F)
sage: L[7].rank()
7
sage: all(x.rank() == i for i,x in enumerate(L))
True
```


The changed tests in `map` destroy one of the key parts of the result of `map`: the iteration order does not change. So I am guessing the heart of the problem is in the iterator for `SymmetricGroup` being a `RecursivelyEnumeratedSet` and the non-determinism there. I think you are better changing it to `Compositions(4)` and then using these:

```
sage: R = Compositions(4).map(attrcall('partial_sums'))   # For the generic test
[[1, 2, 3, 4], [1, 2, 4], [1, 3, 4], [1, 4], [2, 3, 4], [2, 4], [3, 4], [4]]
sage: C = Compositions(4).map(attrcall('major_index')).list()   # For the WARNING:: test
[6, 3, 4, 1, 5, 2, 3, 0]
```



---

Comment by tscrim created at 2018-09-13 00:58:41

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-09-13 08:09:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2018-09-13 08:15:37

Changing status from needs_work to needs_review.


---

Comment by vklein created at 2018-09-13 08:15:37

Thanks for your review and detailed fixes.


---

Comment by tscrim created at 2018-09-13 08:43:31

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-09-13 08:43:31

LGTM. Thank you.


---

Comment by vbraun created at 2018-09-14 20:26:42

Resolution: fixed
