# Issue 14395: Allow custom fill endpoints in a filled plot

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2013-05-16 18:35:28

Assignee: jason, was

CC:  dsm vbraun

Keywords: beginner

In [this ask.sagemath question](http://ask.sagemath.org/question/943/in-sage-plot-fill-the-area-under-a-curve-between), the issue is raised whether

```
sage: f = x*(x-1)*(x-2)+1
sage: p = plot(f, 0.5, 1.5, fill=True) + plot(f, 0, 2)
```

should be doable in a single command, such as with a `fillxmin`/`fillxmax` keyword (or some better name).


---

Comment by captaintrunky created at 2014-11-11 21:08:01

New commits:


---

Comment by captaintrunky created at 2014-11-11 21:08:01

Changing status from new to needs_review.


---

Comment by kcrisman created at 2014-11-11 21:51:39

This is great that you are working on this!  I don't see any obvious problems in the code, though I won't be able to look at it more carefully right now.  My first thought, though, is what happens with parametric plots?  Somehow their fill "magically" works right, and I'm wondering what the behavior might be with this keyword.


---

Comment by git created at 2014-11-12 17:19:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by captaintrunky created at 2014-11-12 17:23:33

Replying to [comment:7 kcrisman]:
> This is great that you are working on this!  I don't see any obvious problems in the code, though I won't be able to look at it more carefully right now.  My first thought, though, is what happens with parametric plots?  Somehow their fill "magically" works right, and I'm wondering what the behavior might be with this keyword.
Thanks for the feedback. You were right, there was some weird staff with parametric curves. It seems to work fine now, but these new custom endpoints definitely require some additional checks. However, I couldn't break it with my test suite, which contains a set of well-known curves.


---

Comment by kcrisman created at 2014-11-12 18:23:53

Hmm, maybe you can add some of those to the tests/examples; at any rate, currently your branch has only one _non_-example, not examples of how to use this.  Or, if you have a pretty extensive suite, there are a couple testing-only files out there that could be added to - we love tests!


---

Comment by git created at 2014-11-13 19:21:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kcrisman created at 2015-02-04 00:52:47

Look at the following interesting behavior.

```
sage: plot([x^3,x^2,x], xmin=0, xmax=4, fill={0:[1], 1:1, 2:1-x}, fillxmin=1, fillxmax=2)
```

It's definitely obeying the `fillxmax` but not in the way one might expect.

Similarly, I'm not sure that

```
sage: plot((cos(x),sin(x)), xmin=0, xmax=2*pi, parametric=True, fill=True, fillxmin=0.5)
```

is behaving as expected.

And I'm completely flummoxed as to why

```
sage: plot((cos(x),sin(x)), xmin=0, xmax=2*pi, parametric=True, fill=True, fillxmin=1)
<boom>
KeyError: 'text/plain'
```

due to the new display hook stuff!

One possible workaround would be to disallow the custom fill (for now) in parametric plots (i.e. raise an error) and make that a new ticket.  I do think that the first 'bad' example should be dealt with, though.


---

Comment by kcrisman created at 2015-02-04 00:52:47

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2015-02-04 01:04:18

the problem is probably that the plot object is invalid (it can't actually show a plot). Because there is insufficient validation this only causes issues later when you actually try to plot it.


---

Comment by kcrisman created at 2015-02-04 01:09:59

Hmm, that makes sense.  I have to say that the error is a little cryptic.


---

Comment by @DaveWitteMorris created at 2020-05-27 03:04:55

Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.


---

Comment by @DaveWitteMorris created at 2020-05-27 03:04:55

Changing keywords from "beginner" to "".
