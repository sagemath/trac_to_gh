# Issue 15914: Making BasisExchangeMatroid fool-proof with user input sanity checks

archive/issues_015914.json:
```json
{
    "body": "Assignee: Jayant Apte\n\nCC:  rudi stefan\n\nFollowing creates a segfault:\n\n```\nfrom sage.matroids.advanced import *\nM = BasisMatroid(matroids.named_matroids.Vamos())\nlen(M.independent_r_sets(9))\n```\n\nThis is because of wrong user input (vamos matroid has only 8 elements, so there is no independent set of size bigger than 8). This ticket is to add sanity checks on user input to filter out such cases and raise appropriate exceptions.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16151\n\n",
    "created_at": "2014-04-13T19:18:35Z",
    "labels": [
        "component: matroid theory",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Making BasisExchangeMatroid fool-proof with user input sanity checks",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15914",
    "user": "https://github.com/jayant91089"
}
```
Assignee: Jayant Apte

CC:  rudi stefan

Following creates a segfault:

```
from sage.matroids.advanced import *
M = BasisMatroid(matroids.named_matroids.Vamos())
len(M.independent_r_sets(9))
```

This is because of wrong user input (vamos matroid has only 8 elements, so there is no independent set of size bigger than 8). This ticket is to add sanity checks on user input to filter out such cases and raise appropriate exceptions.


Issue created by migration from https://trac.sagemath.org/ticket/16151





---

archive/issue_comments_206446.json:
```json
{
    "body": "This should do it. \n\nI corrected independent_r_sets and also dependent_r_sets (and then I corrected myself, since the latter needed a slightly different treatment). \n\nAs far as I can see, flats(r) is already fool-proof, and there are no other user-facing methods that take parameters.\n----\nNew commits:",
    "created_at": "2014-04-13T20:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206446",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

This should do it. 

I corrected independent_r_sets and also dependent_r_sets (and then I corrected myself, since the latter needed a slightly different treatment). 

As far as I can see, flats(r) is already fool-proof, and there are no other user-facing methods that take parameters.
----
New commits:



---

archive/issue_comments_206447.json:
```json
{
    "body": "I made myself 'author' since I am the author of the patch. Or does that field refer to the author of the ticket? I would think not, since there are also `owner` and `reported by` fields.",
    "created_at": "2014-04-13T20:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206447",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

I made myself 'author' since I am the author of the patch. Or does that field refer to the author of the ticket? I would think not, since there are also `owner` and `reported by` fields.



---

archive/issue_comments_206448.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-13T20:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206448",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_206449.json:
```json
{
    "body": "The aforementioned check is in place now and the segfault mentioned above no longer occurs. As Rudi mentioned, all user facing methods that take parameters are now safe from bad input parameters.",
    "created_at": "2014-04-14T02:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206449",
    "user": "https://github.com/jayant91089"
}
```

The aforementioned check is in place now and the segfault mentioned above no longer occurs. As Rudi mentioned, all user facing methods that take parameters are now safe from bad input parameters.



---

archive/issue_comments_206450.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-14T02:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206450",
    "user": "https://github.com/jayant91089"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_206451.json:
```json
{
    "body": "Thanks Jayant!",
    "created_at": "2014-04-14T06:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206451",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Thanks Jayant!



---

archive/issue_comments_206452.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-14T19:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15914#issuecomment-206452",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_047582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-14T19:57:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15914",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15914#event-47582"
}
```
