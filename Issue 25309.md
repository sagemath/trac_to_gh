# Issue 25309: Install Jupyter kernel in the correct prefix

Issue created by migration from https://trac.sagemath.org/ticket/25546

Original creator: jdemeyer

Original creation time: 2018-06-08 17:45:56

CC:  @timokau fbissey

The Sage Jupyter kernel is unconditionally installed in `sys.prefix`. However, this should instead be the `install_data` directory. This defaults to the installation prefix, which in turn defaults to `sys.prefix`. So the default won't change, but it allows customization.

The reason for choosing `install_data` is to be compatible with other Jupyter packages, which use the `data_files` option to `setup()` for installing Jupyter files.


---

Comment by jdemeyer created at 2018-06-08 17:53:18

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-06-08 17:53:18

New commits:


---

Comment by fbissey created at 2018-06-08 22:38:17

That looks like it may greatly simplify my life. I have still one issue about the current setup but it is comparatively minor - I think the code installing the kernel should live under `sage_setup` since you are not supposed to use it at runtime. But that can wait.


---

Comment by @timokau created at 2018-06-09 21:15:08

What is the `install_data` directory? Is that variable documented somewhere?


---

Comment by fbissey created at 2018-06-10 02:45:36

Replying to [comment:5 gh-timokau]:
> What is the `install_data` directory? Is that variable documented somewhere?

It's a standard distutils command it is mentioned on this page for example https://wiki.python.org/moin/Distutils/Tutorial.


---

Comment by jdemeyer created at 2018-06-10 07:16:07

Replying to [comment:5 gh-timokau]:
> What is the `install_data` directory? Is that variable documented somewhere?

I don't know whether it's documented, but it's the directory where `data_files` are installed. As I explained in the ticket description, it's certainly the right directory to use.


---

Comment by jdemeyer created at 2018-06-10 07:17:21

Replying to [comment:6 fbissey]:
> https://wiki.python.org/moin/Distutils/Tutorial. 

I think that page takes about about `install_data` _command_, not the `install_data` _directory_.


---

Comment by @timokau created at 2018-06-10 10:46:35

Replying to [comment:8 jdemeyer]:
> Replying to [comment:5 gh-timokau]:
> > What is the `install_data` directory? Is that variable documented somewhere?
> 
> I don't know whether it's documented, but it's the directory where `data_files` are installed. As I explained in the ticket description, it's certainly the right directory to use.

I can't even find the default value of that variable by grepping through the distutils source. However as long as it is relative to `--prefix`, thats fine by me and should solve #25328.


---

Comment by vklein created at 2018-06-19 13:10:57

Changing status from needs_review to positive_review.


---

Comment by vklein created at 2018-06-19 13:10:57

Tested. It works for me.


---

Comment by vbraun created at 2018-06-20 18:06:30

Resolution: fixed
