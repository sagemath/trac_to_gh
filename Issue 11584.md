# Issue 11584: PolyBoRi 0.7.1 needs to activate -msse2

archive/issues_011584.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  strogdon leif malb burcin simon king\n\nAs pointed out in #11574: code which uses M4RI must explicitly provide the compiler option -msse2, (if the SSE2 extensions are available, but deactivated in gcc per default.)\n\nThe following spkg fixes this issue for PolyBoRI:  http://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p5.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/11756\n\n",
    "created_at": "2011-08-29T09:56:58Z",
    "labels": [
        "algebra",
        "critical",
        "bug"
    ],
    "title": "PolyBoRi 0.7.1 needs to activate -msse2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11584",
    "user": "AlexanderDreyer"
}
```
Assignee: AlexGhitza

CC:  strogdon leif malb burcin simon king

As pointed out in #11574: code which uses M4RI must explicitly provide the compiler option -msse2, (if the SSE2 extensions are available, but deactivated in gcc per default.)

The following spkg fixes this issue for PolyBoRI:  http://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p5.spkg

Issue created by migration from https://trac.sagemath.org/ticket/11756





---

archive/issue_comments_130464.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-29T09:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130464",
    "user": "AlexanderDreyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_130465.json:
```json
{
    "body": "I tested this SPKG on cicero and doctests pass.\n\nThere was a minor issue:\n\n```\n$ hg status\n? patches/SConstruct.orig\n? patches/SConstruct.rej\n```\n\nwhich I fixed in http://sage.math.washington.edu/home/malb/spkgs/polybori-0.7.1.p5.spkg.\n\nAlexander, if you agree with this fix then just replace the link in the description of the ticket and we are good to go for a positive review.",
    "created_at": "2011-08-31T10:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130465",
    "user": "malb"
}
```

I tested this SPKG on cicero and doctests pass.

There was a minor issue:

```
$ hg status
? patches/SConstruct.orig
? patches/SConstruct.rej
```

which I fixed in http://sage.math.washington.edu/home/malb/spkgs/polybori-0.7.1.p5.spkg.

Alexander, if you agree with this fix then just replace the link in the description of the ticket and we are good to go for a positive review.



---

archive/issue_comments_130466.json:
```json
{
    "body": "Sorry, I should know better. Thanks for removing the relicts. I'm fine with the new spkg.",
    "created_at": "2011-08-31T20:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130466",
    "user": "AlexanderDreyer"
}
```

Sorry, I should know better. Thanks for removing the relicts. I'm fine with the new spkg.



---

archive/issue_comments_130467.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-31T23:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130467",
    "user": "malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_130468.json:
```json
{
    "body": "Looks as if Alexander gets paid per changeset... ;-)",
    "created_at": "2011-09-01T02:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130468",
    "user": "leif"
}
```

Looks as if Alexander gets paid per changeset... ;-)



---

archive/issue_comments_130469.json:
```json
{
    "body": "Replying to [comment:5 leif]:\n> Looks as if Alexander gets paid per changeset... ;-)\nNot really, I'm currently on parental leave, so this is my private fun.",
    "created_at": "2011-09-01T08:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130469",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:5 leif]:
> Looks as if Alexander gets paid per changeset... ;-)
Not really, I'm currently on parental leave, so this is my private fun.



---

archive/issue_comments_130470.json:
```json
{
    "body": "Changing assignee from AlexGhitza to AlexanderDreyer.",
    "created_at": "2011-09-01T08:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130470",
    "user": "AlexanderDreyer"
}
```

Changing assignee from AlexGhitza to AlexanderDreyer.



---

archive/issue_comments_130471.json:
```json
{
    "body": "Replying to [comment:5 leif]:\n> Looks as if Alexander gets paid per changeset... ;-)\nPS: If you mean the number of small changesets making up this single fix: Yeah, there are indeed lots of changesets. The Gentoo Vm was so slow that I edited outside and  transferred edits via bitbucket. And it was 3 a.m....",
    "created_at": "2011-09-01T08:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130471",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:5 leif]:
> Looks as if Alexander gets paid per changeset... ;-)
PS: If you mean the number of small changesets making up this single fix: Yeah, there are indeed lots of changesets. The Gentoo Vm was so slow that I edited outside and  transferred edits via bitbucket. And it was 3 a.m....



---

archive/issue_comments_130472.json:
```json
{
    "body": "Replying to [comment:8 AlexanderDreyer]:\n> Replying to [comment:5 leif]:\n> > Looks as if Alexander gets paid per changeset... ;-)\n> PS: If you mean the number of small changesets making up this single fix...\n\nWhat did you think?\n\nI was wondering whether you had built some commit -> twitter interface. :)",
    "created_at": "2011-09-01T08:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130472",
    "user": "leif"
}
```

Replying to [comment:8 AlexanderDreyer]:
> Replying to [comment:5 leif]:
> > Looks as if Alexander gets paid per changeset... ;-)
> PS: If you mean the number of small changesets making up this single fix...

What did you think?

I was wondering whether you had built some commit -> twitter interface. :)



---

archive/issue_comments_130473.json:
```json
{
    "body": "Replying to [comment:9 leif]:\n> I was wondering whether you had built some commit -> twitter interface. :)\nNo, but that's a good idea for an April, 1st project ;-)",
    "created_at": "2011-09-01T08:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130473",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:9 leif]:
> I was wondering whether you had built some commit -> twitter interface. :)
No, but that's a good idea for an April, 1st project ;-)



---

archive/issue_comments_130474.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-12T18:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130474",
    "user": "leif"
}
```

Resolution: fixed



---

archive/issue_comments_130475.json:
```json
{
    "body": "Unfortunately, it turned out that the `-sse2` guessing was wrong (failed on sparc Solaris).\nThe following spkg should fix this issue (not tested on sparc yet):\nhttp://sage.math.washington.edu/home/malb/spkgs/polybori-0.7.1.p6.spkg",
    "created_at": "2011-09-19T21:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130475",
    "user": "AlexanderDreyer"
}
```

Unfortunately, it turned out that the `-sse2` guessing was wrong (failed on sparc Solaris).
The following spkg should fix this issue (not tested on sparc yet):
http://sage.math.washington.edu/home/malb/spkgs/polybori-0.7.1.p6.spkg



---

archive/issue_comments_130476.json:
```json
{
    "body": "Sorry, copy & paste mistake! The corrected URL is here:\nhttp://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p6.spkg",
    "created_at": "2011-09-19T21:45:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130476",
    "user": "AlexanderDreyer"
}
```

Sorry, copy & paste mistake! The corrected URL is here:
http://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p6.spkg



---

archive/issue_comments_130477.json:
```json
{
    "body": "Replying to [comment:12 AlexanderDreyer]:\n> Unfortunately, it turned out that the `-sse2` guessing was wrong (failed on sparc Solaris).\n> The following spkg should fix this issue (not tested on sparc yet):\n> [...]\n\n\n```\n...\npolybori-0.7.1.p6\nMachine:\nSunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500\nDeleting directories from past builds of previous/current versions of polybori-0.7.1.p6\nExtracting package /home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/spkg/standard/polybori-0.7.1.p6.spkg ...\n-rw-r--r--   1 leif     sage     1916931 Sep 19 17:26 /home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/spkg/standard/polybori-0.7.1.p6.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld/libexec/gcc/sparc-sun-solaris2.10/4.5.1/lto-wrapper\nTarget: sparc-sun-solaris2.10\nConfigured with: /usr/local/gcc-4.5.1/src/gcc-4.5.1/configure --enable-languages=c,c++,fortran --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local/gmp-5.0.1/sparc-SunOS-ultrasparc3-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/sparc-SunOS-ultrasparc3-gmp-5.0.1-abi32 --with-mpc=/usr/local/mpc-0.8.2/sparc-ultrasparc3-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld\nThread model: posix\ngcc version 4.5.1 (GCC) \n****************************************************\nStarting build...\nRemoving old PolyBoRi install...\nDone removing old PolyBoRi install.\nRunning build_polybori...\nscons: Reading SConscript files ...\nsh: cc: not found\nsunos linker detected!\nPlatform:  sunos5\nPlatform:  sunos5\nChecking for C header file gd.h... yes\nChecking for C library gd... yes\nChecking for C++ header file unordered_map... no\nChecking for C++ header file tr1/unordered_map... yes\nWarning: No LaTeX to html converter found, Tutorial will not be installed\nChecking for C library m4ri... yes\nChecking for C header file gd.h... yes\nChecking for C library gd... yes\nGuessing m4ri compile flags... yes\nno python extension\nscons: done reading SConscript files.\nscons: Building targets ...\ng++ -o polybori/src/BoolePolyRing.o -c -O3 -Wno-long-long -Wreturn-type -g -fPIC -ftemplate-depth-100 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -DHAVE_GD -DHAVE_TR1_UNORDERED_MAP -DPACKED -DHAVE_M4RI -DHAVE_GD -DHAVE_IEEE_754 -DBSD -I/home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/local/include -I/home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/local/include/python2.6 -Ipolybori/include -ICudd/obj -ICudd/util -ICudd/cudd -ICudd/mtr -ICudd/st -ICudd/epd polybori/src/BoolePolyRing.cc\n\n...\n\nscons: done building targets.\nDone installing PolyBoRi.\n\nreal    23m44.021s\nuser    20m28.186s\nsys     1m34.198s\nSuccessfully installed polybori-0.7.1.p6\n```\n\n\nThanks!\n\nOnly the message now is a bit funny:\n\n```\nGuessing m4ri compile flags... yes\n```\n",
    "created_at": "2011-09-20T11:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130477",
    "user": "leif"
}
```

Replying to [comment:12 AlexanderDreyer]:
> Unfortunately, it turned out that the `-sse2` guessing was wrong (failed on sparc Solaris).
> The following spkg should fix this issue (not tested on sparc yet):
> [...]


```
...
polybori-0.7.1.p6
Machine:
SunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500
Deleting directories from past builds of previous/current versions of polybori-0.7.1.p6
Extracting package /home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/spkg/standard/polybori-0.7.1.p6.spkg ...
-rw-r--r--   1 leif     sage     1916931 Sep 19 17:26 /home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/spkg/standard/polybori-0.7.1.p6.spkg
Finished extraction
****************************************************
Host system
uname -a:
SunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld/libexec/gcc/sparc-sun-solaris2.10/4.5.1/lto-wrapper
Target: sparc-sun-solaris2.10
Configured with: /usr/local/gcc-4.5.1/src/gcc-4.5.1/configure --enable-languages=c,c++,fortran --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local/gmp-5.0.1/sparc-SunOS-ultrasparc3-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/sparc-SunOS-ultrasparc3-gmp-5.0.1-abi32 --with-mpc=/usr/local/mpc-0.8.2/sparc-ultrasparc3-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld
Thread model: posix
gcc version 4.5.1 (GCC) 
****************************************************
Starting build...
Removing old PolyBoRi install...
Done removing old PolyBoRi install.
Running build_polybori...
scons: Reading SConscript files ...
sh: cc: not found
sunos linker detected!
Platform:  sunos5
Platform:  sunos5
Checking for C header file gd.h... yes
Checking for C library gd... yes
Checking for C++ header file unordered_map... no
Checking for C++ header file tr1/unordered_map... yes
Warning: No LaTeX to html converter found, Tutorial will not be installed
Checking for C library m4ri... yes
Checking for C header file gd.h... yes
Checking for C library gd... yes
Guessing m4ri compile flags... yes
no python extension
scons: done reading SConscript files.
scons: Building targets ...
g++ -o polybori/src/BoolePolyRing.o -c -O3 -Wno-long-long -Wreturn-type -g -fPIC -ftemplate-depth-100 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -DHAVE_GD -DHAVE_TR1_UNORDERED_MAP -DPACKED -DHAVE_M4RI -DHAVE_GD -DHAVE_IEEE_754 -DBSD -I/home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/local/include -I/home/leif/Sage/release/build/mark/sage-4.7.2.alpha3-prerelease-gcc-4.5.1/local/include/python2.6 -Ipolybori/include -ICudd/obj -ICudd/util -ICudd/cudd -ICudd/mtr -ICudd/st -ICudd/epd polybori/src/BoolePolyRing.cc

...

scons: done building targets.
Done installing PolyBoRi.

real    23m44.021s
user    20m28.186s
sys     1m34.198s
Successfully installed polybori-0.7.1.p6
```


Thanks!

Only the message now is a bit funny:

```
Guessing m4ri compile flags... yes
```




---

archive/issue_comments_130478.json:
```json
{
    "body": "Replying to [comment:15 leif]:\n> Thanks!\nFine, I'm happy that this worked out.\n\n> Only the message now is a bit funny:\n> {{{\n> Guessing m4ri compile flags... yes\n> }}}\nYes, but it is useful for debugging reasons: `... no` means that including m4ri's config headers failed.",
    "created_at": "2011-09-20T19:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11584#issuecomment-130478",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:15 leif]:
> Thanks!
Fine, I'm happy that this worked out.

> Only the message now is a bit funny:
> {{{
> Guessing m4ri compile flags... yes
> }}}
Yes, but it is useful for debugging reasons: `... no` means that including m4ri's config headers failed.
