# Issue 32159: Abolute value function for scalar fields

Issue created by migration from https://trac.sagemath.org/ticket/32396

Original creator: @mjungmath

Original creation time: 2021-08-18 13:01:02

CC:  egourgoulhon tscrim

Currently, the `abs` operator cannot be applied to scalar fields:


```
sage:             sage: M = Manifold(2, 'M', structure='topological')
....:             sage: X.<x,y> = M.chart()
....:             sage: f = M.scalar_field({X: x*y}, name='f', latex_name=r"\Phi")
....: abs(f)
Traceback (most recent call last)
...
TypeError: bad operand type for abs(): 'ScalarFieldAlgebra_with_category.element_class'
```


In this ticket, we add this feature.


---

Comment by @mjungmath created at 2021-08-18 13:02:28

New commits:


---

Comment by @mjungmath created at 2021-08-18 13:02:28

Changing status from new to needs_review.


---

Comment by tscrim created at 2021-08-19 08:11:37

LGTM.


---

Comment by tscrim created at 2021-08-19 08:11:37

Changing status from needs_review to positive_review.


---

Comment by @mjungmath created at 2021-08-19 08:36:52

Thank you for the review!


---

Comment by egourgoulhon created at 2021-08-19 08:46:59

Thanks for implementing this. Any reason for the choice of `Abs` rather than `abs` for the function name?


---

Comment by @mjungmath created at 2021-08-19 08:49:59

No particular reason. Do you prefer `abs` or maybe `|.|`?


---

Comment by egourgoulhon created at 2021-08-19 09:47:34

Replying to [comment:8 gh-mjungmath]:
> No particular reason. Do you prefer `abs` or maybe `|.|`?
I don't have any strong preference. `abs` sounds more inline with other function names in Sage, while `|.|` is closer to mathematical notation, so I would slightly prefer the latter. Travis, what do you think?


---

Comment by tscrim created at 2021-08-19 10:00:07

I am slightly worried about possible ambiguity with `|.|`. I might go with `abs` over `Abs` just because of `\lvert` compared to `\lVert` and to match Sages's `abs`. However, I didn't (and still don't) really care for which one as it is clear documentation-wise what it is doing (and hidden from the causal user). So I am not the person to ask for a real opinion on this.


---

Comment by git created at 2021-08-19 21:46:14

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2021-08-19 21:46:14

Changing status from positive_review to needs_review.


---

Comment by @mjungmath created at 2021-08-19 21:46:59

Alright, I changed it to `abs` with small letters. I find it a strong argument to say that this follows general Sage convention.


---

Comment by tscrim created at 2021-08-19 23:22:23

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-08-19 23:22:23

Thanks. I am setting back to a positive review.


---

Comment by vbraun created at 2021-09-13 22:22:04

Resolution: fixed
