# Issue 16256: Sage --dev tests broken for non-interactive shells

Issue created by migration from Trac.

Original creator: robertwb

Original creation time: 2014-06-18 04:55:23

The manifests itself on various buildbots, giving errors like


```
File "/scratch/scoder/jenkins/sage/sage-git/src/sage/tests/cmdline.py", line 467, in sage.tests.cmdline.test_executable
Failed example:
    ret, err
Expected:
    (0, '')
Got:
    (1, 'Traceback (most recent call last):
  File "/scratch/scoder/jenkins/sage/sage-git/src/bin/sage-dev", line 334, in <module>
    parser = parser_from_object(DEV)
  File "/scratch/scoder/jenkins/sage/sage-git/src/bin/sage-dev", line 258, in parser_from_object
    parser = argparse.ArgumentParser(*args, **kwds)
  File "/scratch/scoder/jenkins/sage/sage-git/local/lib/python/argparse.py", line 1600, in __init__
    help=_(\'show this help message and exit\'))
  File "/scratch/scoder/jenkins/sage/sage-git/local/lib/python/argparse.py", line 1291, in add_argument
    self._get_formatter()._format_args(action, None)
  File "/scratch/scoder/jenkins/sage/sage-git/local/lib/python/argparse.py", line 2314, in _get_formatter
    return self.formatter_class(prog=self.prog)
  File "/scratch/scoder/jenkins/sage/sage-git/src/bin/sage-dev", line 37, in __init__
    width=DEV._sagedev._UI._get_dimensions()[1]-2, *args, **kwds)
  File "/scratch/scoder/jenkins/sage/sage-git/local/lib/python2.7/site-packages/sage/dev/cmd_line_interface.py", line 264, in _get_dimensions
    fd = os.open(os.ctermid(), os.O_RDONLY)
OSError: [Errno 6] No such device or address: \'/dev/tty\'
```





---

Comment by robertwb created at 2014-06-18 04:56:20

New commits:


---

Comment by robertwb created at 2014-06-18 04:56:20

Changing status from new to needs_review.


---

Comment by rws created at 2014-06-21 15:26:51

Should be good. Passes on desktop Sage.


---

Comment by rws created at 2014-06-21 15:26:51

Set assignee to rws.


---

Comment by jdemeyer created at 2014-10-01 13:08:08

Changing component from doctest framework to misc.


---

Comment by robertwb created at 2014-10-19 04:47:02

Ralf, is that a positive review?


---

Comment by chapoton created at 2014-10-21 15:52:41

Now using the new-style doctest continuation.
----
New commits:


---

Comment by robertwb created at 2014-10-21 16:04:55

Ah, thanks. Positive review for the new style continuation.


---

Comment by vbraun created at 2014-10-26 13:12:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-10-26 19:21:58

Resolution: fixed
