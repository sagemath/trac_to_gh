# Issue 18669: Refactor min spanning tree

Issue created by migration from https://trac.sagemath.org/ticket/18906

Original creator: borassi

Original creation time: 2015-07-15 12:38:52

CC:  ncohen dcoudert




---

Comment by borassi created at 2015-07-15 13:49:54

Changing component from PLEASE CHANGE to graph theory.


---

Comment by borassi created at 2015-07-15 13:49:54

Changing keywords from "" to "Minimum spanning tree".


---

Comment by borassi created at 2015-07-15 13:49:54

Changing type from PLEASE CHANGE to defect.


---

Comment by borassi created at 2015-07-15 14:54:53

Changing status from new to needs_review.


---

Comment by borassi created at 2015-07-15 14:54:53

New commits:


---

Comment by git created at 2015-07-15 15:24:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-07-15 16:53:38

I like this patch, and I didn't know that it had bugs.

Wouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.


---

Comment by git created at 2015-07-15 17:16:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-07-15 21:27:30

Good to go.


---

Comment by dcoudert created at 2015-07-15 21:27:30

Changing status from needs_review to positive_review.


---

Comment by borassi created at 2015-07-16 06:31:55

Hello!

I just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!

See you,

Michele


---

Comment by borassi created at 2015-07-16 06:31:55

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-07-16 08:02:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by borassi created at 2015-07-16 08:24:33

Hello!

I have made two more changes to the Kruskal algorithm, specified in the description:

 * now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;
 * we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

Sorry for the "late" decision, but I realized this was better only after I submitted the previous code.

Michele


---

Comment by borassi created at 2015-07-16 08:24:33

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-07-16 08:26:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dcoudert created at 2015-07-16 11:55:27

There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.
I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o

The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.


---

Comment by git created at 2015-07-16 13:36:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by borassi created at 2015-07-16 14:00:34

> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.

You are right: I removed the method, and I call the `to_simple` routine.

> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o
> 
> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.

I have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).


---

Comment by git created at 2015-07-16 14:00:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-07-16 17:29:10

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2015-07-16 17:29:10

It's much better now.
I ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)
The doc builds properly and looks good.
Thanks.


---

Comment by vbraun created at 2015-07-27 15:15:49

Resolution: fixed
