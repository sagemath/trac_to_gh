# Issue 18669: Refactor min spanning tree

archive/issues_018669.json:
```json
{
    "body": "CC:  ncohen dcoudert\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18906\n\n",
    "created_at": "2015-07-15T12:38:52Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Refactor min spanning tree",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18669",
    "user": "borassi"
}
```
CC:  ncohen dcoudert



Issue created by migration from https://trac.sagemath.org/ticket/18906





---

archive/issue_comments_254281.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254281",
    "user": "borassi"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_254282.json:
```json
{
    "body": "Changing keywords from \"\" to \"Minimum spanning tree\".",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254282",
    "user": "borassi"
}
```

Changing keywords from "" to "Minimum spanning tree".



---

archive/issue_comments_254283.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254283",
    "user": "borassi"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_254284.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-15T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254284",
    "user": "borassi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254285.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-07-15T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254285",
    "user": "borassi"
}
```

New commits:



---

archive/issue_comments_254286.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-15T15:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254286",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254287.json:
```json
{
    "body": "I like this patch, and I didn't know that it had bugs.\n\nWouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.",
    "created_at": "2015-07-15T16:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254287",
    "user": "dcoudert"
}
```

I like this patch, and I didn't know that it had bugs.

Wouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.



---

archive/issue_comments_254288.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-15T17:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254288",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254289.json:
```json
{
    "body": "Good to go.",
    "created_at": "2015-07-15T21:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254289",
    "user": "dcoudert"
}
```

Good to go.



---

archive/issue_comments_254290.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-15T21:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254290",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254291.json:
```json
{
    "body": "Hello!\n\nI just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!\n\nSee you,\n\nMichele",
    "created_at": "2015-07-16T06:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254291",
    "user": "borassi"
}
```

Hello!

I just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!

See you,

Michele



---

archive/issue_comments_254292.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-07-16T06:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254292",
    "user": "borassi"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_254293.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-16T08:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254293",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254294.json:
```json
{
    "body": "Hello!\n\nI have made two more changes to the Kruskal algorithm, specified in the description:\n\n* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;\n* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n\nSorry for the \"late\" decision, but I realized this was better only after I submitted the previous code.\n\nMichele",
    "created_at": "2015-07-16T08:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254294",
    "user": "borassi"
}
```

Hello!

I have made two more changes to the Kruskal algorithm, specified in the description:

* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;
* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

Sorry for the "late" decision, but I realized this was better only after I submitted the previous code.

Michele



---

archive/issue_comments_254295.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-16T08:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254295",
    "user": "borassi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254296.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-07-16T08:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254296",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_254297.json:
```json
{
    "body": "There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\nI however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n\nThe best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.",
    "created_at": "2015-07-16T11:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254297",
    "user": "dcoudert"
}
```

There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.
I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o

The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.



---

archive/issue_comments_254298.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-16T13:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254298",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254299.json:
```json
{
    "body": "> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\n\nYou are right: I removed the method, and I call the `to_simple` routine.\n\n> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n> \n> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.\n\nI have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).",
    "created_at": "2015-07-16T14:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254299",
    "user": "borassi"
}
```

> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.

You are right: I removed the method, and I call the `to_simple` routine.

> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o
> 
> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.

I have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).



---

archive/issue_comments_254300.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-16T14:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254300",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254301.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-16T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254301",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254302.json:
```json
{
    "body": "It's much better now.\nI ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)\nThe doc builds properly and looks good.\nThanks.",
    "created_at": "2015-07-16T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254302",
    "user": "dcoudert"
}
```

It's much better now.
I ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)
The doc builds properly and looks good.
Thanks.



---

archive/issue_comments_254303.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-27T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18669#issuecomment-254303",
    "user": "vbraun"
}
```

Resolution: fixed
