# Issue 18177: Undeclared dependency on automake

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2015-05-14 02:44:38

CC:  vbraun jdemeyer ncohen

Keywords: dependencies, automake, aclocal, build

Trying to make-build 6.7.beta5 without automake breaks, reporting that aclocal is missing. I have lost the log :(


---

Comment by jdemeyer created at 2015-05-14 06:10:01

Obviously, we need the log...


---

Comment by jdemeyer created at 2015-05-14 06:10:01

Changing priority from major to blocker.


---

Comment by jdemeyer created at 2015-05-14 06:10:01

Changing component from distribution to packages: standard.


---

Comment by vbraun created at 2015-05-14 10:10:44

Can reproduce

```
./bootstrap -d
rm -rf config configure build/Makefile-auto.in
./bootstrap: line 29: aclocal: command not found
Bootstrap failed, downloading required files instead.
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/src/bin/sage-download-file", line 417, in <module>
    tarball = Tarball(url)
  File "/Users/buildslave-sage/slave/sage_git/build/src/bin/sage-download-file", line 265, in __init__
    self._init_checksum()
  File "/Users/buildslave-sage/slave/sage_git/build/src/bin/sage-download-file", line 301, in _init_checksum
    with open(checksums_ini, 'rt') as f:
IOError: [Errno 2] No such file or directory: '/configure/configure/checksums.ini'
Error: downloading configure-91.tar.gz failed
make: *** [configure] Error 1
make: Target `start' not remade because of errors.
program finished with exit code 2
elapsedTime=0.683506
```



---

Comment by vbraun created at 2015-05-14 13:13:42

New commits:


---

Comment by vbraun created at 2015-05-14 13:13:42

Changing status from new to needs_review.


---

Comment by leif created at 2015-05-14 17:36:43

FWIW, `sage-download-file` still needs to get fixed w.r.t. filenames including a path, but probably on another ticket.

Actually, the whole interface changed, but the error here was caused by `SAGE_UPSTREAM` no longer being set (removed from `sage-env` by #15642), hence `sage-download-file` didn't get a URL.


---

Comment by vbraun created at 2015-05-14 17:48:38

Whats the problem with filenames containing a path? Either tarball-name of full url works. It doesn't make sense to have directory components in tarball names.


---

Comment by leif created at 2015-05-14 17:50:47

Replying to [comment:8 vbraun]:
> Whats the problem with filenames containing a path? Either tarball-name of full url works. It doesn't make sense to have directory components in tarball names.

Exactly.  But `sage-download-file` doesn't catch that error.


---

Comment by vbraun created at 2015-05-14 17:54:42

Its not really meant for interactive use, raising an exception is the correct behavior. If you mean that you want a ValueError instead of IOError then feel free to open a ticket.


---

Comment by leif created at 2015-05-14 18:43:09

Changing component from packages: standard to build.


---

Comment by leif created at 2015-05-14 18:43:09

Changing status from needs_review to positive_review.


---

Comment by leif created at 2015-05-14 18:43:09

Changing keywords from "dependencies, automake, aclocal, build" to "dependencies, automake, aclocal, build, bdist".


---

Comment by vbraun created at 2015-05-14 22:40:09

Resolution: fixed
