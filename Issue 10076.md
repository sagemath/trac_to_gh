# Issue 10076: Improve doc about coding conventions.

archive/issues_010076.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  mvgnu @jhpalmieri @kcrisman @nathanncohen\n\nKeywords: documentation, coding convention\n\nThere is a problem within http://www.sagemath.org/doc/developer/conventions.html. It says to use \".. NOTE::\" and there is \"NOTES:\" in the example.\n\nThere is also nothing about \"TESTS:\" section which is often used whithin the source code. \n\nThe recurrent use of \".. blah ::\", \"::\" and \"sage: \" could also be documented or at least directly point to the corresponding pages of Sphynx doc (even if looking at the examples is of course the best way to go and looking through Sphynx doc also explains many things).\n\nIssue created by migration from https://trac.sagemath.org/ticket/10077\n\n",
    "created_at": "2010-10-05T20:18:25Z",
    "labels": [
        "component: documentation",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Improve doc about coding conventions.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10076",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Assignee: mvngu

CC:  mvgnu @jhpalmieri @kcrisman @nathanncohen

Keywords: documentation, coding convention

There is a problem within http://www.sagemath.org/doc/developer/conventions.html. It says to use ".. NOTE::" and there is "NOTES:" in the example.

There is also nothing about "TESTS:" section which is often used whithin the source code. 

The recurrent use of ".. blah ::", "::" and "sage: " could also be documented or at least directly point to the corresponding pages of Sphynx doc (even if looking at the examples is of course the best way to go and looking through Sphynx doc also explains many things).

Issue created by migration from https://trac.sagemath.org/ticket/10077





---

archive/issue_comments_101484.json:
```json
{
    "body": "Changing priority from minor to trivial.",
    "created_at": "2010-10-09T01:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101484",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing priority from minor to trivial.



---

archive/issue_comments_101485.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-10-09T01:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101485",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_101486.json:
```json
{
    "body": "Attachment [trac-10077_clarify-conventions.patch](tarball://root/attachments/some-uuid/ticket10077/trac-10077_clarify-conventions.patch) by mvngu created at 2010-10-09 01:42:36\n\n> There is a problem within http://www.sagemath.org/doc/developer/conventions.html. It says to use \".. NOTE::\" and there is \"NOTES:\" in the example.\n\nFixed in the attached patch.\n\n\n\n\n\n> There is also nothing about \"TESTS:\" section which is often used whithin the source code. \n\nFixed in the attached patch.\n\n\n\n\n\n> The recurrent use of \".. blah ::\", \"::\" and \"sage: \" could also be documented \n\nFixed in the attached patch.\n\n\n\n\n\n> or at least directly point to the corresponding pages of Sphynx doc\n\nFixed in the attached patch.",
    "created_at": "2010-10-09T01:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101486",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Attachment [trac-10077_clarify-conventions.patch](tarball://root/attachments/some-uuid/ticket10077/trac-10077_clarify-conventions.patch) by mvngu created at 2010-10-09 01:42:36

> There is a problem within http://www.sagemath.org/doc/developer/conventions.html. It says to use ".. NOTE::" and there is "NOTES:" in the example.

Fixed in the attached patch.





> There is also nothing about "TESTS:" section which is often used whithin the source code. 

Fixed in the attached patch.





> The recurrent use of ".. blah ::", "::" and "sage: " could also be documented 

Fixed in the attached patch.





> or at least directly point to the corresponding pages of Sphynx doc

Fixed in the attached patch.



---

archive/issue_comments_101487.json:
```json
{
    "body": "I a bit disagree with the interpretation of \"TESTS\" directive. I tend to put there any tests that do not really help in illustrating the function. For example, if there was a bug detected on some valid but long and perhaps obscure input, I think that it should go to TESTS. On the other hand, if some exceptions are not unusual, they may very well be illustrated in EXAMPLES, e.g. solving an overdetermined system of equations. Personally, I think that EXAMPLES are bits of code that show how to use a function. Bits of code that make sure that every branch of code got executed can be much more numerous than necessary for illustration.\n\nWhat's the point of \"notes\" in lower case? Is it really necessary for something or maybe it is possible to list only `.. NOTES::`?",
    "created_at": "2010-10-09T15:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101487",
    "user": "https://github.com/novoselt"
}
```

I a bit disagree with the interpretation of "TESTS" directive. I tend to put there any tests that do not really help in illustrating the function. For example, if there was a bug detected on some valid but long and perhaps obscure input, I think that it should go to TESTS. On the other hand, if some exceptions are not unusual, they may very well be illustrated in EXAMPLES, e.g. solving an overdetermined system of equations. Personally, I think that EXAMPLES are bits of code that show how to use a function. Bits of code that make sure that every branch of code got executed can be much more numerous than necessary for illustration.

What's the point of "notes" in lower case? Is it really necessary for something or maybe it is possible to list only `.. NOTES::`?



---

archive/issue_comments_101488.json:
```json
{
    "body": "Thanks a lot for the patch.\nI guess with it the situation for newcomers as myself will be much clearer.\n\nI kind of agree with novoselt statement about what EXAMPLES and TESTS blocks should be used for, but don't know what was decided by Sage devs because of the lack of doc before what you just produced.\n\nAbout the \"notes\" and \"warning\" in lower case, they could maybe be mentionned but their use strongly discouraged (e.g. \"you'll also find a lot of \".. notes::\" in existing source code, which is valid, but the use of the lower case version is strongly discouraged\", or \"we are currently in the process of converting everything to uppercase\").",
    "created_at": "2010-10-09T17:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101488",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Thanks a lot for the patch.
I guess with it the situation for newcomers as myself will be much clearer.

I kind of agree with novoselt statement about what EXAMPLES and TESTS blocks should be used for, but don't know what was decided by Sage devs because of the lack of doc before what you just produced.

About the "notes" and "warning" in lower case, they could maybe be mentionned but their use strongly discouraged (e.g. "you'll also find a lot of ".. notes::" in existing source code, which is valid, but the use of the lower case version is strongly discouraged", or "we are currently in the process of converting everything to uppercase").



---

archive/issue_comments_101489.json:
```json
{
    "body": "Why are we saying that the uppercase version of the directives should be used?  I can't think of any other Sphinx based documentation project that does that.",
    "created_at": "2010-10-11T03:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101489",
    "user": "https://github.com/mwhansen"
}
```

Why are we saying that the uppercase version of the directives should be used?  I can't think of any other Sphinx based documentation project that does that.



---

archive/issue_comments_101490.json:
```json
{
    "body": "Replying to [comment:2 novoselt]:\n> I a bit disagree with the interpretation of \"TESTS\" directive. I tend to put there any tests that do not really help in illustrating the function. For example, if there was a bug detected on some valid but long and perhaps obscure input, I think that it should go to TESTS. \n\nAnd also providing the corresponding ticket number (if available) of the ticket for that bug.\n\n\n\n\n\n> On the other hand, if some exceptions are not unusual, they may very well be illustrated in EXAMPLES, e.g. solving an overdetermined system of equations. \n\nThis depends on the specific case. But I agree with this comment of yours.\n\n\n\n\n\n> Personally, I think that EXAMPLES are bits of code that show how to use a function. \n\nNod.\n\n\n\n\n\n> Bits of code that make sure that every branch of code got executed can be much more numerous than necessary for illustration.\n\nNod. Such code can go in the TESTS block. If there are too many such tests, create a sepatate test file, but don't include them in the reference manual.\n\n\n\n\n\n> What's the point of \"notes\" in lower case? Is it really necessary for something or maybe it is possible to list only `.. NOTES::`?\n\nI tend to encourage the use of the Sphinx directive for notes. That is, use the lower-case \".. note::\" or the upper-case version \".. NOTE::\" (choose one). But Sphinx doesn't recognize \".. notes::\" nor \".. NOTES::\" (notice the \"s\" before the double colon). Both the [Sphinx](http://sphinx.pocoo.org/rest.html#directives) and the [ReST](http://docutils.sourceforge.net/docs/ref/rst/directives.html#admonitions) documentation say that \"notes\" with an \"s\" is not supported.\n\n\n\n\nSee my [comment](http://trac.sagemath.org/sage_trac/ticket/10078#comment:4) at #10078 for reasons why I encourage (but not say \"must\") the use of upper-case versions of admonitions, etc.",
    "created_at": "2010-10-11T07:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101490",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Replying to [comment:2 novoselt]:
> I a bit disagree with the interpretation of "TESTS" directive. I tend to put there any tests that do not really help in illustrating the function. For example, if there was a bug detected on some valid but long and perhaps obscure input, I think that it should go to TESTS. 

And also providing the corresponding ticket number (if available) of the ticket for that bug.





> On the other hand, if some exceptions are not unusual, they may very well be illustrated in EXAMPLES, e.g. solving an overdetermined system of equations. 

This depends on the specific case. But I agree with this comment of yours.





> Personally, I think that EXAMPLES are bits of code that show how to use a function. 

Nod.





> Bits of code that make sure that every branch of code got executed can be much more numerous than necessary for illustration.

Nod. Such code can go in the TESTS block. If there are too many such tests, create a sepatate test file, but don't include them in the reference manual.





> What's the point of "notes" in lower case? Is it really necessary for something or maybe it is possible to list only `.. NOTES::`?

I tend to encourage the use of the Sphinx directive for notes. That is, use the lower-case ".. note::" or the upper-case version ".. NOTE::" (choose one). But Sphinx doesn't recognize ".. notes::" nor ".. NOTES::" (notice the "s" before the double colon). Both the [Sphinx](http://sphinx.pocoo.org/rest.html#directives) and the [ReST](http://docutils.sourceforge.net/docs/ref/rst/directives.html#admonitions) documentation say that "notes" with an "s" is not supported.




See my [comment](http://trac.sagemath.org/sage_trac/ticket/10078#comment:4) at #10078 for reasons why I encourage (but not say "must") the use of upper-case versions of admonitions, etc.



---

archive/issue_comments_101491.json:
```json
{
    "body": "Replying to [comment:4 mhansen]:\n> Why are we saying that the uppercase version of the directives should be used?  I can't think of any other Sphinx based documentation project that does that.\n\nFor consistency with \"INPUT\", \"OUTPUT\", \"EXAMPLES\" and \"TESTS\". See my [comment](http://trac.sagemath.org/sage_trac/ticket/10078#comment:4) at #10078. It's fine by me to say this: Sphinx supports both the lower- and upper-cases for \"warning\", \"note\", \"math\", etc.",
    "created_at": "2010-10-11T07:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101491",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Replying to [comment:4 mhansen]:
> Why are we saying that the uppercase version of the directives should be used?  I can't think of any other Sphinx based documentation project that does that.

For consistency with "INPUT", "OUTPUT", "EXAMPLES" and "TESTS". See my [comment](http://trac.sagemath.org/sage_trac/ticket/10078#comment:4) at #10078. It's fine by me to say this: Sphinx supports both the lower- and upper-cases for "warning", "note", "math", etc.



---

archive/issue_comments_101492.json:
```json
{
    "body": "patch [attachment:trac-10077_clarify-conventions.patch] fails to apply to sage-4.7.rc4.  Perhaps needs to be rebased?\n\n\n```\nsage: hg_sage.apply(\"/home/mariah/trac-10077_clarify-conventions.patch\")\ncd \"/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage\" && hg status\ncd \"/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage\" && hg status\ncd \"/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage\" && hg import   \"/home/mariah/trac-10077_clarify-conventions.patch\"\napplying /home/mariah/trac-10077_clarify-conventions.patch\npatching file doc/en/developer/conventions.rst\nHunk #2 FAILED at 109\n1 out of 11 hunks FAILED -- saving rejects to file doc/en/developer/conventions.rst.rej\nabort: patch failed to apply\nsage:\n```\n",
    "created_at": "2011-05-26T15:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101492",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

patch [attachment:trac-10077_clarify-conventions.patch] fails to apply to sage-4.7.rc4.  Perhaps needs to be rebased?


```
sage: hg_sage.apply("/home/mariah/trac-10077_clarify-conventions.patch")
cd "/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage" && hg status
cd "/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage" && hg status
cd "/home/mariah/sage/sage-4.7.rc4-x86_64-Linux-core2-fc-review-10077/devel/sage" && hg import   "/home/mariah/trac-10077_clarify-conventions.patch"
applying /home/mariah/trac-10077_clarify-conventions.patch
patching file doc/en/developer/conventions.rst
Hunk #2 FAILED at 109
1 out of 11 hunks FAILED -- saving rejects to file doc/en/developer/conventions.rst.rej
abort: patch failed to apply
sage:
```




---

archive/issue_comments_101493.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-05-26T15:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101493",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_101494.json:
```json
{
    "body": "I have checked, and most of this is *much* better in the current developer guide.  However, I think that a little more info about Sphinx and ReST as in this patch would be good, though perhaps not right at the start of that part!",
    "created_at": "2014-11-20T15:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101494",
    "user": "https://github.com/kcrisman"
}
```

I have checked, and most of this is *much* better in the current developer guide.  However, I think that a little more info about Sphinx and ReST as in this patch would be good, though perhaps not right at the start of that part!



---

archive/issue_comments_101495.json:
```json
{
    "body": "Nathann, since you've been looking at documentation recently, do you have any opinion about this?",
    "created_at": "2015-01-14T18:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101495",
    "user": "https://github.com/jhpalmieri"
}
```

Nathann, since you've been looking at documentation recently, do you have any opinion about this?



---

archive/issue_comments_101496.json:
```json
{
    "body": "> Nathann, since you've been looking at documentation recently, do you have any opinion about this?\n\nWell, as Karl-Dieter said Minh's point about `Notes/Tests` has been solved already. As for explaining the syntax of `::` and `sage:` I do not know the doc sufficiently well to know where it should be done. I am not too worried about that, given that as Minh said people will learn that through looking at sources (and all examples from the manual that use this syntax already).\n\nMinh is always right anyway.\n\nNathann\n\nP.S.: If you have some time for a couple of reviews, I have two very short tickets that only move stuff around: #17614 and #17615",
    "created_at": "2015-01-14T18:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10076",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10076#issuecomment-101496",
    "user": "https://github.com/nathanncohen"
}
```

> Nathann, since you've been looking at documentation recently, do you have any opinion about this?

Well, as Karl-Dieter said Minh's point about `Notes/Tests` has been solved already. As for explaining the syntax of `::` and `sage:` I do not know the doc sufficiently well to know where it should be done. I am not too worried about that, given that as Minh said people will learn that through looking at sources (and all examples from the manual that use this syntax already).

Minh is always right anyway.

Nathann

P.S.: If you have some time for a couple of reviews, I have two very short tickets that only move stuff around: #17614 and #17615
