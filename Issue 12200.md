# Issue 12200: maxima.eval('1+1;;') hangs

archive/issues_012200.json:
```json
{
    "body": "Assignee: @williamstein\n\nCC:  @orlitzky @nbruin @dimpase\n\n\n```\nmaxima.eval('1+1;;')\n```\n \nhangs Sage. Now, this *is* a syntax error\n\n```\n\n(%i4) 1+1;;\n\n(%o4) 2\n\nstdin:76667:incorrect syntax: Premature termination of input at ;.\n;\n ^\n```\n\nbut at least we should fail gracefully, and maybe even give an answer.  \n\nThis was first reported at #8439, and separated from it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12372\n\n",
    "created_at": "2012-01-28T03:03:06Z",
    "labels": [
        "interfaces",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "maxima.eval('1+1;;') hangs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12200",
    "user": "@kcrisman"
}
```
Assignee: @williamstein

CC:  @orlitzky @nbruin @dimpase


```
maxima.eval('1+1;;')
```
 
hangs Sage. Now, this *is* a syntax error

```

(%i4) 1+1;;

(%o4) 2

stdin:76667:incorrect syntax: Premature termination of input at ;.
;
 ^
```

but at least we should fail gracefully, and maybe even give an answer.  

This was first reported at #8439, and separated from it.

Issue created by migration from https://trac.sagemath.org/ticket/12372





---

archive/issue_comments_142383.json:
```json
{
    "body": "One way of looking at this example is that it's two commands: A grammatical and an erroneous one. The pexpect interface for maxima does not seem to support parsing the output of multiple commands:\n\n```\nsage: maxima.eval(\"1+2;3+4;\")\n'3(%o17)7'\n```\n\nonly a little better:\n\n```\nsage: from sage.interfaces.maxima_lib import maxima\nsage: sage: maxima.eval(\"1+2;3+4;\")\n'37'\nsage: maxima.eval(\"1+2;;\")\n'3'\n```\n\nThis could be as easy as replacing \";<any whitespace>*;\" by \";\", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.",
    "created_at": "2012-01-28T03:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142383",
    "user": "@nbruin"
}
```

One way of looking at this example is that it's two commands: A grammatical and an erroneous one. The pexpect interface for maxima does not seem to support parsing the output of multiple commands:

```
sage: maxima.eval("1+2;3+4;")
'3(%o17)7'
```

only a little better:

```
sage: from sage.interfaces.maxima_lib import maxima
sage: sage: maxima.eval("1+2;3+4;")
'37'
sage: maxima.eval("1+2;;")
'3'
```

This could be as easy as replacing ";<any whitespace>*;" by ";", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.



---

archive/issue_comments_142384.json:
```json
{
    "body": "> This could be as easy as replacing \";<any whitespace>*;\" by \";\", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.\nGood point, but I figured I might as well open the ticket :)",
    "created_at": "2012-01-28T03:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142384",
    "user": "@kcrisman"
}
```

> This could be as easy as replacing ";<any whitespace>*;" by ";", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.
Good point, but I figured I might as well open the ticket :)



---

archive/issue_comments_142385.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]:t\n> > This could be as easy as replacing \";<any whitespace>*;\" by \";\", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.\n> Good point, but I figured I might as well open the ticket :)\n\nCareful not to do that replace inside of string literals.",
    "created_at": "2012-01-28T05:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142385",
    "user": "@williamstein"
}
```

Replying to [comment:2 kcrisman]:t
> > This could be as easy as replacing ";<any whitespace>*;" by ";", but I'm not sure the slow-down of the extra regex is worth catching this corner-case.
> Good point, but I figured I might as well open the ticket :)

Careful not to do that replace inside of string literals.



---

archive/issue_comments_142386.json:
```json
{
    "body": "Still hanging after 8 years",
    "created_at": "2020-07-08T16:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142386",
    "user": "@mkoeppe"
}
```

Still hanging after 8 years



---

archive/issue_comments_142387.json:
```json
{
    "body": "Not that important because there's a better interface to maxima now:\n\n\n```\nsage: from sage.interfaces.maxima_lib import maxima_lib\nsage: maxima_lib.eval(\"1+1;;\")\n'2'\n```\n",
    "created_at": "2020-07-08T17:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142387",
    "user": "@orlitzky"
}
```

Not that important because there's a better interface to maxima now:


```
sage: from sage.interfaces.maxima_lib import maxima_lib
sage: maxima_lib.eval("1+1;;")
'2'
```




---

archive/issue_comments_142388.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12200#issuecomment-142388",
    "user": "@mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.
