# Issue 33703: enhance maple interface

Issue created by migration from https://trac.sagemath.org/ticket/33940

Original creator: chapoton

Original creation time: 2022-05-31 18:50:21

CC:  tscrim. slelievre @kliem klee mmezzarobba

by trying to convert back functions names




---

Comment by chapoton created at 2022-05-31 18:50:33

New commits:


---

Comment by chapoton created at 2022-05-31 18:50:33

Changing status from new to needs_review.


---

Comment by chapoton created at 2022-05-31 18:53:32

Changing keywords from "" to "maple".


---

Comment by git created at 2022-05-31 19:12:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-31 19:29:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-01 05:14:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-06-01 05:43:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-01 06:52:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-01 07:52:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-01 07:54:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-06-01 13:44:59

bot is morally green, ticket ready for review. A good step forward in the translation back from maple, I would say.


---

Comment by chapoton created at 2022-06-03 06:40:46

one could also treat "Limit" and "limit" in the same way, maybe.


---

Comment by mmezzarobba created at 2022-06-08 13:48:20

This is an improvement, though the conversion remains very fragile.

One thing I don't like is that the conversion  is based purely on the textual representation of the Maple expression and does not differentiate between global and local Maple symbols. For example, `maple("(proc() local zeta; return zeta; end)()(2)").sage()` yields π²/6 although the Maple `zeta` we are converting is not the one bound to the zeta function. I do understand that fixing this is beyond the scope of this ticket, but I also believe that we should make the interface more robust before trying to extend it too much.

Can you explain why you needed to do this

```
         BuiltinFunction.__init__(self, 'hurwitz_zeta', nargs=2,
                                  conversions=dict(mathematica='HurwitzZeta',
-                                                  maple='Zeta',
+                                                  # maple='Zeta', conflict with zeta here
                                                   sympy='zeta'),
                                  latex_name=r'\zeta')

```

?


---

Comment by chapoton created at 2022-06-11 06:35:43

I agree that this is not a solid conversion. Still better than previously.

It would be much more work to switch to something else, maybe some kind of standardized   API.

For the second point, we are hitting here a limitation of our conversion system. We use different names for Zeta (one parameter) and Hurwitz zeta (two parameters). Maple uses just one name. We cannot have both a correct conversion forward and a correct conversion backward, using just a dictionary of functions names. One solution would be to enhance our conversion system to be able to make different choices for different numbers of arguments. Not for this ticket, I would say

For the time being, I chose to give priority to Zeta over Hurwitz Zeta


---

Comment by mmezzarobba created at 2022-06-11 07:40:32

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2022-06-11 07:40:32

Replying to [comment:13 chapoton]:
> I agree that this is not a solid conversion. Still better than previously.

Yes, I agree.

> It would be much more work to switch to something else, maybe some kind of standardized   API.

Maple actually has a C API that would make it easier to have a robust interface. But yes, that would require a bit of work, and it is not clear to me if we can use it without having Maple as a build-time dependency for the corresponding binary modules.

> For the second point, we are hitting here a limitation of our conversion system. We use different names for Zeta (one parameter) and Hurwitz zeta (two parameters). Maple uses just one name. We cannot have both a correct conversion forward and a correct conversion backward, using just a dictionary of functions names. One solution would be to enhance our conversion system to be able to make different choices for different numbers of arguments. Not for this ticket, I would say
> 
> For the time being, I chose to give priority to Zeta over Hurwitz Zeta

Ok, thanks for the explanation.


---

Comment by chapoton created at 2022-06-11 09:06:00

merci !


---

Comment by vbraun created at 2022-06-12 23:08:38

Resolution: fixed
