# Issue 18951: Japanese translations of tutorial and tour

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2015-09-11 16:01:09

CC:  kini

See [this sage-devel post](https://groups.google.com/forum/#!topic/sage-devel/sBhYkG3z1Y0).


---

Attachment


---

Comment by dimpase created at 2015-09-15 06:54:26

how about the rst sources of the translation, can you at least upload them as attachments?


---

Attachment

.rst files of the japanese translations for a_tour_of_sage & tutorial


---

Comment by tsak created at 2015-09-15 08:25:01

.pdf kanji font embedded


---

Attachment

.pdf kanji font embedded


---

Comment by tsak created at 2015-09-15 08:32:02

Replying to [comment:2 dimpase]:
> how about the rst sources of the translation, can you at least upload them as attachments?

I have attached .tgz file of the .rst source...
and the kanji-font embedded pdfs.


---

Comment by tsak created at 2015-09-15 10:17:48

Last 10 new commits:


---

Comment by kcrisman created at 2015-09-15 12:47:17

Just a note from my experience with trying to get the Chinese doc to be passed... the html will probably work fine with a more or less normal compilation, but getting some standard set of Japanese fonts to work on all platforms Sage builds on for pdflatex may be a more difficult task.  (I hope I'm wrong.)  But please make sure to try building the pdf doc on both Linux and Mac, at the very least, when this is reviewed.


---

Comment by tsak created at 2015-09-16 04:53:25

Changing status from new to needs_review.


---

Comment by dimpase created at 2015-09-16 15:34:17

Is the directory prefix 'ja/' for Japanese translations normal? I had expected 'jp'.


---

Comment by kcrisman created at 2015-09-16 15:43:28

If that's the usual (e.g. like zh for Chinese, de for German) then please let's use the one that a standards organization suggests!


---

Comment by tsak created at 2015-09-17 04:23:04

Replying to [comment:9 dimpase]:
> Is the directory prefix 'ja/' for Japanese translations normal? I had expected 'jp'.
The 'ja' prefix is not my choice: Sphinx determines it through the language option 'ja'. See conf.py.


---

Comment by kcrisman created at 2015-09-17 13:16:15

Ok, that seems reasonable, see [the ISO standards](https://en.wikipedia.org/wiki/ISO_639-1).


---

Comment by kini created at 2015-09-17 17:45:01

dimpase: Thanks for CCing me.  While it's true that I can read Japanese, I think ideally the review should be done by a native Japanese speaker, especially since I'm not very familiar with mathematical or computer-related terminology in Japanese.  Hopefully someone more appropriate can step up to the plate :)


---

Comment by chapoton created at 2015-09-17 19:50:52

please convert to the new-style doc-test continuation `....:` instead of `...`

also the bot complains about

```
+! LaTeX Error: This file needs format `pLaTeX2e'
+               but this is `LaTeX2e'.
+
+See the LaTeX manual or LaTeX Companion for explanation.
+Type  H <return>  for immediate help.
+ ...                                              
+                                                  
+l.38 \NeedsTeXFormat{pLaTeX2e}
+                              
+? 
+! Emergency stop.
+ ...                                              
+                                                  
+l.38 \NeedsTeXFormat{pLaTeX2e}
```


*EDIT*: but my latex install is broken, so maybe this second point is not a real error


---

Comment by git created at 2015-09-18 12:06:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-18 12:11:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tsak created at 2015-09-19 03:32:08

Replying to [comment:16 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[f2a75ad](http://git.sagemath.org/sage.git/commit/?id=f2a75adcd8d9bf5c9a9ff4bf512ce4faf48eb2e1)||`trac #19188 fixing a few forgotten doctests`||
Thank you for your help.
I have made some modifications with the four dots in the text.
I would like to push them as soon as possible.
(I'm a novice git/trac user and sorry to bother)


---

Comment by tsak created at 2015-09-19 03:35:09

Replying to [comment:12 kcrisman]:
> Ok, that seems reasonable, see [the ISO standards](https://en.wikipedia.org/wiki/ISO_639-1).
If you say 'ok', I would like to keep the prefix to be 'ja'.
I see one can feel uncomfortable with 'ja' not 'jp', I was at first.
Thank you for your help.


---

Comment by git created at 2015-09-19 10:17:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-20 12:27:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-21 06:26:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-26 05:33:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by troby created at 2015-10-19 12:09:57

Changing status from needs_review to positive_review.


---

Comment by troby created at 2015-10-19 12:09:57

I read through a few pages of the tutorial carefully and browsed the rest.  Also sent it to a native speaker mathematician friend who said it looked good.  This is not a careful line-by-line proofreading, of course, but it's not so easy to find someone with the time, interest, and expertise to do that.  I believe it's ready for prime time, and I'm very glad someone had done this translation.  --Tom Roby


---

Comment by kcrisman created at 2015-10-19 14:36:07

That sounds good.  chapoton, agreed?  Tom, if you want to change how your name is mentioned as reviewer, please just change it in that field, thank you so much!


---

Comment by tsak created at 2015-10-20 03:49:40

Thank you very much for having reviewed the translation with positive comments.
I am most grateful to you for your kindness and your generosity with your time.
Please pass my thanks to your Japanese friend. --Takeo Sakai


---

Comment by vbraun created at 2015-10-20 08:12:34

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-10-20 08:12:34

Doctests fail 

```
sage -t --long src/doc/ja/tutorial/latex.rst
**********************************************************************
File "src/doc/ja/tutorial/latex.rst", line 370, in doc.ja.tutorial.latex
Failed example:
    latex.extra_preamble() # システムで運用されているTeXの種類に依存
Expected:
    '\\usepackage{foo-bar-unchecked}\\usepackage{tikz}\n\\usepackage{tkz-graph}\n\\usepackage{tkz-berge}\n\\usetikzlibrary{arrows,shapes}'
Got:
    '\\usepackage{foo-bar-unchecked}'
**********************************************************************
1 item had failures:
   1 of  80 in doc.ja.tutorial.latex
    [69 tests, 1 failure, 1.60 s]
```



---

Comment by vbraun created at 2015-10-20 08:13:55

There is also a conflict with #18175, please merge the next beta


---

Comment by git created at 2015-10-21 02:37:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-21 05:10:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tsak created at 2015-10-21 05:30:45

Sorry to be ignorant about the meaning of "random" keyword for the doctest context.
I have corrected/recovered the original word from the translated word/text.
After the correction, I have tried the doctest by issuing command "sage -t --long /usr/local/sage/src/doc/ja/tutorial/*.rst", it seems ok.


---

Comment by dimpase created at 2015-10-21 21:39:00

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2015-10-21 21:49:55

One doctest in the `tour_coercion.rst` changed in the last beta (http://git.sagemath.org/sage.git/diff/src/doc/en/tutorial/tour_coercion.rst?id=9cd27e3f142ef1fed65306c4d3f55d86fa6806cb), this needs to be taken into account here.


---

Comment by git created at 2015-10-22 01:28:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tsak created at 2015-10-22 01:32:32

Replying to [comment:32 vbraun]:
> One doctest in the `tour_coercion.rst` changed in the last beta (http://git.sagemath.org/sage.git/diff/src/doc/en/tutorial/tour_coercion.rst?id=9cd27e3f142ef1fed65306c4d3f55d86fa6806cb), this needs to be taken into account here.
Thank you for the diff.
I have included it into the tour_coercion.rst.
Please do doctest it; the doctest failed with my sage-6.9.


---

Comment by vbraun created at 2015-10-22 08:35:27

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-10-22 22:18:26

`make doc-pdf` from the Sage root fails with 

```
! LaTeX Error: This file needs format `pLaTeX2e'
               but this is `LaTeX2e'.
```

This is because it, under the hood, runs `make all-pdf` in `SAGE_ROOT/src/doc/output/latex/ja/a_tour_of_sage` which runs pdflatex. Only the `make all-pdf-ja` target works. 

The best fix would be to special-case the japanese docs in `SAGE_ROOT/src/doc/common/builder.py` to run the `all-pdf-ja` target.


---

Comment by vbraun created at 2015-10-22 22:18:26

Changing status from positive_review to needs_work.


---

Attachment

Following your suggestion, I have modified the pdf(...) function in the builder.py so that it recognizes the  'ja' language option to run “make all-pdf-ja” instead of “... all-pdf”.
It is rough and ready, but it works with “make doc-pdf” and in the context of “sage –docbuild...”.
I have made a patch file for builder.py of sage-6.9. The name is builder-ja.patch.
Please look at it.


---

Comment by git created at 2015-10-31 14:57:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-31 14:58:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-10-31 15:07:45

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2015-10-31 15:07:45

I've converted this into the git branch and did some changes to the patch provided. The branch I have just attached contains an alternative proposal which I think is a little cleaner in its approach. Please check.
----
New commits:


---

Comment by vbraun created at 2015-10-31 16:38:22

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-10-31 19:05:04

The # random annotation shouldn't be translated, the doctest framework uses it and treats the doctest specially:

```
sage -t --long src/doc/ja/tutorial/programming.rst
**********************************************************************
File "src/doc/ja/tutorial/programming.rst", line 641, in doc.ja.tutorial.programming
Failed example:
    5 < VectorSpace(QQ,3)   # 出力は一定しない。
Expected:
    False
Got:
    True
**********************************************************************
1 item had failures:
   1 of 146 in doc.ja.tutorial.programming
    [116 tests, 1 failure, 0.34 s]
```



---

Comment by vbraun created at 2015-10-31 19:05:04

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-10-31 19:09:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-10-31 19:10:19

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-10-31 22:25:14

Resolution: fixed
