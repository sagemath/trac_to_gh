# Issue 28855: sqlite3 CLI executable should be checked for at configure time

Issue created by migration from https://trac.sagemath.org/ticket/29092

Original creator: embray

Original creation time: 2020-01-28 11:50:34

CC:  dimpase â€‹isuruf mjo vdelecroix

As I noted [here](https://trac.sagemath.org/ticket/29002#comment:87) #29002 introduces a small regression in case someone has libsqlite3 installed but not the sqlite3 executable.

I marked this a 'critical' just because it is a regression, albeit I think not a very severe one.


---

Comment by mjo created at 2020-01-28 12:51:56

The practice of testing third-party software from within Sage's doctests is going to cause these problems more and more frequently. (I myself am guilty of adding doctests for maxima regressions to sage.)

In this case, why is the sage library testing the sqlite3 executable at all? The library doesn't use it. If anything, it belongs in a sqlite3 spkg-check... but I'm sure sqlite3's own test suite already ensures that the thing runs.

My suggestion: delete these tests.


---

Comment by mkoeppe created at 2020-01-30 16:18:39

Replying to [comment:1 mjo]:
> The practice of testing third-party software from within Sage's doctests is going to cause these problems more and more frequently. (I myself am guilty of adding doctests for maxima regressions to sage.)
> 
> In this case, why is the sage library testing the sqlite3 executable at all? The library doesn't use it. If anything, it belongs in a sqlite3 spkg-check... but I'm sure sqlite3's own test suite already ensures that the thing runs.
> 
> My suggestion: delete these tests.

I think we need to start distinguishing between sagelib tests and sage-the-distribution tests. 

Instead of just deleting the tests, I think we should move sage-the-distribution tests from `src` (which is for sagelib) to somewhere in `build` (which is for sage-the-distribution). Downstream packagers would ignore the sage-the-distribution tests.


---

Comment by mkoeppe created at 2020-01-30 16:25:57

Replying to [comment:2 mkoeppe]:
> I think we should move sage-the-distribution tests from `src` (which is for sagelib) to somewhere in `build` (which is for sage-the-distribution). Downstream packagers would ignore the sage-the-distribution tests.

I've opened #29111 for such things.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
