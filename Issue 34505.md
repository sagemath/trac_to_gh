# Issue 34505: Optional package soplex (dependency of scip)

Issue created by migration from https://trac.sagemath.org/ticket/34742

Original creator: mkoeppe

Original creation time: 2022-11-11 22:50:13

CC:  dimpase

https://github.com/scipopt/soplex



---

Comment by mkoeppe created at 2022-11-11 23:26:41

New commits:


---

Comment by mkoeppe created at 2022-11-11 23:26:41

Changing status from new to needs_review.


---

Comment by git created at 2022-11-11 23:29:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-11-12 00:47:22

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-11-12 07:43:36

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-11-12 07:43:36

On macOS, install_name is broken

```
$ otool -L /Users/mkoeppe/s/sage/sage-rebasing/worktree-rebase/local/lib/libsoplexshared.dylib                                                                          git:t/21003/pyscipopt
/Users/mkoeppe/s/sage/sage-rebasing/worktree-rebase/local/lib/libsoplexshared.dylib:
	libsoplexshared.6.0.dylib (compatibility version 6.0.0, current version 6.0.2)
	/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.11)
	/usr/local/opt/gmp/lib/libgmp.10.dylib (compatibility version 15.0.0, current version 15.1.0)
	/usr/local/opt/gmp/lib/libgmpxx.4.dylib (compatibility version 11.0.0, current version 11.1.0)
	/usr/local/opt/mpfr/lib/libmpfr.6.dylib (compatibility version 8.0.0, current version 8.0.0)
	/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1300.23.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1311.100.3)
```



---

Comment by git created at 2022-11-27 01:14:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-11-27 01:15:19

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2022-12-11 19:41:04

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-12-11 19:41:04

lgtm


---

Comment by mkoeppe created at 2022-12-11 20:51:51

Thank you


---

Comment by dcoudert created at 2022-12-17 10:16:49

The patchbot reports an error when trying to build the doc

```
[sagemath_doc_html-none] [spkg     ] /home/sagemath/sage/src/doc/en/reference/spkg/soplex.rst: WARNING: document isn't included in any toctree
[sagemath_doc_html-none] [spkg     ] The inventory files are in ../../local/share/doc/sage/inventory/en/reference/spkg.
[sagemath_doc_html-none] Error building the documentation.
[sagemath_doc_html-none] Traceback (most recent call last):
[sagemath_doc_html-none]   File "/home/sagemath/sage/local/var/lib/sage/venv-python3.10.8/lib/python3.10/runpy.py", line 196, in _run_module_as_main
[sagemath_doc_html-none]     return _run_code(code, main_globals, None,
[sagemath_doc_html-none]   File "/home/sagemath/sage/local/var/lib/sage/venv-python3.10.8/lib/python3.10/runpy.py", line 86, in _run_code
[sagemath_doc_html-none]     exec(code, run_globals)
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/__main__.py", line 498, in <module>
[sagemath_doc_html-none]     sys.exit(main())
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/__main__.py", line 495, in main
[sagemath_doc_html-none]     builder()
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/builders.py", line 819, in _wrapper
[sagemath_doc_html-none]     getattr(DocBuilder, build_type)(self, *args, **kwds)
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/builders.py", line 163, in f
[sagemath_doc_html-none]     runsphinx()
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/sphinxbuild.py", line 327, in runsphinx
[sagemath_doc_html-none]     sys.stderr.raise_errors()
[sagemath_doc_html-none]   File "/home/sagemath/sage/pkgs/sage-docbuild/sage_docbuild/sphinxbuild.py", line 263, in raise_errors
[sagemath_doc_html-none]     raise OSError(self._error)
[sagemath_doc_html-none] OSError: /home/sagemath/sage/src/doc/en/reference/spkg/soplex.rst: WARNING: document isn't included in any toctree
[sagemath_doc_html-none] 
[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious
[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run
[sagemath_doc_html-none]     "make doc-clean doc-uninstall" first and try again.
[sagemath_doc_html-none] make[4]: *** [Makefile:28: doc-inventory--reference-spkg] Error 1
[sagemath_doc_html-none] make[4]: *** Waiting for unfinished jobs....
[sagemath_doc_html-none] [algebras ] The inventory files are in ../../local/share/doc/sage/inventory/en/reference/algebras.
[sagemath_doc_html-none] Build finished. The built documents can be found in /home/sagemath/sage/local/share/doc/sage/inventory/en/reference/algebras
[sagemath_doc_html-none] [manifolds] The inventory files are in ../../local/share/doc/sage/inventory/en/reference/manifolds.
[sagemath_doc_html-none] Build finished. The built documents can be found in /home/sagemath/sage/local/share/doc/sage/inventory/en/reference/manifolds
[sagemath_doc_html-none] make[3]: *** [Makefile:45: doc-inventory-reference] Error 2
make[2]: *** [Makefile:3228: sagemath_doc_html-SAGE_DOCS-no-deps] Error 2
make[1]: *** [Makefile:3228: /home/sagemath/sage/local/var/lib/sage/installed/sagemath_doc_html-none] Error 2
make[1]: Leaving directory '/home/sagemath/sage/build/make'
```



---

Comment by dimpase created at 2022-12-17 10:33:11

incremental rebuild of docs can't cope with a new document added, maybe?


---

Comment by dcoudert created at 2022-12-17 10:34:49

Right, but the patchbot compiles from scratch, no ?
