# Issue 11597: Singular does not build on Ubuntu Oneiric

Issue created by migration from https://trac.sagemath.org/ticket/11769

Original creator: ddrake

Original creation time: 2011-09-01 10:58:10

Assignee: tbd

CC:  burcin

Keywords: singular, linker, sd34

Due to fussier linkers, Singular will not build on the current version of Ubuntu Oneiric (11.10). This was reported at https://groups.google.com/d/topic/sage-devel/aL8b9phz3Xc/discussion : the fix is to flip the order of `-ldl` and `-lkernel` in the linking step.

This may already be fixed upstream; if so, this ticket should be closed. If not, SD34 would be the perfect time to fix it.


---

Comment by leif created at 2011-09-01 15:30:14

Changing keywords from "singular, linker, sd34" to "singular, linker, sd34 -ldl libkernel mod_raw.cc".


---

Comment by leif created at 2011-09-02 23:58:17

> This may already be fixed upstream (cf. #10903); if so, this ticket should be closed. If not, [the Sage/Singular Days (SD34)](http://wiki.sagemath.org/days34) would be the perfect time to fix it.

It is *not* fixed in Singular 3-1-3-2 (current latest stable), nor in the current svn revision 14378.

Upstream report: [http://www.singular.uni-kl.de:8002/trac/ticket/368](http://www.singular.uni-kl.de:8002/trac/ticket/368)


---

Comment by leif created at 2011-09-11 05:35:32

For the record: So far nothing happened on the upstream ticket.


---

Comment by leif created at 2011-09-11 05:45:00

Changing priority from major to critical.


---

Comment by leif created at 2011-09-14 14:41:30

Replying to [comment:3 leif]:
> For the record: So far nothing happened on the upstream ticket.

According to upstream, they've now reluctantly fixed this, in *svn revision 14381*. (Haven't checked this yet.)


---

Comment by leif created at 2011-09-24 13:16:49

Changing priority from critical to blocker.


---

Comment by leif created at 2011-09-24 13:16:49

Making this a *blocker*, since IMHO at least a work-around should be in the *final Sage 4.7.2*, likely to be released [right] before the final Ubuntu 11.10 (Oneiric Ocelot).

If we don't get a new Singular spkg fixing this from SD34, we should provide an spkg just adding `-ldl` to `LDFLAGS` (on Linux only), or applying the upstream fix from the svn. (Haven't tried the latter yet; should IMHO work, despite the age of our current Singular version.)


---

Comment by vbraun created at 2011-10-02 09:22:07

Changing status from new to needs_review.


---

Comment by vbraun created at 2011-10-02 09:22:07

The new Singular-3-1-3-3 spkg from #10903 links with `-lkernel` in front of `-ldl`:

```
g++ -O2 -g -fPIC -I.. -I/home/vbraun/Sage/sage/local -pipe -I. -I.. -I/home/vbraun/Sage/sage/local -I/h
ome/vbraun/Sage/sage/local/include -I/home/vbraun/Sage/sage/local/include -I/home/vbraun/Sage/sage/loca
l/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/sage/local -DNDEBUG -DOM_NDEBUG -Dx86_64_L
inux -DHAVE_CONFIG_H \
  -o Singular \
  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\
  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o bbcone.o bbfan.o denom_list.o minpoly.o  slInit_Dynamic.o -rdynamic -L/home/vbraun/Sage/sage/local/kernel -L../kernel -lkernel -L/home/vbraun/Sage/sage/local/lib -L/home/vbraun/Sage/sage/local/lib   -ldl -lm -lsingfac -lsingcf -lntl -lgmp -lreadline -ltermcap -lm  -lnsl -lbsd  -lomalloc  ../kernel/mmalloc.o 
```

So this issue is solved by its dependency. I will set this ticket to positive review.


---

Comment by vbraun created at 2011-10-02 09:22:17

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-10-04 07:58:27

Resolution: duplicate
