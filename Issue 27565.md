# Issue 27565: polymake interface: Convert Python dicts to Perl hashes

Issue created by migration from https://trac.sagemath.org/ticket/27802

Original creator: mkoeppe

Original creation time: 2019-05-08 15:47:08

CC:  dimpase jipilab simonking @kliem

This allows to use polyDB queries as follows:

```
sage: L = polymake.db_query({'"_id"': '"F.4D.0047"'}, db='"LatticePolytopes"', collection='"SmoothReflexive"')
sage: L
BigObjectArray
sage: len(L)
1
sage: P = L[0]
sage: P.list_properties()
LATTICE_POINTS_GENERATORS, LINEALITY_SPACE, F_VECTOR, EHRHART_POLYNOMIAL, NORMAL, VERY_AMPLE, AFFINE_HULL, N_BOUNDARY_LATTICE_POINTS, H_STAR_VECTOR, LATTICE_CODEGREE, FACETS, N_LATTICE_POINTS, ESSENTIALLY_GENERIC, CONE_DIM, GORENSTEIN, FEASIBLE, VERTICES, CENTROID, LATTICE_VOLUME, FULL_DIM, CONE_AMBIENT_DIM, FACET_WIDTHS, SMOOTH, N_INTERIOR_LATTICE_POINTS, POINTED, LATTICE_DEGREE, N_FACETS, REFLEXIVE, N_VERTICES
sage: P.F_VECTOR
20 40 29 9
```



---

Comment by mkoeppe created at 2019-05-08 15:47:34

Changing component from PLEASE CHANGE to interfaces: optional.


---

Comment by mkoeppe created at 2019-05-08 15:57:36

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2019-05-08 15:57:36

Last 10 new commits:


---

Comment by dimpase created at 2019-05-08 21:44:01

OK - modulo doctest errors mentioned on #22704.

How about a doctest/example as in the ticket description?


---

Comment by git created at 2019-05-09 09:06:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-05-10 11:01:06

OK!


---

Comment by dimpase created at 2019-05-10 11:01:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-05-13 16:55:11

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2019-05-13 16:55:11

See patchbot


---

Comment by git created at 2019-05-13 21:38:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2019-05-13 21:38:28

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2019-05-13 21:47:22

The `oldstyle_print` patchbot errors are false positives (Perl syntax).

I have fixed the other errors. The new doctests revealed a mistake in the implementation of `_is_running`, fixed.

Needs review again.


---

Comment by dimpase created at 2019-05-14 10:46:02

looks OK


---

Comment by dimpase created at 2019-05-14 10:46:02

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2019-05-14 22:55:51

Changing status from positive_review to needs_work.


---

Comment by fbissey created at 2019-05-14 22:55:51

Tests for `_coerce_impl` need to be tagged optional for polymake. It is interesting that stuff that involves polymake directly was forgotten but not the jupymake ones.


---

Comment by git created at 2019-05-15 09:42:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2019-05-15 09:48:03

Changing status from needs_work to needs_review.


---

Comment by fbissey created at 2019-05-15 10:08:49

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2019-05-15 10:08:49

LGTM


---

Comment by vbraun created at 2019-05-21 12:15:38

Resolution: fixed
