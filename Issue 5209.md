# Issue 5209: Sage 3.3.a6: numerical noise in sage/plot/plot.py on OpenSUSE 11.1 64 bit

Issue created by migration from Trac.

Original creator: mabshoff

Original creation time: 2009-02-08 20:16:44

Assignee: mabshoff


```
sage -t -long "devel/sage/sage/plot/plot.py" 
********************************************************************** 
File "/space/build/sage-3.3.alpha6/devel/sage/sage/plot/plot.py", line 2582: 
    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False) 
Expected: 
    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069, 
    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...), 
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207, 
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), 
    (-1.5707963267948966, -1.0), (-1.3744467859455345, 
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), 
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, 
    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978), 
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), 
    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035, 
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), 
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), 
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, 
    0.92387953251128674), (2.1598449493429825, 0.83146961230254546), 
    (2.3561944901923448, 0.707106781186547...), (2.748893571891069, 
    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)] 
Got: 
    [(-3.1415926535897931, -1.2246467991473532e-16), 
(-2.748893571891069, -0.38268343236508989), (-2.3561944901923448, 
-0.70710678118654757), (-2.1598449493429825, -0.83146961230254535), 
(-1.9634954084936207, -0.92387953251128674), (-1.7671458676442586, 
-0.98078528040323043), (-1.5707963267948966, -1.0), 
(-1.3744467859455345, -0.98078528040323043), (-1.1780972450961724, 
-0.92387953251128674), (-0.98174770424681035, -0.83146961230254524), 
(-0.78539816339744828, -0.70710678118654746), (-0.39269908169872414, 
-0.38268343236508978), (0.0, 0.0), (0.39269908169872414, 
0.38268343236508978), (0.78539816339744828, 0.70710678118654746), 
(0.98174770424681035, 0.83146961230254524), (1.1780972450961724, 
0.92387953251128674), (1.3744467859455345, 0.98078528040323043), 
(1.5707963267948966, 1.0), (1.7671458676442586, 0.98078528040323043), 
(1.9634954084936207, 0.92387953251128674), (2.1598449493429825, 
0.83146961230254535), (2.3561944901923448, 0.70710678118654757), 
(2.748893571891069, 0.38268343236508989), (3.1415926535897931, 
1.2246467991473532e-16)] 
**********************************************************************
```



---

Comment by mabshoff created at 2009-02-08 20:37:11

And another one - it might be the same noise since it is also from an OpenSUSE box:

```
**********************************************************************
File "/home/mabshoff/build-3.3.alpha6/sage-3.3.alpha6-menas/devel/sage/sage/plot/plot.py", line 2582:
    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False)
Expected:
    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069,
    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...),
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043),
    (-1.5707963267948966, -1.0), (-1.3744467859455345,
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674),
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828,
    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978),
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978),
    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035,
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674),
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0),
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207,
    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),
    (2.3561944901923448, 0.707106781186547...), (2.748893571891069,
    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)]
Got:
    [(-3.1415926535897931, -1.2246467991473532e-16), (-2.748893571891069, 
    -0.38268343236508989), (-2.3561944901923448, -0.70710678118654757), 
    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, 
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), 
    (-1.5707963267948966, -1.0), (-1.3744467859455345, 
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), 
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, 
    -0.70710678118654746), (-0.39269908169872414, -0.38268343236508978), 
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), 
    (0.78539816339744828, 0.70710678118654746), (0.98174770424681035, 
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), 
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), 
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, 
    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), 
    (2.3561944901923448, 0.70710678118654757), (2.748893571891069, 
    0.38268343236508989), (3.1415926535897931, 1.2246467991473532e-16)]
**********************************************************************
```



---

Comment by mabshoff created at 2009-02-09 10:48:02

Changing status from new to assigned.


---

Comment by mabshoff created at 2009-02-09 10:48:02

In both cases the failure is the following:

```
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,
    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, 

    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),
    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), 
```

Patch coming up.

Cheers,

Michael


---

Comment by mabshoff created at 2009-02-09 11:01:36

With the patch applied:

```
sage -t -long "devel/sage/sage/plot/plot.py"                
	 [41.5 s]
```


Cheers,

Michael


---

Attachment

Standard sort of minimal fix for this type of issue; I did not test it directly but it seems clear that this is OK based on other similar problems.  Only affects the doctest.  Positive review.


---

Comment by mabshoff created at 2009-02-10 06:42:53

Resolution: fixed


---

Comment by mabshoff created at 2009-02-10 06:42:53

Merged in Sage 3.3.rc0.

Cheers,

Michael
