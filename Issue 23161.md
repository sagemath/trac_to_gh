# Issue 23161: python3 installs duplicate pip/setuptools

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2017-07-10 15:06:25

With #22509 it's relatively easy to see what what packages are installing copies of the same file.

The python3 package now installs setuptools+pip automatically when running `make install` unless Python was configured with `--without-ensurepip` (or passing `ENSUREPIP=no` to `make`).

We have two options here:

* Use `--without-ensurepip` when installing python3
* Do nothing on Python 3 when installing the setuptools and pip packages

I think the first is preferable and more in line with what most packaging systems are likely to do, especially since python 3 can be run without pip.


---

Comment by embray created at 2017-07-11 11:14:03

Here's a fix using the first approach of `--without-ensurepip`.  I think this is most straightforward, but I'd hear arguments (if any) for the other approach.

This also installs a separate Valgrind suppression file for Python 3, since it was otherwise clobbering the one from Python 2.

There are also issues with the scripts installed by python2/3, but I will handle that in a separate issue.
----
New commits:


---

Comment by embray created at 2017-07-11 11:14:03

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-07-13 10:42:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-04 18:21:12

Resolution: fixed
