# Issue 16772: Unbound local in sageinspect

Issue created by migration from Trac.

Original creator: SimonKing

Original creation time: 2014-09-19 15:19:00

CC:  vbraun ncohen


```
sage: from sage.misc.sageinspect import sage_getargspec
sage: sage_getargspec(gap)
Traceback (most recent call last):
...
UnboundLocalError: local variable 'func_obj' referenced before assignment
```

This has probably been introduced in #16309.

By consequence, one cannot see the documentation or source code of `gap` (even though one can edit the source code...). I'd say this is critical.


---

Comment by SimonKing created at 2014-09-23 13:42:23

Changing status from new to needs_review.


---

Comment by SimonKing created at 2014-09-23 13:42:23

Fixed! There is some `if ... else` clause in `sage_getargspec`, simplified as follows:

```python
if cond1:
    try:
        return answer1
    except AttributeError:
        pass
elif cond2:
    return answer2 or define func_obj
else:
    return answer3 or define func_obj
do something with func_obj
```

So, the obvious problem is that upon catching the error, we want to do something with `func_obj` but haven't defined it. Solution: Replace `elif` by `if`. Test is added, needs review...


---

Comment by SimonKing created at 2014-09-23 13:44:17

Why did `git trac` not succeed to set the branch field after pushing my branch? Strange.

Doing it manually now.


---

Comment by vbraun created at 2014-09-23 13:47:01

Did you post the first commit while the script was still uploading? There is a lock in trac to not have competing changes to a ticket...


---

Comment by vbraun created at 2014-09-23 13:47:34

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-09-25 12:05:29

Resolution: fixed
