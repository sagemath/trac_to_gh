# Issue 10852: specializations for symmetric functions

archive/issues_010852.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @jbandlow @zabrocki @tscrim @darijgr\n\nKeywords: principal specialization, exponential specialization, symmetric functions\n\nThis patch implements the principal and exponential specialisations for symmetric functions as given in Stanley, Enumerative Combinatorics, Section 7.8.\n\nUnfortunately, the patch currently has several problems:\n1) it seems that always the default code in sf/sfa.py is called, I don't know why\n2) I do not know how to give the desired default argument 1 the correct type in exponential_specialization\n3) I guess one should rather implement this for quasi-symmetric functions, but I do not know enough about these currently\n4) the documentation and sensible tests are still missing\n\nIssue created by migration from https://trac.sagemath.org/ticket/10930\n\n",
    "created_at": "2011-03-14T08:19:49Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "specializations for symmetric functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10852",
    "user": "https://github.com/mantepse"
}
```
Assignee: tbd

CC:  @jbandlow @zabrocki @tscrim @darijgr

Keywords: principal specialization, exponential specialization, symmetric functions

This patch implements the principal and exponential specialisations for symmetric functions as given in Stanley, Enumerative Combinatorics, Section 7.8.

Unfortunately, the patch currently has several problems:
1) it seems that always the default code in sf/sfa.py is called, I don't know why
2) I do not know how to give the desired default argument 1 the correct type in exponential_specialization
3) I guess one should rather implement this for quasi-symmetric functions, but I do not know enough about these currently
4) the documentation and sensible tests are still missing

Issue created by migration from https://trac.sagemath.org/ticket/10930





---

archive/issue_comments_114931.json:
```json
{
    "body": "patch for principal and exponential specialization",
    "created_at": "2011-03-14T08:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114931",
    "user": "https://github.com/mantepse"
}
```

patch for principal and exponential specialization



---

archive/issue_comments_114932.json:
```json
{
    "body": "Changing assignee from tbd to @mantepse.",
    "created_at": "2011-03-14T10:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114932",
    "user": "https://github.com/mantepse"
}
```

Changing assignee from tbd to @mantepse.



---

archive/issue_comments_114933.json:
```json
{
    "body": "Attachment [sf_principal_specialization-mr.patch](tarball://root/attachments/some-uuid/ticket10930/sf_principal_specialization-mr.patch) by @mantepse created at 2011-03-14 10:05:51",
    "created_at": "2011-03-14T10:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114933",
    "user": "https://github.com/mantepse"
}
```

Attachment [sf_principal_specialization-mr.patch](tarball://root/attachments/some-uuid/ticket10930/sf_principal_specialization-mr.patch) by @mantepse created at 2011-03-14 10:05:51



---

archive/issue_comments_114934.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2011-03-14T10:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114934",
    "user": "https://github.com/mantepse"
}
```

Changing priority from major to minor.



---

archive/issue_comments_114935.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2011-03-14T10:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114935",
    "user": "https://github.com/mantepse"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_114936.json:
```json
{
    "body": "Hi Martin,\n\nThanks submitting this!  A quick response to your points above.  I'm not sure what you mean by point (1)... can you elaborate?\n\nFor point (2), you can use None as the default value, and then do\n\n```\n    if q is None:\n        q = self.parent().base_ring().one()\n```\n\nas the first line of your code.\n\nFor point (3), quasisymmetric functions are still somewhat immature--in particular they are not in Sage proper. So this is not too big of a concern.\n\nFor point (4), yes, there should be more doc and tests.  In particular, I find tests like\n\n```\n    all( e[mu].principal_specialization(4) == e[mu].expand(4)(1,q,q^2,q^3) for mu in Partitions(4) )\n```\n\nparticularly convincing.",
    "created_at": "2011-03-14T17:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114936",
    "user": "https://github.com/jbandlow"
}
```

Hi Martin,

Thanks submitting this!  A quick response to your points above.  I'm not sure what you mean by point (1)... can you elaborate?

For point (2), you can use None as the default value, and then do

```
    if q is None:
        q = self.parent().base_ring().one()
```

as the first line of your code.

For point (3), quasisymmetric functions are still somewhat immature--in particular they are not in Sage proper. So this is not too big of a concern.

For point (4), yes, there should be more doc and tests.  In particular, I find tests like

```
    all( e[mu].principal_specialization(4) == e[mu].expand(4)(1,q,q^2,q^3) for mu in Partitions(4) )
```

particularly convincing.



---

archive/issue_comments_114937.json:
```json
{
    "body": "Hi Jason!\n\nMany thanks for your quick comments.\n\n1) Using trace I find\n\n\n```\nsage: S = SymmetricFunctions(QQ); s=S.s(); f = s[2,1]\nsage: trace(\"f.principal_specialization()\")\n> <string>(1)<module>()\n\nipdb> s\n--Call--\n> /home/martin/SAGE/local/lib/python2.6/site-packages/sage/combinat/sf/sfa.py(1653)principal_specialization()\n   1652 \n-> 1653     def principal_specialization(self, n=infinity, q=var('q')):\n   1654         r\"\"\"\n\nipdb> s\n> /home/martin/SAGE/local/lib/python2.6/site-packages/sage/combinat/sf/sfa.py(1681)principal_specialization()\n   1680         \"\"\"\n-> 1681         from sage.combinat.sf.sf import SymmetricFunctions\n   1682         p = SymmetricFunctions(self.parent().base_ring()).p()\n\nipdb> \n```\n\nbut I was hoping that the principal specialisation from schur.py would be called.\n\n2) Well, currently the actual value of 1 is not used at all (I test q==1 and call principal_specialization without passing q).  So my question really is: some day somebody might implement something where the q is actually used.  Is it better then if the default is None and the doc says, None should always mean one?\n\nThanks again!",
    "created_at": "2011-03-15T07:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114937",
    "user": "https://github.com/mantepse"
}
```

Hi Jason!

Many thanks for your quick comments.

1) Using trace I find


```
sage: S = SymmetricFunctions(QQ); s=S.s(); f = s[2,1]
sage: trace("f.principal_specialization()")
> <string>(1)<module>()

ipdb> s
--Call--
> /home/martin/SAGE/local/lib/python2.6/site-packages/sage/combinat/sf/sfa.py(1653)principal_specialization()
   1652 
-> 1653     def principal_specialization(self, n=infinity, q=var('q')):
   1654         r"""

ipdb> s
> /home/martin/SAGE/local/lib/python2.6/site-packages/sage/combinat/sf/sfa.py(1681)principal_specialization()
   1680         """
-> 1681         from sage.combinat.sf.sf import SymmetricFunctions
   1682         p = SymmetricFunctions(self.parent().base_ring()).p()

ipdb> 
```

but I was hoping that the principal specialisation from schur.py would be called.

2) Well, currently the actual value of 1 is not used at all (I test q==1 and call principal_specialization without passing q).  So my question really is: some day somebody might implement something where the q is actually used.  Is it better then if the default is None and the doc says, None should always mean one?

Thanks again!



---

archive/issue_comments_114938.json:
```json
{
    "body": "I fixed indenting, bugs and added documentation and tests.  Feedback welcome!",
    "created_at": "2011-03-19T19:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114938",
    "user": "https://github.com/mantepse"
}
```

I fixed indenting, bugs and added documentation and tests.  Feedback welcome!



---

archive/issue_comments_114939.json:
```json
{
    "body": "Hi Martin, a few more points:\n\n1) If I'm not mistaken, the function f in the exponential_specialization code for Schur functions is returning the product of the hooks of partition. This can also be done with ` Partition(partition).hook_product(1) `\n\n2) You do not give the result of the test in line 275 of the Schur function code.\n\n3) See [this](http://groups.google.com/group/sage-devel/t/f5a9c012f6299a9e) and make sure that your patch satisfies these criteria. Please ask the sage-combinat list if you have any questions about these.\n\n4) Once you have completed all of this, mark the patch as 'Needs Review' (by clicking the button at the bottom of the page). Then the 'Patchbot' will automatically apply and test your code.\n\nAgain, many thanks for your good work!",
    "created_at": "2011-03-28T18:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114939",
    "user": "https://github.com/jbandlow"
}
```

Hi Martin, a few more points:

1) If I'm not mistaken, the function f in the exponential_specialization code for Schur functions is returning the product of the hooks of partition. This can also be done with ` Partition(partition).hook_product(1) `

2) You do not give the result of the test in line 275 of the Schur function code.

3) See [this](http://groups.google.com/group/sage-devel/t/f5a9c012f6299a9e) and make sure that your patch satisfies these criteria. Please ask the sage-combinat list if you have any questions about these.

4) Once you have completed all of this, mark the patch as 'Needs Review' (by clicking the button at the bottom of the page). Then the 'Patchbot' will automatically apply and test your code.

Again, many thanks for your good work!



---

archive/issue_comments_114940.json:
```json
{
    "body": "Replying to [comment:7 jbandlow]:\n\nJason, might it be that you were looking on a different version of the patch?  There is no exponential_specialization for Schur functions (I use the generic version) and there is no test in line 275...\n\nOn the other hand, I just noticed several other problems with the code.  Eg., ` s[1].exponential_specialization() ` doesn't work right now.  I also should include tests for calling without any arguments...",
    "created_at": "2011-03-29T07:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114940",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:7 jbandlow]:

Jason, might it be that you were looking on a different version of the patch?  There is no exponential_specialization for Schur functions (I use the generic version) and there is no test in line 275...

On the other hand, I just noticed several other problems with the code.  Eg., ` s[1].exponential_specialization() ` doesn't work right now.  I also should include tests for calling without any arguments...



---

archive/issue_comments_114941.json:
```json
{
    "body": "Replying to [comment:8 mantepse]:\n\nHi Martin,\n\nSorry for the delay. Yes I was looking at the wrong version of the patch last time. Everything on the combinat queue now looks good to me. I think that all that is left is for you to prepare the patch for sage as mentioned in my point (3) above.",
    "created_at": "2011-04-04T13:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114941",
    "user": "https://github.com/jbandlow"
}
```

Replying to [comment:8 mantepse]:

Hi Martin,

Sorry for the delay. Yes I was looking at the wrong version of the patch last time. Everything on the combinat queue now looks good to me. I think that all that is left is for you to prepare the patch for sage as mentioned in my point (3) above.



---

archive/issue_comments_114942.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-03T00:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114942",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114943.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-04-03T00:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114943",
    "user": "https://github.com/mantepse"
}
```

New commits:



---

archive/issue_comments_114944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-03T08:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114945.json:
```json
{
    "body": "Your description of the definition of `principle_specialization` is clear, but all of your `exponential_specialization` functions need a description.\nThe one place that you have a description, it doesn't make sense to me because you seem to explain q-exponential_specialization, but not exponential_specialization and they don't clearly seem to be compatible by setting q=1.  It wouldn't hurt to add a reference to the definition in the documentation either.",
    "created_at": "2019-04-15T16:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114945",
    "user": "https://github.com/zabrocki"
}
```

Your description of the definition of `principle_specialization` is clear, but all of your `exponential_specialization` functions need a description.
The one place that you have a description, it doesn't make sense to me because you seem to explain q-exponential_specialization, but not exponential_specialization and they don't clearly seem to be compatible by setting q=1.  It wouldn't hurt to add a reference to the definition in the documentation either.



---

archive/issue_comments_114946.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-15T16:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114946",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_114947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-15T17:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114948.json:
```json
{
    "body": "Thank you, that was an oversight.  I hope it is better now!",
    "created_at": "2019-04-15T17:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114948",
    "user": "https://github.com/mantepse"
}
```

Thank you, that was an oversight.  I hope it is better now!



---

archive/issue_comments_114949.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-15T18:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114949",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114950.json:
```json
{
    "body": "Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114950",
    "user": "https://github.com/embray"
}
```

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_114951.json:
```json
{
    "body": "ping?",
    "created_at": "2019-11-29T14:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114951",
    "user": "https://github.com/mantepse"
}
```

ping?



---

archive/issue_comments_114952.json:
```json
{
    "body": "I think that this needs to be more compatible with Hall-Littlewood and Macdonald symmetric functions because this seems to be one place that they might be used.  If the base ring already has a q in it, this creates an expression with two q's.\n\n```\nsage: Ht = SymmetricFunctions(QQ['q,t'].fraction_field()).macdonald().Ht()\nsage: Ht[2].principal_specialization()\n(q*q + 1)/(q^3 - q^2 - q + 1)\nsage: _.parent()\nFraction Field of Univariate Polynomial Ring in q over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field\n```\n\nand I think that is wrong.  What about:\n\n```\ntry:\n    q = self.base_ring()('q')\nexcept:\n    q = self.base_ring()[\"q\"].fraction_field().gen()\n```\n\nCurrently in 'powersum.py' you have just the last line.\n\nAlso maybe should have doc tests comparing the principal specialization to plethysm.\n\n```\nsage: one=f.parent().one()\nsage: f.principal_specialization(q=q)==f(one/(1-q)).coefficient([])\nTrue\nsage: f.principal_specialization(n=4,q=q)==f(one*(1-q^4)/(1-q)).coefficient([])\nTrue\n```\n",
    "created_at": "2019-12-01T18:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114952",
    "user": "https://github.com/zabrocki"
}
```

I think that this needs to be more compatible with Hall-Littlewood and Macdonald symmetric functions because this seems to be one place that they might be used.  If the base ring already has a q in it, this creates an expression with two q's.

```
sage: Ht = SymmetricFunctions(QQ['q,t'].fraction_field()).macdonald().Ht()
sage: Ht[2].principal_specialization()
(q*q + 1)/(q^3 - q^2 - q + 1)
sage: _.parent()
Fraction Field of Univariate Polynomial Ring in q over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field
```

and I think that is wrong.  What about:

```
try:
    q = self.base_ring()('q')
except:
    q = self.base_ring()["q"].fraction_field().gen()
```

Currently in 'powersum.py' you have just the last line.

Also maybe should have doc tests comparing the principal specialization to plethysm.

```
sage: one=f.parent().one()
sage: f.principal_specialization(q=q)==f(one/(1-q)).coefficient([])
True
sage: f.principal_specialization(n=4,q=q)==f(one*(1-q^4)/(1-q)).coefficient([])
True
```




---

archive/issue_comments_114953.json:
```json
{
    "body": "I am not sure I agree with you Mike that the `q` for the principle specialization should be the same `q` as for the Macdonald. For example, at `t=0`, the Macdonald `q` counts the affine grading whereas the principle specialization `q` counts the principle grading after restricting to a finite-type representation. Because of this, I feel they should be different variables (and I would try to have a different name, perhaps `q1`, if `'q' in self.base_ring().variable_names_recursive()`). Could you explain more why do you think they should be the same `q`?",
    "created_at": "2019-12-01T21:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114953",
    "user": "https://github.com/tscrim"
}
```

I am not sure I agree with you Mike that the `q` for the principle specialization should be the same `q` as for the Macdonald. For example, at `t=0`, the Macdonald `q` counts the affine grading whereas the principle specialization `q` counts the principle grading after restricting to a finite-type representation. Because of this, I feel they should be different variables (and I would try to have a different name, perhaps `q1`, if `'q' in self.base_ring().variable_names_recursive()`). Could you explain more why do you think they should be the same `q`?



---

archive/issue_comments_114954.json:
```json
{
    "body": "I was thinking of applications like The Delta Conjecture (e.g. see Theorem 5.1).  My comment is not specific to Macdonald polynomials though, it was just an example.  Whatever variable you use, if it is in your base ring it seems that you should be using that letter and not adding another copy of it by default.  If you want to use another variable in your specialization you can always add one.",
    "created_at": "2019-12-01T22:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114954",
    "user": "https://github.com/zabrocki"
}
```

I was thinking of applications like The Delta Conjecture (e.g. see Theorem 5.1).  My comment is not specific to Macdonald polynomials though, it was just an example.  Whatever variable you use, if it is in your base ring it seems that you should be using that letter and not adding another copy of it by default.  If you want to use another variable in your specialization you can always add one.



---

archive/issue_comments_114955.json:
```json
{
    "body": "I see. I think that violates the principle of least surprise: someone trying this method changes the variable in their base ring and suddenly the polynomial behaves differently. If you really wanted that base ring variable, then I think you should pass it as a parameter. So if you want a different variable name, then we should change the default name if q is already on the base ring.",
    "created_at": "2019-12-02T02:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114955",
    "user": "https://github.com/tscrim"
}
```

I see. I think that violates the principle of least surprise: someone trying this method changes the variable in their base ring and suddenly the polynomial behaves differently. If you really wanted that base ring variable, then I think you should pass it as a parameter. So if you want a different variable name, then we should change the default name if q is already on the base ring.



---

archive/issue_comments_114956.json:
```json
{
    "body": "From my understanding what you are saying you are recommending behavior like:\n\n```\nsage: SymmetricFunctions(QQ).s()[1].principal_specialization()\n1/(1-q)\nsage: SymmetricFunctions(SR).s()[1].principal_specialization()\n1/(1-z)\n```\n",
    "created_at": "2019-12-02T03:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114956",
    "user": "https://github.com/zabrocki"
}
```

From my understanding what you are saying you are recommending behavior like:

```
sage: SymmetricFunctions(QQ).s()[1].principal_specialization()
1/(1-q)
sage: SymmetricFunctions(SR).s()[1].principal_specialization()
1/(1-z)
```




---

archive/issue_comments_114957.json:
```json
{
    "body": "I think it is in the long run more user friendly, if the rule that determines which name is used for a variable, or whether a symbol is actually reused, is as simple and predictable as possible.  Therefore I would be rather against a \"renaming\" rule.",
    "created_at": "2019-12-02T06:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114957",
    "user": "https://github.com/mantepse"
}
```

I think it is in the long run more user friendly, if the rule that determines which name is used for a variable, or whether a symbol is actually reused, is as simple and predictable as possible.  Therefore I would be rather against a "renaming" rule.



---

archive/issue_comments_114958.json:
```json
{
    "body": "So you would rather it be a part of the base ring then Martin? Or same name (with possibly repeated variable name)?",
    "created_at": "2019-12-02T22:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114958",
    "user": "https://github.com/tscrim"
}
```

So you would rather it be a part of the base ring then Martin? Or same name (with possibly repeated variable name)?



---

archive/issue_comments_114959.json:
```json
{
    "body": "I don't mind either way.  I guess that having two q's which are different in one expression is more likely to be overlooked, so I guess that checking whether q is there is less bad.  I would think that even the casual user might be aware that the base ring contains a q.\n\nIs this OK for you?\n\nA question: it turns out that the explicit `fraction_field()` in \n\n```\ntry:\n    q = self.base_ring()('q')\nexcept:\n    q = self.base_ring()[\"q\"].fraction_field().gen()\n```\n\nis unnecessary.  Should I keep it anyway?",
    "created_at": "2019-12-03T06:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114959",
    "user": "https://github.com/mantepse"
}
```

I don't mind either way.  I guess that having two q's which are different in one expression is more likely to be overlooked, so I guess that checking whether q is there is less bad.  I would think that even the casual user might be aware that the base ring contains a q.

Is this OK for you?

A question: it turns out that the explicit `fraction_field()` in 

```
try:
    q = self.base_ring()('q')
except:
    q = self.base_ring()["q"].fraction_field().gen()
```

is unnecessary.  Should I keep it anyway?



---

archive/issue_comments_114960.json:
```json
{
    "body": "If you are visually looking at output, then I agree, but if you are programming something, then it will break if you are doing something assuming that the output is a univariate polynomial ring. It is also much easier for the user to pass in the `q` of the base ring than to create a new polynomial ring with the variable.\n\nPerhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they are doing.\n\nAlso, I agree with removing the `fraction_field` since it is unnecessary.",
    "created_at": "2019-12-03T10:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114960",
    "user": "https://github.com/tscrim"
}
```

If you are visually looking at output, then I agree, but if you are programming something, then it will break if you are doing something assuming that the output is a univariate polynomial ring. It is also much easier for the user to pass in the `q` of the base ring than to create a new polynomial ring with the variable.

Perhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they are doing.

Also, I agree with removing the `fraction_field` since it is unnecessary.



---

archive/issue_comments_114961.json:
```json
{
    "body": "Replying to [comment:33 tscrim]:\n> If you are visually looking at output, then I agree, but if you are programming something, then it will break if you are doing something assuming that the output is a univariate polynomial ring. It is also much easier for the user to pass in the `q` of the base ring than to create a new polynomial ring with the variable.\n\nI agree!\n\n> Perhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they are doing.\n\nI think that is an excellent idea!\n\n> Also, I agree with removing the `fraction_field` since it is unnecessary.\n\nwill do.",
    "created_at": "2019-12-03T13:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114961",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:33 tscrim]:
> If you are visually looking at output, then I agree, but if you are programming something, then it will break if you are doing something assuming that the output is a univariate polynomial ring. It is also much easier for the user to pass in the `q` of the base ring than to create a new polynomial ring with the variable.

I agree!

> Perhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they are doing.

I think that is an excellent idea!

> Also, I agree with removing the `fraction_field` since it is unnecessary.

will do.



---

archive/issue_comments_114962.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-03T13:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114963.json:
```json
{
    "body": "> > Perhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they \nare doing.\n> \n> I think that is an excellent idea!\n\nUnfortunately, it doesn't work.  The base ring could be the symbolic ring.",
    "created_at": "2019-12-03T13:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114963",
    "user": "https://github.com/mantepse"
}
```

> > Perhaps as a compromise, we raise an error if there is no `q` given but `q` is a variable name in the base ring? This is clearly the safest option, and it requires the user to know exactly what they 
are doing.
> 
> I think that is an excellent idea!

Unfortunately, it doesn't work.  The base ring could be the symbolic ring.



---

archive/issue_comments_114964.json:
```json
{
    "body": "Replying to [comment:36 mantepse]:\n> Unfortunately, it doesn't work.  The base ring could be the symbolic ring.\n\nWe can treat the symbolic ring as special. What I was think was doing\n\n```python\ntry:\n    if 'q' in self.base_ring().variable_names_recursive():\n        raise ValueError(\"q is already a variable name, so you must give the parameter q\")\n    else:\n        q = self.base_ring()['q'].gen()\nexcept AttributeError:\n    q = self.base_ring()['q'].gen()\n```\n\nFor this, they symbolic ring would be treated the same as `QQ`, and we would get a univariate polynomial ring over `SR`. The other option is just explicitly test for `self.base_ring() is SR` and just let `q = SR.var('q')`.",
    "created_at": "2019-12-03T21:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114964",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:36 mantepse]:
> Unfortunately, it doesn't work.  The base ring could be the symbolic ring.

We can treat the symbolic ring as special. What I was think was doing

```python
try:
    if 'q' in self.base_ring().variable_names_recursive():
        raise ValueError("q is already a variable name, so you must give the parameter q")
    else:
        q = self.base_ring()['q'].gen()
except AttributeError:
    q = self.base_ring()['q'].gen()
```

For this, they symbolic ring would be treated the same as `QQ`, and we would get a univariate polynomial ring over `SR`. The other option is just explicitly test for `self.base_ring() is SR` and just let `q = SR.var('q')`.



---

archive/issue_comments_114965.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-03T21:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114966.json:
```json
{
    "body": "emails crossed :-)\n\nI think it's OK to require q to be passed explicitely for the symbolic ring.  I would rather not test explicitely for `SR`, because it is quite possible to have, for example and some time in future, a polynomial ring which contains all variables.\n\nSince not all rings have `variable_names_recursive`, I simply try to convert \"q\" to a ring element, as Mike proposed.\n\nAre you OK with this version?",
    "created_at": "2019-12-03T21:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114966",
    "user": "https://github.com/mantepse"
}
```

emails crossed :-)

I think it's OK to require q to be passed explicitely for the symbolic ring.  I would rather not test explicitely for `SR`, because it is quite possible to have, for example and some time in future, a polynomial ring which contains all variables.

Since not all rings have `variable_names_recursive`, I simply try to convert "q" to a ring element, as Mike proposed.

Are you OK with this version?



---

archive/issue_comments_114967.json:
```json
{
    "body": "This is acceptable to me. Mike?",
    "created_at": "2019-12-03T21:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114967",
    "user": "https://github.com/tscrim"
}
```

This is acceptable to me. Mike?



---

archive/issue_comments_114968.json:
```json
{
    "body": "I'll need a little time to try it out.  \"explicitely\" is spelled wrong and I want to check that all coercions are correct.\n\nAs long as there is an option to use one of the variables in the ring in case that is what is desired that should be ok.",
    "created_at": "2019-12-04T20:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114968",
    "user": "https://github.com/zabrocki"
}
```

I'll need a little time to try it out.  "explicitely" is spelled wrong and I want to check that all coercions are correct.

As long as there is an option to use one of the variables in the ring in case that is what is desired that should be ok.



---

archive/issue_comments_114969.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-04T21:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114970.json:
```json
{
    "body": "Thanks for spotting the misspelling!  I created ticket #28843 for the other occurrences of \"explicitely\" :-)",
    "created_at": "2019-12-04T22:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114970",
    "user": "https://github.com/mantepse"
}
```

Thanks for spotting the misspelling!  I created ticket #28843 for the other occurrences of "explicitely" :-)



---

archive/issue_comments_114971.json:
```json
{
    "body": "The startup modules plugin says:\n\n```\n========== startup_modules ==========\ngit checkout patchbot/ticket_merged\n/local/sage-patchbot/sage/sage -c ''\nTotal count: 1687\nNew:\nsage.combinat.q_analogues\n====================\n```\n\nI am guessing that this happens because I import `q_binomial` and `q_factorial` in `elementary.py` and `homogeneous.py`.  Should I rather import them locally?",
    "created_at": "2019-12-05T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114971",
    "user": "https://github.com/mantepse"
}
```

The startup modules plugin says:

```
========== startup_modules ==========
git checkout patchbot/ticket_merged
/local/sage-patchbot/sage/sage -c ''
Total count: 1687
New:
sage.combinat.q_analogues
====================
```

I am guessing that this happens because I import `q_binomial` and `q_factorial` in `elementary.py` and `homogeneous.py`.  Should I rather import them locally?



---

archive/issue_comments_114972.json:
```json
{
    "body": "I think it is better to do them locally as I don't see the extra import making a timing difference.",
    "created_at": "2019-12-05T07:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114972",
    "user": "https://github.com/tscrim"
}
```

I think it is better to do them locally as I don't see the extra import making a timing difference.



---

archive/issue_comments_114973.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-05T12:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114974.json:
```json
{
    "body": "I just noticed that I overlooked the default values for the exponential specialisation.\n\nI factored out the following little helper function, but I do not know where to put it:\n\n```\ndef get_variable(ring, name):\n    try:\n        ring(name)\n    except TypeError:\n        return ring[name].gen()\n    else:\n        raise ValueError(\"the variable %s is in the base ring, pass it explicitly\" % name)\n```\n\n\nThis could also be used in `theta_qt`:\n\n```\n    def theta_qt(self, q=None, t=None):\n        r\"\"\"\n        Return the image of ``self`` under the `q,t`-deformed theta\n        endomorphism which sends `p_k` to `\\frac{1-q^k}{1-t^k} \\cdot p_k`\n        for all positive integers `k`.\n\n        In general, this is well-defined outside of the powersum basis only\n        if the base ring is a `\\QQ`-algebra.\n\n        INPUT:\n\n        - ``q``, ``t`` -- parameters (default: ``None``, in which case 'q'\n          and 't' are used)\n\n...\n\n        \"\"\"\n        parent = self.parent()\n        BR = parent.base_ring()\n        p = parent.realization_of().power()\n        p_self = p(self)\n        if t is None:\n            if hasattr(parent,\"t\"):\n                t = parent.t\n            else:\n                t = BR(QQ['t'].gen())\n        if q is None:\n            if hasattr(parent,\"q\"):\n                q = parent.q\n            else:\n                q = BR(QQ['q'].gen())\n\n```\n\n\nsame in `omega_qt`, `nabla`, `scalar_qt`, `scalar_jack`",
    "created_at": "2019-12-05T12:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114974",
    "user": "https://github.com/mantepse"
}
```

I just noticed that I overlooked the default values for the exponential specialisation.

I factored out the following little helper function, but I do not know where to put it:

```
def get_variable(ring, name):
    try:
        ring(name)
    except TypeError:
        return ring[name].gen()
    else:
        raise ValueError("the variable %s is in the base ring, pass it explicitly" % name)
```


This could also be used in `theta_qt`:

```
    def theta_qt(self, q=None, t=None):
        r"""
        Return the image of ``self`` under the `q,t`-deformed theta
        endomorphism which sends `p_k` to `\frac{1-q^k}{1-t^k} \cdot p_k`
        for all positive integers `k`.

        In general, this is well-defined outside of the powersum basis only
        if the base ring is a `\QQ`-algebra.

        INPUT:

        - ``q``, ``t`` -- parameters (default: ``None``, in which case 'q'
          and 't' are used)

...

        """
        parent = self.parent()
        BR = parent.base_ring()
        p = parent.realization_of().power()
        p_self = p(self)
        if t is None:
            if hasattr(parent,"t"):
                t = parent.t
            else:
                t = BR(QQ['t'].gen())
        if q is None:
            if hasattr(parent,"q"):
                q = parent.q
            else:
                q = BR(QQ['q'].gen())

```


same in `omega_qt`, `nabla`, `scalar_qt`, `scalar_jack`



---

archive/issue_comments_114975.json:
```json
{
    "body": "No it can't be.  For `theta_qt` the `q` and the `t` must be in the `base_ring`.",
    "created_at": "2019-12-05T13:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114975",
    "user": "https://github.com/zabrocki"
}
```

No it can't be.  For `theta_qt` the `q` and the `t` must be in the `base_ring`.



---

archive/issue_comments_114976.json:
```json
{
    "body": "Replying to [comment:48 zabrocki]:\n> No it can't be.  For `theta_qt` the `q` and the `t` must be in the `base_ring`.\n\nYou are right, I am sorry.",
    "created_at": "2019-12-05T13:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114976",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:48 zabrocki]:
> No it can't be.  For `theta_qt` the `q` and the `t` must be in the `base_ring`.

You are right, I am sorry.



---

archive/issue_comments_114977.json:
```json
{
    "body": "I'm still testing this out but here are some initial comments:\n\n\"specialisation\" -> \"specialization\"\n\nAlso in `exponential_specialization`, I think you should mention \"where `n` is the homogeneous degree of `f`.\"\n\nAre you sure that you intended the behavior with `t=None` and `q=None`?  You get expressions where the `q` and the `t` don't mix well.  This is not what I was expecting (maybe this is what you intended, but I'm asking for clarification).\n\n```\nsage: h = SymmetricFunctions(QQ).h()\nsage: h[3].exponential_specialization(t=None,q=None)\n((q^2 - 2*q + 1)/(q^2 + q + 1))*t^3\nsage: _.parent()\nUnivariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field\n```\n\nThis is not what is documented under the INPUT section because it says that\n\"the default is to create the fraction field of polynomials in `t` over the coefficient ring.\"\n\nAre you sure you don't want to be using `self.base_ring()['q,t'].fraction_field()` `self.base_ring()['t']['q'].fraction_field()` or more simply `SR` for these expressions?  When do you anticipate users wanting to calculate the principal or exponential specialization and what will be done with the expressions afterwards?  \n\nThe calculation for elementary, power sum, monomial and Schur are all handled differently and the documentation for the `exponential_specialization` or `principal_specialization` is the same.  I think that the mathematical formulas used in those methods should be documented.\n\n\"Note that the stable principal specialization can be obtained as a plethysm\" delete the word \"stable\" since both the stable and non-stable are demonstrated to be plethysm in that example (n=infinity is \"stable\", right?)",
    "created_at": "2019-12-05T16:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114977",
    "user": "https://github.com/zabrocki"
}
```

I'm still testing this out but here are some initial comments:

"specialisation" -> "specialization"

Also in `exponential_specialization`, I think you should mention "where `n` is the homogeneous degree of `f`."

Are you sure that you intended the behavior with `t=None` and `q=None`?  You get expressions where the `q` and the `t` don't mix well.  This is not what I was expecting (maybe this is what you intended, but I'm asking for clarification).

```
sage: h = SymmetricFunctions(QQ).h()
sage: h[3].exponential_specialization(t=None,q=None)
((q^2 - 2*q + 1)/(q^2 + q + 1))*t^3
sage: _.parent()
Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field
```

This is not what is documented under the INPUT section because it says that
"the default is to create the fraction field of polynomials in `t` over the coefficient ring."

Are you sure you don't want to be using `self.base_ring()['q,t'].fraction_field()` `self.base_ring()['t']['q'].fraction_field()` or more simply `SR` for these expressions?  When do you anticipate users wanting to calculate the principal or exponential specialization and what will be done with the expressions afterwards?  

The calculation for elementary, power sum, monomial and Schur are all handled differently and the documentation for the `exponential_specialization` or `principal_specialization` is the same.  I think that the mathematical formulas used in those methods should be documented.

"Note that the stable principal specialization can be obtained as a plethysm" delete the word "stable" since both the stable and non-stable are demonstrated to be plethysm in that example (n=infinity is "stable", right?)



---

archive/issue_comments_114978.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-05T18:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114979.json:
```json
{
    "body": "Dear Mike!\n\nthank you for looking into this, and thank you for your comments.  I did the easy ones.\n\nReplying to [comment:50 zabrocki]:\n\n> Also in `exponential_specialization`, I think you should mention \"where `n` is the homogeneous degree of `f`.\"\n\nCould you say precisely where?  Currently, it is written, for example in `sfa.py`, on line 5543:\n\n```\n        By analogy `q`-exponential specialization is a ring homomorphism\n        defined on homogeneous symmetric functions `f` of degree `n`\n        as\n```\n\n\nOr am I misunderstanding you?\n\n> Are you sure that you intended the behavior with `t=None` and `q=None`?  You get expressions where the `q` and the `t` don't mix well.  This is not what I was expecting (maybe this is what you intended, but I'm asking for clarification).\n> {{{\n> sage: h = SymmetricFunctions(QQ).h()\n> sage: h[3].exponential_specialization(t=None,q=None)\n> ((q^2 - 2*q + 1)/(q^2 + q + 1))*t^3\n> sage: _.parent()\n> Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field\n> }}}\n> This is not what is documented under the INPUT section because it says that\n> \"the default is to create the fraction field of polynomials in `t` over the coefficient ring.\"\n\nYes, the documentation is inaccurate, because since a few commits ago it returns a polynomial.\n \n> Are you sure you don't want to be using `self.base_ring()['q,t'].fraction_field()` `self.base_ring()['t']['q'].fraction_field()` or more simply `SR` for these expressions?  When do you anticipate users wanting to calculate the principal or exponential specialization and what will be done with the expressions afterwards?  \n\nI don't think it is wise to use `SR` by default, because we always get something polynomial in `t` and rational in `q`.\n\nWhat I would do with the result afterwards might be factorisation, evaluation at roots of unity, expanding into Taylor series.  In brief: it depends.\n\nWhat would you expect / like? I admit I don't understand what you mean with \"not mixing well\".\n\n> The calculation for elementary, power sum, monomial and Schur are all handled differently and the documentation for the `exponential_specialization` or `principal_specialization` is the same.  I think that the mathematical formulas used in those methods should be documented.\n\nI agree that this makes sense.  It is a lot of work, but I'll do it.  It's a shame that I cannot easily inherit the \"generic\" documentation and append the special stuff.\n\nThanks again!",
    "created_at": "2019-12-05T18:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114979",
    "user": "https://github.com/mantepse"
}
```

Dear Mike!

thank you for looking into this, and thank you for your comments.  I did the easy ones.

Replying to [comment:50 zabrocki]:

> Also in `exponential_specialization`, I think you should mention "where `n` is the homogeneous degree of `f`."

Could you say precisely where?  Currently, it is written, for example in `sfa.py`, on line 5543:

```
        By analogy `q`-exponential specialization is a ring homomorphism
        defined on homogeneous symmetric functions `f` of degree `n`
        as
```


Or am I misunderstanding you?

> Are you sure that you intended the behavior with `t=None` and `q=None`?  You get expressions where the `q` and the `t` don't mix well.  This is not what I was expecting (maybe this is what you intended, but I'm asking for clarification).
> {{{
> sage: h = SymmetricFunctions(QQ).h()
> sage: h[3].exponential_specialization(t=None,q=None)
> ((q^2 - 2*q + 1)/(q^2 + q + 1))*t^3
> sage: _.parent()
> Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field
> }}}
> This is not what is documented under the INPUT section because it says that
> "the default is to create the fraction field of polynomials in `t` over the coefficient ring."

Yes, the documentation is inaccurate, because since a few commits ago it returns a polynomial.
 
> Are you sure you don't want to be using `self.base_ring()['q,t'].fraction_field()` `self.base_ring()['t']['q'].fraction_field()` or more simply `SR` for these expressions?  When do you anticipate users wanting to calculate the principal or exponential specialization and what will be done with the expressions afterwards?  

I don't think it is wise to use `SR` by default, because we always get something polynomial in `t` and rational in `q`.

What I would do with the result afterwards might be factorisation, evaluation at roots of unity, expanding into Taylor series.  In brief: it depends.

What would you expect / like? I admit I don't understand what you mean with "not mixing well".

> The calculation for elementary, power sum, monomial and Schur are all handled differently and the documentation for the `exponential_specialization` or `principal_specialization` is the same.  I think that the mathematical formulas used in those methods should be documented.

I agree that this makes sense.  It is a lot of work, but I'll do it.  It's a shame that I cannot easily inherit the "generic" documentation and append the special stuff.

Thanks again!



---

archive/issue_comments_114980.json:
```json
{
    "body": "I just learnt that there is also a formula for the stable principal specialisation of P-Schur functions, but I'd prefer to keep this for a later ticket.",
    "created_at": "2019-12-05T19:15:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114980",
    "user": "https://github.com/mantepse"
}
```

I just learnt that there is also a formula for the stable principal specialisation of P-Schur functions, but I'd prefer to keep this for a later ticket.



---

archive/issue_comments_114981.json:
```json
{
    "body": "> Could you say precisely where?  Currently, it is written, for example in `sfa.py`, on line 5543:\n> {{{\n>         By analogy `q`-exponential specialization is a ring homomorphism\n>         defined on homogeneous symmetric functions `f` of degree `n`\n>         as\n> }}}\nI missed that `f` was above because it wasn't mentioned in the formula for `ex_q(h_n)`.  I would suggest moving the \"`f` of degree `n`\" down a bit since the formula that immediately follows does not refer to `f`, but the one after that does.\n\n> I don't think it is wise to use `SR` by default, because we always get something polynomial in `t` and rational in `q`.\n>\nMaybe not in `SR`, but what about the other rings?\n\n> What I would do with the result afterwards might be factorisation, evaluation at roots of unity, expanding into Taylor series.  In brief: it depends.\nThe reason I ask is exactly because of the applications you want because evaluation at roots of unity and Taylor series are pretty tough when you have the ring as `Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field`.\n\n> What would you expect / like? I admit I don't understand what you mean with \"not mixing well\".\nBy \"not mixing well\" I meant that the expression was a polynomial in `t` with coefficients which are rational functions in `q` and you can't easily access the two generators at the same time and manipulate those sorts of expressions:\n\n```\nsage: a=h[3].exponential_specialization(t=None,q=None)\nsage: (t,q)=(a.parent().gen(), a.parent().base_ring().gen())\n```\n\nEven once you do that, I wasn't able to get a Taylor series or evaluate at roots of unity easily.  I'm guessing that if you know your application, then this would determine what base ring you would be using and the user would put in specific values for `q` and `t`.\n\n> I agree that this makes sense.  It is a lot of work, but I'll do it.  It's a shame that I cannot easily inherit the \"generic\" documentation and append the special stuff.\nMaybe the generic implementation and for either power sum or complete symmetric functions is sufficient?\nThere will be significant speedup at q=1 for the Schur basis, but I just checked:\n\n```\n%time h(s[6,6,4,4,3,3,3,2,2,1]).exponential_specialization(t=None,q=None)\n```\n\nruns about twice as fast as\n\n```\n%time s[6,6,4,4,3,3,3,2,2,1].exponential_specialization(t=None,q=None)\n```\n\non my computer.  I would coerce to the complete symmetric functions instead of the power sum.",
    "created_at": "2019-12-05T20:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114981",
    "user": "https://github.com/zabrocki"
}
```

> Could you say precisely where?  Currently, it is written, for example in `sfa.py`, on line 5543:
> {{{
>         By analogy `q`-exponential specialization is a ring homomorphism
>         defined on homogeneous symmetric functions `f` of degree `n`
>         as
> }}}
I missed that `f` was above because it wasn't mentioned in the formula for `ex_q(h_n)`.  I would suggest moving the "`f` of degree `n`" down a bit since the formula that immediately follows does not refer to `f`, but the one after that does.

> I don't think it is wise to use `SR` by default, because we always get something polynomial in `t` and rational in `q`.
>
Maybe not in `SR`, but what about the other rings?

> What I would do with the result afterwards might be factorisation, evaluation at roots of unity, expanding into Taylor series.  In brief: it depends.
The reason I ask is exactly because of the applications you want because evaluation at roots of unity and Taylor series are pretty tough when you have the ring as `Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field`.

> What would you expect / like? I admit I don't understand what you mean with "not mixing well".
By "not mixing well" I meant that the expression was a polynomial in `t` with coefficients which are rational functions in `q` and you can't easily access the two generators at the same time and manipulate those sorts of expressions:

```
sage: a=h[3].exponential_specialization(t=None,q=None)
sage: (t,q)=(a.parent().gen(), a.parent().base_ring().gen())
```

Even once you do that, I wasn't able to get a Taylor series or evaluate at roots of unity easily.  I'm guessing that if you know your application, then this would determine what base ring you would be using and the user would put in specific values for `q` and `t`.

> I agree that this makes sense.  It is a lot of work, but I'll do it.  It's a shame that I cannot easily inherit the "generic" documentation and append the special stuff.
Maybe the generic implementation and for either power sum or complete symmetric functions is sufficient?
There will be significant speedup at q=1 for the Schur basis, but I just checked:

```
%time h(s[6,6,4,4,3,3,3,2,2,1]).exponential_specialization(t=None,q=None)
```

runs about twice as fast as

```
%time s[6,6,4,4,3,3,3,2,2,1].exponential_specialization(t=None,q=None)
```

on my computer.  I would coerce to the complete symmetric functions instead of the power sum.



---

archive/issue_comments_114982.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-05T21:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114982",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114983.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-06T11:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114983",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114984.json:
```json
{
    "body": "Since it was easy to do, I implemented the formula for the exponential specialization of Schur functions, which makes a factor of about 5000 in your example.\n\nI also added math to the documentation.",
    "created_at": "2019-12-06T11:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114984",
    "user": "https://github.com/mantepse"
}
```

Since it was easy to do, I implemented the formula for the exponential specialization of Schur functions, which makes a factor of about 5000 in your example.

I also added math to the documentation.



---

archive/issue_comments_114985.json:
```json
{
    "body": "Dear Mike,\n\nshould I switch to rational functions in `q` and `t` as default for the exponential specialization?",
    "created_at": "2019-12-10T13:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114985",
    "user": "https://github.com/mantepse"
}
```

Dear Mike,

should I switch to rational functions in `q` and `t` as default for the exponential specialization?



---

archive/issue_comments_114986.json:
```json
{
    "body": "I made some changes to the documentation, but there was one comment that I have that I have not yet changed.\n\nIn the documentation for the exponential specialization it reads \"Note that setting `q = 1` in the stable principal specialization is an invalid operation.\"  This should be documented in principal specialization and this should be followed.  For instance\n\n```\nsage: e=SymmetricFunctions(QQ).e()\nsage: e[2].principal_specialization(q=1)\n+Infinity\nsage: (e[2]-e[1,1]).principal_specialization(q=1)\nSignError                                 Traceback (most recent call last)\n...\n```\n\nThat is, I think that you should raise an error in this case.  You can remove the comment from exponential specialization and just put it in principal specialization.\n----\nLast 10 new commits:",
    "created_at": "2019-12-26T17:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114986",
    "user": "https://github.com/zabrocki"
}
```

I made some changes to the documentation, but there was one comment that I have that I have not yet changed.

In the documentation for the exponential specialization it reads "Note that setting `q = 1` in the stable principal specialization is an invalid operation."  This should be documented in principal specialization and this should be followed.  For instance

```
sage: e=SymmetricFunctions(QQ).e()
sage: e[2].principal_specialization(q=1)
+Infinity
sage: (e[2]-e[1,1]).principal_specialization(q=1)
SignError                                 Traceback (most recent call last)
...
```

That is, I think that you should raise an error in this case.  You can remove the comment from exponential specialization and just put it in principal specialization.
----
Last 10 new commits:



---

archive/issue_comments_114987.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-12-26T17:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114987",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_114988.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114988",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_114989.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-01T14:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114990.json:
```json
{
    "body": "Done, ready for review again - and thank you for the useful comment!",
    "created_at": "2020-01-01T14:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114990",
    "user": "https://github.com/mantepse"
}
```

Done, ready for review again - and thank you for the useful comment!



---

archive/issue_comments_114991.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-01-01T14:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114991",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114992.json:
```json
{
    "body": "I am again needing this for my research.  I'd be extremely grateful for a review!",
    "created_at": "2020-03-26T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114992",
    "user": "https://github.com/mantepse"
}
```

I am again needing this for my research.  I'd be extremely grateful for a review!



---

archive/issue_comments_114993.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T13:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114994.json:
```json
{
    "body": "Before I move on with the review, can you please comment on the following:\n\n- In powersum.py, you have a get_variable function that deals with unspecified q. In monomial.py, you don't. Is it actually unneeded in monomial.py, or have you forgotten to include it?\n\n- In powersum.py, you use fractions like `(1-q**(n*part))/(1-q**part)`, which are undefined in general since the denominator can be non-invertible. This is probably fine for n == infinity, since the specialization is only defined in limited situations in that case, but for finite n the method should work in full generality. I suggest replacing this fraction by a sum.",
    "created_at": "2020-04-02T13:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114994",
    "user": "https://github.com/darijgr"
}
```

Before I move on with the review, can you please comment on the following:

- In powersum.py, you have a get_variable function that deals with unspecified q. In monomial.py, you don't. Is it actually unneeded in monomial.py, or have you forgotten to include it?

- In powersum.py, you use fractions like `(1-q**(n*part))/(1-q**part)`, which are undefined in general since the denominator can be non-invertible. This is probably fine for n == infinity, since the specialization is only defined in limited situations in that case, but for finite n the method should work in full generality. I suggest replacing this fraction by a sum.



---

archive/issue_comments_114995.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T14:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114995",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_114996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-02T14:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114996",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_114997.json:
```json
{
    "body": "Hi Darij!\n\n* concerning `get_variable`, I see it in `monomial.py` also, line 427.  Or did I misunderstand?\n\n* concerning division by zero: this problem actually affects all bases. The workaround \n  would be to have q symbolic and then take the limit.  I can think of a few problems, \n  let's first check that they are non-problems:\n    - speed for large n and weird coefficient rings\n    - less nice output when q is symbolic\n\n* Heuristically, redirecting via the monomial basis seems faster in real life examples \n  than via the powersum basis.  Did you undo this on purpose?\n\n\n```diff\n@@ -5549,8 +5551,8 @@ class SymmetricFunctionAlgebra_generic_Element(CombinatorialFreeModule.Element):\n             {'the stable principal specialization at q=1 is not defined'}\n \n         \"\"\"\n-        m = self.parent().realization_of().monomial()\n-        return m(self).principal_specialization(n, q=q)\n+        p = self.parent().realization_of().powersum()\n+        return p(self).principal_specialization(n, q=q)\n```\n",
    "created_at": "2020-04-02T20:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114997",
    "user": "https://github.com/mantepse"
}
```

Hi Darij!

* concerning `get_variable`, I see it in `monomial.py` also, line 427.  Or did I misunderstand?

* concerning division by zero: this problem actually affects all bases. The workaround 
  would be to have q symbolic and then take the limit.  I can think of a few problems, 
  let's first check that they are non-problems:
    - speed for large n and weird coefficient rings
    - less nice output when q is symbolic

* Heuristically, redirecting via the monomial basis seems faster in real life examples 
  than via the powersum basis.  Did you undo this on purpose?


```diff
@@ -5549,8 +5551,8 @@ class SymmetricFunctionAlgebra_generic_Element(CombinatorialFreeModule.Element):
             {'the stable principal specialization at q=1 is not defined'}
 
         """
-        m = self.parent().realization_of().monomial()
-        return m(self).principal_specialization(n, q=q)
+        p = self.parent().realization_of().powersum()
+        return p(self).principal_specialization(n, q=q)
```




---

archive/issue_comments_114998.json:
```json
{
    "body": "Hi Martin!\n\n* I see `get_variable` defined only 9 times, but there are 6 files and 2 functions in each, so there are probably 3 missing. Sorry if it isn't monomial.py.\n\n* Division by 0 shouldn't affect any basis (in principal_specialization) when n is finite! The definition works just fine, so I think the method should work as well -- which I think it doesn't.\n\n* I undid my p->m change by accident (having a file open in two different editors); this is why I then force-pushed an updated commit where it was not undone. Or is it still?",
    "created_at": "2020-04-02T20:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114998",
    "user": "https://github.com/darijgr"
}
```

Hi Martin!

* I see `get_variable` defined only 9 times, but there are 6 files and 2 functions in each, so there are probably 3 missing. Sorry if it isn't monomial.py.

* Division by 0 shouldn't affect any basis (in principal_specialization) when n is finite! The definition works just fine, so I think the method should work as well -- which I think it doesn't.

* I undid my p->m change by accident (having a file open in two different editors); this is why I then force-pushed an updated commit where it was not undone. Or is it still?



---

archive/issue_comments_114999.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-04T17:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-114999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115000.json:
```json
{
    "body": "I'm ok with the current implementation and I checked that all tests pass.  Darij, do you have any additional comments or changes?",
    "created_at": "2020-04-04T17:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115000",
    "user": "https://github.com/zabrocki"
}
```

I'm ok with the current implementation and I checked that all tests pass.  Darij, do you have any additional comments or changes?



---

archive/issue_comments_115001.json:
```json
{
    "body": "The issues from #69 are still open; I'm worried it might even silently produce wrong results if the / operator gives a non-unique quotient in some non-integral domain.",
    "created_at": "2020-04-04T17:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115001",
    "user": "https://github.com/darijgr"
}
```

The issues from #69 are still open; I'm worried it might even silently produce wrong results if the / operator gives a non-unique quotient in some non-integral domain.



---

archive/issue_comments_115002.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115002",
    "user": "https://github.com/mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_115003.json:
```json
{
    "body": "Replying to [comment:69 gh-darijgr]:\n> Hi Martin!\n> \n> * I see `get_variable` defined only 9 times, but there are 6 files and 2 functions in each, so there are probably 3 missing. Sorry if it isn't monomial.py.\n\nI just checked. No there are none missing.  `get_variable` is not used in `principal_specialization` of `monomial.py` and not used at all in `sfa.py`.\n\n> * Division by 0 shouldn't affect any basis (in principal_specialization) when n is finite! The definition works just fine, so I think the method should work as well -- which I think it doesn't.\n\nThis is correct, but, for example in `schur.py` I don't see a better way than actually computing with indeterminate `q` and substituting the value afterwards.  Do you think this is worth it?\n\n> * I undid my p->m change by accident (having a file open in two different editors); this is why I then force-pushed an updated commit where it was not undone. Or is it still?\n\nActually, there is some nonsense going on right now, because for q other than 1, the monomial basis redirects to the powersum basis.  In any case, I'll add a comment.",
    "created_at": "2020-04-23T19:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115003",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:69 gh-darijgr]:
> Hi Martin!
> 
> * I see `get_variable` defined only 9 times, but there are 6 files and 2 functions in each, so there are probably 3 missing. Sorry if it isn't monomial.py.

I just checked. No there are none missing.  `get_variable` is not used in `principal_specialization` of `monomial.py` and not used at all in `sfa.py`.

> * Division by 0 shouldn't affect any basis (in principal_specialization) when n is finite! The definition works just fine, so I think the method should work as well -- which I think it doesn't.

This is correct, but, for example in `schur.py` I don't see a better way than actually computing with indeterminate `q` and substituting the value afterwards.  Do you think this is worth it?

> * I undid my p->m change by accident (having a file open in two different editors); this is why I then force-pushed an updated commit where it was not undone. Or is it still?

Actually, there is some nonsense going on right now, because for q other than 1, the monomial basis redirects to the powersum basis.  In any case, I'll add a comment.



---

archive/issue_comments_115004.json:
```json
{
    "body": "> I just checked. No there are none missing. get_variable is not used in principal_specialization of monomial.py and not used at all in sfa.py.\n\nOh, I see -- you're right! The q just gets passed.\n\n> This is correct, but, for example in schur.py I don't see a better way than actually computing with indeterminate q and substituting the value afterwards. Do you think this is worth it?\n\nThat's what I would do.",
    "created_at": "2020-04-23T19:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115004",
    "user": "https://github.com/darijgr"
}
```

> I just checked. No there are none missing. get_variable is not used in principal_specialization of monomial.py and not used at all in sfa.py.

Oh, I see -- you're right! The q just gets passed.

> This is correct, but, for example in schur.py I don't see a better way than actually computing with indeterminate q and substituting the value afterwards. Do you think this is worth it?

That's what I would do.



---

archive/issue_comments_115005.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T11:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115006.json:
```json
{
    "body": "Please review :-)",
    "created_at": "2020-04-24T11:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115006",
    "user": "https://github.com/mantepse"
}
```

Please review :-)



---

archive/issue_comments_115007.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T12:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115008.json:
```json
{
    "body": "I've reviewed the docstrings, except for the fact that I'd like to see more doctests for bad cases (such as q = -1).\n\nWill come back to the methods later tonight.",
    "created_at": "2020-04-24T12:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115008",
    "user": "https://github.com/darijgr"
}
```

I've reviewed the docstrings, except for the fact that I'd like to see more doctests for bad cases (such as q = -1).

Will come back to the methods later tonight.



---

archive/issue_comments_115009.json:
```json
{
    "body": "The `get_variable` method uses `ring[name]` to adjoin a variable called `name` to `ring`. I'm not sure how universal this syntax is; if `ring` is, say, a realization of the symmetric functions, then this will try (and fail) to pick a basis element. Isn't there a better way?",
    "created_at": "2020-04-24T13:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115009",
    "user": "https://github.com/darijgr"
}
```

The `get_variable` method uses `ring[name]` to adjoin a variable called `name` to `ring`. I'm not sure how universal this syntax is; if `ring` is, say, a realization of the symmetric functions, then this will try (and fail) to pick a basis element. Isn't there a better way?



---

archive/issue_comments_115010.json:
```json
{
    "body": "Replying to [comment:79 gh-darijgr]:\n> I've reviewed the docstrings, except for the fact that I'd like to see more doctests for bad cases (such as q = -1).\n\nI'll incorporate all doctests you (explicitly!) suggest, OK?",
    "created_at": "2020-04-24T13:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115010",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:79 gh-darijgr]:
> I've reviewed the docstrings, except for the fact that I'd like to see more doctests for bad cases (such as q = -1).

I'll incorporate all doctests you (explicitly!) suggest, OK?



---

archive/issue_comments_115011.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T13:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115012.json:
```json
{
    "body": "I've pushed a few doctests into the principal specialization in elementary.py. This is roughly the kind of stuff I want to test. If you can check that they work (errors can lie both in the tests and the code; I can't run sage on my machine), I'll add similar tests in all other functions.\n\nOne other cluster of possible issues I'd like to test is whether `_apply_module_morphism` does the necessary coercions for coefficients, seeing that (e.g.) the q-binomials are computed in the \"wrong\" ring.",
    "created_at": "2020-04-24T13:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115012",
    "user": "https://github.com/darijgr"
}
```

I've pushed a few doctests into the principal specialization in elementary.py. This is roughly the kind of stuff I want to test. If you can check that they work (errors can lie both in the tests and the code; I can't run sage on my machine), I'll add similar tests in all other functions.

One other cluster of possible issues I'd like to test is whether `_apply_module_morphism` does the necessary coercions for coefficients, seeing that (e.g.) the q-binomials are computed in the "wrong" ring.



---

archive/issue_comments_115013.json:
```json
{
    "body": "I think it would be better to put these tests into `sfa.py` and test all implemened bases at once.",
    "created_at": "2020-04-24T13:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115013",
    "user": "https://github.com/mantepse"
}
```

I think it would be better to put these tests into `sfa.py` and test all implemened bases at once.



---

archive/issue_comments_115014.json:
```json
{
    "body": "OK, but are the results correct? Do they throw errors?",
    "created_at": "2020-04-24T14:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115014",
    "user": "https://github.com/darijgr"
}
```

OK, but are the results correct? Do they throw errors?



---

archive/issue_comments_115015.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T17:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115016.json:
```json
{
    "body": "The math is all correct. Now we need to (1) add doctests showing that no bad things happen coercion- and singularity-wise (ideally with some really nasty cases like q=2 in Zmod(4)) and (2) using something better than `ring[name]` in the `get_variable` methods. Then I'll take one more look at the yak-shaving part of the implementations and someone will have to run the doctests as I cannot. Sorry for how long this has been taking; the code is more complicated than it may look at a first sight.",
    "created_at": "2020-04-24T17:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115016",
    "user": "https://github.com/darijgr"
}
```

The math is all correct. Now we need to (1) add doctests showing that no bad things happen coercion- and singularity-wise (ideally with some really nasty cases like q=2 in Zmod(4)) and (2) using something better than `ring[name]` in the `get_variable` methods. Then I'll take one more look at the yak-shaving part of the implementations and someone will have to run the doctests as I cannot. Sorry for how long this has been taking; the code is more complicated than it may look at a first sight.



---

archive/issue_comments_115017.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T17:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115018.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T18:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115019.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T19:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115020.json:
```json
{
    "body": "Redirecting to homogeneous instead of powersum in monomial.py has an interesting side effect:\n\n```\n    x.principal_specialization(3, q=var(\"q\"))\nExpected:\n    5*(q^6 - 1)/(q^2 - 1) + 3*(q^3 - 1)/(q - 1) + 1\nGot:\n    -5*(q^3 - 1)^2/(q - 1)^2 + 3*(q^3 - 1)/(q - 1) + 10*(q^4 - 1)*(q^3 - 1)/((q^2 - 1)*(q - 1)) + 1\n```\n\nDo we still want this?  (I am well aware that this is most likely completely arbitrary.) For the record, redirecting to elementary would give\n\n```\n    x.principal_specialization(3, q=var(\"q\"))\nExpected:\n    5*(q^6 - 1)/(q^2 - 1) + 3*(q^3 - 1)/(q - 1) + 1\nGot:\n    -10*(q^3 - 1)*q/(q - 1) + 5*(q^3 - 1)^2/(q - 1)^2 + 3*(q^3 - 1)/(q - 1) + 1\n```\n",
    "created_at": "2020-04-24T19:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115020",
    "user": "https://github.com/mantepse"
}
```

Redirecting to homogeneous instead of powersum in monomial.py has an interesting side effect:

```
    x.principal_specialization(3, q=var("q"))
Expected:
    5*(q^6 - 1)/(q^2 - 1) + 3*(q^3 - 1)/(q - 1) + 1
Got:
    -5*(q^3 - 1)^2/(q - 1)^2 + 3*(q^3 - 1)/(q - 1) + 10*(q^4 - 1)*(q^3 - 1)/((q^2 - 1)*(q - 1)) + 1
```

Do we still want this?  (I am well aware that this is most likely completely arbitrary.) For the record, redirecting to elementary would give

```
    x.principal_specialization(3, q=var("q"))
Expected:
    5*(q^6 - 1)/(q^2 - 1) + 3*(q^3 - 1)/(q - 1) + 1
Got:
    -10*(q^3 - 1)*q/(q - 1) + 5*(q^3 - 1)^2/(q - 1)^2 + 3*(q^3 - 1)/(q - 1) + 1
```




---

archive/issue_comments_115021.json:
```json
{
    "body": "Maybe we should use elementary instead of homogeneous then. Either way, we shouldn't use powersum, as it introduces a dependency on 1/n's. I view finite fields as more important than the symbolic ring (which can't ever be assumed completely bulletproof anyway).",
    "created_at": "2020-04-24T19:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115021",
    "user": "https://github.com/darijgr"
}
```

Maybe we should use elementary instead of homogeneous then. Either way, we shouldn't use powersum, as it introduces a dependency on 1/n's. I view finite fields as more important than the symbolic ring (which can't ever be assumed completely bulletproof anyway).



---

archive/issue_comments_115022.json:
```json
{
    "body": "Also, thanks for fixing my doctests (yes, for some reason I thought (x+y)^2 = x^2 + y^2 over GF(3)). Will finish the review tomorrow.",
    "created_at": "2020-04-24T20:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115022",
    "user": "https://github.com/darijgr"
}
```

Also, thanks for fixing my doctests (yes, for some reason I thought (x+y)^2 = x^2 + y^2 over GF(3)). Will finish the review tomorrow.



---

archive/issue_comments_115023.json:
```json
{
    "body": "Replying to [comment:92 gh-darijgr]:\n> Maybe we should use elementary instead of homogeneous then. Either way, we shouldn't use powersum, as it introduces a dependency on 1/n's. I view finite fields as more important than the symbolic ring (which can't ever be assumed completely bulletproof anyway).\n\nI agree, that's an excellent point!  Let's always redirect to elementary then, and write this in a comment (that elementary behaves well with respect to introducing singularities and seems fastest).",
    "created_at": "2020-04-25T09:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115023",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:92 gh-darijgr]:
> Maybe we should use elementary instead of homogeneous then. Either way, we shouldn't use powersum, as it introduces a dependency on 1/n's. I view finite fields as more important than the symbolic ring (which can't ever be assumed completely bulletproof anyway).

I agree, that's an excellent point!  Let's always redirect to elementary then, and write this in a comment (that elementary behaves well with respect to introducing singularities and seems fastest).



---

archive/issue_comments_115024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T11:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115025.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T15:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115026.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-25T15:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_115027.json:
```json
{
    "body": "Do the last two commits look good to you, Martin?",
    "created_at": "2020-04-25T15:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115027",
    "user": "https://github.com/darijgr"
}
```

Do the last two commits look good to you, Martin?



---

archive/issue_comments_115028.json:
```json
{
    "body": "Actually, I now think that for monomial we should convert to powersum, not to elementary.\n\nIf something is nice in the monomial basis, it will also be nice in the powersum basis but not necessarily in the elementary basis, don't you think?\n\n```\nsage: p(m[7,4,2])\np[7, 4, 2] - p[7, 6] - p[9, 4] - p[11, 2] + 2*p[13]\n```\n",
    "created_at": "2020-04-25T17:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115028",
    "user": "https://github.com/mantepse"
}
```

Actually, I now think that for monomial we should convert to powersum, not to elementary.

If something is nice in the monomial basis, it will also be nice in the powersum basis but not necessarily in the elementary basis, don't you think?

```
sage: p(m[7,4,2])
p[7, 4, 2] - p[7, 6] - p[9, 4] - p[11, 2] + 2*p[13]
```




---

archive/issue_comments_115029.json:
```json
{
    "body": "But powersum is broken for the reasons I claimed. Which is why I'm for adding all those weird-ring tests.\n\nAre my changes so far OK? I'd then add the tests.",
    "created_at": "2020-04-25T17:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115029",
    "user": "https://github.com/darijgr"
}
```

But powersum is broken for the reasons I claimed. Which is why I'm for adding all those weird-ring tests.

Are my changes so far OK? I'd then add the tests.



---

archive/issue_comments_115030.json:
```json
{
    "body": "Replying to [comment:100 gh-darijgr]:\n> But powersum is broken for the reasons I claimed. Which is why I'm for adding all those weird-ring tests.\n\nI don't completely understand.  Am I wrong in assuming that passing from monomial to powersum will not introduce singularities?",
    "created_at": "2020-04-25T18:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115030",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:100 gh-darijgr]:
> But powersum is broken for the reasons I claimed. Which is why I'm for adding all those weird-ring tests.

I don't completely understand.  Am I wrong in assuming that passing from monomial to powersum will not introduce singularities?



---

archive/issue_comments_115031.json:
```json
{
    "body": "It will introduce singularities, since the powersum basis isn't a basis unless the base ring contains the rationals. (Of course, if you're doing the exponential specialization at q=1, you need the rationals anyway, but in all the other cases you don't.)",
    "created_at": "2020-04-25T18:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115031",
    "user": "https://github.com/darijgr"
}
```

It will introduce singularities, since the powersum basis isn't a basis unless the base ring contains the rationals. (Of course, if you're doing the exponential specialization at q=1, you need the rationals anyway, but in all the other cases you don't.)



---

archive/issue_comments_115032.json:
```json
{
    "body": "Replying to [comment:102 gh-darijgr]:\n> It will introduce singularities, since the powersum basis isn't a basis unless the base ring contains the rationals. (Of course, if you're doing the exponential specialization at q=1, you need the rationals anyway, but in all the other cases you don't.)\n\nOops, sorry, I made a very fundamental mistake, you are right of course (witnessed by `p(m[1,1])`.",
    "created_at": "2020-04-25T19:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115032",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:102 gh-darijgr]:
> It will introduce singularities, since the powersum basis isn't a basis unless the base ring contains the rationals. (Of course, if you're doing the exponential specialization at q=1, you need the rationals anyway, but in all the other cases you don't.)

Oops, sorry, I made a very fundamental mistake, you are right of course (witnessed by `p(m[1,1])`.



---

archive/issue_comments_115033.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T19:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115034.json:
```json
{
    "body": "I fixed the doctest and added a comment why we don't use the powersum basis as fallback.  Doctests pass on my computer.",
    "created_at": "2020-04-25T19:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115034",
    "user": "https://github.com/mantepse"
}
```

I fixed the doctest and added a comment why we don't use the powersum basis as fallback.  Doctests pass on my computer.



---

archive/issue_comments_115035.json:
```json
{
    "body": "(So, please go ahead!)",
    "created_at": "2020-04-25T19:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115035",
    "user": "https://github.com/mantepse"
}
```

(So, please go ahead!)



---

archive/issue_comments_115036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T20:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115037.json:
```json
{
    "body": "OK, here are tests for principal_specialization. Can you check that they work before I adapt them for exponential_specialization too?",
    "created_at": "2020-04-25T20:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115037",
    "user": "https://github.com/darijgr"
}
```

OK, here are tests for principal_specialization. Can you check that they work before I adapt them for exponential_specialization too?



---

archive/issue_comments_115038.json:
```json
{
    "body": "There are actually several failures.  The first one that fails is\n\n```\nsage: S = SymmetricFunctions(Zmod(4))\nsage: B = [S.m(), S.e(), S.h(), S.s(), S.f()]\nsage: m = S.m(); x = m[3,2,1]                                                                                                                         \nsage: set([b(x).principal_specialization(n=4, q=Zmod(4)(2)) for b in B])\n...\nZeroDivisionError: inverse of Mod(2, 4) does not exist\n\nDuring handling of the above exception, another exception occurred:\n...\nTypeError: self must be an integral domain.\n```\n\n(It fails for the Schur basis.)",
    "created_at": "2020-04-25T21:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115038",
    "user": "https://github.com/mantepse"
}
```

There are actually several failures.  The first one that fails is

```
sage: S = SymmetricFunctions(Zmod(4))
sage: B = [S.m(), S.e(), S.h(), S.s(), S.f()]
sage: m = S.m(); x = m[3,2,1]                                                                                                                         
sage: set([b(x).principal_specialization(n=4, q=Zmod(4)(2)) for b in B])
...
ZeroDivisionError: inverse of Mod(2, 4) does not exist

During handling of the above exception, another exception occurred:
...
TypeError: self must be an integral domain.
```

(It fails for the Schur basis.)



---

archive/issue_comments_115039.json:
```json
{
    "body": "Can we zoom? Assuming you can easily doctest the file, as we'd probably have to go through this a few times.",
    "created_at": "2020-04-25T21:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115039",
    "user": "https://github.com/darijgr"
}
```

Can we zoom? Assuming you can easily doctest the file, as we'd probably have to go through this a few times.



---

archive/issue_comments_115040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T21:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T22:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115041",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T22:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T22:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115044.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T22:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115045.json:
```json
{
    "body": "I've added tests for exponential_specialization; I'm curious to hear what Sage thinks of them.\n\nI haven't tested for removable singularities this time, since there aren't any (all denominators are unavoidable, although there is some occasional cancellation).",
    "created_at": "2020-04-25T22:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115045",
    "user": "https://github.com/darijgr"
}
```

I've added tests for exponential_specialization; I'm curious to hear what Sage thinks of them.

I haven't tested for removable singularities this time, since there aren't any (all denominators are unavoidable, although there is some occasional cancellation).



---

archive/issue_comments_115046.json:
```json
{
    "body": "PS. I have no idea why the trac merge is failing. Should we hit it with the rebase hammer?",
    "created_at": "2020-04-25T22:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115046",
    "user": "https://github.com/darijgr"
}
```

PS. I have no idea why the trac merge is failing. Should we hit it with the rebase hammer?



---

archive/issue_comments_115047.json:
```json
{
    "body": "There are a few failing tests.  I cannot correct them now, so I just paste them here:\n\n```\nFile \"src/sage/combinat/sf/sfa.py\", line 5739, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    (m[2,1]+m[1,1]).exponential_specialization(q=None)                                                                                                \nExpected:                                                                                                                                             \n    t**2 * (1 - q)/(1 + q)                                                                                                                            \nGot:                                                                                                                                                  \n    ((-2*q^3 + q^2 + q)/(q^3 + 2*q^2 + 2*q + 1))*t^3 + (q/(q + 1))*t^2                                                                                \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5742, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    (m[2,1]+m[1,1]).exponential_specialization(q=q)                                                                                                   \nExpected:                                                                                                                                             \n    t**2 * (1 - q)/(1 + q)                                                                                                                            \nGot:                                                                                                                                                  \n    ((-2*q^3 + q^2 + q)/(q^3 + 2*q^2 + 2*q + 1))*t^3 + (q/(q + 1))*t^2                                                                                \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5745, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    (m[2,1]+m[1,1]).exponential_specialization(t=t)                                                                                                   \nExpected:                                                                                                                                             \n    t**2 * (1 - q)/(1 + q)                                                                                                                            \nGot:                                                                                                                                                  \n    1/2*t^2                                                                                                                                           \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5748, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    (m[2,1]+m[1,1]).exponential_specialization(q=q, t=t)                                                                                              \nExpected:                                                                                                                                             \n    t**2 * (1 - q)/(1 + q)                                                                                                                            \nGot:                                                                                                                                                  \n    (-2*q^3*t^3 + q^3*t^2 + q^2*t^3 + q^2*t^2 + q*t^3 + q*t^2)/(q^3 + 2*q^2 + 2*q + 1)                                                                \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5787, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    set(b[lam].exponential_specialization(q=None).parent() for b in B for lam in lams)                                                                \nExpected:    \n    {Fraction Field of Univariate Polynomial Ring in t over                                                                                           \n      Univariate Polynomial Ring in q over Finite Field of size 3,                                                                                    \n     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q                                                                             \n      over Finite Field of size 3}                                                                                                                    \nGot:                                                                                                                                                  \n    {Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Finite Field of size 3,                              \n     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q over Finite Field of size 3}                                                \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5819, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    set(b[lam].exponential_specialization(q=q).parent() for b in B for lam in lams)                                                                   \nExpected:                                                                                                                                             \n    {Univariate Polynomial Ring in t over                                                                                                             \n     Univariate Polynomial Ring in q over Rational Field}                                                                                             \nGot:                                                                                                                                                  \n    {Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field,                                      \n     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q over Rational Field}                                                        \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5822, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    set(b[lam].exponential_specialization(q=q, t=1).parent() for b in B for lam in lams)                                                              \nExpected:                                                                                                                                             \n    {Univariate Polynomial Ring in q over Integer Ring}                                                                                               \nGot:                                                                                                                                                  \n    {Fraction Field of Univariate Polynomial Ring in q over Rational Field,                                                                           \n     Univariate Polynomial Ring in q over Rational Field}                                                                                             \n**********************************************************************                                                                                \n1 item had failures:                                                                                                                                  \n   7 of  46 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization                                               \n    [1155 tests, 7 failures, 4.81 s]                                                                       \n```\n",
    "created_at": "2020-04-26T07:20:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115047",
    "user": "https://github.com/mantepse"
}
```

There are a few failing tests.  I cannot correct them now, so I just paste them here:

```
File "src/sage/combinat/sf/sfa.py", line 5739, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    (m[2,1]+m[1,1]).exponential_specialization(q=None)                                                                                                
Expected:                                                                                                                                             
    t**2 * (1 - q)/(1 + q)                                                                                                                            
Got:                                                                                                                                                  
    ((-2*q^3 + q^2 + q)/(q^3 + 2*q^2 + 2*q + 1))*t^3 + (q/(q + 1))*t^2                                                                                
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5742, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    (m[2,1]+m[1,1]).exponential_specialization(q=q)                                                                                                   
Expected:                                                                                                                                             
    t**2 * (1 - q)/(1 + q)                                                                                                                            
Got:                                                                                                                                                  
    ((-2*q^3 + q^2 + q)/(q^3 + 2*q^2 + 2*q + 1))*t^3 + (q/(q + 1))*t^2                                                                                
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5745, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    (m[2,1]+m[1,1]).exponential_specialization(t=t)                                                                                                   
Expected:                                                                                                                                             
    t**2 * (1 - q)/(1 + q)                                                                                                                            
Got:                                                                                                                                                  
    1/2*t^2                                                                                                                                           
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5748, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    (m[2,1]+m[1,1]).exponential_specialization(q=q, t=t)                                                                                              
Expected:                                                                                                                                             
    t**2 * (1 - q)/(1 + q)                                                                                                                            
Got:                                                                                                                                                  
    (-2*q^3*t^3 + q^3*t^2 + q^2*t^3 + q^2*t^2 + q*t^3 + q*t^2)/(q^3 + 2*q^2 + 2*q + 1)                                                                
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5787, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    set(b[lam].exponential_specialization(q=None).parent() for b in B for lam in lams)                                                                
Expected:    
    {Fraction Field of Univariate Polynomial Ring in t over                                                                                           
      Univariate Polynomial Ring in q over Finite Field of size 3,                                                                                    
     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q                                                                             
      over Finite Field of size 3}                                                                                                                    
Got:                                                                                                                                                  
    {Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Finite Field of size 3,                              
     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q over Finite Field of size 3}                                                
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5819, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    set(b[lam].exponential_specialization(q=q).parent() for b in B for lam in lams)                                                                   
Expected:                                                                                                                                             
    {Univariate Polynomial Ring in t over                                                                                                             
     Univariate Polynomial Ring in q over Rational Field}                                                                                             
Got:                                                                                                                                                  
    {Univariate Polynomial Ring in t over Fraction Field of Univariate Polynomial Ring in q over Rational Field,                                      
     Univariate Polynomial Ring in t over Univariate Polynomial Ring in q over Rational Field}                                                        
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5822, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    set(b[lam].exponential_specialization(q=q, t=1).parent() for b in B for lam in lams)                                                              
Expected:                                                                                                                                             
    {Univariate Polynomial Ring in q over Integer Ring}                                                                                               
Got:                                                                                                                                                  
    {Fraction Field of Univariate Polynomial Ring in q over Rational Field,                                                                           
     Univariate Polynomial Ring in q over Rational Field}                                                                                             
**********************************************************************                                                                                
1 item had failures:                                                                                                                                  
   7 of  46 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization                                               
    [1155 tests, 7 failures, 4.81 s]                                                                       
```




---

archive/issue_comments_115048.json:
```json
{
    "body": "Oops -- all of these are my careless errors in the doctests. Can you try again after the next commit I'll push in a few seconds? Note that some results may be equivalent but in a different form.",
    "created_at": "2020-04-26T07:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115048",
    "user": "https://github.com/darijgr"
}
```

Oops -- all of these are my careless errors in the doctests. Can you try again after the next commit I'll push in a few seconds? Note that some results may be equivalent but in a different form.



---

archive/issue_comments_115049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-26T07:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115050.json:
```json
{
    "body": "Can we avoid the doctests outputting a set either by sorting or checking some other condition? Such tests have had a history of being fickle.",
    "created_at": "2020-04-26T07:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115050",
    "user": "https://github.com/tscrim"
}
```

Can we avoid the doctests outputting a set either by sorting or checking some other condition? Such tests have had a history of being fickle.



---

archive/issue_comments_115051.json:
```json
{
    "body": "Ouch. Yes, we can do sorted(str(...) for ...).",
    "created_at": "2020-04-26T07:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115051",
    "user": "https://github.com/darijgr"
}
```

Ouch. Yes, we can do sorted(str(...) for ...).



---

archive/issue_comments_115052.json:
```json
{
    "body": "\n```\nsage -t src/sage/combinat/sf/sfa.py                                                                                                                   \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5739, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    m[1,1].exponential_specialization(q=None)                                                                                                         \nExpected:                                                                                                                                             \n    1/2*t^2                                                                                                                                           \nGot:                                                                                                                                                  \n    (q/(q + 1))*t^2                                                                                                                                   \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5742, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    m[1,1].exponential_specialization(q=q)                                                                                                            \nExpected:                                                                                                                                             \n    t^2 * (1 - q)/(1 + q)                                                                                                                             \nGot:                                                                                                                                                  \n    (q/(q + 1))*t^2                                                                                                                                   \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5748, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    m[1,1].exponential_specialization(q=q, t=t)                                                                                                       \nExpected:                                                                                                                                             \n    t^2 * (1 - q)/(1 + q)                                                                                                                             \nGot:                                                                                                                                                  \n    q*t^2/(q + 1)                                                                                                                                     \n**********************************************************************                                                                                \nFile \"src/sage/combinat/sf/sfa.py\", line 5794, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            \nFailed example:                                                                                                                                       \n    set(b[lam].exponential_specialization(q=q2, t=t2).parent() for b in B for lam in lams)                                                            \nExpected:         \n    {Fraction Field of Multivariate Polynomial Ring in q, t over Finite Field of size 3,                                                              \n     Multivariate Polynomial Ring in q, t over Finite Field of size 3}                                                                                \nGot:                                                                                                                                                  \n    {Multivariate Polynomial Ring in q, t over Finite Field of size 3,                                                                                \n     Fraction Field of Multivariate Polynomial Ring in q, t over Finite Field of size 3}                                                              \n**********************************************************************                                                                                \n1 item had failures:                                                                                                                                  \n   4 of  46 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization                                               \n    [1155 tests, 4 failures, 4.96 s]                                                                                                                  \n----------------------------------------------------------------------                                                                                \nsage -t src/sage/combinat/sf/sfa.py  # 4 doctests failed                                                                                              \n----------------------------------------------------------------------                                                       \n```\n",
    "created_at": "2020-04-26T08:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115052",
    "user": "https://github.com/mantepse"
}
```


```
sage -t src/sage/combinat/sf/sfa.py                                                                                                                   
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5739, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    m[1,1].exponential_specialization(q=None)                                                                                                         
Expected:                                                                                                                                             
    1/2*t^2                                                                                                                                           
Got:                                                                                                                                                  
    (q/(q + 1))*t^2                                                                                                                                   
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5742, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    m[1,1].exponential_specialization(q=q)                                                                                                            
Expected:                                                                                                                                             
    t^2 * (1 - q)/(1 + q)                                                                                                                             
Got:                                                                                                                                                  
    (q/(q + 1))*t^2                                                                                                                                   
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5748, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    m[1,1].exponential_specialization(q=q, t=t)                                                                                                       
Expected:                                                                                                                                             
    t^2 * (1 - q)/(1 + q)                                                                                                                             
Got:                                                                                                                                                  
    q*t^2/(q + 1)                                                                                                                                     
**********************************************************************                                                                                
File "src/sage/combinat/sf/sfa.py", line 5794, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization            
Failed example:                                                                                                                                       
    set(b[lam].exponential_specialization(q=q2, t=t2).parent() for b in B for lam in lams)                                                            
Expected:         
    {Fraction Field of Multivariate Polynomial Ring in q, t over Finite Field of size 3,                                                              
     Multivariate Polynomial Ring in q, t over Finite Field of size 3}                                                                                
Got:                                                                                                                                                  
    {Multivariate Polynomial Ring in q, t over Finite Field of size 3,                                                                                
     Fraction Field of Multivariate Polynomial Ring in q, t over Finite Field of size 3}                                                              
**********************************************************************                                                                                
1 item had failures:                                                                                                                                  
   4 of  46 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.exponential_specialization                                               
    [1155 tests, 4 failures, 4.96 s]                                                                                                                  
----------------------------------------------------------------------                                                                                
sage -t src/sage/combinat/sf/sfa.py  # 4 doctests failed                                                                                              
----------------------------------------------------------------------                                                       
```




---

archive/issue_comments_115053.json:
```json
{
    "body": "Sage is right on all four counts here. Sorry again.",
    "created_at": "2020-04-26T10:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115053",
    "user": "https://github.com/darijgr"
}
```

Sage is right on all four counts here. Sorry again.



---

archive/issue_comments_115054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-26T10:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115055.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-04-26T10:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115055",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_115056.json:
```json
{
    "body": "I've fixed what I believe to be all issues, and rebased the entire branch on the newest develop. And yet the merge is still failing :( Any ideas?",
    "created_at": "2020-04-26T10:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115056",
    "user": "https://github.com/darijgr"
}
```

I've fixed what I believe to be all issues, and rebased the entire branch on the newest develop. And yet the merge is still failing :( Any ideas?



---

archive/issue_comments_115057.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-26T15:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115058.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-26T15:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115059.json:
```json
{
    "body": "Ignore the last two commits; I thought they'd fix the merge issue, but they didn't.\n\nAny news on the new doctests? If they work right, I'd declare positive review and let it sort itself out once rc2 is out.",
    "created_at": "2020-04-26T15:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115059",
    "user": "https://github.com/darijgr"
}
```

Ignore the last two commits; I thought they'd fix the merge issue, but they didn't.

Any news on the new doctests? If they work right, I'd declare positive review and let it sort itself out once rc2 is out.



---

archive/issue_comments_115060.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-04-26T18:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_115061.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-26T18:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115062.json:
```json
{
    "body": "Looks good to me!",
    "created_at": "2020-04-26T18:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115062",
    "user": "https://github.com/mantepse"
}
```

Looks good to me!



---

archive/issue_comments_115063.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-26T18:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115063",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_115064.json:
```json
{
    "body": "Thanks for the merge! Positive review then.",
    "created_at": "2020-04-26T18:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115064",
    "user": "https://github.com/darijgr"
}
```

Thanks for the merge! Positive review then.



---

archive/issue_comments_115065.json:
```json
{
    "body": "Incredible! 03/14/11 - 04/26/20",
    "created_at": "2020-04-26T18:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115065",
    "user": "https://github.com/mantepse"
}
```

Incredible! 03/14/11 - 04/26/20



---

archive/issue_comments_115066.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-04-28T02:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115066",
    "user": "https://github.com/kiwifb"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_115067.json:
```json
{
    "body": "Documentation doesn't build because in `sage/combinat/sfa.py` you have `[GriRei18_]` instead of `[GriRei18]_`.",
    "created_at": "2020-04-28T02:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115067",
    "user": "https://github.com/kiwifb"
}
```

Documentation doesn't build because in `sage/combinat/sfa.py` you have `[GriRei18_]` instead of `[GriRei18]_`.



---

archive/issue_comments_115068.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-28T03:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115068",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115069.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-04-28T03:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115069",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_115070.json:
```json
{
    "body": "Thanks, Francois and Matthias!",
    "created_at": "2020-04-28T07:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115070",
    "user": "https://github.com/darijgr"
}
```

Thanks, Francois and Matthias!



---

archive/issue_comments_115071.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-05-02T23:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115071",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_115072.json:
```json
{
    "body": "PDF docs don't build",
    "created_at": "2020-05-02T23:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115072",
    "user": "https://github.com/vbraun"
}
```

PDF docs don't build



---

archive/issue_comments_115073.json:
```json
{
    "body": "Log? I can't run make on cygwin right now.",
    "created_at": "2020-05-03T09:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115073",
    "user": "https://github.com/darijgr"
}
```

Log? I can't run make on cygwin right now.



---

archive/issue_comments_115074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-05-03T09:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_115075.json:
```json
{
    "body": "Found it! Am pushing with force since I've once again rebased the entire branch (with my new commit as second-to-last and Matthias's as last).\n----\nLast 10 new commits:",
    "created_at": "2020-05-03T09:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115075",
    "user": "https://github.com/darijgr"
}
```

Found it! Am pushing with force since I've once again rebased the entire branch (with my new commit as second-to-last and Matthias's as last).
----
Last 10 new commits:



---

archive/issue_comments_115076.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-05-03T09:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115076",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_115077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-31T08:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-115077",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_010969.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2020-05-31T08:48:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10852#event-10969"
}
```
