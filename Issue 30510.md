# Issue 30510: Deprecate all of sage.misc.package except for PackageNotFoundError

Issue created by migration from https://trac.sagemath.org/ticket/30747

Original creator: mkoeppe

Original creation time: 2020-10-08 17:13:56

CC:  arojas jhpalmieri fbissey isuruf

We move `is_package_installed` etc. to `sage_setup`, leaving deprecated `lazy_import`s behind.

We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).

We move `src/bin/sage-list-packages` to `build/bin`. It is only used in `build/bin/sage-site` (to implement `sage --installed` etc.) and not documented individually as a script.


---

Comment by mkoeppe created at 2020-11-07 18:37:51

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-11-07 18:37:51

Changing priority from major to minor.


---

Comment by mkoeppe created at 2020-11-07 18:37:51

New commits:


---

Comment by git created at 2020-11-20 23:53:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2020-11-21 20:54:13

Looks okay to me.


---

Comment by mkoeppe created at 2020-11-25 20:06:54

positive review?


---

Comment by jhpalmieri created at 2020-11-25 21:20:08

Yes, sorry.


---

Comment by jhpalmieri created at 2020-11-25 21:20:08

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-11-25 21:36:05

Thanks!


---

Comment by vbraun created at 2020-12-06 12:49:05

Resolution: fixed


---

Comment by chapoton created at 2020-12-17 07:56:08

the doctests in misc/package are sometimes failing, see

https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short

which is running sage with python 3.9


---

Comment by mkoeppe created at 2020-12-18 01:02:53

Replying to [comment:16 chapoton]:
> the doctests in misc/package are sometimes failing, see
> 
> https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short

As part of #30940, some of these doctests are made less strict so that they work better in incremental builds that have some old packages still installed. - Needs review
