# Issue 30510: Deprecate all of sage.misc.package except for PackageNotFoundError

archive/issues_030510.json:
```json
{
    "body": "CC:  arojas jhpalmieri fbissey isuruf\n\nWe move `is_package_installed` etc. to `sage_setup`, leaving deprecated `lazy_import`s behind.\n\nWe keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).\n\nWe move `src/bin/sage-list-packages` to `build/bin`. It is only used in `build/bin/sage-site` (to implement `sage --installed` etc.) and not documented individually as a script.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30747\n\n",
    "created_at": "2020-10-08T17:13:56Z",
    "labels": [
        "refactoring",
        "major",
        "enhancement"
    ],
    "title": "Deprecate all of sage.misc.package except for PackageNotFoundError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30510",
    "user": "mkoeppe"
}
```
CC:  arojas jhpalmieri fbissey isuruf

We move `is_package_installed` etc. to `sage_setup`, leaving deprecated `lazy_import`s behind.

We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).

We move `src/bin/sage-list-packages` to `build/bin`. It is only used in `build/bin/sage-site` (to implement `sage --installed` etc.) and not documented individually as a script.

Issue created by migration from https://trac.sagemath.org/ticket/30747





---

archive/issue_comments_435541.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435541",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_435542.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435542",
    "user": "mkoeppe"
}
```

Changing priority from major to minor.



---

archive/issue_comments_435543.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435543",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_435544.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-20T23:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435544",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_435545.json:
```json
{
    "body": "Looks okay to me.",
    "created_at": "2020-11-21T20:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435545",
    "user": "jhpalmieri"
}
```

Looks okay to me.



---

archive/issue_comments_435546.json:
```json
{
    "body": "positive review?",
    "created_at": "2020-11-25T20:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435546",
    "user": "mkoeppe"
}
```

positive review?



---

archive/issue_comments_435547.json:
```json
{
    "body": "Yes, sorry.",
    "created_at": "2020-11-25T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435547",
    "user": "jhpalmieri"
}
```

Yes, sorry.



---

archive/issue_comments_435548.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435548",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_435549.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-11-25T21:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435549",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_435550.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-06T12:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435550",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_435551.json:
```json
{
    "body": "the doctests in misc/package are sometimes failing, see\n\nhttps://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short\n\nwhich is running sage with python 3.9",
    "created_at": "2020-12-17T07:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435551",
    "user": "chapoton"
}
```

the doctests in misc/package are sometimes failing, see

https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short

which is running sage with python 3.9



---

archive/issue_comments_435552.json:
```json
{
    "body": "Replying to [comment:16 chapoton]:\n> the doctests in misc/package are sometimes failing, see\n> \n> https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short\n\nAs part of #30940, some of these doctests are made less strict so that they work better in incremental builds that have some old packages still installed. - Needs review",
    "created_at": "2020-12-18T01:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30510#issuecomment-435552",
    "user": "mkoeppe"
}
```

Replying to [comment:16 chapoton]:
> the doctests in misc/package are sometimes failing, see
> 
> https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short

As part of #30940, some of these doctests are made less strict so that they work better in incremental builds that have some old packages still installed. - Needs review
