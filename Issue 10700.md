# Issue 10700: Cleanup cython warnings

Issue created by migration from https://trac.sagemath.org/ticket/10764

Original creator: robertwb

Original creation time: 2011-02-10 03:16:36

Assignee: GeorgSWeber

See, e.g. the list of warnings at #10493.


---

Comment by fbissey created at 2011-02-16 09:36:00

I am starting the work by fixing the deprecation warnings. One of the easy bits :)


---

Comment by fbissey created at 2011-03-13 22:47:45

I hadn't mentioned these in #10493 I assume we want to fix them as well:

```
warning: sage/gsl/fft.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/gsl/gsl_array.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/modular/modsym/p1list.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/modules/free_module_element.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/modules/free_module_element.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/laurent_series_ring_element.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polydict.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_gf2x.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_zmod_flint.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_element.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_integer_dense_ntl.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_zz_pex.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_integer_dense_flint.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_modn_dense_ntl.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_modn_dense_ntl.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_modn_dense_ntl.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/structure/parent.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
warning: sage/rings/polynomial/polynomial_rational_flint.pyx:1:0: __getslice__, __setslice__, and __delslice__ are not supported by Python 3, use __getitem__, __setitem__, and __delitem__ instead
```



---

Comment by fbissey created at 2011-03-14 02:36:42

I am looking at gsl/fft.pyx and some of the code is strange

```
    def __getitem__(self, size_t i):
        if i < 0 or i >= self.n:
            raise IndexError
        cdef int j
        j = 2*i
        return self.data[2*i], self.data[2*i+1]

    def __getslice__(self, Py_ssize_t i, Py_ssize_t j):
        # Todo -- make this actually fast.
        return list(self)[i:j]
```

There is already a getitem, I don't think it would work with slices. But getitem and getslice look very different. One asks for size_t while the other asks for Py_ssize_t I assume one is deprecated. The code in getitem is very strange. j is declared, computed and never used, the code also return something different from you would naively expect. None of this seem to ever be called from anywhere else in sage.


---

Comment by fbissey created at 2011-05-02 03:34:05

The warning in sage/combinat/combinat_cython.pyx has been fixed as a side effect of #10258. Updated patch coming shortly.


---

Comment by fbissey created at 2011-05-02 03:35:38

Fix deprecation warnings (updated after #10258)


---

Attachment

previous patch broke a doctest in gen_interpreters.py.


---

Attachment

The patch attached to #12041 should fix some warnings.


---

Comment by aapitzsch created at 2011-12-04 22:42:09

Replying to [comment:5 aapitzsch]:
> The patch attached to #12041 should fix some warnings.
#12093 fixes the remaining ones. See also #12119.


---

Comment by aapitzsch created at 2012-04-06 17:56:19

The other deprecation warnings are fixed, so this ticket can be reviewed.


---

Comment by aapitzsch created at 2012-04-06 17:56:19

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2012-04-06 18:00:22

Changing status from needs_review to needs_work.


---

Comment by aapitzsch created at 2012-04-06 18:00:22

Please rebase to current beta.


---

Attachment


---

Comment by aapitzsch created at 2012-06-24 14:23:28

Changing status from needs_work to needs_review.


---

Comment by aapitzsch created at 2012-06-24 14:30:31

patchbot: apply trac_10764.patch


---

Comment by fbissey created at 2012-06-25 09:29:43

sorry to have been out of touch. I assume your patch is a rebase of my 2 patches, correct?


---

Comment by aapitzsch created at 2012-06-25 09:48:40

Replying to [comment:11 fbissey]:
> sorry to have been out of touch. I assume your patch is a rebase of my 2 patches, correct?
Yes. Additionally I removed some trailing white spaces.


---

Comment by fbissey created at 2012-06-26 10:30:58

I am putting this to positive review. I guess we agree on what needs doing and that it doesn't have side effects.


---

Comment by fbissey created at 2012-06-26 10:30:58

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-07-02 15:21:21

Resolution: fixed
