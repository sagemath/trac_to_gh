# Issue 24843: code for Cartesian factorization of posets

Issue created by migration from https://trac.sagemath.org/ticket/25080

Original creator: chapoton

Original creation time: 2018-04-02 15:34:36

CC:  jmantysalo

as a very useful tool to have


---

Comment by chapoton created at 2018-04-02 15:35:57

New commits:


---

Comment by chapoton created at 2018-04-02 15:35:57

Changing status from new to needs_review.


---

Comment by git created at 2018-04-02 16:01:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-04-02 17:58:41

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2018-04-02 17:58:41

Fails with disconnected posets, see `posets.AntichainPoset(4).factorize()`. Works with the empty poset, but a test for the corner case would be nice.

Maybe this is the best name for this function; however, what will be the name for the converse of ordinal product?

I think that a factor of a lattice is always a lattice. Or is it? Got to think about this later.

E: Also, a test where the underlying undirected graph can be factorized, but the poset can not, would be nice.


---

Comment by jmantysalo created at 2018-04-02 18:04:04

Wrong indentation in the reference, i.e. may break Sphinx.


---

Comment by git created at 2018-04-02 19:00:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-04-02 19:20:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-04-02 19:45:01

Thanks for the comments, Jori.

For the name, my favorite choice would be just "factor". Other possibilies are "factor_cartesian" and "factor_ordinal" ; or maybe "cartesian_factor" and "ordinal_factor".

For the lattice property, I think this holds for the factors, and the same for MeetSemiLattice, etc. But I do not feel any need for that.


---

Comment by jmantysalo created at 2018-04-03 04:19:56

See http://www.phy.olemiss.edu/~luca/Topics/p/poset_types.html: "Prime poset: One such that all its autonomous subsets are trivial." Is this the same concept with different words? If not, should that be mentioned in `OUTPUT` section?

Maybe "factor" or "factorize" is good, as also plain "product" means the Cartesian product.

Is it really a `ValueError` to run this with unconnected posets? IMO it should be seen as a missing implementation, as an unconnected poset can be a Cartesian product of two posets.


---

Comment by jmantysalo created at 2018-04-03 06:00:00

Error in seealso-link, cartesian_product() should be product().

Also there is now two seealso-blocks in product(), and it seems a little strange.


---

Comment by git created at 2018-04-03 06:29:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-04-03 06:31:25

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-04-03 06:31:25

All done.

There remains, maybe, the question of using `LatticePoset` for the factors when handling products of lattices.


---

Comment by jmantysalo created at 2018-04-03 06:36:45

Thanks. Now, to the code. When is `if A1 != B1:` evaluated as true? I guess you have implemented an algorithm to factor general digraph, and for poset you don't need all of that.


---

Comment by chapoton created at 2018-04-03 07:01:25

The idea is to check that every little square is a commutative square. There are certainly better ways than what I did quickly. The `A1 != B1` test is meant to check that parallel arrows in one square go the same way.

The algorithm would possibly work for simple digraphs with no 2-cycles. Given this restricted domain, I think it is best to keep it here for the moment.


---

Comment by jmantysalo created at 2018-04-03 07:42:30

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2018-04-03 07:42:30

OK, I'll mark this as positive review. (Change milestone when 8.3 is available.)

I don't see how there could be parallel arrows when the graph is the Hasse diagram of some poset. However, almost all the time is spent in factoring undirected graph, so this makes no real difference.

Output type for lattices can be changed later.

There are some shortcuts that could be used: for example the numbers of minimal elements must not be a prime. Also the number of edges in the Hasse diagram can show that a poset can't be a Cartesian product etc. However, all this can also be added later.


---

Comment by vbraun created at 2018-05-12 11:46:31

Resolution: fixed
