# Issue 23288: implement is_squarefree for p-adic rings

Issue created by migration from https://trac.sagemath.org/ticket/23525

Original creator: saraedum

Original creation time: 2017-07-23 09:01:58

CC:  roed

Currently, this does not work

```
sage: R.<a> = ZqFM(9)
sage: a.is_squarefree()
AttributeError
```



---

Comment by saraedum created at 2017-07-27 23:49:19

I did not run any doctests yet (still rebuilding sage.)
----
New commits:


---

Comment by saraedum created at 2017-07-27 23:49:19

Changing status from new to needs_review.


---

Comment by roed created at 2017-07-28 02:25:16

Maybe we should just raise a `TypeError` for fields?  `QQ` and number fields don't define an `is_squarefree` method (though elements of orders don't either).  This may be another case where we can return a technically correct answer but it's most likely not what the user was expecting.


---

Comment by saraedum created at 2017-07-28 03:34:14

I think it makes sense to return mathematically correct answers even if they are trivial. It means that you can write algorithms without checking for trivial cases. E.g., we do this already to determine whether a polynomial is squarefree: first we check whether it's content is squarefree. A trivial check over fields, but still the correct thing to do. So currently we need to protect this check with a `self.base_ring() in Fields()` to work around the fact that `Fields.ElementMethods` does not implement `is_squarefree()` [which it imho should.]


---

Comment by saraedum created at 2017-07-28 03:39:49

PS: I think it really depends on who are you writing code for. Beginners will be surprised that

```
sage: x = 8/2; x
4
sage: x.is_squarefree()
True
```

but eventually you are going to learn that parents are very important in Sageâ€¦


---

Comment by git created at 2017-08-03 16:52:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2017-08-03 17:39:30

Okay, we had some more discussion on IRC and I'm fine with this now.  Positive review once tests pass.


---

Comment by roed created at 2017-08-04 03:41:25

The only failure is the intermittent

```
sage -t --long src/sage/rings/fraction_field_FpT.pyx  # 3 doctests failed
```

which is already addressed by #23554.


---

Comment by roed created at 2017-08-04 03:41:25

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-05 23:27:17

Resolution: fixed
