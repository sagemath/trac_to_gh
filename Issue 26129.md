# Issue 26129: Polyhedron - lazy backend; minimal vs. non-minimal presentations

archive/issues_026129.json:
```json
{
    "body": "CC:  @jplab @seblabbe @kliem @yuan-zhou\n\nSometimes it is convenient to set up a polytope without triggering the computation of the full (minimal) double description. \nCurrently, `Polyhedron` does not support this; one either needs to work with lists of vertices or lists of inequalities; for an H-representation going through `MixedIntegerLinearProgram` is another option.\n\nA \"lazy\" backend for `Polyhedron` could be considered. \nBut there are open questions regarding the possible design. All `Polyhedron` methods currently guarantee minimal representations. This is reflected also in the names of methods for accessing the V-represenation, such as `vertex_generator`; but not in those for the H-representation (`inequality_generator`). (Note the `minimize` argument is unused in the whole `Polyhedron` code.) Compare with polymake, which has a clear distinction between minimal and non-minimal presentations (VERTICES vs. POINTS).\n\nIssue created by migration from https://trac.sagemath.org/ticket/26366\n\n",
    "created_at": "2018-09-30T08:57:03Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Polyhedron - lazy backend; minimal vs. non-minimal presentations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26129",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jplab @seblabbe @kliem @yuan-zhou

Sometimes it is convenient to set up a polytope without triggering the computation of the full (minimal) double description. 
Currently, `Polyhedron` does not support this; one either needs to work with lists of vertices or lists of inequalities; for an H-representation going through `MixedIntegerLinearProgram` is another option.

A "lazy" backend for `Polyhedron` could be considered. 
But there are open questions regarding the possible design. All `Polyhedron` methods currently guarantee minimal representations. This is reflected also in the names of methods for accessing the V-represenation, such as `vertex_generator`; but not in those for the H-representation (`inequality_generator`). (Note the `minimize` argument is unused in the whole `Polyhedron` code.) Compare with polymake, which has a clear distinction between minimal and non-minimal presentations (VERTICES vs. POINTS).

Issue created by migration from https://trac.sagemath.org/ticket/26366





---

archive/issue_comments_368000.json:
```json
{
    "body": "Here is just a note about constructing from both V- and H- representation:\n\nThe method `as_polyhedron` of `PolyhedronFaces` would benefit greatly from this, so perhaps as a follow-up or on this ticket.",
    "created_at": "2019-06-12T08:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26129#issuecomment-368000",
    "user": "https://github.com/jplab"
}
```

Here is just a note about constructing from both V- and H- representation:

The method `as_polyhedron` of `PolyhedronFaces` would benefit greatly from this, so perhaps as a follow-up or on this ticket.



---

archive/issue_events_065586.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-26T05:50:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65586"
}
```



---

archive/issue_comments_368001.json:
```json
{
    "body": "This is an early draft, with the purpose of supporting #31799. Comments and improvements to the design are very welcome.\n\nOne thing needed for #31799 is finding the parent early - then, for parents that implement init from both representations, one could efficiently compute the double description before calling the element constructor.\n\n---\nNew commits:",
    "created_at": "2021-05-27T19:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26129#issuecomment-368001",
    "user": "https://github.com/mkoeppe"
}
```

This is an early draft, with the purpose of supporting #31799. Comments and improvements to the design are very welcome.

One thing needed for #31799 is finding the parent early - then, for parents that implement init from both representations, one could efficiently compute the double description before calling the element constructor.

---
New commits:



---

archive/issue_events_065587.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65587"
}
```



---

archive/issue_events_065588.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65588"
}
```



---

archive/issue_events_065589.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65589"
}
```



---

archive/issue_events_065590.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65590"
}
```



---

archive/issue_events_065591.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65591"
}
```



---

archive/issue_events_065592.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65592"
}
```



---

archive/issue_comments_368002.json:
```json
{
    "body": "What is the status here?\n\nI think the minimal/non-minimal issue should really be fixed. In a way, it is only relevant for `Polyhedron_mutual`. If the backend doesn't allow modification, then what is the point in being lazy?\n\nI really don't know what name choices what make sense and involve little deprecation.\nDo we need anything but minimal representation? For the input sure, but once you are asking for `Vrepresentation` or `Hrepresentation` or `inequalities`, you usually want something minimal. But then again, if I construct `P` and `Q` only to compute their intersection, I don't care about the minimal inequalities in many cases.",
    "created_at": "2022-04-15T12:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26129#issuecomment-368002",
    "user": "https://github.com/kliem"
}
```

What is the status here?

I think the minimal/non-minimal issue should really be fixed. In a way, it is only relevant for `Polyhedron_mutual`. If the backend doesn't allow modification, then what is the point in being lazy?

I really don't know what name choices what make sense and involve little deprecation.
Do we need anything but minimal representation? For the input sure, but once you are asking for `Vrepresentation` or `Hrepresentation` or `inequalities`, you usually want something minimal. But then again, if I construct `P` and `Q` only to compute their intersection, I don't care about the minimal inequalities in many cases.



---

archive/issue_events_065593.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65593"
}
```



---

archive/issue_events_065594.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26129",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26129#event-65594"
}
```
