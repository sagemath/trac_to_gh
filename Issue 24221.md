# Issue 24221: more useful real lazy field

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2018-01-01 18:45:04

CC:  rws tmonteil

Currently, the real lazy field (`sage.rings.real_lazy`) is a toy model of the set of computable numbers. This ticket
- rename `RealLazyField` to `RealComputableField`
- make it possible to create a lazy number from a digit expansion (as it is the case with continued fraction)
- raise a `ArithmeticError` in element comparisons when the precision is not enough (though for equality, we should rely on subsets such as `AA` where the equality is decidable)
- set most real constants as elements of this field (pi, e, etc)

This revived `RealComputableField` will have
- coercion _from_ all exact real fields (ZZ, QQ, AA)
- coercion _to_ all approximations (floating point (mpfr), ball (arb), interval (mpir))


---

Comment by tmonteil created at 2018-01-05 02:24:38

Regarding `RealLazyField`, its main use is not for end-users, but as a transitional field between exact representations and numerical ones, mostly and internal stuff. So i guess it will be simpler to define the computable real field independently, in the mathematical way, without the 	embarrassment of backward compatibility (and possibly merge both representations if RLF is of no use). Note that currently the mechanism of RLF is a `_value` attribute containing an exact representation, not an algorithm producing the digits, so they are much less numbers there, and the arithmetic operations are not handled at the approximation level (as it is for real computable numbers).

Regarding symbolic `pi`, `e`, etc, this is not a matter of display only: the computable numbers are given by a program giving approximation to any precision. In this field, `cos(pi)` will be between -1.0000···01 and -0.9999999···99, but we want Sage to know that `cos(pi)` is exactly `-1`. I agree that those numbers should be moved out of the giant `SR`, but there should be yet another intermediate field between algebraics and computable numbers for such symbolic numbers, because they are exact, and they carry some knowledge that is beyond computable approximability.

Note that there exist low-level libraries for dealing with (genuine) computable numbers. However, the last time i had a look, they seemed not maintained. It could be worth to have a look again (they might still be of good quality).

See also #17713 for a discussion about that (search for "RCF").
