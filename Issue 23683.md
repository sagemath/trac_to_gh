# Issue 23683: py3: richcmp for ideals of multivariate polynomials

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-09-22 13:02:47

CC:  tscrim jdemeyer jhpalmieri aapitzsch fbissey

split off from #23787

refactoring of the comparison of ideals in multivariate polynomials

* to get rid of cmp
* consistent comparison by containment
* when a total order is needed, compare instead by gens


---

Comment by chapoton created at 2017-09-22 13:03:55

New commits:


---

Comment by git created at 2017-09-22 14:03:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-09-22 19:55:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-09-23 06:18:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-09-23 06:25:55

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-09-23 06:25:55

This should be ready to go. This refactors the comparison of ideals in multi-variate polynomial rings. Comparison is now meaning "for containment" in all cases.

Besides, it tries to avoid computing Grobner bases, by first comparing the generators.

Please review.


---

Comment by chapoton created at 2017-09-23 09:18:06

green bot!


---

Comment by chapoton created at 2017-09-24 20:14:58

now this is going to conflict with #23814


---

Comment by chapoton created at 2017-09-28 07:30:53

Could someone please review this? there should be no real conflict with #23814.


---

Comment by tscrim created at 2017-09-28 15:59:38

Rather than comparing gens as a list, I would compare them as sets. That way, reordering of gens doesn't require a GB computation, e.g.:

```
sage: R.<x,y> = ZZ[]
sage: I = R.ideal([x^2, x*y - y^2 + 2])
sage: Ip = R.ideal([x*y - y^2 + 2, x^2])
sage: I.gens()
[x^2, x*y - y^2 + 2]
sage: Ip.gens()
[x*y - y^2 + 2, x^2]
sage: I == Ip   # Avoid GB here
True
```


Also, what is the rationale for this change:

```diff
`@``@` -532,8 +529,13 `@``@` class SchemeMorphism_polynomial_affine_space(SchemeMorphism_polynomial):
 
         #homogenize the domain and codomain
         A = self.domain().projective_embedding(ind[0]).codomain()
-        B = self.codomain().projective_embedding(ind[1]).codomain()
-        H = Hom(A, B)
+        if self.is_endomorphism():
+            B = A
+            H = End(A)
+        else:
+            B = self.codomain().projective_embedding(ind[1]).codomain()
+            H = Hom(A, B)
+
         newvar = A.ambient_space().coordinate_ring().gen(ind[0])
 
         N = A.ambient_space().dimension_relative()
```



---

Comment by git created at 2017-09-29 09:08:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-09-29 12:04:01

* I have modifed the comparison to use sets of gens.

* The changes in scheme_morphisms and dynamical systems could probably be made independently now, even if at some point they were intertwined with the main issue here.

* the precise change you talk about was made so that one could replace comparison of domains (in dynamical systems) with a call to is_endomorphism.


---

Comment by tscrim created at 2017-09-29 15:13:22

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-09-29 15:13:22

Okay. LGTM. Thanks.


---

Comment by vbraun created at 2017-10-01 00:18:52

Resolution: fixed
