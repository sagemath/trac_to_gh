# Issue 26686: sagenb docs fail to build

archive/issues_026449.json:
```json
{
    "assignees": [],
    "body": "Building sage in a clean environment with `make distclean && make`, fails on building the documentation for `sagenb`:\n\n```\nRunning Sphinx v1.7.6\nmaking output directory...\nloading pickled environment... not yet created\nbuilding [mo]: targets for 0 po files that are out of date\nbuilding [html]: targets for 19 source files that are out of date\nupdating environment: 19 added, 0 changed, 0 removed\nreading sources... [  5%] index\nreading sources... [ 10%] misc/introspect\nreading sources... [ 15%] misc/misc\n\nException occurred:\n  File \"sage/misc/lazy_import.pyx\", line 218, in sage.misc.lazy_import.LazyImport._\nget_object (build/cythonized/sage/misc/lazy_import.c:2412)\n    raise RuntimeError(f\"resolving lazy import {self._name} during startup\")\nRuntimeError: resolving lazy import dumps during startup\nThe full traceback has been saved in /tmp/sphinx-err-k0V6v7.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\nmake[4]: *** [Makefile:20: html] Error 2\nmake[4]: Leaving directory '/home/sage/sage-8.4/local/var/tmp/sage/build/sagenb-1.1.1/src/doc'\n```\n\n`make distclean && make sagenb && make` succeeds.\n\nInstalling all the dependencies of `sagelib` before `sagenb` with\n`make distclean && make arb boost_cropped brial bzip2 cddlib cliquer cypari cysignals cython decorator docutils ecl eclib ecm enum34 fflas_ffpack flint fplll freetype gap gc gf2x giac givaro glpk gsl iconv iml ipython_genutils jinja2 jupyter_core lcalc libatomic_ops libbraiding libgap libgd libhomfly libpng linbox lrcalc m4ri m4rie markupsafe mpc mpfi mpfr mpir ncurses ntl numpy openblas pari pari_galdata pari_seadata_small pip pkgconf pkgconfig planarity ppl pycygwin pynac python2 python3 ratpoints readline rw setuptools singular six sqlite symmetrica traitlets xz yasm zlib zn_poly && make sagenb` succeeds.\n\n`make distclean && make sagelib && make sagenb` fails.\n\nThe problem seems to occur if `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.\n\nKeywords: **sagenb**\n\nBranch: **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Konrad K. Dabrowski**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26686_\n\n",
    "closed_at": "2018-11-15T22:57:34Z",
    "created_at": "2018-11-12T17:12:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sagenb docs fail to build",
    "type": "issue",
    "updated_at": "2019-02-11T21:43:16Z",
    "url": "https://github.com/sagemath/sage/issues/26686",
    "user": "https://github.com/Konrad127123"
}
```
Building sage in a clean environment with `make distclean && make`, fails on building the documentation for `sagenb`:

```
Running Sphinx v1.7.6
making output directory...
loading pickled environment... not yet created
building [mo]: targets for 0 po files that are out of date
building [html]: targets for 19 source files that are out of date
updating environment: 19 added, 0 changed, 0 removed
reading sources... [  5%] index
reading sources... [ 10%] misc/introspect
reading sources... [ 15%] misc/misc

Exception occurred:
  File "sage/misc/lazy_import.pyx", line 218, in sage.misc.lazy_import.LazyImport._
get_object (build/cythonized/sage/misc/lazy_import.c:2412)
    raise RuntimeError(f"resolving lazy import {self._name} during startup")
RuntimeError: resolving lazy import dumps during startup
The full traceback has been saved in /tmp/sphinx-err-k0V6v7.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
make[4]: *** [Makefile:20: html] Error 2
make[4]: Leaving directory '/home/sage/sage-8.4/local/var/tmp/sage/build/sagenb-1.1.1/src/doc'
```

`make distclean && make sagenb && make` succeeds.

Installing all the dependencies of `sagelib` before `sagenb` with
`make distclean && make arb boost_cropped brial bzip2 cddlib cliquer cypari cysignals cython decorator docutils ecl eclib ecm enum34 fflas_ffpack flint fplll freetype gap gc gf2x giac givaro glpk gsl iconv iml ipython_genutils jinja2 jupyter_core lcalc libatomic_ops libbraiding libgap libgd libhomfly libpng linbox lrcalc m4ri m4rie markupsafe mpc mpfi mpfr mpir ncurses ntl numpy openblas pari pari_galdata pari_seadata_small pip pkgconf pkgconfig planarity ppl pycygwin pynac python2 python3 ratpoints readline rw setuptools singular six sqlite symmetrica traitlets xz yasm zlib zn_poly && make sagenb` succeeds.

`make distclean && make sagelib && make sagenb` fails.

The problem seems to occur if `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.

Keywords: **sagenb**

Branch: **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**

Reviewer: **Dima Pasechnik**

Author: **Konrad K. Dabrowski**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/26686_





---

archive/issue_events_367075.json:
```json
{
    "actor": "https://github.com/Konrad127123",
    "created_at": "2018-11-12T17:12:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367075"
}
```



---

archive/issue_events_367076.json:
```json
{
    "actor": "https://github.com/Konrad127123",
    "created_at": "2018-11-12T17:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367076"
}
```



---

archive/issue_events_367077.json:
```json
{
    "actor": "https://github.com/Konrad127123",
    "created_at": "2018-11-12T17:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367077"
}
```



---

archive/issue_events_367078.json:
```json
{
    "actor": "https://github.com/Konrad127123",
    "created_at": "2018-11-12T17:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367078"
}
```



---

archive/issue_comments_411227.json:
```json
{
    "body": "Branch: **[u/Konrad127123/sagenb_docs_fail_to_build](https://github.com/sagemath/sagetrac-mirror/tree/u/Konrad127123/sagenb_docs_fail_to_build)**",
    "created_at": "2018-11-12T17:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411227",
    "user": "https://github.com/Konrad127123"
}
```

Branch: **[u/Konrad127123/sagenb_docs_fail_to_build](https://github.com/sagemath/sagetrac-mirror/tree/u/Konrad127123/sagenb_docs_fail_to_build)**



---

archive/issue_comments_411228.json:
```json
{
    "body": "Commit: **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**",
    "created_at": "2018-11-12T17:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411228",
    "user": "https://github.com/Konrad127123"
}
```

Commit: **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**



---

archive/issue_comments_411229.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,4 +30,4 @@\n \n `make distclean && make sagelib && make sagenb` fails.\n \n-The problem seems to be occur `sagenb` is built after `sagelib`, but before $(SAGERUNTIME).\n+The problem seems to be occur `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.\n``````\n",
    "created_at": "2018-11-12T17:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411229",
    "user": "https://github.com/Konrad127123"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,4 +30,4 @@
 
 `make distclean && make sagelib && make sagenb` fails.
 
-The problem seems to be occur `sagenb` is built after `sagelib`, but before $(SAGERUNTIME).
+The problem seems to be occur `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.
``````




---

archive/issue_events_367079.json:
```json
{
    "actor": "https://github.com/Konrad127123",
    "created_at": "2018-11-12T17:16:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367079"
}
```



---

archive/issue_comments_411230.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1\">a964c94</a></td><td><code>sagenb should depend on $(SAGERUNTIME)</code></td></tr></table>\n",
    "created_at": "2018-11-12T17:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411230",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1">a964c94</a></td><td><code>sagenb should depend on $(SAGERUNTIME)</code></td></tr></table>




---

archive/issue_comments_411231.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,4 +30,4 @@\n \n `make distclean && make sagelib && make sagenb` fails.\n \n-The problem seems to be occur `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.\n+The problem seems to occur if `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.\n``````\n",
    "created_at": "2018-11-12T17:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411231",
    "user": "https://github.com/Konrad127123"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,4 +30,4 @@
 
 `make distclean && make sagelib && make sagenb` fails.
 
-The problem seems to be occur `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.
+The problem seems to occur if `sagenb` is built after `sagelib`, but before `$(SAGERUNTIME)`.
``````




---

archive/issue_comments_411232.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAlso possibly worth noting: building all the packages that `sagenb` and `$(SAGERUNTIME)` depend on without actually building `$(SAGERUNTIME)` is not sufficient, so it looks like `$(SAGERUNTIME)` really is the minimal dependency that needs to be added.\n\ni.e. doing `make distclean && make alabaster appnope arb babel backports_abc backports_shutil_get_terminal_size backports_ssl_match_hostname boost_cropped brial bzip2 cddlib certifi cliquer cypari cysignals cython decorator docutils ecl eclib ecm enum34 fflas_ffpack flask flask_autoindex flask_babel flask_oldsessions flask_openid flask_silk flint fplll freetype future gap gc gf2x giac givaro glpk gsl iconv imagesize iml ipython ipython_genutils itsdangerous jinja2 jupyter_core lcalc libatomic_ops libbraiding libgap libgd libhomfly libpng linbox lrcalc m4ri m4rie markupsafe mathjax mpc mpfi mpfr mpir ncurses ntl numpy openblas packaging pari pari_galdata pari_seadata_small pathlib2 pathpy pexpect pickleshare pip pkgconf pkgconfig planarity ppl prompt_toolkit psutil ptyprocess pycygwin pygments pynac pyparsing python2 python3 python_openid pytz pyzmq ratpoints readline requests rw sagelib scandir setuptools setuptools_scm simplegeneric singledispatch singular six snowballstemmer speaklater sphinx sphinxcontrib_websupport sqlite symmetrica tornado traitlets twisted typing wcwidth werkzeug xz yasm zeromq zlib zn_poly zope_interface && make sagenb` still fails, although it fails slightly later:\n\n```\n[sagenb-1.1.1] Running Sphinx v1.7.6\n[sagenb-1.1.1] making output directory...\n[sagenb-1.1.1] loading pickled environment... not yet created\n[sagenb-1.1.1] building [mo]: targets for 0 po files that are out of date\n[sagenb-1.1.1] building [html]: targets for 19 source files that are out of date\n[sagenb-1.1.1] updating environment: 19 added, 0 changed, 0 removed\n[sagenb-1.1.1] reading sources... [  5%] index\n[sagenb-1.1.1] reading sources... [ 10%] misc/introspect\n[sagenb-1.1.1] reading sources... [ 15%] misc/misc\n[sagenb-1.1.1] reading sources... [ 21%] misc/sageinspect\n[sagenb-1.1.1] reading sources... [ 26%] misc/sphinxify\n[sagenb-1.1.1] reading sources... [ 31%] misc/support\n[sagenb-1.1.1] reading sources... [ 36%] notebook/cell\n[sagenb-1.1.1] reading sources... [ 42%] notebook/challenge\n[sagenb-1.1.1] reading sources... [ 47%] notebook/config\n[sagenb-1.1.1] reading sources... [ 52%] notebook/css\n[sagenb-1.1.1] reading sources... [ 57%] notebook/docHTMLProcessor\n[sagenb-1.1.1] reading sources... [ 63%] notebook/interact\n[sagenb-1.1.1] reading sources... [ 68%] notebook/js\n[sagenb-1.1.1] reading sources... [ 73%] notebook/notebook\n[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.introspect'; the following exception was raised:\n[sagenb-1.1.1] Traceback (most recent call last):\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py\", line 152, in import_module\n[sagenb-1.1.1]     __import__(modname)\n[sagenb-1.1.1]   File \"../sagenb/__init__.py\", line 3, in <module>\n[sagenb-1.1.1]     from . import storage\n[sagenb-1.1.1]   File \"../sagenb/storage/__init__.py\", line 3, in <module>\n[sagenb-1.1.1]     from .filesystem_storage import FilesystemDatastore\n[sagenb-1.1.1]   File \"../sagenb/storage/filesystem_storage.py\", line 52, in <module>\n[sagenb-1.1.1]     from sagenb.misc.misc import set_restrictive_permissions, encoded_str\n[sagenb-1.1.1]   File \"../sagenb/misc/misc.py\", line 216, in <module>\n[sagenb-1.1.1]     import sage.all\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/all.py\", line 83, in <module>\n[sagenb-1.1.1]     from sage.misc.all       import *         # takes a while\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/misc/all.py\", line 84, in <module>\n[sagenb-1.1.1]     from .functional import (additive_order,\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/misc/functional.py\", line 27, in <module>\n[sagenb-1.1.1]     from sage.rings.complex_double import CDF\n[sagenb-1.1.1]   File \"sage/rings/complex_double.pyx\", line 101, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24114)\n[sagenb-1.1.1]     cdef CC = ComplexField()\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/complex_field.py\", line 114, in ComplexField\n[sagenb-1.1.1]     C = ComplexField_class(prec)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/complex_field.py\", line 208, in __init__\n[sagenb-1.1.1]     self._populate_coercion_lists_(coerce_list=[RRtoCC(self._real_field(), self)])\n[sagenb-1.1.1]   File \"sage/rings/complex_number.pyx\", line 2580, in sage.rings.complex_number.RRtoCC.__init__ (build/cythonized/sage/rings/complex_number.c:21896)\n[sagenb-1.1.1]     Map.__init__(self, RR, CC)\n[sagenb-1.1.1]   File \"sage/categories/map.pyx\", line 125, in sage.categories.map.Map.__init__ (build/cythonized/sage/categories/map.c:3588)\n[sagenb-1.1.1]     parent = homset.Hom(parent, codomain)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/homset.py\", line 397, in Hom\n[sagenb-1.1.1]     H = Hom(X, Y, category, check=False)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/homset.py\", line 424, in Hom\n[sagenb-1.1.1]     H = X._Hom_(Y, category)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/rings.py\", line 361, in _Hom_\n[sagenb-1.1.1]     from sage.rings.homset import RingHomset\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/homset.py\", line 19, in <module>\n[sagenb-1.1.1]     from . import quotient_ring\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py\", line 116, in <module>\n[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 239, in <module>\n[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py\", line 24, in <module>\n[sagenb-1.1.1]     from .maxima import maxima, Maxima\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 1238, in <module>\n[sagenb-1.1.1]     script_subdirectory=None)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 529, in __init__\n[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')\n[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp\n[sagenb-1.1.1]\n[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.misc'; the following exception was raised:\n[sagenb-1.1.1] Traceback (most recent call last):\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py\", line 152, in import_module\n[sagenb-1.1.1]     __import__(modname)\n[sagenb-1.1.1]   File \"../sagenb/__init__.py\", line 3, in <module>\n[sagenb-1.1.1]     from . import storage\n[sagenb-1.1.1]   File \"../sagenb/storage/__init__.py\", line 3, in <module>\n[sagenb-1.1.1]     from .filesystem_storage import FilesystemDatastore\n[sagenb-1.1.1]   File \"../sagenb/storage/filesystem_storage.py\", line 52, in <module>\n[sagenb-1.1.1]     from sagenb.misc.misc import set_restrictive_permissions, encoded_str\n[sagenb-1.1.1]   File \"../sagenb/misc/misc.py\", line 352, in <module>\n[sagenb-1.1.1]     from sage.plot.colors import Color\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/__init__.py\", line 2, in <module>\n[sagenb-1.1.1]     from . import all\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/all.py\", line 3, in <module>\n[sagenb-1.1.1]     from .plot import plot, graphics_array, list_plot, parametric_plot, polar_plot\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py\", line 577, in <module>\n[sagenb-1.1.1]     from sage.ext.fast_eval import fast_float, is_fast_float\n[sagenb-1.1.1]   File \"sage/ext/fast_eval.pyx\", line 93, in init sage.ext.fast_eval (build/cythonized/sage/ext/fast_eval.c:14529)\n[sagenb-1.1.1]     from sage.ext.fast_callable import fast_callable, Wrapper\n[sagenb-1.1.1]   File \"sage/ext/fast_callable.pyx\", line 308, in init sage.ext.fast_callable (build/cythonized/sage/ext/fast_callable.c:20784)\n[sagenb-1.1.1]     from sage.rings.all import RDF, CDF\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/all.py\", line 31, in <module>\n[sagenb-1.1.1]     from .quotient_ring import QuotientRing\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py\", line 116, in <module>\n[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 239, in <module>\n[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py\", line 24, in <module>\n[sagenb-1.1.1]     from .maxima import maxima, Maxima\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 1238, in <module>\n[sagenb-1.1.1]     script_subdirectory=None)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 529, in __init__\n[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')\n[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp\n[sagenb-1.1.1]\n[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.support'; the following exception was raised:\n[sagenb-1.1.1] Traceback (most recent call last):\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py\", line 152, in import_module\n[sagenb-1.1.1]     __import__(modname)\n[sagenb-1.1.1]   File \"../sagenb/misc/support.py\", line 525, in <module>\n[sagenb-1.1.1]     from sage.symbolic.all import Expression, SR\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/symbolic/all.py\", line 3, in <module>\n[sagenb-1.1.1]     from sage.libs.pynac.pynac import I\n[sagenb-1.1.1]   File \"sage/symbolic/expression.pxd\", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:31945)\n[sagenb-1.1.1]     cdef class Expression(CommutativeRingElement):\n[sagenb-1.1.1]   File \"sage/symbolic/expression.pyx\", line 161, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:80707)\n[sagenb-1.1.1]     from . import ring\n[sagenb-1.1.1]   File \"sage/symbolic/ring.pyx\", line 32, in init sage.symbolic.ring (build/cythonized/sage/symbolic/ring.cpp:16908)\n[sagenb-1.1.1]     from sage.rings.all import RR, CC, ZZ\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/all.py\", line 31, in <module>\n[sagenb-1.1.1]     from .quotient_ring import QuotientRing\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py\", line 116, in <module>\n[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 239, in <module>\n[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py\", line 24, in <module>\n[sagenb-1.1.1]     from .maxima import maxima, Maxima\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 1238, in <module>\n[sagenb-1.1.1]     script_subdirectory=None)\n[sagenb-1.1.1]   File \"/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py\", line 529, in __init__\n[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')\n[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp\n[sagenb-1.1.1]\n[sagenb-1.1.1]\n[sagenb-1.1.1] Exception occurred:\n[sagenb-1.1.1]   File \"sage/misc/lazy_import.pyx\", line 218, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2412)\n[sagenb-1.1.1]     raise RuntimeError(f\"resolving lazy import {self._name} during startup\")\n[sagenb-1.1.1] RuntimeError: resolving lazy import load during startup\n[sagenb-1.1.1] The full traceback has been saved in /tmp/sphinx-err-JkWjJW.log, if you want to report the issue to the developers.\n[sagenb-1.1.1] Please also report this if it was a user error, so that a better error message can be provided next time.\n[sagenb-1.1.1] A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\n[sagenb-1.1.1] make[2]: *** [Makefile:20: html] Error 2\n[sagenb-1.1.1] make[2]: Leaving directory '/home/sage/sage-8.4/local/var/tmp/sage/build/sagenb-1.1.1/src/doc'\n```",
    "created_at": "2018-11-12T22:04:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411232",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:4" align="right">comment:4</div>

Also possibly worth noting: building all the packages that `sagenb` and `$(SAGERUNTIME)` depend on without actually building `$(SAGERUNTIME)` is not sufficient, so it looks like `$(SAGERUNTIME)` really is the minimal dependency that needs to be added.

i.e. doing `make distclean && make alabaster appnope arb babel backports_abc backports_shutil_get_terminal_size backports_ssl_match_hostname boost_cropped brial bzip2 cddlib certifi cliquer cypari cysignals cython decorator docutils ecl eclib ecm enum34 fflas_ffpack flask flask_autoindex flask_babel flask_oldsessions flask_openid flask_silk flint fplll freetype future gap gc gf2x giac givaro glpk gsl iconv imagesize iml ipython ipython_genutils itsdangerous jinja2 jupyter_core lcalc libatomic_ops libbraiding libgap libgd libhomfly libpng linbox lrcalc m4ri m4rie markupsafe mathjax mpc mpfi mpfr mpir ncurses ntl numpy openblas packaging pari pari_galdata pari_seadata_small pathlib2 pathpy pexpect pickleshare pip pkgconf pkgconfig planarity ppl prompt_toolkit psutil ptyprocess pycygwin pygments pynac pyparsing python2 python3 python_openid pytz pyzmq ratpoints readline requests rw sagelib scandir setuptools setuptools_scm simplegeneric singledispatch singular six snowballstemmer speaklater sphinx sphinxcontrib_websupport sqlite symmetrica tornado traitlets twisted typing wcwidth werkzeug xz yasm zeromq zlib zn_poly zope_interface && make sagenb` still fails, although it fails slightly later:

```
[sagenb-1.1.1] Running Sphinx v1.7.6
[sagenb-1.1.1] making output directory...
[sagenb-1.1.1] loading pickled environment... not yet created
[sagenb-1.1.1] building [mo]: targets for 0 po files that are out of date
[sagenb-1.1.1] building [html]: targets for 19 source files that are out of date
[sagenb-1.1.1] updating environment: 19 added, 0 changed, 0 removed
[sagenb-1.1.1] reading sources... [  5%] index
[sagenb-1.1.1] reading sources... [ 10%] misc/introspect
[sagenb-1.1.1] reading sources... [ 15%] misc/misc
[sagenb-1.1.1] reading sources... [ 21%] misc/sageinspect
[sagenb-1.1.1] reading sources... [ 26%] misc/sphinxify
[sagenb-1.1.1] reading sources... [ 31%] misc/support
[sagenb-1.1.1] reading sources... [ 36%] notebook/cell
[sagenb-1.1.1] reading sources... [ 42%] notebook/challenge
[sagenb-1.1.1] reading sources... [ 47%] notebook/config
[sagenb-1.1.1] reading sources... [ 52%] notebook/css
[sagenb-1.1.1] reading sources... [ 57%] notebook/docHTMLProcessor
[sagenb-1.1.1] reading sources... [ 63%] notebook/interact
[sagenb-1.1.1] reading sources... [ 68%] notebook/js
[sagenb-1.1.1] reading sources... [ 73%] notebook/notebook
[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.introspect'; the following exception was raised:
[sagenb-1.1.1] Traceback (most recent call last):
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py", line 152, in import_module
[sagenb-1.1.1]     __import__(modname)
[sagenb-1.1.1]   File "../sagenb/__init__.py", line 3, in <module>
[sagenb-1.1.1]     from . import storage
[sagenb-1.1.1]   File "../sagenb/storage/__init__.py", line 3, in <module>
[sagenb-1.1.1]     from .filesystem_storage import FilesystemDatastore
[sagenb-1.1.1]   File "../sagenb/storage/filesystem_storage.py", line 52, in <module>
[sagenb-1.1.1]     from sagenb.misc.misc import set_restrictive_permissions, encoded_str
[sagenb-1.1.1]   File "../sagenb/misc/misc.py", line 216, in <module>
[sagenb-1.1.1]     import sage.all
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/all.py", line 83, in <module>
[sagenb-1.1.1]     from sage.misc.all       import *         # takes a while
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/misc/all.py", line 84, in <module>
[sagenb-1.1.1]     from .functional import (additive_order,
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/misc/functional.py", line 27, in <module>
[sagenb-1.1.1]     from sage.rings.complex_double import CDF
[sagenb-1.1.1]   File "sage/rings/complex_double.pyx", line 101, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24114)
[sagenb-1.1.1]     cdef CC = ComplexField()
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/complex_field.py", line 114, in ComplexField
[sagenb-1.1.1]     C = ComplexField_class(prec)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/complex_field.py", line 208, in __init__
[sagenb-1.1.1]     self._populate_coercion_lists_(coerce_list=[RRtoCC(self._real_field(), self)])
[sagenb-1.1.1]   File "sage/rings/complex_number.pyx", line 2580, in sage.rings.complex_number.RRtoCC.__init__ (build/cythonized/sage/rings/complex_number.c:21896)
[sagenb-1.1.1]     Map.__init__(self, RR, CC)
[sagenb-1.1.1]   File "sage/categories/map.pyx", line 125, in sage.categories.map.Map.__init__ (build/cythonized/sage/categories/map.c:3588)
[sagenb-1.1.1]     parent = homset.Hom(parent, codomain)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/homset.py", line 397, in Hom
[sagenb-1.1.1]     H = Hom(X, Y, category, check=False)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/homset.py", line 424, in Hom
[sagenb-1.1.1]     H = X._Hom_(Y, category)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/categories/rings.py", line 361, in _Hom_
[sagenb-1.1.1]     from sage.rings.homset import RingHomset
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/homset.py", line 19, in <module>
[sagenb-1.1.1]     from . import quotient_ring
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py", line 116, in <module>
[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 239, in <module>
[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py", line 24, in <module>
[sagenb-1.1.1]     from .maxima import maxima, Maxima
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 1238, in <module>
[sagenb-1.1.1]     script_subdirectory=None)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 529, in __init__
[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')
[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp
[sagenb-1.1.1]
[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.misc'; the following exception was raised:
[sagenb-1.1.1] Traceback (most recent call last):
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py", line 152, in import_module
[sagenb-1.1.1]     __import__(modname)
[sagenb-1.1.1]   File "../sagenb/__init__.py", line 3, in <module>
[sagenb-1.1.1]     from . import storage
[sagenb-1.1.1]   File "../sagenb/storage/__init__.py", line 3, in <module>
[sagenb-1.1.1]     from .filesystem_storage import FilesystemDatastore
[sagenb-1.1.1]   File "../sagenb/storage/filesystem_storage.py", line 52, in <module>
[sagenb-1.1.1]     from sagenb.misc.misc import set_restrictive_permissions, encoded_str
[sagenb-1.1.1]   File "../sagenb/misc/misc.py", line 352, in <module>
[sagenb-1.1.1]     from sage.plot.colors import Color
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/__init__.py", line 2, in <module>
[sagenb-1.1.1]     from . import all
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/all.py", line 3, in <module>
[sagenb-1.1.1]     from .plot import plot, graphics_array, list_plot, parametric_plot, polar_plot
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py", line 577, in <module>
[sagenb-1.1.1]     from sage.ext.fast_eval import fast_float, is_fast_float
[sagenb-1.1.1]   File "sage/ext/fast_eval.pyx", line 93, in init sage.ext.fast_eval (build/cythonized/sage/ext/fast_eval.c:14529)
[sagenb-1.1.1]     from sage.ext.fast_callable import fast_callable, Wrapper
[sagenb-1.1.1]   File "sage/ext/fast_callable.pyx", line 308, in init sage.ext.fast_callable (build/cythonized/sage/ext/fast_callable.c:20784)
[sagenb-1.1.1]     from sage.rings.all import RDF, CDF
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/all.py", line 31, in <module>
[sagenb-1.1.1]     from .quotient_ring import QuotientRing
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py", line 116, in <module>
[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 239, in <module>
[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py", line 24, in <module>
[sagenb-1.1.1]     from .maxima import maxima, Maxima
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 1238, in <module>
[sagenb-1.1.1]     script_subdirectory=None)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 529, in __init__
[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')
[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp
[sagenb-1.1.1]
[sagenb-1.1.1] WARNING: autodoc: failed to import module u'sagenb.misc.support'; the following exception was raised:
[sagenb-1.1.1] Traceback (most recent call last):
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sphinx/ext/autodoc/importer.py", line 152, in import_module
[sagenb-1.1.1]     __import__(modname)
[sagenb-1.1.1]   File "../sagenb/misc/support.py", line 525, in <module>
[sagenb-1.1.1]     from sage.symbolic.all import Expression, SR
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/symbolic/all.py", line 3, in <module>
[sagenb-1.1.1]     from sage.libs.pynac.pynac import I
[sagenb-1.1.1]   File "sage/symbolic/expression.pxd", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:31945)
[sagenb-1.1.1]     cdef class Expression(CommutativeRingElement):
[sagenb-1.1.1]   File "sage/symbolic/expression.pyx", line 161, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:80707)
[sagenb-1.1.1]     from . import ring
[sagenb-1.1.1]   File "sage/symbolic/ring.pyx", line 32, in init sage.symbolic.ring (build/cythonized/sage/symbolic/ring.cpp:16908)
[sagenb-1.1.1]     from sage.rings.all import RR, CC, ZZ
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/all.py", line 31, in <module>
[sagenb-1.1.1]     from .quotient_ring import QuotientRing
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/quotient_ring.py", line 116, in <module>
[sagenb-1.1.1]     import sage.rings.polynomial.multi_polynomial_ideal
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 239, in <module>
[sagenb-1.1.1]     from sage.interfaces.all import (singular as singular_default,
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/all.py", line 24, in <module>
[sagenb-1.1.1]     from .maxima import maxima, Maxima
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 1238, in <module>
[sagenb-1.1.1]     script_subdirectory=None)
[sagenb-1.1.1]   File "/home/sage/sage-8.4/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 529, in __init__
[sagenb-1.1.1]     raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')
[sagenb-1.1.1] RuntimeError: You must get the file local/bin/sage-maxima.lisp
[sagenb-1.1.1]
[sagenb-1.1.1]
[sagenb-1.1.1] Exception occurred:
[sagenb-1.1.1]   File "sage/misc/lazy_import.pyx", line 218, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2412)
[sagenb-1.1.1]     raise RuntimeError(f"resolving lazy import {self._name} during startup")
[sagenb-1.1.1] RuntimeError: resolving lazy import load during startup
[sagenb-1.1.1] The full traceback has been saved in /tmp/sphinx-err-JkWjJW.log, if you want to report the issue to the developers.
[sagenb-1.1.1] Please also report this if it was a user error, so that a better error message can be provided next time.
[sagenb-1.1.1] A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
[sagenb-1.1.1] make[2]: *** [Makefile:20: html] Error 2
[sagenb-1.1.1] make[2]: Leaving directory '/home/sage/sage-8.4/local/var/tmp/sage/build/sagenb-1.1.1/src/doc'
```



---

archive/issue_comments_411233.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2018-11-12T23:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411233",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_367080.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-12T23:44:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367080"
}
```



---

archive/issue_events_367081.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-12T23:44:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367081"
}
```



---

archive/issue_comments_411234.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks, this appears to work for me.",
    "created_at": "2018-11-12T23:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411234",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks, this appears to work for me.



---

archive/issue_events_367082.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-11-13T10:03:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367082"
}
```



---

archive/issue_events_367083.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-11-13T10:03:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367083"
}
```



---

archive/issue_comments_411235.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n+1 Haven't tested this but this looks like the right fix to me.",
    "created_at": "2018-11-13T16:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411235",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

+1 Haven't tested this but this looks like the right fix to me.



---

archive/issue_events_367084.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-15T22:57:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367084"
}
```



---

archive/issue_events_367085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c711b441065c35c57bcada043ca0ea58ee024cb6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-11-15T22:57:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26686#event-367085"
}
```



---

archive/issue_comments_411236.json:
```json
{
    "body": "Changed branch from **[u/Konrad127123/sagenb_docs_fail_to_build](https://github.com/sagemath/sagetrac-mirror/tree/u/Konrad127123/sagenb_docs_fail_to_build)** to **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**",
    "created_at": "2018-11-15T22:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411236",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/Konrad127123/sagenb_docs_fail_to_build](https://github.com/sagemath/sagetrac-mirror/tree/u/Konrad127123/sagenb_docs_fail_to_build)** to **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)**



---

archive/issue_comments_411237.json:
```json
{
    "body": "Changed commit from **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)** to none",
    "created_at": "2019-02-04T16:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411237",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed commit from **[`a964c94`](https://github.com/sagemath/sagetrac-mirror/commit/a964c9438de535a4b6b230b80fd80515e57813f1)** to none



---

archive/issue_comments_411238.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nApparently, this is not the right fix. I fall into this issue while trying to build SDL for 8.6 (for which the patch is applied).\n\nNote that i manually disabled the build of openblas to fix some other issue, but i guess this should not be related.\n\nLet me attach two logs in attachment.",
    "created_at": "2019-02-04T16:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411238",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:9" align="right">comment:9</div>

Apparently, this is not the right fix. I fall into this issue while trying to build SDL for 8.6 (for which the patch is applied).

Note that i manually disabled the build of openblas to fix some other issue, but i guess this should not be related.

Let me attach two logs in attachment.



---

archive/issue_comments_411239.json:
```json
{
    "body": "Attachment: **[sagenb-1.1.1.log](https://github.com/sagemath/sage/files/ticket26686/sagenb-1.1.1.log)**",
    "created_at": "2019-02-04T16:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411239",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Attachment: **[sagenb-1.1.1.log](https://github.com/sagemath/sage/files/ticket26686/sagenb-1.1.1.log)**



---

archive/issue_comments_411240.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[sphinx-err-m94TqC.log](https://github.com/sagemath/sage/files/ticket26686/sphinx-err-m94TqC.log)**\n\nThis error means that your sagelib is broken.\n(I have seen such errors, and they always boiled down to this).\nCan you start Sage?",
    "created_at": "2019-02-04T16:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411240",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[sphinx-err-m94TqC.log](https://github.com/sagemath/sage/files/ticket26686/sphinx-err-m94TqC.log)**

This error means that your sagelib is broken.
(I have seen such errors, and they always boiled down to this).
Can you start Sage?



---

archive/issue_comments_411241.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIt might be a bug in Sage's handling of dependencies, but I am not sure. Indeed, `$(SAGERUNTIME)` is a dependency of sagenb,",
    "created_at": "2019-02-04T16:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411241",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

It might be a bug in Sage's handling of dependencies, but I am not sure. Indeed, `$(SAGERUNTIME)` is a dependency of sagenb,



---

archive/issue_comments_411242.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nNote that $(SAGERUNTIME) is not a dependency of sphinx, which sounds fishy. Can you add it to its dependencies and try again?",
    "created_at": "2019-02-04T16:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411242",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

Note that $(SAGERUNTIME) is not a dependency of sphinx, which sounds fishy. Can you add it to its dependencies and try again?



---

archive/issue_comments_411243.json:
```json
{
    "body": "log of the sagenb buid with Sage 8.6",
    "created_at": "2019-02-04T18:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411243",
    "user": "https://github.com/zimmermann6"
}
```

log of the sagenb buid with Sage 8.6



---

archive/issue_comments_411244.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[sagenb-1.1.1.log.pz.gz](https://github.com/sagemath/sage/files/ticket26686/sagenb-1.1.1.log.pz.gz)**\n\nI did hit this error while building sage-8.6 from source on my laptop (Intel(R) Core(TM) i5-6300U under Ubuntu 16.04. I did attach the log file `sagenb-1.1.1.log.pz`.\n\nPaul Zimmermann",
    "created_at": "2019-02-04T18:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411244",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[sagenb-1.1.1.log.pz.gz](https://github.com/sagemath/sage/files/ticket26686/sagenb-1.1.1.log.pz.gz)**

I did hit this error while building sage-8.6 from source on my laptop (Intel(R) Core(TM) i5-6300U under Ubuntu 16.04. I did attach the log file `sagenb-1.1.1.log.pz`.

Paul Zimmermann



---

archive/issue_comments_411245.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'm unable to reproduce this bug using `make -j1` or `make -j1 sagenb`. Does it still occur with 8.7.beta3?\n\nIf so, please could you open a new ticket to avoid confusion with the original bug (the original bug was fixed, so this looks like a separate issue, albeit one which causes the same error). Could you also include a list of the files in `logs/pkgs` when the build fails?",
    "created_at": "2019-02-11T12:55:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411245",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:14" align="right">comment:14</div>

I'm unable to reproduce this bug using `make -j1` or `make -j1 sagenb`. Does it still occur with 8.7.beta3?

If so, please could you open a new ticket to avoid confusion with the original bug (the original bug was fixed, so this looks like a separate issue, albeit one which causes the same error). Could you also include a list of the files in `logs/pkgs` when the build fails?



---

archive/issue_comments_411246.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@zimmermann6](#comment:13):\n> I did hit this error while building sage-8.6 from source on my laptop (Intel(R) Core(TM) i5-6300U under Ubuntu 16.04. I did attach the log file `sagenb-1.1.1.log.pz`.\n\nthis looks as if the problem was earlier with building sagelib itself; as sagelib\nis needed to build sagenb docs, it should work.\nDoes starting Sage work?",
    "created_at": "2019-02-11T13:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411246",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@zimmermann6](#comment:13):
> I did hit this error while building sage-8.6 from source on my laptop (Intel(R) Core(TM) i5-6300U under Ubuntu 16.04. I did attach the log file `sagenb-1.1.1.log.pz`.

this looks as if the problem was earlier with building sagelib itself; as sagelib
is needed to build sagenb docs, it should work.
Does starting Sage work?



---

archive/issue_comments_411247.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI'm not sure one can say this is a separate issue, since it corresponds fully to the description:\nin a clean environment (after extracting sage-8.6.tar.gz), running `make` produces exactly the\nsame result as in the description (see the log file I attached):\n\n```\nRunning Sphinx v1.7.6\nmaking output directory...\nloading pickled environment... not yet created\nbuilding [mo]: targets for 0 po files that are out of date\nbuilding [html]: targets for 19 source files that are out of date\nupdating environment: 19 added, 0 changed, 0 removed\nreading sources... [  5%] index\nreading sources... [ 10%] misc/introspect\nreading sources... [ 15%] misc/misc\n\nException occurred:\n  File \"sage/misc/lazy_import.pyx\", line 218, in sage.misc.lazy_import.LazyImpo\\\nrt._get_object (build/cythonized/sage/misc/lazy_import.c:2489)\n    raise RuntimeError(f\"resolving lazy import {self._name} during startup\")\nRuntimeError: resolving lazy import dumps during startup\nThe full traceback has been saved in /tmp/sphinx-err-luxsJe.log, if you want to\\\n report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message \\\ncan be provided next time.\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphi\\\nnx/issues>. Thanks!\n```\nThis was with `make` without any argument, thus `make -j1`.",
    "created_at": "2019-02-11T13:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411247",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:16" align="right">comment:16</div>

I'm not sure one can say this is a separate issue, since it corresponds fully to the description:
in a clean environment (after extracting sage-8.6.tar.gz), running `make` produces exactly the
same result as in the description (see the log file I attached):

```
Running Sphinx v1.7.6
making output directory...
loading pickled environment... not yet created
building [mo]: targets for 0 po files that are out of date
building [html]: targets for 19 source files that are out of date
updating environment: 19 added, 0 changed, 0 removed
reading sources... [  5%] index
reading sources... [ 10%] misc/introspect
reading sources... [ 15%] misc/misc

Exception occurred:
  File "sage/misc/lazy_import.pyx", line 218, in sage.misc.lazy_import.LazyImpo\
rt._get_object (build/cythonized/sage/misc/lazy_import.c:2489)
    raise RuntimeError(f"resolving lazy import {self._name} during startup")
RuntimeError: resolving lazy import dumps during startup
The full traceback has been saved in /tmp/sphinx-err-luxsJe.log, if you want to\
 report the issue to the developers.
Please also report this if it was a user error, so that a better error message \
can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphi\
nx/issues>. Thanks!
```
This was with `make` without any argument, thus `make -j1`.



---

archive/issue_comments_411248.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHow about the mentioned `/tmp/sphinx-err-luxsJe.log` ?",
    "created_at": "2019-02-11T13:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411248",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

How about the mentioned `/tmp/sphinx-err-luxsJe.log` ?



---

archive/issue_comments_411249.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIn order to isolate this better, you can try removing the lines\n\n```\ncd doc\n$MAKE html || sdh_die \"Error building the documentation\"\ndocdir=\"$SAGE_LOCAL/share/doc/sagenb\"\nrm -rf \"$docdir\"\nmv build/html \"$docdir\"\n```\nfrom `build/pkgs/sagenb/spkg-install` and see whether building Sage completes and you can start it, etc.",
    "created_at": "2019-02-11T13:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411249",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

In order to isolate this better, you can try removing the lines

```
cd doc
$MAKE html || sdh_die "Error building the documentation"
docdir="$SAGE_LOCAL/share/doc/sagenb"
rm -rf "$docdir"
mv build/html "$docdir"
```
from `build/pkgs/sagenb/spkg-install` and see whether building Sage completes and you can start it, etc.



---

archive/issue_comments_411250.json:
```json
{
    "body": "Attachment: **[sphinx-err-luxsJe.log](https://github.com/sagemath/sage/files/ticket26686/sphinx-err-luxsJe.log)**",
    "created_at": "2019-02-11T20:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411250",
    "user": "https://github.com/zimmermann6"
}
```

Attachment: **[sphinx-err-luxsJe.log](https://github.com/sagemath/sage/files/ticket26686/sphinx-err-luxsJe.log)**



---

archive/issue_comments_411251.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dimpase](#comment:17):\n> How about the mentioned `/tmp/sphinx-err-luxsJe.log` ?\n\nit is now attached.",
    "created_at": "2019-02-11T20:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411251",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dimpase](#comment:17):
> How about the mentioned `/tmp/sphinx-err-luxsJe.log` ?

it is now attached.



---

archive/issue_comments_411252.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@zimmermann6](#comment:19):\n> Replying to [@dimpase](#comment:17):\n> > How about the mentioned `/tmp/sphinx-err-luxsJe.log` ?\n\n> \n> it is now attached.\n\nThanks - no clues there, unfortunately.\nCould you try the experiment proposed in comment 18 ?",
    "created_at": "2019-02-11T20:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411252",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@zimmermann6](#comment:19):
> Replying to [@dimpase](#comment:17):
> > How about the mentioned `/tmp/sphinx-err-luxsJe.log` ?

> 
> it is now attached.

Thanks - no clues there, unfortunately.
Could you try the experiment proposed in comment 18 ?



---

archive/issue_comments_411253.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nPlease create a new ticket instead of discussing things on an old ticket which is most likely unrelated.",
    "created_at": "2019-02-11T20:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411253",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Please create a new ticket instead of discussing things on an old ticket which is most likely unrelated.



---

archive/issue_comments_411254.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think the underlying problem is all these `except ImportError` in `sagenb/misc/misc.py`. They hide real errors and just break stuff. I'll try to fix that upstream.\n\nIt won't solve your problem but at least it you'll get a proper error message.",
    "created_at": "2019-02-11T21:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411254",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

I think the underlying problem is all these `except ImportError` in `sagenb/misc/misc.py`. They hide real errors and just break stuff. I'll try to fix that upstream.

It won't solve your problem but at least it you'll get a proper error message.



---

archive/issue_comments_411255.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nPlease continue the discussion at #27257.",
    "created_at": "2019-02-11T21:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26686#issuecomment-411255",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Please continue the discussion at #27257.
