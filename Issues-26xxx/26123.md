# Issue 26123: residue field of a valuation on a function field should be a function field when possible

archive/issues_025886.json:
```json
{
    "body": "Currently, the residue field of a non-classical valuation on a function field is not a real function field:\n\n```\nsage: R.<x> = QQ[]\nsage: v = GaussValuation(R, QQ.valuation(2))\nsage: K.<x> = FunctionField(QQ)\nsage: v = K.valuation(v)\nsage: v.residue_field()\nFraction Field of Univariate Polynomial Ring in x over Finite Field of size 2 (using GF2X)\n```\n\nThis ticket changes this to be `Rational function field in x over Finite Field of size 2`.\n\n**CC:**  swewers\n\n**Branch/Commit:** [34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)\n\n**Reviewer:** Stefan Wewers\n\n**Author:** Julian R\u00fcth\n\nIssue created by migration from https://trac.sagemath.org/ticket/26123\n\n",
    "closed_at": "2018-09-03T23:29:39Z",
    "created_at": "2018-08-25T10:31:53Z",
    "labels": [
        "component: commutative algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "residue field of a valuation on a function field should be a function field when possible",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26123",
    "user": "https://github.com/saraedum"
}
```
Currently, the residue field of a non-classical valuation on a function field is not a real function field:

```
sage: R.<x> = QQ[]
sage: v = GaussValuation(R, QQ.valuation(2))
sage: K.<x> = FunctionField(QQ)
sage: v = K.valuation(v)
sage: v.residue_field()
Fraction Field of Univariate Polynomial Ring in x over Finite Field of size 2 (using GF2X)
```

This ticket changes this to be `Rational function field in x over Finite Field of size 2`.

**CC:**  swewers

**Branch/Commit:** [34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)

**Reviewer:** Stefan Wewers

**Author:** Julian Rüth

Issue created by migration from https://trac.sagemath.org/ticket/26123





---

archive/issue_events_235760.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-25T10:33:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235760"
}
```



---

archive/issue_events_235761.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-25T14:40:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235761"
}
```



---

archive/issue_comments_406712.json:
```json
{
    "body": "**Work_Issues:** is the patchbot happy?",
    "created_at": "2018-08-25T14:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406712",
    "user": "https://github.com/saraedum"
}
```

**Work_Issues:** is the patchbot happy?



---

archive/issue_comments_406713.json:
```json
{
    "body": "**Branch:** [u/saraedum/26123](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/26123)",
    "created_at": "2018-08-25T14:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406713",
    "user": "https://github.com/saraedum"
}
```

**Branch:** [u/saraedum/26123](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/26123)



---

archive/issue_comments_406714.json:
```json
{
    "body": "**Commit:** [a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39](https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39)",
    "created_at": "2018-08-25T15:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406714",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

**Commit:** [a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39](https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39)



---

archive/issue_comments_406715.json:
```json
{
    "body": "<a id='comment:4'></a>\nThere should be a test that `v.reduce(f)` works in this situation. \nThe docstring for `reduce` test this only for standard valuations,\nwhere the residue field is not a function field. \n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39\">a5c8755</a></td><td><code>Make residue_ring of a valuation on a function field a function field</code></td></tr></table>\n",
    "created_at": "2018-08-25T15:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406715",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

<a id='comment:4'></a>
There should be a test that `v.reduce(f)` works in this situation. 
The docstring for `reduce` test this only for standard valuations,
where the residue field is not a function field. 

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39">a5c8755</a></td><td><code>Make residue_ring of a valuation on a function field a function field</code></td></tr></table>




---

archive/issue_comments_406716.json:
```json
{
    "body": "<a id='comment:5'></a>\nWe have `_test_reduce` in `valuation_space.py` that tests generically that `v.reduce(f)` is in `v.residue_ring()`. So let's add a check there that `v.residue_ring()` coerces into `v.residue_field()`.",
    "created_at": "2018-08-26T11:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406716",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
We have `_test_reduce` in `valuation_space.py` that tests generically that `v.reduce(f)` is in `v.residue_ring()`. So let's add a check there that `v.residue_ring()` coerces into `v.residue_field()`.



---

archive/issue_comments_406717.json:
```json
{
    "body": "<a id='comment:6'></a>\nHm\u2026so since `residue_ring()` and `residue_field()` are the same in this case, I don't think we need this here ;)",
    "created_at": "2018-08-26T11:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406717",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'></a>
Hm…so since `residue_ring()` and `residue_field()` are the same in this case, I don't think we need this here ;)



---

archive/issue_comments_406718.json:
```json
{
    "body": "**Changing work_issues** from \"is the patchbot happy?\" to \"is the patchbot happy? no.\".",
    "created_at": "2018-08-26T11:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406718",
    "user": "https://github.com/saraedum"
}
```

**Changing work_issues** from "is the patchbot happy?" to "is the patchbot happy? no.".



---

archive/issue_comments_406719.json:
```json
{
    "body": "**Changing commit** from \"[a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39](https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39)\" to \"[09e076f57175cfe4f421bdf3bfd333a1cf7b4239](https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239)\".",
    "created_at": "2018-08-27T15:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39](https://github.com/sagemath/sagetrac-mirror/commit/a5c8755fb98f1f9f0125bcbe2e604d6c2849ba39)" to "[09e076f57175cfe4f421bdf3bfd333a1cf7b4239](https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239)".



---

archive/issue_comments_406720.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb3a1f605cdd1aa8b23abb3963c61b2619d0ae5\">5bb3a1f</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 26123</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239\">09e076f</a></td><td><code>Fix residue_ring() for pseudo-valuations on function fields</code></td></tr></table>\n",
    "created_at": "2018-08-27T15:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb3a1f605cdd1aa8b23abb3963c61b2619d0ae5">5bb3a1f</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 26123</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239">09e076f</a></td><td><code>Fix residue_ring() for pseudo-valuations on function fields</code></td></tr></table>




---

archive/issue_comments_406721.json:
```json
{
    "body": "<a id='comment:9'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb3a1f605cdd1aa8b23abb3963c61b2619d0ae5\">5bb3a1f</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 26123</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239\">09e076f</a></td><td><code>Fix residue_ring() for pseudo-valuations on function fields</code></td></tr></table>\n",
    "created_at": "2018-08-27T15:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406721",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:9'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb3a1f605cdd1aa8b23abb3963c61b2619d0ae5">5bb3a1f</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 26123</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239">09e076f</a></td><td><code>Fix residue_ring() for pseudo-valuations on function fields</code></td></tr></table>




---

archive/issue_comments_406722.json:
```json
{
    "body": "**Changing work_issues** from \"is the patchbot happy? no.\" to \"is the patchbot happy?\".",
    "created_at": "2018-08-27T15:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406722",
    "user": "https://github.com/saraedum"
}
```

**Changing work_issues** from "is the patchbot happy? no." to "is the patchbot happy?".



---

archive/issue_comments_406723.json:
```json
{
    "body": "<a id='comment:10'></a>\nTrivial pyflakes error:\n\n   src/sage/rings/valuation/valuation_space.py:1563: local variable 'r' is assigned to but never used\n\nOtherwise, everything is fine.",
    "created_at": "2018-08-28T08:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406723",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

<a id='comment:10'></a>
Trivial pyflakes error:

   src/sage/rings/valuation/valuation_space.py:1563: local variable 'r' is assigned to but never used

Otherwise, everything is fine.



---

archive/issue_comments_406724.json:
```json
{
    "body": "**Reviewer:** Stefan Wewers",
    "created_at": "2018-08-28T08:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406724",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

**Reviewer:** Stefan Wewers



---

archive/issue_events_235762.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/swewers",
    "created_at": "2018-08-28T08:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235762"
}
```



---

archive/issue_events_235763.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/swewers",
    "created_at": "2018-08-28T08:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235763"
}
```



---

archive/issue_comments_406725.json:
```json
{
    "body": "**Changing work_issues** from \"is the patchbot happy?\" to \"is the patchbot happy? no\".",
    "created_at": "2018-08-28T08:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406725",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

**Changing work_issues** from "is the patchbot happy?" to "is the patchbot happy? no".



---

archive/issue_comments_406726.json:
```json
{
    "body": "**Changing commit** from \"[09e076f57175cfe4f421bdf3bfd333a1cf7b4239](https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239)\" to \"[34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)\".",
    "created_at": "2018-08-29T01:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[09e076f57175cfe4f421bdf3bfd333a1cf7b4239](https://github.com/sagemath/sagetrac-mirror/commit/09e076f57175cfe4f421bdf3bfd333a1cf7b4239)" to "[34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)".



---

archive/issue_comments_406727.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/274f2e0693c38a5bc340670d3479274d7dc9f9c8\">274f2e0</a></td><td><code>fix pyflakes warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158\">34a2d19</a></td><td><code>Fix doctest output in documentation</code></td></tr></table>\n",
    "created_at": "2018-08-29T01:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/274f2e0693c38a5bc340670d3479274d7dc9f9c8">274f2e0</a></td><td><code>fix pyflakes warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158">34a2d19</a></td><td><code>Fix doctest output in documentation</code></td></tr></table>




---

archive/issue_comments_406728.json:
```json
{
    "body": "**Changing work_issues** from \"is the patchbot happy? no\" to \"is the patchbot happy?\".",
    "created_at": "2018-08-29T01:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406728",
    "user": "https://github.com/saraedum"
}
```

**Changing work_issues** from "is the patchbot happy? no" to "is the patchbot happy?".



---

archive/issue_events_235764.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-29T01:22:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235764"
}
```



---

archive/issue_events_235765.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-08-29T01:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235765"
}
```



---

archive/issue_comments_406729.json:
```json
{
    "body": "**Changing work_issues** from \"is the patchbot happy?\" to \"\".",
    "created_at": "2018-08-29T07:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406729",
    "user": "https://trac.sagemath.org/admin/accounts/users/swewers"
}
```

**Changing work_issues** from "is the patchbot happy?" to "".



---

archive/issue_events_235766.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/swewers",
    "created_at": "2018-08-29T07:18:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235766"
}
```



---

archive/issue_events_235767.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/swewers",
    "created_at": "2018-08-29T07:18:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235767"
}
```



---

archive/issue_events_235768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-03T23:29:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235768"
}
```



---

archive/issue_events_235769.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-03T23:29:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26123#event-235769"
}
```



---

archive/issue_comments_406730.json:
```json
{
    "body": "**Changing branch** from \"[u/saraedum/26123](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/26123)\" to \"[34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)\".",
    "created_at": "2018-09-03T23:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26123#issuecomment-406730",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/saraedum/26123](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/26123)" to "[34a2d1995966eaf06eea81475c64ec240b323158](https://github.com/sagemath/sagetrac-mirror/commit/34a2d1995966eaf06eea81475c64ec240b323158)".
