# Issue 26150: fraction field: fix conversion from symbolic ring

archive/issues_025913.json:
```json
{
    "body": "\n```\nsage: z = SR.var('z')\nsage: CyclotomicField(2)['z'].fraction_field()(2*(4*z + 5)/((z + 1)*(z - 1)^4))\n```\nraises an error but shouldn't. This issue is also mentioned on #24539.\n\nAFAICS it worked in earlier [SageMath](SageMath) versions, but probably due to #23664 (unchecked) it stopped working.\n\nCC:  @cheuberg @mezzarobba\n\nBranch/Commit: 1a3cc587543fd5d4636ab33685ab27d2e9767721\n\nReviewer: Marc Mezzarobba\n\nAuthor: Daniel Krenn\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26150\n\n",
    "closed_at": "2019-04-08T21:34:13Z",
    "created_at": "2018-08-28T11:14:46Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "fraction field: fix conversion from symbolic ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26150",
    "user": "https://github.com/dkrenn"
}
```

```
sage: z = SR.var('z')
sage: CyclotomicField(2)['z'].fraction_field()(2*(4*z + 5)/((z + 1)*(z - 1)^4))
```
raises an error but shouldn't. This issue is also mentioned on #24539.

AFAICS it worked in earlier [SageMath](SageMath) versions, but probably due to #23664 (unchecked) it stopped working.

CC:  @cheuberg @mezzarobba

Branch/Commit: 1a3cc587543fd5d4636ab33685ab27d2e9767721

Reviewer: Marc Mezzarobba

Author: Daniel Krenn

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26150





---

archive/issue_comments_496147.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dkrenn/conv-fraction-field\"",
    "created_at": "2018-08-28T11:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496147",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "" to "u/dkrenn/conv-fraction-field"



---

archive/issue_comments_496148.json:
```json
{
    "body": "Changing commit from \"\" to \"f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb\"",
    "created_at": "2018-08-28T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496148",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "" to "f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb"



---

archive/issue_comments_496149.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[f76254a](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)|`Trac #26150: fix conversion in fraction_field`|",
    "created_at": "2018-08-28T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496149",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[f76254a](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)|`Trac #26150: fix conversion in fraction_field`|



---

archive/issue_comments_496150.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-28T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496150",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_496151.json:
```json
{
    "body": "Changing author from \"\" to \"Daniel Krenn\"",
    "created_at": "2018-08-28T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496151",
    "user": "https://github.com/dkrenn"
}
```

Changing author from "" to "Daniel Krenn"



---

archive/issue_comments_496152.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2018-08-28T11:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496152",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_496153.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2018-08-28T11:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496153",
    "user": "https://github.com/mezzarobba"
}
```

Changing reviewer from "" to "Marc Mezzarobba"



---

archive/issue_comments_496154.json:
```json
{
    "body": "<a id='comment:4'></a>\nThanks for the fix! You can set the ticket to positive_review on my behalf if the patchbot is happy.",
    "created_at": "2018-08-28T11:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496154",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:4'></a>
Thanks for the fix! You can set the ticket to positive_review on my behalf if the patchbot is happy.



---

archive/issue_comments_496155.json:
```json
{
    "body": "<a id='comment:5'></a>\nUnfortunately, there is one doctest failing:\n\n```\nFile \"src/sage/rings/function_field/function_field.py\", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom\nFailed example:\n    L.hom(r, base_morphism=phi)\nException raised:\n    Traceback (most recent call last):\n    ...\n    ValueError: invalid literal for int() with base 10: \"Error in dput(length(sage1)) : object 'sage1' not foun\"\n```\nI have no idea what is going on here.",
    "created_at": "2018-08-29T08:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496155",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
Unfortunately, there is one doctest failing:

```
File "src/sage/rings/function_field/function_field.py", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom
Failed example:
    L.hom(r, base_morphism=phi)
Exception raised:
    Traceback (most recent call last):
    ...
    ValueError: invalid literal for int() with base 10: "Error in dput(length(sage1)) : object 'sage1' not foun"
```
I have no idea what is going on here.



---

archive/issue_comments_496156.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-08-29T08:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496156",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_496157.json:
```json
{
    "body": "<a id='comment:6'></a>\nNitpick: `:trac:`#26150`` -> `:trac:`26150``",
    "created_at": "2018-08-29T08:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496157",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Nitpick: `:trac:`#26150`` -> `:trac:`26150``



---

archive/issue_comments_496158.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[b0920f3](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)|`fix trac ticket number reference in docstring`|",
    "created_at": "2018-08-29T08:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[b0920f3](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)|`fix trac ticket number reference in docstring`|



---

archive/issue_comments_496159.json:
```json
{
    "body": "Changing commit from \"f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb\" to \"b0920f3aebff52a8bdcd663a55618d5b40fd65aa\"",
    "created_at": "2018-08-29T08:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb" to "b0920f3aebff52a8bdcd663a55618d5b40fd65aa"



---

archive/issue_comments_496160.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A6):\n> Nitpick: `:trac:`#26150`` -> `:trac:`26150``\n\n\nThanks. Changed.",
    "created_at": "2018-08-29T08:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496160",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A6):
> Nitpick: `:trac:`#26150`` -> `:trac:`26150``


Thanks. Changed.



---

archive/issue_comments_496161.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [dkrenn](#comment%3A5):\n> Unfortunately, there is one doctest failing:\n> \n> ```\n> File \"src/sage/rings/function_field/function_field.py\", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom\n> Failed example:\n>     L.hom(r, base_morphism=phi)\n> Exception raised:\n>     Traceback (most recent call last):\n>     ...\n>     ValueError: invalid literal for int() with base 10: \"Error in dput(length(sage1)) : object 'sage1' not foun\"\n> ```\n\n\nFollow up at #26155.",
    "created_at": "2018-08-29T11:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496161",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'></a>
Replying to [dkrenn](#comment%3A5):
> Unfortunately, there is one doctest failing:
> 
> ```
> File "src/sage/rings/function_field/function_field.py", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom
> Failed example:
>     L.hom(r, base_morphism=phi)
> Exception raised:
>     Traceback (most recent call last):
>     ...
>     ValueError: invalid literal for int() with base 10: "Error in dput(length(sage1)) : object 'sage1' not foun"
> ```


Follow up at #26155.



---

archive/issue_comments_496162.json:
```json
{
    "body": "Changing commit from \"b0920f3aebff52a8bdcd663a55618d5b40fd65aa\" to \"f98b0153ae7d19a2009b3318420367adfdf015ee\"",
    "created_at": "2018-08-30T07:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b0920f3aebff52a8bdcd663a55618d5b40fd65aa" to "f98b0153ae7d19a2009b3318420367adfdf015ee"



---

archive/issue_comments_496163.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[f98b015](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)|`Trac #26150: catch internal ValueError to get correct outer error response`|",
    "created_at": "2018-08-30T07:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[f98b015](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)|`Trac #26150: catch internal ValueError to get correct outer error response`|



---

archive/issue_comments_496164.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-30T07:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496164",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_496165.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis is now an alternative fix for the issue. Needs review again and let's see what the patchbot says :)",
    "created_at": "2018-08-30T07:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496165",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:11'></a>
This is now an alternative fix for the issue. Needs review again and let's see what the patchbot says :)



---

archive/issue_comments_496166.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-08-30T12:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496166",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_496167.json:
```json
{
    "body": "<a id='comment:12'></a>\nAgain some failing doctests... :(",
    "created_at": "2018-08-30T12:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496167",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:12'></a>
Again some failing doctests... :(



---

archive/issue_comments_496168.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[b31583a](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)|`Trac #26150: fix element_constructor of int(1)`|",
    "created_at": "2018-08-30T14:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496168",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[b31583a](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)|`Trac #26150: fix element_constructor of int(1)`|



---

archive/issue_comments_496169.json:
```json
{
    "body": "Changing commit from \"f98b0153ae7d19a2009b3318420367adfdf015ee\" to \"b31583ade0e406b0f232b53a04c15b9f43a251af\"",
    "created_at": "2018-08-30T14:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496169",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f98b0153ae7d19a2009b3318420367adfdf015ee" to "b31583ade0e406b0f232b53a04c15b9f43a251af"



---

archive/issue_comments_496170.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[b3be7d9](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)|`Trac #26150: fix doctest (remove error message as something is now working)`|",
    "created_at": "2018-08-30T14:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[b3be7d9](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)|`Trac #26150: fix doctest (remove error message as something is now working)`|



---

archive/issue_comments_496171.json:
```json
{
    "body": "Changing commit from \"b31583ade0e406b0f232b53a04c15b9f43a251af\" to \"b3be7d9009d07730e816e64576a53b07549a03a5\"",
    "created_at": "2018-08-30T14:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b31583ade0e406b0f232b53a04c15b9f43a251af" to "b3be7d9009d07730e816e64576a53b07549a03a5"



---

archive/issue_comments_496172.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-30T14:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496172",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_496173.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere is some underlying problem with a recursive call when creating an element out of `int(1)`. This was somehow hidden before. I rewrote the element constructor a bit to adapt; also fixing an issue raised on #24539. The behavior is now more consistent with remaining [SageMath](SageMath).\n\nSo again, let us see what the patchbot says...",
    "created_at": "2018-08-30T14:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496173",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:15'></a>
There is some underlying problem with a recursive call when creating an element out of `int(1)`. This was somehow hidden before. I rewrote the element constructor a bit to adapt; also fixing an issue raised on #24539. The behavior is now more consistent with remaining [SageMath](SageMath).

So again, let us see what the patchbot says...



---

archive/issue_comments_496174.json:
```json
{
    "body": "Changing commit from \"b3be7d9009d07730e816e64576a53b07549a03a5\" to \"cdbed4ff56afe44da878e36afdfb658dc29bc852\"",
    "created_at": "2018-09-15T10:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b3be7d9009d07730e816e64576a53b07549a03a5" to "cdbed4ff56afe44da878e36afdfb658dc29bc852"



---

archive/issue_comments_496175.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[cdbed4f](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)|`Merge tag '8.4.beta3' into t/26150/conv-fraction-field`|",
    "created_at": "2018-09-15T10:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[cdbed4f](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)|`Merge tag '8.4.beta3' into t/26150/conv-fraction-field`|



---

archive/issue_comments_496176.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[2697d5c](https://github.com/sagemath/sagetrac-mirror/commit/2697d5ca3ae262a1b01ad600a44f2c722a00dec3)|`Trac #26150: fix using correct one-element`|\n|[45df8b5](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)|`Trac #26150: extend trying of decomposing the fraction`|",
    "created_at": "2018-09-15T17:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[2697d5c](https://github.com/sagemath/sagetrac-mirror/commit/2697d5ca3ae262a1b01ad600a44f2c722a00dec3)|`Trac #26150: fix using correct one-element`|
|[45df8b5](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)|`Trac #26150: extend trying of decomposing the fraction`|



---

archive/issue_comments_496177.json:
```json
{
    "body": "Changing commit from \"cdbed4ff56afe44da878e36afdfb658dc29bc852\" to \"45df8b5a5c7e53c500344a69c6cc93c174bd751a\"",
    "created_at": "2018-09-15T17:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cdbed4ff56afe44da878e36afdfb658dc29bc852" to "45df8b5a5c7e53c500344a69c6cc93c174bd751a"



---

archive/issue_comments_496178.json:
```json
{
    "body": "<a id='comment:18'></a>\nFinally, I've written a fix that solves the issues and with which the patchbot is happy as well. To be more accurate, I've took the liberty to slightly rewrite the element constructor so that it covers a broader spectrum of inputs for the conversion. Now it should also be \"correct\" in the sense what it does at which point ;)\n\nPlease Review (again)",
    "created_at": "2018-09-16T18:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496178",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:18'></a>
Finally, I've written a fix that solves the issues and with which the patchbot is happy as well. To be more accurate, I've took the liberty to slightly rewrite the element constructor so that it covers a broader spectrum of inputs for the conversion. Now it should also be "correct" in the sense what it does at which point ;)

Please Review (again)



---

archive/issue_comments_496179.json:
```json
{
    "body": "<a id='comment:19'></a>\n`@`mmezzarobba: You already have reviewed this ticket, but a small change was done after that. I would appreciate a review of the changes :)",
    "created_at": "2019-03-27T20:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496179",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:19'></a>
`@`mmezzarobba: You already have reviewed this ticket, but a small change was done after that. I would appreciate a review of the changes :)



---

archive/issue_comments_496180.json:
```json
{
    "body": "<a id='comment:20'></a>\nThanks for the notice.\n\nI agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?",
    "created_at": "2019-04-03T08:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496180",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:20'></a>
Thanks for the notice.

I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?



---

archive/issue_comments_496181.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[7625e86](https://github.com/sagemath/sagetrac-mirror/commit/7625e86cf1a5fbc1793249268d79dd293cf33181)|`Merge tag '8.7' into u/dkrenn/conv-fraction-field`|\n|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|",
    "created_at": "2019-04-03T12:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[7625e86](https://github.com/sagemath/sagetrac-mirror/commit/7625e86cf1a5fbc1793249268d79dd293cf33181)|`Merge tag '8.7' into u/dkrenn/conv-fraction-field`|
|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|



---

archive/issue_comments_496182.json:
```json
{
    "body": "Changing commit from \"45df8b5a5c7e53c500344a69c6cc93c174bd751a\" to \"1a3cc587543fd5d4636ab33685ab27d2e9767721\"",
    "created_at": "2019-04-03T12:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "45df8b5a5c7e53c500344a69c6cc93c174bd751a" to "1a3cc587543fd5d4636ab33685ab27d2e9767721"



---

archive/issue_comments_496183.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [mmezzarobba](#comment%3A20):\n> Thanks for the notice.\n> \n> I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?\n\n\nAdded a doctest:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|\n\n```diff\n+            sage: T.<t> = ZZ[]\n+            sage: S.<s> = ZZ[]\n+            sage: S.fraction_field()(s/(s+1), (t-1)/(t+2))\n+            (s^2 + 2*s)/(s^2 - 1)\n```\nNote that there is a conversion between `S` and `T`, so this conversion should be used also in the fraction field, at least in the case nothing else (proper coercion) works.",
    "created_at": "2019-04-03T12:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496183",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:22'></a>
Replying to [mmezzarobba](#comment%3A20):
> Thanks for the notice.
> 
> I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?


Added a doctest:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|

```diff
+            sage: T.<t> = ZZ[]
+            sage: S.<s> = ZZ[]
+            sage: S.fraction_field()(s/(s+1), (t-1)/(t+2))
+            (s^2 + 2*s)/(s^2 - 1)
```
Note that there is a conversion between `S` and `T`, so this conversion should be used also in the fraction field, at least in the case nothing else (proper coercion) works.



---

archive/issue_comments_496184.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-07T10:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496184",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_496185.json:
```json
{
    "body": "<a id='comment:23'></a>\nIf you are really sure you want that, I won't oppose...",
    "created_at": "2019-04-07T10:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496185",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:23'></a>
If you are really sure you want that, I won't oppose...



---

archive/issue_events_081925.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-08T21:34:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26150#event-81925"
}
```



---

archive/issue_comments_496186.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-08T21:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496186",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_496187.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/conv-fraction-field\" to \"1a3cc587543fd5d4636ab33685ab27d2e9767721\"",
    "created_at": "2019-04-08T21:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26150#issuecomment-496187",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dkrenn/conv-fraction-field" to "1a3cc587543fd5d4636ab33685ab27d2e9767721"
