# Issue 26150: fraction field: fix conversion from symbolic ring

archive/issues_025913.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: z = SR.var('z')\nsage: CyclotomicField(2)['z'].fraction_field()(2*(4*z + 5)/((z + 1)*(z - 1)^4))\n```\nraises an error but shouldn't. This issue is also mentioned on #24539.\n\nAFAICS it worked in earlier [SageMath](../wiki/SageMath) versions, but probably due to #23664 (unchecked) it stopped working.\n\nCC:  @cheuberg @mezzarobba\n\nBranch/Commit: **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**\n\nReviewer: **Marc Mezzarobba**\n\nAuthor: **Daniel Krenn**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26150_\n\n",
    "closed_at": "2019-04-08T21:34:13Z",
    "created_at": "2018-08-28T11:14:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fraction field: fix conversion from symbolic ring",
    "type": "issue",
    "updated_at": "2019-04-08T21:34:13Z",
    "url": "https://github.com/sagemath/sage/issues/26150",
    "user": "https://github.com/dkrenn"
}
```

```
sage: z = SR.var('z')
sage: CyclotomicField(2)['z'].fraction_field()(2*(4*z + 5)/((z + 1)*(z - 1)^4))
```
raises an error but shouldn't. This issue is also mentioned on #24539.

AFAICS it worked in earlier [SageMath](../wiki/SageMath) versions, but probably due to #23664 (unchecked) it stopped working.

CC:  @cheuberg @mezzarobba

Branch/Commit: **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**

Reviewer: **Marc Mezzarobba**

Author: **Daniel Krenn**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/26150_





---

archive/issue_events_360889.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-28T11:14:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360889"
}
```



---

archive/issue_events_360890.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-28T11:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360890"
}
```



---

archive/issue_events_360891.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-28T11:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360891"
}
```



---

archive/issue_events_360892.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-28T11:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360892"
}
```



---

archive/issue_comments_402839.json:
```json
{
    "body": "Branch: **[u/dkrenn/conv-fraction-field](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/conv-fraction-field)**",
    "created_at": "2018-08-28T11:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402839",
    "user": "https://github.com/dkrenn"
}
```

Branch: **[u/dkrenn/conv-fraction-field](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/conv-fraction-field)**



---

archive/issue_comments_402840.json:
```json
{
    "body": "Commit: **[`f76254a`](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)**",
    "created_at": "2018-08-28T11:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402840",
    "user": "https://github.com/dkrenn"
}
```

Commit: **[`f76254a`](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)**



---

archive/issue_comments_402841.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb\">f76254a</a></td><td><code>Trac #26150: fix conversion in fraction_field</code></td></tr></table>\n",
    "created_at": "2018-08-28T11:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402841",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb">f76254a</a></td><td><code>Trac #26150: fix conversion in fraction_field</code></td></tr></table>




---

archive/issue_events_360893.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-28T11:19:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360893"
}
```



---

archive/issue_comments_402842.json:
```json
{
    "body": "Author: **Daniel Krenn**",
    "created_at": "2018-08-28T11:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402842",
    "user": "https://github.com/dkrenn"
}
```

Author: **Daniel Krenn**



---

archive/issue_comments_402843.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2018-08-28T11:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402843",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_402844.json:
```json
{
    "body": "Reviewer: **Marc Mezzarobba**",
    "created_at": "2018-08-28T11:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402844",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Marc Mezzarobba**



---

archive/issue_comments_402845.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for the fix! You can set the ticket to positive_review on my behalf if the patchbot is happy.",
    "created_at": "2018-08-28T11:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402845",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for the fix! You can set the ticket to positive_review on my behalf if the patchbot is happy.



---

archive/issue_comments_402846.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nUnfortunately, there is one doctest failing:\n\n```\nFile \"src/sage/rings/function_field/function_field.py\", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom\nFailed example:\n    L.hom(r, base_morphism=phi)\nException raised:\n    Traceback (most recent call last):\n    ...\n    ValueError: invalid literal for int() with base 10: \"Error in dput(length(sage1)) : object 'sage1' not foun\"\n```\nI have no idea what is going on here.",
    "created_at": "2018-08-29T08:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402846",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:5" align="right">comment:5</div>

Unfortunately, there is one doctest failing:

```
File "src/sage/rings/function_field/function_field.py", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom
Failed example:
    L.hom(r, base_morphism=phi)
Exception raised:
    Traceback (most recent call last):
    ...
    ValueError: invalid literal for int() with base 10: "Error in dput(length(sage1)) : object 'sage1' not foun"
```
I have no idea what is going on here.



---

archive/issue_events_360894.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-29T08:08:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360894"
}
```



---

archive/issue_events_360895.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-29T08:08:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360895"
}
```



---

archive/issue_comments_402847.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNitpick: <code>:trac:\\`#26150\\`</code> -> <code>:trac:\\`26150\\`</code>",
    "created_at": "2018-08-29T08:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402847",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Nitpick: <code>:trac:\`#26150\`</code> -> <code>:trac:\`26150\`</code>



---

archive/issue_comments_402848.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa\">b0920f3</a></td><td><code>fix trac ticket number reference in docstring</code></td></tr></table>\n",
    "created_at": "2018-08-29T08:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402848",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa">b0920f3</a></td><td><code>fix trac ticket number reference in docstring</code></td></tr></table>




---

archive/issue_comments_402849.json:
```json
{
    "body": "Changed commit from **[`f76254a`](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)** to **[`b0920f3`](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)**",
    "created_at": "2018-08-29T08:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402849",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f76254a`](https://github.com/sagemath/sagetrac-mirror/commit/f76254ae9fc3e27723f4ecf6d6b82c89a8780dcb)** to **[`b0920f3`](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)**



---

archive/issue_comments_402850.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jdemeyer](#comment:6):\n> Nitpick: <code>:trac:\\`#26150\\`</code> -> <code>:trac:\\`26150\\`</code>\n\nThanks. Changed.",
    "created_at": "2018-08-29T08:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402850",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jdemeyer](#comment:6):
> Nitpick: <code>:trac:\`#26150\`</code> -> <code>:trac:\`26150\`</code>

Thanks. Changed.



---

archive/issue_comments_402851.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@dkrenn](#comment:5):\n> Unfortunately, there is one doctest failing:\n> \n> ```\n> File \"src/sage/rings/function_field/function_field.py\", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom\n> Failed example:\n>     L.hom(r, base_morphism=phi)\n> Exception raised:\n>     Traceback (most recent call last):\n>     ...\n>     ValueError: invalid literal for int() with base 10: \"Error in dput(length(sage1)) : object 'sage1' not foun\"\n> ```\n\nFollow up at #26155.",
    "created_at": "2018-08-29T11:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402851",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@dkrenn](#comment:5):
> Unfortunately, there is one doctest failing:
> 
> ```
> File "src/sage/rings/function_field/function_field.py", line 1602, in sage.rings.function_field.function_field.FunctionField_polymod.hom
> Failed example:
>     L.hom(r, base_morphism=phi)
> Exception raised:
>     Traceback (most recent call last):
>     ...
>     ValueError: invalid literal for int() with base 10: "Error in dput(length(sage1)) : object 'sage1' not foun"
> ```

Follow up at #26155.



---

archive/issue_comments_402852.json:
```json
{
    "body": "Changed commit from **[`b0920f3`](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)** to **[`f98b015`](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)**",
    "created_at": "2018-08-30T07:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402852",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b0920f3`](https://github.com/sagemath/sagetrac-mirror/commit/b0920f3aebff52a8bdcd663a55618d5b40fd65aa)** to **[`f98b015`](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)**



---

archive/issue_comments_402853.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee\">f98b015</a></td><td><code>Trac #26150: catch internal ValueError to get correct outer error response</code></td></tr></table>\n",
    "created_at": "2018-08-30T07:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402853",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee">f98b015</a></td><td><code>Trac #26150: catch internal ValueError to get correct outer error response</code></td></tr></table>




---

archive/issue_events_360896.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T07:46:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360896"
}
```



---

archive/issue_events_360897.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T07:46:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360897"
}
```



---

archive/issue_comments_402854.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis is now an alternative fix for the issue. Needs review again and let's see what the patchbot says :)",
    "created_at": "2018-08-30T07:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402854",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:11" align="right">comment:11</div>

This is now an alternative fix for the issue. Needs review again and let's see what the patchbot says :)



---

archive/issue_events_360898.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T12:52:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360898"
}
```



---

archive/issue_events_360899.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T12:52:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360899"
}
```



---

archive/issue_comments_402855.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAgain some failing doctests... :(",
    "created_at": "2018-08-30T12:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402855",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:12" align="right">comment:12</div>

Again some failing doctests... :(



---

archive/issue_comments_402856.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af\">b31583a</a></td><td><code>Trac #26150: fix element_constructor of int(1)</code></td></tr></table>\n",
    "created_at": "2018-08-30T14:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402856",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af">b31583a</a></td><td><code>Trac #26150: fix element_constructor of int(1)</code></td></tr></table>




---

archive/issue_comments_402857.json:
```json
{
    "body": "Changed commit from **[`f98b015`](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)** to **[`b31583a`](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)**",
    "created_at": "2018-08-30T14:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402857",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f98b015`](https://github.com/sagemath/sagetrac-mirror/commit/f98b0153ae7d19a2009b3318420367adfdf015ee)** to **[`b31583a`](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)**



---

archive/issue_comments_402858.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5\">b3be7d9</a></td><td><code>Trac #26150: fix doctest (remove error message as something is now working)</code></td></tr></table>\n",
    "created_at": "2018-08-30T14:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5">b3be7d9</a></td><td><code>Trac #26150: fix doctest (remove error message as something is now working)</code></td></tr></table>




---

archive/issue_comments_402859.json:
```json
{
    "body": "Changed commit from **[`b31583a`](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)** to **[`b3be7d9`](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)**",
    "created_at": "2018-08-30T14:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402859",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b31583a`](https://github.com/sagemath/sagetrac-mirror/commit/b31583ade0e406b0f232b53a04c15b9f43a251af)** to **[`b3be7d9`](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)**



---

archive/issue_events_360900.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T14:49:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360900"
}
```



---

archive/issue_events_360901.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2018-08-30T14:49:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360901"
}
```



---

archive/issue_comments_402860.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere is some underlying problem with a recursive call when creating an element out of `int(1)`. This was somehow hidden before. I rewrote the element constructor a bit to adapt; also fixing an issue raised on #24539. The behavior is now more consistent with remaining [SageMath](../wiki/SageMath).\n\nSo again, let us see what the patchbot says...",
    "created_at": "2018-08-30T14:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402860",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:15" align="right">comment:15</div>

There is some underlying problem with a recursive call when creating an element out of `int(1)`. This was somehow hidden before. I rewrote the element constructor a bit to adapt; also fixing an issue raised on #24539. The behavior is now more consistent with remaining [SageMath](../wiki/SageMath).

So again, let us see what the patchbot says...



---

archive/issue_comments_402861.json:
```json
{
    "body": "Changed commit from **[`b3be7d9`](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)** to **[`cdbed4f`](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)**",
    "created_at": "2018-09-15T10:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3be7d9`](https://github.com/sagemath/sagetrac-mirror/commit/b3be7d9009d07730e816e64576a53b07549a03a5)** to **[`cdbed4f`](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)**



---

archive/issue_comments_402862.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852\">cdbed4f</a></td><td><code>Merge tag '8.4.beta3' into t/26150/conv-fraction-field</code></td></tr></table>\n",
    "created_at": "2018-09-15T10:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852">cdbed4f</a></td><td><code>Merge tag '8.4.beta3' into t/26150/conv-fraction-field</code></td></tr></table>




---

archive/issue_comments_402863.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2697d5ca3ae262a1b01ad600a44f2c722a00dec3\">2697d5c</a></td><td><code>Trac #26150: fix using correct one-element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a\">45df8b5</a></td><td><code>Trac #26150: extend trying of decomposing the fraction</code></td></tr></table>\n",
    "created_at": "2018-09-15T17:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402863",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2697d5ca3ae262a1b01ad600a44f2c722a00dec3">2697d5c</a></td><td><code>Trac #26150: fix using correct one-element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a">45df8b5</a></td><td><code>Trac #26150: extend trying of decomposing the fraction</code></td></tr></table>




---

archive/issue_comments_402864.json:
```json
{
    "body": "Changed commit from **[`cdbed4f`](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)** to **[`45df8b5`](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)**",
    "created_at": "2018-09-15T17:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cdbed4f`](https://github.com/sagemath/sagetrac-mirror/commit/cdbed4ff56afe44da878e36afdfb658dc29bc852)** to **[`45df8b5`](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)**



---

archive/issue_comments_402865.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nFinally, I've written a fix that solves the issues and with which the patchbot is happy as well. To be more accurate, I've took the liberty to slightly rewrite the element constructor so that it covers a broader spectrum of inputs for the conversion. Now it should also be \"correct\" in the sense what it does at which point ;)\n\nPlease Review (again)",
    "created_at": "2018-09-16T18:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402865",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:18" align="right">comment:18</div>

Finally, I've written a fix that solves the issues and with which the patchbot is happy as well. To be more accurate, I've took the liberty to slightly rewrite the element constructor so that it covers a broader spectrum of inputs for the conversion. Now it should also be "correct" in the sense what it does at which point ;)

Please Review (again)



---

archive/issue_comments_402866.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n@mezzarobba: You already have reviewed this ticket, but a small change was done after that. I would appreciate a review of the changes :)",
    "created_at": "2019-03-27T20:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402866",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:19" align="right">comment:19</div>

@mezzarobba: You already have reviewed this ticket, but a small change was done after that. I would appreciate a review of the changes :)



---

archive/issue_comments_402867.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThanks for the notice.\n\nI agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?",
    "created_at": "2019-04-03T08:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402867",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:20" align="right">comment:20</div>

Thanks for the notice.

I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?



---

archive/issue_comments_402868.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7625e86cf1a5fbc1793249268d79dd293cf33181\">7625e86</a></td><td><code>Merge tag '8.7' into u/dkrenn/conv-fraction-field</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721\">1a3cc58</a></td><td><code>Trac #26150: add another doctest</code></td></tr></table>\n",
    "created_at": "2019-04-03T12:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7625e86cf1a5fbc1793249268d79dd293cf33181">7625e86</a></td><td><code>Merge tag '8.7' into u/dkrenn/conv-fraction-field</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721">1a3cc58</a></td><td><code>Trac #26150: add another doctest</code></td></tr></table>




---

archive/issue_comments_402869.json:
```json
{
    "body": "Changed commit from **[`45df8b5`](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)** to **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**",
    "created_at": "2019-04-03T12:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402869",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`45df8b5`](https://github.com/sagemath/sagetrac-mirror/commit/45df8b5a5c7e53c500344a69c6cc93c174bd751a)** to **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**



---

archive/issue_comments_402870.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@mezzarobba](#comment:20):\n> Thanks for the notice.\n> \n> I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?\n\nAdded a doctest:\n|                                                                                                                                                 |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|\n\n\n```diff\n+            sage: T.<t> = ZZ[]\n+            sage: S.<s> = ZZ[]\n+            sage: S.fraction_field()(s/(s+1), (t-1)/(t+2))\n+            (s^2 + 2*s)/(s^2 - 1)\n```\nNote that there is a conversion between `S` and `T`, so this conversion should be used also in the fraction field, at least in the case nothing else (proper coercion) works.",
    "created_at": "2019-04-03T12:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402870",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@mezzarobba](#comment:20):
> Thanks for the notice.
> 
> I agree with most of the changes, but I'm not sure I like the unconditional conversions in `resolve_fractions()`. For which cases are they intended?

Added a doctest:
|                                                                                                                                                 |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[1a3cc58](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)|`Trac #26150: add another doctest`|


```diff
+            sage: T.<t> = ZZ[]
+            sage: S.<s> = ZZ[]
+            sage: S.fraction_field()(s/(s+1), (t-1)/(t+2))
+            (s^2 + 2*s)/(s^2 - 1)
```
Note that there is a conversion between `S` and `T`, so this conversion should be used also in the fraction field, at least in the case nothing else (proper coercion) works.



---

archive/issue_events_360902.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-04-07T10:13:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360902"
}
```



---

archive/issue_events_360903.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-04-07T10:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360903"
}
```



---

archive/issue_comments_402871.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIf you are really sure you want that, I won't oppose...",
    "created_at": "2019-04-07T10:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402871",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:23" align="right">comment:23</div>

If you are really sure you want that, I won't oppose...



---

archive/issue_events_360904.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-08T21:34:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360904"
}
```



---

archive/issue_events_360905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "409939a8a98d473fc7e8ca9d9353eee25611a95e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-08T21:34:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26150#event-360905"
}
```



---

archive/issue_comments_402872.json:
```json
{
    "body": "Changed branch from **[u/dkrenn/conv-fraction-field](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/conv-fraction-field)** to **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**",
    "created_at": "2019-04-08T21:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26150#issuecomment-402872",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dkrenn/conv-fraction-field](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/conv-fraction-field)** to **[`1a3cc58`](https://github.com/sagemath/sagetrac-mirror/commit/1a3cc587543fd5d4636ab33685ab27d2e9767721)**
