# Issue 26802: Add DESTDIR support for optional packages that use autotools

archive/issues_026802.json:
```json
{
    "body": "Keywords: destdir 4ti2 bliss cbc csdp deformation fricas gp2c igraph latte_int libogg lidia lrslib mpfrcx sirocco tdlib\n\nAll these packages have standard autotools builds, so their transformation was mostly mechanical and trivial.  Only two slight exceptions:\n\n* The `configure` script for deformation is not actually generated by autoconf and does not support all the standard options (e.g. `--libdir`).  However, the rest of it is straightforward.\n\n* For mpfrcx we also add an `spkg-legacy-uninstall` script.\n\nI've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27039\n\n",
    "closed_at": "2019-01-24T18:17:37Z",
    "created_at": "2019-01-10T13:37:19Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Add DESTDIR support for optional packages that use autotools",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26802",
    "user": "https://github.com/embray"
}
```
Keywords: destdir 4ti2 bliss cbc csdp deformation fricas gp2c igraph latte_int libogg lidia lrslib mpfrcx sirocco tdlib

All these packages have standard autotools builds, so their transformation was mostly mechanical and trivial.  Only two slight exceptions:

* The `configure` script for deformation is not actually generated by autoconf and does not support all the standard options (e.g. `--libdir`).  However, the rest of it is straightforward.

* For mpfrcx we also add an `spkg-legacy-uninstall` script.

I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.

Issue created by migration from https://trac.sagemath.org/ticket/27039





---

archive/issue_comments_376583.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-10T15:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376583",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_376584.json:
```json
{
    "body": "In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?\n\nOtherwise, positive review",
    "created_at": "2019-01-15T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376584",
    "user": "https://github.com/fchapoton"
}
```

In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?

Otherwise, positive review



---

archive/issue_comments_376585.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?\n> \n> Otherwise, positive review\n\n\nI double-checked on this just to be sure, but it is indeed a standard automake package so it is harmless to add the make call, and it looks more \"standard\" without it.  The fact is, this package is just a collection of headers, so there is nothing to \"build\" with a `make` call and it's possible to just skip straight to `make install`.  But should that change for any reason at least our bases are covered this way.  Good catch though--it wasn't obvious.",
    "created_at": "2019-01-16T10:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376585",
    "user": "https://github.com/embray"
}
```

Replying to [comment:2 chapoton]:
> In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?
> 
> Otherwise, positive review


I double-checked on this just to be sure, but it is indeed a standard automake package so it is harmless to add the make call, and it looks more "standard" without it.  The fact is, this package is just a collection of headers, so there is nothing to "build" with a `make` call and it's possible to just skip straight to `make install`.  But should that change for any reason at least our bases are covered this way.  Good catch though--it wasn't obvious.



---

archive/issue_comments_376586.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-16T12:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376586",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_376587.json:
```json
{
    "body": "ok, thanks",
    "created_at": "2019-01-16T12:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376587",
    "user": "https://github.com/fchapoton"
}
```

ok, thanks



---

archive/issue_comments_376588.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-24T18:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376588",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-24T18:17:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26802#event-67142"
}
```



---

archive/issue_comments_376589.json:
```json
{
    "body": "Great to see this merged.  Thanks!",
    "created_at": "2019-01-31T12:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26802#issuecomment-376589",
    "user": "https://github.com/embray"
}
```

Great to see this merged.  Thanks!
