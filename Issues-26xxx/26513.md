# Issue 26513: bug in discovery of SRG' complements - related to twograph_descendant

archive/issues_026276.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nas reported by Ferdinand Ihringer:\n\n```\nThe following two graphs do not work, but their complement does:\n\ngraphs.strongly_regular_graph(539, 250, 105, 125)\ngraphs.strongly_regular_graph(779, 378, 177, 189)\n\nHere the complement does not work:\n\ngraphs.strongly_regular_graph(819, 400, 190, 200)\ngraphs.strongly_regular_graph(819, 418, 217, 209)\n```\n\n```\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-1-5ba69562e41c> in <module>()\n----> 1 graphs.strongly_regular_graph(Integer(539), Integer(250), Integer(105), Integer(125))\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:44406)()\n   2982                 return True\n   2983             ans = f(*params)\n-> 2984             return check_srg(ans[0](*ans[1:]))\n   2985         if f(*params_complement):\n   2986             if existence:\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:23106)()\n   1500                 def la(vv):\n   1501                     from sage.combinat.designs.twographs import twograph_descendant\n-> 1502                     g = strongly_regular_graph(vv, k, l - 2*mu + k)\n   1503                     return twograph_descendant(g, next(g.vertex_iterator()),\n   1504                                                name=True)\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:45159)()\n   3015             if existence:\n   3016                 return True\n-> 3017             raise RuntimeError((\"Andries Brouwer's database claims that such a \"+\n   3018                                 \"({},{},{},{})-strongly regular graph exists, but \"+\n   3019                                 \"Sage does not know how to build it. If *you* do, \"+\n\nRuntimeError: Andries Brouwer's database claims that such a (540,245,100,120)-strongly regular graph exists, but Sage does not know how to build it. If *you* do, please get in touch with us on sage-devel!\nComments: 2-graph\nsage:\nsage: graphs.strongly_regular_graph(539, 288, 162, 144)\ndescendant of  at 0: Graph on 539 vertices\n```\n\n\nThis is related to the missing in Sage constructions. \n\nIn the first two cases graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage), while their complements are\nconstructed using 2-graph descendant from known to Sage SRGs.\n\nThis illustrates a bug in discovery of SRGs via taking complements.\n\n\nIn the last case graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage) or their complements.\n\nThere is also a discrepancy: the database gets broken after trying to build graphs.strongly_regular_graph(819, 400, 190, 200)\ngraphs.strongly_regular_graph(819, 418, 217, 209).\n\n\n\n\n\nCC:  @Ivo-Maffei @ferihr @vbraun\n\nComponent: **graph theory**\n\nAuthor: **Dima Pasechnik**\n\nBranch/Commit: **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**\n\nReviewer: **Ivo Maffei, Ferdinand Ihringer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26513_\n\n",
    "closed_at": "2020-05-02T21:58:28Z",
    "created_at": "2018-10-20T08:05:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bug in discovery of SRG' complements - related to twograph_descendant",
    "type": "issue",
    "updated_at": "2020-05-02T21:58:28Z",
    "url": "https://github.com/sagemath/sage/issues/26513",
    "user": "https://github.com/dimpase"
}
```
<div id="comment:0"></div>

as reported by Ferdinand Ihringer:

```
The following two graphs do not work, but their complement does:

graphs.strongly_regular_graph(539, 250, 105, 125)
graphs.strongly_regular_graph(779, 378, 177, 189)

Here the complement does not work:

graphs.strongly_regular_graph(819, 400, 190, 200)
graphs.strongly_regular_graph(819, 418, 217, 209)
```

```
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-1-5ba69562e41c> in <module>()
----> 1 graphs.strongly_regular_graph(Integer(539), Integer(250), Integer(105), Integer(125))

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:44406)()
   2982                 return True
   2983             ans = f(*params)
-> 2984             return check_srg(ans[0](*ans[1:]))
   2985         if f(*params_complement):
   2986             if existence:

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:23106)()
   1500                 def la(vv):
   1501                     from sage.combinat.designs.twographs import twograph_descendant
-> 1502                     g = strongly_regular_graph(vv, k, l - 2*mu + k)
   1503                     return twograph_descendant(g, next(g.vertex_iterator()),
   1504                                                name=True)

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:45159)()
   3015             if existence:
   3016                 return True
-> 3017             raise RuntimeError(("Andries Brouwer's database claims that such a "+
   3018                                 "({},{},{},{})-strongly regular graph exists, but "+
   3019                                 "Sage does not know how to build it. If *you* do, "+

RuntimeError: Andries Brouwer's database claims that such a (540,245,100,120)-strongly regular graph exists, but Sage does not know how to build it. If *you* do, please get in touch with us on sage-devel!
Comments: 2-graph
sage:
sage: graphs.strongly_regular_graph(539, 288, 162, 144)
descendant of  at 0: Graph on 539 vertices
```


This is related to the missing in Sage constructions. 

In the first two cases graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage), while their complements are
constructed using 2-graph descendant from known to Sage SRGs.

This illustrates a bug in discovery of SRGs via taking complements.


In the last case graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage) or their complements.

There is also a discrepancy: the database gets broken after trying to build graphs.strongly_regular_graph(819, 400, 190, 200)
graphs.strongly_regular_graph(819, 418, 217, 209).





CC:  @Ivo-Maffei @ferihr @vbraun

Component: **graph theory**

Author: **Dima Pasechnik**

Branch/Commit: **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**

Reviewer: **Ivo Maffei, Ferdinand Ihringer**

_Issue created by migration from https://trac.sagemath.org/ticket/26513_





---

archive/issue_events_362134.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-20T08:05:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362134"
}
```



---

archive/issue_events_362135.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-20T08:05:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362135"
}
```



---

archive/issue_events_362136.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-20T08:05:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362136"
}
```



---

archive/issue_events_362137.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-20T08:05:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362137"
}
```



---

archive/issue_comments_408774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -57,6 +57,8 @@\n \n In the last case graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage) or their complements.\n \n+There is also a discrepancy: the database gets broken after trying to build graphs.strongly_regular_graph(819, 400, 190, 200)\n+graphs.strongly_regular_graph(819, 418, 217, 209).\n \n \n \n``````\n",
    "created_at": "2018-10-20T08:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408774",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -57,6 +57,8 @@
 
 In the last case graphs can be constructed using 2-graph descendant from Fickus et al SRGs (cf Brouwer's tables, not yet implemented in Sage) or their complements.
 
+There is also a discrepancy: the database gets broken after trying to build graphs.strongly_regular_graph(819, 400, 190, 200)
+graphs.strongly_regular_graph(819, 418, 217, 209).
 
 
 
``````




---

archive/issue_comments_408775.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThere is also a bug with the database getting corrupt by an attempt to build an SRG:\n\n```\n\u2502 SageMath version 8.4, Release Date: 2018-10-17\nsage: graphs.strongly_regular_graph(819,418,217,209)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-1-b80bcfe45035> in <module>()\n----> 1 graphs.strongly_regular_graph(Integer(819),Integer(418),Integer(217),Integer(209))\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:44406)()\n   2982                 return True\n   2983             ans = f(*params)\n-> 2984             return check_srg(ans[0](*ans[1:]))\n   2985         if f(*params_complement):\n   2986             if existence:\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:23106)()\n   1500                 def la(vv):\n   1501                     from sage.combinat.designs.twographs import twograph_descendant\n-> 1502                     g = strongly_regular_graph(vv, k, l - 2*mu + k)\n   1503                     return twograph_descendant(g, next(g.vertex_iterator()),\n   1504                                                name=True)\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:45159)()\n   3015             if existence:\n   3016                 return True\n-> 3017             raise RuntimeError((\"Andries Brouwer's database claims that such a \"+\n   3018                                 \"({},{},{},{})-strongly regular graph exists, but \"+\n   3019                                 \"Sage does not know how to build it. If *you* do, \"+\n\nRuntimeError: Andries Brouwer's database claims that such a (820,429,228,220)-strongly regular graph exists, but Sage does not know how to build it. If *you* do, please get in touch with us on sage-devel!\nComments: from ETF <a href=\"srgtabrefs.html#Fickus_et_al16\">Fickus et al.</a>; 2-graph\nsage: from sage.graphs.strongly_regular_db import _check_database\nsage: _check_database()\nSage cannot build a (512  133  24   38  ) that exists. Comment from Brouwer's database: <a href=\"srgtabrefs.html#Godsil92\">Godsil</a>(q=8,r=3); pg(7,18,2)?\nSage cannot build a (512  378  282  270 ) that exists. Comment from Brouwer's database: \nSage cannot build a (540  245  100  120 ) that exists. Comment from Brouwer's database: 2-graph\nSage cannot build a (540  294  168  150 ) that exists. Comment from Brouwer's database: from 2-(45,5,1) with 1-factor <a href=\"srgtabrefs.html#Fickus_et_al15\">Fickus et al.</a>; 2-graph\nSage cannot build a (780  369  168  180 ) that exists. Comment from Brouwer's database: 2-graph\nSage cannot build a (780  410  220  210 ) that exists. Comment from Brouwer's database: from 2-(39,3,1) with 1-factor <a href=\"srgtabrefs.html#Fickus_et_al15\">Fickus et al.</a>; 2-graph\nSage cannot build a (820  390  180  190 ) that exists. Comment from Brouwer's database: 2-graph\nSage cannot build a (820  429  228  220 ) that exists. Comment from Brouwer's database: from ETF <a href=\"srgtabrefs.html#Fickus_et_al16\">Fickus et al.</a>; 2-graph\n\nIn Andries Brouwer's database:\n- 462 impossible entries\n- 2916 undecided entries\n- 1160 realizable entries (Sage misses 8 of them)\n```\nwhereas if the 1st call is not run then as expected one gets two more missing entries:\n\n```\nSage cannot build a (819  400  190  200 ) that exists. Comment from Brouwer's database: pg(20,19,10)?; 2-graph*\nSage cannot build a (819  418  217  209 ) that exists. Comment from Brouwer's database: from ETF <a href=\"srgtabrefs.html#Fickus_et_al16\">Fickus et al.</a>; 2-graph*\n```\nand the final count of missing graphs is 10.",
    "created_at": "2018-10-20T08:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408775",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

There is also a bug with the database getting corrupt by an attempt to build an SRG:

```
│ SageMath version 8.4, Release Date: 2018-10-17
sage: graphs.strongly_regular_graph(819,418,217,209)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-1-b80bcfe45035> in <module>()
----> 1 graphs.strongly_regular_graph(Integer(819),Integer(418),Integer(217),Integer(209))

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:44406)()
   2982                 return True
   2983             ans = f(*params)
-> 2984             return check_srg(ans[0](*ans[1:]))
   2985         if f(*params_complement):
   2986             if existence:

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:23106)()
   1500                 def la(vv):
   1501                     from sage.combinat.designs.twographs import twograph_descendant
-> 1502                     g = strongly_regular_graph(vv, k, l - 2*mu + k)
   1503                     return twograph_descendant(g, next(g.vertex_iterator()),
   1504                                                name=True)

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:45159)()
   3015             if existence:
   3016                 return True
-> 3017             raise RuntimeError(("Andries Brouwer's database claims that such a "+
   3018                                 "({},{},{},{})-strongly regular graph exists, but "+
   3019                                 "Sage does not know how to build it. If *you* do, "+

RuntimeError: Andries Brouwer's database claims that such a (820,429,228,220)-strongly regular graph exists, but Sage does not know how to build it. If *you* do, please get in touch with us on sage-devel!
Comments: from ETF <a href="srgtabrefs.html#Fickus_et_al16">Fickus et al.</a>; 2-graph
sage: from sage.graphs.strongly_regular_db import _check_database
sage: _check_database()
Sage cannot build a (512  133  24   38  ) that exists. Comment from Brouwer's database: <a href="srgtabrefs.html#Godsil92">Godsil</a>(q=8,r=3); pg(7,18,2)?
Sage cannot build a (512  378  282  270 ) that exists. Comment from Brouwer's database: 
Sage cannot build a (540  245  100  120 ) that exists. Comment from Brouwer's database: 2-graph
Sage cannot build a (540  294  168  150 ) that exists. Comment from Brouwer's database: from 2-(45,5,1) with 1-factor <a href="srgtabrefs.html#Fickus_et_al15">Fickus et al.</a>; 2-graph
Sage cannot build a (780  369  168  180 ) that exists. Comment from Brouwer's database: 2-graph
Sage cannot build a (780  410  220  210 ) that exists. Comment from Brouwer's database: from 2-(39,3,1) with 1-factor <a href="srgtabrefs.html#Fickus_et_al15">Fickus et al.</a>; 2-graph
Sage cannot build a (820  390  180  190 ) that exists. Comment from Brouwer's database: 2-graph
Sage cannot build a (820  429  228  220 ) that exists. Comment from Brouwer's database: from ETF <a href="srgtabrefs.html#Fickus_et_al16">Fickus et al.</a>; 2-graph

In Andries Brouwer's database:
- 462 impossible entries
- 2916 undecided entries
- 1160 realizable entries (Sage misses 8 of them)
```
whereas if the 1st call is not run then as expected one gets two more missing entries:

```
Sage cannot build a (819  400  190  200 ) that exists. Comment from Brouwer's database: pg(20,19,10)?; 2-graph*
Sage cannot build a (819  418  217  209 ) that exists. Comment from Brouwer's database: from ETF <a href="srgtabrefs.html#Fickus_et_al16">Fickus et al.</a>; 2-graph*
```
and the final count of missing graphs is 10.



---

archive/issue_comments_408776.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe following patch fixes the discovery (but not the database inconsistency, which is a different story):\n\n```diff\ndiff --git a/src/sage/graphs/strongly_regular_db.pyx b/src/sage/graphs/strongly_regular_db.pyx\nindex e8ece2dca0..e4e3fd0189 100644\n--- a/src/sage/graphs/strongly_regular_db.pyx\n+++ b/src/sage/graphs/strongly_regular_db.pyx\n@@ -2981,12 +2981,18 @@ def strongly_regular_graph(int v,int k,int l,int mu=-1,bint existence=False,bint\n             if existence:\n                 return True\n             ans = f(*params)\n-            return check_srg(ans[0](*ans[1:]))\n+            try:\n+                return check_srg(ans[0](*ans[1:]))\n+            except RuntimeError: # try the complement\n+                pass\n         if f(*params_complement):\n             if existence:\n                 return True\n             ans = f(*params_complement)\n-            return check_srg(ans[0](*ans[1:]).complement())\n+            try:\n+                return check_srg(ans[0](*ans[1:]).complement())\n+            except RuntimeError: # try more functions\n+                pass\n \n     # From now on, we have no idea how to build the graph.\n     #\n```",
    "created_at": "2018-12-03T19:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408776",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

The following patch fixes the discovery (but not the database inconsistency, which is a different story):

```diff
diff --git a/src/sage/graphs/strongly_regular_db.pyx b/src/sage/graphs/strongly_regular_db.pyx
index e8ece2dca0..e4e3fd0189 100644
--- a/src/sage/graphs/strongly_regular_db.pyx
+++ b/src/sage/graphs/strongly_regular_db.pyx
@@ -2981,12 +2981,18 @@ def strongly_regular_graph(int v,int k,int l,int mu=-1,bint existence=False,bint
             if existence:
                 return True
             ans = f(*params)
-            return check_srg(ans[0](*ans[1:]))
+            try:
+                return check_srg(ans[0](*ans[1:]))
+            except RuntimeError: # try the complement
+                pass
         if f(*params_complement):
             if existence:
                 return True
             ans = f(*params_complement)
-            return check_srg(ans[0](*ans[1:]).complement())
+            try:
+                return check_srg(ans[0](*ans[1:]).complement())
+            except RuntimeError: # try more functions
+                pass
 
     # From now on, we have no idea how to build the graph.
     #
```



---

archive/issue_comments_408777.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nhere is a quick fix for all the issues here\n\n```diff\n--- a/src/sage/graphs/strongly_regular_db.pyx\n+++ b/src/sage/graphs/strongly_regular_db.pyx\n@@ -1484,12 +1484,15 @@ def is_twograph_descendant_of_srg(int v, int k0, int l, int mu):\n             k = int(kf)\n             if k == kf and \\\n                 strongly_regular_graph(v+1, k, l - 2*mu + k , k - mu,  existence=True) is True:\n-                def la(vv):\n-                    from sage.combinat.designs.twographs import twograph_descendant\n-                    g = strongly_regular_graph(vv, k, l - 2*mu + k)\n-                    return twograph_descendant(g, next(g.vertex_iterator()),\n-                                               name=True)\n-                return la, v + 1\n+                try:\n+                    g = strongly_regular_graph(v+1, k, l - 2*mu + k) # Sage might not know how to build g\n+                    def la(gg):\n+                        from sage.combinat.designs.twographs import twograph_descendant\n+                        return twograph_descendant(gg, next(gg.vertex_iterator()),\n+                                                   name=True)\n+                    return la, g \n+                except RuntimeError:\n```\n\nbasically, `la()` must keep its promise to return a graph if called, but currently it does not if `g` can't be built, due to an absent implementation.\nA naive way (in the patch) is just to try to actually build `g` first.",
    "created_at": "2020-04-03T17:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408777",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

here is a quick fix for all the issues here

```diff
--- a/src/sage/graphs/strongly_regular_db.pyx
+++ b/src/sage/graphs/strongly_regular_db.pyx
@@ -1484,12 +1484,15 @@ def is_twograph_descendant_of_srg(int v, int k0, int l, int mu):
             k = int(kf)
             if k == kf and \
                 strongly_regular_graph(v+1, k, l - 2*mu + k , k - mu,  existence=True) is True:
-                def la(vv):
-                    from sage.combinat.designs.twographs import twograph_descendant
-                    g = strongly_regular_graph(vv, k, l - 2*mu + k)
-                    return twograph_descendant(g, next(g.vertex_iterator()),
-                                               name=True)
-                return la, v + 1
+                try:
+                    g = strongly_regular_graph(v+1, k, l - 2*mu + k) # Sage might not know how to build g
+                    def la(gg):
+                        from sage.combinat.designs.twographs import twograph_descendant
+                        return twograph_descendant(gg, next(gg.vertex_iterator()),
+                                                   name=True)
+                    return la, g 
+                except RuntimeError:
```

basically, `la()` must keep its promise to return a graph if called, but currently it does not if `g` can't be built, due to an absent implementation.
A naive way (in the patch) is just to try to actually build `g` first.



---

archive/issue_events_362138.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-06T03:53:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362138"
}
```



---

archive/issue_comments_408778.json:
```json
{
    "body": "Commit: **[`0caf90e`](https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880)**",
    "created_at": "2020-04-06T03:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408778",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`0caf90e`](https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880)**



---

archive/issue_comments_408779.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-04-06T03:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408779",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_408780.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880\"><code>0caf90e</code></a></td><td><code>fix for the problem reported on trac #26513</code></td></tr></table>\n",
    "created_at": "2020-04-06T03:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408780",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880"><code>0caf90e</code></a></td><td><code>fix for the problem reported on trac #26513</code></td></tr></table>




---

archive/issue_events_362139.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-06T03:53:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362139"
}
```



---

archive/issue_events_362140.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-06T03:53:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362140"
}
```



---

archive/issue_comments_408781.json:
```json
{
    "body": "Branch: **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)**",
    "created_at": "2020-04-06T03:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408781",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)**



---

archive/issue_comments_408782.json:
```json
{
    "body": "Changed commit from **[`0caf90e`](https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880)** to **[`e64452c`](https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913)**",
    "created_at": "2020-04-07T18:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408782",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0caf90e`](https://github.com/sagemath/sagetrac-mirror/commit/0caf90ec95464c6b505b3c94cbecb5a01a531880)** to **[`e64452c`](https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913)**



---

archive/issue_comments_408783.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913\"><code>e64452c</code></a></td><td><code>remove forgotten address in a test</code></td></tr></table>\n",
    "created_at": "2020-04-07T18:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408783",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913"><code>e64452c</code></a></td><td><code>remove forgotten address in a test</code></td></tr></table>




---

archive/issue_comments_408784.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI don't fully understand how the srg database works, but I looked at the new code and I see its point.\n\nThe `la` function contains a reference to `g[0]`, but `g` is defined in in the scope of `is_twograph_descendant_of_srg` and not returned. This seems weird (does not `g[0]` get destroyed?), but, after some tests, it looks like Cython makes it work, so I just want to \nbring it to your attention since you definitely know more than me how Cython works.\nApart from the above, the `la` function still contains some debugging code (lines 1489 and 1492).\nIn `strongly_regular_graph` the code that handles `mu == -1` (line 2838, 2839) is pointless as the same code is executed inside `strongly_regular_graph_lazy`.\n\nEverything else looks good!",
    "created_at": "2020-04-08T23:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408784",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:7" align="right">comment:7</div>

I don't fully understand how the srg database works, but I looked at the new code and I see its point.

The `la` function contains a reference to `g[0]`, but `g` is defined in in the scope of `is_twograph_descendant_of_srg` and not returned. This seems weird (does not `g[0]` get destroyed?), but, after some tests, it looks like Cython makes it work, so I just want to 
bring it to your attention since you definitely know more than me how Cython works.
Apart from the above, the `la` function still contains some debugging code (lines 1489 and 1492).
In `strongly_regular_graph` the code that handles `mu == -1` (line 2838, 2839) is pointless as the same code is executed inside `strongly_regular_graph_lazy`.

Everything else looks good!



---

archive/issue_comments_408785.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe following works in the develop branch or 9.0, but no longer works with your version. It is the only set of parameters where I entcountered this issue, but I failed at automating my testing process.\n\n\n```\nsage: graphs.strongly_regular_graph(209, 100, 45, 50)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-3438f70cd243> in <module>()\n----> 1 graphs.strongly_regular_graph(Integer(209), Integer(100), Integer(45), Integer(50))\n\n/home/ferihr/git/sage/local/lib/python3.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:41956)()\n   2841     if existence is True:\n   2842         return g\n-> 2843     G = g[0](*g[1:])\n   2844     if check and (v,k,l,mu) != G.is_strongly_regular(parameters=True):\n   2845         params = (v,k,l,mu)\n\n/home/ferihr/git/sage/local/lib/python3.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:22420)()\n   1491                         from sage.combinat.designs.twographs import twograph_descendant\n   1492                     #    print(\"in la:\", g[0], gr)\n-> 1493                         gg = g[0](*gr)\n   1494                         if (gg.name() is None) or (gg.name() == ''):\n   1495                             gg = Graph(gg, name=str((v+1, k, l - 2*mu + k , k - mu))+\"-strongly regular graph\")\n\nTypeError: lambda27() takes exactly one argument (0 given)\n```",
    "created_at": "2020-04-09T17:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408785",
    "user": "https://github.com/ferihr"
}
```

<div id="comment:8" align="right">comment:8</div>

The following works in the develop branch or 9.0, but no longer works with your version. It is the only set of parameters where I entcountered this issue, but I failed at automating my testing process.


```
sage: graphs.strongly_regular_graph(209, 100, 45, 50)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-3438f70cd243> in <module>()
----> 1 graphs.strongly_regular_graph(Integer(209), Integer(100), Integer(45), Integer(50))

/home/ferihr/git/sage/local/lib/python3.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.strongly_regular_graph (build/cythonized/sage/graphs/strongly_regular_db.c:41956)()
   2841     if existence is True:
   2842         return g
-> 2843     G = g[0](*g[1:])
   2844     if check and (v,k,l,mu) != G.is_strongly_regular(parameters=True):
   2845         params = (v,k,l,mu)

/home/ferihr/git/sage/local/lib/python3.7/site-packages/sage/graphs/strongly_regular_db.pyx in sage.graphs.strongly_regular_db.is_twograph_descendant_of_srg.la (build/cythonized/sage/graphs/strongly_regular_db.c:22420)()
   1491                         from sage.combinat.designs.twographs import twograph_descendant
   1492                     #    print("in la:", g[0], gr)
-> 1493                         gg = g[0](*gr)
   1494                         if (gg.name() is None) or (gg.name() == ''):
   1495                             gg = Graph(gg, name=str((v+1, k, l - 2*mu + k , k - mu))+"-strongly regular graph")

TypeError: lambda27() takes exactly one argument (0 given)
```



---

archive/issue_events_362141.json:
```json
{
    "actor": "https://github.com/ferihr",
    "created_at": "2020-04-09T17:10:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362141"
}
```



---

archive/issue_events_362142.json:
```json
{
    "actor": "https://github.com/ferihr",
    "created_at": "2020-04-09T17:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362142"
}
```



---

archive/issue_comments_408786.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks, I noticed your helpful reviews only now, as somehow I stopped receiving email notifications. I'll work on this soon.",
    "created_at": "2020-04-11T14:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408786",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks, I noticed your helpful reviews only now, as somehow I stopped receiving email notifications. I'll work on this soon.



---

archive/issue_comments_408787.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI had a look at the bug yesterday evening, and I believe the issues is the lambda function at line 2903. I think inserting `*` before `t` will fix it, but I have not done much testing. (another lambda function that probably needs the same fix can be found at line 2937)",
    "created_at": "2020-04-11T16:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408787",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:11" align="right">comment:11</div>

I had a look at the bug yesterday evening, and I believe the issues is the lambda function at line 2903. I think inserting `*` before `t` will fix it, but I have not done much testing. (another lambda function that probably needs the same fix can be found at line 2937)



---

archive/issue_comments_408788.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@Ivo-Maffei](#comment%3A11):\n> I had a look at the bug yesterday evening, and I believe the issues is the lambda function at line 2903. I think inserting `*` before `t` will fix it, but I have not done much testing. (another lambda function that probably needs the same fix can be found at line 2937)\n\nYes, good catch, you are right about line 2903, it should be `lambda *t` to accommodate functions\nwithout arguments. On the line 2937 all the functions are with at least one argument,\nso it should be OK.",
    "created_at": "2020-04-12T08:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408788",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@Ivo-Maffei](#comment%3A11):
> I had a look at the bug yesterday evening, and I believe the issues is the lambda function at line 2903. I think inserting `*` before `t` will fix it, but I have not done much testing. (another lambda function that probably needs the same fix can be found at line 2937)

Yes, good catch, you are right about line 2903, it should be `lambda *t` to accommodate functions
without arguments. On the line 2937 all the functions are with at least one argument,
so it should be OK.



---

archive/issue_comments_408789.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96\"><code>238d7b6</code></a></td><td><code>missing * in lambda, more tests, removed prints</code></td></tr></table>\n",
    "created_at": "2020-04-12T08:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408789",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96"><code>238d7b6</code></a></td><td><code>missing * in lambda, more tests, removed prints</code></td></tr></table>




---

archive/issue_comments_408790.json:
```json
{
    "body": "Changed commit from **[`e64452c`](https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913)** to **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)**",
    "created_at": "2020-04-12T08:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408790",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e64452c`](https://github.com/sagemath/sagetrac-mirror/commit/e64452cf794aa5838e85f798b5ea87d488912913)** to **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)**



---

archive/issue_comments_408791.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOK, this appears to fix everything. To test every graph, one can run mentioned in the manual loop (you'll need gap_packages spkg installed):\n\n```\n        sage: from sage.graphs.strongly_regular_db import apparently_feasible_parameters\n        sage: for p in sorted(apparently_feasible_parameters(1300)):   # not tested\n        ....:     if graphs.strongly_regular_graph(*p,existence=True) is True: # not tested\n        ....:         try:                                             # not tested\n        ....:             _ = graphs.strongly_regular_graph(*p)        # not tested\n        ....:             print(p, \"built successfully\")               # not tested\n        ....:         except RuntimeError as e:                        # not tested\n        ....:             if 'Brouwer' not in str(e):                  # not tested\n        ....:                 raise                                    # not tested\n```",
    "created_at": "2020-04-12T08:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408791",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

OK, this appears to fix everything. To test every graph, one can run mentioned in the manual loop (you'll need gap_packages spkg installed):

```
        sage: from sage.graphs.strongly_regular_db import apparently_feasible_parameters
        sage: for p in sorted(apparently_feasible_parameters(1300)):   # not tested
        ....:     if graphs.strongly_regular_graph(*p,existence=True) is True: # not tested
        ....:         try:                                             # not tested
        ....:             _ = graphs.strongly_regular_graph(*p)        # not tested
        ....:             print(p, "built successfully")               # not tested
        ....:         except RuntimeError as e:                        # not tested
        ....:             if 'Brouwer' not in str(e):                  # not tested
        ....:                 raise                                    # not tested
```



---

archive/issue_events_362143.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-12T08:24:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362143"
}
```



---

archive/issue_events_362144.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-12T08:24:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362144"
}
```



---

archive/issue_comments_408792.json:
```json
{
    "body": "Reviewer: **Ivo Maffei, Ferdinand Ihringer**",
    "created_at": "2020-04-12T08:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408792",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Ivo Maffei, Ferdinand Ihringer**



---

archive/issue_events_362145.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-04-21T11:38:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362145"
}
```



---

archive/issue_events_362146.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-04-21T11:38:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362146"
}
```



---

archive/issue_comments_408793.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks!\n\nVolker, could this make it into 9.1? Just one file is touched, long-standing bug fixed.",
    "created_at": "2020-04-21T15:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408793",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks!

Volker, could this make it into 9.1? Just one file is touched, long-standing bug fixed.



---

archive/issue_comments_408794.json:
```json
{
    "body": "Changed branch from **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)** to **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)**",
    "created_at": "2020-04-23T22:33:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408794",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)** to **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)**



---

archive/issue_events_362147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362147"
}
```



---

archive/issue_events_362148.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362148"
}
```



---

archive/issue_comments_408795.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOn Python 2:\n\n```\n**********************************************************************\nFile \"src/sage/graphs/strongly_regular_db.pyx\", line 2812, in sage.graphs.strongly_regular_db.strongly_regular_graph\nFailed example:\n    graphs.strongly_regular_graph(209, 100, 45, 50)\nExpected:\n    descendant of complement(merging of S_7 on Circulant(6,[1,4])s) at 11: Graph on 209 vertices\nGot:\n    descendant of complement(merging of S_7 on Circulant(6,[1,4])s) at 1: Graph on 209 vertices\n**********************************************************************\n1 item had failures:\n   1 of  20 in sage.graphs.strongly_regular_db.strongly_regular_graph\n    [330 tests, 1 failure, 24.69 s]\n**********************************************************************\n```",
    "created_at": "2020-04-25T08:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408795",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

On Python 2:

```
**********************************************************************
File "src/sage/graphs/strongly_regular_db.pyx", line 2812, in sage.graphs.strongly_regular_db.strongly_regular_graph
Failed example:
    graphs.strongly_regular_graph(209, 100, 45, 50)
Expected:
    descendant of complement(merging of S_7 on Circulant(6,[1,4])s) at 11: Graph on 209 vertices
Got:
    descendant of complement(merging of S_7 on Circulant(6,[1,4])s) at 1: Graph on 209 vertices
**********************************************************************
1 item had failures:
   1 of  20 in sage.graphs.strongly_regular_db.strongly_regular_graph
    [330 tests, 1 failure, 24.69 s]
**********************************************************************
```



---

archive/issue_events_362149.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-25T08:56:03Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362149"
}
```



---

archive/issue_comments_408796.json:
```json
{
    "body": "Changed commit from **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)** to none",
    "created_at": "2020-04-25T08:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408796",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)** to none



---

archive/issue_comments_408797.json:
```json
{
    "body": "Commit: **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**",
    "created_at": "2020-04-26T06:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408797",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**



---

archive/issue_comments_408798.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc2d07f0c30024826e0d2e01cde4983d7cd789ab\"><code>bc2d07f</code></a></td><td><code>fix for the problem reported on trac #26513</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b330c369a5c6c6f12190b213d0abe0cfe5787e2\"><code>8b330c3</code></a></td><td><code>remove forgotten address in a test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d08181bc48946a2354a25393642b1c014fffe010\"><code>d08181b</code></a></td><td><code>missing * in lambda, more tests, removed prints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a\"><code>b267320</code></a></td><td><code>do not depend on vertex numbering in some tests</code></td></tr></table>\n",
    "created_at": "2020-04-26T06:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408798",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc2d07f0c30024826e0d2e01cde4983d7cd789ab"><code>bc2d07f</code></a></td><td><code>fix for the problem reported on trac #26513</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b330c369a5c6c6f12190b213d0abe0cfe5787e2"><code>8b330c3</code></a></td><td><code>remove forgotten address in a test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d08181bc48946a2354a25393642b1c014fffe010"><code>d08181b</code></a></td><td><code>missing * in lambda, more tests, removed prints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a"><code>b267320</code></a></td><td><code>do not depend on vertex numbering in some tests</code></td></tr></table>




---

archive/issue_events_362150.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-26T06:01:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362150"
}
```



---

archive/issue_comments_408799.json:
```json
{
    "body": "Changed branch from **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)** to **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)**",
    "created_at": "2020-04-26T06:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408799",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[`238d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/238d7b66ac4b438db2e099e5f68ac9aa5ad98e96)** to **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)**



---

archive/issue_events_362151.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-26T06:02:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362151"
}
```



---

archive/issue_events_362152.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-26T06:02:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362152"
}
```



---

archive/issue_comments_408800.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOK, the trivial fix by replacing unstable indices by `...`",
    "created_at": "2020-04-26T06:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408800",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

OK, the trivial fix by replacing unstable indices by `...`



---

archive/issue_events_362153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-02T21:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362153"
}
```



---

archive/issue_events_362154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f6d1907e33dd2478c59aff9de37c7dc214391e12",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-05-02T21:58:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26513#event-362154"
}
```



---

archive/issue_comments_408801.json:
```json
{
    "body": "Changed branch from **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)** to **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**",
    "created_at": "2020-05-02T21:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26513#issuecomment-408801",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/graphs/srgcomplfix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/graphs/srgcomplfix)** to **[`b267320`](https://github.com/sagemath/sagetrac-mirror/commit/b2673206665f09f15ba3ebc6b5b176d7825dd42a)**
