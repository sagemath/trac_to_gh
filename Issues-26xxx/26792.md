# Issue 26792: py3: Stop to use sort on KeyConvertingDict object

archive/issues_026555.json:
```json
{
    "assignees": [],
    "body": "With python3 we currently have 40 failures of type \n\n```\nTypeError: '<' not supported between instances of 'KeyConvertingDict' and 'KeyConvertingDict'\n```\nThese errors comes from the call of `V.sort()` in multi_polynomial_ideal.py\", line 2381, `variety` function.\n\nThe root reason for calling `sort` is for doctest displaying : \n>commit 17f42824d8941b23825fea1a6d82278bd5ef6c74\n>Author: Carl Witty <cwitty@newtonlabs.com>\n>Date:   Wed Oct 24 18:36:37 2007 -0700\n>\n>    Sort results of variety(), for better cross-architecture doctest compatibility.\n>    This compensates for the fact that the results of Singular's triangular\n>    decomposition algorithm triangLfak appear in a different order on\n>    different architectures.  (It would be better to fix this in\n>    triangular_decomposition(), but the obvious approach of sorting its\n>    result failed due to TRAC #991.)\n\nAs it will not make a lot of sense to implement comparison operators for KeyConvertingDict this ticket aim at solving the sorting problems at doctests level rather than at python source code level.\n\nBranch/Commit: **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Vincent Klein**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26792_\n\n",
    "closed_at": "2019-02-22T22:01:10Z",
    "created_at": "2018-11-30T10:37:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: Stop to use sort on KeyConvertingDict object",
    "type": "issue",
    "updated_at": "2019-02-22T22:01:10Z",
    "url": "https://github.com/sagemath/sage/issues/26792",
    "user": "https://github.com/vinklein"
}
```
With python3 we currently have 40 failures of type 

```
TypeError: '<' not supported between instances of 'KeyConvertingDict' and 'KeyConvertingDict'
```
These errors comes from the call of `V.sort()` in multi_polynomial_ideal.py", line 2381, `variety` function.

The root reason for calling `sort` is for doctest displaying : 
>commit 17f42824d8941b23825fea1a6d82278bd5ef6c74
>Author: Carl Witty <cwitty@newtonlabs.com>
>Date:   Wed Oct 24 18:36:37 2007 -0700
>
>    Sort results of variety(), for better cross-architecture doctest compatibility.
>    This compensates for the fact that the results of Singular's triangular
>    decomposition algorithm triangLfak appear in a different order on
>    different architectures.  (It would be better to fix this in
>    triangular_decomposition(), but the obvious approach of sorting its
>    result failed due to TRAC #991.)

As it will not make a lot of sense to implement comparison operators for KeyConvertingDict this ticket aim at solving the sorting problems at doctests level rather than at python source code level.

Branch/Commit: **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**

Reviewer: **Frédéric Chapoton**

Author: **Vincent Klein**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/26792_





---

archive/issue_events_368251.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-30T10:37:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368251"
}
```



---

archive/issue_events_368252.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-30T10:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368252"
}
```



---

archive/issue_events_368253.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-30T10:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368253"
}
```



---

archive/issue_events_368254.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-30T10:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368254"
}
```



---

archive/issue_comments_412670.json:
```json
{
    "body": "Reviewer: **Vincent Klein**",
    "created_at": "2018-11-30T10:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412670",
    "user": "https://github.com/vinklein"
}
```

Reviewer: **Vincent Klein**



---

archive/issue_comments_412671.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to none",
    "created_at": "2018-11-30T10:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412671",
    "user": "https://github.com/vinklein"
}
```

Changed reviewer from **Vincent Klein** to none



---

archive/issue_comments_412672.json:
```json
{
    "body": "Author: **Vincent Klein**",
    "created_at": "2018-11-30T10:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412672",
    "user": "https://github.com/vinklein"
}
```

Author: **Vincent Klein**



---

archive/issue_comments_412673.json:
```json
{
    "body": "Branch: **[u/vklein/26792](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/26792)**",
    "created_at": "2018-11-30T16:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412673",
    "user": "https://github.com/vinklein"
}
```

Branch: **[u/vklein/26792](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/26792)**



---

archive/issue_comments_412674.json:
```json
{
    "body": "Commit: **[4b8a3e5](https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06)**",
    "created_at": "2018-11-30T17:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412674",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[4b8a3e5](https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06)**



---

archive/issue_comments_412675.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06\">4b8a3e5</a></td><td><code>Trac #26781: replace dict.iteritems calls by dict.items</code></td></tr></table>\n",
    "created_at": "2018-11-30T17:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412675",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06">4b8a3e5</a></td><td><code>Trac #26781: replace dict.iteritems calls by dict.items</code></td></tr></table>




---

archive/issue_comments_412676.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAdd #23572 as dependency for mpoly renaming.",
    "created_at": "2018-12-03T08:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412676",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:5" align="right">comment:5</div>

Add #23572 as dependency for mpoly renaming.



---

archive/issue_comments_412677.json:
```json
{
    "body": "Dependencies: **#23572**",
    "created_at": "2018-12-03T08:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412677",
    "user": "https://github.com/vinklein"
}
```

Dependencies: **#23572**



---

archive/issue_events_368255.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-29T14:37:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368255"
}
```



---

archive/issue_events_368256.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-29T14:37:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368256"
}
```



---

archive/issue_comments_412678.json:
```json
{
    "body": "Changed commit from **[4b8a3e5](https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06)** to **[b78d1c4](https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6)**",
    "created_at": "2019-01-23T10:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412678",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4b8a3e5](https://github.com/sagemath/sagetrac-mirror/commit/4b8a3e59a962bb6c003162ff0ab8fe986c111d06)** to **[b78d1c4](https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6)**



---

archive/issue_comments_412679.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b\">b32170f</a></td><td><code>reviewer suggestion about independent set test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/324b483928015c6aa59b00eb7ba4ca9e3cfa3841\">324b483</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71\">a00c64c</a></td><td><code>livre sage doctests: fix floating errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c6139a8390accbad55e913cba4dd06f2f74787a\">3c6139a</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b\">6d6fb70</a></td><td><code>partial fix for numerical noise on osX</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17d97d8a974bcc684668385b4072803d69cfa815\">17d97d8</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f\">6da3629</a></td><td><code>book doctests : adding some tolerance again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fd786727db15f32d5a7781e1899d4a5ec54ff9b\">5fd7867</a></td><td><code>Trac #26792: py3: Stop to use sort on KeyConvertingDict object</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/140623f825caef3fc1df86808a530422c2b4a709\">140623f</a></td><td><code>Trac #26792: py3: fix test.french_book_mpoly module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6\">b78d1c4</a></td><td><code>Trac #26792: replace dict.iteritems calls by dict.items</code></td></tr></table>\n",
    "created_at": "2019-01-23T10:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412679",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b">b32170f</a></td><td><code>reviewer suggestion about independent set test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/324b483928015c6aa59b00eb7ba4ca9e3cfa3841">324b483</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71">a00c64c</a></td><td><code>livre sage doctests: fix floating errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c6139a8390accbad55e913cba4dd06f2f74787a">3c6139a</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b">6d6fb70</a></td><td><code>partial fix for numerical noise on osX</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17d97d8a974bcc684668385b4072803d69cfa815">17d97d8</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f">6da3629</a></td><td><code>book doctests : adding some tolerance again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fd786727db15f32d5a7781e1899d4a5ec54ff9b">5fd7867</a></td><td><code>Trac #26792: py3: Stop to use sort on KeyConvertingDict object</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/140623f825caef3fc1df86808a530422c2b4a709">140623f</a></td><td><code>Trac #26792: py3: fix test.french_book_mpoly module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6">b78d1c4</a></td><td><code>Trac #26792: replace dict.iteritems calls by dict.items</code></td></tr></table>




---

archive/issue_comments_412680.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/822e4dea5cd65ec8061c9c73676762a1228fe61b\">822e4de</a></td><td><code>Trac #26792: py3: Stop to use sort on KeyConvertingDict object</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db\">ceee97f</a></td><td><code>Trac #26792: replace dict.iteritems calls by dict.items</code></td></tr></table>\n",
    "created_at": "2019-01-31T14:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412680",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/822e4dea5cd65ec8061c9c73676762a1228fe61b">822e4de</a></td><td><code>Trac #26792: py3: Stop to use sort on KeyConvertingDict object</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db">ceee97f</a></td><td><code>Trac #26792: replace dict.iteritems calls by dict.items</code></td></tr></table>




---

archive/issue_comments_412681.json:
```json
{
    "body": "Changed commit from **[b78d1c4](https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6)** to **[ceee97f](https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db)**",
    "created_at": "2019-01-31T14:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412681",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b78d1c4](https://github.com/sagemath/sagetrac-mirror/commit/b78d1c42b3d3dbab29075404285d965ded990ee6)** to **[ceee97f](https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db)**



---

archive/issue_comments_412682.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTicket rebased on 8.7.beta1.",
    "created_at": "2019-01-31T14:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412682",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:9" align="right">comment:9</div>

Ticket rebased on 8.7.beta1.



---

archive/issue_comments_412683.json:
```json
{
    "body": "Changed dependencies from **#23572** to none",
    "created_at": "2019-01-31T14:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412683",
    "user": "https://github.com/vinklein"
}
```

Changed dependencies from **#23572** to none



---

archive/issue_comments_412684.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac\">3c0660c</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>\n",
    "created_at": "2019-01-31T15:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac">3c0660c</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>




---

archive/issue_comments_412685.json:
```json
{
    "body": "Changed commit from **[ceee97f](https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db)** to **[3c0660c](https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac)**",
    "created_at": "2019-01-31T15:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412685",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ceee97f](https://github.com/sagemath/sagetrac-mirror/commit/ceee97f1c993abec0f194e23631ab799f86e71db)** to **[3c0660c](https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac)**



---

archive/issue_comments_412686.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nFix mpoly.py doctests and remove #23572 dependency.",
    "created_at": "2019-01-31T15:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412686",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:11" align="right">comment:11</div>

Fix mpoly.py doctests and remove #23572 dependency.



---

archive/issue_comments_412687.json:
```json
{
    "body": "Changed commit from **[3c0660c](https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac)** to **[9f3984b](https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b)**",
    "created_at": "2019-01-31T15:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3c0660c](https://github.com/sagemath/sagetrac-mirror/commit/3c0660cb0219f4d4f9a5f111050ddf652dc2d6ac)** to **[9f3984b](https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b)**



---

archive/issue_comments_412688.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b\">9f3984b</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>\n",
    "created_at": "2019-01-31T15:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b">9f3984b</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>




---

archive/issue_comments_412689.json:
```json
{
    "body": "Changed commit from **[9f3984b](https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b)** to **[f5ce2fa](https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75)**",
    "created_at": "2019-01-31T16:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412689",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9f3984b](https://github.com/sagemath/sagetrac-mirror/commit/9f3984b12fba4c0ffec6ff761a5faf76637fad3b)** to **[f5ce2fa](https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75)**



---

archive/issue_comments_412690.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75\">f5ce2fa</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>\n",
    "created_at": "2019-01-31T16:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412690",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75">f5ce2fa</a></td><td><code>Trac #26792: fix mpoly.py doctests</code></td></tr></table>




---

archive/issue_comments_412691.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nticket on hold in order to let priority for #23572",
    "created_at": "2019-01-31T16:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412691",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:14" align="right">comment:14</div>

ticket on hold in order to let priority for #23572



---

archive/issue_comments_412692.json:
```json
{
    "body": "Dependencies: **#23572**",
    "created_at": "2019-01-31T16:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412692",
    "user": "https://github.com/vinklein"
}
```

Dependencies: **#23572**



---

archive/issue_comments_412693.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\ntime to start again with this ticket ; this should be a great step forward when done",
    "created_at": "2019-02-15T20:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412693",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

time to start again with this ticket ; this should be a great step forward when done



---

archive/issue_comments_412694.json:
```json
{
    "body": "Changed branch from **[u/vklein/26792](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/26792)** to **[public/ticket/26792](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/26792)**",
    "created_at": "2019-02-16T19:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412694",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/vklein/26792](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/26792)** to **[public/ticket/26792](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/26792)**



---

archive/issue_comments_412695.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b\">2f908f0</a></td><td><code>Merge branch 'u/vklein/26792' in 8.7.b4</code></td></tr></table>\n",
    "created_at": "2019-02-16T19:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412695",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b">2f908f0</a></td><td><code>Merge branch 'u/vklein/26792' in 8.7.b4</code></td></tr></table>




---

archive/issue_events_368257.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-16T19:31:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368257"
}
```



---

archive/issue_comments_412696.json:
```json
{
    "body": "Changed commit from **[f5ce2fa](https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75)** to **[2f908f0](https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b)**",
    "created_at": "2019-02-16T19:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412696",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[f5ce2fa](https://github.com/sagemath/sagetrac-mirror/commit/f5ce2fa06f5f4c7da222461a8a3477d0302dbe75)** to **[2f908f0](https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b)**



---

archive/issue_comments_412697.json:
```json
{
    "body": "Changed dependencies from **#23572** to none",
    "created_at": "2019-02-16T19:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412697",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#23572** to none



---

archive/issue_comments_412698.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nremains one failing doctest",
    "created_at": "2019-02-17T07:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412698",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

remains one failing doctest



---

archive/issue_events_368258.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-17T07:32:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368258"
}
```



---

archive/issue_events_368259.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-17T07:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368259"
}
```



---

archive/issue_comments_412699.json:
```json
{
    "body": "Changed commit from **[2f908f0](https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b)** to **[f4a2bfa](https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8)**",
    "created_at": "2019-02-18T19:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2f908f0](https://github.com/sagemath/sagetrac-mirror/commit/2f908f0961293e36c42bd1e2fe81153fafd44b0b)** to **[f4a2bfa](https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8)**



---

archive/issue_comments_412700.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8\">f4a2bfa</a></td><td><code>trac 26792 fixing  one doctest</code></td></tr></table>\n",
    "created_at": "2019-02-18T19:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412700",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8">f4a2bfa</a></td><td><code>trac 26792 fixing  one doctest</code></td></tr></table>




---

archive/issue_events_368260.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-18T19:16:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368260"
}
```



---

archive/issue_events_368261.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-18T19:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368261"
}
```



---

archive/issue_comments_412701.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI get a merge conflict with 8.7.beta4: src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py",
    "created_at": "2019-02-18T19:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412701",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

I get a merge conflict with 8.7.beta4: src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py



---

archive/issue_comments_412702.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThere is a related doctest failure in `misc/converting_dict.py`. Four Python 3 failures in the develop branch are replaced by 1 with this branch.",
    "created_at": "2019-02-18T19:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412702",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

There is a related doctest failure in `misc/converting_dict.py`. Four Python 3 failures in the develop branch are replaced by 1 with this branch.



---

archive/issue_comments_412703.json:
```json
{
    "body": "Changed commit from **[f4a2bfa](https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8)** to **[945857f](https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be)**",
    "created_at": "2019-02-18T20:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f4a2bfa](https://github.com/sagemath/sagetrac-mirror/commit/f4a2bfa9f1490a4795ddf3d5232262d991325ae8)** to **[945857f](https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be)**



---

archive/issue_comments_412704.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be\">945857f</a></td><td><code>trac 26792 trying to fix a doctest</code></td></tr></table>\n",
    "created_at": "2019-02-18T20:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412704",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be">945857f</a></td><td><code>trac 26792 trying to fix a doctest</code></td></tr></table>




---

archive/issue_comments_412705.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe new test passes with py3 but not py2.",
    "created_at": "2019-02-18T23:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412705",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

The new test passes with py3 but not py2.



---

archive/issue_comments_412706.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nand before my last commit it was the contrary. Probably one should make sure that the repr of these \"dicts\" is conveniently sorted in the same way for both py2 and py3.",
    "created_at": "2019-02-19T08:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412706",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

and before my last commit it was the contrary. Probably one should make sure that the repr of these "dicts" is conveniently sorted in the same way for both py2 and py3.



---

archive/issue_events_368262.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-19T08:10:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368262"
}
```



---

archive/issue_events_368263.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-19T08:10:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368263"
}
```



---

archive/issue_comments_412707.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI will fix that.",
    "created_at": "2019-02-19T08:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412707",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:25" align="right">comment:25</div>

I will fix that.



---

archive/issue_comments_412708.json:
```json
{
    "body": "Changed commit from **[945857f](https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be)** to **[59c980e](https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23)**",
    "created_at": "2019-02-19T10:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412708",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[945857f](https://github.com/sagemath/sagetrac-mirror/commit/945857ffe6b2f66ecbdeb84369ad0d402e51c5be)** to **[59c980e](https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23)**



---

archive/issue_comments_412709.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23\">59c980e</a></td><td><code>Trac #26792: Fix doctest in converting_dict.py</code></td></tr></table>\n",
    "created_at": "2019-02-19T10:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412709",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23">59c980e</a></td><td><code>Trac #26792: Fix doctest in converting_dict.py</code></td></tr></table>




---

archive/issue_comments_412710.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@fchapoton](#comment:24):\n> and before my last commit it was the contrary. Probably one should make sure that the repr of these \"dicts\" is conveniently sorted in the same way for both py2 and py3.\n\nThe `__repr__` called by `KeyConvertingDict` is the one inherited from python's `dict` i don't think we should override it just for doctests compatibility. I prefer to modify the doctests.",
    "created_at": "2019-02-19T10:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412710",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@fchapoton](#comment:24):
> and before my last commit it was the contrary. Probably one should make sure that the repr of these "dicts" is conveniently sorted in the same way for both py2 and py3.

The `__repr__` called by `KeyConvertingDict` is the one inherited from python's `dict` i don't think we should override it just for doctests compatibility. I prefer to modify the doctests.



---

archive/issue_comments_412711.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI was talking about the ipython representation. This is different (already for dict) from using str or repr. Using that in the repr would be better.",
    "created_at": "2019-02-19T10:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412711",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:28" align="right">comment:28</div>

I was talking about the ipython representation. This is different (already for dict) from using str or repr. Using that in the repr would be better.



---

archive/issue_comments_412712.json:
```json
{
    "body": "Changed commit from **[59c980e](https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23)** to **[4dc152a](https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368)**",
    "created_at": "2019-02-19T12:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412712",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[59c980e](https://github.com/sagemath/sagetrac-mirror/commit/59c980e59a8492da4e8088809dcbb2f102d38e23)** to **[4dc152a](https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368)**



---

archive/issue_comments_412713.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368\">4dc152a</a></td><td><code>Trac #26792: Fix a doctest in multi_polynomial_ideal.py</code></td></tr></table>\n",
    "created_at": "2019-02-19T12:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368">4dc152a</a></td><td><code>Trac #26792: Fix a doctest in multi_polynomial_ideal.py</code></td></tr></table>




---

archive/issue_comments_412714.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@fchapoton](#comment:28):\n> I was talking about the ipython representation. This is different (already for dict) from using str or repr. Using that in the repr would be better.\n\nI think you mean using Ipython pretty print. I don't know why it is like it's not called by default for `KeyConvertingDict` as it is for `dict`: \n\nAdding some traces :\n\n```\ndiff --git a/src/sage/misc/converting_dict.py b/src/sage/misc/converting_dict.py\nindex f9bdb17..f08e13f 100644\n--- a/src/sage/misc/converting_dict.py\n+++ b/src/sage/misc/converting_dict.py\n@@ -140,6 +140,13 @@ class KeyConvertingDict(dict):\n         key = self.key_conversion_function(key)\n         return super(KeyConvertingDict, self).__setitem__(key, value)\n \n+    def __repr__(self):\n+        print(\"call __repr__\")\n+        return super(KeyConvertingDict, self).__repr__()\n+\n+    def _repr_pretty_(self, p, cycle):\n+        print(\"pretty\")\n+\n     def __delitem__(self, key):\n         r\"\"\"\n         Remove a mapping from the dictionary.\n```\n\nYou get this:\n\n```\nsage: K.<x,y> = QQ[]\nsage: I = ideal([x^2+2*y-5,x+y+3])\nsage: v = I.variety(AA)[0]; v\ncall __repr__\n{x: 4.464101615137755?, y: -7.464101615137755?}\nsage: from IPython.lib.pretty import pprint\nsage: pprint(v)\npretty\n```",
    "created_at": "2019-02-19T13:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412714",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@fchapoton](#comment:28):
> I was talking about the ipython representation. This is different (already for dict) from using str or repr. Using that in the repr would be better.

I think you mean using Ipython pretty print. I don't know why it is like it's not called by default for `KeyConvertingDict` as it is for `dict`: 

Adding some traces :

```
diff --git a/src/sage/misc/converting_dict.py b/src/sage/misc/converting_dict.py
index f9bdb17..f08e13f 100644
--- a/src/sage/misc/converting_dict.py
+++ b/src/sage/misc/converting_dict.py
@@ -140,6 +140,13 @@ class KeyConvertingDict(dict):
         key = self.key_conversion_function(key)
         return super(KeyConvertingDict, self).__setitem__(key, value)
 
+    def __repr__(self):
+        print("call __repr__")
+        return super(KeyConvertingDict, self).__repr__()
+
+    def _repr_pretty_(self, p, cycle):
+        print("pretty")
+
     def __delitem__(self, key):
         r"""
         Remove a mapping from the dictionary.
```

You get this:

```
sage: K.<x,y> = QQ[]
sage: I = ideal([x^2+2*y-5,x+y+3])
sage: v = I.variety(AA)[0]; v
call __repr__
{x: 4.464101615137755?, y: -7.464101615137755?}
sage: from IPython.lib.pretty import pprint
sage: pprint(v)
pretty
```



---

archive/issue_comments_412715.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2\">c9c1047</a></td><td><code>Trac #26792: py3 fix doctests failing because ...</code></td></tr></table>\n",
    "created_at": "2019-02-20T08:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412715",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2">c9c1047</a></td><td><code>Trac #26792: py3 fix doctests failing because ...</code></td></tr></table>




---

archive/issue_comments_412716.json:
```json
{
    "body": "Changed commit from **[4dc152a](https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368)** to **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**",
    "created_at": "2019-02-20T08:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412716",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4dc152a](https://github.com/sagemath/sagetrac-mirror/commit/4dc152ad3be45d97b17669eccc9f943854c25368)** to **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**



---

archive/issue_events_368264.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-02-20T09:08:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368264"
}
```



---

archive/issue_events_368265.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-02-20T09:08:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368265"
}
```



---

archive/issue_comments_412717.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI fixed the remaining cases using `#py2` `#py3` flags as it seems to be the most readable solution right now. \n\nThere is still one failling test sort related to `KeyConvertingDict`: \n\n```\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py\", line 409, in sage.tests.books.computational-mathematics-with-sagemath.mpoly_doctest\nFailed example:\n    J.variety(RealField(51))\nExpected:\n    [{y: 396340.890166545, x: -14.1660266425312}]\nGot:\n    [{y: 396340.890166545, x: -35.0231212211684}]\n```\n\nThe difference being the value of x i think this is out the scope of this ticket.",
    "created_at": "2019-02-20T09:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412717",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:32" align="right">comment:32</div>

I fixed the remaining cases using `#py2` `#py3` flags as it seems to be the most readable solution right now. 

There is still one failling test sort related to `KeyConvertingDict`: 

```
File "src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py", line 409, in sage.tests.books.computational-mathematics-with-sagemath.mpoly_doctest
Failed example:
    J.variety(RealField(51))
Expected:
    [{y: 396340.890166545, x: -14.1660266425312}]
Got:
    [{y: 396340.890166545, x: -35.0231212211684}]
```

The difference being the value of x i think this is out the scope of this ticket.



---

archive/issue_comments_412718.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nok, let us move on here.",
    "created_at": "2019-02-20T12:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412718",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:33" align="right">comment:33</div>

ok, let us move on here.



---

archive/issue_comments_412719.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-02-20T12:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412719",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_368266.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-20T12:59:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368266"
}
```



---

archive/issue_events_368267.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-20T12:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368267"
}
```



---

archive/issue_comments_412720.json:
```json
{
    "body": "Changed branch from **[public/ticket/26792](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/26792)** to **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**",
    "created_at": "2019-02-22T22:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26792#issuecomment-412720",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/26792](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/26792)** to **[c9c1047](https://github.com/sagemath/sagetrac-mirror/commit/c9c10475a2dae3691bcfb330c99522df82e387b2)**



---

archive/issue_events_368268.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-22T22:01:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368268"
}
```



---

archive/issue_events_368269.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "78cdb4cd201594c0c1c903fbff18c6c6adaaef85",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-22T22:01:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26792",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26792#event-368269"
}
```
