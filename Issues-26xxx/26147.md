# Issue 26147: cleanup non-decreasing parking functions

archive/issues_026147.json:
```json
{
    "body": "CC:  @tscrim\n\nin particular get rid of CombinatorialClass there (#12913)\n\nIssue created by migration from https://trac.sagemath.org/ticket/26384\n\n",
    "closed_at": "2018-10-04T21:54:02Z",
    "created_at": "2018-10-02T16:54:43Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "cleanup non-decreasing parking functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26147",
    "user": "https://github.com/fchapoton"
}
```
CC:  @tscrim

in particular get rid of CombinatorialClass there (#12913)

Issue created by migration from https://trac.sagemath.org/ticket/26384





---

archive/issue_comments_368169.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368169",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368170.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368170",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_368171.json:
```json
{
    "body": "Maybe I should have kept CombinatorialObject ?",
    "created_at": "2018-10-02T17:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368171",
    "user": "https://github.com/fchapoton"
}
```

Maybe I should have kept CombinatorialObject ?



---

archive/issue_comments_368172.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> Maybe I should have kept CombinatorialObject ?\n\n\nThat one is a maybe. The biggest issue is they are no longer hashable:\n\n```\nsage: hash(NonDecreasingParkingFunction([]))\n11648069979105038\n```\nwhich is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.",
    "created_at": "2018-10-02T22:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368172",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:2 chapoton]:
> Maybe I should have kept CombinatorialObject ?


That one is a maybe. The biggest issue is they are no longer hashable:

```
sage: hash(NonDecreasingParkingFunction([]))
11648069979105038
```
which is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.



---

archive/issue_comments_368173.json:
```json
{
    "body": "IIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.",
    "created_at": "2018-10-02T22:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368173",
    "user": "https://github.com/tscrim"
}
```

IIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.



---

archive/issue_comments_368174.json:
```json
{
    "body": "Travis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..",
    "created_at": "2018-10-03T12:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368174",
    "user": "https://github.com/fchapoton"
}
```

Travis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..



---

archive/issue_comments_368175.json:
```json
{
    "body": "I think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.",
    "created_at": "2018-10-03T12:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368175",
    "user": "https://github.com/tscrim"
}
```

I think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.



---

archive/issue_comments_368176.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-03T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368177.json:
```json
{
    "body": "ok, I have added the hash. Thanks a lot for your help.",
    "created_at": "2018-10-03T12:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368177",
    "user": "https://github.com/fchapoton"
}
```

ok, I have added the hash. Thanks a lot for your help.



---

archive/issue_comments_368178.json:
```json
{
    "body": "No problem. Thanks for fixing that.",
    "created_at": "2018-10-03T13:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368178",
    "user": "https://github.com/tscrim"
}
```

No problem. Thanks for fixing that.



---

archive/issue_comments_368179.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-03T13:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368179",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_065625.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-04T21:54:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26147#event-65625"
}
```



---

archive/issue_comments_368180.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-04T21:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26147",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26147#issuecomment-368180",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
