# Issue 26315: Upgrade to Giac 1.5

archive/issues_026078.json:
```json
{
    "assignees": [],
    "body": "This ticket is to upgrade to Giac 1.5.\n\nA preliminary version \"1.5.0 unstable\" is available for testing:\n\n- [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)\n- [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).\n- [README about source tarballs for Giac and their version numbering](http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README)\n\nThis upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.\n\nAll that will be left to do in those tickets is add doctests.\n\nI suppose we finally have stable 1.5.0, here\n (repacked):\ntarball: http://users.ox.ac.uk/~coml0531/sage/giac-1.5.0.37.tar.bz2\n\nCC:  @antonio-rojas @kiwifb @frederichan-IMJPRG @infinity0 @saraedum @tobihan @timokau\n\nKeywords: **upgrade, giac**\n\nBranch: **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**\n\nReviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26315_\n\n",
    "closed_at": "2019-02-05T16:57:57Z",
    "created_at": "2018-09-19T16:29:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to Giac 1.5",
    "type": "issue",
    "updated_at": "2019-03-04T14:30:53Z",
    "url": "https://github.com/sagemath/sage/issues/26315",
    "user": "https://github.com/slel"
}
```
This ticket is to upgrade to Giac 1.5.

A preliminary version "1.5.0 unstable" is available for testing:

- [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)
- [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).
- [README about source tarballs for Giac and their version numbering](http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README)

This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.

All that will be left to do in those tickets is add doctests.

I suppose we finally have stable 1.5.0, here
 (repacked):
tarball: http://users.ox.ac.uk/~coml0531/sage/giac-1.5.0.37.tar.bz2

CC:  @antonio-rojas @kiwifb @frederichan-IMJPRG @infinity0 @saraedum @tobihan @timokau

Keywords: **upgrade, giac**

Branch: **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**

Reviewer: **François Bissey, Jeroen Demeyer**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/26315_





---

archive/issue_events_344634.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-09-19T16:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344634"
}
```



---

archive/issue_events_344635.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-09-19T16:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344635"
}
```



---

archive/issue_events_344636.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-09-19T16:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344636"
}
```



---

archive/issue_comments_408499.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNB: I have  reported in giac's forum that without glpk the built of:\n\nhttp://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-1.tar.gz\n\nis broken.\nThis is a minor change in src/graphe.cc, but may be we could wait 1.5.0-2?\n\nWhatever, we never use the \"unstable\" file https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz for packaging because it changes often.\n\ncf: http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README",
    "created_at": "2018-09-19T17:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408499",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:1'>Comment 1:</a>
NB: I have  reported in giac's forum that without glpk the built of:

http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-1.tar.gz

is broken.
This is a minor change in src/graphe.cc, but may be we could wait 1.5.0-2?

Whatever, we never use the "unstable" file https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz for packaging because it changes often.

cf: http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README



---

archive/issue_comments_408500.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,8 @@\n A preliminary version \"1.5.0 unstable\" is available for testing:\n \n - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)\n-- [source tarball for giac-1.5.0](https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz)\n+- [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).\n+- [README about source tarballs for Giac and their version numbering](http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README)\n \n This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.\n \n``````\n",
    "created_at": "2018-09-20T02:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408500",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,8 @@
 A preliminary version "1.5.0 unstable" is available for testing:
 
 - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)
-- [source tarball for giac-1.5.0](https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz)
+- [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).
+- [README about source tarballs for Giac and their version numbering](http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README)
 
 This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.
 
``````




---

archive/issue_comments_408501.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThanks frederichan for your comments and the link to the readme.\n\nOf course it does not seem reasonable to upgrade to giac-1.5.0-1.\n\nBut I thought I'd at least open the ticket if only to point out that\nupgrading to giac 1.5 should fix two other tickets.",
    "created_at": "2018-09-20T02:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408501",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'>Comment 3:</a>
Thanks frederichan for your comments and the link to the readme.

Of course it does not seem reasonable to upgrade to giac-1.5.0-1.

But I thought I'd at least open the ticket if only to point out that
upgrading to giac 1.5 should fix two other tickets.



---

archive/issue_comments_408502.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFrom 21 sep I can now see a 1.5.0-3 version:\n\nhttp://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-3.tar.gz",
    "created_at": "2018-09-22T12:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408502",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:4'>Comment 4:</a>
From 21 sep I can now see a 1.5.0-3 version:

http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-3.tar.gz



---

archive/issue_comments_408503.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nLooking at 1.5.0-3 here. I have libsamplerate-0.1.9 installed on the machine and I discovered that it is one of the new automagically detected configure option (on if you have it). Building giac failed until I passed `--disable-samplerate` at configure time. Unstable indeed.",
    "created_at": "2018-09-27T00:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408503",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'>Comment 5:</a>
Looking at 1.5.0-3 here. I have libsamplerate-0.1.9 installed on the machine and I discovered that it is one of the new automagically detected configure option (on if you have it). Building giac failed until I passed `--disable-samplerate` at configure time. Unstable indeed.



---

archive/issue_comments_408504.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nHi Francois, \nI didn't knew about this one. Should I report something? (if yes what?)\n\nBut I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?\n\nFrederic",
    "created_at": "2018-09-27T08:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408504",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:6'>Comment 6:</a>
Hi Francois, 
I didn't knew about this one. Should I report something? (if yes what?)

But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?

Frederic



---

archive/issue_comments_408505.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@frederichan-IMJPRG](#comment%3A6):\n> Hi Francois, \n> I didn't knew about this one. Should I report something? (if yes what?)\n> \n\nPossibly. It may be also be because gcc-8 is more strict about some stuff. \n\n```\nlibtool: compile:  x86_64-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -c signalprocessing.cc  -fPIC -DPIC -o .libs/signalprocessing.o\nsignalprocessing.cc: In function \u2018giac::gen giac::_resample(const giac::gen&, const giac::context*)\u2019:\nsignalprocessing.cc:637:77: error: assignment of read-only location \u2018*(data.SRC_DATA::data_in + ((sizetype)(((long unsigned int)((i * nc) + j)) * 4)))\u2019\n             data.data_in[i*nc+j]=_evalf(chdata[j][i],contextptr).DOUBLE_val();\n```\n\n> But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?\n> \n\nglpk has been a dependency in the 1.4 series too. I hadn't noticed, seems to build fine with or without but it means sage installations of giac may be inconsistent which each others so I am in favor to just add it - regardless of this ticket.\n\nThe nauty dependency is new to me. Looking at `configure.in` I can see\n\n```\nAC_CHECK_LIB(nauty,main)\nAC_CHECK_HEADERS(nauty/naututil.h)\n```\n\nso it is not fatal if it is not there. Which is just as well because that stuff looks for a library and as far as I know the nauty we have only install a bunch of executables, no libraries or headers.\n\nSo at this stage do not add nauty - may be we are thinking of the wrong package.",
    "created_at": "2018-09-27T08:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408505",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@frederichan-IMJPRG](#comment%3A6):
> Hi Francois, 
> I didn't knew about this one. Should I report something? (if yes what?)
> 

Possibly. It may be also be because gcc-8 is more strict about some stuff. 

```
libtool: compile:  x86_64-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -c signalprocessing.cc  -fPIC -DPIC -o .libs/signalprocessing.o
signalprocessing.cc: In function ‘giac::gen giac::_resample(const giac::gen&, const giac::context*)’:
signalprocessing.cc:637:77: error: assignment of read-only location ‘*(data.SRC_DATA::data_in + ((sizetype)(((long unsigned int)((i * nc) + j)) * 4)))’
             data.data_in[i*nc+j]=_evalf(chdata[j][i],contextptr).DOUBLE_val();
```

> But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?
> 

glpk has been a dependency in the 1.4 series too. I hadn't noticed, seems to build fine with or without but it means sage installations of giac may be inconsistent which each others so I am in favor to just add it - regardless of this ticket.

The nauty dependency is new to me. Looking at `configure.in` I can see

```
AC_CHECK_LIB(nauty,main)
AC_CHECK_HEADERS(nauty/naututil.h)
```

so it is not fatal if it is not there. Which is just as well because that stuff looks for a library and as far as I know the nauty we have only install a bunch of executables, no libraries or headers.

So at this stage do not add nauty - may be we are thinking of the wrong package.



---

archive/issue_comments_408506.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nnauty 2.6.7 has libraries. We are at 2.6.1 I think.",
    "created_at": "2018-09-27T09:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408506",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'>Comment 8:</a>
nauty 2.6.7 has libraries. We are at 2.6.1 I think.



---

archive/issue_comments_408507.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nPlain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.",
    "created_at": "2018-09-28T07:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408507",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:9'>Comment 9:</a>
Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.



---

archive/issue_comments_408508.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@antonio-rojas](#comment%3A9):\n> Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.\n\nThe Gentoo maintainer has adopted that patch too for 2.6.7 that fooled me.",
    "created_at": "2018-09-28T07:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408508",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@antonio-rojas](#comment%3A9):
> Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.

The Gentoo maintainer has adopted that patch too for 2.6.7 that fooled me.



---

archive/issue_comments_408509.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThere are still (easy) patches needed to build with clang 6.\n\nAny idea about what would be the best way to get them in?",
    "created_at": "2018-10-24T09:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408509",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
There are still (easy) patches needed to build with clang 6.

Any idea about what would be the best way to get them in?



---

archive/issue_comments_408510.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nOne way would be to suggest these patches on the XCas \"bugs\" forum:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewforum.php?f=3&sid=c49dc6cf44516f78a1ef24e838c65904",
    "created_at": "2018-10-24T09:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408510",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'>Comment 12:</a>
One way would be to suggest these patches on the XCas "bugs" forum:
https://xcas.univ-grenoble-alpes.fr/forum/viewforum.php?f=3&sid=c49dc6cf44516f78a1ef24e838c65904



---

archive/issue_comments_408511.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNB: I can post on this forum for you if you don't have an account or if it is long to answer.",
    "created_at": "2018-10-24T11:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408511",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:13'>Comment 13:</a>
NB: I can post on this forum for you if you don't have an account or if it is long to answer.



---

archive/issue_comments_408512.json:
```json
{
    "body": "patch needed for giac to build with clang 6.0.1 (possibly incomplete)",
    "created_at": "2018-10-25T07:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408512",
    "user": "https://github.com/dimpase"
}
```

patch needed for giac to build with clang 6.0.1 (possibly incomplete)



---

archive/issue_comments_408513.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nAttachment: **[giac-1.5.0-3.clang601.patch.gz](https://github.com/sagemath/sage/files/ticket26315/giac-1.5.0-3.clang601.patch.gz)**\n\nReplying to [@frederichan-IMJPRG](#comment%3A13):\n> NB: I can post on this forum for you if you don't have an account or if it is long to answer.\n\nI requested an account on the forum at least once, to no avail.\nAnyhow, I just posted the patch here as an attachment.",
    "created_at": "2018-10-25T07:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408513",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
Attachment: **[giac-1.5.0-3.clang601.patch.gz](https://github.com/sagemath/sage/files/ticket26315/giac-1.5.0-3.clang601.patch.gz)**

Replying to [@frederichan-IMJPRG](#comment%3A13):
> NB: I can post on this forum for you if you don't have an account or if it is long to answer.

I requested an account on the forum at least once, to no avail.
Anyhow, I just posted the patch here as an attachment.



---

archive/issue_comments_408514.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI have reported it there:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2176",
    "created_at": "2018-10-25T11:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408514",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:15'>Comment 15:</a>
I have reported it there:
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2176



---

archive/issue_comments_408515.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nAnother bug in giac - it does not work with newer versions of libcurl, which don't have\n`curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)\n\nSo since curl version 7.55 or so one needs to use `curl/system.h` instead.\n\nCould you also report this on giac list?",
    "created_at": "2018-10-25T21:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408515",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'>Comment 16:</a>
Another bug in giac - it does not work with newer versions of libcurl, which don't have
`curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)

So since curl version 7.55 or so one needs to use `curl/system.h` instead.

Could you also report this on giac list?



---

archive/issue_comments_408516.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@dimpase](#comment%3A16):\n> Another bug in giac - it does not work with newer versions of libcurl, which don't have\n> `curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)\n> \n> So since curl version 7.55 or so one needs to use `curl/system.h` instead.\n> \n> Could you also report this on giac list?\n> \n\nWe've know this one for a while. It was present in the last 1.4 releases. In distro we just removed the include line following arch's lead (I believe it originated in arch - correct me if it has prior history).",
    "created_at": "2018-10-25T21:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408516",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@dimpase](#comment%3A16):
> Another bug in giac - it does not work with newer versions of libcurl, which don't have
> `curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)
> 
> So since curl version 7.55 or so one needs to use `curl/system.h` instead.
> 
> Could you also report this on giac list?
> 

We've know this one for a while. It was present in the last 1.4 releases. In distro we just removed the include line following arch's lead (I believe it originated in arch - correct me if it has prior history).



---

archive/issue_comments_408517.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\ncurlbuild.h is reported there:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180\n\nby the way, was the clang problem a warning or does the compilation stop?",
    "created_at": "2018-10-26T10:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408517",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:18'>Comment 18:</a>
curlbuild.h is reported there:
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180

by the way, was the clang problem a warning or does the compilation stop?



---

archive/issue_comments_408518.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@frederichan-IMJPRG](#comment%3A18):\n> curlbuild.h is reported there:\n> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180\n> \n> by the way, was the clang problem a warning or does the compilation stop?\n\nI only reported errors. There are surely lots of warnings too, e.g. the one about `register` keyword being ignored and deprecated in C++11, and that it will be an error in C++17 standard.\n\nAs a matter of fact I am trying to get giac built on FreeBSD 12.0, and I am not yet there.",
    "created_at": "2018-10-26T17:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408518",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@frederichan-IMJPRG](#comment%3A18):
> curlbuild.h is reported there:
> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180
> 
> by the way, was the clang problem a warning or does the compilation stop?

I only reported errors. There are surely lots of warnings too, e.g. the one about `register` keyword being ignored and deprecated in C++11, and that it will be an error in C++17 standard.

As a matter of fact I am trying to get giac built on FreeBSD 12.0, and I am not yet there.



---

archive/issue_events_344637.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-26T18:00:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344637"
}
```



---

archive/issue_events_344638.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-26T18:00:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344638"
}
```



---

archive/issue_events_344639.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-10-26T18:00:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344639"
}
```



---

archive/issue_comments_408519.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nOne further patch that was needed for clang 6/freebsd 12.0 is as follows:\n\n```\n--- a/src/misc.h\n+++ b/src/misc.h\n@@ -23,6 +23,7 @@\n #include \"gen.h\"\n #include \"unary.h\"\n #include \"symbolic.h\"\n+#include <sys/time.h>\n \n #ifndef NO_NAMESPACE_GIAC\n namespace giac {\n```\nwithout it there are errors related to a forward declaration of `giac::timespec`, as follows:\n\n```\nIn file included from misc.cc:8744:\nIn file included from /usr/local/include/curl/curl.h:87:\n/usr/include/sys/time.h:267:25: error: variable has incomplete type 'struct timespec'\ntstosbt(struct timespec _ts)\n                        ^\n/usr/include/sys/socket.h:676:8: note: forward declaration of 'giac::timespec'\nstruct timespec;\n       ^\n```",
    "created_at": "2018-10-30T11:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408519",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'>Comment 21:</a>
One further patch that was needed for clang 6/freebsd 12.0 is as follows:

```
--- a/src/misc.h
+++ b/src/misc.h
@@ -23,6 +23,7 @@
 #include "gen.h"
 #include "unary.h"
 #include "symbolic.h"
+#include <sys/time.h>
 
 #ifndef NO_NAMESPACE_GIAC
 namespace giac {
```
without it there are errors related to a forward declaration of `giac::timespec`, as follows:

```
In file included from misc.cc:8744:
In file included from /usr/local/include/curl/curl.h:87:
/usr/include/sys/time.h:267:25: error: variable has incomplete type 'struct timespec'
tstosbt(struct timespec _ts)
                        ^
/usr/include/sys/socket.h:676:8: note: forward declaration of 'giac::timespec'
struct timespec;
       ^
```



---

archive/issue_comments_408520.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nOK, I can post to the giac forum now...",
    "created_at": "2018-10-30T11:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408520",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>Comment 22:</a>
OK, I can post to the giac forum now...



---

archive/issue_comments_408521.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nthe giac unstable version (1.5.0-11 (?)) of 18/10/18 builds on clang 6.0.1 out of the box (there is now an issue with doc/el, which seems to be broken, and the need to have hevea installed).",
    "created_at": "2018-11-21T17:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408521",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'>Comment 23:</a>
the giac unstable version (1.5.0-11 (?)) of 18/10/18 builds on clang 6.0.1 out of the box (there is now an issue with doc/el, which seems to be broken, and the need to have hevea installed).



---

archive/issue_comments_408522.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI never saw that one but I see 1.5.0-17 from 2018-11-20. I will give it a go later.",
    "created_at": "2018-11-21T20:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408522",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'>Comment 24:</a>
I never saw that one but I see 1.5.0-17 from 2018-11-20. I will give it a go later.



---

archive/issue_comments_408523.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\n\n```\n$ grep -r curlbuild src/*\nsrc/giac/misc.cc:  //#include <curl/curlbuild.h>\nsrc/misc.cc:  //#include <curl/curlbuild.h>\n```\nSo the curl issue has been dealt with. clang is going mad spitting that \"register\" is deprecated and is incompatible with C++17.",
    "created_at": "2018-11-21T20:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408523",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:25'>Comment 25:</a>

```
$ grep -r curlbuild src/*
src/giac/misc.cc:  //#include <curl/curlbuild.h>
src/misc.cc:  //#include <curl/curlbuild.h>
```
So the curl issue has been dealt with. clang is going mad spitting that "register" is deprecated and is incompatible with C++17.



---

archive/issue_comments_408524.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nWhen building sage with giac 1.5.0-21 I get this test failure:\n\n```\nFile \"/nix/store/kb25pb31a6i47sjm5nsjgii7n7jpilgb-sage-src-8.4/src/sage/interfaces/giac.py\", line 619, in sage.interfaces.giac.Giac.eval\nFailed example:\n    giac(s)\nExpected:\n    (x)->{\n    x+1;\n    x+2;\n    }\nGot:\n    (x)->[x+1,x+2]\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.interfaces.giac.Giac.eval\n```\n\nUpstream said wontfix: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2221",
    "created_at": "2018-12-08T09:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408524",
    "user": "https://github.com/symphorien"
}
```

<a id='comment:26'>Comment 26:</a>
When building sage with giac 1.5.0-21 I get this test failure:

```
File "/nix/store/kb25pb31a6i47sjm5nsjgii7n7jpilgb-sage-src-8.4/src/sage/interfaces/giac.py", line 619, in sage.interfaces.giac.Giac.eval
Failed example:
    giac(s)
Expected:
    (x)->{
    x+1;
    x+2;
    }
Got:
    (x)->[x+1,x+2]
**********************************************************************
1 item had failures:
   1 of   6 in sage.interfaces.giac.Giac.eval
```

Upstream said wontfix: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2221



---

archive/issue_comments_408525.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nWe'd just change this doctest, such things happen often with many packages",
    "created_at": "2018-12-08T09:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408525",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'>Comment 27:</a>
We'd just change this doctest, such things happen often with many packages



---

archive/issue_comments_408526.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nIt is already present with the latest 1.4.x. It is just formatting, nothing serious.",
    "created_at": "2018-12-08T09:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408526",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'>Comment 28:</a>
It is already present with the latest 1.4.x. It is just formatting, nothing serious.



---

archive/issue_comments_408527.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nAttachment: **[giac-1.5.0.patch.gz](https://github.com/sagemath/sage/files/ticket26315/giac-1.5.0.patch.gz)**\n\nOk. Then with the attached patch I can build sage with giac 1.5.0-21.",
    "created_at": "2018-12-09T11:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408527",
    "user": "https://github.com/symphorien"
}
```

<a id='comment:29'>Comment 29:</a>
Attachment: **[giac-1.5.0.patch.gz](https://github.com/sagemath/sage/files/ticket26315/giac-1.5.0.patch.gz)**

Ok. Then with the attached patch I can build sage with giac 1.5.0-21.



---

archive/issue_comments_408528.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\n> Attachment giac-1.5.0-3.clang601.patch\u200b added\n\n> patch needed for giac to build with clang 6.0.1 (possibly incomplete)\n\nBTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:\n\n```\nsolve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n      order_t order_={order,lexvars};\n                      ^~~~~\nsolve.cc:5751:23: note: insert an explicit cast to silence this issue\n      order_t order_={order,lexvars};\n                      ^~~~~\n                      static_cast<short>( )\nsolve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]\n      order_t order_={order,lexvars};\n                            ^~~~~~~\nsolve.cc:5751:29: note: insert an explicit cast to silence this issue\n      order_t order_={order,lexvars};\n                            ^~~~~~~\n                            static_cast<unsigned char>( )\nsolve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n    order_t order_={order.val,0};\n                    ^~~~~~~~~\nsolve.cc:6962:21: note: insert an explicit cast to silence this issue\n    order_t order_={order.val,0};\n                    ^~~~~~~~~\n                    static_cast<short>( )\n```",
    "created_at": "2018-12-10T15:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408528",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'>Comment 30:</a>
> Attachment giac-1.5.0-3.clang601.patch​ added

> patch needed for giac to build with clang 6.0.1 (possibly incomplete)

BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:

```
solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
      order_t order_={order,lexvars};
                      ^~~~~
solve.cc:5751:23: note: insert an explicit cast to silence this issue
      order_t order_={order,lexvars};
                      ^~~~~
                      static_cast<short>( )
solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]
      order_t order_={order,lexvars};
                            ^~~~~~~
solve.cc:5751:29: note: insert an explicit cast to silence this issue
      order_t order_={order,lexvars};
                            ^~~~~~~
                            static_cast<unsigned char>( )
solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
    order_t order_={order.val,0};
                    ^~~~~~~~~
solve.cc:6962:21: note: insert an explicit cast to silence this issue
    order_t order_={order.val,0};
                    ^~~~~~~~~
                    static_cast<short>( )
```



---

archive/issue_comments_408529.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@rwst](#comment%3A30):\n> > Attachment giac-1.5.0-3.clang601.patch\u200b added\n\n> \n> > patch needed for giac to build with clang 6.0.1 (possibly incomplete)\n\n> \n> BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:\n> \n> ```\n> solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n>       order_t order_={order,lexvars};\n>                       ^~~~~\n> solve.cc:5751:23: note: insert an explicit cast to silence this issue\n>       order_t order_={order,lexvars};\n>                       ^~~~~\n>                       static_cast<short>( )\n> solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]\n>       order_t order_={order,lexvars};\n>                             ^~~~~~~\n> solve.cc:5751:29: note: insert an explicit cast to silence this issue\n>       order_t order_={order,lexvars};\n>                             ^~~~~~~\n>                             static_cast<unsigned char>( )\n> solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n>     order_t order_={order.val,0};\n>                     ^~~~~~~~~\n> solve.cc:6962:21: note: insert an explicit cast to silence this issue\n>     order_t order_={order.val,0};\n>                     ^~~~~~~~~\n>                     static_cast<short>( )\n> ```\n\ndoes the current https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac_unstable.tgz\nwork for you with new clangs?\n(this should be giac-1.5.0-21 or even later version)",
    "created_at": "2018-12-10T17:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408529",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@rwst](#comment%3A30):
> > Attachment giac-1.5.0-3.clang601.patch​ added

> 
> > patch needed for giac to build with clang 6.0.1 (possibly incomplete)

> 
> BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:
> 
> ```
> solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
>       order_t order_={order,lexvars};
>                       ^~~~~
> solve.cc:5751:23: note: insert an explicit cast to silence this issue
>       order_t order_={order,lexvars};
>                       ^~~~~
>                       static_cast<short>( )
> solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]
>       order_t order_={order,lexvars};
>                             ^~~~~~~
> solve.cc:5751:29: note: insert an explicit cast to silence this issue
>       order_t order_={order,lexvars};
>                             ^~~~~~~
>                             static_cast<unsigned char>( )
> solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
>     order_t order_={order.val,0};
>                     ^~~~~~~~~
> solve.cc:6962:21: note: insert an explicit cast to silence this issue
>     order_t order_={order.val,0};
>                     ^~~~~~~~~
>                     static_cast<short>( )
> ```

does the current https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac_unstable.tgz
work for you with new clangs?
(this should be giac-1.5.0-21 or even later version)



---

archive/issue_comments_408530.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,7 @@\n This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.\n \n All that will be left to do in those tickets is add doctests.\n+\n+I suppose we finally have stable 1.5.0, here\n+\n+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-27.tar.gz\n``````\n",
    "created_at": "2018-12-17T16:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408530",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,7 @@
 This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.
 
 All that will be left to do in those tickets is add doctests.
+
+I suppose we finally have stable 1.5.0, here
+
+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-27.tar.gz
``````




---

archive/issue_comments_408531.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nshould we go forward and upgrade?",
    "created_at": "2018-12-17T16:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408531",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'>Comment 32:</a>
should we go forward and upgrade?



---

archive/issue_comments_408532.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nWho says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.\n\nWho said it was stable again?",
    "created_at": "2018-12-17T20:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408532",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:33'>Comment 33:</a>
Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.

Who said it was stable again?



---

archive/issue_comments_408533.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@kiwifb](#comment%3A33):\n> Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.\n> \n> Who said it was stable again?\n\nthat's one that made it into this particular directory, which I think means \"it's not too bad to be released\".",
    "created_at": "2018-12-18T05:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408533",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@kiwifb](#comment%3A33):
> Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.
> 
> Who said it was stable again?

that's one that made it into this particular directory, which I think means "it's not too bad to be released".



---

archive/issue_comments_408534.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nRight, if someone pushes a branch, I can review it. If you want me to do the branch I can probably squeeze it before Christmas.",
    "created_at": "2018-12-18T05:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408534",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'>Comment 35:</a>
Right, if someone pushes a branch, I can review it. If you want me to do the branch I can probably squeeze it before Christmas.



---

archive/issue_events_344640.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-01T19:37:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344640"
}
```



---

archive/issue_events_344641.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-01T19:37:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344641"
}
```



---

archive/issue_comments_408535.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n \n I suppose we finally have stable 1.5.0, here\n \n-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-27.tar.gz\n+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-29.tar.gz\n``````\n",
    "created_at": "2019-01-01T19:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408535",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 
 I suppose we finally have stable 1.5.0, here
 
-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-27.tar.gz
+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-29.tar.gz
``````




---

archive/issue_comments_408536.json:
```json
{
    "body": "Branch: **[public/giac-1.5.0](https://github.com/sagemath/sagetrac-mirror/tree/public/giac-1.5.0)**",
    "created_at": "2019-01-01T19:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408536",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/giac-1.5.0](https://github.com/sagemath/sagetrac-mirror/tree/public/giac-1.5.0)**



---

archive/issue_comments_408537.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nHere is a first tentative of branch. Patches need to be checked. I removed 3 conflicting ones and did not add any new one.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80\">1caee29</a></td><td><code>tentative branch for giac 1.5.0</code></td></tr></table>\n",
    "created_at": "2019-01-01T19:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408537",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'>Comment 37:</a>
Here is a first tentative of branch. Patches need to be checked. I removed 3 conflicting ones and did not add any new one.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80">1caee29</a></td><td><code>tentative branch for giac 1.5.0</code></td></tr></table>




---

archive/issue_comments_408538.json:
```json
{
    "body": "Commit: **[1caee29](https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80)**",
    "created_at": "2019-01-01T19:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408538",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[1caee29](https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80)**



---

archive/issue_comments_408539.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nneeds an update to the latest version 1.5.0-37",
    "created_at": "2019-01-15T09:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408539",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'>Comment 39:</a>
needs an update to the latest version 1.5.0-37



---

archive/issue_comments_408540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n \n I suppose we finally have stable 1.5.0, here\n \n-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-29.tar.gz\n+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz\n``````\n",
    "created_at": "2019-01-15T09:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408540",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 
 I suppose we finally have stable 1.5.0, here
 
-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-29.tar.gz
+tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz
``````




---

archive/issue_comments_408541.json:
```json
{
    "body": "Changed commit from **[1caee29](https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80)** to **[bd3c3b1](https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e)**",
    "created_at": "2019-01-15T10:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408541",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1caee29](https://github.com/sagemath/sagetrac-mirror/commit/1caee2941edd46bbc7f2c8c7575099a8b2c84f80)** to **[bd3c3b1](https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e)**



---

archive/issue_comments_408542.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d45de68a85c98c5458160fc999b44056002accc\">4d45de6</a></td><td><code>Merge branch 'public/giac-1.5.0' of trac.sagemath.org:sage into giacnew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e\">bd3c3b1</a></td><td><code>update giac to 1.5.0-37</code></td></tr></table>\n",
    "created_at": "2019-01-15T10:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408542",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d45de68a85c98c5458160fc999b44056002accc">4d45de6</a></td><td><code>Merge branch 'public/giac-1.5.0' of trac.sagemath.org:sage into giacnew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e">bd3c3b1</a></td><td><code>update giac to 1.5.0-37</code></td></tr></table>




---

archive/issue_comments_408543.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nNow, linking to libz is broken (on Linux). Instead of linking to Sage's libz, it links to the system one, getting\n\n```\n$ ldd local/bin/giac | grep libz\nlocal/bin/giac: /lib/x86_64-linux-gnu/libz.so.1: version `ZLIB_1.2.9' not found (required by /home/dimpase/sage/local/lib/libpng16.so.16)\n        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f49c3ac8000)\n```\nwhereas\n\n```\n$ ldd local/lib/libpng16.so\n        linux-vdso.so.1 (0x00007ffe74fe5000)\n        libz.so.1 => /home/dimpase/sage/local/lib/libz.so.1 (0x00007effe8642000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007effe833e000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007effe7f9f000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007effe8a9f000)\n```",
    "created_at": "2019-01-15T11:34:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408543",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'>Comment 41:</a>
Now, linking to libz is broken (on Linux). Instead of linking to Sage's libz, it links to the system one, getting

```
$ ldd local/bin/giac | grep libz
local/bin/giac: /lib/x86_64-linux-gnu/libz.so.1: version `ZLIB_1.2.9' not found (required by /home/dimpase/sage/local/lib/libpng16.so.16)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f49c3ac8000)
```
whereas

```
$ ldd local/lib/libpng16.so
        linux-vdso.so.1 (0x00007ffe74fe5000)
        libz.so.1 => /home/dimpase/sage/local/lib/libz.so.1 (0x00007effe8642000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007effe833e000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007effe7f9f000)
        /lib64/ld-linux-x86-64.so.2 (0x00007effe8a9f000)
```



---

archive/issue_comments_408544.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nFact, libpng is only used by giac when the fltk interface is built. Otherwise libpng is not used at all as revealed by using `-Wl,--as-needed` in `LDFLAGS`. If we disable the gui (fltk) we can disable png safely.",
    "created_at": "2019-01-15T19:29:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408544",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'>Comment 42:</a>
Fact, libpng is only used by giac when the fltk interface is built. Otherwise libpng is not used at all as revealed by using `-Wl,--as-needed` in `LDFLAGS`. If we disable the gui (fltk) we can disable png safely.



---

archive/issue_comments_408545.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nI'm currently trying to build it with `--enable-png=no`. It seems to work better.",
    "created_at": "2019-01-15T19:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408545",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'>Comment 43:</a>
I'm currently trying to build it with `--enable-png=no`. It seems to work better.



---

archive/issue_comments_408546.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nIt does not pick up libpng any more, and ldd does not show errors, but the system's libz.so is stil there, from some other dependency:\n\n```\n$ ldd local/bin/giac\n        linux-vdso.so.1 (0x00007fff8efa6000)\n        libgiac.so.0 => /home/dimpase/sage/local/lib/libgiac.so.0 (0x00007fe5550d4000)\n        libntl.so.33 => /home/dimpase/sage/local/lib/libntl.so.33 (0x00007fe554cbd000)\n        libpari-gmp.so.6 => /home/dimpase/sage/local/lib/libpari-gmp.so.6 (0x00007fe554210000)\n        libreadline.so.6 => /home/dimpase/sage/local/lib/libreadline.so.6 (0x00007fe553fc7000)\n        libgsl.so.23 => /home/dimpase/sage/local/lib/libgsl.so.23 (0x00007fe553b45000)\n        libgslcblas.so.0 => /home/dimpase/sage/local/lib/libgslcblas.so.0 (0x00007fe553908000)\n        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fe553700000)\n        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fe5534e3000)\n        libcurl.so.4 => /usr/lib/x86_64-linux-gnu/libcurl.so.4 (0x00007fe553263000)\n        libglpk.so.40 => /home/dimpase/sage/local/lib/libglpk.so.40 (0x00007fe552f8a000)\n        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fe552d86000)\n        libmpfi.so.0 => /home/dimpase/sage/local/lib/libmpfi.so.0 (0x00007fe552b6f000)\n        libmpfr.so.6 => /home/dimpase/sage/local/lib/libmpfr.so.6 (0x00007fe5528f9000)\n        libgmp.so.23 => /home/dimpase/sage/local/lib/libgmp.so.23 (0x00007fe552685000)\n        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fe552303000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fe551fff000)\n        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fe551de8000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fe551a49000)\n        libgf2x.so.1 => /home/dimpase/sage/local/lib/libgf2x.so.1 (0x00007fe551833000)\n        libtinfo.so.6 => /home/dimpase/sage/local/lib/libtinfo.so.6 (0x00007fe5515fb000)\n        libopenblas.so.0 => /home/dimpase/sage/local/lib/libopenblas.so.0 (0x00007fe550748000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007fe556a11000)\n        libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 (0x00007fe550522000)\n        libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 (0x00007fe550300000)\n        librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 (0x00007fe5500e3000)\n        libssh2.so.1 => /usr/lib/x86_64-linux-gnu/libssh2.so.1 (0x00007fe54feb7000)\n        libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 (0x00007fe54fca9000)\n        libssl.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libssl.so.1.0.2 (0x00007fe54fa40000)\n        libcrypto.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2 (0x00007fe54f5da000)\n        libgssapi_krb5.so.2 => /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007fe54f38f000)\n        libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 (0x00007fe54f0b5000)\n        libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 (0x00007fe54ee82000)\n        libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 (0x00007fe54ec7e000)\n        liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 (0x00007fe54ea6f000)\n        libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007fe54e81e000)\n        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fe54e604000)\n        libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007fe54e2de000)\n        libunistring.so.0 => /usr/lib/x86_64-linux-gnu/libunistring.so.0 (0x00007fe54dfc7000)\n        libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 (0x00007fe54dc2e000)\n        libhogweed.so.4 => /usr/lib/x86_64-linux-gnu/libhogweed.so.4 (0x00007fe54d9f9000)\n        libnettle.so.6 => /usr/lib/x86_64-linux-gnu/libnettle.so.6 (0x00007fe54d7c2000)\n        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fe54d53f000)\n        libgcrypt.so.20 => /lib/x86_64-linux-gnu/libgcrypt.so.20 (0x00007fe54d22f000)\n        libkrb5support.so.0 => /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007fe54d023000)\n        libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 (0x00007fe54ce1f000)\n        libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007fe54cc08000)\n        libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 (0x00007fe54c9ed000)\n        libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007fe54c7ae000)\n        libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 (0x00007fe54c549000)\n        libidn.so.11 => /lib/x86_64-linux-gnu/libidn.so.11 (0x00007fe54c315000)\n        libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 (0x00007fe54c102000)\n        libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007fe54beee000)\n        libffi.so.6 => /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007fe54bce5000)\n```",
    "created_at": "2019-01-15T19:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408546",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'>Comment 44:</a>
It does not pick up libpng any more, and ldd does not show errors, but the system's libz.so is stil there, from some other dependency:

```
$ ldd local/bin/giac
        linux-vdso.so.1 (0x00007fff8efa6000)
        libgiac.so.0 => /home/dimpase/sage/local/lib/libgiac.so.0 (0x00007fe5550d4000)
        libntl.so.33 => /home/dimpase/sage/local/lib/libntl.so.33 (0x00007fe554cbd000)
        libpari-gmp.so.6 => /home/dimpase/sage/local/lib/libpari-gmp.so.6 (0x00007fe554210000)
        libreadline.so.6 => /home/dimpase/sage/local/lib/libreadline.so.6 (0x00007fe553fc7000)
        libgsl.so.23 => /home/dimpase/sage/local/lib/libgsl.so.23 (0x00007fe553b45000)
        libgslcblas.so.0 => /home/dimpase/sage/local/lib/libgslcblas.so.0 (0x00007fe553908000)
        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fe553700000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fe5534e3000)
        libcurl.so.4 => /usr/lib/x86_64-linux-gnu/libcurl.so.4 (0x00007fe553263000)
        libglpk.so.40 => /home/dimpase/sage/local/lib/libglpk.so.40 (0x00007fe552f8a000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fe552d86000)
        libmpfi.so.0 => /home/dimpase/sage/local/lib/libmpfi.so.0 (0x00007fe552b6f000)
        libmpfr.so.6 => /home/dimpase/sage/local/lib/libmpfr.so.6 (0x00007fe5528f9000)
        libgmp.so.23 => /home/dimpase/sage/local/lib/libgmp.so.23 (0x00007fe552685000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fe552303000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fe551fff000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fe551de8000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fe551a49000)
        libgf2x.so.1 => /home/dimpase/sage/local/lib/libgf2x.so.1 (0x00007fe551833000)
        libtinfo.so.6 => /home/dimpase/sage/local/lib/libtinfo.so.6 (0x00007fe5515fb000)
        libopenblas.so.0 => /home/dimpase/sage/local/lib/libopenblas.so.0 (0x00007fe550748000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fe556a11000)
        libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 (0x00007fe550522000)
        libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 (0x00007fe550300000)
        librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 (0x00007fe5500e3000)
        libssh2.so.1 => /usr/lib/x86_64-linux-gnu/libssh2.so.1 (0x00007fe54feb7000)
        libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 (0x00007fe54fca9000)
        libssl.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libssl.so.1.0.2 (0x00007fe54fa40000)
        libcrypto.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2 (0x00007fe54f5da000)
        libgssapi_krb5.so.2 => /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007fe54f38f000)
        libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 (0x00007fe54f0b5000)
        libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 (0x00007fe54ee82000)
        libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 (0x00007fe54ec7e000)
        liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 (0x00007fe54ea6f000)
        libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007fe54e81e000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fe54e604000)
        libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007fe54e2de000)
        libunistring.so.0 => /usr/lib/x86_64-linux-gnu/libunistring.so.0 (0x00007fe54dfc7000)
        libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 (0x00007fe54dc2e000)
        libhogweed.so.4 => /usr/lib/x86_64-linux-gnu/libhogweed.so.4 (0x00007fe54d9f9000)
        libnettle.so.6 => /usr/lib/x86_64-linux-gnu/libnettle.so.6 (0x00007fe54d7c2000)
        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fe54d53f000)
        libgcrypt.so.20 => /lib/x86_64-linux-gnu/libgcrypt.so.20 (0x00007fe54d22f000)
        libkrb5support.so.0 => /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007fe54d023000)
        libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 (0x00007fe54ce1f000)
        libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007fe54cc08000)
        libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 (0x00007fe54c9ed000)
        libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007fe54c7ae000)
        libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 (0x00007fe54c549000)
        libidn.so.11 => /lib/x86_64-linux-gnu/libidn.so.11 (0x00007fe54c315000)
        libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 (0x00007fe54c102000)
        libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007fe54beee000)
        libffi.so.6 => /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007fe54bce5000)
```



---

archive/issue_comments_408547.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nCa you do `readelf -d` to see if it needs directly libz or if it is from somewhere else. Here libglpk brings libz. It is possible that there is a stray `-lz` somewhere in a makefile.",
    "created_at": "2019-01-15T19:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408547",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'>Comment 45:</a>
Ca you do `readelf -d` to see if it needs directly libz or if it is from somewhere else. Here libglpk brings libz. It is possible that there is a stray `-lz` somewhere in a makefile.



---

archive/issue_comments_408548.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nI checked, there is no `lz` anywhere in the log.",
    "created_at": "2019-01-15T19:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408548",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'>Comment 46:</a>
I checked, there is no `lz` anywhere in the log.



---

archive/issue_comments_408549.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nSo that means someone else is bringing that library or someone has a rpath not properly set.",
    "created_at": "2019-01-15T19:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408549",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'>Comment 47:</a>
So that means someone else is bringing that library or someone has a rpath not properly set.



---

archive/issue_comments_408550.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nindeed, here is the readelf result (on libgiac, which also has (wrong) libz linked in\n\n ```\n $ readelf -d local/lib/libgiac.so.0.0.0\n \n Dynamic section at offset 0x11e0b68 contains 41 entries:\n   Tag        Type                         Name/Value\n  0x0000000000000001 (NEEDED)             Shared library: [libntl.so.33]\n  0x0000000000000001 (NEEDED)             Shared library: [libpari-gmp.so.6]\n  0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]\n  0x0000000000000001 (NEEDED)             Shared library: [libgslcblas.so.0]\n  0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]\n  0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]\n  0x0000000000000001 (NEEDED)             Shared library: [libcurl.so.4]\n  0x0000000000000001 (NEEDED)             Shared library: [libglpk.so.40]\n  0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]\n  0x0000000000000001 (NEEDED)             Shared library: [libmpfi.so.0]\n  0x0000000000000001 (NEEDED)             Shared library: [libmpfr.so.6]\n  0x0000000000000001 (NEEDED)             Shared library: [libgmp.so.23]\n  0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]\n  0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n  0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n  0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\n  0x000000000000000e (SONAME)             Library soname: [libgiac.so.0]\n  0x000000000000001d (RUNPATH)            Library runpath: [/home/dimpase/sage/local/lib]\n  0x000000000000000c (INIT)               0x1a4f38\n  0x000000000000000d (FINI)               0xf4b6ec\n  0x0000000000000019 (INIT_ARRAY)         0x13b29a8\n  0x000000000000001b (INIT_ARRAYSZ)       424 (bytes)\n  0x000000000000001a (FINI_ARRAY)         0x13b2b50\n  0x000000000000001c (FINI_ARRAYSZ)       8 (bytes)\n  0x000000006ffffef5 (GNU_HASH)           0x1f0\n  0x0000000000000005 (STRTAB)             0x5b4e0\n  0x0000000000000006 (SYMTAB)             0x15268\n  0x000000000000000a (STRSZ)              617616 (bytes)\n  0x000000000000000b (SYMENT)             24 (bytes)\n  0x0000000000000003 (PLTGOT)             0x13e7000\n  0x0000000000000002 (PLTRELSZ)           150600 (bytes)\n  0x0000000000000014 (PLTREL)             RELA\n  0x0000000000000017 (JMPREL)             0x1802f0\n  0x0000000000000007 (RELA)               0xf80c0\n  0x0000000000000008 (RELASZ)             557616 (bytes)\n  0x0000000000000009 (RELAENT)            24 (bytes)\n  0x000000006ffffffe (VERNEED)            0xf7f00\n  0x000000006fffffff (VERNEEDNUM)         8\n  0x000000006ffffff0 (VERSYM)             0xf2170\n  0x000000006ffffff9 (RELACOUNT)          19508\n  0x0000000000000000 (NULL)               0x0\n```",
    "created_at": "2019-01-15T19:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408550",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'>Comment 48:</a>
indeed, here is the readelf result (on libgiac, which also has (wrong) libz linked in

 ```
 $ readelf -d local/lib/libgiac.so.0.0.0
 
 Dynamic section at offset 0x11e0b68 contains 41 entries:
   Tag        Type                         Name/Value
  0x0000000000000001 (NEEDED)             Shared library: [libntl.so.33]
  0x0000000000000001 (NEEDED)             Shared library: [libpari-gmp.so.6]
  0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]
  0x0000000000000001 (NEEDED)             Shared library: [libgslcblas.so.0]
  0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]
  0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
  0x0000000000000001 (NEEDED)             Shared library: [libcurl.so.4]
  0x0000000000000001 (NEEDED)             Shared library: [libglpk.so.40]
  0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]
  0x0000000000000001 (NEEDED)             Shared library: [libmpfi.so.0]
  0x0000000000000001 (NEEDED)             Shared library: [libmpfr.so.6]
  0x0000000000000001 (NEEDED)             Shared library: [libgmp.so.23]
  0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
  0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
  0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
  0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
  0x000000000000000e (SONAME)             Library soname: [libgiac.so.0]
  0x000000000000001d (RUNPATH)            Library runpath: [/home/dimpase/sage/local/lib]
  0x000000000000000c (INIT)               0x1a4f38
  0x000000000000000d (FINI)               0xf4b6ec
  0x0000000000000019 (INIT_ARRAY)         0x13b29a8
  0x000000000000001b (INIT_ARRAYSZ)       424 (bytes)
  0x000000000000001a (FINI_ARRAY)         0x13b2b50
  0x000000000000001c (FINI_ARRAYSZ)       8 (bytes)
  0x000000006ffffef5 (GNU_HASH)           0x1f0
  0x0000000000000005 (STRTAB)             0x5b4e0
  0x0000000000000006 (SYMTAB)             0x15268
  0x000000000000000a (STRSZ)              617616 (bytes)
  0x000000000000000b (SYMENT)             24 (bytes)
  0x0000000000000003 (PLTGOT)             0x13e7000
  0x0000000000000002 (PLTRELSZ)           150600 (bytes)
  0x0000000000000014 (PLTREL)             RELA
  0x0000000000000017 (JMPREL)             0x1802f0
  0x0000000000000007 (RELA)               0xf80c0
  0x0000000000000008 (RELASZ)             557616 (bytes)
  0x0000000000000009 (RELAENT)            24 (bytes)
  0x000000006ffffffe (VERNEED)            0xf7f00
  0x000000006fffffff (VERNEEDNUM)         8
  0x000000006ffffff0 (VERSYM)             0xf2170
  0x000000006ffffff9 (RELACOUNT)          19508
  0x0000000000000000 (NULL)               0x0
```



---

archive/issue_comments_408551.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nAfter some thinking `libcurl` is probably your culprit because you are using the system one and it would be linked to the system's `libz`.",
    "created_at": "2019-01-15T22:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408551",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'>Comment 49:</a>
After some thinking `libcurl` is probably your culprit because you are using the system one and it would be linked to the system's `libz`.



---

archive/issue_comments_408552.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nsystem's libz is linked by system's libcurl, indeed. Any way out?",
    "created_at": "2019-01-15T22:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408552",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'>Comment 50:</a>
system's libz is linked by system's libcurl, indeed. Any way out?



---

archive/issue_comments_408553.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nApart from \n* not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)\n* LD_PRELOAD of sage's libz\n* good old (DYLIB)LD_LIBRARY_PATH\nI don't think so. Something worthy of inspection in that regard is `R` on the same system.",
    "created_at": "2019-01-15T22:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408553",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:51'>Comment 51:</a>
Apart from 
* not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)
* LD_PRELOAD of sage's libz
* good old (DYLIB)LD_LIBRARY_PATH
I don't think so. Something worthy of inspection in that regard is `R` on the same system.



---

archive/issue_comments_408554.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nafter\n\n```\n--- a/build/pkgs/giac/spkg-install\n+++ b/build/pkgs/giac/spkg-install\n@@ -44,7 +44,7 @@ if [ \"$UNAME\" = \"Darwin\" ]; then\n     DISABLENLS=\"--disable-nls\"\n fi\n \n-sdh_configure --disable-gui --disable-ao --disable-lapack \"$DISABLENLS\"\n+sdh_configure --disable-gui --disable-ao --disable-lapack \"$DISABLENLS\" --enable-png=no\n \n #############################################################\n #   Build\n```\n\nI get just one test failure (due to giac output format change) in ptestlong \n\n```\nsage -t --long --warn-long 44.2 src/sage/interfaces/giac.py\n**********************************************************************\nFile \"src/sage/interfaces/giac.py\", line 619, in sage.interfaces.giac.Giac.eval\nFailed example:\n    giac(s)\nExpected:\n    (x)->{\n    x+1;\n    x+2;\n    }\nGot:\n    (x)->[x+1,x+2]\n```\n\nI am not 100% sure, but it looks like a good enough indication that everything works as expected. I'll try giac with `SAGE_CHECK=yes` now.",
    "created_at": "2019-01-16T07:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408554",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'>Comment 52:</a>
after

```
--- a/build/pkgs/giac/spkg-install
+++ b/build/pkgs/giac/spkg-install
@@ -44,7 +44,7 @@ if [ "$UNAME" = "Darwin" ]; then
     DISABLENLS="--disable-nls"
 fi
 
-sdh_configure --disable-gui --disable-ao --disable-lapack "$DISABLENLS"
+sdh_configure --disable-gui --disable-ao --disable-lapack "$DISABLENLS" --enable-png=no
 
 #############################################################
 #   Build
```

I get just one test failure (due to giac output format change) in ptestlong 

```
sage -t --long --warn-long 44.2 src/sage/interfaces/giac.py
**********************************************************************
File "src/sage/interfaces/giac.py", line 619, in sage.interfaces.giac.Giac.eval
Failed example:
    giac(s)
Expected:
    (x)->{
    x+1;
    x+2;
    }
Got:
    (x)->[x+1,x+2]
```

I am not 100% sure, but it looks like a good enough indication that everything works as expected. I'll try giac with `SAGE_CHECK=yes` now.



---

archive/issue_comments_408555.json:
```json
{
    "body": "Changed commit from **[bd3c3b1](https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e)** to **[aac9aab](https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737)**",
    "created_at": "2019-01-16T07:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd3c3b1](https://github.com/sagemath/sagetrac-mirror/commit/bd3c3b11404e593ad077e39b038b2e547e53138e)** to **[aac9aab](https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737)**



---

archive/issue_comments_408556.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d04a5fd913fe74433ffc0579b44738e63a0e1e80\">d04a5fd</a></td><td><code>do not link libpng</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737\">aac9aab</a></td><td><code>format change in giac output</code></td></tr></table>\n",
    "created_at": "2019-01-16T07:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408556",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:53'>Comment 53:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d04a5fd913fe74433ffc0579b44738e63a0e1e80">d04a5fd</a></td><td><code>do not link libpng</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737">aac9aab</a></td><td><code>format change in giac output</code></td></tr></table>




---

archive/issue_comments_408557.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@kiwifb](#comment%3A51):\n> Apart from \n> * not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)\n> * LD_PRELOAD of sage's libz\n> * good old (DYLIB)LD_LIBRARY_PATH\n> I don't think so. Something worthy of inspection in that regard is `R` on the same system.\n\nlibR.so links to Sage's version of libz here. I don't know how this happens.",
    "created_at": "2019-01-16T07:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408557",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@kiwifb](#comment%3A51):
> Apart from 
> * not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)
> * LD_PRELOAD of sage's libz
> * good old (DYLIB)LD_LIBRARY_PATH
> I don't think so. Something worthy of inspection in that regard is `R` on the same system.

libR.so links to Sage's version of libz here. I don't know how this happens.



---

archive/issue_comments_408558.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nYes I was thinking that R uses curl, but unlike giac, it uses zlib directly rather than through another library. So sage's zlib is probably loaded before libcurl's one.",
    "created_at": "2019-01-16T08:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408558",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:55'>Comment 55:</a>
Yes I was thinking that R uses curl, but unlike giac, it uses zlib directly rather than through another library. So sage's zlib is probably loaded before libcurl's one.



---

archive/issue_events_344642.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T09:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344642"
}
```



---

archive/issue_comments_408559.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-01-16T09:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408559",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_408560.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nwell, everything seems to be in order after this change. Reviews?",
    "created_at": "2019-01-16T09:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'>Comment 56:</a>
well, everything seems to be in order after this change. Reviews?



---

archive/issue_comments_408561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This ticket is to upgrade to Giac 1.5.\n \n-A preliminary version \"1.5.0 unstable\" is available for testing:\n+A version of giac-1.5.0 was announced at \n \n - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)\n - [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).\n@@ -10,6 +10,7 @@\n \n All that will be left to do in those tickets is add doctests.\n \n-I suppose we finally have stable 1.5.0, here\n+We finally have stable 1.5.0, here,\n+deemed stable by the author.\n \n tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz\n``````\n",
    "created_at": "2019-01-16T09:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408561",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This ticket is to upgrade to Giac 1.5.
 
-A preliminary version "1.5.0 unstable" is available for testing:
+A version of giac-1.5.0 was announced at 
 
 - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)
 - [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).
@@ -10,6 +10,7 @@
 
 All that will be left to do in those tickets is add doctests.
 
-I suppose we finally have stable 1.5.0, here
+We finally have stable 1.5.0, here,
+deemed stable by the author.
 
 tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz
``````




---

archive/issue_events_344643.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-01-16T09:49:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344643"
}
```



---

archive/issue_events_344644.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-01-16T09:49:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344644"
}
```



---

archive/issue_comments_408562.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nI would like `--disable-samplerate ` passed to configure as well. It breaks on some system because the version of `samplerate` is too new.",
    "created_at": "2019-01-16T09:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408562",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:58'>Comment 58:</a>
I would like `--disable-samplerate ` passed to configure as well. It breaks on some system because the version of `samplerate` is too new.



---

archive/issue_comments_408563.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This ticket is to upgrade to Giac 1.5.\n \n-A version of giac-1.5.0 was announced at \n+A preliminary version \"1.5.0 unstable\" is available for testing:\n \n - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)\n - [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).\n@@ -10,7 +10,6 @@\n \n All that will be left to do in those tickets is add doctests.\n \n-We finally have stable 1.5.0, here,\n-deemed stable by the author.\n+I suppose we finally have stable 1.5.0, here\n \n tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz\n``````\n",
    "created_at": "2019-01-16T09:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408563",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This ticket is to upgrade to Giac 1.5.
 
-A version of giac-1.5.0 was announced at 
+A preliminary version "1.5.0 unstable" is available for testing:
 
 - [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)
 - [source tarball for giac-1.5](https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/) (take latest giac-1.5.x-y).
@@ -10,7 +10,6 @@
 
 All that will be left to do in those tickets is add doctests.
 
-We finally have stable 1.5.0, here,
-deemed stable by the author.
+I suppose we finally have stable 1.5.0, here
 
 tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz
``````




---

archive/issue_comments_408564.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c\">5108e2b</a></td><td><code>added --disable-samplerate</code></td></tr></table>\n",
    "created_at": "2019-01-16T13:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408564",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>Comment 59:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c">5108e2b</a></td><td><code>added --disable-samplerate</code></td></tr></table>




---

archive/issue_comments_408565.json:
```json
{
    "body": "Changed commit from **[aac9aab](https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737)** to **[5108e2b](https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c)**",
    "created_at": "2019-01-16T13:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aac9aab](https://github.com/sagemath/sagetrac-mirror/commit/aac9aab5ba636946c71720ba428656e4e2347737)** to **[5108e2b](https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c)**



---

archive/issue_comments_408566.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\ndone.",
    "created_at": "2019-01-16T13:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408566",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'>Comment 60:</a>
done.



---

archive/issue_events_344645.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T13:22:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344645"
}
```



---

archive/issue_events_344646.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T13:22:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344646"
}
```



---

archive/issue_events_344647.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-16T16:40:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344647"
}
```



---

archive/issue_events_344648.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-16T16:40:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344648"
}
```



---

archive/issue_comments_408567.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\n1. You're not using `spkg-src` to create the new tarball, resulting in a huge tarball size.\n\n2. I'm not convinced that we can remove `alloca.patch`. It doesn't seem like upstream has applied that.",
    "created_at": "2019-01-16T16:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408567",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'>Comment 61:</a>
1. You're not using `spkg-src` to create the new tarball, resulting in a huge tarball size.

2. I'm not convinced that we can remove `alloca.patch`. It doesn't seem like upstream has applied that.



---

archive/issue_comments_408568.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nMaybe the alloca patch is fine after all. Upstream didn't literally apply our patch, but it's close enough.",
    "created_at": "2019-01-16T16:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408568",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'>Comment 62:</a>
Maybe the alloca patch is fine after all. Upstream didn't literally apply our patch, but it's close enough.



---

archive/issue_comments_408569.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743\">5986d80</a></td><td><code>smaller tarball</code></td></tr></table>\n",
    "created_at": "2019-01-16T21:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408569",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:63'>Comment 63:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743">5986d80</a></td><td><code>smaller tarball</code></td></tr></table>




---

archive/issue_comments_408570.json:
```json
{
    "body": "Changed commit from **[5108e2b](https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c)** to **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**",
    "created_at": "2019-01-16T21:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408570",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5108e2b](https://github.com/sagemath/sagetrac-mirror/commit/5108e2b0bb9f575ec15b237789804541a7ae851c)** to **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**



---

archive/issue_events_344649.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T22:06:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344649"
}
```



---

archive/issue_events_344650.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-16T22:06:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344650"
}
```



---

archive/issue_comments_408571.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,5 +11,5 @@\n All that will be left to do in those tickets is add doctests.\n \n I suppose we finally have stable 1.5.0, here\n-\n-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz\n+ (repacked):\n+tarball: http://users.ox.ac.uk/~coml0531/sage/giac-1.5.0.37.tar.bz2\n``````\n",
    "created_at": "2019-01-16T22:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408571",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,5 +11,5 @@
 All that will be left to do in those tickets is add doctests.
 
 I suppose we finally have stable 1.5.0, here
-
-tarball: https://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-37.tar.gz
+ (repacked):
+tarball: http://users.ox.ac.uk/~coml0531/sage/giac-1.5.0.37.tar.bz2
``````




---

archive/issue_comments_408572.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nLet's get on with this one.",
    "created_at": "2019-02-04T00:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408572",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:65'>Comment 65:</a>
Let's get on with this one.



---

archive/issue_events_344651.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-04T00:33:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344651"
}
```



---

archive/issue_events_344652.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-04T00:33:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344652"
}
```



---

archive/issue_comments_408573.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer**",
    "created_at": "2019-02-04T00:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408573",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey, Jeroen Demeyer**



---

archive/issue_events_344653.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-05T16:57:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344653"
}
```



---

archive/issue_events_344654.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7f44846a502b143bbd41492619a29fef9b385d20",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-05T16:57:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26315#event-344654"
}
```



---

archive/issue_comments_408574.json:
```json
{
    "body": "Changed branch from **[public/giac-1.5.0](https://github.com/sagemath/sagetrac-mirror/tree/public/giac-1.5.0)** to **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**",
    "created_at": "2019-02-05T16:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408574",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/giac-1.5.0](https://github.com/sagemath/sagetrac-mirror/tree/public/giac-1.5.0)** to **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)**



---

archive/issue_comments_408575.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nI just got this change on my Ubuntu 14.04 system and giac does not build:\n\n```\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':\n[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous\n[giac-1.5.0.37]      return isnan(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4145:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,\n[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,\n[giac-1.5.0.37]                  from first.h:498,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:234:12: note: int isnan(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]             ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:626:3: note: constexpr bool std::isnan(long double)\n[giac-1.5.0.37]    isnan(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:622:3: note: constexpr bool std::isnan(double)\n[giac-1.5.0.37]    isnan(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n[giac-1.5.0.37]    isnan(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':\n[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous\n[giac-1.5.0.37]      return isinf(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4158:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,\n[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,\n[giac-1.5.0.37]                  from first.h:498,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:201:12: note: int isinf(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]             ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:608:3: note: constexpr bool std::isinf(long double)\n[giac-1.5.0.37]    isinf(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:604:3: note: constexpr bool std::isinf(double)\n[giac-1.5.0.37]    isinf(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:600:3: note: constexpr bool std::isinf(float)\n[giac-1.5.0.37]    isinf(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] make[4]: *** [global.lo] Error 1\n```",
    "created_at": "2019-02-12T13:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408575",
    "user": "https://github.com/embray"
}
```

<a id='comment:67'>Comment 67:</a>
I just got this change on my Ubuntu 14.04 system and giac does not build:

```
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':
[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous
[giac-1.5.0.37]      return isnan(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4145:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,
[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,
[giac-1.5.0.37]                  from first.h:498,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:234:12: note: int isnan(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]             ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:626:3: note: constexpr bool std::isnan(long double)
[giac-1.5.0.37]    isnan(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:622:3: note: constexpr bool std::isnan(double)
[giac-1.5.0.37]    isnan(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)
[giac-1.5.0.37]    isnan(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':
[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous
[giac-1.5.0.37]      return isinf(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4158:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,
[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,
[giac-1.5.0.37]                  from first.h:498,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:201:12: note: int isinf(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]             ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:608:3: note: constexpr bool std::isinf(long double)
[giac-1.5.0.37]    isinf(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:604:3: note: constexpr bool std::isinf(double)
[giac-1.5.0.37]    isinf(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:600:3: note: constexpr bool std::isinf(float)
[giac-1.5.0.37]    isinf(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] make[4]: *** [global.lo] Error 1
```



---

archive/issue_comments_408576.json:
```json
{
    "body": "Changed commit from **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)** to none",
    "created_at": "2019-02-12T13:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408576",
    "user": "https://github.com/embray"
}
```

Changed commit from **[5986d80](https://github.com/sagemath/sagetrac-mirror/commit/5986d807456bd69b092c90ff43692b9f72078743)** to none



---

archive/issue_comments_408577.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nReplying to [@embray](#comment%3A67):\n> I just got this change on my Ubuntu 14.04 system and giac does not build:\n> \n> ```\n> ```\n> [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n\n...\n> }}}\n\nhmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?",
    "created_at": "2019-02-12T13:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408577",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'>Comment 68:</a>
Replying to [@embray](#comment%3A67):
> I just got this change on my Ubuntu 14.04 system and giac does not build:
> 
> ```
> ```
> [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)

...
> }}}

hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?



---

archive/issue_comments_408578.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nApparently this may actually be a bug in some older libstdc++ https://stackoverflow.com/a/33770775/982257",
    "created_at": "2019-02-12T13:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408578",
    "user": "https://github.com/embray"
}
```

<a id='comment:69'>Comment 69:</a>
Apparently this may actually be a bug in some older libstdc++ https://stackoverflow.com/a/33770775/982257



---

archive/issue_comments_408579.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nReplying to [@dimpase](#comment%3A68):\n> Replying to [@embray](#comment%3A67):\n> > I just got this change on my Ubuntu 14.04 system and giac does not build:\n> > \n> > ```\n> > ```\n> > [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n\n> ...\n> > }}}\n\n> hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?\n> \n\nIt's definitely getting up there.  I'll be annoyed if I have to distupgrade this machine, but at the same time it may be inevitable quite soon anyways.  Regardless, I've made it this far, and if a simple `::isnan` is enough to fix it...",
    "created_at": "2019-02-12T13:56:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408579",
    "user": "https://github.com/embray"
}
```

<a id='comment:70'>Comment 70:</a>
Replying to [@dimpase](#comment%3A68):
> Replying to [@embray](#comment%3A67):
> > I just got this change on my Ubuntu 14.04 system and giac does not build:
> > 
> > ```
> > ```
> > [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)

> ...
> > }}}

> hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?
> 

It's definitely getting up there.  I'll be annoyed if I have to distupgrade this machine, but at the same time it may be inevitable quite soon anyways.  Regardless, I've made it this far, and if a simple `::isnan` is enough to fix it...



---

archive/issue_comments_408580.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nInterestingly, the code where this is coming up is already in a `my_isnan` function defined in `src/global.cc` like:\n\n```\n#if defined(FIR_LINUX) || defined(FIR_ANDROID)\n    return std::isnan(d);\n#else\n    return isnan(d);\n#endif\n```\n\nwhere if `FIR_LINUX` is defined it will do the right thing I think.  But I have no idea what this macro `FIR_LINUX` means, or what `FIR` means, nor is it at all clear how it gets set.",
    "created_at": "2019-02-12T14:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408580",
    "user": "https://github.com/embray"
}
```

<a id='comment:71'>Comment 71:</a>
Interestingly, the code where this is coming up is already in a `my_isnan` function defined in `src/global.cc` like:

```
#if defined(FIR_LINUX) || defined(FIR_ANDROID)
    return std::isnan(d);
#else
    return isnan(d);
#endif
```

where if `FIR_LINUX` is defined it will do the right thing I think.  But I have no idea what this macro `FIR_LINUX` means, or what `FIR` means, nor is it at all clear how it gets set.



---

archive/issue_comments_408581.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nIMO we should never \"upgrade\" packages that don't even have publicly accessible source code repositories.  It makes it impossible to debug what changed between versions if something goes wrong.  Incredible.",
    "created_at": "2019-02-12T14:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408581",
    "user": "https://github.com/embray"
}
```

<a id='comment:72'>Comment 72:</a>
IMO we should never "upgrade" packages that don't even have publicly accessible source code repositories.  It makes it impossible to debug what changed between versions if something goes wrong.  Incredible.



---

archive/issue_comments_408582.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\nThe source code repository of Giac is available as part of the Geogebra one:\n\n- https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/",
    "created_at": "2019-02-12T15:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408582",
    "user": "https://github.com/slel"
}
```

<a id='comment:73'>Comment 73:</a>
The source code repository of Giac is available as part of the Geogebra one:

- https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/



---

archive/issue_comments_408583.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nReplying to [@slel](#comment%3A73):\n> The source code repository of Giac is available as part of the Geogebra one:\n> \n> - https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/\n\nFor some reason I thought they were just vendoring giac on a version-by-version basis, but it turns out I'm wrong.  ~~This seems to actually *be* the repository for giac.  Nice find!!~~\n\nUpon closer inspection no, it can't be.  It seems like somehow bits of giac are being synced into this repository, but it's not the full source code for giac.  So I'm really confused.",
    "created_at": "2019-02-21T13:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408583",
    "user": "https://github.com/embray"
}
```

<a id='comment:74'>Comment 74:</a>
Replying to [@slel](#comment%3A73):
> The source code repository of Giac is available as part of the Geogebra one:
> 
> - https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/

For some reason I thought they were just vendoring giac on a version-by-version basis, but it turns out I'm wrong.  ~~This seems to actually *be* the repository for giac.  Nice find!!~~

Upon closer inspection no, it can't be.  It seems like somehow bits of giac are being synced into this repository, but it's not the full source code for giac.  So I'm really confused.



---

archive/issue_comments_408584.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nI think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.",
    "created_at": "2019-02-28T10:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408584",
    "user": "https://github.com/embray"
}
```

<a id='comment:75'>Comment 75:</a>
I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.



---

archive/issue_comments_408585.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nReplying to [@embray](#comment%3A75):\n> I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.\n\nWell, I tried it a few more times and it worked, so if there *is* a problem it's not easy to reproduce. At the very least, then, there's nothing to do for now until and unless I can reproduce the problem again.  If so, I'll just open a new ticket about it.",
    "created_at": "2019-02-28T10:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408585",
    "user": "https://github.com/embray"
}
```

<a id='comment:76'>Comment 76:</a>
Replying to [@embray](#comment%3A75):
> I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.

Well, I tried it a few more times and it worked, so if there *is* a problem it's not easy to reproduce. At the very least, then, there's nothing to do for now until and unless I can reproduce the problem again.  If so, I'll just open a new ticket about it.



---

archive/issue_comments_408586.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nFor #25822 and #25324 are there specific fixes from upstream that we know of that could easily be applied as patches?  I'm wondering if we couldn't partially revert back to the old giac, plus patches for any specific known issues that this was meant to fix, until and unless I can figure out what's going on with #27385.",
    "created_at": "2019-03-04T14:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408586",
    "user": "https://github.com/embray"
}
```

<a id='comment:77'>Comment 77:</a>
For #25822 and #25324 are there specific fixes from upstream that we know of that could easily be applied as patches?  I'm wondering if we couldn't partially revert back to the old giac, plus patches for any specific known issues that this was meant to fix, until and unless I can figure out what's going on with #27385.



---

archive/issue_comments_408587.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nI don't know about any specific patches - it took several iterations of communicating with Giac's author to fix Clang 6.0-specific bugs on giac's forum.",
    "created_at": "2019-03-04T14:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26315#issuecomment-408587",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:78'>Comment 78:</a>
I don't know about any specific patches - it took several iterations of communicating with Giac's author to fix Clang 6.0-specific bugs on giac's forum.
